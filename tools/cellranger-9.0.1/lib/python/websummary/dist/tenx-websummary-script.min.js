(()=>{var e={21080:(e,t,n)=>{"use strict";n.d(t,{A:()=>pe});var r=n(75240),i=n.n(r),a=n(34761),o=n.n(a),s=n(94372),l=n.n(s),c=new URL(n(77035),n.b),u=new URL(n(43470),n.b),f=new URL(n(68164),n.b),d=new URL(n(64665),n.b),h=new URL(n(4890),n.b),p=new URL(n(13363),n.b),m=new URL(n(13490),n.b),g=new URL(n(47603),n.b),v=new URL(n(13913),n.b),y=new URL(n(91413),n.b),b=new URL(n(64643),n.b),x=new URL(n(80216),n.b),_=new URL(n(61907),n.b),w=new URL(n(68605),n.b),A=new URL(n(25446),n.b),k=new URL(n(56694),n.b),E=new URL(n(24420),n.b),T=new URL(n(75796),n.b),M=new URL(n(92228),n.b),S=new URL(n(9819),n.b),C=new URL(n(47695),n.b),O=new URL(n(28869),n.b),R=new URL(n(30557),n.b),N=new URL(n(48460),n.b),L=new URL(n(56539),n.b),D=new URL(n(43737),n.b),P=new URL(n(47914),n.b),I=new URL(n(26117),n.b),F=new URL(n(66311),n.b),z=o()(i()),j=l()(c),B=l()(u),U=l()(f),$=l()(d),q=l()(h),H=l()(p),V=l()(m),W=l()(g),G=l()(v),Y=l()(y),X=l()(b),K=l()(x),Z=l()(_),J=l()(w),Q=l()(A),ee=l()(k),te=l()(E),ne=l()(T),re=l()(M),ie=l()(S),ae=l()(C),oe=l()(O),se=l()(R),le=l()(N),ce=l()(L),ue=l()(D),fe=l()(P),de=l()(I),he=l()(F);z.push([e.id,`.maplibregl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgb(0 0 0/0)}.maplibregl-canvas{left:0;position:absolute;top:0}.maplibregl-map:fullscreen{height:100%;width:100%}.maplibregl-ctrl-group button.maplibregl-ctrl-compass{touch-action:none}.maplibregl-canvas-container.maplibregl-interactive,.maplibregl-ctrl-group button.maplibregl-ctrl-compass{cursor:grab;-webkit-user-select:none;-moz-user-select:none;user-select:none}.maplibregl-canvas-container.maplibregl-interactive.maplibregl-track-pointer{cursor:pointer}.maplibregl-canvas-container.maplibregl-interactive:active,.maplibregl-ctrl-group button.maplibregl-ctrl-compass:active{cursor:grabbing}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-canvas-container.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:pinch-zoom}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:none}.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures,.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-ctrl-bottom-left,.maplibregl-ctrl-bottom-right,.maplibregl-ctrl-top-left,.maplibregl-ctrl-top-right{pointer-events:none;position:absolute;z-index:2}.maplibregl-ctrl-top-left{left:0;top:0}.maplibregl-ctrl-top-right{right:0;top:0}.maplibregl-ctrl-bottom-left{bottom:0;left:0}.maplibregl-ctrl-bottom-right{bottom:0;right:0}.maplibregl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.maplibregl-ctrl-top-left .maplibregl-ctrl{float:left;margin:10px 0 0 10px}.maplibregl-ctrl-top-right .maplibregl-ctrl{float:right;margin:10px 10px 0 0}.maplibregl-ctrl-bottom-left .maplibregl-ctrl{float:left;margin:0 0 10px 10px}.maplibregl-ctrl-bottom-right .maplibregl-ctrl{float:right;margin:0 10px 10px 0}.maplibregl-ctrl-group{background:#fff;border-radius:4px}.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (forced-colors:active){.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.maplibregl-ctrl-group button{background-color:transparent;border:0;box-sizing:border-box;cursor:pointer;display:block;height:29px;outline:none;padding:0;width:29px}.maplibregl-ctrl-group button+button{border-top:1px solid #ddd}.maplibregl-ctrl button .maplibregl-ctrl-icon{background-position:50%;background-repeat:no-repeat;display:block;height:100%;width:100%}@media (forced-colors:active){.maplibregl-ctrl-icon{background-color:transparent}.maplibregl-ctrl-group button+button{border-top:1px solid ButtonText}}.maplibregl-ctrl button::-moz-focus-inner{border:0;padding:0}.maplibregl-ctrl-attrib-button:focus,.maplibregl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl button:disabled{cursor:not-allowed}.maplibregl-ctrl button:disabled .maplibregl-ctrl-icon{opacity:.25}.maplibregl-ctrl button:not(:disabled):hover{background-color:rgb(0 0 0/5%)}.maplibregl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.maplibregl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.maplibregl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.maplibregl-ctrl-group button:focus:only-child{border-radius:inherit}.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url(${j})}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url(${B})}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url(${U})}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url(${$})}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url(${q})}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url(${H})}}.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url(${V})}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url(${W})}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url(${G})}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url(${Y})}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url(${X})}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url(${W})}}.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url(${K})}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url(${Z})}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url(${J})}}.maplibregl-ctrl button.maplibregl-ctrl-terrain .maplibregl-ctrl-icon{background-image:url(${Q})}.maplibregl-ctrl button.maplibregl-ctrl-terrain-enabled .maplibregl-ctrl-icon{background-image:url(${ee})}.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url(${te})}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url(${ne})}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url(${re})}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url(${ie})}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url(${ae})}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url(${oe})}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-waiting .maplibregl-ctrl-icon{animation:maplibregl-spin 2s linear infinite}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url(${se})}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url(${le})}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url(${re})}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url(${ie})}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url(${ae})}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url(${oe})}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url(${ce})}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url(${ue})}}@keyframes maplibregl-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}a.maplibregl-ctrl-logo{background-image:url(${fe});background-repeat:no-repeat;cursor:pointer;display:block;height:23px;margin:0 0 -4px -4px;overflow:hidden;width:88px}a.maplibregl-ctrl-logo.maplibregl-compact{width:14px}@media (forced-colors:active){a.maplibregl-ctrl-logo{background-color:transparent;background-image:url(${fe})}}@media (forced-colors:active) and (prefers-color-scheme:light){a.maplibregl-ctrl-logo{background-image:url(${fe})}}.maplibregl-ctrl.maplibregl-ctrl-attrib{background-color:hsla(0,0%,100%,.5);margin:0;padding:0 5px}@media screen{.maplibregl-ctrl-attrib.maplibregl-compact{background-color:#fff;border-radius:12px;box-sizing:content-box;color:#000;margin:10px;min-height:20px;padding:2px 24px 2px 0;position:relative}.maplibregl-ctrl-attrib.maplibregl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact-show,.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact-show{border-radius:12px;padding:2px 8px 2px 28px}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-inner{display:none}.maplibregl-ctrl-attrib-button{background-color:hsla(0,0%,100%,.5);background-image:url(${de});border:0;border-radius:12px;box-sizing:border-box;cursor:pointer;display:none;height:24px;outline:none;position:absolute;right:0;top:0;width:24px}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;list-style:none}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button::-webkit-details-marker{display:none}.maplibregl-ctrl-bottom-left .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-top-left .maplibregl-ctrl-attrib-button{left:0}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-inner{display:block}.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-button{background-color:rgb(0 0 0/5%)}.maplibregl-ctrl-bottom-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;right:0}.maplibregl-ctrl-top-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{right:0;top:0}.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{left:0;top:0}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;left:0}}@media screen and (forced-colors:active){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url(${he})}}@media screen and (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url(${de})}}.maplibregl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.maplibregl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.maplibregl-attrib-empty{display:none}.maplibregl-ctrl-scale{background-color:hsla(0,0%,100%,.75);border:2px solid #333;border-top:#333;box-sizing:border-box;color:#333;font-size:10px;padding:0 5px}.maplibregl-popup{display:flex;left:0;pointer-events:none;position:absolute;top:0;will-change:transform}.maplibregl-popup-anchor-top,.maplibregl-popup-anchor-top-left,.maplibregl-popup-anchor-top-right{flex-direction:column}.maplibregl-popup-anchor-bottom,.maplibregl-popup-anchor-bottom-left,.maplibregl-popup-anchor-bottom-right{flex-direction:column-reverse}.maplibregl-popup-anchor-left{flex-direction:row}.maplibregl-popup-anchor-right{flex-direction:row-reverse}.maplibregl-popup-tip{border:10px solid transparent;height:0;width:0;z-index:1}.maplibregl-popup-anchor-top .maplibregl-popup-tip{align-self:center;border-bottom-color:#fff;border-top:none}.maplibregl-popup-anchor-top-left .maplibregl-popup-tip{align-self:flex-start;border-bottom-color:#fff;border-left:none;border-top:none}.maplibregl-popup-anchor-top-right .maplibregl-popup-tip{align-self:flex-end;border-bottom-color:#fff;border-right:none;border-top:none}.maplibregl-popup-anchor-bottom .maplibregl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.maplibregl-popup-anchor-left .maplibregl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.maplibregl-popup-anchor-right .maplibregl-popup-tip{align-self:center;border-left-color:#fff;border-right:none}.maplibregl-popup-close-button{background-color:transparent;border:0;border-radius:0 3px 0 0;cursor:pointer;position:absolute;right:0;top:0}.maplibregl-popup-close-button:hover{background-color:rgb(0 0 0/5%)}.maplibregl-popup-content{background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:15px 10px;pointer-events:auto;position:relative}.maplibregl-popup-anchor-top-left .maplibregl-popup-content{border-top-left-radius:0}.maplibregl-popup-anchor-top-right .maplibregl-popup-content{border-top-right-radius:0}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-content{border-bottom-left-radius:0}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-content{border-bottom-right-radius:0}.maplibregl-popup-track-pointer{display:none}.maplibregl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.maplibregl-map:hover .maplibregl-popup-track-pointer{display:flex}.maplibregl-map:active .maplibregl-popup-track-pointer{display:none}.maplibregl-marker{left:0;position:absolute;top:0;transition:opacity .2s;will-change:transform}.maplibregl-user-location-dot,.maplibregl-user-location-dot:before{background-color:#1da1f2;border-radius:50%;height:15px;width:15px}.maplibregl-user-location-dot:before{animation:maplibregl-user-location-dot-pulse 2s infinite;content:"";position:absolute}.maplibregl-user-location-dot:after{border:2px solid #fff;border-radius:50%;box-shadow:0 0 3px rgba(0,0,0,.35);box-sizing:border-box;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px}@keyframes maplibregl-user-location-dot-pulse{0%{opacity:1;transform:scale(1)}70%{opacity:0;transform:scale(3)}to{opacity:0;transform:scale(1)}}.maplibregl-user-location-dot-stale{background-color:#aaa}.maplibregl-user-location-dot-stale:after{display:none}.maplibregl-user-location-accuracy-circle{background-color:#1da1f233;border-radius:100%;height:1px;width:1px}.maplibregl-crosshair,.maplibregl-crosshair .maplibregl-interactive,.maplibregl-crosshair .maplibregl-interactive:active{cursor:crosshair}.maplibregl-boxzoom{background:#fff;border:2px dotted #202020;height:0;left:0;opacity:.5;position:absolute;top:0;width:0}.maplibregl-cooperative-gesture-screen{align-items:center;background:rgba(0,0,0,.4);color:#fff;display:flex;font-size:1.4em;inset:0;justify-content:center;line-height:1.2;opacity:0;padding:1rem;pointer-events:none;position:absolute;transition:opacity 1s ease 1s;z-index:99999}.maplibregl-cooperative-gesture-screen.maplibregl-show{opacity:1;transition:opacity .05s}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:none}@media (hover:none),(width <= 480px){.maplibregl-cooperative-gesture-screen .maplibregl-desktop-message{display:none}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:block}}.maplibregl-pseudo-fullscreen{height:100%!important;left:0!important;position:fixed!important;top:0!important;width:100%!important;z-index:99999}`,""]);const pe=z},85003:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(75240),i=n.n(r),a=n(34761),o=n.n(a)()(i());o.push([e.id,"/**\n* Rangeslider\n*/\n.rangeslider {\n  margin: 20px 0;\n  position: relative;\n  background: #e6e6e6;\n  -ms-touch-action: none;\n  touch-action: none;\n}\n.rangeslider,\n.rangeslider .rangeslider__fill {\n  display: block;\n  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.4);\n}\n.rangeslider .rangeslider__handle {\n  background: #fff;\n  border: 1px solid #ccc;\n  cursor: pointer;\n  display: inline-block;\n  position: absolute;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.4), 0 -1px 3px rgba(0, 0, 0, 0.4);\n}\n.rangeslider .rangeslider__handle .rangeslider__active {\n  opacity: 1;\n}\n.rangeslider .rangeslider__handle-tooltip {\n  width: 40px;\n  height: 40px;\n  text-align: center;\n  position: absolute;\n  background-color: rgba(0, 0, 0, 0.8);\n  font-weight: normal;\n  font-size: 14px;\n  transition: all 100ms ease-in;\n  border-radius: 4px;\n  display: inline-block;\n  color: white;\n  left: 50%;\n  transform: translate3d(-50%, 0, 0);\n}\n.rangeslider .rangeslider__handle-tooltip span {\n  margin-top: 12px;\n  display: inline-block;\n  line-height: 100%;\n}\n.rangeslider .rangeslider__handle-tooltip:after {\n  content: ' ';\n  position: absolute;\n  width: 0;\n  height: 0;\n}\n/**\n* Rangeslider - Horizontal slider\n*/\n.rangeslider-horizontal {\n  height: 12px;\n  border-radius: 10px;\n}\n.rangeslider-horizontal .rangeslider__fill {\n  height: 100%;\n  background-color: #7cb342;\n  border-radius: 10px;\n  top: 0;\n}\n.rangeslider-horizontal .rangeslider__handle {\n  width: 30px;\n  height: 30px;\n  border-radius: 30px;\n  top: 50%;\n  transform: translate3d(-50%, -50%, 0);\n}\n.rangeslider-horizontal .rangeslider__handle:after {\n  content: ' ';\n  position: absolute;\n  width: 16px;\n  height: 16px;\n  top: 6px;\n  left: 6px;\n  border-radius: 50%;\n  background-color: #dadada;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.4) inset, 0 -1px 3px rgba(0, 0, 0, 0.4) inset;\n}\n.rangeslider-horizontal .rangeslider__handle-tooltip {\n  top: -55px;\n}\n.rangeslider-horizontal .rangeslider__handle-tooltip:after {\n  border-left: 8px solid transparent;\n  border-right: 8px solid transparent;\n  border-top: 8px solid rgba(0, 0, 0, 0.8);\n  left: 50%;\n  bottom: -8px;\n  transform: translate3d(-50%, 0, 0);\n}\n/**\n* Rangeslider - Vertical slider\n*/\n.rangeslider-vertical {\n  margin: 20px auto;\n  height: 150px;\n  max-width: 10px;\n  background-color: transparent;\n}\n.rangeslider-vertical .rangeslider__fill,\n.rangeslider-vertical .rangeslider__handle {\n  position: absolute;\n}\n.rangeslider-vertical .rangeslider__fill {\n  width: 100%;\n  background-color: #7cb342;\n  box-shadow: none;\n  bottom: 0;\n}\n.rangeslider-vertical .rangeslider__handle {\n  width: 30px;\n  height: 10px;\n  left: -10px;\n  box-shadow: none;\n}\n.rangeslider-vertical .rangeslider__handle-tooltip {\n  left: -100%;\n  top: 50%;\n  transform: translate3d(-50%, -50%, 0);\n}\n.rangeslider-vertical .rangeslider__handle-tooltip:after {\n  border-top: 8px solid transparent;\n  border-bottom: 8px solid transparent;\n  border-left: 8px solid rgba(0, 0, 0, 0.8);\n  left: 100%;\n  top: 12px;\n}\n/**\n* Rangeslider - Reverse\n*/\n.rangeslider-reverse.rangeslider-horizontal .rangeslider__fill {\n  right: 0;\n}\n.rangeslider-reverse.rangeslider-vertical .rangeslider__fill {\n  top: 0;\n  bottom: inherit;\n}\n/**\n* Rangeslider - Labels\n*/\n.rangeslider__labels {\n  position: relative;\n}\n.rangeslider-vertical .rangeslider__labels {\n  position: relative;\n  list-style-type: none;\n  margin: 0 0 0 24px;\n  padding: 0;\n  text-align: left;\n  width: 250px;\n  height: 100%;\n  left: 10px;\n}\n.rangeslider-vertical .rangeslider__labels .rangeslider__label-item {\n  position: absolute;\n  transform: translate3d(0, -50%, 0);\n}\n.rangeslider-vertical .rangeslider__labels .rangeslider__label-item::before {\n  content: '';\n  width: 10px;\n  height: 2px;\n  background: black;\n  position: absolute;\n  left: -14px;\n  top: 50%;\n  transform: translateY(-50%);\n  z-index: -1;\n}\n.rangeslider__labels .rangeslider__label-item {\n  position: absolute;\n  font-size: 14px;\n  cursor: pointer;\n  display: inline-block;\n  top: 10px;\n  transform: translate3d(-50%, 0, 0);\n}\n",""]);const s=o},87351:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(75240),i=n.n(r),a=n(34761),o=n.n(a)()(i());o.push([e.id,".rthfc .rt-thead.-headerGroups,\n.rthfc .rt-thead.-header {\n  z-index: 3;\n}\n\n.rthfc .rt-thead.-filters {\n  z-index: 2;\n}\n\n.rthfc .rt-th,\n.rthfc .rt-td {\n  background-color: #fff;\n}\n\n.rthfc .-headerGroups .rt-th {\n  background-color: #f7f7f7;\n}\n\n.rthfc.-striped .rt-tr.-odd .rt-td {\n  background-color: #f7f7f7;\n}\n\n.rthfc.-highlight .rt-tr:hover .rt-td {\n  background-color: #f2f2f2;\n}\n\n.rthfc .-filters .rt-th.rthfc-th-fixed-left-last,\n.rthfc .rt-th.rthfc-th-fixed-left-last,\n.rthfc .rt-td.rthfc-td-fixed-left-last {\n  border-right: solid 1px #ccc;\n}\n\n.rthfc .rt-th.rthfc-th-fixed-right-first,\n.rthfc .rt-td.rthfc-td-fixed-right-first {\n  border-left: solid 1px #ccc;\n}\n\n/*------------ Sticky position version: -sp ------------*/\n\n.rthfc.-sp .rt-tbody {\n  overflow: visible;\n  flex: 1 0 auto;\n}\n\n.rthfc.-sp .rt-thead {\n  position: -webkit-sticky;\n  position: sticky;\n}\n\n.rthfc.-sp .rt-thead.-headerGroups {\n  border-bottom-color: #f2f2f2;\n}\n\n.rthfc.-sp .rt-tfoot {\n  position: -webkit-sticky;\n  position: sticky;\n  z-index: 1;\n  bottom: 0px;\n}\n\n.rthfc.-sp .rthfc-th-fixed,\n.rthfc.-sp .rthfc-td-fixed {\n  position: -webkit-sticky;\n  position: sticky;\n  z-index: 1;\n}\n\n.rthfc.-sp .rthfc-th-fixed {\n  /* set z-index = 11 because rt-resizer has z-index = 10 */\n  z-index: 11;\n}\n\n.rthfc.-sp .rthfc-th-fixed-left,\n.rthfc.-sp .rthfc-td-fixed-left {\n  left: 0;\n}\n\n.rthfc.-sp .rthfc-th-fixed-right,\n.rthfc.-sp .rthfc-td-fixed-right {\n  left: 0;\n}\n\n/*------------ scroll event version: -se ------------*/\n\n.rthfc.-se .-header .rt-th.rthfc-th-fixed,\n.rthfc.-se .-headerGroups .rt-th.rthfc-th-fixed,\n.rthfc.-se .-filters .rt-th.rthfc-th-fixed,\n.rthfc.-se .rt-td.rthfc-td-fixed {\n  position: relative;\n  z-Index: 1;\n}\n\n.rthfc.-se .-header .rt-th.rthfc-th-fixed {\n  /* set z-index = 11 because rt-resizer has z-index = 10 */\n  z-Index: 11;\n}\n",""]);const s=o},34761:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,a){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(o[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);r&&o[u[0]]||(void 0!==a&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=a),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),t.push(u))}},t}},94372:e=>{"use strict";e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},75240:e=>{"use strict";e.exports=function(e){return e[1]}},16923:(e,t,n)=>{"use strict";n.r(t),n.d(t,{sankeyCenter:()=>g,sankeyCircular:()=>D,sankeyJustify:()=>m,sankeyLeft:()=>h,sankeyRight:()=>p});var r=n(11136),i=n(53827),a=n(92766),o=n(27046),s=n(60583),l=n(48779),c=n(80783),u=n(86723),f=n.n(u);function d(e){return e.target.depth}function h(e){return e.depth}function p(e,t){return t-1-e.height}function m(e,t){return e.sourceLinks.length?e.depth:t-1}function g(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?(0,r.A)(e.sourceLinks,d)-1:0}function v(e){return function(){return e}}var y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function b(e,t){return _(e.source,t.source)||e.index-t.index}function x(e,t){return _(e.target,t.target)||e.index-t.index}function _(e,t){return e.partOfCycle===t.partOfCycle?e.y0-t.y0:"top"===e.circularLinkType||"bottom"===t.circularLinkType?-1:1}function w(e){return e.value}function A(e){return(e.y0+e.y1)/2}function k(e){return A(e.source)}function E(e){return A(e.target)}function T(e){return e.index}function M(e){return e.nodes}function S(e){return e.links}function C(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function O(e,t){return t(e)}var R=25,N=10,L=.3;function D(){var e,t,n=0,c=0,u=1,d=1,h=24,p=T,g=m,O=M,D=S,I=32,z=2,j=null;function U(){var m={nodes:O.apply(null,arguments),links:D.apply(null,arguments)};!function(e){e.nodes.forEach((function(e,t){e.index=t,e.sourceLinks=[],e.targetLinks=[]}));var t=(0,l.Tj)(e.nodes,p);e.links.forEach((function(e,n){e.index=n;var r=e.source,i=e.target;"object"!==(void 0===r?"undefined":y(r))&&(r=e.source=C(t,r)),"object"!==(void 0===i?"undefined":y(i))&&(i=e.target=C(t,i)),r.sourceLinks.push(e),i.targetLinks.push(e)}))}(m),function(e,t,n){var r=0;if(null===n){for(var i=[],a=0;a<e.links.length;a++){var o=e.links[a],s=o.source.index,l=o.target.index;i[s]||(i[s]=[]),i[l]||(i[l]=[]),-1===i[s].indexOf(l)&&i[s].push(l)}var c=f()(i);c.sort((function(e,t){return e.length-t.length}));var u={};for(a=0;a<c.length;a++){var d=c[a].slice(-2);u[d[0]]||(u[d[0]]={}),u[d[0]][d[1]]=!0}e.links.forEach((function(e){var t=e.target.index,n=e.source.index;t===n||u[n]&&u[n][t]?(e.circular=!0,e.circularLinkID=r,r+=1):e.circular=!1}))}else e.links.forEach((function(e){e.source[n]<e.target[n]?e.circular=!1:(e.circular=!0,e.circularLinkID=r,r+=1)}))}(m,0,j),function(e){e.nodes.forEach((function(e){e.partOfCycle=!1,e.value=Math.max((0,i.A)(e.sourceLinks,w),(0,i.A)(e.targetLinks,w)),e.sourceLinks.forEach((function(t){t.circular&&(e.partOfCycle=!0,e.circularLinkType=t.circularLinkType)})),e.targetLinks.forEach((function(t){t.circular&&(e.partOfCycle=!0,e.circularLinkType=t.circularLinkType)}))}))}(m),function(e){var t,n,r;for(t=e.nodes,n=[],r=0;t.length;++r,t=n,n=[])t.forEach((function(e){e.depth=r,e.sourceLinks.forEach((function(e){n.indexOf(e.target)<0&&!e.circular&&n.push(e.target)}))}));for(t=e.nodes,n=[],r=0;t.length;++r,t=n,n=[])t.forEach((function(e){e.height=r,e.targetLinks.forEach((function(e){n.indexOf(e.source)<0&&!e.circular&&n.push(e.source)}))}));e.nodes.forEach((function(e){e.column=Math.floor(g.call(null,e,r))}))}(m),P(m,p),function(f,p,m){var g=(0,l.$I)().key((function(e){return e.column})).sortKeys(o.A).entries(f.nodes).map((function(e){return e.values}));b(m),T();for(var v=1,y=p;y>0;--y)x(v*=.99,m),T();function b(o){if(t){var s=1/0;g.forEach((function(e){var n=d*t/(e.length+1);s=n<s?n:s})),e=s}var l=(0,r.A)(g,(function(t){return(d-c-(t.length-1)*e)/(0,i.A)(t,w)}));l*=L,f.links.forEach((function(e){e.width=e.value*l}));var p=function(e){var t=0,n=0,r=0,i=0,o=(0,a.A)(e.nodes,(function(e){return e.column}));return e.links.forEach((function(e){e.circular&&("top"==e.circularLinkType?t+=e.width:n+=e.width,0==e.target.column&&(i+=e.width),e.source.column==o&&(r+=e.width))})),{top:t=t>0?t+R+N:t,bottom:n=n>0?n+R+N:n,left:i=i>0?i+R+N:i,right:r=r>0?r+R+N:r}}(f),m=function(e,t){var r=(0,a.A)(e.nodes,(function(e){return e.column})),i=u-n,o=d-c,s=i+t.right+t.left,l=o+t.top+t.bottom,f=i/s,p=o/l;return n=n*f+t.left,u=0==t.right?u:u*f,c=c*p+t.top,d*=p,e.nodes.forEach((function(e){e.x0=n+e.column*((u-n-h)/r),e.x1=e.x0+h})),p}(f,p);l*=m,f.links.forEach((function(e){e.width=e.value*l})),g.forEach((function(e){var t=e.length;e.forEach((function(e,n){e.depth==g.length-1&&1==t||0==e.depth&&1==t?(e.y0=d/2-e.value*l,e.y1=e.y0+e.value*l):e.partOfCycle?0==F(e,o)?(e.y0=d/2+n,e.y1=e.y0+e.value*l):"top"==e.circularLinkType?(e.y0=c+n,e.y1=e.y0+e.value*l):(e.y0=d-e.value*l-n,e.y1=e.y0+e.value*l):0==p.top||0==p.bottom?(e.y0=(d-c)/t*n,e.y1=e.y0+e.value*l):(e.y0=(d-c)/2-t/2+n,e.y1=e.y0+e.value*l)}))}))}function x(e,t){var n=g.length;g.forEach((function(r){var i=r.length,a=r[0].depth;r.forEach((function(r){var o;if(r.sourceLinks.length||r.targetLinks.length)if(r.partOfCycle&&F(r,t)>0);else if(0==a&&1==i)o=r.y1-r.y0,r.y0=d/2-o/2,r.y1=d/2+o/2;else if(a==n-1&&1==i)o=r.y1-r.y0,r.y0=d/2-o/2,r.y1=d/2+o/2;else{var l=(0,s.A)(r.sourceLinks,E),c=(0,s.A)(r.targetLinks,k),u=((l&&c?(l+c)/2:l||c)-A(r))*e;r.y0+=u,r.y1+=u}}))}))}function T(){g.forEach((function(t){var n,r,i,a=c,o=t.length;for(t.sort(_),i=0;i<o;++i)(r=a-(n=t[i]).y0)>0&&(n.y0+=r,n.y1+=r),a=n.y1+e;if((r=a-e-d)>0)for(a=n.y0-=r,n.y1-=r,i=o-2;i>=0;--i)(r=(n=t[i]).y1+e-a)>0&&(n.y0-=r,n.y1-=r),a=n.y0}))}}(m,I,p),$(m);for(var v=0;v<4;v++)Q(m,d,p),ee(m,d,p),K(m,c,d,p),Q(m,d,p),ee(m,d,p);return function(e,t,n){var i=e.nodes,o=e.links,s=!1,l=!1;if(o.forEach((function(e){"top"==e.circularLinkType?s=!0:"bottom"==e.circularLinkType&&(l=!0)})),0==s||0==l){var c=(0,r.A)(i,(function(e){return e.y0})),u=(n-t)/((0,a.A)(i,(function(e){return e.y1}))-c);i.forEach((function(e){var t=(e.y1-e.y0)*u;e.y0=(e.y0-c)*u,e.y1=e.y0+t})),o.forEach((function(e){e.y0=(e.y0-c)*u,e.y1=(e.y1-c)*u,e.width=e.width*u}))}}(m,c,d),B(m,z,d,p),m}function $(e){e.nodes.forEach((function(e){e.sourceLinks.sort(x),e.targetLinks.sort(b)})),e.nodes.forEach((function(e){var t=e.y0,n=t,r=e.y1,i=r;e.sourceLinks.forEach((function(e){e.circular?(e.y0=r-e.width/2,r-=e.width):(e.y0=t+e.width/2,t+=e.width)})),e.targetLinks.forEach((function(e){e.circular?(e.y1=i-e.width/2,i-=e.width):(e.y1=n+e.width/2,n+=e.width)}))}))}return U.nodeId=function(e){return arguments.length?(p="function"==typeof e?e:v(e),U):p},U.nodeAlign=function(e){return arguments.length?(g="function"==typeof e?e:v(e),U):g},U.nodeWidth=function(e){return arguments.length?(h=+e,U):h},U.nodePadding=function(t){return arguments.length?(e=+t,U):e},U.nodes=function(e){return arguments.length?(O="function"==typeof e?e:v(e),U):O},U.links=function(e){return arguments.length?(D="function"==typeof e?e:v(e),U):D},U.size=function(e){return arguments.length?(n=c=0,u=+e[0],d=+e[1],U):[u-n,d-c]},U.extent=function(e){return arguments.length?(n=+e[0][0],u=+e[1][0],c=+e[0][1],d=+e[1][1],U):[[n,c],[u,d]]},U.iterations=function(e){return arguments.length?(I=+e,U):I},U.circularLinkGap=function(e){return arguments.length?(z=+e,U):z},U.nodePaddingRatio=function(e){return arguments.length?(t=+e,U):t},U.sortNodes=function(e){return arguments.length?(j=e,U):j},U.update=function(e){return P(e,p),$(e),e.links.forEach((function(e){e.circular&&(e.circularLinkType=e.y0+e.y1<d?"top":"bottom",e.source.circularLinkType=e.circularLinkType,e.target.circularLinkType=e.circularLinkType)})),Q(e,d,p,!1),ee(e,d,p),B(e,z,d,p),e},U}function P(e,t){var n=0,r=0;e.links.forEach((function(i){i.circular&&(i.source.circularLinkType||i.target.circularLinkType?i.circularLinkType=i.source.circularLinkType?i.source.circularLinkType:i.target.circularLinkType:i.circularLinkType=n<r?"top":"bottom","top"==i.circularLinkType?n+=1:r+=1,e.nodes.forEach((function(e){O(e,t)!=O(i.source,t)&&O(e,t)!=O(i.target,t)||(e.circularLinkType=i.circularLinkType)})))})),e.links.forEach((function(e){e.circular&&(e.source.circularLinkType==e.target.circularLinkType&&(e.circularLinkType=e.source.circularLinkType),re(e,t)&&(e.circularLinkType=e.source.circularLinkType))}))}function I(e){var t=Math.abs(e.y1-e.y0),n=Math.abs(e.target.x0-e.source.x1);return Math.atan(n/t)}function F(e,t){var n=0;e.sourceLinks.forEach((function(e){n=e.circular&&!re(e,t)?n+1:n}));var r=0;return e.targetLinks.forEach((function(e){r=e.circular&&!re(e,t)?r+1:r})),n+r}function z(e){var t=e.source.sourceLinks,n=0;t.forEach((function(e){n=e.circular?n+1:n}));var r=e.target.targetLinks,i=0;return r.forEach((function(e){i=e.circular?i+1:i})),!(n>1||i>1)}function j(e,t,n){return e.sort(U),e.forEach((function(r,i){var a,o,s=0;if(re(r,n)&&z(r))r.circularPathData.verticalBuffer=s+r.width/2;else{for(var l=0;l<i;l++)if(a=e[i],o=e[l],!(a.source.column<o.target.column||a.target.column>o.source.column)){var c=e[l].circularPathData.verticalBuffer+e[l].width/2+t;s=c>s?c:s}r.circularPathData.verticalBuffer=s+r.width/2}})),e}function B(e,t,n,i){var a=(0,r.A)(e.links,(function(e){return e.source.y0}));e.links.forEach((function(e){e.circular&&(e.circularPathData={})})),j(e.links.filter((function(e){return"top"==e.circularLinkType})),t,i),j(e.links.filter((function(e){return"bottom"==e.circularLinkType})),t,i),e.links.forEach((function(r){if(r.circular){if(r.circularPathData.arcRadius=r.width+N,r.circularPathData.leftNodeBuffer=5,r.circularPathData.rightNodeBuffer=5,r.circularPathData.sourceWidth=r.source.x1-r.source.x0,r.circularPathData.sourceX=r.source.x0+r.circularPathData.sourceWidth,r.circularPathData.targetX=r.target.x0,r.circularPathData.sourceY=r.y0,r.circularPathData.targetY=r.y1,re(r,i)&&z(r))r.circularPathData.leftSmallArcRadius=N+r.width/2,r.circularPathData.leftLargeArcRadius=N+r.width/2,r.circularPathData.rightSmallArcRadius=N+r.width/2,r.circularPathData.rightLargeArcRadius=N+r.width/2,"bottom"==r.circularLinkType?(r.circularPathData.verticalFullExtent=r.source.y1+R+r.circularPathData.verticalBuffer,r.circularPathData.verticalLeftInnerExtent=r.circularPathData.verticalFullExtent-r.circularPathData.leftLargeArcRadius,r.circularPathData.verticalRightInnerExtent=r.circularPathData.verticalFullExtent-r.circularPathData.rightLargeArcRadius):(r.circularPathData.verticalFullExtent=r.source.y0-R-r.circularPathData.verticalBuffer,r.circularPathData.verticalLeftInnerExtent=r.circularPathData.verticalFullExtent+r.circularPathData.leftLargeArcRadius,r.circularPathData.verticalRightInnerExtent=r.circularPathData.verticalFullExtent+r.circularPathData.rightLargeArcRadius);else{var o=r.source.column,s=r.circularLinkType,l=e.links.filter((function(e){return e.source.column==o&&e.circularLinkType==s}));"bottom"==r.circularLinkType?l.sort(q):l.sort($);var u=0;l.forEach((function(e,n){e.circularLinkID==r.circularLinkID&&(r.circularPathData.leftSmallArcRadius=N+r.width/2+u,r.circularPathData.leftLargeArcRadius=N+r.width/2+n*t+u),u+=e.width})),o=r.target.column,l=e.links.filter((function(e){return e.target.column==o&&e.circularLinkType==s})),"bottom"==r.circularLinkType?l.sort(V):l.sort(H),u=0,l.forEach((function(e,n){e.circularLinkID==r.circularLinkID&&(r.circularPathData.rightSmallArcRadius=N+r.width/2+u,r.circularPathData.rightLargeArcRadius=N+r.width/2+n*t+u),u+=e.width})),"bottom"==r.circularLinkType?(r.circularPathData.verticalFullExtent=Math.max(n,r.source.y1,r.target.y1)+R+r.circularPathData.verticalBuffer,r.circularPathData.verticalLeftInnerExtent=r.circularPathData.verticalFullExtent-r.circularPathData.leftLargeArcRadius,r.circularPathData.verticalRightInnerExtent=r.circularPathData.verticalFullExtent-r.circularPathData.rightLargeArcRadius):(r.circularPathData.verticalFullExtent=a-R-r.circularPathData.verticalBuffer,r.circularPathData.verticalLeftInnerExtent=r.circularPathData.verticalFullExtent+r.circularPathData.leftLargeArcRadius,r.circularPathData.verticalRightInnerExtent=r.circularPathData.verticalFullExtent+r.circularPathData.rightLargeArcRadius)}r.circularPathData.leftInnerExtent=r.circularPathData.sourceX+r.circularPathData.leftNodeBuffer,r.circularPathData.rightInnerExtent=r.circularPathData.targetX-r.circularPathData.rightNodeBuffer,r.circularPathData.leftFullExtent=r.circularPathData.sourceX+r.circularPathData.leftLargeArcRadius+r.circularPathData.leftNodeBuffer,r.circularPathData.rightFullExtent=r.circularPathData.targetX-r.circularPathData.rightLargeArcRadius-r.circularPathData.rightNodeBuffer}if(r.circular)r.path=function(e){var t="";t="top"==e.circularLinkType?"M"+e.circularPathData.sourceX+" "+e.circularPathData.sourceY+" L"+e.circularPathData.leftInnerExtent+" "+e.circularPathData.sourceY+" A"+e.circularPathData.leftLargeArcRadius+" "+e.circularPathData.leftSmallArcRadius+" 0 0 0 "+e.circularPathData.leftFullExtent+" "+(e.circularPathData.sourceY-e.circularPathData.leftSmallArcRadius)+" L"+e.circularPathData.leftFullExtent+" "+e.circularPathData.verticalLeftInnerExtent+" A"+e.circularPathData.leftLargeArcRadius+" "+e.circularPathData.leftLargeArcRadius+" 0 0 0 "+e.circularPathData.leftInnerExtent+" "+e.circularPathData.verticalFullExtent+" L"+e.circularPathData.rightInnerExtent+" "+e.circularPathData.verticalFullExtent+" A"+e.circularPathData.rightLargeArcRadius+" "+e.circularPathData.rightLargeArcRadius+" 0 0 0 "+e.circularPathData.rightFullExtent+" "+e.circularPathData.verticalRightInnerExtent+" L"+e.circularPathData.rightFullExtent+" "+(e.circularPathData.targetY-e.circularPathData.rightSmallArcRadius)+" A"+e.circularPathData.rightLargeArcRadius+" "+e.circularPathData.rightSmallArcRadius+" 0 0 0 "+e.circularPathData.rightInnerExtent+" "+e.circularPathData.targetY+" L"+e.circularPathData.targetX+" "+e.circularPathData.targetY:"M"+e.circularPathData.sourceX+" "+e.circularPathData.sourceY+" L"+e.circularPathData.leftInnerExtent+" "+e.circularPathData.sourceY+" A"+e.circularPathData.leftLargeArcRadius+" "+e.circularPathData.leftSmallArcRadius+" 0 0 1 "+e.circularPathData.leftFullExtent+" "+(e.circularPathData.sourceY+e.circularPathData.leftSmallArcRadius)+" L"+e.circularPathData.leftFullExtent+" "+e.circularPathData.verticalLeftInnerExtent+" A"+e.circularPathData.leftLargeArcRadius+" "+e.circularPathData.leftLargeArcRadius+" 0 0 1 "+e.circularPathData.leftInnerExtent+" "+e.circularPathData.verticalFullExtent+" L"+e.circularPathData.rightInnerExtent+" "+e.circularPathData.verticalFullExtent+" A"+e.circularPathData.rightLargeArcRadius+" "+e.circularPathData.rightLargeArcRadius+" 0 0 1 "+e.circularPathData.rightFullExtent+" "+e.circularPathData.verticalRightInnerExtent+" L"+e.circularPathData.rightFullExtent+" "+(e.circularPathData.targetY+e.circularPathData.rightSmallArcRadius)+" A"+e.circularPathData.rightLargeArcRadius+" "+e.circularPathData.rightSmallArcRadius+" 0 0 1 "+e.circularPathData.rightInnerExtent+" "+e.circularPathData.targetY+" L"+e.circularPathData.targetX+" "+e.circularPathData.targetY;return t}(r);else{var f=(0,c.pq)().source((function(e){return[e.source.x0+(e.source.x1-e.source.x0),e.y0]})).target((function(e){return[e.target.x0,e.y1]}));r.path=f(r)}}))}function U(e,t){return W(e)==W(t)?"bottom"==e.circularLinkType?q(e,t):$(e,t):W(t)-W(e)}function $(e,t){return e.y0-t.y0}function q(e,t){return t.y0-e.y0}function H(e,t){return e.y1-t.y1}function V(e,t){return t.y1-e.y1}function W(e){return e.target.column-e.source.column}function G(e){return e.target.x0-e.source.x1}function Y(e,t){var n=I(e),r=G(t)/Math.tan(n);return"up"==ne(e)?e.y1+r:e.y1-r}function X(e,t){var n=I(e),r=G(t)/Math.tan(n);return"up"==ne(e)?e.y1-r:e.y1+r}function K(e,t,n,r){e.links.forEach((function(i){if(!i.circular&&i.target.column-i.source.column>1){var a=i.source.column+1,o=i.target.column-1,s=1,l=o-a+1;for(s=1;a<=o;a++,s++)e.nodes.forEach((function(o){if(o.column==a){var c,u=s/(l+1),f=Math.pow(1-u,3),d=3*u*Math.pow(1-u,2),h=3*Math.pow(u,2)*(1-u),p=Math.pow(u,3),m=f*i.y0+d*i.y0+h*i.y1+p*i.y1,g=m-i.width/2,v=m+i.width/2;g>o.y0&&g<o.y1?(c=o.y1-g+10,c="bottom"==o.circularLinkType?c:-c,o=J(o,c,t,n),e.nodes.forEach((function(e){O(e,r)!=O(o,r)&&e.column==o.column&&Z(o,e)&&J(e,c,t,n)}))):(v>o.y0&&v<o.y1||g<o.y0&&v>o.y1)&&(c=v-o.y0+10,o=J(o,c,t,n),e.nodes.forEach((function(e){O(e,r)!=O(o,r)&&e.column==o.column&&e.y0<o.y1&&e.y1>o.y1&&J(e,c,t,n)})))}}))}}))}function Z(e,t){return e.y0>t.y0&&e.y0<t.y1||(e.y1>t.y0&&e.y1<t.y1||e.y0<t.y0&&e.y1>t.y1)}function J(e,t,n,r){return e.y0+t>=n&&e.y1+t<=r&&(e.y0=e.y0+t,e.y1=e.y1+t,e.targetLinks.forEach((function(e){e.y1=e.y1+t})),e.sourceLinks.forEach((function(e){e.y0=e.y0+t}))),e}function Q(e,t,n,r){e.nodes.forEach((function(i){r&&i.y+(i.y1-i.y0)>t&&(i.y=i.y-(i.y+(i.y1-i.y0)-t));var a=e.links.filter((function(e){return O(e.source,n)==O(i,n)})),o=a.length;o>1&&a.sort((function(e,t){if(!e.circular&&!t.circular){if(e.target.column==t.target.column)return e.y1-t.y1;if(!te(e,t))return e.y1-t.y1;if(e.target.column>t.target.column){var n=X(t,e);return e.y1-n}if(t.target.column>e.target.column)return X(e,t)-t.y1}return e.circular&&!t.circular?"top"==e.circularLinkType?-1:1:t.circular&&!e.circular?"top"==t.circularLinkType?1:-1:e.circular&&t.circular?e.circularLinkType===t.circularLinkType&&"top"==e.circularLinkType?e.target.column===t.target.column?e.target.y1-t.target.y1:t.target.column-e.target.column:e.circularLinkType===t.circularLinkType&&"bottom"==e.circularLinkType?e.target.column===t.target.column?t.target.y1-e.target.y1:e.target.column-t.target.column:"top"==e.circularLinkType?-1:1:void 0}));var s=i.y0;a.forEach((function(e){e.y0=s+e.width/2,s+=e.width})),a.forEach((function(e,t){if("bottom"==e.circularLinkType){for(var n=t+1,r=0;n<o;n++)r+=a[n].width;e.y0=i.y1-r-e.width/2}}))}))}function ee(e,t,n){e.nodes.forEach((function(t){var r=e.links.filter((function(e){return O(e.target,n)==O(t,n)})),i=r.length;i>1&&r.sort((function(e,t){if(!e.circular&&!t.circular){if(e.source.column==t.source.column)return e.y0-t.y0;if(!te(e,t))return e.y0-t.y0;if(t.source.column<e.source.column){var n=Y(t,e);return e.y0-n}if(e.source.column<t.source.column)return Y(e,t)-t.y0}return e.circular&&!t.circular?"top"==e.circularLinkType?-1:1:t.circular&&!e.circular?"top"==t.circularLinkType?1:-1:e.circular&&t.circular?e.circularLinkType===t.circularLinkType&&"top"==e.circularLinkType?e.source.column===t.source.column?e.source.y1-t.source.y1:e.source.column-t.source.column:e.circularLinkType===t.circularLinkType&&"bottom"==e.circularLinkType?e.source.column===t.source.column?e.source.y1-t.source.y1:t.source.column-e.source.column:"top"==e.circularLinkType?-1:1:void 0}));var a=t.y0;r.forEach((function(e){e.y1=a+e.width/2,a+=e.width})),r.forEach((function(e,n){if("bottom"==e.circularLinkType){for(var a=n+1,o=0;a<i;a++)o+=r[a].width;e.y1=t.y1-o-e.width/2}}))}))}function te(e,t){return ne(e)==ne(t)}function ne(e){return e.y0-e.y1>0?"up":"down"}function re(e,t){return O(e.source,t)==O(e.target,t)}},52270:(e,t,n)=>{"use strict";n.r(t),n.d(t,{sankey:()=>E,sankeyCenter:()=>d,sankeyJustify:()=>f,sankeyLeft:()=>c,sankeyLinkHorizontal:()=>C,sankeyRight:()=>u});var r=n(53827),i=n(27046),a=n(92766),o=n(11136),s=n(48779);function l(e){return e.target.depth}function c(e){return e.depth}function u(e,t){return t-1-e.height}function f(e,t){return e.sourceLinks.length?e.depth:t-1}function d(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?(0,o.A)(e.sourceLinks,l)-1:0}function h(e){return function(){return e}}function p(e,t){return g(e.source,t.source)||e.index-t.index}function m(e,t){return g(e.target,t.target)||e.index-t.index}function g(e,t){return e.y0-t.y0}function v(e){return e.value}function y(e){return(e.y0+e.y1)/2}function b(e){return y(e.source)*e.value}function x(e){return y(e.target)*e.value}function _(e){return e.index}function w(e){return e.nodes}function A(e){return e.links}function k(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function E(){var e=0,t=0,n=1,l=1,c=24,u=8,d=_,E=f,T=w,M=A,S=32,C=2/3;function O(){var f={nodes:T.apply(null,arguments),links:M.apply(null,arguments)};return function(e){e.nodes.forEach((function(e,t){e.index=t,e.sourceLinks=[],e.targetLinks=[]}));var t=(0,s.Tj)(e.nodes,d);e.links.forEach((function(e,n){e.index=n;var r=e.source,i=e.target;"object"!=typeof r&&(r=e.source=k(t,r)),"object"!=typeof i&&(i=e.target=k(t,i)),r.sourceLinks.push(e),i.targetLinks.push(e)}))}(f),function(e){e.nodes.forEach((function(e){e.value=Math.max((0,r.A)(e.sourceLinks,v),(0,r.A)(e.targetLinks,v))}))}(f),function(t){var r,i,a;for(r=t.nodes,i=[],a=0;r.length;++a,r=i,i=[])r.forEach((function(e){e.depth=a,e.sourceLinks.forEach((function(e){i.indexOf(e.target)<0&&i.push(e.target)}))}));for(r=t.nodes,i=[],a=0;r.length;++a,r=i,i=[])r.forEach((function(e){e.height=a,e.targetLinks.forEach((function(e){i.indexOf(e.source)<0&&i.push(e.source)}))}));var o=(n-e-c)/(a-1);t.nodes.forEach((function(t){t.x1=(t.x0=e+Math.max(0,Math.min(a-1,Math.floor(E.call(null,t,a))))*o)+c}))}(f),function(e){var n=(0,s.$I)().key((function(e){return e.x0})).sortKeys(i.A).entries(e.nodes).map((function(e){return e.values}));d(),m();for(var c=1,f=S;f>0;--f)p(c*=.99),m(),h(c),m();function d(){var i=(0,a.A)(n,(function(e){return e.length})),s=C*(l-t)/(i-1);u>s&&(u=s);var c=(0,o.A)(n,(function(e){return(l-t-(e.length-1)*u)/(0,r.A)(e,v)}));n.forEach((function(e){e.forEach((function(e,t){e.y1=(e.y0=t)+e.value*c}))})),e.links.forEach((function(e){e.width=e.value*c}))}function h(e){n.forEach((function(t){t.forEach((function(t){if(t.targetLinks.length){var n=((0,r.A)(t.targetLinks,b)/(0,r.A)(t.targetLinks,v)-y(t))*e;t.y0+=n,t.y1+=n}}))}))}function p(e){n.slice().reverse().forEach((function(t){t.forEach((function(t){if(t.sourceLinks.length){var n=((0,r.A)(t.sourceLinks,x)/(0,r.A)(t.sourceLinks,v)-y(t))*e;t.y0+=n,t.y1+=n}}))}))}function m(){n.forEach((function(e){var n,r,i,a=t,o=e.length;for(e.sort(g),i=0;i<o;++i)(r=a-(n=e[i]).y0)>0&&(n.y0+=r,n.y1+=r),a=n.y1+u;if((r=a-u-l)>0)for(a=n.y0-=r,n.y1-=r,i=o-2;i>=0;--i)(r=(n=e[i]).y1+u-a)>0&&(n.y0-=r,n.y1-=r),a=n.y0}))}}(f),R(f),f}function R(e){e.nodes.forEach((function(e){e.sourceLinks.sort(m),e.targetLinks.sort(p)})),e.nodes.forEach((function(e){var t=e.y0,n=t;e.sourceLinks.forEach((function(e){e.y0=t+e.width/2,t+=e.width})),e.targetLinks.forEach((function(e){e.y1=n+e.width/2,n+=e.width}))}))}return O.update=function(e){return R(e),e},O.nodeId=function(e){return arguments.length?(d="function"==typeof e?e:h(e),O):d},O.nodeAlign=function(e){return arguments.length?(E="function"==typeof e?e:h(e),O):E},O.nodeWidth=function(e){return arguments.length?(c=+e,O):c},O.nodePadding=function(e){return arguments.length?(u=+e,O):u},O.nodes=function(e){return arguments.length?(T="function"==typeof e?e:h(e),O):T},O.links=function(e){return arguments.length?(M="function"==typeof e?e:h(e),O):M},O.size=function(r){return arguments.length?(e=t=0,n=+r[0],l=+r[1],O):[n-e,l-t]},O.extent=function(r){return arguments.length?(e=+r[0][0],n=+r[1][0],t=+r[0][1],l=+r[1][1],O):[[e,t],[n,l]]},O.iterations=function(e){return arguments.length?(S=+e,O):S},O}var T=n(80783);function M(e){return[e.source.x1,e.y0]}function S(e){return[e.target.x0,e.y1]}function C(){return(0,T.pq)().source(M).target(S)}},93268:(e,t,n)=>{var r,i;(function(){var a={version:"3.8.2"},o=[].slice,s=function(e){return o.call(e)},l=self.document;function c(e){return e&&(e.ownerDocument||e.document||e).documentElement}function u(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(l)try{s(l.documentElement.childNodes)[0].nodeType}catch(e){s=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),l)try{l.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var f=this.Element.prototype,d=f.setAttribute,h=f.setAttributeNS,p=this.CSSStyleDeclaration.prototype,m=p.setProperty;f.setAttribute=function(e,t){d.call(this,e,t+"")},f.setAttributeNS=function(e,t,n){h.call(this,e,t,n+"")},p.setProperty=function(e,t,n){m.call(this,e,t+"",n)}}function g(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function v(e){return null===e?NaN:+e}function y(e){return!isNaN(e)}function b(e){return{left:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r},right:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)>0?i=a:r=a+1}return r}}}a.ascending=g,a.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},a.min=function(e,t){var n,r,i=-1,a=e.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=e[i])&&n>r&&(n=r)}else{for(;++i<a;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=t.call(e,e[i],i))&&n>r&&(n=r)}return n},a.max=function(e,t){var n,r,i=-1,a=e.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=e[i])&&r>n&&(n=r)}else{for(;++i<a;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=t.call(e,e[i],i))&&r>n&&(n=r)}return n},a.extent=function(e,t){var n,r,i,a=-1,o=e.length;if(1===arguments.length){for(;++a<o;)if(null!=(r=e[a])&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=e[a])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++a<o;)if(null!=(r=t.call(e,e[a],a))&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=t.call(e,e[a],a))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},a.sum=function(e,t){var n,r=0,i=e.length,a=-1;if(1===arguments.length)for(;++a<i;)y(n=+e[a])&&(r+=n);else for(;++a<i;)y(n=+t.call(e,e[a],a))&&(r+=n);return r},a.mean=function(e,t){var n,r=0,i=e.length,a=-1,o=i;if(1===arguments.length)for(;++a<i;)y(n=v(e[a]))?r+=n:--o;else for(;++a<i;)y(n=v(t.call(e,e[a],a)))?r+=n:--o;if(o)return r/o},a.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],a=n-r;return a?i+a*(e[r]-i):i},a.median=function(e,t){var n,r=[],i=e.length,o=-1;if(1===arguments.length)for(;++o<i;)y(n=v(e[o]))&&r.push(n);else for(;++o<i;)y(n=v(t.call(e,e[o],o)))&&r.push(n);if(r.length)return a.quantile(r.sort(g),.5)},a.variance=function(e,t){var n,r,i=e.length,a=0,o=0,s=-1,l=0;if(1===arguments.length)for(;++s<i;)y(n=v(e[s]))&&(o+=(r=n-a)*(n-(a+=r/++l)));else for(;++s<i;)y(n=v(t.call(e,e[s],s)))&&(o+=(r=n-a)*(n-(a+=r/++l)));if(l>1)return o/(l-1)},a.deviation=function(){var e=a.variance.apply(this,arguments);return e?Math.sqrt(e):e};var x=b(g);function _(e){return e.length}a.bisectLeft=x.left,a.bisect=a.bisectRight=x.right,a.bisector=function(e){return b(1===e.length?function(t,n){return g(e(t),n)}:e)},a.shuffle=function(e,t,n){(a=arguments.length)<3&&(n=e.length,a<2&&(t=0));for(var r,i,a=n-t;a;)i=Math.random()*a--|0,r=e[a+t],e[a+t]=e[i+t],e[i+t]=r;return e},a.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},a.pairs=function(e){for(var t=0,n=e.length-1,r=e[0],i=new Array(n<0?0:n);t<n;)i[t]=[r,r=e[++t]];return i},a.transpose=function(e){if(!(i=e.length))return[];for(var t=-1,n=a.min(e,_),r=new Array(n);++t<n;)for(var i,o=-1,s=r[t]=new Array(i);++o<i;)s[o]=e[o][t];return r},a.zip=function(){return a.transpose(arguments)},a.keys=function(e){var t=[];for(var n in e)t.push(n);return t},a.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},a.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},a.merge=function(e){for(var t,n,r,i=e.length,a=-1,o=0;++a<i;)o+=e[a].length;for(n=new Array(o);--i>=0;)for(t=(r=e[i]).length;--t>=0;)n[--o]=r[t];return n};var w=Math.abs;function A(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function k(){this._=Object.create(null)}a.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("infinite range");var r,i=[],a=function(e){var t=1;for(;e*t%1;)t*=10;return t}(w(n)),o=-1;if(e*=a,t*=a,(n*=a)<0)for(;(r=e+n*++o)>t;)i.push(r/a);else for(;(r=e+n*++o)<t;)i.push(r/a);return i},a.map=function(e,t){var n=new k;if(e instanceof k)e.forEach((function(e,t){n.set(e,t)}));else if(Array.isArray(e)){var r,i=-1,a=e.length;if(1===arguments.length)for(;++i<a;)n.set(i,e[i]);else for(;++i<a;)n.set(t.call(e,r=e[i],i),r)}else for(var o in e)n.set(o,e[o]);return n};function E(e){return"__proto__"==(e+="")||"\0"===e[0]?"\0"+e:e}function T(e){return"\0"===(e+="")[0]?e.slice(1):e}function M(e){return E(e)in this._}function S(e){return(e=E(e))in this._&&delete this._[e]}function C(){var e=[];for(var t in this._)e.push(T(t));return e}function O(){var e=0;for(var t in this._)++e;return e}function R(){for(var e in this._)return!1;return!0}function N(){this._=Object.create(null)}function L(e){return e}function D(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function P(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=I.length;n<r;++n){var i=I[n]+t;if(i in e)return i}}A(k,{has:M,get:function(e){return this._[E(e)]},set:function(e,t){return this._[E(e)]=t},remove:S,keys:C,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:T(t),value:this._[t]});return e},size:O,empty:R,forEach:function(e){for(var t in this._)e.call(this,T(t),this._[t])}}),a.nest=function(){var e,t,n={},r=[],i=[];function o(i,a,s){if(s>=r.length)return t?t.call(n,a):e?a.sort(e):a;for(var l,c,u,f,d=-1,h=a.length,p=r[s++],m=new k;++d<h;)(f=m.get(l=p(c=a[d])))?f.push(c):m.set(l,[c]);return i?(c=i(),u=function(e,t){c.set(e,o(i,t,s))}):(c={},u=function(e,t){c[e]=o(i,t,s)}),m.forEach(u),c}function s(e,t){if(t>=r.length)return e;var n=[],a=i[t++];return e.forEach((function(e,r){n.push({key:e,values:s(r,t)})})),a?n.sort((function(e,t){return a(e.key,t.key)})):n}return n.map=function(e,t){return o(t,e,0)},n.entries=function(e){return s(o(a.map,e,0),0)},n.key=function(e){return r.push(e),n},n.sortKeys=function(e){return i[r.length-1]=e,n},n.sortValues=function(t){return e=t,n},n.rollup=function(e){return t=e,n},n},a.set=function(e){var t=new N;if(e)for(var n=0,r=e.length;n<r;++n)t.add(e[n]);return t},A(N,{has:M,add:function(e){return this._[E(e+="")]=!0,e},remove:S,values:C,size:O,empty:R,forEach:function(e){for(var t in this._)e.call(this,T(t))}}),a.behavior={},a.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=D(e,t,t[n]);return e};var I=["webkit","ms","moz","Moz","o","O"];function F(){}function z(){}function j(e){var t=[],n=new k;function r(){for(var n,r=t,i=-1,a=r.length;++i<a;)(n=r[i].on)&&n.apply(this,arguments);return e}return r.on=function(r,i){var a,o=n.get(r);return arguments.length<2?o&&o.on:(o&&(o.on=null,t=t.slice(0,a=t.indexOf(o)).concat(t.slice(a+1)),n.remove(r)),i&&t.push(n.set(r,{on:i})),e)},r}function B(){a.event.preventDefault()}function U(){for(var e,t=a.event;e=t.sourceEvent;)t=e;return t}function $(e){for(var t=new z,n=0,r=arguments.length;++n<r;)t[arguments[n]]=j(t);return t.of=function(n,r){return function(i){try{var o=i.sourceEvent=a.event;i.target=e,a.event=i,t[i.type].apply(n,r)}finally{a.event=o}}},t}a.dispatch=function(){for(var e=new z,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=j(e);return e},z.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},a.event=null,a.requote=function(e){return e.replace(q,"\\$&")};var q=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,H={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};function V(e){return H(e,X),e}var W=function(e,t){return t.querySelector(e)},G=function(e,t){return t.querySelectorAll(e)},Y=function(e,t){var n=e.matches||e[P(e,"matchesSelector")];return Y=function(e,t){return n.call(e,t)},Y(e,t)};"function"==typeof Sizzle&&(W=function(e,t){return Sizzle(e,t)[0]||null},G=Sizzle,Y=Sizzle.matchesSelector),a.selection=function(){return a.select(l.documentElement)};var X=a.selection.prototype=[];function K(e){return"function"==typeof e?e:function(){return W(e,this)}}function Z(e){return"function"==typeof e?e:function(){return G(e,this)}}X.select=function(e){var t,n,r,i,a=[];e=K(e);for(var o=-1,s=this.length;++o<s;){a.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var l=-1,c=r.length;++l<c;)(i=r[l])?(t.push(n=e.call(i,i.__data__,l,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return V(a)},X.selectAll=function(e){var t,n,r=[];e=Z(e);for(var i=-1,a=this.length;++i<a;)for(var o=this[i],l=-1,c=o.length;++l<c;)(n=o[l])&&(r.push(t=s(e.call(n,n.__data__,l,i))),t.parentNode=n);return V(r)};var J="http://www.w3.org/1999/xhtml",Q={svg:"http://www.w3.org/2000/svg",xhtml:J,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ee(e,t){return e=a.ns.qualify(e),null==t?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof t?e.local?function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}:function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}:e.local?function(){this.setAttributeNS(e.space,e.local,t)}:function(){this.setAttribute(e,t)}}function te(e){return e.trim().replace(/\s+/g," ")}function ne(e){return new RegExp("(?:^|\\s+)"+a.requote(e)+"(?:\\s+|$)","g")}function re(e){return(e+"").trim().split(/^|\s+/)}function ie(e,t){var n=(e=re(e).map(ae)).length;return"function"==typeof t?function(){for(var r=-1,i=t.apply(this,arguments);++r<n;)e[r](this,i)}:function(){for(var r=-1;++r<n;)e[r](this,t)}}function ae(e){var t=ne(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",te(i+" "+e))):n.setAttribute("class",te(i.replace(t," ")))}}function oe(e,t,n){return null==t?function(){this.style.removeProperty(e)}:"function"==typeof t?function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}:function(){this.style.setProperty(e,t,n)}}function se(e,t){return null==t?function(){delete this[e]}:"function"==typeof t?function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}:function(){this[e]=t}}function le(e){return"function"==typeof e?e:(e=a.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){var t=this.ownerDocument,n=this.namespaceURI;return n===J&&t.documentElement.namespaceURI===J?t.createElement(e):t.createElementNS(n,e)}}function ce(){var e=this.parentNode;e&&e.removeChild(this)}function ue(e){return{__data__:e}}function fe(e){return function(){return Y(this,e)}}function de(e){return arguments.length||(e=g),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function he(e,t){for(var n=0,r=e.length;n<r;n++)for(var i,a=e[n],o=0,s=a.length;o<s;o++)(i=a[o])&&t(i,o,n);return e}function pe(e){return H(e,me),e}a.ns={prefix:Q,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),Q.hasOwnProperty(n)?{space:Q[n],local:e}:e}},X.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return(e=a.ns.qualify(e)).local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(ee(t,e[t]));return this}return this.each(ee(e,t))},X.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=re(e)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<r;)if(!ne(e[i]).test(t))return!1;return!0}for(t in e)this.each(ie(t,e[t]));return this}return this.each(ie(e,t))},X.style=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=""),e)this.each(oe(n,e[n],t));return this}if(r<2){var i=this.node();return u(i).getComputedStyle(i,null).getPropertyValue(e)}n=""}return this.each(oe(e,t,n))},X.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(se(t,e[t]));return this}return this.each(se(e,t))},X.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},X.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},X.append=function(e){return e=le(e),this.select((function(){return this.appendChild(e.apply(this,arguments))}))},X.insert=function(e,t){return e=le(e),t=K(t),this.select((function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)}))},X.remove=function(){return this.each(ce)},X.data=function(e,t){var n,r,i=-1,a=this.length;if(!arguments.length){for(e=new Array(a=(n=this[0]).length);++i<a;)(r=n[i])&&(e[i]=r.__data__);return e}function o(e,n){var r,i,a,o=e.length,u=n.length,f=Math.min(o,u),d=new Array(u),h=new Array(u),p=new Array(o);if(t){var m,g=new k,v=new Array(o);for(r=-1;++r<o;)(i=e[r])&&(g.has(m=t.call(i,i.__data__,r))?p[r]=i:g.set(m,i),v[r]=m);for(r=-1;++r<u;)(i=g.get(m=t.call(n,a=n[r],r)))?!0!==i&&(d[r]=i,i.__data__=a):h[r]=ue(a),g.set(m,!0);for(r=-1;++r<o;)r in v&&!0!==g.get(v[r])&&(p[r]=e[r])}else{for(r=-1;++r<f;)i=e[r],a=n[r],i?(i.__data__=a,d[r]=i):h[r]=ue(a);for(;r<u;++r)h[r]=ue(n[r]);for(;r<o;++r)p[r]=e[r]}h.update=d,h.parentNode=d.parentNode=p.parentNode=e.parentNode,s.push(h),l.push(d),c.push(p)}var s=pe([]),l=V([]),c=V([]);if("function"==typeof e)for(;++i<a;)o(n=this[i],e.call(n,n.parentNode.__data__,i));else for(;++i<a;)o(n=this[i],e);return l.enter=function(){return s},l.exit=function(){return c},l},X.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},X.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=fe(e));for(var a=0,o=this.length;a<o;a++){i.push(t=[]),t.parentNode=(n=this[a]).parentNode;for(var s=0,l=n.length;s<l;s++)(r=n[s])&&e.call(r,r.__data__,s,a)&&t.push(r)}return V(i)},X.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,a=r[i];--i>=0;)(n=r[i])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},X.sort=function(e){e=de.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},X.each=function(e){return he(this,(function(t,n,r){e.call(t,t.__data__,n,r)}))},X.call=function(e){var t=s(arguments);return e.apply(t[0]=this,t),this},X.empty=function(){return!this.node()},X.node=function(){for(var e=0,t=this.length;e<t;e++)for(var n=this[e],r=0,i=n.length;r<i;r++){var a=n[r];if(a)return a}return null},X.size=function(){var e=0;return he(this,(function(){++e})),e};var me=[];function ge(e,t,n){var r="__on"+e,i=e.indexOf("."),o=ye;i>0&&(e=e.slice(0,i));var l=ve.get(e);function c(){var t=this[r];t&&(this.removeEventListener(e,t,t.$),delete this[r])}return l&&(e=l,o=be),i?t?function(){var i=o(t,s(arguments));c.call(this),this.addEventListener(e,this[r]=i,i.$=n),i._=t}:c:t?F:function(){var t,n=new RegExp("^__on([^.]+)"+a.requote(e)+"$");for(var r in this)if(t=r.match(n)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}}a.selection.enter=pe,a.selection.enter.prototype=me,me.append=X.append,me.empty=X.empty,me.node=X.node,me.call=X.call,me.size=X.size,me.select=function(e){for(var t,n,r,i,a,o=[],s=-1,l=this.length;++s<l;){r=(i=this[s]).update,o.push(t=[]),t.parentNode=i.parentNode;for(var c=-1,u=i.length;++c<u;)(a=i[c])?(t.push(r[c]=n=e.call(i.parentNode,a.__data__,c,s)),n.__data__=a.__data__):t.push(null)}return V(o)},me.insert=function(e,t){var n,r,i;return arguments.length<2&&(n=this,t=function(e,t,a){var o,s=n[a].update,l=s.length;for(a!=i&&(i=a,r=0),t>=r&&(r=t+1);!(o=s[r])&&++r<l;);return o}),X.insert.call(this,e,t)},a.select=function(e){var t;return"string"==typeof e?(t=[W(e,l)]).parentNode=l.documentElement:(t=[e]).parentNode=c(e),V([t])},a.selectAll=function(e){var t;return"string"==typeof e?(t=s(G(e,l))).parentNode=l.documentElement:(t=s(e)).parentNode=null,V([t])},X.on=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=!1),e)this.each(ge(n,e[n],t));return this}if(r<2)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(ge(e,t,n))};var ve=a.map({mouseenter:"mouseover",mouseleave:"mouseout"});function ye(e,t){return function(n){var r=a.event;a.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{a.event=r}}}function be(e,t){var n=ye(e,t);return function(e){var t=this,r=e.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||n.call(t,e)}}l&&ve.forEach((function(e){"on"+e in l&&ve.remove(e)}));var xe,_e=0;function we(e){var t=".dragsuppress-"+ ++_e,n="click"+t,r=a.select(u(e)).on("touchmove"+t,B).on("dragstart"+t,B).on("selectstart"+t,B);if(null==xe&&(xe=!("onselectstart"in e)&&P(e.style,"userSelect")),xe){var i=c(e).style,o=i[xe];i[xe]="none"}return function(e){if(r.on(t,null),xe&&(i[xe]=o),e){var a=function(){r.on(n,null)};r.on(n,(function(){B(),a()}),!0),setTimeout(a,0)}}}a.mouse=function(e){return ke(e,U())};var Ae=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function ke(e,t){t.changedTouches&&(t=t.changedTouches[0]);var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();if(Ae<0){var i=u(e);if(i.scrollX||i.scrollY){var o=(n=a.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Ae=!(o.f||o.e),n.remove()}}return Ae?(r.x=t.pageX,r.y=t.pageY):(r.x=t.clientX,r.y=t.clientY),[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}function Ee(){return a.event.changedTouches[0].identifier}a.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=U().changedTouches),t)for(var r,i=0,a=t.length;i<a;++i)if((r=t[i]).identifier===n)return ke(e,r)},a.behavior.drag=function(){var e=$(i,"drag","dragstart","dragend"),t=null,n=o(F,a.mouse,u,"mousemove","mouseup"),r=o(Ee,a.touch,L,"touchmove","touchend");function i(){this.on("mousedown.drag",n).on("touchstart.drag",r)}function o(n,r,i,o,s){return function(){var l,c=this,u=a.event.target.correspondingElement||a.event.target,f=c.parentNode,d=e.of(c,arguments),h=0,p=n(),m=".drag"+(null==p?"":"-"+p),g=a.select(i(u)).on(o+m,(function(){var e,t,n=r(f,p);if(!n)return;e=n[0]-y[0],t=n[1]-y[1],h|=e|t,y=n,d({type:"drag",x:n[0]+l[0],y:n[1]+l[1],dx:e,dy:t})})).on(s+m,(function(){if(!r(f,p))return;g.on(o+m,null).on(s+m,null),v(h),d({type:"dragend"})})),v=we(u),y=r(f,p);l=t?[(l=t.apply(c,arguments)).x-y[0],l.y-y[1]]:[0,0],d({type:"dragstart"})}}return i.origin=function(e){return arguments.length?(t=e,i):t},a.rebind(i,e,"on")},a.touches=function(e,t){return arguments.length<2&&(t=U().touches),t?s(t).map((function(t){var n=ke(e,t);return n.identifier=t.identifier,n})):[]};var Te=1e-6,Me=Te*Te,Se=Math.PI,Ce=2*Se,Oe=Ce-Te,Re=Se/2,Ne=Se/180,Le=180/Se;function De(e){return e>1?Re:e<-1?-Re:Math.asin(e)}function Pe(e){return((e=Math.exp(e))+1/e)/2}var Ie=Math.SQRT2;a.interpolateZoom=function(e,t){var n,r,i=e[0],a=e[1],o=e[2],s=t[0],l=t[1],c=t[2],u=s-i,f=l-a,d=u*u+f*f;if(d<Me)r=Math.log(c/o)/Ie,n=function(e){return[i+e*u,a+e*f,o*Math.exp(Ie*e*r)]};else{var h=Math.sqrt(d),p=(c*c-o*o+4*d)/(2*o*2*h),m=(c*c-o*o-4*d)/(2*c*2*h),g=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(m*m+1)-m);r=(v-g)/Ie,n=function(e){var t,n=e*r,s=Pe(g),l=o/(2*h)*(s*(t=Ie*n+g,((t=Math.exp(2*t))-1)/(t+1))-function(e){return((e=Math.exp(e))-1/e)/2}(g));return[i+l*u,a+l*f,o*s/Pe(Ie*n+g)]}}return n.duration=1e3*r,n},a.behavior.zoom=function(){var e,t,n,r,i,o,s,c,f,d={x:0,y:0,k:1},h=[960,500],p=je,m=250,g=0,v="mousedown.zoom",y="mousemove.zoom",b="mouseup.zoom",x="touchstart.zoom",_=$(w,"zoomstart","zoom","zoomend");function w(e){e.on(v,R).on(ze+".zoom",L).on("dblclick.zoom",D).on(x,N)}function A(e){return[(e[0]-d.x)/d.k,(e[1]-d.y)/d.k]}function k(e){d.k=Math.max(p[0],Math.min(p[1],e))}function E(e,t){t=function(e){return[e[0]*d.k+d.x,e[1]*d.k+d.y]}(t),d.x+=e[0]-t[0],d.y+=e[1]-t[1]}function T(e,n,r,i){e.__chart__={x:d.x,y:d.y,k:d.k},k(Math.pow(2,i)),E(t=n,r),e=a.select(e),m>0&&(e=e.transition().duration(m)),e.call(w.event)}function M(){s&&s.domain(o.range().map((function(e){return(e-d.x)/d.k})).map(o.invert)),f&&f.domain(c.range().map((function(e){return(e-d.y)/d.k})).map(c.invert))}function S(e){g++||e({type:"zoomstart"})}function C(e){M(),e({type:"zoom",scale:d.k,translate:[d.x,d.y]})}function O(e){--g||(e({type:"zoomend"}),t=null)}function R(){var e=this,t=_.of(e,arguments),n=0,r=a.select(u(e)).on(y,(function(){n=1,E(a.mouse(e),i),C(t)})).on(b,(function(){r.on(y,null).on(b,null),o(n),O(t)})),i=A(a.mouse(e)),o=we(e);Ki.call(e),S(t)}function N(){var e,t=this,n=_.of(t,arguments),r={},o=0,s=".zoom-"+a.event.changedTouches[0].identifier,l="touchmove"+s,c="touchend"+s,u=[],f=a.select(t),h=we(t);function p(){var n=a.touches(t);return e=d.k,n.forEach((function(e){e.identifier in r&&(r[e.identifier]=A(e))})),n}function m(){var e=a.event.target;a.select(e).on(l,g).on(c,y),u.push(e);for(var n=a.event.changedTouches,s=0,f=n.length;s<f;++s)r[n[s].identifier]=null;var h=p(),m=Date.now();if(1===h.length){if(m-i<500){var v=h[0];T(t,v,r[v.identifier],Math.floor(Math.log(d.k)/Math.LN2)+1),B()}i=m}else if(h.length>1){v=h[0];var b=h[1],x=v[0]-b[0],_=v[1]-b[1];o=x*x+_*_}}function g(){var s,l,c,u,f=a.touches(t);Ki.call(t);for(var d=0,h=f.length;d<h;++d,u=null)if(c=f[d],u=r[c.identifier]){if(l)break;s=c,l=u}if(u){var p=(p=c[0]-s[0])*p+(p=c[1]-s[1])*p,m=o&&Math.sqrt(p/o);s=[(s[0]+c[0])/2,(s[1]+c[1])/2],l=[(l[0]+u[0])/2,(l[1]+u[1])/2],k(m*e)}i=null,E(s,l),C(n)}function y(){if(a.event.touches.length){for(var e=a.event.changedTouches,t=0,i=e.length;t<i;++t)delete r[e[t].identifier];for(var o in r)return void p()}a.selectAll(u).on(s,null),f.on(v,R).on(x,N),h(),O(n)}m(),S(n),f.on(v,null).on(x,m)}function L(){var i=_.of(this,arguments);r?clearTimeout(r):(Ki.call(this),e=A(t=n||a.mouse(this)),S(i)),r=setTimeout((function(){r=null,O(i)}),50),B(),k(Math.pow(2,.002*Fe())*d.k),E(t,e),C(i)}function D(){var e=a.mouse(this),t=Math.log(d.k)/Math.LN2;T(this,e,A(e),a.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}return ze||(ze="onwheel"in l?(Fe=function(){return-a.event.deltaY*(a.event.deltaMode?120:1)},"wheel"):"onmousewheel"in l?(Fe=function(){return a.event.wheelDelta},"mousewheel"):(Fe=function(){return-a.event.detail},"MozMousePixelScroll")),w.event=function(e){e.each((function(){var e=_.of(this,arguments),n=d;Qi?a.select(this).transition().each("start.zoom",(function(){d=this.__chart__||{x:0,y:0,k:1},S(e)})).tween("zoom:zoom",(function(){var r=h[0],i=h[1],o=t?t[0]:r/2,s=t?t[1]:i/2,l=a.interpolateZoom([(o-d.x)/d.k,(s-d.y)/d.k,r/d.k],[(o-n.x)/n.k,(s-n.y)/n.k,r/n.k]);return function(t){var n=l(t),i=r/n[2];this.__chart__=d={x:o-n[0]*i,y:s-n[1]*i,k:i},C(e)}})).each("interrupt.zoom",(function(){O(e)})).each("end.zoom",(function(){O(e)})):(this.__chart__=d,S(e),C(e),O(e))}))},w.translate=function(e){return arguments.length?(d={x:+e[0],y:+e[1],k:d.k},M(),w):[d.x,d.y]},w.scale=function(e){return arguments.length?(d={x:d.x,y:d.y,k:null},k(+e),M(),w):d.k},w.scaleExtent=function(e){return arguments.length?(p=null==e?je:[+e[0],+e[1]],w):p},w.center=function(e){return arguments.length?(n=e&&[+e[0],+e[1]],w):n},w.size=function(e){return arguments.length?(h=e&&[+e[0],+e[1]],w):h},w.duration=function(e){return arguments.length?(m=+e,w):m},w.x=function(e){return arguments.length?(s=e,o=e.copy(),d={x:0,y:0,k:1},w):s},w.y=function(e){return arguments.length?(f=e,c=e.copy(),d={x:0,y:0,k:1},w):f},a.rebind(w,_,"on")};var Fe,ze,je=[0,1/0];function Be(){}function Ue(e,t,n){return this instanceof Ue?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof Ue?new Ue(e.h,e.s,e.l):ct(""+e,ut,Ue):new Ue(e,t,n)}a.color=Be,Be.prototype.toString=function(){return this.rgb()+""},a.hsl=Ue;var $e=Ue.prototype=new Be;function qe(e,t,n){var r,i;function a(e){return Math.round(255*function(e){return e>360?e-=360:e<0&&(e+=360),e<60?r+(i-r)*e/60:e<180?i:e<240?r+(i-r)*(240-e)/60:r}(e))}return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)||t<0?0:t>1?1:t,r=2*(n=n<0?0:n>1?1:n)-(i=n<=.5?n*(1+t):n+t-n*t),new it(a(e+120),a(e),a(e-120))}function He(e,t,n){return this instanceof He?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof He?new He(e.h,e.c,e.l):et(e instanceof Ge?e.l:(e=ft((e=a.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new He(e,t,n)}$e.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new Ue(this.h,this.s,this.l/e)},$e.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new Ue(this.h,this.s,e*this.l)},$e.rgb=function(){return qe(this.h,this.s,this.l)},a.hcl=He;var Ve=He.prototype=new Be;function We(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new Ge(n,Math.cos(e*=Ne)*t,Math.sin(e)*t)}function Ge(e,t,n){return this instanceof Ge?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof Ge?new Ge(e.l,e.a,e.b):e instanceof He?We(e.h,e.c,e.l):ft((e=it(e)).r,e.g,e.b):new Ge(e,t,n)}Ve.brighter=function(e){return new He(this.h,this.c,Math.min(100,this.l+Ye*(arguments.length?e:1)))},Ve.darker=function(e){return new He(this.h,this.c,Math.max(0,this.l-Ye*(arguments.length?e:1)))},Ve.rgb=function(){return We(this.h,this.c,this.l).rgb()},a.lab=Ge;var Ye=18,Xe=.95047,Ke=1,Ze=1.08883,Je=Ge.prototype=new Be;function Qe(e,t,n){var r=(e+16)/116,i=r+t/500,a=r-n/200;return new it(rt(3.2404542*(i=tt(i)*Xe)-1.5371385*(r=tt(r)*Ke)-.4985314*(a=tt(a)*Ze)),rt(-.969266*i+1.8760108*r+.041556*a),rt(.0556434*i-.2040259*r+1.0572252*a))}function et(e,t,n){return e>0?new He(Math.atan2(n,t)*Le,Math.sqrt(t*t+n*n),e):new He(NaN,NaN,e)}function tt(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function nt(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function rt(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function it(e,t,n){return this instanceof it?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof it?new it(e.r,e.g,e.b):ct(""+e,it,qe):new it(e,t,n)}function at(e){return new it(e>>16,e>>8&255,255&e)}function ot(e){return at(e)+""}Je.brighter=function(e){return new Ge(Math.min(100,this.l+Ye*(arguments.length?e:1)),this.a,this.b)},Je.darker=function(e){return new Ge(Math.max(0,this.l-Ye*(arguments.length?e:1)),this.a,this.b)},Je.rgb=function(){return Qe(this.l,this.a,this.b)},a.rgb=it;var st=it.prototype=new Be;function lt(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function ct(e,t,n){var r,i,a,o=0,s=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(ht(i[0]),ht(i[1]),ht(i[2]))}return(a=pt.get(e))?t(a.r,a.g,a.b):(null==e||"#"!==e.charAt(0)||isNaN(a=parseInt(e.slice(1),16))||(4===e.length?(o=(3840&a)>>4,o|=o>>4,s=240&a,s|=s>>4,l=15&a,l|=l<<4):7===e.length&&(o=(16711680&a)>>16,s=(65280&a)>>8,l=255&a)),t(o,s,l))}function ut(e,t,n){var r,i,a=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),s=o-a,l=(o+a)/2;return s?(i=l<.5?s/(o+a):s/(2-o-a),r=e==o?(t-n)/s+(t<n?6:0):t==o?(n-e)/s+2:(e-t)/s+4,r*=60):(r=NaN,i=l>0&&l<1?0:r),new Ue(r,i,l)}function ft(e,t,n){var r=nt((.4124564*(e=dt(e))+.3575761*(t=dt(t))+.1804375*(n=dt(n)))/Xe),i=nt((.2126729*e+.7151522*t+.072175*n)/Ke);return Ge(116*i-16,500*(r-i),200*(i-nt((.0193339*e+.119192*t+.9503041*n)/Ze)))}function dt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function ht(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}st.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return t||n||r?(t&&t<i&&(t=i),n&&n<i&&(n=i),r&&r<i&&(r=i),new it(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new it(i,i,i)},st.darker=function(e){return new it((e=Math.pow(.7,arguments.length?e:1))*this.r,e*this.g,e*this.b)},st.hsl=function(){return ut(this.r,this.g,this.b)},st.toString=function(){return"#"+lt(this.r)+lt(this.g)+lt(this.b)};var pt=a.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function mt(e){return"function"==typeof e?e:function(){return e}}function gt(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),vt(t,n,e,r)}}function vt(e,t,n,r){var i={},o=a.dispatch("beforesend","progress","load","error"),l={},c=new XMLHttpRequest,u=null;function f(){var e,t=c.status;if(!t&&function(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}(c)||t>=200&&t<300||304===t){try{e=n.call(i,c)}catch(e){return void o.error.call(i,e)}o.load.call(i,e)}else o.error.call(i,c)}return self.XDomainRequest&&!("withCredentials"in c)&&/^(http(s)?:)?\/\//.test(e)&&(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=f:c.onreadystatechange=function(){c.readyState>3&&f()},c.onprogress=function(e){var t=a.event;a.event=e;try{o.progress.call(i,c)}finally{a.event=t}},i.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?l[e]:(null==t?delete l[e]:l[e]=t+"",i)},i.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",i):t},i.responseType=function(e){return arguments.length?(u=e,i):u},i.response=function(e){return n=e,i},["get","post"].forEach((function(e){i[e]=function(){return i.send.apply(i,[e].concat(s(arguments)))}})),i.send=function(n,r,a){if(2===arguments.length&&"function"==typeof r&&(a=r,r=null),c.open(n,e,!0),null==t||"accept"in l||(l.accept=t+",*/*"),c.setRequestHeader)for(var s in l)c.setRequestHeader(s,l[s]);return null!=t&&c.overrideMimeType&&c.overrideMimeType(t),null!=u&&(c.responseType=u),null!=a&&i.on("error",a).on("load",(function(e){a(null,e)})),o.beforesend.call(i,c),c.send(null==r?null:r),i},i.abort=function(){return c.abort(),i},a.rebind(i,o,"on"),null==r?i:i.get(function(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}(r))}pt.forEach((function(e,t){pt.set(e,at(t))})),a.functor=mt,a.xhr=gt(L),a.dsv=function(e,t){var n=new RegExp('["'+e+"\n]"),r=e.charCodeAt(0);function i(e,n,r){arguments.length<3&&(r=n,n=null);var i=vt(e,t,null==n?a:o(n),r);return i.row=function(e){return arguments.length?i.response(null==(n=e)?a:o(e)):n},i}function a(e){return i.parse(e.responseText)}function o(e){return function(t){return i.parse(t.responseText,e)}}function s(t){return t.map(l).join(e)}function l(e){return n.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return i.parse=function(e,t){var n;return i.parseRows(e,(function(e,r){if(n)return n(e,r-1);var i=function(t){for(var n={},r=e.length,i=0;i<r;++i)n[e[i]]=t[i];return n};n=t?function(e,n){return t(i(e),n)}:i}))},i.parseRows=function(e,t){var n,i,a={},o={},s=[],l=e.length,c=0,u=0;function f(){if(c>=l)return o;if(i)return i=!1,a;var t=c;if(34===e.charCodeAt(t)){for(var n=t;n++<l;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}return c=n+2,13===(s=e.charCodeAt(n+1))?(i=!0,10===e.charCodeAt(n+2)&&++c):10===s&&(i=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;c<l;){var s,u=1;if(10===(s=e.charCodeAt(c++)))i=!0;else if(13===s)i=!0,10===e.charCodeAt(c)&&(++c,++u);else if(s!==r)continue;return e.slice(t,c-u)}return e.slice(t)}for(;(n=f())!==o;){for(var d=[];n!==a&&n!==o;)d.push(n),n=f();t&&null==(d=t(d,u++))||s.push(d)}return s},i.format=function(t){if(Array.isArray(t[0]))return i.formatRows(t);var n=new N,r=[];return t.forEach((function(e){for(var t in e)n.has(t)||r.push(n.add(t))})),[r.map(l).join(e)].concat(t.map((function(t){return r.map((function(e){return l(t[e])})).join(e)}))).join("\n")},i.formatRows=function(e){return e.map(s).join("\n")},i},a.csv=a.dsv(",","text/csv"),a.tsv=a.dsv("\t","text/tab-separated-values");var yt,bt,xt,_t,wt=this[P(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};function At(e,t,n){var r=arguments.length;r<2&&(t=0),r<3&&(n=Date.now());var i={c:e,t:n+t,n:null};return bt?bt.n=i:yt=i,bt=i,xt||(_t=clearTimeout(_t),xt=1,wt(kt)),i}function kt(){var e=Et(),t=Tt()-e;t>24?(isFinite(t)&&(clearTimeout(_t),_t=setTimeout(kt,t)),xt=0):(xt=1,wt(kt))}function Et(){for(var e=Date.now(),t=yt;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function Tt(){for(var e,t=yt,n=1/0;t;)t.c?(t.t<n&&(n=t.t),t=(e=t).n):t=e?e.n=t.n:yt=t.n;return bt=e,n}function Mt(e){return e[0]}function St(e){return e[1]}function Ct(e){for(var t,n,r,i=e.length,a=[0,1],o=2,s=2;s<i;s++){for(;o>1&&(t=e[a[o-2]],n=e[a[o-1]],r=e[s],(n[0]-t[0])*(r[1]-t[1])-(n[1]-t[1])*(r[0]-t[0])<=0);)--o;a[o++]=s}return a.slice(0,o)}function Ot(e,t){return e[0]-t[0]||e[1]-t[1]}a.timer=function(){At.apply(this,arguments)},a.timer.flush=function(){Et(),Tt()},a.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)},a.geom={},a.geom.hull=function(e){var t=Mt,n=St;if(arguments.length)return r(e);function r(e){if(e.length<3)return[];var r,i=mt(t),a=mt(n),o=e.length,s=[],l=[];for(r=0;r<o;r++)s.push([+i.call(this,e[r],r),+a.call(this,e[r],r),r]);for(s.sort(Ot),r=0;r<o;r++)l.push([s[r][0],-s[r][1]]);var c=Ct(s),u=Ct(l),f=u[0]===c[0],d=u[u.length-1]===c[c.length-1],h=[];for(r=c.length-1;r>=0;--r)h.push(e[s[c[r]][2]]);for(r=+f;r<u.length-d;++r)h.push(e[s[u[r]][2]]);return h}return r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r},a.geom.polygon=function(e){return H(e,Rt),e};var Rt=a.geom.polygon.prototype=[];function Nt(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Lt(e,t,n,r){var i=e[0],a=n[0],o=t[0]-i,s=r[0]-a,l=e[1],c=n[1],u=t[1]-l,f=r[1]-c,d=(s*(l-c)-f*(i-a))/(f*o-s*u);return[i+d*o,l+d*u]}function Dt(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}Rt.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],i=0;++t<n;)e=r,r=this[t],i+=e[1]*r[0]-e[0]*r[1];return.5*i},Rt.centroid=function(e){var t,n,r=-1,i=this.length,a=0,o=0,s=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++r<i;)t=s,s=this[r],n=t[0]*s[1]-s[0]*t[1],a+=(t[0]+s[0])*n,o+=(t[1]+s[1])*n;return[a*e,o*e]},Rt.clip=function(e){for(var t,n,r,i,a,o,s=Dt(e),l=-1,c=this.length-Dt(this),u=this[c-1];++l<c;){for(t=e.slice(),e.length=0,i=this[l],a=t[(r=t.length-s)-1],n=-1;++n<r;)Nt(o=t[n],u,i)?(Nt(a,u,i)||e.push(Lt(a,o,u,i)),e.push(o)):Nt(a,u,i)&&e.push(Lt(a,o,u,i)),a=o;s&&e.push(e[0]),u=i}return e};var Pt,It,Ft,zt,jt,Bt=[],Ut=[];function $t(){ln(this),this.edge=this.site=this.circle=null}function qt(e){var t=Bt.pop()||new $t;return t.site=e,t}function Ht(e){Qt(e),Ft.remove(e),Bt.push(e),ln(e)}function Vt(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},a=e.P,o=e.N,s=[e];Ht(e);for(var l=a;l.circle&&w(n-l.circle.x)<Te&&w(r-l.circle.cy)<Te;)a=l.P,s.unshift(l),Ht(l),l=a;s.unshift(l),Qt(l);for(var c=o;c.circle&&w(n-c.circle.x)<Te&&w(r-c.circle.cy)<Te;)o=c.N,s.push(c),Ht(c),c=o;s.push(c),Qt(c);var u,f=s.length;for(u=1;u<f;++u)c=s[u],l=s[u-1],an(c.edge,l.site,c.site,i);l=s[0],(c=s[f-1]).edge=nn(l.site,c.site,null,i),Jt(l),Jt(c)}function Wt(e){for(var t,n,r,i,a=e.x,o=e.y,s=Ft._;s;)if((r=Gt(s,o)-a)>Te)s=s.L;else{if(!((i=a-Yt(s,o))>Te)){r>-Te?(t=s.P,n=s):i>-Te?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}var l=qt(e);if(Ft.insert(t,l),t||n){if(t===n)return Qt(t),n=qt(t.site),Ft.insert(l,n),l.edge=n.edge=nn(t.site,l.site),Jt(t),void Jt(n);if(n){Qt(t),Qt(n);var c=t.site,u=c.x,f=c.y,d=e.x-u,h=e.y-f,p=n.site,m=p.x-u,g=p.y-f,v=2*(d*g-h*m),y=d*d+h*h,b=m*m+g*g,x={x:(g*y-h*b)/v+u,y:(d*b-m*y)/v+f};an(n.edge,c,p,x),l.edge=nn(c,e,null,x),n.edge=nn(e,p,null,x),Jt(t),Jt(n)}else l.edge=nn(t.site,l.site)}}function Gt(e,t){var n=e.site,r=n.x,i=n.y,a=i-t;if(!a)return r;var o=e.P;if(!o)return-1/0;var s=(n=o.site).x,l=n.y,c=l-t;if(!c)return s;var u=s-r,f=1/a-1/c,d=u/c;return f?(-d+Math.sqrt(d*d-2*f*(u*u/(-2*c)-l+c/2+i-a/2)))/f+r:(r+s)/2}function Yt(e,t){var n=e.N;if(n)return Gt(n,t);var r=e.site;return r.y===t?r.x:1/0}function Xt(e){this.site=e,this.edges=[]}function Kt(e,t){return t.angle-e.angle}function Zt(){ln(this),this.x=this.y=this.arc=this.site=this.cy=null}function Jt(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,a=n.site;if(r!==a){var o=i.x,s=i.y,l=r.x-o,c=r.y-s,u=a.x-o,f=2*(l*(g=a.y-s)-c*u);if(!(f>=-Me)){var d=l*l+c*c,h=u*u+g*g,p=(g*d-c*h)/f,m=(l*h-u*d)/f,g=m+s,v=Ut.pop()||new Zt;v.arc=e,v.site=i,v.x=p+o,v.y=g+Math.sqrt(p*p+m*m),v.cy=g,e.circle=v;for(var y=null,b=jt._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}jt.insert(y,v),y||(zt=v)}}}}function Qt(e){var t=e.circle;t&&(t.P||(zt=t.N),jt.remove(t),Ut.push(t),ln(t),e.circle=null)}function en(e,t){var n=e.b;if(n)return!0;var r,i,a=e.a,o=t[0][0],s=t[1][0],l=t[0][1],c=t[1][1],u=e.l,f=e.r,d=u.x,h=u.y,p=f.x,m=f.y,g=(d+p)/2,v=(h+m)/2;if(m===h){if(g<o||g>=s)return;if(d>p){if(a){if(a.y>=c)return}else a={x:g,y:l};n={x:g,y:c}}else{if(a){if(a.y<l)return}else a={x:g,y:c};n={x:g,y:l}}}else if(i=v-(r=(d-p)/(m-h))*g,r<-1||r>1)if(d>p){if(a){if(a.y>=c)return}else a={x:(l-i)/r,y:l};n={x:(c-i)/r,y:c}}else{if(a){if(a.y<l)return}else a={x:(c-i)/r,y:c};n={x:(l-i)/r,y:l}}else if(h<m){if(a){if(a.x>=s)return}else a={x:o,y:r*o+i};n={x:s,y:r*s+i}}else{if(a){if(a.x<o)return}else a={x:s,y:r*s+i};n={x:o,y:r*o+i}}return e.a=a,e.b=n,!0}function tn(e,t){this.l=e,this.r=t,this.a=this.b=null}function nn(e,t,n,r){var i=new tn(e,t);return Pt.push(i),n&&an(i,e,t,n),r&&an(i,t,e,r),It[e.i].edges.push(new on(i,e,t)),It[t.i].edges.push(new on(i,t,e)),i}function rn(e,t,n){var r=new tn(e,null);return r.a=t,r.b=n,Pt.push(r),r}function an(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function on(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function sn(){this._=null}function ln(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function cn(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function un(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function fn(e){for(;e.L;)e=e.L;return e}function dn(e,t){var n,r,i,a=e.sort(hn).pop();for(Pt=[],It=new Array(e.length),Ft=new sn,jt=new sn;;)if(i=zt,a&&(!i||a.y<i.y||a.y===i.y&&a.x<i.x))a.x===n&&a.y===r||(It[a.i]=new Xt(a),Wt(a),n=a.x,r=a.y),a=e.pop();else{if(!i)break;Vt(i.arc)}t&&(function(e){for(var t,n,r,i,a,o=Pt,s=(n=e[0][0],r=e[0][1],i=e[1][0],a=e[1][1],function(e){var t,o=e.a,s=e.b,l=o.x,c=o.y,u=0,f=1,d=s.x-l,h=s.y-c;if(t=n-l,d||!(t>0)){if(t/=d,d<0){if(t<u)return;t<f&&(f=t)}else if(d>0){if(t>f)return;t>u&&(u=t)}if(t=i-l,d||!(t<0)){if(t/=d,d<0){if(t>f)return;t>u&&(u=t)}else if(d>0){if(t<u)return;t<f&&(f=t)}if(t=r-c,h||!(t>0)){if(t/=h,h<0){if(t<u)return;t<f&&(f=t)}else if(h>0){if(t>f)return;t>u&&(u=t)}if(t=a-c,h||!(t<0)){if(t/=h,h<0){if(t>f)return;t>u&&(u=t)}else if(h>0){if(t<u)return;t<f&&(f=t)}return u>0&&(e.a={x:l+u*d,y:c+u*h}),f<1&&(e.b={x:l+f*d,y:c+f*h}),e}}}}}),l=o.length;l--;)(!en(t=o[l],e)||!s(t)||w(t.a.x-t.b.x)<Te&&w(t.a.y-t.b.y)<Te)&&(t.a=t.b=null,o.splice(l,1))}(t),function(e){for(var t,n,r,i,a,o,s,l,c,u,f=e[0][0],d=e[1][0],h=e[0][1],p=e[1][1],m=It,g=m.length;g--;)if((a=m[g])&&a.prepare())for(l=(s=a.edges).length,o=0;o<l;)r=(u=s[o].end()).x,i=u.y,t=(c=s[++o%l].start()).x,n=c.y,(w(r-t)>Te||w(i-n)>Te)&&(s.splice(o,0,new on(rn(a.site,u,w(r-f)<Te&&p-i>Te?{x:f,y:w(t-f)<Te?n:p}:w(i-p)<Te&&d-r>Te?{x:w(n-p)<Te?t:d,y:p}:w(r-d)<Te&&i-h>Te?{x:d,y:w(t-d)<Te?n:h}:w(i-h)<Te&&r-f>Te?{x:w(n-h)<Te?t:f,y:h}:null),a.site,null)),++l)}(t));var o={cells:It,edges:Pt};return Ft=jt=Pt=It=null,o}function hn(e,t){return t.y-e.y||t.x-e.x}Xt.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)(e=t[n].edge).b&&e.a||t.splice(n,1);return t.sort(Kt),t.length},on.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},sn.prototype={insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=fn(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(cn(this,n),n=(e=n).U),n.C=!1,r.C=!0,un(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(un(this,n),n=(e=n).U),n.C=!1,r.C=!0,cn(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,a=e.L,o=e.R;if(n=a?o?fn(o):a:o,i?i.L===e?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=e.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=o,o.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===i.L){if((t=i.R).C&&(t.C=!1,i.C=!0,cn(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,un(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,cn(this,i),e=this._;break}}else if((t=i.L).C&&(t.C=!1,i.C=!0,un(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,cn(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,un(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}},a.geom.voronoi=function(e){var t=Mt,n=St,r=t,i=n,a=pn;if(e)return o(e);function o(e){var t=new Array(e.length),n=a[0][0],r=a[0][1],i=a[1][0],o=a[1][1];return dn(s(e),a).cells.forEach((function(a,s){var l=a.edges,c=a.site;(t[s]=l.length?l.map((function(e){var t=e.start();return[t.x,t.y]})):c.x>=n&&c.x<=i&&c.y>=r&&c.y<=o?[[n,o],[i,o],[i,r],[n,r]]:[]).point=e[s]})),t}function s(e){return e.map((function(e,t){return{x:Math.round(r(e,t)/Te)*Te,y:Math.round(i(e,t)/Te)*Te,i:t}}))}return o.links=function(e){return dn(s(e)).edges.filter((function(e){return e.l&&e.r})).map((function(t){return{source:e[t.l.i],target:e[t.r.i]}}))},o.triangles=function(e){var t=[];return dn(s(e)).cells.forEach((function(n,r){for(var i,a,o,s,l=n.site,c=n.edges.sort(Kt),u=-1,f=c.length,d=c[f-1].edge,h=d.l===l?d.r:d.l;++u<f;)i=h,h=(d=c[u].edge).l===l?d.r:d.l,r<i.i&&r<h.i&&(o=i,s=h,((a=l).x-s.x)*(o.y-a.y)-(a.x-o.x)*(s.y-a.y)<0)&&t.push([e[r],e[i.i],e[h.i]])})),t},o.x=function(e){return arguments.length?(r=mt(t=e),o):t},o.y=function(e){return arguments.length?(i=mt(n=e),o):n},o.clipExtent=function(e){return arguments.length?(a=null==e?pn:e,o):a===pn?null:a},o.size=function(e){return arguments.length?o.clipExtent(e&&[[0,0],e]):a===pn?null:a&&a[1]},o};var pn=[[-1e6,-1e6],[1e6,1e6]];function mn(e){return e.x}function gn(e){return e.y}function vn(e,t,n,r,i,a){if(!e(t,n,r,i,a)){var o=.5*(n+i),s=.5*(r+a),l=t.nodes;l[0]&&vn(e,l[0],n,r,o,s),l[1]&&vn(e,l[1],o,r,i,s),l[2]&&vn(e,l[2],n,s,o,a),l[3]&&vn(e,l[3],o,s,i,a)}}function yn(e,t){e=a.rgb(e),t=a.rgb(t);var n=e.r,r=e.g,i=e.b,o=t.r-n,s=t.g-r,l=t.b-i;return function(e){return"#"+lt(Math.round(n+o*e))+lt(Math.round(r+s*e))+lt(Math.round(i+l*e))}}function bn(e,t){var n,r={},i={};for(n in e)n in t?r[n]=kn(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}}function xn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function _n(e,t){var n,r,i,a=wn.lastIndex=An.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(n=wn.exec(e))&&(r=An.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:xn(n,r)})),a=An.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?(t=l[0].x,function(e){return t(e)+""}):function(){return t}:(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}a.geom.delaunay=function(e){return a.geom.voronoi().triangles(e)},a.geom.quadtree=function(e,t,n,r,i){var a,o=Mt,s=St;if(a=arguments.length)return o=mn,s=gn,3===a&&(i=n,r=t,n=t=0),l(e);function l(e){var l,c,u,f,d,h,p,m,g,v=mt(o),y=mt(s);if(null!=t)h=t,p=n,m=r,g=i;else if(m=g=-(h=p=1/0),c=[],u=[],d=e.length,a)for(f=0;f<d;++f)(l=e[f]).x<h&&(h=l.x),l.y<p&&(p=l.y),l.x>m&&(m=l.x),l.y>g&&(g=l.y),c.push(l.x),u.push(l.y);else for(f=0;f<d;++f){var b=+v(l=e[f],f),x=+y(l,f);b<h&&(h=b),x<p&&(p=x),b>m&&(m=b),x>g&&(g=x),c.push(b),u.push(x)}var _=m-h,A=g-p;function k(e,t,n,r,i,a,o,s){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var l=e.x,c=e.y;if(null!=l)if(w(l-n)+w(c-r)<.01)E(e,t,n,r,i,a,o,s);else{var u=e.point;e.x=e.y=e.point=null,E(e,u,l,c,i,a,o,s),E(e,t,n,r,i,a,o,s)}else e.x=n,e.y=r,e.point=t}else E(e,t,n,r,i,a,o,s)}function E(e,t,n,r,i,a,o,s){var l=.5*(i+o),c=.5*(a+s),u=n>=l,f=r>=c,d=f<<1|u;e.leaf=!1,u?i=l:o=l,f?a=c:s=c,k(e=e.nodes[d]||(e.nodes[d]={leaf:!0,nodes:[],point:null,x:null,y:null}),t,n,r,i,a,o,s)}_>A?g=p+_:m=h+A;var T={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(e){k(T,e,+v(e,++f),+y(e,f),h,p,m,g)}};if(T.visit=function(e){vn(e,T,h,p,m,g)},T.find=function(e){return function(e,t,n,r,i,a,o){var s,l=1/0;return function e(c,u,f,d,h){if(!(u>a||f>o||d<r||h<i)){if(p=c.point){var p,m=t-c.x,g=n-c.y,v=m*m+g*g;if(v<l){var y=Math.sqrt(l=v);r=t-y,i=n-y,a=t+y,o=n+y,s=p}}for(var b=c.nodes,x=.5*(u+d),_=.5*(f+h),w=(n>=_)<<1|t>=x,A=w+4;w<A;++w)if(c=b[3&w])switch(3&w){case 0:e(c,u,f,x,_);break;case 1:e(c,x,f,d,_);break;case 2:e(c,u,_,x,h);break;case 3:e(c,x,_,d,h)}}}(e,r,i,a,o),s}(T,e[0],e[1],h,p,m,g)},f=-1,null==t){for(;++f<d;)k(T,e[f],c[f],u[f],h,p,m,g);--f}else e.forEach(T.add);return c=u=e=l=null,T}return l.x=function(e){return arguments.length?(o=e,l):o},l.y=function(e){return arguments.length?(s=e,l):s},l.extent=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),l):null==t?null:[[t,n],[r,i]]},l.size=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),l):null==t?null:[r-t,i-n]},l},a.interpolateRgb=yn,a.interpolateObject=bn,a.interpolateNumber=xn,a.interpolateString=_n;var wn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,An=new RegExp(wn.source,"g");function kn(e,t){for(var n,r=a.interpolators.length;--r>=0&&!(n=a.interpolators[r](e,t)););return n}function En(e,t){var n,r=[],i=[],a=e.length,o=t.length,s=Math.min(e.length,t.length);for(n=0;n<s;++n)r.push(kn(e[n],t[n]));for(;n<a;++n)i[n]=e[n];for(;n<o;++n)i[n]=t[n];return function(e){for(n=0;n<s;++n)i[n]=r[n](e);return i}}a.interpolate=kn,a.interpolators=[function(e,t){var n=typeof t;return("string"===n?pt.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?yn:_n:t instanceof Be?yn:Array.isArray(t)?En:"object"===n&&isNaN(t)?bn:xn)(e,t)}],a.interpolateArray=En;var Tn=function(){return L},Mn=a.map({linear:Tn,poly:function(e){return function(t){return Math.pow(t,e)}},quad:function(){return Rn},cubic:function(){return Nn},sin:function(){return Dn},exp:function(){return Pn},circle:function(){return In},elastic:function(e,t){var n;arguments.length<2&&(t=.45);arguments.length?n=t/Ce*Math.asin(1/e):(e=1,n=t/4);return function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*Ce/t)}},back:function(e){e||(e=1.70158);return function(t){return t*t*((e+1)*t-e)}},bounce:function(){return Fn}}),Sn=a.map({in:L,out:Cn,"in-out":On,"out-in":function(e){return On(Cn(e))}});function Cn(e){return function(t){return 1-e(1-t)}}function On(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function Rn(e){return e*e}function Nn(e){return e*e*e}function Ln(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function Dn(e){return 1-Math.cos(e*Re)}function Pn(e){return Math.pow(2,10*(e-1))}function In(e){return 1-Math.sqrt(1-e*e)}function Fn(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function zn(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function jn(e){var t,n,r,i=[e.a,e.b],a=[e.c,e.d],o=Un(i),s=Bn(i,a),l=Un(((t=a)[0]+=(r=-s)*(n=i)[0],t[1]+=r*n[1],t))||0;i[0]*a[1]<a[0]*i[1]&&(i[0]*=-1,i[1]*=-1,o*=-1,s*=-1),this.rotate=(o?Math.atan2(i[1],i[0]):Math.atan2(-a[0],a[1]))*Le,this.translate=[e.e,e.f],this.scale=[o,l],this.skew=l?Math.atan2(s,l)*Le:0}function Bn(e,t){return e[0]*t[0]+e[1]*t[1]}function Un(e){var t=Math.sqrt(Bn(e,e));return t&&(e[0]/=t,e[1]/=t),t}a.ease=function(e){var t,n=e.indexOf("-"),r=n>=0?e.slice(0,n):e,i=n>=0?e.slice(n+1):"in";return r=Mn.get(r)||Tn,i=Sn.get(i)||L,t=i(r.apply(null,o.call(arguments,1))),function(e){return e<=0?0:e>=1?1:t(e)}},a.interpolateHcl=function(e,t){e=a.hcl(e),t=a.hcl(t);var n=e.h,r=e.c,i=e.l,o=t.h-n,s=t.c-r,l=t.l-i;isNaN(s)&&(s=0,r=isNaN(r)?t.c:r);isNaN(o)?(o=0,n=isNaN(n)?t.h:n):o>180?o-=360:o<-180&&(o+=360);return function(e){return We(n+o*e,r+s*e,i+l*e)+""}},a.interpolateHsl=function(e,t){e=a.hsl(e),t=a.hsl(t);var n=e.h,r=e.s,i=e.l,o=t.h-n,s=t.s-r,l=t.l-i;isNaN(s)&&(s=0,r=isNaN(r)?t.s:r);isNaN(o)?(o=0,n=isNaN(n)?t.h:n):o>180?o-=360:o<-180&&(o+=360);return function(e){return qe(n+o*e,r+s*e,i+l*e)+""}},a.interpolateLab=function(e,t){e=a.lab(e),t=a.lab(t);var n=e.l,r=e.a,i=e.b,o=t.l-n,s=t.a-r,l=t.b-i;return function(e){return Qe(n+o*e,r+s*e,i+l*e)+""}},a.interpolateRound=zn,a.transform=function(e){var t=l.createElementNS(a.ns.prefix.svg,"g");return(a.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new jn(n?n.matrix:$n)})(e)},jn.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var $n={a:1,b:0,c:0,d:1,e:0,f:0};function qn(e){return e.length?e.pop()+",":""}function Hn(e,t){var n=[],r=[];return e=a.transform(e),t=a.transform(t),function(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:xn(e[0],t[0])},{i:i-2,x:xn(e[1],t[1])})}else(t[0]||t[1])&&n.push("translate("+t+")")}(e.translate,t.translate,n,r),function(e,t,n,r){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),r.push({i:n.push(qn(n)+"rotate(",null,")")-2,x:xn(e,t)})):t&&n.push(qn(n)+"rotate("+t+")")}(e.rotate,t.rotate,n,r),function(e,t,n,r){e!==t?r.push({i:n.push(qn(n)+"skewX(",null,")")-2,x:xn(e,t)}):t&&n.push(qn(n)+"skewX("+t+")")}(e.skew,t.skew,n,r),function(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push(qn(n)+"scale(",null,",",null,")");r.push({i:i-4,x:xn(e[0],t[0])},{i:i-2,x:xn(e[1],t[1])})}else 1===t[0]&&1===t[1]||n.push(qn(n)+"scale("+t+")")}(e.scale,t.scale,n,r),e=t=null,function(e){for(var t,i=-1,a=r.length;++i<a;)n[(t=r[i]).i]=t.x(e);return n.join("")}}function Vn(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function Wn(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function Gn(e){for(var t=e.source,n=e.target,r=function(e,t){if(e===t)return e;var n=Yn(e),r=Yn(t),i=n.pop(),a=r.pop(),o=null;for(;i===a;)o=i,i=n.pop(),a=r.pop();return o}(t,n),i=[t];t!==r;)t=t.parent,i.push(t);for(var a=i.length;n!==r;)i.splice(a,0,n),n=n.parent;return i}function Yn(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function Xn(e){e.fixed|=2}function Kn(e){e.fixed&=-7}function Zn(e){e.fixed|=4,e.px=e.x,e.py=e.y}function Jn(e){e.fixed&=-5}function Qn(e,t,n){var r=0,i=0;if(e.charge=0,!e.leaf)for(var a,o=e.nodes,s=o.length,l=-1;++l<s;)null!=(a=o[l])&&(Qn(a,t,n),e.charge+=a.charge,r+=a.charge*a.cx,i+=a.charge*a.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var c=t*n[e.point.index];e.charge+=e.pointCharge=c,r+=c*e.point.x,i+=c*e.point.y}e.cx=r/e.charge,e.cy=i/e.charge}a.interpolateTransform=Hn,a.layout={},a.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(Gn(e[n]));return t}},a.layout.chord=function(){var e,t,n,r,i,o,s,l={},c=0;function u(){var l,u,d,h,p,m={},g=[],v=a.range(r),y=[];for(e=[],t=[],l=0,h=-1;++h<r;){for(u=0,p=-1;++p<r;)u+=n[h][p];g.push(u),y.push(a.range(r)),l+=u}for(i&&v.sort((function(e,t){return i(g[e],g[t])})),o&&y.forEach((function(e,t){e.sort((function(e,r){return o(n[t][e],n[t][r])}))})),l=(Ce-c*r)/l,u=0,h=-1;++h<r;){for(d=u,p=-1;++p<r;){var b=v[h],x=y[b][p],_=n[b][x],w=u,A=u+=_*l;m[b+"-"+x]={index:b,subindex:x,startAngle:w,endAngle:A,value:_}}t[b]={index:b,startAngle:d,endAngle:u,value:g[b]},u+=c}for(h=-1;++h<r;)for(p=h-1;++p<r;){var k=m[h+"-"+p],E=m[p+"-"+h];(k.value||E.value)&&e.push(k.value<E.value?{source:E,target:k}:{source:k,target:E})}s&&f()}function f(){e.sort((function(e,t){return s((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)}))}return l.matrix=function(i){return arguments.length?(r=(n=i)&&n.length,e=t=null,l):n},l.padding=function(n){return arguments.length?(c=n,e=t=null,l):c},l.sortGroups=function(n){return arguments.length?(i=n,e=t=null,l):i},l.sortSubgroups=function(t){return arguments.length?(o=t,e=null,l):o},l.sortChords=function(t){return arguments.length?(s=t,e&&f(),l):s},l.chords=function(){return e||u(),e},l.groups=function(){return t||u(),t},l},a.layout.force=function(){var e,t,n,r,i,o,s={},l=a.dispatch("start","tick","end"),c=[1,1],u=.9,f=er,d=tr,h=-30,p=nr,m=.1,g=.64,v=[],y=[];function b(e){return function(t,n,r,i){if(t.point!==e){var a=t.cx-e.x,o=t.cy-e.y,s=i-n,l=a*a+o*o;if(s*s/g<l){if(l<p){var c=t.charge/l;e.px-=a*c,e.py-=o*c}return!0}if(t.point&&l&&l<p){c=t.pointCharge/l;e.px-=a*c,e.py-=o*c}}return!t.charge}}function x(e){e.px=a.event.x,e.py=a.event.y,s.resume()}return s.tick=function(){if((n*=.99)<.005)return e=null,l.end({type:"end",alpha:n=0}),!0;var t,s,f,d,p,g,x,_,w,A=v.length,k=y.length;for(s=0;s<k;++s)d=(f=y[s]).source,(g=(_=(p=f.target).x-d.x)*_+(w=p.y-d.y)*w)&&(_*=g=n*i[s]*((g=Math.sqrt(g))-r[s])/g,w*=g,p.x-=_*(x=d.weight+p.weight?d.weight/(d.weight+p.weight):.5),p.y-=w*x,d.x+=_*(x=1-x),d.y+=w*x);if((x=n*m)&&(_=c[0]/2,w=c[1]/2,s=-1,x))for(;++s<A;)(f=v[s]).x+=(_-f.x)*x,f.y+=(w-f.y)*x;if(h)for(Qn(t=a.geom.quadtree(v),n,o),s=-1;++s<A;)(f=v[s]).fixed||t.visit(b(f));for(s=-1;++s<A;)(f=v[s]).fixed?(f.x=f.px,f.y=f.py):(f.x-=(f.px-(f.px=f.x))*u,f.y-=(f.py-(f.py=f.y))*u);l.tick({type:"tick",alpha:n})},s.nodes=function(e){return arguments.length?(v=e,s):v},s.links=function(e){return arguments.length?(y=e,s):y},s.size=function(e){return arguments.length?(c=e,s):c},s.linkDistance=function(e){return arguments.length?(f="function"==typeof e?e:+e,s):f},s.distance=s.linkDistance,s.linkStrength=function(e){return arguments.length?(d="function"==typeof e?e:+e,s):d},s.friction=function(e){return arguments.length?(u=+e,s):u},s.charge=function(e){return arguments.length?(h="function"==typeof e?e:+e,s):h},s.chargeDistance=function(e){return arguments.length?(p=e*e,s):Math.sqrt(p)},s.gravity=function(e){return arguments.length?(m=+e,s):m},s.theta=function(e){return arguments.length?(g=e*e,s):Math.sqrt(g)},s.alpha=function(t){return arguments.length?(t=+t,n?t>0?n=t:(e.c=null,e.t=NaN,e=null,l.end({type:"end",alpha:n=0})):t>0&&(l.start({type:"start",alpha:n=t}),e=At(s.tick)),s):n},s.start=function(){var e,t,n,a=v.length,l=y.length,u=c[0],p=c[1];for(e=0;e<a;++e)(n=v[e]).index=e,n.weight=0;for(e=0;e<l;++e)"number"==typeof(n=y[e]).source&&(n.source=v[n.source]),"number"==typeof n.target&&(n.target=v[n.target]),++n.source.weight,++n.target.weight;for(e=0;e<a;++e)n=v[e],isNaN(n.x)&&(n.x=m("x",u)),isNaN(n.y)&&(n.y=m("y",p)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(r=[],"function"==typeof f)for(e=0;e<l;++e)r[e]=+f.call(this,y[e],e);else for(e=0;e<l;++e)r[e]=f;if(i=[],"function"==typeof d)for(e=0;e<l;++e)i[e]=+d.call(this,y[e],e);else for(e=0;e<l;++e)i[e]=d;if(o=[],"function"==typeof h)for(e=0;e<a;++e)o[e]=+h.call(this,v[e],e);else for(e=0;e<a;++e)o[e]=h;function m(n,r){if(!t){for(t=new Array(a),c=0;c<a;++c)t[c]=[];for(c=0;c<l;++c){var i=y[c];t[i.source.index].push(i.target),t[i.target.index].push(i.source)}}for(var o,s=t[e],c=-1,u=s.length;++c<u;)if(!isNaN(o=s[c][n]))return o;return Math.random()*r}return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){if(t||(t=a.behavior.drag().origin(L).on("dragstart.force",Xn).on("drag.force",x).on("dragend.force",Kn)),!arguments.length)return t;this.on("mouseover.force",Zn).on("mouseout.force",Jn).call(t)},a.rebind(s,l,"on")};var er=20,tr=1,nr=1/0;function rr(e,t){return a.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=cr,e}function ir(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(i=e.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function ar(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(a=e.children)&&(i=a.length))for(var i,a,o=-1;++o<i;)n.push(a[o]);for(;null!=(e=r.pop());)t(e)}function or(e){return e.children}function sr(e){return e.value}function lr(e,t){return t.value-e.value}function cr(e){return a.merge(e.map((function(e){return(e.children||[]).map((function(t){return{source:e,target:t}}))})))}a.layout.hierarchy=function(){var e=lr,t=or,n=sr;function r(i){var a,o=[i],s=[];for(i.depth=0;null!=(a=o.pop());)if(s.push(a),(c=t.call(r,a,a.depth))&&(l=c.length)){for(var l,c,u;--l>=0;)o.push(u=c[l]),u.parent=a,u.depth=a.depth+1;n&&(a.value=0),a.children=c}else n&&(a.value=+n.call(r,a,a.depth)||0),delete a.children;return ar(i,(function(t){var r,i;e&&(r=t.children)&&r.sort(e),n&&(i=t.parent)&&(i.value+=t.value)})),s}return r.sort=function(t){return arguments.length?(e=t,r):e},r.children=function(e){return arguments.length?(t=e,r):t},r.value=function(e){return arguments.length?(n=e,r):n},r.revalue=function(e){return n&&(ir(e,(function(e){e.children&&(e.value=0)})),ar(e,(function(e){var t;e.children||(e.value=+n.call(r,e,e.depth)||0),(t=e.parent)&&(t.value+=e.value)}))),e},r},a.layout.partition=function(){var e=a.layout.hierarchy(),t=[1,1];function n(e,t,r,i){var a=e.children;if(e.x=t,e.y=e.depth*i,e.dx=r,e.dy=i,a&&(o=a.length)){var o,s,l,c=-1;for(r=e.value?r/e.value:0;++c<o;)n(s=a[c],t,l=s.value*r,i),t+=l}}function r(e){var t=e.children,n=0;if(t&&(i=t.length))for(var i,a=-1;++a<i;)n=Math.max(n,r(t[a]));return 1+n}function i(i,a){var o=e.call(this,i,a);return n(o[0],0,t[0],t[1]/r(o[0])),o}return i.size=function(e){return arguments.length?(t=e,i):t},rr(i,e)},a.layout.pie=function(){var e=Number,t=ur,n=0,r=Ce,i=0;function o(s){var l,c=s.length,u=s.map((function(t,n){return+e.call(o,t,n)})),f=+("function"==typeof n?n.apply(this,arguments):n),d=("function"==typeof r?r.apply(this,arguments):r)-f,h=Math.min(Math.abs(d)/c,+("function"==typeof i?i.apply(this,arguments):i)),p=h*(d<0?-1:1),m=a.sum(u),g=m?(d-c*p)/m:0,v=a.range(c),y=[];return null!=t&&v.sort(t===ur?function(e,t){return u[t]-u[e]}:function(e,n){return t(s[e],s[n])}),v.forEach((function(e){y[e]={data:s[e],value:l=u[e],startAngle:f,endAngle:f+=l*g+p,padAngle:h}})),y}return o.value=function(t){return arguments.length?(e=t,o):e},o.sort=function(e){return arguments.length?(t=e,o):t},o.startAngle=function(e){return arguments.length?(n=e,o):n},o.endAngle=function(e){return arguments.length?(r=e,o):r},o.padAngle=function(e){return arguments.length?(i=e,o):i},o};var ur={};function fr(e){return e.x}function dr(e){return e.y}function hr(e,t,n){e.y0=t,e.y=n}a.layout.stack=function(){var e=L,t=gr,n=vr,r=hr,i=fr,o=dr;function s(l,c){if(!(h=l.length))return l;var u=l.map((function(t,n){return e.call(s,t,n)})),f=u.map((function(e){return e.map((function(e,t){return[i.call(s,e,t),o.call(s,e,t)]}))})),d=t.call(s,f,c);u=a.permute(u,d),f=a.permute(f,d);var h,p,m,g,v=n.call(s,f,c),y=u[0].length;for(m=0;m<y;++m)for(r.call(s,u[0][m],g=v[m],f[0][m][1]),p=1;p<h;++p)r.call(s,u[p][m],g+=f[p-1][m][1],f[p][m][1]);return l}return s.values=function(t){return arguments.length?(e=t,s):e},s.order=function(e){return arguments.length?(t="function"==typeof e?e:pr.get(e)||gr,s):t},s.offset=function(e){return arguments.length?(n="function"==typeof e?e:mr.get(e)||vr,s):n},s.x=function(e){return arguments.length?(i=e,s):i},s.y=function(e){return arguments.length?(o=e,s):o},s.out=function(e){return arguments.length?(r=e,s):r},s};var pr=a.map({"inside-out":function(e){var t,n,r=e.length,i=e.map(yr),o=e.map(br),s=a.range(r).sort((function(e,t){return i[e]-i[t]})),l=0,c=0,u=[],f=[];for(t=0;t<r;++t)n=s[t],l<c?(l+=o[n],u.push(n)):(c+=o[n],f.push(n));return f.reverse().concat(u)},reverse:function(e){return a.range(e.length).reverse()},default:gr}),mr=a.map({silhouette:function(e){var t,n,r,i=e.length,a=e[0].length,o=[],s=0,l=[];for(n=0;n<a;++n){for(t=0,r=0;t<i;t++)r+=e[t][n][1];r>s&&(s=r),o.push(r)}for(n=0;n<a;++n)l[n]=(s-o[n])/2;return l},wiggle:function(e){var t,n,r,i,a,o,s,l,c,u=e.length,f=e[0],d=f.length,h=[];for(h[0]=l=c=0,n=1;n<d;++n){for(t=0,i=0;t<u;++t)i+=e[t][n][1];for(t=0,a=0,s=f[n][0]-f[n-1][0];t<u;++t){for(r=0,o=(e[t][n][1]-e[t][n-1][1])/(2*s);r<t;++r)o+=(e[r][n][1]-e[r][n-1][1])/s;a+=o*e[t][n][1]}h[n]=l-=i?a/i*s:0,l<c&&(c=l)}for(n=0;n<d;++n)h[n]-=c;return h},expand:function(e){var t,n,r,i=e.length,a=e[0].length,o=1/i,s=[];for(n=0;n<a;++n){for(t=0,r=0;t<i;t++)r+=e[t][n][1];if(r)for(t=0;t<i;t++)e[t][n][1]/=r;else for(t=0;t<i;t++)e[t][n][1]=o}for(n=0;n<a;++n)s[n]=0;return s},zero:vr});function gr(e){return a.range(e.length)}function vr(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function yr(e){for(var t,n=1,r=0,i=e[0][1],a=e.length;n<a;++n)(t=e[n][1])>i&&(r=n,i=t);return r}function br(e){return e.reduce(xr,0)}function xr(e,t){return e+t[1]}function _r(e,t){return wr(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function wr(e,t){for(var n=-1,r=+e[0],i=(e[1]-r)/t,a=[];++n<=t;)a[n]=i*n+r;return a}function Ar(e){return[a.min(e),a.max(e)]}function kr(e,t){return e.value-t.value}function Er(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function Tr(e,t){e._pack_next=t,t._pack_prev=e}function Mr(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function Sr(e){if((t=e.children)&&(l=t.length)){var t,n,r,i,a,o,s,l,c=1/0,u=-1/0,f=1/0,d=-1/0;if(t.forEach(Cr),(n=t[0]).x=-n.r,n.y=0,b(n),l>1&&((r=t[1]).x=r.r,r.y=0,b(r),l>2))for(Nr(n,r,i=t[2]),b(i),Er(n,i),n._pack_prev=i,Er(i,r),r=n._pack_next,a=3;a<l;a++){Nr(n,r,i=t[a]);var h=0,p=1,m=1;for(o=r._pack_next;o!==r;o=o._pack_next,p++)if(Mr(o,i)){h=1;break}if(1==h)for(s=n._pack_prev;s!==o._pack_prev&&!Mr(s,i);s=s._pack_prev,m++);h?(p<m||p==m&&r.r<n.r?Tr(n,r=o):Tr(n=s,r),a--):(Er(n,i),r=i,b(i))}var g=(c+u)/2,v=(f+d)/2,y=0;for(a=0;a<l;a++)(i=t[a]).x-=g,i.y-=v,y=Math.max(y,i.r+Math.sqrt(i.x*i.x+i.y*i.y));e.r=y,t.forEach(Or)}function b(e){c=Math.min(e.x-e.r,c),u=Math.max(e.x+e.r,u),f=Math.min(e.y-e.r,f),d=Math.max(e.y+e.r,d)}}function Cr(e){e._pack_next=e._pack_prev=e}function Or(e){delete e._pack_next,delete e._pack_prev}function Rr(e,t,n,r){var i=e.children;if(e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r,i)for(var a=-1,o=i.length;++a<o;)Rr(i[a],t,n,r)}function Nr(e,t,n){var r=e.r+n.r,i=t.x-e.x,a=t.y-e.y;if(r&&(i||a)){var o=t.r+n.r,s=i*i+a*a,l=.5+((r*=r)-(o*=o))/(2*s),c=Math.sqrt(Math.max(0,2*o*(r+s)-(r-=s)*r-o*o))/(2*s);n.x=e.x+l*i+c*a,n.y=e.y+l*a-c*i}else n.x=e.x+r,n.y=e.y}function Lr(e,t){return e.parent==t.parent?1:2}function Dr(e){var t=e.children;return t.length?t[0]:e.t}function Pr(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function Ir(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Fr(e,t,n){return e.a.parent===t.parent?e.a:n}function zr(e){var t=e.children;return t&&t.length?zr(t[0]):e}function jr(e){var t,n=e.children;return n&&(t=n.length)?jr(n[t-1]):e}function Br(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Ur(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],a=e.dy-t[0]-t[2];return i<0&&(n+=i/2,i=0),a<0&&(r+=a/2,a=0),{x:n,y:r,dx:i,dy:a}}function $r(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function qr(e){return e.rangeExtent?e.rangeExtent():$r(e.range())}function Hr(e,t,n,r){var i=n(e[0],e[1]),a=r(t[0],t[1]);return function(e){return a(i(e))}}function Vr(e,t){var n,r=0,i=e.length-1,a=e[r],o=e[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),e[r]=t.floor(a),e[i]=t.ceil(o),e}function Wr(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:Gr}a.layout.histogram=function(){var e=!0,t=Number,n=Ar,r=_r;function i(i,o){for(var s,l,c=[],u=i.map(t,this),f=n.call(this,u,o),d=r.call(this,f,u,o),h=(o=-1,u.length),p=d.length-1,m=e?1:1/h;++o<p;)(s=c[o]=[]).dx=d[o+1]-(s.x=d[o]),s.y=0;if(p>0)for(o=-1;++o<h;)(l=u[o])>=f[0]&&l<=f[1]&&((s=c[a.bisect(d,l,1,p)-1]).y+=m,s.push(i[o]));return c}return i.value=function(e){return arguments.length?(t=e,i):t},i.range=function(e){return arguments.length?(n=mt(e),i):n},i.bins=function(e){return arguments.length?(r="number"==typeof e?function(t){return wr(t,e)}:mt(e),i):r},i.frequency=function(t){return arguments.length?(e=!!t,i):e},i},a.layout.pack=function(){var e,t=a.layout.hierarchy().sort(kr),n=0,r=[1,1];function i(i,a){var o=t.call(this,i,a),s=o[0],l=r[0],c=r[1],u=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,ar(s,(function(e){e.r=+u(e.value)})),ar(s,Sr),n){var f=n*(e?1:Math.max(2*s.r/l,2*s.r/c))/2;ar(s,(function(e){e.r+=f})),ar(s,Sr),ar(s,(function(e){e.r-=f}))}return Rr(s,l/2,c/2,e?1:1/Math.max(2*s.r/l,2*s.r/c)),o}return i.size=function(e){return arguments.length?(r=e,i):r},i.radius=function(t){return arguments.length?(e=null==t||"function"==typeof t?t:+t,i):e},i.padding=function(e){return arguments.length?(n=+e,i):n},rr(i,t)},a.layout.tree=function(){var e=a.layout.hierarchy().sort(null).value(null),t=Lr,n=[1,1],r=null;function i(i,a){var c=e.call(this,i,a),u=c[0],f=function(e){var t,n={A:null,children:[e]},r=[n];for(;null!=(t=r.pop());)for(var i,a=t.children,o=0,s=a.length;o<s;++o)r.push((a[o]=i={_:a[o],parent:t,children:(i=a[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return n.children[0]}(u);if(ar(f,o),f.parent.m=-f.z,ir(f,s),r)ir(u,l);else{var d=u,h=u,p=u;ir(u,(function(e){e.x<d.x&&(d=e),e.x>h.x&&(h=e),e.depth>p.depth&&(p=e)}));var m=t(d,h)/2-d.x,g=n[0]/(h.x+t(h,d)/2+m),v=n[1]/(p.depth||1);ir(u,(function(e){e.x=(e.x+m)*g,e.y=e.depth*v}))}return c}function o(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n.length){!function(e){var t,n=0,r=0,i=e.children,a=i.length;for(;--a>=0;)(t=i[a]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(e);var a=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-a):e.z=a}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,a=e,o=e,s=n,l=a.parent.children[0],c=a.m,u=o.m,f=s.m,d=l.m;s=Pr(s),a=Dr(a),s&&a;)l=Dr(l),(o=Pr(o)).a=e,(i=s.z+f-a.z-c+t(s._,a._))>0&&(Ir(Fr(s,e,r),e,i),c+=i,u+=i),f+=s.m,c+=a.m,d+=l.m,u+=o.m;s&&!Pr(o)&&(o.t=s,o.m+=f-u),a&&!Dr(l)&&(l.t=a,l.m+=c-d,r=e)}return r}(e,i,e.parent.A||r[0])}function s(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function l(e){e.x*=n[0],e.y=e.depth*n[1]}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(e){return arguments.length?(r=null==(n=e)?l:null,i):r?null:n},i.nodeSize=function(e){return arguments.length?(r=null==(n=e)?null:l,i):r?n:null},rr(i,e)},a.layout.cluster=function(){var e=a.layout.hierarchy().sort(null).value(null),t=Lr,n=[1,1],r=!1;function i(i,o){var s,l=e.call(this,i,o),c=l[0],u=0;ar(c,(function(e){var n=e.children;n&&n.length?(e.x=function(e){return e.reduce((function(e,t){return e+t.x}),0)/e.length}(n),e.y=function(e){return 1+a.max(e,(function(e){return e.y}))}(n)):(e.x=s?u+=t(e,s):0,e.y=0,s=e)}));var f=zr(c),d=jr(c),h=f.x-t(f,d)/2,p=d.x+t(d,f)/2;return ar(c,r?function(e){e.x=(e.x-c.x)*n[0],e.y=(c.y-e.y)*n[1]}:function(e){e.x=(e.x-h)/(p-h)*n[0],e.y=(1-(c.y?e.y/c.y:1))*n[1]}),l}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(e){return arguments.length?(r=null==(n=e),i):r?null:n},i.nodeSize=function(e){return arguments.length?(r=null!=(n=e),i):r?n:null},rr(i,e)},a.layout.treemap=function(){var e,t=a.layout.hierarchy(),n=Math.round,r=[1,1],i=null,o=Br,s=!1,l="squarify",c=.5*(1+Math.sqrt(5));function u(e,t){for(var n,r,i=-1,a=e.length;++i<a;)r=(n=e[i]).value*(t<0?0:t),n.area=isNaN(r)||r<=0?0:r}function f(e){var t=e.children;if(t&&t.length){var n,r,i,a=o(e),s=[],c=t.slice(),d=1/0,m="slice"===l?a.dx:"dice"===l?a.dy:"slice-dice"===l?1&e.depth?a.dy:a.dx:Math.min(a.dx,a.dy);for(u(c,a.dx*a.dy/e.value),s.area=0;(i=c.length)>0;)s.push(n=c[i-1]),s.area+=n.area,"squarify"!==l||(r=h(s,m))<=d?(c.pop(),d=r):(s.area-=s.pop().area,p(s,m,a,!1),m=Math.min(a.dx,a.dy),s.length=s.area=0,d=1/0);s.length&&(p(s,m,a,!0),s.length=s.area=0),t.forEach(f)}}function d(e){var t=e.children;if(t&&t.length){var n,r=o(e),i=t.slice(),a=[];for(u(i,r.dx*r.dy/e.value),a.area=0;n=i.pop();)a.push(n),a.area+=n.area,null!=n.z&&(p(a,n.z?r.dx:r.dy,r,!i.length),a.length=a.area=0);t.forEach(d)}}function h(e,t){for(var n,r=e.area,i=0,a=1/0,o=-1,s=e.length;++o<s;)(n=e[o].area)&&(n<a&&(a=n),n>i&&(i=n));return t*=t,(r*=r)?Math.max(t*i*c/r,r/(t*a*c)):1/0}function p(e,t,r,i){var a,o=-1,s=e.length,l=r.x,c=r.y,u=t?n(e.area/t):0;if(t==r.dx){for((i||u>r.dy)&&(u=r.dy);++o<s;)(a=e[o]).x=l,a.y=c,a.dy=u,l+=a.dx=Math.min(r.x+r.dx-l,u?n(a.area/u):0);a.z=!0,a.dx+=r.x+r.dx-l,r.y+=u,r.dy-=u}else{for((i||u>r.dx)&&(u=r.dx);++o<s;)(a=e[o]).x=l,a.y=c,a.dx=u,c+=a.dy=Math.min(r.y+r.dy-c,u?n(a.area/u):0);a.z=!1,a.dy+=r.y+r.dy-c,r.x+=u,r.dx-=u}}function m(n){var i=e||t(n),a=i[0];return a.x=a.y=0,a.value?(a.dx=r[0],a.dy=r[1]):a.dx=a.dy=0,e&&t.revalue(a),u([a],a.dx*a.dy/a.value),(e?d:f)(a),s&&(e=i),i}return m.size=function(e){return arguments.length?(r=e,m):r},m.padding=function(e){if(!arguments.length)return i;function t(t){return Ur(t,e)}var n;return o=null==(i=e)?Br:"function"==(n=typeof e)?function(t){var n=e.call(m,t,t.depth);return null==n?Br(t):Ur(t,"number"==typeof n?[n,n,n,n]:n)}:"number"===n?(e=[e,e,e,e],t):t,m},m.round=function(e){return arguments.length?(n=e?Math.round:Number,m):n!=Number},m.sticky=function(t){return arguments.length?(s=t,e=null,m):s},m.ratio=function(e){return arguments.length?(c=e,m):c},m.mode=function(e){return arguments.length?(l=e+"",m):l},rr(m,t)},a.random={normal:function(e,t){var n=arguments.length;return n<2&&(t=1),n<1&&(e=0),function(){var n,r,i;do{i=(n=2*Math.random()-1)*n+(r=2*Math.random()-1)*r}while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=a.random.normal.apply(a,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=a.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++)t+=Math.random();return t}}},a.scale={};var Gr={floor:L,ceil:L};function Yr(e,t,n,r){var i=[],o=[],s=0,l=Math.min(e.length,t.length)-1;for(e[l]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<=l;)i.push(n(e[s-1],e[s])),o.push(r(t[s-1],t[s]));return function(t){var n=a.bisect(e,t,1,l)-1;return o[n](i[n](t))}}function Xr(e,t,n,r){var i,a;function o(){var o=Math.min(e.length,t.length)>2?Yr:Hr,l=r?Wn:Vn;return i=o(e,t,l,n),a=o(t,e,l,kn),s}function s(e){return i(e)}return s.invert=function(e){return a(e)},s.domain=function(t){return arguments.length?(e=t.map(Number),o()):e},s.range=function(e){return arguments.length?(t=e,o()):t},s.rangeRound=function(e){return s.range(e).interpolate(zn)},s.clamp=function(e){return arguments.length?(r=e,o()):r},s.interpolate=function(e){return arguments.length?(n=e,o()):n},s.ticks=function(t){return Qr(e,t)},s.tickFormat=function(t,n){return d3_scale_linearTickFormat(e,t,n)},s.nice=function(t){return Zr(e,t),o()},s.copy=function(){return Xr(e,t,n,r)},o()}function Kr(e,t){return a.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Zr(e,t){return Vr(e,Wr(Jr(e,t)[2])),Vr(e,Wr(Jr(e,t)[2])),e}function Jr(e,t){null==t&&(t=10);var n=$r(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),a=t/r*i;return a<=.15?i*=10:a<=.35?i*=5:a<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function Qr(e,t){return a.range.apply(a,Jr(e,t))}a.scale.linear=function(){return Xr([0,1],[0,1],kn,!1)};function ei(e,t,n,r){function i(e){return(n?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function a(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function o(t){return e(i(t))}return o.invert=function(t){return a(e.invert(t))},o.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((r=t.map(Number)).map(i)),o):r},o.base=function(n){return arguments.length?(t=+n,e.domain(r.map(i)),o):t},o.nice=function(){var t=Vr(r.map(i),n?Math:ti);return e.domain(t),r=t.map(a),o},o.ticks=function(){var e=$r(r),o=[],s=e[0],l=e[1],c=Math.floor(i(s)),u=Math.ceil(i(l)),f=t%1?2:t;if(isFinite(u-c)){if(n){for(;c<u;c++)for(var d=1;d<f;d++)o.push(a(c)*d);o.push(a(c))}else for(o.push(a(c));c++<u;)for(d=f-1;d>0;d--)o.push(a(c)*d);for(c=0;o[c]<s;c++);for(u=o.length;o[u-1]>l;u--);o=o.slice(c,u)}return o},o.copy=function(){return ei(e.copy(),t,n,r)},Kr(o,e)}a.scale.log=function(){return ei(a.scale.linear().domain([0,1]),10,!0,[1,10])};var ti={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};function ni(e,t,n){var r=ri(t),i=ri(1/t);function a(t){return e(r(t))}return a.invert=function(t){return i(e.invert(t))},a.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(r)),a):n},a.ticks=function(e){return Qr(n,e)},a.tickFormat=function(e,t){return d3_scale_linearTickFormat(n,e,t)},a.nice=function(e){return a.domain(Zr(n,e))},a.exponent=function(o){return arguments.length?(r=ri(t=o),i=ri(1/t),e.domain(n.map(r)),a):t},a.copy=function(){return ni(e.copy(),t,n)},Kr(a,e)}function ri(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function ii(e,t){var n,r,i;function o(i){return r[((n.get(i)||("range"===t.t?n.set(i,e.push(i)):NaN))-1)%r.length]}function s(t,n){return a.range(e.length).map((function(e){return t+n*e}))}return o.domain=function(r){if(!arguments.length)return e;e=[],n=new k;for(var i,a=-1,s=r.length;++a<s;)n.has(i=r[a])||n.set(i,e.push(i));return o[t.t].apply(o,t.a)},o.range=function(e){return arguments.length?(r=e,i=0,t={t:"range",a:arguments},o):r},o.rangePoints=function(n,a){arguments.length<2&&(a=0);var l=n[0],c=n[1],u=e.length<2?(l=(l+c)/2,0):(c-l)/(e.length-1+a);return r=s(l+u*a/2,u),i=0,t={t:"rangePoints",a:arguments},o},o.rangeRoundPoints=function(n,a){arguments.length<2&&(a=0);var l=n[0],c=n[1],u=e.length<2?(l=c=Math.round((l+c)/2),0):(c-l)/(e.length-1+a)|0;return r=s(l+Math.round(u*a/2+(c-l-(e.length-1+a)*u)/2),u),i=0,t={t:"rangeRoundPoints",a:arguments},o},o.rangeBands=function(n,a,l){arguments.length<2&&(a=0),arguments.length<3&&(l=a);var c=n[1]<n[0],u=n[c-0],f=(n[1-c]-u)/(e.length-a+2*l);return r=s(u+f*l,f),c&&r.reverse(),i=f*(1-a),t={t:"rangeBands",a:arguments},o},o.rangeRoundBands=function(n,a,l){arguments.length<2&&(a=0),arguments.length<3&&(l=a);var c=n[1]<n[0],u=n[c-0],f=n[1-c],d=Math.floor((f-u)/(e.length-a+2*l));return r=s(u+Math.round((f-u-(e.length-a)*d)/2),d),c&&r.reverse(),i=Math.round(d*(1-a)),t={t:"rangeRoundBands",a:arguments},o},o.rangeBand=function(){return i},o.rangeExtent=function(){return $r(t.a[0])},o.copy=function(){return ii(e,t)},o.domain(e)}a.scale.pow=function(){return ni(a.scale.linear(),1,[0,1])},a.scale.sqrt=function(){return a.scale.pow().exponent(.5)},a.scale.ordinal=function(){return ii([],{t:"range",a:[[]]})},a.scale.category10=function(){return a.scale.ordinal().range(ai)},a.scale.category20=function(){return a.scale.ordinal().range(oi)},a.scale.category20b=function(){return a.scale.ordinal().range(si)},a.scale.category20c=function(){return a.scale.ordinal().range(li)};var ai=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ot),oi=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ot),si=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ot),li=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ot);function ci(e,t){var n;function r(){var r=0,o=t.length;for(n=[];++r<o;)n[r-1]=a.quantile(e,r/o);return i}function i(e){if(!isNaN(e=+e))return t[a.bisect(n,e)]}return i.domain=function(t){return arguments.length?(e=t.map(v).filter(y).sort(g),r()):e},i.range=function(e){return arguments.length?(t=e,r()):t},i.quantiles=function(){return n},i.invertExtent=function(r){return(r=t.indexOf(r))<0?[NaN,NaN]:[r>0?n[r-1]:e[0],r<n.length?n[r]:e[e.length-1]]},i.copy=function(){return ci(e,t)},r()}function ui(e,t,n){var r,i;function a(t){return n[Math.max(0,Math.min(i,Math.floor(r*(t-e))))]}function o(){return r=n.length/(t-e),i=n.length-1,a}return a.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],o()):[e,t]},a.range=function(e){return arguments.length?(n=e,o()):n},a.invertExtent=function(t){return[t=(t=n.indexOf(t))<0?NaN:t/r+e,t+1/r]},a.copy=function(){return ui(e,t,n)},o()}function fi(e,t){function n(n){if(n<=n)return t[a.bisect(e,n)]}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return fi(e,t)},n}function di(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return Qr(e,t)},t.tickFormat=function(t,n){return d3_scale_linearTickFormat(e,t,n)},t.copy=function(){return di(e)},t}function hi(){return 0}a.scale.quantile=function(){return ci([],[])},a.scale.quantize=function(){return ui(0,1,[0,1])},a.scale.threshold=function(){return fi([.5],[0,1])},a.scale.identity=function(){return di([0,1])},a.svg={},a.svg.arc=function(){var e=mi,t=gi,n=hi,r=pi,i=vi,a=yi,o=bi;function s(){var s=Math.max(0,+e.apply(this,arguments)),c=Math.max(0,+t.apply(this,arguments)),u=i.apply(this,arguments)-Re,f=a.apply(this,arguments)-Re,d=Math.abs(f-u),h=u>f?0:1;if(c<s&&(p=c,c=s,s=p),d>=Oe)return l(c,h)+(s?l(s,1-h):"")+"Z";var p,m,g,v,y,b,x,_,w,A,k,E,T=0,M=0,S=[];if((v=(+o.apply(this,arguments)||0)/2)&&(g=r===pi?Math.sqrt(s*s+c*c):+r.apply(this,arguments),h||(M*=-1),c&&(M=De(g/c*Math.sin(v))),s&&(T=De(g/s*Math.sin(v)))),c){y=c*Math.cos(u+M),b=c*Math.sin(u+M),x=c*Math.cos(f-M),_=c*Math.sin(f-M);var C=Math.abs(f-u-2*M)<=Se?0:1;if(M&&xi(y,b,x,_)===h^C){var O=(u+f)/2;y=c*Math.cos(O),b=c*Math.sin(O),x=_=null}}else y=b=0;if(s){w=s*Math.cos(f-T),A=s*Math.sin(f-T),k=s*Math.cos(u+T),E=s*Math.sin(u+T);var R=Math.abs(u-f+2*T)<=Se?0:1;if(T&&xi(w,A,k,E)===1-h^R){var N=(u+f)/2;w=s*Math.cos(N),A=s*Math.sin(N),k=E=null}}else w=A=0;if(d>Te&&(p=Math.min(Math.abs(c-s)/2,+n.apply(this,arguments)))>.001){m=s<c^h?0:1;var L=p,D=p;if(d<Se){var P=null==k?[w,A]:null==x?[y,b]:Lt([y,b],[k,E],[x,_],[w,A]),I=y-P[0],F=b-P[1],z=x-P[0],j=_-P[1],B=1/Math.sin(Math.acos((I*z+F*j)/(Math.sqrt(I*I+F*F)*Math.sqrt(z*z+j*j)))/2),U=Math.sqrt(P[0]*P[0]+P[1]*P[1]);D=Math.min(p,(s-U)/(B-1)),L=Math.min(p,(c-U)/(B+1))}if(null!=x){var $=_i(null==k?[w,A]:[k,E],[y,b],c,L,h),q=_i([x,_],[w,A],c,L,h);p===L?S.push("M",$[0],"A",L,",",L," 0 0,",m," ",$[1],"A",c,",",c," 0 ",1-h^xi($[1][0],$[1][1],q[1][0],q[1][1]),",",h," ",q[1],"A",L,",",L," 0 0,",m," ",q[0]):S.push("M",$[0],"A",L,",",L," 0 1,",m," ",q[0])}else S.push("M",y,",",b);if(null!=k){var H=_i([y,b],[k,E],s,-D,h),V=_i([w,A],null==x?[y,b]:[x,_],s,-D,h);p===D?S.push("L",V[0],"A",D,",",D," 0 0,",m," ",V[1],"A",s,",",s," 0 ",h^xi(V[1][0],V[1][1],H[1][0],H[1][1]),",",1-h," ",H[1],"A",D,",",D," 0 0,",m," ",H[0]):S.push("L",V[0],"A",D,",",D," 0 0,",m," ",H[0])}else S.push("L",w,",",A)}else S.push("M",y,",",b),null!=x&&S.push("A",c,",",c," 0 ",C,",",h," ",x,",",_),S.push("L",w,",",A),null!=k&&S.push("A",s,",",s," 0 ",R,",",1-h," ",k,",",E);return S.push("Z"),S.join("")}function l(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}return s.innerRadius=function(t){return arguments.length?(e=mt(t),s):e},s.outerRadius=function(e){return arguments.length?(t=mt(e),s):t},s.cornerRadius=function(e){return arguments.length?(n=mt(e),s):n},s.padRadius=function(e){return arguments.length?(r=e==pi?pi:mt(e),s):r},s.startAngle=function(e){return arguments.length?(i=mt(e),s):i},s.endAngle=function(e){return arguments.length?(a=mt(e),s):a},s.padAngle=function(e){return arguments.length?(o=mt(e),s):o},s.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Re;return[Math.cos(r)*n,Math.sin(r)*n]},s};var pi="auto";function mi(e){return e.innerRadius}function gi(e){return e.outerRadius}function vi(e){return e.startAngle}function yi(e){return e.endAngle}function bi(e){return e&&e.padAngle}function xi(e,t,n,r){return(e-n)*t-(t-r)*e>0?0:1}function _i(e,t,n,r,i){var a=e[0]-t[0],o=e[1]-t[1],s=(i?r:-r)/Math.sqrt(a*a+o*o),l=s*o,c=-s*a,u=e[0]+l,f=e[1]+c,d=t[0]+l,h=t[1]+c,p=(u+d)/2,m=(f+h)/2,g=d-u,v=h-f,y=g*g+v*v,b=n-r,x=u*h-d*f,_=(v<0?-1:1)*Math.sqrt(Math.max(0,b*b*y-x*x)),w=(x*v-g*_)/y,A=(-x*g-v*_)/y,k=(x*v+g*_)/y,E=(-x*g+v*_)/y,T=w-p,M=A-m,S=k-p,C=E-m;return T*T+M*M>S*S+C*C&&(w=k,A=E),[[w-l,A-c],[w*n/b,A*n/b]]}function wi(){return!0}function Ai(e){var t=Mt,n=St,r=wi,i=Ei,a=i.key,o=.7;function s(a){var s,l=[],c=[],u=-1,f=a.length,d=mt(t),h=mt(n);function p(){l.push("M",i(e(c),o))}for(;++u<f;)r.call(this,s=a[u],u)?c.push([+d.call(this,s,u),+h.call(this,s,u)]):c.length&&(p(),c=[]);return c.length&&p(),l.length?l.join(""):null}return s.x=function(e){return arguments.length?(t=e,s):t},s.y=function(e){return arguments.length?(n=e,s):n},s.defined=function(e){return arguments.length?(r=e,s):r},s.interpolate=function(e){return arguments.length?(a="function"==typeof e?i=e:(i=ki.get(e)||Ei).key,s):a},s.tension=function(e){return arguments.length?(o=e,s):o},s}a.svg.line=function(){return Ai(L)};var ki=a.map({linear:Ei,"linear-closed":Ti,step:function(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];for(;++t<n;)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);n>1&&i.push("H",r[0]);return i.join("")},"step-before":Mi,"step-after":Si,basis:Ri,"basis-open":function(e){if(e.length<4)return Ei(e);var t,n=[],r=-1,i=e.length,a=[0],o=[0];for(;++r<3;)t=e[r],a.push(t[0]),o.push(t[1]);n.push(Ni(Pi,a)+","+Ni(Pi,o)),--r;for(;++r<i;)t=e[r],a.shift(),a.push(t[0]),o.shift(),o.push(t[1]),Ii(n,a,o);return n.join("")},"basis-closed":function(e){var t,n,r=-1,i=e.length,a=i+4,o=[],s=[];for(;++r<4;)n=e[r%i],o.push(n[0]),s.push(n[1]);t=[Ni(Pi,o),",",Ni(Pi,s)],--r;for(;++r<a;)n=e[r%i],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),Ii(t,o,s);return t.join("")},bundle:function(e,t){var n=e.length-1;if(n)for(var r,i,a=e[0][0],o=e[0][1],s=e[n][0]-a,l=e[n][1]-o,c=-1;++c<=n;)i=c/n,(r=e[c])[0]=t*r[0]+(1-t)*(a+i*s),r[1]=t*r[1]+(1-t)*(o+i*l);return Ri(e)},cardinal:function(e,t){return e.length<3?Ei(e):e[0]+Ci(e,Oi(e,t))},"cardinal-open":function(e,t){return e.length<4?Ei(e):e[1]+Ci(e.slice(1,-1),Oi(e,t))},"cardinal-closed":function(e,t){return e.length<3?Ti(e):e[0]+Ci((e.push(e[0]),e),Oi([e[e.length-2]].concat(e,[e[1]]),t))},monotone:function(e){return e.length<3?Ei(e):e[0]+Ci(e,function(e){var t,n,r,i,a=[],o=function(e){var t=0,n=e.length-1,r=[],i=e[0],a=e[1],o=r[0]=Fi(i,a);for(;++t<n;)r[t]=(o+(o=Fi(i=a,a=e[t+1])))/2;return r[t]=o,r}(e),s=-1,l=e.length-1;for(;++s<l;)t=Fi(e[s],e[s+1]),w(t)<Te?o[s]=o[s+1]=0:(i=(n=o[s]/t)*n+(r=o[s+1]/t)*r)>9&&(i=3*t/Math.sqrt(i),o[s]=i*n,o[s+1]=i*r);s=-1;for(;++s<=l;)i=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([i||0,o[s]*i||0]);return a}(e))}});function Ei(e){return e.length>1?e.join("L"):e+"Z"}function Ti(e){return e.join("L")+"Z"}function Mi(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function Si(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function Ci(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return Ei(e);var n=e.length!=t.length,r="",i=e[0],a=e[1],o=t[0],s=o,l=1;if(n&&(r+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],i=e[1],l=2),t.length>1){s=t[1],a=e[l],l++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var c=2;c<t.length;c++,l++)a=e[l],s=t[c],r+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(n){var u=e[l];r+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+u[0]+","+u[1]}return r}function Oi(e,t){for(var n,r=[],i=(1-t)/2,a=e[0],o=e[1],s=1,l=e.length;++s<l;)n=a,a=o,o=e[s],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function Ri(e){if(e.length<3)return Ei(e);var t=1,n=e.length,r=e[0],i=r[0],a=r[1],o=[i,i,i,(r=e[1])[0]],s=[a,a,a,r[1]],l=[i,",",a,"L",Ni(Pi,o),",",Ni(Pi,s)];for(e.push(e[n-1]);++t<=n;)r=e[t],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),Ii(l,o,s);return e.pop(),l.push("L",r),l.join("")}function Ni(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}ki.forEach((function(e,t){t.key=e,t.closed=/-closed$/.test(e)}));var Li=[0,2/3,1/3,0],Di=[0,1/3,2/3,0],Pi=[0,1/6,2/3,1/6];function Ii(e,t,n){e.push("C",Ni(Li,t),",",Ni(Li,n),",",Ni(Di,t),",",Ni(Di,n),",",Ni(Pi,t),",",Ni(Pi,n))}function Fi(e,t){return(t[1]-e[1])/(t[0]-e[0])}function zi(e){for(var t,n,r,i=-1,a=e.length;++i<a;)n=(t=e[i])[0],r=t[1]-Re,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function ji(e){var t=Mt,n=Mt,r=0,i=St,a=wi,o=Ei,s=o.key,l=o,c="L",u=.7;function f(s){var f,d,h,p=[],m=[],g=[],v=-1,y=s.length,b=mt(t),x=mt(r),_=t===n?function(){return d}:mt(n),w=r===i?function(){return h}:mt(i);function A(){p.push("M",o(e(g),u),c,l(e(m.reverse()),u),"Z")}for(;++v<y;)a.call(this,f=s[v],v)?(m.push([d=+b.call(this,f,v),h=+x.call(this,f,v)]),g.push([+_.call(this,f,v),+w.call(this,f,v)])):m.length&&(A(),m=[],g=[]);return m.length&&A(),p.length?p.join(""):null}return f.x=function(e){return arguments.length?(t=n=e,f):n},f.x0=function(e){return arguments.length?(t=e,f):t},f.x1=function(e){return arguments.length?(n=e,f):n},f.y=function(e){return arguments.length?(r=i=e,f):i},f.y0=function(e){return arguments.length?(r=e,f):r},f.y1=function(e){return arguments.length?(i=e,f):i},f.defined=function(e){return arguments.length?(a=e,f):a},f.interpolate=function(e){return arguments.length?(s="function"==typeof e?o=e:(o=ki.get(e)||Ei).key,l=o.reverse||o,c=o.closed?"M":"L",f):s},f.tension=function(e){return arguments.length?(u=e,f):u},f}function Bi(e){return e.source}function Ui(e){return e.target}function $i(e){return e.radius}function qi(e){return[e.x,e.y]}function Hi(){return 64}function Vi(){return"circle"}function Wi(e){var t=Math.sqrt(e/Se);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}a.svg.line.radial=function(){var e=Ai(zi);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},Mi.reverse=Si,Si.reverse=Mi,a.svg.area=function(){return ji(L)},a.svg.area.radial=function(){var e=ji(zi);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},a.svg.chord=function(){var e=Bi,t=Ui,n=$i,r=vi,i=yi;function a(n,r){var i,a,c=o(this,e,n,r),u=o(this,t,n,r);return"M"+c.p0+s(c.r,c.p1,c.a1-c.a0)+(a=u,((i=c).a0==a.a0&&i.a1==a.a1?l(c.r,c.p1,c.r,c.p0):l(c.r,c.p1,u.r,u.p0)+s(u.r,u.p1,u.a1-u.a0)+l(u.r,u.p1,c.r,c.p0))+"Z")}function o(e,t,a,o){var s=t.call(e,a,o),l=n.call(e,s,o),c=r.call(e,s,o)-Re,u=i.call(e,s,o)-Re;return{r:l,a0:c,a1:u,p0:[l*Math.cos(c),l*Math.sin(c)],p1:[l*Math.cos(u),l*Math.sin(u)]}}function s(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Se)+",1 "+t}function l(e,t,n,r){return"Q 0,0 "+r}return a.radius=function(e){return arguments.length?(n=mt(e),a):n},a.source=function(t){return arguments.length?(e=mt(t),a):e},a.target=function(e){return arguments.length?(t=mt(e),a):t},a.startAngle=function(e){return arguments.length?(r=mt(e),a):r},a.endAngle=function(e){return arguments.length?(i=mt(e),a):i},a},a.svg.diagonal=function(){var e=Bi,t=Ui,n=qi;function r(r,i){var a=e.call(this,r,i),o=t.call(this,r,i),s=(a.y+o.y)/2,l=[a,{x:a.x,y:s},{x:o.x,y:s},o];return"M"+(l=l.map(n))[0]+"C"+l[1]+" "+l[2]+" "+l[3]}return r.source=function(t){return arguments.length?(e=mt(t),r):e},r.target=function(e){return arguments.length?(t=mt(e),r):t},r.projection=function(e){return arguments.length?(n=e,r):n},r},a.svg.diagonal.radial=function(){var e=a.svg.diagonal(),t=qi,n=e.projection;return e.projection=function(e){return arguments.length?n(function(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]-Re;return[n*Math.cos(r),n*Math.sin(r)]}}(t=e)):t},e},a.svg.symbol=function(){var e=Vi,t=Hi;function n(n,r){return(Gi.get(e.call(this,n,r))||Wi)(t.call(this,n,r))}return n.type=function(t){return arguments.length?(e=mt(t),n):e},n.size=function(e){return arguments.length?(t=mt(e),n):t},n};var Gi=a.map({circle:Wi,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Xi)),n=t*Xi;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Yi),n=t*Yi/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Yi),n=t*Yi/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});a.svg.symbolTypes=Gi.keys();var Yi=Math.sqrt(3),Xi=Math.tan(30*Ne);X.transition=function(e){for(var t,n,r=Qi||++na,i=aa(e),a=[],o=ea||{time:Date.now(),ease:Ln,delay:0,duration:250},s=-1,l=this.length;++s<l;){a.push(t=[]);for(var c=this[s],u=-1,f=c.length;++u<f;)(n=c[u])&&oa(n,u,i,r,o),t.push(n)}return Ji(a,i,r)},X.interrupt=function(e){return this.each(null==e?Ki:Zi(aa(e)))};var Ki=Zi(aa());function Zi(e){return function(){var t,n,r;(t=this[e])&&(r=t[n=t.active])&&(r.timer.c=null,r.timer.t=NaN,--t.count?delete t[n]:delete this[e],t.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Ji(e,t,n){return H(e,ta),e.namespace=t,e.id=n,e}var Qi,ea,ta=[],na=0;function ra(e,t,n,r){var i=e.id,a=e.namespace;return he(e,"function"==typeof n?function(e,o,s){e[a][i].tween.set(t,r(n.call(e,e.__data__,o,s)))}:(n=r(n),function(e){e[a][i].tween.set(t,n)}))}function ia(e){return null==e&&(e=""),function(){this.textContent=e}}function aa(e){return null==e?"__transition__":"__transition_"+e+"__"}function oa(e,t,n,r,i){var a,o,s,l,c,u=e[n]||(e[n]={active:0,count:0}),f=u[r];function d(n){var i=u.active,d=u[i];for(var p in d&&(d.timer.c=null,d.timer.t=NaN,--u.count,delete u[i],d.event&&d.event.interrupt.call(e,e.__data__,d.index)),u)if(+p<r){var m=u[p];m.timer.c=null,m.timer.t=NaN,--u.count,delete u[p]}o.c=h,At((function(){return o.c&&h(n||1)&&(o.c=null,o.t=NaN),1}),0,a),u.active=r,f.event&&f.event.start.call(e,e.__data__,t),c=[],f.tween.forEach((function(n,r){(r=r.call(e,e.__data__,t))&&c.push(r)})),l=f.ease,s=f.duration}function h(i){for(var a=i/s,o=l(a),d=c.length;d>0;)c[--d].call(e,o);if(a>=1)return f.event&&f.event.end.call(e,e.__data__,t),--u.count?delete u[r]:delete e[n],1}f||(a=i.time,o=At((function(e){var t=f.delay;if(o.t=t+a,t<=e)return d(e-t);o.c=d}),0,a),f=u[r]={tween:new k,time:a,timer:o,delay:i.delay,duration:i.duration,ease:i.ease,index:t},i=null,++u.count)}ta.call=X.call,ta.empty=X.empty,ta.node=X.node,ta.size=X.size,a.transition=function(e,t){return e&&e.transition?Qi?e.transition(t):e:a.selection().transition(e)},a.transition.prototype=ta,ta.select=function(e){var t,n,r,i=this.id,a=this.namespace,o=[];e=K(e);for(var s=-1,l=this.length;++s<l;){o.push(t=[]);for(var c=this[s],u=-1,f=c.length;++u<f;)(r=c[u])&&(n=e.call(r,r.__data__,u,s))?("__data__"in r&&(n.__data__=r.__data__),oa(n,u,a,i,r[a][i]),t.push(n)):t.push(null)}return Ji(o,a,i)},ta.selectAll=function(e){var t,n,r,i,a,o=this.id,s=this.namespace,l=[];e=Z(e);for(var c=-1,u=this.length;++c<u;)for(var f=this[c],d=-1,h=f.length;++d<h;)if(r=f[d]){a=r[s][o],n=e.call(r,r.__data__,d,c),l.push(t=[]);for(var p=-1,m=n.length;++p<m;)(i=n[p])&&oa(i,p,s,o,a),t.push(i)}return Ji(l,s,o)},ta.filter=function(e){var t,n,r=[];"function"!=typeof e&&(e=fe(e));for(var i=0,a=this.length;i<a;i++){r.push(t=[]);for(var o,s=0,l=(o=this[i]).length;s<l;s++)(n=o[s])&&e.call(n,n.__data__,s,i)&&t.push(n)}return Ji(r,this.namespace,this.id)},ta.tween=function(e,t){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(e):he(this,null==t?function(t){t[r][n].tween.remove(e)}:function(i){i[r][n].tween.set(e,t)})},ta.attr=function(e,t){if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var n="transform"==e?Hn:kn,r=a.ns.qualify(e);function i(){this.removeAttribute(r)}function o(){this.removeAttributeNS(r.space,r.local)}return ra(this,"attr."+e,t,r.local?function(e){return null==e?o:(e+="",function(){var t,i=this.getAttributeNS(r.space,r.local);return i!==e&&(t=n(i,e),function(e){this.setAttributeNS(r.space,r.local,t(e))})})}:function(e){return null==e?i:(e+="",function(){var t,i=this.getAttribute(r);return i!==e&&(t=n(i,e),function(e){this.setAttribute(r,t(e))})})})},ta.attrTween=function(e,t){var n=a.ns.qualify(e);return this.tween("attr."+e,n.local?function(e,r){var i=t.call(this,e,r,this.getAttributeNS(n.space,n.local));return i&&function(e){this.setAttributeNS(n.space,n.local,i(e))}}:function(e,r){var i=t.call(this,e,r,this.getAttribute(n));return i&&function(e){this.setAttribute(n,i(e))}})},ta.style=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=""),e)this.style(n,e[n],t);return this}n=""}function i(){this.style.removeProperty(e)}return ra(this,"style."+e,t,(function(t){return null==t?i:(t+="",function(){var r,i=u(this).getComputedStyle(this,null).getPropertyValue(e);return i!==t&&(r=kn(i,t),function(t){this.style.setProperty(e,r(t),n)})})}))},ta.styleTween=function(e,t,n){return arguments.length<3&&(n=""),this.tween("style."+e,(function(r,i){var a=t.call(this,r,i,u(this).getComputedStyle(this,null).getPropertyValue(e));return a&&function(t){this.style.setProperty(e,a(t),n)}}))},ta.text=function(e){return ra(this,"text",e,ia)},ta.remove=function(){var e=this.namespace;return this.each("end.transition",(function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)}))},ta.ease=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].ease:("function"!=typeof e&&(e=a.ease.apply(a,arguments)),he(this,(function(r){r[n][t].ease=e})))},ta.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:he(this,"function"==typeof e?function(r,i,a){r[n][t].delay=+e.call(r,r.__data__,i,a)}:(e=+e,function(r){r[n][t].delay=e}))},ta.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:he(this,"function"==typeof e?function(r,i,a){r[n][t].duration=Math.max(1,e.call(r,r.__data__,i,a))}:(e=Math.max(1,e),function(r){r[n][t].duration=e}))},ta.each=function(e,t){var n=this.id,r=this.namespace;if(arguments.length<2){var i=ea,o=Qi;try{Qi=n,he(this,(function(t,i,a){ea=t[r][n],e.call(t,t.__data__,i,a)}))}finally{ea=i,Qi=o}}else he(this,(function(i){var o=i[r][n];(o.event||(o.event=a.dispatch("start","end","interrupt"))).on(e,t)}));return this},ta.transition=function(){for(var e,t,n,r=this.id,i=++na,a=this.namespace,o=[],s=0,l=this.length;s<l;s++){o.push(e=[]);for(var c,u=0,f=(c=this[s]).length;u<f;u++)(t=c[u])&&oa(t,u,a,i,{time:(n=t[a][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),e.push(t)}return Ji(o,a,i)},a.svg.axis=function(){var e,t=a.scale.linear(),n=sa,r=6,i=6,o=3,l=[10],c=null;function u(s){s.each((function(){var s,u=a.select(this),f=this.__chart__||t,d=this.__chart__=t.copy(),h=null==c?d.ticks?d.ticks.apply(d,l):d.domain():c,p=null==e?d.tickFormat?d.tickFormat.apply(d,l):L:e,m=u.selectAll(".tick").data(h,d),g=m.enter().insert("g",".domain").attr("class","tick").style("opacity",Te),v=a.transition(m.exit()).style("opacity",Te).remove(),y=a.transition(m.order()).style("opacity",1),b=Math.max(r,0)+o,x=qr(d),_=u.selectAll(".domain").data([0]),w=(_.enter().append("path").attr("class","domain"),a.transition(_));g.append("line"),g.append("text");var A,k,E,T,M=g.select("line"),S=y.select("line"),C=m.select("text").text(p),O=g.select("text"),R=y.select("text"),N="top"===n||"left"===n?-1:1;if("bottom"===n||"top"===n?(s=ca,A="x",E="y",k="x2",T="y2",C.attr("dy",N<0?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+x[0]+","+N*i+"V0H"+x[1]+"V"+N*i)):(s=ua,A="y",E="x",k="y2",T="x2",C.attr("dy",".32em").style("text-anchor",N<0?"end":"start"),w.attr("d","M"+N*i+","+x[0]+"H0V"+x[1]+"H"+N*i)),M.attr(T,N*r),O.attr(E,N*b),S.attr(k,0).attr(T,N*r),R.attr(A,0).attr(E,N*b),d.rangeBand){var D=d,P=D.rangeBand()/2;f=d=function(e){return D(e)+P}}else f.rangeBand?f=d:v.call(s,d,f);g.call(s,f,d),y.call(s,d,d)}))}return u.scale=function(e){return arguments.length?(t=e,u):t},u.orient=function(e){return arguments.length?(n=e in la?e+"":sa,u):n},u.ticks=function(){return arguments.length?(l=s(arguments),u):l},u.tickValues=function(e){return arguments.length?(c=e,u):c},u.tickFormat=function(t){return arguments.length?(e=t,u):e},u.tickSize=function(e){var t=arguments.length;return t?(r=+e,i=+arguments[t-1],u):r},u.innerTickSize=function(e){return arguments.length?(r=+e,u):r},u.outerTickSize=function(e){return arguments.length?(i=+e,u):i},u.tickPadding=function(e){return arguments.length?(o=+e,u):o},u.tickSubdivide=function(){return arguments.length&&u},u};var sa="bottom",la={top:1,right:1,bottom:1,left:1};function ca(e,t,n){e.attr("transform",(function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"}))}function ua(e,t,n){e.attr("transform",(function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"}))}a.svg.brush=function(){var e,t,n=$(d,"brushstart","brush","brushend"),r=null,i=null,o=[0,0],s=[0,0],l=!0,c=!0,f=da[0];function d(e){e.each((function(){var e=a.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",g).on("touchstart.brush",g),t=e.selectAll(".background").data([0]);t.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=e.selectAll(".resize").data(f,L);n.exit().remove(),n.enter().append("g").attr("class",(function(e){return"resize "+e})).style("cursor",(function(e){return fa[e]})).append("rect").attr("x",(function(e){return/[ew]$/.test(e)?-3:null})).attr("y",(function(e){return/^[ns]/.test(e)?-3:null})).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",d.empty()?"none":null);var o,s=a.transition(e),l=a.transition(t);r&&(o=qr(r),l.attr("x",o[0]).attr("width",o[1]-o[0]),p(s)),i&&(o=qr(i),l.attr("y",o[0]).attr("height",o[1]-o[0]),m(s)),h(s)}))}function h(e){e.selectAll(".resize").attr("transform",(function(e){return"translate("+o[+/e$/.test(e)]+","+s[+/^s/.test(e)]+")"}))}function p(e){e.select(".extent").attr("x",o[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",o[1]-o[0])}function m(e){e.select(".extent").attr("y",s[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",s[1]-s[0])}function g(){var f,g,v=this,y=a.select(a.event.target),b=n.of(v,arguments),x=a.select(v),_=y.datum(),w=!/^(n|s)$/.test(_)&&r,A=!/^(e|w)$/.test(_)&&i,k=y.classed("extent"),E=we(v),T=a.mouse(v),M=a.select(u(v)).on("keydown.brush",(function(){32==a.event.keyCode&&(k||(f=null,T[0]-=o[1],T[1]-=s[1],k=2),B())})).on("keyup.brush",(function(){32==a.event.keyCode&&2==k&&(T[0]+=o[1],T[1]+=s[1],k=0,B())}));if(a.event.changedTouches?M.on("touchmove.brush",O).on("touchend.brush",N):M.on("mousemove.brush",O).on("mouseup.brush",N),x.interrupt().selectAll("*").interrupt(),k)T[0]=o[0]-T[0],T[1]=s[0]-T[1];else if(_){var S=+/w$/.test(_),C=+/^n/.test(_);g=[o[1-S]-T[0],s[1-C]-T[1]],T[0]=o[S],T[1]=s[C]}else a.event.altKey&&(f=T.slice());function O(){var e=a.mouse(v),t=!1;g&&(e[0]+=g[0],e[1]+=g[1]),k||(a.event.altKey?(f||(f=[(o[0]+o[1])/2,(s[0]+s[1])/2]),T[0]=o[+(e[0]<f[0])],T[1]=s[+(e[1]<f[1])]):f=null),w&&R(e,r,0)&&(p(x),t=!0),A&&R(e,i,1)&&(m(x),t=!0),t&&(h(x),b({type:"brush",mode:k?"move":"resize"}))}function R(n,r,i){var a,u,d=qr(r),h=d[0],p=d[1],m=T[i],g=i?s:o,v=g[1]-g[0];if(k&&(h-=m,p-=v+m),a=(i?c:l)?Math.max(h,Math.min(p,n[i])):n[i],k?u=(a+=m)+v:(f&&(m=Math.max(h,Math.min(p,2*f[i]-a))),m<a?(u=a,a=m):u=m),g[0]!=a||g[1]!=u)return i?t=null:e=null,g[0]=a,g[1]=u,!0}function N(){O(),x.style("pointer-events","all").selectAll(".resize").style("display",d.empty()?"none":null),a.select("body").style("cursor",null),M.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),E(),b({type:"brushend"})}x.style("pointer-events","none").selectAll(".resize").style("display",null),a.select("body").style("cursor",y.style("cursor")),b({type:"brushstart"}),O()}return d.event=function(r){r.each((function(){var r=n.of(this,arguments),i={x:o,y:s,i:e,j:t},l=this.__chart__||i;this.__chart__=i,Qi?a.select(this).transition().each("start.brush",(function(){e=l.i,t=l.j,o=l.x,s=l.y,r({type:"brushstart"})})).tween("brush:brush",(function(){var n=En(o,i.x),a=En(s,i.y);return e=t=null,function(e){o=i.x=n(e),s=i.y=a(e),r({type:"brush",mode:"resize"})}})).each("end.brush",(function(){e=i.i,t=i.j,r({type:"brush",mode:"resize"}),r({type:"brushend"})})):(r({type:"brushstart"}),r({type:"brush",mode:"resize"}),r({type:"brushend"}))}))},d.x=function(e){return arguments.length?(f=da[!(r=e)<<1|!i],d):r},d.y=function(e){return arguments.length?(f=da[!r<<1|!(i=e)],d):i},d.clamp=function(e){return arguments.length?(r&&i?(l=!!e[0],c=!!e[1]):r?l=!!e:i&&(c=!!e),d):r&&i?[l,c]:r?l:i?c:null},d.extent=function(n){var a,l,c,u,f;return arguments.length?(r&&(a=n[0],l=n[1],i&&(a=a[0],l=l[0]),e=[a,l],r.invert&&(a=r(a),l=r(l)),l<a&&(f=a,a=l,l=f),a==o[0]&&l==o[1]||(o=[a,l])),i&&(c=n[0],u=n[1],r&&(c=c[1],u=u[1]),t=[c,u],i.invert&&(c=i(c),u=i(u)),u<c&&(f=c,c=u,u=f),c==s[0]&&u==s[1]||(s=[c,u])),d):(r&&(e?(a=e[0],l=e[1]):(a=o[0],l=o[1],r.invert&&(a=r.invert(a),l=r.invert(l)),l<a&&(f=a,a=l,l=f))),i&&(t?(c=t[0],u=t[1]):(c=s[0],u=s[1],i.invert&&(c=i.invert(c),u=i.invert(u)),u<c&&(f=c,c=u,u=f))),r&&i?[[a,c],[l,u]]:r?[a,l]:i&&[c,u])},d.clear=function(){return d.empty()||(o=[0,0],s=[0,0],e=t=null),d},d.empty=function(){return!!r&&o[0]==o[1]||!!i&&s[0]==s[1]},a.rebind(d,n,"on")};var fa={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},da=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function ha(e){return JSON.parse(e.responseText)}function pa(e){var t=l.createRange();return t.selectNode(l.body),t.createContextualFragment(e.responseText)}a.text=gt((function(e){return e.responseText})),a.json=function(e,t){return vt(e,"application/json",ha,t)},a.html=function(e,t){return vt(e,"text/html",pa,t)},a.xml=gt((function(e){return e.responseXML})),void 0===(i="function"==typeof(r=a)?r.call(t,n,t,e):r)||(e.exports=i)}).apply(self)},96377:(e,t,n)=>{"use strict";e.exports=n(74914)},74914:(e,t,n)=>{"use strict";var r=n(59885),i=n(6940),a=n(84125),o=n(18116),s=n(19795),l=n(23358),c=n(37221),u=n(43701),f=n(63039),d=n(76134);function h(e,t){for(var n=t[0],r=t[1],a=1/(t[2]-n),o=1/(t[3]-r),s=new Array(e.length),l=0,c=e.length/2;l<c;l++)s[2*l]=i((e[2*l]-n)*a,0,1),s[2*l+1]=i((e[2*l+1]-r)*o,0,1);return s}e.exports=function(e,t){t||(t={}),e=c(e,"float64"),t=s(t,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var n=l(t.maxDepth,255),i=l(t.bounds,o(e,2));i[0]===i[2]&&i[2]++,i[1]===i[3]&&i[3]++;var p,m=h(e,i),g=e.length>>>1;t.dtype||(t.dtype="array"),"string"==typeof t.dtype?p=new(f(t.dtype))(g):t.dtype&&(p=t.dtype,Array.isArray(p)&&(p.length=g));for(var v=0;v<g;++v)p[v]=v;var y=[],b=[],x=[],_=[];!function e(t,r,i,a,o,s){if(!a.length)return null;var l=y[o]||(y[o]=[]),c=x[o]||(x[o]=[]),u=b[o]||(b[o]=[]),f=l.length;if(o++,o>n||s>1073741824){for(var d=0;d<a.length;d++)l.push(a[d]),c.push(s),u.push(null,null,null,null);return f}if(l.push(a[0]),c.push(s),a.length<=1)return u.push(null,null,null,null),f;for(var h=.5*i,p=t+h,g=r+h,v=[],_=[],w=[],A=[],k=1,E=a.length;k<E;k++){var T=a[k],M=m[2*T],S=m[2*T+1];M<p?S<g?v.push(T):_.push(T):S<g?w.push(T):A.push(T)}return s<<=2,u.push(e(t,r,h,v,o,s),e(t,g,h,_,o,s+1),e(p,r,h,w,o,s+2),e(p,g,h,A,o,s+3)),f}(0,0,1,p,0,1);for(var w=0,A=0;A<y.length;A++){var k=y[A];if(p.set)p.set(k,w);else for(var E=0,T=k.length;E<T;E++)p[E+w]=k[E];var M=w+y[A].length;_[A]=[w,M],w=M}return p.range=function(){var t,n=[],o=arguments.length;for(;o--;)n[o]=arguments[o];if(u(n[n.length-1])){var c=n.pop();n.length||null==c.x&&null==c.l&&null==c.left||(n=[c],t={}),t=s(c,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else t={};n.length||(n=i);var f=a.apply(void 0,n),p=[Math.min(f.x,f.x+f.width),Math.min(f.y,f.y+f.height),Math.max(f.x,f.x+f.width),Math.max(f.y,f.y+f.height)],m=p[0],g=p[1],v=p[2],w=p[3],A=h([m,g,v,w],i),k=A[0],E=A[1],T=A[2],M=A[3],C=l(t.level,y.length);if(null!=t.d){var O;"number"==typeof t.d?O=[t.d,t.d]:t.d.length&&(O=t.d),C=Math.min(Math.max(Math.ceil(-d(Math.abs(O[0])/(i[2]-i[0]))),Math.ceil(-d(Math.abs(O[1])/(i[3]-i[1])))),C)}if(C=Math.min(C,y.length),t.lod)return function(e,t,n,i,a){for(var o=[],s=0;s<a;s++){var l=x[s],c=_[s][0],u=S(e,t,s),f=S(n,i,s),d=r.ge(l,u),h=r.gt(l,f,d,l.length-1);o[s]=[d+c,h+c]}return o}(k,E,T,M,C);var R=[];function N(t,n,r,i,a,o){if(null!==a&&null!==o&&!(k>t+r||E>n+r||T<t||M<n||i>=C||a===o)){var s=y[i];void 0===o&&(o=s.length);for(var l=a;l<o;l++){var c=s[l],u=e[2*c],f=e[2*c+1];u>=m&&u<=v&&f>=g&&f<=w&&R.push(c)}var d=b[i],h=d[4*a+0],p=d[4*a+1],x=d[4*a+2],_=d[4*a+3],A=function(e,t){var n=null,r=0;for(;null===n;)if(n=e[4*t+r],++r>e.length)return null;return n}(d,a+1),S=.5*r,O=i+1;N(t,n,S,O,h,p||x||_||A),N(t,n+S,S,O,p,x||_||A),N(t+S,n,S,O,x,_||A),N(t+S,n+S,S,O,_,A)}}return N(0,0,1,0,0,1),R},p;function S(e,t,n){for(var r=1,i=.5,a=.5,o=.5,s=0;s<n;s++)r<<=2,r+=e<i?t<a?0:1:t<a?2:3,o*=.5,i+=e<i?-o:o,a+=t<a?-o:o;return r}}},480:e=>{e.exports=function(e){var t=0,n=0,r=0,i=0;return e.map((function(e){var a=(e=e.slice())[0],o=a.toUpperCase();if(a!=o)switch(e[0]=o,a){case"a":e[6]+=r,e[7]+=i;break;case"v":e[1]+=i;break;case"h":e[1]+=r;break;default:for(var s=1;s<e.length;)e[s++]+=r,e[s++]+=i}switch(o){case"Z":r=t,i=n;break;case"H":r=e[1];break;case"V":i=e[1];break;case"M":r=t=e[1],i=n=e[2];break;default:r=e[e.length-2],i=e[e.length-1]}return e}))}},18116:e=>{"use strict";e.exports=function(e,t){if(!e||null==e.length)throw Error("Argument should be an array");t=null==t?1:Math.floor(t);for(var n=Array(2*t),r=0;r<t;r++){for(var i=-1/0,a=1/0,o=r,s=e.length;o<s;o+=t)e[o]>i&&(i=e[o]),e[o]<a&&(a=e[o]);n[r]=a,n[t+r]=i}return n}},31627:e=>{"use strict";e.exports=function(e,t,n){if("function"==typeof Array.prototype.findIndex)return e.findIndex(t,n);if("function"!=typeof t)throw new TypeError("predicate must be a function");var r=Object(e),i=r.length;if(0===i)return-1;for(var a=0;a<i;a++)if(t.call(n,r[a],a,r))return a;return-1}},52704:(e,t,n)=>{"use strict";var r=n(18116);e.exports=function(e,t,n){if(!e||null==e.length)throw Error("Argument should be an array");null==t&&(t=1);null==n&&(n=r(e,t));for(var i=0;i<t;i++){var a=n[t+i],o=n[i],s=i,l=e.length;if(a===1/0&&o===-1/0)for(s=i;s<l;s+=t)e[s]=e[s]===a?1:e[s]===o?0:.5;else if(a===1/0)for(s=i;s<l;s+=t)e[s]=e[s]===a?1:0;else if(o===-1/0)for(s=i;s<l;s+=t)e[s]=e[s]===o?0:1;else{var c=a-o;for(s=i;s<l;s+=t)isNaN(e[s])||(e[s]=0===c?.5:(e[s]-o)/c)}}return e}},1002:e=>{const t="",n=["","","","","","","","","",""],r=["","","","","","",""];function i(e){let t="";const a=e.length;if(a>7){const t=a-7+1,n=e.slice(0,t),r=e.slice(t);return i(n)+""+i(r)}for(let i=0;i<a;i++){const o=e[i];o>0&&(t+=n[o]+r[a-i-1])}return t}function a(e){let t=e;t=t.replace("",""),t=t.replace("","");return t.length>5&&t.length-t.lastIndexOf("")==5&&(t=t.substr(0,t.length-5)+""),t}null!=e.exports&&(e.exports=function(e){let n=t;if(isNaN(e))return n;if(e>=Number.MAX_SAFE_INTEGER)return n;const r=Math.floor(e).toString(),o=Math.round(e%1*100).toString(),s=Array.from(r).map(Number),l=Array.from(o).map(Number);let c=i(s),u=i(l);return c=a(c),u=a(u),n=function(e,n){let r="";return r=""===e&&""===n?t:""!==e&&""===n?e+"":""===e&&""!==n?n+"":e+""+n+"",r}(c,u),n})},24433:(e,t,n)=>{"use strict";n.r(t),n.d(t,{decode:()=>s,encode:()=>o});for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)i[r.charCodeAt(a)]=a;var o=function(e){var t,n=new Uint8Array(e),i=n.length,a="";for(t=0;t<i;t+=3)a+=r[n[t]>>2],a+=r[(3&n[t])<<4|n[t+1]>>4],a+=r[(15&n[t+1])<<2|n[t+2]>>6],a+=r[63&n[t+2]];return i%3==2?a=a.substring(0,a.length-1)+"=":i%3==1&&(a=a.substring(0,a.length-2)+"=="),a},s=function(e){var t,n,r,a,o,s=.75*e.length,l=e.length,c=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var u=new ArrayBuffer(s),f=new Uint8Array(u);for(t=0;t<l;t+=4)n=i[e.charCodeAt(t)],r=i[e.charCodeAt(t+1)],a=i[e.charCodeAt(t+2)],o=i[e.charCodeAt(t+3)],f[c++]=n<<2|r>>4,f[c++]=(15&r)<<4|a>>2,f[c++]=(3&a)<<6|63&o;return u}},76086:(e,t)=>{"use strict";t.byteLength=function(e){var t=s(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,a=s(e),o=a[0],l=a[1],c=new i(function(e,t,n){return 3*(t+n)/4-n}(0,o,l)),u=0,f=l>0?o-4:o;for(n=0;n<f;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;2===l&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,c[u++]=255&t);1===l&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t);return c},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,a=[],o=16383,s=0,c=r-i;s<c;s+=o)a.push(l(e,s,s+o>c?c:s+o));1===i?(t=e[r-1],a.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],a.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return a.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)n[o]=a[o],r[a.charCodeAt(o)]=o;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,r){for(var i,a,o=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(n[(a=i)>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},16770:(e,t,n)=>{"use strict";var r=n(8486);function i(){var e={},t=0,n=0,r=0;return{add:function(i,a){a||(a=i,i=0),i>n?n=i:i<r&&(r=i),e[i]||(e[i]=[]),e[i].push(a),t++},process:function(){for(var t=r;t<=n;t++)for(var i=e[t],a=0;a<i.length;a++){(0,i[a])()}},size:function(){return t}}}e.exports=function(e){var t=(e=e||{}).reporter,n=r.getOption(e,"async",!0),a=r.getOption(e,"auto",!0);a&&!n&&(t&&t.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),n=!0);var o,s=i(),l=!1;function c(){for(l=!0;s.size();){var e=s;s=i(),e.process()}l=!1}function u(){var e;e=c,o=setTimeout(e,0)}return{add:function(e,t){!l&&a&&n&&0===s.size()&&u(),s.add(e,t)},force:function(e){l||(void 0===e&&(e=n),o&&(clearTimeout(o),o=null),e?u():c())}}}},8486:e=>{"use strict";(e.exports={}).getOption=function(e,t,n){var r=e[t];if(null==r&&void 0!==n)return n;return r}},48745:(e,t)=>{var n;n=function(e){e.version="1.0.2";var t=Math;function n(e,t){for(var n=0,r=0;n<e.length;++n)r=t*r+e[n];return r}function r(e,t,n,r,i){if(0===t)return n;if(1===t)return r;for(var a=2/e,o=r,s=1;s<t;++s)o=r*s*a+i*n,n=r,r=o;return o}function i(e,t,n,i,a){return function(n,o){if(i){if(0===n)return 1==i?-1/0:1/0;if(n<0)return NaN}return 0===o?e(n):1===o?t(n):o<0?NaN:r(n,o|=0,e(n),t(n),a)}}var a,o,s,l,c,u,f,d,h,p,m,g,v,y=function(){var e=.636619772,i=[57568490574,-13362590354,651619640.7,-11214424.18,77392.33017,-184.9052456].reverse(),a=[57568490411,1029532985,9494680.718,59272.64853,267.8532712,1].reverse(),o=[1,-.001098628627,2734510407e-14,-2073370639e-15,2.093887211e-7].reverse(),s=[-.01562499995,.0001430488765,-6911147651e-15,7.621095161e-7,-9.34935152e-8].reverse();function l(r){var l=0,c=0,u=0,f=r*r;if(r<8)l=(c=n(i,f))/(u=n(a,f));else{var d=r-.785398164;c=n(o,f=64/f),u=n(s,f),l=t.sqrt(e/r)*(t.cos(d)*c-t.sin(d)*u*8/r)}return l}var c=[72362614232,-7895059235,242396853.1,-2972611.439,15704.4826,-30.16036606].reverse(),u=[144725228442,2300535178,18583304.74,99447.43394,376.9991397,1].reverse(),f=[1,.00183105,-3516396496e-14,2457520174e-15,-2.40337019e-7].reverse(),d=[.04687499995,-.0002002690873,8449199096e-15,-8.8228987e-7,1.05787412e-7].reverse();function h(r){var i=0,a=0,o=0,s=r*r,l=t.abs(r)-2.356194491;return Math.abs(r)<8?i=(a=r*n(c,s))/(o=n(u,s)):(a=n(f,s=64/s),o=n(d,s),i=t.sqrt(e/t.abs(r))*(t.cos(l)*a-t.sin(l)*o*8/t.abs(r)),r<0&&(i=-i)),i}return function e(n,i){if(i=Math.round(i),!isFinite(n))return isNaN(n)?n:0;if(i<0)return(i%2?-1:1)*e(n,-i);if(n<0)return(i%2?-1:1)*e(-n,i);if(0===i)return l(n);if(1===i)return h(n);if(0===n)return 0;var a=0;if(n>i)a=r(n,i,l(n),h(n),-1);else{for(var o=!1,s=0,c=0,u=1,f=0,d=2/n,p=2*t.floor((i+t.floor(t.sqrt(40*i)))/2);p>0;p--)f=p*d*u-s,s=u,u=f,t.abs(u)>1e10&&(u*=1e-10,s*=1e-10,a*=1e-10,c*=1e-10),o&&(c+=u),o=!o,p==i&&(a=s);a/=c=2*c-u}return a}}(),b=(a=.636619772,o=[-2957821389,7062834065,-512359803.6,10879881.29,-86327.92757,228.4622733].reverse(),s=[40076544269,745249964.8,7189466.438,47447.2647,226.1030244,1].reverse(),l=[1,-.001098628627,2734510407e-14,-2073370639e-15,2.093887211e-7].reverse(),c=[-.01562499995,.0001430488765,-6911147651e-15,7.621095161e-7,-9.34945152e-8].reverse(),u=[-4900604943e3,127527439e4,-51534381390,734926455.1,-4237922.726,8511.937935].reverse(),f=[249958057e5,424441966400,3733650367,22459040.02,102042.605,354.9632885,1].reverse(),d=[1,.00183105,-3516396496e-14,2457520174e-15,-2.40337019e-7].reverse(),h=[.04687499995,-.0002002690873,8449199096e-15,-8.8228987e-7,1.05787412e-7].reverse(),i((function(e){var r=0,i=0,u=0,f=e*e,d=e-.785398164;return e<8?r=(i=n(o,f))/(u=n(s,f))+a*y(e,0)*t.log(e):(i=n(l,f=64/f),u=n(c,f),r=t.sqrt(a/e)*(t.sin(d)*i+t.cos(d)*u*8/e)),r}),(function(e){var r=0,i=0,o=0,s=e*e,l=e-2.356194491;return e<8?r=(i=e*n(u,s))/(o=n(f,s))+a*(y(e,1)*t.log(e)-1/e):(i=n(d,s=64/s),o=n(h,s),r=t.sqrt(a/e)*(t.sin(l)*i+t.cos(l)*o*8/e)),r}),0,1,-1)),x=(p=[1,3.5156229,3.0899424,1.2067492,.2659732,.0360768,.0045813].reverse(),m=[.39894228,.01328592,.00225319,-.00157565,.00916281,-.02057706,.02635537,-.01647633,.00392377].reverse(),g=[.5,.87890594,.51498869,.15084934,.02658733,.00301532,32411e-8].reverse(),v=[.39894228,-.03988024,-.00362018,.00163801,-.01031555,.02282967,-.02895312,.01787654,-.00420059].reverse(),function e(r,i){if(0===(i=Math.round(i)))return function(e){return e<=3.75?n(p,e*e/14.0625):t.exp(t.abs(e))/t.sqrt(t.abs(e))*n(m,3.75/t.abs(e))}(r);if(1===i)return function(e){return e<3.75?e*n(g,e*e/14.0625):(e<0?-1:1)*t.exp(t.abs(e))/t.sqrt(t.abs(e))*n(v,3.75/t.abs(e))}(r);if(i<0)return NaN;if(0===t.abs(r))return 0;if(r==1/0)return 1/0;var a,o=0,s=2/t.abs(r),l=0,c=1,u=0;for(a=2*t.round((i+t.round(t.sqrt(40*i)))/2);a>0;a--)u=a*s*c+l,l=c,c=u,t.abs(c)>1e10&&(c*=1e-10,l*=1e-10,o*=1e-10),a==i&&(o=l);return o*=e(r,0)/c,r<0&&i%2?-o:o}),_=function(){var e=[-.57721566,.4227842,.23069756,.0348859,.00262698,1075e-7,74e-7].reverse(),r=[1.25331414,-.07832358,.02189568,-.01062446,.00587872,-.0025154,53208e-8].reverse(),a=[1,.15443144,-.67278579,-.18156897,-.01919402,-.00110404,-4686e-8].reverse(),o=[1.25331414,.23498619,-.0365562,.01504268,-.00780353,.00325614,-68245e-8].reverse();return i((function(i){return i<=2?-t.log(i/2)*x(i,0)+n(e,i*i/4):t.exp(-i)/t.sqrt(i)*n(r,2/i)}),(function(e){return e<=2?t.log(e/2)*x(e,1)+1/e*n(a,e*e/4):t.exp(-e)/t.sqrt(e)*n(o,2/e)}),0,2,1)}();e.besselj=y,e.bessely=b,e.besseli=x,e.besselk=_},"undefined"==typeof DO_NOT_EXPORT_BESSEL?n(t):n({})},59885:e=>{"use strict";function t(e,t,n,r,i){for(var a=i+1;r<=i;){var o=r+i>>>1,s=e[o];(void 0!==n?n(s,t):s-t)>=0?(a=o,i=o-1):r=o+1}return a}function n(e,t,n,r,i){for(var a=i+1;r<=i;){var o=r+i>>>1,s=e[o];(void 0!==n?n(s,t):s-t)>0?(a=o,i=o-1):r=o+1}return a}function r(e,t,n,r,i){for(var a=r-1;r<=i;){var o=r+i>>>1,s=e[o];(void 0!==n?n(s,t):s-t)<0?(a=o,r=o+1):i=o-1}return a}function i(e,t,n,r,i){for(var a=r-1;r<=i;){var o=r+i>>>1,s=e[o];(void 0!==n?n(s,t):s-t)<=0?(a=o,r=o+1):i=o-1}return a}function a(e,t,n,r,i){for(;r<=i;){var a=r+i>>>1,o=e[a],s=void 0!==n?n(o,t):o-t;if(0===s)return a;s<=0?r=a+1:i=a-1}return-1}function o(e,t,n,r,i,a){return"function"==typeof n?a(e,t,n,void 0===r?0:0|r,void 0===i?e.length-1:0|i):a(e,t,void 0,void 0===n?0:0|n,void 0===r?e.length-1:0|r)}e.exports={ge:function(e,n,r,i,a){return o(e,n,r,i,a,t)},gt:function(e,t,r,i,a){return o(e,t,r,i,a,n)},lt:function(e,t,n,i,a){return o(e,t,n,i,a,r)},le:function(e,t,n,r,a){return o(e,t,n,r,a,i)},eq:function(e,t,n,r,i){return o(e,t,n,r,i,a)}}},66717:(e,t)=>{"use strict";function n(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}t.INT_BITS=32,t.INT_MAX=2147483647,t.INT_MIN=-1<<31,t.sign=function(e){return(e>0)-(e<0)},t.abs=function(e){var t=e>>31;return(e^t)-t},t.min=function(e,t){return t^(e^t)&-(e<t)},t.max=function(e,t){return e^(e^t)&-(e<t)},t.isPow2=function(e){return!(e&e-1||!e)},t.log2=function(e){var t,n;return t=(e>65535)<<4,t|=n=((e>>>=t)>255)<<3,t|=n=((e>>>=n)>15)<<2,(t|=n=((e>>>=n)>3)<<1)|(e>>>=n)>>1},t.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},t.popCount=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},t.countTrailingZeros=n,t.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1},t.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},t.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var r=new Array(256);!function(e){for(var t=0;t<256;++t){var n=t,r=t,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;e[t]=r<<i&255}}(r),t.reverse=function(e){return r[255&e]<<24|r[e>>>8&255]<<16|r[e>>>16&255]<<8|r[e>>>24&255]},t.interleave2=function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},t.deinterleave2=function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},t.interleave3=function(e,t,n){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},t.deinterleave3=function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},t.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>n(e)+1}},97800:e=>{"use strict";e.exports=function(e,r){r||(r={});var i,a,o,s,l,c,u,f,d,h,p,m=null==r.cutoff?.25:r.cutoff,g=null==r.radius?8:r.radius,v=r.channel||0;if(ArrayBuffer.isView(e)||Array.isArray(e)){if(!r.width||!r.height)throw Error("For raw data width and height should be provided by options");i=r.width,a=r.height,s=e,c=r.stride?r.stride:Math.floor(e.length/i/a)}else window.HTMLCanvasElement&&e instanceof window.HTMLCanvasElement?(u=(f=e).getContext("2d"),i=f.width,a=f.height,s=(d=u.getImageData(0,0,i,a)).data,c=4):window.CanvasRenderingContext2D&&e instanceof window.CanvasRenderingContext2D?(u=e,i=(f=e.canvas).width,a=f.height,s=(d=u.getImageData(0,0,i,a)).data,c=4):window.ImageData&&e instanceof window.ImageData&&(d=e,i=e.width,a=e.height,s=d.data,c=4);if(o=Math.max(i,a),window.Uint8ClampedArray&&s instanceof window.Uint8ClampedArray||window.Uint8Array&&s instanceof window.Uint8Array)for(l=s,s=Array(i*a),h=0,p=Math.floor(l.length/c);h<p;h++)s[h]=l[h*c+v]/255;else if(1!==c)throw Error("Raw data can have only 1 value per pixel");var y=Array(i*a),b=Array(i*a),x=Array(o),_=Array(o),w=Array(o+1),A=Array(o);for(h=0,p=i*a;h<p;h++){var k=s[h];y[h]=1===k?0:0===k?t:Math.pow(Math.max(0,.5-k),2),b[h]=1===k?t:0===k?0:Math.pow(Math.max(0,k-.5),2)}n(y,i,a,x,_,A,w),n(b,i,a,x,_,A,w);var E=window.Float32Array?new Float32Array(i*a):new Array(i*a);for(h=0,p=i*a;h<p;h++)E[h]=Math.min(Math.max(1-((y[h]-b[h])/g+m),0),1);return E};var t=1e20;function n(e,t,n,i,a,o,s){for(var l=0;l<t;l++){for(var c=0;c<n;c++)i[c]=e[c*t+l];for(r(i,a,o,s,n),c=0;c<n;c++)e[c*t+l]=a[c]}for(c=0;c<n;c++){for(l=0;l<t;l++)i[l]=e[c*t+l];for(r(i,a,o,s,t),l=0;l<t;l++)e[c*t+l]=Math.sqrt(a[l])}}function r(e,n,r,i,a){r[0]=0,i[0]=-t,i[1]=+t;for(var o=1,s=0;o<a;o++){for(var l=(e[o]+o*o-(e[r[s]]+r[s]*r[s]))/(2*o-2*r[s]);l<=i[s];)s--,l=(e[o]+o*o-(e[r[s]]+r[s]*r[s]))/(2*o-2*r[s]);r[++s]=o,i[s]=l,i[s+1]=+t}for(o=0,s=0;o<a;o++){for(;i[s+1]<o;)s++;n[o]=(o-r[s])*(o-r[s])+e[r[s]]}}},87503:(e,t,n)=>{"use strict";const r=n(76086),i=n(14027),a="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.hp=l,t.IS=50;const o=2147483647;function s(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return f(e)}return c(e,t,n)}function c(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|m(e,t);let r=s(n);const i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(X(e,Uint8Array)){const t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return d(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(X(e,ArrayBuffer)||e&&X(e.buffer,ArrayBuffer))return h(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(X(e,SharedArrayBuffer)||e&&X(e.buffer,SharedArrayBuffer)))return h(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return l.from(r,t,n);const i=function(e){if(l.isBuffer(e)){const t=0|p(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||K(e.length)?s(0):d(e);if("Buffer"===e.type&&Array.isArray(e.data))return d(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function f(e){return u(e),s(e<0?0:0|p(e))}function d(e){const t=e.length<0?0:0|p(e.length),n=s(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function h(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,l.prototype),r}function p(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function m(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||X(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(e).length;default:if(i)return r?-1:W(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,n);case"utf8":case"utf-8":return T(this,t,n);case"ascii":return S(this,t,n);case"latin1":case"binary":return C(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),K(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,i){let a,o=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,l/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){let r=-1;for(a=n;a<s;a++)if(c(e,a)===c(t,-1===r?0:a-r)){if(-1===r&&(r=a),a-r+1===l)return r*o}else-1!==r&&(a-=a-r),r=-1}else for(n+l>s&&(n=s-l),a=n;a>=0;a--){let n=!0;for(let r=0;r<l;r++)if(c(e,a+r)!==c(t,r)){n=!1;break}if(n)return a}return-1}function x(e,t,n,r){n=Number(n)||0;const i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;const a=t.length;let o;for(r>a/2&&(r=a/2),o=0;o<r;++o){const r=parseInt(t.substr(2*o,2),16);if(K(r))return o;e[n+o]=r}return o}function _(e,t,n,r){return Y(W(t,e.length-n),e,n,r)}function w(e,t,n,r){return Y(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function A(e,t,n,r){return Y(G(t),e,n,r)}function k(e,t,n,r){return Y(function(e,t){let n,r,i;const a=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function E(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function T(e,t,n){n=Math.min(e.length,n);const r=[];let i=t;for(;i<n;){const t=e[i];let a=null,o=t>239?4:t>223?3:t>191?2:1;if(i+o<=n){let n,r,s,l;switch(o){case 1:t<128&&(a=t);break;case 2:n=e[i+1],128==(192&n)&&(l=(31&t)<<6|63&n,l>127&&(a=l));break;case 3:n=e[i+1],r=e[i+2],128==(192&n)&&128==(192&r)&&(l=(15&t)<<12|(63&n)<<6|63&r,l>2047&&(l<55296||l>57343)&&(a=l));break;case 4:n=e[i+1],r=e[i+2],s=e[i+3],128==(192&n)&&128==(192&r)&&128==(192&s)&&(l=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&s,l>65535&&l<1114112&&(a=l))}}null===a?(a=65533,o=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=o}return function(e){const t=e.length;if(t<=M)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=M));return n}(r)}l.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,n){return c(e,t,n)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?s(e):void 0!==t?"string"==typeof n?s(e).fill(t,n):s(e).fill(t):s(e)}(e,t,n)},l.allocUnsafe=function(e){return f(e)},l.allocUnsafeSlow=function(e){return f(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(X(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),X(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=l.allocUnsafe(t);let i=0;for(n=0;n<e.length;++n){let t=e[n];if(X(t,Uint8Array))i+t.length>r.length?(l.isBuffer(t)||(t=l.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else{if(!l.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,i)}i+=t.length}return r},l.byteLength=m,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)v(this,t,t+1);return this},l.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},l.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},l.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?T(this,0,e):g.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let e="";const n=t.IS;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},a&&(l.prototype[a]=l.prototype.inspect),l.prototype.compare=function(e,t,n,r,i){if(X(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;let a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0);const s=Math.min(a,o),c=this.slice(r,i),u=e.slice(t,n);for(let e=0;e<s;++e)if(c[e]!==u[e]){a=c[e],o=u[e];break}return a<o?-1:o<a?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let a=!1;for(;;)switch(r){case"hex":return x(this,e,t,n);case"utf8":case"utf-8":return _(this,e,t,n);case"ascii":case"latin1":case"binary":return w(this,e,t,n);case"base64":return A(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const M=4096;function S(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function C(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function O(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=t;r<n;++r)i+=Z[e[r]];return i}function R(e,t,n){const r=e.slice(t,n);let i="";for(let e=0;e<r.length-1;e+=2)i+=String.fromCharCode(r[e]+256*r[e+1]);return i}function N(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,n,r,i,a){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function D(e,t,n,r,i){$(t,r,i,e,n,7);let a=Number(t&BigInt(4294967295));e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,n}function P(e,t,n,r,i){$(t,r,i,e,n,7);let a=Number(t&BigInt(4294967295));e[n+7]=a,a>>=8,e[n+6]=a,a>>=8,e[n+5]=a,a>>=8,e[n+4]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=o,o>>=8,e[n+2]=o,o>>=8,e[n+1]=o,o>>=8,e[n]=o,n+8}function I(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,r,a){return t=+t,n>>>=0,a||I(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function z(e,t,n,r,a){return t=+t,n>>>=0,a||I(e,0,n,8),i.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,l.prototype),r},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);let r=this[e],i=1,a=0;for(;++a<t&&(i*=256);)r+=this[e+a]*i;return r},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=J((function(e){q(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||H(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))})),l.prototype.readBigUInt64BE=J((function(e){q(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||H(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),l.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);let r=this[e],i=1,a=0;for(;++a<t&&(i*=256);)r+=this[e+a]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);let r=t,i=1,a=this[e+--r];for(;r>0&&(i*=256);)a+=this[e+--r]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*t)),a},l.prototype.readInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||N(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){e>>>=0,t||N(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=J((function(e){q(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||H(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),l.prototype.readBigInt64BE=J((function(e){q(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||H(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||N(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||N(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||N(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||N(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){L(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){L(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=J((function(e,t=0){return D(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeBigUInt64BE=J((function(e,t=0){return P(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);L(this,e,t,n,r-1,-r)}let i=0,a=1,o=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/a|0)-o&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);L(this,e,t,n,r-1,-r)}let i=n-1,a=1,o=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/a|0)-o&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=J((function(e,t=0){return D(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeBigInt64BE=J((function(e,t=0){return P(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return z(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return z(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},l.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{const a=l.isBuffer(e)?e:l.from(e,r),o=a.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=a[i%o]}return this};const j={};function B(e,t,n){j[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function U(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function $(e,t,n,r,i,a){if(e>n||e<t){const r="bigint"==typeof t?"n":"";let i;throw i=a>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(a+1)}${r}`:`>= -(2${r} ** ${8*(a+1)-1}${r}) and < 2 ** ${8*(a+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new j.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,n){q(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||H(t,e.length-(n+1))}(r,i,a)}function q(e,t){if("number"!=typeof e)throw new j.ERR_INVALID_ARG_TYPE(t,"number",e)}function H(e,t,n){if(Math.floor(e)!==e)throw q(e,n),new j.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new j.ERR_BUFFER_OUT_OF_BOUNDS;throw new j.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}B("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),B("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),B("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=U(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=U(i)),i+="n"),r+=` It must be ${t}. Received ${i}`,r}),RangeError);const V=/[^+/0-9A-Za-z-_]/g;function W(e,t){let n;t=t||1/0;const r=e.length;let i=null;const a=[];for(let o=0;o<r;++o){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function G(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(V,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Y(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function X(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function K(e){return e!=e}const Z=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t}();function J(e){return"undefined"==typeof BigInt?Q:e}function Q(){throw new Error("BigInt not supported")}},1:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Alternation:()=>Te,Alternative:()=>xe,CstParser:()=>On,EMPTY_ALT:()=>Sn,EOF:()=>he,EarlyExitException:()=>zt,EmbeddedActionsParser:()=>Rn,GAstVisitor:()=>Ne,Lexer:()=>Q,LexerDefinitionErrorType:()=>K,MismatchedTokenException:()=>Pt,NoViableAltException:()=>It,NonTerminal:()=>ye,NotAllInputParsedException:()=>Ft,Option:()=>_e,Parser:()=>Hn,ParserDefinitionErrorType:()=>En,Repetition:()=>ke,RepetitionMandatory:()=>we,RepetitionMandatoryWithSeparator:()=>Ae,RepetitionWithSeparator:()=>Ee,Rule:()=>be,Terminal:()=>Me,VERSION:()=>r,assignOccurrenceIndices:()=>Tt,clearCache:()=>qn,createSyntaxDiagramsCode:()=>Nn,createToken:()=>de,createTokenInstance:()=>pe,defaultGrammarResolverErrorProvider:()=>qe,defaultGrammarValidatorErrorProvider:()=>He,defaultLexerErrorProvider:()=>Z,defaultParserErrorProvider:()=>$e,generateParserFactory:()=>Un,generateParserModule:()=>$n,isRecognitionException:()=>Lt,resolveGrammar:()=>kt,serializeGrammar:()=>Se,serializeProduction:()=>Ce,tokenLabel:()=>ee,tokenMatcher:()=>me,tokenName:()=>te,validateGrammar:()=>Et});var r="7.1.2",i=n(71040),a=n(28187),o={},s=new a.RegExpParser;function l(e){var t=e.toString();if(o.hasOwnProperty(t))return o[t];var n=s.pattern(t);return o[t]=n,n}var c,u=(c=function(e,t){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},c(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),f="Complement Sets are not supported for first char optimization",d='Unable to use "first char" lexer optimizations:\n';function h(e,t){void 0===t&&(t=!1);try{var n=l(e);return p(n.value,{},n.flags.ignoreCase)}catch(n){if(n.message===f)t&&(0,i.x5)(d+"\tUnable to optimize: < "+e.toString()+" >\n\tComplement Sets cannot be automatically optimized.\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.");else{var r="";t&&(r="\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details."),(0,i.Zi)(d+"\n\tFailed parsing: < "+e.toString()+" >\n\tUsing the regexp-to-ast library version: "+a.VERSION+"\n\tPlease open an issue at: https://github.com/bd82/regexp-to-ast/issues"+r)}}return[]}function p(e,t,n){switch(e.type){case"Disjunction":for(var r=0;r<e.value.length;r++)p(e.value[r],t,n);break;case"Alternative":var a=e.value;for(r=0;r<a.length;r++){var o=a[r];switch(o.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}var s=o;switch(s.type){case"Character":m(s.value,t,n);break;case"Set":if(!0===s.complement)throw Error(f);(0,i.jJ)(s.value,(function(e){if("number"==typeof e)m(e,t,n);else{var r=e;if(!0===n)for(var i=r.from;i<=r.to;i++)m(i,t,n);else{for(i=r.from;i<=r.to&&i<z;i++)m(i,t,n);if(r.to>=z)for(var a=r.from>=z?r.from:z,o=r.to,s=j(a),l=j(o),c=s;c<=l;c++)t[c]=c}}}));break;case"Group":p(s.value,t,n);break;default:throw Error("Non Exhaustive Match")}var l=void 0!==s.quantifier&&0===s.quantifier.atLeast;if("Group"===s.type&&!1===v(s)||"Group"!==s.type&&!1===l)break}break;default:throw Error("non exhaustive match!")}return(0,i.zu)(t)}function m(e,t,n){var r=j(e);t[r]=r,!0===n&&function(e,t){var n=String.fromCharCode(e),r=n.toUpperCase();if(r!==n){t[i=j(r.charCodeAt(0))]=i}else{var i,a=n.toLowerCase();if(a!==n)t[i=j(a.charCodeAt(0))]=i}}(e,t)}function g(e,t){return(0,i.I6)(e.value,(function(e){if("number"==typeof e)return(0,i.gR)(t,e);var n=e;return void 0!==(0,i.I6)(t,(function(e){return n.from<=e&&e<=n.to}))}))}function v(e){return!(!e.quantifier||0!==e.quantifier.atLeast)||!!e.value&&((0,i.cy)(e.value)?(0,i.Si)(e.value,v):v(e.value))}var y=function(e){function t(t){var n=e.call(this)||this;return n.targetCharCodes=t,n.found=!1,n}return u(t,e),t.prototype.visitChildren=function(t){if(!0!==this.found){switch(t.type){case"Lookahead":return void this.visitLookahead(t);case"NegativeLookahead":return void this.visitNegativeLookahead(t)}e.prototype.visitChildren.call(this,t)}},t.prototype.visitCharacter=function(e){(0,i.gR)(this.targetCharCodes,e.value)&&(this.found=!0)},t.prototype.visitSet=function(e){e.complement?void 0===g(e,this.targetCharCodes)&&(this.found=!0):void 0!==g(e,this.targetCharCodes)&&(this.found=!0)},t}(a.BaseRegExpVisitor);function b(e,t){if(t instanceof RegExp){var n=l(t),r=new y(e);return r.visit(n),r.found}return void 0!==(0,i.I6)(t,(function(t){return(0,i.gR)(e,t.charCodeAt(0))}))}var x=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_="PATTERN",w="defaultMode",A="modes",k="boolean"==typeof new RegExp("(?:)").sticky;function E(e,t){var n,r=(t=(0,i.NT)(t,{useSticky:k,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r","\n"],tracer:function(e,t){return t()}})).tracer;r("initCharCodeToOptimizedIndexMap",(function(){!function(){if((0,i.Im)(B)){B=new Array(65536);for(var e=0;e<65536;e++)B[e]=e>255?255+~~(e/255):e}}()})),r("Reject Lexer.NA",(function(){n=(0,i.ku)(e,(function(e){return e[_]===Q.NA}))}));var a,o,s,l,c,u,f,p,m,g,v,y=!1;r("Transform Patterns",(function(){y=!1,a=(0,i.Tj)(n,(function(e){var n=e[_];if((0,i.gd)(n)){var r=n.source;return 1!==r.length||"^"===r||"$"===r||"."===r||n.ignoreCase?2!==r.length||"\\"!==r[0]||(0,i.gR)(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],r[1])?t.useSticky?O(n):C(n):r[1]:r}if((0,i.Tn)(n))return y=!0,{exec:n};if((0,i.zy)(n,"exec"))return y=!0,n;if("string"==typeof n){if(1===n.length)return n;var a=n.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),o=new RegExp(a);return t.useSticky?O(o):C(o)}throw Error("non exhaustive match")}))})),r("misc mapping",(function(){o=(0,i.Tj)(n,(function(e){return e.tokenTypeIdx})),s=(0,i.Tj)(n,(function(e){var t=e.GROUP;if(t!==Q.SKIPPED){if((0,i.Kg)(t))return t;if((0,i.b0)(t))return!1;throw Error("non exhaustive match")}})),l=(0,i.Tj)(n,(function(e){var t=e.LONGER_ALT;if(t)return(0,i.qh)(n,t)})),c=(0,i.Tj)(n,(function(e){return e.PUSH_MODE})),u=(0,i.Tj)(n,(function(e){return(0,i.zy)(e,"POP_MODE")}))})),r("Line Terminator Handling",(function(){var e=I(t.lineTerminatorCharacters);f=(0,i.Tj)(n,(function(e){return!1})),"onlyOffset"!==t.positionTracking&&(f=(0,i.Tj)(n,(function(t){return(0,i.zy)(t,"LINE_BREAKS")?t.LINE_BREAKS:!1===P(t,e)?b(e,t.PATTERN):void 0})))})),r("Misc Mapping #2",(function(){p=(0,i.Tj)(n,N),m=(0,i.Tj)(a,L),g=(0,i.TS)(n,(function(e,t){var n=t.GROUP;return(0,i.Kg)(n)&&n!==Q.SKIPPED&&(e[n]=[]),e}),{}),v=(0,i.Tj)(a,(function(e,t){return{pattern:a[t],longerAlt:l[t],canLineTerminator:f[t],isCustom:p[t],short:m[t],group:s[t],push:c[t],pop:u[t],tokenTypeIdx:o[t],tokenType:n[t]}}))}));var x=!0,w=[];return t.safeMode||r("First Char Optimization",(function(){w=(0,i.TS)(n,(function(e,n,r){if("string"==typeof n.PATTERN){var a=j(n.PATTERN.charCodeAt(0));F(e,a,v[r])}else if((0,i.cy)(n.START_CHARS_HINT)){var o;(0,i.jJ)(n.START_CHARS_HINT,(function(t){var n=j("string"==typeof t?t.charCodeAt(0):t);o!==n&&(o=n,F(e,n,v[r]))}))}else if((0,i.gd)(n.PATTERN))if(n.PATTERN.unicode)x=!1,t.ensureOptimizations&&(0,i.Zi)(d+"\tUnable to analyze < "+n.PATTERN.toString()+" > pattern.\n\tThe regexp unicode flag is not currently supported by the regexp-to-ast library.\n\tThis will disable the lexer's first char optimizations.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE");else{var s=h(n.PATTERN,t.ensureOptimizations);(0,i.Im)(s)&&(x=!1),(0,i.jJ)(s,(function(t){F(e,t,v[r])}))}else t.ensureOptimizations&&(0,i.Zi)(d+"\tTokenType: <"+n.name+"> is using a custom token pattern without providing <start_chars_hint> parameter.\n\tThis will disable the lexer's first char optimizations.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE"),x=!1;return e}),[])})),r("ArrayPacking",(function(){w=(0,i.VS)(w)})),{emptyGroups:g,patternIdxToConfig:v,charCodeToPatternIdxToConfig:w,hasCustom:y,canBeOptimized:x}}function T(e,t){var n=[],r=function(e){var t=(0,i.pb)(e,(function(e){return!(0,i.zy)(e,_)})),n=(0,i.Tj)(t,(function(e){return{message:"Token Type: ->"+e.name+"<- missing static 'PATTERN' property",type:K.MISSING_PATTERN,tokenTypes:[e]}})),r=(0,i.iv)(e,t);return{errors:n,valid:r}}(e);n=n.concat(r.errors);var o=function(e){var t=(0,i.pb)(e,(function(e){var t=e[_];return!((0,i.gd)(t)||(0,i.Tn)(t)||(0,i.zy)(t,"exec")||(0,i.Kg)(t))})),n=(0,i.Tj)(t,(function(e){return{message:"Token Type: ->"+e.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:K.INVALID_PATTERN,tokenTypes:[e]}})),r=(0,i.iv)(e,t);return{errors:n,valid:r}}(r.valid),s=o.valid;return n=(n=n.concat(o.errors)).concat(function(e){var t=[],n=(0,i.pb)(e,(function(e){return(0,i.gd)(e[_])}));return t=t.concat(function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.found=!1,t}return x(t,e),t.prototype.visitEndAnchor=function(e){this.found=!0},t}(a.BaseRegExpVisitor),n=(0,i.pb)(e,(function(e){var n=e[_];try{var r=l(n),i=new t;return i.visit(r),i.found}catch(e){return M.test(n.source)}})),r=(0,i.Tj)(n,(function(e){return{message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+e.name+"<- static 'PATTERN' cannot contain end of input anchor '$'\n\tSee chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:K.EOI_ANCHOR_FOUND,tokenTypes:[e]}}));return r}(n)),t=t.concat(function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.found=!1,t}return x(t,e),t.prototype.visitStartAnchor=function(e){this.found=!0},t}(a.BaseRegExpVisitor),n=(0,i.pb)(e,(function(e){var n=e[_];try{var r=l(n),i=new t;return i.visit(r),i.found}catch(e){return S.test(n.source)}})),r=(0,i.Tj)(n,(function(e){return{message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+e.name+"<- static 'PATTERN' cannot contain start of input anchor '^'\n\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:K.SOI_ANCHOR_FOUND,tokenTypes:[e]}}));return r}(n)),t=t.concat(function(e){var t=(0,i.pb)(e,(function(e){var t=e[_];return t instanceof RegExp&&(t.multiline||t.global)})),n=(0,i.Tj)(t,(function(e){return{message:"Token Type: ->"+e.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:K.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[e]}}));return n}(n)),t=t.concat(function(e){var t=[],n=(0,i.Tj)(e,(function(n){return(0,i.TS)(e,(function(e,r){return n.PATTERN.source!==r.PATTERN.source||(0,i.gR)(t,r)||r.PATTERN===Q.NA||(t.push(r),e.push(r)),e}),[])}));n=(0,i.oE)(n);var r=(0,i.pb)(n,(function(e){return e.length>1})),a=(0,i.Tj)(r,(function(e){var t=(0,i.Tj)(e,(function(e){return e.name}));return{message:"The same RegExp pattern ->"+(0,i.$1)(e).PATTERN+"<-has been used in all of the following Token Types: "+t.join(", ")+" <-",type:K.DUPLICATE_PATTERNS_FOUND,tokenTypes:e}}));return a}(n)),t=t.concat(function(e){var t=(0,i.pb)(e,(function(e){return e[_].test("")})),n=(0,i.Tj)(t,(function(e){return{message:"Token Type: ->"+e.name+"<- static 'PATTERN' must not match an empty string",type:K.EMPTY_MATCH_PATTERN,tokenTypes:[e]}}));return n}(n)),t}(s)),n=n.concat(function(e){var t=(0,i.pb)(e,(function(e){if(!(0,i.zy)(e,"GROUP"))return!1;var t=e.GROUP;return t!==Q.SKIPPED&&t!==Q.NA&&!(0,i.Kg)(t)})),n=(0,i.Tj)(t,(function(e){return{message:"Token Type: ->"+e.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:K.INVALID_GROUP_TYPE_FOUND,tokenTypes:[e]}}));return n}(s)),n=n.concat(function(e,t){var n=(0,i.pb)(e,(function(e){return void 0!==e.PUSH_MODE&&!(0,i.gR)(t,e.PUSH_MODE)})),r=(0,i.Tj)(n,(function(e){return{message:"Token Type: ->"+e.name+"<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->"+e.PUSH_MODE+"<-which does not exist",type:K.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[e]}}));return r}(s,t)),n=n.concat(function(e){var t=[],n=(0,i.TS)(e,(function(e,t,n){var r,a,o=t.PATTERN;return o===Q.NA||((0,i.Kg)(o)?e.push({str:o,idx:n,tokenType:t}):(0,i.gd)(o)&&(r=o,a=[".","\\","[","]","|","^","$","(",")","?","*","+","{"],void 0===(0,i.I6)(a,(function(e){return-1!==r.source.indexOf(e)})))&&e.push({str:o.source,idx:n,tokenType:t})),e}),[]);return(0,i.jJ)(e,(function(e,r){(0,i.jJ)(n,(function(n){var a=n.str,o=n.idx,s=n.tokenType;if(r<o&&function(e,t){if((0,i.gd)(t)){var n=t.exec(e);return null!==n&&0===n.index}if((0,i.Tn)(t))return t(e,0,[],{});if((0,i.zy)(t,"exec"))return t.exec(e,0,[],{});if("string"==typeof t)return t===e;throw Error("non exhaustive match")}(a,e.PATTERN)){var l="Token: ->"+s.name+"<- can never be matched.\nBecause it appears AFTER the Token Type ->"+e.name+"<-in the lexer's definition.\nSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE";t.push({message:l,type:K.UNREACHABLE_PATTERN,tokenTypes:[e,s]})}}))})),t}(s)),n}var M=/[^\\][\$]/;var S=/[^\\[][\^]|^\^/;function C(e){var t=e.ignoreCase?"i":"";return new RegExp("^(?:"+e.source+")",t)}function O(e){var t=e.ignoreCase?"iy":"y";return new RegExp(""+e.source,t)}function R(e,t,n){var r=[],a=!1,o=(0,i.oE)((0,i.Bq)((0,i.LG)(e.modes,(function(e){return e})))),s=(0,i.ku)(o,(function(e){return e[_]===Q.NA})),l=I(n);return t&&(0,i.jJ)(s,(function(e){var t=P(e,l);if(!1!==t){var n=function(e,t){if(t.issue===K.IDENTIFY_TERMINATOR)return"Warning: unable to identify line terminator usage in pattern.\n\tThe problem is in the <"+e.name+"> Token Type\n\t Root cause: "+t.errMsg+".\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR";if(t.issue===K.CUSTOM_LINE_BREAK)return"Warning: A Custom Token Pattern should specify the <line_breaks> option.\n\tThe problem is in the <"+e.name+"> Token Type\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK";throw Error("non exhaustive match")}(e,t),o={message:n,type:t.issue,tokenType:e};r.push(o)}else(0,i.zy)(e,"LINE_BREAKS")?!0===e.LINE_BREAKS&&(a=!0):b(l,e.PATTERN)&&(a=!0)})),t&&!a&&r.push({message:"Warning: No LINE_BREAKS Found.\n\tThis Lexer has been defined to track line and column information,\n\tBut none of the Token Types can be identified as matching a line terminator.\n\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS \n\tfor details.",type:K.NO_LINE_BREAKS_FLAGS}),r}function N(e){var t=e.PATTERN;if((0,i.gd)(t))return!1;if((0,i.Tn)(t))return!0;if((0,i.zy)(t,"exec"))return!0;if((0,i.Kg)(t))return!1;throw Error("non exhaustive match")}function L(e){return!(!(0,i.Kg)(e)||1!==e.length)&&e.charCodeAt(0)}var D={test:function(e){for(var t=e.length,n=this.lastIndex;n<t;n++){var r=e.charCodeAt(n);if(10===r)return this.lastIndex=n+1,!0;if(13===r)return 10===e.charCodeAt(n+1)?this.lastIndex=n+2:this.lastIndex=n+1,!0}return!1},lastIndex:0};function P(e,t){if((0,i.zy)(e,"LINE_BREAKS"))return!1;if((0,i.gd)(e.PATTERN)){try{b(t,e.PATTERN)}catch(e){return{issue:K.IDENTIFY_TERMINATOR,errMsg:e.message}}return!1}if((0,i.Kg)(e.PATTERN))return!1;if(N(e))return{issue:K.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}function I(e){return(0,i.Tj)(e,(function(e){return(0,i.Kg)(e)&&e.length>0?e.charCodeAt(0):e}))}function F(e,t,n){void 0===e[t]?e[t]=[n]:e[t].push(n)}var z=256;function j(e){return e<z?e:B[e]}var B=[];function U(e,t){var n=e.tokenTypeIdx;return n===t.tokenTypeIdx||!0===t.isParent&&!0===t.categoryMatchesMap[n]}function $(e,t){return e.tokenTypeIdx===t.tokenTypeIdx}var q=1,H={};function V(e){var t=function(e){var t=(0,i.T9)(e),n=e,r=!0;for(;r;){n=(0,i.oE)((0,i.Bq)((0,i.Tj)(n,(function(e){return e.CATEGORIES}))));var a=(0,i.iv)(n,t);t=t.concat(a),(0,i.Im)(a)?r=!1:n=a}return t}(e);!function(e){(0,i.jJ)(e,(function(e){var t;G(e)||(H[q]=e,e.tokenTypeIdx=q++),Y(e)&&!(0,i.cy)(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),Y(e)||(e.CATEGORIES=[]),t=e,(0,i.zy)(t,"categoryMatches")||(e.categoryMatches=[]),function(e){return(0,i.zy)(e,"categoryMatchesMap")}(e)||(e.categoryMatchesMap={})}))}(t),function(e){(0,i.jJ)(e,(function(e){W([],e)}))}(t),function(e){(0,i.jJ)(e,(function(e){e.categoryMatches=[],(0,i.jJ)(e.categoryMatchesMap,(function(t,n){e.categoryMatches.push(H[n].tokenTypeIdx)}))}))}(t),(0,i.jJ)(t,(function(e){e.isParent=e.categoryMatches.length>0}))}function W(e,t){(0,i.jJ)(e,(function(e){t.categoryMatchesMap[e.tokenTypeIdx]=!0})),(0,i.jJ)(t.CATEGORIES,(function(n){var r=e.concat(t);(0,i.gR)(r,n)||W(r,n)}))}function G(e){return(0,i.zy)(e,"tokenTypeIdx")}function Y(e){return(0,i.zy)(e,"CATEGORIES")}function X(e){return(0,i.zy)(e,"tokenTypeIdx")}var K,Z={buildUnableToPopLexerModeMessage:function(e){return"Unable to pop Lexer Mode after encountering Token ->"+e.image+"<- The Mode Stack is empty"},buildUnexpectedCharactersMessage:function(e,t,n,r,i){return"unexpected character: ->"+e.charAt(t)+"<- at offset: "+t+", skipped "+n+" characters."}};!function(e){e[e.MISSING_PATTERN=0]="MISSING_PATTERN",e[e.INVALID_PATTERN=1]="INVALID_PATTERN",e[e.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",e[e.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",e[e.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",e[e.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",e[e.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",e[e.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",e[e.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",e[e.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",e[e.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",e[e.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",e[e.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",e[e.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",e[e.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",e[e.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",e[e.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK"}(K||(K={}));var J={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:["\n","\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:Z,traceInitPerf:!1,skipValidations:!1};Object.freeze(J);var Q=function(){function e(e,t){var n=this;if(void 0===t&&(t=J),this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.config=void 0,this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},"boolean"==typeof t)throw Error("The second argument to the Lexer constructor is now an ILexerConfig Object.\na boolean 2nd argument is no longer supported");this.config=(0,i.h1)(J,t);var r=this.config.traceInitPerf;!0===r?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):"number"==typeof r&&(this.traceInitMaxIdent=r,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",(function(){var r,a=!0;n.TRACE_INIT("Lexer Config handling",(function(){if(n.config.lineTerminatorsPattern===J.lineTerminatorsPattern)n.config.lineTerminatorsPattern=D;else if(n.config.lineTerminatorCharacters===J.lineTerminatorCharacters)throw Error("Error: Missing <lineTerminatorCharacters> property on the Lexer config.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS");if(t.safeMode&&t.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');n.trackStartLines=/full|onlyStart/i.test(n.config.positionTracking),n.trackEndLines=/full/i.test(n.config.positionTracking),(0,i.cy)(e)?((r={modes:{}}).modes[w]=(0,i.T9)(e),r[w]=w):(a=!1,r=(0,i.lR)(e))})),!1===n.config.skipValidations&&(n.TRACE_INIT("performRuntimeChecks",(function(){n.lexerDefinitionErrors=n.lexerDefinitionErrors.concat(function(e){var t=[];return(0,i.zy)(e,w)||t.push({message:"A MultiMode Lexer cannot be initialized without a <"+w+"> property in its definition\n",type:K.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),(0,i.zy)(e,A)||t.push({message:"A MultiMode Lexer cannot be initialized without a <modes> property in its definition\n",type:K.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),(0,i.zy)(e,A)&&(0,i.zy)(e,w)&&!(0,i.zy)(e.modes,e.defaultMode)&&t.push({message:"A MultiMode Lexer cannot be initialized with a "+w+": <"+e.defaultMode+">which does not exist\n",type:K.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),(0,i.zy)(e,A)&&(0,i.jJ)(e.modes,(function(e,n){(0,i.jJ)(e,(function(e,r){(0,i.b0)(e)&&t.push({message:"A Lexer cannot be initialized using an undefined Token Type. Mode:<"+n+"> at index: <"+r+">\n",type:K.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED})}))})),t}(r,n.trackStartLines,n.config.lineTerminatorCharacters))})),n.TRACE_INIT("performWarningRuntimeChecks",(function(){n.lexerDefinitionWarning=n.lexerDefinitionWarning.concat(R(r,n.trackStartLines,n.config.lineTerminatorCharacters))}))),r.modes=r.modes?r.modes:{},(0,i.jJ)(r.modes,(function(e,t){r.modes[t]=(0,i.ku)(e,(function(e){return(0,i.b0)(e)}))}));var s=(0,i.HP)(r.modes);if((0,i.jJ)(r.modes,(function(e,r){n.TRACE_INIT("Mode: <"+r+"> processing",(function(){var a;(n.modes.push(r),!1===n.config.skipValidations&&n.TRACE_INIT("validatePatterns",(function(){n.lexerDefinitionErrors=n.lexerDefinitionErrors.concat(T(e,s))})),(0,i.Im)(n.lexerDefinitionErrors))&&(V(e),n.TRACE_INIT("analyzeTokenTypes",(function(){a=E(e,{lineTerminatorCharacters:n.config.lineTerminatorCharacters,positionTracking:t.positionTracking,ensureOptimizations:t.ensureOptimizations,safeMode:t.safeMode,tracer:n.TRACE_INIT.bind(n)})})),n.patternIdxToConfig[r]=a.patternIdxToConfig,n.charCodeToPatternIdxToConfig[r]=a.charCodeToPatternIdxToConfig,n.emptyGroups=(0,i.h1)(n.emptyGroups,a.emptyGroups),n.hasCustom=a.hasCustom||n.hasCustom,n.canModeBeOptimized[r]=a.canBeOptimized)}))})),n.defaultMode=r.defaultMode,!(0,i.Im)(n.lexerDefinitionErrors)&&!n.config.deferDefinitionErrorsHandling){var l=(0,i.Tj)(n.lexerDefinitionErrors,(function(e){return e.message})).join("-----------------------\n");throw new Error("Errors detected in definition of Lexer:\n"+l)}(0,i.jJ)(n.lexerDefinitionWarning,(function(e){(0,i.x5)(e.message)})),n.TRACE_INIT("Choosing sub-methods implementations",(function(){if(k?(n.chopInput=i.zK,n.match=n.matchWithTest):(n.updateLastIndex=i.tE,n.match=n.matchWithExec),a&&(n.handleModes=i.tE),!1===n.trackStartLines&&(n.computeNewColumn=i.zK),!1===n.trackEndLines&&(n.updateTokenEndLineColumnLocation=i.tE),/full/i.test(n.config.positionTracking))n.createTokenInstance=n.createFullToken;else if(/onlyStart/i.test(n.config.positionTracking))n.createTokenInstance=n.createStartOnlyToken;else{if(!/onlyOffset/i.test(n.config.positionTracking))throw Error('Invalid <positionTracking> config option: "'+n.config.positionTracking+'"');n.createTokenInstance=n.createOffsetOnlyToken}n.hasCustom?(n.addToken=n.addTokenUsingPush,n.handlePayload=n.handlePayloadWithCustom):(n.addToken=n.addTokenUsingMemberAccess,n.handlePayload=n.handlePayloadNoCustom)})),n.TRACE_INIT("Failed Optimization Warnings",(function(){var e=(0,i.TS)(n.canModeBeOptimized,(function(e,t,n){return!1===t&&e.push(n),e}),[]);if(t.ensureOptimizations&&!(0,i.Im)(e))throw Error("Lexer Modes: < "+e.join(", ")+' > cannot be optimized.\n\t Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.\n\t Or inspect the console log for details on how to resolve these issues.')})),n.TRACE_INIT("clearRegExpParserCache",(function(){o={}})),n.TRACE_INIT("toFastProperties",(function(){(0,i.Bl)(n)}))}))}return e.prototype.tokenize=function(e,t){if(void 0===t&&(t=this.defaultMode),!(0,i.Im)(this.lexerDefinitionErrors)){var n=(0,i.Tj)(this.lexerDefinitionErrors,(function(e){return e.message})).join("-----------------------\n");throw new Error("Unable to Tokenize because Errors detected in definition of Lexer:\n"+n)}return this.tokenizeInternal(e,t)},e.prototype.tokenizeInternal=function(e,t){var n,r,a,o,s,l,c,u,f,d,h,p,m,g,v,y,b,x=this,_=e,w=_.length,A=0,k=0,E=this.hasCustom?0:Math.floor(e.length/10),T=new Array(E),M=[],S=this.trackStartLines?1:void 0,C=this.trackStartLines?1:void 0,O=(v=this.emptyGroups,y={},b=(0,i.HP)(v),(0,i.jJ)(b,(function(e){var t=v[e];if(!(0,i.cy)(t))throw Error("non exhaustive match");y[e]=[]})),y),R=this.trackStartLines,N=this.config.lineTerminatorsPattern,L=0,D=[],P=[],I=[],F=[];Object.freeze(F);var z=void 0;function B(){return D}function U(e){var t=j(e),n=P[t];return void 0===n?F:n}var $,q=function(e){if(1===I.length&&void 0===e.tokenType.PUSH_MODE){var t=x.config.errorMessageProvider.buildUnableToPopLexerModeMessage(e);M.push({offset:e.startOffset,line:void 0!==e.startLine?e.startLine:void 0,column:void 0!==e.startColumn?e.startColumn:void 0,length:e.image.length,message:t})}else{I.pop();var n=(0,i.HV)(I);D=x.patternIdxToConfig[n],P=x.charCodeToPatternIdxToConfig[n],L=D.length;var r=x.canModeBeOptimized[n]&&!1===x.config.safeMode;z=P&&r?U:B}};function H(e){I.push(e),P=this.charCodeToPatternIdxToConfig[e],D=this.patternIdxToConfig[e],L=D.length,L=D.length;var t=this.canModeBeOptimized[e]&&!1===this.config.safeMode;z=P&&t?U:B}for(H.call(this,t);A<w;){s=null;var V=_.charCodeAt(A),W=z(V),G=W.length;for(n=0;n<G;n++){var Y=($=W[n]).pattern;if(l=null,!1!==(ie=$.short)?V===ie&&(s=Y):!0===$.isCustom?null!==(g=Y.exec(_,A,T,O))?(s=g[0],void 0!==g.payload&&(l=g.payload)):s=null:(this.updateLastIndex(Y,A),s=this.match(Y,e,A)),null!==s){if(void 0!==(o=$.longerAlt)){var X=D[o],K=X.pattern;c=null,!0===X.isCustom?null!==(g=K.exec(_,A,T,O))?(a=g[0],void 0!==g.payload&&(c=g.payload)):a=null:(this.updateLastIndex(K,A),a=this.match(K,e,A)),a&&a.length>s.length&&(s=a,l=c,$=X)}break}}if(null!==s){if(u=s.length,void 0!==(f=$.group)&&(d=$.tokenTypeIdx,h=this.createTokenInstance(s,A,d,$.tokenType,S,C,u),this.handlePayload(h,l),!1===f?k=this.addToken(T,k,h):O[f].push(h)),e=this.chopInput(e,u),A+=u,C=this.computeNewColumn(C,u),!0===R&&!0===$.canLineTerminator){var Z=0,J=void 0,Q=void 0;N.lastIndex=0;do{!0===(J=N.test(s))&&(Q=N.lastIndex-1,Z++)}while(!0===J);0!==Z&&(S+=Z,C=u-Q,this.updateTokenEndLineColumnLocation(h,f,Q,Z,S,C,u))}this.handleModes($,q,H,h)}else{for(var ee=A,te=S,ne=C,re=!1;!re&&A<w;)for(_.charCodeAt(A),e=this.chopInput(e,1),A++,r=0;r<L;r++){var ie,ae=D[r];Y=ae.pattern;if(!1!==(ie=ae.short)?_.charCodeAt(A)===ie&&(re=!0):!0===ae.isCustom?re=null!==Y.exec(_,A,T,O):(this.updateLastIndex(Y,A),re=null!==Y.exec(e)),!0===re)break}p=A-ee,m=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(_,ee,p,te,ne),M.push({offset:ee,line:te,column:ne,length:p,message:m})}}return this.hasCustom||(T.length=k),{tokens:T,groups:O,errors:M}},e.prototype.handleModes=function(e,t,n,r){if(!0===e.pop){var i=e.push;t(r),void 0!==i&&n.call(this,i)}else void 0!==e.push&&n.call(this,e.push)},e.prototype.chopInput=function(e,t){return e.substring(t)},e.prototype.updateLastIndex=function(e,t){e.lastIndex=t},e.prototype.updateTokenEndLineColumnLocation=function(e,t,n,r,i,a,o){var s,l;void 0!==t&&(l=(s=n===o-1)?-1:0,1===r&&!0===s||(e.endLine=i+l,e.endColumn=a-1-l))},e.prototype.computeNewColumn=function(e,t){return e+t},e.prototype.createTokenInstance=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return null},e.prototype.createOffsetOnlyToken=function(e,t,n,r){return{image:e,startOffset:t,tokenTypeIdx:n,tokenType:r}},e.prototype.createStartOnlyToken=function(e,t,n,r,i,a){return{image:e,startOffset:t,startLine:i,startColumn:a,tokenTypeIdx:n,tokenType:r}},e.prototype.createFullToken=function(e,t,n,r,i,a,o){return{image:e,startOffset:t,endOffset:t+o-1,startLine:i,endLine:i,startColumn:a,endColumn:a+o-1,tokenTypeIdx:n,tokenType:r}},e.prototype.addToken=function(e,t,n){return 666},e.prototype.addTokenUsingPush=function(e,t,n){return e.push(n),t},e.prototype.addTokenUsingMemberAccess=function(e,t,n){return e[t]=n,++t},e.prototype.handlePayload=function(e,t){},e.prototype.handlePayloadNoCustom=function(e,t){},e.prototype.handlePayloadWithCustom=function(e,t){null!==t&&(e.payload=t)},e.prototype.match=function(e,t,n){return null},e.prototype.matchWithTest=function(e,t,n){return!0===e.test(t)?t.substring(n,e.lastIndex):null},e.prototype.matchWithExec=function(e,t){var n=e.exec(t);return null!==n?n[0]:n},e.prototype.TRACE_INIT=function(e,t){if(!0===this.traceInitPerf){this.traceInitIndent++;var n=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(n+"--\x3e <"+e+">");var r=(0,i.O1)(t),a=r.time,o=r.value,s=a>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&s(n+"<-- <"+e+"> time: "+a+"ms"),this.traceInitIndent--,o}return t()},e.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",e.NA=/NOT_APPLICABLE/,e}();function ee(e){return ne(e)?e.LABEL:e.name}function te(e){return e.name}function ne(e){return(0,i.Kg)(e.LABEL)&&""!==e.LABEL}var re="parent",ie="categories",ae="label",oe="group",se="push_mode",le="pop_mode",ce="longer_alt",ue="line_breaks",fe="start_chars_hint";function de(e){return function(e){var t=e.pattern,n={};n.name=e.name,(0,i.b0)(t)||(n.PATTERN=t);if((0,i.zy)(e,re))throw"The parent property is no longer supported.\nSee: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.";(0,i.zy)(e,ie)&&(n.CATEGORIES=e[ie]);V([n]),(0,i.zy)(e,ae)&&(n.LABEL=e[ae]);(0,i.zy)(e,oe)&&(n.GROUP=e[oe]);(0,i.zy)(e,le)&&(n.POP_MODE=e[le]);(0,i.zy)(e,se)&&(n.PUSH_MODE=e[se]);(0,i.zy)(e,ce)&&(n.LONGER_ALT=e[ce]);(0,i.zy)(e,ue)&&(n.LINE_BREAKS=e[ue]);(0,i.zy)(e,fe)&&(n.START_CHARS_HINT=e[fe]);return n}(e)}var he=de({name:"EOF",pattern:Q.NA});function pe(e,t,n,r,i,a,o,s){return{image:t,startOffset:n,endOffset:r,startLine:i,endLine:a,startColumn:o,endColumn:s,tokenTypeIdx:e.tokenTypeIdx,tokenType:e}}function me(e,t){return U(e,t)}V([he]);var ge=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ve=function(){function e(e){this._definition=e}return Object.defineProperty(e.prototype,"definition",{get:function(){return this._definition},set:function(e){this._definition=e},enumerable:!1,configurable:!0}),e.prototype.accept=function(e){e.visit(this),(0,i.jJ)(this.definition,(function(t){t.accept(e)}))},e}(),ye=function(e){function t(t){var n=e.call(this,[])||this;return n.idx=1,(0,i.kp)(n,(0,i.Up)(t,(function(e){return void 0!==e}))),n}return ge(t,e),Object.defineProperty(t.prototype,"definition",{get:function(){return void 0!==this.referencedRule?this.referencedRule.definition:[]},set:function(e){},enumerable:!1,configurable:!0}),t.prototype.accept=function(e){e.visit(this)},t}(ve),be=function(e){function t(t){var n=e.call(this,t.definition)||this;return n.orgText="",(0,i.kp)(n,(0,i.Up)(t,(function(e){return void 0!==e}))),n}return ge(t,e),t}(ve),xe=function(e){function t(t){var n=e.call(this,t.definition)||this;return n.ignoreAmbiguities=!1,(0,i.kp)(n,(0,i.Up)(t,(function(e){return void 0!==e}))),n}return ge(t,e),t}(ve),_e=function(e){function t(t){var n=e.call(this,t.definition)||this;return n.idx=1,(0,i.kp)(n,(0,i.Up)(t,(function(e){return void 0!==e}))),n}return ge(t,e),t}(ve),we=function(e){function t(t){var n=e.call(this,t.definition)||this;return n.idx=1,(0,i.kp)(n,(0,i.Up)(t,(function(e){return void 0!==e}))),n}return ge(t,e),t}(ve),Ae=function(e){function t(t){var n=e.call(this,t.definition)||this;return n.idx=1,(0,i.kp)(n,(0,i.Up)(t,(function(e){return void 0!==e}))),n}return ge(t,e),t}(ve),ke=function(e){function t(t){var n=e.call(this,t.definition)||this;return n.idx=1,(0,i.kp)(n,(0,i.Up)(t,(function(e){return void 0!==e}))),n}return ge(t,e),t}(ve),Ee=function(e){function t(t){var n=e.call(this,t.definition)||this;return n.idx=1,(0,i.kp)(n,(0,i.Up)(t,(function(e){return void 0!==e}))),n}return ge(t,e),t}(ve),Te=function(e){function t(t){var n=e.call(this,t.definition)||this;return n.idx=1,n.ignoreAmbiguities=!1,n.hasPredicates=!1,(0,i.kp)(n,(0,i.Up)(t,(function(e){return void 0!==e}))),n}return ge(t,e),Object.defineProperty(t.prototype,"definition",{get:function(){return this._definition},set:function(e){this._definition=e},enumerable:!1,configurable:!0}),t}(ve),Me=function(){function e(e){this.idx=1,(0,i.kp)(this,(0,i.Up)(e,(function(e){return void 0!==e})))}return e.prototype.accept=function(e){e.visit(this)},e}();function Se(e){return(0,i.Tj)(e,Ce)}function Ce(e){function t(e){return(0,i.Tj)(e,Ce)}if(e instanceof ye)return{type:"NonTerminal",name:e.nonTerminalName,idx:e.idx};if(e instanceof xe)return{type:"Alternative",definition:t(e.definition)};if(e instanceof _e)return{type:"Option",idx:e.idx,definition:t(e.definition)};if(e instanceof we)return{type:"RepetitionMandatory",idx:e.idx,definition:t(e.definition)};if(e instanceof Ae)return{type:"RepetitionMandatoryWithSeparator",idx:e.idx,separator:Ce(new Me({terminalType:e.separator})),definition:t(e.definition)};if(e instanceof Ee)return{type:"RepetitionWithSeparator",idx:e.idx,separator:Ce(new Me({terminalType:e.separator})),definition:t(e.definition)};if(e instanceof ke)return{type:"Repetition",idx:e.idx,definition:t(e.definition)};if(e instanceof Te)return{type:"Alternation",idx:e.idx,definition:t(e.definition)};if(e instanceof Me){var n={type:"Terminal",name:e.terminalType.name,label:ee(e.terminalType),idx:e.idx},r=e.terminalType.PATTERN;return e.terminalType.PATTERN&&(n.pattern=(0,i.gd)(r)?r.source:r),n}if(e instanceof be)return{type:"Rule",name:e.name,orgText:e.orgText,definition:t(e.definition)};throw Error("non exhaustive match")}var Oe=function(){function e(){}return e.prototype.walk=function(e,t){var n=this;void 0===t&&(t=[]),(0,i.jJ)(e.definition,(function(r,a){var o=(0,i.gv)(e.definition,a+1);if(r instanceof ye)n.walkProdRef(r,o,t);else if(r instanceof Me)n.walkTerminal(r,o,t);else if(r instanceof xe)n.walkFlat(r,o,t);else if(r instanceof _e)n.walkOption(r,o,t);else if(r instanceof we)n.walkAtLeastOne(r,o,t);else if(r instanceof Ae)n.walkAtLeastOneSep(r,o,t);else if(r instanceof Ee)n.walkManySep(r,o,t);else if(r instanceof ke)n.walkMany(r,o,t);else{if(!(r instanceof Te))throw Error("non exhaustive match");n.walkOr(r,o,t)}}))},e.prototype.walkTerminal=function(e,t,n){},e.prototype.walkProdRef=function(e,t,n){},e.prototype.walkFlat=function(e,t,n){var r=t.concat(n);this.walk(e,r)},e.prototype.walkOption=function(e,t,n){var r=t.concat(n);this.walk(e,r)},e.prototype.walkAtLeastOne=function(e,t,n){var r=[new _e({definition:e.definition})].concat(t,n);this.walk(e,r)},e.prototype.walkAtLeastOneSep=function(e,t,n){var r=Re(e,t,n);this.walk(e,r)},e.prototype.walkMany=function(e,t,n){var r=[new _e({definition:e.definition})].concat(t,n);this.walk(e,r)},e.prototype.walkManySep=function(e,t,n){var r=Re(e,t,n);this.walk(e,r)},e.prototype.walkOr=function(e,t,n){var r=this,a=t.concat(n);(0,i.jJ)(e.definition,(function(e){var t=new xe({definition:[e]});r.walk(t,a)}))},e}();function Re(e,t,n){return[new _e({definition:[new Me({terminalType:e.separator})].concat(e.definition)})].concat(t,n)}var Ne=function(){function e(){}return e.prototype.visit=function(e){var t=e;switch(t.constructor){case ye:return this.visitNonTerminal(t);case xe:return this.visitAlternative(t);case _e:return this.visitOption(t);case we:return this.visitRepetitionMandatory(t);case Ae:return this.visitRepetitionMandatoryWithSeparator(t);case Ee:return this.visitRepetitionWithSeparator(t);case ke:return this.visitRepetition(t);case Te:return this.visitAlternation(t);case Me:return this.visitTerminal(t);case be:return this.visitRule(t);default:throw Error("non exhaustive match")}},e.prototype.visitNonTerminal=function(e){},e.prototype.visitAlternative=function(e){},e.prototype.visitOption=function(e){},e.prototype.visitRepetition=function(e){},e.prototype.visitRepetitionMandatory=function(e){},e.prototype.visitRepetitionMandatoryWithSeparator=function(e){},e.prototype.visitRepetitionWithSeparator=function(e){},e.prototype.visitAlternation=function(e){},e.prototype.visitTerminal=function(e){},e.prototype.visitRule=function(e){},e}(),Le=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function De(e,t){return void 0===t&&(t=[]),!!(e instanceof _e||e instanceof ke||e instanceof Ee)||(e instanceof Te?(0,i.zN)(e.definition,(function(e){return De(e,t)})):!(e instanceof ye&&(0,i.gR)(t,e))&&(e instanceof ve&&(e instanceof ye&&t.push(e),(0,i.Si)(e.definition,(function(e){return De(e,t)})))))}function Pe(e){if(e instanceof ye)return"SUBRULE";if(e instanceof _e)return"OPTION";if(e instanceof Te)return"OR";if(e instanceof we)return"AT_LEAST_ONE";if(e instanceof Ae)return"AT_LEAST_ONE_SEP";if(e instanceof Ee)return"MANY_SEP";if(e instanceof ke)return"MANY";if(e instanceof Me)return"CONSUME";throw Error("non exhaustive match")}var Ie=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.separator="-",t.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]},t}return Le(t,e),t.prototype.reset=function(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}},t.prototype.visitTerminal=function(e){var t=e.terminalType.name+this.separator+"Terminal";(0,i.zy)(this.dslMethods,t)||(this.dslMethods[t]=[]),this.dslMethods[t].push(e)},t.prototype.visitNonTerminal=function(e){var t=e.nonTerminalName+this.separator+"Terminal";(0,i.zy)(this.dslMethods,t)||(this.dslMethods[t]=[]),this.dslMethods[t].push(e)},t.prototype.visitOption=function(e){this.dslMethods.option.push(e)},t.prototype.visitRepetitionWithSeparator=function(e){this.dslMethods.repetitionWithSeparator.push(e)},t.prototype.visitRepetitionMandatory=function(e){this.dslMethods.repetitionMandatory.push(e)},t.prototype.visitRepetitionMandatoryWithSeparator=function(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)},t.prototype.visitRepetition=function(e){this.dslMethods.repetition.push(e)},t.prototype.visitAlternation=function(e){this.dslMethods.alternation.push(e)},t}(Ne),Fe=new Ie;function ze(e){if(e instanceof ye)return ze(e.referencedRule);if(e instanceof Me)return[e.terminalType];if(function(e){return e instanceof xe||e instanceof _e||e instanceof ke||e instanceof we||e instanceof Ae||e instanceof Ee||e instanceof Me||e instanceof be}(e))return function(e){var t,n=[],r=e.definition,a=0,o=r.length>a,s=!0;for(;o&&s;)s=De(t=r[a]),n=n.concat(ze(t)),a+=1,o=r.length>a;return(0,i.sb)(n)}(e);if(function(e){return e instanceof Te}(e))return function(e){var t=(0,i.Tj)(e.definition,(function(e){return ze(e)}));return(0,i.sb)((0,i.Bq)(t))}(e);throw Error("non exhaustive match")}var je="_~IN~_",Be=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ue=function(e){function t(t){var n=e.call(this)||this;return n.topProd=t,n.follows={},n}return Be(t,e),t.prototype.startWalking=function(){return this.walk(this.topProd),this.follows},t.prototype.walkTerminal=function(e,t,n){},t.prototype.walkProdRef=function(e,t,n){var r,i,a=(r=e.referencedRule,i=e.idx,r.name+i+je+this.topProd.name),o=t.concat(n),s=ze(new xe({definition:o}));this.follows[a]=s},t}(Oe);var $e={buildMismatchTokenMessage:function(e){var t=e.expected,n=e.actual;e.previous,e.ruleName;return"Expecting "+(ne(t)?"--\x3e "+ee(t)+" <--":"token of type --\x3e "+t.name+" <--")+" but found --\x3e '"+n.image+"' <--"},buildNotAllInputParsedMessage:function(e){var t=e.firstRedundant;e.ruleName;return"Redundant input, expecting EOF but found: "+t.image},buildNoViableAltMessage:function(e){var t=e.expectedPathsPerAlt,n=e.actual,r=(e.previous,e.customUserDescription),a=(e.ruleName,"Expecting: "),o="\nbut found: '"+(0,i.$1)(n).image+"'";if(r)return a+r+o;var s=(0,i.TS)(t,(function(e,t){return e.concat(t)}),[]),l=(0,i.Tj)(s,(function(e){return"["+(0,i.Tj)(e,(function(e){return ee(e)})).join(", ")+"]"}));return a+("one of these possible Token sequences:\n"+(0,i.Tj)(l,(function(e,t){return"  "+(t+1)+". "+e})).join("\n"))+o},buildEarlyExitMessage:function(e){var t=e.expectedIterationPaths,n=e.actual,r=e.customUserDescription,a=(e.ruleName,"Expecting: "),o="\nbut found: '"+(0,i.$1)(n).image+"'";return r?a+r+o:a+("expecting at least one iteration which starts with one of these possible Token sequences::\n  <"+(0,i.Tj)(t,(function(e){return"["+(0,i.Tj)(e,(function(e){return ee(e)})).join(",")+"]"})).join(" ,")+">")+o}};Object.freeze($e);var qe={buildRuleNotFoundError:function(e,t){return"Invalid grammar, reference to a rule which is not defined: ->"+t.nonTerminalName+"<-\ninside top level rule: ->"+e.name+"<-"}},He={buildDuplicateFoundError:function(e,t){var n,r=e.name,a=(0,i.$1)(t),o=a.idx,s=Pe(a),l=(n=a)instanceof Me?n.terminalType.name:n instanceof ye?n.nonTerminalName:"",c="->"+s+(o>0?o:"")+"<- "+(l?"with argument: ->"+l+"<-":"")+"\n                  appears more than once ("+t.length+" times) in the top level rule: ->"+r+"<-.                  \n                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES \n                  ";return c=(c=c.replace(/[ \t]+/g," ")).replace(/\s\s+/g,"\n")},buildNamespaceConflictError:function(e){return"Namespace conflict found in grammar.\nThe grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <"+e.name+">.\nTo resolve this make sure each Terminal and Non-Terminal names are unique\nThis is easy to accomplish by using the convention that Terminal names start with an uppercase letter\nand Non-Terminal names start with a lower case letter."},buildAlternationPrefixAmbiguityError:function(e){var t=(0,i.Tj)(e.prefixPath,(function(e){return ee(e)})).join(", "),n=0===e.alternation.idx?"":e.alternation.idx;return"Ambiguous alternatives: <"+e.ambiguityIndices.join(" ,")+"> due to common lookahead prefix\nin <OR"+n+"> inside <"+e.topLevelRule.name+"> Rule,\n<"+t+"> may appears as a prefix path in all these alternatives.\nSee: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX\nFor Further details."},buildAlternationAmbiguityError:function(e){var t=(0,i.Tj)(e.prefixPath,(function(e){return ee(e)})).join(", "),n=0===e.alternation.idx?"":e.alternation.idx,r="Ambiguous Alternatives Detected: <"+e.ambiguityIndices.join(" ,")+"> in <OR"+n+"> inside <"+e.topLevelRule.name+"> Rule,\n<"+t+"> may appears as a prefix path in all these alternatives.\n";return r+="See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES\nFor Further details."},buildEmptyRepetitionError:function(e){var t=Pe(e.repetition);return 0!==e.repetition.idx&&(t+=e.repetition.idx),"The repetition <"+t+"> within Rule <"+e.topLevelRule.name+"> can never consume any tokens.\nThis could lead to an infinite loop."},buildTokenNameError:function(e){return"deprecated"},buildEmptyAlternationError:function(e){return"Ambiguous empty alternative: <"+(e.emptyChoiceIdx+1)+"> in <OR"+e.alternation.idx+"> inside <"+e.topLevelRule.name+"> Rule.\nOnly the last alternative may be an empty alternative."},buildTooManyAlternativesError:function(e){return"An Alternation cannot have more than 256 alternatives:\n<OR"+e.alternation.idx+"> inside <"+e.topLevelRule.name+"> Rule.\n has "+(e.alternation.definition.length+1)+" alternatives."},buildLeftRecursionError:function(e){var t=e.topLevelRule.name;return"Left Recursion found in grammar.\nrule: <"+t+"> can be invoked from itself (directly or indirectly)\nwithout consuming any Tokens. The grammar path that causes this is: \n "+(t+" --\x3e "+i.Tj(e.leftRecursionPath,(function(e){return e.name})).concat([t]).join(" --\x3e "))+"\n To fix this refactor your grammar to remove the left recursion.\nsee: https://en.wikipedia.org/wiki/LL_parser#Left_Factoring."},buildInvalidRuleNameError:function(e){return"deprecated"},buildDuplicateRuleNameError:function(e){return"Duplicate definition, rule: ->"+(e.topLevelRule instanceof be?e.topLevelRule.name:e.topLevelRule)+"<- is already defined in the grammar: ->"+e.grammarName+"<-"}},Ve=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();var We=function(e){function t(t,n){var r=e.call(this)||this;return r.nameToTopRule=t,r.errMsgProvider=n,r.errors=[],r}return Ve(t,e),t.prototype.resolveRefs=function(){var e=this;(0,i.jJ)((0,i.zu)(this.nameToTopRule),(function(t){e.currTopLevel=t,t.accept(e)}))},t.prototype.visitNonTerminal=function(e){var t=this.nameToTopRule[e.nonTerminalName];if(t)e.referencedRule=t;else{var n=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:n,type:En.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}},t}(Ne),Ge=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ye=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.path=n,r.nextTerminalName="",r.nextTerminalOccurrence=0,r.nextTerminalName=r.path.lastTok.name,r.nextTerminalOccurrence=r.path.lastTokOccurrence,r}return Ge(t,e),t.prototype.walkTerminal=function(e,t,n){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){var r=t.concat(n),i=new xe({definition:r});this.possibleTokTypes=ze(i),this.found=!0}},t}(function(e){function t(t,n){var r=e.call(this)||this;return r.topProd=t,r.path=n,r.possibleTokTypes=[],r.nextProductionName="",r.nextProductionOccurrence=0,r.found=!1,r.isAtEndOfPath=!1,r}return Ge(t,e),t.prototype.startWalking=function(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=(0,i.T9)(this.path.ruleStack).reverse(),this.occurrenceStack=(0,i.T9)(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes},t.prototype.walk=function(t,n){void 0===n&&(n=[]),this.found||e.prototype.walk.call(this,t,n)},t.prototype.walkProdRef=function(e,t,n){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){var r=t.concat(n);this.updateExpectedNext(),this.walk(e.referencedRule,r)}},t.prototype.updateExpectedNext=function(){(0,i.Im)(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())},t}(Oe)),Xe=function(e){function t(t,n){var r=e.call(this)||this;return r.topRule=t,r.occurrence=n,r.result={token:void 0,occurrence:void 0,isEndOfRule:void 0},r}return Ge(t,e),t.prototype.startWalking=function(){return this.walk(this.topRule),this.result},t}(Oe),Ke=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ge(t,e),t.prototype.walkMany=function(t,n,r){if(t.idx===this.occurrence){var a=(0,i.$1)(n.concat(r));this.result.isEndOfRule=void 0===a,a instanceof Me&&(this.result.token=a.terminalType,this.result.occurrence=a.idx)}else e.prototype.walkMany.call(this,t,n,r)},t}(Xe),Ze=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ge(t,e),t.prototype.walkManySep=function(t,n,r){if(t.idx===this.occurrence){var a=(0,i.$1)(n.concat(r));this.result.isEndOfRule=void 0===a,a instanceof Me&&(this.result.token=a.terminalType,this.result.occurrence=a.idx)}else e.prototype.walkManySep.call(this,t,n,r)},t}(Xe),Je=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ge(t,e),t.prototype.walkAtLeastOne=function(t,n,r){if(t.idx===this.occurrence){var a=(0,i.$1)(n.concat(r));this.result.isEndOfRule=void 0===a,a instanceof Me&&(this.result.token=a.terminalType,this.result.occurrence=a.idx)}else e.prototype.walkAtLeastOne.call(this,t,n,r)},t}(Xe),Qe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ge(t,e),t.prototype.walkAtLeastOneSep=function(t,n,r){if(t.idx===this.occurrence){var a=(0,i.$1)(n.concat(r));this.result.isEndOfRule=void 0===a,a instanceof Me&&(this.result.token=a.terminalType,this.result.occurrence=a.idx)}else e.prototype.walkAtLeastOneSep.call(this,t,n,r)},t}(Xe);function et(e,t,n){void 0===n&&(n=[]),n=(0,i.T9)(n);var r=[],a=0;function o(o){var s=et(o.concat((0,i.gv)(e,a+1)),t,n);return r.concat(s)}for(;n.length<t&&a<e.length;){var s=e[a];if(s instanceof xe)return o(s.definition);if(s instanceof ye)return o(s.definition);if(s instanceof _e)r=o(s.definition);else{if(s instanceof we)return o(l=s.definition.concat([new ke({definition:s.definition})]));if(s instanceof Ae)return o(l=[new xe({definition:s.definition}),new ke({definition:[new Me({terminalType:s.separator})].concat(s.definition)})]);if(s instanceof Ee){var l=s.definition.concat([new ke({definition:[new Me({terminalType:s.separator})].concat(s.definition)})]);r=o(l)}else if(s instanceof ke){l=s.definition.concat([new ke({definition:s.definition})]);r=o(l)}else{if(s instanceof Te)return(0,i.jJ)(s.definition,(function(e){!1===(0,i.Im)(e.definition)&&(r=o(e.definition))})),r;if(!(s instanceof Me))throw Error("non exhaustive match");n.push(s.terminalType)}}a++}return r.push({partialPath:n,suffixDef:(0,i.gv)(e,a)}),r}function tt(e,t,n,r){var a="EXIT_NONE_TERMINAL",o=[a],s="EXIT_ALTERNATIVE",l=!1,c=t.length,u=c-r-1,f=[],d=[];for(d.push({idx:-1,def:e,ruleStack:[],occurrenceStack:[]});!(0,i.Im)(d);){var h=d.pop();if(h!==s){var p=h.def,m=h.idx,g=h.ruleStack,v=h.occurrenceStack;if(!(0,i.Im)(p)){var y=p[0];if(y===a){var b={idx:m,def:(0,i.gv)(p),ruleStack:(0,i.gc)(g),occurrenceStack:(0,i.gc)(v)};d.push(b)}else if(y instanceof Me)if(m<c-1){var x=m+1;if(n(t[x],y.terminalType)){b={idx:x,def:(0,i.gv)(p),ruleStack:g,occurrenceStack:v};d.push(b)}}else{if(m!==c-1)throw Error("non exhaustive match");f.push({nextTokenType:y.terminalType,nextTokenOccurrence:y.idx,ruleStack:g,occurrenceStack:v}),l=!0}else if(y instanceof ye){var _=(0,i.T9)(g);_.push(y.nonTerminalName);var w=(0,i.T9)(v);w.push(y.idx);b={idx:m,def:y.definition.concat(o,(0,i.gv)(p)),ruleStack:_,occurrenceStack:w};d.push(b)}else if(y instanceof _e){var A={idx:m,def:(0,i.gv)(p),ruleStack:g,occurrenceStack:v};d.push(A),d.push(s);var k={idx:m,def:y.definition.concat((0,i.gv)(p)),ruleStack:g,occurrenceStack:v};d.push(k)}else if(y instanceof we){var E=new ke({definition:y.definition,idx:y.idx});b={idx:m,def:y.definition.concat([E],(0,i.gv)(p)),ruleStack:g,occurrenceStack:v};d.push(b)}else if(y instanceof Ae){var T=new Me({terminalType:y.separator});E=new ke({definition:[T].concat(y.definition),idx:y.idx}),b={idx:m,def:y.definition.concat([E],(0,i.gv)(p)),ruleStack:g,occurrenceStack:v};d.push(b)}else if(y instanceof Ee){A={idx:m,def:(0,i.gv)(p),ruleStack:g,occurrenceStack:v};d.push(A),d.push(s);T=new Me({terminalType:y.separator});var M=new ke({definition:[T].concat(y.definition),idx:y.idx});k={idx:m,def:y.definition.concat([M],(0,i.gv)(p)),ruleStack:g,occurrenceStack:v};d.push(k)}else if(y instanceof ke){A={idx:m,def:(0,i.gv)(p),ruleStack:g,occurrenceStack:v};d.push(A),d.push(s);M=new ke({definition:y.definition,idx:y.idx}),k={idx:m,def:y.definition.concat([M],(0,i.gv)(p)),ruleStack:g,occurrenceStack:v};d.push(k)}else if(y instanceof Te)for(var S=y.definition.length-1;S>=0;S--){var C={idx:m,def:y.definition[S].definition.concat((0,i.gv)(p)),ruleStack:g,occurrenceStack:v};d.push(C),d.push(s)}else if(y instanceof xe)d.push({idx:m,def:y.definition.concat((0,i.gv)(p)),ruleStack:g,occurrenceStack:v});else{if(!(y instanceof be))throw Error("non exhaustive match");d.push(nt(y,m,g,v))}}}else l&&(0,i.HV)(d).idx<=u&&d.pop()}return f}function nt(e,t,n,r){var a=(0,i.T9)(n);a.push(e.name);var o=(0,i.T9)(r);return o.push(1),{idx:t,def:e.definition,ruleStack:a,occurrenceStack:o}}var rt,it=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){e[e.OPTION=0]="OPTION",e[e.REPETITION=1]="REPETITION",e[e.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",e[e.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",e[e.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",e[e.ALTERNATION=5]="ALTERNATION"}(rt||(rt={}));var at=function(e){function t(t,n,r){var i=e.call(this)||this;return i.topProd=t,i.targetOccurrence=n,i.targetProdType=r,i}return it(t,e),t.prototype.startWalking=function(){return this.walk(this.topProd),this.restDef},t.prototype.checkIsTarget=function(e,t,n,r){return e.idx===this.targetOccurrence&&this.targetProdType===t&&(this.restDef=n.concat(r),!0)},t.prototype.walkOption=function(t,n,r){this.checkIsTarget(t,rt.OPTION,n,r)||e.prototype.walkOption.call(this,t,n,r)},t.prototype.walkAtLeastOne=function(t,n,r){this.checkIsTarget(t,rt.REPETITION_MANDATORY,n,r)||e.prototype.walkOption.call(this,t,n,r)},t.prototype.walkAtLeastOneSep=function(t,n,r){this.checkIsTarget(t,rt.REPETITION_MANDATORY_WITH_SEPARATOR,n,r)||e.prototype.walkOption.call(this,t,n,r)},t.prototype.walkMany=function(t,n,r){this.checkIsTarget(t,rt.REPETITION,n,r)||e.prototype.walkOption.call(this,t,n,r)},t.prototype.walkManySep=function(t,n,r){this.checkIsTarget(t,rt.REPETITION_WITH_SEPARATOR,n,r)||e.prototype.walkOption.call(this,t,n,r)},t}(Oe),ot=function(e){function t(t,n,r){var i=e.call(this)||this;return i.targetOccurrence=t,i.targetProdType=n,i.targetRef=r,i.result=[],i}return it(t,e),t.prototype.checkIsTarget=function(e,t){e.idx!==this.targetOccurrence||this.targetProdType!==t||void 0!==this.targetRef&&e!==this.targetRef||(this.result=e.definition)},t.prototype.visitOption=function(e){this.checkIsTarget(e,rt.OPTION)},t.prototype.visitRepetition=function(e){this.checkIsTarget(e,rt.REPETITION)},t.prototype.visitRepetitionMandatory=function(e){this.checkIsTarget(e,rt.REPETITION_MANDATORY)},t.prototype.visitRepetitionMandatoryWithSeparator=function(e){this.checkIsTarget(e,rt.REPETITION_MANDATORY_WITH_SEPARATOR)},t.prototype.visitRepetitionWithSeparator=function(e){this.checkIsTarget(e,rt.REPETITION_WITH_SEPARATOR)},t.prototype.visitAlternation=function(e){this.checkIsTarget(e,rt.ALTERNATION)},t}(Ne);function st(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=[];return t}function lt(e){for(var t=[""],n=0;n<e.length;n++){for(var r=e[n],i=[],a=0;a<t.length;a++){var o=t[a];i.push(o+"_"+r.tokenTypeIdx);for(var s=0;s<r.categoryMatches.length;s++){var l="_"+r.categoryMatches[s];i.push(o+l)}}t=i}return t}function ct(e,t,n){for(var r=0;r<e.length;r++)if(r!==n)for(var i=e[r],a=0;a<t.length;a++){if(!0===i[t[a]])return!1}return!0}function ut(e,t){for(var n=(0,i.Tj)(e,(function(e){return et([e],1)})),r=st(n.length),a=(0,i.Tj)(n,(function(e){var t={};return(0,i.jJ)(e,(function(e){var n=lt(e.partialPath);(0,i.jJ)(n,(function(e){t[e]=!0}))})),t})),o=n,s=1;s<=t;s++){var l=o;o=st(l.length);for(var c=function(e){for(var n=l[e],c=0;c<n.length;c++){var u=n[c].partialPath,f=n[c].suffixDef,d=lt(u);if(ct(a,d,e)||(0,i.Im)(f)||u.length===t){var h=r[e];if(!1===ht(h,u)){h.push(u);for(var p=0;p<d.length;p++){var m=d[p];a[e][m]=!0}}}else{var g=et(f,s+1,u);o[e]=o[e].concat(g),(0,i.jJ)(g,(function(t){var n=lt(t.partialPath);(0,i.jJ)(n,(function(t){a[e][t]=!0}))}))}}},u=0;u<l.length;u++)c(u)}return r}function ft(e,t,n,r){var i=new ot(e,rt.ALTERNATION,r);return t.accept(i),ut(i.result,n)}function dt(e,t,n,r){var i=new ot(e,n);t.accept(i);var a=i.result,o=new at(t,e,n).startWalking();return ut([new xe({definition:a}),new xe({definition:o})],r)}function ht(e,t){e:for(var n=0;n<e.length;n++){var r=e[n];if(r.length===t.length){for(var i=0;i<r.length;i++){var a=t[i],o=r[i];if(!1===(a===o||void 0!==o.categoryMatchesMap[a.tokenTypeIdx]))continue e}return!0}}return!1}function pt(e){return(0,i.Si)(e,(function(e){return(0,i.Si)(e,(function(e){return(0,i.Si)(e,(function(e){return(0,i.Im)(e.categoryMatches)}))}))}))}var mt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function gt(e,t,n,r,a){var o=i.Tj(e,(function(e){return function(e,t){var n=new bt;e.accept(n);var r=n.allProductions,a=i.$z(r,vt),o=i.Up(a,(function(e){return e.length>1})),s=i.Tj(i.zu(o),(function(n){var r=i.$1(n),a=t.buildDuplicateFoundError(e,n),o=Pe(r),s={message:a,type:En.DUPLICATE_PRODUCTIONS,ruleName:e.name,dslName:o,occurrence:r.idx},l=yt(r);return l&&(s.parameter=l),s}));return s}(e,r)})),s=i.Tj(e,(function(e){return xt(e,e,r)})),l=[],c=[],u=[];(0,i.Si)(s,i.Im)&&(l=(0,i.Tj)(e,(function(e){return function(e,t){var n=new wt;e.accept(n);var r=n.alternations,a=i.TS(r,(function(n,r){var a=i.gc(r.definition),o=i.Tj(a,(function(n,a){var o=tt([n],[],null,1);return i.Im(o)?{message:t.buildEmptyAlternationError({topLevelRule:e,alternation:r,emptyChoiceIdx:a}),type:En.NONE_LAST_EMPTY_ALT,ruleName:e.name,occurrence:r.idx,alternative:a+1}:null}));return n.concat(i.oE(o))}),[]);return a}(e,r)})),c=(0,i.Tj)(e,(function(e){return function(e,t,n){var r=new wt;e.accept(r);var a=r.alternations;a=(0,i.ku)(a,(function(e){return!0===e.ignoreAmbiguities}));var o=i.TS(a,(function(r,a){var o=a.idx,s=a.maxLookahead||t,l=ft(o,e,s,a),c=function(e,t,n,r){var a=[],o=(0,i.TS)(e,(function(n,r,o){return!0===t.definition[o].ignoreAmbiguities||(0,i.jJ)(r,(function(r){var s=[o];(0,i.jJ)(e,(function(e,n){o!==n&&ht(e,r)&&!0!==t.definition[n].ignoreAmbiguities&&s.push(n)})),s.length>1&&!ht(a,r)&&(a.push(r),n.push({alts:s,path:r}))})),n}),[]),s=i.Tj(o,(function(e){var a=(0,i.Tj)(e.alts,(function(e){return e+1}));return{message:r.buildAlternationAmbiguityError({topLevelRule:n,alternation:t,ambiguityIndices:a,prefixPath:e.path}),type:En.AMBIGUOUS_ALTS,ruleName:n.name,occurrence:t.idx,alternatives:[e.alts]}}));return s}(l,a,e,n),u=function(e,t,n,r){var a=[],o=(0,i.TS)(e,(function(e,t,n){var r=(0,i.Tj)(t,(function(e){return{idx:n,path:e}}));return e.concat(r)}),[]);return(0,i.jJ)(o,(function(e){if(!0!==t.definition[e.idx].ignoreAmbiguities){var s=e.idx,l=e.path,c=(0,i.JW)(o,(function(e){return!0!==t.definition[e.idx].ignoreAmbiguities&&e.idx<s&&(n=e.path,r=l,n.length<r.length&&(0,i.Si)(n,(function(e,t){var n=r[t];return e===n||n.categoryMatchesMap[e.tokenTypeIdx]})));var n,r})),u=(0,i.Tj)(c,(function(e){var i=[e.idx+1,s+1],a=0===t.idx?"":t.idx;return{message:r.buildAlternationPrefixAmbiguityError({topLevelRule:n,alternation:t,ambiguityIndices:i,prefixPath:e.path}),type:En.AMBIGUOUS_PREFIX_ALTS,ruleName:n.name,occurrence:a,alternatives:i}}));a=a.concat(u)}})),a}(l,a,e,n);return r.concat(c,u)}),[]);return o}(e,t,r)})),u=function(e,t,n){var r=[];return(0,i.jJ)(e,(function(e){var a=new At;e.accept(a);var o=a.allProductions;(0,i.jJ)(o,(function(a){var o=function(e){if(e instanceof _e)return rt.OPTION;if(e instanceof ke)return rt.REPETITION;if(e instanceof we)return rt.REPETITION_MANDATORY;if(e instanceof Ae)return rt.REPETITION_MANDATORY_WITH_SEPARATOR;if(e instanceof Ee)return rt.REPETITION_WITH_SEPARATOR;if(e instanceof Te)return rt.ALTERNATION;throw Error("non exhaustive match")}(a),s=a.maxLookahead||t,l=dt(a.idx,e,o,s)[0];if((0,i.Im)((0,i.Bq)(l))){var c=n.buildEmptyRepetitionError({topLevelRule:e,repetition:a});r.push({message:c,type:En.NO_NON_EMPTY_LOOKAHEAD,ruleName:e.name})}}))})),r}(e,t,r));var f=function(e,t,n){var r=[],a=(0,i.Tj)(t,(function(e){return e.name}));return(0,i.jJ)(e,(function(e){var t=e.name;if((0,i.gR)(a,t)){var o=n.buildNamespaceConflictError(e);r.push({message:o,type:En.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:t})}})),r}(e,n,r),d=(0,i.Tj)(e,(function(e){return function(e,t){var n=new wt;e.accept(n);var r=n.alternations,a=i.TS(r,(function(n,r){return r.definition.length>255&&n.push({message:t.buildTooManyAlternativesError({topLevelRule:e,alternation:r}),type:En.TOO_MANY_ALTS,ruleName:e.name,occurrence:r.idx}),n}),[]);return a}(e,r)})),h=(0,i.Tj)(e,(function(t){return function(e,t,n,r){var a=[],o=(0,i.TS)(t,(function(t,n){return n.name===e.name?t+1:t}),0);if(o>1){var s=r.buildDuplicateRuleNameError({topLevelRule:e,grammarName:n});a.push({message:s,type:En.DUPLICATE_RULE_NAME,ruleName:e.name})}return a}(t,e,a,r)}));return i.Bq(o.concat(u,s,l,c,f,d,h))}function vt(e){return Pe(e)+"_#_"+e.idx+"_#_"+yt(e)}function yt(e){return e instanceof Me?e.terminalType.name:e instanceof ye?e.nonTerminalName:""}var bt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.allProductions=[],t}return mt(t,e),t.prototype.visitNonTerminal=function(e){this.allProductions.push(e)},t.prototype.visitOption=function(e){this.allProductions.push(e)},t.prototype.visitRepetitionWithSeparator=function(e){this.allProductions.push(e)},t.prototype.visitRepetitionMandatory=function(e){this.allProductions.push(e)},t.prototype.visitRepetitionMandatoryWithSeparator=function(e){this.allProductions.push(e)},t.prototype.visitRepetition=function(e){this.allProductions.push(e)},t.prototype.visitAlternation=function(e){this.allProductions.push(e)},t.prototype.visitTerminal=function(e){this.allProductions.push(e)},t}(Ne);function xt(e,t,n,r){void 0===r&&(r=[]);var a=[],o=_t(t.definition);if(i.Im(o))return[];var s=e.name;i.gR(o,e)&&a.push({message:n.buildLeftRecursionError({topLevelRule:e,leftRecursionPath:r}),type:En.LEFT_RECURSION,ruleName:s});var l=i.iv(o,r.concat([e])),c=i.Tj(l,(function(t){var a=i.T9(r);return a.push(t),xt(e,t,n,a)}));return a.concat(i.Bq(c))}function _t(e){var t=[];if(i.Im(e))return t;var n=i.$1(e);if(n instanceof ye)t.push(n.referencedRule);else if(n instanceof xe||n instanceof _e||n instanceof we||n instanceof Ae||n instanceof Ee||n instanceof ke)t=t.concat(_t(n.definition));else if(n instanceof Te)t=i.Bq(i.Tj(n.definition,(function(e){return _t(e.definition)})));else if(!(n instanceof Me))throw Error("non exhaustive match");var r=De(n),a=e.length>1;if(r&&a){var o=i.gv(e);return t.concat(_t(o))}return t}var wt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.alternations=[],t}return mt(t,e),t.prototype.visitAlternation=function(e){this.alternations.push(e)},t}(Ne);var At=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.allProductions=[],t}return mt(t,e),t.prototype.visitRepetitionWithSeparator=function(e){this.allProductions.push(e)},t.prototype.visitRepetitionMandatory=function(e){this.allProductions.push(e)},t.prototype.visitRepetitionMandatoryWithSeparator=function(e){this.allProductions.push(e)},t.prototype.visitRepetition=function(e){this.allProductions.push(e)},t}(Ne);function kt(e){e=(0,i.NT)(e,{errMsgProvider:qe});var t,n,r,a={};return(0,i.jJ)(e.rules,(function(e){a[e.name]=e})),t=a,n=e.errMsgProvider,(r=new We(t,n)).resolveRefs(),r.errors}function Et(e){return gt((e=(0,i.NT)(e,{errMsgProvider:He})).rules,e.maxLookahead,e.tokenTypes,e.errMsgProvider,e.grammarName)}function Tt(e){(0,i.jJ)(e.rules,(function(e){var t=new Ie;e.accept(t),(0,i.jJ)(t.dslMethods,(function(e){(0,i.jJ)(e,(function(e,t){e.idx=t+1}))}))}))}var Mt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),St="MismatchedTokenException",Ct="NoViableAltException",Ot="EarlyExitException",Rt="NotAllInputParsedException",Nt=[St,Ct,Ot,Rt];function Lt(e){return(0,i.gR)(Nt,e.name)}Object.freeze(Nt);var Dt=function(e){function t(t,n){var r=this.constructor,i=e.call(this,t)||this;return i.token=n,i.resyncedTokens=[],Object.setPrototypeOf(i,r.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,i.constructor),i}return Mt(t,e),t}(Error),Pt=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.previousToken=r,i.name=St,i}return Mt(t,e),t}(Dt),It=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.previousToken=r,i.name=Ct,i}return Mt(t,e),t}(Dt),Ft=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name=Rt,r}return Mt(t,e),t}(Dt),zt=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.previousToken=r,i.name=Ot,i}return Mt(t,e),t}(Dt),jt={},Bt="InRuleRecoveryException";function Ut(e){this.name=Bt,this.message=e}Ut.prototype=Error.prototype;var $t=function(){function e(){}return e.prototype.initRecoverable=function(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=(0,i.zy)(e,"recoveryEnabled")?e.recoveryEnabled:Tn.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=qt)},e.prototype.getTokenToInsert=function(e){var t=pe(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return t.isInsertedInRecovery=!0,t},e.prototype.canTokenTypeBeInsertedInRecovery=function(e){return!0},e.prototype.tryInRepetitionRecovery=function(e,t,n,r){for(var a=this,o=this.findReSyncTokenType(),s=this.exportLexerState(),l=[],c=!1,u=this.LA(1),f=this.LA(1),d=function(){var e=a.LA(0),t=a.errorMessageProvider.buildMismatchTokenMessage({expected:r,actual:u,previous:e,ruleName:a.getCurrRuleFullName()}),n=new Pt(t,u,a.LA(0));n.resyncedTokens=(0,i.gc)(l),a.SAVE_ERROR(n)};!c;){if(this.tokenMatcher(f,r))return void d();if(n.call(this))return d(),void e.apply(this,t);this.tokenMatcher(f,o)?c=!0:(f=this.SKIP_TOKEN(),this.addToResyncTokens(f,l))}this.importLexerState(s)},e.prototype.shouldInRepetitionRecoveryBeTried=function(e,t,n){return!1!==n&&(void 0!==e&&void 0!==t&&(!this.tokenMatcher(this.LA(1),e)&&(!this.isBackTracking()&&!this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,t)))))},e.prototype.getFollowsForInRuleRecovery=function(e,t){var n=this.getCurrentGrammarPath(e,t);return this.getNextPossibleTokenTypes(n)},e.prototype.tryInRuleRecovery=function(e,t){if(this.canRecoverWithSingleTokenInsertion(e,t))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){var n=this.SKIP_TOKEN();return this.consumeToken(),n}throw new Ut("sad sad panda")},e.prototype.canPerformInRuleRecovery=function(e,t){return this.canRecoverWithSingleTokenInsertion(e,t)||this.canRecoverWithSingleTokenDeletion(e)},e.prototype.canRecoverWithSingleTokenInsertion=function(e,t){var n=this;if(!this.canTokenTypeBeInsertedInRecovery(e))return!1;if((0,i.Im)(t))return!1;var r=this.LA(1);return void 0!==(0,i.I6)(t,(function(e){return n.tokenMatcher(r,e)}))},e.prototype.canRecoverWithSingleTokenDeletion=function(e){return this.tokenMatcher(this.LA(2),e)},e.prototype.isInCurrentRuleReSyncSet=function(e){var t=this.getCurrFollowKey(),n=this.getFollowSetFromFollowKey(t);return(0,i.gR)(n,e)},e.prototype.findReSyncTokenType=function(){for(var e=this.flattenFollowSet(),t=this.LA(1),n=2;;){var r=t.tokenType;if((0,i.gR)(e,r))return r;t=this.LA(n),n++}},e.prototype.getCurrFollowKey=function(){if(1===this.RULE_STACK.length)return jt;var e=this.getLastExplicitRuleShortName(),t=this.getLastExplicitRuleOccurrenceIndex(),n=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:t,inRule:this.shortRuleNameToFullName(n)}},e.prototype.buildFullFollowKeyStack=function(){var e=this,t=this.RULE_STACK,n=this.RULE_OCCURRENCE_STACK;return(0,i.Tj)(t,(function(r,i){return 0===i?jt:{ruleName:e.shortRuleNameToFullName(r),idxInCallingRule:n[i],inRule:e.shortRuleNameToFullName(t[i-1])}}))},e.prototype.flattenFollowSet=function(){var e=this,t=(0,i.Tj)(this.buildFullFollowKeyStack(),(function(t){return e.getFollowSetFromFollowKey(t)}));return(0,i.Bq)(t)},e.prototype.getFollowSetFromFollowKey=function(e){if(e===jt)return[he];var t=e.ruleName+e.idxInCallingRule+je+e.inRule;return this.resyncFollows[t]},e.prototype.addToResyncTokens=function(e,t){return this.tokenMatcher(e,he)||t.push(e),t},e.prototype.reSyncTo=function(e){for(var t=[],n=this.LA(1);!1===this.tokenMatcher(n,e);)n=this.SKIP_TOKEN(),this.addToResyncTokens(n,t);return(0,i.gc)(t)},e.prototype.attemptInRepetitionRecovery=function(e,t,n,r,i,a,o){},e.prototype.getCurrentGrammarPath=function(e,t){return{ruleStack:this.getHumanReadableRuleStack(),occurrenceStack:(0,i.T9)(this.RULE_OCCURRENCE_STACK),lastTok:e,lastTokOccurrence:t}},e.prototype.getHumanReadableRuleStack=function(){var e=this;return(0,i.Tj)(this.RULE_STACK,(function(t){return e.shortRuleNameToFullName(t)}))},e}();function qt(e,t,n,r,i,a,o){var s=this.getKeyForAutomaticLookahead(r,i),l=this.firstAfterRepMap[s];if(void 0===l){var c=this.getCurrRuleFullName();l=new a(this.getGAstProductions()[c],i).startWalking(),this.firstAfterRepMap[s]=l}var u=l.token,f=l.occurrence,d=l.isEndOfRule;1===this.RULE_STACK.length&&d&&void 0===u&&(u=he,f=1),this.shouldInRepetitionRecoveryBeTried(u,f,o)&&this.tryInRepetitionRecovery(e,t,n,u)}var Ht=1024,Vt=1280,Wt=1536;function Gt(e,t,n){return n|t|e}var Yt=function(){function e(){}return e.prototype.initLooksAhead=function(e){this.dynamicTokensEnabled=(0,i.zy)(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:Tn.dynamicTokensEnabled,this.maxLookahead=(0,i.zy)(e,"maxLookahead")?e.maxLookahead:Tn.maxLookahead,this.lookAheadFuncsCache=(0,i.rF)()?new Map:[],(0,i.rF)()?(this.getLaFuncFromCache=this.getLaFuncFromMap,this.setLaFuncCache=this.setLaFuncCacheUsingMap):(this.getLaFuncFromCache=this.getLaFuncFromObj,this.setLaFuncCache=this.setLaFuncUsingObj)},e.prototype.preComputeLookaheadFunctions=function(e){var t=this;(0,i.jJ)(e,(function(e){t.TRACE_INIT(e.name+" Rule Lookahead",(function(){var n=function(e){Fe.reset(),e.accept(Fe);var t=Fe.dslMethods;return Fe.reset(),t}(e),r=n.alternation,a=n.repetition,o=n.option,s=n.repetitionMandatory,l=n.repetitionMandatoryWithSeparator,c=n.repetitionWithSeparator;(0,i.jJ)(r,(function(n){var r=0===n.idx?"":n.idx;t.TRACE_INIT(""+Pe(n)+r,(function(){var r,i,a,o,s,l,c,u=(r=n.idx,i=e,a=n.maxLookahead||t.maxLookahead,o=n.hasPredicates,s=t.dynamicTokensEnabled,l=t.lookAheadBuilderForAlternatives,c=ft(r,i,a),l(c,o,pt(c)?$:U,s)),f=Gt(t.fullRuleNameToShort[e.name],256,n.idx);t.setLaFuncCache(f,u)}))})),(0,i.jJ)(a,(function(n){t.computeLookaheadFunc(e,n.idx,768,rt.REPETITION,n.maxLookahead,Pe(n))})),(0,i.jJ)(o,(function(n){t.computeLookaheadFunc(e,n.idx,512,rt.OPTION,n.maxLookahead,Pe(n))})),(0,i.jJ)(s,(function(n){t.computeLookaheadFunc(e,n.idx,Ht,rt.REPETITION_MANDATORY,n.maxLookahead,Pe(n))})),(0,i.jJ)(l,(function(n){t.computeLookaheadFunc(e,n.idx,Wt,rt.REPETITION_MANDATORY_WITH_SEPARATOR,n.maxLookahead,Pe(n))})),(0,i.jJ)(c,(function(n){t.computeLookaheadFunc(e,n.idx,Vt,rt.REPETITION_WITH_SEPARATOR,n.maxLookahead,Pe(n))}))}))}))},e.prototype.computeLookaheadFunc=function(e,t,n,r,i,a){var o=this;this.TRACE_INIT(""+a+(0===t?"":t),(function(){var a=function(e,t,n,r,i,a){var o=dt(e,t,i,n),s=pt(o)?$:U;return a(o[0],s,r)}(t,e,i||o.maxLookahead,o.dynamicTokensEnabled,r,o.lookAheadBuilderForOptional),s=Gt(o.fullRuleNameToShort[e.name],n,t);o.setLaFuncCache(s,a)}))},e.prototype.lookAheadBuilderForOptional=function(e,t,n){return function(e,t,n){var r=(0,i.Si)(e,(function(e){return 1===e.length})),a=e.length;if(r&&!n){var o=(0,i.Bq)(e);if(1===o.length&&(0,i.Im)(o[0].categoryMatches)){var s=o[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===s}}var l=(0,i.TS)(o,(function(e,t,n){return e[t.tokenTypeIdx]=!0,(0,i.jJ)(t.categoryMatches,(function(t){e[t]=!0})),e}),[]);return function(){var e=this.LA(1);return!0===l[e.tokenTypeIdx]}}return function(){e:for(var n=0;n<a;n++){for(var r=e[n],i=r.length,o=0;o<i;o++){var s=this.LA(o+1);if(!1===t(s,r[o]))continue e}return!0}return!1}}(e,t,n)},e.prototype.lookAheadBuilderForAlternatives=function(e,t,n,r){return function(e,t,n,r){var a=e.length,o=(0,i.Si)(e,(function(e){return(0,i.Si)(e,(function(e){return 1===e.length}))}));if(t)return function(t){for(var r=(0,i.Tj)(t,(function(e){return e.GATE})),o=0;o<a;o++){var s=e[o],l=s.length,c=r[o];if(void 0===c||!1!==c.call(this))e:for(var u=0;u<l;u++){for(var f=s[u],d=f.length,h=0;h<d;h++){var p=this.LA(h+1);if(!1===n(p,f[h]))continue e}return o}}};if(o&&!r){var s=(0,i.Tj)(e,(function(e){return(0,i.Bq)(e)})),l=(0,i.TS)(s,(function(e,t,n){return(0,i.jJ)(t,(function(t){(0,i.zy)(e,t.tokenTypeIdx)||(e[t.tokenTypeIdx]=n),(0,i.jJ)(t.categoryMatches,(function(t){(0,i.zy)(e,t)||(e[t]=n)}))})),e}),[]);return function(){var e=this.LA(1);return l[e.tokenTypeIdx]}}return function(){for(var t=0;t<a;t++){var r=e[t],i=r.length;e:for(var o=0;o<i;o++){for(var s=r[o],l=s.length,c=0;c<l;c++){var u=this.LA(c+1);if(!1===n(u,s[c]))continue e}return t}}}}(e,t,n,r)},e.prototype.getKeyForAutomaticLookahead=function(e,t){return Gt(this.getLastExplicitRuleShortName(),e,t)},e.prototype.getLaFuncFromCache=function(e){},e.prototype.getLaFuncFromMap=function(e){return this.lookAheadFuncsCache.get(e)},e.prototype.getLaFuncFromObj=function(e){return this.lookAheadFuncsCache[e]},e.prototype.setLaFuncCache=function(e,t){},e.prototype.setLaFuncCacheUsingMap=function(e,t){this.lookAheadFuncsCache.set(e,t)},e.prototype.setLaFuncUsingObj=function(e,t){this.lookAheadFuncsCache[e]=t},e}();function Xt(e,t){!0===isNaN(e.startOffset)?(e.startOffset=t.startOffset,e.endOffset=t.endOffset):e.endOffset<t.endOffset==!0&&(e.endOffset=t.endOffset)}function Kt(e,t){!0===isNaN(e.startOffset)?(e.startOffset=t.startOffset,e.startColumn=t.startColumn,e.startLine=t.startLine,e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine):e.endOffset<t.endOffset==!0&&(e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine)}var Zt,Jt="name";function Qt(e){var t=e.name;return t||"anonymous"}function en(e,t){var n=Object.getOwnPropertyDescriptor(e,Jt);return!(!(0,i.b0)(n)&&!n.configurable)&&(Object.defineProperty(e,Jt,{enumerable:!1,configurable:!0,writable:!1,value:t}),!0)}function tn(e,t){for(var n=(0,i.HP)(e),r=n.length,a=0;a<r;a++)for(var o=e[n[a]],s=o.length,l=0;l<s;l++){var c=o[l];void 0===c.tokenTypeIdx&&this[c.name](c.children,t)}}function nn(e,t){var n=function(){};en(n,e+"BaseSemantics");var r={visit:function(e,t){if((0,i.cy)(e)&&(e=e[0]),!(0,i.b0)(e))return this[e.name](e.children,t)},validateVisitor:function(){var e=function(e,t){var n=function(e,t){var n=(0,i.Tj)(t,(function(t){if(!(0,i.Tn)(e[t]))return{msg:"Missing visitor method: <"+t+"> on "+Qt(e.constructor)+" CST Visitor.",type:Zt.MISSING_METHOD,methodName:t}}));return(0,i.oE)(n)}(e,t),r=function(e,t){var n=[];for(var r in e)!(0,i.Tn)(e[r])||(0,i.gR)(rn,r)||(0,i.gR)(t,r)||n.push({msg:"Redundant visitor method: <"+r+"> on "+Qt(e.constructor)+" CST Visitor\nThere is no Grammar Rule corresponding to this method's name.\n",type:Zt.REDUNDANT_METHOD,methodName:r});return n}(e,t);return n.concat(r)}(this,t);if(!(0,i.Im)(e)){var n=(0,i.Tj)(e,(function(e){return e.msg}));throw Error("Errors Detected in CST Visitor <"+Qt(this.constructor)+">:\n\t"+n.join("\n\n").replace(/\n/g,"\n\t"))}}};return(n.prototype=r).constructor=n,n._RULE_NAMES=t,n}!function(e){e[e.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",e[e.MISSING_METHOD=1]="MISSING_METHOD"}(Zt||(Zt={}));var rn=["constructor","visit","validateVisitor"];var an=function(){function e(){}return e.prototype.initTreeBuilder=function(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=(0,i.zy)(e,"nodeLocationTracking")?e.nodeLocationTracking:Tn.nodeLocationTracking,this.outputCst)if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Kt,this.setNodeLocationFromNode=Kt,this.cstPostRule=i.tE,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=i.tE,this.setNodeLocationFromNode=i.tE,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Xt,this.setNodeLocationFromNode=Xt,this.cstPostRule=i.tE,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=i.tE,this.setNodeLocationFromNode=i.tE,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else{if(!/none/i.test(this.nodeLocationTracking))throw Error('Invalid <nodeLocationTracking> config option: "'+e.nodeLocationTracking+'"');this.setNodeLocationFromToken=i.tE,this.setNodeLocationFromNode=i.tE,this.cstPostRule=i.tE,this.setInitialNodeLocation=i.tE}else this.cstInvocationStateUpdate=i.tE,this.cstFinallyStateUpdate=i.tE,this.cstPostTerminal=i.tE,this.cstPostNonTerminal=i.tE,this.cstPostRule=i.tE},e.prototype.setInitialNodeLocationOnlyOffsetRecovery=function(e){e.location={startOffset:NaN,endOffset:NaN}},e.prototype.setInitialNodeLocationOnlyOffsetRegular=function(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}},e.prototype.setInitialNodeLocationFullRecovery=function(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}},e.prototype.setInitialNodeLocationFullRegular=function(e){var t=this.LA(1);e.location={startOffset:t.startOffset,startLine:t.startLine,startColumn:t.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}},e.prototype.cstInvocationStateUpdate=function(e,t){var n={name:e,children:{}};this.setInitialNodeLocation(n),this.CST_STACK.push(n)},e.prototype.cstFinallyStateUpdate=function(){this.CST_STACK.pop()},e.prototype.cstPostRuleFull=function(e){var t=this.LA(0),n=e.location;n.startOffset<=t.startOffset==!0?(n.endOffset=t.endOffset,n.endLine=t.endLine,n.endColumn=t.endColumn):(n.startOffset=NaN,n.startLine=NaN,n.startColumn=NaN)},e.prototype.cstPostRuleOnlyOffset=function(e){var t=this.LA(0),n=e.location;n.startOffset<=t.startOffset==!0?n.endOffset=t.endOffset:n.startOffset=NaN},e.prototype.cstPostTerminal=function(e,t){var n,r,i,a=this.CST_STACK[this.CST_STACK.length-1];r=t,i=e,void 0===(n=a).children[i]?n.children[i]=[r]:n.children[i].push(r),this.setNodeLocationFromToken(a.location,t)},e.prototype.cstPostNonTerminal=function(e,t){var n=this.CST_STACK[this.CST_STACK.length-1];!function(e,t,n){void 0===e.children[t]?e.children[t]=[n]:e.children[t].push(n)}(n,t,e),this.setNodeLocationFromNode(n.location,e.location)},e.prototype.getBaseCstVisitorConstructor=function(){if((0,i.b0)(this.baseCstVisitorConstructor)){var e=nn(this.className,(0,i.HP)(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor},e.prototype.getBaseCstVisitorConstructorWithDefaults=function(){if((0,i.b0)(this.baseCstVisitorWithDefaultsConstructor)){var e=function(e,t,n){var r=function(){};en(r,e+"BaseSemanticsWithDefaults");var a=Object.create(n.prototype);return(0,i.jJ)(t,(function(e){a[e]=tn})),(r.prototype=a).constructor=r,r}(this.className,(0,i.HP)(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor},e.prototype.getLastExplicitRuleShortName=function(){var e=this.RULE_STACK;return e[e.length-1]},e.prototype.getPreviousExplicitRuleShortName=function(){var e=this.RULE_STACK;return e[e.length-2]},e.prototype.getLastExplicitRuleOccurrenceIndex=function(){var e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]},e}(),on=function(){function e(){}return e.prototype.initLexerAdapter=function(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1},Object.defineProperty(e.prototype,"input",{get:function(){return this.tokVector},set:function(e){if(!0!==this.selfAnalysisDone)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length},enumerable:!1,configurable:!0}),e.prototype.SKIP_TOKEN=function(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):kn},e.prototype.LA=function(e){var t=this.currIdx+e;return t<0||this.tokVectorLength<=t?kn:this.tokVector[t]},e.prototype.consumeToken=function(){this.currIdx++},e.prototype.exportLexerState=function(){return this.currIdx},e.prototype.importLexerState=function(e){this.currIdx=e},e.prototype.resetLexerState=function(){this.currIdx=-1},e.prototype.moveToTerminatedState=function(){this.currIdx=this.tokVector.length-1},e.prototype.getLexerPosition=function(){return this.exportLexerState()},e}(),sn=function(){function e(){}return e.prototype.ACTION=function(e){return e.call(this)},e.prototype.consume=function(e,t,n){return this.consumeInternal(t,e,n)},e.prototype.subrule=function(e,t,n){return this.subruleInternal(t,e,n)},e.prototype.option=function(e,t){return this.optionInternal(t,e)},e.prototype.or=function(e,t){return this.orInternal(t,e)},e.prototype.many=function(e,t){return this.manyInternal(e,t)},e.prototype.atLeastOne=function(e,t){return this.atLeastOneInternal(e,t)},e.prototype.CONSUME=function(e,t){return this.consumeInternal(e,0,t)},e.prototype.CONSUME1=function(e,t){return this.consumeInternal(e,1,t)},e.prototype.CONSUME2=function(e,t){return this.consumeInternal(e,2,t)},e.prototype.CONSUME3=function(e,t){return this.consumeInternal(e,3,t)},e.prototype.CONSUME4=function(e,t){return this.consumeInternal(e,4,t)},e.prototype.CONSUME5=function(e,t){return this.consumeInternal(e,5,t)},e.prototype.CONSUME6=function(e,t){return this.consumeInternal(e,6,t)},e.prototype.CONSUME7=function(e,t){return this.consumeInternal(e,7,t)},e.prototype.CONSUME8=function(e,t){return this.consumeInternal(e,8,t)},e.prototype.CONSUME9=function(e,t){return this.consumeInternal(e,9,t)},e.prototype.SUBRULE=function(e,t){return this.subruleInternal(e,0,t)},e.prototype.SUBRULE1=function(e,t){return this.subruleInternal(e,1,t)},e.prototype.SUBRULE2=function(e,t){return this.subruleInternal(e,2,t)},e.prototype.SUBRULE3=function(e,t){return this.subruleInternal(e,3,t)},e.prototype.SUBRULE4=function(e,t){return this.subruleInternal(e,4,t)},e.prototype.SUBRULE5=function(e,t){return this.subruleInternal(e,5,t)},e.prototype.SUBRULE6=function(e,t){return this.subruleInternal(e,6,t)},e.prototype.SUBRULE7=function(e,t){return this.subruleInternal(e,7,t)},e.prototype.SUBRULE8=function(e,t){return this.subruleInternal(e,8,t)},e.prototype.SUBRULE9=function(e,t){return this.subruleInternal(e,9,t)},e.prototype.OPTION=function(e){return this.optionInternal(e,0)},e.prototype.OPTION1=function(e){return this.optionInternal(e,1)},e.prototype.OPTION2=function(e){return this.optionInternal(e,2)},e.prototype.OPTION3=function(e){return this.optionInternal(e,3)},e.prototype.OPTION4=function(e){return this.optionInternal(e,4)},e.prototype.OPTION5=function(e){return this.optionInternal(e,5)},e.prototype.OPTION6=function(e){return this.optionInternal(e,6)},e.prototype.OPTION7=function(e){return this.optionInternal(e,7)},e.prototype.OPTION8=function(e){return this.optionInternal(e,8)},e.prototype.OPTION9=function(e){return this.optionInternal(e,9)},e.prototype.OR=function(e){return this.orInternal(e,0)},e.prototype.OR1=function(e){return this.orInternal(e,1)},e.prototype.OR2=function(e){return this.orInternal(e,2)},e.prototype.OR3=function(e){return this.orInternal(e,3)},e.prototype.OR4=function(e){return this.orInternal(e,4)},e.prototype.OR5=function(e){return this.orInternal(e,5)},e.prototype.OR6=function(e){return this.orInternal(e,6)},e.prototype.OR7=function(e){return this.orInternal(e,7)},e.prototype.OR8=function(e){return this.orInternal(e,8)},e.prototype.OR9=function(e){return this.orInternal(e,9)},e.prototype.MANY=function(e){this.manyInternal(0,e)},e.prototype.MANY1=function(e){this.manyInternal(1,e)},e.prototype.MANY2=function(e){this.manyInternal(2,e)},e.prototype.MANY3=function(e){this.manyInternal(3,e)},e.prototype.MANY4=function(e){this.manyInternal(4,e)},e.prototype.MANY5=function(e){this.manyInternal(5,e)},e.prototype.MANY6=function(e){this.manyInternal(6,e)},e.prototype.MANY7=function(e){this.manyInternal(7,e)},e.prototype.MANY8=function(e){this.manyInternal(8,e)},e.prototype.MANY9=function(e){this.manyInternal(9,e)},e.prototype.MANY_SEP=function(e){this.manySepFirstInternal(0,e)},e.prototype.MANY_SEP1=function(e){this.manySepFirstInternal(1,e)},e.prototype.MANY_SEP2=function(e){this.manySepFirstInternal(2,e)},e.prototype.MANY_SEP3=function(e){this.manySepFirstInternal(3,e)},e.prototype.MANY_SEP4=function(e){this.manySepFirstInternal(4,e)},e.prototype.MANY_SEP5=function(e){this.manySepFirstInternal(5,e)},e.prototype.MANY_SEP6=function(e){this.manySepFirstInternal(6,e)},e.prototype.MANY_SEP7=function(e){this.manySepFirstInternal(7,e)},e.prototype.MANY_SEP8=function(e){this.manySepFirstInternal(8,e)},e.prototype.MANY_SEP9=function(e){this.manySepFirstInternal(9,e)},e.prototype.AT_LEAST_ONE=function(e){this.atLeastOneInternal(0,e)},e.prototype.AT_LEAST_ONE1=function(e){return this.atLeastOneInternal(1,e)},e.prototype.AT_LEAST_ONE2=function(e){this.atLeastOneInternal(2,e)},e.prototype.AT_LEAST_ONE3=function(e){this.atLeastOneInternal(3,e)},e.prototype.AT_LEAST_ONE4=function(e){this.atLeastOneInternal(4,e)},e.prototype.AT_LEAST_ONE5=function(e){this.atLeastOneInternal(5,e)},e.prototype.AT_LEAST_ONE6=function(e){this.atLeastOneInternal(6,e)},e.prototype.AT_LEAST_ONE7=function(e){this.atLeastOneInternal(7,e)},e.prototype.AT_LEAST_ONE8=function(e){this.atLeastOneInternal(8,e)},e.prototype.AT_LEAST_ONE9=function(e){this.atLeastOneInternal(9,e)},e.prototype.AT_LEAST_ONE_SEP=function(e){this.atLeastOneSepFirstInternal(0,e)},e.prototype.AT_LEAST_ONE_SEP1=function(e){this.atLeastOneSepFirstInternal(1,e)},e.prototype.AT_LEAST_ONE_SEP2=function(e){this.atLeastOneSepFirstInternal(2,e)},e.prototype.AT_LEAST_ONE_SEP3=function(e){this.atLeastOneSepFirstInternal(3,e)},e.prototype.AT_LEAST_ONE_SEP4=function(e){this.atLeastOneSepFirstInternal(4,e)},e.prototype.AT_LEAST_ONE_SEP5=function(e){this.atLeastOneSepFirstInternal(5,e)},e.prototype.AT_LEAST_ONE_SEP6=function(e){this.atLeastOneSepFirstInternal(6,e)},e.prototype.AT_LEAST_ONE_SEP7=function(e){this.atLeastOneSepFirstInternal(7,e)},e.prototype.AT_LEAST_ONE_SEP8=function(e){this.atLeastOneSepFirstInternal(8,e)},e.prototype.AT_LEAST_ONE_SEP9=function(e){this.atLeastOneSepFirstInternal(9,e)},e.prototype.RULE=function(e,t,n){if(void 0===n&&(n=Mn),(0,i.gR)(this.definedRulesNames,e)){var r={message:He.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:En.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(r)}this.definedRulesNames.push(e);var a=this.defineRule(e,t,n);return this[e]=a,a},e.prototype.OVERRIDE_RULE=function(e,t,n){void 0===n&&(n=Mn);var r,a,o,s,l,c=[];c=c.concat((r=e,a=this.definedRulesNames,o=this.className,l=[],i.gR(a,r)||(s="Invalid rule override, rule: ->"+r+"<- cannot be overridden in the grammar: ->"+o+"<-as it is not defined in any of the super grammars ",l.push({message:s,type:En.INVALID_RULE_OVERRIDE,ruleName:r})),l)),this.definitionErrors.push.apply(this.definitionErrors,c);var u=this.defineRule(e,t,n);return this[e]=u,u},e.prototype.BACKTRACK=function(e,t){return function(){this.isBackTrackingStack.push(1);var n=this.saveRecogState();try{return e.apply(this,t),!0}catch(e){if(Lt(e))return!1;throw e}finally{this.reloadRecogState(n),this.isBackTrackingStack.pop()}}},e.prototype.getGAstProductions=function(){return this.gastProductionsCache},e.prototype.getSerializedGastProductions=function(){return Se((0,i.zu)(this.gastProductionsCache))},e}(),ln=function(){function e(){}return e.prototype.initRecognizerEngine=function(e,t){if(this.className=Qt(this.constructor),this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=$,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},(0,i.zy)(t,"serializedGrammar"))throw Error("The Parser's configuration can no longer contain a <serializedGrammar> property.\n\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0\n\tFor Further details.");if((0,i.cy)(e)){if((0,i.Im)(e))throw Error("A Token Vocabulary cannot be empty.\n\tNote that the first argument for the parser constructor\n\tis no longer a Token vector (since v4.0).");if("number"==typeof e[0].startOffset)throw Error("The Parser constructor no longer accepts a token vector as the first argument.\n\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0\n\tFor Further details.")}if((0,i.cy)(e))this.tokensMap=(0,i.TS)(e,(function(e,t){return e[t.name]=t,e}),{});else if((0,i.zy)(e,"modes")&&(0,i.Si)((0,i.Bq)((0,i.zu)(e.modes)),X)){var n=(0,i.Bq)((0,i.zu)(e.modes)),r=(0,i.sb)(n);this.tokensMap=(0,i.TS)(r,(function(e,t){return e[t.name]=t,e}),{})}else{if(!(0,i.Gv)(e))throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap=(0,i.lR)(e)}this.tokensMap.EOF=he;var a=(0,i.Si)((0,i.zu)(e),(function(e){return(0,i.Im)(e.categoryMatches)}));this.tokenMatcher=a?$:U,V((0,i.zu)(this.tokensMap))},e.prototype.defineRule=function(e,t,n){if(this.selfAnalysisDone)throw Error("Grammar rule <"+e+"> may not be defined after the 'performSelfAnalysis' method has been called'\nMake sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.");var r,a=(0,i.zy)(n,"resyncEnabled")?n.resyncEnabled:Mn.resyncEnabled,o=(0,i.zy)(n,"recoveryValueFunc")?n.recoveryValueFunc:Mn.recoveryValueFunc,s=this.ruleShortNameIdx<<12;function l(e){try{if(!0===this.outputCst){t.apply(this,e);var n=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(n),n}return t.apply(this,e)}catch(e){return this.invokeRuleCatch(e,a,o)}finally{this.ruleFinallyStateUpdate()}}this.ruleShortNameIdx++,this.shortRuleNameToFull[s]=e,this.fullRuleNameToShort[e]=s;return(r=function(t,n){return void 0===t&&(t=0),this.ruleInvocationStateUpdate(s,e,t),l.call(this,n)}).ruleName=e,r.originalGrammarAction=t,r},e.prototype.invokeRuleCatch=function(e,t,n){var r=1===this.RULE_STACK.length,i=t&&!this.isBackTracking()&&this.recoveryEnabled;if(Lt(e)){var a=e;if(i){var o,s=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(s))return a.resyncedTokens=this.reSyncTo(s),this.outputCst?((o=this.CST_STACK[this.CST_STACK.length-1]).recoveredNode=!0,o):n();throw this.outputCst&&((o=this.CST_STACK[this.CST_STACK.length-1]).recoveredNode=!0,a.partialCstResult=o),a}if(r)return this.moveToTerminatedState(),n();throw a}throw e},e.prototype.optionInternal=function(e,t){var n=this.getKeyForAutomaticLookahead(512,t);return this.optionInternalLogic(e,t,n)},e.prototype.optionInternalLogic=function(e,t,n){var r,i,a=this,o=this.getLaFuncFromCache(n);if(void 0!==e.DEF){if(r=e.DEF,void 0!==(i=e.GATE)){var s=o;o=function(){return i.call(a)&&s.call(a)}}}else r=e;if(!0===o.call(this))return r.call(this)},e.prototype.atLeastOneInternal=function(e,t){var n=this.getKeyForAutomaticLookahead(Ht,e);return this.atLeastOneInternalLogic(e,t,n)},e.prototype.atLeastOneInternalLogic=function(e,t,n){var r,i,a=this,o=this.getLaFuncFromCache(n);if(void 0!==t.DEF){if(r=t.DEF,void 0!==(i=t.GATE)){var s=o;o=function(){return i.call(a)&&s.call(a)}}}else r=t;if(!0!==o.call(this))throw this.raiseEarlyExitException(e,rt.REPETITION_MANDATORY,t.ERR_MSG);for(var l=this.doSingleRepetition(r);!0===o.call(this)&&!0===l;)l=this.doSingleRepetition(r);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,t],o,Ht,e,Je)},e.prototype.atLeastOneSepFirstInternal=function(e,t){var n=this.getKeyForAutomaticLookahead(Wt,e);this.atLeastOneSepFirstInternalLogic(e,t,n)},e.prototype.atLeastOneSepFirstInternalLogic=function(e,t,n){var r=this,i=t.DEF,a=t.SEP;if(!0!==this.getLaFuncFromCache(n).call(this))throw this.raiseEarlyExitException(e,rt.REPETITION_MANDATORY_WITH_SEPARATOR,t.ERR_MSG);i.call(this);for(var o=function(){return r.tokenMatcher(r.LA(1),a)};!0===this.tokenMatcher(this.LA(1),a);)this.CONSUME(a),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,a,o,i,Qe],o,Wt,e,Qe)},e.prototype.manyInternal=function(e,t){var n=this.getKeyForAutomaticLookahead(768,e);return this.manyInternalLogic(e,t,n)},e.prototype.manyInternalLogic=function(e,t,n){var r,i,a=this,o=this.getLaFuncFromCache(n);if(void 0!==t.DEF){if(r=t.DEF,void 0!==(i=t.GATE)){var s=o;o=function(){return i.call(a)&&s.call(a)}}}else r=t;for(var l=!0;!0===o.call(this)&&!0===l;)l=this.doSingleRepetition(r);this.attemptInRepetitionRecovery(this.manyInternal,[e,t],o,768,e,Ke,l)},e.prototype.manySepFirstInternal=function(e,t){var n=this.getKeyForAutomaticLookahead(Vt,e);this.manySepFirstInternalLogic(e,t,n)},e.prototype.manySepFirstInternalLogic=function(e,t,n){var r=this,i=t.DEF,a=t.SEP;if(!0===this.getLaFuncFromCache(n).call(this)){i.call(this);for(var o=function(){return r.tokenMatcher(r.LA(1),a)};!0===this.tokenMatcher(this.LA(1),a);)this.CONSUME(a),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,a,o,i,Ze],o,Vt,e,Ze)}},e.prototype.repetitionSepSecondInternal=function(e,t,n,r,i){for(;n();)this.CONSUME(t),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,t,n,r,i],n,Wt,e,i)},e.prototype.doSingleRepetition=function(e){var t=this.getLexerPosition();return e.call(this),this.getLexerPosition()>t},e.prototype.orInternal=function(e,t){var n=this.getKeyForAutomaticLookahead(256,t),r=(0,i.cy)(e)?e:e.DEF,a=this.getLaFuncFromCache(n).call(this,r);if(void 0!==a)return r[a].ALT.call(this);this.raiseNoAltException(t,e.ERR_MSG)},e.prototype.ruleFinallyStateUpdate=function(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),0===this.RULE_STACK.length&&!1===this.isAtEndOfInput()){var e=this.LA(1),t=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new Ft(t,e))}},e.prototype.subruleInternal=function(e,t,n){var r;try{var i=void 0!==n?n.ARGS:void 0;return r=e.call(this,t,i),this.cstPostNonTerminal(r,void 0!==n&&void 0!==n.LABEL?n.LABEL:e.ruleName),r}catch(t){this.subruleInternalError(t,n,e.ruleName)}},e.prototype.subruleInternalError=function(e,t,n){throw Lt(e)&&void 0!==e.partialCstResult&&(this.cstPostNonTerminal(e.partialCstResult,void 0!==t&&void 0!==t.LABEL?t.LABEL:n),delete e.partialCstResult),e},e.prototype.consumeInternal=function(e,t,n){var r;try{var i=this.LA(1);!0===this.tokenMatcher(i,e)?(this.consumeToken(),r=i):this.consumeInternalError(e,i,n)}catch(n){r=this.consumeInternalRecovery(e,t,n)}return this.cstPostTerminal(void 0!==n&&void 0!==n.LABEL?n.LABEL:e.name,r),r},e.prototype.consumeInternalError=function(e,t,n){var r,i=this.LA(0);throw r=void 0!==n&&n.ERR_MSG?n.ERR_MSG:this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:t,previous:i,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new Pt(r,t,i))},e.prototype.consumeInternalRecovery=function(e,t,n){if(!this.recoveryEnabled||"MismatchedTokenException"!==n.name||this.isBackTracking())throw n;var r=this.getFollowsForInRuleRecovery(e,t);try{return this.tryInRuleRecovery(e,r)}catch(e){throw e.name===Bt?n:e}},e.prototype.saveRecogState=function(){var e=this.errors,t=(0,i.T9)(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:t,CST_STACK:this.CST_STACK}},e.prototype.reloadRecogState=function(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK},e.prototype.ruleInvocationStateUpdate=function(e,t,n){this.RULE_OCCURRENCE_STACK.push(n),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(t,e)},e.prototype.isBackTracking=function(){return 0!==this.isBackTrackingStack.length},e.prototype.getCurrRuleFullName=function(){var e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]},e.prototype.shortRuleNameToFullName=function(e){return this.shortRuleNameToFull[e]},e.prototype.isAtEndOfInput=function(){return this.tokenMatcher(this.LA(1),he)},e.prototype.reset=function(){this.resetLexerState(),this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]},e}(),cn=function(){function e(){}return e.prototype.initErrorHandler=function(e){this._errors=[],this.errorMessageProvider=(0,i.zy)(e,"errorMessageProvider")?e.errorMessageProvider:Tn.errorMessageProvider},e.prototype.SAVE_ERROR=function(e){if(Lt(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:(0,i.T9)(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")},Object.defineProperty(e.prototype,"errors",{get:function(){return(0,i.T9)(this._errors)},set:function(e){this._errors=e},enumerable:!1,configurable:!0}),e.prototype.raiseEarlyExitException=function(e,t,n){for(var r=this.getCurrRuleFullName(),i=dt(e,this.getGAstProductions()[r],t,this.maxLookahead)[0],a=[],o=1;o<=this.maxLookahead;o++)a.push(this.LA(o));var s=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:i,actual:a,previous:this.LA(0),customUserDescription:n,ruleName:r});throw this.SAVE_ERROR(new zt(s,this.LA(1),this.LA(0)))},e.prototype.raiseNoAltException=function(e,t){for(var n=this.getCurrRuleFullName(),r=ft(e,this.getGAstProductions()[n],this.maxLookahead),i=[],a=1;a<=this.maxLookahead;a++)i.push(this.LA(a));var o=this.LA(0),s=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:r,actual:i,previous:o,customUserDescription:t,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new It(s,this.LA(1),o))},e}(),un=function(){function e(){}return e.prototype.initContentAssist=function(){},e.prototype.computeContentAssist=function(e,t){var n=this.gastProductionsCache[e];if((0,i.b0)(n))throw Error("Rule ->"+e+"<- does not exist in this grammar.");return tt([n],t,this.tokenMatcher,this.maxLookahead)},e.prototype.getNextPossibleTokenTypes=function(e){var t=(0,i.$1)(e.ruleStack),n=this.getGAstProductions()[t];return new Ye(n,e).startWalking()},e}(),fn={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(fn);var dn=!0,hn=Math.pow(2,8)-1,pn=de({name:"RECORDING_PHASE_TOKEN",pattern:Q.NA});V([pn]);var mn=pe(pn,"This IToken indicates the Parser is in Recording Phase\n\tSee: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",-1,-1,-1,-1,-1,-1);Object.freeze(mn);var gn={name:"This CSTNode indicates the Parser is in Recording Phase\n\tSee: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",children:{}},vn=function(){function e(){}return e.prototype.initGastRecorder=function(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1},e.prototype.enableRecording=function(){var e=this;this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",(function(){for(var t=function(t){var n=t>0?t:"";e["CONSUME"+n]=function(e,n){return this.consumeInternalRecord(e,t,n)},e["SUBRULE"+n]=function(e,n){return this.subruleInternalRecord(e,t,n)},e["OPTION"+n]=function(e){return this.optionInternalRecord(e,t)},e["OR"+n]=function(e){return this.orInternalRecord(e,t)},e["MANY"+n]=function(e){this.manyInternalRecord(t,e)},e["MANY_SEP"+n]=function(e){this.manySepFirstInternalRecord(t,e)},e["AT_LEAST_ONE"+n]=function(e){this.atLeastOneInternalRecord(t,e)},e["AT_LEAST_ONE_SEP"+n]=function(e){this.atLeastOneSepFirstInternalRecord(t,e)}},n=0;n<10;n++)t(n);e.consume=function(e,t,n){return this.consumeInternalRecord(t,e,n)},e.subrule=function(e,t,n){return this.subruleInternalRecord(t,e,n)},e.option=function(e,t){return this.optionInternalRecord(t,e)},e.or=function(e,t){return this.orInternalRecord(t,e)},e.many=function(e,t){this.manyInternalRecord(e,t)},e.atLeastOne=function(e,t){this.atLeastOneInternalRecord(e,t)},e.ACTION=e.ACTION_RECORD,e.BACKTRACK=e.BACKTRACK_RECORD,e.LA=e.LA_RECORD}))},e.prototype.disableRecording=function(){var e=this;this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",(function(){for(var t=0;t<10;t++){var n=t>0?t:"";delete e["CONSUME"+n],delete e["SUBRULE"+n],delete e["OPTION"+n],delete e["OR"+n],delete e["MANY"+n],delete e["MANY_SEP"+n],delete e["AT_LEAST_ONE"+n],delete e["AT_LEAST_ONE_SEP"+n]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA}))},e.prototype.ACTION_RECORD=function(e){},e.prototype.BACKTRACK_RECORD=function(e,t){return function(){return!0}},e.prototype.LA_RECORD=function(e){return kn},e.prototype.topLevelRuleRecord=function(e,t){try{var n=new be({definition:[],name:e});return n.name=e,this.recordingProdStack.push(n),t.call(this),this.recordingProdStack.pop(),n}catch(e){if(!0!==e.KNOWN_RECORDER_ERROR)try{e.message=e.message+'\n\t This error was thrown during the "grammar recording phase" For more info see:\n\thttps://chevrotain.io/docs/guide/internals.html#grammar-recording'}catch(t){throw e}throw e}},e.prototype.optionInternalRecord=function(e,t){return yn.call(this,_e,e,t)},e.prototype.atLeastOneInternalRecord=function(e,t){yn.call(this,we,t,e)},e.prototype.atLeastOneSepFirstInternalRecord=function(e,t){yn.call(this,Ae,t,e,dn)},e.prototype.manyInternalRecord=function(e,t){yn.call(this,ke,t,e)},e.prototype.manySepFirstInternalRecord=function(e,t){yn.call(this,Ee,t,e,dn)},e.prototype.orInternalRecord=function(e,t){return bn.call(this,e,t)},e.prototype.subruleInternalRecord=function(e,t,n){if(_n(t),!e||!1===(0,i.zy)(e,"ruleName")){var r=new Error("<SUBRULE"+xn(t)+"> argument is invalid expecting a Parser method reference but got: <"+JSON.stringify(e)+">\n inside top level rule: <"+this.recordingProdStack[0].name+">");throw r.KNOWN_RECORDER_ERROR=!0,r}var a=(0,i.se)(this.recordingProdStack),o=e.ruleName,s=new ye({idx:t,nonTerminalName:o,referencedRule:void 0});return a.definition.push(s),this.outputCst?gn:fn},e.prototype.consumeInternalRecord=function(e,t,n){if(_n(t),!G(e)){var r=new Error("<CONSUME"+xn(t)+"> argument is invalid expecting a TokenType reference but got: <"+JSON.stringify(e)+">\n inside top level rule: <"+this.recordingProdStack[0].name+">");throw r.KNOWN_RECORDER_ERROR=!0,r}var a=(0,i.se)(this.recordingProdStack),o=new Me({idx:t,terminalType:e});return a.definition.push(o),mn},e}();function yn(e,t,n,r){void 0===r&&(r=!1),_n(n);var a=(0,i.se)(this.recordingProdStack),o=(0,i.Tn)(t)?t:t.DEF,s=new e({definition:[],idx:n});return r&&(s.separator=t.SEP),(0,i.zy)(t,"MAX_LOOKAHEAD")&&(s.maxLookahead=t.MAX_LOOKAHEAD),this.recordingProdStack.push(s),o.call(this),a.definition.push(s),this.recordingProdStack.pop(),fn}function bn(e,t){var n=this;_n(t);var r=(0,i.se)(this.recordingProdStack),a=!1===(0,i.cy)(e),o=!1===a?e:e.DEF,s=new Te({definition:[],idx:t,ignoreAmbiguities:a&&!0===e.IGNORE_AMBIGUITIES});(0,i.zy)(e,"MAX_LOOKAHEAD")&&(s.maxLookahead=e.MAX_LOOKAHEAD);var l=(0,i.zN)(o,(function(e){return(0,i.Tn)(e.GATE)}));return s.hasPredicates=l,r.definition.push(s),(0,i.jJ)(o,(function(e){var t=new xe({definition:[]});s.definition.push(t),(0,i.zy)(e,"IGNORE_AMBIGUITIES")?t.ignoreAmbiguities=e.IGNORE_AMBIGUITIES:(0,i.zy)(e,"GATE")&&(t.ignoreAmbiguities=!0),n.recordingProdStack.push(t),e.ALT.call(n),n.recordingProdStack.pop()})),fn}function xn(e){return 0===e?"":""+e}function _n(e){if(e<0||e>hn){var t=new Error("Invalid DSL Method idx value: <"+e+">\n\tIdx value must be a none negative value smaller than "+(hn+1));throw t.KNOWN_RECORDER_ERROR=!0,t}}var wn=function(){function e(){}return e.prototype.initPerformanceTracer=function(e){if((0,i.zy)(e,"traceInitPerf")){var t=e.traceInitPerf,n="number"==typeof t;this.traceInitMaxIdent=n?t:1/0,this.traceInitPerf=n?t>0:t}else this.traceInitMaxIdent=0,this.traceInitPerf=Tn.traceInitPerf;this.traceInitIndent=-1},e.prototype.TRACE_INIT=function(e,t){if(!0===this.traceInitPerf){this.traceInitIndent++;var n=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(n+"--\x3e <"+e+">");var r=(0,i.O1)(t),a=r.time,o=r.value,s=a>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&s(n+"<-- <"+e+"> time: "+a+"ms"),this.traceInitIndent--,o}return t()},e}(),An=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kn=pe(he,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(kn);var En,Tn=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:$e,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),Mn=Object.freeze({recoveryValueFunc:function(){},resyncEnabled:!0});function Sn(e){return void 0===e&&(e=void 0),function(){return e}}!function(e){e[e.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",e[e.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",e[e.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",e[e.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",e[e.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",e[e.LEFT_RECURSION=5]="LEFT_RECURSION",e[e.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",e[e.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",e[e.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",e[e.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",e[e.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",e[e.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",e[e.TOO_MANY_ALTS=12]="TOO_MANY_ALTS"}(En||(En={}));var Cn=function(){function e(e,t){this.definitionErrors=[],this.selfAnalysisDone=!1;var n=this;if(n.initErrorHandler(t),n.initLexerAdapter(),n.initLooksAhead(t),n.initRecognizerEngine(e,t),n.initRecoverable(t),n.initTreeBuilder(t),n.initContentAssist(),n.initGastRecorder(t),n.initPerformanceTracer(t),(0,i.zy)(t,"ignoredIssues"))throw new Error("The <ignoredIssues> IParserConfig property has been deprecated.\n\tPlease use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.\n\tSee: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES\n\tFor further details.");this.skipValidations=(0,i.zy)(t,"skipValidations")?t.skipValidations:Tn.skipValidations}return e.performSelfAnalysis=function(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.\t\nUse the **instance** method with the same name instead.")},e.prototype.performSelfAnalysis=function(){var t=this;this.TRACE_INIT("performSelfAnalysis",(function(){var n;t.selfAnalysisDone=!0;var r=t.className;t.TRACE_INIT("toFastProps",(function(){(0,i.Bl)(t)})),t.TRACE_INIT("Grammar Recording",(function(){try{t.enableRecording(),(0,i.jJ)(t.definedRulesNames,(function(e){var n=t[e].originalGrammarAction,r=void 0;t.TRACE_INIT(e+" Rule",(function(){r=t.topLevelRuleRecord(e,n)})),t.gastProductionsCache[e]=r}))}finally{t.disableRecording()}}));var a=[];if(t.TRACE_INIT("Grammar Resolving",(function(){a=kt({rules:(0,i.zu)(t.gastProductionsCache)}),t.definitionErrors.push.apply(t.definitionErrors,a)})),t.TRACE_INIT("Grammar Validations",(function(){if((0,i.Im)(a)&&!1===t.skipValidations){var e=Et({rules:(0,i.zu)(t.gastProductionsCache),maxLookahead:t.maxLookahead,tokenTypes:(0,i.zu)(t.tokensMap),errMsgProvider:He,grammarName:r});t.definitionErrors.push.apply(t.definitionErrors,e)}})),(0,i.Im)(t.definitionErrors)&&(t.recoveryEnabled&&t.TRACE_INIT("computeAllProdsFollows",(function(){var e,n,r=(e=(0,i.zu)(t.gastProductionsCache),n={},(0,i.jJ)(e,(function(e){var t=new Ue(e).startWalking();(0,i.kp)(n,t)})),n);t.resyncFollows=r})),t.TRACE_INIT("ComputeLookaheadFunctions",(function(){t.preComputeLookaheadFunctions((0,i.zu)(t.gastProductionsCache))}))),!e.DEFER_DEFINITION_ERRORS_HANDLING&&!(0,i.Im)(t.definitionErrors))throw n=(0,i.Tj)(t.definitionErrors,(function(e){return e.message})),new Error("Parser Definition Errors detected:\n "+n.join("\n-------------------------------\n"))}))},e.DEFER_DEFINITION_ERRORS_HANDLING=!1,e}();(0,i.XJ)(Cn,[$t,Yt,an,on,ln,sn,cn,un,vn,wn]);var On=function(e){function t(t,n){void 0===n&&(n=Tn);var r=(0,i.lR)(n);return r.outputCst=!0,e.call(this,t,r)||this}return An(t,e),t}(Cn),Rn=function(e){function t(t,n){void 0===n&&(n=Tn);var r=(0,i.lR)(n);return r.outputCst=!1,e.call(this,t,r)||this}return An(t,e),t}(Cn);function Nn(e,t){var n=void 0===t?{}:t,i=n.resourceBase,a=void 0===i?"https://unpkg.com/chevrotain@"+r+"/diagrams/":i,o=n.css;return'\n\x3c!-- This is a generated file --\x3e\n<!DOCTYPE html>\n<meta charset="utf-8">\n<style>\n  body {\n    background-color: hsl(30, 20%, 95%)\n  }\n</style>\n\n'+("\n<link rel='stylesheet' href='"+(void 0===o?"https://unpkg.com/chevrotain@"+r+"/diagrams/diagrams.css":o)+"'>\n")+("\n<script src='"+a+"vendor/railroad-diagrams.js'><\/script>\n<script src='"+a+"src/diagrams_builder.js'><\/script>\n<script src='"+a+"src/diagrams_behavior.js'><\/script>\n<script src='"+a+"src/main.js'><\/script>\n")+'\n<div id="diagrams" align="center"></div>    \n'+("\n<script>\n    window.serializedGrammar = "+JSON.stringify(e,null,"  ")+";\n<\/script>\n")+'\n<script>\n    var diagramsDiv = document.getElementById("diagrams");\n    main.drawDiagramsFromSerializedGrammar(serializedGrammar, diagramsDiv);\n<\/script>\n'}var Ln="\n";function Dn(e){var t;return"\nfunction "+e.name+"(tokenVocabulary, config) {\n    // invoke super constructor\n    // No support for embedded actions currently, so we can 'hardcode'\n    // The use of CstParser.\n    chevrotain.CstParser.call(this, tokenVocabulary, config)\n\n    const $ = this\n\n    "+(t=e.rules,(0,i.Tj)(t,(function(e){return function(e,t){var n=Bn(t,'$.RULE("'+e.name+'", function() {')+Ln;return n+=jn(e.definition,t+1),n+=Bn(t+1,"})")+Ln}(e,1)})).join("\n")+"\n\n    // very important to call this after all the rules have been defined.\n    // otherwise the parser may not work correctly as it will lack information\n    // derived during the self analysis phase.\n    this.performSelfAnalysis(this)\n}\n\n// inheritance as implemented in javascript in the previous decade... :(\n")+e.name+".prototype = Object.create(chevrotain.CstParser.prototype)\n"+e.name+".prototype.constructor = "+e.name+"    \n    "}function Pn(e,t){var n=Bn(t,"$.OR"+e.idx+"([")+Ln,r=(0,i.Tj)(e.definition,(function(e){return function(e,t){var n=Bn(t,"{")+Ln;return n+=Bn(t+1,"ALT: function() {")+Ln,n+=jn(e.definition,t+1),n+=Bn(t+1,"}")+Ln,n+=Bn(t,"}"),n}(e,t+1)}));return n+=r.join(","+Ln),n+=Ln+Bn(t,"])"+Ln)}function In(e,t){if(e instanceof ye)return function(e,t){return Bn(t,"$.SUBRULE"+e.idx+"($."+e.nonTerminalName+")"+Ln)}(e,t);if(e instanceof _e)return Fn("OPTION",e,t);if(e instanceof we)return Fn("AT_LEAST_ONE",e,t);if(e instanceof Ae)return Fn("AT_LEAST_ONE_SEP",e,t);if(e instanceof Ee)return Fn("MANY_SEP",e,t);if(e instanceof ke)return Fn("MANY",e,t);if(e instanceof Te)return Pn(e,t);if(e instanceof Me)return function(e,t){var n=e.terminalType.name;return Bn(t,"$.CONSUME"+e.idx+"(this.tokensMap."+n+")"+Ln)}(e,t);if(e instanceof xe)return jn(e.definition,t);throw Error("non exhaustive match")}function Fn(e,t,n){var r=Bn(n,"$."+(e+t.idx)+"(");return t.separator?(r+="{"+Ln,r+=Bn(n+1,"SEP: this.tokensMap."+t.separator.name)+","+Ln,r+="DEF: "+zn(t.definition,n+2)+Ln,r+=Bn(n,"}")+Ln):r+=zn(t.definition,n+1),r+=Bn(n,")")+Ln}function zn(e,t){var n="function() {"+Ln;return n+=jn(e,t),n+=Bn(t,"}")+Ln}function jn(e,t){var n="";return(0,i.jJ)(e,(function(e){n+=In(e,t+1)})),n}function Bn(e,t){return Array(4*e+1).join(" ")+t}function Un(e){var t=function(e){return"    \n"+Dn(e)+"\nreturn new "+e.name+"(tokenVocabulary, config)    \n"}({name:e.name,rules:e.rules}),r=new Function("tokenVocabulary","config","chevrotain",t);return function(t){return r(e.tokenVocabulary,t,n(1))}}function $n(e){return function(e){return"\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(['chevrotain'], factory);\n    } else if (typeof module === 'object' && module.exports) {\n        // Node. Does not work with strict CommonJS, but\n        // only CommonJS-like environments that support module.exports,\n        // like Node.\n        module.exports = factory(require('chevrotain'));\n    } else {\n        // Browser globals (root is window)\n        root.returnExports = factory(root.b);\n    }\n}(typeof self !== 'undefined' ? self : this, function (chevrotain) {\n\n"+Dn(e)+"\n    \nreturn {\n    "+e.name+": "+e.name+" \n}\n}));\n"}({name:e.name,rules:e.rules})}function qn(){console.warn("The clearCache function was 'soft' removed from the Chevrotain API.\n\t It performs no action other than printing this message.\n\t Please avoid using it as it will be completely removed in the future")}var Hn=function(){throw new Error("The Parser class has been deprecated, use CstParser or EmbeddedActionsParser instead.\t\nSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_7-0-0")}},71040:(e,t,n)=>{"use strict";function r(e){return e&&0===e.length}function i(e){return null==e?[]:Object.keys(e)}function a(e){for(var t=[],n=Object.keys(e),r=0;r<n.length;r++)t.push(e[n[r]]);return t}function o(e,t){for(var n=[],r=i(e),a=0;a<r.length;a++){var o=r[a];n.push(t.call(null,e[o],o))}return n}function s(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t.call(null,e[r],r));return n}function l(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];Array.isArray(r)?t=t.concat(l(r)):t.push(r)}return t}function c(e){return r(e)?void 0:e[0]}function u(e){var t=e&&e.length;return t?e[t-1]:void 0}function f(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t.call(null,e[n],n);else{if(!N(e))throw Error("non exhaustive match");var r=i(e);for(n=0;n<r.length;n++){var a=r[n],o=e[a];t.call(null,o,a)}}}function d(e){return"string"==typeof e}function h(e){return void 0===e}function p(e){return e instanceof Function}function m(e,t){return void 0===t&&(t=1),e.slice(t,e.length)}function g(e,t){return void 0===t&&(t=1),e.slice(0,e.length-t)}function v(e,t){var n=[];if(Array.isArray(e))for(var r=0;r<e.length;r++){var i=e[r];t.call(null,i)&&n.push(i)}return n}function y(e,t){return v(e,(function(e){return!t(e)}))}function b(e,t){for(var n=Object.keys(e),r={},i=0;i<n.length;i++){var a=n[i],o=e[a];t(o)&&(r[a]=o)}return r}function x(e,t){return!!N(e)&&e.hasOwnProperty(t)}function _(e,t){return void 0!==k(e,(function(e){return e===t}))}function w(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}function A(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function k(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(t.call(null,r))return r}}function E(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r];t.call(null,i)&&n.push(i)}return n}function T(e,t,n){for(var r=Array.isArray(e),o=r?e:a(e),s=r?[]:i(e),l=n,c=0;c<o.length;c++)l=t.call(null,l,o[c],r?c:s[c]);return l}function M(e){return y(e,(function(e){return null==e}))}function S(e,t){void 0===t&&(t=function(e){return e});var n=[];return T(e,(function(e,r){var i=t(r);return _(n,i)?e:(n.push(i),e.concat(r))}),[])}function C(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=[null].concat(t);return Function.bind.apply(e,r)}function O(e){return Array.isArray(e)}function R(e){return e instanceof RegExp}function N(e){return e instanceof Object}function L(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n))return!1;return!0}function D(e,t){return y(e,(function(e){return _(t,e)}))}function P(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return!0;return!1}function I(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}function F(e,t){var n=w(e);return n.sort((function(e,n){return t(e)-t(n)})),n}function z(e,t){if(e.length!==t.length)throw Error("can't zipObject with different number of keys and values!");for(var n={},r=0;r<e.length;r++)n[e[r]]=t[r];return n}function j(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++)for(var a=t[r],o=i(a),s=0;s<o.length;s++){var l=o[s];e[l]=a[l]}return e}function B(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++)for(var a=t[r],o=i(a),s=0;s<o.length;s++){var l=o[s];x(e,l)||(e[l]=a[l])}return e}function U(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return B.apply(null,[{}].concat(e))}function $(e,t){var n={};return f(e,(function(e){var r=t(e),i=n[r];i?i.push(e):n[r]=[e]})),n}function q(e,t){for(var n=A(e),r=i(t),a=0;a<r.length;a++){var o=r[a],s=t[o];n[o]=s}return n}function H(){}function V(e){return e}function W(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(void 0!==r?r:void 0)}return t}function G(e){console&&console.error&&console.error("Error: "+e)}function Y(e){console&&console.warn&&console.warn("Warning: "+e)}function X(){return"function"==typeof Map}function K(e,t){t.forEach((function(t){var n=t.prototype;Object.getOwnPropertyNames(n).forEach((function(r){if("constructor"!==r){var i=Object.getOwnPropertyDescriptor(n,r);i&&(i.get||i.set)?Object.defineProperty(e.prototype,r,i):e.prototype[r]=t.prototype[r]}}))}))}function Z(e){function t(){}t.prototype=e;var n=new t;function r(){return typeof n.bar}return r(),r(),e}function J(e){return e[e.length-1]}function Q(e){var t=(new Date).getTime(),n=e();return{time:(new Date).getTime()-t,value:n}}n.d(t,{$1:()=>c,$z:()=>$,Bl:()=>Z,Bq:()=>l,Gv:()=>N,HP:()=>i,HV:()=>u,I6:()=>k,Im:()=>r,JW:()=>E,Kg:()=>d,LG:()=>o,NT:()=>U,O1:()=>Q,Si:()=>L,T9:()=>w,TS:()=>T,Tj:()=>s,Tn:()=>p,Up:()=>b,VS:()=>W,XJ:()=>K,Zi:()=>G,b0:()=>h,cy:()=>O,gR:()=>_,gc:()=>g,gd:()=>R,gv:()=>m,h1:()=>q,iv:()=>D,jJ:()=>f,kp:()=>j,ku:()=>y,lR:()=>A,oE:()=>M,pb:()=>v,qh:()=>I,rF:()=>X,sb:()=>S,se:()=>J,tE:()=>H,x5:()=>Y,zK:()=>V,zN:()=>P,zu:()=>a,zy:()=>x})},6940:e=>{e.exports=function(e,t,n){return t<n?e<t?t:e>n?n:e:e<n?n:e>t?t:e}},26734:(e,t,n)=>{"use strict";var r=n(6940);function i(e,t){null==t&&(t=!0);var n=e[0],i=e[1],a=e[2],o=e[3];return null==o&&(o=t?1:255),t&&(n*=255,i*=255,a*=255,o*=255),16777216*(n=255&r(n,0,255))+((i=255&r(i,0,255))<<16)+((a=255&r(a,0,255))<<8)+(o=255&r(o,0,255))}e.exports=i,e.exports.to=i,e.exports.from=function(e,t){var n=(e=+e)>>>24,r=(16711680&e)>>>16,i=(65280&e)>>>8,a=255&e;return!1===t?[n,r,i,a]:[n/255,r/255,i/255,a/255]}},31980:e=>{"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},76302:(e,t,n)=>{"use strict";var r=n(29093),i=n(63039);e.exports=function(e,t){"float"!==t&&t||(t="array"),"uint"===t&&(t="uint8"),"uint_clamped"===t&&(t="uint8_clamped");var n=new(i(t))(4),a="uint8"!==t&&"uint8_clamped"!==t;return e.length&&"string"!=typeof e||((e=r(e))[0]/=255,e[1]/=255,e[2]/=255),function(e){return e instanceof Uint8Array||e instanceof Uint8ClampedArray||!!(Array.isArray(e)&&(e[0]>1||0===e[0])&&(e[1]>1||0===e[1])&&(e[2]>1||0===e[2])&&(!e[3]||e[3]>1))}(e)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=null!=e[3]?e[3]:255,a&&(n[0]/=255,n[1]/=255,n[2]/=255,n[3]/=255),n):(a?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=null!=e[3]?e[3]:1):(n[0]=Math.min(Math.max(Math.floor(255*e[0]),0),255),n[1]=Math.min(Math.max(Math.floor(255*e[1]),0),255),n[2]=Math.min(Math.max(Math.floor(255*e[2]),0),255),n[3]=null==e[3]?255:Math.min(Math.max(Math.floor(255*e[3]),0),255)),n)}},96822:(e,t,n)=>{"use strict";var r=n(31980);e.exports=function(e){var t,n,a=[],o=1;if("string"==typeof e)if(e=e.toLowerCase(),r[e])a=r[e].slice(),n="rgb";else if("transparent"===e)o=0,n="rgb",a=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(e)){var s=e.slice(1);o=1,(u=s.length)<=4?(a=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],4===u&&(o=parseInt(s[3]+s[3],16)/255)):(a=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],8===u&&(o=parseInt(s[6]+s[7],16)/255)),a[0]||(a[0]=0),a[1]||(a[1]=0),a[2]||(a[2]=0),n="rgb"}else if(t=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(e)){var l=t[1],c="rgb"===l;n=s=l.replace(/a$/,"");var u="cmyk"===s?4:"gray"===s?1:3;a=t[2].trim().split(/\s*[,\/]\s*|\s+/).map((function(e,t){if(/%$/.test(e))return t===u?parseFloat(e)/100:"rgb"===s?255*parseFloat(e)/100:parseFloat(e);if("h"===s[t]){if(/deg$/.test(e))return parseFloat(e);if(void 0!==i[e])return i[e]}return parseFloat(e)})),l===s&&a.push(1),o=c||void 0===a[u]?1:a[u],a=a.slice(0,u)}else e.length>10&&/[0-9](?:\s|\/)/.test(e)&&(a=e.match(/([0-9]+)/g).map((function(e){return parseFloat(e)})),n=e.match(/([a-z])/gi).join("").toLowerCase());else isNaN(e)?Array.isArray(e)||e.length?(a=[e[0],e[1],e[2]],n="rgb",o=4===e.length?e[3]:1):e instanceof Object&&(null!=e.r||null!=e.red||null!=e.R?(n="rgb",a=[e.r||e.red||e.R||0,e.g||e.green||e.G||0,e.b||e.blue||e.B||0]):(n="hsl",a=[e.h||e.hue||e.H||0,e.s||e.saturation||e.S||0,e.l||e.lightness||e.L||e.b||e.brightness]),o=e.a||e.alpha||e.opacity||1,null!=e.opacity&&(o/=100)):(n="rgb",a=[e>>>16,(65280&e)>>>8,255&e]);return{space:n,values:a,alpha:o}};var i={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},29093:(e,t,n)=>{"use strict";var r=n(96822);e.exports=function(e){var t;Array.isArray(e)&&e.raw&&(e=String.raw.apply(null,arguments));var n=r(e);if(!n.space)return[];var i=[0,0,0],a="h"===n.space[0]?[360,100,100]:[255,255,255];return(t=Array(3))[0]=Math.min(Math.max(n.values[0],i[0]),a[0]),t[1]=Math.min(Math.max(n.values[1],i[1]),a[1]),t[2]=Math.min(Math.max(n.values[2],i[2]),a[2]),"h"===n.space[0]&&(t=function(e){var t,n,r,i,a,o=e[0]/360,s=e[1]/100,l=e[2]/100,c=0;if(0===s)return a=255*l,[a,a,a];for(t=2*l-(n=l<.5?l*(1+s):l+s-l*s),i=[0,0,0];c<3;)(r=o+1/3*-(c-1))<0?r++:r>1&&r--,a=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t,i[c++]=255*a;return i}(t)),t.push(Math.min(Math.max(n.alpha,0),1)),t}},47538:(e,t,n)=>{"use strict";e.exports={parse:n(21937),stringify:n(42415)}},856:(e,t,n)=>{"use strict";var r=n(23648);e.exports={isSize:function(e){return/^[\d\.]/.test(e)||-1!==e.indexOf("/")||-1!==r.indexOf(e)}}},21937:(e,t,n)=>{"use strict";var r=n(91818),i=n(54324),a=n(94316),o=n(99803),s=n(87486),l=n(2362),c=n(20869),u=n(856).isSize;e.exports=d;var f=d.cache={};function d(e){if("string"!=typeof e)throw new Error("Font argument must be a string.");if(f[e])return f[e];if(""===e)throw new Error("Cannot parse an empty string.");if(-1!==a.indexOf(e))return f[e]={system:e};for(var t,n={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},d=c(e,/\s+/);t=d.shift();){if(-1!==i.indexOf(t))return["style","variant","weight","stretch"].forEach((function(e){n[e]=t})),f[e]=n;if(-1===s.indexOf(t))if("normal"!==t&&"small-caps"!==t)if(-1===l.indexOf(t)){if(-1===o.indexOf(t)){if(u(t)){var p=c(t,"/");if(n.size=p[0],null!=p[1]?n.lineHeight=h(p[1]):"/"===d[0]&&(d.shift(),n.lineHeight=h(d.shift())),!d.length)throw new Error("Missing required font-family.");return n.family=c(d.join(" "),/\s*,\s*/).map(r),f[e]=n}throw new Error("Unknown or unsupported font token: "+t)}n.weight=t}else n.stretch=t;else n.variant=t;else n.style=t}throw new Error("Missing required font-size.")}function h(e){var t=parseFloat(e);return t.toString()===e?t:e}},42415:(e,t,n)=>{"use strict";var r=n(19795),i=n(856).isSize,a=m(n(54324)),o=m(n(94316)),s=m(n(99803)),l=m(n(87486)),c=m(n(2362)),u={normal:1,"small-caps":1},f={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},d="1rem",h="serif";function p(e,t){if(e&&!t[e]&&!a[e])throw Error("Unknown keyword `"+e+"`");return e}function m(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=1;return t}e.exports=function(e){if((e=r(e,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return e.system&&p(e.system,o),e.system;if(p(e.style,l),p(e.variant,u),p(e.weight,s),p(e.stretch,c),null==e.size&&(e.size=d),"number"==typeof e.size&&(e.size+="px"),!i)throw Error("Bad size value `"+e.size+"`");e.family||(e.family=h),Array.isArray(e.family)&&(e.family.length||(e.family=[h]),e.family=e.family.map((function(e){return f[e]?e:'"'+e+'"'})).join(", "));var t=[];return t.push(e.style),e.variant!==e.style&&t.push(e.variant),e.weight!==e.variant&&e.weight!==e.style&&t.push(e.weight),e.stretch!==e.weight&&e.stretch!==e.variant&&e.stretch!==e.style&&t.push(e.stretch),t.push(e.size+(null==e.lineHeight||"normal"===e.lineHeight||e.lineHeight+""=="1"?"":"/"+e.lineHeight)),t.push(e.family),t.filter(Boolean).join(" ")}},22418:(e,t,n)=>{"use strict";var r,i=n(26463),a=n(42601),o=n(25499),s=n(64395),l=n(22151),c=n(850),u=Function.prototype.bind,f=Object.defineProperty,d=Object.prototype.hasOwnProperty;r=function(e,t,n){var r,i=a(t)&&o(t.value);return delete(r=s(t)).writable,delete r.value,r.get=function(){return!n.overwriteDefinition&&d.call(this,e)?i:(t.value=u.call(i,n.resolveContext?n.resolveContext(this):this),f(this,e,t),this[e])},r},e.exports=function(e){var t=l(arguments[1]);return i(t.resolveContext)&&o(t.resolveContext),c(e,(function(e,n){return r(n,e,t)}))}},28167:(e,t,n)=>{"use strict";var r=n(26463),i=n(78537),a=n(53892),o=n(22151),s=n(25462);(e.exports=function(e,t){var n,i,l,c,u;return arguments.length<2||"string"!=typeof e?(c=t,t=e,e=null):c=arguments[2],r(e)?(n=s.call(e,"c"),i=s.call(e,"e"),l=s.call(e,"w")):(n=l=!0,i=!1),u={value:t,configurable:n,enumerable:i,writable:l},c?a(o(c),u):u}).gs=function(e,t,n){var l,c,u,f;return"string"!=typeof e?(u=n,n=t,t=e,e=null):u=arguments[3],r(t)?i(t)?r(n)?i(n)||(u=n,n=void 0):n=void 0:(u=t,t=n=void 0):t=void 0,r(e)?(l=s.call(e,"c"),c=s.call(e,"e")):(l=!0,c=!1),f={get:t,set:n,configurable:l,enumerable:c},u?a(o(u),f):f}},48779:(e,t,n)=>{"use strict";n.d(t,{Tj:()=>o,$I:()=>s});var r="$";function i(){}function a(e,t){var n=new i;if(e instanceof i)e.each((function(e,t){n.set(t,e)}));else if(Array.isArray(e)){var r,a=-1,o=e.length;if(null==t)for(;++a<o;)n.set(a,e[a]);else for(;++a<o;)n.set(t(r=e[a],a,e),r)}else if(e)for(var s in e)n.set(s,e[s]);return n}i.prototype=a.prototype={constructor:i,has:function(e){return r+e in this},get:function(e){return this[r+e]},set:function(e,t){return this[r+e]=t,this},remove:function(e){var t=r+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===r&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===r&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===r&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===r&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===r&&++e;return e},empty:function(){for(var e in this)if(e[0]===r)return!1;return!0},each:function(e){for(var t in this)t[0]===r&&e(this[t],t.slice(1),this)}};const o=a;function s(){var e,t,n,r=[],i=[];function a(n,i,s,l){if(i>=r.length)return null!=e&&n.sort(e),null!=t?t(n):n;for(var c,u,f,d=-1,h=n.length,p=r[i++],m=o(),g=s();++d<h;)(f=m.get(c=p(u=n[d])+""))?f.push(u):m.set(c,[u]);return m.each((function(e,t){l(g,t,a(e,i,s,l))})),g}function s(e,n){if(++n>r.length)return e;var a,o=i[n-1];return null!=t&&n>=r.length?a=e.entries():(a=[],e.each((function(e,t){a.push({key:t,values:s(e,n)})}))),null!=o?a.sort((function(e,t){return o(e.key,t.key)})):a}return n={object:function(e){return a(e,0,l,c)},map:function(e){return a(e,0,u,f)},entries:function(e){return s(a(e,0,u,f),0)},key:function(e){return r.push(e),n},sortKeys:function(e){return i[r.length-1]=e,n},sortValues:function(t){return e=t,n},rollup:function(e){return t=e,n}}}function l(){return{}}function c(e,t,n){e[t]=n}function u(){return o()}function f(e,t,n){e.set(t,n)}function d(){}var h=o.prototype;function p(e,t){var n=new d;if(e instanceof d)e.each((function(e){n.add(e)}));else if(e){var r=-1,i=e.length;if(null==t)for(;++r<i;)n.add(e[r]);else for(;++r<i;)n.add(t(e[r],r,e))}return n}d.prototype=p.prototype={constructor:d,has:h.has,add:function(e){return this[r+(e+="")]=e,this},remove:h.remove,clear:h.clear,values:h.keys,size:h.size,empty:h.empty,each:h.each}},3457:(e,t,n)=>{"use strict";function r(e,t){var n;function r(){var r,i,a=n.length,o=0,s=0;for(r=0;r<a;++r)o+=(i=n[r]).x,s+=i.y;for(o=o/a-e,s=s/a-t,r=0;r<a;++r)(i=n[r]).x-=o,i.y-=s}return null==e&&(e=0),null==t&&(t=0),r.initialize=function(e){n=e},r.x=function(t){return arguments.length?(e=+t,r):e},r.y=function(e){return arguments.length?(t=+e,r):t},r}function i(e){return function(){return e}}function a(){return 1e-6*(Math.random()-.5)}function o(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,a,o,s,l,c,u,f,d,h=e._root,p={data:r},m=e._x0,g=e._y0,v=e._x1,y=e._y1;if(!h)return e._root=p,e;for(;h.length;)if((c=t>=(a=(m+v)/2))?m=a:v=a,(u=n>=(o=(g+y)/2))?g=o:y=o,i=h,!(h=h[f=u<<1|c]))return i[f]=p,e;if(s=+e._x.call(null,h.data),l=+e._y.call(null,h.data),t===s&&n===l)return p.next=h,i?i[f]=p:e._root=p,e;do{i=i?i[f]=new Array(4):e._root=new Array(4),(c=t>=(a=(m+v)/2))?m=a:v=a,(u=n>=(o=(g+y)/2))?g=o:y=o}while((f=u<<1|c)==(d=(l>=o)<<1|s>=a));return i[d]=h,i[f]=p,e}function s(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function l(e){return e[0]}function c(e){return e[1]}function u(e,t,n){var r=new f(null==t?l:t,null==n?c:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function f(e,t,n,r,i,a){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function d(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}n.r(t),n.d(t,{forceCenter:()=>r,forceCollide:()=>g,forceLink:()=>x,forceManyBody:()=>L,forceRadial:()=>D,forceSimulation:()=>N,forceX:()=>P,forceY:()=>I});var h=u.prototype=f.prototype;function p(e){return e.x+e.vx}function m(e){return e.y+e.vy}function g(e){var t,n,r=1,o=1;function s(){for(var e,i,s,c,f,d,h,g=t.length,v=0;v<o;++v)for(i=u(t,p,m).visitAfter(l),e=0;e<g;++e)s=t[e],d=n[s.index],h=d*d,c=s.x+s.vx,f=s.y+s.vy,i.visit(y);function y(e,t,n,i,o){var l=e.data,u=e.r,p=d+u;if(!l)return t>c+p||i<c-p||n>f+p||o<f-p;if(l.index>s.index){var m=c-l.x-l.vx,g=f-l.y-l.vy,v=m*m+g*g;v<p*p&&(0===m&&(v+=(m=a())*m),0===g&&(v+=(g=a())*g),v=(p-(v=Math.sqrt(v)))/v*r,s.vx+=(m*=v)*(p=(u*=u)/(h+u)),s.vy+=(g*=v)*p,l.vx-=m*(p=1-p),l.vy-=g*p)}}}function l(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function c(){if(t){var r,i,a=t.length;for(n=new Array(a),r=0;r<a;++r)i=t[r],n[i.index]=+e(i,r,t)}}return"function"!=typeof e&&(e=i(null==e?1:+e)),s.initialize=function(e){t=e,c()},s.iterations=function(e){return arguments.length?(o=+e,s):o},s.strength=function(e){return arguments.length?(r=+e,s):r},s.radius=function(t){return arguments.length?(e="function"==typeof t?t:i(+t),c(),s):e},s}h.copy=function(){var e,t,n=new f(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=d(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=d(t));return n},h.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return o(this.cover(t,n),t,n,e)},h.addAll=function(e){var t,n,r,i,a=e.length,s=new Array(a),l=new Array(a),c=1/0,u=1/0,f=-1/0,d=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(s[n]=r,l[n]=i,r<c&&(c=r),r>f&&(f=r),i<u&&(u=i),i>d&&(d=i));if(c>f||u>d)return this;for(this.cover(c,u).cover(f,d),n=0;n<a;++n)o(this,s[n],l[n],e[n]);return this},h.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,a=(r=Math.floor(t))+1;else{for(var o,s,l=i-n,c=this._root;n>e||e>=i||r>t||t>=a;)switch(s=(t<r)<<1|e<n,(o=new Array(4))[s]=c,c=o,l*=2,s){case 0:i=n+l,a=r+l;break;case 1:n=i-l,a=r+l;break;case 2:i=n+l,r=a-l;break;case 3:n=i-l,r=a-l}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this},h.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},h.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},h.find=function(e,t,n){var r,i,a,o,l,c,u,f=this._x0,d=this._y0,h=this._x1,p=this._y1,m=[],g=this._root;for(g&&m.push(new s(g,f,d,h,p)),null==n?n=1/0:(f=e-n,d=t-n,h=e+n,p=t+n,n*=n);c=m.pop();)if(!(!(g=c.node)||(i=c.x0)>h||(a=c.y0)>p||(o=c.x1)<f||(l=c.y1)<d))if(g.length){var v=(i+o)/2,y=(a+l)/2;m.push(new s(g[3],v,y,o,l),new s(g[2],i,y,v,l),new s(g[1],v,a,o,y),new s(g[0],i,a,v,y)),(u=(t>=y)<<1|e>=v)&&(c=m[m.length-1],m[m.length-1]=m[m.length-1-u],m[m.length-1-u]=c)}else{var b=e-+this._x.call(null,g.data),x=t-+this._y.call(null,g.data),_=b*b+x*x;if(_<n){var w=Math.sqrt(n=_);f=e-w,d=t-w,h=e+w,p=t+w,r=g.data}}return r},h.remove=function(e){if(isNaN(a=+this._x.call(null,e))||isNaN(o=+this._y.call(null,e)))return this;var t,n,r,i,a,o,s,l,c,u,f,d,h=this._root,p=this._x0,m=this._y0,g=this._x1,v=this._y1;if(!h)return this;if(h.length)for(;;){if((c=a>=(s=(p+g)/2))?p=s:g=s,(u=o>=(l=(m+v)/2))?m=l:v=l,t=h,!(h=h[f=u<<1|c]))return this;if(!h.length)break;(t[f+1&3]||t[f+2&3]||t[f+3&3])&&(n=t,d=f)}for(;h.data!==e;)if(r=h,!(h=h.next))return this;return(i=h.next)&&delete h.next,r?(i?r.next=i:delete r.next,this):t?(i?t[f]=i:delete t[f],(h=t[0]||t[1]||t[2]||t[3])&&h===(t[3]||t[2]||t[1]||t[0])&&!h.length&&(n?n[d]=h:this._root=h),this):(this._root=i,this)},h.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},h.root=function(){return this._root},h.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},h.visit=function(e){var t,n,r,i,a,o,l=[],c=this._root;for(c&&l.push(new s(c,this._x0,this._y0,this._x1,this._y1));t=l.pop();)if(!e(c=t.node,r=t.x0,i=t.y0,a=t.x1,o=t.y1)&&c.length){var u=(r+a)/2,f=(i+o)/2;(n=c[3])&&l.push(new s(n,u,f,a,o)),(n=c[2])&&l.push(new s(n,r,f,u,o)),(n=c[1])&&l.push(new s(n,u,i,a,f)),(n=c[0])&&l.push(new s(n,r,i,u,f))}return this},h.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new s(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var a,o=t.x0,l=t.y0,c=t.x1,u=t.y1,f=(o+c)/2,d=(l+u)/2;(a=i[0])&&n.push(new s(a,o,l,f,d)),(a=i[1])&&n.push(new s(a,f,l,c,d)),(a=i[2])&&n.push(new s(a,o,d,f,u)),(a=i[3])&&n.push(new s(a,f,d,c,u))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},h.x=function(e){return arguments.length?(this._x=e,this):this._x},h.y=function(e){return arguments.length?(this._y=e,this):this._y};var v=n(48779);function y(e){return e.index}function b(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function x(e){var t,n,r,o,s,l=y,c=function(e){return 1/Math.min(o[e.source.index],o[e.target.index])},u=i(30),f=1;function d(r){for(var i=0,o=e.length;i<f;++i)for(var l,c,u,d,h,p,m,g=0;g<o;++g)c=(l=e[g]).source,d=(u=l.target).x+u.vx-c.x-c.vx||a(),h=u.y+u.vy-c.y-c.vy||a(),d*=p=((p=Math.sqrt(d*d+h*h))-n[g])/p*r*t[g],h*=p,u.vx-=d*(m=s[g]),u.vy-=h*m,c.vx+=d*(m=1-m),c.vy+=h*m}function h(){if(r){var i,a,c=r.length,u=e.length,f=(0,v.Tj)(r,l);for(i=0,o=new Array(c);i<u;++i)(a=e[i]).index=i,"object"!=typeof a.source&&(a.source=b(f,a.source)),"object"!=typeof a.target&&(a.target=b(f,a.target)),o[a.source.index]=(o[a.source.index]||0)+1,o[a.target.index]=(o[a.target.index]||0)+1;for(i=0,s=new Array(u);i<u;++i)a=e[i],s[i]=o[a.source.index]/(o[a.source.index]+o[a.target.index]);t=new Array(u),p(),n=new Array(u),m()}}function p(){if(r)for(var n=0,i=e.length;n<i;++n)t[n]=+c(e[n],n,e)}function m(){if(r)for(var t=0,i=e.length;t<i;++t)n[t]=+u(e[t],t,e)}return null==e&&(e=[]),d.initialize=function(e){r=e,h()},d.links=function(t){return arguments.length?(e=t,h(),d):e},d.id=function(e){return arguments.length?(l=e,d):l},d.iterations=function(e){return arguments.length?(f=+e,d):f},d.strength=function(e){return arguments.length?(c="function"==typeof e?e:i(+e),p(),d):c},d.distance=function(e){return arguments.length?(u="function"==typeof e?e:i(+e),m(),d):u},d}var _={value:function(){}};function w(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new A(r)}function A(e){this._=e}function k(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function E(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=_,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}A.prototype=w.prototype={constructor:A,on:function(e,t){var n,r,i=this._,a=(r=i,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),o=-1,s=a.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<s;)if(n=(e=a[o]).type)i[n]=E(i[n],e.name,t);else if(null==t)for(n in i)i[n]=E(i[n],e.name,null);return this}for(;++o<s;)if((n=(e=a[o]).type)&&(n=k(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new A(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(r=this._[e]).length;a<n;++a)r[a].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};const T=w;var M=n(4397);function S(e){return e.x}function C(e){return e.y}var O=10,R=Math.PI*(3-Math.sqrt(5));function N(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),a=0,o=.6,s=(0,v.Tj)(),l=(0,M.O1)(u),c=T("tick","end");function u(){f(),c.call("tick",t),n<r&&(l.stop(),c.call("end",t))}function f(r){var l,c,u=e.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(a-n)*i,s.each((function(e){e(n)})),l=0;l<u;++l)null==(c=e[l]).fx?c.x+=c.vx*=o:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=o:(c.y=c.fy,c.vy=0);return t}function d(){for(var t,n=0,r=e.length;n<r;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var i=O*Math.sqrt(n),a=n*R;t.x=i*Math.cos(a),t.y=i*Math.sin(a)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function h(t){return t.initialize&&t.initialize(e),t}return null==e&&(e=[]),d(),t={tick:f,restart:function(){return l.restart(u),t},stop:function(){return l.stop(),t},nodes:function(n){return arguments.length?(e=n,d(),s.each(h),t):e},alpha:function(e){return arguments.length?(n=+e,t):n},alphaMin:function(e){return arguments.length?(r=+e,t):r},alphaDecay:function(e){return arguments.length?(i=+e,t):+i},alphaTarget:function(e){return arguments.length?(a=+e,t):a},velocityDecay:function(e){return arguments.length?(o=1-e,t):1-o},force:function(e,n){return arguments.length>1?(null==n?s.remove(e):s.set(e,h(n)),t):s.get(e)},find:function(t,n,r){var i,a,o,s,l,c=0,u=e.length;for(null==r?r=1/0:r*=r,c=0;c<u;++c)(o=(i=t-(s=e[c]).x)*i+(a=n-s.y)*a)<r&&(l=s,r=o);return l},on:function(e,n){return arguments.length>1?(c.on(e,n),t):c.on(e)}}}function L(){var e,t,n,r,o=i(-30),s=1,l=1/0,c=.81;function f(r){var i,a=e.length,o=u(e,S,C).visitAfter(h);for(n=r,i=0;i<a;++i)t=e[i],o.visit(p)}function d(){if(e){var t,n,i=e.length;for(r=new Array(i),t=0;t<i;++t)n=e[t],r[n.index]=+o(n,t,e)}}function h(e){var t,n,i,a,o,s=0,l=0;if(e.length){for(i=a=o=0;o<4;++o)(t=e[o])&&(n=Math.abs(t.value))&&(s+=t.value,l+=n,i+=n*t.x,a+=n*t.y);e.x=i/l,e.y=a/l}else{(t=e).x=t.data.x,t.y=t.data.y;do{s+=r[t.data.index]}while(t=t.next)}e.value=s}function p(e,i,o,u){if(!e.value)return!0;var f=e.x-t.x,d=e.y-t.y,h=u-i,p=f*f+d*d;if(h*h/c<p)return p<l&&(0===f&&(p+=(f=a())*f),0===d&&(p+=(d=a())*d),p<s&&(p=Math.sqrt(s*p)),t.vx+=f*e.value*n/p,t.vy+=d*e.value*n/p),!0;if(!(e.length||p>=l)){(e.data!==t||e.next)&&(0===f&&(p+=(f=a())*f),0===d&&(p+=(d=a())*d),p<s&&(p=Math.sqrt(s*p)));do{e.data!==t&&(h=r[e.data.index]*n/p,t.vx+=f*h,t.vy+=d*h)}while(e=e.next)}}return f.initialize=function(t){e=t,d()},f.strength=function(e){return arguments.length?(o="function"==typeof e?e:i(+e),d(),f):o},f.distanceMin=function(e){return arguments.length?(s=e*e,f):Math.sqrt(s)},f.distanceMax=function(e){return arguments.length?(l=e*e,f):Math.sqrt(l)},f.theta=function(e){return arguments.length?(c=e*e,f):Math.sqrt(c)},f}function D(e,t,n){var r,a,o,s=i(.1);function l(e){for(var i=0,s=r.length;i<s;++i){var l=r[i],c=l.x-t||1e-6,u=l.y-n||1e-6,f=Math.sqrt(c*c+u*u),d=(o[i]-f)*a[i]*e/f;l.vx+=c*d,l.vy+=u*d}}function c(){if(r){var t,n=r.length;for(a=new Array(n),o=new Array(n),t=0;t<n;++t)o[t]=+e(r[t],t,r),a[t]=isNaN(o[t])?0:+s(r[t],t,r)}}return"function"!=typeof e&&(e=i(+e)),null==t&&(t=0),null==n&&(n=0),l.initialize=function(e){r=e,c()},l.strength=function(e){return arguments.length?(s="function"==typeof e?e:i(+e),c(),l):s},l.radius=function(t){return arguments.length?(e="function"==typeof t?t:i(+t),c(),l):e},l.x=function(e){return arguments.length?(t=+e,l):t},l.y=function(e){return arguments.length?(n=+e,l):n},l}function P(e){var t,n,r,a=i(.1);function o(e){for(var i,a=0,o=t.length;a<o;++a)(i=t[a]).vx+=(r[a]-i.x)*n[a]*e}function s(){if(t){var i,o=t.length;for(n=new Array(o),r=new Array(o),i=0;i<o;++i)n[i]=isNaN(r[i]=+e(t[i],i,t))?0:+a(t[i],i,t)}}return"function"!=typeof e&&(e=i(null==e?0:+e)),o.initialize=function(e){t=e,s()},o.strength=function(e){return arguments.length?(a="function"==typeof e?e:i(+e),s(),o):a},o.x=function(t){return arguments.length?(e="function"==typeof t?t:i(+t),s(),o):e},o}function I(e){var t,n,r,a=i(.1);function o(e){for(var i,a=0,o=t.length;a<o;++a)(i=t[a]).vy+=(r[a]-i.y)*n[a]*e}function s(){if(t){var i,o=t.length;for(n=new Array(o),r=new Array(o),i=0;i<o;++i)n[i]=isNaN(r[i]=+e(t[i],i,t))?0:+a(t[i],i,t)}}return"function"!=typeof e&&(e=i(null==e?0:+e)),o.initialize=function(e){t=e,s()},o.strength=function(e){return arguments.length?(a="function"==typeof e?e:i(+e),s(),o):a},o.y=function(t){return arguments.length?(e="function"==typeof t?t:i(+t),s(),o):e},o}},22399:(e,t,n)=>{"use strict";function r(e){return null==e?null:i(e)}function i(e){if("function"!=typeof e)throw new Error;return e}n.d(t,{l:()=>r,m:()=>i})},40105:(e,t,n)=>{"use strict";function r(e,t){return e.parent===t.parent?1:2}function i(e,t){return e+t.x}function a(e,t){return Math.max(e,t.y)}function o(){var e=r,t=1,n=1,o=!1;function s(r){var s,l=0;r.eachAfter((function(t){var n=t.children;n?(t.x=function(e){return e.reduce(i,0)/e.length}(n),t.y=function(e){return 1+e.reduce(a,0)}(n)):(t.x=s?l+=e(t,s):0,t.y=0,s=t)}));var c=function(e){for(var t;t=e.children;)e=t[0];return e}(r),u=function(e){for(var t;t=e.children;)e=t[t.length-1];return e}(r),f=c.x-e(c,u)/2,d=u.x+e(u,c)/2;return r.eachAfter(o?function(e){e.x=(e.x-r.x)*t,e.y=(r.y-e.y)*n}:function(e){e.x=(e.x-f)/(d-f)*t,e.y=(1-(r.y?e.y/r.y:1))*n})}return s.separation=function(t){return arguments.length?(e=t,s):e},s.size=function(e){return arguments.length?(o=!1,t=+e[0],n=+e[1],s):o?null:[t,n]},s.nodeSize=function(e){return arguments.length?(o=!0,t=+e[0],n=+e[1],s):o?[t,n]:null},s}n.d(t,{A:()=>o})},15247:(e,t,n)=>{"use strict";function r(){return 0}function i(e){return function(){return e}}n.d(t,{A:()=>i,P:()=>r})},67601:(e,t,n)=>{"use strict";function r(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function i(e,t){var n,r,i,o,c,u=new l(e),f=+e.value&&(u.value=e.value),d=[u];for(null==t&&(t=a);n=d.pop();)if(f&&(n.value=+n.data.value),(i=t(n.data))&&(c=i.length))for(n.children=new Array(c),o=c-1;o>=0;--o)d.push(r=n.children[o]=new l(i[o])),r.parent=n,r.depth=n.depth+1;return u.eachBefore(s)}function a(e){return e.children}function o(e){e.data=e.data.data}function s(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function l(e){this.data=e,this.depth=this.height=0,this.parent=null}n.d(t,{bP:()=>l,lW:()=>s,Ay:()=>i}),l.prototype=i.prototype={constructor:l,count:function(){return this.eachAfter(r)},each:function(e){var t,n,r,i,a=this,o=[a];do{for(t=o.reverse(),o=[];a=t.pop();)if(e(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r])}while(o.length);return this},eachAfter:function(e){for(var t,n,r,i=this,a=[i],o=[];i=a.pop();)if(o.push(i),t=i.children)for(n=0,r=t.length;n<r;++n)a.push(t[n]);for(;i=o.pop();)e(i);return this},eachBefore:function(e){for(var t,n,r=this,i=[r];r=i.pop();)if(e(r),t=r.children)for(n=t.length-1;n>=0;--n)i.push(t[n]);return this},sum:function(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;e=n.pop(),t=r.pop();for(;e===t;)i=e,e=n.pop(),t=r.pop();return i}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){var e=[];return this.each((function(t){e.push(t)})),e},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t},copy:function(){return i(this).eachBefore(o)}}},73351:(e,t,n)=>{"use strict";n.r(t),n.d(t,{cluster:()=>r.A,hierarchy:()=>i.Ay,pack:()=>a.A,packEnclose:()=>s.A,packSiblings:()=>o.A,partition:()=>l.A,stratify:()=>c.A,tree:()=>u.A,treemap:()=>f.A,treemapBinary:()=>d.A,treemapDice:()=>h.A,treemapResquarify:()=>v.A,treemapSlice:()=>p.A,treemapSliceDice:()=>m.A,treemapSquarify:()=>g.Ay});var r=n(40105),i=n(67601),a=n(7789),o=n(57038),s=n(47769),l=n(45445),c=n(98519),u=n(16219),f=n(29526),d=n(72285),h=n(33059),p=n(28308),m=n(47979),g=n(11318),v=n(74371)},47769:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=Array.prototype.slice;function i(e){for(var t,n,i=0,o=(e=function(e){for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}(r.call(e))).length,l=[];i<o;)t=e[i],n&&s(n,t)?++i:(n=c(l=a(l,t)),i=0);return n}function a(e,t){var n,r;if(l(t,e))return[t];for(n=0;n<e.length;++n)if(o(t,e[n])&&l(u(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(o(u(e[n],e[r]),t)&&o(u(e[n],t),e[r])&&o(u(e[r],t),e[n])&&l(f(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function o(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function s(e,t){var n=e.r-t.r+1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function l(e,t){for(var n=0;n<t.length;++n)if(!s(e,t[n]))return!1;return!0}function c(e){switch(e.length){case 1:return{x:(t=e[0]).x,y:t.y,r:t.r};case 2:return u(e[0],e[1]);case 3:return f(e[0],e[1],e[2])}var t}function u(e,t){var n=e.x,r=e.y,i=e.r,a=t.x,o=t.y,s=t.r,l=a-n,c=o-r,u=s-i,f=Math.sqrt(l*l+c*c);return{x:(n+a+l/f*u)/2,y:(r+o+c/f*u)/2,r:(f+i+s)/2}}function f(e,t,n){var r=e.x,i=e.y,a=e.r,o=t.x,s=t.y,l=t.r,c=n.x,u=n.y,f=n.r,d=r-o,h=r-c,p=i-s,m=i-u,g=l-a,v=f-a,y=r*r+i*i-a*a,b=y-o*o-s*s+l*l,x=y-c*c-u*u+f*f,_=h*p-d*m,w=(p*x-m*b)/(2*_)-r,A=(m*g-p*v)/_,k=(h*b-d*x)/(2*_)-i,E=(d*v-h*g)/_,T=A*A+E*E-1,M=2*(a+w*A+k*E),S=w*w+k*k-a*a,C=-(T?(M+Math.sqrt(M*M-4*T*S))/(2*T):S/M);return{x:r+w+A*C,y:i+k+E*C,r:C}}},7789:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(57038),i=n(22399),a=n(15247);function o(e){return Math.sqrt(e.value)}function s(){var e=null,t=1,n=1,r=a.P;function s(i){return i.x=t/2,i.y=n/2,e?i.eachBefore(l(e)).eachAfter(c(r,.5)).eachBefore(u(1)):i.eachBefore(l(o)).eachAfter(c(a.P,1)).eachAfter(c(r,i.r/Math.min(t,n))).eachBefore(u(Math.min(t,n)/(2*i.r))),i}return s.radius=function(t){return arguments.length?(e=(0,i.l)(t),s):e},s.size=function(e){return arguments.length?(t=+e[0],n=+e[1],s):[t,n]},s.padding=function(e){return arguments.length?(r="function"==typeof e?e:(0,a.A)(+e),s):r},s}function l(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function c(e,t){return function(n){if(i=n.children){var i,a,o,s=i.length,l=e(n)*t||0;if(l)for(a=0;a<s;++a)i[a].r+=l;if(o=(0,r.n)(i),l)for(a=0;a<s;++a)i[a].r-=l;n.r=o+l}}}function u(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}},57038:(e,t,n)=>{"use strict";n.d(t,{A:()=>c,n:()=>l});var r=n(47769);function i(e,t,n){var r,i,a,o,s=e.x-t.x,l=e.y-t.y,c=s*s+l*l;c?(i=t.r+n.r,i*=i,o=e.r+n.r,i>(o*=o)?(r=(c+o-i)/(2*c),a=Math.sqrt(Math.max(0,o/c-r*r)),n.x=e.x-r*s-a*l,n.y=e.y-r*l+a*s):(r=(c+i-o)/(2*c),a=Math.sqrt(Math.max(0,i/c-r*r)),n.x=t.x+r*s-a*l,n.y=t.y+r*l+a*s)):(n.x=t.x+n.r,n.y=t.y)}function a(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function o(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,a=(t.y*n.r+n.y*t.r)/r;return i*i+a*a}function s(e){this._=e,this.next=null,this.previous=null}function l(e){if(!(c=e.length))return 0;var t,n,l,c,u,f,d,h,p,m,g;if((t=e[0]).x=0,t.y=0,!(c>1))return t.r;if(n=e[1],t.x=-n.r,n.x=t.r,n.y=0,!(c>2))return t.r+n.r;i(n,t,l=e[2]),t=new s(t),n=new s(n),l=new s(l),t.next=l.previous=n,n.next=t.previous=l,l.next=n.previous=t;e:for(d=3;d<c;++d){i(t._,n._,l=e[d]),l=new s(l),h=n.next,p=t.previous,m=n._.r,g=t._.r;do{if(m<=g){if(a(h._,l._)){n=h,t.next=n,n.previous=t,--d;continue e}m+=h._.r,h=h.next}else{if(a(p._,l._)){(t=p).next=n,n.previous=t,--d;continue e}g+=p._.r,p=p.previous}}while(h!==p.next);for(l.previous=t,l.next=n,t.next=n.previous=n=l,u=o(t);(l=l.next)!==n;)(f=o(l))<u&&(t=l,u=f);n=t.next}for(t=[n._],l=n;(l=l.next)!==n;)t.push(l._);for(l=(0,r.A)(t),d=0;d<c;++d)(t=e[d]).x-=l.x,t.y-=l.y;return l.r}function c(e){return l(e),e}},45445:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(11254),i=n(33059);function a(){var e=1,t=1,n=0,a=!1;function o(o){var s=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/s,o.eachBefore(function(e,t){return function(r){r.children&&(0,i.A)(r,r.x0,e*(r.depth+1)/t,r.x1,e*(r.depth+2)/t);var a=r.x0,o=r.y0,s=r.x1-n,l=r.y1-n;s<a&&(a=s=(a+s)/2),l<o&&(o=l=(o+l)/2),r.x0=a,r.y0=o,r.x1=s,r.y1=l}}(t,s)),a&&o.eachBefore(r.A),o}return o.round=function(e){return arguments.length?(a=!!e,o):a},o.size=function(n){return arguments.length?(e=+n[0],t=+n[1],o):[e,t]},o.padding=function(e){return arguments.length?(n=+e,o):n},o}},98519:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(22399),i=n(67601),a="$",o={depth:-1},s={};function l(e){return e.id}function c(e){return e.parentId}function u(){var e=l,t=c;function n(n){var r,l,c,u,f,d,h,p=n.length,m=new Array(p),g={};for(l=0;l<p;++l)r=n[l],f=m[l]=new i.bP(r),null!=(d=e(r,l,n))&&(d+="")&&(g[h=a+(f.id=d)]=h in g?s:f);for(l=0;l<p;++l)if(f=m[l],null!=(d=t(n[l],l,n))&&(d+="")){if(!(u=g[a+d]))throw new Error("missing: "+d);if(u===s)throw new Error("ambiguous: "+d);u.children?u.children.push(f):u.children=[f],f.parent=u}else{if(c)throw new Error("multiple roots");c=f}if(!c)throw new Error("no root");if(c.parent=o,c.eachBefore((function(e){e.depth=e.parent.depth+1,--p})).eachBefore(i.lW),c.parent=null,p>0)throw new Error("cycle");return c}return n.id=function(t){return arguments.length?(e=(0,r.m)(t),n):e},n.parentId=function(e){return arguments.length?(t=(0,r.m)(e),n):t},n}},16219:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(67601);function i(e,t){return e.parent===t.parent?1:2}function a(e){var t=e.children;return t?t[0]:e.t}function o(e){var t=e.children;return t?t[t.length-1]:e.t}function s(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function l(e,t,n){return e.a.parent===t.parent?e.a:n}function c(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function u(){var e=i,t=1,n=1,r=null;function u(i){var a=function(e){for(var t,n,r,i,a,o=new c(e,0),s=[o];t=s.pop();)if(r=t._.children)for(t.children=new Array(a=r.length),i=a-1;i>=0;--i)s.push(n=t.children[i]=new c(r[i],i)),n.parent=t;return(o.parent=new c(null,0)).children=[o],o}(i);if(a.eachAfter(f),a.parent.m=-a.z,a.eachBefore(d),r)i.eachBefore(h);else{var o=i,s=i,l=i;i.eachBefore((function(e){e.x<o.x&&(o=e),e.x>s.x&&(s=e),e.depth>l.depth&&(l=e)}));var u=o===s?1:e(o,s)/2,p=u-o.x,m=t/(s.x+u+p),g=n/(l.depth||1);i.eachBefore((function(e){e.x=(e.x+p)*m,e.y=e.depth*g}))}return i}function f(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n){!function(e){for(var t,n=0,r=0,i=e.children,a=i.length;--a>=0;)(t=i[a]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(t);var c=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-c):t.z=c}else i&&(t.z=i.z+e(t._,i._));t.parent.A=function(t,n,r){if(n){for(var i,c=t,u=t,f=n,d=c.parent.children[0],h=c.m,p=u.m,m=f.m,g=d.m;f=o(f),c=a(c),f&&c;)d=a(d),(u=o(u)).a=t,(i=f.z+m-c.z-h+e(f._,c._))>0&&(s(l(f,t,r),t,i),h+=i,p+=i),m+=f.m,h+=c.m,g+=d.m,p+=u.m;f&&!o(u)&&(u.t=f,u.m+=m-p),c&&!a(d)&&(d.t=c,d.m+=h-g,r=t)}return r}(t,i,t.parent.A||r[0])}function d(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function h(e){e.x*=t,e.y=e.depth*n}return u.separation=function(t){return arguments.length?(e=t,u):e},u.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],u):r?null:[t,n]},u.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],u):r?[t,n]:null},u}c.prototype=Object.create(r.bP.prototype)},72285:(e,t,n)=>{"use strict";function r(e,t,n,r,i){var a,o,s=e.children,l=s.length,c=new Array(l+1);for(c[0]=o=a=0;a<l;++a)c[a+1]=o+=s[a].value;!function e(t,n,r,i,a,o,l){if(t>=n-1){var u=s[t];return u.x0=i,u.y0=a,u.x1=o,void(u.y1=l)}var f=c[t],d=r/2+f,h=t+1,p=n-1;for(;h<p;){var m=h+p>>>1;c[m]<d?h=m+1:p=m}d-c[h-1]<c[h]-d&&t+1<h&&--h;var g=c[h]-f,v=r-g;if(o-i>l-a){var y=(i*v+o*g)/r;e(t,h,g,i,a,y,l),e(h,n,v,y,a,o,l)}else{var b=(a*v+l*g)/r;e(t,h,g,i,a,o,b),e(h,n,v,i,b,o,l)}}(0,l,e.value,t,n,r,i)}n.d(t,{A:()=>r})},33059:(e,t,n)=>{"use strict";function r(e,t,n,r,i){for(var a,o=e.children,s=-1,l=o.length,c=e.value&&(r-t)/e.value;++s<l;)(a=o[s]).y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*c}n.d(t,{A:()=>r})},29526:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(11254),i=n(11318),a=n(22399),o=n(15247);function s(){var e=i.Ay,t=!1,n=1,s=1,l=[0],c=o.P,u=o.P,f=o.P,d=o.P,h=o.P;function p(e){return e.x0=e.y0=0,e.x1=n,e.y1=s,e.eachBefore(m),l=[0],t&&e.eachBefore(r.A),e}function m(t){var n=l[t.depth],r=t.x0+n,i=t.y0+n,a=t.x1-n,o=t.y1-n;a<r&&(r=a=(r+a)/2),o<i&&(i=o=(i+o)/2),t.x0=r,t.y0=i,t.x1=a,t.y1=o,t.children&&(n=l[t.depth+1]=c(t)/2,r+=h(t)-n,i+=u(t)-n,(a-=f(t)-n)<r&&(r=a=(r+a)/2),(o-=d(t)-n)<i&&(i=o=(i+o)/2),e(t,r,i,a,o))}return p.round=function(e){return arguments.length?(t=!!e,p):t},p.size=function(e){return arguments.length?(n=+e[0],s=+e[1],p):[n,s]},p.tile=function(t){return arguments.length?(e=(0,a.m)(t),p):e},p.padding=function(e){return arguments.length?p.paddingInner(e).paddingOuter(e):p.paddingInner()},p.paddingInner=function(e){return arguments.length?(c="function"==typeof e?e:(0,o.A)(+e),p):c},p.paddingOuter=function(e){return arguments.length?p.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):p.paddingTop()},p.paddingTop=function(e){return arguments.length?(u="function"==typeof e?e:(0,o.A)(+e),p):u},p.paddingRight=function(e){return arguments.length?(f="function"==typeof e?e:(0,o.A)(+e),p):f},p.paddingBottom=function(e){return arguments.length?(d="function"==typeof e?e:(0,o.A)(+e),p):d},p.paddingLeft=function(e){return arguments.length?(h="function"==typeof e?e:(0,o.A)(+e),p):h},p}},74371:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(33059),i=n(28308),a=n(11318);const o=function e(t){function n(e,n,o,s,l){if((c=e._squarify)&&c.ratio===t)for(var c,u,f,d,h,p=-1,m=c.length,g=e.value;++p<m;){for(f=(u=c[p]).children,d=u.value=0,h=f.length;d<h;++d)u.value+=f[d].value;u.dice?(0,r.A)(u,n,o,s,o+=(l-o)*u.value/g):(0,i.A)(u,n,o,n+=(s-n)*u.value/g,l),g-=u.value}else e._squarify=c=(0,a.AI)(t,e,n,o,s,l),c.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(a.U1)},11254:(e,t,n)=>{"use strict";function r(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}n.d(t,{A:()=>r})},28308:(e,t,n)=>{"use strict";function r(e,t,n,r,i){for(var a,o=e.children,s=-1,l=o.length,c=e.value&&(i-n)/e.value;++s<l;)(a=o[s]).x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*c}n.d(t,{A:()=>r})},47979:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(33059),i=n(28308);function a(e,t,n,a,o){(1&e.depth?i.A:r.A)(e,t,n,a,o)}},11318:(e,t,n)=>{"use strict";n.d(t,{AI:()=>o,Ay:()=>s,U1:()=>a});var r=n(33059),i=n(28308),a=(1+Math.sqrt(5))/2;function o(e,t,n,a,o,s){for(var l,c,u,f,d,h,p,m,g,v,y,b=[],x=t.children,_=0,w=0,A=x.length,k=t.value;_<A;){u=o-n,f=s-a;do{d=x[w++].value}while(!d&&w<A);for(h=p=d,y=d*d*(v=Math.max(f/u,u/f)/(k*e)),g=Math.max(p/y,y/h);w<A;++w){if(d+=c=x[w].value,c<h&&(h=c),c>p&&(p=c),y=d*d*v,(m=Math.max(p/y,y/h))>g){d-=c;break}g=m}b.push(l={value:d,dice:u<f,children:x.slice(_,w)}),l.dice?(0,r.A)(l,n,a,o,k?a+=f*d/k:s):(0,i.A)(l,n,a,k?n+=u*d/k:o,s),k-=d,_=w}return b}const s=function e(t){function n(e,n,r,i,a){o(t,e,n,r,i,a)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(a)},23837:(e,t,n)=>{"use strict";function r(e){return function(){return e}}n.d(t,{A:()=>r})},80783:(e,t,n)=>{"use strict";n.d(t,{pq:()=>f});var r=n(76003),i=Array.prototype.slice,a=n(23837),o=n(95659);function s(e){return e.source}function l(e){return e.target}function c(e){var t=s,n=l,c=o.x,u=o.y,f=null;function d(){var a,o=i.call(arguments),s=t.apply(this,o),l=n.apply(this,o);if(f||(f=a=(0,r.Ae)()),e(f,+c.apply(this,(o[0]=s,o)),+u.apply(this,o),+c.apply(this,(o[0]=l,o)),+u.apply(this,o)),a)return f=null,a+""||null}return d.source=function(e){return arguments.length?(t=e,d):t},d.target=function(e){return arguments.length?(n=e,d):n},d.x=function(e){return arguments.length?(c="function"==typeof e?e:(0,a.A)(+e),d):c},d.y=function(e){return arguments.length?(u="function"==typeof e?e:(0,a.A)(+e),d):u},d.context=function(e){return arguments.length?(f=null==e?null:e,d):f},d}function u(e,t,n,r,i){e.moveTo(t,n),e.bezierCurveTo(t=(t+r)/2,n,t,i,r,i)}function f(){return c(u)}},95659:(e,t,n)=>{"use strict";function r(e){return e[0]}function i(e){return e[1]}n.d(t,{x:()=>r,y:()=>i})},23358:e=>{"use strict";e.exports=function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]}},30013:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={update:function(){"undefined"!=typeof window&&"function"==typeof window.matchMedia&&(n.hover=window.matchMedia("(hover: hover)").matches,n.none=window.matchMedia("(hover: none)").matches||window.matchMedia("(hover: on-demand)").matches,n.anyHover=window.matchMedia("(any-hover: hover)").matches,n.anyNone=window.matchMedia("(any-hover: none)").matches||window.matchMedia("(any-hover: on-demand)").matches)}};n.update(),t.default=n},31236:(e,t,n)=>{"use strict";var r=s(n(30013)),i=s(n(7850)),a=s(n(74394)),o=s(n(71596));function s(e){return e&&e.__esModule?e:{default:e}}var l={state:{detectHover:r.default,detectPointer:i.default,detectTouchEvents:a.default,detectPassiveEvents:o.default},update:function(){l.state.detectHover.update(),l.state.detectPointer.update(),l.state.detectTouchEvents.update(),l.state.detectPassiveEvents.update(),l.updateOnlyOwnProperties()},updateOnlyOwnProperties:function(){var e,t,n,r;"undefined"!=typeof window&&(l.passiveEvents=l.state.detectPassiveEvents.hasSupport||!1,l.hasTouch=l.state.detectTouchEvents.hasSupport||!1,l.deviceType=(e=l.hasTouch,t=l.state.detectHover.anyHover,n=l.state.detectPointer.anyFine,r=l.state,e&&(t||n)?"hybrid":e&&Object.keys(r.detectHover).filter((function(e){return"update"!==e})).every((function(e){return!1===r.detectHover[e]}))&&Object.keys(r.detectPointer).filter((function(e){return"update"!==e})).every((function(e){return!1===r.detectPointer[e]}))?window.navigator&&/android/.test(window.navigator.userAgent.toLowerCase())?"touchOnly":"hybrid":e?"touchOnly":"mouseOnly"),l.hasMouse="touchOnly"!==l.deviceType,l.primaryInput=("mouseOnly"===l.deviceType?"mouse":"touchOnly"===l.deviceType&&"touch")||l.state.detectHover.hover&&"mouse"||l.state.detectHover.none&&"touch"||"mouse",/windows/.test(window.navigator.userAgent.toLowerCase())&&/chrome/.test(window.navigator.userAgent.toLowerCase())&&parseInt(/Chrome\/([0-9.]+)/.exec(navigator.userAgent)[1],10)>=59&&l.hasTouch&&(l.deviceType="hybrid",l.hasMouse=!0,l.primaryInput="mouse"))}};l.updateOnlyOwnProperties(),t.A=l},91243:e=>{"use strict";e.exports=r;var t=(r.canvas=document.createElement("canvas")).getContext("2d"),n=i([32,126]);function r(e,r){Array.isArray(e)&&(e=e.join(", "));var a,o={},s=16,l=.05;r&&(2===r.length&&"number"==typeof r[0]?a=i(r):Array.isArray(r)?a=r:(r.o?a=i(r.o):r.pairs&&(a=r.pairs),r.fontSize&&(s=r.fontSize),null!=r.threshold&&(l=r.threshold))),a||(a=n),t.font=s+"px "+e;for(var c=0;c<a.length;c++){var u=a[c],f=t.measureText(u[0]).width+t.measureText(u[1]).width,d=t.measureText(u).width;if(Math.abs(f-d)>s*l){var h=(d-f)/s;o[u]=1e3*h}}return o}function i(e){for(var t=[],n=e[0];n<=e[1];n++)for(var r=String.fromCharCode(n),i=e[0];i<e[1];i++){var a=r+String.fromCharCode(i);t.push(a)}return t}r.createPairs=i,r.ascii=n},71596:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={update:function(){if("undefined"!=typeof window&&"function"==typeof window.addEventListener){var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}}),r=function(){};window.addEventListener("testPassiveEventSupport",r,t),window.removeEventListener("testPassiveEventSupport",r,t),n.hasSupport=e}}};n.update(),t.default=n},7850:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={update:function(){"undefined"!=typeof window&&"function"==typeof window.matchMedia&&(n.fine=window.matchMedia("(pointer: fine)").matches,n.coarse=window.matchMedia("(pointer: coarse)").matches,n.none=window.matchMedia("(pointer: none)").matches,n.anyFine=window.matchMedia("(any-pointer: fine)").matches,n.anyCoarse=window.matchMedia("(any-pointer: coarse)").matches,n.anyNone=window.matchMedia("(any-pointer: none)").matches)}};n.update(),t.default=n},74394:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={update:function(){"undefined"!=typeof window&&(n.hasSupport="ontouchstart"in window,n.browserSupportsApi=Boolean(window.TouchEvent))}};n.update(),t.default=n},70096:(e,t,n)=>{var r=n(480),i=n(87269),a={M:"moveTo",C:"bezierCurveTo"};e.exports=function(e,t){e.beginPath(),i(r(t)).forEach((function(t){var n=t[0],r=t.slice(1);e[a[n]].apply(e,r)})),e.closePath()}},63039:e=>{e.exports=function(e){switch(e){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},21775:e=>{"use strict";function t(e,n,r){var i=0|e[r];if(i<=0)return[];var a,o=new Array(i);if(r===e.length-1)for(a=0;a<i;++a)o[a]=n;else for(a=0;a<i;++a)o[a]=t(e,n,r+1);return o}e.exports=function(e,n){switch(void 0===n&&(n=0),typeof e){case"number":if(e>0)return function(e,t){var n,r;for(n=new Array(e),r=0;r<e;++r)n[r]=t;return n}(0|e,n);break;case"object":if("number"==typeof e.length)return t(e,n,0)}return[]}},31610:e=>{"use strict";function t(e,t,r){r=r||2;var a,o,s,l,f,d,p,m=t&&t.length,g=m?t[0]*r:e.length,v=n(e,0,g,r,!0),y=[];if(!v||v.next===v.prev)return y;if(m&&(v=function(e,t,r,i){var a,o,s,l=[];for(a=0,o=t.length;a<o;a++)(s=n(e,t[a]*i,a<o-1?t[a+1]*i:e.length,i,!1))===s.next&&(s.steiner=!0),l.push(h(s));for(l.sort(c),a=0;a<l.length;a++)r=u(l[a],r);return r}(e,t,v,r)),e.length>80*r){a=s=e[0],o=l=e[1];for(var b=r;b<g;b+=r)(f=e[b])<a&&(a=f),(d=e[b+1])<o&&(o=d),f>s&&(s=f),d>l&&(l=d);p=0!==(p=Math.max(s-a,l-o))?32767/p:0}return i(v,y,r,a,o,p,0),y}function n(e,t,n,r,i){var a,o;if(i===T(e,t,n,r)>0)for(a=t;a<n;a+=r)o=A(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=A(a,e[a],e[a+1],o);return o&&v(o,o.next)&&(k(o),o=o.next),o}function r(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!v(r,r.next)&&0!==g(r.prev,r,r.next))r=r.next;else{if(k(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function i(e,t,n,c,u,f,h){if(e){!h&&f&&function(e,t,n,r){var i=e;do{0===i.z&&(i.z=d(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,a,o,s,l,c=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ);t++);for(l=c;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,c*=2}while(o>1)}(i)}(e,c,u,f);for(var p,m,g=e;e.prev!==e.next;)if(p=e.prev,m=e.next,f?o(e,c,u,f):a(e))t.push(p.i/n|0),t.push(e.i/n|0),t.push(m.i/n|0),k(e),e=m.next,g=m.next;else if((e=m)===g){h?1===h?i(e=s(r(e),t,n),t,n,c,u,f,2):2===h&&l(e,t,n,c,u,f):i(r(e),t,n,c,u,f,1);break}}}function a(e){var t=e.prev,n=e,r=e.next;if(g(t,n,r)>=0)return!1;for(var i=t.x,a=n.x,o=r.x,s=t.y,l=n.y,c=r.y,u=i<a?i<o?i:o:a<o?a:o,f=s<l?s<c?s:c:l<c?l:c,d=i>a?i>o?i:o:a>o?a:o,h=s>l?s>c?s:c:l>c?l:c,m=r.next;m!==t;){if(m.x>=u&&m.x<=d&&m.y>=f&&m.y<=h&&p(i,s,a,l,o,c,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function o(e,t,n,r){var i=e.prev,a=e,o=e.next;if(g(i,a,o)>=0)return!1;for(var s=i.x,l=a.x,c=o.x,u=i.y,f=a.y,h=o.y,m=s<l?s<c?s:c:l<c?l:c,v=u<f?u<h?u:h:f<h?f:h,y=s>l?s>c?s:c:l>c?l:c,b=u>f?u>h?u:h:f>h?f:h,x=d(m,v,t,n,r),_=d(y,b,t,n,r),w=e.prevZ,A=e.nextZ;w&&w.z>=x&&A&&A.z<=_;){if(w.x>=m&&w.x<=y&&w.y>=v&&w.y<=b&&w!==i&&w!==o&&p(s,u,l,f,c,h,w.x,w.y)&&g(w.prev,w,w.next)>=0)return!1;if(w=w.prevZ,A.x>=m&&A.x<=y&&A.y>=v&&A.y<=b&&A!==i&&A!==o&&p(s,u,l,f,c,h,A.x,A.y)&&g(A.prev,A,A.next)>=0)return!1;A=A.nextZ}for(;w&&w.z>=x;){if(w.x>=m&&w.x<=y&&w.y>=v&&w.y<=b&&w!==i&&w!==o&&p(s,u,l,f,c,h,w.x,w.y)&&g(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;A&&A.z<=_;){if(A.x>=m&&A.x<=y&&A.y>=v&&A.y<=b&&A!==i&&A!==o&&p(s,u,l,f,c,h,A.x,A.y)&&g(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function s(e,t,n){var i=e;do{var a=i.prev,o=i.next.next;!v(a,o)&&y(a,i,i.next,o)&&_(a,o)&&_(o,a)&&(t.push(a.i/n|0),t.push(i.i/n|0),t.push(o.i/n|0),k(i),k(i.next),i=e=o),i=i.next}while(i!==e);return r(i)}function l(e,t,n,a,o,s){var l=e;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&m(l,c)){var u=w(l,c);return l=r(l,l.next),u=r(u,u.next),i(l,t,n,a,o,s,0),void i(u,t,n,a,o,s,0)}c=c.next}l=l.next}while(l!==e)}function c(e,t){return e.x-t.x}function u(e,t){var n=function(e,t){var n,r=t,i=e.x,a=e.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>o&&(o=s,n=r.x<r.next.x?r:r.next,s===i))return n}r=r.next}while(r!==t);if(!n)return null;var l,c=n,u=n.x,d=n.y,h=1/0;r=n;do{i>=r.x&&r.x>=u&&i!==r.x&&p(a<d?i:o,a,u,d,a<d?o:i,a,r.x,r.y)&&(l=Math.abs(a-r.y)/(i-r.x),_(r,e)&&(l<h||l===h&&(r.x>n.x||r.x===n.x&&f(n,r)))&&(n=r,h=l)),r=r.next}while(r!==c);return n}(e,t);if(!n)return t;var i=w(n,e);return r(i,i.next),r(n,n.next)}function f(e,t){return g(e.prev,e,t.prev)<0&&g(t.next,e,e.next)<0}function d(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function h(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function p(e,t,n,r,i,a,o,s){return(i-o)*(t-s)>=(e-o)*(a-s)&&(e-o)*(r-s)>=(n-o)*(t-s)&&(n-o)*(a-s)>=(i-o)*(r-s)}function m(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&y(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(_(e,t)&&_(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(g(e.prev,e,t.prev)||g(e,t.prev,t))||v(e,t)&&g(e.prev,e,e.next)>0&&g(t.prev,t,t.next)>0)}function g(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function v(e,t){return e.x===t.x&&e.y===t.y}function y(e,t,n,r){var i=x(g(e,t,n)),a=x(g(e,t,r)),o=x(g(n,r,e)),s=x(g(n,r,t));return i!==a&&o!==s||(!(0!==i||!b(e,n,t))||(!(0!==a||!b(e,r,t))||(!(0!==o||!b(n,e,r))||!(0!==s||!b(n,t,r)))))}function b(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function x(e){return e>0?1:e<0?-1:0}function _(e,t){return g(e.prev,e,e.next)<0?g(e,t,e.next)>=0&&g(e,e.prev,t)>=0:g(e,t,e.prev)<0||g(e,e.next,t)<0}function w(e,t){var n=new E(e.i,e.x,e.y),r=new E(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function A(e,t,n,r){var i=new E(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function k(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function E(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function T(e,t,n,r){for(var i=0,a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}e.exports=t,e.exports.default=t,t.deviation=function(e,t,n,r){var i=t&&t.length,a=i?t[0]*n:e.length,o=Math.abs(T(e,0,a,n));if(i)for(var s=0,l=t.length;s<l;s++){var c=t[s]*n,u=s<l-1?t[s+1]*n:e.length;o-=Math.abs(T(e,c,u,n))}var f=0;for(s=0;s<r.length;s+=3){var d=r[s]*n,h=r[s+1]*n,p=r[s+2]*n;f+=Math.abs((e[d]-e[p])*(e[h+1]-e[d+1])-(e[d]-e[h])*(e[p+1]-e[d+1]))}return 0===o&&0===f?0:Math.abs((f-o)/o)},t.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var a=0;a<e[i].length;a++)for(var o=0;o<t;o++)n.vertices.push(e[i][a][o]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n}},50325:e=>{"use strict";var t=e.exports={};t.isIE=function(e){return(-1!==(t=navigator.userAgent.toLowerCase()).indexOf("msie")||-1!==t.indexOf("trident")||-1!==t.indexOf(" edge/"))&&(!e||e===function(){var e=3,t=document.createElement("div"),n=t.getElementsByTagName("i");do{t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e"}while(n[0]);return e>4?e:undefined}());var t},t.isLegacyOpera=function(){return!!window.opera}},59780:e=>{"use strict";(e.exports={}).forEach=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n]);if(r)return r}}},39641:(e,t,n)=>{"use strict";var r=n(50325);e.exports=function(e){var t=(e=e||{}).reporter,n=e.batchProcessor,i=e.stateHandler.getState;if(!t)throw new Error("Missing required dependency: reporter.");function a(t){var n=e.important?" !important; ":"; ";return(t.join(n)+n).trim()}function o(e){return i(e).object}return{makeDetectable:function(e,o,s){s||(s=o,o=e,e=null),(e=e||{}).debug,r.isIE(8)?s(o):function(o,s){var l=a(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),c=!1,u=window.getComputedStyle(o),f=o.offsetWidth,d=o.offsetHeight;function h(){function n(){if("static"===u.position){o.style.setProperty("position","relative",e.important?"important":"");var n=function(t,n,r,i){var a=r[i];"auto"!==a&&"0"!==function(e){return e.replace(/[^-\d\.]/g,"")}(a)&&(t.warn("An element that is positioned static has style."+i+"="+a+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+i+" will be set to 0. Element: ",n),n.style.setProperty(i,"0",e.important?"important":""))};n(t,o,u,"top"),n(t,o,u,"right"),n(t,o,u,"bottom"),n(t,o,u,"left")}}""!==u.position&&(n(),c=!0);var a=document.createElement("object");a.style.cssText=l,a.tabIndex=-1,a.type="text/html",a.setAttribute("aria-hidden","true"),a.onload=function(){c||n(),function e(t,n){if(!t.contentDocument){var r=i(t);return r.checkForObjectDocumentTimeoutId&&window.clearTimeout(r.checkForObjectDocumentTimeoutId),void(r.checkForObjectDocumentTimeoutId=setTimeout((function(){r.checkForObjectDocumentTimeoutId=0,e(t,n)}),100))}n(t.contentDocument)}(this,(function(e){s(o)}))},r.isIE()||(a.data="about:blank"),i(o)&&(o.appendChild(a),i(o).object=a,r.isIE()&&(a.data="about:blank"))}i(o).startSize={width:f,height:d},n?n.add(h):h()}(o,s)},addListener:function(e,t){function n(){t(e)}if(r.isIE(8))i(e).object={proxy:n},e.attachEvent("onresize",n);else{var a=o(e);if(!a)throw new Error("Element is not detectable by this strategy.");a.contentDocument.defaultView.addEventListener("resize",n)}},uninstall:function(e){if(i(e)){var t=o(e);t&&(r.isIE(8)?e.detachEvent("onresize",t.proxy):e.removeChild(t),i(e).checkForObjectDocumentTimeoutId&&window.clearTimeout(i(e).checkForObjectDocumentTimeoutId),delete i(e).object)}}}}},70095:(e,t,n)=>{"use strict";var r=n(59780).forEach;e.exports=function(e){var t=(e=e||{}).reporter,n=e.batchProcessor,i=e.stateHandler.getState,a=(e.stateHandler.hasState,e.idHandler);if(!n)throw new Error("Missing required dependency: batchProcessor");if(!t)throw new Error("Missing required dependency: reporter.");var o=function(){var e=500,t=500,n=document.createElement("div");n.style.cssText=c(["position: absolute","width: 1000px","height: 1000px","visibility: hidden","margin: 0","padding: 0"]);var r=document.createElement("div");r.style.cssText=c(["position: absolute","width: 500px","height: 500px","overflow: scroll","visibility: none","top: -1500px","left: -1500px","visibility: hidden","margin: 0","padding: 0"]),r.appendChild(n),document.body.insertBefore(r,document.body.firstChild);var i=e-r.clientWidth,a=t-r.clientHeight;return document.body.removeChild(r),{width:i,height:a}}(),s="erd_scroll_detection_container";function l(e){!function(e,t,n){function r(n,r){r=r||function(t){e.head.appendChild(t)};var i=e.createElement("style");return i.innerHTML=n,i.id=t,r(i),i}if(!e.getElementById(t)){var i=n+"_animation",a=n+"_animation_active",o="/* Created by the element-resize-detector library. */\n";o+="."+n+" > div::-webkit-scrollbar { "+c(["display: none"])+" }\n\n",o+="."+a+" { "+c(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+i,"animation-name: "+i])+" }\n",o+="@-webkit-keyframes "+i+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }\n",r(o+="@keyframes "+i+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }")}}(e,"erd_scroll_detection_scrollbar_style",s)}function c(t){var n=e.important?" !important; ":"; ";return(t.join(n)+n).trim()}function u(e,n,r){if(e.addEventListener)e.addEventListener(n,r);else{if(!e.attachEvent)return t.error("[scroll] Don't know how to add event listeners.");e.attachEvent("on"+n,r)}}function f(e,n,r){if(e.removeEventListener)e.removeEventListener(n,r);else{if(!e.detachEvent)return t.error("[scroll] Don't know how to remove event listeners.");e.detachEvent("on"+n,r)}}function d(e){return i(e).container.childNodes[0].childNodes[0].childNodes[0]}function h(e){return i(e).container.childNodes[0].childNodes[0].childNodes[1]}return l(window.document),{makeDetectable:function(e,l,f){function p(){if(e.debug){var n=Array.prototype.slice.call(arguments);if(n.unshift(a.get(l),"Scroll: "),t.log.apply)t.log.apply(null,n);else for(var r=0;r<n.length;r++)t.log(n[r])}}function m(e){var t=i(e).container.childNodes[0],n=window.getComputedStyle(t);return!n.width||-1===n.width.indexOf("px")}function g(){var e=window.getComputedStyle(l),t={};return t.position=e.position,t.width=l.offsetWidth,t.height=l.offsetHeight,t.top=e.top,t.right=e.right,t.bottom=e.bottom,t.left=e.left,t.widthCSS=e.width,t.heightCSS=e.height,t}function v(){if(p("storeStyle invoked."),i(l)){var e=g();i(l).style=e}else p("Aborting because element has been uninstalled")}function y(e,t,n){i(e).lastWidth=t,i(e).lastHeight=n}function b(){return 2*o.width+1}function x(){return 2*o.height+1}function _(e){return e+10+b()}function w(e){return e+10+x()}function A(e,t,n){var r=d(e),i=h(e),a=_(t),o=w(n),s=function(e){return 2*e+b()}(t),l=function(e){return 2*e+x()}(n);r.scrollLeft=a,r.scrollTop=o,i.scrollLeft=s,i.scrollTop=l}function k(){var e=i(l).container;if(!e){(e=document.createElement("div")).className=s,e.style.cssText=c(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),i(l).container=e,function(e){e.className+=" "+s+"_animation_active"}(e),l.appendChild(e);var t=function(){i(l).onRendered&&i(l).onRendered()};u(e,"animationstart",t),i(l).onAnimationStart=t}return e}function E(){if(p("Injecting elements"),i(l)){!function(){var n=i(l).style;if("static"===n.position){l.style.setProperty("position","relative",e.important?"important":"");var r=function(e,t,n,r){var i=n[r];"auto"!==i&&"0"!==function(e){return e.replace(/[^-\d\.]/g,"")}(i)&&(e.warn("An element that is positioned static has style."+r+"="+i+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+r+" will be set to 0. Element: ",t),t.style[r]=0)};r(t,l,n,"top"),r(t,l,n,"right"),r(t,l,n,"bottom"),r(t,l,n,"left")}}();var n=i(l).container;n||(n=k());var r,a,f,d,h=o.width,m=o.height,g=c(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),v=c(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(["left: "+(r=(r=-(1+h))?r+"px":"0"),"top: "+(a=(a=-(1+m))?a+"px":"0"),"right: "+(d=(d=-h)?d+"px":"0"),"bottom: "+(f=(f=-m)?f+"px":"0")])),y=c(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),b=c(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),x=c(["position: absolute","left: 0","top: 0"]),_=c(["position: absolute","width: 200%","height: 200%"]),w=document.createElement("div"),A=document.createElement("div"),E=document.createElement("div"),T=document.createElement("div"),M=document.createElement("div"),S=document.createElement("div");w.dir="ltr",w.style.cssText=g,w.className=s,A.className=s,A.style.cssText=v,E.style.cssText=y,T.style.cssText=x,M.style.cssText=b,S.style.cssText=_,E.appendChild(T),M.appendChild(S),A.appendChild(E),A.appendChild(M),w.appendChild(A),n.appendChild(w),u(E,"scroll",C),u(M,"scroll",O),i(l).onExpandScroll=C,i(l).onShrinkScroll=O}else p("Aborting because element has been uninstalled");function C(){var e=i(l);e&&e.onExpand?e.onExpand():p("Aborting expand scroll handler: element has been uninstalled")}function O(){var e=i(l);e&&e.onShrink?e.onShrink():p("Aborting shrink scroll handler: element has been uninstalled")}}function T(){function o(t,n,r){var i=function(e){return d(e).childNodes[0]}(t),a=_(n),o=w(r);i.style.setProperty("width",a+"px",e.important?"important":""),i.style.setProperty("height",o+"px",e.important?"important":"")}function s(r){var s=l.offsetWidth,u=l.offsetHeight,f=s!==i(l).lastWidth||u!==i(l).lastHeight;p("Storing current size",s,u),y(l,s,u),n.add(0,(function(){if(f)if(i(l))if(c()){if(e.debug){var n=l.offsetWidth,r=l.offsetHeight;n===s&&r===u||t.warn(a.get(l),"Scroll: Size changed before updating detector elements.")}o(l,s,u)}else p("Aborting because element container has not been initialized");else p("Aborting because element has been uninstalled")})),n.add(1,(function(){i(l)?c()?A(l,s,u):p("Aborting because element container has not been initialized"):p("Aborting because element has been uninstalled")})),f&&r&&n.add(2,(function(){i(l)?c()?r():p("Aborting because element container has not been initialized"):p("Aborting because element has been uninstalled")}))}function c(){return!!i(l).container}function u(){p("notifyListenersIfNeeded invoked");var e=i(l);return void 0===i(l).lastNotifiedWidth&&e.lastWidth===e.startSize.width&&e.lastHeight===e.startSize.height?p("Not notifying: Size is the same as the start size, and there has been no notification yet."):e.lastWidth===e.lastNotifiedWidth&&e.lastHeight===e.lastNotifiedHeight?p("Not notifying: Size already notified"):(p("Current size not notified, notifying..."),e.lastNotifiedWidth=e.lastWidth,e.lastNotifiedHeight=e.lastHeight,void r(i(l).listeners,(function(e){e(l)})))}function f(){p("Scroll detected."),m(l)?p("Scroll event fired while unrendered. Ignoring..."):s(u)}if(p("registerListenersAndPositionElements invoked."),i(l)){i(l).onRendered=function(){if(p("startanimation triggered."),m(l))p("Ignoring since element is still unrendered...");else{p("Element rendered.");var e=d(l),t=h(l);0!==e.scrollLeft&&0!==e.scrollTop&&0!==t.scrollLeft&&0!==t.scrollTop||(p("Scrollbars out of sync. Updating detector elements..."),s(u))}},i(l).onExpand=f,i(l).onShrink=f;var g=i(l).style;o(l,g.width,g.height)}else p("Aborting because element has been uninstalled")}function M(){if(p("finalizeDomMutation invoked."),i(l)){var e=i(l).style;y(l,e.width,e.height),A(l,e.width,e.height)}else p("Aborting because element has been uninstalled")}function S(){f(l)}function C(){var e;p("Installing..."),i(l).listeners=[],e=g(),i(l).startSize={width:e.width,height:e.height},p("Element start size",i(l).startSize),n.add(0,v),n.add(1,E),n.add(2,T),n.add(3,M),n.add(4,S)}f||(f=l,l=e,e=null),e=e||{},p("Making detectable..."),!function(e){return!function(e){var t=e.getRootNode&&e.getRootNode().contains(e);return e===e.ownerDocument.body||e.ownerDocument.body.contains(e)||t}(e)||null===window.getComputedStyle(e)}(l)?C():(p("Element is detached"),k(),p("Waiting until element is attached..."),i(l).onRendered=function(){p("Element is now attached"),C()})},addListener:function(e,t){if(!i(e).listeners.push)throw new Error("Cannot add listener to an element that is not detectable.");i(e).listeners.push(t)},uninstall:function(e){var t=i(e);t&&(t.onExpandScroll&&f(d(e),"scroll",t.onExpandScroll),t.onShrinkScroll&&f(h(e),"scroll",t.onShrinkScroll),t.onAnimationStart&&f(t.container,"animationstart",t.onAnimationStart),t.container&&e.removeChild(t.container))},initDocument:l}}},57966:(e,t,n)=>{"use strict";var r=n(59780).forEach,i=n(20486),a=n(41741),o=n(50825),s=n(24188),l=n(81833),c=n(50325),u=n(16770),f=n(77382),d=n(39641),h=n(70095);function p(e){return Array.isArray(e)||void 0!==e.length}function m(e){if(Array.isArray(e))return e;var t=[];return r(e,(function(e){t.push(e)})),t}function g(e){return e&&1===e.nodeType}function v(e,t,n){var r=e[t];return null==r&&void 0!==n?n:r}e.exports=function(e){var t;if((e=e||{}).idHandler)t={get:function(t){return e.idHandler.get(t,!0)},set:e.idHandler.set};else{var n=o(),y=s({idGenerator:n,stateHandler:f});t=y}var b=e.reporter;b||(b=l(!1===b));var x=v(e,"batchProcessor",u({reporter:b})),_={};_.callOnAdd=!!v(e,"callOnAdd",!0),_.debug=!!v(e,"debug",!1);var w,A=a(t),k=i({stateHandler:f}),E=v(e,"strategy","object"),T=v(e,"important",!1),M={reporter:b,batchProcessor:x,stateHandler:f,idHandler:t,important:T};if("scroll"===E&&(c.isLegacyOpera()?(b.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),E="object"):c.isIE(9)&&(b.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),E="object")),"scroll"===E)w=h(M);else{if("object"!==E)throw new Error("Invalid strategy name: "+E);w=d(M)}var S={};return{listenTo:function(e,n,i){function a(e){var t=A.get(e);r(t,(function(t){t(e)}))}function o(e,t,n){A.add(t,n),e&&n(t)}if(i||(i=n,n=e,e={}),!n)throw new Error("At least one element required.");if(!i)throw new Error("Listener required.");if(g(n))n=[n];else{if(!p(n))return b.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");n=m(n)}var s=0,l=v(e,"callOnAdd",_.callOnAdd),c=v(e,"onReady",(function(){})),u=v(e,"debug",_.debug);r(n,(function(e){f.getState(e)||(f.initState(e),t.set(e));var d=t.get(e);if(u&&b.log("Attaching listener to element",d,e),!k.isDetectable(e))return u&&b.log(d,"Not detectable."),k.isBusy(e)?(u&&b.log(d,"System busy making it detectable"),o(l,e,i),S[d]=S[d]||[],void S[d].push((function(){++s===n.length&&c()}))):(u&&b.log(d,"Making detectable..."),k.markBusy(e,!0),w.makeDetectable({debug:u,important:T},e,(function(e){if(u&&b.log(d,"onElementDetectable"),f.getState(e)){k.markAsDetectable(e),k.markBusy(e,!1),w.addListener(e,a),o(l,e,i);var t=f.getState(e);if(t&&t.startSize){var h=e.offsetWidth,p=e.offsetHeight;t.startSize.width===h&&t.startSize.height===p||a(e)}S[d]&&r(S[d],(function(e){e()}))}else u&&b.log(d,"Element uninstalled before being detectable.");delete S[d],++s===n.length&&c()})));u&&b.log(d,"Already detecable, adding listener."),o(l,e,i),s++})),s===n.length&&c()},removeListener:A.removeListener,removeAllListeners:A.removeAllListeners,uninstall:function(e){if(!e)return b.error("At least one element is required.");if(g(e))e=[e];else{if(!p(e))return b.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");e=m(e)}r(e,(function(e){A.removeAllListeners(e),w.uninstall(e),f.cleanState(e)}))},initDocument:function(e){w.initDocument&&w.initDocument(e)}}}},20486:e=>{"use strict";e.exports=function(e){var t=e.stateHandler.getState;return{isDetectable:function(e){var n=t(e);return n&&!!n.isDetectable},markAsDetectable:function(e){t(e).isDetectable=!0},isBusy:function(e){return!!t(e).busy},markBusy:function(e,n){t(e).busy=!!n}}}},50825:e=>{"use strict";e.exports=function(){var e=1;return{generate:function(){return e++}}}},24188:e=>{"use strict";e.exports=function(e){var t=e.idGenerator,n=e.stateHandler.getState;return{get:function(e){var t=n(e);return t&&void 0!==t.id?t.id:null},set:function(e){var r=n(e);if(!r)throw new Error("setId required the element to have a resize detection state.");var i=t.generate();return r.id=i,i}}}},41741:e=>{"use strict";e.exports=function(e){var t={};function n(n){var r=e.get(n);return void 0===r?[]:t[r]||[]}return{get:n,add:function(n,r){var i=e.get(n);t[i]||(t[i]=[]),t[i].push(r)},removeListener:function(e,t){for(var r=n(e),i=0,a=r.length;i<a;++i)if(r[i]===t){r.splice(i,1);break}},removeAllListeners:function(e){var t=n(e);t&&(t.length=0)}}}},81833:e=>{"use strict";e.exports=function(e){function t(){}var n={log:t,warn:t,error:t};if(!e&&window.console){var r=function(e,t){e[t]=function(){var e=console[t];if(e.apply)e.apply(console,arguments);else for(var n=0;n<arguments.length;n++)e(arguments[n])}};r(n,"log"),r(n,"warn"),r(n,"error")}return n}},77382:e=>{"use strict";var t="_erd";function n(e){return e[t]}e.exports={initState:function(e){return e[t]={},n(e)},getState:n,cleanState:function(e){delete e[t]}}},86723:(e,t,n)=>{var r=n(29777);e.exports=function(e,t){var n,i=[],a=[],o=[],s={},l=[];function c(e){o[e]=!1,s.hasOwnProperty(e)&&Object.keys(s[e]).forEach((function(t){delete s[e][t],o[t]&&c(t)}))}function u(e){var t,r,i=!1;for(a.push(e),o[e]=!0,t=0;t<l[e].length;t++)(r=l[e][t])===n?(f(n,a),i=!0):o[r]||(i=u(r));if(i)c(e);else for(t=0;t<l[e].length;t++){r=l[e][t];var d=s[r];d||(d={},s[r]=d),d[r]=!0}return a.pop(),i}function f(e,n){var r=[].concat(n).concat(e);t?t(r):i.push(r)}function d(t){!function(t){for(var n=0;n<e.length;n++)(n<t||!e[n])&&(e[n]=[]),e[n]=e[n].filter((function(e){return e>=t}))}(t);for(var n,i=r(e).components.filter((function(e){return e.length>1})),a=1/0,o=0;o<i.length;o++)for(var s=0;s<i[o].length;s++)i[o][s]<a&&(a=i[o][s],n=o);var l=i[n];if(!l)return!1;var c=e.map((function(e,t){return-1===l.indexOf(t)?[]:e.filter((function(e){return-1!==l.indexOf(e)}))}));return{leastVertex:a,adjList:c}}n=0;for(var h=e.length;n<h;){var p=d(n);if(n=p.leastVertex,l=p.adjList){for(var m=0;m<l.length;m++)for(var g=0;g<l[m].length;g++){var v=l[m][g];o[+v]=!1,s[v]={}}u(n),n+=1}else n=h}return t?void 0:i}},96513:(e,t,n)=>{"use strict";var r=n(48622);e.exports=function(){return r(this).length=0,this}},60981:(e,t,n)=>{"use strict";e.exports=n(49068)()?Array.from:n(19840)},49068:e=>{"use strict";e.exports=function(){var e,t,n=Array.from;return"function"==typeof n&&(t=n(e=["raz","dwa"]),Boolean(t&&t!==e&&"dwa"===t[1]))}},19840:(e,t,n)=>{"use strict";var r=n(91084).iterator,i=n(30970),a=n(48984),o=n(3785),s=n(78763),l=n(48622),c=n(95794),u=n(60388),f=Array.isArray,d=Function.prototype.call,h={configurable:!0,enumerable:!0,writable:!0,value:null},p=Object.defineProperty;e.exports=function(e){var t,n,m,g,v,y,b,x,_,w,A=arguments[1],k=arguments[2];if(e=Object(l(e)),c(A)&&s(A),this&&this!==Array&&a(this))t=this;else{if(!A){if(i(e))return 1!==(v=e.length)?Array.apply(null,e):((g=new Array(1))[0]=e[0],g);if(f(e)){for(g=new Array(v=e.length),n=0;n<v;++n)g[n]=e[n];return g}}g=[]}if(!f(e))if(void 0!==(_=e[r])){for(b=s(_).call(e),t&&(g=new t),x=b.next(),n=0;!x.done;)w=A?d.call(A,k,x.value,n):x.value,t?(h.value=w,p(g,n,h)):g[n]=w,x=b.next(),++n;v=n}else if(u(e)){for(v=e.length,t&&(g=new t),n=0,m=0;n<v;++n)w=e[n],n+1<v&&(y=w.charCodeAt(0))>=55296&&y<=56319&&(w+=e[++n]),w=A?d.call(A,k,w,m):w,t?(h.value=w,p(g,m,h)):g[m]=w,++m;v=m}if(void 0===v)for(v=o(e.length),t&&(g=new t(v)),n=0;n<v;++n)w=A?d.call(A,k,e[n],n):e[n],t?(h.value=w,p(g,n,h)):g[n]=w;return t&&(h.value=null,g.length=v),g}},30970:e=>{"use strict";var t=Object.prototype.toString,n=t.call(function(){return arguments}());e.exports=function(e){return t.call(e)===n}},48984:e=>{"use strict";var t=Object.prototype.toString,n=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);e.exports=function(e){return"function"==typeof e&&n(t.call(e))}},5675:e=>{"use strict";e.exports=function(){}},37623:(e,t,n)=>{"use strict";e.exports=n(77902)()?Math.sign:n(67446)},77902:e=>{"use strict";e.exports=function(){var e=Math.sign;return"function"==typeof e&&(1===e(10)&&-1===e(-20))}},67446:e=>{"use strict";e.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:e>0?1:-1}},87198:(e,t,n)=>{"use strict";var r=n(37623),i=Math.abs,a=Math.floor;e.exports=function(e){return isNaN(e)?0:0!==(e=Number(e))&&isFinite(e)?r(e)*a(i(e)):e}},3785:(e,t,n)=>{"use strict";var r=n(87198),i=Math.max;e.exports=function(e){return i(0,r(e))}},85599:(e,t,n)=>{"use strict";var r=n(78763),i=n(48622),a=Function.prototype.bind,o=Function.prototype.call,s=Object.keys,l=Object.prototype.propertyIsEnumerable;e.exports=function(e,t){return function(n,c){var u,f=arguments[2],d=arguments[3];return n=Object(i(n)),r(c),u=s(n),d&&u.sort("function"==typeof d?a.call(d,n):void 0),"function"!=typeof e&&(e=u[e]),o.call(e,u,(function(e,r){return l.call(n,e)?o.call(c,f,n[e],e,n,r):t}))}}},53892:(e,t,n)=>{"use strict";e.exports=n(83179)()?Object.assign:n(38411)},83179:e=>{"use strict";e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},38411:(e,t,n)=>{"use strict";var r=n(71613),i=n(48622),a=Math.max;e.exports=function(e,t){var n,o,s,l=a(arguments.length,2);for(e=Object(i(e)),s=function(r){try{e[r]=t[r]}catch(e){n||(n=e)}},o=1;o<l;++o)r(t=arguments[o]).forEach(s);if(void 0!==n)throw n;return e}},64395:(e,t,n)=>{"use strict";var r=n(60981),i=n(53892),a=n(48622);e.exports=function(e){var t=Object(a(e)),n=arguments[1],o=Object(arguments[2]);if(t!==e&&!n)return t;var s={};return n?r(n,(function(t){(o.ensure||t in e)&&(s[t]=e[t])})):i(s,e),s}},86654:(e,t,n)=>{"use strict";var r,i,a,o,s=Object.create;n(3189)()||(r=n(31401)),e.exports=r?1!==r.level?s:(i={},a={},o={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach((function(e){a[e]="__proto__"!==e?o:{configurable:!0,enumerable:!1,writable:!0,value:void 0}})),Object.defineProperties(i,a),Object.defineProperty(r,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:i}),function(e,t){return s(null===e?i:e,t)}):s},72033:(e,t,n)=>{"use strict";e.exports=n(85599)("forEach")},56444:(e,t,n)=>{"use strict";var r=n(95794),i={function:!0,object:!0};e.exports=function(e){return r(e)&&i[typeof e]||!1}},95794:(e,t,n)=>{"use strict";var r=n(5675)();e.exports=function(e){return e!==r&&null!==e}},71613:(e,t,n)=>{"use strict";e.exports=n(27268)()?Object.keys:n(34168)},27268:e=>{"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},34168:(e,t,n)=>{"use strict";var r=n(95794),i=Object.keys;e.exports=function(e){return i(r(e)?Object(e):e)}},850:(e,t,n)=>{"use strict";var r=n(78763),i=n(72033),a=Function.prototype.call;e.exports=function(e,t){var n={},o=arguments[2];return r(t),i(e,(function(e,r,i,s){n[r]=a.call(t,o,e,r,i,s)})),n}},22151:(e,t,n)=>{"use strict";var r=n(95794),i=Array.prototype.forEach,a=Object.create;e.exports=function(e){var t=a(null);return i.call(arguments,(function(e){r(e)&&function(e,t){var n;for(n in e)t[n]=e[n]}(Object(e),t)})),t}},70910:(e,t,n)=>{"use strict";e.exports=n(3189)()?Object.setPrototypeOf:n(31401)},3189:e=>{"use strict";var t=Object.create,n=Object.getPrototypeOf,r={};e.exports=function(){var e=Object.setPrototypeOf;return"function"==typeof e&&n(e((arguments[0]||t)(null),r))===r}},31401:(e,t,n)=>{"use strict";var r,i,a,o,s=n(56444),l=n(48622),c=Object.prototype.isPrototypeOf,u=Object.defineProperty,f={configurable:!0,enumerable:!1,writable:!0,value:void 0};r=function(e,t){if(l(e),null===t||s(t))return e;throw new TypeError("Prototype must be null or an object")},e.exports=(i=function(){var e,t=Object.create(null),n={},r=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(r){try{(e=r.set).call(t,n)}catch(e){}if(Object.getPrototypeOf(t)===n)return{set:e,level:2}}return t.__proto__=n,Object.getPrototypeOf(t)===n?{level:2}:((t={}).__proto__=n,Object.getPrototypeOf(t)===n&&{level:1})}(),i?(2===i.level?i.set?(o=i.set,a=function(e,t){return o.call(r(e,t),t),e}):a=function(e,t){return r(e,t).__proto__=t,e}:a=function e(t,n){var i;return r(t,n),(i=c.call(e.nullPolyfill,t))&&delete e.nullPolyfill.__proto__,null===n&&(n=e.nullPolyfill),t.__proto__=n,i&&u(e.nullPolyfill,"__proto__",f),t},Object.defineProperty(a,"level",{configurable:!1,enumerable:!1,writable:!1,value:i.level})):null),n(86654)},78763:e=>{"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},31256:(e,t,n)=>{"use strict";var r=n(56444);e.exports=function(e){if(!r(e))throw new TypeError(e+" is not an Object");return e}},48622:(e,t,n)=>{"use strict";var r=n(95794);e.exports=function(e){if(!r(e))throw new TypeError("Cannot use null or undefined");return e}},25462:(e,t,n)=>{"use strict";e.exports=n(99837)()?String.prototype.contains:n(30065)},99837:e=>{"use strict";var t="razdwatrzy";e.exports=function(){return"function"==typeof t.contains&&(!0===t.contains("dwa")&&!1===t.contains("foo"))}},30065:e=>{"use strict";var t=String.prototype.indexOf;e.exports=function(e){return t.call(this,e,arguments[1])>-1}},60388:e=>{"use strict";var t=Object.prototype.toString,n=t.call("");e.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||t.call(e)===n)||!1}},55645:e=>{"use strict";var t=Object.create(null),n=Math.random;e.exports=function(){var e;do{e=n().toString(36).slice(2)}while(t[e]);return e}},89275:(e,t,n)=>{"use strict";var r,i=n(70910),a=n(25462),o=n(28167),s=n(91084),l=n(86918),c=Object.defineProperty;r=e.exports=function(e,t){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");l.call(this,e),t=t?a.call(t,"key+value")?"key+value":a.call(t,"key")?"key":"value":"value",c(this,"__kind__",o("",t))},i&&i(r,l),delete r.prototype.constructor,r.prototype=Object.create(l.prototype,{_resolve:o((function(e){return"value"===this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,this.__list__[e]]:e}))}),c(r.prototype,s.toStringTag,o("c","Array Iterator"))},26399:(e,t,n)=>{"use strict";var r=n(30970),i=n(78763),a=n(60388),o=n(21362),s=Array.isArray,l=Function.prototype.call,c=Array.prototype.some;e.exports=function(e,t){var n,u,f,d,h,p,m,g,v=arguments[2];if(s(e)||r(e)?n="array":a(e)?n="string":e=o(e),i(t),f=function(){d=!0},"array"!==n)if("string"!==n)for(u=e.next();!u.done;){if(l.call(t,v,u.value,f),d)return;u=e.next()}else for(p=e.length,h=0;h<p&&(m=e[h],h+1<p&&(g=m.charCodeAt(0))>=55296&&g<=56319&&(m+=e[++h]),l.call(t,v,m,f),!d);++h);else c.call(e,(function(e){return l.call(t,v,e,f),d}))}},21362:(e,t,n)=>{"use strict";var r=n(30970),i=n(60388),a=n(89275),o=n(39141),s=n(87235),l=n(91084).iterator;e.exports=function(e){return"function"==typeof s(e)[l]?e[l]():r(e)?new a(e):i(e)?new o(e):new a(e)}},86918:(e,t,n)=>{"use strict";var r,i=n(96513),a=n(53892),o=n(78763),s=n(48622),l=n(28167),c=n(22418),u=n(91084),f=Object.defineProperty,d=Object.defineProperties;e.exports=r=function(e,t){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");d(this,{__list__:l("w",s(e)),__context__:l("w",t),__nextIndex__:l("w",0)}),t&&(o(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear))},delete r.prototype.constructor,d(r.prototype,a({_next:l((function(){var e;if(this.__list__)return this.__redo__&&void 0!==(e=this.__redo__.shift())?e:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()})),next:l((function(){return this._createResult(this._next())})),_createResult:l((function(e){return void 0===e?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}})),_resolve:l((function(e){return this.__list__[e]})),_unBind:l((function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)})),toString:l((function(){return"[object "+(this[u.toStringTag]||"Object")+"]"}))},c({_onAdd:l((function(e){e>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach((function(t,n){t>=e&&(this.__redo__[n]=++t)}),this),this.__redo__.push(e)):f(this,"__redo__",l("c",[e])))})),_onDelete:l((function(e){var t;e>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(t=this.__redo__.indexOf(e))&&this.__redo__.splice(t,1),this.__redo__.forEach((function(t,n){t>e&&(this.__redo__[n]=--t)}),this)))})),_onClear:l((function(){this.__redo__&&i.call(this.__redo__),this.__nextIndex__=0}))}))),f(r.prototype,u.iterator,l((function(){return this})))},9115:(e,t,n)=>{"use strict";var r=n(30970),i=n(95794),a=n(60388),o=n(91084).iterator,s=Array.isArray;e.exports=function(e){return!!i(e)&&(!!s(e)||(!!a(e)||(!!r(e)||"function"==typeof e[o])))}},39141:(e,t,n)=>{"use strict";var r,i=n(70910),a=n(28167),o=n(91084),s=n(86918),l=Object.defineProperty;r=e.exports=function(e){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");e=String(e),s.call(this,e),l(this,"__length__",a("",e.length))},i&&i(r,s),delete r.prototype.constructor,r.prototype=Object.create(s.prototype,{_next:a((function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()})),_resolve:a((function(e){var t,n=this.__list__[e];return this.__nextIndex__===this.__length__?n:(t=n.charCodeAt(0))>=55296&&t<=56319?n+this.__list__[this.__nextIndex__++]:n}))}),l(r.prototype,o.toStringTag,a("c","String Iterator"))},87235:(e,t,n)=>{"use strict";var r=n(9115);e.exports=function(e){if(!r(e))throw new TypeError(e+" is not iterable");return e}},91084:(e,t,n)=>{"use strict";e.exports=n(28803)()?n(17777).Symbol:n(80373)},28803:(e,t,n)=>{"use strict";var r=n(17777),i={object:!0,symbol:!0};e.exports=function(){var e,t=r.Symbol;if("function"!=typeof t)return!1;e=t("test symbol");try{String(e)}catch(e){return!1}return!!i[typeof t.iterator]&&(!!i[typeof t.toPrimitive]&&!!i[typeof t.toStringTag])}},94575:e=>{"use strict";e.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&("Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag]))}},22509:(e,t,n)=>{"use strict";var r=n(28167),i=Object.create,a=Object.defineProperty,o=Object.prototype,s=i(null);e.exports=function(e){for(var t,n,i=0;s[e+(i||"")];)++i;return s[e+=i||""]=!0,a(o,t="@@"+e,r.gs(null,(function(e){n||(n=!0,a(this,t,r(e)),n=!1)}))),t}},4789:(e,t,n)=>{"use strict";var r=n(28167),i=n(17777).Symbol;e.exports=function(e){return Object.defineProperties(e,{hasInstance:r("",i&&i.hasInstance||e("hasInstance")),isConcatSpreadable:r("",i&&i.isConcatSpreadable||e("isConcatSpreadable")),iterator:r("",i&&i.iterator||e("iterator")),match:r("",i&&i.match||e("match")),replace:r("",i&&i.replace||e("replace")),search:r("",i&&i.search||e("search")),species:r("",i&&i.species||e("species")),split:r("",i&&i.split||e("split")),toPrimitive:r("",i&&i.toPrimitive||e("toPrimitive")),toStringTag:r("",i&&i.toStringTag||e("toStringTag")),unscopables:r("",i&&i.unscopables||e("unscopables"))})}},17686:(e,t,n)=>{"use strict";var r=n(28167),i=n(55889),a=Object.create(null);e.exports=function(e){return Object.defineProperties(e,{for:r((function(t){return a[t]?a[t]:a[t]=e(String(t))})),keyFor:r((function(e){var t;for(t in i(e),a)if(a[t]===e)return t}))})}},80373:(e,t,n)=>{"use strict";var r,i,a,o=n(28167),s=n(55889),l=n(17777).Symbol,c=n(22509),u=n(4789),f=n(17686),d=Object.create,h=Object.defineProperties,p=Object.defineProperty;if("function"==typeof l)try{String(l()),a=!0}catch(e){}else l=null;i=function(e){if(this instanceof i)throw new TypeError("Symbol is not a constructor");return r(e)},e.exports=r=function e(t){var n;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return a?l(t):(n=d(i.prototype),t=void 0===t?"":String(t),h(n,{__description__:o("",t),__name__:o("",c(t))}))},u(r),f(r),h(i.prototype,{constructor:o(r),toString:o("",(function(){return this.__name__}))}),h(r.prototype,{toString:o((function(){return"Symbol ("+s(this).__description__+")"})),valueOf:o((function(){return s(this)}))}),p(r.prototype,r.toPrimitive,o("",(function(){var e=s(this);return"symbol"==typeof e?e:e.toString()}))),p(r.prototype,r.toStringTag,o("c","Symbol")),p(i.prototype,r.toStringTag,o("c",r.prototype[r.toStringTag])),p(i.prototype,r.toPrimitive,o("c",r.prototype[r.toPrimitive]))},55889:(e,t,n)=>{"use strict";var r=n(94575);e.exports=function(e){if(!r(e))throw new TypeError(e+" is not a symbol");return e}},28355:(e,t,n)=>{"use strict";e.exports=n(41194)()?WeakMap:n(49280)},41194:e=>{"use strict";e.exports=function(){var e,t;if("function"!=typeof WeakMap)return!1;try{e=new WeakMap([[t={},"one"],[{},"two"],[{},"three"]])}catch(e){return!1}return"[object WeakMap]"===String(e)&&("function"==typeof e.set&&(e.set({},1)===e&&("function"==typeof e.delete&&("function"==typeof e.has&&"one"===e.get(t)))))}},25174:e=>{"use strict";e.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},49280:(e,t,n)=>{"use strict";var r,i=n(95794),a=n(70910),o=n(31256),s=n(48622),l=n(55645),c=n(28167),u=n(21362),f=n(26399),d=n(91084).toStringTag,h=n(25174),p=Array.isArray,m=Object.defineProperty,g=Object.prototype.hasOwnProperty,v=Object.getPrototypeOf;e.exports=r=function(){var e,t=arguments[0];if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");return e=h&&a&&WeakMap!==r?a(new WeakMap,v(this)):this,i(t)&&(p(t)||(t=u(t))),m(e,"__weakMapData__",c("c","$weakMap$"+l())),t?(f(t,(function(t){s(t),e.set(t[0],t[1])})),e):e},h&&(a&&a(r,WeakMap),r.prototype=Object.create(WeakMap.prototype,{constructor:c(r)})),Object.defineProperties(r.prototype,{delete:c((function(e){return!!g.call(o(e),this.__weakMapData__)&&(delete e[this.__weakMapData__],!0)})),get:c((function(e){if(g.call(o(e),this.__weakMapData__))return e[this.__weakMapData__]})),has:c((function(e){return g.call(o(e),this.__weakMapData__)})),set:c((function(e,t){return m(o(e),this.__weakMapData__,c("c",t)),this})),toString:c((function(){return"[object WeakMap]"}))}),m(r.prototype,d,c("c","WeakMap"))},74815:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,a),r(n)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}m(e,t,a,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&m(e,"error",t,n)}(e,i,{once:!0})}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var o=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function c(e,t,n,r){var i,a,o,c;if(s(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]),void 0===o)o=a[t]=n,++e._eventsCount;else if("function"==typeof o?o=a[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=l(e))>0&&o.length>i&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,c=u,console&&console.warn&&console.warn(c)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=u.bind(r);return i.listener=n,r.wrapFn=i,i}function d(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):p(i,i.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function m(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(a){r.once&&e.removeEventListener(t,i),n(a)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,a=this._events;if(void 0!==a)i=i&&void 0===a.error;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=a[e];if(void 0===l)return!1;if("function"==typeof l)r(l,this,t);else{var c=l.length,u=p(l,c);for(n=0;n<c;++n)r(u[n],this,t)}return!0},a.prototype.addListener=function(e,t){return c(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return c(this,e,t,!0)},a.prototype.once=function(e,t){return s(t),this.on(e,f(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,f(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,i,a,o;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return d(this,e,!0)},a.prototype.rawListeners=function(e){return d(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},a.prototype.listenerCount=h,a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},20519:e=>{var t=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return t()}try{return __global__||t()}finally{delete Object.prototype.__global__}}()},17777:(e,t,n)=>{"use strict";e.exports=n(38312)()?globalThis:n(20519)},38312:e=>{"use strict";e.exports=function(){return"object"==typeof globalThis&&(!!globalThis&&globalThis.Array===Array)}},67329:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,a;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(a=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,a[i]))return!1;for(i=r;0!=i--;){var o=a[i];if(!e(t[o],n[o]))return!1}return!0}return t!=t&&n!=n}},564:(e,t,n)=>{class r extends Error{constructor(e,t,n){if(super(t),null==t&&null==n&&r.errorMap.has(e))return r.errorMap.get(e);null==t&&null==n?(this._error=e,r.errorMap.set(e,this)):this._error=e,this.details=n}get error(){return this._error}get name(){return this._error}equals(e){return e instanceof r&&e._error===this._error}toString(){return this._error}}r.errorMap=new Map,r.DIV0=new r("#DIV/0!"),r.NA=new r("#N/A"),r.NAME=new r("#NAME?"),r.NULL=new r("#NULL!"),r.NUM=new r("#NUM!"),r.REF=new r("#REF!"),r.VALUE=new r("#VALUE!"),r.NOT_IMPLEMENTED=e=>new r("#NAME?",`Function ${e} is not implemented.`),r.TOO_MANY_ARGS=e=>new r("#N/A",`Function ${e} has too many arguments.`),r.ARG_MISSING=e=>{const{Types:t}=n(86967);return new r("#N/A",`Argument type ${e.map((e=>t[e])).join(", ")} is missing.`)},r.ERROR=(e,t)=>new r("#ERROR!",e,t),e.exports=r},74046:(e,t,n)=>{const r=n(564),{FormulaHelpers:i,Types:a}=n(86967),o=i,s=864e5,l=new Date(Date.UTC(1900,0,1)),c=[void 0,0,1,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,1,2,3,4,5,6,0],u=[void 0,[1,2,3,4,5,6,7],[7,1,2,3,4,5,6],[6,0,1,2,3,4,5],void 0,void 0,void 0,void 0,void 0,void 0,void 0,[7,1,2,3,4,5,6],[6,7,1,2,3,4,5],[5,6,7,1,2,3,4],[4,5,6,7,1,2,3],[3,4,5,6,7,1,2],[2,3,4,5,6,7,1],[1,2,3,4,5,6,7]],f=[void 0,[6,0],[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],void 0,void 0,void 0,[0],[1],[2],[3],[4],[5],[6]],d=/^\s*(\d\d?)\s*(:\s*\d\d?)?\s*(:\s*\d\d?)?\s*(pm|am)?\s*$/i,h=/^\s*((\d\d?)\s*([-\/])\s*(\d\d?))([\d:.apm\s]*)$/i,p=/^\s*((\d\d?)\s*([-/])\s*(jan\w*|feb\w*|mar\w*|apr\w*|may\w*|jun\w*|jul\w*|aug\w*|sep\w*|oct\w*|nov\w*|dec\w*))([\d:.apm\s]*)$/i,m=/^\s*((jan\w*|feb\w*|mar\w*|apr\w*|may\w*|jun\w*|jul\w*|aug\w*|sep\w*|oct\w*|nov\w*|dec\w*)\s*([-/])\s*(\d\d?))([\d:.apm\s]*)$/i;function g(e){const t=e>-22038912e5?2:1;return Math.floor((e-l)/864e5)+t}function v(e){if(e instanceof Date)return{date:e};e=o.accept(e);let t,n=!0;return isNaN(e)?(t=function(e){const t=e.match(d);if(!t)return;const n=t[2]?t[2]:":00",r=t[3]?t[3]:":00",i=t[4]?" "+t[4]:"",a=new Date(Date.parse(`1/1/1900 ${t[1]+n+r+i} UTC`));let o=new Date;return o=new Date(Date.UTC(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds(),o.getMilliseconds())),new Date(Date.UTC(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()))}(e),t?n=!1:t=function(e){const t=e.match(h),n=e.match(p),r=e.match(m);return t?e=t[1]+t[3]+(new Date).getFullYear()+t[5]:n?e=n[1]+n[3]+(new Date).getFullYear()+n[5]:r&&(e=r[1]+r[3]+(new Date).getFullYear()+r[5]),new Date(Date.parse(`${e} UTC`))}(e)):t=function(e){if(e<0)throw r.VALUE;return e<=60?new Date(l.getTime()+864e5*(e-1)):new Date(l.getTime()+864e5*(e-2))}(e=Number(e)),{date:t,isDateGiven:n}}function y(e){return v(e).date}function b(e,t){return e.getUTCFullYear()===t.getUTCFullYear()&&e.getUTCMonth()===t.getUTCMonth()&&e.getUTCDate()===t.getUTCDate()}const x={DATE:(e,t,n)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.NUMBER),n=o.accept(n,a.NUMBER),e<0||e>=1e4)throw r.NUM;return e<1900&&(e+=1900),g(Date.UTC(e,t-1,n))},DATEDIF:(e,t,n)=>{if(e=y(e),t=y(t),n=o.accept(n,a.STRING).toLowerCase(),e>t)throw r.NUM;const i=t.getUTCFullYear()-e.getUTCFullYear(),l=t.getUTCMonth()-e.getUTCMonth(),c=t.getUTCDate()-e.getUTCDate();let u;switch(n){case"y":return u=l<0||0===l&&c<0?-1:0,u+i;case"m":return u=c<0?-1:0,12*i+l+u;case"d":return Math.floor(t-e)/s;case"md":return e.setUTCFullYear(t.getUTCFullYear()),c<0?e.setUTCMonth(t.getUTCMonth()-1):e.setUTCMonth(t.getUTCMonth()),Math.floor(t-e)/s;case"ym":return u=c<0?-1:0,(u+12*i+l)%12;case"yd":return l<0||0===l&&c<0?e.setUTCFullYear(t.getUTCFullYear()-1):e.setUTCFullYear(t.getUTCFullYear()),Math.floor(t-e)/s}},DATEVALUE:e=>{e=o.accept(e,a.STRING);const{date:t,isDateGiven:n}=v(e);if(!n)return 0;const i=g(t);if(i<0||i>2958465)throw r.VALUE;return i},DAY:e=>y(e).getUTCDate(),DAYS:(e,t)=>{e=y(e);let n=0;return(t=y(t))<-22038912e5&&-22038912e5<e&&(n=1),Math.floor(e-t)/s+n},DAYS360:(e,t,n)=>{e=y(e),t=y(t),n=o.accept(n,a.BOOLEAN,!1),31===e.getUTCDate()&&e.setUTCDate(30),!n&&e.getUTCDate()<30&&t.getUTCDate()>30?t.setUTCMonth(t.getUTCMonth()+1,1):31===t.getUTCDate()&&t.setUTCDate(30);const r=t.getUTCFullYear()-e.getUTCFullYear();return 30*(t.getUTCMonth()-e.getUTCMonth())+(t.getUTCDate()-e.getUTCDate())+12*r*30},EDATE:(e,t)=>(e=y(e),t=o.accept(t,a.NUMBER),e.setUTCMonth(e.getUTCMonth()+t),g(e)),EOMONTH:(e,t)=>(e=y(e),t=o.accept(t,a.NUMBER),e.setUTCMonth(e.getUTCMonth()+t+1,0),g(e)),HOUR:e=>y(e).getUTCHours(),ISOWEEKNUM:e=>{const t=y(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),r=n.getUTCDay();n.setUTCDate(n.getUTCDate()+4-r);const i=new Date(Date.UTC(n.getUTCFullYear(),0,1));return Math.ceil(((n-i)/864e5+1)/7)},MINUTE:e=>y(e).getUTCMinutes(),MONTH:e=>y(e).getUTCMonth()+1,NETWORKDAYS:(e,t,n)=>{let r=1;if((e=y(e))>(t=y(t))){r=-1;const n=e;e=t,t=n}const i=[];null!=n&&o.flattenParams([n],a.NUMBER,!1,(e=>{i.push(y(e))}));let s=0;for(;e<=t;){if(0!==e.getUTCDay()&&6!==e.getUTCDay()){let t=!1;for(let n=0;n<i.length;n++)if(b(e,i[n])){t=!0;break}t||s++}e.setUTCDate(e.getUTCDate()+1)}return r*s},"NETWORKDAYS.INTL":(e,t,n,i)=>{let s=1;if((e=y(e))>(t=y(t))){s=-1;const n=e;e=t,t=n}if("1111111"===(n=o.accept(n,null,1)))return 0;if("string"==typeof n&&Number(n).toString()!==n){if(7!==n.length)throw r.VALUE;n=n.charAt(6)+n.slice(0,6);const e=[];for(let t=0;t<n.length;t++)"1"===n.charAt(t)&&e.push(t);n=e}else{if("number"!=typeof n)throw r.VALUE;n=f[n]}const l=[];null!=i&&o.flattenParams([i],a.NUMBER,!1,(e=>{l.push(y(e))}));let c=0;for(;e<=t;){let t=!1;for(let r=0;r<n.length;r++)if(n[r]===e.getUTCDay()){t=!0;break}if(!t){let t=!1;for(let n=0;n<l.length;n++)if(b(e,l[n])){t=!0;break}t||c++}e.setUTCDate(e.getUTCDate()+1)}return s*c},NOW:()=>{const e=new Date;return g(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()))+(3600*e.getHours()+60*e.getMinutes()+e.getSeconds())/86400},SECOND:e=>y(e).getUTCSeconds(),TIME:(e,t,n)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.NUMBER),n=o.accept(n,a.NUMBER),e<0||e>32767||t<0||t>32767||n<0||n>32767)throw r.NUM;return(3600*e+60*t+n)/86400},TIMEVALUE:e=>(3600*(e=y(e)).getUTCHours()+60*e.getUTCMinutes()+e.getUTCSeconds())/86400,TODAY:()=>{const e=new Date;return g(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()))},WEEKDAY:(e,t)=>{const n=y(e);t=o.accept(t,a.NUMBER,1);const i=n.getUTCDay(),s=u[t];if(!s)throw r.NUM;return s[i]},WEEKNUM:(e,t)=>{const n=y(e);if(21===(t=o.accept(t,a.NUMBER,1)))return x.ISOWEEKNUM(e);const r=c[t],i=new Date(Date.UTC(n.getUTCFullYear(),0,1)),s=i.getUTCDay()<r?1:0;return Math.ceil(((n-i)/864e5+1)/7)+s},WORKDAY:(e,t,n)=>x["WORKDAY.INTL"](e,t,1,n),"WORKDAY.INTL":(e,t,n,i)=>{if(e=y(e),t=o.accept(t,a.NUMBER),"1111111"===(n=o.accept(n,null,1)))throw r.VALUE;if("string"==typeof n&&Number(n).toString()!==n){if(7!==n.length)throw r.VALUE;n=n.charAt(6)+n.slice(0,6);const e=[];for(let t=0;t<n.length;t++)"1"===n.charAt(t)&&e.push(t);n=e}else{if("number"!=typeof n)throw r.VALUE;if(null==(n=f[n]))throw r.NUM}const s=[];null!=i&&o.flattenParams([i],a.NUMBER,!1,(e=>{s.push(y(e))})),e.setUTCDate(e.getUTCDate()+1);let l=0;for(;l<t;){let t=!1;for(let r=0;r<n.length;r++)if(n[r]===e.getUTCDay()){t=!0;break}if(!t){let t=!1;for(let n=0;n<s.length;n++)if(b(e,s[n])){t=!0;break}t||l++}e.setUTCDate(e.getUTCDate()+1)}return g(e)-1},YEAR:e=>y(e).getUTCFullYear(),YEARFRAC:(e,t,n)=>{if((e=y(e))>(t=y(t))){const n=e;e=t,t=n}if(n=o.accept(n,a.NUMBER,0),(n=Math.trunc(n))<0||n>4)throw r.VALUE;let i=e.getUTCDate();const s=e.getUTCMonth()+1,l=e.getUTCFullYear();let c=t.getUTCDate();const u=t.getUTCMonth()+1,f=t.getUTCFullYear();switch(n){case 0:return 31===i&&31===c?(i=30,c=30):31===i?i=30:30===i&&31===c&&(c=30),Math.abs(c+30*u+360*f-(i+30*s+360*l))/360;case 1:if(f-l<2){const n=1900!==(d=l)&&1!==new Date(d,1,29).getMonth()||1900===l?365:366;return x.DAYS(t,e)/n}{const n=f-l+1,r=(new Date(f+1,0,1)-new Date(l,0,1))/1e3/60/60/24/n;return x.DAYS(t,e)/r}case 2:return Math.abs(x.DAYS(t,e)/360);case 3:return Math.abs(x.DAYS(t,e)/365);case 4:return Math.abs(c+30*u+360*f-(i+30*s+360*l))/360}var d}};e.exports=x},11660:(e,t,n)=>{const r=n(564),{FormulaHelpers:i,Types:a}=n(86967),o=i,s=n(95180),l=n(57208),c={"BETA.DIST":(e,t,n,i,l,c)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.NUMBER),n=o.accept(n,a.NUMBER),i=o.accept(i,a.BOOLEAN),l=o.accept(l,a.NUMBER,0),c=o.accept(c,a.NUMBER,1),t<=0||n<=0||e<l||e>c||l===c)throw r.NUM;return e=(e-l)/(c-l),i?s.beta.cdf(e,t,n):s.beta.pdf(e,t,n)/(c-l)},"BETA.INV":(e,t,n,i,l)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.NUMBER),n=o.accept(n,a.NUMBER),i=o.accept(i,a.NUMBER,0),l=o.accept(l,a.NUMBER,1),t<=0||n<=0||e<=0||e>1)throw r.NUM;return s.beta.inv(e,t,n)*(l-i)+i},"BINOM.DIST":(e,t,n,i)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.NUMBER),n=o.accept(n,a.NUMBER),i=o.accept(i,a.BOOLEAN),t<0||n<0||n>1||e<0||e>t)throw r.NUM;return i?s.binomial.cdf(e,t,n):s.binomial.pdf(e,t,n)},"BINOM.DIST.RANGE":(e,t,n,i)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.NUMBER),n=o.accept(n,a.NUMBER),i=o.accept(i,a.NUMBER,n),e<0||t<0||t>1||n<0||n>e||i<n||i>e)throw r.NUM;let s=0;for(let r=n;r<=i;r++)s+=l.COMBIN(e,r)*Math.pow(t,r)*Math.pow(1-t,e-r);return s},"BINOM.INV":(e,t,n)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.NUMBER),n=o.accept(n,a.NUMBER),e<0||t<0||t>1||n<0||n>1)throw r.NUM;let i=0;for(;i<=e;){if(s.binomial.cdf(i,e,t)>=n)return i;i++}},"CHISQ.DIST":(e,t,n)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.NUMBER),n=o.accept(n,a.NUMBER),t=Math.trunc(t),e<0||t<1||t>10**10)throw r.NUM;return n?s.chisquare.cdf(e,t):s.chisquare.pdf(e,t)},"CHISQ.DIST.RT":(e,t)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.NUMBER),t=Math.trunc(t),e<0||t<1||t>10**10)throw r.NUM;return 1-s.chisquare.cdf(e,t)},"CHISQ.INV":(e,t)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.NUMBER),t=Math.trunc(t),e<0||e>1||t<1||t>10**10)throw r.NUM;return s.chisquare.inv(e,t)},"CHISQ.INV.RT":(e,t)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.NUMBER),t=Math.trunc(t),e<0||e>1||t<1||t>10**10)throw r.NUM;return s.chisquare.inv(1-e,t)},"CHISQ.TEST":(e,t)=>{const n=o.accept(e,a.ARRAY,void 0,!1,!1),i=o.accept(t,a.ARRAY,void 0,!1,!1);if(n.length!==i.length||n[0].length!==i[0].length||1===n.length&&1===n[0].length)throw r.NA;const s=n.length,l=n[0].length;let c=(s-1)*(l-1);c=1===s?l-1:s-1;let u=0;for(let e=0;e<s;e++)for(let t=0;t<l;t++)if("number"==typeof n[e][t]&&"number"==typeof i[e][t]){if(0===i[e][t])throw r.DIV0;u+=Math.pow(n[e][t]-i[e][t],2)/i[e][t]}let f=Math.exp(-.5*u);c%2==1&&(f*=Math.sqrt(2*u/Math.PI));let d=c;for(;d>=2;)f=f*u/d,d-=2;let h=f,p=c;for(;h>1e-15*f;)p+=2,h=h*u/p,f+=h;return 1-f},"CONFIDENCE.NORM":(e,t,n)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.NUMBER),n=o.accept(n,a.NUMBER),n=Math.trunc(n),e<=0||e>=1||t<=0||n<1)throw r.NUM;return s.normalci(1,e,t,n)[1]-1},"CONFIDENCE.T":(e,t,n)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.NUMBER),n=o.accept(n,a.NUMBER),n=Math.trunc(n),e<=0||e>=1||t<=0||n<1)throw r.NUM;if(1===n)throw r.DIV0;return s.tci(1,e,t,n)[1]-1},CORREL:(e,t)=>{if(e=o.accept(e,a.ARRAY,void 0,!0,!0),t=o.accept(t,a.ARRAY,void 0,!0,!0),e.length!==t.length)throw r.NA;const n=[],i=[];for(let r=0;r<e.length;r++)"number"==typeof e[r]&&"number"==typeof t[r]&&(n.push(e[r]),i.push(t[r]));if(n.length<=1)throw r.DIV0;return s.corrcoeff(n,i)},"COVARIANCE.P":(e,t)=>{if(e=o.accept(e,a.ARRAY,void 0,!0,!0),t=o.accept(t,a.ARRAY,void 0,!0,!0),e.length!==t.length)throw r.NA;const n=[],i=[];for(let r=0;r<e.length;r++)"number"==typeof e[r]&&"number"==typeof t[r]&&(n.push(e[r]),i.push(t[r]));const l=s.mean(n),c=s.mean(i);let u=0;for(let e=0;e<n.length;e++)u+=(n[e]-l)*(i[e]-c);return u/n.length},"COVARIANCE.S":(e,t)=>{if(e=o.accept(e,a.ARRAY,void 0,!0,!0),t=o.accept(t,a.ARRAY,void 0,!0,!0),e.length!==t.length)throw r.NA;const n=[],i=[];for(let r=0;r<e.length;r++)"number"==typeof e[r]&&"number"==typeof t[r]&&(n.push(e[r]),i.push(t[r]));if(n.length<=1)throw r.DIV0;return s.covariance(n,i)},DEVSQ:(...e)=>{let t=0,n=[];o.flattenParams(e,a.NUMBER,!0,((e,r)=>{"number"==typeof e&&(t+=e,n.push(e))}));const r=t/n.length;t=0;for(let e=0;e<n.length;e++)t+=(n[e]-r)**2;return t},"EXPON.DIST":(e,t,n)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.NUMBER),n=o.accept(n,a.BOOLEAN),e<0||t<=0)throw r.NUM;return n?s.exponential.cdf(e,t):s.exponential.pdf(e,t)},"F.DIST":(e,t,n,i)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.NUMBER),n=o.accept(n,a.NUMBER),i=o.accept(i,a.BOOLEAN),e<0||t<1||n<1)throw r.NUM;return t=Math.trunc(t),n=Math.trunc(n),i?s.centralF.cdf(e,t,n):s.centralF.pdf(e,t,n)},"F.DIST.RT":(e,t,n)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.NUMBER),n=o.accept(n,a.NUMBER),e<0||t<1||n<1)throw r.NUM;return t=Math.trunc(t),n=Math.trunc(n),1-s.centralF.cdf(e,t,n)},"F.INV":(e,t,n)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.NUMBER),n=o.accept(n,a.NUMBER),e<0||e>1)throw r.NUM;if(t<1||n<1)throw r.NUM;return t=Math.trunc(t),n=Math.trunc(n),s.centralF.inv(e,t,n)},"F.INV.RT":(e,t,n)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.NUMBER),n=o.accept(n,a.NUMBER),e<0||e>1)throw r.NUM;if(t<1||t>=Math.pow(10,10))throw r.NUM;if(n<1||n>=Math.pow(10,10))throw r.NUM;return t=Math.trunc(t),n=Math.trunc(n),s.centralF.inv(1-e,t,n)},"F.TEST":(e,t)=>{e=o.accept(e,a.ARRAY,void 0,!0,!0),t=o.accept(t,a.ARRAY,void 0,!0,!0);const n=[],i=[];let l=0,c=0;for(let r=0;r<Math.max(e.length,t.length);r++)"number"==typeof e[r]&&(n.push(e[r]),l+=e[r]),"number"==typeof t[r]&&(i.push(t[r]),c+=t[r]);if(n.length<=1||i.length<=1)throw r.DIV0;l/=n.length,c/=i.length;let u=0,f=0;for(let e=0;e<n.length;e++)u+=(l-n[e])**2;u/=n.length-1;for(let e=0;e<i.length;e++)f+=(c-i[e])**2;return f/=i.length-1,2*s.centralF.cdf(u/f,n.length-1,i.length-1)},FISHER:e=>{if((e=o.accept(e,a.NUMBER))<=-1||e>=1)throw r.NUM;return Math.log((1+e)/(1-e))/2},FISHERINV:e=>{e=o.accept(e,a.NUMBER);let t=Math.exp(2*e);return(t-1)/(t+1)},FORECAST:(e,t,n)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.ARRAY,void 0,!0,!0),(n=o.accept(n,a.ARRAY,void 0,!0,!0)).length!==t.length)throw r.NA;const i=[],l=[];let c=!0;for(let e=0;e<t.length;e++)"number"==typeof t[e]&&"number"==typeof n[e]&&(i.push(t[e]),l.push(n[e]),n[e]!==n[0]&&(c=!1));if(c)throw r.DIV0;const u=s.mean(i),f=s.mean(l);let d=0,h=0;for(let e=0;e<i.length;e++)d+=(l[e]-f)*(i[e]-u),h+=(l[e]-f)**2;const p=d/h;return u-p*f+p*e},"FORECAST.ETS":()=>{},"FORECAST.ETS.CONFINT":()=>{},"FORECAST.ETS.SEASONALITY":()=>{},"FORECAST.ETS.STAT":()=>{},"FORECAST.LINEAR":(...e)=>c.FORECAST(...e),FREQUENCY:(e,t)=>{e=o.accept(e,a.ARRAY,void 0,!0,!0),t=o.accept(t,a.ARRAY,void 0,!0,!0);const n=[];for(let e=0;e<t.length;e++)"number"==typeof t[e]&&n.push(t[e]);n.sort(),n.push(1/0);const r=[];for(let t=0;t<n.length;t++){r[t]=[],r[t][0]=0;for(let i=0;i<e.length;i++){if("number"!=typeof e[i])continue;e[i]<=n[t]&&(r[t][0]++,e[i]=null)}}return r},GAMMA:e=>{if(0===(e=o.accept(e,a.NUMBER))||e<0&&e===Math.trunc(e))throw r.NUM;return s.gammafn(e)},"GAMMA.DIST":(e,t,n,i)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.NUMBER),n=o.accept(n,a.NUMBER),i=o.accept(i,a.BOOLEAN),e<0||t<=0||n<=0)throw r.NUM;return i?s.gamma.cdf(e,t,n,!0):s.gamma.pdf(e,t,n,!1)},"GAMMA.INV":(e,t,n)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.NUMBER),n=o.accept(n,a.NUMBER),e<0||e>1||t<=0||n<=0)throw r.NUM;return s.gamma.inv(e,t,n)},GAMMALN:e=>{if((e=o.accept(e,a.NUMBER))<=0)throw r.NUM;return s.gammaln(e)},"GAMMALN.PRECISE":e=>{if((e=o.accept(e,a.NUMBER))<=0)throw r.NUM;return s.gammaln(e)},GAUSS:e=>(e=o.accept(e,a.NUMBER),s.normal.cdf(e,0,1)-.5),GEOMEAN:(...e)=>{const t=[];return o.flattenParams(e,a.NUMBER,!0,((e,n)=>{"number"==typeof e&&t.push(e)})),s.geomean(t)},GROWTH:(e,t,n,i)=>{e=o.accept(e,a.ARRAY,void 0,!0,!0);for(let t=0;t<e.length;t++)if("number"!=typeof e[t])throw r.VALUE;const s=null==(t=o.accept(t,a.ARRAY,null,!0,!0));if(null==t){t=[];for(let n=1;n<=e.length;n++)t.push(n)}else{if(t.length!==e.length)throw r.REF;for(let e=0;e<t.length;e++)if("number"!=typeof t[e])throw r.VALUE}if(null==(n=o.accept(n,a.ARRAY,null,!1,!0))&&s){n=[];for(let t=1;t<=e.length;t++)n.push(t);n=[n]}else null==n&&(n=Array.isArray(t[0])?t:[t]);i=o.accept(i,a.BOOLEAN,!0);const l=e.length;let c,u,f=0,d=0,h=0,p=0;for(let n=0;n<l;n++){const r=t[n],i=Math.log(e[n]);f+=r,d+=i,h+=r*i,p+=r*r}f/=l,d/=l,h/=l,p/=l,i?(c=(h-f*d)/(p-f*f),u=d-c*f):(c=h/p,u=0);const m=[];for(let e=0;e<n.length;e++){m[e]=[];for(let t=0;t<n[0].length;t++){if("number"!=typeof n[e][t])throw r.VALUE;m[e][t]=Math.exp(u+c*n[e][t])}}return m},HARMEAN:(...e)=>{let t=0,n=0;return o.flattenParams(e,a.NUMBER,!0,((e,r)=>{"number"==typeof e&&(n+=1/e,t++)})),t/n},"HYPGEOM.DIST":(e,t,n,i,s)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.NUMBER),n=o.accept(n,a.NUMBER),i=o.accept(i,a.NUMBER),s=o.accept(s,a.BOOLEAN),e=Math.trunc(e),t=Math.trunc(t),n=Math.trunc(n),(i=Math.trunc(i))<=0||e<0||t<=0||n<=0)throw r.NUM;if(t>i)throw r.NUM;if(n>i)throw r.NUM;if(t<e||n<e)throw r.NUM;if(e<t-i+n)throw r.NUM;function c(e,t,n,r){return l.COMBIN(n,e)*l.COMBIN(r-n,t-e)/l.COMBIN(r,t)}return s?function(e,t,n,r){let i=0;for(let a=0;a<=e;a++)i+=c(a,t,n,r);return i}(e,t,n,i):c(e,t,n,i)},INTERCEPT:(e,t)=>{if(e=o.accept(e,a.ARRAY,void 0,!0,!0),(t=o.accept(t,a.ARRAY,void 0,!0,!0)).length!==e.length)throw r.NA;const n=[],i=[];for(let r=0;r<e.length;r++)"number"==typeof e[r]&&"number"==typeof t[r]&&(n.push(e[r]),i.push(t[r]));if(n.length<=1)throw r.DIV0;const l=s.mean(n),c=s.mean(i);let u=0,f=0;for(let e=0;e<n.length;e++)u+=(i[e]-c)*(n[e]-l),f+=(i[e]-c)**2;return l-u/f*c},KURT:(...e)=>{let t=0,n=[];o.flattenParams(e,a.NUMBER,!0,((e,r)=>{"number"==typeof e&&(t+=e,n.push(e))}));const r=n.length;t/=r;let i=0;for(let e=0;e<r;e++)i+=Math.pow(n[e]-t,4);return i/=Math.pow(s.stdev(n,!0),4),r*(r+1)/((r-1)*(r-2)*(r-3))*i-3*(r-1)*(r-1)/((r-2)*(r-3))},LINEST:()=>{},LOGEST:()=>{},"LOGNORM.DIST":(e,t,n,i)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.NUMBER),n=o.accept(n,a.NUMBER),i=o.accept(i,a.BOOLEAN),e<=0||n<=0)throw r.NUM;return i?s.lognormal.cdf(e,t,n):s.lognormal.pdf(e,t,n)},"LOGNORM.INV":(e,t,n)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.NUMBER),n=o.accept(n,a.NUMBER),e<=0||e>=1)throw r.NUM;if(n<=0)throw r.NUM;return s.lognormal.inv(e,t,n)},"MODE.MULT":()=>{},"MODE.SNGL":()=>{},"NEGBINOM.DIST":(e,t,n,i)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.NUMBER),n=o.accept(n,a.NUMBER),i=o.accept(i,a.BOOLEAN),e=Math.trunc(e),t=Math.trunc(t),n<0||n>1)throw r.NUM;if(e<0||t<1)throw r.NUM;return i?s.negbin.cdf(e,t,n):s.negbin.pdf(e,t,n)},"NORM.DIST":(e,t,n,i)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.NUMBER),n=o.accept(n,a.NUMBER),i=o.accept(i,a.BOOLEAN),n<=0)throw r.NUM;return i?s.normal.cdf(e,t,n):s.normal.pdf(e,t,n)},"NORM.INV":(e,t,n)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.NUMBER),n=o.accept(n,a.NUMBER),e<=0||e>=1)throw r.NUM;if(n<=0)throw r.NUM;return s.normal.inv(e,t,n)},"NORM.S.DIST":(e,t)=>(e=o.accept(e,a.NUMBER),(t=o.accept(t,a.BOOLEAN))?s.normal.cdf(e,0,1):s.normal.pdf(e,0,1)),"NORM.S.INV":e=>{if((e=o.accept(e,a.NUMBER))<=0||e>=1)throw r.NUM;return s.normal.inv(e,0,1)},PEARSON:()=>{},"PERCENTILE.EXC":()=>{},"PERCENTILE.INC":()=>{},"PERCENTRANK.EXC":()=>{},"PERCENTRANK.INC":()=>{},PERMUTATIONA:()=>{},PHI:e=>(e=o.accept(e,a.NUMBER),Math.exp(-.5*e*e)/2.5066282746310002),"POISSON.DIST":(e,t,n)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.NUMBER),n=o.accept(n,a.BOOLEAN),e<0||t<0)throw r.NUM;return e=Math.trunc(e),n?s.poisson.cdf(e,t):s.poisson.pdf(e,t)},PROB:()=>{},"QUARTILE.EXC":()=>{},"QUARTILE.INC":()=>{},"RANK.AVG":()=>{},"RANK.EQ":()=>{},RSQ:()=>{},SKEW:()=>{},"SKEW.P":()=>{},SLOPE:()=>{},STANDARDIZE:(e,t,n)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.NUMBER),(n=o.accept(n,a.NUMBER))<=0)throw r.NUM;return(e-t)/n},"STDEV.P":()=>{},"STDEV.S":()=>{},STDEVA:()=>{},STDEVPA:()=>{},STEYX:()=>{},"T.DIST":(e,t,n)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.NUMBER),n=o.accept(n,a.BOOLEAN),t<1)throw r.NUM;return n?s.studentt.cdf(e,t):s.studentt.pdf(e,t)},"T.DIST.2T":(e,t)=>{if(e=o.accept(e,a.NUMBER),(t=o.accept(t,a.NUMBER))<1||e<0)throw r.NUM;return 2*(1-s.studentt.cdf(e,t))},"T.DIST.RT":(e,t)=>{if(e=o.accept(e,a.NUMBER),(t=o.accept(t,a.NUMBER))<1)throw r.NUM;return 1-s.studentt.cdf(e,t)},"T.INV":(e,t)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.NUMBER),e<=0||e>1||t<1)throw r.NUM;return t=t%1==0?t:Math.trunc(t),s.studentt.inv(e,t)},"T.INV.2T":(e,t)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.NUMBER),e<=0||e>1||t<1)throw r.NUM;return t=t%1==0?t:Math.trunc(t),Math.abs(s.studentt.inv(e/2,t))},"T.TEST":()=>{},TREND:()=>{},TRIMMEAN:()=>{},"VAR.P":()=>{},"VAR.S":()=>{},VARA:()=>{},VARPA:()=>{},"WEIBULL.DIST":(e,t,n,i)=>{if(e=o.accept(e,a.NUMBER),t=o.accept(t,a.NUMBER),n=o.accept(n,a.NUMBER),i=o.accept(i,a.BOOLEAN),e<0||t<=0||n<=0)throw r.NUM;return i?1-Math.exp(-Math.pow(e/n,t)):Math.pow(e,t-1)*Math.exp(-Math.pow(e/n,t))*t/Math.pow(n,t)},"Z.TEST":()=>{}};e.exports={DistributionFunctions:c}},24459:(e,t,n)=>{const r=n(564),i=n(86837),{FormulaHelpers:a,Types:o}=n(86967),s=a,l=n(48745),c=n(95180),u=-512,f=/^\s?[+-]?\s?[0-9]+[.]?[0-9]*([eE][+\-][0-9]+)?\s?$/,d=/^\s?([+-]?\s?([0-9]+[.]?[0-9]*([eE][+\-][0-9]+)?)?)\s?[ij]\s?$/,h=/^\s?([+-]?\s?[0-9]+[.]?[0-9]*([eE][+\-][0-9]+)?)\s?([+-]?\s?([0-9]+[.]?[0-9]*([eE][+\-][0-9]+)?)?)\s?[ij]\s?$/;function p(e){let t=0,n=0,i="i";if("number"==typeof(e=s.accept(e)))return{real:e,im:n,unit:i};if("boolean"==typeof e)throw r.VALUE;let a=e.match(f);if(a)return t=Number(a[0]),{real:t,im:n,unit:i};if(a=e.match(d),a)return n=Number(/^\s?[+-]?\s?$/.test(a[1])?a[1]+"1":a[1]),i=a[0].slice(-1),{real:t,im:n,unit:i};if(a=e.match(h),a)return t=Number(a[1]),n=Number(/^\s?[+-]?\s?$/.test(a[3])?a[3]+"1":a[3]),i=a[0].slice(-1),{real:t,im:n,unit:i};throw r.NUM}const m={BESSELI:(e,t)=>{if(e=s.accept(e,o.NUMBER_NO_BOOLEAN),t=s.accept(t,o.NUMBER_NO_BOOLEAN),(t=Math.trunc(t))<0)throw r.NUM;return l.besseli(e,t)},BESSELJ:(e,t)=>{if(e=s.accept(e,o.NUMBER_NO_BOOLEAN),t=s.accept(t,o.NUMBER_NO_BOOLEAN),(t=Math.trunc(t))<0)throw r.NUM;return l.besselj(e,t)},BESSELK:(e,t)=>{if(e=s.accept(e,o.NUMBER_NO_BOOLEAN),t=s.accept(t,o.NUMBER_NO_BOOLEAN),(t=Math.trunc(t))<0)throw r.NUM;return l.besselk(e,t)},BESSELY:(e,t)=>{if(e=s.accept(e,o.NUMBER_NO_BOOLEAN),t=s.accept(t,o.NUMBER_NO_BOOLEAN),(t=Math.trunc(t))<0)throw r.NUM;return l.bessely(e,t)},BIN2DEC:e=>{let t=(e=s.accept(e,o.NUMBER_NO_BOOLEAN)).toString();if(t.length>10)throw r.NUM;return 10===t.length&&"1"===t.substring(0,1)?parseInt(t.substring(1),2)+u:parseInt(t,2)},BIN2HEX:(e,t)=>{e=s.accept(e,o.NUMBER_NO_BOOLEAN),t=s.accept(t,o.NUMBER_NO_BOOLEAN,null);const n=e.toString();if(n.length>10)throw r.NUM;if(10===n.length&&"1"===n.substring(0,1))return(parseInt(n.substring(1),2)+0xfffffffe00).toString(16).toUpperCase();const a=parseInt(e,2).toString(16);if(null==t)return a.toUpperCase();if(t<0)throw r.NUM;if((t=Math.trunc(t))>=a.length)return(i.REPT("0",t-a.length)+a).toUpperCase();throw r.NUM},BIN2OCT:(e,t)=>{e=s.accept(e,o.NUMBER_NO_BOOLEAN),t=s.accept(t,o.NUMBER,null);let n=e.toString();if(n.length>10)throw r.NUM;if(10===n.length&&"1"===n.substr(0,1))return(parseInt(n.substr(1),2)+1073741312).toString(8);let a=parseInt(e,2).toString(8);if(null==t)return a.toUpperCase();if(t<0)throw r.NUM;if((t=Math.trunc(t))>=a.length)return i.REPT("0",t-a.length)+a;throw r.NUM},BITAND:(e,t)=>{if(e=s.accept(e,o.NUMBER),t=s.accept(t,o.NUMBER),e<0||t<0)throw r.NUM;if(Math.floor(e)!==e||Math.floor(t)!==t)throw r.NUM;if(e>0xffffffffffff||t>0xffffffffffff)throw r.NUM;return e&t},BITLSHIFT:(e,t)=>{if(e=s.accept(e,o.NUMBER),t=s.accept(t,o.NUMBER),t=Math.trunc(t),Math.abs(t)>53)throw r.NUM;if(e<0||Math.floor(e)!==e||e>0xffffffffffff)throw r.NUM;const n=t>=0?e*2**t:Math.trunc(e/2**-t);if(n>0xffffffffffff)throw r.NUM;return n},BITOR:(e,t)=>{if(e=s.accept(e,o.NUMBER),t=s.accept(t,o.NUMBER),e<0||t<0)throw r.NUM;if(Math.floor(e)!==e||Math.floor(t)!==t)throw r.NUM;if(e>0xffffffffffff||t>0xffffffffffff)throw r.NUM;return e|t},BITRSHIFT:(e,t)=>(e=s.accept(e,o.NUMBER),t=s.accept(t,o.NUMBER),m.BITLSHIFT(e,-t)),BITXOR:(e,t)=>{if(e=s.accept(e,o.NUMBER),t=s.accept(t,o.NUMBER),e<0||e>0xffffffffffff||Math.floor(e)!==e)throw r.NUM;if(t<0||t>0xffffffffffff||Math.floor(t)!==t)throw r.NUM;return e^t},COMPLEX:(e,t,n)=>{if(e=s.accept(e,o.NUMBER_NO_BOOLEAN),t=s.accept(t,o.NUMBER_NO_BOOLEAN),"i"!==(n=s.accept(n,o.STRING,"i"))&&"j"!==n)throw r.VALUE;if(0===e&&0===t)return 0;if(0===e)return 1===t?n:-1===t?"-"+n:t.toString()+n;if(0===t)return e.toString();{let r=t>0?"+":"";return 1===t?e.toString()+r+n:-1===t?e.toString()+r+"-"+n:e.toString()+r+t.toString()+n}},DEC2BIN:(e,t)=>{if(e=s.accept(e,o.NUMBER),t=s.accept(t,o.NUMBER,null),e<u||e>511)throw r.NUM;if(e<0)return"1"+i.REPT("0",9-(512+e).toString(2).length)+(512+e).toString(2);let n=parseInt(e,10).toString(2);if(null==t)return n;if((t=Math.trunc(t))<=0)throw r.NUM;if(t<n.length)throw r.NUM;return i.REPT("0",t-n.length)+n},DEC2HEX:(e,t)=>{if(e=s.accept(e,o.NUMBER),t=s.accept(t,o.NUMBER,null),e<-549755813888||e>549755813888)throw r.NUM;if(e<0)return(1099511627776+e).toString(16).toUpperCase();let n=parseInt(e,10).toString(16);if(null==t)return n.toUpperCase();if((t=Math.trunc(t))<=0)throw r.NUM;if(t<n.length)throw r.NUM;return i.REPT("0",t-n.length)+n.toUpperCase()},DEC2OCT:(e,t)=>{if(e=s.accept(e,o.NUMBER),t=s.accept(t,o.NUMBER,null),e<-536870912||e>536870912)throw r.NUM;if(e<0)return(e+1073741824).toString(8);let n=parseInt(e,10).toString(8);if(null==t)return n.toUpperCase();if((t=Math.trunc(t))<=0)throw r.NUM;if(t<n.length)throw r.NUM;return i.REPT("0",t-n.length)+n},DELTA:(e,t)=>(e=s.accept(e,o.NUMBER_NO_BOOLEAN))===(t=s.accept(t,o.NUMBER_NO_BOOLEAN,0))?1:0,ERF:(e,t)=>(e=s.accept(e,o.NUMBER_NO_BOOLEAN),t=s.accept(t,o.NUMBER_NO_BOOLEAN,0),c.erf(e)),ERFC:e=>(e=s.accept(e,o.NUMBER_NO_BOOLEAN),c.erfc(e)),GESTEP:(e,t)=>(e=s.accept(e,o.NUMBER_NO_BOOLEAN))>=(t=s.accept(t,o.NUMBER_NO_BOOLEAN,0))?1:0,HEX2BIN:(e,t)=>{if(e=s.accept(e,o.STRING),t=s.accept(t,o.NUMBER,null),e.length>10||!/^[0-9a-fA-F]*$/.test(e))throw r.NUM;let n=10===e.length&&"f"===e.substr(0,1).toLowerCase(),a=n?parseInt(e,16)-1099511627776:parseInt(e,16);if(a<u||a>511)throw r.NUM;if(n)return"1"+i.REPT("0",9-(a+512).toString(2).length)+(a+512).toString(2);let l=a.toString(2);if(null==t)return l;if((t=Math.trunc(t))<=0||t<l.length)throw r.NUM;return i.REPT("0",t-l.length)+l},HEX2DEC:e=>{if((e=s.accept(e,o.STRING)).length>10||!/^[0-9a-fA-F]*$/.test(e))throw r.NUM;let t=parseInt(e,16);return t>=549755813888?t-1099511627776:t},HEX2OCT:(e,t)=>{if((e=s.accept(e,o.STRING)).length>10||!/^[0-9a-fA-F]*$/.test(e))throw r.NUM;let n=m.HEX2DEC(e);if(n>536870911||n<-536870912)throw r.NUM;return m.DEC2OCT(n,t)},IMABS:e=>{const{real:t,im:n}=p(e);return Math.sqrt(Math.pow(t,2)+Math.pow(n,2))},IMAGINARY:e=>p(e).im,IMARGUMENT:e=>{const{real:t,im:n}=p(e);if(0===t&&0===n)throw r.DIV0;return 0===t&&n>0?Math.PI/2:0===t&&n<0?-Math.PI/2:t<0&&0===n?Math.PI:t>0&&0===n?0:t>0?Math.atan(n/t):t<0&&n>0?Math.atan(n/t)+Math.PI:Math.atan(n/t)-Math.PI},IMCONJUGATE:e=>{const{real:t,im:n,unit:r}=p(e);return 0!==n?m.COMPLEX(t,-n,r):""+t},IMCOS:e=>{const{real:t,im:n,unit:r}=p(e);let i=Math.cos(t)*(Math.exp(n)+Math.exp(-n))/2,a=-Math.sin(t)*(Math.exp(n)-Math.exp(-n))/2;return m.COMPLEX(i,a,r)},IMCOSH:e=>{const{real:t,im:n,unit:r}=p(e);let i=Math.cos(n)*(Math.exp(t)+Math.exp(-t))/2,a=-Math.sin(n)*(Math.exp(t)-Math.exp(-t))/2;return m.COMPLEX(i,-a,r)},IMCOT:e=>{e=s.accept(e);let t=m.IMCOS(e),n=m.IMSIN(e);return m.IMDIV(t,n)},IMCSC:e=>(e=s.accept(e),m.IMDIV("1",m.IMSIN(e))),IMCSCH:e=>(e=s.accept(e),m.IMDIV("1",m.IMSINH(e))),IMDIV:(e,t)=>{const n=p(e),i=n.real,a=n.im,o=n.unit,s=p(t),l=s.real,c=s.im,u=s.unit;if(0===l&&0===c||o!==u)throw r.NUM;let f=o,d=Math.pow(l,2)+Math.pow(c,2);return m.COMPLEX((i*l+a*c)/d,(a*l-i*c)/d,f)},IMEXP:e=>{const{real:t,im:n,unit:r}=p(e);let i=Math.exp(t);return m.COMPLEX(i*Math.cos(n),i*Math.sin(n),r)},IMLN:e=>{const{real:t,im:n,unit:r}=p(e);return m.COMPLEX(Math.log(Math.sqrt(Math.pow(t,2)+Math.pow(n,2))),Math.atan(n/t),r)},IMLOG10:e=>{const{real:t,im:n,unit:r}=p(e);let i=Math.log(Math.sqrt(Math.pow(t,2)+Math.pow(n,2)))/Math.log(10),a=Math.atan(n/t)/Math.log(10);return m.COMPLEX(i,a,r)},IMLOG2:e=>{const{real:t,im:n,unit:r}=p(e);let i=Math.log(Math.sqrt(Math.pow(t,2)+Math.pow(n,2)))/Math.log(2),a=Math.atan(n/t)/Math.log(2);return m.COMPLEX(i,a,r)},IMPOWER:(e,t)=>{let{unit:n}=p(e);t=s.accept(t,o.NUMBER_NO_BOOLEAN);let r=Math.pow(m.IMABS(e),t),i=m.IMARGUMENT(e),a=r*Math.cos(t*i),l=r*Math.sin(t*i);return m.COMPLEX(a,l,n)},IMPRODUCT:(...e)=>{let t,n=0;return s.flattenParams(e,null,!1,(e=>{if(0===n)t=s.accept(e),p(t);else{const n=p(t),i=n.real,a=n.im,o=n.unit,s=p(e),l=s.real,c=s.im;if(o!==s.unit)throw r.VALUE;t=m.COMPLEX(i*l-a*c,i*c+a*l)}n++}),1),t},IMREAL:e=>p(e).real,IMSEC:e=>m.IMDIV("1",m.IMCOS(e)),IMSECH:e=>m.IMDIV("1",m.IMCOSH(e)),IMSIN:e=>{const{real:t,im:n,unit:r}=p(e);let i=Math.sin(t)*(Math.exp(n)+Math.exp(-n))/2,a=Math.cos(t)*(Math.exp(n)-Math.exp(-n))/2;return m.COMPLEX(i,a,r)},IMSINH:e=>{const{real:t,im:n,unit:r}=p(e);let i=Math.cos(n)*(Math.exp(t)-Math.exp(-t))/2,a=Math.sin(n)*(Math.exp(t)+Math.exp(-t))/2;return m.COMPLEX(i,a,r)},IMSQRT:e=>{const{unit:t}=p(e);let n=Math.sqrt(m.IMABS(e)),r=m.IMARGUMENT(e);return m.COMPLEX(n*Math.cos(r/2),n*Math.sin(r/2),t)},IMSUB:(e,t)=>{const n=p(e),i=n.real,a=n.im,o=n.unit,s=p(t),l=s.real,c=s.im;if(o!==s.unit)throw r.VALUE;return m.COMPLEX(i-l,a-c,o)},IMSUM:(...e)=>{let t,n=0,i=0;return s.flattenParams(e,null,!1,(e=>{const{real:a,im:o,unit:s}=p(e);if(t||(t=s),t!==s)throw r.VALUE;n+=a,i+=o})),m.COMPLEX(n,i,t)},IMTAN:e=>{const{unit:t}=p(e);return m.IMDIV(m.IMSIN(e),m.IMCOS(e),t)},OCT2BIN:(e,t)=>{if(e=s.accept(e,o.STRING),t=s.accept(t,o.NUMBER,null),e.length>10)throw r.NUM;if(t>10)throw r.NUM;if(null!==t&&t<0)throw r.NUM;t=Math.trunc(t);let n=10===e.length&&"7"===e.substring(0,1),a=m.OCT2DEC(e);if(a<u||a>511)return r.NUM;if(n)return"1"+i.REPT("0",9-(512+a).toString(2).length)+(512+a).toString(2);let l=a.toString(2);if(0===t)return l;if(t<l.length)throw r.NUM;return i.REPT("0",t-l.length)+l},OCT2DEC:e=>{if((e=s.accept(e,o.STRING)).length>10)throw r.NUM;for(const t of e)if(t<"0"||t>"7")throw r.NUM;let t=parseInt(e,8);return t>=536870912?t-1073741824:t},OCT2HEX:(e,t)=>{if(e=s.accept(e,o.STRING),t=s.accept(t,o.NUMBER_NO_BOOLEAN,null),e.length>10)throw r.NUM;for(const t of e)if(t<"0"||t>"7")throw r.NUM;if((t=Math.trunc(t))<0||t>10)throw r.NUM;let n=m.OCT2DEC(e),a=m.DEC2HEX(n);if(0===t)return a;if(t<a.length)throw r.NUM;return i.REPT("0",t-a.length)+a}};e.exports=m},1826:(e,t,n)=>{const r=n(564),{FormulaHelpers:i,Types:a}=n(86967),o=i,s={"#NULL!":1,"#DIV/0!":2,"#VALUE!":3,"#REF!":4,"#NAME?":5,"#NUM!":6,"#N/A":7},l={CELL:(e,t)=>{},"ERROR.TYPE":e=>{if((e=o.accept(e))instanceof r)return s[e.toString()];throw r.NA},INFO:()=>{},ISBLANK:e=>!!e.ref&&(null==e.value||""===e.value),ISERR:e=>(e=o.accept(e))instanceof r&&"#N/A"!==e.toString(),ISERROR:e=>(e=o.accept(e))instanceof r,ISEVEN:e=>(e=o.accept(e,a.NUMBER),(e=Math.trunc(e))%2==0),ISLOGICAL:e=>"boolean"==typeof(e=o.accept(e)),ISNA:e=>(e=o.accept(e))instanceof r&&"#N/A"===e.toString(),ISNONTEXT:e=>"string"!=typeof(e=o.accept(e)),ISNUMBER:e=>"number"==typeof(e=o.accept(e)),ISREF:e=>!!e.ref&&((!o.isCellRef(e)||!(e.ref.row>1048576||e.ref.col>16384))&&((!o.isRangeRef(e)||!(e.ref.from.row>1048576||e.ref.from.col>16384||e.ref.to.row>1048576||e.ref.to.col>16384))&&!((e=o.accept(e))instanceof r&&"#REF!"===e.toString()))),ISTEXT:e=>"string"==typeof(e=o.accept(e)),N:e=>{const t=typeof(e=o.accept(e));if("number"===t)return e;if("boolean"===t)return Number(e);if(e instanceof r)throw e;return 0},NA:()=>{throw r.NA},TYPE:e=>{if(e.ref){if(o.isRangeRef(e))return 16;if(o.isCellRef(e)&&"string"==typeof(e=o.accept(e))&&0===e.length)return 1}const t=typeof(e=o.accept(e));return"number"===t?1:"string"===t?2:"boolean"===t?4:e instanceof r?16:Array.isArray(e)?64:void 0}};e.exports=l},75527:(e,t,n)=>{const r=n(564),{FormulaHelpers:i,Types:a}=n(86967),o=i;function s(e){let t=0,n=0;return o.flattenParams(e,null,!0,(e=>{const r=typeof e;"string"===r?"TRUE"===e?e=!0:"FALSE"===e&&(e=!1):"number"===r&&(e=Boolean(e)),"boolean"==typeof e&&(!0===e?t++:n++)})),[t,n]}const l={AND:(...e)=>{const[t,n]=s(e);return 0===t&&0===n?r.VALUE:t>0&&0===n},FALSE:()=>!1,IF:(e,t,n,r)=>(t=o.accept(t,a.BOOLEAN),n=o.accept(n),r=o.accept(r,null,!1),t?n:r),IFERROR:(e,t)=>e.value instanceof r?o.accept(t):o.accept(e),IFNA:function(e,t){if(arguments.length>2)throw r.TOO_MANY_ARGS("IFNA");return r.NA.equals(e.value)?o.accept(t):o.accept(e)},IFS:(...e)=>{if(e.length%2!=0)return new r("#N/A","IFS expects all arguments after position 0 to be in pairs.");for(let t=0;t<e.length/2;t++){const n=o.accept(e[2*t],a.BOOLEAN),r=o.accept(e[2*t+1]);if(n)return r}return r.NA},NOT:e=>!(e=o.accept(e,a.BOOLEAN)),OR:(...e)=>{const[t,n]=s(e);return 0===t&&0===n?r.VALUE:t>0},SWITCH:(...e)=>{},TRUE:()=>!0,XOR:(...e)=>{const[t,n]=s(e);return 0===t&&0===n?r.VALUE:t%2==1}};e.exports=l},57208:(e,t,n)=>{const r=n(564),{FormulaHelpers:i,Types:a,Factorials:o,Criteria:s}=n(86967),{Infix:l}=n(78659),c=i,u=[],f=[];function d(e){return e<=100?o[e]:u[e]>0?u[e]:u[e]=d(e-1)*e}function h(e){return 1===e||0===e?1:2===e?2:f[e]>0?f[e]:f[e]=h(e-2)*e}const p={ABS:e=>(e=c.accept(e,a.NUMBER),Math.abs(e)),AGGREGATE:(e,t,n,...r)=>{},ARABIC:e=>{if(e=c.accept(e,a.STRING).toUpperCase(),!/^M*(?:D?C{0,3}|C[MD])(?:L?X{0,3}|X[CL])(?:V?I{0,3}|I[XV])$/.test(e))throw new r("#VALUE!","Invalid roman numeral in ARABIC evaluation.");let t=0;return e.replace(/[MDLV]|C[MD]?|X[CL]?|I[XV]?/g,(function(e){t+={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1}[e]})),t},BASE:(e,t,n)=>{if((e=c.accept(e,a.NUMBER))<0||e>=2**53)throw r.NUM;if((t=c.accept(t,a.NUMBER))<2||t>36)throw r.NUM;if((n=c.accept(n,a.NUMBER,0))<0)throw r.NUM;const i=e.toString(t).toUpperCase();return new Array(Math.max(n+1-i.length,0)).join("0")+i},CEILING:(e,t)=>{if(e=c.accept(e,a.NUMBER),0===(t=c.accept(t,a.NUMBER)))return 0;if(e/t%1==0)return e;const n=Math.abs(t),r=Math.floor(Math.abs(e)/n);if(e<0){return t<0?-n*(r+1):-n*r}return(r+1)*n},"CEILING.MATH":(e,t,n)=>{if(e=c.accept(e,a.NUMBER),t=c.accept(t,a.NUMBER,e>0?1:-1),n=c.accept(n,a.NUMBER,0),e>=0)return p.CEILING(e,t);const r=n?t:0;return p.CEILING(e,t)-r},"CEILING.PRECISE":(e,t)=>(e=c.accept(e,a.NUMBER),t=c.accept(t,a.NUMBER,1),p.CEILING(e,Math.abs(t))),COMBIN:(e,t)=>{if(e=c.accept(e,a.NUMBER),t=c.accept(t,a.NUMBER),e<0||t<0||e<t)throw r.NUM;return p.FACT(e)/p.FACT(t)/p.FACT(e-t)},COMBINA:(e,t)=>{if(e=c.accept(e,a.NUMBER),t=c.accept(t,a.NUMBER),(0===e||1===e)&&0===t)return 1;if(e<0||t<0)throw r.NUM;return p.COMBIN(e+t-1,e-1)},DECIMAL:(e,t)=>{if(e=c.accept(e,a.STRING),t=c.accept(t,a.NUMBER),(t=Math.trunc(t))<2||t>36)throw r.NUM;const n=parseInt(e,t);if(isNaN(n))throw r.NUM;return n},DEGREES:e=>(e=c.accept(e,a.NUMBER))*(180/Math.PI),EVEN:e=>p.CEILING(e,-2),EXP:e=>(e=c.accept(e,a.NUMBER),Math.exp(e)),FACT:e=>{if(e=c.accept(e,a.NUMBER),(e=Math.trunc(e))>170||e<0)throw r.NUM;return e<=100?o[e]:d(e)},FACTDOUBLE:e=>{if(e=c.accept(e,a.NUMBER),(e=Math.trunc(e))<-1)throw r.NUM;return-1===e?1:h(e)},FLOOR:(e,t)=>{if(e=c.accept(e,a.NUMBER),0===(t=c.accept(t,a.NUMBER)))return 0;if(e>0&&t<0)throw r.NUM;if(e/t%1==0)return e;const n=Math.abs(t),i=Math.floor(Math.abs(e)/n);if(e<0){return t<0?-n*i:-n*(i+1)}return i*n},"FLOOR.MATH":(e,t,n)=>(e=c.accept(e,a.NUMBER),t=c.accept(t,a.NUMBER,e>0?1:-1),0===(n=c.accept(n,a.NUMBER,0))||e>=0?p.FLOOR(e,Math.abs(t)):p.FLOOR(e,t)+t),"FLOOR.PRECISE":(e,t)=>(e=c.accept(e,a.NUMBER),t=c.accept(t,a.NUMBER,1),p.FLOOR(e,Math.abs(t))),GCD:(...e)=>{const t=[];c.flattenParams(e,null,!1,(e=>{if(e="boolean"==typeof e?NaN:Number(e),isNaN(e))throw r.VALUE;if(e<0||e>9007199254740990)throw r.NUM;t.push(Math.trunc(e))}),0);let n,i,a=e.length,o=Math.abs(t[0]);for(n=1;n<a;n++){for(i=Math.abs(t[n]);o&&i;)o>i?o%=i:i%=o;o+=i}return o},INT:e=>(e=c.accept(e,a.NUMBER),Math.floor(e)),"ISO.CEILING":(...e)=>p["CEILING.PRECISE"](...e),LCM:(...e)=>{const t=[];c.flattenParams(e,null,!1,(e=>{if(e="boolean"==typeof e?NaN:Number(e),isNaN(e))throw r.VALUE;if(e<0||e>9007199254740990)throw r.NUM;t.push(Math.trunc(e))}),1);let n=t.length,i=Math.abs(t[0]);for(let e=1;e<n;e++){let n=Math.abs(t[e]),r=i;for(;i&&n;)i>n?i%=n:n%=i;i=Math.abs(r*t[e])/(i+n)}return i},LN:e=>(e=c.accept(e,a.NUMBER),Math.log(e)),LOG:(e,t)=>(e=c.accept(e,a.NUMBER),t=c.accept(t,a.NUMBER,10),Math.log(e)/Math.log(t)),LOG10:e=>(e=c.accept(e,a.NUMBER),Math.log10(e)),MDETERM:e=>{if((e=c.accept(e,a.ARRAY,void 0,!1,!0))[0].length!==e.length)throw r.VALUE;const t=e.length,n=e[0].length;let i,o,s=0;if(1===t)return e[0][0];if(2===t)return e[0][0]*e[1][1]-e[0][1]*e[1][0];for(let r=0;r<n;r++){i=e[0][r],o=e[0][r];for(let a=1;a<t;a++)o*=e[a][((r+a)%n+n)%n],i*=e[a][((r-a)%n+n)%n];s+=o-i}return s},MINVERSE:e=>{},MMULT:(e,t)=>{e=c.accept(e,a.ARRAY,void 0,!1,!0),t=c.accept(t,a.ARRAY,void 0,!1,!0);const n=e.length,i=e[0].length,o=t.length,s=t[0].length,l=new Array(n);if(i!==o)throw r.VALUE;for(let a=0;a<n;a++){l[a]=new Array(s);for(let n=0;n<s;n++){l[a][n]=0;for(let o=0;o<i;o++){const i=e[a][o],s=t[o][n];if("number"!=typeof i||"number"!=typeof s)throw r.VALUE;l[a][n]+=e[a][o]*t[o][n]}}}return l},MOD:(e,t)=>{if(e=c.accept(e,a.NUMBER),0===(t=c.accept(t,a.NUMBER)))throw r.DIV0;return e-t*p.INT(e/t)},MROUND:(e,t)=>{if(e=c.accept(e,a.NUMBER),0===(t=c.accept(t,a.NUMBER)))return 0;if(e>0&&t<0||e<0&&t>0)throw r.NUM;return e/t%1==0?e:Math.round(e/t)*t},MULTINOMIAL:(...e)=>{let t=0,n=1;return c.flattenParams(e,a.NUMBER,!1,(e=>{if(e<0)throw r.NUM;t+=e,n*=d(e)})),d(t)/n},MUNIT:e=>{e=c.accept(e,a.NUMBER);const t=[];for(let n=0;n<e;n++){const r=[];for(let t=0;t<e;t++)n===t?r.push(1):r.push(0);t.push(r)}return t},ODD:e=>{if(0===(e=c.accept(e,a.NUMBER)))return 1;let t=Math.ceil(Math.abs(e));return t=1&t?t:t+1,e>0?t:-t},PI:()=>Math.PI,POWER:(e,t)=>(e=c.accept(e,a.NUMBER))**(t=c.accept(t,a.NUMBER)),PRODUCT:(...e)=>{let t=1;return c.flattenParams(e,null,!0,((e,n)=>{const r=Number(e);n.isLiteral&&!isNaN(r)?t*=r:"number"==typeof e&&(t*=e)}),1),t},QUOTIENT:(e,t)=>(e=c.accept(e,a.NUMBER),t=c.accept(t,a.NUMBER),Math.trunc(e/t)),RADIANS:e=>(e=c.accept(e,a.NUMBER))/180*Math.PI,RAND:()=>Math.random(),RANDBETWEEN:(e,t)=>(e=c.accept(e,a.NUMBER),t=c.accept(t,a.NUMBER),Math.floor(Math.random()*(t-e+1)+e)),ROMAN:(e,t)=>{if(e=c.accept(e,a.NUMBER),0!==(t=c.accept(t,a.NUMBER,0)))throw Error("ROMAN: only allows form=0 (classic form).");const n=String(e).split(""),r=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];let i="",o=3;for(;o--;)i=(r[+n.pop()+10*o]||"")+i;return new Array(+n.join("")+1).join("M")+i},ROUND:(e,t)=>{e=c.accept(e,a.NUMBER),t=c.accept(t,a.NUMBER);const n=Math.pow(10,Math.abs(t)),r=e>0?1:-1;return t>0?r*Math.round(Math.abs(e)*n)/n:0===t?r*Math.round(Math.abs(e)):r*Math.round(Math.abs(e)/n)*n},ROUNDDOWN:(e,t)=>{e=c.accept(e,a.NUMBER),t=c.accept(t,a.NUMBER);const n=Math.pow(10,Math.abs(t)),r=e>0?1:-1;if(t>0){const t=1/n*.5;return r*Math.round((Math.abs(e)-t)*n)/n}if(0===t){const t=.5;return r*Math.round(Math.abs(e)-t)}{const t=.5*n;return r*Math.round((Math.abs(e)-t)/n)*n}},ROUNDUP:(e,t)=>{e=c.accept(e,a.NUMBER),t=c.accept(t,a.NUMBER);const n=Math.pow(10,Math.abs(t)),r=e>0?1:-1;if(t>0){const t=1/n*.5;return r*Math.round((Math.abs(e)+t)*n)/n}if(0===t){const t=.5;return r*Math.round(Math.abs(e)+t)}{const t=.5*n;return r*Math.round((Math.abs(e)+t)/n)*n}},SERIESSUM:(e,t,n,i)=>{e=c.accept(e,a.NUMBER),t=c.accept(t,a.NUMBER),n=c.accept(n,a.NUMBER);let o,s=0;return c.flattenParams([i],a.NUMBER,!1,(i=>{if("number"!=typeof i)throw r.VALUE;0===s?o=i*Math.pow(e,t):o+=i*Math.pow(e,t+s*n),s++})),o},SIGN:e=>(e=c.accept(e,a.NUMBER))>0?1:0===e?0:-1,SQRT:e=>{if((e=c.accept(e,a.NUMBER))<0)throw r.NUM;return Math.sqrt(e)},SQRTPI:e=>{if((e=c.accept(e,a.NUMBER))<0)throw r.NUM;return Math.sqrt(e*Math.PI)},SUBTOTAL:()=>{},SUM:(...e)=>{let t=0;return c.flattenParams(e,a.NUMBER,!0,((e,n)=>{(n.isLiteral||"number"==typeof e)&&(t+=e)})),t},SUMIF:(e,t,n,r)=>{const i=c.retrieveRanges(e,t,r);t=i[0],r=i[1];const a=(n=c.retrieveArg(e,n)).isArray;n=s.parse(c.accept(n));let o=0;return t.forEach(((e,t)=>{e.forEach(((e,i)=>{const s=r[t][i];"number"==typeof s&&("wc"===n.op?n.match===n.value.test(e)&&(o+=s):l.compareOp(e,n.op,n.value,Array.isArray(e),a)&&(o+=s))}))})),o},SUMIFS:()=>{},SUMPRODUCT:(e,...t)=>{e=c.accept(e,a.ARRAY,void 0,!1,!0),t.forEach((t=>{if(t=c.accept(t,a.ARRAY,void 0,!1,!0),e[0].length!==t[0].length||e.length!==t.length)throw r.VALUE;for(let n=0;n<e.length;n++)for(let r=0;r<e[0].length;r++)"number"!=typeof e[n][r]&&(e[n][r]=0),"number"!=typeof t[n][r]&&(t[n][r]=0),e[n][r]*=t[n][r]}));let n=0;return e.forEach((e=>{e.forEach((e=>{n+=e}))})),n},SUMSQ:(...e)=>{let t=0;return c.flattenParams(e,a.NUMBER,!0,((e,n)=>{(n.isLiteral||"number"==typeof e)&&(t+=e**2)})),t},SUMX2MY2:(e,t)=>{const n=[],i=[];let a=0;if(c.flattenParams([e],null,!1,((e,t)=>{n.push(e)})),c.flattenParams([t],null,!1,((e,t)=>{i.push(e)})),n.length!==i.length)throw r.NA;for(let e=0;e<n.length;e++)"number"==typeof n[e]&&"number"==typeof i[e]&&(a+=n[e]**2-i[e]**2);return a},SUMX2PY2:(e,t)=>{const n=[],i=[];let a=0;if(c.flattenParams([e],null,!1,((e,t)=>{n.push(e)})),c.flattenParams([t],null,!1,((e,t)=>{i.push(e)})),n.length!==i.length)throw r.NA;for(let e=0;e<n.length;e++)"number"==typeof n[e]&&"number"==typeof i[e]&&(a+=n[e]**2+i[e]**2);return a},SUMXMY2:(e,t)=>{const n=[],i=[];let a=0;if(c.flattenParams([e],null,!1,((e,t)=>{n.push(e)})),c.flattenParams([t],null,!1,((e,t)=>{i.push(e)})),n.length!==i.length)throw r.NA;for(let e=0;e<n.length;e++)"number"==typeof n[e]&&"number"==typeof i[e]&&(a+=(n[e]-i[e])**2);return a},TRUNC:e=>(e=c.accept(e,a.NUMBER),Math.trunc(e))};e.exports=p},13929:(e,t,n)=>{const r=n(564),{FormulaHelpers:i,Types:a,WildCard:o,Address:s}=n(86967),l=n(56863),c=i,u={ADDRESS:(e,t,n,i,o)=>{if(e=c.accept(e,a.NUMBER),t=c.accept(t,a.NUMBER),n=c.accept(n,a.NUMBER,1),i=c.accept(i,a.BOOLEAN,!0),o=c.accept(o,a.STRING,""),e<1||t<1||n<1||n>4)throw r.VALUE;let l="";return o.length>0&&(/[^A-Za-z_.\d\u007F-\uFFFF]/.test(o)?l+=`'${o}'!`:l+=o+"!"),i?(l+=1===n||3===n?"$":"",l+=s.columnNumberToName(t),l+=1===n||2===n?"$":"",l+=e):(l+="R",l+=4===n||3===n?`[${e}]`:e,l+="C",l+=4===n||2===n?`[${t}]`:t),l},AREAS:e=>(e=c.accept(e))instanceof l?e.length:1,CHOOSE:(e,...t)=>{},COLUMN:(e,t)=>{if(null==t){if(null!=e.position.col)return e.position.col;throw Error("FormulaParser.parse is called without position parameter.")}if("object"!=typeof t||Array.isArray(t))throw r.VALUE;if(c.isCellRef(t))return t.ref.col;if(c.isRangeRef(t))return t.ref.from.col;throw Error("ReferenceFunctions.COLUMN should not reach here.")},COLUMNS:(e,t)=>{if(null==t)throw Error("COLUMNS requires one argument");if("object"!=typeof t||Array.isArray(t))throw r.VALUE;if(c.isCellRef(t))return 1;if(c.isRangeRef(t))return Math.abs(t.ref.from.col-t.ref.to.col)+1;throw Error("ReferenceFunctions.COLUMNS should not reach here.")},HLOOKUP:(e,t,n,i)=>{e=c.accept(e);try{t=c.accept(t,a.ARRAY,void 0,!1)}catch(e){if(e instanceof r)throw r.NA;throw e}if(n=c.accept(n,a.NUMBER),i=c.accept(i,a.BOOLEAN,!0),n<1)throw r.VALUE;if(void 0===t[n-1])throw r.REF;const s=typeof e;if(i){let i=s===typeof t[0][0]?t[0][0]:null;for(let a=1;a<t[0].length;a++){const o=t[0][a];if(typeof o===s){if(i>e&&o>e)throw r.NA;if(o===e)return t[n-1][a];if(null!=i&&o>e&&i<=e)return t[n-1][a-1];i=o}}if(null==i)throw r.NA;return i}{let i=-1;if(i=o.isWildCard(e)?t[0].findIndex((t=>o.toRegex(e,"i").test(t))):t[0].findIndex((t=>t===e)),-1===i)throw r.NA;return t[n-1][i]}},INDEX:(e,t,n,i,o)=>{n={value:(n=e.utils.extractRefValue(n)).val,isArray:n.isArray},n=c.accept(n,a.NUMBER),n=Math.trunc(n),null==i?i=1:(i={value:(i=e.utils.extractRefValue(i)).val,isArray:i.isArray},i=c.accept(i,a.NUMBER,1),i=Math.trunc(i)),null==o?o=1:(o={value:(o=e.utils.extractRefValue(o)).val,isArray:o.isArray},o=c.accept(o,a.NUMBER,1),o=Math.trunc(o));let s=t;if(t instanceof l)s=t.refs[o-1];else if(o>1)throw r.REF;if(0===n&&0===i)return s;if(0===n){if(c.isRangeRef(s)){if(s.ref.to.col-s.ref.from.col<i-1)throw r.REF;return s.ref.from.col+=i-1,s.ref.to.col=s.ref.from.col,s}if(Array.isArray(s)){const e=[];return s.forEach((t=>e.push([t[i-1]]))),e}}if(0===i){if(c.isRangeRef(s)){if(s.ref.to.row-s.ref.from.row<n-1)throw r.REF;return s.ref.from.row+=n-1,s.ref.to.row=s.ref.from.row,s}if(Array.isArray(s))return s[i-1]}if(0!==n&&0!==i){if(c.isRangeRef(s)){if(s=s.ref,s.to.row-s.from.row<n-1||s.to.col-s.from.col<i-1)throw r.REF;return{ref:{row:s.from.row+n-1,col:s.from.col+i-1}}}if(c.isCellRef(s)){if(s=s.ref,n>1||i>1)throw r.REF;return{ref:{row:s.row+n-1,col:s.col+i-1}}}if(Array.isArray(s)){if(s.length<n||s[0].length<i)throw r.REF;return s[n-1][i-1]}}},MATCH:()=>{},ROW:(e,t)=>{if(null==t){if(null!=e.position.row)return e.position.row;throw Error("FormulaParser.parse is called without position parameter.")}if("object"!=typeof t||Array.isArray(t))throw r.VALUE;if(c.isCellRef(t))return t.ref.row;if(c.isRangeRef(t))return t.ref.from.row;throw Error("ReferenceFunctions.ROW should not reach here.")},ROWS:(e,t)=>{if(null==t)throw Error("ROWS requires one argument");if("object"!=typeof t||Array.isArray(t))throw r.VALUE;if(c.isCellRef(t))return 1;if(c.isRangeRef(t))return Math.abs(t.ref.from.row-t.ref.to.row)+1;throw Error("ReferenceFunctions.ROWS should not reach here.")},TRANSPOSE:e=>{e=c.accept(e,a.ARRAY,void 0,!1);const t=[];for(let n=0;n<e[0].length;n++){t[n]=[];for(let r=0;r<e.length;r++)t[n][r]=e[r][n]}return t},VLOOKUP:(e,t,n,i)=>{e=c.accept(e);try{t=c.accept(t,a.ARRAY,void 0,!1)}catch(e){if(e instanceof r)throw r.NA;throw e}if(n=c.accept(n,a.NUMBER),i=c.accept(i,a.BOOLEAN,!0),n<1)throw r.VALUE;if(void 0===t[0][n-1])throw r.REF;const s=typeof e;if(i){let i=s===typeof t[0][0]?t[0][0]:null;for(let a=1;a<t.length;a++){const o=t[a],l=t[a][0];if(typeof l===s){if(i>e&&l>e)throw r.NA;if(l===e)return o[n-1];if(null!=i&&l>e&&i<=e)return t[a-1][n-1];i=l}}if(null==i)throw r.NA;return i}{let i=-1;if(i=o.isWildCard(e)?t.findIndex((t=>o.toRegex(e,"i").test(t[0]))):t.findIndex((t=>t[0]===e)),-1===i)throw r.NA;return t[i][n-1]}}};e.exports=u},23171:(e,t,n)=>{const r=n(564),{FormulaHelpers:i,Types:a,Criteria:o,Address:s}=n(86967),{Infix:l}=n(78659),c=i,{DistributionFunctions:u}=n(11660),f={AVEDEV:(...e)=>{let t=0;const n=[];c.flattenParams(e,a.NUMBER,!0,((e,r)=>{"number"==typeof e&&(t+=e,n.push(e))}));const r=t/n.length;t=0;for(let e=0;e<n.length;e++)t+=Math.abs(n[e]-r);return t/n.length},AVERAGE:(...e)=>{let t=0,n=0;return c.flattenParams(e,a.NUMBER,!0,((e,r)=>{"number"==typeof e&&(t+=e,n++)})),t/n},AVERAGEA:(...e)=>{let t=0,n=0;return c.flattenParams(e,a.NUMBER,!0,((e,r)=>{const i=typeof e;"number"===i?(t+=e,n++):"string"===i&&n++})),t/n},AVERAGEIF:(e,t,n,i)=>{const a=c.retrieveRanges(e,t,i);t=a[0],i=a[1];const s=(n=c.retrieveArg(e,n)).isArray;n=o.parse(c.accept(n));let u=0,f=0;if(t.forEach(((e,t)=>{e.forEach(((e,r)=>{const a=i[t][r];"number"==typeof a&&("wc"===n.op?n.match===n.value.test(e)&&(u+=a,f++):l.compareOp(e,n.op,n.value,Array.isArray(e),s)&&(u+=a,f++))}))})),0===f)throw r.DIV0;return u/f},AVERAGEIFS:()=>{},COUNT:(...e)=>{let t=0;return c.flattenParams(e,null,!0,((e,n)=>{(n.isLiteral&&!isNaN(e)||"number"==typeof e)&&t++})),t},COUNTIF:(e,t)=>{e=c.accept(e,a.ARRAY,void 0,!1,!0);const n=t.isArray;t=c.accept(t);let r=0;return t=o.parse(t),e.forEach((e=>{e.forEach((e=>{"wc"===t.op?t.match===t.value.test(e)&&r++:l.compareOp(e,t.op,t.value,Array.isArray(e),n)&&r++}))})),r},LARGE:()=>{},MAX:()=>{},MAXA:()=>{},MAXIFS:()=>{},MEDIAN:()=>{},MIN:()=>{},MINA:()=>{},MINIFS:()=>{},PERMUT:()=>{},PERMUTATIONA:()=>{},SMALL:()=>{}};e.exports=Object.assign(f,u)},86837:(e,t,n)=>{const r=n(564),{FormulaHelpers:i,Types:a,WildCard:o}=n(86967),s=i,l=n(77935),c=n(1002),u={latin:{halfRE:/[!-~]/g,fullRE:/[-]/g,delta:65248},hangul1:{halfRE:/[-]/g,fullRE:/[-]/g,delta:-60921},hangul2:{halfRE:/[-]/g,fullRE:/[-]/g,delta:-61025},kana:{delta:0,half:"",full:""},extras:{delta:0,half:" |",full:""}},f=(e,t)=>e[t+"RE"]||new RegExp("["+e[t]+"]","g"),d=Object.keys(u).map((e=>u[e])),h=e=>d.reduce(((e,t)=>e.replace(f(t,"half"),(e=>t=>e.delta?String.fromCharCode(t.charCodeAt(0)+e.delta):[...e.full][[...e.half].indexOf(t)])(t))),e),p=e=>d.reduce(((e,t)=>e.replace(f(t,"full"),(e=>t=>e.delta?String.fromCharCode(t.charCodeAt(0)-e.delta):[...e.half][[...e.full].indexOf(t)])(t))),e),m={ASC:e=>(e=s.accept(e,a.STRING),p(e)),BAHTTEXT:e=>{e=s.accept(e,a.NUMBER);try{return c(e)}catch(e){throw Error(`Error in https://github.com/jojoee/bahttext \n${e.toString()}`)}},CHAR:e=>{if((e=s.accept(e,a.NUMBER))>255||e<1)throw r.VALUE;return String.fromCharCode(e)},CLEAN:e=>(e=s.accept(e,a.STRING)).replace(/[\x00-\x1F]/g,""),CODE:e=>{if(0===(e=s.accept(e,a.STRING)).length)throw r.VALUE;return e.charCodeAt(0)},CONCAT:(...e)=>{let t="";return s.flattenParams(e,a.STRING,!1,(e=>{e=s.accept(e,a.STRING),t+=e})),t},CONCATENATE:(...e)=>{let t="";if(0===e.length)throw Error("CONCATENATE need at least one argument.");return e.forEach((e=>{e=s.accept(e,a.STRING),t+=e})),t},DBCS:e=>(e=s.accept(e,a.STRING),h(e)),DOLLAR:(e,t)=>{e=s.accept(e,a.NUMBER),t=s.accept(t,a.NUMBER,2);const n=Array(t).fill("0").join("");return l.format(`$#,##0.${n}_);($#,##0.${n})`,e).trim()},EXACT:(e,t)=>(e=s.accept(e,[a.STRING]))===(t=s.accept(t,[a.STRING])),FIND:(e,t,n)=>{if(e=s.accept(e,a.STRING),t=s.accept(t,a.STRING),(n=s.accept(n,a.NUMBER,1))<1||n>t.length)throw r.VALUE;const i=t.indexOf(e,n-1);if(-1===i)throw r.VALUE;return i+1},FINDB:(...e)=>m.FIND(...e),FIXED:(e,t,n)=>{e=s.accept(e,a.NUMBER),t=s.accept(t,a.NUMBER,2),n=s.accept(n,a.BOOLEAN,!1);const r=Array(t).fill("0").join(""),i=n?"":"#,";return l.format(`${i}##0.${r}_);(${i}##0.${r})`,e).trim()},LEFT:(e,t)=>{if(e=s.accept(e,a.STRING),(t=s.accept(t,a.NUMBER,1))<0)throw r.VALUE;return t>e.length?e:e.slice(0,t)},LEFTB:(...e)=>m.LEFT(...e),LEN:e=>(e=s.accept(e,a.STRING)).length,LENB:(...e)=>m.LEN(...e),LOWER:e=>(e=s.accept(e,a.STRING)).toLowerCase(),MID:(e,t,n)=>{if(e=s.accept(e,a.STRING),t=s.accept(t,a.NUMBER),n=s.accept(n,a.NUMBER),t>e.length)return"";if(t<1||n<1)throw r.VALUE;return e.slice(t-1,t+n-1)},MIDB:(...e)=>m.MID(...e),NUMBERVALUE:(e,t,n)=>{if(e=s.accept(e,a.STRING),t=s.accept(t,a.STRING,"."),n=s.accept(n,a.STRING,","),0===e.length)return 0;if(0===t.length||0===n.length)throw r.VALUE;if((t=t[0])===(n=n[0])||e.indexOf(t)<e.lastIndexOf(n))throw r.VALUE;const i=e.replace(n,"").replace(t,".").replace(/[^\-0-9.%()]/g,"").match(/([(-]*)([0-9]*[.]*[0-9]+)([)]?)([%]*)/);if(!i)throw r.VALUE;const o=i[1].length,l=i[3].length,c=i[4].length;let u=Number(i[2]);if(o>1||o&&!l||!o&&l||isNaN(u))throw r.VALUE;return u/=100**c,o?-u:u},PHONETIC:()=>{},PROPER:e=>(e=(e=(e=s.accept(e,[a.STRING])).toLowerCase()).charAt(0).toUpperCase()+e.slice(1)).replace(/(?:[^a-zA-Z])([a-zA-Z])/g,(e=>e.toUpperCase())),REPLACE:(e,t,n,r)=>{e=s.accept(e,[a.STRING]),t=s.accept(t,[a.NUMBER]),n=s.accept(n,[a.NUMBER]),r=s.accept(r,[a.STRING]);let i=e.split("");return i.splice(t-1,n,r),i.join("")},REPLACEB:(...e)=>m.REPLACE(...e),REPT:(e,t)=>{e=s.accept(e,a.STRING),t=s.accept(t,a.NUMBER);let n="";for(let r=0;r<t;r++)n+=e;return n},RIGHT:(e,t)=>{if(e=s.accept(e,a.STRING),(t=s.accept(t,a.NUMBER,1))<0)throw r.VALUE;const n=e.length;return t>n?e:e.slice(n-t)},RIGHTB:(...e)=>m.RIGHT(...e),SEARCH:(e,t,n)=>{if(e=s.accept(e,a.STRING),t=s.accept(t,a.STRING),(n=s.accept(n,a.NUMBER,1))<1||n>t.length)throw r.VALUE;let i=o.isWildCard(e)?o.toRegex(e,"i"):e;const l=t.slice(n-1).search(i);if(-1===l)throw r.VALUE;return l+n},SEARCHB:(...e)=>m.SEARCH(...e),SUBSTITUTE:(...e)=>{},T:e=>"string"==typeof(e=s.accept(e))?e:"",TEXT:(e,t)=>{e=s.accept(e,a.NUMBER),t=s.accept(t,a.STRING);try{return l.format(t,e)}catch(e){throw console.error(e),r.VALUE}},TEXTJOIN:(...e)=>{},TRIM:e=>(e=s.accept(e,[a.STRING])).replace(/^\s+|\s+$/g,""),UNICHAR:e=>{if((e=s.accept(e,[a.NUMBER]))<=0)throw r.VALUE;return String.fromCharCode(e)},UNICODE:e=>m.CODE(e)};e.exports=m},58565:(e,t,n)=>{const r=n(564),{FormulaHelpers:i,Types:a}=n(86967),o=i,s=2**27-1,l={ACOS:e=>{if((e=o.accept(e,a.NUMBER))>1||e<-1)throw r.NUM;return Math.acos(e)},ACOSH:e=>{if((e=o.accept(e,a.NUMBER))<1)throw r.NUM;return Math.acosh(e)},ACOT:e=>(e=o.accept(e,a.NUMBER),Math.PI/2-Math.atan(e)),ACOTH:e=>{if(e=o.accept(e,a.NUMBER),Math.abs(e)<=1)throw r.NUM;return Math.atanh(1/e)},ASIN:e=>{if((e=o.accept(e,a.NUMBER))>1||e<-1)throw r.NUM;return Math.asin(e)},ASINH:e=>(e=o.accept(e,a.NUMBER),Math.asinh(e)),ATAN:e=>(e=o.accept(e,a.NUMBER),Math.atan(e)),ATAN2:(e,t)=>{if(e=o.accept(e,a.NUMBER),0===(t=o.accept(t,a.NUMBER))&&0===e)throw r.DIV0;return Math.atan2(t,e)},ATANH:e=>{if(e=o.accept(e,a.NUMBER),Math.abs(e)>1)throw r.NUM;return Math.atanh(e)},COS:e=>{if(e=o.accept(e,a.NUMBER),Math.abs(e)>s)throw r.NUM;return Math.cos(e)},COSH:e=>(e=o.accept(e,a.NUMBER),Math.cosh(e)),COT:e=>{if(e=o.accept(e,a.NUMBER),Math.abs(e)>s)throw r.NUM;if(0===e)throw r.DIV0;return 1/Math.tan(e)},COTH:e=>{if(0===(e=o.accept(e,a.NUMBER)))throw r.DIV0;return 1/Math.tanh(e)},CSC:e=>{if(e=o.accept(e,a.NUMBER),Math.abs(e)>s)throw r.NUM;return 1/Math.sin(e)},CSCH:e=>{if(0===(e=o.accept(e,a.NUMBER)))throw r.DIV0;return 1/Math.sinh(e)},SEC:e=>{if(e=o.accept(e,a.NUMBER),Math.abs(e)>s)throw r.NUM;return 1/Math.cos(e)},SECH:e=>(e=o.accept(e,a.NUMBER),1/Math.cosh(e)),SIN:e=>{if(e=o.accept(e,a.NUMBER),Math.abs(e)>s)throw r.NUM;return Math.sin(e)},SINH:e=>(e=o.accept(e,a.NUMBER),Math.sinh(e)),TAN:e=>{if(e=o.accept(e,a.NUMBER),Math.abs(e)>s)throw r.NUM;return Math.tan(e)},TANH:e=>(e=o.accept(e,a.NUMBER),Math.tanh(e))};e.exports=l},56278:(e,t,n)=>{const r=n(564),{FormulaHelpers:i,Types:a}=n(86967),o=i,s={ENCODEURL:e=>encodeURIComponent(o.accept(e,a.STRING)),FILTERXML:()=>{},WEBSERVICE:(e,t)=>{throw r.ERROR("WEBSERVICE is not supported in sync mode.")}};e.exports=s},86967:(e,t,n)=>{const r=n(564),i=n(56863),a={NUMBER:0,ARRAY:1,BOOLEAN:2,STRING:3,RANGE_REF:4,CELL_REF:5,COLLECTIONS:6,NUMBER_NO_BOOLEAN:10},o={};Object.keys(a).forEach((e=>{o[a[e]]=e}));const s=new class{constructor(){this.Types=a,this.type2Number={number:a.NUMBER,boolean:a.BOOLEAN,string:a.STRING,object:-1}}checkFunctionResult(e){if("number"===typeof e){if(isNaN(e))return r.VALUE;if(!isFinite(e))return r.NUM}return null==e?r.NULL:e}flattenDeep(e){return e.reduce(((e,t)=>Array.isArray(t)?e.concat(this.flattenDeep(t)):e.concat(t)),[])}acceptNumber(e,t=!0,n=!0){if(e instanceof r)return e;let i;if("number"==typeof e)i=e;else if("boolean"==typeof e){if(!n)throw r.VALUE;i=Number(e)}else if("string"==typeof e){if(0===e.length)throw r.VALUE;if(i=Number(e),i!=i)throw r.VALUE}else{if(!Array.isArray(e))throw Error("Unknown type in FormulaHelpers.acceptNumber");if(t)i=this.acceptNumber(e[0][0]);else{if(1!==e[0].length)throw r.VALUE;i=this.acceptNumber(e[0][0])}}return i}flattenParams(e,t,n,o,s=null,l=1){if(e.length<l)throw r.ARG_MISSING([t]);null==s&&(s=t===a.NUMBER?0:null==t?null:""),e.forEach((e=>{const{isCellRef:a,isRangeRef:l,isArray:c}=e,u=e.value instanceof i,f=!(a||l||c||u),d={isLiteral:f,isCellRef:a,isRangeRef:l,isArray:c,isUnion:u};if(f)e=e.omitted?s:this.accept(e,t,s),o(e,d);else if(a)o(e.value,d);else if(u){if(!n)throw r.VALUE;e=e.value.data,(e=this.flattenDeep(e)).forEach((e=>{o(e,d)}))}else(l||c)&&(e=this.flattenDeep(e.value)).forEach((e=>{o(e,d)}))}))}accept(e,t=null,n,o=!0,s=!1){if(Array.isArray(t)&&(t=t[0]),null==e&&void 0===n)throw r.ARG_MISSING([t]);if(null==e)return n;if("object"!=typeof e||Array.isArray(e))return e;const l=e.isArray;if(null!=e.value&&(e=e.value),null==t)return e;if(e instanceof r)throw e;if(t===a.ARRAY){if(Array.isArray(e))return o?this.flattenDeep(e):e;if(e instanceof i)throw r.VALUE;if(s)return o?[e]:[[e]];throw r.VALUE}if(t===a.COLLECTIONS)return e;l&&(e=e[0][0]);const c=this.type(e);if(t===a.STRING)e=c===a.BOOLEAN?e?"TRUE":"FALSE":`${e}`;else if(t===a.BOOLEAN){if(c===a.STRING)throw r.VALUE;c===a.NUMBER&&(e=Boolean(e))}else if(t===a.NUMBER)e=this.acceptNumber(e,!1);else{if(t!==a.NUMBER_NO_BOOLEAN)throw r.VALUE;e=this.acceptNumber(e,!1,!1)}return e}type(e){let t=this.type2Number[typeof e];return-1===t&&(Array.isArray(e)?t=a.ARRAY:e.ref?t=e.ref.from?a.RANGE_REF:a.CELL_REF:e instanceof i&&(t=a.COLLECTIONS)),t}isRangeRef(e){return e.ref&&e.ref.from}isCellRef(e){return e.ref&&!e.ref.from}retrieveRanges(e,t,n){return n=u.extend(t,n),t=this.retrieveArg(e,t),n!==(t=s.accept(t,a.ARRAY,void 0,!1,!0))?(n=this.retrieveArg(e,n),n=s.accept(n,a.ARRAY,void 0,!1,!0)):n=t,[t,n]}retrieveArg(e,t){if(null===t)return{value:0,isArray:!1,omitted:!0};const n=e.utils.extractRefValue(t);return{value:n.val,isArray:n.isArray,ref:t.ref}}},l={isWildCard:e=>"string"==typeof e&&/[*?]/.test(e),toRegex:(e,t)=>RegExp(e.replace(/[.+^${}()|[\]\\]/g,"\\$&").replace(/([^~]??)[?]/g,"$1.").replace(/([^~]??)[*]/g,"$1.*").replace(/~([?*])/g,"$1"),t)},c={parse:e=>{const t=typeof e;if("string"===t){const t=e.toUpperCase();if("TRUE"===t||"FALSE"===t)return{op:"=",value:"TRUE"===t};const n=e.match(/(<>|>=|<=|>|<|=)(.*)/);if(n){let e,t=n[1];if(isNaN(n[2])){const i=n[2].toUpperCase();if("TRUE"===i||"FALSE"===i)e="TRUE"===i;else if(/#NULL!|#DIV\/0!|#VALUE!|#NAME\?|#NUM!|#N\/A|#REF!/.test(n[2]))e=new r(n[2]);else if(e=n[2],l.isWildCard(e))return{op:"wc",value:l.toRegex(e),match:"="===t}}else e=Number(n[2]);return{op:t,value:e}}return l.isWildCard(e)?{op:"wc",value:l.toRegex(e),match:!0}:{op:"=",value:e}}if("boolean"===t||"number"===t||Array.isArray(e)||e instanceof r)return{op:"=",value:e};throw Error(`Criteria.parse: type ${typeof e} not support`)}},u={columnNumberToName:e=>{let t=e,n="",r=0;for(;t>0;)r=(t-1)%26,n=String.fromCharCode("A".charCodeAt(0)+r)+n,t=Math.floor((t-r)/26);return n},columnNameToNumber:e=>{const t=(e=e.toUpperCase()).length;let n=0;for(let r=0;r<t;r++){const i=e.charCodeAt(r);isNaN(i)||(n+=(i-64)*26**(t-r-1))}return n},extend:(e,t)=>{if(null==t)return e;let n,r;if(s.isCellRef(e))n=0,r=0;else{if(!s.isRangeRef(e))throw Error("Address.extend should not reach here.");n=e.ref.to.row-e.ref.from.row,r=e.ref.to.col-e.ref.from.col}return s.isCellRef(t)?(n>0||r>0)&&(t={ref:{from:{col:t.ref.col,row:t.ref.row},to:{row:t.ref.row+n,col:t.ref.col+r}}}):(t.ref.to.row=t.ref.from.row+n,t.ref.to.col=t.ref.from.col+r),t}};e.exports={FormulaHelpers:s,Types:a,ReversedTypes:o,Factorials:[1,1,2,6,24,120,720,5040,40320,362880,3628800,39916800,479001600,6227020800,87178291200,1307674368e3,20922789888e3,355687428096e3,6402373705728e3,0x1b02b9306890000,243290200817664e4,5109094217170944e4,11240007277776077e5,2585201673888498e7,6204484017332394e8,15511210043330986e9,40329146112660565e10,10888869450418352e12,30488834461171387e13,8.841761993739702e30,26525285981219107e16,8222838654177922e18,2631308369336935e20,8683317618811886e21,29523279903960416e22,1.0333147966386145e40,37199332678990125e25,13763753091226346e27,5230226174666011e29,20397882081197444e30,8159152832478977e32,3345252661316381e34,140500611775288e37,6041526306337383e37,2658271574788449e39,11962222086548019e40,5502622159812089e42,25862324151116818e43,12413915592536073e45,6082818640342675e47,30414093201713376e48,15511187532873822e50,8065817517094388e52,42748832840600255e53,2308436973392414e56,12696403353658276e57,7109985878048635e59,40526919504877214e60,23505613312828785e62,1.3868311854568984e80,832098711274139e67,5075802138772248e68,3146997326038794e70,198260831540444e73,12688693218588417e73,8.247650592082472e90,5443449390774431e77,3647111091818868e79,24800355424368305e80,1711224524281413e83,1.1978571669969892e100,8504785885678623e86,61234458376886085e87,44701154615126844e89,3307885441519386e92,248091408113954e95,18854947016660504e95,14518309202828587e97,11324281178206297e99,8946182130782976e101,7156945704626381e103,5.797126020747368e120,4753643337012842e107,3945523969720659e109,3314240134565353e111,281710411438055e114,2.4227095383672734e130,2107757298379528e117,18548264225739844e118,1650795516090846e121,14857159644817615e122,1.352001527678403e140,12438414054641308e126,11567725070816416e128,1087366156656743e131,1032997848823906e133,9916779348709496e134,9619275968248212e136,9426890448883248e138,9332621544394415e140,9332621544394415e142],WildCard:l,Criteria:c,Address:u}},78659:(e,t,n)=>{const r=n(564),{FormulaHelpers:i}=n(86967),a={unaryOp:(e,t,n)=>{let a=1;if(e.forEach((e=>{if("+"===e);else{if("-"!==e)throw new Error(`Unrecognized prefix: ${e}`);a=-a}})),null==t&&(t=0),1===a)return t;try{t=i.acceptNumber(t,n)}catch(e){if(!(e instanceof r))throw e;Array.isArray(t)&&(t=t[0][0])}return"number"==typeof t&&isNaN(t)?r.VALUE:-t}},o={percentOp:(e,t,n)=>{try{e=i.acceptNumber(e,n)}catch(e){if(e instanceof r)return e;throw e}if("%"===t)return e/100;throw new Error(`Unrecognized postfix: ${t}`)}},s={boolean:3,string:2,number:1},l={compareOp:(e,t,n,r,i)=>{null==e&&(e=0),null==n&&(n=0),r&&(e=e[0][0]),i&&(n=n[0][0]);const a=typeof e,o=typeof n;if(a===o)switch(t){case"=":return e===n;case">":return e>n;case"<":return e<n;case"<>":return e!==n;case"<=":return e<=n;case">=":return e>=n}else switch(t){case"=":return!1;case">":return s[a]>s[o];case"<":return s[a]<s[o];case"<>":return!0;case"<=":return s[a]<=s[o];case">=":return s[a]>=s[o]}throw Error("Infix.compareOp: Should not reach here.")},concatOp:(e,t,n,r,i)=>{null==e&&(e=""),null==n&&(n=""),r&&(e=e[0][0]),i&&(n=n[0][0]);return"boolean"===typeof e&&(e=e?"TRUE":"FALSE"),"boolean"===typeof n&&(n=n?"TRUE":"FALSE"),""+e+n},mathOp:(e,t,n,a,o)=>{null==e&&(e=0),null==n&&(n=0);try{e=i.acceptNumber(e,a),n=i.acceptNumber(n,o)}catch(e){if(e instanceof r)return e;throw e}switch(t){case"+":return e+n;case"-":return e-n;case"*":return e*n;case"/":return 0===n?r.DIV0:e/n;case"^":return e**n}throw Error("Infix.mathOp: Should not reach here.")}};e.exports={Prefix:a,Postfix:o,Infix:l,Operators:{compareOp:["<",">","=","<>","<=",">="],concatOp:["&"],mathOp:["+","-","*","/","^"]}}},57726:(e,t,n)=>{const r=n(564),{FormulaHelpers:i}=n(86967),{Parser:a}=n(95146),o=n(48575),s=n(78411),{formatChevrotainError:l}=n(27787);e.exports={DepParser:class{constructor(e){this.data=[],this.utils=new s(this),e=Object.assign({onVariable:()=>null},e),this.utils=new s(this),this.onVariable=e.onVariable,this.functions={},this.parser=new a(this,this.utils)}getCell(e){if(null!=e.row){null==e.sheet&&(e.sheet=this.position?this.position.sheet:void 0);-1===this.data.findIndex((t=>t.from&&t.from.row<=e.row&&t.to.row>=e.row&&t.from.col<=e.col&&t.to.col>=e.col||t.row===e.row&&t.col===e.col&&t.sheet===e.sheet))&&this.data.push(e)}return 0}getRange(e){if(null!=e.from.row){null==e.sheet&&(e.sheet=this.position?this.position.sheet:void 0);-1===this.data.findIndex((t=>t.from&&t.from.row===e.from.row&&t.from.col===e.from.col&&t.to.row===e.to.row&&t.to.col===e.to.col))&&this.data.push(e)}return[[0]]}getVariable(e){const t={ref:this.onVariable(e,this.position.sheet)};return null==t.ref?r.NAME:(i.isCellRef(t)?this.getCell(t.ref):this.getRange(t.ref),0)}retrieveRef(e){return i.isRangeRef(e)?this.getRange(e.ref):i.isCellRef(e)?this.getCell(e.ref):e}callFunction(e,t){return t.forEach((e=>{null!=e&&this.retrieveRef(e)})),{value:0,ref:{}}}checkFormulaResult(e){this.retrieveRef(e)}parse(e,t,n=!1){if(0===e.length)throw Error("Input must not be empty.");this.data=[],this.position=t;const i=o.lex(e);this.parser.input=i.tokens;try{const e=this.parser.formulaWithBinaryOp();this.checkFormulaResult(e)}catch(e){if(!n)throw r.ERROR(e.message,e)}if(this.parser.errors.length>0&&!n){const t=this.parser.errors[0];throw l(t,e)}return this.data}}}},78411:(e,t,n)=>{const r=n(564),{FormulaHelpers:i,Types:a,Address:o}=n(86967),{Prefix:s,Postfix:l,Infix:c,Operators:u}=n(78659),f=n(56863),d=1048576;e.exports=class{constructor(e){this.context=e}columnNameToNumber(e){return o.columnNameToNumber(e)}parseCellAddress(e){const t=e.match(/([$]?)([A-Za-z]{1,3})([$]?)([1-9][0-9]*)/);return{ref:{col:this.columnNameToNumber(t[2]),row:+t[4]}}}parseRow(e){const t=+e;if(!Number.isInteger(t))throw Error("Row number must be integer.");return{ref:{col:void 0,row:+e}}}parseCol(e){return{ref:{col:this.columnNameToNumber(e),row:void 0}}}applyPrefix(e,t){return this.extractRefValue(t),0}applyPostfix(e,t){return this.extractRefValue(e),0}applyInfix(e,t,n){return this.extractRefValue(e),this.extractRefValue(n),0}applyIntersect(e){if(this.isFormulaError(e[0]))return e[0];if(!e[0].ref)throw Error(`Expecting a reference, but got ${e[0]}.`);let t,n,i,a,o,s;const l=e.shift().ref;if(o=l.sheet,l.from)t=Math.max(l.from.row,l.to.row),i=Math.min(l.from.row,l.to.row),n=Math.max(l.from.col,l.to.col),a=Math.min(l.from.col,l.to.col);else{if(void 0===l.row||void 0===l.col)throw Error("Cannot intersect the whole row or column.");t=i=l.row,n=a=l.col}let c;return e.forEach((e=>{if(this.isFormulaError(e))return e;if(!(e=e.ref))throw Error(`Expecting a reference, but got ${e}.`);if(e.from){const s=Math.max(e.from.row,e.to.row),l=Math.min(e.from.row,e.to.row),u=Math.max(e.from.col,e.to.col),f=Math.min(e.from.col,e.to.col);(l>t||s<i||f>n||u<a||o!==e.sheet)&&(c=r.NULL),t=Math.min(t,s),i=Math.max(i,l),n=Math.min(n,u),a=Math.max(a,f)}else{if(void 0===e.row||void 0===e.col)throw Error("Cannot intersect the whole row or column.");(e.row>t||e.row<i||e.col>n||e.col<a||o!==e.sheet)&&(c=r.NULL),t=i=e.row,n=a=e.col}})),c||(s=t===i&&n===a?{ref:{sheet:o,row:t,col:n}}:{ref:{sheet:o,from:{row:i,col:a},to:{row:t,col:n}}},s.ref.sheet||delete s.ref.sheet,s)}applyUnion(e){const t=new f;for(let n=0;n<e.length;n++){if(this.isFormulaError(e[n]))return e[n];t.add(this.extractRefValue(e[n]).val,e[n])}return t}applyRange(e){let t,n=-1,r=-1,i=1048577,a=16385;return e.forEach((e=>{if(this.isFormulaError(e))return e;"number"==typeof e&&(e=this.parseRow(e)),void 0===(e=e.ref).row&&(i=1,n=d),void 0===e.col&&(a=1,r=16384),e.row>n&&(n=e.row),e.row<i&&(i=e.row),e.col>r&&(r=e.col),e.col<a&&(a=e.col)})),t=n===i&&r===a?{ref:{row:n,col:r}}:{ref:{from:{row:i,col:a},to:{row:n,col:r}}},t}extractRefValue(e){const t=Array.isArray(e);return e.ref?{val:this.context.retrieveRef(e),isArray:t}:{val:e,isArray:t}}toArray(e){return e}toNumber(e){return Number(e)}toString(e){return e.substring(1,e.length-1).replace(/""/g,'"')}toBoolean(e){return"TRUE"===e}toError(e){return new r(e.toUpperCase())}isFormulaError(e){return e instanceof r}}},90750:(e,t,n)=>{const r=n(86837),i=n(57208),a=n(58565),o=n(75527),s=n(24459),l=n(13929),c=n(1826),u=n(23171),f=n(74046),d=n(56278),h=n(564),{FormulaHelpers:p}=n(86967),{Parser:m,allTokens:g}=n(95146),v=n(48575),y=n(27787);e.exports={FormulaParser:class{constructor(e,t=!1){this.logs=[],this.isTest=t,this.utils=new y(this),e=Object.assign({functions:{},functionsNeedContext:{},onVariable:()=>null,onCell:()=>0,onRange:()=>[[0]]},e),this.onVariable=e.onVariable,this.functions=Object.assign({},f,u,c,l,s,o,r,i,a,d,e.functions,e.functionsNeedContext),this.onRange=e.onRange,this.onCell=e.onCell,this.funsNullAs0=Object.keys(i).concat(Object.keys(a)).concat(Object.keys(o)).concat(Object.keys(s)).concat(Object.keys(l)).concat(Object.keys(u)).concat(Object.keys(f)),this.funsNeedContextAndNoDataRetrieve=["ROW","ROWS","COLUMN","COLUMNS","SUMIF","INDEX","AVERAGEIF","IF"],this.funsNeedContext=[...Object.keys(e.functionsNeedContext),...this.funsNeedContextAndNoDataRetrieve,"INDEX","OFFSET","INDIRECT","IF","CHOOSE","WEBSERVICE"],this.funsPreserveRef=Object.keys(c),this.parser=new m(this,this.utils)}static get allTokens(){return g}getCell(e){return null==e.sheet&&(e.sheet=this.position?this.position.sheet:void 0),this.onCell(e)}getRange(e){return null==e.sheet&&(e.sheet=this.position?this.position.sheet:void 0),this.onRange(e)}getVariable(e){const t={ref:this.onVariable(e,this.position.sheet,this.position)};return null==t.ref?h.NAME:t}retrieveRef(e){return p.isRangeRef(e)?this.getRange(e.ref):p.isCellRef(e)?this.getCell(e.ref):e}_callFunction(e,t){0===e.indexOf("_xlfn.")&&(e=e.slice(6)),e=e.toUpperCase();const n=this.funsNullAs0.includes(e)?0:"";if(this.funsNeedContextAndNoDataRetrieve.includes(e)||(t=t.map((t=>{if(null===t)return{value:n,isArray:!1,omitted:!0};const r=this.utils.extractRefValue(t);return this.funsPreserveRef.includes(e)?{value:r.val,isArray:r.isArray,ref:t.ref}:{value:r.val,isArray:r.isArray,isRangeRef:!!p.isRangeRef(t),isCellRef:!!p.isCellRef(t)}}))),this.functions[e]){let n;try{n=this.funsNeedContextAndNoDataRetrieve.includes(e)||this.funsNeedContext.includes(e)?this.functions[e](this,...t):this.functions[e](...t)}catch(e){if(e instanceof h)return e;throw e}if(void 0===n){if(this.isTest)return this.logs.includes(e)||this.logs.push(e),{value:0,ref:{}};throw h.NOT_IMPLEMENTED(e)}return n}if(this.isTest)return this.logs.includes(e)||this.logs.push(e),{value:0,ref:{}};throw h.NOT_IMPLEMENTED(e)}async callFunctionAsync(e,t){const n=[];for(const e of t)n.push(await e);const r=await this._callFunction(e,n);return p.checkFunctionResult(r)}callFunction(e,t){if(this.async)return this.callFunctionAsync(e,t);{const n=this._callFunction(e,t);return p.checkFunctionResult(n)}}supportedFunctions(){const e=[];return Object.keys(this.functions).forEach((t=>{try{if(void 0===this.functions[t](0,0,0,0,0,0,0,0,0,0,0))return;e.push(t)}catch(n){n instanceof Error&&e.push(t)}})),e.sort()}checkFormulaResult(e,t=!1){const n=typeof e;if("number"===n){if(isNaN(e))return h.VALUE;if(!isFinite(e))return h.NUM;e+=0}else if("object"===n){if(e instanceof h)return e;if(t){if(e.ref&&(e=this.retrieveRef(e)),"object"==typeof e&&!Array.isArray(e)&&null!=e)return h.VALUE}else if(e.ref&&e.ref.row&&!e.ref.from)e=this.retrieveRef(e);else if(e.ref&&e.ref.from&&e.ref.from.col===e.ref.to.col)e=this.retrieveRef({ref:{row:e.ref.from.row,col:e.ref.from.col}});else{if(!Array.isArray(e))return h.VALUE;e=e[0][0]}}return e}parse(e,t,n=!1){if(0===e.length)throw Error("Input must not be empty.");this.position=t,this.async=!1;const r=v.lex(e);let i;this.parser.input=r.tokens;try{if(i=this.parser.formulaWithBinaryOp(),i=this.checkFormulaResult(i,n),i instanceof h)return i}catch(e){throw h.ERROR(e.message,e)}if(this.parser.errors.length>0){const t=this.parser.errors[0];throw y.formatChevrotainError(t,e)}return i}async parseAsync(e,t,n=!1){if(0===e.length)throw Error("Input must not be empty.");this.position=t,this.async=!0;const r=v.lex(e);let i;this.parser.input=r.tokens;try{if(i=await this.parser.formulaWithBinaryOp(),i=this.checkFormulaResult(i,n),i instanceof h)return i}catch(e){throw h.ERROR(e.message,e)}if(this.parser.errors.length>0){const t=this.parser.errors[0];throw y.formatChevrotainError(t,e)}return i}},FormulaHelpers:p}},48575:(e,t,n)=>{const{createToken:r,Lexer:i}=n(1),a=n(564),o={},s=r({name:"WhiteSpace",pattern:/\s+/,group:i.SKIPPED}),l=r({name:"String",pattern:/"(""|[^"])*"/}),c=r({name:"SingleQuotedString",pattern:/'(''|[^'])*'/}),u=r({name:"SheetQuoted",pattern:/'((?![\\\/\[\]*?:]).)+?'!/}),f=r({name:"Function",pattern:/[A-Za-z_]+[A-Za-z_0-9.]*\(/}),d=r({name:"FormulaErrorT",pattern:/#NULL!|#DIV\/0!|#VALUE!|#NAME\?|#NUM!|#N\/A/}),h=r({name:"RefError",pattern:/#REF!/}),p=r({name:"Name",pattern:/[a-zA-Z_][a-zA-Z0-9_.?]*/}),m=r({name:"Sheet",pattern:/[A-Za-z_.\d\u007F-\uFFFF]+!/}),g=r({name:"Cell",pattern:/[$]?[A-Za-z]{1,3}[$]?[1-9][0-9]*/,longer_alt:p}),v=r({name:"Number",pattern:/[0-9]+[.]?[0-9]*([eE][+\-][0-9]+)?/}),y=r({name:"Boolean",pattern:/TRUE|FALSE/i}),b=r({name:"Column",pattern:/[$]?[A-Za-z]{1,3}/,longer_alt:p}),x=r({name:"At",pattern:/@/}),_=r({name:"Comma",pattern:/,/}),w=r({name:"Colon",pattern:/:/}),A=r({name:"Semicolon",pattern:/;/}),k=r({name:"OpenParen",pattern:/\(/}),E=r({name:"CloseParen",pattern:/\)/}),T=r({name:"OpenSquareParen",pattern:/\[/}),M=r({name:"CloseSquareParen",pattern:/]/}),S=(r({name:"exclamationMark",pattern:/!/}),r({name:"OpenCurlyParen",pattern:/{/})),C=r({name:"CloseCurlyParen",pattern:/}/}),O=r({name:"QuoteS",pattern:/'/}),R=r({name:"MulOp",pattern:/\*/}),N=r({name:"PlusOp",pattern:/\+/}),L=r({name:"DivOp",pattern:/\//}),D=r({name:"MinOp",pattern:/-/}),P=r({name:"ConcatOp",pattern:/&/}),I=r({name:"ExOp",pattern:/\^/}),F=r({name:"PercentOp",pattern:/%/}),z=r({name:"GtOp",pattern:/>/}),j=r({name:"EqOp",pattern:/=/}),B=r({name:"LtOp",pattern:/</}),U=[s,l,u,c,f,d,h,m,g,y,b,p,v,x,_,w,A,k,E,T,M,S,C,O,R,N,L,D,P,I,R,F,r({name:"NeqOp",pattern:/<>/}),r({name:"GteOp",pattern:/>=/}),r({name:"LteOp",pattern:/<=/}),z,j,B],$=new i(U,{ensureOptimizations:!0});U.forEach((e=>{o[e.name]=e})),e.exports={tokenVocabulary:o,lex:function(e){const t=$.tokenize(e);if(t.errors.length>0){const n=t.errors[0],r=n.line,i=n.column;let o="\n"+e.split("\n")[r-1]+"\n";throw o+=Array(i-1).fill(" ").join("")+"^\n",n.message=o+`Error at position ${r}:${i}\n`+n.message,n.errorLocation={line:r,column:i},a.ERROR(n.message,n)}return t}}},95146:(e,t,n)=>{const r=n(48575),{EmbeddedActionsParser:i}=n(1),a=r.tokenVocabulary,{String:o,SheetQuoted:s,ExcelRefFunction:l,ExcelConditionalRefFunction:c,Function:u,FormulaErrorT:f,RefError:d,Cell:h,Sheet:p,Name:m,Number:g,Boolean:v,Column:y,Comma:b,Colon:x,Semicolon:_,OpenParen:w,CloseParen:A,OpenCurlyParen:k,CloseCurlyParen:E,MulOp:T,PlusOp:M,DivOp:S,MinOp:C,ConcatOp:O,ExOp:R,PercentOp:N,NeqOp:L,GteOp:D,LteOp:P,GtOp:I,EqOp:F,LtOp:z}=r.tokenVocabulary;e.exports={Parser:class extends i{constructor(e,t){super(a,{outputCst:!1,maxLookahead:1,skipValidations:!0}),this.utils=t,this.binaryOperatorsPrecedence=[["^"],["*","/"],["+","-"],["&"],["<",">","=","<>","<=",">="]];const n=this;n.RULE("formulaWithBinaryOp",(()=>{const e=[],t=[n.SUBRULE(n.formulaWithPercentOp)];return n.MANY((()=>{e.push(n.OR(n.c1||(n.c1=[{ALT:()=>n.CONSUME(I).image},{ALT:()=>n.CONSUME(F).image},{ALT:()=>n.CONSUME(z).image},{ALT:()=>n.CONSUME(L).image},{ALT:()=>n.CONSUME(D).image},{ALT:()=>n.CONSUME(P).image},{ALT:()=>n.CONSUME(O).image},{ALT:()=>n.CONSUME(M).image},{ALT:()=>n.CONSUME(C).image},{ALT:()=>n.CONSUME(T).image},{ALT:()=>n.CONSUME(S).image},{ALT:()=>n.CONSUME(R).image}]))),t.push(n.SUBRULE2(n.formulaWithPercentOp))})),n.ACTION((()=>{for(const n of this.binaryOperatorsPrecedence)for(let r=0,i=e.length;r<i;r++){const a=e[r];n.includes(a)&&(e.splice(r,1),t.splice(r,2,this.utils.applyInfix(t[r],a,t[r+1])),r--,i--)}})),t[0]})),n.RULE("plusMinusOp",(()=>n.OR([{ALT:()=>n.CONSUME(M).image},{ALT:()=>n.CONSUME(C).image}]))),n.RULE("formulaWithPercentOp",(()=>{let e=n.SUBRULE(n.formulaWithUnaryOp);return n.OPTION((()=>{const t=n.CONSUME(N).image;e=n.ACTION((()=>this.utils.applyPostfix(e,t)))})),e})),n.RULE("formulaWithUnaryOp",(()=>{const e=[];n.MANY((()=>{const t=n.OR([{ALT:()=>n.CONSUME(M).image},{ALT:()=>n.CONSUME(C).image}]);e.push(t)}));const t=n.SUBRULE(n.formulaWithIntersect);return e.length>0?n.ACTION((()=>this.utils.applyPrefix(e,t))):t})),n.RULE("formulaWithIntersect",(()=>{let e=n.SUBRULE(n.formulaWithRange);const t=[e];return n.MANY({GATE:()=>{const e=n.LA(0);return n.LA(1).startOffset>e.endOffset+1},DEF:()=>{t.push(n.SUBRULE3(n.formulaWithRange))}}),t.length>1?n.ACTION((()=>n.ACTION((()=>this.utils.applyIntersect(t))))):e})),n.RULE("formulaWithRange",(()=>{const e=n.SUBRULE(n.formula),t=[e];return n.MANY((()=>{n.CONSUME(x),t.push(n.SUBRULE2(n.formula))})),t.length>1?n.ACTION((()=>n.ACTION((()=>this.utils.applyRange(t))))):e})),n.RULE("formula",(()=>n.OR9([{ALT:()=>n.SUBRULE(n.referenceWithoutInfix)},{ALT:()=>n.SUBRULE(n.paren)},{ALT:()=>n.SUBRULE(n.constant)},{ALT:()=>n.SUBRULE(n.functionCall)},{ALT:()=>n.SUBRULE(n.constantArray)}]))),n.RULE("paren",(()=>{let e;n.CONSUME(w);const t=[];return t.push(n.SUBRULE(n.formulaWithBinaryOp)),n.MANY((()=>{n.CONSUME(b),t.push(n.SUBRULE2(n.formulaWithBinaryOp))})),e=t.length>1?n.ACTION((()=>this.utils.applyUnion(t))):t[0],n.CONSUME(A),e})),n.RULE("constantArray",(()=>{const e=[[]];let t=0;return n.CONSUME(k),e[t].push(n.SUBRULE(n.constantForArray)),n.MANY((()=>{const r=n.OR([{ALT:()=>n.CONSUME(b).image},{ALT:()=>n.CONSUME(_).image}]),i=n.SUBRULE2(n.constantForArray);","===r||(t++,e[t]=[]),e[t].push(i)})),n.CONSUME(E),n.ACTION((()=>this.utils.toArray(e)))})),n.RULE("constantForArray",(()=>n.OR([{ALT:()=>{const e=n.OPTION((()=>n.SUBRULE(n.plusMinusOp))),t=n.CONSUME(g).image,r=n.ACTION((()=>this.utils.toNumber(t)));return e?n.ACTION((()=>this.utils.applyPrefix([e],r))):r}},{ALT:()=>{const e=n.CONSUME(o).image;return n.ACTION((()=>this.utils.toString(e)))}},{ALT:()=>{const e=n.CONSUME(v).image;return n.ACTION((()=>this.utils.toBoolean(e)))}},{ALT:()=>{const e=n.CONSUME(f).image;return n.ACTION((()=>this.utils.toError(e)))}},{ALT:()=>{const e=n.CONSUME(d).image;return n.ACTION((()=>this.utils.toError(e)))}}]))),n.RULE("constant",(()=>n.OR([{ALT:()=>{const e=n.CONSUME(g).image;return n.ACTION((()=>this.utils.toNumber(e)))}},{ALT:()=>{const e=n.CONSUME(o).image;return n.ACTION((()=>this.utils.toString(e)))}},{ALT:()=>{const e=n.CONSUME(v).image;return n.ACTION((()=>this.utils.toBoolean(e)))}},{ALT:()=>{const e=n.CONSUME(f).image;return n.ACTION((()=>this.utils.toError(e)))}}]))),n.RULE("functionCall",(()=>{const t=n.CONSUME(u).image.slice(0,-1),r=n.SUBRULE(n.arguments);return n.CONSUME(A),n.ACTION((()=>e.callFunction(t,r)))})),n.RULE("arguments",(()=>{n.MANY2((()=>{n.CONSUME2(b)}));const e=[];return n.OPTION((()=>{e.push(n.SUBRULE(n.formulaWithBinaryOp)),n.MANY((()=>{n.CONSUME1(b),e.push(null),n.OPTION3((()=>{e.pop(),e.push(n.SUBRULE2(n.formulaWithBinaryOp))}))}))})),e})),n.RULE("referenceWithoutInfix",(()=>n.OR([{ALT:()=>n.SUBRULE(n.referenceItem)},{ALT:()=>{const e=n.SUBRULE(n.prefixName),t=n.SUBRULE2(n.formulaWithRange);return n.ACTION((()=>{if(this.utils.isFormulaError(t))return t;t.ref.sheet=e})),t}}]))),n.RULE("referenceItem",(()=>n.OR([{ALT:()=>{const e=n.CONSUME(h).image;return n.ACTION((()=>this.utils.parseCellAddress(e)))}},{ALT:()=>{const t=n.CONSUME(m).image;return n.ACTION((()=>e.getVariable(t)))}},{ALT:()=>{const e=n.CONSUME(y).image;return n.ACTION((()=>this.utils.parseCol(e)))}},{ALT:()=>{const e=n.CONSUME(d).image;return n.ACTION((()=>this.utils.toError(e)))}}]))),n.RULE("prefixName",(()=>n.OR([{ALT:()=>n.CONSUME(p).image.slice(0,-1)},{ALT:()=>n.CONSUME(s).image.slice(1,-2).replace(/''/g,"'")}]))),this.performSelfAnalysis()}}}},56863:e=>{e.exports=class{constructor(e,t){if(null==e&&null==t)this._data=[],this._refs=[];else{if(e.length!==t.length)throw Error("Collection: data length should match references length.");this._data=e,this._refs=t}}get data(){return this._data}get refs(){return this._refs}get length(){return this._data.length}add(e,t){this._data.push(e),this._refs.push(t)}}},27787:(e,t,n)=>{const r=n(564),{Address:i}=n(86967),{Prefix:a,Postfix:o,Infix:s,Operators:l}=n(78659),c=n(56863),u=1048576,{NotAllInputParsedException:f}=n(1);e.exports=class{constructor(e){this.context=e}columnNameToNumber(e){return i.columnNameToNumber(e)}parseCellAddress(e){const t=e.match(/([$]?)([A-Za-z]{1,3})([$]?)([1-9][0-9]*)/);return{ref:{address:t[0],col:this.columnNameToNumber(t[2]),row:+t[4]}}}parseRow(e){const t=+e;if(!Number.isInteger(t))throw Error("Row number must be integer.");return{ref:{col:void 0,row:+e}}}parseCol(e){return{ref:{col:this.columnNameToNumber(e),row:void 0}}}parseColRange(e,t){return e=this.columnNameToNumber(e),t=this.columnNameToNumber(t),{ref:{from:{col:Math.min(e,t),row:null},to:{col:Math.max(e,t),row:null}}}}parseRowRange(e,t){return{ref:{from:{col:null,row:Math.min(e,t)},to:{col:null,row:Math.max(e,t)}}}}_applyPrefix(e,t,n){return this.isFormulaError(t)?t:a.unaryOp(e,t,n)}async applyPrefixAsync(e,t){const{val:n,isArray:r}=this.extractRefValue(await t);return this._applyPrefix(e,n,r)}applyPrefix(e,t){if(this.context.async)return this.applyPrefixAsync(e,t);{const{val:n,isArray:r}=this.extractRefValue(t);return this._applyPrefix(e,n,r)}}_applyPostfix(e,t,n){return this.isFormulaError(e)?e:o.percentOp(e,n,t)}async applyPostfixAsync(e,t){const{val:n,isArray:r}=this.extractRefValue(await e);return this._applyPostfix(n,r,t)}applyPostfix(e,t){if(this.context.async)return this.applyPostfixAsync(e,t);{const{val:n,isArray:r}=this.extractRefValue(e);return this._applyPostfix(n,r,t)}}_applyInfix(e,t,n){const r=e.val,i=e.isArray,a=n.val,o=n.isArray;if(this.isFormulaError(r))return r;if(this.isFormulaError(a))return a;if(l.compareOp.includes(t))return s.compareOp(r,t,a,i,o);if(l.concatOp.includes(t))return s.concatOp(r,t,a,i,o);if(l.mathOp.includes(t))return s.mathOp(r,t,a,i,o);throw new Error(`Unrecognized infix: ${t}`)}async applyInfixAsync(e,t,n){const r=this.extractRefValue(await e),i=this.extractRefValue(await n);return this._applyInfix(r,t,i)}applyInfix(e,t,n){if(this.context.async)return this.applyInfixAsync(e,t,n);{const r=this.extractRefValue(e),i=this.extractRefValue(n);return this._applyInfix(r,t,i)}}applyIntersect(e){if(this.isFormulaError(e[0]))return e[0];if(!e[0].ref)throw Error(`Expecting a reference, but got ${e[0]}.`);let t,n,i,a,o,s;const l=e.shift().ref;if(o=l.sheet,l.from)t=Math.max(l.from.row,l.to.row),i=Math.min(l.from.row,l.to.row),n=Math.max(l.from.col,l.to.col),a=Math.min(l.from.col,l.to.col);else{if(void 0===l.row||void 0===l.col)throw Error("Cannot intersect the whole row or column.");t=i=l.row,n=a=l.col}let c;return e.forEach((e=>{if(this.isFormulaError(e))return e;if(!(e=e.ref))throw Error(`Expecting a reference, but got ${e}.`);if(e.from){const s=Math.max(e.from.row,e.to.row),l=Math.min(e.from.row,e.to.row),u=Math.max(e.from.col,e.to.col),f=Math.min(e.from.col,e.to.col);(l>t||s<i||f>n||u<a||o!==e.sheet)&&(c=r.NULL),t=Math.min(t,s),i=Math.max(i,l),n=Math.min(n,u),a=Math.max(a,f)}else{if(void 0===e.row||void 0===e.col)throw Error("Cannot intersect the whole row or column.");(e.row>t||e.row<i||e.col>n||e.col<a||o!==e.sheet)&&(c=r.NULL),t=i=e.row,n=a=e.col}})),c||(s=t===i&&n===a?{ref:{sheet:o,row:t,col:n}}:{ref:{sheet:o,from:{row:i,col:a},to:{row:t,col:n}}},s.ref.sheet||delete s.ref.sheet,s)}applyUnion(e){const t=new c;for(let n=0;n<e.length;n++){if(this.isFormulaError(e[n]))return e[n];t.add(this.extractRefValue(e[n]).val,e[n])}return t}applyRange(e){let t,n=-1,r=-1,i=1048577,a=16385;return e.forEach((e=>{if(this.isFormulaError(e))return e;"number"==typeof e&&(e=this.parseRow(e)),void 0===(e=e.ref).row&&(i=1,n=u),void 0===e.col&&(a=1,r=16384),e.row>n&&(n=e.row),e.row<i&&(i=e.row),e.col>r&&(r=e.col),e.col<a&&(a=e.col)})),t=n===i&&r===a?{ref:{row:n,col:r}}:{ref:{from:{row:i,col:a},to:{row:n,col:r}}},t}extractRefValue(e){let t=e,n=!1;return Array.isArray(t)&&(n=!0),e.ref?{val:this.context.retrieveRef(e),isArray:n}:{val:t,isArray:n}}toArray(e){return e}toNumber(e){return Number(e)}toString(e){return e.substring(1,e.length-1).replace(/""/g,'"')}toBoolean(e){return"TRUE"===e}toError(e){return new r(e.toUpperCase())}isFormulaError(e){return e instanceof r}static formatChevrotainError(e,t){let n,i,a="";return e instanceof f?(n=e.token.startLine,i=e.token.startColumn):(n=e.previousToken.startLine,i=e.previousToken.startColumn+1),a+="\n"+t.split("\n")[n-1]+"\n",a+=Array(i-1).fill(" ").join("")+"^\n",a+=`Error at position ${n}:${i}\n`+e.message,e.errorLocation={line:n,column:i},r.ERROR(a,e)}}},21528:(e,t,n)=>{const{FormulaParser:r}=n(90750),{DepParser:i}=n(57726),a=n(77935),o=n(564);Object.assign(r,{MAX_ROW:1048576,MAX_COLUMN:16384,SSF:a,DepParser:i,FormulaError:o,...n(86967)}),e.exports=r},77935:e=>{class t{}function n(e){let t="",n=e.length-1;for(;n>=0;)t+=e.charAt(n--);return t}function r(e,t){let n="";for(;n.length<t;)n+=e;return n}function i(e,t){let n=""+e;return n.length>=t?n:r("0",t-n.length)+n}function a(e,t){let n=""+e;return n.length>=t?n:r(" ",t-n.length)+n}function o(e,t){let n=""+e;return n.length>=t?n:n+r(" ",t-n.length)}t.version="0.10.3";const s=Math.pow(2,32);function l(e,t){if(e>s||e<-s)return function(e,t){let n=""+Math.round(e);return n.length>=t?n:r("0",t-n.length)+n}(e,t);return function(e,t){let n=""+e;return n.length>=t?n:r("0",t-n.length)+n}(Math.round(e),t)}function c(e,t){return t=t||0,e.length>=7+t&&103==(32|e.charCodeAt(t))&&101==(32|e.charCodeAt(t+1))&&110==(32|e.charCodeAt(t+2))&&101==(32|e.charCodeAt(t+3))&&114==(32|e.charCodeAt(t+4))&&97==(32|e.charCodeAt(t+5))&&108==(32|e.charCodeAt(t+6))}const u=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],f=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function d(e){e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e[65535]="General"}const h={};function p(e,t,n){const r=e<0?-1:1;let i=e*r,a=0,o=1,s=0,l=1,c=0,u=0,f=Math.floor(i);for(;c<t&&(f=Math.floor(i),s=f*o+a,u=f*c+l,!(i-f<5e-8));)i=1/(i-f),a=o,o=s,l=c,c=u;if(u>t&&(c>t?(u=l,s=a):(u=c,s=o)),!n)return[0,r*s,u];const d=Math.floor(r*s/u);return[d,r*s-d*u,u]}function m(e,t,n){if(e>2958465||e<0)return null;let r=0|e,i=Math.floor(86400*(e-r)),a=0,o=[];const s={D:r,T:i,u:86400*(e-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(s.u)<1e-6&&(s.u=0),t&&t.date1904&&(r+=1462),s.u>.9999&&(s.u=0,86400==++i&&(s.T=i=0,++r,++s.D)),60===r)o=n?[1317,10,29]:[1900,2,29],a=3;else if(0===r)o=n?[1317,8,29]:[1900,1,0],a=6;else{r>60&&--r;const e=new Date(1900,0,1);e.setDate(e.getDate()+r-1),o=[e.getFullYear(),e.getMonth()+1,e.getDate()],a=e.getDay(),r<60&&(a=(a+6)%7),n&&(a=0)}return s.y=o[0],s.m=o[1],s.d=o[2],s.S=i%60,i=Math.floor(i/60),s.M=i%60,i=Math.floor(i/60),s.H=i,s.q=a,s}d(h),t.parse_date_code=m;const g=new Date(1899,11,31,0,0,0),v=g.getTime(),y=new Date(1900,2,1,0,0,0);function b(e,t){let n=e.getTime();return t?n-=1262304e5:e>=y&&(n+=864e5),(n-(v+6e4*(e.getTimezoneOffset()-g.getTimezoneOffset())))/864e5}function x(e){return e.toString(10)}t._general_int=x;const _=function(){const e=/\.(\d*[1-9])0+$/,t=/\.0*$/,n=/\.(\d*[1-9])0+/,r=/\.0*[Ee]/,i=/(E[+-])(\d)$/;function a(n){return n.indexOf(".")>-1?n.replace(t,"").replace(e,".$1"):n}return function(t){let o,s=Math.floor(Math.log(Math.abs(t))*Math.LOG10E);return o=s>=-4&&s<=-1?t.toPrecision(10+s):Math.abs(s)<=9?function(e){const t=e<0?12:11;let n=a(e.toFixed(12));return n.length<=t?n:(n=e.toPrecision(10),n.length<=t?n:e.toExponential(5))}(t):10===s?t.toFixed(10).substr(0,12):function(t){let n=t.toFixed(11).replace(e,".$1");return n.length>(t<0?12:11)&&(n=t.toPrecision(6)),n}(t),a(function(e){for(let t=0;t!==e.length;++t)if(101==(32|e.charCodeAt(t)))return e.replace(n,".$1").replace(r,"E").replace("e","E").replace(i,"$10$2");return e}(o))}}();function w(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(0|e)===e?x(e):_(e);case"undefined":return"";case"object":if(null==e)return"";if(e instanceof Date)return L(14,b(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function A(e,t,n,r){let a,o="",s=0,l=0,c=n.y,d=0;switch(e){case 98:c=n.y+543;case 121:switch(t.length){case 1:case 2:a=c%100,d=2;break;default:a=c%1e4,d=4}break;case 109:switch(t.length){case 1:case 2:a=n.m,d=t.length;break;case 3:return f[n.m-1][1];case 5:return f[n.m-1][0];default:return f[n.m-1][2]}break;case 100:switch(t.length){case 1:case 2:a=n.d,d=t.length;break;case 3:return u[n.q][0];default:return u[n.q][1]}break;case 104:switch(t.length){case 1:case 2:a=1+(n.H+11)%12,d=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:a=n.H,d=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:a=n.M,d=t.length;break;default:throw"bad minute format: "+t}break;case 115:if("s"!==t&&"ss"!==t&&".0"!==t&&".00"!==t&&".000"!==t)throw"bad second format: "+t;return 0!==n.u||"s"!==t&&"ss"!==t?(l=r>=2?3===r?1e3:100:1===r?10:1,s=Math.round(l*(n.S+n.u)),s>=60*l&&(s=0),"s"===t?0===s?"0":""+s/l:(o=i(s,2+r),"ss"===t?o.substr(0,2):"."+o.substr(2,t.length-1))):i(n.S,t.length);case 90:switch(t){case"[h]":case"[hh]":a=24*n.D+n.H;break;case"[m]":case"[mm]":a=60*(24*n.D+n.H)+n.M;break;case"[s]":case"[ss]":a=60*(60*(24*n.D+n.H)+n.M)+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+t}d=3===t.length?1:2;break;case 101:a=c,d=1}return d>0?i(a,d):""}function k(e){if(e.length<=3)return e;let t=e.length%3,n=e.substr(0,t);for(;t!==e.length;t+=3)n+=(n.length>0?",":"")+e.substr(t,3);return n}t._general_num=_,t._general=w;const E=function(){const e=/%/g;function t(e,n){let r,i=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0===n)return"0.0E+0";if(n<0)return"-"+t(e,-n);let a=e.indexOf(".");-1===a&&(a=e.indexOf("E"));let o=Math.floor(Math.log(n)*Math.LOG10E)%a;if(o<0&&(o+=a),r=(n/Math.pow(10,o)).toPrecision(i+1+(a+o)%a),-1===r.indexOf("e")){const e=Math.floor(Math.log(n)*Math.LOG10E);for(-1===r.indexOf(".")?r=r.charAt(0)+"."+r.substr(1)+"E+"+(e-r.length+o):r+="E+"+(e-o);"0."===r.substr(0,2);)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,(function(e,t,n,r){return t+n+r.substr(0,(a+o)%a)+"."+r.substr(o)+"E"}))}else r=n.toExponential(i);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}const s=/# (\?+)( ?)\/( ?)(\d+)/;const c=/^#*0*\.([0#]+)/,u=/\).*[0#]/,f=/\(###\) ###\\?-####/;function d(e){let t,n="";for(let r=0;r!==e.length;++r)switch(t=e.charCodeAt(r)){case 35:break;case 63:n+=" ";break;case 48:n+="0";break;default:n+=String.fromCharCode(t)}return n}function h(e,t){const n=Math.pow(10,t);return""+Math.round(e*n)/n}function m(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?0:Math.round((e-Math.floor(e))*Math.pow(10,t))}function g(v,y,b){if(40===v.charCodeAt(0)&&!y.match(u)){const e=y.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return b>=0?g("n",e,b):"("+g("n",e,-b)+")"}if(44===y.charCodeAt(y.length-1))return function(e,t,n){let r=t.length-1;for(;44===t.charCodeAt(r-1);)--r;return E(e,t.substr(0,r),n/Math.pow(10,3*(t.length-r)))}(v,y,b);if(-1!==y.indexOf("%"))return function(t,n,i){const a=n.replace(e,""),o=n.length-a.length;return E(t,a,i*Math.pow(10,2*o))+r("%",o)}(v,y,b);if(-1!==y.indexOf("E"))return t(y,b);if(36===y.charCodeAt(0))return"$"+g(v,y.substr(" "==y.charAt(1)?2:1),b);let x,_,w,A,T=Math.abs(b),M=b<0?"-":"";if(y.match(/^00+$/))return M+l(T,y.length);if(y.match(/^[#?]+$/))return x=l(b,0),"0"===x&&(x=""),x.length>y.length?x:d(y.substr(0,y.length-x.length))+x;if(_=y.match(s))return function(e,t,n){const o=parseInt(e[4],10),s=Math.round(t*o),l=Math.floor(s/o);let c=s-l*o,u=o;return n+(0===l?"":""+l)+" "+(0===c?r(" ",e[1].length+1+e[4].length):a(c,e[1].length)+e[2]+"/"+e[3]+i(u,e[4].length))}(_,T,M);if(y.match(/^#+0+$/))return M+l(T,y.length-y.indexOf("0"));if(_=y.match(c))return x=h(b,_[1].length).replace(/^([^\.]+)$/,"$1."+d(_[1])).replace(/\.$/,"."+d(_[1])).replace(/\.(\d*)$/,(function(e,t){return"."+t+r("0",d(_[1]).length-t.length)})),-1!==y.indexOf("0.")?x:x.replace(/^0\./,".");if(y=y.replace(/^#+([0.])/,"$1"),_=y.match(/^(0*)\.(#*)$/))return M+h(T,_[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,_[1].length?"0.":".");if(_=y.match(/^#{1,3},##0(\.?)$/))return M+k(l(T,0));if(_=y.match(/^#,##0\.([#0]*0)$/))return b<0?"-"+g(v,y,-b):k(""+(Math.floor(b)+function(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}(b,_[1].length)))+"."+i(m(b,_[1].length),_[1].length);if(_=y.match(/^#,#*,#0/))return g(v,y.replace(/^#,#*,/,""),b);if(_=y.match(/^([0#]+)(\\?-([0#]+))+$/))return x=n(g(v,y.replace(/[\\-]/g,""),b)),w=0,n(n(y.replace(/\\/g,"")).replace(/[0#]/g,(function(e){return w<x.length?x.charAt(w++):"0"===e?"0":""})));if(y.match(f))return x=g(v,"##########",b),"("+x.substr(0,3)+") "+x.substr(3,3)+"-"+x.substr(6);let S="";if(_=y.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return w=Math.min(_[4].length,7),A=p(T,Math.pow(10,w)-1,!1),x=""+M,S=E("n",_[1],A[1])," "===S.charAt(S.length-1)&&(S=S.substr(0,S.length-1)+"0"),x+=S+_[2]+"/"+_[3],S=o(A[2],w),S.length<_[4].length&&(S=d(_[4].substr(_[4].length-S.length))+S),x+=S,x;if(_=y.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return w=Math.min(Math.max(_[1].length,_[4].length),7),A=p(T,Math.pow(10,w)-1,!0),M+(A[0]||(A[1]?"":"0"))+" "+(A[1]?a(A[1],w)+_[2]+"/"+_[3]+o(A[2],w):r(" ",2*w+1+_[2].length+_[3].length));if(_=y.match(/^[#0?]+$/))return x=l(b,0),y.length<=x.length?x:d(y.substr(0,y.length-x.length))+x;if(_=y.match(/^([#0?]+)\.([#0]+)$/)){x=""+b.toFixed(Math.min(_[2].length,10)).replace(/([^0])0+$/,"$1"),w=x.indexOf(".");const e=y.indexOf(".")-w,t=y.length-x.length-e;return d(y.substr(0,e)+x+y.substr(y.length-t))}if(_=y.match(/^00,000\.([#0]*0)$/))return w=m(b,_[1].length),b<0?"-"+g(v,y,-b):k(function(e){return e<2147483647&&e>-2147483648?""+(e>=0?0|e:e-1|0):""+Math.floor(e)}(b)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,(function(e){return"00,"+(e.length<3?i(0,3-e.length):"")+e}))+"."+i(w,_[1].length);switch(y){case"###,##0.00":return g(v,"#,##0.00",b);case"###,###":case"##,###":case"#,###":const e=k(l(T,0));return"0"!==e?M+e:"";case"###,###.00":return g(v,"###,##0.00",b).replace(/^0\./,".");case"#,###.00":return g(v,"#,##0.00",b).replace(/^0\./,".")}throw new Error("unsupported format |"+y+"|")}function v(e,t){let n,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0===t)return"0.0E+0";if(t<0)return"-"+v(e,-t);let i=e.indexOf(".");-1===i&&(i=e.indexOf("E"));let a=Math.floor(Math.log(t)*Math.LOG10E)%i;if(a<0&&(a+=i),n=(t/Math.pow(10,a)).toPrecision(r+1+(i+a)%i),!n.match(/[Ee]/)){const e=Math.floor(Math.log(t)*Math.LOG10E);-1===n.indexOf(".")?n=n.charAt(0)+"."+n.substr(1)+"E+"+(e-n.length+a):n+="E+"+(e-a),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,(function(e,t,n,r){return t+n+r.substr(0,(i+a)%i)+"."+r.substr(a)+"E"}))}else n=t.toExponential(r);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function y(t,l,h){if(40===t.charCodeAt(0)&&!l.match(u)){const e=l.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return h>=0?y("n",e,h):"("+y("n",e,-h)+")"}if(44===l.charCodeAt(l.length-1))return function(e,t,n){let r=t.length-1;for(;44===t.charCodeAt(r-1);)--r;return E(e,t.substr(0,r),n/Math.pow(10,3*(t.length-r)))}(t,l,h);if(-1!==l.indexOf("%"))return function(t,n,i){const a=n.replace(e,""),o=n.length-a.length;return E(t,a,i*Math.pow(10,2*o))+r("%",o)}(t,l,h);if(-1!==l.indexOf("E"))return v(l,h);if(36===l.charCodeAt(0))return"$"+y(t,l.substr(" "==l.charAt(1)?2:1),h);let m,g,b,x,_=Math.abs(h),w=h<0?"-":"";if(l.match(/^00+$/))return w+i(_,l.length);if(l.match(/^[#?]+$/))return m=""+h,0===h&&(m=""),m.length>l.length?m:d(l.substr(0,l.length-m.length))+m;if(g=l.match(s))return function(e,t,n){return n+(0===t?"":""+t)+r(" ",e[1].length+2+e[4].length)}(g,_,w);if(l.match(/^#+0+$/))return w+i(_,l.length-l.indexOf("0"));if(g=l.match(c))return m=(""+h).replace(/^([^\.]+)$/,"$1."+d(g[1])).replace(/\.$/,"."+d(g[1])),m=m.replace(/\.(\d*)$/,(function(e,t){return"."+t+r("0",d(g[1]).length-t.length)})),-1!==l.indexOf("0.")?m:m.replace(/^0\./,".");if(l=l.replace(/^#+([0.])/,"$1"),g=l.match(/^(0*)\.(#*)$/))return w+(""+_).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,g[1].length?"0.":".");if(g=l.match(/^#{1,3},##0(\.?)$/))return w+k(""+_);if(g=l.match(/^#,##0\.([#0]*0)$/))return h<0?"-"+y(t,l,-h):k(""+h)+"."+r("0",g[1].length);if(g=l.match(/^#,#*,#0/))return y(t,l.replace(/^#,#*,/,""),h);if(g=l.match(/^([0#]+)(\\?-([0#]+))+$/))return m=n(y(t,l.replace(/[\\-]/g,""),h)),b=0,n(n(l.replace(/\\/g,"")).replace(/[0#]/g,(function(e){return b<m.length?m.charAt(b++):"0"===e?"0":""})));if(l.match(f))return m=y(t,"##########",h),"("+m.substr(0,3)+") "+m.substr(3,3)+"-"+m.substr(6);let A="";if(g=l.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return b=Math.min(g[4].length,7),x=p(_,Math.pow(10,b)-1,!1),m=""+w,A=E("n",g[1],x[1])," "==A.charAt(A.length-1)&&(A=A.substr(0,A.length-1)+"0"),m+=A+g[2]+"/"+g[3],A=o(x[2],b),A.length<g[4].length&&(A=d(g[4].substr(g[4].length-A.length))+A),m+=A,m;if(g=l.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return b=Math.min(Math.max(g[1].length,g[4].length),7),x=p(_,Math.pow(10,b)-1,!0),w+(x[0]||(x[1]?"":"0"))+" "+(x[1]?a(x[1],b)+g[2]+"/"+g[3]+o(x[2],b):r(" ",2*b+1+g[2].length+g[3].length));if(g=l.match(/^[#0?]+$/))return m=""+h,l.length<=m.length?m:d(l.substr(0,l.length-m.length))+m;if(g=l.match(/^([#0]+)\.([#0]+)$/)){m=""+h.toFixed(Math.min(g[2].length,10)).replace(/([^0])0+$/,"$1"),b=m.indexOf(".");let e=l.indexOf(".")-b,t=l.length-m.length-e;return d(l.substr(0,e)+m+l.substr(l.length-t))}if(g=l.match(/^00,000\.([#0]*0)$/))return h<0?"-"+y(t,l,-h):k(""+h).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,(function(e){return"00,"+(e.length<3?i(0,3-e.length):"")+e}))+"."+i(0,g[1].length);switch(l){case"###,###":case"##,###":case"#,###":const e=k(""+_);return"0"!==e?w+e:"";default:if(l.match(/\.[0#?]*$/))return y(t,l.slice(0,l.lastIndexOf(".")),h)+d(l.slice(l.lastIndexOf(".")))}throw new Error("unsupported format |"+l+"|")}return function(e,t,n){return(0|n)===n?y(e,t,n):g(e,t,n)}}();function T(e){const t=[];let n=!1,r=0;for(let i=0;i<e.length;++i)switch(e.charCodeAt(i)){case 34:n=!n;break;case 95:case 42:case 92:++i;break;case 59:t[t.length]=e.substr(r,i-r),r=i+1}if(t[t.length]=e.substr(r),!0===n)throw new Error("Format |"+e+"| unterminated string ");return t}t._split=T;const M=/\[[HhMmSs]*\]/;function S(e){let t=0,n="",r="";for(;t<e.length;)switch(n=e.charAt(t)){case"G":c(e,t)&&(t+=6),t++;break;case'"':for(;34!==e.charCodeAt(++t)&&t<e.length;)++t;++t;break;case"\\":case"_":t+=2;break;case"@":++t;break;case"B":case"b":if("1"===e.charAt(t+1)||"2"===e.charAt(t+1))return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":if("A/P"===e.substr(t,3).toUpperCase())return!0;if("AM/PM"===e.substr(t,5).toUpperCase())return!0;++t;break;case"[":for(r=n;"]"!==e.charAt(t++)&&t<e.length;)r+=e.charAt(t);if(r.match(M))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(n=e.charAt(++t))>-1||"\\"==n&&"-"==e.charAt(t+1)&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===n;);break;case"*":++t," "!==e.charAt(t)&&"*"!==e.charAt(t)||++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;default:++t}return!1}function C(e,t,n,r){let i,a,o,s=[],l="",u=0,f="",d="t",h="H";for(;u<e.length;)switch(f=e.charAt(u)){case"G":if(!c(e,u))throw new Error("unrecognized character "+f+" in "+e);s[s.length]={t:"G",v:"General"},u+=7;break;case'"':for(l="";34!==(o=e.charCodeAt(++u))&&u<e.length;)l+=String.fromCharCode(o);s[s.length]={t:"t",v:l},++u;break;case"\\":const a=e.charAt(++u),p="("===a||")"===a?a:"t";s[s.length]={t:p,v:a},++u;break;case"_":s[s.length]={t:"t",v:" "},u+=2;break;case"@":s[s.length]={t:"T",v:t},++u;break;case"B":case"b":if("1"===e.charAt(u+1)||"2"===e.charAt(u+1)){if(null==i&&(i=m(t,n,"2"===e.charAt(u+1)),null==i))return"";s[s.length]={t:"X",v:e.substr(u,2)},d=f,u+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":f=f.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0)return"";if(null==i&&(i=m(t,n),null==i))return"";for(l=f;++u<e.length&&e.charAt(u).toLowerCase()===f;)l+=f;"m"===f&&"h"===d.toLowerCase()&&(f="M"),"h"===f&&(f=h),s[s.length]={t:f,v:l},d=f;break;case"A":case"a":const g={t:f,v:f};if(null==i&&(i=m(t,n)),"A/P"===e.substr(u,3).toUpperCase()?(null!=i&&(g.v=i.H>=12?"P":"A"),g.t="T",h="h",u+=3):"AM/PM"===e.substr(u,5).toUpperCase()?(null!=i&&(g.v=i.H>=12?"PM":"AM"),g.t="T",u+=5,h="h"):(g.t="t",++u),null==i&&"T"===g.t)return"";s[s.length]=g,d=f;break;case"[":for(l=f;"]"!==e.charAt(u++)&&u<e.length;)l+=e.charAt(u);if("]"!==l.slice(-1))throw'unterminated "[" block: |'+l+"|";if(l.match(M)){if(null==i&&(i=m(t,n),null==i))return"";s[s.length]={t:"Z",v:l.toLowerCase()},d=l.charAt(1)}else l.indexOf("$")>-1&&(l=(l.match(/\$([^-\[\]]*)/)||[])[1]||"$",S(e)||(s[s.length]={t:"t",v:l}));break;case".":if(null!=i){for(l=f;++u<e.length&&"0"===(f=e.charAt(u));)l+=f;s[s.length]={t:"s",v:l};break}case"0":case"#":for(l=f;++u<e.length&&"0#?.,E+-%".indexOf(f=e.charAt(u))>-1||"\\"==f&&"-"==e.charAt(u+1)&&u<e.length-2&&"0#".indexOf(e.charAt(u+2))>-1;)l+=f;s[s.length]={t:"n",v:l};break;case"?":for(l=f;e.charAt(++u)===f;)l+=f;s[s.length]={t:f,v:l},d=f;break;case"*":++u," "!==e.charAt(u)&&"*"!==e.charAt(u)||++u;break;case"(":case")":s[s.length]={t:1===r||"number"==typeof t&&t<0?"t":f,v:f},++u;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(l=f;u<e.length&&"0123456789".indexOf(e.charAt(++u))>-1;)l+=e.charAt(u);s[s.length]={t:"D",v:l};break;case" ":s[s.length]={t:f,v:f},++u;break;default:if(-1===",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(f))throw new Error("unrecognized character "+f+" in "+e);s[s.length]={t:"t",v:f},++u}let p,g=0,v=0;for(u=s.length-1,d="t";u>=0;--u)switch(s[u].t){case"h":case"H":s[u].t=h,d="h",g<1&&(g=1);break;case"s":(p=s[u].v.match(/\.0+$/))&&(v=Math.max(v,p[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":d=s[u].t;break;case"m":"s"===d&&(s[u].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&s[u].v.match(/[Hh]/)&&(g=1),g<2&&s[u].v.match(/[Mm]/)&&(g=2),g<3&&s[u].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:i.u>=.5&&(i.u=0,++i.S),i.S>=60&&(i.S=0,++i.M),i.M>=60&&(i.M=0,++i.H);break;case 2:i.u>=.5&&(i.u=0,++i.S),i.S>=60&&(i.S=0,++i.M)}let y,b="";for(u=0;u<s.length;++u)switch(s[u].t){case"t":case"T":case" ":case"D":break;case"X":s[u].v="",s[u].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[u].v=A(s[u].t.charCodeAt(0),s[u].v,i,v),s[u].t="t";break;case"n":case"(":case"?":for(y=u+1;null!=s[y]&&("?"===(f=s[y].t)||"D"===f||(" "===f||"t"===f)&&null!=s[y+1]&&("?"===s[y+1].t||"t"===s[y+1].t&&"/"===s[y+1].v)||"("===s[u].t&&(" "===f||"n"===f||")"===f)||"t"===f&&("/"===s[y].v||" "===s[y].v&&null!=s[y+1]&&"?"===s[y+1].t));)s[u].v+=s[y].v,s[y]={v:"",t:";"},++y;b+=s[u].v,u=y-1;break;case"G":s[u].t="t",s[u].v=w(t,n)}let x,_,k="";if(b.length>0){40===b.charCodeAt(0)?(x=t<0&&45===b.charCodeAt(0)?-t:t,_=E("(",b,x)):(x=t<0&&r>1?-t:t,_=E("n",b,x),x<0&&s[0]&&"t"===s[0].t&&(_=_.substr(1),s[0].v="-"+s[0].v)),y=_.length-1;let e=s.length;for(u=0;u<s.length;++u)if(null!=s[u]&&"t"!==s[u].t&&s[u].v.indexOf(".")>-1){e=u;break}let n=s.length;if(e===s.length&&-1===_.indexOf("E")){for(u=s.length-1;u>=0;--u)null!=s[u]&&-1!=="n?(".indexOf(s[u].t)&&(y>=s[u].v.length-1?(y-=s[u].v.length,s[u].v=_.substr(y+1,s[u].v.length)):y<0?s[u].v="":(s[u].v=_.substr(0,y+1),y=-1),s[u].t="t",n=u);y>=0&&n<s.length&&(s[n].v=_.substr(0,y+1)+s[n].v)}else if(e!==s.length&&-1===_.indexOf("E")){for(y=_.indexOf(".")-1,u=e;u>=0;--u)if(null!=s[u]&&-1!=="n?(".indexOf(s[u].t)){for(a=s[u].v.indexOf(".")>-1&&u===e?s[u].v.indexOf(".")-1:s[u].v.length-1,k=s[u].v.substr(a+1);a>=0;--a)y>=0&&("0"===s[u].v.charAt(a)||"#"===s[u].v.charAt(a))&&(k=_.charAt(y--)+k);s[u].v=k,s[u].t="t",n=u}for(y>=0&&n<s.length&&(s[n].v=_.substr(0,y+1)+s[n].v),y=_.indexOf(".")+1,u=e;u<s.length;++u)if(null!=s[u]&&(-1!=="n?(".indexOf(s[u].t)||u===e)){for(a=s[u].v.indexOf(".")>-1&&u===e?s[u].v.indexOf(".")+1:0,k=s[u].v.substr(0,a);a<s[u].v.length;++a)y<_.length&&(k+=_.charAt(y++));s[u].v=k,s[u].t="t",n=u}}}for(u=0;u<s.length;++u)null!=s[u]&&"n(?".indexOf(s[u].t)>-1&&(x=r>1&&t<0&&u>0&&"-"===s[u-1].v?-t:t,s[u].v=E(s[u].t,s[u].v,x),s[u].t="t");let T="";for(u=0;u!==s.length;++u)null!=s[u]&&(T+=s[u].v);return T}t.is_date=S,t._eval=C;const O=/\[[=<>]/,R=/\[([=<>]*)(-?\d+\.?\d*)\]/;function N(e,t){if(null==t)return!1;const n=parseFloat(t[2]);switch(t[1]){case"=":if(e===n)return!0;break;case">":if(e>n)return!0;break;case"<":if(e<n)return!0;break;case"<>":if(e!==n)return!0;break;case">=":if(e>=n)return!0;break;case"<=":if(e<=n)return!0}return!1}function L(e,t,n){null==n&&(n={});let r="";switch(typeof e){case"string":r="m/d/yy"===e&&n.dateNF?n.dateNF:e;break;case"number":r=14===e&&n.dateNF?n.dateNF:(null!=n.table?n.table:h)[e]}if(c(r,0))return w(t,n);t instanceof Date&&(t=b(t,n.date1904));const i=function(e,t){let n=T(e),r=n.length,i=n[r-1].indexOf("@");if(r<4&&i>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if("number"!=typeof t)return[4,4===n.length||i>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=i>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=i>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=i>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"]}const a=t>0?n[0]:t<0?n[1]:n[2];if(-1===n[0].indexOf("[")&&-1===n[1].indexOf("["))return[r,a];if(null!=n[0].match(O)||null!=n[1].match(O)){const e=n[0].match(R),i=n[1].match(R);return N(t,e)?[r,n[0]]:N(t,i)?[r,n[1]]:[r,n[null!=e&&null!=i?2:1]]}return[r,a]}(r,t);if(c(i[1]))return w(t,n);if(!0===t)t="TRUE";else if(!1===t)t="FALSE";else if(""===t||null==t)return"";return C(i[1],t,n,i[0])}function D(e,t){if("number"!=typeof t){t=+t||-1;for(let n=0;n<392;++n)if(void 0!==h[n]){if(h[n]===e){t=n;break}}else t<0&&(t=n);t<0&&(t=391)}return h[t]=e,t}t.load=D,t._table=h,t.get_table=function(){return h},t.load_table=function(e){for(let t=0;392!==t;++t)void 0!==e[t]&&D(e[t],t)},t.init_table=d,t.format=L,e.exports=t},5605:(e,t,n)=>{"use strict";var r=n(3814);e.exports=function(e){var t=typeof e;if("string"===t){var n=e;if(0===(e=+e)&&r(n))return!1}else if("number"!==t)return!1;return e-e<1}},37221:(e,t,n)=>{var r=n(63039);e.exports=function(e,t,n){if(!e)throw new TypeError("must specify data as first parameter");if(n=0|+(n||0),Array.isArray(e)&&e[0]&&"number"==typeof e[0][0]){var i,a,o,s,l=e[0].length,c=e.length*l;t&&"string"!=typeof t||(t=new(r(t||"float32"))(c+n));var u=t.length-n;if(c!==u)throw new Error("source length "+c+" ("+l+"x"+e.length+") does not match destination length "+u);for(i=0,o=n;i<e.length;i++)for(a=0;a<l;a++)t[o++]=null===e[i][a]?NaN:e[i][a]}else if(t&&"string"!=typeof t)t.set(e,n);else{var f=r(t||"float32");if(Array.isArray(e)||"array"===t)for(i=0,o=n,s=(t=new f(e.length+n)).length;o<s;o++,i++)t[o]=null===e[i]?NaN:e[i];else 0===n?t=new f(e):(t=new f(e.length+n)).set(e,n)}return t}},17338:(e,t,n)=>{"use strict";var r=n(42415),i=[32,126];e.exports=function(e){var t=(e=e||{}).shape?e.shape:e.canvas?[e.canvas.width,e.canvas.height]:[512,512],n=e.canvas||document.createElement("canvas"),a=e.font,o="number"==typeof e.step?[e.step,e.step]:e.step||[32,32],s=e.chars||i;a&&"string"!=typeof a&&(a=r(a));if(Array.isArray(s)){if(2===s.length&&"number"==typeof s[0]&&"number"==typeof s[1]){for(var l=[],c=s[0],u=0;c<=s[1];c++)l[u++]=String.fromCharCode(c);s=l}}else s=String(s).split("");t=t.slice(),n.width=t[0],n.height=t[1];var f=n.getContext("2d");f.fillStyle="#000",f.fillRect(0,0,n.width,n.height),f.font=a,f.textAlign="center",f.textBaseline="middle",f.fillStyle="#fff";var d=o[0]/2,h=o[1]/2;for(c=0;c<s.length;c++)f.fillText(s[c],d,h),(d+=o[0])>t[0]-o[0]/2&&(d=o[0]/2,h+=o[1]);return n}},30037:e=>{"use strict";function t(e,a){a||(a={}),("string"==typeof e||Array.isArray(e))&&(a.family=e);var o=Array.isArray(a.family)?a.family.join(", "):a.family;if(!o)throw Error("`family` must be defined");var s=a.size||a.fontSize||a.em||48,l=a.weight||a.fontWeight||"",c=(e=[a.style||a.fontStyle||"",l,s].join(" ")+"px "+o,a.origin||"top");if(t.cache[o]&&s<=t.cache[o].em)return n(t.cache[o],c);var u=a.canvas||t.canvas,f=u.getContext("2d"),d={upper:void 0!==a.upper?a.upper:"H",lower:void 0!==a.lower?a.lower:"x",descent:void 0!==a.descent?a.descent:"p",ascent:void 0!==a.ascent?a.ascent:"h",tittle:void 0!==a.tittle?a.tittle:"i",overshoot:void 0!==a.overshoot?a.overshoot:"O"},h=Math.ceil(1.5*s);u.height=h,u.width=.5*h,f.font=e;var p="H",m={top:0};f.clearRect(0,0,h,h),f.textBaseline="top",f.fillStyle="black",f.fillText(p,0,0);var g=r(f.getImageData(0,0,h,h));f.clearRect(0,0,h,h),f.textBaseline="bottom",f.fillText(p,0,h);var v=r(f.getImageData(0,0,h,h));m.lineHeight=m.bottom=h-v+g,f.clearRect(0,0,h,h),f.textBaseline="alphabetic",f.fillText(p,0,h);var y=h-r(f.getImageData(0,0,h,h))-1+g;m.baseline=m.alphabetic=y,f.clearRect(0,0,h,h),f.textBaseline="middle",f.fillText(p,0,.5*h);var b=r(f.getImageData(0,0,h,h));m.median=m.middle=h-b-1+g-.5*h,f.clearRect(0,0,h,h),f.textBaseline="hanging",f.fillText(p,0,.5*h);var x=r(f.getImageData(0,0,h,h));m.hanging=h-x-1+g-.5*h,f.clearRect(0,0,h,h),f.textBaseline="ideographic",f.fillText(p,0,h);var _=r(f.getImageData(0,0,h,h));if(m.ideographic=h-_-1+g,d.upper&&(f.clearRect(0,0,h,h),f.textBaseline="top",f.fillText(d.upper,0,0),m.upper=r(f.getImageData(0,0,h,h)),m.capHeight=m.baseline-m.upper),d.lower&&(f.clearRect(0,0,h,h),f.textBaseline="top",f.fillText(d.lower,0,0),m.lower=r(f.getImageData(0,0,h,h)),m.xHeight=m.baseline-m.lower),d.tittle&&(f.clearRect(0,0,h,h),f.textBaseline="top",f.fillText(d.tittle,0,0),m.tittle=r(f.getImageData(0,0,h,h))),d.ascent&&(f.clearRect(0,0,h,h),f.textBaseline="top",f.fillText(d.ascent,0,0),m.ascent=r(f.getImageData(0,0,h,h))),d.descent&&(f.clearRect(0,0,h,h),f.textBaseline="top",f.fillText(d.descent,0,0),m.descent=i(f.getImageData(0,0,h,h))),d.overshoot){f.clearRect(0,0,h,h),f.textBaseline="top",f.fillText(d.overshoot,0,0);var w=i(f.getImageData(0,0,h,h));m.overshoot=w-y}for(var A in m)m[A]/=s;return m.em=s,t.cache[o]=m,n(m,c)}function n(e,t){var n={};for(var r in"string"==typeof t&&(t=e[t]),e)"em"!==r&&(n[r]=e[r]-t);return n}function r(e){for(var t=e.height,n=e.data,r=3;r<n.length;r+=4)if(0!==n[r])return Math.floor(.25*(r-3)/t)}function i(e){for(var t=e.height,n=e.data,r=n.length-1;r>0;r-=4)if(0!==n[r])return Math.floor(.25*(r-3)/t)}e.exports=t,t.canvas=document.createElement("canvas"),t.cache={}},10220:e=>{e.exports=function(e,t){if("string"!=typeof e)throw new TypeError("must specify type string");if(t=t||{},"undefined"==typeof document&&!t.canvas)return null;var n=t.canvas||document.createElement("canvas");"number"==typeof t.width&&(n.width=t.width);"number"==typeof t.height&&(n.height=t.height);var r,i=t;try{var a=[e];0===e.indexOf("webgl")&&a.push("experimental-"+e);for(var o=0;o<a.length;o++)if(r=n.getContext(a[o],i))return r}catch(e){r=null}return r||null}},44532:e=>{e.exports=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],f=t[9],d=t[10],h=t[11],p=t[12],m=t[13],g=t[14],v=t[15];return e[0]=s*(d*v-h*g)-f*(l*v-c*g)+m*(l*h-c*d),e[1]=-(r*(d*v-h*g)-f*(i*v-a*g)+m*(i*h-a*d)),e[2]=r*(l*v-c*g)-s*(i*v-a*g)+m*(i*c-a*l),e[3]=-(r*(l*h-c*d)-s*(i*h-a*d)+f*(i*c-a*l)),e[4]=-(o*(d*v-h*g)-u*(l*v-c*g)+p*(l*h-c*d)),e[5]=n*(d*v-h*g)-u*(i*v-a*g)+p*(i*h-a*d),e[6]=-(n*(l*v-c*g)-o*(i*v-a*g)+p*(i*c-a*l)),e[7]=n*(l*h-c*d)-o*(i*h-a*d)+u*(i*c-a*l),e[8]=o*(f*v-h*m)-u*(s*v-c*m)+p*(s*h-c*f),e[9]=-(n*(f*v-h*m)-u*(r*v-a*m)+p*(r*h-a*f)),e[10]=n*(s*v-c*m)-o*(r*v-a*m)+p*(r*c-a*s),e[11]=-(n*(s*h-c*f)-o*(r*h-a*f)+u*(r*c-a*s)),e[12]=-(o*(f*g-d*m)-u*(s*g-l*m)+p*(s*d-l*f)),e[13]=n*(f*g-d*m)-u*(r*g-i*m)+p*(r*d-i*f),e[14]=-(n*(s*g-l*m)-o*(r*g-i*m)+p*(r*l-i*s)),e[15]=n*(s*d-l*f)-o*(r*d-i*f)+u*(r*l-i*s),e}},4846:e=>{e.exports=function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},56286:e=>{e.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},6235:e=>{e.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},18320:e=>{e.exports=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=e[9],f=e[10],d=e[11],h=e[12],p=e[13],m=e[14],g=e[15];return(t*o-n*a)*(f*g-d*m)-(t*s-r*a)*(u*g-d*p)+(t*l-i*a)*(u*m-f*p)+(n*s-r*o)*(c*g-d*h)-(n*l-i*o)*(c*m-f*h)+(r*l-i*s)*(c*p-u*h)}},79460:e=>{e.exports=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,l=i+i,c=n*o,u=r*o,f=r*s,d=i*o,h=i*s,p=i*l,m=a*o,g=a*s,v=a*l;return e[0]=1-f-p,e[1]=u+v,e[2]=d-g,e[3]=0,e[4]=u-v,e[5]=1-c-p,e[6]=h+m,e[7]=0,e[8]=d+g,e[9]=h-m,e[10]=1-c-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},66198:e=>{e.exports=function(e,t,n){var r,i,a,o=n[0],s=n[1],l=n[2],c=Math.sqrt(o*o+s*s+l*l);if(Math.abs(c)<1e-6)return null;return o*=c=1/c,s*=c,l*=c,r=Math.sin(t),i=Math.cos(t),a=1-i,e[0]=o*o*a+i,e[1]=s*o*a+l*r,e[2]=l*o*a-s*r,e[3]=0,e[4]=o*s*a-l*r,e[5]=s*s*a+i,e[6]=l*s*a+o*r,e[7]=0,e[8]=o*l*a+s*r,e[9]=s*l*a-o*r,e[10]=l*l*a+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},25554:e=>{e.exports=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=r+r,l=i+i,c=a+a,u=r*s,f=r*l,d=r*c,h=i*l,p=i*c,m=a*c,g=o*s,v=o*l,y=o*c;return e[0]=1-(h+m),e[1]=f+y,e[2]=d-v,e[3]=0,e[4]=f-y,e[5]=1-(u+m),e[6]=p+g,e[7]=0,e[8]=d+v,e[9]=p-g,e[10]=1-(u+h),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}},75782:e=>{e.exports=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},65296:e=>{e.exports=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}},56857:e=>{e.exports=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},84454:e=>{e.exports=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},66139:e=>{e.exports=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},53977:e=>{e.exports=function(e,t,n,r,i,a,o){var s=1/(n-t),l=1/(i-r),c=1/(a-o);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*l,e[10]=(o+a)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*c,e[15]=0,e}},12453:e=>{e.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},2699:(e,t,n)=>{e.exports={create:n(6235),clone:n(4846),copy:n(56286),identity:n(12453),transpose:n(10460),invert:n(243),adjoint:n(44532),determinant:n(18320),multiply:n(78719),translate:n(44953),scale:n(7877),rotate:n(85204),rotateX:n(94454),rotateY:n(3413),rotateZ:n(21836),fromRotation:n(66198),fromRotationTranslation:n(25554),fromScaling:n(75782),fromTranslation:n(65296),fromXRotation:n(56857),fromYRotation:n(84454),fromZRotation:n(66139),fromQuat:n(79460),frustum:n(53977),perspective:n(6053),perspectiveFromFieldOfView:n(1977),ortho:n(44749),lookAt:n(96681),str:n(33540)}},243:e=>{e.exports=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],f=t[9],d=t[10],h=t[11],p=t[12],m=t[13],g=t[14],v=t[15],y=n*s-r*o,b=n*l-i*o,x=n*c-a*o,_=r*l-i*s,w=r*c-a*s,A=i*c-a*l,k=u*m-f*p,E=u*g-d*p,T=u*v-h*p,M=f*g-d*m,S=f*v-h*m,C=d*v-h*g,O=y*C-b*S+x*M+_*T-w*E+A*k;if(!O)return null;return O=1/O,e[0]=(s*C-l*S+c*M)*O,e[1]=(i*S-r*C-a*M)*O,e[2]=(m*A-g*w+v*_)*O,e[3]=(d*w-f*A-h*_)*O,e[4]=(l*T-o*C-c*E)*O,e[5]=(n*C-i*T+a*E)*O,e[6]=(g*x-p*A-v*b)*O,e[7]=(u*A-d*x+h*b)*O,e[8]=(o*S-s*T+c*k)*O,e[9]=(r*T-n*S-a*k)*O,e[10]=(p*w-m*x+v*y)*O,e[11]=(f*x-u*w-h*y)*O,e[12]=(s*E-o*M-l*k)*O,e[13]=(n*M-r*E+i*k)*O,e[14]=(m*b-p*_-g*y)*O,e[15]=(u*_-f*b+d*y)*O,e}},96681:(e,t,n)=>{var r=n(12453);e.exports=function(e,t,n,i){var a,o,s,l,c,u,f,d,h,p,m=t[0],g=t[1],v=t[2],y=i[0],b=i[1],x=i[2],_=n[0],w=n[1],A=n[2];if(Math.abs(m-_)<1e-6&&Math.abs(g-w)<1e-6&&Math.abs(v-A)<1e-6)return r(e);f=m-_,d=g-w,h=v-A,p=1/Math.sqrt(f*f+d*d+h*h),a=b*(h*=p)-x*(d*=p),o=x*(f*=p)-y*h,s=y*d-b*f,(p=Math.sqrt(a*a+o*o+s*s))?(a*=p=1/p,o*=p,s*=p):(a=0,o=0,s=0);l=d*s-h*o,c=h*a-f*s,u=f*o-d*a,(p=Math.sqrt(l*l+c*c+u*u))?(l*=p=1/p,c*=p,u*=p):(l=0,c=0,u=0);return e[0]=a,e[1]=l,e[2]=f,e[3]=0,e[4]=o,e[5]=c,e[6]=d,e[7]=0,e[8]=s,e[9]=u,e[10]=h,e[11]=0,e[12]=-(a*m+o*g+s*v),e[13]=-(l*m+c*g+u*v),e[14]=-(f*m+d*g+h*v),e[15]=1,e}},78719:e=>{e.exports=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],f=t[8],d=t[9],h=t[10],p=t[11],m=t[12],g=t[13],v=t[14],y=t[15],b=n[0],x=n[1],_=n[2],w=n[3];return e[0]=b*r+x*s+_*f+w*m,e[1]=b*i+x*l+_*d+w*g,e[2]=b*a+x*c+_*h+w*v,e[3]=b*o+x*u+_*p+w*y,b=n[4],x=n[5],_=n[6],w=n[7],e[4]=b*r+x*s+_*f+w*m,e[5]=b*i+x*l+_*d+w*g,e[6]=b*a+x*c+_*h+w*v,e[7]=b*o+x*u+_*p+w*y,b=n[8],x=n[9],_=n[10],w=n[11],e[8]=b*r+x*s+_*f+w*m,e[9]=b*i+x*l+_*d+w*g,e[10]=b*a+x*c+_*h+w*v,e[11]=b*o+x*u+_*p+w*y,b=n[12],x=n[13],_=n[14],w=n[15],e[12]=b*r+x*s+_*f+w*m,e[13]=b*i+x*l+_*d+w*g,e[14]=b*a+x*c+_*h+w*v,e[15]=b*o+x*u+_*p+w*y,e}},44749:e=>{e.exports=function(e,t,n,r,i,a,o){var s=1/(t-n),l=1/(r-i),c=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(o+a)*c,e[15]=1,e}},6053:e=>{e.exports=function(e,t,n,r,i){var a=1/Math.tan(t/2),o=1/(r-i);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*o,e[15]=0,e}},1977:e=>{e.exports=function(e,t,n,r){var i=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+s),c=2/(i+a);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(o-s)*l*.5,e[9]=(i-a)*c*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}},85204:e=>{e.exports=function(e,t,n,r){var i,a,o,s,l,c,u,f,d,h,p,m,g,v,y,b,x,_,w,A,k,E,T,M,S=r[0],C=r[1],O=r[2],R=Math.sqrt(S*S+C*C+O*O);if(Math.abs(R)<1e-6)return null;S*=R=1/R,C*=R,O*=R,i=Math.sin(n),a=Math.cos(n),o=1-a,s=t[0],l=t[1],c=t[2],u=t[3],f=t[4],d=t[5],h=t[6],p=t[7],m=t[8],g=t[9],v=t[10],y=t[11],b=S*S*o+a,x=C*S*o+O*i,_=O*S*o-C*i,w=S*C*o-O*i,A=C*C*o+a,k=O*C*o+S*i,E=S*O*o+C*i,T=C*O*o-S*i,M=O*O*o+a,e[0]=s*b+f*x+m*_,e[1]=l*b+d*x+g*_,e[2]=c*b+h*x+v*_,e[3]=u*b+p*x+y*_,e[4]=s*w+f*A+m*k,e[5]=l*w+d*A+g*k,e[6]=c*w+h*A+v*k,e[7]=u*w+p*A+y*k,e[8]=s*E+f*T+m*M,e[9]=l*E+d*T+g*M,e[10]=c*E+h*T+v*M,e[11]=u*E+p*T+y*M,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e}},94454:e=>{e.exports=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],l=t[7],c=t[8],u=t[9],f=t[10],d=t[11];t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[4]=a*i+c*r,e[5]=o*i+u*r,e[6]=s*i+f*r,e[7]=l*i+d*r,e[8]=c*i-a*r,e[9]=u*i-o*r,e[10]=f*i-s*r,e[11]=d*i-l*r,e}},3413:e=>{e.exports=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],c=t[8],u=t[9],f=t[10],d=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=a*i-c*r,e[1]=o*i-u*r,e[2]=s*i-f*r,e[3]=l*i-d*r,e[8]=a*r+c*i,e[9]=o*r+u*i,e[10]=s*r+f*i,e[11]=l*r+d*i,e}},21836:e=>{e.exports=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],c=t[4],u=t[5],f=t[6],d=t[7];t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=a*i+c*r,e[1]=o*i+u*r,e[2]=s*i+f*r,e[3]=l*i+d*r,e[4]=c*i-a*r,e[5]=u*i-o*r,e[6]=f*i-s*r,e[7]=d*i-l*r,e}},7877:e=>{e.exports=function(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},33540:e=>{e.exports=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}},44953:e=>{e.exports=function(e,t,n){var r,i,a,o,s,l,c,u,f,d,h,p,m=n[0],g=n[1],v=n[2];t===e?(e[12]=t[0]*m+t[4]*g+t[8]*v+t[12],e[13]=t[1]*m+t[5]*g+t[9]*v+t[13],e[14]=t[2]*m+t[6]*g+t[10]*v+t[14],e[15]=t[3]*m+t[7]*g+t[11]*v+t[15]):(r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],f=t[8],d=t[9],h=t[10],p=t[11],e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=f,e[9]=d,e[10]=h,e[11]=p,e[12]=r*m+s*g+f*v+t[12],e[13]=i*m+l*g+d*v+t[13],e[14]=a*m+c*g+h*v+t[14],e[15]=o*m+u*g+p*v+t[15]);return e}},10460:e=>{e.exports=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}},66636:(e,t,n)=>{"use strict";var r=n(47538),i=n(19795),a=n(24049),o=n(45762),s=n(28355),l=n(76302),c=n(17338),u=n(30307),f=n(84125),d=n(90912),h=n(7857),p=n(26547),m=n(91243),g=n(34204),v=n(30037),y=n(37221),b=n(66717).nextPow2,x=new s,_=!1;if(document.body){var w=document.body.appendChild(document.createElement("div"));w.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(w).fontStretch&&(_=!0),document.body.removeChild(w)}var A=function(e){!function(e){return"function"==typeof e&&e._gl&&e.prop&&e.texture&&e.buffer}(e)?this.gl=o(e):(e={regl:e},this.gl=e.regl._gl),this.shader=x.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=e.regl||a({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),x.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(d(e)?e:{})};A.prototype.createShader=function(){var e=this.regl,t=e({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:e.prop("count"),offset:e.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:e.this("sizeBuffer")},width:{offset:0,stride:8,buffer:e.this("sizeBuffer")},char:e.this("charBuffer"),position:e.this("position")},uniforms:{atlasSize:function(e,t){return[t.atlas.width,t.atlas.height]},atlasDim:function(e,t){return[t.atlas.cols,t.atlas.rows]},atlas:function(e,t){return t.atlas.texture},charStep:function(e,t){return t.atlas.step},em:function(e,t){return t.atlas.em},color:e.prop("color"),opacity:e.prop("opacity"),viewport:e.this("viewportArray"),scale:e.this("scale"),align:e.prop("align"),baseline:e.prop("baseline"),translate:e.this("translate"),positionOffset:e.prop("positionOffset")},primitive:"points",viewport:e.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\tvec2 offset = floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ vec2(positionOffset.x, -positionOffset.y)))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position = (position + translate) * scale;\n\t\t\t\tposition += offset * scale;\n\n\t\t\t\tcharCoord = position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position = vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize = charStep;\n\n\t\t\t\tcharId.x = mod(char, atlasDim.x);\n\t\t\t\tcharId.y = floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth = width * em;\n\n\t\t\t\tfontColor = color / 255.;\n\t\t\t}",frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform sampler2D atlas;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep = floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y = charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth = ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) > halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) < halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv += charId * charStep;\n\t\t\t\tuv = uv / atlasSize;\n\n\t\t\t\tvec4 color = fontColor;\n\t\t\t\tvec4 mask = texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY = lightness(mask);\n\t\t\t\t// float colorY = lightness(color);\n\t\t\t\tcolor.a *= maskY;\n\t\t\t\tcolor.a *= opacity;\n\n\t\t\t\t// color.a += .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb += (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor = color;\n\t\t\t}"});return{regl:e,draw:t,atlas:{}}},A.prototype.update=function(e){var t=this;if("string"==typeof e)e={text:e};else if(!e)return;null!=(e=i(e,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity&&(Array.isArray(e.opacity)?this.opacity=e.opacity.map((function(e){return parseFloat(e)})):this.opacity=parseFloat(e.opacity)),null!=e.viewport&&(this.viewport=f(e.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null!=e.kerning&&(this.kerning=e.kerning),null!=e.offset&&("number"==typeof e.offset&&(e.offset=[e.offset,0]),this.positionOffset=y(e.offset)),e.direction&&(this.direction=e.direction),e.range&&(this.range=e.range,this.scale=[1/(e.range[2]-e.range[0]),1/(e.range[3]-e.range[1])],this.translate=[-e.range[0],-e.range[1]]),e.scale&&(this.scale=e.scale),e.translate&&(this.translate=e.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||e.font||(e.font=A.baseFontSize+"px sans-serif");var n,a=!1,o=!1;if(e.font&&(Array.isArray(e.font)?e.font:[e.font]).forEach((function(e,n){if("string"==typeof e)try{e=r.parse(e)}catch(t){e=r.parse(A.baseFontSize+"px "+e)}else{var i=e.style,s=e.weight,l=e.stretch,c=e.variant;e=r.parse(r.stringify(e)),i&&(e.style=i),s&&(e.weight=s),l&&(e.stretch=l),c&&(e.variant=c)}var u=r.stringify({size:A.baseFontSize,family:e.family,stretch:_?e.stretch:void 0,variant:e.variant,weight:e.weight,style:e.style}),f=h(e.size),d=Math.round(f[0]*p(f[1]));if(d!==t.fontSize[n]&&(o=!0,t.fontSize[n]=d),!(t.font[n]&&u==t.font[n].baseString||(a=!0,t.font[n]=A.fonts[u],t.font[n]))){var m=e.family.join(", "),g=[e.style];e.style!=e.variant&&g.push(e.variant),e.variant!=e.weight&&g.push(e.weight),_&&e.weight!=e.stretch&&g.push(e.stretch),t.font[n]={baseString:u,family:m,weight:e.weight,stretch:e.stretch,style:e.style,variant:e.variant,width:{},kerning:{},metrics:v(m,{origin:"top",fontSize:A.baseFontSize,fontStyle:g.join(" ")})},A.fonts[u]=t.font[n]}})),(a||o)&&this.font.forEach((function(n,i){var a=r.stringify({size:t.fontSize[i],family:n.family,stretch:_?n.stretch:void 0,variant:n.variant,weight:n.weight,style:n.style});if(t.fontAtlas[i]=t.shader.atlas[a],!t.fontAtlas[i]){var o=n.metrics;t.shader.atlas[a]=t.fontAtlas[i]={fontString:a,step:2*Math.ceil(t.fontSize[i]*o.bottom*.5),em:t.fontSize[i],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:t.regl.texture()}}null==e.text&&(e.text=t.text)})),"string"==typeof e.text&&e.position&&e.position.length>2){for(var s=Array(.5*e.position.length),d=0;d<s.length;d++)s[d]=e.text;e.text=s}if(null!=e.text||a){if(this.textOffsets=[0],Array.isArray(e.text)){this.count=e.text[0].length,this.counts=[this.count];for(var x=1;x<e.text.length;x++)this.textOffsets[x]=this.textOffsets[x-1]+e.text[x-1].length,this.count+=e.text[x].length,this.counts.push(e.text[x].length);this.text=e.text.join("")}else this.text=e.text,this.count=this.text.length,this.counts=[this.count];n=[],this.font.forEach((function(e,r){A.atlasContext.font=e.baseString;for(var i=t.fontAtlas[r],a=0;a<t.text.length;a++){var o=t.text.charAt(a);if(null==i.ids[o]&&(i.ids[o]=i.chars.length,i.chars.push(o),n.push(o)),null==e.width[o]&&(e.width[o]=A.atlasContext.measureText(o).width/A.baseFontSize,t.kerning)){var s=[];for(var l in e.width)s.push(l+o,o+l);g(e.kerning,m(e.family,{pairs:s}))}}}))}if(e.position)if(e.position.length>2){for(var w=!e.position[0].length,k=u.mallocFloat(2*this.count),E=0,T=0;E<this.counts.length;E++){var M=this.counts[E];if(w)for(var S=0;S<M;S++)k[T++]=e.position[2*E],k[T++]=e.position[2*E+1];else for(var C=0;C<M;C++)k[T++]=e.position[E][0],k[T++]=e.position[E][1]}this.position.call?this.position({type:"float",data:k}):this.position=this.regl.buffer({type:"float",data:k}),u.freeFloat(k)}else this.position.destroy&&this.position.destroy(),this.position={constant:e.position};if(e.text||a){var O=u.mallocUint8(this.count),R=u.mallocFloat(2*this.count);this.textWidth=[];for(var N=0,L=0;N<this.counts.length;N++){for(var D=this.counts[N],P=this.font[N]||this.font[0],I=this.fontAtlas[N]||this.fontAtlas[0],F=0;F<D;F++){var z=this.text.charAt(L),j=this.text.charAt(L-1);if(O[L]=I.ids[z],R[2*L]=P.width[z],F){var B=R[2*L-2],U=R[2*L],$=R[2*L-1]+.5*B+.5*U;if(this.kerning){var q=P.kerning[j+z];q&&($+=.001*q)}R[2*L+1]=$}else R[2*L+1]=.5*R[2*L];L++}this.textWidth.push(R.length?.5*R[2*L-2]+R[2*L-1]:0)}e.align||(e.align=this.align),this.charBuffer({data:O,type:"uint8",usage:"stream"}),this.sizeBuffer({data:R,type:"float",usage:"stream"}),u.freeUint8(O),u.freeFloat(R),n.length&&this.font.forEach((function(e,n){var r=t.fontAtlas[n],i=r.step,a=Math.floor(A.maxAtlasSize/i),o=Math.min(a,r.chars.length),s=Math.ceil(r.chars.length/o),l=b(o*i),u=b(s*i);r.width=l,r.height=u,r.rows=s,r.cols=o,r.em&&r.texture({data:c({canvas:A.atlasCanvas,font:r.fontString,chars:r.chars,shape:[l,u],step:[i,i]})})}))}if(e.align&&(this.align=e.align,this.alignOffset=this.textWidth.map((function(e,n){var r=Array.isArray(t.align)?t.align.length>1?t.align[n]:t.align[0]:t.align;if("number"==typeof r)return r;switch(r){case"right":case"end":return-e;case"center":case"centre":case"middle":return.5*-e}return 0}))),null==this.baseline&&null==e.baseline&&(e.baseline=0),null!=e.baseline&&(this.baseline=e.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map((function(e,n){var r=(t.font[n]||t.font[0]).metrics,i=0;return i+=.5*r.bottom,i+="number"==typeof e?e-r.baseline:-r[e],i*=-1}))),null!=e.color)if(e.color||(e.color="transparent"),"string"!=typeof e.color&&isNaN(e.color)){var H;if("number"==typeof e.color[0]&&e.color.length>this.counts.length){var V=e.color.length;H=u.mallocUint8(V);for(var W=(e.color.subarray||e.color.slice).bind(e.color),G=0;G<V;G+=4)H.set(l(W(G,G+4),"uint8"),G)}else{var Y=e.color.length;H=u.mallocUint8(4*Y);for(var X=0;X<Y;X++)H.set(l(e.color[X]||0,"uint8"),4*X)}this.color=H}else this.color=l(e.color,"uint8");if(e.position||e.text||e.color||e.baseline||e.align||e.font||e.offset||e.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var K=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(K);for(var Z=0;Z<this.batch.length;Z++)this.batch[Z]={count:this.counts.length>1?this.counts[Z]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[Z]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*Z,4*Z+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[Z]:this.opacity,baseline:null!=this.baselineOffset[Z]?this.baselineOffset[Z]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[Z]?this.alignOffset[Z]:this.alignOffset[0]:0,atlas:this.fontAtlas[Z]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*Z,2*Z+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]},A.prototype.destroy=function(){},A.prototype.kerning=!0,A.prototype.position={constant:new Float32Array(2)},A.prototype.translate=null,A.prototype.scale=null,A.prototype.font=null,A.prototype.text="",A.prototype.positionOffset=[0,0],A.prototype.opacity=1,A.prototype.color=new Uint8Array([0,0,0,255]),A.prototype.alignOffset=[0,0],A.maxAtlasSize=1024,A.atlasCanvas=document.createElement("canvas"),A.atlasContext=A.atlasCanvas.getContext("2d",{alpha:!1}),A.baseFontSize=64,A.fonts={},e.exports=A},45762:(e,t,n)=>{"use strict";var r=n(19795);function i(e){if(e.container)if(e.container==document.body)document.body.style.width||(e.canvas.width=e.width||e.pixelRatio*n.g.innerWidth),document.body.style.height||(e.canvas.height=e.height||e.pixelRatio*n.g.innerHeight);else{var t=e.container.getBoundingClientRect();e.canvas.width=e.width||t.right-t.left,e.canvas.height=e.height||t.bottom-t.top}}function a(e){return"function"==typeof e.getContext&&"width"in e&&"height"in e}function o(){var e=document.createElement("canvas");return e.style.position="absolute",e.style.top=0,e.style.left=0,e}e.exports=function(e){if(e?"string"==typeof e&&(e={container:e}):e={},(e=a(e)||function(e){return"string"==typeof e.nodeName&&"function"==typeof e.appendChild&&"function"==typeof e.getBoundingClientRect}(e)?{container:e}:function(e){return"function"==typeof e.drawArrays||"function"==typeof e.drawElements}(e)?{gl:e}:r(e,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(e.pixelRatio=n.g.pixelRatio||1),e.gl)return e.gl;if(e.canvas&&(e.container=e.canvas.parentNode),e.container){if("string"==typeof e.container){var t=document.querySelector(e.container);if(!t)throw Error("Element "+e.container+" is not found");e.container=t}a(e.container)?(e.canvas=e.container,e.container=e.canvas.parentNode):e.canvas||(e.canvas=o(),e.container.appendChild(e.canvas),i(e))}else if(!e.canvas){if("undefined"==typeof document)throw Error("Not DOM environment. Use headless-gl.");e.container=document.body||document.documentElement,e.canvas=o(),e.container.appendChild(e.canvas),i(e)}return e.gl||["webgl","experimental-webgl","webgl-experimental"].some((function(t){try{e.gl=e.canvas.getContext(t,e.attrs)}catch(e){}return e.gl})),e.gl}},54257:e=>{e.exports=function(e){"string"==typeof e&&(e=[e]);for(var t=[].slice.call(arguments,1),n=[],r=0;r<e.length-1;r++)n.push(e[r],t[r]||"");return n.push(e[r]),n.join("")}},48684:(e,t,n)=>{"use strict";var r,i=n(5929);r="function"==typeof n.g.matchMedia?!n.g.matchMedia("(hover: none)").matches:i,e.exports=r},80959:(e,t,n)=>{"use strict";var r=n(5929);e.exports=r&&function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(t){e=!1}return e}()},14027:(e,t)=>{t.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,f=n?i-1:0,d=n?-1:1,h=e[t+f];for(f+=d,a=h&(1<<-u)-1,h>>=-u,u+=s;u>0;a=256*a+e[t+f],f+=d,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=r;u>0;o=256*o+e[t+f],f+=d,u-=8);if(0===a)a=1-c;else{if(a===l)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),a-=c}return(h?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var o,s,l,c=8*a-i-1,u=(1<<c)-1,f=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+f>=1?d/l:d*Math.pow(2,1-f))*l>=2&&(o++,l/=2),o+f>=u?(s=0,o=u):o+f>=1?(s=(t*l-1)*Math.pow(2,i),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;e[n+h]=255&o,h+=p,o/=256,c-=8);e[n+h-p]|=128*m}},47655:e=>{"use strict";e.exports=function(e,t,n,r,i,a,o,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,a,o,s],u=0;(l=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},5929:e=>{e.exports=!0},89032:e=>{"use strict";e.exports=function(e){return null!=e&&("object"==typeof e||"function"==typeof e)}},25540:e=>{"use strict";e.exports="undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},16182:e=>{"use strict";e.exports=i,e.exports.isMobile=i,e.exports.default=i;const t=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,n=/CrOS/,r=/android|ipad|playbook|silk/i;function i(e){e||(e={});let i=e.ua;if(i||"undefined"==typeof navigator||(i=navigator.userAgent),i&&i.headers&&"string"==typeof i.headers["user-agent"]&&(i=i.headers["user-agent"]),"string"!=typeof i)return!1;let a=t.test(i)&&!n.test(i)||!!e.tablet&&r.test(i);return!a&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==i.indexOf("Macintosh")&&-1!==i.indexOf("Safari")&&(a=!0),a}},43701:e=>{"use strict";e.exports=function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}},90912:e=>{"use strict";var t=Object.prototype.toString;e.exports=function(e){var n;return"[object Object]"===t.call(e)&&(null===(n=Object.getPrototypeOf(e))||n===Object.getPrototypeOf({}))}},3814:e=>{"use strict";e.exports=function(e){for(var t,n=e.length,r=0;r<n;r++)if(((t=e.charCodeAt(r))<9||t>13)&&32!==t&&133!==t&&160!==t&&5760!==t&&6158!==t&&(t<8192||t>8205)&&8232!==t&&8233!==t&&8239!==t&&8287!==t&&8288!==t&&12288!==t&&65279!==t)return!1;return!0}},40702:e=>{"use strict";e.exports=function(e){return"string"==typeof e&&(e=e.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(e)&&/[\dz]$/i.test(e)&&e.length>4))}},95180:function(e){var t;e.exports=(t=function(e,t){var n=Array.prototype.concat,r=Array.prototype.slice,i=Object.prototype.toString;function a(t,n){var r=t>n?t:n;return e.pow(10,17-~~(e.log(r>0?r:-r)*e.LOG10E))}var o=Array.isArray||function(e){return"[object Array]"===i.call(e)};function s(e){return"[object Function]"===i.call(e)}function l(e){return"number"==typeof e&&e-e==0}function c(e){return n.apply([],e)}function u(){return new u._init(arguments)}function f(){return 0}function d(){return 1}function h(e,t){return e===t?1:0}u.fn=u.prototype,u._init=function(e){if(o(e[0]))if(o(e[0][0])){s(e[1])&&(e[0]=u.map(e[0],e[1]));for(var t=0;t<e[0].length;t++)this[t]=e[0][t];this.length=e[0].length}else this[0]=s(e[1])?u.map(e[0],e[1]):e[0],this.length=1;else if(l(e[0]))this[0]=u.seq.apply(null,e),this.length=1;else{if(e[0]instanceof u)return u(e[0].toArray());this[0]=[],this.length=1}return this},u._init.prototype=u.prototype,u._init.constructor=u,u.utils={calcRdx:a,isArray:o,isFunction:s,isNumber:l,toVector:c},u._random_fn=e.random,u.setRandom=function(e){if("function"!=typeof e)throw new TypeError("fn is not a function");u._random_fn=e},u.extend=function(e){var t,n;if(1===arguments.length){for(n in e)u[n]=e[n];return this}for(t=1;t<arguments.length;t++)for(n in arguments[t])e[n]=arguments[t][n];return e},u.rows=function(e){return e.length||1},u.cols=function(e){return e[0].length||1},u.dimensions=function(e){return{rows:u.rows(e),cols:u.cols(e)}},u.row=function(e,t){return o(t)?t.map((function(t){return u.row(e,t)})):e[t]},u.rowa=function(e,t){return u.row(e,t)},u.col=function(e,t){if(o(t)){var n=u.arange(e.length).map((function(){return new Array(t.length)}));return t.forEach((function(t,r){u.arange(e.length).forEach((function(i){n[i][r]=e[i][t]}))})),n}for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=[e[i][t]];return r},u.cola=function(e,t){return u.col(e,t).map((function(e){return e[0]}))},u.diag=function(e){for(var t=u.rows(e),n=new Array(t),r=0;r<t;r++)n[r]=[e[r][r]];return n},u.antidiag=function(e){for(var t=u.rows(e)-1,n=new Array(t),r=0;t>=0;t--,r++)n[r]=[e[r][t]];return n},u.transpose=function(e){var t,n,r,i,a,s=[];for(o(e[0])||(e=[e]),n=e.length,r=e[0].length,a=0;a<r;a++){for(t=new Array(n),i=0;i<n;i++)t[i]=e[i][a];s.push(t)}return 1===s.length?s[0]:s},u.map=function(e,t,n){var r,i,a,s,l;for(o(e[0])||(e=[e]),i=e.length,a=e[0].length,s=n?e:new Array(i),r=0;r<i;r++)for(s[r]||(s[r]=new Array(a)),l=0;l<a;l++)s[r][l]=t(e[r][l],r,l);return 1===s.length?s[0]:s},u.cumreduce=function(e,t,n){var r,i,a,s,l;for(o(e[0])||(e=[e]),i=e.length,a=e[0].length,s=n?e:new Array(i),r=0;r<i;r++)for(s[r]||(s[r]=new Array(a)),a>0&&(s[r][0]=e[r][0]),l=1;l<a;l++)s[r][l]=t(s[r][l-1],e[r][l]);return 1===s.length?s[0]:s},u.alter=function(e,t){return u.map(e,t,!0)},u.create=function(e,t,n){var r,i,a=new Array(e);for(s(t)&&(n=t,t=e),r=0;r<e;r++)for(a[r]=new Array(t),i=0;i<t;i++)a[r][i]=n(r,i);return a},u.zeros=function(e,t){return l(t)||(t=e),u.create(e,t,f)},u.ones=function(e,t){return l(t)||(t=e),u.create(e,t,d)},u.rand=function(e,t){return l(t)||(t=e),u.create(e,t,u._random_fn)},u.identity=function(e,t){return l(t)||(t=e),u.create(e,t,h)},u.symmetric=function(e){var t,n,r=e.length;if(e.length!==e[0].length)return!1;for(t=0;t<r;t++)for(n=0;n<r;n++)if(e[n][t]!==e[t][n])return!1;return!0},u.clear=function(e){return u.alter(e,f)},u.seq=function(e,t,n,r){s(r)||(r=!1);var i,o=[],l=a(e,t),c=(t*l-e*l)/((n-1)*l),u=e;for(i=0;u<=t&&i<n;u=(e*l+c*l*++i)/l)o.push(r?r(u,i):u);return o},u.arange=function(e,n,r){var i,a=[];if(r=r||1,n===t&&(n=e,e=0),e===n||0===r)return[];if(e<n&&r<0)return[];if(e>n&&r>0)return[];if(r>0)for(i=e;i<n;i+=r)a.push(i);else for(i=e;i>n;i+=r)a.push(i);return a},u.slice=function(){function e(e,n,r,i){var a,o=[],s=e.length;if(n===t&&r===t&&i===t)return u.copy(e);if(i=i||1,(n=(n=n||0)>=0?n:s+n)===(r=(r=r||e.length)>=0?r:s+r)||0===i)return[];if(n<r&&i<0)return[];if(n>r&&i>0)return[];if(i>0)for(a=n;a<r;a+=i)o.push(e[a]);else for(a=n;a>r;a+=i)o.push(e[a]);return o}function n(t,n){var r,i;return l((n=n||{}).row)?l(n.col)?t[n.row][n.col]:e(u.rowa(t,n.row),(r=n.col||{}).start,r.end,r.step):l(n.col)?e(u.cola(t,n.col),(i=n.row||{}).start,i.end,i.step):(i=n.row||{},r=n.col||{},e(t,i.start,i.end,i.step).map((function(t){return e(t,r.start,r.end,r.step)})))}return n}(),u.sliceAssign=function(n,r,i){var a,o;if(l(r.row)){if(l(r.col))return n[r.row][r.col]=i;r.col=r.col||{},r.col.start=r.col.start||0,r.col.end=r.col.end||n[0].length,r.col.step=r.col.step||1,a=u.arange(r.col.start,e.min(n.length,r.col.end),r.col.step);var s=r.row;return a.forEach((function(e,t){n[s][e]=i[t]})),n}if(l(r.col)){r.row=r.row||{},r.row.start=r.row.start||0,r.row.end=r.row.end||n.length,r.row.step=r.row.step||1,o=u.arange(r.row.start,e.min(n[0].length,r.row.end),r.row.step);var c=r.col;return o.forEach((function(e,t){n[e][c]=i[t]})),n}return i[0].length===t&&(i=[i]),r.row.start=r.row.start||0,r.row.end=r.row.end||n.length,r.row.step=r.row.step||1,r.col.start=r.col.start||0,r.col.end=r.col.end||n[0].length,r.col.step=r.col.step||1,o=u.arange(r.row.start,e.min(n.length,r.row.end),r.row.step),a=u.arange(r.col.start,e.min(n[0].length,r.col.end),r.col.step),o.forEach((function(e,t){a.forEach((function(r,a){n[e][r]=i[t][a]}))})),n},u.diagonal=function(e){var t=u.zeros(e.length,e.length);return e.forEach((function(e,n){t[n][n]=e})),t},u.copy=function(e){return e.map((function(e){return l(e)?e:e.map((function(e){return e}))}))};var p=u.prototype;return p.length=0,p.push=Array.prototype.push,p.sort=Array.prototype.sort,p.splice=Array.prototype.splice,p.slice=Array.prototype.slice,p.toArray=function(){return this.length>1?r.call(this):r.call(this)[0]},p.map=function(e,t){return u(u.map(this,e,t))},p.cumreduce=function(e,t){return u(u.cumreduce(this,e,t))},p.alter=function(e){return u.alter(this,e),this},function(e){for(var t=0;t<e.length;t++)!function(e){p[e]=function(t){var n,r=this;return t?(setTimeout((function(){t.call(r,p[e].call(r))})),this):(n=u[e](this),o(n)?u(n):n)}}(e[t])}("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),function(e){for(var t=0;t<e.length;t++)!function(e){p[e]=function(t,n){var r=this;return n?(setTimeout((function(){n.call(r,p[e].call(r,t))})),this):u(u[e](this,t))}}(e[t])}("row col".split(" ")),function(e){for(var t=0;t<e.length;t++)!function(e){p[e]=function(){return u(u[e].apply(null,arguments))}}(e[t])}("create zeros ones rand identity".split(" ")),u}(Math),function(e,t){var n=e.utils.isFunction;function r(e,t){return e-t}function i(e,n,r){return t.max(n,t.min(e,r))}e.sum=function(e){for(var t=0,n=e.length;--n>=0;)t+=e[n];return t},e.sumsqrd=function(e){for(var t=0,n=e.length;--n>=0;)t+=e[n]*e[n];return t},e.sumsqerr=function(t){for(var n,r=e.mean(t),i=0,a=t.length;--a>=0;)i+=(n=t[a]-r)*n;return i},e.sumrow=function(e){for(var t=0,n=e.length;--n>=0;)t+=e[n];return t},e.product=function(e){for(var t=1,n=e.length;--n>=0;)t*=e[n];return t},e.min=function(e){for(var t=e[0],n=0;++n<e.length;)e[n]<t&&(t=e[n]);return t},e.max=function(e){for(var t=e[0],n=0;++n<e.length;)e[n]>t&&(t=e[n]);return t},e.unique=function(e){for(var t={},n=[],r=0;r<e.length;r++)t[e[r]]||(t[e[r]]=!0,n.push(e[r]));return n},e.mean=function(t){return e.sum(t)/t.length},e.meansqerr=function(t){return e.sumsqerr(t)/t.length},e.geomean=function(n){var r=n.map(t.log),i=e.mean(r);return t.exp(i)},e.median=function(e){var t=e.length,n=e.slice().sort(r);return 1&t?n[t/2|0]:(n[t/2-1]+n[t/2])/2},e.cumsum=function(t){return e.cumreduce(t,(function(e,t){return e+t}))},e.cumprod=function(t){return e.cumreduce(t,(function(e,t){return e*t}))},e.diff=function(e){var t,n=[],r=e.length;for(t=1;t<r;t++)n.push(e[t]-e[t-1]);return n},e.rank=function(e){var t,n=[],i={};for(t=0;t<e.length;t++)i[l=e[t]]?i[l]++:(i[l]=1,n.push(l));var a=n.sort(r),o={},s=1;for(t=0;t<a.length;t++){var l,c=i[l=a[t]],u=(s+(s+c-1))/2;o[l]=u,s+=c}return e.map((function(e){return o[e]}))},e.mode=function(e){var t,n=e.length,i=e.slice().sort(r),a=1,o=0,s=0,l=[];for(t=0;t<n;t++)i[t]===i[t+1]?a++:(a>o?(l=[i[t]],o=a,s=0):a===o&&(l.push(i[t]),s++),a=1);return 0===s?l[0]:l},e.range=function(t){return e.max(t)-e.min(t)},e.variance=function(t,n){return e.sumsqerr(t)/(t.length-(n?1:0))},e.pooledvariance=function(t){return t.reduce((function(t,n){return t+e.sumsqerr(n)}),0)/(t.reduce((function(e,t){return e+t.length}),0)-t.length)},e.deviation=function(t){for(var n=e.mean(t),r=t.length,i=new Array(r),a=0;a<r;a++)i[a]=t[a]-n;return i},e.stdev=function(n,r){return t.sqrt(e.variance(n,r))},e.pooledstdev=function(n){return t.sqrt(e.pooledvariance(n))},e.meandev=function(n){for(var r=e.mean(n),i=[],a=n.length-1;a>=0;a--)i.push(t.abs(n[a]-r));return e.mean(i)},e.meddev=function(n){for(var r=e.median(n),i=[],a=n.length-1;a>=0;a--)i.push(t.abs(n[a]-r));return e.median(i)},e.coeffvar=function(t){return e.stdev(t)/e.mean(t)},e.quartiles=function(e){var n=e.length,i=e.slice().sort(r);return[i[t.round(n/4)-1],i[t.round(n/2)-1],i[t.round(3*n/4)-1]]},e.quantiles=function(e,n,a,o){var s,l,c,u,f,d=e.slice().sort(r),h=[n.length],p=e.length;for(void 0===a&&(a=3/8),void 0===o&&(o=3/8),s=0;s<n.length;s++)c=p*(l=n[s])+(a+l*(1-a-o)),u=t.floor(i(c,1,p-1)),f=i(c-u,0,1),h[s]=(1-f)*d[u-1]+f*d[u];return h},e.percentile=function(e,t,n){var i=e.slice().sort(r),a=t*(i.length+(n?1:-1))+(n?0:1),o=parseInt(a),s=a-o;return o+1<i.length?i[o-1]+s*(i[o]-i[o-1]):i[o-1]},e.percentileOfScore=function(e,t,n){var r,i,a=0,o=e.length,s=!1;for("strict"===n&&(s=!0),i=0;i<o;i++)r=e[i],(s&&r<t||!s&&r<=t)&&a++;return a/o},e.histogram=function(n,r){r=r||4;var i,a=e.min(n),o=(e.max(n)-a)/r,s=n.length,l=[];for(i=0;i<r;i++)l[i]=0;for(i=0;i<s;i++)l[t.min(t.floor((n[i]-a)/o),r-1)]+=1;return l},e.covariance=function(t,n){var r,i=e.mean(t),a=e.mean(n),o=t.length,s=new Array(o);for(r=0;r<o;r++)s[r]=(t[r]-i)*(n[r]-a);return e.sum(s)/(o-1)},e.corrcoeff=function(t,n){return e.covariance(t,n)/e.stdev(t,1)/e.stdev(n,1)},e.spearmancoeff=function(t,n){return t=e.rank(t),n=e.rank(n),e.corrcoeff(t,n)},e.stanMoment=function(n,r){for(var i=e.mean(n),a=e.stdev(n),o=n.length,s=0,l=0;l<o;l++)s+=t.pow((n[l]-i)/a,r);return s/n.length},e.skewness=function(t){return e.stanMoment(t,3)},e.kurtosis=function(t){return e.stanMoment(t,4)-3};var a=e.prototype;!function(t){for(var r=0;r<t.length;r++)!function(t){a[t]=function(r,i){var o=[],s=0,l=this;if(n(r)&&(i=r,r=!1),i)return setTimeout((function(){i.call(l,a[t].call(l,r))})),this;if(this.length>1){for(l=!0===r?this:this.transpose();s<l.length;s++)o[s]=e[t](l[s]);return o}return e[t](this[0],r)}}(t[r])}("cumsum cumprod".split(" ")),function(t){for(var r=0;r<t.length;r++)!function(t){a[t]=function(r,i){var o=[],s=0,l=this;if(n(r)&&(i=r,r=!1),i)return setTimeout((function(){i.call(l,a[t].call(l,r))})),this;if(this.length>1){for("sumrow"!==t&&(l=!0===r?this:this.transpose());s<l.length;s++)o[s]=e[t](l[s]);return!0===r?e[t](e.utils.toVector(o)):o}return e[t](this[0],r)}}(t[r])}("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" ")),function(t){for(var r=0;r<t.length;r++)!function(t){a[t]=function(){var r,i=[],o=0,s=this,l=Array.prototype.slice.call(arguments);if(n(l[l.length-1])){r=l[l.length-1];var c=l.slice(0,l.length-1);return setTimeout((function(){r.call(s,a[t].apply(s,c))})),this}r=void 0;var u=function(n){return e[t].apply(s,[n].concat(l))};if(this.length>1){for(s=s.transpose();o<s.length;o++)i[o]=u(s[o]);return i}return u(this[0])}}(t[r])}("quantiles percentileOfScore".split(" "))}(t,Math),function(e,t){e.gammaln=function(e){var n,r,i,a=0,o=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],s=1.000000000190015;for(i=(r=n=e)+5.5,i-=(n+.5)*t.log(i);a<6;a++)s+=o[a]/++r;return t.log(2.5066282746310007*s/n)-i},e.loggam=function(e){var n,r,i,a,o,s,l,c=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(n=e,l=0,1==e||2==e)return 0;for(e<=7&&(n=e+(l=t.floor(7-e))),r=1/(n*n),i=2*t.PI,o=c[9],s=8;s>=0;s--)o*=r,o+=c[s];if(a=o/n+.5*t.log(i)+(n-.5)*t.log(n)-n,e<=7)for(s=1;s<=l;s++)a-=t.log(n-1),n-=1;return a},e.gammafn=function(e){var n,r,i,a,o=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],s=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],l=!1,c=0,u=0,f=0,d=e;if(e>171.6243769536076)return 1/0;if(d<=0){if(!(a=d%1+36e-17))return 1/0;l=(1&d?-1:1)*t.PI/t.sin(t.PI*a),d=1-d}for(i=d,r=d<1?d++:(d-=c=(0|d)-1)-1,n=0;n<8;++n)f=(f+o[n])*r,u=u*r+s[n];if(a=f/u+1,i<d)a/=i;else if(i>d)for(n=0;n<c;++n)a*=d,d++;return l&&(a=l/a),a},e.gammap=function(t,n){return e.lowRegGamma(t,n)*e.gammafn(t)},e.lowRegGamma=function(n,r){var i,a=e.gammaln(n),o=n,s=1/n,l=s,c=r+1-n,u=1/1e-30,f=1/c,d=f,h=1,p=-~(8.5*t.log(n>=1?n:1/n)+.4*n+17);if(r<0||n<=0)return NaN;if(r<n+1){for(;h<=p;h++)s+=l*=r/++o;return s*t.exp(-r+n*t.log(r)-a)}for(;h<=p;h++)d*=(f=1/(f=(i=-h*(h-n))*f+(c+=2)))*(u=c+i/u);return 1-d*t.exp(-r+n*t.log(r)-a)},e.factorialln=function(t){return t<0?NaN:e.gammaln(t+1)},e.factorial=function(t){return t<0?NaN:e.gammafn(t+1)},e.combination=function(n,r){return n>170||r>170?t.exp(e.combinationln(n,r)):e.factorial(n)/e.factorial(r)/e.factorial(n-r)},e.combinationln=function(t,n){return e.factorialln(t)-e.factorialln(n)-e.factorialln(t-n)},e.permutation=function(t,n){return e.factorial(t)/e.factorial(t-n)},e.betafn=function(n,r){if(!(n<=0||r<=0))return n+r>170?t.exp(e.betaln(n,r)):e.gammafn(n)*e.gammafn(r)/e.gammafn(n+r)},e.betaln=function(t,n){return e.gammaln(t)+e.gammaln(n)-e.gammaln(t+n)},e.betacf=function(e,n,r){var i,a,o,s,l=1e-30,c=1,u=n+r,f=n+1,d=n-1,h=1,p=1-u*e/f;for(t.abs(p)<l&&(p=l),s=p=1/p;c<=100&&(p=1+(a=c*(r-c)*e/((d+(i=2*c))*(n+i)))*p,t.abs(p)<l&&(p=l),h=1+a/h,t.abs(h)<l&&(h=l),s*=(p=1/p)*h,p=1+(a=-(n+c)*(u+c)*e/((n+i)*(f+i)))*p,t.abs(p)<l&&(p=l),h=1+a/h,t.abs(h)<l&&(h=l),s*=o=(p=1/p)*h,!(t.abs(o-1)<3e-7));c++);return s},e.gammapinv=function(n,r){var i,a,o,s,l,c,u=0,f=r-1,d=1e-8,h=e.gammaln(r);if(n>=1)return t.max(100,r+100*t.sqrt(r));if(n<=0)return 0;for(r>1?(l=t.log(f),c=t.exp(f*(l-1)-h),s=n<.5?n:1-n,i=(2.30753+.27061*(a=t.sqrt(-2*t.log(s))))/(1+a*(.99229+.04481*a))-a,n<.5&&(i=-i),i=t.max(.001,r*t.pow(1-1/(9*r)-i/(3*t.sqrt(r)),3))):i=n<(a=1-r*(.253+.12*r))?t.pow(n/a,1/r):1-t.log(1-(n-a)/(1-a));u<12;u++){if(i<=0)return 0;if((i-=a=(o=(e.lowRegGamma(r,i)-n)/(a=r>1?c*t.exp(-(i-f)+f*(t.log(i)-l)):t.exp(-i+f*t.log(i)-h)))/(1-.5*t.min(1,o*((r-1)/i-1))))<=0&&(i=.5*(i+a)),t.abs(a)<d*i)break}return i},e.erf=function(e){var n,r,i,a,o=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,1.5626441722e-8,-8.5238095915e-8,6.529054439e-9,5.059343495e-9,-9.91364156e-10,-2.27365122e-10,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],s=o.length-1,l=!1,c=0,u=0;for(e<0&&(e=-e,l=!0),r=4*(n=2/(2+e))-2;s>0;s--)i=c,c=r*c-u+o[s],u=i;return a=n*t.exp(-e*e+.5*(o[0]+r*c)-u),l?a-1:1-a},e.erfc=function(t){return 1-e.erf(t)},e.erfcinv=function(n){var r,i,a,o,s=0;if(n>=2)return-100;if(n<=0)return 100;for(o=n<1?n:2-n,r=-.70711*((2.30753+.27061*(a=t.sqrt(-2*t.log(o/2))))/(1+a*(.99229+.04481*a))-a);s<2;s++)r+=(i=e.erfc(r)-o)/(1.1283791670955126*t.exp(-r*r)-r*i);return n<1?r:-r},e.ibetainv=function(n,r,i){var a,o,s,l,c,u,f,d,h,p,m=1e-8,g=r-1,v=i-1,y=0;if(n<=0)return 0;if(n>=1)return 1;for(r>=1&&i>=1?(s=n<.5?n:1-n,u=(2.30753+.27061*(l=t.sqrt(-2*t.log(s))))/(1+l*(.99229+.04481*l))-l,n<.5&&(u=-u),f=(u*u-3)/6,d=2/(1/(2*r-1)+1/(2*i-1)),h=u*t.sqrt(f+d)/d-(1/(2*i-1)-1/(2*r-1))*(f+5/6-2/(3*d)),u=r/(r+i*t.exp(2*h))):(a=t.log(r/(r+i)),o=t.log(i/(r+i)),u=n<(l=t.exp(r*a)/r)/(h=l+(c=t.exp(i*o)/i))?t.pow(r*h*n,1/r):1-t.pow(i*h*(1-n),1/i)),p=-e.gammaln(r)-e.gammaln(i)+e.gammaln(r+i);y<10;y++){if(0===u||1===u)return u;if((u-=l=(c=(e.ibeta(u,r,i)-n)/(l=t.exp(g*t.log(u)+v*t.log(1-u)+p)))/(1-.5*t.min(1,c*(g/u-v/(1-u)))))<=0&&(u=.5*(u+l)),u>=1&&(u=.5*(u+l+1)),t.abs(l)<m*u&&y>0)break}return u},e.ibeta=function(n,r,i){var a=0===n||1===n?0:t.exp(e.gammaln(r+i)-e.gammaln(r)-e.gammaln(i)+r*t.log(n)+i*t.log(1-n));return!(n<0||n>1)&&(n<(r+1)/(r+i+2)?a*e.betacf(n,r,i)/r:1-a*e.betacf(1-n,i,r)/i)},e.randn=function(n,r){var i,a,o,s,l;if(r||(r=n),n)return e.create(n,r,(function(){return e.randn()}));do{i=e._random_fn(),a=1.7156*(e._random_fn()-.5),l=(o=i-.449871)*o+(s=t.abs(a)+.386595)*(.196*s-.25472*o)}while(l>.27597&&(l>.27846||a*a>-4*t.log(i)*i*i));return a/i},e.randg=function(n,r,i){var a,o,s,l,c,u,f=n;if(i||(i=r),n||(n=1),r)return(u=e.zeros(r,i)).alter((function(){return e.randg(n)})),u;n<1&&(n+=1),a=n-1/3,o=1/t.sqrt(9*a);do{do{l=1+o*(c=e.randn())}while(l<=0);l*=l*l,s=e._random_fn()}while(s>1-.331*t.pow(c,4)&&t.log(s)>.5*c*c+a*(1-l+t.log(l)));if(n==f)return a*l;do{s=e._random_fn()}while(0===s);return t.pow(s,1/f)*a*l},function(t){for(var n=0;n<t.length;n++)!function(t){e.fn[t]=function(){return e(e.map(this,(function(n){return e[t](n)})))}}(t[n])}("gammaln gammafn factorial factorialln".split(" ")),function(t){for(var n=0;n<t.length;n++)!function(t){e.fn[t]=function(){return e(e[t].apply(null,arguments))}}(t[n])}("randn".split(" "))}(t,Math),function(e,t){function n(e,n,r,i){for(var a,o=0,s=1,l=1,c=1,u=0,f=0;t.abs((l-f)/l)>i;)f=l,s=c+(a=-(n+u)*(n+r+u)*e/(n+2*u)/(n+2*u+1))*s,l=(o=l+a*o)+(a=(u+=1)*(r-u)*e/(n+2*u-1)/(n+2*u))*l,o/=c=s+a*c,s/=c,l/=c,c=1;return l/n}function r(e){return e/t.abs(e)}function i(n,r,i){var a=12,o=6,s=-30,l=-50,c=60,u=8,f=3,d=2,h=3,p=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],m=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],g=.5*n;if(g>=u)return 1;var v,y=2*e.normal.cdf(g,0,1,1,0)-1;y=y>=t.exp(l/i)?t.pow(y,i):0;for(var b=g,x=(u-g)/(v=n>f?d:h),_=b+x,w=0,A=i-1,k=1;k<=v;k++){for(var E=0,T=.5*(_+b),M=.5*(_-b),S=1;S<=a;S++){var C,O=T+M*(o<S?p[(C=a-S+1)-1]:-p[(C=S)-1]),R=O*O;if(R>c)break;var N=2*e.normal.cdf(O,0,1,1,0)*.5-2*e.normal.cdf(O,n,1,1,0)*.5;N>=t.exp(s/A)&&(E+=N=m[C-1]*t.exp(-.5*R)*t.pow(N,A))}w+=E*=2*M*i/t.sqrt(2*t.PI),b=_,_+=x}return(y+=w)<=t.exp(s/r)?0:(y=t.pow(y,r))>=1?1:y}function a(e,n,r){var i=.322232421088,a=.099348462606,o=-1,s=.588581570495,l=-.342242088547,c=.531103462366,u=-.204231210125,f=.10353775285,d=-453642210148e-16,h=.0038560700634,p=.8832,m=.2368,g=1.214,v=1.208,y=1.4142,b=120,x=.5-.5*e,_=t.sqrt(t.log(1/(x*x))),w=_+((((_*d+u)*_+l)*_+o)*_+i)/((((_*h+f)*_+c)*_+s)*_+a);r<b&&(w+=(w*w*w+w)/r/4);var A=p-m*w;return r<b&&(A+=-g/r+v*w/r),w*(A*t.log(n-1)+y)}!function(t){for(var n=0;n<t.length;n++)!function(t){e[t]=function e(t,n,r){return this instanceof e?(this._a=t,this._b=n,this._c=r,this):new e(t,n,r)},e.fn[t]=function(n,r,i){var a=e[t](n,r,i);return a.data=this,a},e[t].prototype.sample=function(n){var r=this._a,i=this._b,a=this._c;return n?e.alter(n,(function(){return e[t].sample(r,i,a)})):e[t].sample(r,i,a)},function(n){for(var r=0;r<n.length;r++)!function(n){e[t].prototype[n]=function(r){var i=this._a,a=this._b,o=this._c;return r||0===r||(r=this.data),"number"!=typeof r?e.fn.map.call(r,(function(r){return e[t][n](r,i,a,o)})):e[t][n](r,i,a,o)}}(n[r])}("pdf cdf inv".split(" ")),function(n){for(var r=0;r<n.length;r++)!function(n){e[t].prototype[n]=function(){return e[t][n](this._a,this._b,this._c)}}(n[r])}("mean median mode variance".split(" "))}(t[n])}("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy laplace lognormal noncentralt normal pareto studentt weibull uniform binomial negbin hypgeom poisson triangular tukey arcsine".split(" ")),e.extend(e.beta,{pdf:function(n,r,i){return n>1||n<0?0:1==r&&1==i?1:r<512&&i<512?t.pow(n,r-1)*t.pow(1-n,i-1)/e.betafn(r,i):t.exp((r-1)*t.log(n)+(i-1)*t.log(1-n)-e.betaln(r,i))},cdf:function(t,n,r){return t>1||t<0?1*(t>1):e.ibeta(t,n,r)},inv:function(t,n,r){return e.ibetainv(t,n,r)},mean:function(e,t){return e/(e+t)},median:function(t,n){return e.ibetainv(.5,t,n)},mode:function(e,t){return(e-1)/(e+t-2)},sample:function(t,n){var r=e.randg(t);return r/(r+e.randg(n))},variance:function(e,n){return e*n/(t.pow(e+n,2)*(e+n+1))}}),e.extend(e.centralF,{pdf:function(n,r,i){var a;return n<0?0:r<=2?0===n&&r<2?1/0:0===n&&2===r?1:1/e.betafn(r/2,i/2)*t.pow(r/i,r/2)*t.pow(n,r/2-1)*t.pow(1+r/i*n,-(r+i)/2):(a=r*n/(i+n*r),r*(i/(i+n*r))/2*e.binomial.pdf((r-2)/2,(r+i-2)/2,a))},cdf:function(t,n,r){return t<0?0:e.ibeta(n*t/(n*t+r),n/2,r/2)},inv:function(t,n,r){return r/(n*(1/e.ibetainv(t,n/2,r/2)-1))},mean:function(e,t){return t>2?t/(t-2):void 0},mode:function(e,t){return e>2?t*(e-2)/(e*(t+2)):void 0},sample:function(t,n){return 2*e.randg(t/2)/t/(2*e.randg(n/2)/n)},variance:function(e,t){if(!(t<=4))return 2*t*t*(e+t-2)/(e*(t-2)*(t-2)*(t-4))}}),e.extend(e.cauchy,{pdf:function(e,n,r){return r<0?0:r/(t.pow(e-n,2)+t.pow(r,2))/t.PI},cdf:function(e,n,r){return t.atan((e-n)/r)/t.PI+.5},inv:function(e,n,r){return n+r*t.tan(t.PI*(e-.5))},median:function(e){return e},mode:function(e){return e},sample:function(n,r){return e.randn()*t.sqrt(1/(2*e.randg(.5)))*r+n}}),e.extend(e.chisquare,{pdf:function(n,r){return n<0?0:0===n&&2===r?.5:t.exp((r/2-1)*t.log(n)-n/2-r/2*t.log(2)-e.gammaln(r/2))},cdf:function(t,n){return t<0?0:e.lowRegGamma(n/2,t/2)},inv:function(t,n){return 2*e.gammapinv(t,.5*n)},mean:function(e){return e},median:function(e){return e*t.pow(1-2/(9*e),3)},mode:function(e){return e-2>0?e-2:0},sample:function(t){return 2*e.randg(t/2)},variance:function(e){return 2*e}}),e.extend(e.exponential,{pdf:function(e,n){return e<0?0:n*t.exp(-n*e)},cdf:function(e,n){return e<0?0:1-t.exp(-n*e)},inv:function(e,n){return-t.log(1-e)/n},mean:function(e){return 1/e},median:function(e){return 1/e*t.log(2)},mode:function(){return 0},sample:function(n){return-1/n*t.log(e._random_fn())},variance:function(e){return t.pow(e,-2)}}),e.extend(e.gamma,{pdf:function(n,r,i){return n<0?0:0===n&&1===r?1/i:t.exp((r-1)*t.log(n)-n/i-e.gammaln(r)-r*t.log(i))},cdf:function(t,n,r){return t<0?0:e.lowRegGamma(n,t/r)},inv:function(t,n,r){return e.gammapinv(t,n)*r},mean:function(e,t){return e*t},mode:function(e,t){if(e>1)return(e-1)*t},sample:function(t,n){return e.randg(t)*n},variance:function(e,t){return e*t*t}}),e.extend(e.invgamma,{pdf:function(n,r,i){return n<=0?0:t.exp(-(r+1)*t.log(n)-i/n-e.gammaln(r)+r*t.log(i))},cdf:function(t,n,r){return t<=0?0:1-e.lowRegGamma(n,r/t)},inv:function(t,n,r){return r/e.gammapinv(1-t,n)},mean:function(e,t){return e>1?t/(e-1):void 0},mode:function(e,t){return t/(e+1)},sample:function(t,n){return n/e.randg(t)},variance:function(e,t){if(!(e<=2))return t*t/((e-1)*(e-1)*(e-2))}}),e.extend(e.kumaraswamy,{pdf:function(e,n,r){return 0===e&&1===n?r:1===e&&1===r?n:t.exp(t.log(n)+t.log(r)+(n-1)*t.log(e)+(r-1)*t.log(1-t.pow(e,n)))},cdf:function(e,n,r){return e<0?0:e>1?1:1-t.pow(1-t.pow(e,n),r)},inv:function(e,n,r){return t.pow(1-t.pow(1-e,1/r),1/n)},mean:function(t,n){return n*e.gammafn(1+1/t)*e.gammafn(n)/e.gammafn(1+1/t+n)},median:function(e,n){return t.pow(1-t.pow(2,-1/n),1/e)},mode:function(e,n){if(e>=1&&n>=1&&1!==e&&1!==n)return t.pow((e-1)/(e*n-1),1/e)},variance:function(){throw new Error("variance not yet implemented")}}),e.extend(e.lognormal,{pdf:function(e,n,r){return e<=0?0:t.exp(-t.log(e)-.5*t.log(2*t.PI)-t.log(r)-t.pow(t.log(e)-n,2)/(2*r*r))},cdf:function(n,r,i){return n<0?0:.5+.5*e.erf((t.log(n)-r)/t.sqrt(2*i*i))},inv:function(n,r,i){return t.exp(-1.4142135623730951*i*e.erfcinv(2*n)+r)},mean:function(e,n){return t.exp(e+n*n/2)},median:function(e){return t.exp(e)},mode:function(e,n){return t.exp(e-n*n)},sample:function(n,r){return t.exp(e.randn()*r+n)},variance:function(e,n){return(t.exp(n*n)-1)*t.exp(2*e+n*n)}}),e.extend(e.noncentralt,{pdf:function(n,r,i){var a=1e-14;return t.abs(i)<a?e.studentt.pdf(n,r):t.abs(n)<a?t.exp(e.gammaln((r+1)/2)-i*i/2-.5*t.log(t.PI*r)-e.gammaln(r/2)):r/n*(e.noncentralt.cdf(n*t.sqrt(1+2/r),r+2,i)-e.noncentralt.cdf(n,r,i))},cdf:function(n,r,i){var a=1e-14,o=200;if(t.abs(i)<a)return e.studentt.cdf(n,r);var s=!1;n<0&&(s=!0,i=-i);for(var l=e.normal.cdf(-i,0,1),c=a+1,u=c,f=n*n/(n*n+r),d=0,h=t.exp(-i*i/2),p=t.exp(-i*i/2-.5*t.log(2)-e.gammaln(1.5))*i;d<o||u>a||c>a;)u=c,d>0&&(h*=i*i/(2*d),p*=i*i/(2*(d+.5))),l+=.5*(c=h*e.beta.cdf(f,d+.5,r/2)+p*e.beta.cdf(f,d+1,r/2)),d++;return s?1-l:l}}),e.extend(e.normal,{pdf:function(e,n,r){return t.exp(-.5*t.log(2*t.PI)-t.log(r)-t.pow(e-n,2)/(2*r*r))},cdf:function(n,r,i){return.5*(1+e.erf((n-r)/t.sqrt(2*i*i)))},inv:function(t,n,r){return-1.4142135623730951*r*e.erfcinv(2*t)+n},mean:function(e){return e},median:function(e){return e},mode:function(e){return e},sample:function(t,n){return e.randn()*n+t},variance:function(e,t){return t*t}}),e.extend(e.pareto,{pdf:function(e,n,r){return e<n?0:r*t.pow(n,r)/t.pow(e,r+1)},cdf:function(e,n,r){return e<n?0:1-t.pow(n/e,r)},inv:function(e,n,r){return n/t.pow(1-e,1/r)},mean:function(e,n){if(!(n<=1))return n*t.pow(e,n)/(n-1)},median:function(e,n){return e*(n*t.SQRT2)},mode:function(e){return e},variance:function(e,n){if(!(n<=2))return e*e*n/(t.pow(n-1,2)*(n-2))}}),e.extend(e.studentt,{pdf:function(n,r){return r=r>1e100?1e100:r,1/(t.sqrt(r)*e.betafn(.5,r/2))*t.pow(1+n*n/r,-(r+1)/2)},cdf:function(n,r){var i=r/2;return e.ibeta((n+t.sqrt(n*n+r))/(2*t.sqrt(n*n+r)),i,i)},inv:function(n,r){var i=e.ibetainv(2*t.min(n,1-n),.5*r,.5);return i=t.sqrt(r*(1-i)/i),n>.5?i:-i},mean:function(e){return e>1?0:void 0},median:function(){return 0},mode:function(){return 0},sample:function(n){return e.randn()*t.sqrt(n/(2*e.randg(n/2)))},variance:function(e){return e>2?e/(e-2):e>1?1/0:void 0}}),e.extend(e.weibull,{pdf:function(e,n,r){return e<0||n<0||r<0?0:r/n*t.pow(e/n,r-1)*t.exp(-t.pow(e/n,r))},cdf:function(e,n,r){return e<0?0:1-t.exp(-t.pow(e/n,r))},inv:function(e,n,r){return n*t.pow(-t.log(1-e),1/r)},mean:function(t,n){return t*e.gammafn(1+1/n)},median:function(e,n){return e*t.pow(t.log(2),1/n)},mode:function(e,n){return n<=1?0:e*t.pow((n-1)/n,1/n)},sample:function(n,r){return n*t.pow(-t.log(e._random_fn()),1/r)},variance:function(n,r){return n*n*e.gammafn(1+2/r)-t.pow(e.weibull.mean(n,r),2)}}),e.extend(e.uniform,{pdf:function(e,t,n){return e<t||e>n?0:1/(n-t)},cdf:function(e,t,n){return e<t?0:e<n?(e-t)/(n-t):1},inv:function(e,t,n){return t+e*(n-t)},mean:function(e,t){return.5*(e+t)},median:function(t,n){return e.mean(t,n)},mode:function(){throw new Error("mode is not yet implemented")},sample:function(t,n){return t/2+n/2+(n/2-t/2)*(2*e._random_fn()-1)},variance:function(e,n){return t.pow(n-e,2)/12}}),e.extend(e.binomial,{pdf:function(n,r,i){return 0===i||1===i?r*i===n?1:0:e.combination(r,n)*t.pow(i,n)*t.pow(1-i,r-n)},cdf:function(r,i,a){var o,s=1e-10;if(r<0)return 0;if(r>=i)return 1;if(a<0||a>1||i<=0)return NaN;var l=a,c=(r=t.floor(r))+1,u=i-r,f=c+u,d=t.exp(e.gammaln(f)-e.gammaln(u)-e.gammaln(c)+c*t.log(l)+u*t.log(1-l));return o=l<(c+1)/(f+2)?d*n(l,c,u,s):1-d*n(1-l,u,c,s),t.round(1/s*(1-o))/(1/s)}}),e.extend(e.negbin,{pdf:function(n,r,i){return n===n>>>0&&(n<0?0:e.combination(n+r-1,r-1)*t.pow(1-i,n)*t.pow(i,r))},cdf:function(t,n,r){var i=0,a=0;if(t<0)return 0;for(;a<=t;a++)i+=e.negbin.pdf(a,n,r);return i}}),e.extend(e.hypgeom,{pdf:function(n,r,i,a){if(n!=n|0)return!1;if(n<0||n<i-(r-a))return 0;if(n>a||n>i)return 0;if(2*i>r)return 2*a>r?e.hypgeom.pdf(r-i-a+n,r,r-i,r-a):e.hypgeom.pdf(a-n,r,r-i,a);if(2*a>r)return e.hypgeom.pdf(i-n,r,i,r-a);if(i<a)return e.hypgeom.pdf(n,r,a,i);for(var o=1,s=0,l=0;l<n;l++){for(;o>1&&s<a;)o*=1-i/(r-s),s++;o*=(a-l)*(i-l)/((l+1)*(r-i-a+l+1))}for(;s<a;s++)o*=1-i/(r-s);return t.min(1,t.max(0,o))},cdf:function(n,r,i,a){if(n<0||n<i-(r-a))return 0;if(n>=a||n>=i)return 1;if(2*i>r)return 2*a>r?e.hypgeom.cdf(r-i-a+n,r,r-i,r-a):1-e.hypgeom.cdf(a-n-1,r,r-i,a);if(2*a>r)return 1-e.hypgeom.cdf(i-n-1,r,i,r-a);if(i<a)return e.hypgeom.cdf(n,r,a,i);for(var o=1,s=1,l=0,c=0;c<n;c++){for(;o>1&&l<a;){var u=1-i/(r-l);s*=u,o*=u,l++}o+=s*=(a-c)*(i-c)/((c+1)*(r-i-a+c+1))}for(;l<a;l++)o*=1-i/(r-l);return t.min(1,t.max(0,o))}}),e.extend(e.poisson,{pdf:function(n,r){return r<0||n%1!=0||n<0?0:t.pow(r,n)*t.exp(-r)/e.factorial(n)},cdf:function(t,n){var r=[],i=0;if(t<0)return 0;for(;i<=t;i++)r.push(e.poisson.pdf(i,n));return e.sum(r)},mean:function(e){return e},variance:function(e){return e},sampleSmall:function(n){var r=1,i=0,a=t.exp(-n);do{i++,r*=e._random_fn()}while(r>a);return i-1},sampleLarge:function(n){var r,i,a,o,s,l,c,u,f,d,h=n;for(o=t.sqrt(h),s=t.log(h),l=.02483*(c=.931+2.53*o)-.059,u=1.1239+1.1328/(c-3.4),f=.9277-3.6224/(c-2);;){if(i=t.random()-.5,a=t.random(),d=.5-t.abs(i),r=t.floor((2*l/d+c)*i+h+.43),d>=.07&&a<=f)return r;if(!(r<0||d<.013&&a>d)&&t.log(a)+t.log(u)-t.log(l/(d*d)+c)<=r*s-h-e.loggam(r+1))return r}},sample:function(e){return e<10?this.sampleSmall(e):this.sampleLarge(e)}}),e.extend(e.triangular,{pdf:function(e,t,n,r){return n<=t||r<t||r>n?NaN:e<t||e>n?0:e<r?2*(e-t)/((n-t)*(r-t)):e===r?2/(n-t):2*(n-e)/((n-t)*(n-r))},cdf:function(e,n,r,i){return r<=n||i<n||i>r?NaN:e<=n?0:e>=r?1:e<=i?t.pow(e-n,2)/((r-n)*(i-n)):1-t.pow(r-e,2)/((r-n)*(r-i))},inv:function(e,n,r,i){return r<=n||i<n||i>r?NaN:e<=(i-n)/(r-n)?n+(r-n)*t.sqrt(e*((i-n)/(r-n))):n+(r-n)*(1-t.sqrt((1-e)*(1-(i-n)/(r-n))))},mean:function(e,t,n){return(e+t+n)/3},median:function(e,n,r){return r<=(e+n)/2?n-t.sqrt((n-e)*(n-r))/t.sqrt(2):r>(e+n)/2?e+t.sqrt((n-e)*(r-e))/t.sqrt(2):void 0},mode:function(e,t,n){return n},sample:function(n,r,i){var a=e._random_fn();return a<(i-n)/(r-n)?n+t.sqrt(a*(r-n)*(i-n)):r-t.sqrt((1-a)*(r-n)*(r-i))},variance:function(e,t,n){return(e*e+t*t+n*n-e*t-e*n-t*n)/18}}),e.extend(e.arcsine,{pdf:function(e,n,r){return r<=n?NaN:e<=n||e>=r?0:2/t.PI*t.pow(t.pow(r-n,2)-t.pow(2*e-n-r,2),-.5)},cdf:function(e,n,r){return e<n?0:e<r?2/t.PI*t.asin(t.sqrt((e-n)/(r-n))):1},inv:function(e,n,r){return n+(.5-.5*t.cos(t.PI*e))*(r-n)},mean:function(e,t){return t<=e?NaN:(e+t)/2},median:function(e,t){return t<=e?NaN:(e+t)/2},mode:function(){throw new Error("mode is not yet implemented")},sample:function(n,r){return(n+r)/2+(r-n)/2*t.sin(2*t.PI*e.uniform.sample(0,1))},variance:function(e,n){return n<=e?NaN:t.pow(n-e,2)/8}}),e.extend(e.laplace,{pdf:function(e,n,r){return r<=0?0:t.exp(-t.abs(e-n)/r)/(2*r)},cdf:function(e,n,r){return r<=0?0:e<n?.5*t.exp((e-n)/r):1-.5*t.exp(-(e-n)/r)},mean:function(e){return e},median:function(e){return e},mode:function(e){return e},variance:function(e,t){return 2*t*t},sample:function(n,i){var a=e._random_fn()-.5;return n-i*r(a)*t.log(1-2*t.abs(a))}}),e.extend(e.tukey,{cdf:function(n,r,a){var o=1,s=r,l=16,c=8,u=-30,f=1e-14,d=100,h=800,p=5e3,m=25e3,g=1,v=.5,y=.25,b=.125,x=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],_=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(n<=0)return 0;if(a<2||o<1||s<2)return NaN;if(!Number.isFinite(n))return 1;if(a>m)return i(n,o,s);var w,A=.5*a,k=A*t.log(a)-a*t.log(2)-e.gammaln(A),E=A-1,T=.25*a;w=a<=d?g:a<=h?v:a<=p?y:b,k+=t.log(w);for(var M=0,S=1;S<=50;S++){for(var C=0,O=(2*S-1)*w,R=1;R<=l;R++){var N,L;c<R?(N=R-c-1,L=k+E*t.log(O+x[N]*w)-(x[N]*w+O)*T):(N=R-1,L=k+E*t.log(O-x[N]*w)+(x[N]*w-O)*T),L>=u&&(C+=i(c<R?n*t.sqrt(.5*(x[N]*w+O)):n*t.sqrt(.5*(-x[N]*w+O)),o,s)*_[N]*t.exp(L))}if(S*w>=1&&C<=f)break;M+=C}if(C>f)throw new Error("tukey.cdf failed to converge");return M>1&&(M=1),M},inv:function(n,r,i){var o=1e-4,s=50;if(i<2||r<2)return NaN;if(n<0||n>1)return NaN;if(0===n)return 0;if(1===n)return 1/0;var l,c=a(n,r,i),u=e.tukey.cdf(c,r,i)-n;l=u>0?t.max(0,c-1):c+1;for(var f,d=e.tukey.cdf(l,r,i)-n,h=1;h<s;h++)if(f=l-d*(l-c)/(d-u),u=d,c=l,f<0&&(f=0,d=-n),d=e.tukey.cdf(f,r,i)-n,l=f,t.abs(l-c)<o)return f;throw new Error("tukey.inv failed to converge")}})}(t,Math),function(e,t){var n=Array.prototype.push,r=e.utils.isArray;function i(t){return r(t)||t instanceof e}e.extend({add:function(t,n){return i(n)?(i(n[0])||(n=[n]),e.map(t,(function(e,t,r){return e+n[t][r]}))):e.map(t,(function(e){return e+n}))},subtract:function(t,n){return i(n)?(i(n[0])||(n=[n]),e.map(t,(function(e,t,r){return e-n[t][r]||0}))):e.map(t,(function(e){return e-n}))},divide:function(t,n){return i(n)?(i(n[0])||(n=[n]),e.multiply(t,e.inv(n))):e.map(t,(function(e){return e/n}))},multiply:function(t,n){var r,a,o,s,l,c,u,f;if(void 0===t.length&&void 0===n.length)return t*n;if(l=t.length,c=t[0].length,u=e.zeros(l,o=i(n)?n[0].length:c),f=0,i(n)){for(;f<o;f++)for(r=0;r<l;r++){for(s=0,a=0;a<c;a++)s+=t[r][a]*n[a][f];u[r][f]=s}return 1===l&&1===f?u[0][0]:u}return e.map(t,(function(e){return e*n}))},outer:function(t,n){return e.multiply(t.map((function(e){return[e]})),[n])},dot:function(t,n){i(t[0])||(t=[t]),i(n[0])||(n=[n]);for(var r,a,o=1===t[0].length&&1!==t.length?e.transpose(t):t,s=1===n[0].length&&1!==n.length?e.transpose(n):n,l=[],c=0,u=o.length,f=o[0].length;c<u;c++){for(l[c]=[],r=0,a=0;a<f;a++)r+=o[c][a]*s[c][a];l[c]=r}return 1===l.length?l[0]:l},pow:function(n,r){return e.map(n,(function(e){return t.pow(e,r)}))},exp:function(n){return e.map(n,(function(e){return t.exp(e)}))},log:function(n){return e.map(n,(function(e){return t.log(e)}))},abs:function(n){return e.map(n,(function(e){return t.abs(e)}))},norm:function(e,n){var r=0,a=0;for(isNaN(n)&&(n=2),i(e[0])&&(e=e[0]);a<e.length;a++)r+=t.pow(t.abs(e[a]),n);return t.pow(r,1/n)},angle:function(n,r){return t.acos(e.dot(n,r)/(e.norm(n)*e.norm(r)))},aug:function(e,t){var r,i=[];for(r=0;r<e.length;r++)i.push(e[r].slice());for(r=0;r<i.length;r++)n.apply(i[r],t[r]);return i},inv:function(t){for(var n,r=t.length,i=t[0].length,a=e.identity(r,i),o=e.gauss_jordan(t,a),s=[],l=0;l<r;l++)for(s[l]=[],n=i;n<o[0].length;n++)s[l][n-i]=o[l][n];return s},det:function e(t){if(2===t.length)return t[0][0]*t[1][1]-t[0][1]*t[1][0];for(var n=0,r=0;r<t.length;r++){for(var i=[],a=1;a<t.length;a++){i[a-1]=[];for(var o=0;o<t.length;o++)o<r?i[a-1][o]=t[a][o]:o>r&&(i[a-1][o-1]=t[a][o])}var s=r%2?-1:1;n+=e(i)*t[0][r]*s}return n},gauss_elimination:function(n,r){var i,a,o,s,l=0,c=0,u=n.length,f=n[0].length,d=1,h=0,p=[];for(i=(n=e.aug(n,r))[0].length,l=0;l<u;l++){for(a=n[l][l],c=l,s=l+1;s<f;s++)a<t.abs(n[s][l])&&(a=n[s][l],c=s);if(c!=l)for(s=0;s<i;s++)o=n[l][s],n[l][s]=n[c][s],n[c][s]=o;for(c=l+1;c<u;c++)for(d=n[c][l]/n[l][l],s=l;s<i;s++)n[c][s]=n[c][s]-d*n[l][s]}for(l=u-1;l>=0;l--){for(h=0,c=l+1;c<=u-1;c++)h+=p[c]*n[l][c];p[l]=(n[l][i-1]-h)/n[l][l]}return p},gauss_jordan:function(n,r){var i,a,o,s=e.aug(n,r),l=s.length,c=s[0].length,u=0;for(a=0;a<l;a++){var f=a;for(o=a+1;o<l;o++)t.abs(s[o][a])>t.abs(s[f][a])&&(f=o);var d=s[a];for(s[a]=s[f],s[f]=d,o=a+1;o<l;o++)for(u=s[o][a]/s[a][a],i=a;i<c;i++)s[o][i]-=s[a][i]*u}for(a=l-1;a>=0;a--){for(u=s[a][a],o=0;o<a;o++)for(i=c-1;i>a-1;i--)s[o][i]-=s[a][i]*s[o][a]/u;for(s[a][a]/=u,i=l;i<c;i++)s[a][i]/=u}return s},triaUpSolve:function(t,n){var r,i=t[0].length,a=e.zeros(1,i)[0],o=!1;return null!=n[0].length&&(n=n.map((function(e){return e[0]})),o=!0),e.arange(i-1,-1,-1).forEach((function(o){r=e.arange(o+1,i).map((function(e){return a[e]*t[o][e]})),a[o]=(n[o]-e.sum(r))/t[o][o]})),o?a.map((function(e){return[e]})):a},triaLowSolve:function(t,n){var r,i=t[0].length,a=e.zeros(1,i)[0],o=!1;return null!=n[0].length&&(n=n.map((function(e){return e[0]})),o=!0),e.arange(i).forEach((function(i){r=e.arange(i).map((function(e){return t[i][e]*a[e]})),a[i]=(n[i]-e.sum(r))/t[i][i]})),o?a.map((function(e){return[e]})):a},lu:function(t){var n,r=t.length,i=e.identity(r),a=e.zeros(t.length,t[0].length);return e.arange(r).forEach((function(e){a[0][e]=t[0][e]})),e.arange(1,r).forEach((function(o){e.arange(o).forEach((function(r){n=e.arange(r).map((function(e){return i[o][e]*a[e][r]})),i[o][r]=(t[o][r]-e.sum(n))/a[r][r]})),e.arange(o,r).forEach((function(r){n=e.arange(o).map((function(e){return i[o][e]*a[e][r]})),a[o][r]=t[n.length][r]-e.sum(n)}))})),[i,a]},cholesky:function(n){var r,i=n.length,a=e.zeros(n.length,n[0].length);return e.arange(i).forEach((function(o){r=e.arange(o).map((function(e){return t.pow(a[o][e],2)})),a[o][o]=t.sqrt(n[o][o]-e.sum(r)),e.arange(o+1,i).forEach((function(t){r=e.arange(o).map((function(e){return a[o][e]*a[t][e]})),a[t][o]=(n[o][t]-e.sum(r))/a[o][o]}))})),a},gauss_jacobi:function(n,r,i,a){for(var o,s,l,c,u=0,f=0,d=n.length,h=[],p=[],m=[];u<d;u++)for(h[u]=[],p[u]=[],m[u]=[],f=0;f<d;f++)u>f?(h[u][f]=n[u][f],p[u][f]=m[u][f]=0):u<f?(p[u][f]=n[u][f],h[u][f]=m[u][f]=0):(m[u][f]=n[u][f],h[u][f]=p[u][f]=0);for(l=e.multiply(e.multiply(e.inv(m),e.add(h,p)),-1),s=e.multiply(e.inv(m),r),o=i,c=e.add(e.multiply(l,i),s),u=2;t.abs(e.norm(e.subtract(c,o)))>a;)o=c,c=e.add(e.multiply(l,o),s),u++;return c},gauss_seidel:function(n,r,i,a){for(var o,s,l,c,u,f=0,d=n.length,h=[],p=[],m=[];f<d;f++)for(h[f]=[],p[f]=[],m[f]=[],o=0;o<d;o++)f>o?(h[f][o]=n[f][o],p[f][o]=m[f][o]=0):f<o?(p[f][o]=n[f][o],h[f][o]=m[f][o]=0):(m[f][o]=n[f][o],h[f][o]=p[f][o]=0);for(c=e.multiply(e.multiply(e.inv(e.add(m,h)),p),-1),l=e.multiply(e.inv(e.add(m,h)),r),s=i,u=e.add(e.multiply(c,i),l),f=2;t.abs(e.norm(e.subtract(u,s)))>a;)s=u,u=e.add(e.multiply(c,s),l),f+=1;return u},SOR:function(n,r,i,a,o){for(var s,l,c,u,f,d=0,h=n.length,p=[],m=[],g=[];d<h;d++)for(p[d]=[],m[d]=[],g[d]=[],s=0;s<h;s++)d>s?(p[d][s]=n[d][s],m[d][s]=g[d][s]=0):d<s?(m[d][s]=n[d][s],p[d][s]=g[d][s]=0):(g[d][s]=n[d][s],p[d][s]=m[d][s]=0);for(u=e.multiply(e.inv(e.add(g,e.multiply(p,o))),e.subtract(e.multiply(g,1-o),e.multiply(m,o))),c=e.multiply(e.multiply(e.inv(e.add(g,e.multiply(p,o))),r),o),l=i,f=e.add(e.multiply(u,i),c),d=2;t.abs(e.norm(e.subtract(f,l)))>a;)l=f,f=e.add(e.multiply(u,l),c),d++;return f},householder:function(n){for(var r,i,a,o,s=n.length,l=n[0].length,c=0,u=[],f=[];c<s-1;c++){for(r=0,o=c+1;o<l;o++)r+=n[o][c]*n[o][c];for(r=(n[c+1][c]>0?-1:1)*t.sqrt(r),i=t.sqrt((r*r-n[c+1][c]*r)/2),(u=e.zeros(s,1))[c+1][0]=(n[c+1][c]-r)/(2*i),a=c+2;a<s;a++)u[a][0]=n[a][c]/(2*i);f=e.subtract(e.identity(s,l),e.multiply(e.multiply(u,e.transpose(u)),2)),n=e.multiply(f,e.multiply(n,f))}return n},QR:function(){var n=e.sum,r=e.arange;function i(i){var a,o,s,l=i.length,c=i[0].length,u=e.zeros(c,c);for(i=e.copy(i),o=0;o<c;o++){for(u[o][o]=t.sqrt(n(r(l).map((function(e){return i[e][o]*i[e][o]})))),a=0;a<l;a++)i[a][o]=i[a][o]/u[o][o];for(s=o+1;s<c;s++)for(u[o][s]=n(r(l).map((function(e){return i[e][o]*i[e][s]}))),a=0;a<l;a++)i[a][s]=i[a][s]-i[a][o]*u[o][s]}return[i,u]}return i}(),lstsq:function(){function t(t){var n=(t=e.copy(t)).length,r=e.identity(n);return e.arange(n-1,-1,-1).forEach((function(n){e.sliceAssign(r,{row:n},e.divide(e.slice(r,{row:n}),t[n][n])),e.sliceAssign(t,{row:n},e.divide(e.slice(t,{row:n}),t[n][n])),e.arange(n).forEach((function(i){var a=e.multiply(t[i][n],-1),o=e.slice(t,{row:i}),s=e.multiply(e.slice(t,{row:n}),a);e.sliceAssign(t,{row:i},e.add(o,s));var l=e.slice(r,{row:i}),c=e.multiply(e.slice(r,{row:n}),a);e.sliceAssign(r,{row:i},e.add(l,c))}))})),r}function n(n,r){var i=!1;void 0===r[0].length&&(r=r.map((function(e){return[e]})),i=!0);var a=e.QR(n),o=a[0],s=a[1],l=n[0].length,c=e.slice(o,{col:{end:l}}),u=t(e.slice(s,{row:{end:l}})),f=e.transpose(c);void 0===f[0].length&&(f=[f]);var d=e.multiply(e.multiply(u,f),r);return void 0===d.length&&(d=[[d]]),i?d.map((function(e){return e[0]})):d}return n}(),jacobi:function(n){for(var r,i,a,o,s,l,c,u=1,f=n.length,d=e.identity(f,f),h=[];1===u;){for(s=n[0][1],a=0,o=1,r=0;r<f;r++)for(i=0;i<f;i++)r!=i&&s<t.abs(n[r][i])&&(s=t.abs(n[r][i]),a=r,o=i);for(l=n[a][a]===n[o][o]?n[a][o]>0?t.PI/4:-t.PI/4:t.atan(2*n[a][o]/(n[a][a]-n[o][o]))/2,(c=e.identity(f,f))[a][a]=t.cos(l),c[a][o]=-t.sin(l),c[o][a]=t.sin(l),c[o][o]=t.cos(l),d=e.multiply(d,c),n=e.multiply(e.multiply(e.inv(c),n),c),u=0,r=1;r<f;r++)for(i=1;i<f;i++)r!=i&&t.abs(n[r][i])>.001&&(u=1)}for(r=0;r<f;r++)h.push(n[r][r]);return[d,h]},rungekutta:function(e,t,n,r,i,a){var o,s,l;if(2===a)for(;r<=n;)i+=((o=t*e(r,i))+(s=t*e(r+t,i+o)))/2,r+=t;if(4===a)for(;r<=n;)i+=((o=t*e(r,i))+2*(s=t*e(r+t/2,i+o/2))+2*(l=t*e(r+t/2,i+s/2))+t*e(r+t,i+l))/6,r+=t;return i},romberg:function(e,n,r,i){for(var a,o,s,l,c,u=0,f=(r-n)/2,d=[],h=[],p=[];u<i/2;){for(c=e(n),s=n,l=0;s<=r;s+=f,l++)d[l]=s;for(a=d.length,s=1;s<a-1;s++)c+=(s%2!=0?4:2)*e(d[s]);c=f/3*(c+e(r)),p[u]=c,f/=2,u++}for(o=p.length,a=1;1!==o;){for(s=0;s<o-1;s++)h[s]=(t.pow(4,a)*p[s+1]-p[s])/(t.pow(4,a)-1);o=h.length,p=h,h=[],a++}return p},richardson:function(e,n,r,i){function a(e,t){for(var n,r=0,i=e.length;r<i;r++)e[r]===t&&(n=r);return n}for(var o,s,l,c,u,f=t.abs(r-e[a(e,r)+1]),d=0,h=[],p=[];i>=f;)o=a(e,r+i),s=a(e,r),h[d]=(n[o]-2*n[s]+n[2*s-o])/(i*i),i/=2,d++;for(c=h.length,l=1;1!=c;){for(u=0;u<c-1;u++)p[u]=(t.pow(4,l)*h[u+1]-h[u])/(t.pow(4,l)-1);c=p.length,h=p,p=[],l++}return h},simpson:function(e,t,n,r){for(var i,a=(n-t)/r,o=e(t),s=[],l=t,c=0,u=1;l<=n;l+=a,c++)s[c]=l;for(i=s.length;u<i-1;u++)o+=(u%2!=0?4:2)*e(s[u]);return a/3*(o+e(n))},hermite:function(e,t,n,r){for(var i,a=e.length,o=0,s=0,l=[],c=[],u=[],f=[];s<a;s++){for(l[s]=1,i=0;i<a;i++)s!=i&&(l[s]*=(r-e[i])/(e[s]-e[i]));for(c[s]=0,i=0;i<a;i++)s!=i&&(c[s]+=1/(e[s]-e[i]));u[s]=(1-2*(r-e[s])*c[s])*(l[s]*l[s]),f[s]=(r-e[s])*(l[s]*l[s]),o+=u[s]*t[s]+f[s]*n[s]}return o},lagrange:function(e,t,n){for(var r,i,a=0,o=0,s=e.length;o<s;o++){for(i=t[o],r=0;r<s;r++)o!=r&&(i*=(n-e[r])/(e[o]-e[r]));a+=i}return a},cubic_spline:function(t,n,r){for(var i,a=t.length,o=0,s=[],l=[],c=[],u=[],f=[],d=[],h=[];o<a-1;o++)f[o]=t[o+1]-t[o];for(c[0]=0,o=1;o<a-1;o++)c[o]=3/f[o]*(n[o+1]-n[o])-3/f[o-1]*(n[o]-n[o-1]);for(o=1;o<a-1;o++)s[o]=[],l[o]=[],s[o][o-1]=f[o-1],s[o][o]=2*(f[o-1]+f[o]),s[o][o+1]=f[o],l[o][0]=c[o];for(u=e.multiply(e.inv(s),l),i=0;i<a-1;i++)d[i]=(n[i+1]-n[i])/f[i]-f[i]*(u[i+1][0]+2*u[i][0])/3,h[i]=(u[i+1][0]-u[i][0])/(3*f[i]);for(i=0;i<a&&!(t[i]>r);i++);return n[i-=1]+(r-t[i])*d[i]+e.sq(r-t[i])*u[i]+(r-t[i])*e.sq(r-t[i])*h[i]},gauss_quadrature:function(){throw new Error("gauss_quadrature not yet implemented")},PCA:function(t){var n,r,i=t.length,a=t[0].length,o=0,s=[],l=[],c=[],u=[],f=[],d=[],h=[],p=[],m=[],g=[];for(o=0;o<i;o++)s[o]=e.sum(t[o])/a;for(o=0;o<a;o++)for(h[o]=[],n=0;n<i;n++)h[o][n]=t[n][o]-s[n];for(h=e.transpose(h),o=0;o<i;o++)for(p[o]=[],n=0;n<i;n++)p[o][n]=e.dot([h[o]],[h[n]])/(a-1);for(m=(c=e.jacobi(p))[0],l=c[1],g=e.transpose(m),o=0;o<l.length;o++)for(n=o;n<l.length;n++)l[o]<l[n]&&(r=l[o],l[o]=l[n],l[n]=r,u=g[o],g[o]=g[n],g[n]=u);for(d=e.transpose(h),o=0;o<i;o++)for(f[o]=[],n=0;n<d.length;n++)f[o][n]=e.dot([g[o]],[d[n]]);return[t,l,g,f]}}),function(t){for(var n=0;n<t.length;n++)!function(t){e.fn[t]=function(n,r){var i=this;return r?(setTimeout((function(){r.call(i,e.fn[t].call(i,n))}),15),this):"number"==typeof e[t](this,n)?e[t](this,n):e(e[t](this,n))}}(t[n])}("add divide multiply subtract dot pow exp log abs norm angle".split(" "))}(t,Math),function(e,t){var n=[].slice,r=e.utils.isNumber,i=e.utils.isArray;function a(e,n,r,i){if(e>1||r>1||e<=0||r<=0)throw new Error("Proportions should be greater than 0 and less than 1");var a=(e*n+r*i)/(n+i);return(e-r)/t.sqrt(a*(1-a)*(1/n+1/i))}e.extend({zscore:function(){var t=n.call(arguments);return r(t[1])?(t[0]-t[1])/t[2]:(t[0]-e.mean(t[1]))/e.stdev(t[1],t[2])},ztest:function(){var r,a=n.call(arguments);return i(a[1])?(r=e.zscore(a[0],a[1],a[3]),1===a[2]?e.normal.cdf(-t.abs(r),0,1):2*e.normal.cdf(-t.abs(r),0,1)):a.length>2?(r=e.zscore(a[0],a[1],a[2]),1===a[3]?e.normal.cdf(-t.abs(r),0,1):2*e.normal.cdf(-t.abs(r),0,1)):(r=a[0],1===a[1]?e.normal.cdf(-t.abs(r),0,1):2*e.normal.cdf(-t.abs(r),0,1))}}),e.extend(e.fn,{zscore:function(e,t){return(e-this.mean())/this.stdev(t)},ztest:function(n,r,i){var a=t.abs(this.zscore(n,i));return 1===r?e.normal.cdf(-a,0,1):2*e.normal.cdf(-a,0,1)}}),e.extend({tscore:function(){var r=n.call(arguments);return 4===r.length?(r[0]-r[1])/(r[2]/t.sqrt(r[3])):(r[0]-e.mean(r[1]))/(e.stdev(r[1],!0)/t.sqrt(r[1].length))},ttest:function(){var i,a=n.call(arguments);return 5===a.length?(i=t.abs(e.tscore(a[0],a[1],a[2],a[3])),1===a[4]?e.studentt.cdf(-i,a[3]-1):2*e.studentt.cdf(-i,a[3]-1)):r(a[1])?(i=t.abs(a[0]),1==a[2]?e.studentt.cdf(-i,a[1]-1):2*e.studentt.cdf(-i,a[1]-1)):(i=t.abs(e.tscore(a[0],a[1])),1==a[2]?e.studentt.cdf(-i,a[1].length-1):2*e.studentt.cdf(-i,a[1].length-1))}}),e.extend(e.fn,{tscore:function(e){return(e-this.mean())/(this.stdev(!0)/t.sqrt(this.cols()))},ttest:function(n,r){return 1===r?1-e.studentt.cdf(t.abs(this.tscore(n)),this.cols()-1):2*e.studentt.cdf(-t.abs(this.tscore(n)),this.cols()-1)}}),e.extend({anovafscore:function(){var r,i,a,o,s,l,c,u,f=n.call(arguments);if(1===f.length){for(s=new Array(f[0].length),c=0;c<f[0].length;c++)s[c]=f[0][c];f=s}for(i=new Array,c=0;c<f.length;c++)i=i.concat(f[c]);for(a=e.mean(i),r=0,c=0;c<f.length;c++)r+=f[c].length*t.pow(e.mean(f[c])-a,2);for(r/=f.length-1,l=0,c=0;c<f.length;c++)for(o=e.mean(f[c]),u=0;u<f[c].length;u++)l+=t.pow(f[c][u]-o,2);return r/(l/=i.length-f.length)},anovaftest:function(){var t,i,a,o,s=n.call(arguments);if(r(s[0]))return 1-e.centralF.cdf(s[0],s[1],s[2]);var l=e.anovafscore(s);for(t=s.length-1,a=0,o=0;o<s.length;o++)a+=s[o].length;return i=a-t-1,1-e.centralF.cdf(l,t,i)},ftest:function(t,n,r){return 1-e.centralF.cdf(t,n,r)}}),e.extend(e.fn,{anovafscore:function(){return e.anovafscore(this.toArray())},anovaftes:function(){var t,n=0;for(t=0;t<this.length;t++)n+=this[t].length;return e.ftest(this.anovafscore(),this.length-1,n-this.length)}}),e.extend({qscore:function(){var i,a,o,s,l,c=n.call(arguments);return r(c[0])?(i=c[0],a=c[1],o=c[2],s=c[3],l=c[4]):(i=e.mean(c[0]),a=e.mean(c[1]),o=c[0].length,s=c[1].length,l=c[2]),t.abs(i-a)/(l*t.sqrt((1/o+1/s)/2))},qtest:function(){var t,r=n.call(arguments);3===r.length?(t=r[0],r=r.slice(1)):7===r.length?(t=e.qscore(r[0],r[1],r[2],r[3],r[4]),r=r.slice(5)):(t=e.qscore(r[0],r[1],r[2]),r=r.slice(3));var i=r[0],a=r[1];return 1-e.tukey.cdf(t,a,i-a)},tukeyhsd:function(t){for(var n=e.pooledstdev(t),r=t.map((function(t){return e.mean(t)})),i=t.reduce((function(e,t){return e+t.length}),0),a=[],o=0;o<t.length;++o)for(var s=o+1;s<t.length;++s){var l=e.qtest(r[o],r[s],t[o].length,t[s].length,n,i,t.length);a.push([[o,s],l])}return a}}),e.extend({normalci:function(){var r,i=n.call(arguments),a=new Array(2);return r=4===i.length?t.abs(e.normal.inv(i[1]/2,0,1)*i[2]/t.sqrt(i[3])):t.abs(e.normal.inv(i[1]/2,0,1)*e.stdev(i[2])/t.sqrt(i[2].length)),a[0]=i[0]-r,a[1]=i[0]+r,a},tci:function(){var r,i=n.call(arguments),a=new Array(2);return r=4===i.length?t.abs(e.studentt.inv(i[1]/2,i[3]-1)*i[2]/t.sqrt(i[3])):t.abs(e.studentt.inv(i[1]/2,i[2].length-1)*e.stdev(i[2],!0)/t.sqrt(i[2].length)),a[0]=i[0]-r,a[1]=i[0]+r,a},significant:function(e,t){return e<t}}),e.extend(e.fn,{normalci:function(t,n){return e.normalci(t,n,this.toArray())},tci:function(t,n){return e.tci(t,n,this.toArray())}}),e.extend(e.fn,{oneSidedDifferenceOfProportions:function(t,n,r,i){var o=a(t,n,r,i);return e.ztest(o,1)},twoSidedDifferenceOfProportions:function(t,n,r,i){var o=a(t,n,r,i);return e.ztest(o,2)}})}(t,Math),t.models=function(){function e(e){var r=e[0].length;return t.arange(r).map((function(i){var a=t.arange(r).filter((function(e){return e!==i}));return n(t.col(e,i).map((function(e){return e[0]})),t.col(e,a))}))}function n(e,n){var r=e.length,i=n[0].length-1,a=r-i-1,o=t.lstsq(n,e),s=t.multiply(n,o.map((function(e){return[e]}))).map((function(e){return e[0]})),l=t.subtract(e,s),c=t.mean(e),u=t.sum(s.map((function(e){return Math.pow(e-c,2)}))),f=t.sum(e.map((function(e,t){return Math.pow(e-s[t],2)}))),d=u+f;return{exog:n,endog:e,nobs:r,df_model:i,df_resid:a,coef:o,predict:s,resid:l,ybar:c,SST:d,SSE:u,SSR:f,R2:u/d}}function r(n){var r=e(n.exog),i=Math.sqrt(n.SSR/n.df_resid),a=r.map((function(e){var t=e.SST,n=e.R2;return i/Math.sqrt(t*(1-n))})),o=n.coef.map((function(e,t){return(e-0)/a[t]})),s=o.map((function(e){var r=t.studentt.cdf(e,n.df_resid);return 2*(r>.5?1-r:r)})),l=t.studentt.inv(.975,n.df_resid),c=n.coef.map((function(e,t){var n=l*a[t];return[e-n,e+n]}));return{se:a,t:o,p:s,sigmaHat:i,interval95:c}}function i(e){var n,r,i,a=e.R2/e.df_model/((1-e.R2)/e.df_resid);return{F_statistic:a,pvalue:1-(n=a,r=e.df_model,i=e.df_resid,t.beta.cdf(n/(i/r+n),r/2,i/2))}}function a(e,t){var a=n(e,t),o=r(a),s=i(a),l=1-(1-a.R2)*((a.nobs-1)/a.df_resid);return a.t=o,a.f=s,a.adjust_R2=l,a}return{ols:a}}(),t.extend({buildxmatrix:function(){for(var e=new Array(arguments.length),n=0;n<arguments.length;n++){var r=[1];e[n]=r.concat(arguments[n])}return t(e)},builddxmatrix:function(){for(var e=new Array(arguments[0].length),n=0;n<arguments[0].length;n++){var r=[1];e[n]=r.concat(arguments[0][n])}return t(e)},buildjxmatrix:function(e){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r];return t.builddxmatrix(n)},buildymatrix:function(e){return t(e).transpose()},buildjymatrix:function(e){return e.transpose()},matrixmult:function(e,n){var r,i,a,o,s;if(e.cols()==n.rows()){if(n.rows()>1){for(o=[],r=0;r<e.rows();r++)for(o[r]=[],i=0;i<n.cols();i++){for(s=0,a=0;a<e.cols();a++)s+=e.toArray()[r][a]*n.toArray()[a][i];o[r][i]=s}return t(o)}for(o=[],r=0;r<e.rows();r++)for(o[r]=[],i=0;i<n.cols();i++){for(s=0,a=0;a<e.cols();a++)s+=e.toArray()[r][a]*n.toArray()[i];o[r][i]=s}return t(o)}},regress:function(e,n){var r=t.xtranspxinv(e),i=e.transpose(),a=t.matrixmult(t(r),i);return t.matrixmult(a,n)},regresst:function(e,n,r){var i=t.regress(e,n),a={anova:{}},o=t.jMatYBar(e,i);a.yBar=o;var s=n.mean();a.anova.residuals=t.residuals(n,o),a.anova.ssr=t.ssr(o,s),a.anova.msr=a.anova.ssr/(e[0].length-1),a.anova.sse=t.sse(n,o),a.anova.mse=a.anova.sse/(n.length-(e[0].length-1)-1),a.anova.sst=t.sst(n,s),a.anova.mst=a.anova.sst/(n.length-1),a.anova.r2=1-a.anova.sse/a.anova.sst,a.anova.r2<0&&(a.anova.r2=0),a.anova.fratio=a.anova.msr/a.anova.mse,a.anova.pvalue=t.anovaftest(a.anova.fratio,e[0].length-1,n.length-(e[0].length-1)-1),a.anova.rmse=Math.sqrt(a.anova.mse),a.anova.r2adj=1-a.anova.mse/a.anova.mst,a.anova.r2adj<0&&(a.anova.r2adj=0),a.stats=new Array(e[0].length);for(var l,c,u,f=t.xtranspxinv(e),d=0;d<i.length;d++)l=Math.sqrt(a.anova.mse*Math.abs(f[d][d])),c=Math.abs(i[d]/l),u=t.ttest(c,n.length-e[0].length-1,r),a.stats[d]=[i[d],l,c,u];return a.regress=i,a},xtranspx:function(e){return t.matrixmult(e.transpose(),e)},xtranspxinv:function(e){var n=t.matrixmult(e.transpose(),e);return t.inv(n)},jMatYBar:function(e,n){var r=t.matrixmult(e,n);return new t(r)},residuals:function(e,n){return t.matrixsubtract(e,n)},ssr:function(e,t){for(var n=0,r=0;r<e.length;r++)n+=Math.pow(e[r]-t,2);return n},sse:function(e,t){for(var n=0,r=0;r<e.length;r++)n+=Math.pow(e[r]-t[r],2);return n},sst:function(e,t){for(var n=0,r=0;r<e.length;r++)n+=Math.pow(e[r]-t,2);return n},matrixsubtract:function(e,n){for(var r=new Array(e.length),i=0;i<e.length;i++){r[i]=new Array(e[i].length);for(var a=0;a<e[i].length;a++)r[i][a]=e[i][a]-n[i][a]}return t(r)}}),t.jStat=t,t)},38028:(e,t,n)=>{var r=n(25310)(n(22877),"DataView");e.exports=r},80189:(e,t,n)=>{var r=n(85568),i=n(40486),a=n(39441),o=n(59549),s=n(48277);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=o,l.prototype.set=s,e.exports=l},9887:(e,t,n)=>{var r=n(68550),i=n(22352),a=n(42227),o=n(35647),s=n(51287);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=o,l.prototype.set=s,e.exports=l},6895:(e,t,n)=>{var r=n(25310)(n(22877),"Map");e.exports=r},16493:(e,t,n)=>{var r=n(4464),i=n(3766),a=n(95457),o=n(92813),s=n(64485);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=o,l.prototype.set=s,e.exports=l},28564:(e,t,n)=>{var r=n(25310)(n(22877),"Promise");e.exports=r},61009:(e,t,n)=>{var r=n(25310)(n(22877),"Set");e.exports=r},5147:(e,t,n)=>{var r=n(16493),i=n(44612),a=n(77491);function o(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}o.prototype.add=o.prototype.push=i,o.prototype.has=a,e.exports=o},80209:(e,t,n)=>{var r=n(9887),i=n(86828),a=n(73002),o=n(17157),s=n(27849),l=n(48129);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=a,c.prototype.get=o,c.prototype.has=s,c.prototype.set=l,e.exports=c},68369:(e,t,n)=>{var r=n(22877).Symbol;e.exports=r},98676:(e,t,n)=>{var r=n(22877).Uint8Array;e.exports=r},65759:(e,t,n)=>{var r=n(25310)(n(22877),"WeakMap");e.exports=r},26057:e=>{e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},45241:e=>{e.exports=function(e,t,n,r){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(r,o,n(o),e)}return r}},50346:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}},79053:(e,t,n)=>{var r=n(62099);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},81185:e=>{e.exports=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}},52567:(e,t,n)=>{var r=n(13504),i=n(94044),a=n(9777),o=n(98392),s=n(48713),l=n(52607),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=a(e),u=!n&&i(e),f=!n&&!u&&o(e),d=!n&&!u&&!f&&l(e),h=n||u||f||d,p=h?r(e.length,String):[],m=p.length;for(var g in e)!t&&!c.call(e,g)||h&&("length"==g||f&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m))||p.push(g);return p}},24740:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},20656:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},37186:e=>{e.exports=function(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}},72792:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},34165:e=>{e.exports=function(e){return e.split("")}},83605:e=>{var t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(t)||[]}},77997:(e,t,n)=>{var r=n(28656),i=n(11720);e.exports=function(e,t,n){(void 0!==n&&!i(e[t],n)||void 0===n&&!(t in e))&&r(e,t,n)}},39891:(e,t,n)=>{var r=n(28656),i=n(11720),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var o=e[t];a.call(e,t)&&i(o,n)&&(void 0!==n||t in e)||r(e,t,n)}},72665:(e,t,n)=>{var r=n(11720);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},6701:(e,t,n)=>{var r=n(60957);e.exports=function(e,t,n,i){return r(e,(function(e,r,a){t(i,e,n(e),a)})),i}},28656:(e,t,n)=>{var r=n(89995);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},39689:(e,t,n)=>{var r=n(70012);e.exports=function(e,t){for(var n=-1,i=t.length,a=Array(i),o=null==e;++n<i;)a[n]=o?void 0:r(e,t[n]);return a}},51584:(e,t,n)=>{var r=n(781),i=Object.create,a=function(){function e(){}return function(t){if(!r(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=a},60957:(e,t,n)=>{var r=n(46273),i=n(25065)(r);e.exports=i},19179:e=>{e.exports=function(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}},67744:(e,t,n)=>{var r=n(20656),i=n(97715);e.exports=function e(t,n,a,o,s){var l=-1,c=t.length;for(a||(a=i),s||(s=[]);++l<c;){var u=t[l];n>0&&a(u)?n>1?e(u,n-1,a,o,s):r(s,u):o||(s[s.length]=u)}return s}},63209:(e,t,n)=>{var r=n(56069)();e.exports=r},46273:(e,t,n)=>{var r=n(63209),i=n(53662);e.exports=function(e,t){return e&&r(e,t,i)}},99118:(e,t,n)=>{var r=n(9609),i=n(64533);e.exports=function(e,t){for(var n=0,a=(t=r(t,e)).length;null!=e&&n<a;)e=e[i(t[n++])];return n&&n==a?e:void 0}},19591:(e,t,n)=>{var r=n(20656),i=n(9777);e.exports=function(e,t,n){var a=t(e);return i(e)?a:r(a,n(e))}},63224:(e,t,n)=>{var r=n(68369),i=n(47523),a=n(39110),o=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?i(e):a(e)}},79834:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e,n){return null!=e&&t.call(e,n)}},81930:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},62099:(e,t,n)=>{var r=n(19179),i=n(21908),a=n(22671);e.exports=function(e,t,n){return t==t?a(e,t,n):r(e,i,n)}},12766:(e,t,n)=>{var r=n(63224),i=n(12906);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},27838:(e,t,n)=>{var r=n(80780),i=n(12906);e.exports=function e(t,n,a,o,s){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!=t&&n!=n:r(t,n,a,o,e,s))}},80780:(e,t,n)=>{var r=n(80209),i=n(35911),a=n(71282),o=n(70641),s=n(78773),l=n(9777),c=n(98392),u=n(52607),f="[object Arguments]",d="[object Array]",h="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,m,g,v){var y=l(e),b=l(t),x=y?d:s(e),_=b?d:s(t),w=(x=x==f?h:x)==h,A=(_=_==f?h:_)==h,k=x==_;if(k&&c(e)){if(!c(t))return!1;y=!0,w=!1}if(k&&!w)return v||(v=new r),y||u(e)?i(e,t,n,m,g,v):a(e,t,x,n,m,g,v);if(!(1&n)){var E=w&&p.call(e,"__wrapped__"),T=A&&p.call(t,"__wrapped__");if(E||T){var M=E?e.value():e,S=T?t.value():t;return v||(v=new r),g(M,S,n,m,v)}}return!!k&&(v||(v=new r),o(e,t,n,m,g,v))}},78775:(e,t,n)=>{var r=n(80209),i=n(27838);e.exports=function(e,t,n,a){var o=n.length,s=o,l=!a;if(null==e)return!s;for(e=Object(e);o--;){var c=n[o];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<s;){var u=(c=n[o])[0],f=e[u],d=c[1];if(l&&c[2]){if(void 0===f&&!(u in e))return!1}else{var h=new r;if(a)var p=a(f,d,u,e,t,h);if(!(void 0===p?i(d,f,3,a,h):p))return!1}}return!0}},21908:e=>{e.exports=function(e){return e!=e}},85067:(e,t,n)=>{var r=n(41802),i=n(49040),a=n(781),o=n(23489),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,f=c.hasOwnProperty,d=RegExp("^"+u.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||i(e))&&(r(e)?d:s).test(o(e))}},31573:(e,t,n)=>{var r=n(63224),i=n(83174),a=n(12906),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&i(e.length)&&!!o[r(e)]}},42253:(e,t,n)=>{var r=n(94159),i=n(40378),a=n(14256),o=n(9777),s=n(29767);e.exports=function(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?o(e)?i(e[0],e[1]):r(e):s(e)}},43784:(e,t,n)=>{var r=n(22071),i=n(37106),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))a.call(e,n)&&"constructor"!=n&&t.push(n);return t}},38231:(e,t,n)=>{var r=n(781),i=n(22071),a=n(49109),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return a(e);var t=i(e),n=[];for(var s in e)("constructor"!=s||!t&&o.call(e,s))&&n.push(s);return n}},99096:(e,t,n)=>{var r=n(60957),i=n(45678);e.exports=function(e,t){var n=-1,a=i(e)?Array(e.length):[];return r(e,(function(e,r,i){a[++n]=t(e,r,i)})),a}},94159:(e,t,n)=>{var r=n(78775),i=n(62504),a=n(35885);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},40378:(e,t,n)=>{var r=n(27838),i=n(70012),a=n(42823),o=n(24250),s=n(58996),l=n(35885),c=n(64533);e.exports=function(e,t){return o(e)&&s(t)?l(c(e),t):function(n){var o=i(n,e);return void 0===o&&o===t?a(n,e):r(t,o,3)}}},32562:(e,t,n)=>{var r=n(80209),i=n(77997),a=n(63209),o=n(31544),s=n(781),l=n(21929),c=n(83502);e.exports=function e(t,n,u,f,d){t!==n&&a(n,(function(a,l){if(d||(d=new r),s(a))o(t,n,l,u,e,f,d);else{var h=f?f(c(t,l),a,l+"",t,n,d):void 0;void 0===h&&(h=a),i(t,l,h)}}),l)}},31544:(e,t,n)=>{var r=n(77997),i=n(58458),a=n(43817),o=n(34575),s=n(20057),l=n(94044),c=n(9777),u=n(19613),f=n(98392),d=n(41802),h=n(781),p=n(15155),m=n(52607),g=n(83502),v=n(95724);e.exports=function(e,t,n,y,b,x,_){var w=g(e,n),A=g(t,n),k=_.get(A);if(k)r(e,n,k);else{var E=x?x(w,A,n+"",e,t,_):void 0,T=void 0===E;if(T){var M=c(A),S=!M&&f(A),C=!M&&!S&&m(A);E=A,M||S||C?c(w)?E=w:u(w)?E=o(w):S?(T=!1,E=i(A,!0)):C?(T=!1,E=a(A,!0)):E=[]:p(A)||l(A)?(E=w,l(w)?E=v(w):h(w)&&!d(w)||(E=s(A))):T=!1}T&&(_.set(A,E),b(E,A,y,x,_),_.delete(A)),r(e,n,E)}}},13077:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},5303:(e,t,n)=>{var r=n(99118);e.exports=function(e){return function(t){return r(t,e)}}},94856:e=>{e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},90278:(e,t,n)=>{var r=n(14256),i=n(1829),a=n(60529);e.exports=function(e,t){return a(i(e,t,r),e+"")}},42914:(e,t,n)=>{var r=n(39891),i=n(9609),a=n(48713),o=n(781),s=n(64533);e.exports=function(e,t,n,l){if(!o(e))return e;for(var c=-1,u=(t=i(t,e)).length,f=u-1,d=e;null!=d&&++c<u;){var h=s(t[c]),p=n;if("__proto__"===h||"constructor"===h||"prototype"===h)return e;if(c!=f){var m=d[h];void 0===(p=l?l(m,h,d):void 0)&&(p=o(m)?m:a(t[c+1])?[]:{})}r(d,h,p),d=d[h]}return e}},38594:(e,t,n)=>{var r=n(88358),i=n(89995),a=n(14256),o=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:a;e.exports=o},13912:e=>{e.exports=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++r<i;)a[r]=e[r+t];return a}},13504:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},15780:(e,t,n)=>{var r=n(68369),i=n(24740),a=n(9777),o=n(30170),s=r?r.prototype:void 0,l=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(a(t))return i(t,e)+"";if(o(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},78528:(e,t,n)=>{var r=n(14152),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},31093:e=>{e.exports=function(e){return function(t){return e(t)}}},93170:(e,t,n)=>{var r=n(5147),i=n(79053),a=n(81185),o=n(24227),s=n(35458),l=n(12647);e.exports=function(e,t,n){var c=-1,u=i,f=e.length,d=!0,h=[],p=h;if(n)d=!1,u=a;else if(f>=200){var m=t?null:s(e);if(m)return l(m);d=!1,u=o,p=new r}else p=t?[]:h;e:for(;++c<f;){var g=e[c],v=t?t(g):g;if(g=n||0!==g?g:0,d&&v==v){for(var y=p.length;y--;)if(p[y]===v)continue e;t&&p.push(v),h.push(g)}else u(p,v,n)||(p!==h&&p.push(v),h.push(g))}return h}},24227:e=>{e.exports=function(e,t){return e.has(t)}},9609:(e,t,n)=>{var r=n(9777),i=n(24250),a=n(2810),o=n(64054);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:a(o(e))}},21090:(e,t,n)=>{var r=n(13912);e.exports=function(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:r(e,t,n)}},95301:(e,t,n)=>{var r=n(98676);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},58458:(e,t,n)=>{e=n.nmd(e);var r=n(22877),i=t&&!t.nodeType&&t,a=i&&e&&!e.nodeType&&e,o=a&&a.exports===i?r.Buffer:void 0,s=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}},43817:(e,t,n)=>{var r=n(95301);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},34575:e=>{e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},98255:(e,t,n)=>{var r=n(39891),i=n(28656);e.exports=function(e,t,n,a){var o=!n;n||(n={});for(var s=-1,l=t.length;++s<l;){var c=t[s],u=a?a(n[c],e[c],c,n,e):void 0;void 0===u&&(u=e[c]),o?i(n,c,u):r(n,c,u)}return n}},17801:(e,t,n)=>{var r=n(22877)["__core-js_shared__"];e.exports=r},26899:(e,t,n)=>{var r=n(45241),i=n(6701),a=n(42253),o=n(9777);e.exports=function(e,t){return function(n,s){var l=o(n)?r:i,c=t?t():{};return l(n,e,a(s,2),c)}}},66871:(e,t,n)=>{var r=n(90278),i=n(64112);e.exports=function(e){return r((function(t,n){var r=-1,a=n.length,o=a>1?n[a-1]:void 0,s=a>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(a--,o):void 0,s&&i(n[0],n[1],s)&&(o=a<3?void 0:o,a=1),t=Object(t);++r<a;){var l=n[r];l&&e(t,l,r,o)}return t}))}},25065:(e,t,n)=>{var r=n(45678);e.exports=function(e,t){return function(n,i){if(null==n)return n;if(!r(n))return e(n,i);for(var a=n.length,o=t?a:-1,s=Object(n);(t?o--:++o<a)&&!1!==i(s[o],o,s););return n}}},56069:e=>{e.exports=function(e){return function(t,n,r){for(var i=-1,a=Object(t),o=r(t),s=o.length;s--;){var l=o[e?s:++i];if(!1===n(a[l],l,a))break}return t}}},49803:(e,t,n)=>{var r=n(21090),i=n(3858),a=n(26360),o=n(64054);e.exports=function(e){return function(t){t=o(t);var n=i(t)?a(t):void 0,s=n?n[0]:t.charAt(0),l=n?r(n,1).join(""):t.slice(1);return s[e]()+l}}},83987:(e,t,n)=>{var r=n(37186),i=n(46172),a=n(10501),o=RegExp("[']","g");e.exports=function(e){return function(t){return r(a(i(t).replace(o,"")),e,"")}}},35458:(e,t,n)=>{var r=n(61009),i=n(45246),a=n(12647),o=r&&1/a(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=o},56567:(e,t,n)=>{var r=n(94856)({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"});e.exports=r},89995:(e,t,n)=>{var r=n(25310),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},35911:(e,t,n)=>{var r=n(5147),i=n(72792),a=n(24227);e.exports=function(e,t,n,o,s,l){var c=1&n,u=e.length,f=t.length;if(u!=f&&!(c&&f>u))return!1;var d=l.get(e),h=l.get(t);if(d&&h)return d==t&&h==e;var p=-1,m=!0,g=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++p<u;){var v=e[p],y=t[p];if(o)var b=c?o(y,v,p,t,e,l):o(v,y,p,e,t,l);if(void 0!==b){if(b)continue;m=!1;break}if(g){if(!i(t,(function(e,t){if(!a(g,t)&&(v===e||s(v,e,n,o,l)))return g.push(t)}))){m=!1;break}}else if(v!==y&&!s(v,y,n,o,l)){m=!1;break}}return l.delete(e),l.delete(t),m}},71282:(e,t,n)=>{var r=n(68369),i=n(98676),a=n(11720),o=n(35911),s=n(23725),l=n(12647),c=r?r.prototype:void 0,u=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,f,d){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!f(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var h=s;case"[object Set]":var p=1&r;if(h||(h=l),e.size!=t.size&&!p)return!1;var m=d.get(e);if(m)return m==t;r|=2,d.set(e,t);var g=o(h(e),h(t),r,c,f,d);return d.delete(e),g;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},70641:(e,t,n)=>{var r=n(56546),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,a,o,s){var l=1&n,c=r(e),u=c.length;if(u!=r(t).length&&!l)return!1;for(var f=u;f--;){var d=c[f];if(!(l?d in t:i.call(t,d)))return!1}var h=s.get(e),p=s.get(t);if(h&&p)return h==t&&p==e;var m=!0;s.set(e,t),s.set(t,e);for(var g=l;++f<u;){var v=e[d=c[f]],y=t[d];if(a)var b=l?a(y,v,d,t,e,s):a(v,y,d,e,t,s);if(!(void 0===b?v===y||o(v,y,n,a,s):b)){m=!1;break}g||(g="constructor"==d)}if(m&&!g){var x=e.constructor,_=t.constructor;x==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof _&&_ instanceof _||(m=!1)}return s.delete(e),s.delete(t),m}},24944:(e,t,n)=>{var r=n(28594),i=n(1829),a=n(60529);e.exports=function(e){return a(i(e,void 0,r),e+"")}},73480:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},56546:(e,t,n)=>{var r=n(19591),i=n(65192),a=n(53662);e.exports=function(e){return r(e,a,i)}},3131:(e,t,n)=>{var r=n(63642);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},62504:(e,t,n)=>{var r=n(58996),i=n(53662);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var a=t[n],o=e[a];t[n]=[a,o,r(o)]}return t}},25310:(e,t,n)=>{var r=n(85067),i=n(53832);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},80639:(e,t,n)=>{var r=n(44367)(Object.getPrototypeOf,Object);e.exports=r},47523:(e,t,n)=>{var r=n(68369),i=Object.prototype,a=i.hasOwnProperty,o=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=a.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var i=o.call(e);return r&&(t?e[s]=n:delete e[s]),i}},65192:(e,t,n)=>{var r=n(50346),i=n(58657),a=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,s=o?function(e){return null==e?[]:(e=Object(e),r(o(e),(function(t){return a.call(e,t)})))}:i;e.exports=s},78773:(e,t,n)=>{var r=n(38028),i=n(6895),a=n(28564),o=n(61009),s=n(65759),l=n(63224),c=n(23489),u="[object Map]",f="[object Promise]",d="[object Set]",h="[object WeakMap]",p="[object DataView]",m=c(r),g=c(i),v=c(a),y=c(o),b=c(s),x=l;(r&&x(new r(new ArrayBuffer(1)))!=p||i&&x(new i)!=u||a&&x(a.resolve())!=f||o&&x(new o)!=d||s&&x(new s)!=h)&&(x=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case m:return p;case g:return u;case v:return f;case y:return d;case b:return h}return t}),e.exports=x},53832:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},51166:(e,t,n)=>{var r=n(9609),i=n(94044),a=n(9777),o=n(48713),s=n(83174),l=n(64533);e.exports=function(e,t,n){for(var c=-1,u=(t=r(t,e)).length,f=!1;++c<u;){var d=l(t[c]);if(!(f=null!=e&&n(e,d)))break;e=e[d]}return f||++c!=u?f:!!(u=null==e?0:e.length)&&s(u)&&o(d,u)&&(a(e)||i(e))}},3858:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},48010:e=>{var t=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return t.test(e)}},85568:(e,t,n)=>{var r=n(10306);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},40486:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},39441:(e,t,n)=>{var r=n(10306),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},59549:(e,t,n)=>{var r=n(10306),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},48277:(e,t,n)=>{var r=n(10306);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},20057:(e,t,n)=>{var r=n(51584),i=n(80639),a=n(22071);e.exports=function(e){return"function"!=typeof e.constructor||a(e)?{}:r(i(e))}},97715:(e,t,n)=>{var r=n(68369),i=n(94044),a=n(9777),o=r?r.isConcatSpreadable:void 0;e.exports=function(e){return a(e)||i(e)||!!(o&&e&&e[o])}},48713:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},64112:(e,t,n)=>{var r=n(11720),i=n(45678),a=n(48713),o=n(781);e.exports=function(e,t,n){if(!o(n))return!1;var s=typeof t;return!!("number"==s?i(n)&&a(t,n.length):"string"==s&&t in n)&&r(n[t],e)}},24250:(e,t,n)=>{var r=n(9777),i=n(30170),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||(o.test(e)||!a.test(e)||null!=t&&e in Object(t))}},63642:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},49040:(e,t,n)=>{var r,i=n(17801),a=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!a&&a in e}},22071:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},58996:(e,t,n)=>{var r=n(781);e.exports=function(e){return e==e&&!r(e)}},68550:e=>{e.exports=function(){this.__data__=[],this.size=0}},22352:(e,t,n)=>{var r=n(72665),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},42227:(e,t,n)=>{var r=n(72665);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},35647:(e,t,n)=>{var r=n(72665);e.exports=function(e){return r(this.__data__,e)>-1}},51287:(e,t,n)=>{var r=n(72665);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},4464:(e,t,n)=>{var r=n(80189),i=n(9887),a=n(6895);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||i),string:new r}}},3766:(e,t,n)=>{var r=n(3131);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},95457:(e,t,n)=>{var r=n(3131);e.exports=function(e){return r(this,e).get(e)}},92813:(e,t,n)=>{var r=n(3131);e.exports=function(e){return r(this,e).has(e)}},64485:(e,t,n)=>{var r=n(3131);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},23725:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},35885:e=>{e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},97376:(e,t,n)=>{var r=n(23976);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},10306:(e,t,n)=>{var r=n(25310)(Object,"create");e.exports=r},37106:(e,t,n)=>{var r=n(44367)(Object.keys,Object);e.exports=r},49109:e=>{e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},64233:(e,t,n)=>{e=n.nmd(e);var r=n(73480),i=t&&!t.nodeType&&t,a=i&&e&&!e.nodeType&&e,o=a&&a.exports===i&&r.process,s=function(){try{var e=a&&a.require&&a.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=s},39110:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},44367:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},1829:(e,t,n)=>{var r=n(26057),i=Math.max;e.exports=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var a=arguments,o=-1,s=i(a.length-t,0),l=Array(s);++o<s;)l[o]=a[t+o];o=-1;for(var c=Array(t+1);++o<t;)c[o]=a[o];return c[t]=n(l),r(e,this,c)}}},22877:(e,t,n)=>{var r=n(73480),i="object"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function("return this")();e.exports=a},83502:e=>{e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},44612:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},77491:e=>{e.exports=function(e){return this.__data__.has(e)}},12647:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},60529:(e,t,n)=>{var r=n(38594),i=n(83443)(r);e.exports=i},83443:e=>{var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var i=t(),a=16-(i-r);if(r=i,a>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},86828:(e,t,n)=>{var r=n(9887);e.exports=function(){this.__data__=new r,this.size=0}},73002:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},17157:e=>{e.exports=function(e){return this.__data__.get(e)}},27849:e=>{e.exports=function(e){return this.__data__.has(e)}},48129:(e,t,n)=>{var r=n(9887),i=n(6895),a=n(16493);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var o=n.__data__;if(!i||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(o)}return n.set(e,t),this.size=n.size,this}},22671:e=>{e.exports=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}},26360:(e,t,n)=>{var r=n(34165),i=n(3858),a=n(34742);e.exports=function(e){return i(e)?a(e):r(e)}},2810:(e,t,n)=>{var r=n(97376),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(a,"$1"):n||e)})),t}));e.exports=o},64533:(e,t,n)=>{var r=n(30170);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},23489:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},14152:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},34742:e=>{var t="\\ud800-\\udfff",n="["+t+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",a="[^"+t+"]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+r+"|"+i+")"+"?",c="[\\ufe0e\\ufe0f]?",u=c+l+("(?:\\u200d(?:"+[a,o,s].join("|")+")"+c+l+")*"),f="(?:"+[a+r+"?",r,o,s,n].join("|")+")",d=RegExp(i+"(?="+i+")|"+f+u,"g");e.exports=function(e){return e.match(d)||[]}},46721:e=>{var t="\\ud800-\\udfff",n="\\u2700-\\u27bf",r="a-z\\xdf-\\xf6\\xf8-\\xff",i="A-Z\\xc0-\\xd6\\xd8-\\xde",a="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",o="["+a+"]",s="\\d+",l="["+n+"]",c="["+r+"]",u="[^"+t+a+s+n+r+i+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",h="["+i+"]",p="(?:"+c+"|"+u+")",m="(?:"+h+"|"+u+")",g="(?:['](?:d|ll|m|re|s|t|ve))?",v="(?:['](?:D|LL|M|RE|S|T|VE))?",y="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",b="[\\ufe0e\\ufe0f]?",x=b+y+("(?:\\u200d(?:"+["[^"+t+"]",f,d].join("|")+")"+b+y+")*"),_="(?:"+[l,f,d].join("|")+")"+x,w=RegExp([h+"?"+c+"+"+g+"(?="+[o,h,"$"].join("|")+")",m+"+"+v+"(?="+[o,h+p,"$"].join("|")+")",h+"?"+p+"+"+g,h+"+"+v,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",s,_].join("|"),"g");e.exports=function(e){return e.match(w)||[]}},26535:(e,t,n)=>{var r=n(39689),i=n(24944)(r);e.exports=i},21898:(e,t,n)=>{var r=n(40843),i=n(83987)((function(e,t,n){return t=t.toLowerCase(),e+(n?r(t):t)}));e.exports=i},40843:(e,t,n)=>{var r=n(64054),i=n(96016);e.exports=function(e){return i(r(e).toLowerCase())}},88358:e=>{e.exports=function(e){return function(){return e}}},25661:(e,t,n)=>{var r=n(781),i=n(99196),a=n(9950),o=Math.max,s=Math.min;e.exports=function(e,t,n){var l,c,u,f,d,h,p=0,m=!1,g=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=l,r=c;return l=c=void 0,p=t,f=e.apply(r,n)}function b(e){var n=e-h;return void 0===h||n>=t||n<0||g&&e-p>=u}function x(){var e=i();if(b(e))return _(e);d=setTimeout(x,function(e){var n=t-(e-h);return g?s(n,u-(e-p)):n}(e))}function _(e){return d=void 0,v&&l?y(e):(l=c=void 0,f)}function w(){var e=i(),n=b(e);if(l=arguments,c=this,h=e,n){if(void 0===d)return function(e){return p=e,d=setTimeout(x,t),m?y(e):f}(h);if(g)return clearTimeout(d),d=setTimeout(x,t),y(h)}return void 0===d&&(d=setTimeout(x,t)),f}return t=a(t)||0,r(n)&&(m=!!n.leading,u=(g="maxWait"in n)?o(a(n.maxWait)||0,t):u,v="trailing"in n?!!n.trailing:v),w.cancel=function(){void 0!==d&&clearTimeout(d),p=0,l=h=c=d=void 0},w.flush=function(){return void 0===d?f:_(i())},w}},46172:(e,t,n)=>{var r=n(56567),i=n(64054),a=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,o=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");e.exports=function(e){return(e=i(e))&&e.replace(a,r).replace(o,"")}},11720:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},28594:(e,t,n)=>{var r=n(67744);e.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}},70012:(e,t,n)=>{var r=n(99118);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},87946:(e,t,n)=>{var r=n(28656),i=n(26899),a=Object.prototype.hasOwnProperty,o=i((function(e,t,n){a.call(e,n)?e[n].push(t):r(e,n,[t])}));e.exports=o},84152:(e,t,n)=>{var r=n(79834),i=n(51166);e.exports=function(e,t){return null!=e&&i(e,t,r)}},42823:(e,t,n)=>{var r=n(81930),i=n(51166);e.exports=function(e,t){return null!=e&&i(e,t,r)}},14256:e=>{e.exports=function(e){return e}},94044:(e,t,n)=>{var r=n(12766),i=n(12906),a=Object.prototype,o=a.hasOwnProperty,s=a.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&o.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},9777:e=>{var t=Array.isArray;e.exports=t},45678:(e,t,n)=>{var r=n(41802),i=n(83174);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},19613:(e,t,n)=>{var r=n(45678),i=n(12906);e.exports=function(e){return i(e)&&r(e)}},98392:(e,t,n)=>{e=n.nmd(e);var r=n(22877),i=n(97279),a=t&&!t.nodeType&&t,o=a&&e&&!e.nodeType&&e,s=o&&o.exports===a?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||i;e.exports=l},41802:(e,t,n)=>{var r=n(63224),i=n(781);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},83174:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},781:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},12906:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},15155:(e,t,n)=>{var r=n(63224),i=n(80639),a=n(12906),o=Function.prototype,s=Object.prototype,l=o.toString,c=s.hasOwnProperty,u=l.call(Object);e.exports=function(e){if(!a(e)||"[object Object]"!=r(e))return!1;var t=i(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==u}},30170:(e,t,n)=>{var r=n(63224),i=n(12906);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},52607:(e,t,n)=>{var r=n(31573),i=n(31093),a=n(64233),o=a&&a.isTypedArray,s=o?i(o):r;e.exports=s},18537:(e,t,n)=>{var r=n(83987)((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}));e.exports=r},53662:(e,t,n)=>{var r=n(52567),i=n(43784),a=n(45678);e.exports=function(e){return a(e)?r(e):i(e)}},21929:(e,t,n)=>{var r=n(52567),i=n(38231),a=n(45678);e.exports=function(e){return a(e)?r(e,!0):i(e)}},35519:function(e,t,n){var r;e=n.nmd(e),function(){var i,a="Expected a function",o="__lodash_hash_undefined__",s="__lodash_placeholder__",l=16,c=32,u=64,f=128,d=256,h=1/0,p=9007199254740991,m=NaN,g=4294967295,v=[["ary",f],["bind",1],["bindKey",2],["curry",8],["curryRight",l],["flip",512],["partial",c],["partialRight",u],["rearg",d]],y="[object Arguments]",b="[object Array]",x="[object Boolean]",_="[object Date]",w="[object Error]",A="[object Function]",k="[object GeneratorFunction]",E="[object Map]",T="[object Number]",M="[object Object]",S="[object Promise]",C="[object RegExp]",O="[object Set]",R="[object String]",N="[object Symbol]",L="[object WeakMap]",D="[object ArrayBuffer]",P="[object DataView]",I="[object Float32Array]",F="[object Float64Array]",z="[object Int8Array]",j="[object Int16Array]",B="[object Int32Array]",U="[object Uint8Array]",$="[object Uint8ClampedArray]",q="[object Uint16Array]",H="[object Uint32Array]",V=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,G=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Y=/&(?:amp|lt|gt|quot|#39);/g,X=/[&<>"']/g,K=RegExp(Y.source),Z=RegExp(X.source),J=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/[\\^$.*+?()[\]{}|]/g,ae=RegExp(ie.source),oe=/^\s+/,se=/\s/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ce=/\{\n\/\* \[wrapped with (.+)\] \*/,ue=/,? & /,fe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,de=/[()=,{}\[\]\/\s]/,he=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,me=/\w*$/,ge=/^[-+]0x[0-9a-f]+$/i,ve=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,be=/^0o[0-7]+$/i,xe=/^(?:0|[1-9]\d*)$/,_e=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,we=/($^)/,Ae=/['\n\r\u2028\u2029\\]/g,ke="\\ud800-\\udfff",Ee="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Te="\\u2700-\\u27bf",Me="a-z\\xdf-\\xf6\\xf8-\\xff",Se="A-Z\\xc0-\\xd6\\xd8-\\xde",Ce="\\ufe0e\\ufe0f",Oe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Re="[']",Ne="["+ke+"]",Le="["+Oe+"]",De="["+Ee+"]",Pe="\\d+",Ie="["+Te+"]",Fe="["+Me+"]",ze="[^"+ke+Oe+Pe+Te+Me+Se+"]",je="\\ud83c[\\udffb-\\udfff]",Be="[^"+ke+"]",Ue="(?:\\ud83c[\\udde6-\\uddff]){2}",$e="[\\ud800-\\udbff][\\udc00-\\udfff]",qe="["+Se+"]",He="\\u200d",Ve="(?:"+Fe+"|"+ze+")",We="(?:"+qe+"|"+ze+")",Ge="(?:['](?:d|ll|m|re|s|t|ve))?",Ye="(?:['](?:D|LL|M|RE|S|T|VE))?",Xe="(?:"+De+"|"+je+")"+"?",Ke="["+Ce+"]?",Ze=Ke+Xe+("(?:"+He+"(?:"+[Be,Ue,$e].join("|")+")"+Ke+Xe+")*"),Je="(?:"+[Ie,Ue,$e].join("|")+")"+Ze,Qe="(?:"+[Be+De+"?",De,Ue,$e,Ne].join("|")+")",et=RegExp(Re,"g"),tt=RegExp(De,"g"),nt=RegExp(je+"(?="+je+")|"+Qe+Ze,"g"),rt=RegExp([qe+"?"+Fe+"+"+Ge+"(?="+[Le,qe,"$"].join("|")+")",We+"+"+Ye+"(?="+[Le,qe+Ve,"$"].join("|")+")",qe+"?"+Ve+"+"+Ge,qe+"+"+Ye,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pe,Je].join("|"),"g"),it=RegExp("["+He+ke+Ee+Ce+"]"),at=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ot=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],st=-1,lt={};lt[I]=lt[F]=lt[z]=lt[j]=lt[B]=lt[U]=lt[$]=lt[q]=lt[H]=!0,lt[y]=lt[b]=lt[D]=lt[x]=lt[P]=lt[_]=lt[w]=lt[A]=lt[E]=lt[T]=lt[M]=lt[C]=lt[O]=lt[R]=lt[L]=!1;var ct={};ct[y]=ct[b]=ct[D]=ct[P]=ct[x]=ct[_]=ct[I]=ct[F]=ct[z]=ct[j]=ct[B]=ct[E]=ct[T]=ct[M]=ct[C]=ct[O]=ct[R]=ct[N]=ct[U]=ct[$]=ct[q]=ct[H]=!0,ct[w]=ct[A]=ct[L]=!1;var ut={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ft=parseFloat,dt=parseInt,ht="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,pt="object"==typeof self&&self&&self.Object===Object&&self,mt=ht||pt||Function("return this")(),gt=t&&!t.nodeType&&t,vt=gt&&e&&!e.nodeType&&e,yt=vt&&vt.exports===gt,bt=yt&&ht.process,xt=function(){try{var e=vt&&vt.require&&vt.require("util").types;return e||bt&&bt.binding&&bt.binding("util")}catch(e){}}(),_t=xt&&xt.isArrayBuffer,wt=xt&&xt.isDate,At=xt&&xt.isMap,kt=xt&&xt.isRegExp,Et=xt&&xt.isSet,Tt=xt&&xt.isTypedArray;function Mt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function St(e,t,n,r){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(r,o,n(o),e)}return r}function Ct(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Ot(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Rt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Nt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}function Lt(e,t){return!!(null==e?0:e.length)&&qt(e,t,0)>-1}function Dt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Pt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function It(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Ft(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}function zt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function jt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Bt=Gt("length");function Ut(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function $t(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function qt(e,t,n){return t==t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):$t(e,Vt,n)}function Ht(e,t,n,r){for(var i=n-1,a=e.length;++i<a;)if(r(e[i],t))return i;return-1}function Vt(e){return e!=e}function Wt(e,t){var n=null==e?0:e.length;return n?Kt(e,t)/n:m}function Gt(e){return function(t){return null==t?i:t[e]}}function Yt(e){return function(t){return null==e?i:e[t]}}function Xt(e,t,n,r,i){return i(e,(function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)})),n}function Kt(e,t){for(var n,r=-1,a=e.length;++r<a;){var o=t(e[r]);o!==i&&(n=n===i?o:n+o)}return n}function Zt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Jt(e){return e?e.slice(0,gn(e)+1).replace(oe,""):e}function Qt(e){return function(t){return e(t)}}function en(e,t){return Pt(t,(function(t){return e[t]}))}function tn(e,t){return e.has(t)}function nn(e,t){for(var n=-1,r=e.length;++n<r&&qt(t,e[n],0)>-1;);return n}function rn(e,t){for(var n=e.length;n--&&qt(t,e[n],0)>-1;);return n}var an=Yt({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),on=Yt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function sn(e){return"\\"+ut[e]}function ln(e){return it.test(e)}function cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function un(e,t){return function(n){return e(t(n))}}function fn(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n];o!==t&&o!==s||(e[n]=s,a[i++]=n)}return a}function dn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function hn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function pn(e){return ln(e)?function(e){var t=nt.lastIndex=0;for(;nt.test(e);)++t;return t}(e):Bt(e)}function mn(e){return ln(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.split("")}(e)}function gn(e){for(var t=e.length;t--&&se.test(e.charAt(t)););return t}var vn=Yt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var yn=function e(t){var n,r=(t=null==t?mt:yn.defaults(mt.Object(),t,yn.pick(mt,ot))).Array,se=t.Date,ke=t.Error,Ee=t.Function,Te=t.Math,Me=t.Object,Se=t.RegExp,Ce=t.String,Oe=t.TypeError,Re=r.prototype,Ne=Ee.prototype,Le=Me.prototype,De=t["__core-js_shared__"],Pe=Ne.toString,Ie=Le.hasOwnProperty,Fe=0,ze=(n=/[^.]+$/.exec(De&&De.keys&&De.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",je=Le.toString,Be=Pe.call(Me),Ue=mt._,$e=Se("^"+Pe.call(Ie).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qe=yt?t.Buffer:i,He=t.Symbol,Ve=t.Uint8Array,We=qe?qe.allocUnsafe:i,Ge=un(Me.getPrototypeOf,Me),Ye=Me.create,Xe=Le.propertyIsEnumerable,Ke=Re.splice,Ze=He?He.isConcatSpreadable:i,Je=He?He.iterator:i,Qe=He?He.toStringTag:i,nt=function(){try{var e=da(Me,"defineProperty");return e({},"",{}),e}catch(e){}}(),it=t.clearTimeout!==mt.clearTimeout&&t.clearTimeout,ut=se&&se.now!==mt.Date.now&&se.now,ht=t.setTimeout!==mt.setTimeout&&t.setTimeout,pt=Te.ceil,gt=Te.floor,vt=Me.getOwnPropertySymbols,bt=qe?qe.isBuffer:i,xt=t.isFinite,Bt=Re.join,Yt=un(Me.keys,Me),bn=Te.max,xn=Te.min,_n=se.now,wn=t.parseInt,An=Te.random,kn=Re.reverse,En=da(t,"DataView"),Tn=da(t,"Map"),Mn=da(t,"Promise"),Sn=da(t,"Set"),Cn=da(t,"WeakMap"),On=da(Me,"create"),Rn=Cn&&new Cn,Nn={},Ln=za(En),Dn=za(Tn),Pn=za(Mn),In=za(Sn),Fn=za(Cn),zn=He?He.prototype:i,jn=zn?zn.valueOf:i,Bn=zn?zn.toString:i;function Un(e){if(ns(e)&&!Vo(e)&&!(e instanceof Vn)){if(e instanceof Hn)return e;if(Ie.call(e,"__wrapped__"))return ja(e)}return new Hn(e)}var $n=function(){function e(){}return function(t){if(!ts(t))return{};if(Ye)return Ye(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function qn(){}function Hn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function Vn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=g,this.__views__=[]}function Wn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Gn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Yn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Xn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Yn;++t<n;)this.add(e[t])}function Kn(e){var t=this.__data__=new Gn(e);this.size=t.size}function Zn(e,t){var n=Vo(e),r=!n&&Ho(e),i=!n&&!r&&Xo(e),a=!n&&!r&&!i&&us(e),o=n||r||i||a,s=o?Zt(e.length,Ce):[],l=s.length;for(var c in e)!t&&!Ie.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ba(c,l))||s.push(c);return s}function Jn(e){var t=e.length;return t?e[Xr(0,t-1)]:i}function Qn(e,t){return Pa(Oi(e),lr(t,0,e.length))}function er(e){return Pa(Oi(e))}function tr(e,t,n){(n!==i&&!Uo(e[t],n)||n===i&&!(t in e))&&or(e,t,n)}function nr(e,t,n){var r=e[t];Ie.call(e,t)&&Uo(r,n)&&(n!==i||t in e)||or(e,t,n)}function rr(e,t){for(var n=e.length;n--;)if(Uo(e[n][0],t))return n;return-1}function ir(e,t,n,r){return hr(e,(function(e,i,a){t(r,e,n(e),a)})),r}function ar(e,t){return e&&Ri(t,Ns(t),e)}function or(e,t,n){"__proto__"==t&&nt?nt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function sr(e,t){for(var n=-1,a=t.length,o=r(a),s=null==e;++n<a;)o[n]=s?i:Ms(e,t[n]);return o}function lr(e,t,n){return e==e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function cr(e,t,n,r,a,o){var s,l=1&t,c=2&t,u=4&t;if(n&&(s=a?n(e,r,a,o):n(e)),s!==i)return s;if(!ts(e))return e;var f=Vo(e);if(f){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Ie.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!l)return Oi(e,s)}else{var d=ma(e),h=d==A||d==k;if(Xo(e))return ki(e,l);if(d==M||d==y||h&&!a){if(s=c||h?{}:va(e),!l)return c?function(e,t){return Ri(e,pa(e),t)}(e,function(e,t){return e&&Ri(t,Ls(t),e)}(s,e)):function(e,t){return Ri(e,ha(e),t)}(e,ar(s,e))}else{if(!ct[d])return a?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case D:return Ei(e);case x:case _:return new r(+e);case P:return function(e,t){var n=t?Ei(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case I:case F:case z:case j:case B:case U:case $:case q:case H:return Ti(e,n);case E:return new r;case T:case R:return new r(e);case C:return function(e){var t=new e.constructor(e.source,me.exec(e));return t.lastIndex=e.lastIndex,t}(e);case O:return new r;case N:return i=e,jn?Me(jn.call(i)):{}}var i}(e,d,l)}}o||(o=new Kn);var p=o.get(e);if(p)return p;o.set(e,s),ss(e)?e.forEach((function(r){s.add(cr(r,t,n,r,e,o))})):rs(e)&&e.forEach((function(r,i){s.set(i,cr(r,t,n,i,e,o))}));var m=f?i:(u?c?aa:ia:c?Ls:Ns)(e);return Ct(m||e,(function(r,i){m&&(r=e[i=r]),nr(s,i,cr(r,t,n,i,e,o))})),s}function ur(e,t,n){var r=n.length;if(null==e)return!r;for(e=Me(e);r--;){var a=n[r],o=t[a],s=e[a];if(s===i&&!(a in e)||!o(s))return!1}return!0}function fr(e,t,n){if("function"!=typeof e)throw new Oe(a);return Ra((function(){e.apply(i,n)}),t)}function dr(e,t,n,r){var i=-1,a=Lt,o=!0,s=e.length,l=[],c=t.length;if(!s)return l;n&&(t=Pt(t,Qt(n))),r?(a=Dt,o=!1):t.length>=200&&(a=tn,o=!1,t=new Xn(t));e:for(;++i<s;){var u=e[i],f=null==n?u:n(u);if(u=r||0!==u?u:0,o&&f==f){for(var d=c;d--;)if(t[d]===f)continue e;l.push(u)}else a(t,f,r)||l.push(u)}return l}Un.templateSettings={escape:J,evaluate:Q,interpolate:ee,variable:"",imports:{_:Un}},Un.prototype=qn.prototype,Un.prototype.constructor=Un,Hn.prototype=$n(qn.prototype),Hn.prototype.constructor=Hn,Vn.prototype=$n(qn.prototype),Vn.prototype.constructor=Vn,Wn.prototype.clear=function(){this.__data__=On?On(null):{},this.size=0},Wn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Wn.prototype.get=function(e){var t=this.__data__;if(On){var n=t[e];return n===o?i:n}return Ie.call(t,e)?t[e]:i},Wn.prototype.has=function(e){var t=this.__data__;return On?t[e]!==i:Ie.call(t,e)},Wn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=On&&t===i?o:t,this},Gn.prototype.clear=function(){this.__data__=[],this.size=0},Gn.prototype.delete=function(e){var t=this.__data__,n=rr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ke.call(t,n,1),--this.size,!0)},Gn.prototype.get=function(e){var t=this.__data__,n=rr(t,e);return n<0?i:t[n][1]},Gn.prototype.has=function(e){return rr(this.__data__,e)>-1},Gn.prototype.set=function(e,t){var n=this.__data__,r=rr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Yn.prototype.clear=function(){this.size=0,this.__data__={hash:new Wn,map:new(Tn||Gn),string:new Wn}},Yn.prototype.delete=function(e){var t=ua(this,e).delete(e);return this.size-=t?1:0,t},Yn.prototype.get=function(e){return ua(this,e).get(e)},Yn.prototype.has=function(e){return ua(this,e).has(e)},Yn.prototype.set=function(e,t){var n=ua(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Xn.prototype.add=Xn.prototype.push=function(e){return this.__data__.set(e,o),this},Xn.prototype.has=function(e){return this.__data__.has(e)},Kn.prototype.clear=function(){this.__data__=new Gn,this.size=0},Kn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Kn.prototype.get=function(e){return this.__data__.get(e)},Kn.prototype.has=function(e){return this.__data__.has(e)},Kn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Gn){var r=n.__data__;if(!Tn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Yn(r)}return n.set(e,t),this.size=n.size,this};var hr=Di(_r),pr=Di(wr,!0);function mr(e,t){var n=!0;return hr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function gr(e,t,n){for(var r=-1,a=e.length;++r<a;){var o=e[r],s=t(o);if(null!=s&&(l===i?s==s&&!cs(s):n(s,l)))var l=s,c=o}return c}function vr(e,t){var n=[];return hr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function yr(e,t,n,r,i){var a=-1,o=e.length;for(n||(n=ya),i||(i=[]);++a<o;){var s=e[a];t>0&&n(s)?t>1?yr(s,t-1,n,r,i):It(i,s):r||(i[i.length]=s)}return i}var br=Pi(),xr=Pi(!0);function _r(e,t){return e&&br(e,t,Ns)}function wr(e,t){return e&&xr(e,t,Ns)}function Ar(e,t){return Nt(t,(function(t){return Jo(e[t])}))}function kr(e,t){for(var n=0,r=(t=xi(t,e)).length;null!=e&&n<r;)e=e[Fa(t[n++])];return n&&n==r?e:i}function Er(e,t,n){var r=t(e);return Vo(e)?r:It(r,n(e))}function Tr(e){return null==e?e===i?"[object Undefined]":"[object Null]":Qe&&Qe in Me(e)?function(e){var t=Ie.call(e,Qe),n=e[Qe];try{e[Qe]=i;var r=!0}catch(e){}var a=je.call(e);r&&(t?e[Qe]=n:delete e[Qe]);return a}(e):function(e){return je.call(e)}(e)}function Mr(e,t){return e>t}function Sr(e,t){return null!=e&&Ie.call(e,t)}function Cr(e,t){return null!=e&&t in Me(e)}function Or(e,t,n){for(var a=n?Dt:Lt,o=e[0].length,s=e.length,l=s,c=r(s),u=1/0,f=[];l--;){var d=e[l];l&&t&&(d=Pt(d,Qt(t))),u=xn(d.length,u),c[l]=!n&&(t||o>=120&&d.length>=120)?new Xn(l&&d):i}d=e[0];var h=-1,p=c[0];e:for(;++h<o&&f.length<u;){var m=d[h],g=t?t(m):m;if(m=n||0!==m?m:0,!(p?tn(p,g):a(f,g,n))){for(l=s;--l;){var v=c[l];if(!(v?tn(v,g):a(e[l],g,n)))continue e}p&&p.push(g),f.push(m)}}return f}function Rr(e,t,n){var r=null==(e=Sa(e,t=xi(t,e)))?e:e[Fa(Ka(t))];return null==r?i:Mt(r,e,n)}function Nr(e){return ns(e)&&Tr(e)==y}function Lr(e,t,n,r,a){return e===t||(null==e||null==t||!ns(e)&&!ns(t)?e!=e&&t!=t:function(e,t,n,r,a,o){var s=Vo(e),l=Vo(t),c=s?b:ma(e),u=l?b:ma(t),f=(c=c==y?M:c)==M,d=(u=u==y?M:u)==M,h=c==u;if(h&&Xo(e)){if(!Xo(t))return!1;s=!0,f=!1}if(h&&!f)return o||(o=new Kn),s||us(e)?na(e,t,n,r,a,o):function(e,t,n,r,i,a,o){switch(n){case P:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case D:return!(e.byteLength!=t.byteLength||!a(new Ve(e),new Ve(t)));case x:case _:case T:return Uo(+e,+t);case w:return e.name==t.name&&e.message==t.message;case C:case R:return e==t+"";case E:var s=cn;case O:var l=1&r;if(s||(s=dn),e.size!=t.size&&!l)return!1;var c=o.get(e);if(c)return c==t;r|=2,o.set(e,t);var u=na(s(e),s(t),r,i,a,o);return o.delete(e),u;case N:if(jn)return jn.call(e)==jn.call(t)}return!1}(e,t,c,n,r,a,o);if(!(1&n)){var p=f&&Ie.call(e,"__wrapped__"),m=d&&Ie.call(t,"__wrapped__");if(p||m){var g=p?e.value():e,v=m?t.value():t;return o||(o=new Kn),a(g,v,n,r,o)}}if(!h)return!1;return o||(o=new Kn),function(e,t,n,r,a,o){var s=1&n,l=ia(e),c=l.length,u=ia(t),f=u.length;if(c!=f&&!s)return!1;var d=c;for(;d--;){var h=l[d];if(!(s?h in t:Ie.call(t,h)))return!1}var p=o.get(e),m=o.get(t);if(p&&m)return p==t&&m==e;var g=!0;o.set(e,t),o.set(t,e);var v=s;for(;++d<c;){var y=e[h=l[d]],b=t[h];if(r)var x=s?r(b,y,h,t,e,o):r(y,b,h,e,t,o);if(!(x===i?y===b||a(y,b,n,r,o):x)){g=!1;break}v||(v="constructor"==h)}if(g&&!v){var _=e.constructor,w=t.constructor;_==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof w&&w instanceof w||(g=!1)}return o.delete(e),o.delete(t),g}(e,t,n,r,a,o)}(e,t,n,r,Lr,a))}function Dr(e,t,n,r){var a=n.length,o=a,s=!r;if(null==e)return!o;for(e=Me(e);a--;){var l=n[a];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<o;){var c=(l=n[a])[0],u=e[c],f=l[1];if(s&&l[2]){if(u===i&&!(c in e))return!1}else{var d=new Kn;if(r)var h=r(u,f,c,e,t,d);if(!(h===i?Lr(f,u,3,r,d):h))return!1}}return!0}function Pr(e){return!(!ts(e)||(t=e,ze&&ze in t))&&(Jo(e)?$e:ye).test(za(e));var t}function Ir(e){return"function"==typeof e?e:null==e?il:"object"==typeof e?Vo(e)?$r(e[0],e[1]):Ur(e):hl(e)}function Fr(e){if(!ka(e))return Yt(e);var t=[];for(var n in Me(e))Ie.call(e,n)&&"constructor"!=n&&t.push(n);return t}function zr(e){if(!ts(e))return function(e){var t=[];if(null!=e)for(var n in Me(e))t.push(n);return t}(e);var t=ka(e),n=[];for(var r in e)("constructor"!=r||!t&&Ie.call(e,r))&&n.push(r);return n}function jr(e,t){return e<t}function Br(e,t){var n=-1,i=Go(e)?r(e.length):[];return hr(e,(function(e,r,a){i[++n]=t(e,r,a)})),i}function Ur(e){var t=fa(e);return 1==t.length&&t[0][2]?Ta(t[0][0],t[0][1]):function(n){return n===e||Dr(n,e,t)}}function $r(e,t){return _a(e)&&Ea(t)?Ta(Fa(e),t):function(n){var r=Ms(n,e);return r===i&&r===t?Ss(n,e):Lr(t,r,3)}}function qr(e,t,n,r,a){e!==t&&br(t,(function(o,s){if(a||(a=new Kn),ts(o))!function(e,t,n,r,a,o,s){var l=Ca(e,n),c=Ca(t,n),u=s.get(c);if(u)return void tr(e,n,u);var f=o?o(l,c,n+"",e,t,s):i,d=f===i;if(d){var h=Vo(c),p=!h&&Xo(c),m=!h&&!p&&us(c);f=c,h||p||m?Vo(l)?f=l:Yo(l)?f=Oi(l):p?(d=!1,f=ki(c,!0)):m?(d=!1,f=Ti(c,!0)):f=[]:as(c)||Ho(c)?(f=l,Ho(l)?f=ys(l):ts(l)&&!Jo(l)||(f=va(c))):d=!1}d&&(s.set(c,f),a(f,c,r,o,s),s.delete(c));tr(e,n,f)}(e,t,s,n,qr,r,a);else{var l=r?r(Ca(e,s),o,s+"",e,t,a):i;l===i&&(l=o),tr(e,s,l)}}),Ls)}function Hr(e,t){var n=e.length;if(n)return ba(t+=t<0?n:0,n)?e[t]:i}function Vr(e,t,n){t=t.length?Pt(t,(function(e){return Vo(e)?function(t){return kr(t,1===e.length?e[0]:e)}:e})):[il];var r=-1;t=Pt(t,Qt(ca()));var i=Br(e,(function(e,n,i){var a=Pt(t,(function(t){return t(e)}));return{criteria:a,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,a=t.criteria,o=i.length,s=n.length;for(;++r<o;){var l=Mi(i[r],a[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Wr(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],s=kr(e,o);n(s,o)&&ei(a,xi(o,e),s)}return a}function Gr(e,t,n,r){var i=r?Ht:qt,a=-1,o=t.length,s=e;for(e===t&&(t=Oi(t)),n&&(s=Pt(e,Qt(n)));++a<o;)for(var l=0,c=t[a],u=n?n(c):c;(l=i(s,u,l,r))>-1;)s!==e&&Ke.call(s,l,1),Ke.call(e,l,1);return e}function Yr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==a){var a=i;ba(i)?Ke.call(e,i,1):di(e,i)}}return e}function Xr(e,t){return e+gt(An()*(t-e+1))}function Kr(e,t){var n="";if(!e||t<1||t>p)return n;do{t%2&&(n+=e),(t=gt(t/2))&&(e+=e)}while(t);return n}function Zr(e,t){return Na(Ma(e,t,il),e+"")}function Jr(e){return Jn(Us(e))}function Qr(e,t){var n=Us(e);return Pa(n,lr(t,0,n.length))}function ei(e,t,n,r){if(!ts(e))return e;for(var a=-1,o=(t=xi(t,e)).length,s=o-1,l=e;null!=l&&++a<o;){var c=Fa(t[a]),u=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(a!=s){var f=l[c];(u=r?r(f,c,l):i)===i&&(u=ts(f)?f:ba(t[a+1])?[]:{})}nr(l,c,u),l=l[c]}return e}var ti=Rn?function(e,t){return Rn.set(e,t),e}:il,ni=nt?function(e,t){return nt(e,"toString",{configurable:!0,enumerable:!1,value:tl(t),writable:!0})}:il;function ri(e){return Pa(Us(e))}function ii(e,t,n){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var o=r(a);++i<a;)o[i]=e[i+t];return o}function ai(e,t){var n;return hr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function oi(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var a=r+i>>>1,o=e[a];null!==o&&!cs(o)&&(n?o<=t:o<t)?r=a+1:i=a}return i}return si(e,t,il,n)}function si(e,t,n,r){var a=0,o=null==e?0:e.length;if(0===o)return 0;for(var s=(t=n(t))!=t,l=null===t,c=cs(t),u=t===i;a<o;){var f=gt((a+o)/2),d=n(e[f]),h=d!==i,p=null===d,m=d==d,g=cs(d);if(s)var v=r||m;else v=u?m&&(r||h):l?m&&h&&(r||!p):c?m&&h&&!p&&(r||!g):!p&&!g&&(r?d<=t:d<t);v?a=f+1:o=f}return xn(o,4294967294)}function li(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n],s=t?t(o):o;if(!n||!Uo(s,l)){var l=s;a[i++]=0===o?0:o}}return a}function ci(e){return"number"==typeof e?e:cs(e)?m:+e}function ui(e){if("string"==typeof e)return e;if(Vo(e))return Pt(e,ui)+"";if(cs(e))return Bn?Bn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function fi(e,t,n){var r=-1,i=Lt,a=e.length,o=!0,s=[],l=s;if(n)o=!1,i=Dt;else if(a>=200){var c=t?null:Ki(e);if(c)return dn(c);o=!1,i=tn,l=new Xn}else l=t?[]:s;e:for(;++r<a;){var u=e[r],f=t?t(u):u;if(u=n||0!==u?u:0,o&&f==f){for(var d=l.length;d--;)if(l[d]===f)continue e;t&&l.push(f),s.push(u)}else i(l,f,n)||(l!==s&&l.push(f),s.push(u))}return s}function di(e,t){return null==(e=Sa(e,t=xi(t,e)))||delete e[Fa(Ka(t))]}function hi(e,t,n,r){return ei(e,t,n(kr(e,t)),r)}function pi(e,t,n,r){for(var i=e.length,a=r?i:-1;(r?a--:++a<i)&&t(e[a],a,e););return n?ii(e,r?0:a,r?a+1:i):ii(e,r?a+1:0,r?i:a)}function mi(e,t){var n=e;return n instanceof Vn&&(n=n.value()),Ft(t,(function(e,t){return t.func.apply(t.thisArg,It([e],t.args))}),n)}function gi(e,t,n){var i=e.length;if(i<2)return i?fi(e[0]):[];for(var a=-1,o=r(i);++a<i;)for(var s=e[a],l=-1;++l<i;)l!=a&&(o[a]=dr(o[a]||s,e[l],t,n));return fi(yr(o,1),t,n)}function vi(e,t,n){for(var r=-1,a=e.length,o=t.length,s={};++r<a;){var l=r<o?t[r]:i;n(s,e[r],l)}return s}function yi(e){return Yo(e)?e:[]}function bi(e){return"function"==typeof e?e:il}function xi(e,t){return Vo(e)?e:_a(e,t)?[e]:Ia(bs(e))}var _i=Zr;function wi(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:ii(e,t,n)}var Ai=it||function(e){return mt.clearTimeout(e)};function ki(e,t){if(t)return e.slice();var n=e.length,r=We?We(n):new e.constructor(n);return e.copy(r),r}function Ei(e){var t=new e.constructor(e.byteLength);return new Ve(t).set(new Ve(e)),t}function Ti(e,t){var n=t?Ei(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Mi(e,t){if(e!==t){var n=e!==i,r=null===e,a=e==e,o=cs(e),s=t!==i,l=null===t,c=t==t,u=cs(t);if(!l&&!u&&!o&&e>t||o&&s&&c&&!l&&!u||r&&s&&c||!n&&c||!a)return 1;if(!r&&!o&&!u&&e<t||u&&n&&a&&!r&&!o||l&&n&&a||!s&&a||!c)return-1}return 0}function Si(e,t,n,i){for(var a=-1,o=e.length,s=n.length,l=-1,c=t.length,u=bn(o-s,0),f=r(c+u),d=!i;++l<c;)f[l]=t[l];for(;++a<s;)(d||a<o)&&(f[n[a]]=e[a]);for(;u--;)f[l++]=e[a++];return f}function Ci(e,t,n,i){for(var a=-1,o=e.length,s=-1,l=n.length,c=-1,u=t.length,f=bn(o-l,0),d=r(f+u),h=!i;++a<f;)d[a]=e[a];for(var p=a;++c<u;)d[p+c]=t[c];for(;++s<l;)(h||a<o)&&(d[p+n[s]]=e[a++]);return d}function Oi(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function Ri(e,t,n,r){var a=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var l=t[o],c=r?r(n[l],e[l],l,n,e):i;c===i&&(c=e[l]),a?or(n,l,c):nr(n,l,c)}return n}function Ni(e,t){return function(n,r){var i=Vo(n)?St:ir,a=t?t():{};return i(n,e,ca(r,2),a)}}function Li(e){return Zr((function(t,n){var r=-1,a=n.length,o=a>1?n[a-1]:i,s=a>2?n[2]:i;for(o=e.length>3&&"function"==typeof o?(a--,o):i,s&&xa(n[0],n[1],s)&&(o=a<3?i:o,a=1),t=Me(t);++r<a;){var l=n[r];l&&e(t,l,r,o)}return t}))}function Di(e,t){return function(n,r){if(null==n)return n;if(!Go(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=Me(n);(t?a--:++a<i)&&!1!==r(o[a],a,o););return n}}function Pi(e){return function(t,n,r){for(var i=-1,a=Me(t),o=r(t),s=o.length;s--;){var l=o[e?s:++i];if(!1===n(a[l],l,a))break}return t}}function Ii(e){return function(t){var n=ln(t=bs(t))?mn(t):i,r=n?n[0]:t.charAt(0),a=n?wi(n,1).join(""):t.slice(1);return r[e]()+a}}function Fi(e){return function(t){return Ft(Js(Hs(t).replace(et,"")),e,"")}}function zi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=$n(e.prototype),r=e.apply(n,t);return ts(r)?r:n}}function ji(e){return function(t,n,r){var a=Me(t);if(!Go(t)){var o=ca(n,3);t=Ns(t),n=function(e){return o(a[e],e,a)}}var s=e(t,n,r);return s>-1?a[o?t[s]:s]:i}}function Bi(e){return ra((function(t){var n=t.length,r=n,o=Hn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new Oe(a);if(o&&!l&&"wrapper"==sa(s))var l=new Hn([],!0)}for(r=l?r:n;++r<n;){var c=sa(s=t[r]),u="wrapper"==c?oa(s):i;l=u&&wa(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?l[sa(u[0])].apply(l,u[3]):1==s.length&&wa(s)?l[c]():l.thru(s)}return function(){var e=arguments,r=e[0];if(l&&1==e.length&&Vo(r))return l.plant(r).value();for(var i=0,a=n?t[i].apply(this,e):r;++i<n;)a=t[i].call(this,a);return a}}))}function Ui(e,t,n,a,o,s,l,c,u,d){var h=t&f,p=1&t,m=2&t,g=24&t,v=512&t,y=m?i:zi(e);return function f(){for(var b=arguments.length,x=r(b),_=b;_--;)x[_]=arguments[_];if(g)var w=la(f),A=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(x,w);if(a&&(x=Si(x,a,o,g)),s&&(x=Ci(x,s,l,g)),b-=A,g&&b<d){var k=fn(x,w);return Yi(e,t,Ui,f.placeholder,n,x,k,c,u,d-b)}var E=p?n:this,T=m?E[e]:e;return b=x.length,c?x=function(e,t){var n=e.length,r=xn(t.length,n),a=Oi(e);for(;r--;){var o=t[r];e[r]=ba(o,n)?a[o]:i}return e}(x,c):v&&b>1&&x.reverse(),h&&u<b&&(x.length=u),this&&this!==mt&&this instanceof f&&(T=y||zi(T)),T.apply(E,x)}}function $i(e,t){return function(n,r){return function(e,t,n,r){return _r(e,(function(e,i,a){t(r,n(e),i,a)})),r}(n,e,t(r),{})}}function qi(e,t){return function(n,r){var a;if(n===i&&r===i)return t;if(n!==i&&(a=n),r!==i){if(a===i)return r;"string"==typeof n||"string"==typeof r?(n=ui(n),r=ui(r)):(n=ci(n),r=ci(r)),a=e(n,r)}return a}}function Hi(e){return ra((function(t){return t=Pt(t,Qt(ca())),Zr((function(n){var r=this;return e(t,(function(e){return Mt(e,r,n)}))}))}))}function Vi(e,t){var n=(t=t===i?" ":ui(t)).length;if(n<2)return n?Kr(t,e):t;var r=Kr(t,pt(e/pn(t)));return ln(t)?wi(mn(r),0,e).join(""):r.slice(0,e)}function Wi(e){return function(t,n,a){return a&&"number"!=typeof a&&xa(t,n,a)&&(n=a=i),t=ps(t),n===i?(n=t,t=0):n=ps(n),function(e,t,n,i){for(var a=-1,o=bn(pt((t-e)/(n||1)),0),s=r(o);o--;)s[i?o:++a]=e,e+=n;return s}(t,n,a=a===i?t<n?1:-1:ps(a),e)}}function Gi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=vs(t),n=vs(n)),e(t,n)}}function Yi(e,t,n,r,a,o,s,l,f,d){var h=8&t;t|=h?c:u,4&(t&=~(h?u:c))||(t&=-4);var p=[e,t,a,h?o:i,h?s:i,h?i:o,h?i:s,l,f,d],m=n.apply(i,p);return wa(e)&&Oa(m,p),m.placeholder=r,La(m,e,t)}function Xi(e){var t=Te[e];return function(e,n){if(e=vs(e),(n=null==n?0:xn(ms(n),292))&&xt(e)){var r=(bs(e)+"e").split("e");return+((r=(bs(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Ki=Sn&&1/dn(new Sn([,-0]))[1]==h?function(e){return new Sn(e)}:cl;function Zi(e){return function(t){var n=ma(t);return n==E?cn(t):n==O?hn(t):function(e,t){return Pt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Ji(e,t,n,o,h,p,m,g){var v=2&t;if(!v&&"function"!=typeof e)throw new Oe(a);var y=o?o.length:0;if(y||(t&=-97,o=h=i),m=m===i?m:bn(ms(m),0),g=g===i?g:ms(g),y-=h?h.length:0,t&u){var b=o,x=h;o=h=i}var _=v?i:oa(e),w=[e,t,n,o,h,b,x,p,m,g];if(_&&function(e,t){var n=e[1],r=t[1],i=n|r,a=i<131,o=r==f&&8==n||r==f&&n==d&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!a&&!o)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var l=t[3];if(l){var c=e[3];e[3]=c?Si(c,l,t[4]):l,e[4]=c?fn(e[3],s):t[4]}(l=t[5])&&(c=e[5],e[5]=c?Ci(c,l,t[6]):l,e[6]=c?fn(e[5],s):t[6]);(l=t[7])&&(e[7]=l);r&f&&(e[8]=null==e[8]?t[8]:xn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(w,_),e=w[0],t=w[1],n=w[2],o=w[3],h=w[4],!(g=w[9]=w[9]===i?v?0:e.length:bn(w[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)A=8==t||t==l?function(e,t,n){var a=zi(e);return function o(){for(var s=arguments.length,l=r(s),c=s,u=la(o);c--;)l[c]=arguments[c];var f=s<3&&l[0]!==u&&l[s-1]!==u?[]:fn(l,u);return(s-=f.length)<n?Yi(e,t,Ui,o.placeholder,i,l,f,i,i,n-s):Mt(this&&this!==mt&&this instanceof o?a:e,this,l)}}(e,t,g):t!=c&&33!=t||h.length?Ui.apply(i,w):function(e,t,n,i){var a=1&t,o=zi(e);return function t(){for(var s=-1,l=arguments.length,c=-1,u=i.length,f=r(u+l),d=this&&this!==mt&&this instanceof t?o:e;++c<u;)f[c]=i[c];for(;l--;)f[c++]=arguments[++s];return Mt(d,a?n:this,f)}}(e,t,n,o);else var A=function(e,t,n){var r=1&t,i=zi(e);return function t(){return(this&&this!==mt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,n);return La((_?ti:Oa)(A,w),e,t)}function Qi(e,t,n,r){return e===i||Uo(e,Le[n])&&!Ie.call(r,n)?t:e}function ea(e,t,n,r,a,o){return ts(e)&&ts(t)&&(o.set(t,e),qr(e,t,i,ea,o),o.delete(t)),e}function ta(e){return as(e)?i:e}function na(e,t,n,r,a,o){var s=1&n,l=e.length,c=t.length;if(l!=c&&!(s&&c>l))return!1;var u=o.get(e),f=o.get(t);if(u&&f)return u==t&&f==e;var d=-1,h=!0,p=2&n?new Xn:i;for(o.set(e,t),o.set(t,e);++d<l;){var m=e[d],g=t[d];if(r)var v=s?r(g,m,d,t,e,o):r(m,g,d,e,t,o);if(v!==i){if(v)continue;h=!1;break}if(p){if(!jt(t,(function(e,t){if(!tn(p,t)&&(m===e||a(m,e,n,r,o)))return p.push(t)}))){h=!1;break}}else if(m!==g&&!a(m,g,n,r,o)){h=!1;break}}return o.delete(e),o.delete(t),h}function ra(e){return Na(Ma(e,i,Va),e+"")}function ia(e){return Er(e,Ns,ha)}function aa(e){return Er(e,Ls,pa)}var oa=Rn?function(e){return Rn.get(e)}:cl;function sa(e){for(var t=e.name+"",n=Nn[t],r=Ie.call(Nn,t)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==e)return i.name}return t}function la(e){return(Ie.call(Un,"placeholder")?Un:e).placeholder}function ca(){var e=Un.iteratee||al;return e=e===al?Ir:e,arguments.length?e(arguments[0],arguments[1]):e}function ua(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function fa(e){for(var t=Ns(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Ea(i)]}return t}function da(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return Pr(n)?n:i}var ha=vt?function(e){return null==e?[]:(e=Me(e),Nt(vt(e),(function(t){return Xe.call(e,t)})))}:gl,pa=vt?function(e){for(var t=[];e;)It(t,ha(e)),e=Ge(e);return t}:gl,ma=Tr;function ga(e,t,n){for(var r=-1,i=(t=xi(t,e)).length,a=!1;++r<i;){var o=Fa(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&es(i)&&ba(o,i)&&(Vo(e)||Ho(e))}function va(e){return"function"!=typeof e.constructor||ka(e)?{}:$n(Ge(e))}function ya(e){return Vo(e)||Ho(e)||!!(Ze&&e&&e[Ze])}function ba(e,t){var n=typeof e;return!!(t=null==t?p:t)&&("number"==n||"symbol"!=n&&xe.test(e))&&e>-1&&e%1==0&&e<t}function xa(e,t,n){if(!ts(n))return!1;var r=typeof t;return!!("number"==r?Go(n)&&ba(t,n.length):"string"==r&&t in n)&&Uo(n[t],e)}function _a(e,t){if(Vo(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!cs(e))||(ne.test(e)||!te.test(e)||null!=t&&e in Me(t))}function wa(e){var t=sa(e),n=Un[t];if("function"!=typeof n||!(t in Vn.prototype))return!1;if(e===n)return!0;var r=oa(n);return!!r&&e===r[0]}(En&&ma(new En(new ArrayBuffer(1)))!=P||Tn&&ma(new Tn)!=E||Mn&&ma(Mn.resolve())!=S||Sn&&ma(new Sn)!=O||Cn&&ma(new Cn)!=L)&&(ma=function(e){var t=Tr(e),n=t==M?e.constructor:i,r=n?za(n):"";if(r)switch(r){case Ln:return P;case Dn:return E;case Pn:return S;case In:return O;case Fn:return L}return t});var Aa=De?Jo:vl;function ka(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Le)}function Ea(e){return e==e&&!ts(e)}function Ta(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==i||e in Me(n)))}}function Ma(e,t,n){return t=bn(t===i?e.length-1:t,0),function(){for(var i=arguments,a=-1,o=bn(i.length-t,0),s=r(o);++a<o;)s[a]=i[t+a];a=-1;for(var l=r(t+1);++a<t;)l[a]=i[a];return l[t]=n(s),Mt(e,this,l)}}function Sa(e,t){return t.length<2?e:kr(e,ii(t,0,-1))}function Ca(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Oa=Da(ti),Ra=ht||function(e,t){return mt.setTimeout(e,t)},Na=Da(ni);function La(e,t,n){var r=t+"";return Na(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(le,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Ct(v,(function(n){var r="_."+n[0];t&n[1]&&!Lt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ce);return t?t[1].split(ue):[]}(r),n)))}function Da(e){var t=0,n=0;return function(){var r=_n(),a=16-(r-n);if(n=r,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Pa(e,t){var n=-1,r=e.length,a=r-1;for(t=t===i?r:t;++n<t;){var o=Xr(n,a),s=e[o];e[o]=e[n],e[n]=s}return e.length=t,e}var Ia=function(e){var t=Po(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,n,r,i){t.push(r?i.replace(he,"$1"):n||e)})),t}));function Fa(e){if("string"==typeof e||cs(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function za(e){if(null!=e){try{return Pe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ja(e){if(e instanceof Vn)return e.clone();var t=new Hn(e.__wrapped__,e.__chain__);return t.__actions__=Oi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Ba=Zr((function(e,t){return Yo(e)?dr(e,yr(t,1,Yo,!0)):[]})),Ua=Zr((function(e,t){var n=Ka(t);return Yo(n)&&(n=i),Yo(e)?dr(e,yr(t,1,Yo,!0),ca(n,2)):[]})),$a=Zr((function(e,t){var n=Ka(t);return Yo(n)&&(n=i),Yo(e)?dr(e,yr(t,1,Yo,!0),i,n):[]}));function qa(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ms(n);return i<0&&(i=bn(r+i,0)),$t(e,ca(t,3),i)}function Ha(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r-1;return n!==i&&(a=ms(n),a=n<0?bn(r+a,0):xn(a,r-1)),$t(e,ca(t,3),a,!0)}function Va(e){return(null==e?0:e.length)?yr(e,1):[]}function Wa(e){return e&&e.length?e[0]:i}var Ga=Zr((function(e){var t=Pt(e,yi);return t.length&&t[0]===e[0]?Or(t):[]})),Ya=Zr((function(e){var t=Ka(e),n=Pt(e,yi);return t===Ka(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Or(n,ca(t,2)):[]})),Xa=Zr((function(e){var t=Ka(e),n=Pt(e,yi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?Or(n,i,t):[]}));function Ka(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Za=Zr(Ja);function Ja(e,t){return e&&e.length&&t&&t.length?Gr(e,t):e}var Qa=ra((function(e,t){var n=null==e?0:e.length,r=sr(e,t);return Yr(e,Pt(t,(function(e){return ba(e,n)?+e:e})).sort(Mi)),r}));function eo(e){return null==e?e:kn.call(e)}var to=Zr((function(e){return fi(yr(e,1,Yo,!0))})),no=Zr((function(e){var t=Ka(e);return Yo(t)&&(t=i),fi(yr(e,1,Yo,!0),ca(t,2))})),ro=Zr((function(e){var t=Ka(e);return t="function"==typeof t?t:i,fi(yr(e,1,Yo,!0),i,t)}));function io(e){if(!e||!e.length)return[];var t=0;return e=Nt(e,(function(e){if(Yo(e))return t=bn(e.length,t),!0})),Zt(t,(function(t){return Pt(e,Gt(t))}))}function ao(e,t){if(!e||!e.length)return[];var n=io(e);return null==t?n:Pt(n,(function(e){return Mt(t,i,e)}))}var oo=Zr((function(e,t){return Yo(e)?dr(e,t):[]})),so=Zr((function(e){return gi(Nt(e,Yo))})),lo=Zr((function(e){var t=Ka(e);return Yo(t)&&(t=i),gi(Nt(e,Yo),ca(t,2))})),co=Zr((function(e){var t=Ka(e);return t="function"==typeof t?t:i,gi(Nt(e,Yo),i,t)})),uo=Zr(io);var fo=Zr((function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,ao(e,n)}));function ho(e){var t=Un(e);return t.__chain__=!0,t}function po(e,t){return t(e)}var mo=ra((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,a=function(t){return sr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Vn&&ba(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:po,args:[a],thisArg:i}),new Hn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(a)}));var go=Ni((function(e,t,n){Ie.call(e,n)?++e[n]:or(e,n,1)}));var vo=ji(qa),yo=ji(Ha);function bo(e,t){return(Vo(e)?Ct:hr)(e,ca(t,3))}function xo(e,t){return(Vo(e)?Ot:pr)(e,ca(t,3))}var _o=Ni((function(e,t,n){Ie.call(e,n)?e[n].push(t):or(e,n,[t])}));var wo=Zr((function(e,t,n){var i=-1,a="function"==typeof t,o=Go(e)?r(e.length):[];return hr(e,(function(e){o[++i]=a?Mt(t,e,n):Rr(e,t,n)})),o})),Ao=Ni((function(e,t,n){or(e,n,t)}));function ko(e,t){return(Vo(e)?Pt:Br)(e,ca(t,3))}var Eo=Ni((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var To=Zr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&xa(e,t[0],t[1])?t=[]:n>2&&xa(t[0],t[1],t[2])&&(t=[t[0]]),Vr(e,yr(t,1),[])})),Mo=ut||function(){return mt.Date.now()};function So(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Ji(e,f,i,i,i,i,t)}function Co(e,t){var n;if("function"!=typeof t)throw new Oe(a);return e=ms(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var Oo=Zr((function(e,t,n){var r=1;if(n.length){var i=fn(n,la(Oo));r|=c}return Ji(e,r,t,n,i)})),Ro=Zr((function(e,t,n){var r=3;if(n.length){var i=fn(n,la(Ro));r|=c}return Ji(t,r,e,n,i)}));function No(e,t,n){var r,o,s,l,c,u,f=0,d=!1,h=!1,p=!0;if("function"!=typeof e)throw new Oe(a);function m(t){var n=r,a=o;return r=o=i,f=t,l=e.apply(a,n)}function g(e){var n=e-u;return u===i||n>=t||n<0||h&&e-f>=s}function v(){var e=Mo();if(g(e))return y(e);c=Ra(v,function(e){var n=t-(e-u);return h?xn(n,s-(e-f)):n}(e))}function y(e){return c=i,p&&r?m(e):(r=o=i,l)}function b(){var e=Mo(),n=g(e);if(r=arguments,o=this,u=e,n){if(c===i)return function(e){return f=e,c=Ra(v,t),d?m(e):l}(u);if(h)return Ai(c),c=Ra(v,t),m(u)}return c===i&&(c=Ra(v,t)),l}return t=vs(t)||0,ts(n)&&(d=!!n.leading,s=(h="maxWait"in n)?bn(vs(n.maxWait)||0,t):s,p="trailing"in n?!!n.trailing:p),b.cancel=function(){c!==i&&Ai(c),f=0,r=u=o=c=i},b.flush=function(){return c===i?l:y(Mo())},b}var Lo=Zr((function(e,t){return fr(e,1,t)})),Do=Zr((function(e,t,n){return fr(e,vs(t)||0,n)}));function Po(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Oe(a);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(Po.Cache||Yn),n}function Io(e){if("function"!=typeof e)throw new Oe(a);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Po.Cache=Yn;var Fo=_i((function(e,t){var n=(t=1==t.length&&Vo(t[0])?Pt(t[0],Qt(ca())):Pt(yr(t,1),Qt(ca()))).length;return Zr((function(r){for(var i=-1,a=xn(r.length,n);++i<a;)r[i]=t[i].call(this,r[i]);return Mt(e,this,r)}))})),zo=Zr((function(e,t){var n=fn(t,la(zo));return Ji(e,c,i,t,n)})),jo=Zr((function(e,t){var n=fn(t,la(jo));return Ji(e,u,i,t,n)})),Bo=ra((function(e,t){return Ji(e,d,i,i,i,t)}));function Uo(e,t){return e===t||e!=e&&t!=t}var $o=Gi(Mr),qo=Gi((function(e,t){return e>=t})),Ho=Nr(function(){return arguments}())?Nr:function(e){return ns(e)&&Ie.call(e,"callee")&&!Xe.call(e,"callee")},Vo=r.isArray,Wo=_t?Qt(_t):function(e){return ns(e)&&Tr(e)==D};function Go(e){return null!=e&&es(e.length)&&!Jo(e)}function Yo(e){return ns(e)&&Go(e)}var Xo=bt||vl,Ko=wt?Qt(wt):function(e){return ns(e)&&Tr(e)==_};function Zo(e){if(!ns(e))return!1;var t=Tr(e);return t==w||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!as(e)}function Jo(e){if(!ts(e))return!1;var t=Tr(e);return t==A||t==k||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Qo(e){return"number"==typeof e&&e==ms(e)}function es(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=p}function ts(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ns(e){return null!=e&&"object"==typeof e}var rs=At?Qt(At):function(e){return ns(e)&&ma(e)==E};function is(e){return"number"==typeof e||ns(e)&&Tr(e)==T}function as(e){if(!ns(e)||Tr(e)!=M)return!1;var t=Ge(e);if(null===t)return!0;var n=Ie.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Pe.call(n)==Be}var os=kt?Qt(kt):function(e){return ns(e)&&Tr(e)==C};var ss=Et?Qt(Et):function(e){return ns(e)&&ma(e)==O};function ls(e){return"string"==typeof e||!Vo(e)&&ns(e)&&Tr(e)==R}function cs(e){return"symbol"==typeof e||ns(e)&&Tr(e)==N}var us=Tt?Qt(Tt):function(e){return ns(e)&&es(e.length)&&!!lt[Tr(e)]};var fs=Gi(jr),ds=Gi((function(e,t){return e<=t}));function hs(e){if(!e)return[];if(Go(e))return ls(e)?mn(e):Oi(e);if(Je&&e[Je])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Je]());var t=ma(e);return(t==E?cn:t==O?dn:Us)(e)}function ps(e){return e?(e=vs(e))===h||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ms(e){var t=ps(e),n=t%1;return t==t?n?t-n:t:0}function gs(e){return e?lr(ms(e),0,g):0}function vs(e){if("number"==typeof e)return e;if(cs(e))return m;if(ts(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ts(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Jt(e);var n=ve.test(e);return n||be.test(e)?dt(e.slice(2),n?2:8):ge.test(e)?m:+e}function ys(e){return Ri(e,Ls(e))}function bs(e){return null==e?"":ui(e)}var xs=Li((function(e,t){if(ka(t)||Go(t))Ri(t,Ns(t),e);else for(var n in t)Ie.call(t,n)&&nr(e,n,t[n])})),_s=Li((function(e,t){Ri(t,Ls(t),e)})),ws=Li((function(e,t,n,r){Ri(t,Ls(t),e,r)})),As=Li((function(e,t,n,r){Ri(t,Ns(t),e,r)})),ks=ra(sr);var Es=Zr((function(e,t){e=Me(e);var n=-1,r=t.length,a=r>2?t[2]:i;for(a&&xa(t[0],t[1],a)&&(r=1);++n<r;)for(var o=t[n],s=Ls(o),l=-1,c=s.length;++l<c;){var u=s[l],f=e[u];(f===i||Uo(f,Le[u])&&!Ie.call(e,u))&&(e[u]=o[u])}return e})),Ts=Zr((function(e){return e.push(i,ea),Mt(Ps,i,e)}));function Ms(e,t,n){var r=null==e?i:kr(e,t);return r===i?n:r}function Ss(e,t){return null!=e&&ga(e,t,Cr)}var Cs=$i((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=je.call(t)),e[t]=n}),tl(il)),Os=$i((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=je.call(t)),Ie.call(e,t)?e[t].push(n):e[t]=[n]}),ca),Rs=Zr(Rr);function Ns(e){return Go(e)?Zn(e):Fr(e)}function Ls(e){return Go(e)?Zn(e,!0):zr(e)}var Ds=Li((function(e,t,n){qr(e,t,n)})),Ps=Li((function(e,t,n,r){qr(e,t,n,r)})),Is=ra((function(e,t){var n={};if(null==e)return n;var r=!1;t=Pt(t,(function(t){return t=xi(t,e),r||(r=t.length>1),t})),Ri(e,aa(e),n),r&&(n=cr(n,7,ta));for(var i=t.length;i--;)di(n,t[i]);return n}));var Fs=ra((function(e,t){return null==e?{}:function(e,t){return Wr(e,t,(function(t,n){return Ss(e,n)}))}(e,t)}));function zs(e,t){if(null==e)return{};var n=Pt(aa(e),(function(e){return[e]}));return t=ca(t),Wr(e,n,(function(e,n){return t(e,n[0])}))}var js=Zi(Ns),Bs=Zi(Ls);function Us(e){return null==e?[]:en(e,Ns(e))}var $s=Fi((function(e,t,n){return t=t.toLowerCase(),e+(n?qs(t):t)}));function qs(e){return Zs(bs(e).toLowerCase())}function Hs(e){return(e=bs(e))&&e.replace(_e,an).replace(tt,"")}var Vs=Fi((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Ws=Fi((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Gs=Ii("toLowerCase");var Ys=Fi((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Xs=Fi((function(e,t,n){return e+(n?" ":"")+Zs(t)}));var Ks=Fi((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Zs=Ii("toUpperCase");function Js(e,t,n){return e=bs(e),(t=n?i:t)===i?function(e){return at.test(e)}(e)?function(e){return e.match(rt)||[]}(e):function(e){return e.match(fe)||[]}(e):e.match(t)||[]}var Qs=Zr((function(e,t){try{return Mt(e,i,t)}catch(e){return Zo(e)?e:new ke(e)}})),el=ra((function(e,t){return Ct(t,(function(t){t=Fa(t),or(e,t,Oo(e[t],e))})),e}));function tl(e){return function(){return e}}var nl=Bi(),rl=Bi(!0);function il(e){return e}function al(e){return Ir("function"==typeof e?e:cr(e,1))}var ol=Zr((function(e,t){return function(n){return Rr(n,e,t)}})),sl=Zr((function(e,t){return function(n){return Rr(e,n,t)}}));function ll(e,t,n){var r=Ns(t),i=Ar(t,r);null!=n||ts(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Ar(t,Ns(t)));var a=!(ts(n)&&"chain"in n&&!n.chain),o=Jo(e);return Ct(i,(function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__);return(n.__actions__=Oi(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,It([this.value()],arguments))})})),e}function cl(){}var ul=Hi(Pt),fl=Hi(Rt),dl=Hi(jt);function hl(e){return _a(e)?Gt(Fa(e)):function(e){return function(t){return kr(t,e)}}(e)}var pl=Wi(),ml=Wi(!0);function gl(){return[]}function vl(){return!1}var yl=qi((function(e,t){return e+t}),0),bl=Xi("ceil"),xl=qi((function(e,t){return e/t}),1),_l=Xi("floor");var wl,Al=qi((function(e,t){return e*t}),1),kl=Xi("round"),El=qi((function(e,t){return e-t}),0);return Un.after=function(e,t){if("function"!=typeof t)throw new Oe(a);return e=ms(e),function(){if(--e<1)return t.apply(this,arguments)}},Un.ary=So,Un.assign=xs,Un.assignIn=_s,Un.assignInWith=ws,Un.assignWith=As,Un.at=ks,Un.before=Co,Un.bind=Oo,Un.bindAll=el,Un.bindKey=Ro,Un.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Vo(e)?e:[e]},Un.chain=ho,Un.chunk=function(e,t,n){t=(n?xa(e,t,n):t===i)?1:bn(ms(t),0);var a=null==e?0:e.length;if(!a||t<1)return[];for(var o=0,s=0,l=r(pt(a/t));o<a;)l[s++]=ii(e,o,o+=t);return l},Un.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i},Un.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return It(Vo(n)?Oi(n):[n],yr(t,1))},Un.cond=function(e){var t=null==e?0:e.length,n=ca();return e=t?Pt(e,(function(e){if("function"!=typeof e[1])throw new Oe(a);return[n(e[0]),e[1]]})):[],Zr((function(n){for(var r=-1;++r<t;){var i=e[r];if(Mt(i[0],this,n))return Mt(i[1],this,n)}}))},Un.conforms=function(e){return function(e){var t=Ns(e);return function(n){return ur(n,e,t)}}(cr(e,1))},Un.constant=tl,Un.countBy=go,Un.create=function(e,t){var n=$n(e);return null==t?n:ar(n,t)},Un.curry=function e(t,n,r){var a=Ji(t,8,i,i,i,i,i,n=r?i:n);return a.placeholder=e.placeholder,a},Un.curryRight=function e(t,n,r){var a=Ji(t,l,i,i,i,i,i,n=r?i:n);return a.placeholder=e.placeholder,a},Un.debounce=No,Un.defaults=Es,Un.defaultsDeep=Ts,Un.defer=Lo,Un.delay=Do,Un.difference=Ba,Un.differenceBy=Ua,Un.differenceWith=$a,Un.drop=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,(t=n||t===i?1:ms(t))<0?0:t,r):[]},Un.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,0,(t=r-(t=n||t===i?1:ms(t)))<0?0:t):[]},Un.dropRightWhile=function(e,t){return e&&e.length?pi(e,ca(t,3),!0,!0):[]},Un.dropWhile=function(e,t){return e&&e.length?pi(e,ca(t,3),!0):[]},Un.fill=function(e,t,n,r){var a=null==e?0:e.length;return a?(n&&"number"!=typeof n&&xa(e,t,n)&&(n=0,r=a),function(e,t,n,r){var a=e.length;for((n=ms(n))<0&&(n=-n>a?0:a+n),(r=r===i||r>a?a:ms(r))<0&&(r+=a),r=n>r?0:gs(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Un.filter=function(e,t){return(Vo(e)?Nt:vr)(e,ca(t,3))},Un.flatMap=function(e,t){return yr(ko(e,t),1)},Un.flatMapDeep=function(e,t){return yr(ko(e,t),h)},Un.flatMapDepth=function(e,t,n){return n=n===i?1:ms(n),yr(ko(e,t),n)},Un.flatten=Va,Un.flattenDeep=function(e){return(null==e?0:e.length)?yr(e,h):[]},Un.flattenDepth=function(e,t){return(null==e?0:e.length)?yr(e,t=t===i?1:ms(t)):[]},Un.flip=function(e){return Ji(e,512)},Un.flow=nl,Un.flowRight=rl,Un.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Un.functions=function(e){return null==e?[]:Ar(e,Ns(e))},Un.functionsIn=function(e){return null==e?[]:Ar(e,Ls(e))},Un.groupBy=_o,Un.initial=function(e){return(null==e?0:e.length)?ii(e,0,-1):[]},Un.intersection=Ga,Un.intersectionBy=Ya,Un.intersectionWith=Xa,Un.invert=Cs,Un.invertBy=Os,Un.invokeMap=wo,Un.iteratee=al,Un.keyBy=Ao,Un.keys=Ns,Un.keysIn=Ls,Un.map=ko,Un.mapKeys=function(e,t){var n={};return t=ca(t,3),_r(e,(function(e,r,i){or(n,t(e,r,i),e)})),n},Un.mapValues=function(e,t){var n={};return t=ca(t,3),_r(e,(function(e,r,i){or(n,r,t(e,r,i))})),n},Un.matches=function(e){return Ur(cr(e,1))},Un.matchesProperty=function(e,t){return $r(e,cr(t,1))},Un.memoize=Po,Un.merge=Ds,Un.mergeWith=Ps,Un.method=ol,Un.methodOf=sl,Un.mixin=ll,Un.negate=Io,Un.nthArg=function(e){return e=ms(e),Zr((function(t){return Hr(t,e)}))},Un.omit=Is,Un.omitBy=function(e,t){return zs(e,Io(ca(t)))},Un.once=function(e){return Co(2,e)},Un.orderBy=function(e,t,n,r){return null==e?[]:(Vo(t)||(t=null==t?[]:[t]),Vo(n=r?i:n)||(n=null==n?[]:[n]),Vr(e,t,n))},Un.over=ul,Un.overArgs=Fo,Un.overEvery=fl,Un.overSome=dl,Un.partial=zo,Un.partialRight=jo,Un.partition=Eo,Un.pick=Fs,Un.pickBy=zs,Un.property=hl,Un.propertyOf=function(e){return function(t){return null==e?i:kr(e,t)}},Un.pull=Za,Un.pullAll=Ja,Un.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Gr(e,t,ca(n,2)):e},Un.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Gr(e,t,i,n):e},Un.pullAt=Qa,Un.range=pl,Un.rangeRight=ml,Un.rearg=Bo,Un.reject=function(e,t){return(Vo(e)?Nt:vr)(e,Io(ca(t,3)))},Un.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],a=e.length;for(t=ca(t,3);++r<a;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return Yr(e,i),n},Un.rest=function(e,t){if("function"!=typeof e)throw new Oe(a);return Zr(e,t=t===i?t:ms(t))},Un.reverse=eo,Un.sampleSize=function(e,t,n){return t=(n?xa(e,t,n):t===i)?1:ms(t),(Vo(e)?Qn:Qr)(e,t)},Un.set=function(e,t,n){return null==e?e:ei(e,t,n)},Un.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:ei(e,t,n,r)},Un.shuffle=function(e){return(Vo(e)?er:ri)(e)},Un.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&xa(e,t,n)?(t=0,n=r):(t=null==t?0:ms(t),n=n===i?r:ms(n)),ii(e,t,n)):[]},Un.sortBy=To,Un.sortedUniq=function(e){return e&&e.length?li(e):[]},Un.sortedUniqBy=function(e,t){return e&&e.length?li(e,ca(t,2)):[]},Un.split=function(e,t,n){return n&&"number"!=typeof n&&xa(e,t,n)&&(t=n=i),(n=n===i?g:n>>>0)?(e=bs(e))&&("string"==typeof t||null!=t&&!os(t))&&!(t=ui(t))&&ln(e)?wi(mn(e),0,n):e.split(t,n):[]},Un.spread=function(e,t){if("function"!=typeof e)throw new Oe(a);return t=null==t?0:bn(ms(t),0),Zr((function(n){var r=n[t],i=wi(n,0,t);return r&&It(i,r),Mt(e,this,i)}))},Un.tail=function(e){var t=null==e?0:e.length;return t?ii(e,1,t):[]},Un.take=function(e,t,n){return e&&e.length?ii(e,0,(t=n||t===i?1:ms(t))<0?0:t):[]},Un.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,(t=r-(t=n||t===i?1:ms(t)))<0?0:t,r):[]},Un.takeRightWhile=function(e,t){return e&&e.length?pi(e,ca(t,3),!1,!0):[]},Un.takeWhile=function(e,t){return e&&e.length?pi(e,ca(t,3)):[]},Un.tap=function(e,t){return t(e),e},Un.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Oe(a);return ts(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),No(e,t,{leading:r,maxWait:t,trailing:i})},Un.thru=po,Un.toArray=hs,Un.toPairs=js,Un.toPairsIn=Bs,Un.toPath=function(e){return Vo(e)?Pt(e,Fa):cs(e)?[e]:Oi(Ia(bs(e)))},Un.toPlainObject=ys,Un.transform=function(e,t,n){var r=Vo(e),i=r||Xo(e)||us(e);if(t=ca(t,4),null==n){var a=e&&e.constructor;n=i?r?new a:[]:ts(e)&&Jo(a)?$n(Ge(e)):{}}return(i?Ct:_r)(e,(function(e,r,i){return t(n,e,r,i)})),n},Un.unary=function(e){return So(e,1)},Un.union=to,Un.unionBy=no,Un.unionWith=ro,Un.uniq=function(e){return e&&e.length?fi(e):[]},Un.uniqBy=function(e,t){return e&&e.length?fi(e,ca(t,2)):[]},Un.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?fi(e,i,t):[]},Un.unset=function(e,t){return null==e||di(e,t)},Un.unzip=io,Un.unzipWith=ao,Un.update=function(e,t,n){return null==e?e:hi(e,t,bi(n))},Un.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:hi(e,t,bi(n),r)},Un.values=Us,Un.valuesIn=function(e){return null==e?[]:en(e,Ls(e))},Un.without=oo,Un.words=Js,Un.wrap=function(e,t){return zo(bi(t),e)},Un.xor=so,Un.xorBy=lo,Un.xorWith=co,Un.zip=uo,Un.zipObject=function(e,t){return vi(e||[],t||[],nr)},Un.zipObjectDeep=function(e,t){return vi(e||[],t||[],ei)},Un.zipWith=fo,Un.entries=js,Un.entriesIn=Bs,Un.extend=_s,Un.extendWith=ws,ll(Un,Un),Un.add=yl,Un.attempt=Qs,Un.camelCase=$s,Un.capitalize=qs,Un.ceil=bl,Un.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=vs(n))==n?n:0),t!==i&&(t=(t=vs(t))==t?t:0),lr(vs(e),t,n)},Un.clone=function(e){return cr(e,4)},Un.cloneDeep=function(e){return cr(e,5)},Un.cloneDeepWith=function(e,t){return cr(e,5,t="function"==typeof t?t:i)},Un.cloneWith=function(e,t){return cr(e,4,t="function"==typeof t?t:i)},Un.conformsTo=function(e,t){return null==t||ur(e,t,Ns(t))},Un.deburr=Hs,Un.defaultTo=function(e,t){return null==e||e!=e?t:e},Un.divide=xl,Un.endsWith=function(e,t,n){e=bs(e),t=ui(t);var r=e.length,a=n=n===i?r:lr(ms(n),0,r);return(n-=t.length)>=0&&e.slice(n,a)==t},Un.eq=Uo,Un.escape=function(e){return(e=bs(e))&&Z.test(e)?e.replace(X,on):e},Un.escapeRegExp=function(e){return(e=bs(e))&&ae.test(e)?e.replace(ie,"\\$&"):e},Un.every=function(e,t,n){var r=Vo(e)?Rt:mr;return n&&xa(e,t,n)&&(t=i),r(e,ca(t,3))},Un.find=vo,Un.findIndex=qa,Un.findKey=function(e,t){return Ut(e,ca(t,3),_r)},Un.findLast=yo,Un.findLastIndex=Ha,Un.findLastKey=function(e,t){return Ut(e,ca(t,3),wr)},Un.floor=_l,Un.forEach=bo,Un.forEachRight=xo,Un.forIn=function(e,t){return null==e?e:br(e,ca(t,3),Ls)},Un.forInRight=function(e,t){return null==e?e:xr(e,ca(t,3),Ls)},Un.forOwn=function(e,t){return e&&_r(e,ca(t,3))},Un.forOwnRight=function(e,t){return e&&wr(e,ca(t,3))},Un.get=Ms,Un.gt=$o,Un.gte=qo,Un.has=function(e,t){return null!=e&&ga(e,t,Sr)},Un.hasIn=Ss,Un.head=Wa,Un.identity=il,Un.includes=function(e,t,n,r){e=Go(e)?e:Us(e),n=n&&!r?ms(n):0;var i=e.length;return n<0&&(n=bn(i+n,0)),ls(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&qt(e,t,n)>-1},Un.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ms(n);return i<0&&(i=bn(r+i,0)),qt(e,t,i)},Un.inRange=function(e,t,n){return t=ps(t),n===i?(n=t,t=0):n=ps(n),function(e,t,n){return e>=xn(t,n)&&e<bn(t,n)}(e=vs(e),t,n)},Un.invoke=Rs,Un.isArguments=Ho,Un.isArray=Vo,Un.isArrayBuffer=Wo,Un.isArrayLike=Go,Un.isArrayLikeObject=Yo,Un.isBoolean=function(e){return!0===e||!1===e||ns(e)&&Tr(e)==x},Un.isBuffer=Xo,Un.isDate=Ko,Un.isElement=function(e){return ns(e)&&1===e.nodeType&&!as(e)},Un.isEmpty=function(e){if(null==e)return!0;if(Go(e)&&(Vo(e)||"string"==typeof e||"function"==typeof e.splice||Xo(e)||us(e)||Ho(e)))return!e.length;var t=ma(e);if(t==E||t==O)return!e.size;if(ka(e))return!Fr(e).length;for(var n in e)if(Ie.call(e,n))return!1;return!0},Un.isEqual=function(e,t){return Lr(e,t)},Un.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?Lr(e,t,i,n):!!r},Un.isError=Zo,Un.isFinite=function(e){return"number"==typeof e&&xt(e)},Un.isFunction=Jo,Un.isInteger=Qo,Un.isLength=es,Un.isMap=rs,Un.isMatch=function(e,t){return e===t||Dr(e,t,fa(t))},Un.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,Dr(e,t,fa(t),n)},Un.isNaN=function(e){return is(e)&&e!=+e},Un.isNative=function(e){if(Aa(e))throw new ke("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Pr(e)},Un.isNil=function(e){return null==e},Un.isNull=function(e){return null===e},Un.isNumber=is,Un.isObject=ts,Un.isObjectLike=ns,Un.isPlainObject=as,Un.isRegExp=os,Un.isSafeInteger=function(e){return Qo(e)&&e>=-9007199254740991&&e<=p},Un.isSet=ss,Un.isString=ls,Un.isSymbol=cs,Un.isTypedArray=us,Un.isUndefined=function(e){return e===i},Un.isWeakMap=function(e){return ns(e)&&ma(e)==L},Un.isWeakSet=function(e){return ns(e)&&"[object WeakSet]"==Tr(e)},Un.join=function(e,t){return null==e?"":Bt.call(e,t)},Un.kebabCase=Vs,Un.last=Ka,Un.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r;return n!==i&&(a=(a=ms(n))<0?bn(r+a,0):xn(a,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,a):$t(e,Vt,a,!0)},Un.lowerCase=Ws,Un.lowerFirst=Gs,Un.lt=fs,Un.lte=ds,Un.max=function(e){return e&&e.length?gr(e,il,Mr):i},Un.maxBy=function(e,t){return e&&e.length?gr(e,ca(t,2),Mr):i},Un.mean=function(e){return Wt(e,il)},Un.meanBy=function(e,t){return Wt(e,ca(t,2))},Un.min=function(e){return e&&e.length?gr(e,il,jr):i},Un.minBy=function(e,t){return e&&e.length?gr(e,ca(t,2),jr):i},Un.stubArray=gl,Un.stubFalse=vl,Un.stubObject=function(){return{}},Un.stubString=function(){return""},Un.stubTrue=function(){return!0},Un.multiply=Al,Un.nth=function(e,t){return e&&e.length?Hr(e,ms(t)):i},Un.noConflict=function(){return mt._===this&&(mt._=Ue),this},Un.noop=cl,Un.now=Mo,Un.pad=function(e,t,n){e=bs(e);var r=(t=ms(t))?pn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Vi(gt(i),n)+e+Vi(pt(i),n)},Un.padEnd=function(e,t,n){e=bs(e);var r=(t=ms(t))?pn(e):0;return t&&r<t?e+Vi(t-r,n):e},Un.padStart=function(e,t,n){e=bs(e);var r=(t=ms(t))?pn(e):0;return t&&r<t?Vi(t-r,n)+e:e},Un.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),wn(bs(e).replace(oe,""),t||0)},Un.random=function(e,t,n){if(n&&"boolean"!=typeof n&&xa(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=ps(e),t===i?(t=e,e=0):t=ps(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var a=An();return xn(e+a*(t-e+ft("1e-"+((a+"").length-1))),t)}return Xr(e,t)},Un.reduce=function(e,t,n){var r=Vo(e)?Ft:Xt,i=arguments.length<3;return r(e,ca(t,4),n,i,hr)},Un.reduceRight=function(e,t,n){var r=Vo(e)?zt:Xt,i=arguments.length<3;return r(e,ca(t,4),n,i,pr)},Un.repeat=function(e,t,n){return t=(n?xa(e,t,n):t===i)?1:ms(t),Kr(bs(e),t)},Un.replace=function(){var e=arguments,t=bs(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Un.result=function(e,t,n){var r=-1,a=(t=xi(t,e)).length;for(a||(a=1,e=i);++r<a;){var o=null==e?i:e[Fa(t[r])];o===i&&(r=a,o=n),e=Jo(o)?o.call(e):o}return e},Un.round=kl,Un.runInContext=e,Un.sample=function(e){return(Vo(e)?Jn:Jr)(e)},Un.size=function(e){if(null==e)return 0;if(Go(e))return ls(e)?pn(e):e.length;var t=ma(e);return t==E||t==O?e.size:Fr(e).length},Un.snakeCase=Ys,Un.some=function(e,t,n){var r=Vo(e)?jt:ai;return n&&xa(e,t,n)&&(t=i),r(e,ca(t,3))},Un.sortedIndex=function(e,t){return oi(e,t)},Un.sortedIndexBy=function(e,t,n){return si(e,t,ca(n,2))},Un.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=oi(e,t);if(r<n&&Uo(e[r],t))return r}return-1},Un.sortedLastIndex=function(e,t){return oi(e,t,!0)},Un.sortedLastIndexBy=function(e,t,n){return si(e,t,ca(n,2),!0)},Un.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=oi(e,t,!0)-1;if(Uo(e[n],t))return n}return-1},Un.startCase=Xs,Un.startsWith=function(e,t,n){return e=bs(e),n=null==n?0:lr(ms(n),0,e.length),t=ui(t),e.slice(n,n+t.length)==t},Un.subtract=El,Un.sum=function(e){return e&&e.length?Kt(e,il):0},Un.sumBy=function(e,t){return e&&e.length?Kt(e,ca(t,2)):0},Un.template=function(e,t,n){var r=Un.templateSettings;n&&xa(e,t,n)&&(t=i),e=bs(e),t=ws({},t,r,Qi);var a,o,s=ws({},t.imports,r.imports,Qi),l=Ns(s),c=en(s,l),u=0,f=t.interpolate||we,d="__p += '",h=Se((t.escape||we).source+"|"+f.source+"|"+(f===ee?pe:we).source+"|"+(t.evaluate||we).source+"|$","g"),p="//# sourceURL="+(Ie.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++st+"]")+"\n";e.replace(h,(function(t,n,r,i,s,l){return r||(r=i),d+=e.slice(u,l).replace(Ae,sn),n&&(a=!0,d+="' +\n__e("+n+") +\n'"),s&&(o=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=l+t.length,t})),d+="';\n";var m=Ie.call(t,"variable")&&t.variable;if(m){if(de.test(m))throw new ke("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(o?d.replace(V,""):d).replace(W,"$1").replace(G,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=Qs((function(){return Ee(l,p+"return "+d).apply(i,c)}));if(g.source=d,Zo(g))throw g;return g},Un.times=function(e,t){if((e=ms(e))<1||e>p)return[];var n=g,r=xn(e,g);t=ca(t),e-=g;for(var i=Zt(r,t);++n<e;)t(n);return i},Un.toFinite=ps,Un.toInteger=ms,Un.toLength=gs,Un.toLower=function(e){return bs(e).toLowerCase()},Un.toNumber=vs,Un.toSafeInteger=function(e){return e?lr(ms(e),-9007199254740991,p):0===e?e:0},Un.toString=bs,Un.toUpper=function(e){return bs(e).toUpperCase()},Un.trim=function(e,t,n){if((e=bs(e))&&(n||t===i))return Jt(e);if(!e||!(t=ui(t)))return e;var r=mn(e),a=mn(t);return wi(r,nn(r,a),rn(r,a)+1).join("")},Un.trimEnd=function(e,t,n){if((e=bs(e))&&(n||t===i))return e.slice(0,gn(e)+1);if(!e||!(t=ui(t)))return e;var r=mn(e);return wi(r,0,rn(r,mn(t))+1).join("")},Un.trimStart=function(e,t,n){if((e=bs(e))&&(n||t===i))return e.replace(oe,"");if(!e||!(t=ui(t)))return e;var r=mn(e);return wi(r,nn(r,mn(t))).join("")},Un.truncate=function(e,t){var n=30,r="...";if(ts(t)){var a="separator"in t?t.separator:a;n="length"in t?ms(t.length):n,r="omission"in t?ui(t.omission):r}var o=(e=bs(e)).length;if(ln(e)){var s=mn(e);o=s.length}if(n>=o)return e;var l=n-pn(r);if(l<1)return r;var c=s?wi(s,0,l).join(""):e.slice(0,l);if(a===i)return c+r;if(s&&(l+=c.length-l),os(a)){if(e.slice(l).search(a)){var u,f=c;for(a.global||(a=Se(a.source,bs(me.exec(a))+"g")),a.lastIndex=0;u=a.exec(f);)var d=u.index;c=c.slice(0,d===i?l:d)}}else if(e.indexOf(ui(a),l)!=l){var h=c.lastIndexOf(a);h>-1&&(c=c.slice(0,h))}return c+r},Un.unescape=function(e){return(e=bs(e))&&K.test(e)?e.replace(Y,vn):e},Un.uniqueId=function(e){var t=++Fe;return bs(e)+t},Un.upperCase=Ks,Un.upperFirst=Zs,Un.each=bo,Un.eachRight=xo,Un.first=Wa,ll(Un,(wl={},_r(Un,(function(e,t){Ie.call(Un.prototype,t)||(wl[t]=e)})),wl),{chain:!1}),Un.VERSION="4.17.21",Ct(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Un[e].placeholder=Un})),Ct(["drop","take"],(function(e,t){Vn.prototype[e]=function(n){n=n===i?1:bn(ms(n),0);var r=this.__filtered__&&!t?new Vn(this):this.clone();return r.__filtered__?r.__takeCount__=xn(n,r.__takeCount__):r.__views__.push({size:xn(n,g),type:e+(r.__dir__<0?"Right":"")}),r},Vn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Ct(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Vn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ca(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),Ct(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Vn.prototype[e]=function(){return this[n](1).value()[0]}})),Ct(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Vn.prototype[e]=function(){return this.__filtered__?new Vn(this):this[n](1)}})),Vn.prototype.compact=function(){return this.filter(il)},Vn.prototype.find=function(e){return this.filter(e).head()},Vn.prototype.findLast=function(e){return this.reverse().find(e)},Vn.prototype.invokeMap=Zr((function(e,t){return"function"==typeof e?new Vn(this):this.map((function(n){return Rr(n,e,t)}))})),Vn.prototype.reject=function(e){return this.filter(Io(ca(e)))},Vn.prototype.slice=function(e,t){e=ms(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Vn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=ms(t))<0?n.dropRight(-t):n.take(t-e)),n)},Vn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Vn.prototype.toArray=function(){return this.take(g)},_r(Vn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),a=Un[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);a&&(Un.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,l=t instanceof Vn,c=s[0],u=l||Vo(t),f=function(e){var t=a.apply(Un,It([e],s));return r&&d?t[0]:t};u&&n&&"function"==typeof c&&1!=c.length&&(l=u=!1);var d=this.__chain__,h=!!this.__actions__.length,p=o&&!d,m=l&&!h;if(!o&&u){t=m?t:new Vn(this);var g=e.apply(t,s);return g.__actions__.push({func:po,args:[f],thisArg:i}),new Hn(g,d)}return p&&m?e.apply(this,s):(g=this.thru(f),p?r?g.value()[0]:g.value():g)})})),Ct(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Re[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Un.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Vo(i)?i:[],e)}return this[n]((function(n){return t.apply(Vo(n)?n:[],e)}))}})),_r(Vn.prototype,(function(e,t){var n=Un[t];if(n){var r=n.name+"";Ie.call(Nn,r)||(Nn[r]=[]),Nn[r].push({name:t,func:n})}})),Nn[Ui(i,2).name]=[{name:"wrapper",func:i}],Vn.prototype.clone=function(){var e=new Vn(this.__wrapped__);return e.__actions__=Oi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Oi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Oi(this.__views__),e},Vn.prototype.reverse=function(){if(this.__filtered__){var e=new Vn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Vn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Vo(e),r=t<0,i=n?e.length:0,a=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=xn(t,e+o);break;case"takeRight":e=bn(e,t-o)}}return{start:e,end:t}}(0,i,this.__views__),o=a.start,s=a.end,l=s-o,c=r?s:o-1,u=this.__iteratees__,f=u.length,d=0,h=xn(l,this.__takeCount__);if(!n||!r&&i==l&&h==l)return mi(e,this.__actions__);var p=[];e:for(;l--&&d<h;){for(var m=-1,g=e[c+=t];++m<f;){var v=u[m],y=v.iteratee,b=v.type,x=y(g);if(2==b)g=x;else if(!x){if(1==b)continue e;break e}}p[d++]=g}return p},Un.prototype.at=mo,Un.prototype.chain=function(){return ho(this)},Un.prototype.commit=function(){return new Hn(this.value(),this.__chain__)},Un.prototype.next=function(){this.__values__===i&&(this.__values__=hs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},Un.prototype.plant=function(e){for(var t,n=this;n instanceof qn;){var r=ja(n);r.__index__=0,r.__values__=i,t?a.__wrapped__=r:t=r;var a=r;n=n.__wrapped__}return a.__wrapped__=e,t},Un.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Vn){var t=e;return this.__actions__.length&&(t=new Vn(this)),(t=t.reverse()).__actions__.push({func:po,args:[eo],thisArg:i}),new Hn(t,this.__chain__)}return this.thru(eo)},Un.prototype.toJSON=Un.prototype.valueOf=Un.prototype.value=function(){return mi(this.__wrapped__,this.__actions__)},Un.prototype.first=Un.prototype.head,Je&&(Un.prototype[Je]=function(){return this}),Un}();mt._=yn,(r=function(){return yn}.call(t,n,t,e))===i||(e.exports=r)}.call(this)},98082:(e,t,n)=>{var r=n(24740),i=n(42253),a=n(99096),o=n(9777);e.exports=function(e,t){return(o(e)?r:a)(e,i(t,3))}},23976:(e,t,n)=>{var r=n(16493);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},36148:(e,t,n)=>{var r=n(32562),i=n(66871)((function(e,t,n){r(e,t,n)}));e.exports=i},45246:e=>{e.exports=function(){}},99196:(e,t,n)=>{var r=n(22877);e.exports=function(){return r.Date.now()}},29767:(e,t,n)=>{var r=n(13077),i=n(5303),a=n(24250),o=n(64533);e.exports=function(e){return a(e)?r(o(e)):i(e)}},76632:(e,t,n)=>{var r=n(42914);e.exports=function(e,t,n){return null==e?e:r(e,t,n)}},58657:e=>{e.exports=function(){return[]}},97279:e=>{e.exports=function(){return!1}},47430:(e,t,n)=>{var r=n(25661),i=n(781);e.exports=function(e,t,n){var a=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return i(n)&&(a="leading"in n?!!n.leading:a,o="trailing"in n?!!n.trailing:o),r(e,t,{leading:a,maxWait:t,trailing:o})}},9950:(e,t,n)=>{var r=n(78528),i=n(781),a=n(30170),o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=s.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):o.test(e)?NaN:+e}},95724:(e,t,n)=>{var r=n(98255),i=n(21929);e.exports=function(e){return r(e,i(e))}},64054:(e,t,n)=>{var r=n(15780);e.exports=function(e){return null==e?"":r(e)}},56983:(e,t,n)=>{var r=n(93170);e.exports=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?r(e,void 0,t):[]}},96016:(e,t,n)=>{var r=n(49803)("toUpperCase");e.exports=r},10501:(e,t,n)=>{var r=n(83605),i=n(48010),a=n(64054),o=n(46721);e.exports=function(e,t,n){return e=a(e),void 0===(t=n?void 0:t)?i(e)?o(e):r(e):e.match(t)||[]}},76134:e=>{"use strict";e.exports=Math.log2||function(e){return Math.log(e)*Math.LOG2E}},84179:e=>{var t={left:0,top:0};e.exports=function(e,n,r){n=n||e.currentTarget||e.srcElement,Array.isArray(r)||(r=[0,0]);var i=e.clientX||0,a=e.clientY||0,o=(s=n,s===window||s===document||s===document.body?t:s.getBoundingClientRect());var s;return r[0]=i-o.left,r[1]=a-o.top,r}},46864:function(e,t,n){var r;!function(i,a,o){a[i]=a[i]||o(),e.exports?e.exports=a[i]:void 0===(r=function(){return a[i]}.call(t,n,t,e))||(e.exports=r)}("Promise",void 0!==n.g?n.g:this,(function(){"use strict";var e,t,n,r=Object.prototype.toString,i="undefined"!=typeof setImmediate?function(e){return setImmediate(e)}:setTimeout;try{Object.defineProperty({},"x",{}),e=function(e,t,n,r){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!1!==r})}}catch(t){e=function(e,t,n){return e[t]=n,e}}function a(e,r){n.add(e,r),t||(t=i(n.drain))}function o(e){var t,n=typeof e;return null==e||"object"!=n&&"function"!=n||(t=e.then),"function"==typeof t&&t}function s(){for(var e=0;e<this.chain.length;e++)l(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function l(e,t,n){var r,i;try{!1===t?n.reject(e.msg):(r=!0===t?e.msg:t.call(void 0,e.msg))===n.promise?n.reject(TypeError("Promise-chain cycle")):(i=o(r))?i.call(r,n.resolve,n.reject):n.resolve(r)}catch(e){n.reject(e)}}function c(e){var t,n=this;if(!n.triggered){n.triggered=!0,n.def&&(n=n.def);try{(t=o(e))?a((function(){var r=new d(n);try{t.call(e,(function(){c.apply(r,arguments)}),(function(){u.apply(r,arguments)}))}catch(e){u.call(r,e)}})):(n.msg=e,n.state=1,n.chain.length>0&&a(s,n))}catch(e){u.call(new d(n),e)}}}function u(e){var t=this;t.triggered||(t.triggered=!0,t.def&&(t=t.def),t.msg=e,t.state=2,t.chain.length>0&&a(s,t))}function f(e,t,n,r){for(var i=0;i<t.length;i++)!function(i){e.resolve(t[i]).then((function(e){n(i,e)}),r)}(i)}function d(e){this.def=e,this.triggered=!1}function h(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function p(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var t=new h(this);this.then=function(e,n){var r={success:"function"!=typeof e||e,failure:"function"==typeof n&&n};return r.promise=new this.constructor((function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");r.resolve=e,r.reject=t})),t.chain.push(r),0!==t.state&&a(s,t),r.promise},this.catch=function(e){return this.then(void 0,e)};try{e.call(void 0,(function(e){c.call(t,e)}),(function(e){u.call(t,e)}))}catch(e){u.call(t,e)}}n=function(){var e,n,r;function i(e,t){this.fn=e,this.self=t,this.next=void 0}return{add:function(t,a){r=new i(t,a),n?n.next=r:e=r,n=r,r=void 0},drain:function(){var r=e;for(e=n=t=void 0;r;)r.fn.call(r.self),r=r.next}}}();var m=e({},"constructor",p,!1);return p.prototype=m,e(m,"__NPO__",0,!1),e(p,"resolve",(function(e){return e&&"object"==typeof e&&1===e.__NPO__?e:new this((function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");t(e)}))})),e(p,"reject",(function(e){return new this((function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");n(e)}))})),e(p,"all",(function(e){var t=this;return"[object Array]"!=r.call(e)?t.reject(TypeError("Not an array")):0===e.length?t.resolve([]):new t((function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");var i=e.length,a=Array(i),o=0;f(t,e,(function(e,t){a[e]=t,++o===i&&n(a)}),r)}))})),e(p,"race",(function(e){var t=this;return"[object Array]"!=r.call(e)?t.reject(TypeError("Not an array")):new t((function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");f(t,e,(function(e,t){n(t)}),r)}))})),p}))},87269:(e,t,n)=>{"use strict";e.exports=function(e){for(var t,n=[],o=0,s=0,l=0,c=0,u=null,f=null,d=0,h=0,p=0,m=e.length;p<m;p++){var g=e[p],v=g[0];switch(v){case"M":l=g[1],c=g[2];break;case"A":var y=r({px:d,py:h,cx:g[6],cy:g[7],rx:g[1],ry:g[2],xAxisRotation:g[3],largeArcFlag:g[4],sweepFlag:g[5]});if(!y.length)continue;for(var b,x=0;x<y.length;x++)g=["C",(b=y[x]).x1,b.y1,b.x2,b.y2,b.x,b.y],x<y.length-1&&n.push(g);break;case"S":var _=d,w=h;"C"!=t&&"S"!=t||(_+=_-o,w+=w-s),g=["C",_,w,g[1],g[2],g[3],g[4]];break;case"T":"Q"==t||"T"==t?(u=2*d-u,f=2*h-f):(u=d,f=h),g=a(d,h,u,f,g[1],g[2]);break;case"Q":u=g[1],f=g[2],g=a(d,h,g[1],g[2],g[3],g[4]);break;case"L":g=i(d,h,g[1],g[2]);break;case"H":g=i(d,h,g[1],h);break;case"V":g=i(d,h,d,g[1]);break;case"Z":g=i(d,h,l,c)}t=v,d=g[g.length-2],h=g[g.length-1],g.length>4?(o=g[g.length-4],s=g[g.length-3]):(o=d,s=h),n.push(g)}return n};var r=n(5901);function i(e,t,n,r){return["C",e,t,n,r,n,r]}function a(e,t,n,r,i,a){return["C",e/3+2/3*n,t/3+2/3*r,i/3+2/3*n,a/3+2/3*r,i,a]}},34204:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,i){for(var a,o,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in a=Object(arguments[l]))n.call(a,c)&&(s[c]=a[c]);if(t){o=t(a);for(var u=0;u<o.length;u++)r.call(a,o[u])&&(s[o[u]]=a[o[u]])}}return s}},54945:(e,t,n)=>{"use strict";var r=n(89032);e.exports=function(e,t,n){if(!r(e))return{};"function"==typeof t&&(n=t,t=[]),"string"==typeof t&&(t=[t]);for(var i="function"==typeof n,a=Object.keys(e),o={},s=0;s<a.length;s++){var l=a[s],c=e[l];t&&(-1!==t.indexOf(l)||i&&!n(c,l,e))||(o[l]=c)}return o}},599:e=>{"use strict";function t(e,t){if("string"!=typeof e)return[e];var n=[e];"string"==typeof t||Array.isArray(t)?t={brackets:t}:t||(t={});var r=t.brackets?Array.isArray(t.brackets)?t.brackets:[t.brackets]:["{}","[]","()"],i=t.escape||"___",a=!!t.flat;r.forEach((function(e){var t=new RegExp(["\\",e[0],"[^\\",e[0],"\\",e[1],"]*\\",e[1]].join("")),r=[];function a(t,a,o){var s=n.push(t.slice(e[0].length,-e[1].length))-1;return r.push(s),i+s+i}n.forEach((function(e,r){for(var i,o=0;e!=i;)if(i=e,e=e.replace(t,a),o++>1e4)throw Error("References have circular dependency. Please, check them.");n[r]=e})),r=r.reverse(),n=n.map((function(t){return r.forEach((function(n){t=t.replace(new RegExp("(\\"+i+n+"\\"+i+")","g"),e[0]+"$1"+e[1])})),t}))}));var o=new RegExp("\\"+i+"([0-9]+)\\"+i);return a?n:function e(t,n,r){for(var i,a=[],s=0;i=o.exec(t);){if(s++>1e4)throw Error("Circular references in parenthesis");a.push(t.slice(0,i.index)),a.push(e(n[i[1]],n)),t=t.slice(i.index+i[0].length)}return a.push(t),a}(n[0],n)}function n(e,t){if(t&&t.flat){var n,r=t&&t.escape||"___",i=e[0];if(!i)return"";for(var a=new RegExp("\\"+r+"([0-9]+)\\"+r),o=0;i!=n;){if(o++>1e4)throw Error("Circular references in "+e);n=i,i=i.replace(a,s)}return i}return e.reduce((function e(t,n){return Array.isArray(n)&&(n=n.reduce(e,"")),t+n}),"");function s(t,n){if(null==e[n])throw Error("Reference "+n+"is undefined");return e[n]}}function r(e,r){return Array.isArray(e)?n(e,r):t(e,r)}r.parse=t,r.stringify=n,e.exports=r},84125:(e,t,n)=>{"use strict";var r=n(19795);e.exports=function(e){var t;arguments.length>1&&(e=arguments);"string"==typeof e?e=e.split(/\s/).map(parseFloat):"number"==typeof e&&(e=[e]);e.length&&"number"==typeof e[0]?t=1===e.length?{width:e[0],height:e[0],x:0,y:0}:2===e.length?{width:e[0],height:e[1],x:0,y:0}:{x:e[0],y:e[1],width:e[2]-e[0]||0,height:e[3]-e[1]||0}:e&&(t={x:(e=r(e,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:e.top||0},null==e.width?e.right?t.width=e.right-t.x:t.width=0:t.width=e.width,null==e.height?e.bottom?t.height=e.bottom-t.y:t.height=0:t.height=e.height);return t}},99061:e=>{e.exports=function(e){var i=[];return e.replace(n,(function(e,n,a){var o=n.toLowerCase();for(a=function(e){var t=e.match(r);return t?t.map(Number):[]}(a),"m"==o&&a.length>2&&(i.push([n].concat(a.splice(0,2))),o="l",n="m"==n?"l":"L");;){if(a.length==t[o])return a.unshift(n),i.push(a);if(a.length<t[o])throw new Error("malformed path data");i.push([n].concat(a.splice(0,t[o])))}})),i};var t={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},n=/([astvzqmhlc])([^astvzqmhlc]*)/gi;var r=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},7857:e=>{e.exports=function(e,t){t||(t=[0,""]),e=String(e);var n=parseFloat(e,10);return t[0]=n,t[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},19795:e=>{"use strict";e.exports=function(e,t,r){var i,a,o={};if("string"==typeof t&&(t=n(t)),Array.isArray(t)){var s={};for(a=0;a<t.length;a++)s[t[a]]=!0;t=s}for(i in t)t[i]=n(t[i]);var l={};for(i in t){var c=t[i];if(Array.isArray(c))for(a=0;a<c.length;a++){var u=c[a];if(r&&(l[u]=!0),u in e){if(o[i]=e[u],r)for(var f=a;f<c.length;f++)l[c[f]]=!0;break}}else i in e&&(t[i]&&(o[i]=e[i]),r&&(l[i]=!0))}if(r)for(i in e)l[i]||(o[i]=e[i]);return o};var t={};function n(e){return t[e]?t[e]:("string"==typeof e&&(e=t[e]=e.split(/\s*,\s*|\s+/)),e)}},41643:(e,t,n)=>{"use strict";var r=n(56319),i={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var a in i){var o=a.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");r.addStyleRule(o,i[a])}},61931:(e,t,n)=>{"use strict";e.exports=n(31992)},34091:(e,t,n)=>{"use strict";e.exports=n(78992)},99527:(e,t,n)=>{"use strict";e.exports=n(71016)},75126:(e,t,n)=>{"use strict";e.exports=n(79441)},55936:(e,t,n)=>{"use strict";e.exports=n(5787)},79513:(e,t,n)=>{"use strict";e.exports=n(83534)},51892:(e,t,n)=>{"use strict";e.exports=n(93959)},9087:(e,t,n)=>{"use strict";e.exports=n(86316)},88203:(e,t,n)=>{"use strict";e.exports=n(66224)},74480:(e,t,n)=>{"use strict";e.exports=n(63725)},6628:(e,t,n)=>{"use strict";e.exports=n(28031)},421:(e,t,n)=>{"use strict";e.exports=n(6490)},10259:e=>{"use strict";e.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},48244:(e,t,n)=>{"use strict";var r=n(10259),i=n(95323),a=n(56596),o=n(65210).templatedArray,s=n(53939);function l(e){return["In order for absolute positioning of the arrow to work, *a"+e+"ref* must be exactly the same as *"+e+"ref*, otherwise *a"+e+"ref* will revert to *pixel* (explained next).","For relative positioning, *a"+e+"ref* can be set to *pixel*,","in which case the *a"+e+"* value is specified in pixels","relative to *"+e+"*.","Absolute positioning is useful","for trendline annotations which should continue to indicate","the correct trend when zoomed. Relative positioning is useful","for specifying the text offset for an annotated point."].join(" ")}function c(e,t,n){return["Sets the",e,"component of the arrow tail about the arrow head.","If `a"+e+"ref` is `pixel`, a positive (negative)","component corresponds to an arrow pointing","from",n,"to",t,"("+t,"to",n+").","If `a"+e+"ref` is not `pixel` and is exactly the same as `"+e+"ref`,","this is an absolute value on that axis,","like `"+e+"`, specified in the same coordinates as `"+e+"ref`."].join(" ")}e.exports=o("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw",description:["Determines whether or not this annotation is visible."].join(" ")},text:{valType:"string",editType:"calc+arraydraw",description:["Sets the text associated with this annotation.","Plotly uses a subset of HTML tags to do things like","newline (<br>), bold (<b></b>), italics (<i></i>),","hyperlinks (<a href='...'></a>). Tags <em>, <sup>, <sub>, <s>, <u>","<span> are also supported."].join(" ")},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw",description:["Sets the angle at which the `text` is drawn","with respect to the horizontal."].join(" ")},font:i({editType:"calc+arraydraw",colorEditType:"arraydraw",description:"Sets the annotation text font."}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw",description:["Sets an explicit width for the text box. null (default) lets the","text set the box width. Wider text will be clipped.","There is no automatic wrapping; use <br> to start a new line."].join(" ")},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw",description:["Sets an explicit height for the text box. null (default) lets the","text set the box height. Taller text will be clipped."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw",description:"Sets the opacity of the annotation (text + arrow)."},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw",description:["Sets the horizontal alignment of the `text` within the box.","Has an effect only if `text` spans two or more lines","(i.e. `text` contains one or more <br> HTML tags) or if an","explicit width is set to override the text width."].join(" ")},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw",description:["Sets the vertical alignment of the `text` within the box.","Has an effect only if an explicit height is set to override","the text height."].join(" ")},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw",description:"Sets the background color of the annotation."},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw",description:["Sets the color of the border enclosing the annotation `text`."].join(" ")},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw",description:["Sets the padding (in px) between the `text`","and the enclosing border."].join(" ")},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw",description:["Sets the width (in px) of the border enclosing","the annotation `text`."].join(" ")},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw",description:["Determines whether or not the annotation is drawn with an arrow.","If *true*, `text` is placed near the arrow's tail.","If *false*, `text` lines up with the `x` and `y` provided."].join(" ")},arrowcolor:{valType:"color",editType:"arraydraw",description:"Sets the color of the annotation arrow."},arrowhead:{valType:"integer",min:0,max:r.length,dflt:1,editType:"arraydraw",description:"Sets the end annotation arrow head style."},startarrowhead:{valType:"integer",min:0,max:r.length,dflt:1,editType:"arraydraw",description:"Sets the start annotation arrow head style."},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw",description:"Sets the annotation arrow head position."},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw",description:["Sets the size of the end annotation arrow head, relative to `arrowwidth`.","A value of 1 (default) gives a head about 3x as wide as the line."].join(" ")},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw",description:["Sets the size of the start annotation arrow head, relative to `arrowwidth`.","A value of 1 (default) gives a head about 3x as wide as the line."].join(" ")},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw",description:"Sets the width (in px) of annotation arrow line."},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw",description:["Sets a distance, in pixels, to move the end arrowhead away from the","position it is pointing at, for example to point at the edge of","a marker independent of zoom. Note that this shortens the arrow","from the `ax` / `ay` vector, in contrast to `xshift` / `yshift`","which moves everything by this amount."].join(" ")},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw",description:["Sets a distance, in pixels, to move the start arrowhead away from the","position it is pointing at, for example to point at the edge of","a marker independent of zoom. Note that this shortens the arrow","from the `ax` / `ay` vector, in contrast to `xshift` / `yshift`","which moves everything by this amount."].join(" ")},ax:{valType:"any",editType:"calc+arraydraw",description:[c("x","left","right")].join(" ")},ay:{valType:"any",editType:"calc+arraydraw",description:[c("y","top","bottom")].join(" ")},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",a.idRegex.x.toString()],editType:"calc",description:["Indicates in what coordinates the tail of the","annotation (ax,ay) is specified.",s.axisRefDescription("x","left","right"),l("x")].join(" ")},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",a.idRegex.y.toString()],editType:"calc",description:["Indicates in what coordinates the tail of the","annotation (ax,ay) is specified.",s.axisRefDescription("y","bottom","top"),l("y")].join(" ")},xref:{valType:"enumerated",values:["paper",a.idRegex.x.toString()],editType:"calc",description:["Sets the annotation's x coordinate axis.",s.axisRefDescription("x","left","right")].join(" ")},x:{valType:"any",editType:"calc+arraydraw",description:["Sets the annotation's x position.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw",description:["Sets the text box's horizontal position anchor","This anchor binds the `x` position to the *left*, *center*","or *right* of the annotation.","For example, if `x` is set to 1, `xref` to *paper* and","`xanchor` to *right* then the right-most portion of the","annotation lines up with the right-most edge of the","plotting area.","If *auto*, the anchor is equivalent to *center* for","data-referenced annotations or if there is an arrow,","whereas for paper-referenced with no arrow, the anchor picked","corresponds to the closest side."].join(" ")},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw",description:["Shifts the position of the whole annotation and arrow to the","right (positive) or left (negative) by this many pixels."].join(" ")},yref:{valType:"enumerated",values:["paper",a.idRegex.y.toString()],editType:"calc",description:["Sets the annotation's y coordinate axis.",s.axisRefDescription("y","bottom","top")].join(" ")},y:{valType:"any",editType:"calc+arraydraw",description:["Sets the annotation's y position.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw",description:["Sets the text box's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the annotation.","For example, if `y` is set to 1, `yref` to *paper* and","`yanchor` to *top* then the top-most portion of the","annotation lines up with the top-most edge of the","plotting area.","If *auto*, the anchor is equivalent to *middle* for","data-referenced annotations or if there is an arrow,","whereas for paper-referenced with no arrow, the anchor picked","corresponds to the closest side."].join(" ")},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw",description:["Shifts the position of the whole annotation and arrow up","(positive) or down (negative) by this many pixels."].join(" ")},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw",description:["Makes this annotation respond to clicks on the plot.","If you click a data point that exactly matches the `x` and `y`","values of this annotation, and it is hidden (visible: false),","it will appear. In *onoff* mode, you must click the same point","again to make it disappear, so if you click multiple points,","you can show multiple annotations. In *onout* mode, a click","anywhere else in the plot (on another data point or not) will","hide this annotation.","If you need to show/hide this annotation in response to different","`x` or `y` values, you can set `xclick` and/or `yclick`. This is","useful for example to label the side of a bar. To label markers","though, `standoff` is preferred over `xclick` and `yclick`."].join(" ")},xclick:{valType:"any",editType:"arraydraw",description:["Toggle this annotation when clicking a data point whose `x` value","is `xclick` rather than the annotation's `x` value."].join(" ")},yclick:{valType:"any",editType:"arraydraw",description:["Toggle this annotation when clicking a data point whose `y` value","is `yclick` rather than the annotation's `y` value."].join(" ")},hovertext:{valType:"string",editType:"arraydraw",description:["Sets text to appear when hovering over this annotation.","If omitted or blank, no hover label will appear."].join(" ")},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw",description:["Sets the background color of the hover label.","By default uses the annotation's `bgcolor` made opaque,","or white if it was transparent."].join(" ")},bordercolor:{valType:"color",editType:"arraydraw",description:["Sets the border color of the hover label.","By default uses either dark grey or white, for maximum","contrast with `hoverlabel.bgcolor`."].join(" ")},font:i({editType:"arraydraw",description:["Sets the hover label text font.","By default uses the global hover font and size,","with color from `hoverlabel.bordercolor`."].join(" ")}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw",description:["Determines whether the annotation text box captures mouse move","and click events, or allows those events to pass through to data","points in the plot that may be behind the annotation. By default","`captureevents` is *false* unless `hovertext` is provided.","If you use the event `plotly_clickannotation` without `hovertext`","you must explicitly enable `captureevents`."].join(" ")},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc",description:["Obsolete. Set `xref` and `yref` separately instead."].join(" ")}}})},43091:(e,t,n)=>{"use strict";var r=n(56319),i=n(596),a=n(40363).draw;function o(e){var t=e._fullLayout;r.filterVisible(t.annotations).forEach((function(t){var n=i.getFromId(e,t.xref),r=i.getFromId(e,t.yref),a=i.getRefType(t.xref),o=i.getRefType(t.yref);t._extremes={},"range"===a&&s(t,n),"range"===o&&s(t,r)}))}function s(e,t){var n,r=t._id,a=r.charAt(0),o=e[a],s=e["a"+a],l=e[a+"ref"],c=e["a"+a+"ref"],u=e["_"+a+"padplus"],f=e["_"+a+"padminus"],d={x:1,y:-1}[a]*e[a+"shift"],h=3*e.arrowsize*e.arrowwidth||0,p=h+d,m=h-d,g=3*e.startarrowsize*e.arrowwidth||0,v=g+d,y=g-d;if(c===l){var b=i.findExtremes(t,[t.r2c(o)],{ppadplus:p,ppadminus:m}),x=i.findExtremes(t,[t.r2c(s)],{ppadplus:Math.max(u,v),ppadminus:Math.max(f,y)});n={min:[b.min[0],x.min[0]],max:[b.max[0],x.max[0]]}}else v=s?v+s:v,y=s?y-s:y,n=i.findExtremes(t,[t.r2c(o)],{ppadplus:Math.max(u,p,v),ppadminus:Math.max(f,m,y)});e._extremes[r]=n}e.exports=function(e){var t=e._fullLayout;if(r.filterVisible(t.annotations).length&&e._fullData.length)return r.syncOrAsync([a,o],e)}},70381:(e,t,n)=>{"use strict";var r=n(56319),i=n(3360),a=n(65210).arrayEditor;function o(e,t){var n,r,i,a,o,l,c,u=e._fullLayout.annotations,f=[],d=[],h=[],p=(t||[]).length;for(n=0;n<u.length;n++)if(a=(i=u[n]).clicktoshow){for(r=0;r<p;r++)if(l=(o=t[r]).xaxis,c=o.yaxis,l._id===i.xref&&c._id===i.yref&&l.d2r(o.x)===s(i._xclick,l)&&c.d2r(o.y)===s(i._yclick,c)){(i.visible?"onout"===a?d:h:f).push(n);break}r===p&&i.visible&&"onout"===a&&d.push(n)}return{on:f,off:d,explicitOff:h}}function s(e,t){return"log"===t.type?t.l2r(e):t.d2r(e)}e.exports={hasClickToShow:function(e,t){var n=o(e,t);return n.on.length>0||n.explicitOff.length>0},onClick:function(e,t){var n,s,l=o(e,t),c=l.on,u=l.off.concat(l.explicitOff),f={},d=e._fullLayout.annotations;if(!c.length&&!u.length)return;for(n=0;n<c.length;n++)(s=a(e.layout,"annotations",d[c[n]])).modifyItem("visible",!0),r.extendFlat(f,s.getUpdateObj());for(n=0;n<u.length;n++)(s=a(e.layout,"annotations",d[u[n]])).modifyItem("visible",!1),r.extendFlat(f,s.getUpdateObj());return i.call("update",e,{},f)}}},70529:(e,t,n)=>{"use strict";var r=n(56319),i=n(53408);e.exports=function(e,t,n,a){a("opacity");var o=a("bgcolor"),s=a("bordercolor"),l=i.opacity(s);a("borderpad");var c=a("borderwidth"),u=a("showarrow");if(a("text",u?" ":n._dfltTitle.annotation),a("textangle"),r.coerceFont(a,"font",n.font),a("width"),a("align"),a("height")&&a("valign"),u){var f,d,h=a("arrowside");-1!==h.indexOf("end")&&(f=a("arrowhead"),d=a("arrowsize")),-1!==h.indexOf("start")&&(a("startarrowhead",f),a("startarrowsize",d)),a("arrowcolor",l?t.bordercolor:i.defaultLine),a("arrowwidth",2*(l&&c||1)),a("standoff"),a("startstandoff")}var p=a("hovertext"),m=n.hoverlabel||{};if(p){var g=a("hoverlabel.bgcolor",m.bgcolor||(i.opacity(o)?i.rgb(o):i.defaultLine)),v=a("hoverlabel.bordercolor",m.bordercolor||i.contrast(g)),y=r.extendFlat({},m.font);y.color||(y.color=v),r.coerceFont(a,"hoverlabel.font",y)}a("captureevents",!!p)}},87627:(e,t,n)=>{"use strict";var r=n(5605),i=n(55521);e.exports=function(e,t,n,a){t=t||{};var o="log"===n&&"linear"===t.type,s="linear"===n&&"log"===t.type;if(o||s)for(var l,c,u=e._fullLayout.annotations,f=t._id.charAt(0),d=0;d<u.length;d++)l=u[d],c="annotations["+d+"].",l[f+"ref"]===t._id&&h(f),l["a"+f+"ref"]===t._id&&h("a"+f);function h(e){var n=l[e],s=null;s=o?i(n,t.range):Math.pow(10,n),r(s)||(s=null),a(c+e,s)}}},70787:(e,t,n)=>{"use strict";var r=n(56319),i=n(596),a=n(75078),o=n(70529),s=n(48244);function l(e,t,n){function a(n,i){return r.coerce(e,t,s,n,i)}var l=a("visible"),c=a("clicktoshow");if(l||c){o(e,t,n,a);for(var u=t.showarrow,f=["x","y"],d=[-10,-30],h={_fullLayout:n},p=0;p<2;p++){var m=f[p],g=i.coerceRef(e,t,h,m,"","paper");if("paper"!==g)i.getFromId(h,g)._annIndices.push(t._index);if(i.coercePosition(t,h,a,g,m,.5),u){var v="a"+m,y=i.coerceRef(e,t,h,v,"pixel",["pixel","paper"]);"pixel"!==y&&y!==g&&(y=t[v]="pixel");var b="pixel"===y?d[p]:.4;i.coercePosition(t,h,a,y,v,b)}a(m+"anchor"),a(m+"shift")}if(r.noneOrAll(e,t,["x","y"]),u&&r.noneOrAll(e,t,["ax","ay"]),c){var x=a("xclick"),_=a("yclick");t._xclick=void 0===x?t.x:i.cleanPosition(x,h,t.xref),t._yclick=void 0===_?t.y:i.cleanPosition(_,h,t.yref)}}}e.exports=function(e,t){a(e,t,{name:"annotations",handleItemDefaults:l})}},40363:(e,t,n)=>{"use strict";var r=n(93268),i=n(3360),a=n(31496),o=n(56319),s=o.strTranslate,l=n(596),c=n(53408),u=n(14797),f=n(17911),d=n(56953),h=n(47281),p=n(85605),m=n(65210).arrayEditor,g=n(91150);function v(e,t){var n=e._fullLayout.annotations[t]||{},r=l.getFromId(e,n.xref),i=l.getFromId(e,n.yref);r&&r.setScale(),i&&i.setScale(),b(e,n,t,!1,r,i)}function y(e,t,n,r,i){var a=i[n],o=i[n+"ref"],s=-1!==n.indexOf("y"),c="domain"===l.getRefType(o),u=s?r.h:r.w;return e?c?a+(s?-t:t)/e._length:e.p2r(e.r2p(a)+t):a+(s?-t:t)/u}function b(e,t,n,a,v,b){var x,_,w=e._fullLayout,A=e._fullLayout._size,k=e._context.edits;a?(x="annotation-"+a,_=a+".annotations"):(x="annotation",_="annotations");var E=m(e.layout,_,t),T=E.modifyBase,M=E.modifyItem,S=E.getUpdateObj;w._infolayer.selectAll("."+x+'[data-index="'+n+'"]').remove();var C="clip"+w._uid+"_ann"+n;if(t._input&&!1!==t.visible){var O={x:{},y:{}},R=+t.textangle||0,N=w._infolayer.append("g").classed(x,!0).attr("data-index",String(n)).style("opacity",t.opacity),L=N.append("g").classed("annotation-text-g",!0),D=k[t.showarrow?"annotationTail":"annotationPosition"],P=t.captureevents||k.annotationText||D,I=L.append("g").style("pointer-events",P?"all":null).call(h,"pointer").on("click",(function(){e._dragging=!1,e.emit("plotly_clickannotation",W(r.event))}));t.hovertext&&I.on("mouseover",(function(){var n=t.hoverlabel,r=n.font,i=this.getBoundingClientRect(),a=e.getBoundingClientRect();f.loneHover({x0:i.left-a.left,x1:i.right-a.left,y:(i.top+i.bottom)/2-a.top,text:t.hovertext,color:n.bgcolor,borderColor:n.bordercolor,fontFamily:r.family,fontSize:r.size,fontColor:r.color,fontWeight:r.weight,fontStyle:r.style,fontVariant:r.variant,fontShadow:r.fontShadow,fontLineposition:r.fontLineposition,fontTextcase:r.fontTextcase},{container:w._hoverlayer.node(),outerContainer:w._paper.node(),gd:e})})).on("mouseout",(function(){f.loneUnhover(w._hoverlayer.node())}));var F=t.borderwidth,z=t.borderpad,j=F+z,B=I.append("rect").attr("class","bg").style("stroke-width",F+"px").call(c.stroke,t.bordercolor).call(c.fill,t.bgcolor),U=t.width||t.height,$=w._topclips.selectAll("#"+C).data(U?[0]:[]);$.enter().append("clipPath").classed("annclip",!0).attr("id",C).append("rect"),$.exit().remove();var q=t.font,H=w._meta?o.templateString(t.text,w._meta):t.text,V=I.append("text").classed("annotation-text",!0).text(H);k.annotationText?V.call(d.makeEditable,{delegate:I,gd:e}).call(G).on("edit",(function(n){t.text=n,this.call(G),M("text",n),v&&v.autorange&&T(v._name+".autorange",!0),b&&b.autorange&&T(b._name+".autorange",!0),i.call("_guiRelayout",e,S())})):V.call(G)}else r.selectAll("#"+C).remove();function W(e){var r={index:n,annotation:t._input,fullAnnotation:t,event:e};return a&&(r.subplotId=a),r}function G(n){return n.call(u.font,q).attr({"text-anchor":{left:"start",right:"end"}[t.align]||"middle"}),d.convertToTspans(n,e,Y),n}function Y(){var n=V.selectAll("a");1===n.size()&&n.text()===V.text()&&I.insert("a",":first-child").attr({"xlink:xlink:href":n.attr("xlink:href"),"xlink:xlink:show":n.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(B.node());var r=I.select(".annotation-text-math-group"),f=!r.empty(),m=u.bBox((f?r:V).node()),x=m.width,_=m.height,E=t.width||x,P=t.height||_,z=Math.round(E+2*j),q=Math.round(P+2*j);function H(e,t){return"auto"===t&&(t=e<1/3?"left":e>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[t]}for(var G=!1,Y=["x","y"],X=0;X<Y.length;X++){var K,Z,J,Q,ee,te=Y[X],ne=t[te+"ref"]||te,re=t["a"+te+"ref"],ie={x:v,y:b}[te],ae=(R+("x"===te?0:-90))*Math.PI/180,oe=z*Math.cos(ae),se=q*Math.sin(ae),le=Math.abs(oe)+Math.abs(se),ce=t[te+"anchor"],ue=t[te+"shift"]*("x"===te?1:-1),fe=O[te],de=l.getRefType(ne);if(ie&&"domain"!==de){var he=ie.r2fraction(t[te]);(he<0||he>1)&&(re===ne?((he=ie.r2fraction(t["a"+te]))<0||he>1)&&(G=!0):G=!0),K=ie._offset+ie.r2p(t[te]),Q=.5}else{var pe="domain"===de;"x"===te?(J=t[te],K=pe?ie._offset+ie._length*J:K=A.l+A.w*J):(J=1-t[te],K=pe?ie._offset+ie._length*J:K=A.t+A.h*J),Q=t.showarrow?.5:J}if(t.showarrow){fe.head=K;var me=t["a"+te];if(ee=oe*H(.5,t.xanchor)-se*H(.5,t.yanchor),re===ne){var ge=l.getRefType(re);"domain"===ge?("y"===te&&(me=1-me),fe.tail=ie._offset+ie._length*me):"paper"===ge?"y"===te?(me=1-me,fe.tail=A.t+A.h*me):fe.tail=A.l+A.w*me:fe.tail=ie._offset+ie.r2p(me),Z=ee}else fe.tail=K+me,Z=ee+me;fe.text=fe.tail+ee;var ve=w["x"===te?"width":"height"];if("paper"===ne&&(fe.head=o.constrain(fe.head,1,ve-1)),"pixel"===re){var ye=-Math.max(fe.tail-3,fe.text),be=Math.min(fe.tail+3,fe.text)-ve;ye>0?(fe.tail+=ye,fe.text+=ye):be>0&&(fe.tail-=be,fe.text-=be)}fe.tail+=ue,fe.head+=ue}else Z=ee=le*H(Q,ce),fe.text=K+ee;fe.text+=ue,ee+=ue,Z+=ue,t["_"+te+"padplus"]=le/2+Z,t["_"+te+"padminus"]=le/2-Z,t["_"+te+"size"]=le,t["_"+te+"shift"]=ee}if(G)I.remove();else{var xe=0,_e=0;if("left"!==t.align&&(xe=(E-x)*("center"===t.align?.5:1)),"top"!==t.valign&&(_e=(P-_)*("middle"===t.valign?.5:1)),f)r.select("svg").attr({x:j+xe-1,y:j+_e}).call(u.setClipUrl,U?C:null,e);else{var we=j+_e-m.top,Ae=j+xe-m.left;V.call(d.positionText,Ae,we).call(u.setClipUrl,U?C:null,e)}$.select("rect").call(u.setRect,j,j,E,P),B.call(u.setRect,F/2,F/2,z-F,q-F),I.call(u.setTranslate,Math.round(O.x.text-z/2),Math.round(O.y.text-q/2)),L.attr({transform:"rotate("+R+","+O.x.text+","+O.y.text+")"});var ke,Ee=function(n,r){N.selectAll(".annotation-arrow-g").remove();var l=O.x.head,f=O.y.head,d=O.x.tail+n,h=O.y.tail+r,m=O.x.text+n,x=O.y.text+r,_=o.rotationXYMatrix(R,m,x),w=o.apply2DTransform(_),E=o.apply2DTransform2(_),C=+B.attr("width"),D=+B.attr("height"),P=m-.5*C,F=P+C,z=x-.5*D,j=z+D,U=[[P,z,P,j],[P,j,F,j],[F,j,F,z],[F,z,P,z]].map(E);if(!U.reduce((function(e,t){return e^!!o.segmentsIntersect(l,f,l+1e6,f+1e6,t[0],t[1],t[2],t[3])}),!1)){U.forEach((function(e){var t=o.segmentsIntersect(d,h,l,f,e[0],e[1],e[2],e[3]);t&&(d=t.x,h=t.y)}));var $=t.arrowwidth,q=t.arrowcolor,H=t.arrowside,V=N.append("g").style({opacity:c.opacity(q)}).classed("annotation-arrow-g",!0),W=V.append("path").attr("d","M"+d+","+h+"L"+l+","+f).style("stroke-width",$+"px").call(c.stroke,c.rgb(q));if(g(W,H,t),k.annotationPosition&&W.node().parentNode&&!a){var G=l,Y=f;if(t.standoff){var X=Math.sqrt(Math.pow(l-d,2)+Math.pow(f-h,2));G+=t.standoff*(d-l)/X,Y+=t.standoff*(h-f)/X}var K,Z,J=V.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(d-G)+","+(h-Y),transform:s(G,Y)}).style("stroke-width",$+6+"px").call(c.stroke,"rgba(0,0,0,0)").call(c.fill,"rgba(0,0,0,0)");p.init({element:J.node(),gd:e,prepFn:function(){var e=u.getTranslate(I);K=e.x,Z=e.y,v&&v.autorange&&T(v._name+".autorange",!0),b&&b.autorange&&T(b._name+".autorange",!0)},moveFn:function(e,n){var r=w(K,Z),i=r[0]+e,a=r[1]+n;I.call(u.setTranslate,i,a),M("x",y(v,e,"x",A,t)),M("y",y(b,n,"y",A,t)),t.axref===t.xref&&M("ax",y(v,e,"ax",A,t)),t.ayref===t.yref&&M("ay",y(b,n,"ay",A,t)),V.attr("transform",s(e,n)),L.attr({transform:"rotate("+R+","+i+","+a+")"})},doneFn:function(){i.call("_guiRelayout",e,S());var t=document.querySelector(".js-notes-box-panel");t&&t.redraw(t.selectedObj)}})}}};if(t.showarrow&&Ee(0,0),D)p.init({element:I.node(),gd:e,prepFn:function(){ke=L.attr("transform")},moveFn:function(e,n){var r="pointer";if(t.showarrow)t.axref===t.xref?M("ax",y(v,e,"ax",A,t)):M("ax",t.ax+e),t.ayref===t.yref?M("ay",y(b,n,"ay",A.w,t)):M("ay",t.ay+n),Ee(e,n);else{if(a)return;var i,o;if(v)i=y(v,e,"x",A,t);else{var l=t._xsize/A.w,c=t.x+(t._xshift-t.xshift)/A.w-l/2;i=p.align(c+e/A.w,l,0,1,t.xanchor)}if(b)o=y(b,n,"y",A,t);else{var u=t._ysize/A.h,f=t.y-(t._yshift+t.yshift)/A.h-u/2;o=p.align(f-n/A.h,u,0,1,t.yanchor)}M("x",i),M("y",o),v&&b||(r=p.getCursor(v?.5:i,b?.5:o,t.xanchor,t.yanchor))}L.attr({transform:s(e,n)+ke}),h(I,r)},clickFn:function(n,r){t.captureevents&&e.emit("plotly_clickannotation",W(r))},doneFn:function(){h(I),i.call("_guiRelayout",e,S());var t=document.querySelector(".js-notes-box-panel");t&&t.redraw(t.selectedObj)}})}}}e.exports={draw:function(e){var t=e._fullLayout;t._infolayer.selectAll(".annotation").remove();for(var n=0;n<t.annotations.length;n++)t.annotations[n].visible&&v(e,n);return a.previousPromises(e)},drawOne:v,drawRaw:b}},91150:(e,t,n)=>{"use strict";var r=n(93268),i=n(53408),a=n(10259),o=n(56319),s=o.strScale,l=o.strRotate,c=o.strTranslate;e.exports=function(e,t,n){var o,u,f,d,h=e.node(),p=a[n.arrowhead||0],m=a[n.startarrowhead||0],g=(n.arrowwidth||1)*(n.arrowsize||1),v=(n.arrowwidth||1)*(n.startarrowsize||1),y=t.indexOf("start")>=0,b=t.indexOf("end")>=0,x=p.backoff*g+n.standoff,_=m.backoff*v+n.startstandoff;if("line"===h.nodeName){o={x:+e.attr("x1"),y:+e.attr("y1")},u={x:+e.attr("x2"),y:+e.attr("y2")};var w=o.x-u.x,A=o.y-u.y;if(d=(f=Math.atan2(A,w))+Math.PI,x&&_&&x+_>Math.sqrt(w*w+A*A))return void D();if(x){if(x*x>w*w+A*A)return void D();var k=x*Math.cos(f),E=x*Math.sin(f);u.x+=k,u.y+=E,e.attr({x2:u.x,y2:u.y})}if(_){if(_*_>w*w+A*A)return void D();var T=_*Math.cos(f),M=_*Math.sin(f);o.x-=T,o.y-=M,e.attr({x1:o.x,y1:o.y})}}else if("path"===h.nodeName){var S=h.getTotalLength(),C="";if(S<x+_)return void D();var O=h.getPointAtLength(0),R=h.getPointAtLength(.1);f=Math.atan2(O.y-R.y,O.x-R.x),o=h.getPointAtLength(Math.min(_,S)),C="0px,"+_+"px,";var N=h.getPointAtLength(S),L=h.getPointAtLength(S-.1);d=Math.atan2(N.y-L.y,N.x-L.x),u=h.getPointAtLength(Math.max(0,S-x)),C+=S-(C?_+x:x)+"px,"+S+"px",e.style("stroke-dasharray",C)}function D(){e.style("stroke-dasharray","0px,100px")}function P(t,a,o,u){t.path&&(t.noRotate&&(o=0),r.select(h.parentNode).append("path").attr({class:e.attr("class"),d:t.path,transform:c(a.x,a.y)+l(180*o/Math.PI)+s(u)}).style({fill:i.rgb(n.arrowcolor),"stroke-width":0}))}y&&P(m,o,f,v),b&&P(p,u,d,g)}},27353:(e,t,n)=>{"use strict";var r=n(40363),i=n(70381);e.exports={moduleType:"component",name:"annotations",layoutAttributes:n(48244),supplyLayoutDefaults:n(70787),includeBasePlot:n(62740)("annotations"),calcAutorange:n(43091),draw:r.draw,drawOne:r.drawOne,drawRaw:r.drawRaw,hasClickToShow:i.hasClickToShow,onClick:i.onClick,convertCoords:n(87627)}},20273:(e,t,n)=>{"use strict";var r=n(48244),i=n(88500).overrideAll,a=n(65210).templatedArray;e.exports=i(a("annotation",{visible:r.visible,x:{valType:"any",description:["Sets the annotation's x position."].join(" ")},y:{valType:"any",description:["Sets the annotation's y position."].join(" ")},z:{valType:"any",description:["Sets the annotation's z position."].join(" ")},ax:{valType:"number",description:["Sets the x component of the arrow tail about the arrow head (in pixels)."].join(" ")},ay:{valType:"number",description:["Sets the y component of the arrow tail about the arrow head (in pixels)."].join(" ")},xanchor:r.xanchor,xshift:r.xshift,yanchor:r.yanchor,yshift:r.yshift,text:r.text,textangle:r.textangle,font:r.font,width:r.width,height:r.height,opacity:r.opacity,align:r.align,valign:r.valign,bgcolor:r.bgcolor,bordercolor:r.bordercolor,borderpad:r.borderpad,borderwidth:r.borderwidth,showarrow:r.showarrow,arrowcolor:r.arrowcolor,arrowhead:r.arrowhead,startarrowhead:r.startarrowhead,arrowside:r.arrowside,arrowsize:r.arrowsize,startarrowsize:r.startarrowsize,arrowwidth:r.arrowwidth,standoff:r.standoff,startstandoff:r.startstandoff,hovertext:r.hovertext,hoverlabel:r.hoverlabel,captureevents:r.captureevents}),"calc","from-root")},55929:(e,t,n)=>{"use strict";var r=n(56319),i=n(596);function a(e,t){var n=t.fullSceneLayout.domain,a=t.fullLayout._size,o={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};e._xa={},r.extendFlat(e._xa,o),i.setConvert(e._xa),e._xa._offset=a.l+n.x[0]*a.w,e._xa.l2p=function(){return.5*(1+e._pdata[0]/e._pdata[3])*a.w*(n.x[1]-n.x[0])},e._ya={},r.extendFlat(e._ya,o),i.setConvert(e._ya),e._ya._offset=a.t+(1-n.y[1])*a.h,e._ya.l2p=function(){return.5*(1-e._pdata[1]/e._pdata[3])*a.h*(n.y[1]-n.y[0])}}e.exports=function(e){for(var t=e.fullSceneLayout.annotations,n=0;n<t.length;n++)a(t[n],e);e.fullLayout._infolayer.selectAll(".annotation-"+e.id).remove()}},65110:(e,t,n)=>{"use strict";var r=n(56319),i=n(596),a=n(75078),o=n(70529),s=n(20273);function l(e,t,n,a){function l(n,i){return r.coerce(e,t,s,n,i)}function c(e){var r=e+"axis",a={_fullLayout:{}};return a._fullLayout[r]=n[r],i.coercePosition(t,a,l,e,e,.5)}l("visible")&&(o(e,t,a.fullLayout,l),c("x"),c("y"),c("z"),r.noneOrAll(e,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",l("xanchor"),l("yanchor"),l("xshift"),l("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",l("ax",-10),l("ay",-30),r.noneOrAll(e,t,["ax","ay"])))}e.exports=function(e,t,n){a(e,t,{name:"annotations",handleItemDefaults:l,fullLayout:n.fullLayout})}},84538:(e,t,n)=>{"use strict";var r=n(40363).drawRaw,i=n(45248),a=["x","y","z"];e.exports=function(e){for(var t=e.fullSceneLayout,n=e.dataScale,o=t.annotations,s=0;s<o.length;s++){for(var l=o[s],c=!1,u=0;u<3;u++){var f=a[u],d=l[f],h=t[f+"axis"].r2fraction(d);if(h<0||h>1){c=!0;break}}c?e.fullLayout._infolayer.select(".annotation-"+e.id+'[data-index="'+s+'"]').remove():(l._pdata=i(e.glplot.cameraParams,[t.xaxis.r2l(l.x)*n[0],t.yaxis.r2l(l.y)*n[1],t.zaxis.r2l(l.z)*n[2]]),r(e.graphDiv,l,s,e.id,l._xa,l._ya))}}},64002:(e,t,n)=>{"use strict";var r=n(3360),i=n(56319);e.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:n(20273)}}},layoutAttributes:n(20273),handleDefaults:n(65110),includeBasePlot:function(e,t){var n=r.subplotsRegistry.gl3d;if(!n)return;for(var a=n.attrRegex,o=Object.keys(e),s=0;s<o.length;s++){var l=o[s];a.test(l)&&(e[l].annotations||[]).length&&(i.pushUnique(t._basePlotModules,n),i.pushUnique(t._subplots.gl3d,l))}},convert:n(55929),draw:n(84538)}},37811:(e,t)=>{"use strict";t.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],t.defaultLine="#444",t.lightLine="#eee",t.background="#fff",t.borderLine="#BEC8D9",t.lightFraction=1e3/11},53408:(e,t,n)=>{"use strict";var r=n(3707),i=n(5605),a=n(41146).isTypedArray,o=e.exports={},s=n(37811);o.defaults=s.defaults;var l=o.defaultLine=s.defaultLine;o.lightLine=s.lightLine;var c=o.background=s.background;function u(e){if(i(e)||"string"!=typeof e)return e;var t=e.trim();if("rgb"!==t.substr(0,3))return e;var n=t.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return e;var r=n[1].trim().split(/\s*[\s,]\s*/),a="a"===t.charAt(3)&&4===r.length;if(!a&&3!==r.length)return e;for(var o=0;o<r.length;o++){if(!r[o].length)return e;if(r[o]=Number(r[o]),!(r[o]>=0))return e;if(3===o)r[o]>1&&(r[o]=1);else if(r[o]>=1)return e}var s=Math.round(255*r[0])+", "+Math.round(255*r[1])+", "+Math.round(255*r[2]);return a?"rgba("+s+", "+r[3]+")":"rgb("+s+")"}o.tinyRGB=function(e){var t=e.toRgb();return"rgb("+Math.round(t.r)+", "+Math.round(t.g)+", "+Math.round(t.b)+")"},o.rgb=function(e){return o.tinyRGB(r(e))},o.opacity=function(e){return e?r(e).getAlpha():0},o.addOpacity=function(e,t){var n=r(e).toRgb();return"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+t+")"},o.combine=function(e,t){var n=r(e).toRgb();if(1===n.a)return r(e).toRgbString();var i=r(t||c).toRgb(),a=1===i.a?i:{r:255*(1-i.a)+i.r*i.a,g:255*(1-i.a)+i.g*i.a,b:255*(1-i.a)+i.b*i.a},o={r:a.r*(1-n.a)+n.r*n.a,g:a.g*(1-n.a)+n.g*n.a,b:a.b*(1-n.a)+n.b*n.a};return r(o).toRgbString()},o.interpolate=function(e,t,n){var i=r(e).toRgb(),a=r(t).toRgb(),o={r:n*i.r+(1-n)*a.r,g:n*i.g+(1-n)*a.g,b:n*i.b+(1-n)*a.b};return r(o).toRgbString()},o.contrast=function(e,t,n){var i=r(e);return 1!==i.getAlpha()&&(i=r(o.combine(e,c))),(i.isDark()?t?i.lighten(t):c:n?i.darken(n):l).toString()},o.stroke=function(e,t){var n=r(t);e.style({stroke:o.tinyRGB(n),"stroke-opacity":n.getAlpha()})},o.fill=function(e,t){var n=r(t);e.style({fill:o.tinyRGB(n),"fill-opacity":n.getAlpha()})},o.clean=function(e){if(e&&"object"==typeof e){var t,n,r,i,s=Object.keys(e);for(t=0;t<s.length;t++)if(i=e[r=s[t]],"color"===r.substr(r.length-5))if(Array.isArray(i))for(n=0;n<i.length;n++)i[n]=u(i[n]);else e[r]=u(i);else if("colorscale"===r.substr(r.length-10)&&Array.isArray(i))for(n=0;n<i.length;n++)Array.isArray(i[n])&&(i[n][1]=u(i[n][1]));else if(Array.isArray(i)){var l=i[0];if(!Array.isArray(l)&&l&&"object"==typeof l)for(n=0;n<i.length;n++)o.clean(i[n])}else i&&"object"==typeof i&&!a(i)&&o.clean(i)}}},1016:(e,t,n)=>{"use strict";var r=n(31403),i=n(95323),a=n(86395).extendFlat,o=n(88500).overrideAll;e.exports=o({orientation:{valType:"enumerated",values:["h","v"],dflt:"v",description:"Sets the orientation of the colorbar."},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",description:["Determines whether this color bar's thickness","(i.e. the measure in the constant color direction)","is set in units of plot *fraction* or in *pixels*.","Use `thickness` to set the value."].join(" ")},thickness:{valType:"number",min:0,dflt:30,description:["Sets the thickness of the color bar","This measure excludes the size of the padding, ticks and labels."].join(" ")},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction",description:["Determines whether this color bar's length","(i.e. the measure in the color variation direction)","is set in units of plot *fraction* or in *pixels.","Use `len` to set the value."].join(" ")},len:{valType:"number",min:0,dflt:1,description:["Sets the length of the color bar","This measure excludes the padding of both ends.","That is, the color bar length is this length minus the","padding on both ends."].join(" ")},x:{valType:"number",description:["Sets the x position with respect to `xref` of the color bar (in plot fraction).","When `xref` is *paper*, defaults to 1.02 when `orientation` is *v* and","0.5 when `orientation` is *h*.","When `xref` is *container*, defaults to *1* when `orientation` is *v* and","0.5 when `orientation` is *h*.","Must be between *0* and *1* if `xref` is *container*","and between *-2* and *3* if `xref` is *paper*."].join(" ")},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `x` refers to.","*container* spans the entire `width` of the plot.","*paper* refers to the width of the plotting area only."].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],description:["Sets this color bar's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the color bar.","Defaults to *left* when `orientation` is *v* and","*center* when `orientation` is *h*."].join(" ")},xpad:{valType:"number",min:0,dflt:10,description:"Sets the amount of padding (in px) along the x direction."},y:{valType:"number",description:["Sets the y position with respect to `yref` of the color bar (in plot fraction).","When `yref` is *paper*, defaults to 0.5 when `orientation` is *v* and","1.02 when `orientation` is *h*.","When `yref` is *container*, defaults to 0.5 when `orientation` is *v* and","1 when `orientation` is *h*.","Must be between *0* and *1* if `yref` is *container*","and between *-2* and *3* if `yref` is *paper*."].join(" ")},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `y` refers to.","*container* spans the entire `height` of the plot.","*paper* refers to the height of the plotting area only."].join(" ")},yanchor:{valType:"enumerated",values:["top","middle","bottom"],description:["Sets this color bar's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the color bar.","Defaults to *middle* when `orientation` is *v* and","*bottom* when `orientation` is *h*."].join(" ")},ypad:{valType:"number",min:0,dflt:10,description:"Sets the amount of padding (in px) along the y direction."},outlinecolor:r.linecolor,outlinewidth:r.linewidth,bordercolor:r.linecolor,borderwidth:{valType:"number",min:0,dflt:0,description:["Sets the width (in px) or the border enclosing this color bar."].join(" ")},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",description:"Sets the color of padded area."},tickmode:r.minor.tickmode,nticks:r.nticks,tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:a({},r.ticks,{dflt:""}),ticklabeloverflow:a({},r.ticklabeloverflow,{description:["Determines how we handle tick labels that would overflow either the graph div or the domain of the axis.","The default value for inside tick labels is *hide past domain*.","In other cases the default is *hide past div*."].join(" ")}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",description:["Determines where tick labels are drawn relative to the ticks.","Left and right options are used when `orientation` is *h*,","top and bottom when `orientation` is *v*."].join(" ")},ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,ticklabelstep:r.ticklabelstep,showticklabels:r.showticklabels,labelalias:r.labelalias,tickfont:i({description:"Sets the color bar's tick label font"}),tickangle:r.tickangle,tickformat:r.tickformat,tickformatstops:r.tickformatstops,tickprefix:r.tickprefix,showtickprefix:r.showtickprefix,ticksuffix:r.ticksuffix,showticksuffix:r.showticksuffix,separatethousands:r.separatethousands,exponentformat:r.exponentformat,minexponent:r.minexponent,showexponent:r.showexponent,title:{text:{valType:"string",description:["Sets the title of the color bar.","Note that before the existence of `title.text`, the title's","contents used to be defined as the `title` attribute itself.","This behavior has been deprecated."].join(" ")},font:i({description:["Sets this color bar's title font.","Note that the title's font used to be set","by the now deprecated `titlefont` attribute."].join(" ")}),side:{valType:"enumerated",values:["right","top","bottom"],description:["Determines the location of color bar's title","with respect to the color bar.","Defaults to *top* when `orientation` if *v* and ","defaults to *right* when `orientation` if *h*.","Note that the title's location used to be set","by the now deprecated `titleside` attribute."].join(" ")}},_deprecated:{title:{valType:"string",description:["Deprecated in favor of color bar's `title.text`.","Note that value of color bar's `title` is no longer a simple","*string* but a set of sub-attributes."].join(" ")},titlefont:i({description:"Deprecated in favor of color bar's `title.font`."}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top",description:"Deprecated in favor of color bar's `title.side`."}}},"colorbars","from-root")},56220:e=>{"use strict";e.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},45359:(e,t,n)=>{"use strict";var r=n(56319),i=n(65210),a=n(1383),o=n(56087),s=n(90586),l=n(13506),c=n(1016);e.exports=function(e,t,n){var u=i.newContainer(t,"colorbar"),f=e.colorbar||{};function d(e,t){return r.coerce(f,u,c,e,t)}var h=n.margin||{t:0,b:0,l:0,r:0},p=n.width-h.l-h.r,m=n.height-h.t-h.b,g="v"===d("orientation"),v=d("thicknessmode");d("thickness","fraction"===v?30/(g?p:m):30);var y=d("lenmode");d("len","fraction"===y?1:g?m:p);var b,x,_,w="paper"===d("yref"),A="paper"===d("xref"),k="left";g?(_="middle",k=A?"left":"right",b=A?1.02:1,x=.5):(_=w?"bottom":"top",k="center",b=.5,x=w?1.02:1),r.coerce(f,u,{x:{valType:"number",min:A?-2:0,max:A?3:1,dflt:b}},"x"),r.coerce(f,u,{y:{valType:"number",min:w?-2:0,max:w?3:1,dflt:x}},"y"),d("xanchor",k),d("xpad"),d("yanchor",_),d("ypad"),r.noneOrAll(f,u,["x","y"]),d("outlinecolor"),d("outlinewidth"),d("bordercolor"),d("borderwidth"),d("bgcolor");var E=r.coerce(f,u,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:g?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");d("ticklabeloverflow",-1!==E.indexOf("inside")?"hide past domain":"hide past div"),a(f,u,d,"linear");var T=n.font,M={noAutotickangles:!0,noTicklabelshift:!0,noTicklabelstandoff:!0,outerTicks:!1,font:T};-1!==E.indexOf("inside")&&(M.bgColor="black"),l(f,u,d,"linear",M),s(f,u,d,"linear",M),o(f,u,d,"linear",M),d("title.text",n._dfltTitle.colorbar);var S=u.showticklabels?u.tickfont:T,C=r.extendFlat({},T,{family:S.family,size:r.bigFont(S.size)});r.coerceFont(d,"title.font",C),d("title.side",g?"top":"right")}},47863:(e,t,n)=>{"use strict";var r=n(93268),i=n(3707),a=n(31496),o=n(3360),s=n(596),l=n(85605),c=n(56319),u=c.strTranslate,f=n(86395).extendFlat,d=n(47281),h=n(14797),p=n(53408),m=n(74770),g=n(56953),v=n(96175).flipScale,y=n(10849),b=n(6835),x=n(31403),_=n(12564),w=_.LINE_SPACING,A=_.FROM_TL,k=_.FROM_BR,E=n(56220).cn;e.exports={draw:function(e){var t=e._fullLayout._infolayer.selectAll("g."+E.colorbar).data(function(e){var t,n,r,i,a=e._fullLayout,o=e.calcdata,s=[];function l(e){return f(e,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function c(){"function"==typeof i.calc?i.calc(e,r,t):(t._fillgradient=n.reversescale?v(n.colorscale):n.colorscale,t._zrange=[n[i.min],n[i.max]])}for(var u=0;u<o.length;u++){var d=o[u];if((r=d[0].trace)._module){var h=r._module.colorbar;if(!0===r.visible&&h)for(var p=Array.isArray(h),m=p?h:[h],g=0;g<m.length;g++){var y=(i=m[g]).container;(n=y?r[y]:r)&&n.showscale&&((t=l(n.colorbar))._id="cb"+r.uid+(p&&y?"-"+y:""),t._traceIndex=r.index,t._propPrefix=(y?y+".":"")+"colorbar.",t._meta=r._meta,c(),s.push(t))}}}for(var b in a._colorAxes)if((n=a[b]).showscale){var x=a._colorAxes[b];(t=l(n.colorbar))._id="cb"+b,t._propPrefix=b+".colorbar.",t._meta=a._meta,i={min:"cmin",max:"cmax"},"heatmap"!==x[0]&&(r=x[1],i.calc=r._module.colorbar.calc),c(),s.push(t)}return s}(e),(function(e){return e._id}));t.enter().append("g").attr("class",(function(e){return e._id})).classed(E.colorbar,!0),t.each((function(t){var n=r.select(this);c.ensureSingle(n,"rect",E.cbbg),c.ensureSingle(n,"g",E.cbfills),c.ensureSingle(n,"g",E.cblines),c.ensureSingle(n,"g",E.cbaxis,(function(e){e.classed(E.crisp,!0)})),c.ensureSingle(n,"g",E.cbtitleunshift,(function(e){e.append("g").classed(E.cbtitle,!0)})),c.ensureSingle(n,"rect",E.cboutline);var v=function(e,t,n){var o="v"===t.orientation,l=t.len,d=t.lenmode,v=t.thickness,_=t.thicknessmode,T=t.outlinewidth,M=t.borderwidth,S=t.bgcolor,C=t.xanchor,O=t.yanchor,R=t.xpad,N=t.ypad,L=t.x,D=o?t.y:1-t.y,P="paper"===t.yref,I="paper"===t.xref,F=n._fullLayout,z=F._size,j=t._fillcolor,B=t._line,U=t.title,$=U.side,q=t._zrange||r.extent(("function"==typeof j?j:B.color).domain()),H="function"==typeof B.color?B.color:function(){return B.color},V="function"==typeof j?j:function(){return j},W=t._levels,G=function(e,t,n){var r,i,a=t._levels,o=[],s=[],l=a.end+a.size/100,c=a.size,u=1.001*n[0]-.001*n[1],f=1.001*n[1]-.001*n[0];for(i=0;i<1e5&&(r=a.start+i*c,!(c>0?r>=l:r<=l));i++)r>u&&r<f&&o.push(r);if(t._fillgradient)s=[0];else if("function"==typeof t._fillcolor){var d=t._filllevels;if(d)for(l=d.end+d.size/100,c=d.size,i=0;i<1e5&&(r=d.start+i*c,!(c>0?r>=l:r<=l));i++)r>n[0]&&r<n[1]&&s.push(r);else(s=o.map((function(e){return e-a.size/2}))).push(s[s.length-1]+a.size)}else t._fillcolor&&"string"==typeof t._fillcolor&&(s=[0]);a.size<0&&(o.reverse(),s.reverse());return{line:o,fill:s}}(0,t,q),Y=G.fill,X=G.line,K=Math.round(v*("fraction"===_?o?z.w:z.h:1)),Z=K/(o?z.w:z.h),J=Math.round(l*("fraction"===d?o?z.h:z.w:1)),Q=J/(o?z.h:z.w),ee=I?z.w:n._fullLayout.width,te=P?z.h:n._fullLayout.height,ne=Math.round(o?L*ee+R:D*te+N),re={center:.5,right:1}[C]||0,ie={top:1,middle:.5}[O]||0,ae=o?L-re*Z:D-ie*Z,oe=o?D-ie*Q:L-re*Q,se=Math.round(o?te*(1-oe):ee*oe);t._lenFrac=Q,t._thickFrac=Z,t._uFrac=ae,t._vFrac=oe;var le=t._axis=function(e,t,n){var r=e._fullLayout,i="v"===t.orientation,a={type:"linear",range:n,tickmode:t.tickmode,nticks:t.nticks,tick0:t.tick0,dtick:t.dtick,tickvals:t.tickvals,ticktext:t.ticktext,ticks:t.ticks,ticklen:t.ticklen,tickwidth:t.tickwidth,tickcolor:t.tickcolor,showticklabels:t.showticklabels,labelalias:t.labelalias,ticklabelposition:t.ticklabelposition,ticklabeloverflow:t.ticklabeloverflow,ticklabelstep:t.ticklabelstep,tickfont:t.tickfont,tickangle:t.tickangle,tickformat:t.tickformat,exponentformat:t.exponentformat,minexponent:t.minexponent,separatethousands:t.separatethousands,showexponent:t.showexponent,showtickprefix:t.showtickprefix,tickprefix:t.tickprefix,showticksuffix:t.showticksuffix,ticksuffix:t.ticksuffix,title:t.title,showline:!0,anchor:"free",side:i?"right":"bottom",position:1},o=i?"y":"x",s={type:"linear",_id:o+t._id},l={letter:o,font:r.font,noAutotickangles:"y"===o,noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:r.calendar};function u(e,t){return c.coerce(a,s,x,e,t)}return y(a,s,u,l,r),b(a,s,u,l),s}(n,t,q);le.position=Z+(o?L+R/z.w:D+N/z.h);var ce=-1!==["top","bottom"].indexOf($);o&&ce&&(le.title.side=$,le.titlex=L+R/z.w,le.titley=oe+("top"===U.side?Q-N/z.h:N/z.h));o||ce||(le.title.side=$,le.titley=D+N/z.h,le.titlex=oe+R/z.w);if(B.color&&"auto"===t.tickmode){le.tickmode="linear",le.tick0=W.start;var ue=W.size,fe=c.constrain(J/50,4,15)+1,de=(q[1]-q[0])/((t.nticks||fe)*ue);if(de>1){var he=Math.pow(10,Math.floor(Math.log(de)/Math.LN10));ue*=he*c.roundUp(de/he,[2,5,10]),(Math.abs(W.start)/W.size+1e-6)%1<2e-6&&(le.tick0=0)}le.dtick=ue}le.domain=o?[oe+N/z.h,oe+Q-N/z.h]:[oe+R/z.w,oe+Q-R/z.w],le.setScale(),e.attr("transform",u(Math.round(z.l),Math.round(z.t)));var pe,me=e.select("."+E.cbtitleunshift).attr("transform",u(-Math.round(z.l),-Math.round(z.t))),ge=le.ticklabelposition,ve=le.title.font.size,ye=e.select("."+E.cbaxis),be=0,xe=0;function _e(r,i){var a={propContainer:le,propName:t._propPrefix+"title",traceIndex:t._traceIndex,_meta:t._meta,placeholder:F._dfltTitle.colorbar,containerGroup:e.select("."+E.cbtitle)},o="h"===r.charAt(0)?r.substr(1):"h"+r;e.selectAll("."+o+",."+o+"-math-group").remove(),m.draw(n,r,f(a,i||{}))}function we(){var e,t;(o&&ce||!o&&!ce)&&("top"===$&&(e=R+z.l+ee*L,t=N+z.t+te*(1-oe-Q)+3+.75*ve),"bottom"===$&&(e=R+z.l+ee*L,t=N+z.t+te*(1-oe)-3-.25*ve),"right"===$&&(t=N+z.t+te*D+3+.75*ve,e=R+z.l+ee*oe),_e(le._id+"title",{attributes:{x:e,y:t,"text-anchor":o?"start":"middle"}}))}function Ae(){if(o&&!ce||!o&&ce){var e,i,a=le.position||0,s=le._offset+le._length/2;if("right"===$)i=s,e=z.l+ee*a+10+ve*(le.showticklabels?1:.5);else if(e=s,"bottom"===$&&(i=z.t+te*a+10+(-1===ge.indexOf("inside")?le.tickfont.size:0)+("intside"!==le.ticks&&t.ticklen||0)),"top"===$){var l=U.text.split("<br>").length;i=z.t+te*a+10-K-w*ve*l}_e((o?"h":"v")+le._id+"title",{avoid:{selection:r.select(n).selectAll("g."+le._id+"tick"),side:$,offsetTop:o?0:z.t,offsetLeft:o?z.l:0,maxShift:o?F.width:F.height},attributes:{x:e,y:i,"text-anchor":"middle"},transform:{rotate:o?-90:0,offset:0}})}}function ke(){if(!o&&!ce||o&&ce){var a,l=e.select("."+E.cbtitle),f=l.select("text"),d=[-T/2,T/2],p=l.select(".h"+le._id+"title-math-group").node(),m=15.6;if(f.node()&&(m=parseInt(f.node().style.fontSize,10)*w),p?(a=h.bBox(p),xe=a.width,(be=a.height)>m&&(d[1]-=(be-m)/2)):f.node()&&!f.classed(E.jsPlaceholder)&&(a=h.bBox(f.node()),xe=a.width,be=a.height),o){if(be){if(be+=5,"top"===$)le.domain[1]-=be/z.h,d[1]*=-1;else{le.domain[0]+=be/z.h;var v=g.lineCount(f);d[1]+=(1-v)*m}l.attr("transform",u(d[0],d[1])),le.setScale()}}else xe&&("right"===$&&(le.domain[0]+=(xe+ve/2)/z.w),l.attr("transform",u(d[0],d[1])),le.setScale())}e.selectAll("."+E.cbfills+",."+E.cblines).attr("transform",o?u(0,Math.round(z.h*(1-le.domain[1]))):u(Math.round(z.w*le.domain[0]),0)),ye.attr("transform",o?u(0,Math.round(-z.t)):u(Math.round(-z.l),0));var y=e.select("."+E.cbfills).selectAll("rect."+E.cbfill).attr("style","").data(Y);y.enter().append("rect").classed(E.cbfill,!0).attr("style",""),y.exit().remove();var b=q.map(le.c2p).map(Math.round).sort((function(e,t){return e-t}));y.each((function(e,a){var s=[0===a?q[0]:(Y[a]+Y[a-1])/2,a===Y.length-1?q[1]:(Y[a]+Y[a+1])/2].map(le.c2p).map(Math.round);o&&(s[1]=c.constrain(s[1]+(s[1]>s[0])?1:-1,b[0],b[1]));var l=r.select(this).attr(o?"x":"y",ne).attr(o?"y":"x",r.min(s)).attr(o?"width":"height",Math.max(K,2)).attr(o?"height":"width",Math.max(r.max(s)-r.min(s),2));if(t._fillgradient)h.gradient(l,n,t._id,o?"vertical":"horizontalreversed",t._fillgradient,"fill");else{var u=V(e).replace("e-","");l.attr("fill",i(u).toHexString())}}));var x=e.select("."+E.cblines).selectAll("path."+E.cbline).data(B.color&&B.width?X:[]);x.enter().append("path").classed(E.cbline,!0),x.exit().remove(),x.each((function(e){var t=ne,n=Math.round(le.c2p(e))+B.width/2%1;r.select(this).attr("d","M"+(o?t+","+n:n+","+t)+(o?"h":"v")+K).call(h.lineGroupStyle,B.width,H(e),B.dash)})),ye.selectAll("g."+le._id+"tick,path").remove();var _=ne+K+(T||0)/2-("outside"===t.ticks?1:0),A=s.calcTicks(le),k=s.getTickSigns(le)[2];return s.drawTicks(n,le,{vals:"inside"===le.ticks?s.clipEnds(le,A):A,layer:ye,path:s.makeTickPath(le,_,k),transFn:s.makeTransTickFn(le)}),s.drawLabels(n,le,{vals:A,layer:ye,transFn:s.makeTransTickLabelFn(le),labelFns:s.makeLabelFns(le,_)})}function Ee(){var r,s=K+T/2;-1===ge.indexOf("inside")&&(r=h.bBox(ye.node()),s+=o?r.width:r.height),pe=me.select("text");var c=0,f=o&&"top"===$,m=!o&&"right"===$,g=0;if(pe.node()&&!pe.classed(E.jsPlaceholder)){var y,b=me.select(".h"+le._id+"title-math-group").node();b&&(o&&ce||!o&&!ce)?(c=(r=h.bBox(b)).width,y=r.height):(c=(r=h.bBox(me.node())).right-z.l-(o?ne:se),y=r.bottom-z.t-(o?se:ne),o||"top"!==$||(s+=r.height,g=r.height)),m&&(pe.attr("transform",u(c/2+ve/2,0)),c*=2),s=Math.max(s,o?c:y)}var x=2*(o?R:N)+s+M+T/2,w=0;!o&&U.text&&"bottom"===O&&D<=0&&(x+=w=x/2,g+=w),F._hColorbarMoveTitle=w,F._hColorbarMoveCBTitle=g;var j=M+T,B=(o?ne:se)-j/2-(o?R:0),q=(o?se:ne)-(o?J:N+g-w);e.select("."+E.cbbg).attr("x",B).attr("y",q).attr(o?"width":"height",Math.max(x-w,2)).attr(o?"height":"width",Math.max(J+j,2)).call(p.fill,S).call(p.stroke,t.bordercolor).style("stroke-width",M);var H=m?Math.max(c-10,0):0;e.selectAll("."+E.cboutline).attr("x",(o?ne:se+R)+H).attr("y",(o?se+N-J:ne)+(f?be:0)).attr(o?"width":"height",Math.max(K,2)).attr(o?"height":"width",Math.max(J-(o?2*N+be:2*R+H),2)).call(p.stroke,t.outlinecolor).style({fill:"none","stroke-width":T});var V=o?re*x:0,W=o?0:(1-ie)*x-g;if(V=I?z.l-V:-V,W=P?z.t-W:-W,e.attr("transform",u(V,W)),!o&&(M||i(S).getAlpha()&&!i.equals(F.paper_bgcolor,S))){var G=ye.selectAll("text"),Y=G[0].length,X=e.select("."+E.cbbg).node(),Z=h.bBox(X),Q=h.getTranslate(e),ee=2;G.each((function(e,t){var n=0,r=Y-1;if(t===n||t===r){var i,a=h.bBox(this),o=h.getTranslate(this);if(t===r){var s=a.right+o.x;(i=Z.right+Q.x+se-M-ee+L-s)>0&&(i=0)}else if(t===n){var l=a.left+o.x;(i=Z.left+Q.x+se+M+ee-l)<0&&(i=0)}i&&(Y<3?this.setAttribute("transform","translate("+i+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}}))}var te={},ae=A[C],oe=k[C],ue=A[O],fe=k[O],de=x-K;o?("pixels"===d?(te.y=D,te.t=J*ue,te.b=J*fe):(te.t=te.b=0,te.yt=D+l*ue,te.yb=D-l*fe),"pixels"===_?(te.x=L,te.l=x*ae,te.r=x*oe):(te.l=de*ae,te.r=de*oe,te.xl=L-v*ae,te.xr=L+v*oe)):("pixels"===d?(te.x=L,te.l=J*ae,te.r=J*oe):(te.l=te.r=0,te.xl=L+l*ae,te.xr=L-l*oe),"pixels"===_?(te.y=1-D,te.t=x*ue,te.b=x*fe):(te.t=de*ue,te.b=de*fe,te.yt=D-v*ue,te.yb=D+v*fe));var he=t.y<.5?"b":"t",xe=t.x<.5?"l":"r";n._fullLayout._reservedMargin[t._id]={};var _e={r:F.width-B-V,l:B+te.r,b:F.height-q-W,t:q+te.b};I&&P?a.autoMargin(n,t._id,te):I?n._fullLayout._reservedMargin[t._id][he]=_e[he]:P||o?n._fullLayout._reservedMargin[t._id][xe]=_e[xe]:n._fullLayout._reservedMargin[t._id][he]=_e[he]}return c.syncOrAsync([a.previousPromises,we,ke,Ae,a.previousPromises,Ee],n)}(n,t,e);v&&v.then&&(e._promises||[]).push(v),e._context.edits.colorbarPosition&&function(e,t,n){var r,i,a,s="v"===t.orientation,c=n._fullLayout,f=c._size;l.init({element:e.node(),gd:n,prepFn:function(){r=e.attr("transform"),d(e)},moveFn:function(n,o){e.attr("transform",r+u(n,o)),i=l.align((s?t._uFrac:t._vFrac)+n/f.w,s?t._thickFrac:t._lenFrac,0,1,t.xanchor),a=l.align((s?t._vFrac:1-t._uFrac)-o/f.h,s?t._lenFrac:t._thickFrac,0,1,t.yanchor);var c=l.getCursor(i,a,t.xanchor,t.yanchor);d(e,c)},doneFn:function(){if(d(e),void 0!==i&&void 0!==a){var r={};r[t._propPrefix+"x"]=i,r[t._propPrefix+"y"]=a,void 0!==t._traceIndex?o.call("_guiRestyle",n,r,t._traceIndex):o.call("_guiRelayout",n,r)}}})}(n,t,e)})),t.exit().each((function(t){a.autoMargin(e,t._id)})).remove(),t.order()}}},60744:(e,t,n)=>{"use strict";var r=n(56319);e.exports=function(e){return r.isPlainObject(e.colorbar)}},82533:(e,t,n)=>{"use strict";e.exports={moduleType:"component",name:"colorbar",attributes:n(1016),supplyDefaults:n(45359),draw:n(47863).draw,hasColorbar:n(60744)}},50549:(e,t,n)=>{"use strict";var r=n(1016),i=n(11800).counter,a=n(35428),o=n(51331).scales,s=a(o);function l(e){return"`"+e+"`"}e.exports=function(e,t){e=e||"";var n,a,c=(t=t||{}).cLetter||"c",u="onlyIfNumerical"in t?t.onlyIfNumerical:Boolean(e),f="noScale"in t?t.noScale:"marker.line"===e,d="showScaleDflt"in t?t.showScaleDflt:"z"===c,h="string"==typeof t.colorscaleDflt?o[t.colorscaleDflt]:null,p=t.editTypeOverride||"",m=e?e+".":"";"colorAttr"in t?(n=t.colorAttr,a=t.colorAttr):a="in "+l(m+(n={z:"z",c:"color"}[c]));var g=u?" Has an effect only if "+a+" is set to a numerical array.":"",v=c+"auto",y=c+"min",b=c+"max",x=c+"mid",_=l(m+v),w=l(m+y),A=l(m+b),k=w+" and "+A,E={};E[y]=E[b]=void 0;var T={};T[v]=!1;var M={};return"color"===n&&(M.color={valType:"color",arrayOk:!0,editType:p||"style",description:["Sets the",e,"color.","It accepts either a specific color","or an array of numbers that are mapped to the colorscale","relative to the max and min values of the array or relative to",k,"if set."].join(" ")},t.anim&&(M.color.anim=!0)),M[v]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:E,description:["Determines whether or not the color domain is computed","with respect to the input data (here "+a+") or the bounds set in",k+g,"Defaults to `false` when",k,"are set by the user."].join(" ")},M[y]={valType:"number",dflt:null,editType:p||"plot",impliedEdits:T,description:["Sets the lower bound of the color domain."+g,"Value should have the same units as",a,"and if set,",A,"must be set as well."].join(" ")},M[b]={valType:"number",dflt:null,editType:p||"plot",impliedEdits:T,description:["Sets the upper bound of the color domain."+g,"Value should have the same units as",a,"and if set,",w,"must be set as well."].join(" ")},M[x]={valType:"number",dflt:null,editType:"calc",impliedEdits:E,description:["Sets the mid-point of the color domain by scaling",w,"and/or",A,"to be equidistant to this point."+g,"Value should have the same units as",a+".","Has no effect when",_,"is `false`."].join(" ")},M.colorscale={valType:"colorscale",editType:"calc",dflt:h,impliedEdits:{autocolorscale:!1},description:["Sets the colorscale."+g,"The colorscale must be an array containing","arrays mapping a normalized value to an","rgb, rgba, hex, hsl, hsv, or named color string.","At minimum, a mapping for the lowest (0) and highest (1)","values are required. For example,","`[[0, 'rgb(0,0,255)'], [1, 'rgb(255,0,0)']]`.","To control the bounds of the colorscale in color space,","use",k+".","Alternatively, `colorscale` may be a palette name string","of the following list: "+s+"."].join(" ")},M.autocolorscale={valType:"boolean",dflt:!1!==t.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0},description:["Determines whether the colorscale is a default palette (`autocolorscale: true`)","or the palette determined by",l(m+"colorscale")+"."+g,"In case `colorscale` is unspecified or `autocolorscale` is true, the default","palette will be chosen according to whether numbers in the `color` array are","all positive, all negative or mixed."].join(" ")},M.reversescale={valType:"boolean",dflt:!1,editType:"plot",description:["Reverses the color mapping if true."+g,"If true,",w,"will correspond to the last color","in the array and",A,"will correspond to the first color."].join(" ")},f||(M.showscale={valType:"boolean",dflt:d,editType:"calc",description:["Determines whether or not a colorbar is displayed for this trace."+g].join(" ")},M.colorbar=r),t.noColorAxis||(M.coloraxis={valType:"subplotid",regex:i("coloraxis"),dflt:null,editType:"calc",description:["Sets a reference to a shared color axis.","References to these shared color axes are *coloraxis*, *coloraxis2*, *coloraxis3*, etc.","Settings for these shared color axes are set in the layout, under","`layout.coloraxis`, `layout.coloraxis2`, etc.","Note that multiple color scales can be linked to the same color axis."].join(" ")}),M}},57737:(e,t,n)=>{"use strict";var r=n(5605),i=n(56319),a=n(96175).extractOpts;e.exports=function(e,t,n){var o,s=e._fullLayout,l=n.vals,c=n.containerStr,u=c?i.nestedProperty(t,c).get():t,f=a(u),d=!1!==f.auto,h=f.min,p=f.max,m=f.mid,g=function(){return i.aggNums(Math.min,null,l)},v=function(){return i.aggNums(Math.max,null,l)};(void 0===h?h=g():d&&(h=u._colorAx&&r(h)?Math.min(h,g()):g()),void 0===p?p=v():d&&(p=u._colorAx&&r(p)?Math.max(p,v()):v()),d&&void 0!==m&&(p-m>m-h?h=m-(p-m):p-m<m-h&&(p=m+(m-h))),h===p&&(h-=.5,p+=.5),f._sync("min",h),f._sync("max",p),f.autocolorscale)&&(o=h*p<0?s.colorscale.diverging:h>=0?s.colorscale.sequential:s.colorscale.sequentialminus,f._sync("colorscale",o))}},18865:(e,t,n)=>{"use strict";var r=n(56319),i=n(96175).hasColorscale,a=n(96175).extractOpts;e.exports=function(e,t){function n(e,t){var n=e["_"+t];void 0!==n&&(e[t]=n)}function o(e,i){var o=i.container?r.nestedProperty(e,i.container).get():e;if(o)if(o.coloraxis)o._colorAx=t[o.coloraxis];else{var s=a(o),l=s.auto;(l||void 0===s.min)&&n(o,i.min),(l||void 0===s.max)&&n(o,i.max),s.autocolorscale&&n(o,"colorscale")}}for(var s=0;s<e.length;s++){var l=e[s],c=l._module.colorbar;if(c)if(Array.isArray(c))for(var u=0;u<c.length;u++)o(l,c[u]);else o(l,c);i(l,"marker.line")&&o(l,{container:"marker.line",min:"cmin",max:"cmax"})}for(var f in t._colorAxes)o(t[f],{min:"cmin",max:"cmax"})}},14530:(e,t,n)=>{"use strict";var r=n(5605),i=n(56319),a=n(60744),o=n(45359),s=n(51331).isValid,l=n(3360).traceIs;function c(e,t){var n=t.slice(0,t.length-1);return t?i.nestedProperty(e,n).get()||{}:e}e.exports=function e(t,n,u,f,d){var h=d.prefix,p=d.cLetter,m="_module"in n,g=c(t,h),v=c(n,h),y=c(n._template||{},h)||{},b=function(){return delete t.coloraxis,delete n.coloraxis,e(t,n,u,f,d)};if(m){var x=u._colorAxes||{},_=f(h+"coloraxis");if(_){var w=l(n,"contour")&&i.nestedProperty(n,"contours.coloring").get()||"heatmap",A=x[_];return void(A?(A[2].push(b),A[0]!==w&&(A[0]=!1,i.warn(["Ignoring coloraxis:",_,"setting","as it is linked to incompatible colorscales."].join(" ")))):x[_]=[w,n,[b]])}}var k=g[p+"min"],E=g[p+"max"],T=r(k)&&r(E)&&k<E;f(h+p+"auto",!T)?f(h+p+"mid"):(f(h+p+"min"),f(h+p+"max"));var M,S,C=g.colorscale,O=y.colorscale;(void 0!==C&&(M=!s(C)),void 0!==O&&(M=!s(O)),f(h+"autocolorscale",M),f(h+"colorscale"),f(h+"reversescale"),"marker.line."!==h)&&(h&&m&&(S=a(g)),f(h+"showscale",S)&&(h&&y&&(v._template=y),o(g,v,u)))}},96175:(e,t,n)=>{"use strict";var r=n(93268),i=n(3707),a=n(5605),o=n(56319),s=n(53408),l=n(51331).isValid;var c=["showscale","autocolorscale","colorscale","reversescale","colorbar"],u=["min","max","mid","auto"];function f(e){var t,n,r,i=e._colorAx,a=i||e,o={};for(n=0;n<c.length;n++)o[r=c[n]]=a[r];if(i)for(t="c",n=0;n<u.length;n++)o[r=u[n]]=a["c"+r];else{var s;for(n=0;n<u.length;n++)((s="c"+(r=u[n]))in a||(s="z"+r)in a)&&(o[r]=a[s]);t=s.charAt(0)}return o._sync=function(e,n){var r=-1!==u.indexOf(e)?t+e:e;a[r]=a["_"+r]=n},o}function d(e){for(var t=f(e),n=t.min,r=t.max,i=t.reversescale?h(t.colorscale):t.colorscale,a=i.length,o=new Array(a),s=new Array(a),l=0;l<a;l++){var c=i[l];o[l]=n+c[0]*(r-n),s[l]=c[1]}return{domain:o,range:s}}function h(e){for(var t=e.length,n=new Array(t),r=t-1,i=0;r>=0;r--,i++){var a=e[r];n[i]=[1-a[0],a[1]]}return n}function p(e,t){t=t||{};for(var n=e.domain,o=e.range,l=o.length,c=new Array(l),u=0;u<l;u++){var f=i(o[u]).toRgb();c[u]=[f.r,f.g,f.b,f.a]}var d,h=r.scale.linear().domain(n).range(c).clamp(!0),p=t.noNumericCheck,g=t.returnArray;return(d=p&&g?h:p?function(e){return m(h(e))}:g?function(e){return a(e)?h(e):i(e).isValid()?e:s.defaultLine}:function(e){return a(e)?m(h(e)):i(e).isValid()?e:s.defaultLine}).domain=h.domain,d.range=function(){return o},d}function m(e){var t={r:e[0],g:e[1],b:e[2],a:e[3]};return i(t).toRgbString()}e.exports={hasColorscale:function(e,t,n){var r=t?o.nestedProperty(e,t).get()||{}:e,i=r[n||"color"];i&&i._inputArray&&(i=i._inputArray);var s=!1;if(o.isArrayOrTypedArray(i))for(var c=0;c<i.length;c++)if(a(i[c])){s=!0;break}return o.isPlainObject(r)&&(s||!0===r.showscale||a(r.cmin)&&a(r.cmax)||l(r.colorscale)||o.isPlainObject(r.colorbar))},extractOpts:f,extractScale:d,flipScale:h,makeColorScaleFunc:p,makeColorScaleFuncFromTrace:function(e,t){return p(d(e),t)}}},74062:(e,t,n)=>{"use strict";var r=n(51331),i=n(96175);e.exports={moduleType:"component",name:"colorscale",attributes:n(50549),layoutAttributes:n(10656),supplyLayoutDefaults:n(16535),handleDefaults:n(14530),crossTraceDefaults:n(18865),calc:n(57737),scales:r.scales,defaultScale:r.defaultScale,getScale:r.get,isValidScale:r.isValid,hasColorscale:i.hasColorscale,extractOpts:i.extractOpts,extractScale:i.extractScale,flipScale:i.flipScale,makeColorScaleFunc:i.makeColorScaleFunc,makeColorScaleFuncFromTrace:i.makeColorScaleFuncFromTrace}},10656:(e,t,n)=>{"use strict";var r=n(86395).extendFlat,i=n(50549),a=n(51331).scales,o="Note that `autocolorscale` must be true for this attribute to work.";e.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:a.Reds,editType:"calc",description:["Sets the default sequential colorscale for positive values.",o].join(" ")},sequentialminus:{valType:"colorscale",dflt:a.Blues,editType:"calc",description:["Sets the default sequential colorscale for negative values.",o].join(" ")},diverging:{valType:"colorscale",dflt:a.RdBu,editType:"calc",description:["Sets the default diverging colorscale.",o].join(" ")}},coloraxis:r({_isSubplotObj:!0,editType:"calc",description:[""].join(" ")},i("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},16535:(e,t,n)=>{"use strict";var r=n(56319),i=n(65210),a=n(10656),o=n(14530);e.exports=function(e,t){function n(n,i){return r.coerce(e,t,a,n,i)}n("colorscale.sequential"),n("colorscale.sequentialminus"),n("colorscale.diverging");var s,l,c=t._colorAxes;function u(e,t){return r.coerce(s,l,a.coloraxis,e,t)}for(var f in c){var d=c[f];if(d[0])s=e[f]||{},(l=i.newContainer(t,f,"coloraxis"))._name=f,o(s,l,t,u,{prefix:"",cLetter:"c"});else{for(var h=0;h<d[2].length;h++)d[2][h]();delete t._colorAxes[f]}}}},51331:(e,t,n)=>{"use strict";var r=n(3707),i={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},a=i.RdBu;function o(e){var t=0;if(!Array.isArray(e)||e.length<2)return!1;if(!e[0]||!e[e.length-1])return!1;if(0!=+e[0][0]||1!=+e[e.length-1][0])return!1;for(var n=0;n<e.length;n++){var i=e[n];if(2!==i.length||+i[0]<t||!r(i[1]).isValid())return!1;t=+i[0]}return!0}e.exports={scales:i,defaultScale:a,get:function(e,t){if(t||(t=a),!e)return t;function n(){try{e=i[e]||JSON.parse(e)}catch(n){e=t}}return"string"==typeof e&&(n(),"string"==typeof e&&n()),o(e)?e:t},isValid:function(e){return void 0!==i[e]||o(e)}}},18508:e=>{"use strict";e.exports=function(e,t,n,r,i){var a=(e-n)/(r-n),o=a+t/(r-n),s=(a+o)/2;return"left"===i||"bottom"===i?a:"center"===i||"middle"===i?s:"right"===i||"top"===i?o:a<2/3-s?a:o>4/3-s?o:s}},21763:(e,t,n)=>{"use strict";var r=n(56319),i=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];e.exports=function(e,t,n,a){return e="left"===n?0:"center"===n?1:"right"===n?2:r.constrain(Math.floor(3*e),0,2),t="bottom"===a?0:"middle"===a?1:"top"===a?2:r.constrain(Math.floor(3*t),0,2),i[t][e]}},89232:(e,t)=>{"use strict";t.selectMode=function(e){return"lasso"===e||"select"===e},t.drawMode=function(e){return"drawclosedpath"===e||"drawopenpath"===e||"drawline"===e||"drawrect"===e||"drawcircle"===e},t.openMode=function(e){return"drawline"===e||"drawopenpath"===e},t.rectMode=function(e){return"select"===e||"drawline"===e||"drawrect"===e||"drawcircle"===e},t.freeMode=function(e){return"lasso"===e||"drawclosedpath"===e||"drawopenpath"===e},t.selectingOrDrawing=function(e){return t.freeMode(e)||t.rectMode(e)}},85605:(e,t,n)=>{"use strict";var r=n(84179),i=n(48684),a=n(80959),o=n(56319).removeElement,s=n(56596),l=e.exports={};l.align=n(18508),l.getCursor=n(21763);var c=n(18134);function u(){var e=document.createElement("div");e.className="dragcover";var t=e.style;return t.position="fixed",t.left=0,t.right=0,t.top=0,t.bottom=0,t.zIndex=999999999,t.background="none",document.body.appendChild(e),e}function f(e){return r(e.changedTouches?e.changedTouches[0]:e,document.body)}l.unhover=c.wrapped,l.unhoverRaw=c.raw,l.init=function(e){var t,n,r,c,d,h,p,m,g=e.gd,v=1,y=g._context.doubleClickDelay,b=e.element;g._mouseDownTime||(g._mouseDownTime=0),b.style.pointerEvents="all",b.onmousedown=_,a?(b._ontouchstart&&b.removeEventListener("touchstart",b._ontouchstart),b._ontouchstart=_,b.addEventListener("touchstart",_,{passive:!1})):b.ontouchstart=_;var x=e.clampFn||function(e,t,n){return Math.abs(e)<n&&(e=0),Math.abs(t)<n&&(t=0),[e,t]};function _(a){g._dragged=!1,g._dragging=!0;var o=f(a);t=o[0],n=o[1],p=a.target,h=a,m=2===a.buttons||a.ctrlKey,void 0===a.clientX&&void 0===a.clientY&&(a.clientX=t,a.clientY=n),(r=(new Date).getTime())-g._mouseDownTime<y?v+=1:(v=1,g._mouseDownTime=r),e.prepFn&&e.prepFn(a,t,n),i&&!m?(d=u()).style.cursor=window.getComputedStyle(b).cursor:i||(d=document,c=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(b).cursor),document.addEventListener("mouseup",A),document.addEventListener("touchend",A),!1!==e.dragmode&&(a.preventDefault(),document.addEventListener("mousemove",w),document.addEventListener("touchmove",w,{passive:!1}))}function w(r){r.preventDefault();var i=f(r),a=e.minDrag||s.MINDRAG,o=x(i[0]-t,i[1]-n,a),c=o[0],u=o[1];(c||u)&&(g._dragged=!0,l.unhover(g,r)),g._dragged&&e.moveFn&&!m&&(g._dragdata={element:b,dx:c,dy:u},e.moveFn(c,u))}function A(t){if(delete g._dragdata,!1!==e.dragmode&&(t.preventDefault(),document.removeEventListener("mousemove",w),document.removeEventListener("touchmove",w)),document.removeEventListener("mouseup",A),document.removeEventListener("touchend",A),i?o(d):c&&(d.documentElement.style.cursor=c,c=null),g._dragging){if(g._dragging=!1,(new Date).getTime()-g._mouseDownTime>y&&(v=Math.max(v-1,1)),g._dragged)e.doneFn&&e.doneFn();else if(e.clickFn&&e.clickFn(v,h),!m){var n;try{n=new MouseEvent("click",t)}catch(e){var r=f(t);(n=document.createEvent("MouseEvents")).initMouseEvent("click",t.bubbles,t.cancelable,t.view,t.detail,t.screenX,t.screenY,r[0],r[1],t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget)}p.dispatchEvent(n)}g._dragging=!1,g._dragged=!1}else g._dragged=!1}},l.coverSlip=u},18134:(e,t,n)=>{"use strict";var r=n(76246),i=n(78503),a=n(32159).getGraphDiv,o=n(21722),s=e.exports={};s.wrapped=function(e,t,n){(e=a(e))._fullLayout&&i.clear(e._fullLayout._uid+o.HOVERID),s.raw(e,t,n)},s.raw=function(e,t){var n=e._fullLayout,i=e._hoverdata;t||(t={}),t.target&&!e._dragged&&!1===r.triggerHandler(e,"plotly_beforehover",t)||(n._hoverlayer.selectAll("g").remove(),n._hoverlayer.selectAll("line").remove(),n._hoverlayer.selectAll("circle").remove(),e._hoverdata=void 0,t.target&&i&&e.emit("plotly_unhover",{event:t,points:i}))}},9488:(e,t)=>{"use strict";t.T={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style",description:["Sets the dash style of lines. Set to a dash type string","(*solid*, *dot*, *dash*, *longdash*, *dashdot*, or *longdashdot*)","or a dash length list in px (eg *5px,10px,2px,2px*)."].join(" ")},t.k={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style",description:["Sets the shape of the pattern fill.","By default, no pattern is used for filling the area."].join(" ")},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style",description:["Determines whether `marker.color` should be used","as a default to `bgcolor` or a `fgcolor`."].join(" ")},bgcolor:{valType:"color",arrayOk:!0,editType:"style",description:["When there is no colorscale sets the color of background pattern fill.","Defaults to a `marker.color` background when `fillmode` is *overlay*.","Otherwise, defaults to a transparent background."].join(" ")},fgcolor:{valType:"color",arrayOk:!0,editType:"style",description:["When there is no colorscale sets the color of foreground pattern fill.","Defaults to a `marker.color` background when `fillmode` is *replace*.","Otherwise, defaults to dark grey or white","to increase contrast with the `bgcolor`."].join(" ")},fgopacity:{valType:"number",editType:"style",min:0,max:1,description:["Sets the opacity of the foreground pattern fill.","Defaults to a 0.5 when `fillmode` is *overlay*.","Otherwise, defaults to 1."].join(" ")},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style",description:["Sets the size of unit squares of the pattern fill in pixels,","which corresponds to the interval of repetition of the pattern."].join(" ")},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style",description:["Sets the solidity of the pattern fill.","Solidity is roughly the fraction of the area filled by the pattern.","Solidity of 0 shows only the background color without pattern","and solidty of 1 shows only the foreground color without pattern."].join(" ")},editType:"style",description:["Sets the pattern within the marker."].join(" ")}},14797:(e,t,n)=>{"use strict";var r=n(93268),i=n(56319),a=i.numberFormat,o=n(5605),s=n(3707),l=n(3360),c=n(53408),u=n(74062),f=i.strTranslate,d=n(56953),h=n(81818),p=n(12564).LINE_SPACING,m=n(93352).DESELECTDIM,g=n(43612),v=n(70789),y=n(44790).appendArrayPointValue,b=e.exports={};function x(e){return"none"===e?void 0:e}b.font=function(e,t){var n=t.variant,r=t.style,i=t.weight,a=t.color,o=t.size,s=t.family,l=t.shadow,u=t.lineposition,f=t.textcase;s&&e.style("font-family",s),o+1&&e.style("font-size",o+"px"),a&&e.call(c.fill,a),i&&e.style("font-weight",i),r&&e.style("font-style",r),n&&e.style("font-variant",n),f&&e.style("text-transform",x(function(e){return _[e]}(f))),l&&e.style("text-shadow","auto"===l?d.makeTextShadow(c.contrast(a)):x(l)),u&&e.style("text-decoration-line",x(function(e){return e.replace("under","underline").replace("over","overline").replace("through","line-through").split("+").join(" ")}(u)))};var _={normal:"none",lower:"lowercase",upper:"uppercase","word caps":"capitalize"};function w(e,t,n,r){var i=t.fillpattern,a=t.fillgradient,o=i&&b.getPatternAttr(i.shape,0,"");if(o){var s=b.getPatternAttr(i.bgcolor,0,null),l=b.getPatternAttr(i.fgcolor,0,null),u=i.fgopacity,f=b.getPatternAttr(i.size,0,8),d=b.getPatternAttr(i.solidity,0,.3),h=t.uid;b.pattern(e,"point",n,h,o,f,d,void 0,i.fillmode,s,l,u)}else if(a&&"none"!==a.type){var p,m,g=a.type,v="scatterfill-"+t.uid;if(r&&(v="legendfill-"+t.uid),r||void 0===a.start&&void 0===a.stop)"horizontal"===g&&(g+="reversed"),e.call(b.gradient,n,v,g,a.colorscale,"fill");else"horizontal"===g?(p={x:a.start,y:0},m={x:a.stop,y:0}):"vertical"===g&&(p={x:0,y:a.start},m={x:0,y:a.stop}),p.x=t._xA.c2p(void 0===p.x?t._extremes.x.min[0].val:p.x,!0),p.y=t._yA.c2p(void 0===p.y?t._extremes.y.min[0].val:p.y,!0),m.x=t._xA.c2p(void 0===m.x?t._extremes.x.max[0].val:m.x,!0),m.y=t._yA.c2p(void 0===m.y?t._extremes.y.max[0].val:m.y,!0),e.call(S,n,v,"linear",a.colorscale,"fill",p,m,!0,!1)}else t.fillcolor&&e.call(c.fill,t.fillcolor)}b.setPosition=function(e,t,n){e.attr("x",t).attr("y",n)},b.setSize=function(e,t,n){e.attr("width",t).attr("height",n)},b.setRect=function(e,t,n,r,i){e.call(b.setPosition,t,n).call(b.setSize,r,i)},b.translatePoint=function(e,t,n,r){var i=n.c2p(e.x),a=r.c2p(e.y);return!!(o(i)&&o(a)&&t.node())&&("text"===t.node().nodeName?t.attr("x",i).attr("y",a):t.attr("transform",f(i,a)),!0)},b.translatePoints=function(e,t,n){e.each((function(e){var i=r.select(this);b.translatePoint(e,i,t,n)}))},b.hideOutsideRangePoint=function(e,t,n,r,i,a){t.attr("display",n.isPtWithinRange(e,i)&&r.isPtWithinRange(e,a)?null:"none")},b.hideOutsideRangePoints=function(e,t){if(t._hasClipOnAxisFalse){var n=t.xaxis,i=t.yaxis;e.each((function(t){var a=t[0].trace,o=a.xcalendar,s=a.ycalendar,c=l.traceIs(a,"bar-like")?".bartext":".point,.textpoint";e.selectAll(c).each((function(e){b.hideOutsideRangePoint(e,r.select(this),n,i,o,s)}))}))}},b.crispRound=function(e,t,n){return t&&o(t)?e._context.staticPlot?t:t<1?1:Math.round(t):n||0},b.singleLineStyle=function(e,t,n,r,i){t.style("fill","none");var a=(((e||[])[0]||{}).trace||{}).line||{},o=n||a.width||0,s=i||a.dash||"";c.stroke(t,r||a.color),b.dashLine(t,s,o)},b.lineGroupStyle=function(e,t,n,i){e.style("fill","none").each((function(e){var a=(((e||[])[0]||{}).trace||{}).line||{},o=t||a.width||0,s=i||a.dash||"";r.select(this).call(c.stroke,n||a.color).call(b.dashLine,s,o)}))},b.dashLine=function(e,t,n){n=+n||0,t=b.dashStyle(t,n),e.style({"stroke-dasharray":t,"stroke-width":n+"px"})},b.dashStyle=function(e,t){t=+t||1;var n=Math.max(t,3);return"solid"===e?e="":"dot"===e?e=n+"px,"+n+"px":"dash"===e?e=3*n+"px,"+3*n+"px":"longdash"===e?e=5*n+"px,"+5*n+"px":"dashdot"===e?e=3*n+"px,"+n+"px,"+n+"px,"+n+"px":"longdashdot"===e&&(e=5*n+"px,"+2*n+"px,"+n+"px,"+2*n+"px"),e},b.singleFillStyle=function(e,t){var n=r.select(e.node());w(e,((n.data()[0]||[])[0]||{}).trace||{},t,!1)},b.fillGroupStyle=function(e,t,n){e.style("stroke-width",0).each((function(e){var i=r.select(this);e[0].trace&&w(i,e[0].trace,t,n)}))};var A=n(53048);b.symbolNames=[],b.symbolFuncs=[],b.symbolBackOffs=[],b.symbolNeedLines={},b.symbolNoDot={},b.symbolNoFill={},b.symbolList=[],Object.keys(A).forEach((function(e){var t=A[e],n=t.n;b.symbolList.push(n,String(n),e,n+100,String(n+100),e+"-open"),b.symbolNames[n]=e,b.symbolFuncs[n]=t.f,b.symbolBackOffs[n]=t.backoff||0,t.needLine&&(b.symbolNeedLines[n]=!0),t.noDot?b.symbolNoDot[n]=!0:b.symbolList.push(n+200,String(n+200),e+"-dot",n+300,String(n+300),e+"-open-dot"),t.noFill&&(b.symbolNoFill[n]=!0)}));var k=b.symbolNames.length;function E(e,t,n,r){var i=e%100;return b.symbolFuncs[i](t,n,r)+(e>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}b.symbolNumber=function(e){if(o(e))e=+e;else if("string"==typeof e){var t=0;e.indexOf("-open")>0&&(t=100,e=e.replace("-open","")),e.indexOf("-dot")>0&&(t+=200,e=e.replace("-dot","")),(e=b.symbolNames.indexOf(e))>=0&&(e+=t)}return e%100>=k||e>=400?0:Math.floor(Math.max(e,0))};var T=a("~f"),M={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};function S(e,t,n,a,o,l,u,f,d,h){var p,m=o.length;"linear"===a?p={node:"linearGradient",attrs:{x1:u.x,y1:u.y,x2:f.x,y2:f.y,gradientUnits:d?"userSpaceOnUse":"objectBoundingBox"},reversed:h}:"radial"===a&&(p={node:"radialGradient",reversed:h});for(var g=new Array(m),v=0;v<m;v++)p.reversed?g[m-1-v]=[T(100*(1-o[v][0])),o[v][1]]:g[v]=[T(100*o[v][0]),o[v][1]];var y=t._fullLayout,b="g"+y._uid+"-"+n,x=y._defs.select(".gradients").selectAll("#"+b).data([a+g.join(";")],i.identity);x.exit().remove(),x.enter().append(p.node).each((function(){var e=r.select(this);p.attrs&&e.attr(p.attrs),e.attr("id",b);var t=e.selectAll("stop").data(g);t.exit().remove(),t.enter().append("stop"),t.each((function(e){var t=s(e[1]);r.select(this).attr({offset:e[0]+"%","stop-color":c.tinyRGB(t),"stop-opacity":t.getAlpha()})}))})),e.style(l,q(b,t)).style(l+"-opacity",null),e.classed("gradient_filled",!0)}b.gradient=function(e,t,n,r,i,a){var o=M[r];return S(e,t,n,o.type,i,a,o.start,o.stop,!1,o.reversed)},b.pattern=function(e,t,n,a,o,l,u,f,d,h,p,m){var g="legend"===t;f&&("overlay"===d?(h=f,p=c.contrast(h)):(h=void 0,p=f));var v,y,b,x,_,w,A,k,E,T,M,S=n._fullLayout,C="p"+S._uid+"-"+a,O={},R=s(p),N=c.tinyRGB(R),L=m*R.getAlpha();switch(o){case"/":v=l*Math.sqrt(2),y=l*Math.sqrt(2),w="path",O={d:b="M-"+v/4+","+y/4+"l"+v/2+",-"+y/2+"M0,"+y+"L"+v+",0M"+v/4*3+","+y/4*5+"l"+v/2+",-"+y/2,opacity:L,stroke:N,"stroke-width":(x=u*l)+"px"};break;case"\\":v=l*Math.sqrt(2),y=l*Math.sqrt(2),w="path",O={d:b="M"+v/4*3+",-"+y/4+"l"+v/2+","+y/2+"M0,0L"+v+","+y+"M-"+v/4+","+y/4*3+"l"+v/2+","+y/2,opacity:L,stroke:N,"stroke-width":(x=u*l)+"px"};break;case"x":v=l*Math.sqrt(2),y=l*Math.sqrt(2),b="M-"+v/4+","+y/4+"l"+v/2+",-"+y/2+"M0,"+y+"L"+v+",0M"+v/4*3+","+y/4*5+"l"+v/2+",-"+y/2+"M"+v/4*3+",-"+y/4+"l"+v/2+","+y/2+"M0,0L"+v+","+y+"M-"+v/4+","+y/4*3+"l"+v/2+","+y/2,x=l-l*Math.sqrt(1-u),w="path",O={d:b,opacity:L,stroke:N,"stroke-width":x+"px"};break;case"|":w="path",w="path",O={d:b="M"+(v=l)/2+",0L"+v/2+","+(y=l),opacity:L,stroke:N,"stroke-width":(x=u*l)+"px"};break;case"-":w="path",w="path",O={d:b="M0,"+(y=l)/2+"L"+(v=l)+","+y/2,opacity:L,stroke:N,"stroke-width":(x=u*l)+"px"};break;case"+":w="path",b="M"+(v=l)/2+",0L"+v/2+","+(y=l)+"M0,"+y/2+"L"+v+","+y/2,x=l-l*Math.sqrt(1-u),w="path",O={d:b,opacity:L,stroke:N,"stroke-width":x+"px"};break;case".":v=l,y=l,u<Math.PI/4?_=Math.sqrt(u*l*l/Math.PI):(A=u,k=Math.PI/4,E=1,T=l/2,M=l/Math.sqrt(2),_=T+(M-T)*(A-k)/(E-k)),w="circle",O={cx:v/2,cy:y/2,r:_,opacity:L,fill:N}}var D=[o||"noSh",h||"noBg",p||"noFg",l,u].join(";"),P=S._defs.select(".patterns").selectAll("#"+C).data([D],i.identity);P.exit().remove(),P.enter().append("pattern").each((function(){var e=r.select(this);if(e.attr({id:C,width:v+"px",height:y+"px",patternUnits:"userSpaceOnUse",patternTransform:g?"scale(0.8)":""}),h){var t=s(h),n=c.tinyRGB(t),i=t.getAlpha(),a=e.selectAll("rect").data([0]);a.exit().remove(),a.enter().append("rect").attr({width:v+"px",height:y+"px",fill:n,"fill-opacity":i})}var o=e.selectAll(w).data([0]);o.exit().remove(),o.enter().append(w).attr(O)})),e.style("fill",q(C,n)).style("fill-opacity",null),e.classed("pattern_filled",!0)},b.initGradients=function(e){var t=e._fullLayout;i.ensureSingle(t._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),r.select(e).selectAll(".gradient_filled").classed("gradient_filled",!1)},b.initPatterns=function(e){var t=e._fullLayout;i.ensureSingle(t._defs,"g","patterns").selectAll("pattern").remove(),r.select(e).selectAll(".pattern_filled").classed("pattern_filled",!1)},b.getPatternAttr=function(e,t,n){return e&&i.isArrayOrTypedArray(e)?t<e.length?e[t]:n:e},b.pointStyle=function(e,t,n,i){if(e.size()){var a=b.makePointStyleFns(t);e.each((function(e){b.singlePointStyle(e,r.select(this),t,a,n,i)}))}},b.singlePointStyle=function(e,t,n,r,a,o){var s=n.marker,l=s.line;if(o&&o.i>=0&&void 0===e.i&&(e.i=o.i),t.style("opacity",r.selectedOpacityFn?r.selectedOpacityFn(e):void 0===e.mo?s.opacity:e.mo),r.ms2mrc){var u;u="various"===e.ms||"various"===s.size?3:r.ms2mrc(e.ms),e.mrc=u,r.selectedSizeFn&&(u=e.mrc=r.selectedSizeFn(e));var f=b.symbolNumber(e.mx||s.symbol)||0;e.om=f%200>=100;var d=re(e,n),h=W(e,n);t.attr("d",E(f,u,d,h))}var p,m,g,v=!1;if(e.so)g=l.outlierwidth,m=l.outliercolor,p=s.outliercolor;else{var y=(l||{}).width;g=(e.mlw+1||y+1||(e.trace?(e.trace.marker.line||{}).width:0)+1)-1||0,m="mlc"in e?e.mlcc=r.lineScale(e.mlc):i.isArrayOrTypedArray(l.color)?c.defaultLine:l.color,i.isArrayOrTypedArray(s.color)&&(p=c.defaultLine,v=!0),p="mc"in e?e.mcc=r.markerScale(e.mc):s.color||s.colors||"rgba(0,0,0,0)",r.selectedColorFn&&(p=r.selectedColorFn(e))}if(e.om)t.call(c.stroke,p).style({"stroke-width":(g||1)+"px",fill:"none"});else{t.style("stroke-width",(e.isBlank?0:g)+"px");var x=s.gradient,_=e.mgt;_?v=!0:_=x&&x.type,i.isArrayOrTypedArray(_)&&(_=_[0],M[_]||(_=0));var w=s.pattern,A=w&&b.getPatternAttr(w.shape,e.i,"");if(_&&"none"!==_){var k=e.mgc;k?v=!0:k=x.color;var T=n.uid;v&&(T+="-"+e.i),b.gradient(t,a,T,_,[[0,k],[1,p]],"fill")}else if(A){var S=!1,C=w.fgcolor;!C&&o&&o.color&&(C=o.color,S=!0);var O=b.getPatternAttr(C,e.i,o&&o.color||null),R=b.getPatternAttr(w.bgcolor,e.i,null),N=w.fgopacity,L=b.getPatternAttr(w.size,e.i,8),D=b.getPatternAttr(w.solidity,e.i,.3);S=S||e.mcc||i.isArrayOrTypedArray(w.shape)||i.isArrayOrTypedArray(w.bgcolor)||i.isArrayOrTypedArray(w.fgcolor)||i.isArrayOrTypedArray(w.size)||i.isArrayOrTypedArray(w.solidity);var P=n.uid;S&&(P+="-"+e.i),b.pattern(t,"point",a,P,A,L,D,e.mcc,w.fillmode,R,O,N)}else i.isArrayOrTypedArray(p)?c.fill(t,p[e.i]):c.fill(t,p);g&&c.stroke(t,m)}},b.makePointStyleFns=function(e){var t={},n=e.marker;return t.markerScale=b.tryColorscale(n,""),t.lineScale=b.tryColorscale(n,"line"),l.traceIs(e,"symbols")&&(t.ms2mrc=g.isBubble(e)?v(e):function(){return(n.size||6)/2}),e.selectedpoints&&i.extendFlat(t,b.makeSelectedPointStyleFns(e)),t},b.makeSelectedPointStyleFns=function(e){var t={},n=e.selected||{},r=e.unselected||{},a=e.marker||{},o=n.marker||{},s=r.marker||{},c=a.opacity,u=o.opacity,f=s.opacity,d=void 0!==u,h=void 0!==f;(i.isArrayOrTypedArray(c)||d||h)&&(t.selectedOpacityFn=function(e){var t=void 0===e.mo?a.opacity:e.mo;return e.selected?d?u:t:h?f:m*t});var p=a.color,g=o.color,v=s.color;(g||v)&&(t.selectedColorFn=function(e){var t=e.mcc||p;return e.selected?g||t:v||t});var y=a.size,b=o.size,x=s.size,_=void 0!==b,w=void 0!==x;return l.traceIs(e,"symbols")&&(_||w)&&(t.selectedSizeFn=function(e){var t=e.mrc||y/2;return e.selected?_?b/2:t:w?x/2:t}),t},b.makeSelectedTextStyleFns=function(e){var t={},n=e.selected||{},r=e.unselected||{},i=e.textfont||{},a=n.textfont||{},o=r.textfont||{},s=i.color,l=a.color,u=o.color;return t.selectedTextColorFn=function(e){var t=e.tc||s;return e.selected?l||t:u||(l?t:c.addOpacity(t,m))},t},b.selectedPointStyle=function(e,t){if(e.size()&&t.selectedpoints){var n=b.makeSelectedPointStyleFns(t),i=t.marker||{},a=[];n.selectedOpacityFn&&a.push((function(e,t){e.style("opacity",n.selectedOpacityFn(t))})),n.selectedColorFn&&a.push((function(e,t){c.fill(e,n.selectedColorFn(t))})),n.selectedSizeFn&&a.push((function(e,r){var a=r.mx||i.symbol||0,o=n.selectedSizeFn(r);e.attr("d",E(b.symbolNumber(a),o,re(r,t),W(r,t))),r.mrc2=o})),a.length&&e.each((function(e){for(var t=r.select(this),n=0;n<a.length;n++)a[n](t,e)}))}},b.tryColorscale=function(e,t){var n=t?i.nestedProperty(e,t).get():e;if(n){var r=n.color;if((n.colorscale||n._colorAx)&&i.isArrayOrTypedArray(r))return u.makeColorScaleFuncFromTrace(n)}return i.identity};var C={start:1,end:-1,middle:0,bottom:1,top:-1};function O(e,t,n,i,a){var o=r.select(e.node().parentNode),s=-1!==t.indexOf("top")?"top":-1!==t.indexOf("bottom")?"bottom":"middle",l=-1!==t.indexOf("left")?"end":-1!==t.indexOf("right")?"start":"middle",c=i?i/.8+1:0,u=(d.lineCount(e)-1)*p+1,h=C[l]*c,m=.75*n+C[s]*c+(C[s]-1)*u*n/2;e.attr("text-anchor",l),a||o.attr("transform",f(h,m))}function R(e,t){var n=e.ts||t.textfont.size;return o(n)&&n>0?n:0}b.textPointStyle=function(e,t,n){if(e.size()){var a;if(t.selectedpoints){var o=b.makeSelectedTextStyleFns(t);a=o.selectedTextColorFn}var s=t.texttemplate,l=n._fullLayout;e.each((function(e){var o=r.select(this),c=s?i.extractOption(e,t,"txt","texttemplate"):i.extractOption(e,t,"tx","text");if(c||0===c){if(s){var u=t._module.formatLabels,f=u?u(e,t,l):{},h={};y(h,t,e.i);var p=t._meta||{};c=i.texttemplateString(c,f,l._d3locale,h,e,p)}var m=e.tp||t.textposition,g=R(e,t),v=a?a(e):e.tc||t.textfont.color;o.call(b.font,{family:e.tf||t.textfont.family,weight:e.tw||t.textfont.weight,style:e.ty||t.textfont.style,variant:e.tv||t.textfont.variant,textcase:e.tC||t.textfont.textcase,lineposition:e.tE||t.textfont.lineposition,shadow:e.tS||t.textfont.shadow,size:g,color:v}).text(c).call(d.convertToTspans,n).call(O,m,g,e.mrc)}else o.remove()}))}},b.selectedTextStyle=function(e,t){if(e.size()&&t.selectedpoints){var n=b.makeSelectedTextStyleFns(t);e.each((function(e){var i=r.select(this),a=n.selectedTextColorFn(e),o=e.tp||t.textposition,s=R(e,t);c.fill(i,a);var u=l.traceIs(t,"bar-like");O(i,o,s,e.mrc2||e.mrc,u)}))}};var N,L;function D(e,t,n){return n&&(e=B(e)),t?I(e[1]):P(e[0])}function P(e){var t=r.round(e,2);return N=t,t}function I(e){var t=r.round(e,2);return L=t,t}function F(e,t,n,r){var i=e[0]-t[0],a=e[1]-t[1],o=n[0]-t[0],s=n[1]-t[1],l=Math.pow(i*i+a*a,.25),c=Math.pow(o*o+s*s,.25),u=(c*c*i-l*l*o)*r,f=(c*c*a-l*l*s)*r,d=3*c*(l+c),h=3*l*(l+c);return[[P(t[0]+(d&&u/d)),I(t[1]+(d&&f/d))],[P(t[0]-(h&&u/h)),I(t[1]-(h&&f/h))]]}b.smoothopen=function(e,t){if(e.length<3)return"M"+e.join("L");var n,r="M"+e[0],i=[];for(n=1;n<e.length-1;n++)i.push(F(e[n-1],e[n],e[n+1],t));for(r+="Q"+i[0][0]+" "+e[1],n=2;n<e.length-1;n++)r+="C"+i[n-2][1]+" "+i[n-1][0]+" "+e[n];return r+="Q"+i[e.length-3][1]+" "+e[e.length-1]},b.smoothclosed=function(e,t){if(e.length<3)return"M"+e.join("L")+"Z";var n,r="M"+e[0],i=e.length-1,a=[F(e[i],e[0],e[1],t)];for(n=1;n<i;n++)a.push(F(e[n-1],e[n],e[n+1],t));for(a.push(F(e[i-1],e[i],e[0],t)),n=1;n<=i;n++)r+="C"+a[n-1][1]+" "+a[n][0]+" "+e[n];return r+="C"+a[i][1]+" "+a[0][0]+" "+e[0]+"Z"};var z={hv:function(e,t,n){return"H"+P(t[0])+"V"+D(t,1,n)},vh:function(e,t,n){return"V"+I(t[1])+"H"+D(t,0,n)},hvh:function(e,t,n){return"H"+P((e[0]+t[0])/2)+"V"+I(t[1])+"H"+D(t,0,n)},vhv:function(e,t,n){return"V"+I((e[1]+t[1])/2)+"H"+P(t[0])+"V"+D(t,1,n)}},j=function(e,t,n){return"L"+D(t,0,n)+","+D(t,1,n)};function B(e,t){var n=e.backoff,r=e.trace,a=e.d,o=e.i;if(n&&r&&r.marker&&r.marker.angle%360==0&&r.line&&"spline"!==r.line.shape){var s=i.isArrayOrTypedArray(n),l=e,c=t?t[0]:N||0,u=t?t[1]:L||0,f=l[0],d=l[1],h=f-c,p=d-u,m=Math.atan2(p,h),g=s?n[o]:n;if("auto"===g){var v=l.i;"scatter"===r.type&&v--;var y=l.marker,x=y.symbol;i.isArrayOrTypedArray(x)&&(x=x[v]);var _=y.size;i.isArrayOrTypedArray(_)&&(_=_[v]),g=y?b.symbolBackOffs[b.symbolNumber(x)]*_:0,g+=b.getMarkerStandoff(a[v],r)||0}var w=f-g*Math.cos(m),A=d-g*Math.sin(m);(w<=f&&w>=c||w>=f&&w<=c)&&(A<=d&&A>=u||A>=d&&A<=u)&&(e=[w,A])}return e}b.steps=function(e){var t=z[e]||j;return function(e){for(var n="M"+P(e[0][0])+","+I(e[0][1]),r=e.length,i=1;i<r;i++)n+=t(e[i-1],e[i],i===r-1);return n}},b.applyBackoff=B,b.makeTester=function(){var e=i.ensureSingleById(r.select("body"),"svg","js-plotly-tester",(function(e){e.attr(h.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})})),t=i.ensureSingle(e,"path","js-reference-point",(function(e){e.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})}));b.tester=e,b.testref=t},b.savedBBoxes={};var U=0;function $(e){var t=e.getAttribute("data-unformatted");if(null!==t)return t+e.getAttribute("data-math")+e.getAttribute("text-anchor")+e.getAttribute("style")}function q(e,t){if(!e)return null;var n=t._context,r=n._exportedPlot?"":n._baseUrl||"";return r?"url('"+r+"#"+e+"')":"url(#"+e+")"}b.bBox=function(e,t,n){var a,o,s;if(n||(n=$(e)),n){if(a=b.savedBBoxes[n])return i.extendFlat({},a)}else if(1===e.childNodes.length){var l=e.childNodes[0];if(n=$(l)){var c=+l.getAttribute("x")||0,u=+l.getAttribute("y")||0,f=l.getAttribute("transform");if(!f){var h=b.bBox(l,!1,n);return c&&(h.left+=c,h.right+=c),u&&(h.top+=u,h.bottom+=u),h}if(n+="~"+c+"~"+u+"~"+f,a=b.savedBBoxes[n])return i.extendFlat({},a)}}t?o=e:(s=b.tester.node(),o=e.cloneNode(!0),s.appendChild(o)),r.select(o).attr("transform",null).call(d.positionText,0,0);var p=o.getBoundingClientRect(),m=b.testref.node().getBoundingClientRect();t||s.removeChild(o);var g={height:p.height,width:p.width,left:p.left-m.left,top:p.top-m.top,right:p.right-m.left,bottom:p.bottom-m.top};return U>=1e4&&(b.savedBBoxes={},U=0),n&&(b.savedBBoxes[n]=g),U++,i.extendFlat({},g)},b.setClipUrl=function(e,t,n){e.attr("clip-path",q(t,n))},b.getTranslate=function(e){var t=(e[e.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,(function(e,t,n){return[t,n].join(" ")})).split(" ");return{x:+t[0]||0,y:+t[1]||0}},b.setTranslate=function(e,t,n){var r=e.attr?"attr":"getAttribute",i=e.attr?"attr":"setAttribute",a=e[r]("transform")||"";return t=t||0,n=n||0,a=a.replace(/(\btranslate\(.*?\);?)/,"").trim(),a=(a+=f(t,n)).trim(),e[i]("transform",a),a},b.getScale=function(e){var t=(e[e.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,(function(e,t,n){return[t,n].join(" ")})).split(" ");return{x:+t[0]||1,y:+t[1]||1}},b.setScale=function(e,t,n){var r=e.attr?"attr":"getAttribute",i=e.attr?"attr":"setAttribute",a=e[r]("transform")||"";return t=t||1,n=n||1,a=a.replace(/(\bscale\(.*?\);?)/,"").trim(),a=(a+="scale("+t+","+n+")").trim(),e[i]("transform",a),a};var H=/\s*sc.*/;b.setPointGroupScale=function(e,t,n){if(t=t||1,n=n||1,e){var r=1===t&&1===n?"":"scale("+t+","+n+")";e.each((function(){var e=(this.getAttribute("transform")||"").replace(H,"");e=(e+=r).trim(),this.setAttribute("transform",e)}))}};var V=/translate\([^)]*\)\s*$/;function W(e,t){var n;return e&&(n=e.mf),void 0===n&&(n=t.marker&&t.marker.standoff||0),t._geo||t._xA?n:-n}b.setTextPointsScale=function(e,t,n){e&&e.each((function(){var e,i=r.select(this),a=i.select("text");if(a.node()){var o=parseFloat(a.attr("x")||0),s=parseFloat(a.attr("y")||0),l=(i.attr("transform")||"").match(V);e=1===t&&1===n?[]:[f(o,s),"scale("+t+","+n+")",f(-o,-s)],l&&e.push(l),i.attr("transform",e.join(""))}}))},b.getMarkerStandoff=W;var G,Y,X,K,Z,J,Q=Math.atan2,ee=Math.cos,te=Math.sin;function ne(e,t){var n=t[0],r=t[1];return[n*ee(e)-r*te(e),n*te(e)+r*ee(e)]}function re(e,t){var n,r,a=e.ma;void 0===a&&((a=t.marker.angle)&&!i.isArrayOrTypedArray(a)||(a=0));var s=t.marker.angleref;if("previous"===s||"north"===s){if(t._geo){var l=t._geo.project(e.lonlat);n=l[0],r=l[1]}else{var c=t._xA,u=t._yA;if(!c||!u)return 90;n=c.c2p(e.x),r=u.c2p(e.y)}if(t._geo){var f,d=e.lonlat[0],h=e.lonlat[1],p=t._geo.project([d,h+1e-5]),m=t._geo.project([d+1e-5,h]),g=Q(m[1]-r,m[0]-n),v=Q(p[1]-r,p[0]-n);if("north"===s)f=a/180*Math.PI;else if("previous"===s){var y=d/180*Math.PI,b=h/180*Math.PI,x=G/180*Math.PI,_=Y/180*Math.PI,w=x-y,A=ee(_)*te(w),k=te(_)*ee(b)-ee(_)*te(b)*ee(w);f=-Q(A,k)-Math.PI,G=d,Y=h}var E=ne(g,[ee(f),0]),T=ne(v,[te(f),0]);a=Q(E[1]+T[1],E[0]+T[0])/Math.PI*180,"previous"!==s||J===t.uid&&e.i===Z+1||(a=null)}if("previous"===s&&!t._geo)if(J===t.uid&&e.i===Z+1&&o(n)&&o(r)){var M=n-X,S=r-K,C=t.line&&t.line.shape||"",O=C.slice(C.length-1);"h"===O&&(S=0),"v"===O&&(M=0),a+=Q(S,M)/Math.PI*180+90}else a=null}return X=n,K=r,Z=e.i,J=t.uid,a}b.getMarkerAngle=re},53048:(e,t,n)=>{"use strict";var r,i,a,o,s=n(99061),l=n(93268).round,c="M0,0Z",u=Math.sqrt(2),f=Math.sqrt(3),d=Math.PI,h=Math.cos,p=Math.sin;function m(e){return null===e}function g(e,t,n){if(!(e&&e%360!=0||t))return n;if(a===e&&o===t&&r===n)return i;function l(e,n){var r=h(e),i=p(e),a=n[0],o=n[1]+(t||0);return[a*r-o*i,a*i+o*r]}a=e,o=t,r=n;for(var c=e/180*d,u=0,f=0,m=s(n),g="",v=0;v<m.length;v++){var y=m[v],b=y[0],x=u,_=f;if("M"===b||"L"===b)u=+y[1],f=+y[2];else if("m"===b||"l"===b)u+=+y[1],f+=+y[2];else if("H"===b)u=+y[1];else if("h"===b)u+=+y[1];else if("V"===b)f=+y[1];else if("v"===b)f+=+y[1];else if("A"===b){u=+y[1],f=+y[2];var w=l(c,[+y[6],+y[7]]);y[6]=w[0],y[7]=w[1],y[3]=+y[3]+e}"H"!==b&&"V"!==b||(b="L"),"h"!==b&&"v"!==b||(b="l"),"m"!==b&&"l"!==b||(u-=x,f-=_);var A=l(c,[u,f]);"H"!==b&&"V"!==b||(b="L"),"M"!==b&&"L"!==b&&"m"!==b&&"l"!==b||(y[1]=A[0],y[2]=A[1]),y[0]=b,g+=y[0]+y.slice(1).join(",")}return i=g,g}e.exports={circle:{n:0,f:function(e,t,n){if(m(t))return c;var r=l(e,2),i="M"+r+",0A"+r+","+r+" 0 1,1 0,-"+r+"A"+r+","+r+" 0 0,1 "+r+",0Z";return n?g(t,n,i):i}},square:{n:1,f:function(e,t,n){if(m(t))return c;var r=l(e,2);return g(t,n,"M"+r+","+r+"H-"+r+"V-"+r+"H"+r+"Z")}},diamond:{n:2,f:function(e,t,n){if(m(t))return c;var r=l(1.3*e,2);return g(t,n,"M"+r+",0L0,"+r+"L-"+r+",0L0,-"+r+"Z")}},cross:{n:3,f:function(e,t,n){if(m(t))return c;var r=l(.4*e,2),i=l(1.2*e,2);return g(t,n,"M"+i+","+r+"H"+r+"V"+i+"H-"+r+"V"+r+"H-"+i+"V-"+r+"H-"+r+"V-"+i+"H"+r+"V-"+r+"H"+i+"Z")}},x:{n:4,f:function(e,t,n){if(m(t))return c;var r=l(.8*e/u,2),i="l"+r+","+r,a="l"+r+",-"+r,o="l-"+r+",-"+r,s="l-"+r+","+r;return g(t,n,"M0,"+r+i+a+o+a+o+s+o+s+i+s+i+"Z")}},"triangle-up":{n:5,f:function(e,t,n){if(m(t))return c;var r=l(2*e/f,2);return g(t,n,"M-"+r+","+l(e/2,2)+"H"+r+"L0,-"+l(e,2)+"Z")}},"triangle-down":{n:6,f:function(e,t,n){if(m(t))return c;var r=l(2*e/f,2);return g(t,n,"M-"+r+",-"+l(e/2,2)+"H"+r+"L0,"+l(e,2)+"Z")}},"triangle-left":{n:7,f:function(e,t,n){if(m(t))return c;var r=l(2*e/f,2);return g(t,n,"M"+l(e/2,2)+",-"+r+"V"+r+"L-"+l(e,2)+",0Z")}},"triangle-right":{n:8,f:function(e,t,n){if(m(t))return c;var r=l(2*e/f,2);return g(t,n,"M-"+l(e/2,2)+",-"+r+"V"+r+"L"+l(e,2)+",0Z")}},"triangle-ne":{n:9,f:function(e,t,n){if(m(t))return c;var r=l(.6*e,2),i=l(1.2*e,2);return g(t,n,"M-"+i+",-"+r+"H"+r+"V"+i+"Z")}},"triangle-se":{n:10,f:function(e,t,n){if(m(t))return c;var r=l(.6*e,2),i=l(1.2*e,2);return g(t,n,"M"+r+",-"+i+"V"+r+"H-"+i+"Z")}},"triangle-sw":{n:11,f:function(e,t,n){if(m(t))return c;var r=l(.6*e,2),i=l(1.2*e,2);return g(t,n,"M"+i+","+r+"H-"+r+"V-"+i+"Z")}},"triangle-nw":{n:12,f:function(e,t,n){if(m(t))return c;var r=l(.6*e,2),i=l(1.2*e,2);return g(t,n,"M-"+r+","+i+"V-"+r+"H"+i+"Z")}},pentagon:{n:13,f:function(e,t,n){if(m(t))return c;var r=l(.951*e,2),i=l(.588*e,2),a=l(-e,2),o=l(-.309*e,2);return g(t,n,"M"+r+","+o+"L"+i+","+l(.809*e,2)+"H-"+i+"L-"+r+","+o+"L0,"+a+"Z")}},hexagon:{n:14,f:function(e,t,n){if(m(t))return c;var r=l(e,2),i=l(e/2,2),a=l(e*f/2,2);return g(t,n,"M"+a+",-"+i+"V"+i+"L0,"+r+"L-"+a+","+i+"V-"+i+"L0,-"+r+"Z")}},hexagon2:{n:15,f:function(e,t,n){if(m(t))return c;var r=l(e,2),i=l(e/2,2),a=l(e*f/2,2);return g(t,n,"M-"+i+","+a+"H"+i+"L"+r+",0L"+i+",-"+a+"H-"+i+"L-"+r+",0Z")}},octagon:{n:16,f:function(e,t,n){if(m(t))return c;var r=l(.924*e,2),i=l(.383*e,2);return g(t,n,"M-"+i+",-"+r+"H"+i+"L"+r+",-"+i+"V"+i+"L"+i+","+r+"H-"+i+"L-"+r+","+i+"V-"+i+"Z")}},star:{n:17,f:function(e,t,n){if(m(t))return c;var r=1.4*e,i=l(.225*r,2),a=l(.951*r,2),o=l(.363*r,2),s=l(.588*r,2),u=l(-r,2),f=l(-.309*r,2),d=l(.118*r,2),h=l(.809*r,2);return g(t,n,"M"+i+","+f+"H"+a+"L"+o+","+d+"L"+s+","+h+"L0,"+l(.382*r,2)+"L-"+s+","+h+"L-"+o+","+d+"L-"+a+","+f+"H-"+i+"L0,"+u+"Z")}},hexagram:{n:18,f:function(e,t,n){if(m(t))return c;var r=l(.66*e,2),i=l(.38*e,2),a=l(.76*e,2);return g(t,n,"M-"+a+",0l-"+i+",-"+r+"h"+a+"l"+i+",-"+r+"l"+i+","+r+"h"+a+"l-"+i+","+r+"l"+i+","+r+"h-"+a+"l-"+i+","+r+"l-"+i+",-"+r+"h-"+a+"Z")}},"star-triangle-up":{n:19,f:function(e,t,n){if(m(t))return c;var r=l(e*f*.8,2),i=l(.8*e,2),a=l(1.6*e,2),o=l(4*e,2),s="A "+o+","+o+" 0 0 1 ";return g(t,n,"M-"+r+","+i+s+r+","+i+s+"0,-"+a+s+"-"+r+","+i+"Z")}},"star-triangle-down":{n:20,f:function(e,t,n){if(m(t))return c;var r=l(e*f*.8,2),i=l(.8*e,2),a=l(1.6*e,2),o=l(4*e,2),s="A "+o+","+o+" 0 0 1 ";return g(t,n,"M"+r+",-"+i+s+"-"+r+",-"+i+s+"0,"+a+s+r+",-"+i+"Z")}},"star-square":{n:21,f:function(e,t,n){if(m(t))return c;var r=l(1.1*e,2),i=l(2*e,2),a="A "+i+","+i+" 0 0 1 ";return g(t,n,"M-"+r+",-"+r+a+"-"+r+","+r+a+r+","+r+a+r+",-"+r+a+"-"+r+",-"+r+"Z")}},"star-diamond":{n:22,f:function(e,t,n){if(m(t))return c;var r=l(1.4*e,2),i=l(1.9*e,2),a="A "+i+","+i+" 0 0 1 ";return g(t,n,"M-"+r+",0"+a+"0,"+r+a+r+",0"+a+"0,-"+r+a+"-"+r+",0Z")}},"diamond-tall":{n:23,f:function(e,t,n){if(m(t))return c;var r=l(.7*e,2),i=l(1.4*e,2);return g(t,n,"M0,"+i+"L"+r+",0L0,-"+i+"L-"+r+",0Z")}},"diamond-wide":{n:24,f:function(e,t,n){if(m(t))return c;var r=l(1.4*e,2),i=l(.7*e,2);return g(t,n,"M0,"+i+"L"+r+",0L0,-"+i+"L-"+r+",0Z")}},hourglass:{n:25,f:function(e,t,n){if(m(t))return c;var r=l(e,2);return g(t,n,"M"+r+","+r+"H-"+r+"L"+r+",-"+r+"H-"+r+"Z")},noDot:!0},bowtie:{n:26,f:function(e,t,n){if(m(t))return c;var r=l(e,2);return g(t,n,"M"+r+","+r+"V-"+r+"L-"+r+","+r+"V-"+r+"Z")},noDot:!0},"circle-cross":{n:27,f:function(e,t,n){if(m(t))return c;var r=l(e,2);return g(t,n,"M0,"+r+"V-"+r+"M"+r+",0H-"+r+"M"+r+",0A"+r+","+r+" 0 1,1 0,-"+r+"A"+r+","+r+" 0 0,1 "+r+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(e,t,n){if(m(t))return c;var r=l(e,2),i=l(e/u,2);return g(t,n,"M"+i+","+i+"L-"+i+",-"+i+"M"+i+",-"+i+"L-"+i+","+i+"M"+r+",0A"+r+","+r+" 0 1,1 0,-"+r+"A"+r+","+r+" 0 0,1 "+r+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(e,t,n){if(m(t))return c;var r=l(e,2);return g(t,n,"M0,"+r+"V-"+r+"M"+r+",0H-"+r+"M"+r+","+r+"H-"+r+"V-"+r+"H"+r+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(e,t,n){if(m(t))return c;var r=l(e,2);return g(t,n,"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r+"M"+r+","+r+"H-"+r+"V-"+r+"H"+r+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(e,t,n){if(m(t))return c;var r=l(1.3*e,2);return g(t,n,"M"+r+",0L0,"+r+"L-"+r+",0L0,-"+r+"ZM0,-"+r+"V"+r+"M-"+r+",0H"+r)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(e,t,n){if(m(t))return c;var r=l(1.3*e,2),i=l(.65*e,2);return g(t,n,"M"+r+",0L0,"+r+"L-"+r+",0L0,-"+r+"ZM-"+i+",-"+i+"L"+i+","+i+"M-"+i+","+i+"L"+i+",-"+i)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(e,t,n){if(m(t))return c;var r=l(1.4*e,2);return g(t,n,"M0,"+r+"V-"+r+"M"+r+",0H-"+r)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(e,t,n){if(m(t))return c;var r=l(e,2);return g(t,n,"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(e,t,n){if(m(t))return c;var r=l(1.2*e,2),i=l(.85*e,2);return g(t,n,"M0,"+r+"V-"+r+"M"+r+",0H-"+r+"M"+i+","+i+"L-"+i+",-"+i+"M"+i+",-"+i+"L-"+i+","+i)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(e,t,n){if(m(t))return c;var r=l(e/2,2),i=l(e,2);return g(t,n,"M"+r+","+i+"V-"+i+"M"+(r-i)+",-"+i+"V"+i+"M"+i+","+r+"H-"+i+"M-"+i+","+(r-i)+"H"+i)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(e,t,n){if(m(t))return c;var r=l(1.2*e,2),i=l(1.6*e,2),a=l(.8*e,2);return g(t,n,"M-"+r+","+a+"L0,0M"+r+","+a+"L0,0M0,-"+i+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(e,t,n){if(m(t))return c;var r=l(1.2*e,2),i=l(1.6*e,2),a=l(.8*e,2);return g(t,n,"M-"+r+",-"+a+"L0,0M"+r+",-"+a+"L0,0M0,"+i+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(e,t,n){if(m(t))return c;var r=l(1.2*e,2),i=l(1.6*e,2),a=l(.8*e,2);return g(t,n,"M"+a+","+r+"L0,0M"+a+",-"+r+"L0,0M-"+i+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(e,t,n){if(m(t))return c;var r=l(1.2*e,2),i=l(1.6*e,2),a=l(.8*e,2);return g(t,n,"M-"+a+","+r+"L0,0M-"+a+",-"+r+"L0,0M"+i+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(e,t,n){if(m(t))return c;var r=l(1.4*e,2);return g(t,n,"M"+r+",0H-"+r)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(e,t,n){if(m(t))return c;var r=l(1.4*e,2);return g(t,n,"M0,"+r+"V-"+r)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(e,t,n){if(m(t))return c;var r=l(e,2);return g(t,n,"M"+r+",-"+r+"L-"+r+","+r)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(e,t,n){if(m(t))return c;var r=l(e,2);return g(t,n,"M"+r+","+r+"L-"+r+",-"+r)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(e,t,n){if(m(t))return c;var r=l(e,2);return g(t,n,"M0,0L-"+r+","+l(2*e,2)+"H"+r+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(e,t,n){if(m(t))return c;var r=l(e,2);return g(t,n,"M0,0L-"+r+",-"+l(2*e,2)+"H"+r+"Z")},noDot:!0},"arrow-left":{n:47,f:function(e,t,n){if(m(t))return c;var r=l(2*e,2),i=l(e,2);return g(t,n,"M0,0L"+r+",-"+i+"V"+i+"Z")},noDot:!0},"arrow-right":{n:48,f:function(e,t,n){if(m(t))return c;var r=l(2*e,2),i=l(e,2);return g(t,n,"M0,0L-"+r+",-"+i+"V"+i+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(e,t,n){if(m(t))return c;var r=l(e,2);return g(t,n,"M-"+r+",0H"+r+"M0,0L-"+r+","+l(2*e,2)+"H"+r+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(e,t,n){if(m(t))return c;var r=l(e,2);return g(t,n,"M-"+r+",0H"+r+"M0,0L-"+r+",-"+l(2*e,2)+"H"+r+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(e,t,n){if(m(t))return c;var r=l(2*e,2),i=l(e,2);return g(t,n,"M0,-"+i+"V"+i+"M0,0L"+r+",-"+i+"V"+i+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(e,t,n){if(m(t))return c;var r=l(2*e,2),i=l(e,2);return g(t,n,"M0,-"+i+"V"+i+"M0,0L-"+r+",-"+i+"V"+i+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(e,t,n){if(m(t))return c;var r=d/2.5,i=2*e*h(r),a=2*e*p(r);return g(t,n,"M0,0L"+-i+","+a+"L"+i+","+a+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(e,t,n){if(m(t))return c;var r=d/4,i=2*e*h(r),a=2*e*p(r);return g(t,n,"M0,0L"+-i+","+a+"A "+2*e+","+2*e+" 0 0 1 "+i+","+a+"Z")},backoff:.4,noDot:!0}}},52330:e=>{"use strict";e.exports={visible:{valType:"boolean",editType:"calc",description:["Determines whether or not this set of error bars is visible."].join(" ")},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc",description:["Determines the rule used to generate the error bars.","If *constant`, the bar lengths are of a constant value.","Set this constant in `value`.","If *percent*, the bar lengths correspond to a percentage of","underlying data. Set this percentage in `value`.","If *sqrt*, the bar lengths correspond to the square of the","underlying data.","If *data*, the bar lengths are set with data set `array`."].join(" ")},symmetric:{valType:"boolean",editType:"calc",description:["Determines whether or not the error bars have the same length","in both direction","(top/bottom for vertical bars, left/right for horizontal bars."].join(" ")},array:{valType:"data_array",editType:"calc",description:["Sets the data corresponding the length of each error bar.","Values are plotted relative to the underlying data."].join(" ")},arrayminus:{valType:"data_array",editType:"calc",description:["Sets the data corresponding the length of each error bar in the","bottom (left) direction for vertical (horizontal) bars","Values are plotted relative to the underlying data."].join(" ")},value:{valType:"number",min:0,dflt:10,editType:"calc",description:["Sets the value of either the percentage","(if `type` is set to *percent*) or the constant","(if `type` is set to *constant*) corresponding to the lengths of","the error bars."].join(" ")},valueminus:{valType:"number",min:0,dflt:10,editType:"calc",description:["Sets the value of either the percentage","(if `type` is set to *percent*) or the constant","(if `type` is set to *constant*) corresponding to the lengths of","the error bars in the","bottom (left) direction for vertical (horizontal) bars"].join(" ")},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style",description:"Sets the stoke color of the error bars."},thickness:{valType:"number",min:0,dflt:2,editType:"style",description:"Sets the thickness (in px) of the error bars."},width:{valType:"number",min:0,editType:"plot",description:["Sets the width (in px) of the cross-bar at both ends","of the error bars."].join(" ")},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style",description:["Obsolete.","Use the alpha channel in error bar `color` to set the opacity."].join(" ")}}}},19974:(e,t,n)=>{"use strict";var r=n(5605),i=n(3360),a=n(596),o=n(56319),s=n(88163);function l(e,t,n,i){var l=t["error_"+i]||{},c=[];if(l.visible&&-1!==["linear","log"].indexOf(n.type)){for(var u=s(l),f=0;f<e.length;f++){var d=e[f],h=d.i;if(void 0===h)h=f;else if(null===h)continue;var p=d[i];if(r(n.c2l(p))){var m=u(p,h);if(r(m[0])&&r(m[1])){var g=d[i+"s"]=p-m[0],v=d[i+"h"]=p+m[1];c.push(g,v)}}}var y=n._id,b=t._extremes[y],x=a.findExtremes(n,c,o.extendFlat({tozero:b.opts.tozero},{padded:!0}));b.min=b.min.concat(x.min),b.max=b.max.concat(x.max)}}e.exports=function(e){for(var t=e.calcdata,n=0;n<t.length;n++){var r=t[n],o=r[0].trace;if(!0===o.visible&&i.traceIs(o,"errorBarsOK")){var s=a.getFromId(e,o.xaxis),c=a.getFromId(e,o.yaxis);l(r,o,s,"x"),l(r,o,c,"y")}}}},88163:e=>{"use strict";function t(e,t){return"percent"===e?function(e){return Math.abs(e*t/100)}:"constant"===e?function(){return Math.abs(t)}:"sqrt"===e?function(e){return Math.sqrt(Math.abs(e))}:void 0}e.exports=function(e){var n=e.type,r=e.symmetric;if("data"===n){var i=e.array||[];if(r)return function(e,t){var n=+i[t];return[n,n]};var a=e.arrayminus||[];return function(e,t){var n=+i[t],r=+a[t];return isNaN(n)&&isNaN(r)?[NaN,NaN]:[r||0,n||0]}}var o=t(n,e.value),s=t(n,e.valueminus);return r||void 0===e.valueminus?function(e){var t=o(e);return[t,t]}:function(e){return[s(e),o(e)]}}},18141:(e,t,n)=>{"use strict";var r=n(5605),i=n(3360),a=n(56319),o=n(65210),s=n(52330);e.exports=function(e,t,n,l){var c="error_"+l.axis,u=o.newContainer(t,c),f=e[c]||{};function d(e,t){return a.coerce(f,u,s,e,t)}if(!1!==d("visible",void 0!==f.array||void 0!==f.value||"sqrt"===f.type)){var h=d("type","array"in f?"data":"percent"),p=!0;"sqrt"!==h&&(p=d("symmetric",!(("data"===h?"arrayminus":"valueminus")in f))),"data"===h?(d("array"),d("traceref"),p||(d("arrayminus"),d("tracerefminus"))):"percent"!==h&&"constant"!==h||(d("value"),p||d("valueminus"));var m="copy_"+l.inherit+"style";if(l.inherit)(t["error_"+l.inherit]||{}).visible&&d(m,!(f.color||r(f.thickness)||r(f.width)));l.inherit&&u[m]||(d("color",n),d("thickness"),d("width",i.traceIs(t,"gl3d")?0:4))}}},74131:(e,t,n)=>{"use strict";var r=n(56319),i=n(88500).overrideAll,a=n(52330),o={error_x:r.extendFlat({},a),error_y:r.extendFlat({},a)};delete o.error_x.copy_zstyle,delete o.error_y.copy_zstyle,delete o.error_y.copy_ystyle;var s={error_x:r.extendFlat({},a),error_y:r.extendFlat({},a),error_z:r.extendFlat({},a)};delete s.error_x.copy_ystyle,delete s.error_y.copy_ystyle,delete s.error_z.copy_ystyle,delete s.error_z.copy_zstyle,e.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:o,bar:o,histogram:o,scatter3d:i(s,"calc","nested"),scattergl:i(o,"calc","nested")}},supplyDefaults:n(18141),calc:n(19974),makeComputeError:n(88163),plot:n(1524),style:n(69622),hoverInfo:function(e,t,n){(t.error_y||{}).visible&&(n.yerr=e.yh-e.y,t.error_y.symmetric||(n.yerrneg=e.y-e.ys));(t.error_x||{}).visible&&(n.xerr=e.xh-e.x,t.error_x.symmetric||(n.xerrneg=e.x-e.xs))}}},1524:(e,t,n)=>{"use strict";var r=n(93268),i=n(5605),a=n(14797),o=n(43612);e.exports=function(e,t,n,s){var l=n.xaxis,c=n.yaxis,u=s&&s.duration>0,f=e._context.staticPlot;t.each((function(t){var d,h=t[0].trace,p=h.error_x||{},m=h.error_y||{};h.ids&&(d=function(e){return e.id});var g=o.hasMarkers(h)&&h.marker.maxdisplayed>0;m.visible||p.visible||(t=[]);var v=r.select(this).selectAll("g.errorbar").data(t,d);if(v.exit().remove(),t.length){p.visible||v.selectAll("path.xerror").remove(),m.visible||v.selectAll("path.yerror").remove(),v.style("opacity",1);var y=v.enter().append("g").classed("errorbar",!0);u&&y.style("opacity",0).transition().duration(s.duration).style("opacity",1),a.setClipUrl(v,n.layerClipId,e),v.each((function(e){var t=r.select(this),n=function(e,t,n){var r={x:t.c2p(e.x),y:n.c2p(e.y)};void 0!==e.yh&&(r.yh=n.c2p(e.yh),r.ys=n.c2p(e.ys),i(r.ys)||(r.noYS=!0,r.ys=n.c2p(e.ys,!0)));void 0!==e.xh&&(r.xh=t.c2p(e.xh),r.xs=t.c2p(e.xs),i(r.xs)||(r.noXS=!0,r.xs=t.c2p(e.xs,!0)));return r}(e,l,c);if(!g||e.vis){var a,o=t.select("path.yerror");if(m.visible&&i(n.x)&&i(n.yh)&&i(n.ys)){var d=m.width;a="M"+(n.x-d)+","+n.yh+"h"+2*d+"m-"+d+",0V"+n.ys,n.noYS||(a+="m-"+d+",0h"+2*d),!o.size()?o=t.append("path").style("vector-effect",f?"none":"non-scaling-stroke").classed("yerror",!0):u&&(o=o.transition().duration(s.duration).ease(s.easing)),o.attr("d",a)}else o.remove();var h=t.select("path.xerror");if(p.visible&&i(n.y)&&i(n.xh)&&i(n.xs)){var v=(p.copy_ystyle?m:p).width;a="M"+n.xh+","+(n.y-v)+"v"+2*v+"m0,-"+v+"H"+n.xs,n.noXS||(a+="m0,-"+v+"v"+2*v),!h.size()?h=t.append("path").style("vector-effect",f?"none":"non-scaling-stroke").classed("xerror",!0):u&&(h=h.transition().duration(s.duration).ease(s.easing)),h.attr("d",a)}else h.remove()}}))}}))}},69622:(e,t,n)=>{"use strict";var r=n(93268),i=n(53408);e.exports=function(e){e.each((function(e){var t=e[0].trace,n=t.error_y||{},a=t.error_x||{},o=r.select(this);o.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(i.stroke,n.color),a.copy_ystyle&&(a=n),o.selectAll("path.xerror").style("stroke-width",a.thickness+"px").call(i.stroke,a.color)}))}},88006:(e,t,n)=>{"use strict";var r=n(95323),i=n(97557).hoverlabel,a=n(86395).extendFlat;e.exports={hoverlabel:{bgcolor:a({},i.bgcolor,{arrayOk:!0,description:"Sets the background color of the hover labels for this trace"}),bordercolor:a({},i.bordercolor,{arrayOk:!0,description:"Sets the border color of the hover labels for this trace."}),font:r({arrayOk:!0,editType:"none",description:"Sets the font used in hover labels."}),align:a({},i.align,{arrayOk:!0}),namelength:a({},i.namelength,{arrayOk:!0}),editType:"none"}}},39138:(e,t,n)=>{"use strict";var r=n(56319),i=n(3360);function a(e,t,n,i){i=i||r.identity,Array.isArray(e)&&(t[0][n]=i(e))}e.exports=function(e){var t=e.calcdata,n=e._fullLayout;function o(e){return function(t){return r.coerceHoverinfo({hoverinfo:t},{_module:e._module},n)}}for(var s=0;s<t.length;s++){var l=t[s],c=l[0].trace;if(!i.traceIs(c,"pie-like")){var u=i.traceIs(c,"2dMap")?a:r.fillArray;u(c.hoverinfo,l,"hi",o(c)),c.hovertemplate&&u(c.hovertemplate,l,"ht"),c.hoverlabel&&(u(c.hoverlabel.bgcolor,l,"hbg"),u(c.hoverlabel.bordercolor,l,"hbc"),u(c.hoverlabel.font.size,l,"hts"),u(c.hoverlabel.font.color,l,"htc"),u(c.hoverlabel.font.family,l,"htf"),u(c.hoverlabel.font.weight,l,"htw"),u(c.hoverlabel.font.style,l,"hty"),u(c.hoverlabel.font.variant,l,"htv"),u(c.hoverlabel.namelength,l,"hnl"),u(c.hoverlabel.align,l,"hta"))}}}},24667:(e,t,n)=>{"use strict";var r=n(3360),i=n(11545).hover;e.exports=function(e,t,n){var a=r.getComponentMethod("annotations","onClick")(e,e._hoverdata);function o(){e.emit("plotly_click",{points:e._hoverdata,event:t})}void 0!==n&&i(e,t,n,!0),e._hoverdata&&t&&t.target&&(a&&a.then?a.then(o):o(),t.stopImmediatePropagation&&t.stopImmediatePropagation())}},21722:e=>{"use strict";e.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},46814:(e,t,n)=>{"use strict";var r=n(56319),i=n(88006),a=n(79752);e.exports=function(e,t,n,o){var s=r.extendFlat({},o.hoverlabel);t.hovertemplate&&(s.namelength=-1),a(e,t,(function(n,a){return r.coerce(e,t,i,n,a)}),s)}},44790:(e,t,n)=>{"use strict";var r=n(56319);t.getSubplot=function(e){return e.subplot||e.xaxis+e.yaxis||e.geo},t.isTraceInSubplots=function(e,n){if("splom"===e.type){for(var r=e.xaxes||[],i=e.yaxes||[],a=0;a<r.length;a++)for(var o=0;o<i.length;o++)if(-1!==n.indexOf(r[a]+i[o]))return!0;return!1}return-1!==n.indexOf(t.getSubplot(e))},t.flat=function(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=t;return n},t.p2c=function(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r].p2c(t);return n},t.getDistanceFunction=function(e,n,r,i){return"closest"===e?i||t.quadrature(n,r):"x"===e.charAt(0)?n:r},t.getClosest=function(e,t,n){if(!1!==n.index)n.index>=0&&n.index<e.length?n.distance=0:n.index=!1;else for(var r=0;r<e.length;r++){var i=t(e[r]);i<=n.distance&&(n.index=r,n.distance=i)}return n},t.inbox=function(e,t,n){return e*t<0||0===e?n:1/0},t.quadrature=function(e,t){return function(n){var r=e(n),i=t(n);return Math.sqrt(r*r+i*i)}},t.makeEventData=function(e,n,r){var i="index"in e?e.index:e.pointNumber,a={data:n._input,fullData:n,curveNumber:n.index,pointNumber:i};if(n._indexToPoints){var o=n._indexToPoints[i];1===o.length?a.pointIndex=o[0]:a.pointIndices=o}else a.pointIndex=i;return n._module.eventData?a=n._module.eventData(a,e,n,r,i):("xVal"in e?a.x=e.xVal:"x"in e&&(a.x=e.x),"yVal"in e?a.y=e.yVal:"y"in e&&(a.y=e.y),e.xa&&(a.xaxis=e.xa),e.ya&&(a.yaxis=e.ya),void 0!==e.zLabelVal&&(a.z=e.zLabelVal)),t.appendArrayPointValue(a,n,i),a},t.appendArrayPointValue=function(e,t,n){var i=t._arrayAttrs;if(i)for(var s=0;s<i.length;s++){var l=i[s],c=a(l);if(void 0===e[c]){var u=o(r.nestedProperty(t,l).get(),n);void 0!==u&&(e[c]=u)}}},t.appendArrayMultiPointValues=function(e,t,n){var i=t._arrayAttrs;if(i)for(var s=0;s<i.length;s++){var l=i[s],c=a(l);if(void 0===e[c]){for(var u=r.nestedProperty(t,l).get(),f=new Array(n.length),d=0;d<n.length;d++)f[d]=o(u,n[d]);e[c]=f}}};var i={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function a(e){return i[e]||e}function o(e,t){return Array.isArray(t)?Array.isArray(e)&&Array.isArray(e[t[0]])?e[t[0]][t[1]]:void 0:e[t]}var s={x:!0,y:!0},l={"x unified":!0,"y unified":!0};t.isUnifiedHover=function(e){return"string"==typeof e&&!!l[e]},t.isXYhover=function(e){return"string"==typeof e&&!!s[e]}},11545:(e,t,n)=>{"use strict";var r=n(93268),i=n(5605),a=n(3707),o=n(56319),s=o.pushUnique,l=o.strTranslate,c=o.strRotate,u=n(76246),f=n(56953),d=n(4336),h=n(14797),p=n(53408),m=n(85605),g=n(596),v=n(56596).zindexSeparator,y=n(3360),b=n(44790),x=n(21722),_=n(36008),w=n(79724),A=x.YANGLE,k=Math.PI*A/180,E=1/Math.sin(k),T=Math.cos(k),M=Math.sin(k),S=x.HOVERARROWSIZE,C=x.HOVERTEXTPAD,O={box:!0,ohlc:!0,violin:!0,candlestick:!0},R={scatter:!0,scattergl:!0,splom:!0};function N(e,t){return e.distance-t.distance}function L(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa?e.xa._id:"",e.ya?e.ya._id:""].join(",")}t.hover=function(e,t,n,a){e=o.getGraphDiv(e);var l=t.target;o.throttle(e._fullLayout._uid+x.HOVERID,x.HOVERMINTIME,(function(){!function(e,t,n,a,l){n||(n="xy");"string"==typeof n&&(n=n.split(v)[0]);var c,f,h,x=Array.isArray(n)?n:[n],_=e._fullLayout,w=_.hoversubplots,A=_._plots||[],k=A[n],T=_._has("cartesian"),M=t.hovermode||_.hovermode,C="x"===(M||"").charAt(0),D="y"===(M||"").charAt(0);if(T&&(C||D)&&"axis"===w)for(var I=x.length,$=0;$<I;$++)if(A[c=x[$]]){f=g.getFromId(e,c,"x"),h=g.getFromId(e,c,"y");var W=(C?f:h)._subplotsWith;if(W&&W.length)for(var G=0;G<W.length;G++)s(x,W[G])}if(k&&"single"!==w){var Y=k.overlays.map((function(e){return e.id}));x=x.concat(Y)}for(var X=x.length,K=new Array(X),Z=new Array(X),J=!1,Q=0;Q<X;Q++)if(A[c=x[Q]])J=!0,K[Q]=A[c].xaxis,Z[Q]=A[c].yaxis;else{if(!_[c]||!_[c]._subplot)return void o.warn("Unrecognized subplot: "+c);var ee=_[c]._subplot;K[Q]=ee.xaxis,Z[Q]=ee.yaxis}M&&!J&&(M="closest");if(-1===["x","y","closest","x unified","y unified"].indexOf(M)||!e.calcdata||e.querySelector(".zoombox")||e._dragging)return m.unhoverRaw(e,t);var te=_.hoverdistance;-1===te&&(te=1/0);var ne=_.spikedistance;-1===ne&&(ne=1/0);var re,ie,ae,oe,se,le,ce,ue,fe,de,he,pe,me,ge=[],ve=[],ye={hLinePoint:null,vLinePoint:null},be=!1;if(Array.isArray(t))for(M="array",ae=0;ae<t.length;ae++)(se=e.calcdata[t[ae].curveNumber||0])&&(le=se[0].trace,"skip"!==se[0].trace.hoverinfo&&(ve.push(se),"h"===le.orientation&&(be=!0)));else{var xe,_e,we=e.calcdata.slice();for(we.sort((function(e,t){return(e[0].trace.zorder||0)-(t[0].trace.zorder||0)})),oe=0;oe<we.length;oe++)se=we[oe],"skip"!==(le=se[0].trace).hoverinfo&&b.isTraceInSubplots(le,x)&&(ve.push(se),"h"===le.orientation&&(be=!0));if(!l)xe="xpx"in t?t.xpx:K[0]._length/2,_e="ypx"in t?t.ypx:Z[0]._length/2;else{if(!1===u.triggerHandler(e,"plotly_beforehover",t))return;var Ae=l.getBoundingClientRect();xe=t.clientX-Ae.left,_e=t.clientY-Ae.top,_._calcInverseTransform(e);var ke=o.apply3DTransform(_._invTransform)(xe,_e);if(xe=ke[0],_e=ke[1],xe<0||xe>K[0]._length||_e<0||_e>Z[0]._length)return m.unhoverRaw(e,t)}if(t.pointerX=xe+K[0]._offset,t.pointerY=_e+Z[0]._offset,re="xval"in t?b.flat(x,t.xval):b.p2c(K,xe),ie="yval"in t?b.flat(x,t.yval):b.p2c(Z,_e),!i(re[0])||!i(ie[0]))return o.warn("Fx.hover failed",t,e),m.unhoverRaw(e,t)}var Ee=1/0;function Te(n,r){for(oe=0;oe<ve.length;oe++)if((se=ve[oe])&&se[0]&&se[0].trace&&!0===(le=se[0].trace).visible&&0!==le._length&&-1===["carpet","contourcarpet"].indexOf(le._module.name)){if(fe=M,b.isUnifiedHover(fe)&&(fe=fe.charAt(0)),"splom"===le.type?ce=x[ue=0]:(ce=b.getSubplot(le),ue=x.indexOf(ce)),pe={cd:se,trace:le,xa:K[ue],ya:Z[ue],maxHoverDistance:te,maxSpikeDistance:ne,index:!1,distance:Math.min(Ee,te),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:p.defaultLine,name:le.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},_[ce]&&(pe.subplot=_[ce]._subplot),_._splomScenes&&_._splomScenes[le.uid]&&(pe.scene=_._splomScenes[le.uid]),"array"===fe){var a=t[oe];"pointNumber"in a?(pe.index=a.pointNumber,fe="closest"):(fe="","xval"in a&&(de=a.xval,fe="x"),"yval"in a&&(he=a.yval,fe=fe?"closest":"y"))}else void 0!==n&&void 0!==r?(de=n,he=r):(de=re[ue],he=ie[ue]);if(me=ge.length,0!==te)if(le._module&&le._module.hoverPoints){var s=le._module.hoverPoints(pe,de,he,fe,{finiteRange:!0,hoverLayer:_._hoverlayer,hoversubplots:w,gd:e});if(s)for(var l,c=0;c<s.length;c++)l=s[c],i(l.x0)&&i(l.y0)&&ge.push(j(l,M))}else o.log("Unrecognized trace type in hover:",le);if("closest"===M&&ge.length>me&&(ge.splice(0,me),Ee=ge[0].distance),T&&0!==ne&&0===ge.length){pe.distance=ne,pe.index=!1;var u=le._module.hoverPoints(pe,de,he,"closest",{hoverLayer:_._hoverlayer});if(u&&(u=u.filter((function(e){return e.spikeDistance<=ne}))),u&&u.length){var f,d=u.filter((function(e){return e.xa.showspikes&&"hovered data"!==e.xa.spikesnap}));if(d.length){var h=d[0];i(h.x0)&&i(h.y0)&&(f=Se(h),(!ye.vLinePoint||ye.vLinePoint.spikeDistance>f.spikeDistance)&&(ye.vLinePoint=f))}var m=u.filter((function(e){return e.ya.showspikes&&"hovered data"!==e.ya.spikesnap}));if(m.length){var g=m[0];i(g.x0)&&i(g.y0)&&(f=Se(g),(!ye.hLinePoint||ye.hLinePoint.spikeDistance>f.spikeDistance)&&(ye.hLinePoint=f))}}}}}function Me(e,t,n){for(var r,i=null,a=1/0,o=0;o<e.length;o++)f&&f._id!==e[o].xa._id||h&&h._id!==e[o].ya._id||(r=e[o].spikeDistance,n&&0===o&&(r=-1/0),r<=a&&r<=t&&(i=e[o],a=r));return i}function Se(e){return e?{xa:e.xa,ya:e.ya,x:void 0!==e.xSpike?e.xSpike:(e.x0+e.x1)/2,y:void 0!==e.ySpike?e.ySpike:(e.y0+e.y1)/2,distance:e.distance,spikeDistance:e.spikeDistance,curveNumber:e.trace.index,color:e.color,pointNumber:e.index}:null}Te();var Ce={fullLayout:_,container:_._hoverlayer,event:t},Oe=e._spikepoints,Re={vLinePoint:ye.vLinePoint,hLinePoint:ye.hLinePoint};e._spikepoints=Re;var Ne=function(){var e=ge.filter((function(e){return f&&f._id===e.xa._id&&h&&h._id===e.ya._id})),t=ge.filter((function(e){return!(f&&f._id===e.xa._id&&h&&h._id===e.ya._id)}));e.sort(N),t.sort(N),ge=function(e,t){for(var n=t.charAt(0),r=[],i=[],a=[],o=0;o<e.length;o++){var s=e[o];y.traceIs(s.trace,"bar-like")||y.traceIs(s.trace,"box-violin")?a.push(s):s.trace[n+"period"]?i.push(s):r.push(s)}return r.concat(i).concat(a)}(ge=e.concat(t),M)};Ne();var Le=M.charAt(0),De=("x"===Le||"y"===Le)&&ge[0]&&R[ge[0].trace.type];if(T&&0!==ne&&0!==ge.length){var Pe=Me(ge.filter((function(e){return e.ya.showspikes})),ne,De);ye.hLinePoint=Se(Pe);var Ie=Me(ge.filter((function(e){return e.xa.showspikes})),ne,De);ye.vLinePoint=Se(Ie)}if(0===ge.length){var Fe=m.unhoverRaw(e,t);return!T||null===ye.hLinePoint&&null===ye.vLinePoint||U(Oe)&&B(e,ye,Ce),Fe}T&&U(Oe)&&B(e,ye,Ce);if(b.isXYhover(fe)&&0!==ge[0].length&&"splom"!==ge[0].trace.type){var ze=ge[0],je=(ge=O[ze.trace.type]?ge.filter((function(e){return e.trace.index===ze.trace.index})):[ze]).length;Te(q("x",ze,_),q("y",ze,_));var Be,Ue=[],$e={},qe=0,He=function(e){var t=O[e.trace.type]?L(e):e.trace.index;if($e[t]){var n=$e[t]-1,r=Ue[n];n>0&&Math.abs(e.distance)<Math.abs(r.distance)&&(Ue[n]=e)}else qe++,$e[t]=qe,Ue.push(e)};for(Be=0;Be<je;Be++)He(ge[Be]);for(Be=ge.length-1;Be>je-1;Be--)He(ge[Be]);ge=Ue,Ne()}var Ve=e._hoverdata,We=[],Ge=H(e),Ye=V(e);for(ae=0;ae<ge.length;ae++){var Xe=ge[ae],Ke=b.makeEventData(Xe,Xe.trace,Xe.cd);if(!1!==Xe.hovertemplate){var Ze=!1;Xe.cd[Xe.index]&&Xe.cd[Xe.index].ht&&(Ze=Xe.cd[Xe.index].ht),Xe.hovertemplate=Ze||Xe.trace.hovertemplate||!1}if(Xe.xa&&Xe.ya){var Je=Xe.x0+Xe.xa._offset,Qe=Xe.x1+Xe.xa._offset,et=Xe.y0+Xe.ya._offset,tt=Xe.y1+Xe.ya._offset,nt=Math.min(Je,Qe),rt=Math.max(Je,Qe),it=Math.min(et,tt),at=Math.max(et,tt);Ke.bbox={x0:nt+Ye,x1:rt+Ye,y0:it+Ge,y1:at+Ge}}Xe.eventData=[Ke],We.push(Ke)}e._hoverdata=We;var ot="y"===M&&(ve.length>1||ge.length>1)||"closest"===M&&be&&ge.length>1,st=p.combine(_.plot_bgcolor||p.background,_.paper_bgcolor),lt=P(ge,{gd:e,hovermode:M,rotateLabels:ot,bgColor:st,container:_._hoverlayer,outerContainer:_._paper.node(),commonLabelOpts:_.hoverlabel,hoverdistance:_.hoverdistance}),ct=lt.hoverLabels;b.isUnifiedHover(M)||(!function(e,t,n,r){var i,a,o,s,l,c,u,f=t?"xa":"ya",d=t?"ya":"xa",h=0,p=1,m=e.size(),g=new Array(m),v=0,y=r.minX,b=r.maxX,x=r.minY,_=r.maxY,w=function(e){return e*n._invScaleX},A=function(e){return e*n._invScaleY};function k(e){var t=e[0],n=e[e.length-1];if(a=t.pmin-t.pos-t.dp+t.size,o=n.pos+n.dp+n.size-t.pmax,a>.01){for(l=e.length-1;l>=0;l--)e[l].dp+=a;i=!1}if(!(o<.01)){if(a<-.01){for(l=e.length-1;l>=0;l--)e[l].dp-=o;i=!1}if(i){var r=0;for(s=0;s<e.length;s++)(c=e[s]).pos+c.dp+c.size>t.pmax&&r++;for(s=e.length-1;s>=0&&!(r<=0);s--)(c=e[s]).pos>t.pmax-1&&(c.del=!0,r--);for(s=0;s<e.length&&!(r<=0);s++)if((c=e[s]).pos<t.pmin+1)for(c.del=!0,r--,o=2*c.size,l=e.length-1;l>=0;l--)e[l].dp-=o;for(s=e.length-1;s>=0&&!(r<=0);s--)(c=e[s]).pos+c.dp+c.size>t.pmax&&(c.del=!0,r--)}}}e.each((function(e){var r=e[f],i=e[d],a="x"===r._id.charAt(0),o=r.range;0===v&&o&&o[0]>o[1]!==a&&(p=-1);var s=0,l=a?n.width:n.height;if("x"===n.hovermode||"y"===n.hovermode){var c,u,h=F(e,t),m=e.anchor,k="end"===m?-1:1;if("middle"===m)u=(c=e.crossPos+(a?A(h.y-e.by/2):w(e.bx/2+e.tx2width/2)))+(a?A(e.by):w(e.bx));else if(a)u=(c=e.crossPos+A(S+h.y)-A(e.by/2-S))+A(e.by);else{var T=w(k*S+h.x),M=T+w(k*e.bx);c=e.crossPos+Math.min(T,M),u=e.crossPos+Math.max(T,M)}a?void 0!==x&&void 0!==_&&Math.min(u,_)-Math.max(c,x)>1&&("left"===i.side?(s=i._mainLinePosition,l=n.width):l=i._mainLinePosition):void 0!==y&&void 0!==b&&Math.min(u,b)-Math.max(c,y)>1&&("top"===i.side?(s=i._mainLinePosition,l=n.height):l=i._mainLinePosition)}g[v++]=[{datum:e,traceIndex:e.trace.index,dp:0,pos:e.pos,posref:e.posref,size:e.by*(a?E:1)/2,pmin:s,pmax:l}]})),g.sort((function(e,t){return e[0].posref-t[0].posref||p*(t[0].traceIndex-e[0].traceIndex)}));for(;!i&&h<=m;){for(h++,i=!0,s=0;s<g.length-1;){var T=g[s],M=g[s+1],C=T[T.length-1],O=M[0];if((a=C.pos+C.dp+C.size-O.pos-O.dp+O.size)>.01){for(l=M.length-1;l>=0;l--)M[l].dp+=a;for(T.push.apply(T,M),g.splice(s+1,1),u=0,l=T.length-1;l>=0;l--)u+=T[l].dp;for(o=u/T.length,l=T.length-1;l>=0;l--)T[l].dp-=o;i=!1}else s++}g.forEach(k)}for(s=g.length-1;s>=0;s--){var R=g[s];for(l=R.length-1;l>=0;l--){var N=R[l],L=N.datum;L.offset=N.dp,L.del=N.del}}}(ct,ot,_,lt.commonLabelBoundingBox),z(ct,ot,_._invScaleX,_._invScaleY));if(l&&l.tagName){var ut=y.getComponentMethod("annotations","hasClickToShow")(e,We);d(r.select(l),ut?"pointer":"")}if(!l||a||!function(e,t,n){if(!n||n.length!==e._hoverdata.length)return!0;for(var r=n.length-1;r>=0;r--){var i=n[r],a=e._hoverdata[r];if(i.curveNumber!==a.curveNumber||String(i.pointNumber)!==String(a.pointNumber)||String(i.pointNumbers)!==String(a.pointNumbers))return!0}return!1}(e,0,Ve))return;Ve&&e.emit("plotly_unhover",{event:t,points:Ve});e.emit("plotly_hover",{event:t,points:e._hoverdata,xaxes:K,yaxes:Z,xvals:re,yvals:ie})}(e,t,n,a,l)}))},t.loneHover=function(e,t){var n=!0;Array.isArray(e)||(n=!1,e=[e]);var i=t.gd,a=H(i),o=V(i),s=!1,l=P(e.map((function(e){var n=e._x0||e.x0||e.x||0,r=e._x1||e.x1||e.x||0,s=e._y0||e.y0||e.y||0,l=e._y1||e.y1||e.y||0,c=e.eventData;if(c){var u=Math.min(n,r),f=Math.max(n,r),d=Math.min(s,l),h=Math.max(s,l),m=e.trace;if(y.traceIs(m,"gl3d")){var g=i._fullLayout[m.scene]._scene.container,v=g.offsetLeft,b=g.offsetTop;u+=v,f+=v,d+=b,h+=b}c.bbox={x0:u+o,x1:f+o,y0:d+a,y1:h+a},t.inOut_bbox&&t.inOut_bbox.push(c.bbox)}else c=!1;return{color:e.color||p.defaultLine,x0:e.x0||e.x||0,x1:e.x1||e.x||0,y0:e.y0||e.y||0,y1:e.y1||e.y||0,xLabel:e.xLabel,yLabel:e.yLabel,zLabel:e.zLabel,text:e.text,name:e.name,idealAlign:e.idealAlign,borderColor:e.borderColor,fontFamily:e.fontFamily,fontSize:e.fontSize,fontColor:e.fontColor,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontVariant:e.fontVariant,nameLength:e.nameLength,textAlign:e.textAlign,trace:e.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:e.hovertemplate||!1,hovertemplateLabels:e.hovertemplateLabels||!1,eventData:c}})),{gd:i,hovermode:"closest",rotateLabels:s,bgColor:t.bgColor||p.background,container:r.select(t.container),outerContainer:t.outerContainer||t.container}).hoverLabels,c=0,u=0;return l.sort((function(e,t){return e.y0-t.y0})).each((function(e,n){var r=e.y0-e.by/2;e.offset=r-5<c?c-r+5:0,c=r+e.by+e.offset,n===t.anchorIndex&&(u=e.offset)})).each((function(e){e.offset-=u})),z(l,s,i._fullLayout._invScaleX,i._fullLayout._invScaleY),n?l:l.node()};var D=/<extra>([\s\S]*)<\/extra>/;function P(e,t){var n=t.gd,i=n._fullLayout,a=t.hovermode,s=t.rotateLabels,u=t.bgColor,d=t.container,m=t.outerContainer,g=t.commonLabelOpts||{};if(0===e.length)return[[]];var v=t.fontFamily||x.HOVERFONT,k=t.fontSize||x.HOVERFONTSIZE,E=t.fontWeight||i.font.weight,T=t.fontStyle||i.font.style,M=t.fontVariant||i.font.variant,O=t.fontTextcase||i.font.textcase,R=t.fontLineposition||i.font.lineposition,N=t.fontShadow||i.font.shadow,D=e[0],P=D.xa,F=D.ya,z=a.charAt(0),j=z+"Label",B=D[j];if(void 0===B&&"multicategory"===P.type)for(var U=0;U<e.length&&void 0===(B=e[U][j]);U++);var $=W(n,m),q=$.top,H=$.width,V=$.height,G=void 0!==B&&D.distance<=t.hoverdistance&&("x"===a||"y"===a);if(G){var Y,X,K=!0;for(Y=0;Y<e.length;Y++)if(K&&void 0===e[Y].zLabel&&(K=!1),X=e[Y].hoverinfo||e[Y].trace.hoverinfo){var Z=Array.isArray(X)?X:X.split("+");if(-1===Z.indexOf("all")&&-1===Z.indexOf(a)){G=!1;break}}K&&(G=!1)}var J=d.selectAll("g.axistext").data(G?[0]:[]);J.enter().append("g").classed("axistext",!0),J.exit().remove();var Q={minX:0,maxX:0,minY:0,maxY:0};if(J.each((function(){var e=r.select(this),t=o.ensureSingle(e,"path","",(function(e){e.style({"stroke-width":"1px"})})),s=o.ensureSingle(e,"text","",(function(e){e.attr("data-notex",1)})),c=g.bgcolor||p.defaultLine,u=g.bordercolor||p.contrast(c),d=p.contrast(c),m=g.font,y={weight:m.weight||E,style:m.style||T,variant:m.variant||M,textcase:m.textcase||O,lineposition:m.lineposition||R,shadow:m.shadow||N,family:m.family||v,size:m.size||k,color:m.color||d};t.style({fill:c,stroke:u}),s.text(B).call(h.font,y).call(f.positionText,0,0).call(f.convertToTspans,n),e.attr("transform","");var b,x,_=W(n,s.node());if("x"===a){var w="top"===P.side?"-":"";s.attr("text-anchor","middle").call(f.positionText,0,"top"===P.side?q-_.bottom-S-C:q-_.top+S+C),b=P._offset+(D.x0+D.x1)/2,x=F._offset+("top"===P.side?0:F._length);var A=_.width/2+C,L=b;b<A?L=A:b>i.width-A&&(L=i.width-A),t.attr("d","M"+(b-L)+",0L"+(b-L+S)+","+w+S+"H"+A+"v"+w+(2*C+_.height)+"H"+-A+"V"+w+S+"H"+(b-L-S)+"Z"),b=L,Q.minX=b-A,Q.maxX=b+A,"top"===P.side?(Q.minY=x-(2*C+_.height),Q.maxY=x-C):(Q.minY=x+C,Q.maxY=x+(2*C+_.height))}else{var I,z,j;"right"===F.side?(I="start",z=1,j="",b=P._offset+P._length):(I="end",z=-1,j="-",b=P._offset),x=F._offset+(D.y0+D.y1)/2,s.attr("text-anchor",I),t.attr("d","M0,0L"+j+S+","+S+"V"+(C+_.height/2)+"h"+j+(2*C+_.width)+"V-"+(C+_.height/2)+"H"+j+S+"V-"+S+"Z"),Q.minY=x-(C+_.height/2),Q.maxY=x+(C+_.height/2),"right"===F.side?(Q.minX=b+S,Q.maxX=b+S+(2*C+_.width)):(Q.minX=b-S-(2*C+_.width),Q.maxX=b-S);var U,$=_.height/2,H=q-_.top-$,V="clip"+i._uid+"commonlabel"+F._id;if(b<_.width+2*C+S){U="M-"+(S+C)+"-"+$+"h-"+(_.width-C)+"V"+$+"h"+(_.width-C)+"Z";var G=_.width-b+C;f.positionText(s,G,H),"end"===I&&s.selectAll("tspan").each((function(){var e=r.select(this),t=h.tester.append("text").text(e.text()).call(h.font,y),i=W(n,t.node());Math.round(i.width)<Math.round(_.width)&&e.attr("x",G-i.width),t.remove()}))}else f.positionText(s,z*(C+S),H),U=null;var Y=i._topclips.selectAll("#"+V).data(U?[0]:[]);Y.enter().append("clipPath").attr("id",V).append("path"),Y.exit().remove(),Y.select("path").attr("d",U),h.setClipUrl(s,U?V:null,n)}e.attr("transform",l(b,x))})),b.isUnifiedHover(a)){d.selectAll("g.hovertext").remove();var ee=e.filter((function(e){return"none"!==e.hoverinfo}));if(0===ee.length)return[];var te=i.hoverlabel,ne=te.font,re={showlegend:!0,legend:{title:{text:B,font:ne},font:ne,bgcolor:te.bgcolor,bordercolor:te.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:i.legend?i.legend.traceorder:void 0,orientation:"v"}},ie={font:ne};_(re,ie,n._fullData);var ae=ie.legend;ae.entries=[];for(var oe=0;oe<ee.length;oe++){var se=ee[oe];if("none"!==se.hoverinfo){var le=I(se,!0,a,i,B),ce=le[0],ue=le[1];se.name=ue,se.text=""!==ue?ue+" : "+ce:ce;var fe=se.cd[se.index];fe&&(fe.mc&&(se.mc=fe.mc),fe.mcc&&(se.mc=fe.mcc),fe.mlc&&(se.mlc=fe.mlc),fe.mlcc&&(se.mlc=fe.mlcc),fe.mlw&&(se.mlw=fe.mlw),fe.mrc&&(se.mrc=fe.mrc),fe.dir&&(se.dir=fe.dir)),se._distinct=!0,ae.entries.push([se])}}ae.entries.sort((function(e,t){return e[0].trace.index-t[0].trace.index})),ae.layer=d,ae._inHover=!0,ae._groupTitleFont=te.grouptitlefont,w(n,ae);var de,he,pe,me,ge=d.select("g.legend"),ve=W(n,ge.node()),ye=ve.width+2*C,be=ve.height+2*C,xe=ee[0],_e=(xe.x0+xe.x1)/2,we=(xe.y0+xe.y1)/2,Ae=!(y.traceIs(xe.trace,"bar-like")||y.traceIs(xe.trace,"box-violin"));"y"===z?Ae?(he=we-C,de=we+C):(he=Math.min.apply(null,ee.map((function(e){return Math.min(e.y0,e.y1)}))),de=Math.max.apply(null,ee.map((function(e){return Math.max(e.y0,e.y1)})))):he=de=o.mean(ee.map((function(e){return(e.y0+e.y1)/2})))-be/2,"x"===z?Ae?(pe=_e+C,me=_e-C):(pe=Math.max.apply(null,ee.map((function(e){return Math.max(e.x0,e.x1)}))),me=Math.min.apply(null,ee.map((function(e){return Math.min(e.x0,e.x1)})))):pe=me=o.mean(ee.map((function(e){return(e.x0+e.x1)/2})))-ye/2;var ke,Ee,Te=P._offset,Me=F._offset;return me+=Te-ye,he+=Me-be,ke=(pe+=Te)+ye<H&&pe>=0?pe:me+ye<H&&me>=0?me:Te+ye<H?Te:pe-_e<_e-me+ye?H-ye:0,ke+=C,Ee=(de+=Me)+be<V&&de>=0?de:he+be<V&&he>=0?he:Me+be<V?Me:de-we<we-he+be?V-be:0,Ee+=C,ge.attr("transform",l(ke-1,Ee-1)),ge}var Se=d.selectAll("g.hovertext").data(e,(function(e){return L(e)}));return Se.enter().append("g").classed("hovertext",!0).each((function(){var e=r.select(this);e.append("rect").call(p.fill,p.addOpacity(u,.8)),e.append("text").classed("name",!0),e.append("path").style("stroke-width","1px"),e.append("text").classed("nums",!0).call(h.font,{weight:E,style:T,variant:M,textcase:O,lineposition:R,shadow:N,family:v,size:k})})),Se.exit().remove(),Se.each((function(e){var t=r.select(this).attr("transform",""),o=e.color;Array.isArray(o)&&(o=o[e.eventData[0].pointNumber]);var d=e.bgcolor||o,m=p.combine(p.opacity(d)?d:p.defaultLine,u),g=p.combine(p.opacity(o)?o:p.defaultLine,u),y=e.borderColor||p.contrast(m),b=I(e,G,a,i,B,t),x=b[0],_=b[1],w=t.select("text.nums").call(h.font,{family:e.fontFamily||v,size:e.fontSize||k,color:e.fontColor||y,weight:e.fontWeight||E,style:e.fontStyle||T,variant:e.fontVariant||M,textcase:e.fontTextcase||O,lineposition:e.fontLineposition||R,shadow:e.fontShadow||N}).text(x).attr("data-notex",1).call(f.positionText,0,0).call(f.convertToTspans,n),L=t.select("text.name"),D=0,P=0;if(_&&_!==x){L.call(h.font,{family:e.fontFamily||v,size:e.fontSize||k,color:g,weight:e.fontWeight||E,style:e.fontStyle||T,variant:e.fontVariant||M,textcase:e.fontTextcase||O,lineposition:e.fontLineposition||R,shadow:e.fontShadow||N}).text(_).attr("data-notex",1).call(f.positionText,0,0).call(f.convertToTspans,n);var F=W(n,L.node());D=F.width+2*C,P=F.height+2*C}else L.remove(),t.select("rect").remove();t.select("path").style({fill:m,stroke:y});var z=e.xa._offset+(e.x0+e.x1)/2,j=e.ya._offset+(e.y0+e.y1)/2,U=Math.abs(e.x1-e.x0),$=Math.abs(e.y1-e.y0),Y=W(n,w.node()),X=Y.width/i._invScaleX,K=Y.height/i._invScaleY;e.ty0=(q-Y.top)/i._invScaleY,e.bx=X+2*C,e.by=Math.max(K+2*C,P),e.anchor="start",e.txwidth=X,e.tx2width=D,e.offset=0;var Z,J,Q=(X+S+C+D)*i._invScaleX;if(s)e.pos=z,Z=j+$/2+Q<=V,J=j-$/2-Q>=0,"top"!==e.idealAlign&&Z||!J?Z?(j+=$/2,e.anchor="start"):e.anchor="middle":(j-=$/2,e.anchor="end"),e.crossPos=j;else{if(e.pos=j,Z=z+U/2+Q<=H,J=z-U/2-Q>=0,"left"!==e.idealAlign&&Z||!J)if(Z)z+=U/2,e.anchor="start";else{e.anchor="middle";var ee=Q/2,te=z+ee-H,ne=z-ee;te>0&&(z-=te),ne<0&&(z+=-ne)}else z-=U/2,e.anchor="end";e.crossPos=z}w.attr("text-anchor",e.anchor),D&&L.attr("text-anchor",e.anchor),t.attr("transform",l(z,j)+(s?c(A):""))})),{hoverLabels:Se,commonLabelBoundingBox:Q}}function I(e,t,n,r,i,a){var s="",l="";void 0!==e.nameOverride&&(e.name=e.nameOverride),e.name&&(e.trace._meta&&(e.name=o.templateString(e.name,e.trace._meta)),s=$(e.name,e.nameLength));var c=n.charAt(0),u="x"===c?"y":"x";void 0!==e.zLabel?(void 0!==e.xLabel&&(l+="x: "+e.xLabel+"<br>"),void 0!==e.yLabel&&(l+="y: "+e.yLabel+"<br>"),"choropleth"!==e.trace.type&&"choroplethmapbox"!==e.trace.type&&"choroplethmap"!==e.trace.type&&(l+=(l?"z: ":"")+e.zLabel)):t&&e[c+"Label"]===i?l=e[u+"Label"]||"":void 0===e.xLabel?void 0!==e.yLabel&&"scattercarpet"!==e.trace.type&&(l=e.yLabel):l=void 0===e.yLabel?e.xLabel:"("+e.xLabel+", "+e.yLabel+")",!e.text&&0!==e.text||Array.isArray(e.text)||(l+=(l?"<br>":"")+e.text),void 0!==e.extraText&&(l+=(l?"<br>":"")+e.extraText),a&&""===l&&!e.hovertemplate&&(""===s&&a.remove(),l=s);var f=e.hovertemplate||!1;if(f){var d=e.hovertemplateLabels||e;e[c+"Label"]!==i&&(d[c+"other"]=d[c+"Val"],d[c+"otherLabel"]=d[c+"Label"]),l=(l=o.hovertemplateString(f,d,r._d3locale,e.eventData[0]||{},e.trace._meta)).replace(D,(function(t,n){return s=$(n,e.nameLength),""}))}return[l,s]}function F(e,t){var n=0,r=e.offset;return t&&(r*=-M,n=e.offset*T),{x:n,y:r}}function z(e,t,n,i){var a=function(e){return e*n},o=function(e){return e*i};e.each((function(e){var n=r.select(this);if(e.del)return n.remove();var i,s,l,c,u=n.select("text.nums"),d=e.anchor,p="end"===d?-1:1,m=(s={start:1,end:-1,middle:0}[(i=e).anchor],c=(l=s*(S+C))+s*(i.txwidth+C),"middle"===i.anchor&&(l-=i.tx2width/2,c+=i.txwidth/2+C),{alignShift:s,textShiftX:l,text2ShiftX:c}),g=F(e,t),v=g.x,y=g.y,b="middle"===d;n.select("path").attr("d",b?"M-"+a(e.bx/2+e.tx2width/2)+","+o(y-e.by/2)+"h"+a(e.bx)+"v"+o(e.by)+"h-"+a(e.bx)+"Z":"M0,0L"+a(p*S+v)+","+o(S+y)+"v"+o(e.by/2-S)+"h"+a(p*e.bx)+"v-"+o(e.by)+"H"+a(p*S+v)+"V"+o(y-S)+"Z");var x=v+m.textShiftX,_=y+e.ty0-e.by/2+C,w=e.textAlign||"auto";"auto"!==w&&("left"===w&&"start"!==d?(u.attr("text-anchor","start"),x=b?-e.bx/2-e.tx2width/2+C:-e.bx-C):"right"===w&&"end"!==d&&(u.attr("text-anchor","end"),x=b?e.bx/2-e.tx2width/2-C:e.bx+C)),u.call(f.positionText,a(x),o(_)),e.tx2width&&(n.select("text.name").call(f.positionText,a(m.text2ShiftX+m.alignShift*C+v),o(y+e.ty0-e.by/2+C)),n.select("rect").call(h.setRect,a(m.text2ShiftX+(m.alignShift-1)*e.tx2width/2+v),o(y-e.by/2-1),a(e.tx2width),o(e.by+2)))}))}function j(e,t){var n=e.index,r=e.trace||{},a=e.cd[0],s=e.cd[n]||{};function l(e){return e||i(e)&&0===e}var c=Array.isArray(n)?function(e,t){var i=o.castOption(a,n,e);return l(i)?i:o.extractOption({},r,"",t)}:function(e,t){return o.extractOption(s,r,e,t)};function u(t,n,r){var i=c(n,r);l(i)&&(e[t]=i)}if(u("hoverinfo","hi","hoverinfo"),u("bgcolor","hbg","hoverlabel.bgcolor"),u("borderColor","hbc","hoverlabel.bordercolor"),u("fontFamily","htf","hoverlabel.font.family"),u("fontSize","hts","hoverlabel.font.size"),u("fontColor","htc","hoverlabel.font.color"),u("fontWeight","htw","hoverlabel.font.weight"),u("fontStyle","hty","hoverlabel.font.style"),u("fontVariant","htv","hoverlabel.font.variant"),u("nameLength","hnl","hoverlabel.namelength"),u("textAlign","hta","hoverlabel.align"),e.posref="y"===t||"closest"===t&&"h"===r.orientation?e.xa._offset+(e.x0+e.x1)/2:e.ya._offset+(e.y0+e.y1)/2,e.x0=o.constrain(e.x0,0,e.xa._length),e.x1=o.constrain(e.x1,0,e.xa._length),e.y0=o.constrain(e.y0,0,e.ya._length),e.y1=o.constrain(e.y1,0,e.ya._length),void 0!==e.xLabelVal&&(e.xLabel="xLabel"in e?e.xLabel:g.hoverLabelText(e.xa,e.xLabelVal,r.xhoverformat),e.xVal=e.xa.c2d(e.xLabelVal)),void 0!==e.yLabelVal&&(e.yLabel="yLabel"in e?e.yLabel:g.hoverLabelText(e.ya,e.yLabelVal,r.yhoverformat),e.yVal=e.ya.c2d(e.yLabelVal)),void 0!==e.zLabelVal&&void 0===e.zLabel&&(e.zLabel=String(e.zLabelVal)),!(isNaN(e.xerr)||"log"===e.xa.type&&e.xerr<=0)){var f=g.tickText(e.xa,e.xa.c2l(e.xerr),"hover").text;void 0!==e.xerrneg?e.xLabel+=" +"+f+" / -"+g.tickText(e.xa,e.xa.c2l(e.xerrneg),"hover").text:e.xLabel+="  "+f,"x"===t&&(e.distance+=1)}if(!(isNaN(e.yerr)||"log"===e.ya.type&&e.yerr<=0)){var d=g.tickText(e.ya,e.ya.c2l(e.yerr),"hover").text;void 0!==e.yerrneg?e.yLabel+=" +"+d+" / -"+g.tickText(e.ya,e.ya.c2l(e.yerrneg),"hover").text:e.yLabel+="  "+d,"y"===t&&(e.distance+=1)}var h=e.hoverinfo||e.trace.hoverinfo;return h&&"all"!==h&&(-1===(h=Array.isArray(h)?h:h.split("+")).indexOf("x")&&(e.xLabel=void 0),-1===h.indexOf("y")&&(e.yLabel=void 0),-1===h.indexOf("z")&&(e.zLabel=void 0),-1===h.indexOf("text")&&(e.text=void 0),-1===h.indexOf("name")&&(e.name=void 0)),e}function B(e,t,n){var r,i,o=n.container,s=n.fullLayout,l=s._size,c=n.event,u=!!t.hLinePoint,f=!!t.vLinePoint;if(o.selectAll(".spikeline").remove(),f||u){var d=p.combine(s.plot_bgcolor,s.paper_bgcolor);if(u){var m,v,y=t.hLinePoint;r=y&&y.xa,"cursor"===(i=y&&y.ya).spikesnap?(m=c.pointerX,v=c.pointerY):(m=r._offset+y.x,v=i._offset+y.y);var b,x,_=a.readability(y.color,d)<1.5?p.contrast(d):y.color,w=i.spikemode,A=i.spikethickness,k=i.spikecolor||_,E=g.getPxPosition(e,i);if(-1!==w.indexOf("toaxis")||-1!==w.indexOf("across")){if(-1!==w.indexOf("toaxis")&&(b=E,x=m),-1!==w.indexOf("across")){var T=i._counterDomainMin,M=i._counterDomainMax;"free"===i.anchor&&(T=Math.min(T,i.position),M=Math.max(M,i.position)),b=l.l+T*l.w,x=l.l+M*l.w}o.insert("line",":first-child").attr({x1:b,x2:x,y1:v,y2:v,"stroke-width":A,stroke:k,"stroke-dasharray":h.dashStyle(i.spikedash,A)}).classed("spikeline",!0).classed("crisp",!0),o.insert("line",":first-child").attr({x1:b,x2:x,y1:v,y2:v,"stroke-width":A+2,stroke:d}).classed("spikeline",!0).classed("crisp",!0)}-1!==w.indexOf("marker")&&o.insert("circle",":first-child").attr({cx:E+("right"!==i.side?A:-A),cy:v,r:A,fill:k}).classed("spikeline",!0)}if(f){var S,C,O=t.vLinePoint;r=O&&O.xa,i=O&&O.ya,"cursor"===r.spikesnap?(S=c.pointerX,C=c.pointerY):(S=r._offset+O.x,C=i._offset+O.y);var R,N,L=a.readability(O.color,d)<1.5?p.contrast(d):O.color,D=r.spikemode,P=r.spikethickness,I=r.spikecolor||L,F=g.getPxPosition(e,r);if(-1!==D.indexOf("toaxis")||-1!==D.indexOf("across")){if(-1!==D.indexOf("toaxis")&&(R=F,N=C),-1!==D.indexOf("across")){var z=r._counterDomainMin,j=r._counterDomainMax;"free"===r.anchor&&(z=Math.min(z,r.position),j=Math.max(j,r.position)),R=l.t+(1-j)*l.h,N=l.t+(1-z)*l.h}o.insert("line",":first-child").attr({x1:S,x2:S,y1:R,y2:N,"stroke-width":P,stroke:I,"stroke-dasharray":h.dashStyle(r.spikedash,P)}).classed("spikeline",!0).classed("crisp",!0),o.insert("line",":first-child").attr({x1:S,x2:S,y1:R,y2:N,"stroke-width":P+2,stroke:d}).classed("spikeline",!0).classed("crisp",!0)}-1!==D.indexOf("marker")&&o.insert("circle",":first-child").attr({cx:S,cy:F-("top"!==r.side?P:-P),r:P,fill:I}).classed("spikeline",!0)}}}function U(e,t){return!t||(t.vLinePoint!==e._spikepoints.vLinePoint||t.hLinePoint!==e._spikepoints.hLinePoint)}function $(e,t){return f.plainText(e||"",{len:t,allowedTags:["br","sub","sup","b","i","em","s","u"]})}function q(e,t,n){var r=t[e+"a"],i=t[e+"Val"],a=t.cd[0];if("category"===r.type||"multicategory"===r.type)i=r._categoriesMap[i];else if("date"===r.type){var o=t.trace[e+"periodalignment"];if(o){var s=t.cd[t.index],l=s[e+"Start"];void 0===l&&(l=s[e]);var c=s[e+"End"];void 0===c&&(c=s[e]);var u=c-l;"end"===o?i+=u:"middle"===o&&(i+=u/2)}i=r.d2c(i)}return a&&a.t&&a.t.posLetter===r._id&&("group"!==n.boxmode&&"group"!==n.violinmode||(i+=a.t.dPos)),i}function H(e){return e.offsetTop+e.clientTop}function V(e){return e.offsetLeft+e.clientLeft}function W(e,t){var n=e._fullLayout,r=t.getBoundingClientRect(),i=r.left,a=r.top,s=i+r.width,l=a+r.height,c=o.apply3DTransform(n._invTransform)(i,a),u=o.apply3DTransform(n._invTransform)(s,l),f=c[0],d=c[1],h=u[0],p=u[1];return{x:f,y:d,width:h-f,height:p-d,top:Math.min(d,p),left:Math.min(f,h),right:Math.max(f,h),bottom:Math.max(d,p)}}},79752:(e,t,n)=>{"use strict";var r=n(56319),i=n(53408),a=n(44790).isUnifiedHover;e.exports=function(e,t,n,o){o=o||{};var s=t.legend;function l(e){o.font[e]||(o.font[e]=s?t.legend.font[e]:t.font[e])}t&&a(t.hovermode)&&(o.font||(o.font={}),l("size"),l("family"),l("color"),l("weight"),l("style"),l("variant"),s?(o.bgcolor||(o.bgcolor=i.combine(t.legend.bgcolor,t.paper_bgcolor)),o.bordercolor||(o.bordercolor=t.legend.bordercolor)):o.bgcolor||(o.bgcolor=t.paper_bgcolor)),n("hoverlabel.bgcolor",o.bgcolor),n("hoverlabel.bordercolor",o.bordercolor),n("hoverlabel.namelength",o.namelength),r.coerceFont(n,"hoverlabel.font",o.font),n("hoverlabel.align",o.align)}},14271:(e,t,n)=>{"use strict";var r=n(56319),i=n(97557);e.exports=function(e,t){function n(n,a){return void 0!==t[n]?t[n]:r.coerce(e,t,i,n,a)}return n("clickmode"),n("hoversubplots"),n("hovermode")}},17911:(e,t,n)=>{"use strict";var r=n(93268),i=n(56319),a=n(85605),o=n(44790),s=n(97557),l=n(11545);e.exports={moduleType:"component",name:"fx",constants:n(21722),schema:{layout:s},attributes:n(88006),layoutAttributes:s,supplyLayoutGlobalDefaults:n(93968),supplyDefaults:n(46814),supplyLayoutDefaults:n(5986),calc:n(39138),getDistanceFunction:o.getDistanceFunction,getClosest:o.getClosest,inbox:o.inbox,quadrature:o.quadrature,appendArrayPointValue:o.appendArrayPointValue,castHoverOption:function(e,t,n){return i.castOption(e,t,"hoverlabel."+n)},castHoverinfo:function(e,t,n){return i.castOption(e,n,"hoverinfo",(function(n){return i.coerceHoverinfo({hoverinfo:n},{_module:e._module},t)}))},hover:l.hover,unhover:a.unhover,loneHover:l.loneHover,loneUnhover:function(e){var t=i.isD3Selection(e)?e:r.select(e);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()},click:n(24667)}},97557:(e,t,n)=>{"use strict";var r=n(21722),i=n(95323),a=i({editType:"none",description:"Sets the default hover label font used by all traces on the graph."});a.family.dflt=r.HOVERFONT,a.size.dflt=r.HOVERFONTSIZE,e.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"],description:["Determines the mode of single click interactions.","*event* is the default value and emits the `plotly_click`","event. In addition this mode emits the `plotly_selected` event","in drag modes *lasso* and *select*, but with no event data attached","(kept for compatibility reasons).","The *select* flag enables selecting single","data points via click. This mode also supports persistent selections,","meaning that pressing Shift while clicking, adds to / subtracts from an","existing selection. *select* with `hovermode`: *x* can be confusing, consider","explicitly setting `hovermode`: *closest* when using this feature.","Selection events are sent accordingly as long as *event* flag is set as well.","When the *event* flag is missing, `plotly_click` and `plotly_selected`","events are not fired."].join(" ")},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar",description:["Determines the mode of drag interactions.","*select* and *lasso* apply only to scatter traces with","markers or text. *orbit* and *turntable* apply only to","3D scenes."].join(" ")},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar",description:["Determines the mode of hover interactions.","If *closest*, a single hoverlabel will appear","for the *closest* point within the `hoverdistance`.","If *x* (or *y*), multiple hoverlabels will appear for multiple points","at the *closest* x- (or y-) coordinate within the `hoverdistance`,","with the caveat that no more than one hoverlabel will appear per trace.","If *x unified* (or *y unified*), a single hoverlabel will appear","multiple points at the closest x- (or y-) coordinate within the `hoverdistance`","with the caveat that no more than one hoverlabel will appear per trace.","In this mode, spikelines are enabled by default perpendicular to the specified axis.","If false, hover interactions are disabled."].join(" ")},hoversubplots:{valType:"enumerated",values:["single","overlaying","axis"],dflt:"overlaying",editType:"none",description:["Determines expansion of hover effects to other subplots","If *single* just the axis pair of the primary point is included without overlaying subplots.","If *overlaying* all subplots using the main axis and occupying the same space are included.","If *axis*, also include stacked subplots using the same axis","when `hovermode` is set to *x*, *x unified*, *y* or *y unified*."].join(" ")},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none",description:["Sets the default distance (in pixels) to look for data","to add hover labels (-1 means no cutoff, 0 means no looking for data).","This is only a real distance for hovering on point-like objects,","like scatter points. For area-like objects (bars, scatter fills, etc)","hovering is on inside the area and off outside, but these objects","will not supersede hover on point-like objects in case of conflict."].join(" ")},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none",description:["Sets the default distance (in pixels) to look for data to draw","spikelines to (-1 means no cutoff, 0 means no looking for data).","As with hoverdistance, distance does not apply to area-like objects.","In addition, some objects can be hovered on but will not generate","spikelines, such as scatter fills."].join(" ")},hoverlabel:{bgcolor:{valType:"color",editType:"none",description:["Sets the background color of all hover labels on graph"].join(" ")},bordercolor:{valType:"color",editType:"none",description:["Sets the border color of all hover labels on graph."].join(" ")},font:a,grouptitlefont:i({editType:"none",description:["Sets the font for group titles in hover (unified modes).","Defaults to `hoverlabel.font`."].join(" ")}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none",description:["Sets the horizontal alignment of the text content within hover label box.","Has an effect only if the hover label text spans more two or more lines"].join(" ")},namelength:{valType:"integer",min:-1,dflt:15,editType:"none",description:["Sets the default length (in number of characters) of the trace name in","the hover labels for all traces. -1 shows the whole name","regardless of length. 0-3 shows the first 0-3 characters, and","an integer >3 will show the whole name if it is less than that","many characters, but if it is longer, will truncate to","`namelength - 3` characters and add an ellipsis."].join(" ")},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",description:["When `dragmode` is set to *select*, this limits the selection of the drag to","horizontal, vertical or diagonal. *h* only allows horizontal selection,","*v* only vertical, *d* only diagonal and *any* sets no limit."].join(" "),editType:"none"}}},5986:(e,t,n)=>{"use strict";var r=n(56319),i=n(97557),a=n(14271),o=n(79752);e.exports=function(e,t){function n(n,a){return r.coerce(e,t,i,n,a)}a(e,t)&&(n("hoverdistance"),n("spikedistance")),"select"===n("dragmode")&&n("selectdirection");var s=t._has("mapbox"),l=t._has("map"),c=t._has("geo"),u=t._basePlotModules.length;"zoom"===t.dragmode&&((s||l||c)&&1===u||(s||l)&&c&&2===u)&&(t.dragmode="pan"),o(e,t,n),r.coerceFont(n,"hoverlabel.grouptitlefont",t.hoverlabel.font)}},93968:(e,t,n)=>{"use strict";var r=n(56319),i=n(79752),a=n(97557);e.exports=function(e,t){i(e,t,(function(n,i){return r.coerce(e,t,a,n,i)}))}},55961:(e,t,n)=>{"use strict";var r=n(56319),i=n(11800).counter,a=n(18874).u,o=n(56596).idRegex,s=n(65210),l={rows:{valType:"integer",min:1,editType:"plot",description:["The number of rows in the grid. If you provide a 2D `subplots`","array or a `yaxes` array, its length is used as the default.","But it's also possible to have a different length, if you","want to leave a row at the end for non-cartesian subplots."].join(" ")},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot",description:["Is the first row the top or the bottom? Note that columns","are always enumerated from left to right."].join(" ")},columns:{valType:"integer",min:1,editType:"plot",description:["The number of columns in the grid. If you provide a 2D `subplots`","array, the length of its longest row is used as the default.","If you give an `xaxes` array, its length is used as the default.","But it's also possible to have a different length, if you","want to leave a row at the end for non-cartesian subplots."].join(" ")},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[i("xy").toString(),""],editType:"plot"},editType:"plot",description:["Used for freeform grids, where some axes may be shared across subplots","but others are not. Each entry should be a cartesian subplot id, like","*xy* or *x3y2*, or ** to leave that cell empty. You may reuse x axes","within the same column, and y axes within the same row.","Non-cartesian subplots and traces that support `domain` can place themselves","in this grid separately using the `gridcell` attribute."].join(" ")},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[o.x.toString(),""],editType:"plot"},editType:"plot",description:["Used with `yaxes` when the x and y axes are shared across columns and rows.","Each entry should be an x axis id like *x*, *x2*, etc., or ** to","not put an x axis in that column. Entries other than ** must be unique.","Ignored if `subplots` is present. If missing but `yaxes` is present,","will generate consecutive IDs."].join(" ")},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[o.y.toString(),""],editType:"plot"},editType:"plot",description:["Used with `yaxes` when the x and y axes are shared across columns and rows.","Each entry should be an y axis id like *y*, *y2*, etc., or ** to","not put a y axis in that row. Entries other than ** must be unique.","Ignored if `subplots` is present. If missing but `xaxes` is present,","will generate consecutive IDs."].join(" ")},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot",description:["If no `subplots`, `xaxes`, or `yaxes` are given but we do have `rows` and `columns`,","we can generate defaults using consecutive axis IDs, in two ways:","*coupled* gives one x axis per column and one y axis per row.","*independent* uses a new xy pair for each cell, left-to-right across each row","then iterating rows according to `roworder`."].join(" ")},xgap:{valType:"number",min:0,max:1,editType:"plot",description:["Horizontal space between grid cells, expressed as a fraction","of the total width available to one cell. Defaults to 0.1","for coupled-axes grids and 0.2 for independent grids."].join(" ")},ygap:{valType:"number",min:0,max:1,editType:"plot",description:["Vertical space between grid cells, expressed as a fraction","of the total height available to one cell. Defaults to 0.1","for coupled-axes grids and 0.3 for independent grids."].join(" ")},domain:a({name:"grid",editType:"plot",noGridCell:!0},{description:["The first and last cells end exactly at the domain","edges, with no grout around the edges."].join(" ")}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot",description:["Sets where the x axis labels and titles go. *bottom* means","the very bottom of the grid. *bottom plot* is the lowest plot","that each x axis is used in. *top* and *top plot* are similar."].join(" ")},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot",description:["Sets where the y axis labels and titles go. *left* means","the very left edge of the grid. *left plot* is the leftmost plot","that each y axis is used in. *right* and *right plot* are similar."].join(" ")},editType:"plot"};function c(e,t,n){var r=t[n+"axes"],i=Object.keys((e._splomAxes||{})[n]||{});return Array.isArray(r)?r:i.length?i:void 0}function u(e,t,n,r,i,a){var o=t(e+"gap",n),s=t("domain."+e);t(e+"side",r);for(var l=new Array(i),c=s[0],u=(s[1]-c)/(i-o),f=u*(1-o),d=0;d<i;d++){var h=c+u*d;l[a?i-1-d:d]=[h,h+f]}return l}function f(e,t,n,r,i){var a,o=new Array(n);function s(e,n){-1!==t.indexOf(n)&&void 0===r[n]?(o[e]=n,r[n]=e):o[e]=""}if(Array.isArray(e))for(a=0;a<n;a++)s(a,e[a]);else for(s(0,i),a=1;a<n;a++)s(a,i+(a+1));return o}e.exports={moduleType:"component",name:"grid",schema:{layout:{grid:l}},layoutAttributes:l,sizeDefaults:function(e,t){var n=e.grid||{},i=c(t,n,"x"),a=c(t,n,"y");if(e.grid||i||a){var o,f,d=Array.isArray(n.subplots)&&Array.isArray(n.subplots[0]),h=Array.isArray(i),p=Array.isArray(a),m=h&&i!==n.xaxes&&p&&a!==n.yaxes;d?(o=n.subplots.length,f=n.subplots[0].length):(p&&(o=a.length),h&&(f=i.length));var g=s.newContainer(t,"grid"),v=k("rows",o),y=k("columns",f);if(v*y>1){if(!d&&!h&&!p)"independent"===k("pattern")&&(d=!0);g._hasSubplotGrid=d;var b,x,_="top to bottom"===k("roworder"),w=d?.2:.1,A=d?.3:.1;m&&t._splomGridDflt&&(b=t._splomGridDflt.xside,x=t._splomGridDflt.yside),g._domains={x:u("x",k,w,b,y),y:u("y",k,A,x,v,_)}}else delete t.grid}function k(e,t){return r.coerce(n,g,l,e,t)}},contentDefaults:function(e,t){var n=t.grid;if(n&&n._domains){var r,i,a,o,s,l,u,d=e.grid||{},h=t._subplots,p=n._hasSubplotGrid,m=n.rows,g=n.columns,v="independent"===n.pattern,y=n._axisMap={};if(p){var b=d.subplots||[];l=n.subplots=new Array(m);var x=1;for(r=0;r<m;r++){var _=l[r]=new Array(g),w=b[r]||[];for(i=0;i<g;i++)if(v?(s=1===x?"xy":"x"+x+"y"+x,x++):s=w[i],_[i]="",-1!==h.cartesian.indexOf(s)){if(u=s.indexOf("y"),a=s.slice(0,u),o=s.slice(u),void 0!==y[a]&&y[a]!==i||void 0!==y[o]&&y[o]!==r)continue;_[i]=s,y[a]=i,y[o]=r}}}else{var A=c(t,d,"x"),k=c(t,d,"y");n.xaxes=f(A,h.xaxis,g,y,"x"),n.yaxes=f(k,h.yaxis,m,y,"y")}var E=n._anchors={},T="top to bottom"===n.roworder;for(var M in y){var S,C,O,R=M.charAt(0),N=n[R+"side"];if(N.length<8)E[M]="free";else if("x"===R){if("t"===N.charAt(0)===T?(S=0,C=1,O=m):(S=m-1,C=-1,O=-1),p){var L=y[M];for(r=S;r!==O;r+=C)if((s=l[r][L])&&(u=s.indexOf("y"),s.slice(0,u)===M)){E[M]=s.slice(u);break}}else for(r=S;r!==O;r+=C)if(o=n.yaxes[r],-1!==h.cartesian.indexOf(M+o)){E[M]=o;break}}else if("l"===N.charAt(0)?(S=0,C=1,O=g):(S=g-1,C=-1,O=-1),p){var D=y[M];for(r=S;r!==O;r+=C)if((s=l[D][r])&&(u=s.indexOf("y"),s.slice(u)===M)){E[M]=s.slice(0,u);break}}else for(r=S;r!==O;r+=C)if(a=n.xaxes[r],-1!==h.cartesian.indexOf(a+M)){E[M]=a;break}}}}}},24110:(e,t,n)=>{"use strict";var r=n(56596),i=n(65210).templatedArray,a=n(53939);e.exports=i("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw",description:["Determines whether or not this image is visible."].join(" ")},source:{valType:"string",editType:"arraydraw",description:["Specifies the URL of the image to be used.","The URL must be accessible from the domain where the","plot code is run, and can be either relative or absolute."].join(" ")},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw",description:["Specifies whether images are drawn below or above traces.","When `xref` and `yref` are both set to `paper`,","image is drawn below the entire plot area."].join(" ")},sizex:{valType:"number",dflt:0,editType:"arraydraw",description:["Sets the image container size horizontally.","The image will be sized based on the `position` value.","When `xref` is set to `paper`, units are sized relative","to the plot width.","When `xref` ends with ` domain`, units are sized relative","to the axis width."].join(" ")},sizey:{valType:"number",dflt:0,editType:"arraydraw",description:["Sets the image container size vertically.","The image will be sized based on the `position` value.","When `yref` is set to `paper`, units are sized relative","to the plot height.","When `yref` ends with ` domain`, units are sized relative","to the axis height."].join(" ")},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw",description:["Specifies which dimension of the image to constrain."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw",description:"Sets the opacity of the image."},x:{valType:"any",dflt:0,editType:"arraydraw",description:["Sets the image's x position.","When `xref` is set to `paper`, units are sized relative","to the plot height.","See `xref` for more info"].join(" ")},y:{valType:"any",dflt:0,editType:"arraydraw",description:["Sets the image's y position.","When `yref` is set to `paper`, units are sized relative","to the plot height.","See `yref` for more info"].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw",description:"Sets the anchor for the x position"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw",description:"Sets the anchor for the y position."},xref:{valType:"enumerated",values:["paper",r.idRegex.x.toString()],dflt:"paper",editType:"arraydraw",description:["Sets the images's x coordinate axis.",a.axisRefDescription("x","left","right")].join(" ")},yref:{valType:"enumerated",values:["paper",r.idRegex.y.toString()],dflt:"paper",editType:"arraydraw",description:["Sets the images's y coordinate axis.",a.axisRefDescription("y","bottom","top")].join(" ")},editType:"arraydraw"})},59581:(e,t,n)=>{"use strict";var r=n(5605),i=n(55521);e.exports=function(e,t,n,a){t=t||{};var o="log"===n&&"linear"===t.type,s="linear"===n&&"log"===t.type;if(o||s)for(var l,c,u=e._fullLayout.images,f=t._id.charAt(0),d=0;d<u.length;d++)if(c="images["+d+"].",(l=u[d])[f+"ref"]===t._id){var h=l[f],p=l["size"+f],m=null,g=null;if(o){m=i(h,t.range);var v=p/Math.pow(10,m)/2;g=2*Math.log(v+Math.sqrt(1+v*v))/Math.LN10}else g=(m=Math.pow(10,h))*(Math.pow(10,p/2)-Math.pow(10,-p/2));r(m)?r(g)||(g=null):(m=null,g=null),a(c+f,m),a(c+"size"+f,g)}}},22617:(e,t,n)=>{"use strict";var r=n(56319),i=n(596),a=n(75078),o=n(24110);function s(e,t,n){function a(n,i){return r.coerce(e,t,o,n,i)}var s=a("source");if(!a("visible",!!s))return t;a("layer"),a("xanchor"),a("yanchor"),a("sizex"),a("sizey"),a("sizing"),a("opacity");for(var l={_fullLayout:n},c=["x","y"],u=0;u<2;u++){var f=c[u],d=i.coerceRef(e,t,l,f,"paper",void 0);if("paper"!==d)i.getFromId(l,d)._imgIndices.push(t._index);i.coercePosition(t,l,a,d,f,0)}return t}e.exports=function(e,t){a(e,t,{name:"images",handleItemDefaults:s})}},30897:(e,t,n)=>{"use strict";var r=n(93268),i=n(14797),a=n(596),o=n(33489),s=n(81818);e.exports=function(e){var t,n,l=e._fullLayout,c=[],u={},f=[];for(n=0;n<l.images.length;n++){var d=l.images[n];if(d.visible)if("below"===d.layer&&"paper"!==d.xref&&"paper"!==d.yref){t=o.ref2id(d.xref)+o.ref2id(d.yref);var h=l._plots[t];if(!h){f.push(d);continue}h.mainplot&&(t=h.mainplot.id),u[t]||(u[t]=[]),u[t].push(d)}else"above"===d.layer?c.push(d):f.push(d)}var p={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},m={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function g(t){var n=r.select(this);if(this._imgSrc!==t.source)if(n.attr("xmlns",s.svg),t.source&&"data:"===t.source.slice(0,5))n.attr("xlink:href",t.source),this._imgSrc=t.source;else{var i=new Promise(function(e){var r=new Image;function i(){n.remove(),e()}this.img=r,r.setAttribute("crossOrigin","anonymous"),r.onerror=i,r.onload=function(){var t=document.createElement("canvas");t.width=this.width,t.height=this.height,t.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var r=t.toDataURL("image/png");n.attr("xlink:href",r),e()},n.on("error",i),r.src=t.source,this._imgSrc=t.source}.bind(this));e._promises.push(i)}}function v(t){var n,o,s=r.select(this),c=a.getFromId(e,t.xref),u=a.getFromId(e,t.yref),f="domain"===a.getRefType(t.xref),d="domain"===a.getRefType(t.yref),h=l._size;n=void 0!==c?"string"==typeof t.xref&&f?c._length*t.sizex:Math.abs(c.l2p(t.sizex)-c.l2p(0)):t.sizex*h.w,o=void 0!==u?"string"==typeof t.yref&&d?u._length*t.sizey:Math.abs(u.l2p(t.sizey)-u.l2p(0)):t.sizey*h.h;var g,v,y=n*p[t.xanchor].offset,b=o*m[t.yanchor].offset,x=p[t.xanchor].sizing+m[t.yanchor].sizing;switch(g=void 0!==c?"string"==typeof t.xref&&f?c._length*t.x+c._offset:c.r2p(t.x)+c._offset:t.x*h.w+h.l,g+=y,v=void 0!==u?"string"==typeof t.yref&&d?u._length*(1-t.y)+u._offset:u.r2p(t.y)+u._offset:h.h-t.y*h.h+h.t,v+=b,t.sizing){case"fill":x+=" slice";break;case"stretch":x="none"}s.attr({x:g,y:v,width:n,height:o,preserveAspectRatio:x,opacity:t.opacity});var _=(c&&"domain"!==a.getRefType(t.xref)?c._id:"")+(u&&"domain"!==a.getRefType(t.yref)?u._id:"");i.setClipUrl(s,_?"clip"+l._uid+_:null,e)}var y=l._imageLowerLayer.selectAll("image").data(f),b=l._imageUpperLayer.selectAll("image").data(c);y.enter().append("image"),b.enter().append("image"),y.exit().remove(),b.exit().remove(),y.each((function(e){g.bind(this)(e),v.bind(this)(e)})),b.each((function(e){g.bind(this)(e),v.bind(this)(e)}));var x=Object.keys(l._plots);for(n=0;n<x.length;n++){t=x[n];var _=l._plots[t];if(_.imagelayer){var w=_.imagelayer.selectAll("image").data(u[t]||[]);w.enter().append("image"),w.exit().remove(),w.each((function(e){g.bind(this)(e),v.bind(this)(e)}))}}}},12047:(e,t,n)=>{"use strict";e.exports={moduleType:"component",name:"images",layoutAttributes:n(24110),supplyLayoutDefaults:n(22617),includeBasePlot:n(62740)("images"),draw:n(30897),convertCoords:n(59581)}},5679:(e,t,n)=>{"use strict";var r=n(95323),i=n(37811);e.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend",description:["Determines whether or not this legend is visible."].join(" ")},bgcolor:{valType:"color",editType:"legend",description:["Sets the legend background color.","Defaults to `layout.paper_bgcolor`."].join(" ")},bordercolor:{valType:"color",dflt:i.defaultLine,editType:"legend",description:"Sets the color of the border enclosing the legend."},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend",description:"Sets the width (in px) of the border enclosing the legend."},font:r({editType:"legend",description:"Sets the font used to text the legend items."}),grouptitlefont:r({editType:"legend",description:["Sets the font for group titles in legend.","Defaults to `legend.font` with its size increased about 10%."].join(" ")}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend",description:"Sets the orientation of the legend."},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend",description:["Determines the order at which the legend items are displayed.","If *normal*, the items are displayed top-to-bottom in the same","order as the input data.","If *reversed*, the items are displayed in the opposite order","as *normal*.","If *grouped*, the items are displayed in groups","(when a trace `legendgroup` is provided).","if *grouped+reversed*, the items are displayed in the opposite order","as *grouped*."].join(" ")},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend",description:["Sets the amount of vertical space (in px) between legend groups."].join(" ")},entrywidth:{valType:"number",min:0,editType:"legend",description:["Sets the width (in px or fraction) of the legend.","Use 0 to size the entry based on the text width,","when `entrywidthmode` is set to *pixels*."].join(" ")},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend",description:"Determines what entrywidth means."},indentation:{valType:"number",min:-15,dflt:0,editType:"legend",description:"Sets the indentation (in px) of the legend entries."},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend",description:["Determines if the legend items symbols scale with their corresponding *trace* attributes","or remain *constant* independent of the symbol size on the graph."].join(" ")},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend",description:"Sets the width (in px) of the legend item symbols (the part other than the title.text)."},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend",description:["Determines the behavior on legend item click.","*toggle* toggles the visibility of the item clicked on the graph.","*toggleothers* makes the clicked item the sole visible item on the graph.","*false* disables legend item click interactions."].join(" ")},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend",description:["Determines the behavior on legend item double-click.","*toggle* toggles the visibility of the item clicked on the graph.","*toggleothers* makes the clicked item the sole visible item on the graph.","*false* disables legend item double-click interactions."].join(" ")},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend",description:["Determines the behavior on legend group item click.","*toggleitem* toggles the visibility of the individual item clicked on the graph.","*togglegroup* toggles the visibility of all items in the same legendgroup as the item clicked on the graph."].join(" ")},x:{valType:"number",editType:"legend",description:["Sets the x position with respect to `xref` (in normalized coordinates) of the legend.","When `xref` is *paper*, defaults to *1.02* for vertical legends and","defaults to *0* for horizontal legends.","When `xref` is *container*, defaults to *1* for vertical legends and","defaults to *0* for horizontal legends.","Must be between *0* and *1* if `xref` is *container*.","and between *-2* and *3* if `xref` is *paper*."].join(" ")},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `x` refers to.","*container* spans the entire `width` of the plot.","*paper* refers to the width of the plotting area only."].join(" ")},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend",description:["Sets the legend's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the legend.","Value *auto* anchors legends to the right for `x` values greater than or equal to 2/3,","anchors legends to the left for `x` values less than or equal to 1/3 and","anchors legends with respect to their center otherwise."].join(" ")},y:{valType:"number",editType:"legend",description:["Sets the y position with respect to `yref` (in normalized coordinates) of the legend.","When `yref` is *paper*, defaults to *1* for vertical legends,","defaults to *-0.1* for horizontal legends on graphs w/o range sliders and","defaults to *1.1* for horizontal legends on graph with one or multiple range sliders.","When `yref` is *container*, defaults to *1*.","Must be between *0* and *1* if `yref` is *container*","and between *-2* and *3* if `yref` is *paper*."].join(" ")},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `y` refers to.","*container* spans the entire `height` of the plot.","*paper* refers to the height of the plotting area only."].join(" ")},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend",description:["Sets the legend's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the legend.","Value *auto* anchors legends at their bottom for `y` values less than or equal to 1/3,","anchors legends to at their top for `y` values greater than or equal to 2/3 and","anchors legends with respect to their middle otherwise."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of legend-driven changes in trace and pie label","visibility. Defaults to `layout.uirevision`."].join(" ")},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend",description:["Sets the vertical alignment of the symbols with respect to their associated text."].join(" ")},title:{text:{valType:"string",dflt:"",editType:"legend",description:["Sets the title of the legend."].join(" ")},font:r({editType:"legend",description:["Sets this legend's title font.","Defaults to `legend.font` with its size increased about 20%."].join(" ")}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend",description:["Determines the location of legend's title","with respect to the legend items.","Defaulted to *top* with `orientation` is *h*.","Defaulted to *left* with `orientation` is *v*.","The *top left* options could be used to expand","top center and top right are for horizontal alignment","legend area in both x and y sides."].join(" ")},editType:"legend"},editType:"legend"}},26345:e=>{"use strict";e.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},36008:(e,t,n)=>{"use strict";var r=n(3360),i=n(56319),a=n(65210),o=n(85507),s=n(5679),l=n(39626),c=n(42801);function u(e,t,n,u){var f=t[e]||{},d=a.newContainer(n,e);function h(e,t){return i.coerce(f,d,s,e,t)}var p=i.coerceFont(h,"font",n.font);if(h("bgcolor",n.paper_bgcolor),h("bordercolor"),h("visible")){for(var m,g=function(e,t){var n=m._input,r=m;return i.coerce(n,r,o,e,t)},v=n.font||{},y=i.coerceFont(h,"grouptitlefont",v,{overrideDflt:{size:Math.round(1.1*v.size)}}),b=0,x=!1,_="normal",w=(n.shapes||[]).filter((function(e){return e.showlegend})),A=u.concat(w).filter((function(t){return e===(t.legend||"legend")})),k=0;k<A.length;k++)if((m=A[k]).visible){var E=m._isShape;(m.showlegend||m._dfltShowLegend&&!(m._module&&m._module.attributes&&m._module.attributes.showlegend&&!1===m._module.attributes.showlegend.dflt))&&(b++,m.showlegend&&(x=!0,(!E&&r.traceIs(m,"pie-like")||!0===m._input.showlegend)&&b++),i.coerceFont(g,"legendgrouptitle.font",y)),(!E&&r.traceIs(m,"bar")&&"stack"===n.barmode||-1!==["tonextx","tonexty"].indexOf(m.fill))&&(_=c.isGrouped({traceorder:_})?"grouped+reversed":"reversed"),void 0!==m.legendgroup&&""!==m.legendgroup&&(_=c.isReversed({traceorder:_})?"reversed+grouped":"grouped")}var T=i.coerce(t,n,l,"showlegend",x&&b>("legend"===e?1:0));if(!1===T&&(n[e]=void 0),(!1!==T||f.uirevision)&&(h("uirevision",n.uirevision),!1!==T)){h("borderwidth");var M,S,C,O="h"===h("orientation"),R="paper"===h("yref"),N="paper"===h("xref"),L="left";if(O?(M=0,r.getComponentMethod("rangeslider","isVisible")(t.xaxis)?R?(S=1.1,C="bottom"):(S=1,C="top"):R?(S=-.1,C="top"):(S=0,C="bottom")):(S=1,C="auto",N?M=1.02:(M=1,L="right")),i.coerce(f,d,{x:{valType:"number",editType:"legend",min:N?-2:0,max:N?3:1,dflt:M}},"x"),i.coerce(f,d,{y:{valType:"number",editType:"legend",min:R?-2:0,max:R?3:1,dflt:S}},"y"),h("traceorder",_),c.isGrouped(n[e])&&h("tracegroupgap"),h("entrywidth"),h("entrywidthmode"),h("indentation"),h("itemsizing"),h("itemwidth"),h("itemclick"),h("itemdoubleclick"),h("groupclick"),h("xanchor",L),h("yanchor",C),h("valign"),i.noneOrAll(f,d,["x","y"]),h("title.text")){h("title.side",O?"left":"top");var D=i.extendFlat({},p,{size:i.bigFont(p.size)});i.coerceFont(h,"title.font",D)}}}}e.exports=function(e,t,n){var r,a=n.slice(),o=t.shapes;if(o)for(r=0;r<o.length;r++){var s=o[r];if(s.showlegend){var l={_input:s._input,visible:s.visible,showlegend:s.showlegend,legend:s.legend};a.push(l)}}var c=["legend"];for(r=0;r<a.length;r++)i.pushUnique(c,a[r].legend);for(t._legends=[],r=0;r<c.length;r++){var f=c[r];u(f,e,t,a),t[f]&&t[f].visible&&(t[f]._id=f),t._legends.push(f)}}},79724:(e,t,n)=>{"use strict";var r=n(93268),i=n(56319),a=n(31496),o=n(3360),s=n(76246),l=n(85605),c=n(14797),u=n(53408),f=n(56953),d=n(47255),h=n(26345),p=n(12564),m=p.LINE_SPACING,g=p.FROM_TL,v=p.FROM_BR,y=n(26153),b=n(71893),x=n(42801),_=/^legend[0-9]*$/;function w(e,t){var n,s,d=t||{},p=e._fullLayout,_=R(d),w=d._inHover;if(w?(s=d.layer,n="hover"):(s=p._infolayer,n=_),s){var T;if(n+=p._uid,e._legendMouseDownTime||(e._legendMouseDownTime=0),w){if(!d.entries)return;T=y(d.entries,d)}else{for(var N=(e.calcdata||[]).slice(),L=p.shapes,D=0;D<L.length;D++){var P=L[D];if(P.showlegend){var I={_isShape:!0,_fullInput:P,index:P._index,name:P.name||P.label.text||"shape "+P._index,legend:P.legend,legendgroup:P.legendgroup,legendgrouptitle:P.legendgrouptitle,legendrank:P.legendrank,legendwidth:P.legendwidth,showlegend:P.showlegend,visible:P.visible,opacity:P.opacity,mode:"line"===P.type?"lines":"markers",line:P.line,marker:{line:P.line,color:P.fillcolor,size:12,symbol:"rect"===P.type?"square":"circle"===P.type?"circle":"hexagon2"}};N.push([{trace:I}])}}T=p.showlegend&&y(N,d,p._legends.length>1)}var F=p.hiddenlabels||[];if(!(w||p.showlegend&&T.length))return s.selectAll("."+_).remove(),p._topdefs.select("#"+n).remove(),a.autoMargin(e,_);var z=i.ensureSingle(s,"g",_,(function(e){w||e.attr("pointer-events","all")})),j=i.ensureSingleById(p._topdefs,"clipPath",n,(function(e){e.append("rect")})),B=i.ensureSingle(z,"rect","bg",(function(e){e.attr("shape-rendering","crispEdges")}));B.call(u.stroke,d.bordercolor).call(u.fill,d.bgcolor).style("stroke-width",d.borderwidth+"px");var U,$=i.ensureSingle(z,"g","scrollbox"),q=d.title;d._titleWidth=0,d._titleHeight=0,q.text?((U=i.ensureSingle($,"text",_+"titletext")).attr("text-anchor","start").call(c.font,q.font).text(q.text),S(U,$,e,d,1)):$.selectAll("."+_+"titletext").remove();var H=i.ensureSingle(z,"rect","scrollbar",(function(e){e.attr(h.scrollBarEnterAttrs).call(u.fill,h.scrollBarColor)})),V=$.selectAll("g.groups").data(T);V.enter().append("g").attr("class","groups"),V.exit().remove();var W=V.selectAll("g.traces").data(i.identity);W.enter().append("g").attr("class","traces"),W.exit().remove(),W.style("opacity",(function(e){var t=e[0].trace;return o.traceIs(t,"pie-like")?-1!==F.indexOf(e[0].label)?.5:1:"legendonly"===t.visible?.5:1})).each((function(){r.select(this).call(E,e,d)})).call(b,e,d).each((function(){w||r.select(this).call(M,e,_)})),i.syncOrAsync([a.previousPromises,function(){return function(e,t,n,i){var a=e._fullLayout,o=R(i);i||(i=a[o]);var s=a._size,l=x.isVertical(i),u=x.isGrouped(i),f="fraction"===i.entrywidthmode,d=i.borderwidth,p=2*d,m=h.itemGap,g=i.indentation+i.itemwidth+2*m,v=2*(d+m),y=O(i),b=i.y<0||0===i.y&&"top"===y,_=i.y>1||1===i.y&&"bottom"===y,w=i.tracegroupgap,k={};i._maxHeight=Math.max(b||_?a.height/2:s.h,30);var E=0;i._width=0,i._height=0;var T=function(e){var t=0,n=0,r=e.title.side;r&&(-1!==r.indexOf("left")&&(t=e._titleWidth),-1!==r.indexOf("top")&&(n=e._titleHeight));return[t,n]}(i);if(l)n.each((function(e){var t=e[0].height;c.setTranslate(this,d+T[0],d+T[1]+i._height+t/2+m),i._height+=t,i._width=Math.max(i._width,e[0].width)})),E=g+i._width,i._width+=m+g+p,i._height+=v,u&&(t.each((function(e,t){c.setTranslate(this,0,t*i.tracegroupgap)})),i._height+=(i._lgroupsLength-1)*i.tracegroupgap);else{var M=C(i),S=i.x<0||0===i.x&&"right"===M,N=i.x>1||1===i.x&&"left"===M,L=_||b,D=a.width/2;i._maxWidth=Math.max(S?L&&"left"===M?s.l+s.w:D:N?L&&"right"===M?s.r+s.w:D:s.w,2*g);var P=0,I=0;n.each((function(e){var t=A(e,i,g);P=Math.max(P,t),I+=t})),E=null;var F=0;if(u){var z=0,j=0,B=0;t.each((function(){var e=0,t=0;r.select(this).selectAll("g.traces").each((function(n){var r=A(n,i,g),a=n[0].height;c.setTranslate(this,T[0],T[1]+d+m+a/2+t),t+=a,e=Math.max(e,r),k[n[0].trace.legendgroup]=e}));var n=e+m;j>0&&n+d+j>i._maxWidth?(F=Math.max(F,j),j=0,B+=z+w,z=t):z=Math.max(z,t),c.setTranslate(this,j,B),j+=n})),i._width=Math.max(F,j)+d,i._height=B+z+v}else{var U=n.size(),$=I+p+(U-1)*m<i._maxWidth,q=0,H=0,V=0,W=0;n.each((function(e){var t=e[0].height,n=A(e,i,g),r=$?n:P;f||(r+=m),r+d+H-m>=i._maxWidth&&(F=Math.max(F,W),H=0,V+=q,i._height+=q,q=0),c.setTranslate(this,T[0]+d+H,T[1]+d+V+t/2+m),W=H+n+m,H+=r,q=Math.max(q,t)})),$?(i._width=H+p,i._height=q+v):(i._width=Math.max(F,W)+p,i._height+=q+v)}}i._width=Math.ceil(Math.max(i._width+T[0],i._titleWidth+2*(d+h.titlePad))),i._height=Math.ceil(Math.max(i._height+T[1],i._titleHeight+2*(d+h.itemGap))),i._effHeight=Math.min(i._height,i._maxHeight);var G=e._context.edits,Y=G.legendText||G.legendPosition;n.each((function(e){var t=r.select(this).select("."+o+"toggle"),n=e[0].height,a=e[0].trace.legendgroup,s=A(e,i,g);u&&""!==a&&(s=k[a]);var d=Y?g:E||s;l||f||(d+=m/2),c.setRect(t,0,-n/2,d,n)}))}(e,V,W,d)},function(){var t,u,y,b,x=p._size,A=d.borderwidth,E="paper"===d.xref,T="paper"===d.yref;if(q.text&&function(e,t,n){if("top center"===t.title.side||"top right"===t.title.side){var r=t.title.font.size*m,i=0,a=e.node(),o=c.bBox(a).width;"top center"===t.title.side?i=.5*(t._width-2*n-2*h.titlePad-o):"top right"===t.title.side&&(i=t._width-2*n-2*h.titlePad-o),f.positionText(e,n+h.titlePad+i,n+r)}}(U,d,A),!w){var M,S;M=E?x.l+x.w*d.x-g[C(d)]*d._width:p.width*d.x-g[C(d)]*d._width,S=T?x.t+x.h*(1-d.y)-g[O(d)]*d._effHeight:p.height*(1-d.y)-g[O(d)]*d._effHeight;var R=function(e,t,n,r){var i=e._fullLayout,o=i[t],s=C(o),l=O(o),c="paper"===o.xref,u="paper"===o.yref;e._fullLayout._reservedMargin[t]={};var f=o.y<.5?"b":"t",d=o.x<.5?"l":"r",h={r:i.width-n,l:n+o._width,b:i.height-r,t:r+o._effHeight};if(c&&u)return a.autoMargin(e,t,{x:o.x,y:o.y,l:o._width*g[s],r:o._width*v[s],b:o._effHeight*v[l],t:o._effHeight*g[l]});c?e._fullLayout._reservedMargin[t][f]=h[f]:u||"v"===o.orientation?e._fullLayout._reservedMargin[t][d]=h[d]:e._fullLayout._reservedMargin[t][f]=h[f]}(e,_,M,S);if(R)return;if(p.margin.autoexpand){var N=M,L=S;M=E?i.constrain(M,0,p.width-d._width):N,S=T?i.constrain(S,0,p.height-d._effHeight):L,M!==N&&i.log("Constrain "+_+".x to make legend fit inside graph"),S!==L&&i.log("Constrain "+_+".y to make legend fit inside graph")}c.setTranslate(z,M,S)}if(H.on(".drag",null),z.on("wheel",null),w||d._height<=d._maxHeight||e._context.staticPlot){var D=d._effHeight;w&&(D=d._height),B.attr({width:d._width-A,height:D-A,x:A/2,y:A/2}),c.setTranslate($,0,0),j.select("rect").attr({width:d._width-2*A,height:D-2*A,x:A,y:A}),c.setClipUrl($,n,e),c.setRect(H,0,0,0,0),delete d._scrollY}else{var P,I,F,V=Math.max(h.scrollBarMinHeight,d._effHeight*d._effHeight/d._height),W=d._effHeight-V-2*h.scrollBarMargin,G=d._height-d._effHeight,Y=W/G,X=Math.min(d._scrollY||0,G);B.attr({width:d._width-2*A+h.scrollBarWidth+h.scrollBarMargin,height:d._effHeight-A,x:A/2,y:A/2}),j.select("rect").attr({width:d._width-2*A+h.scrollBarWidth+h.scrollBarMargin,height:d._effHeight-2*A,x:A,y:A+X}),c.setClipUrl($,n,e),J(X,V,Y),z.on("wheel",(function(){J(X=i.constrain(d._scrollY+r.event.deltaY/W*G,0,G),V,Y),0!==X&&X!==G&&r.event.preventDefault()}));var K=r.behavior.drag().on("dragstart",(function(){var e=r.event.sourceEvent;P="touchstart"===e.type?e.changedTouches[0].clientY:e.clientY,F=X})).on("drag",(function(){var e=r.event.sourceEvent;2===e.buttons||e.ctrlKey||(I="touchmove"===e.type?e.changedTouches[0].clientY:e.clientY,X=function(e,t,n){var r=(n-t)/Y+e;return i.constrain(r,0,G)}(F,P,I),J(X,V,Y))}));H.call(K);var Z=r.behavior.drag().on("dragstart",(function(){var e=r.event.sourceEvent;"touchstart"===e.type&&(P=e.changedTouches[0].clientY,F=X)})).on("drag",(function(){var e=r.event.sourceEvent;"touchmove"===e.type&&(I=e.changedTouches[0].clientY,X=function(e,t,n){var r=(t-n)/Y+e;return i.constrain(r,0,G)}(F,P,I),J(X,V,Y))}));$.call(Z)}function J(t,n,r){d._scrollY=e._fullLayout[_]._scrollY=t,c.setTranslate($,0,-t),c.setRect(H,d._width,h.scrollBarMargin+t*r,h.scrollBarWidth,n),j.select("rect").attr("y",A+t)}e._context.edits.legendPosition&&(z.classed("cursor-move",!0),l.init({element:z.node(),gd:e,prepFn:function(e){if(e.target!==H.node()){var t=c.getTranslate(z);y=t.x,b=t.y}},moveFn:function(e,n){if(void 0!==y&&void 0!==b){var r=y+e,i=b+n;c.setTranslate(z,r,i),t=l.align(r,d._width,x.l,x.l+x.w,d.xanchor),u=l.align(i+d._height,-d._height,x.t+x.h,x.t,d.yanchor)}},doneFn:function(){if(void 0!==t&&void 0!==u){var n={};n[_+".x"]=t,n[_+".y"]=u,o.call("_guiRelayout",e,n)}},clickFn:function(t,n){var r=s.selectAll("g.traces").filter((function(){var e=this.getBoundingClientRect();return n.clientX>=e.left&&n.clientX<=e.right&&n.clientY>=e.top&&n.clientY<=e.bottom}));r.size()>0&&k(e,z,r,t,n)}}))}],e)}}function A(e,t,n){var r=e[0],i=r.width,a=t.entrywidthmode,o=r.trace.legendwidth||t.entrywidth;return"fraction"===a?t._maxWidth*o:n+(o||i)}function k(e,t,n,r,i){var a=n.data()[0][0].trace,l={event:i,node:n.node(),curveNumber:a.index,expandedIndex:a._expandedIndex,data:e.data,layout:e.layout,frames:e._transitionData._frames,config:e._context,fullData:e._fullData,fullLayout:e._fullLayout};a._group&&(l.group=a._group),o.traceIs(a,"pie-like")&&(l.label=n.datum()[0].label);var c=s.triggerHandler(e,"plotly_legendclick",l);if(1===r){if(!1===c)return;t._clickTimeout=setTimeout((function(){e._fullLayout&&d(n,e,r)}),e._context.doubleClickDelay)}else if(2===r){t._clickTimeout&&clearTimeout(t._clickTimeout),e._legendMouseDownTime=0,!1!==s.triggerHandler(e,"plotly_legenddoubleclick",l)&&!1!==c&&d(n,e,r)}}function E(e,t,n){var r,a,s=R(n),l=e.data()[0][0],u=l.trace,d=o.traceIs(u,"pie-like"),p=!n._inHover&&t._context.edits.legendText&&!d,m=n._maxNameLength;l.groupTitle?(r=l.groupTitle.text,a=l.groupTitle.font):(a=n.font,n.entries?r=l.text:(r=d?l.label:u.name,u._meta&&(r=i.templateString(r,u._meta))));var g=i.ensureSingle(e,"text",s+"text");g.attr("text-anchor","start").call(c.font,a).text(p?T(r,m):r);var v=n.indentation+n.itemwidth+2*h.itemGap;f.positionText(g,v,0),p?g.call(f.makeEditable,{gd:t,text:r}).call(S,e,t,n).on("edit",(function(r){this.text(T(r,m)).call(S,e,t,n);var a=l.trace._fullInput||{},s={};if(o.hasTransform(a,"groupby")){var c=o.getTransformIndices(a,"groupby"),f=c[c.length-1],d=i.keyedContainer(a,"transforms["+f+"].styles","target","value.name");d.set(l.trace._group,r),s=d.constructUpdate()}else s.name=r;return a._isShape?o.call("_guiRelayout",t,"shapes["+u.index+"].name",s.name):o.call("_guiRestyle",t,s,u.index)})):S(g,e,t,n)}function T(e,t){var n=Math.max(4,t);if(e&&e.trim().length>=n/2)return e;for(var r=n-(e=e||"").length;r>0;r--)e+=" ";return e}function M(e,t,n){var a,o=t._context.doubleClickDelay,s=1,l=i.ensureSingle(e,"rect",n+"toggle",(function(e){t._context.staticPlot||e.style("cursor","pointer").attr("pointer-events","all"),e.call(u.fill,"rgba(0,0,0,0)")}));t._context.staticPlot||(l.on("mousedown",(function(){(a=(new Date).getTime())-t._legendMouseDownTime<o?s+=1:(s=1,t._legendMouseDownTime=a)})),l.on("mouseup",(function(){if(!t._dragged&&!t._editing){var i=t._fullLayout[n];(new Date).getTime()-t._legendMouseDownTime>o&&(s=Math.max(s-1,1)),k(t,i,e,s,r.event)}})))}function S(e,t,n,r,i){r._inHover&&e.attr("data-notex",!0),f.convertToTspans(e,n,(function(){!function(e,t,n,r){var i=e.data()[0][0];if(!n._inHover&&i&&!i.trace.showlegend)return void e.remove();var a=e.select("g[class*=math-group]"),o=a.node(),s=R(n);n||(n=t._fullLayout[s]);var l,u=n.borderwidth;l=1===r?n.title.font:i.groupTitle?i.groupTitle.font:n.font;var d,p,g=l.size*m;if(o){var v=c.bBox(o);d=v.height,p=v.width,1===r?c.setTranslate(a,u,u+.75*d):c.setTranslate(a,0,.25*d)}else{var y="."+s+(1===r?"title":"")+"text",b=e.select(y),x=f.lineCount(b),_=b.node();if(d=g*x,p=_?c.bBox(_).width:0,1===r)"left"===n.title.side&&(p+=2*h.itemGap),f.positionText(b,u+h.titlePad,u+g);else{var w=2*h.itemGap+n.indentation+n.itemwidth;i.groupTitle&&(w=h.itemGap,p-=n.indentation+n.itemwidth),f.positionText(b,w,-g*((x-1)/2-.3))}}1===r?(n._titleWidth=p,n._titleHeight=d):(i.lineHeight=g,i.height=Math.max(d,16)+3,i.width=p)}(t,n,r,i)}))}function C(e){return i.isRightAnchor(e)?"right":i.isCenterAnchor(e)?"center":"left"}function O(e){return i.isBottomAnchor(e)?"bottom":i.isMiddleAnchor(e)?"middle":"top"}function R(e){return e._id||"legend"}e.exports=function(e,t){if(t)w(e,t);else{var n=e._fullLayout,i=n._legends;n._infolayer.selectAll('[class^="legend"]').each((function(){var e=r.select(this),t=e.attr("class").split(" ")[0];t.match(_)&&-1===i.indexOf(t)&&e.remove()}));for(var a=0;a<i.length;a++){var o=i[a];w(e,e._fullLayout[o])}}}},26153:(e,t,n)=>{"use strict";var r=n(3360),i=n(42801);e.exports=function(e,t,n){var a,o,s=t._inHover,l=i.isGrouped(t),c=i.isReversed(t),u={},f=[],d=!1,h={},p=0,m=0;function g(e,r,a){if(!1!==t.visible&&(!n||e===t._id))if(""!==r&&i.isGrouped(t))-1===f.indexOf(r)?(f.push(r),d=!0,u[r]=[a]):u[r].push(a);else{var o="~~i"+p;f.push(o),u[o]=[a],p++}}for(a=0;a<e.length;a++){var v=e[a],y=v[0],b=y.trace,x=b.legend,_=b.legendgroup;if(s||b.visible&&b.showlegend)if(r.traceIs(b,"pie-like"))for(h[_]||(h[_]={}),o=0;o<v.length;o++){var w=v[o].label;h[_][w]||(g(x,_,{label:w,color:v[o].color,i:v[o].i,trace:b,pts:v[o].pts}),h[_][w]=!0,m=Math.max(m,(w||"").length))}else g(x,_,y),m=Math.max(m,(b.name||"").length)}if(!f.length)return[];var A=!d||!l,k=[];for(a=0;a<f.length;a++){var E=u[f[a]];A?k.push(E[0]):k.push(E)}for(A&&(k=[k]),a=0;a<k.length;a++){var T=1/0;for(o=0;o<k[a].length;o++){var M=k[a][o].trace.legendrank;T>M&&(T=M)}k[a][0]._groupMinRank=T,k[a][0]._preGroupSort=a}var S=function(e,t){return e.trace.legendrank-t.trace.legendrank||e._preSort-t._preSort};for(k.forEach((function(e,t){e[0]._preGroupSort=t})),k.sort((function(e,t){return e[0]._groupMinRank-t[0]._groupMinRank||e[0]._preGroupSort-t[0]._preGroupSort})),a=0;a<k.length;a++){k[a].forEach((function(e,t){e._preSort=t})),k[a].sort(S);var C=k[a][0].trace,O=null;for(o=0;o<k[a].length;o++){var R=k[a][o].trace.legendgrouptitle;if(R&&R.text){O=R,s&&(R.font=t._groupTitleFont);break}}if(c&&k[a].reverse(),O){var N=!1;for(o=0;o<k[a].length;o++)if(r.traceIs(k[a][o].trace,"pie-like")){N=!0;break}k[a].unshift({i:-1,groupTitle:O,noClick:N,trace:{showlegend:C.showlegend,legendgroup:C.legendgroup,visible:"toggleitem"===t.groupclick||C.visible}})}for(o=0;o<k[a].length;o++)k[a][o]=[k[a][o]]}return t._lgroupsLength=k.length,t._maxNameLength=m,k}},47255:(e,t,n)=>{"use strict";var r=n(3360),i=n(56319),a=i.pushUnique,o=!0;e.exports=function(e,t,n){var s=t._fullLayout;if(!t._dragged&&!t._editing){var l,c=s.legend.itemclick,u=s.legend.itemdoubleclick,f=s.legend.groupclick;if(1===n&&"toggle"===c&&"toggleothers"===u&&o&&t.data&&t._context.showTips?(i.notifier(i._(t,"Double-click on legend to isolate one trace"),"long"),o=!1):o=!1,1===n?l=c:2===n&&(l=u),l){var d="togglegroup"===f,h=s.hiddenlabels?s.hiddenlabels.slice():[],p=e.data()[0][0];if(!p.groupTitle||!p.noClick){var m=t._fullData,g=(s.shapes||[]).filter((function(e){return e.showlegend})),v=m.concat(g),y=p.trace;y._isShape&&(y=y._fullInput);var b,x,_,w,A,k=y.legendgroup,E={},T=[],M=[],S=[],C=(s.shapes||[]).map((function(e){return e._input})),O=!1,R=y.legend,N=y._fullInput;if(!(N&&N._isShape)&&r.traceIs(y,"pie-like")){var L=p.label,D=h.indexOf(L);if("toggle"===l)-1===D?h.push(L):h.splice(D,1);else if("toggleothers"===l){var P=-1!==D,I=[];for(b=0;b<t.calcdata.length;b++){var F=t.calcdata[b];for(x=0;x<F.length;x++){var z=F[x].label;R===F[0].trace.legend&&L!==z&&(-1===h.indexOf(z)&&(P=!0),a(h,z),I.push(z))}}if(!P)for(var j=0;j<I.length;j++){var B=h.indexOf(I[j]);-1!==B&&h.splice(B,1)}}r.call("_guiRelayout",t,"hiddenlabels",h)}else{var U,$=k&&k.length,q=[];if($)for(b=0;b<v.length;b++)(U=v[b]).visible&&U.legendgroup===k&&q.push(b);if("toggle"===l){var H;switch(y.visible){case!0:H="legendonly";break;case!1:H=!1;break;case"legendonly":H=!0}if($)if(d)for(b=0;b<v.length;b++){var V=v[b];!1!==V.visible&&V.legendgroup===k&&ee(V,H)}else ee(y,H);else ee(y,H)}else if("toggleothers"===l){var W,G,Y,X,K=!0;for(b=0;b<v.length;b++)if(W=(X=v[b])===y,G=!0!==X.showlegend,!(W||G||$&&X.legendgroup===k||X.legend!==R||!0!==X.visible||r.traceIs(X,"notLegendIsolatable"))){K=!1;break}for(b=0;b<v.length;b++)if(!1!==(X=v[b]).visible&&X.legend===R&&!r.traceIs(X,"notLegendIsolatable"))switch(y.visible){case"legendonly":ee(X,!0);break;case!0:Y=!!K||"legendonly",W=X===y,G=!0!==X.showlegend&&!X.legendgroup,ee(X,!(!(W||$&&X.legendgroup===k)&&!G)||Y)}}for(b=0;b<M.length;b++)if(_=M[b]){var Z=_.constructUpdate(),J=Object.keys(Z);for(x=0;x<J.length;x++)w=J[x],(E[w]=E[w]||[])[S[b]]=Z[w]}for(A=Object.keys(E),b=0;b<A.length;b++)for(w=A[b],x=0;x<T.length;x++)E[w].hasOwnProperty(x)||(E[w][x]=void 0);O?r.call("_guiUpdate",t,E,{shapes:C},T):r.call("_guiRestyle",t,E,T)}}}}function Q(e,t){var n=T.indexOf(e),r=E.visible;return r||(r=E.visible=[]),-1===T.indexOf(e)&&(T.push(e),n=T.length-1),r[n]=t,n}function ee(e,t){if(!p.groupTitle||d){var n,a=e._fullInput||e,o=a._isShape,s=a.index;if(void 0===s&&(s=a._index),r.hasTransform(a,"groupby")){var l=M[s];if(!l){var c=r.getTransformIndices(a,"groupby"),u=c[c.length-1];l=i.keyedContainer(a,"transforms["+u+"].styles","target","value.visible"),M[s]=l}var f=l.get(e._group);void 0===f&&(f=!0),!1!==f&&l.set(e._group,t),S[s]=Q(s,!1!==a.visible)}else{var h=!1!==a.visible&&t;o?(n=h,C[s].visible=n,O=!0):Q(s,h)}}}}},42801:(e,t)=>{"use strict";t.isGrouped=function(e){return-1!==(e.traceorder||"").indexOf("grouped")},t.isVertical=function(e){return"h"!==e.orientation},t.isReversed=function(e){return-1!==(e.traceorder||"").indexOf("reversed")}},32004:(e,t,n)=>{"use strict";e.exports={moduleType:"component",name:"legend",layoutAttributes:n(5679),supplyLayoutDefaults:n(36008),draw:n(79724),style:n(71893)}},71893:(e,t,n)=>{"use strict";var r=n(93268),i=n(3360),a=n(56319),o=a.strTranslate,s=n(14797),l=n(53408),c=n(96175).extractOpts,u=n(43612),f=n(95853),d=n(64238).castOption,h=n(26345);function p(e,t){return(t?"radial":"horizontal")+(e?"":"reversed")}function m(e){var t=e[0].trace,n=t.contours,r=u.hasLines(t),i=u.hasMarkers(t),a=t.visible&&t.fill&&"none"!==t.fill,o=!1,s=!1;if(n){var l=n.coloring;"lines"===l?o=!0:r="none"===l||"heatmap"===l||n.showlines,"constraint"===n.type?a="="!==n._operation:"fill"!==l&&"heatmap"!==l||(s=!0)}return{showMarker:i,showLine:r,showFill:a,showGradientLine:o,showGradientFill:s,anyLine:r||o,anyFill:a||s}}function g(e,t,n){return e&&a.isArrayOrTypedArray(e)?t:e>n?n:e}e.exports=function(e,t,n){var v=t._fullLayout;n||(n=v.legend);var y="constant"===n.itemsizing,b=n.itemwidth,x=(b+2*h.itemGap)/2,_=o(x,0),w=function(e,t,n,r){var i;if(e+1)i=e;else{if(!(t&&t.width>0))return 0;i=t.width}return y?r:Math.min(i,n)};function A(e,a,o){var u=e[0].trace,f=u.marker||{},d=f.line||{},h=f.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",p=o?u.visible&&u.type===o:i.traceIs(u,"bar"),m=r.select(a).select("g.legendpoints").selectAll("path.legend"+o).data(p?[e]:[]);m.enter().append("path").classed("legend"+o,!0).attr("d",h).attr("transform",_),m.exit().remove(),m.each((function(e){var i=r.select(this),a=e[0],o=w(a.mlw,f.line,5,2);i.style("stroke-width",o+"px");var h=a.mcc;if(!n._inHover&&"mc"in a){var p=c(f),m=p.mid;void 0===m&&(m=(p.max+p.min)/2),h=s.tryColorscale(f,"")(m)}var v=h||a.mc||f.color,y=f.pattern,b=y&&s.getPatternAttr(y.shape,0,"");if(b){var x=s.getPatternAttr(y.bgcolor,0,null),_=s.getPatternAttr(y.fgcolor,0,null),A=y.fgopacity,k=g(y.size,8,10),E=g(y.solidity,.5,1),T="legend-"+u.uid;i.call(s.pattern,"legend",t,T,b,k,E,h,y.fillmode,x,_,A)}else i.call(l.fill,v);o&&l.stroke(i,a.mlc||d.color)}))}function k(e,n,o){var s=e[0],l=s.trace,c=o?l.visible&&l.type===o:i.traceIs(l,o),u=r.select(n).select("g.legendpoints").selectAll("path.legend"+o).data(c?[e]:[]);if(u.enter().append("path").classed("legend"+o,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",_),u.exit().remove(),u.size()){var h=l.marker||{},p=w(d(h.line.width,s.pts),h.line,5,2),m="pieLike",g=a.minExtend(l,{marker:{line:{width:p}}},m),v=a.minExtend(s,{trace:g},m);f(u,v,g,t)}}e.each((function(e){var t=r.select(this),i=a.ensureSingle(t,"g","layers");i.style("opacity",e[0].trace.opacity);var s=n.indentation,l=n.valign,c=e[0].lineHeight,u=e[0].height;if("middle"===l&&0===s||!c||!u)i.attr("transform",null);else{var f={top:1,bottom:-1}[l]*(.5*(c-u+3))||0,d=n.indentation;i.attr("transform",o(d,f))}i.selectAll("g.legendfill").data([e]).enter().append("g").classed("legendfill",!0),i.selectAll("g.legendlines").data([e]).enter().append("g").classed("legendlines",!0);var h=i.selectAll("g.legendsymbols").data([e]);h.enter().append("g").classed("legendsymbols",!0),h.selectAll("g.legendpoints").data([e]).enter().append("g").classed("legendpoints",!0)})).each((function(e){var n,i=e[0].trace,o=[];if(i.visible)switch(i.type){case"histogram2d":case"heatmap":o=[["M-15,-2V4H15V-2Z"]],n=!0;break;case"choropleth":case"choroplethmapbox":case"choroplethmap":o=[["M-6,-6V6H6V-6Z"]],n=!0;break;case"densitymapbox":case"densitymap":o=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],n="radial";break;case"cone":o=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],n=!1;break;case"streamtube":o=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],n=!1;break;case"surface":o=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],n=!0;break;case"mesh3d":o=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],n=!1;break;case"volume":o=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],n=!0;break;case"isosurface":o=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],n=!1}var u=r.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(o);u.enter().append("path").classed("legend3dandfriends",!0).attr("transform",_).style("stroke-miterlimit",1),u.exit().remove(),u.each((function(e,o){var u,f=r.select(this),d=c(i),h=d.colorscale,m=d.reversescale;if(h){if(!n){var g=h.length;u=0===o?h[m?g-1:0][1]:1===o?h[m?0:g-1][1]:h[Math.floor((g-1)/2)][1]}}else{var v=i.vertexcolor||i.facecolor||i.color;u=a.isArrayOrTypedArray(v)?v[o]||v[0]:v}f.attr("d",e[0]),u?f.call(l.fill,u):f.call((function(e){if(e.size()){var r="legendfill-"+i.uid;s.gradient(e,t,r,p(m,"radial"===n),h,"fill")}}))}))})).each((function(e){var t=e[0].trace,n="waterfall"===t.type;if(e[0]._distinct&&n){var i=e[0].trace[e[0].dir].marker;return e[0].mc=i.color,e[0].mlw=i.line.width,e[0].mlc=i.line.color,A(e,this,"waterfall")}var a=[];t.visible&&n&&(a=e[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var o=r.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(a);o.enter().append("path").classed("legendwaterfall",!0).attr("transform",_).style("stroke-miterlimit",1),o.exit().remove(),o.each((function(e){var n=r.select(this),i=t[e[0]].marker,a=w(void 0,i.line,5,2);n.attr("d",e[1]).style("stroke-width",a+"px").call(l.fill,i.color),a&&n.call(l.stroke,i.line.color)}))})).each((function(e){A(e,this,"funnel")})).each((function(e){A(e,this)})).each((function(e){var n=e[0].trace,o=r.select(this).select("g.legendpoints").selectAll("path.legendbox").data(n.visible&&i.traceIs(n,"box-violin")?[e]:[]);o.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",_),o.exit().remove(),o.each((function(){var e=r.select(this);if("all"!==n.boxpoints&&"all"!==n.points||0!==l.opacity(n.fillcolor)||0!==l.opacity((n.line||{}).color)){var i=w(void 0,n.line,5,2);e.style("stroke-width",i+"px").call(l.fill,n.fillcolor),i&&l.stroke(e,n.line.color)}else{var c=a.minExtend(n,{marker:{size:y?12:a.constrain(n.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});o.call(s.pointStyle,c,t)}}))})).each((function(e){k(e,this,"funnelarea")})).each((function(e){k(e,this,"pie")})).each((function(e){var n,i,o=m(e),l=o.showFill,f=o.showLine,d=o.showGradientLine,h=o.showGradientFill,g=o.anyFill,v=o.anyLine,y=e[0],x=y.trace,_=c(x),A=_.colorscale,k=_.reversescale,E=u.hasMarkers(x)||!g?"M5,0":v?"M5,-2":"M5,-3",T=r.select(this),M=T.select(".legendfill").selectAll("path").data(l||h?[e]:[]);if(M.enter().append("path").classed("js-fill",!0),M.exit().remove(),M.attr("d",E+"h"+b+"v6h-"+b+"z").call((function(e){if(e.size())if(l)s.fillGroupStyle(e,t,!0);else{var n="legendfill-"+x.uid;s.gradient(e,t,n,p(k),A,"fill")}})),f||d){var S=w(void 0,x.line,10,5);i=a.minExtend(x,{line:{width:S}}),n=[a.minExtend(y,{trace:i})]}var C=T.select(".legendlines").selectAll("path").data(f||d?[n]:[]);C.enter().append("path").classed("js-line",!0),C.exit().remove(),C.attr("d",E+(d?"l"+b+",0.0001":"h"+b)).call(f?s.lineGroupStyle:function(e){if(e.size()){var n="legendline-"+x.uid;s.lineGroupStyle(e),s.gradient(e,t,n,p(k),A,"stroke")}})})).each((function(e){var n,i,o=m(e),l=o.anyFill,c=o.anyLine,f=o.showLine,d=o.showMarker,h=e[0],p=h.trace,g=!d&&!c&&!l&&u.hasText(p);function v(e,t,n,r){var i=a.nestedProperty(p,e).get(),o=a.isArrayOrTypedArray(i)&&t?t(i):i;if(y&&o&&void 0!==r&&(o=r),n){if(o<n[0])return n[0];if(o>n[1])return n[1]}return o}function b(e){return h._distinct&&h.index&&e[h.index]?e[h.index]:e[0]}if(d||g||f){var x={},w={};if(d){x.mc=v("marker.color",b),x.mx=v("marker.symbol",b),x.mo=v("marker.opacity",a.mean,[.2,1]),x.mlc=v("marker.line.color",b),x.mlw=v("marker.line.width",a.mean,[0,5],2),w.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var A=v("marker.size",a.mean,[2,16],12);x.ms=A,w.marker.size=A}f&&(w.line={width:v("line.width",b,[0,10],5)}),g&&(x.tx="Aa",x.tp=v("textposition",b),x.ts=10,x.tc=v("textfont.color",b),x.tf=v("textfont.family",b),x.tw=v("textfont.weight",b),x.ty=v("textfont.style",b),x.tv=v("textfont.variant",b),x.tC=v("textfont.textcase",b),x.tE=v("textfont.lineposition",b),x.tS=v("textfont.shadow",b)),n=[a.minExtend(h,x)],(i=a.minExtend(p,w)).selectedpoints=null,i.texttemplate=null}var k=r.select(this).select("g.legendpoints"),E=k.selectAll("path.scatterpts").data(d?n:[]);E.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",_),E.exit().remove(),E.call(s.pointStyle,i,t),d&&(n[0].mrc=3);var T=k.selectAll("g.pointtext").data(g?n:[]);T.enter().append("g").classed("pointtext",!0).append("text").attr("transform",_),T.exit().remove(),T.selectAll("text").call(s.textPointStyle,i,t)})).each((function(e){var t=e[0].trace,n=r.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(t.visible&&"candlestick"===t.type?[e,e]:[]);n.enter().append("path").classed("legendcandle",!0).attr("d",(function(e,t){return t?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"})).attr("transform",_).style("stroke-miterlimit",1),n.exit().remove(),n.each((function(e,n){var i=r.select(this),a=t[n?"increasing":"decreasing"],o=w(void 0,a.line,5,2);i.style("stroke-width",o+"px").call(l.fill,a.fillcolor),o&&l.stroke(i,a.line.color)}))})).each((function(e){var t=e[0].trace,n=r.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(t.visible&&"ohlc"===t.type?[e,e]:[]);n.enter().append("path").classed("legendohlc",!0).attr("d",(function(e,t){return t?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"})).attr("transform",_).style("stroke-miterlimit",1),n.exit().remove(),n.each((function(e,n){var i=r.select(this),a=t[n?"increasing":"decreasing"],o=w(void 0,a.line,5,2);i.style("fill","none").call(s.dashLine,a.line.dash,o),o&&l.stroke(i,a.line.color)}))}))}},92358:(e,t,n)=>{"use strict";var r=n(55770);e.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar",description:"Sets the orientation of the modebar."},bgcolor:{valType:"color",editType:"modebar",description:"Sets the background color of the modebar."},color:{valType:"color",editType:"modebar",description:"Sets the color of the icons in the modebar."},activecolor:{valType:"color",editType:"modebar",description:"Sets the color of the active or hovered on icons in the modebar."},uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes related to the modebar,","including `hovermode`, `dragmode`, and `showspikes` at both the","root level and inside subplots. Defaults to `layout.uirevision`."].join(" ")},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar",description:["Determines which predefined modebar buttons to add.","Please note that these buttons will only be shown if they are","compatible with all trace types used in a graph.","Similar to `config.modeBarButtonsToAdd` option.","This may include *"+r.backButtons.join("*, *")+"*."].join(" ")},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar",description:["Determines which predefined modebar buttons to remove.","Similar to `config.modeBarButtonsToRemove` option.","This may include *"+r.foreButtons.join("*, *")+"*."].join(" ")}}},41386:(e,t,n)=>{"use strict";var r=n(3360),i=n(31496),a=n(33489),o=n(57014),s=n(44093).eraseActiveShape,l=n(56319),c=l._,u=e.exports={};function f(e,t){var n,i,o=t.currentTarget,s=o.getAttribute("data-attr"),l=o.getAttribute("data-val")||!0,c=e._fullLayout,u={},f=a.list(e,null,!0),d=c._cartesianSpikesEnabled;if("zoom"===s){var h,p="in"===l?.5:2,m=(1+p)/2,g=(1-p)/2;for(i=0;i<f.length;i++)if(!(n=f[i]).fixedrange)if(h=n._name,"auto"===l)u[h+".autorange"]=!0;else if("reset"===l)void 0===n._rangeInitial0&&void 0===n._rangeInitial1?u[h+".autorange"]=!0:void 0===n._rangeInitial0?(u[h+".autorange"]=n._autorangeInitial,u[h+".range"]=[null,n._rangeInitial1]):void 0===n._rangeInitial1?(u[h+".range"]=[n._rangeInitial0,null],u[h+".autorange"]=n._autorangeInitial):u[h+".range"]=[n._rangeInitial0,n._rangeInitial1],void 0!==n._showSpikeInitial&&(u[h+".showspikes"]=n._showSpikeInitial,"on"!==d||n._showSpikeInitial||(d="off"));else{var v=[n.r2l(n.range[0]),n.r2l(n.range[1])],y=[m*v[0]+g*v[1],m*v[1]+g*v[0]];u[h+".range[0]"]=n.l2r(y[0]),u[h+".range[1]"]=n.l2r(y[1])}}else"hovermode"!==s||"x"!==l&&"y"!==l||(l=c._isHoriz?"y":"x",o.setAttribute("data-val",l)),u[s]=l;c._cartesianSpikesEnabled=d,r.call("_guiRelayout",e,u)}function d(e,t){for(var n=t.currentTarget,i=n.getAttribute("data-attr"),a=n.getAttribute("data-val")||!0,o=e._fullLayout._subplots.gl3d||[],s={},l=i.split("."),c=0;c<o.length;c++)s[o[c]+"."+l[1]]=a;var u="pan"===a?a:"zoom";s.dragmode=u,r.call("_guiRelayout",e,s)}function h(e,t){for(var n=t.currentTarget.getAttribute("data-attr"),i="resetLastSave"===n,a="resetDefault"===n,o=e._fullLayout,s=o._subplots.gl3d||[],l={},c=0;c<s.length;c++){var u,f=s[c],d=f+".camera",h=f+".aspectratio",p=f+".aspectmode",m=o[f]._scene;i?(l[d+".up"]=m.viewInitial.up,l[d+".eye"]=m.viewInitial.eye,l[d+".center"]=m.viewInitial.center,u=!0):a&&(l[d+".up"]=null,l[d+".eye"]=null,l[d+".center"]=null,u=!0),u&&(l[h+".x"]=m.viewInitial.aspectratio.x,l[h+".y"]=m.viewInitial.aspectratio.y,l[h+".z"]=m.viewInitial.aspectratio.z,l[p]=m.viewInitial.aspectmode)}r.call("_guiRelayout",e,l)}function p(e,t){var n=t.currentTarget,r=n._previousVal,i=e._fullLayout,a=i._subplots.gl3d||[],o=["xaxis","yaxis","zaxis"],s={},l={};if(r)l=r,n._previousVal=null;else{for(var c=0;c<a.length;c++){var u=a[c],f=i[u],d=u+".hovermode";s[d]=f.hovermode,l[d]=!1;for(var h=0;h<3;h++){var p=o[h],m=u+"."+p+".showspikes";l[m]=!1,s[m]=f[p].showspikes}}n._previousVal=s}return l}function m(e,t){for(var n=t.currentTarget,i=n.getAttribute("data-attr"),a=n.getAttribute("data-val")||!0,o=e._fullLayout,s=o._subplots.geo||[],l=0;l<s.length;l++){var c=s[l],u=o[c];if("zoom"===i){var f=u.projection.scale,d="in"===a?2*f:.5*f;r.call("_guiRelayout",e,c+".projection.scale",d)}}"reset"===i&&_(e,"geo")}function g(e){var t=e._fullLayout;return!t.hovermode&&(t._has("cartesian")?t._isHoriz?"y":"x":"closest")}function v(e){var t=g(e);r.call("_guiRelayout",e,"hovermode",t)}function y(e,t){x(e,t,"mapbox")}function b(e,t){x(e,t,"map")}function x(e,t,n){for(var i=t.currentTarget.getAttribute("data-val"),a=e._fullLayout,o=a._subplots[n]||[],s={},l=0;l<o.length;l++){var c=o[l],u=a[c].zoom,f="in"===i?1.05*u:u/1.05;s[c+".zoom"]=f}r.call("_guiRelayout",e,s)}function _(e,t){for(var n=e._fullLayout,i=n._subplots[t]||[],a={},o=0;o<i.length;o++)for(var s=i[o],l=n[s]._subplot.viewInitial,c=Object.keys(l),u=0;u<c.length;u++){var f=c[u];a[s+"."+f]=l[f]}r.call("_guiRelayout",e,a)}u.toImage={name:"toImage",title:function(e){var t=(e._context.toImageButtonOptions||{}).format||"png";return c(e,"png"===t?"Download plot as a png":"Download plot")},icon:o.camera,click:function(e){var t=e._context.toImageButtonOptions,n={format:t.format||"png"};l.notifier(c(e,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==n.format&&l.isIE()&&(l.notifier(c(e,"IE only supports svg.  Changing format to svg."),"long"),n.format="svg"),["filename","width","height","scale"].forEach((function(e){e in t&&(n[e]=t[e])})),r.call("downloadImage",e,n).then((function(t){l.notifier(c(e,"Snapshot succeeded")+" - "+t,"long")})).catch((function(){l.notifier(c(e,"Sorry, there was a problem downloading your snapshot!"),"long")}))}},u.sendDataToCloud={name:"sendDataToCloud",title:function(e){return c(e,"Edit in Chart Studio")},icon:o.disk,click:function(e){i.sendDataToCloud(e)}},u.editInChartStudio={name:"editInChartStudio",title:function(e){return c(e,"Edit in Chart Studio")},icon:o.pencil,click:function(e){i.sendDataToCloud(e)}},u.zoom2d={name:"zoom2d",_cat:"zoom",title:function(e){return c(e,"Zoom")},attr:"dragmode",val:"zoom",icon:o.zoombox,click:f},u.pan2d={name:"pan2d",_cat:"pan",title:function(e){return c(e,"Pan")},attr:"dragmode",val:"pan",icon:o.pan,click:f},u.select2d={name:"select2d",_cat:"select",title:function(e){return c(e,"Box Select")},attr:"dragmode",val:"select",icon:o.selectbox,click:f},u.lasso2d={name:"lasso2d",_cat:"lasso",title:function(e){return c(e,"Lasso Select")},attr:"dragmode",val:"lasso",icon:o.lasso,click:f},u.drawclosedpath={name:"drawclosedpath",title:function(e){return c(e,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:o.drawclosedpath,click:f},u.drawopenpath={name:"drawopenpath",title:function(e){return c(e,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:o.drawopenpath,click:f},u.drawline={name:"drawline",title:function(e){return c(e,"Draw line")},attr:"dragmode",val:"drawline",icon:o.drawline,click:f},u.drawrect={name:"drawrect",title:function(e){return c(e,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:o.drawrect,click:f},u.drawcircle={name:"drawcircle",title:function(e){return c(e,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:o.drawcircle,click:f},u.eraseshape={name:"eraseshape",title:function(e){return c(e,"Erase active shape")},icon:o.eraseshape,click:s},u.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(e){return c(e,"Zoom in")},attr:"zoom",val:"in",icon:o.zoom_plus,click:f},u.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(e){return c(e,"Zoom out")},attr:"zoom",val:"out",icon:o.zoom_minus,click:f},u.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(e){return c(e,"Autoscale")},attr:"zoom",val:"auto",icon:o.autoscale,click:f},u.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(e){return c(e,"Reset axes")},attr:"zoom",val:"reset",icon:o.home,click:f},u.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(e){return c(e,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:o.tooltip_basic,gravity:"ne",click:f},u.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(e){return c(e,"Compare data on hover")},attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:o.tooltip_compare,gravity:"ne",click:f},u.zoom3d={name:"zoom3d",_cat:"zoom",title:function(e){return c(e,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:o.zoombox,click:d},u.pan3d={name:"pan3d",_cat:"pan",title:function(e){return c(e,"Pan")},attr:"scene.dragmode",val:"pan",icon:o.pan,click:d},u.orbitRotation={name:"orbitRotation",title:function(e){return c(e,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:o["3d_rotate"],click:d},u.tableRotation={name:"tableRotation",title:function(e){return c(e,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:o["z-axis"],click:d},u.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(e){return c(e,"Reset camera to default")},attr:"resetDefault",icon:o.home,click:h},u.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(e){return c(e,"Reset camera to last save")},attr:"resetLastSave",icon:o.movie,click:h},u.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(e){return c(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:o.tooltip_basic,gravity:"ne",click:function(e,t){var n=p(e,t);r.call("_guiRelayout",e,n)}},u.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(e){return c(e,"Zoom in")},attr:"zoom",val:"in",icon:o.zoom_plus,click:m},u.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(e){return c(e,"Zoom out")},attr:"zoom",val:"out",icon:o.zoom_minus,click:m},u.resetGeo={name:"resetGeo",_cat:"reset",title:function(e){return c(e,"Reset")},attr:"reset",val:null,icon:o.autoscale,click:m},u.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(e){return c(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:o.tooltip_basic,gravity:"ne",click:v},u.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(e){return c(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:o.tooltip_basic,gravity:"ne",click:v},u.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(e){return c(e,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:o.tooltip_basic,gravity:"ne",click:v},u.resetViewSankey={name:"resetSankeyGroup",title:function(e){return c(e,"Reset view")},icon:o.home,click:function(e){for(var t={"node.groups":[],"node.x":[],"node.y":[]},n=0;n<e._fullData.length;n++){var i=e._fullData[n]._viewInitial;t["node.groups"].push(i.node.groups.slice()),t["node.x"].push(i.node.x.slice()),t["node.y"].push(i.node.y.slice())}r.call("restyle",e,t)}},u.toggleHover={name:"toggleHover",title:function(e){return c(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:o.tooltip_basic,gravity:"ne",click:function(e,t){var n=p(e,t);n.hovermode=g(e),r.call("_guiRelayout",e,n)}},u.resetViews={name:"resetViews",title:function(e){return c(e,"Reset views")},icon:o.home,click:function(e,t){var n=t.currentTarget;n.setAttribute("data-attr","zoom"),n.setAttribute("data-val","reset"),f(e,t),n.setAttribute("data-attr","resetLastSave"),h(e,t),_(e,"geo"),_(e,"mapbox"),_(e,"map")}},u.toggleSpikelines={name:"toggleSpikelines",title:function(e){return c(e,"Toggle Spike Lines")},icon:o.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(e){var t=e._fullLayout,n=t._cartesianSpikesEnabled;t._cartesianSpikesEnabled="on"===n?"off":"on",r.call("_guiRelayout",e,function(e){for(var t="on"===e._fullLayout._cartesianSpikesEnabled,n=a.list(e,null,!0),r={},i=0;i<n.length;i++){var o=n[i];r[o._name+".showspikes"]=!!t||o._showSpikeInitial}return r}(e))}},u.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(e){return c(e,"Reset view")},attr:"reset",icon:o.home,click:function(e){_(e,"mapbox")}},u.resetViewMap={name:"resetViewMap",_cat:"resetView",title:function(e){return c(e,"Reset view")},attr:"reset",icon:o.home,click:function(e){_(e,"map")}},u.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(e){return c(e,"Zoom in")},attr:"zoom",val:"in",icon:o.zoom_plus,click:y},u.zoomInMap={name:"zoomInMap",_cat:"zoomin",title:function(e){return c(e,"Zoom in")},attr:"zoom",val:"in",icon:o.zoom_plus,click:b},u.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(e){return c(e,"Zoom out")},attr:"zoom",val:"out",icon:o.zoom_minus,click:y},u.zoomOutMap={name:"zoomOutMap",_cat:"zoomout",title:function(e){return c(e,"Zoom out")},attr:"zoom",val:"out",icon:o.zoom_minus,click:b}},55770:(e,t,n)=>{"use strict";var r=n(41386),i=Object.keys(r),a=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],o=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(a),s=[];i.forEach((function(e){!function(e){if(-1===o.indexOf(e._cat||e.name)){var t=e.name,n=(e._cat||e.name).toLowerCase();-1===s.indexOf(t)&&s.push(t),-1===s.indexOf(n)&&s.push(n)}}(r[e])})),s.sort(),e.exports={DRAW_MODES:a,backButtons:o,foreButtons:s}},97553:(e,t,n)=>{"use strict";var r=n(56319),i=n(53408),a=n(65210),o=n(92358);e.exports=function(e,t){var n=e.modebar||{},s=a.newContainer(t,"modebar");function l(e,t){return r.coerce(n,s,o,e,t)}l("orientation"),l("bgcolor",i.addOpacity(t.paper_bgcolor,.5));var c=i.contrast(i.rgb(t.modebar.bgcolor));l("color",i.addOpacity(c,.3)),l("activecolor",i.addOpacity(c,.7)),l("uirevision",t.uirevision),l("add"),l("remove")}},90039:(e,t,n)=>{"use strict";e.exports={moduleType:"component",name:"modebar",layoutAttributes:n(92358),supplyLayoutDefaults:n(97553),manage:n(67720)}},67720:(e,t,n)=>{"use strict";var r=n(33489),i=n(43612),a=n(3360),o=n(44790).isUnifiedHover,s=n(70695),l=n(41386),c=n(55770).DRAW_MODES,u=n(56319).extendDeep;e.exports=function(e){var t=e._fullLayout,n=e._context,f=t._modeBar;if(n.displayModeBar||n.watermark){if(!Array.isArray(n.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(n.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var d,h=n.modeBarButtons;d=Array.isArray(h)&&h.length?function(e){for(var t=u([],e),n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++){var a=r[i];if("string"==typeof a){if(void 0===l[a])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));t[n][i]=l[a]}}return t}(h):!n.displayModeBar&&n.watermark?[]:function(e){var t=e._fullLayout,n=e._fullData,s=e._context;function u(e,t){if("string"==typeof t){if(t.toLowerCase()===e.toLowerCase())return!0}else{var n=t.name,r=t._cat||t.name;if(n===e||r===e.toLowerCase())return!0}return!1}var f=t.modebar.add;"string"==typeof f&&(f=[f]);var d=t.modebar.remove;"string"==typeof d&&(d=[d]);var h=s.modeBarButtonsToAdd.concat(f.filter((function(e){for(var t=0;t<s.modeBarButtonsToRemove.length;t++)if(u(e,s.modeBarButtonsToRemove[t]))return!1;return!0}))),p=s.modeBarButtonsToRemove.concat(d.filter((function(e){for(var t=0;t<s.modeBarButtonsToAdd.length;t++)if(u(e,s.modeBarButtonsToAdd[t]))return!1;return!0}))),m=t._has("cartesian"),g=t._has("gl3d"),v=t._has("geo"),y=t._has("pie"),b=t._has("funnelarea"),x=t._has("gl2d"),_=t._has("ternary"),w=t._has("mapbox"),A=t._has("map"),k=t._has("polar"),E=t._has("smith"),T=t._has("sankey"),M=function(e){for(var t=r.list({_fullLayout:e},null,!0),n=0;n<t.length;n++)if(!t[n].fixedrange)return!1;return!0}(t),S=o(t.hovermode),C=[];function O(e){if(e.length){for(var t=[],n=0;n<e.length;n++){for(var r=e[n],i=l[r],a=i.name.toLowerCase(),o=(i._cat||i.name).toLowerCase(),s=!1,c=0;c<p.length;c++){var u=p[c].toLowerCase();if(u===a||u===o){s=!0;break}}s||t.push(l[r])}C.push(t)}}var R=["toImage"];s.showEditInChartStudio?R.push("editInChartStudio"):s.showSendToCloud&&R.push("sendDataToCloud");O(R);var N=[],L=[],D=[],P=[];(m||x||y||b||_)+v+g+w+A+k+E>1?(L=["toggleHover"],D=["resetViews"]):v?(N=["zoomInGeo","zoomOutGeo"],L=["hoverClosestGeo"],D=["resetGeo"]):g?(L=["hoverClosest3d"],D=["resetCameraDefault3d","resetCameraLastSave3d"]):w?(N=["zoomInMapbox","zoomOutMapbox"],L=["toggleHover"],D=["resetViewMapbox"]):A?(N=["zoomInMap","zoomOutMap"],L=["toggleHover"],D=["resetViewMap"]):x?L=["hoverClosestGl2d"]:y?L=["hoverClosestPie"]:T?(L=["hoverClosestCartesian","hoverCompareCartesian"],D=["resetViewSankey"]):L=["toggleHover"];m&&L.push("toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian");(function(e){for(var t=0;t<e.length;t++)if(!a.traceIs(e[t],"noHover"))return!1;return!0}(n)||S)&&(L=[]);!m&&!x||M||(N=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==D[0]&&(D=["resetScale2d"]));g?P=["zoom3d","pan3d","orbitRotation","tableRotation"]:(m||x)&&!M||_?P=["zoom2d","pan2d"]:w||A||v?P=["pan2d"]:k&&(P=["zoom2d"]);(function(e){for(var t=!1,n=0;n<e.length&&!t;n++){var r=e[n];r._module&&r._module.selectPoints&&(a.traceIs(r,"scatter-like")?(i.hasMarkers(r)||i.hasText(r))&&(t=!0):a.traceIs(r,"box-violin")&&"all"!==r.boxpoints&&"all"!==r.points||(t=!0))}return t})(n)&&P.push("select2d","lasso2d");var I=[],F=function(e){-1===I.indexOf(e)&&-1!==L.indexOf(e)&&I.push(e)};if(Array.isArray(h)){for(var z=[],j=0;j<h.length;j++){var B=h[j];"string"==typeof B?(B=B.toLowerCase(),-1!==c.indexOf(B)?(t._has("mapbox")||t._has("map")||t._has("cartesian"))&&P.push(B):"togglespikelines"===B?F("toggleSpikelines"):"togglehover"===B?F("toggleHover"):"hovercompare"===B?F("hoverCompareCartesian"):"hoverclosest"===B?(F("hoverClosestCartesian"),F("hoverClosestGeo"),F("hoverClosest3d"),F("hoverClosestGl2d"),F("hoverClosestPie")):"v1hovermode"===B&&(F("hoverClosestCartesian"),F("hoverCompareCartesian"),F("hoverClosestGeo"),F("hoverClosest3d"),F("hoverClosestGl2d"),F("hoverClosestPie"))):z.push(B)}h=z}return O(P),O(N.concat(D)),O(I),function(e,t){if(t.length)if(Array.isArray(t[0]))for(var n=0;n<t.length;n++)e.push(t[n]);else e.push(t);return e}(C,h)}(e),f?f.update(e,d):t._modeBar=s(e,d)}else f&&(f.destroy(),delete t._modeBar)}},70695:(e,t,n)=>{"use strict";var r=n(93268),i=n(5605),a=n(56319),o=n(57014),s=n(96911).version,l=new DOMParser;function c(e){this.container=e.container,this.element=document.createElement("div"),this.update(e.graphInfo,e.buttons),this.container.appendChild(this.element)}var u=c.prototype;u.update=function(e,t){this.graphInfo=e;var n=this.graphInfo._context,r=this.graphInfo._fullLayout,i="modebar-"+r._uid;this.element.setAttribute("id",i),this._uid=i,this.element.className="modebar","hover"===n.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===r.modebar.orientation&&(this.element.className+=" vertical",t=t.reverse());var o=r.modebar,s="hover"===n.displayModeBar?".js-plotly-plot .plotly:hover ":"";a.deleteRelatedStyleRule(i),a.addRelatedStyleRule(i,s+"#"+i+" .modebar-group","background-color: "+o.bgcolor),a.addRelatedStyleRule(i,"#"+i+" .modebar-btn .icon path","fill: "+o.color),a.addRelatedStyleRule(i,"#"+i+" .modebar-btn:hover .icon path","fill: "+o.activecolor),a.addRelatedStyleRule(i,"#"+i+" .modebar-btn.active .icon path","fill: "+o.activecolor);var l=!this.hasButtons(t),c=this.hasLogo!==n.displaylogo,u=this.locale!==n.locale;if(this.locale=n.locale,(l||c||u)&&(this.removeAllButtons(),this.updateButtons(t),n.watermark||n.displaylogo)){var f=this.getLogo();n.watermark&&(f.className=f.className+" watermark"),"v"===r.modebar.orientation?this.element.insertBefore(f,this.element.childNodes[0]):this.element.appendChild(f),this.hasLogo=!0}this.updateActiveButton()},u.updateButtons=function(e){var t=this;this.buttons=e,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach((function(e){var n=t.createGroup();e.forEach((function(e){var r=e.name;if(!r)throw new Error("must provide button 'name' in button config");if(-1!==t.buttonsNames.indexOf(r))throw new Error("button name '"+r+"' is taken");t.buttonsNames.push(r);var i=t.createButton(e);t.buttonElements.push(i),n.appendChild(i)})),t.element.appendChild(n)}))},u.createGroup=function(){var e=document.createElement("div");return e.className="modebar-group",e},u.createButton=function(e){var t=this,n=document.createElement("a");n.setAttribute("rel","tooltip"),n.className="modebar-btn";var i=e.title;void 0===i?i=e.name:"function"==typeof i&&(i=i(this.graphInfo)),(i||0===i)&&n.setAttribute("data-title",i),void 0!==e.attr&&n.setAttribute("data-attr",e.attr);var a=e.val;if(void 0!==a&&("function"==typeof a&&(a=a(this.graphInfo)),n.setAttribute("data-val",a)),"function"!=typeof e.click)throw new Error("must provide button 'click' function in button config");n.addEventListener("click",(function(n){e.click(t.graphInfo,n),t.updateActiveButton(n.currentTarget)})),n.setAttribute("data-toggle",e.toggle||!1),e.toggle&&r.select(n).classed("active",!0);var s=e.icon;return"function"==typeof s?n.appendChild(s()):n.appendChild(this.createIcon(s||o.question)),n.setAttribute("data-gravity",e.gravity||"n"),n},u.createIcon=function(e){var t,n=i(e.height)?Number(e.height):e.ascent-e.descent,r="http://www.w3.org/2000/svg";if(e.path){(t=document.createElementNS(r,"svg")).setAttribute("viewBox",[0,0,e.width,n].join(" ")),t.setAttribute("class","icon");var a=document.createElementNS(r,"path");a.setAttribute("d",e.path),e.transform?a.setAttribute("transform",e.transform):void 0!==e.ascent&&a.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")"),t.appendChild(a)}e.svg&&(t=l.parseFromString(e.svg,"application/xml").childNodes[0]);return t.setAttribute("height","1em"),t.setAttribute("width","1em"),t},u.updateActiveButton=function(e){var t=this.graphInfo._fullLayout,n=void 0!==e?e.getAttribute("data-attr"):null;this.buttonElements.forEach((function(e){var i=e.getAttribute("data-val")||!0,o=e.getAttribute("data-attr"),s="true"===e.getAttribute("data-toggle"),l=r.select(e);if(s)o===n&&l.classed("active",!l.classed("active"));else{var c=null===o?o:a.nestedProperty(t,o).get();l.classed("active",c===i)}}))},u.hasButtons=function(e){var t=this.buttons;if(!t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n){if(e[n].length!==t[n].length)return!1;for(var r=0;r<e[n].length;r++)if(e[n][r].name!==t[n][r].name)return!1}return!0},u.getLogo=function(){var e=this.createGroup(),t=document.createElement("a");return t.href="https://plotly.com/",t.target="_blank",t.setAttribute("data-title",a._(this.graphInfo,"Produced with Plotly.js")+" (v"+s+")"),t.className="modebar-btn plotlyjsicon modebar-btn--logo",t.appendChild(this.createIcon(o.newplotlylogo)),e.appendChild(t),e},u.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},u.destroy=function(){a.removeElement(this.container.querySelector(".modebar")),a.deleteRelatedStyleRule(this._uid)},e.exports=function(e,t){var n=e._fullLayout,i=new c({graphInfo:e,container:n._modebardiv.node(),buttons:t});return n._privateplot&&r.select(i.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),i}},93738:(e,t,n)=>{"use strict";var r=n(95323),i=n(37811),a=(0,n(65210).templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot",description:"Determines whether or not this button is visible."},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot",description:["The unit of measurement that the `count` value will set the range by."].join(" ")},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot",description:["Sets the range update mode.","If *backward*, the range update shifts the start of range","back *count* times *step* milliseconds.","If *todate*, the range update shifts the start of range","back to the first timestamp from *count* times","*step* milliseconds back.","For example, with `step` set to *year* and `count` set to *1*","the range update shifts the start of the range back to","January 01 of the current year.","Month and year *todate* are currently available only","for the built-in (Gregorian) calendar."].join(" ")},count:{valType:"number",min:0,dflt:1,editType:"plot",description:["Sets the number of steps to take to update the range.","Use with `step` to specify the update interval."].join(" ")},label:{valType:"string",editType:"plot",description:"Sets the text label to appear on the button."},editType:"plot",description:["Sets the specifications for each buttons.","By default, a range selector comes with no buttons."].join(" ")});e.exports={visible:{valType:"boolean",editType:"plot",description:["Determines whether or not this range selector is visible.","Note that range selectors are only available for x axes of","`type` set to or auto-typed to *date*."].join(" ")},buttons:a,x:{valType:"number",min:-2,max:3,editType:"plot",description:"Sets the x position (in normalized coordinates) of the range selector."},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot",description:["Sets the range selector's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,editType:"plot",description:"Sets the y position (in normalized coordinates) of the range selector."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot",description:["Sets the range selector's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},font:r({editType:"plot",description:"Sets the font of the range selector button text."}),bgcolor:{valType:"color",dflt:i.lightLine,editType:"plot",description:"Sets the background color of the range selector buttons."},activecolor:{valType:"color",editType:"plot",description:"Sets the background color of the active range selector button."},bordercolor:{valType:"color",dflt:i.defaultLine,editType:"plot",description:"Sets the color of the border enclosing the range selector."},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot",description:"Sets the width (in px) of the border enclosing the range selector."},editType:"plot"}},34774:e=>{"use strict";e.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},14813:(e,t,n)=>{"use strict";var r=n(56319),i=n(53408),a=n(65210),o=n(75078),s=n(93738),l=n(34774);function c(e,t,n,i){var a=i.calendar;function o(n,i){return r.coerce(e,t,s.buttons,n,i)}if(o("visible")){var l=o("step");"all"!==l&&(!a||"gregorian"===a||"month"!==l&&"year"!==l?o("stepmode"):t.stepmode="backward",o("count")),o("label")}}e.exports=function(e,t,n,u,f){var d=e.rangeselector||{},h=a.newContainer(t,"rangeselector");function p(e,t){return r.coerce(d,h,s,e,t)}if(p("visible",o(d,h,{name:"buttons",handleItemDefaults:c,calendar:f}).length>0)){var m=function(e,t,n){for(var r=n.filter((function(n){return t[n].anchor===e._id})),i=0,a=0;a<r.length;a++){var o=t[r[a]].domain;o&&(i=Math.max(o[1],i))}return[e.domain[0],i+l.yPad]}(t,n,u);p("x",m[0]),p("y",m[1]),r.noneOrAll(e,t,["x","y"]),p("xanchor"),p("yanchor"),r.coerceFont(p,"font",n.font);var g=p("bgcolor");p("activecolor",i.contrast(g,l.lightAmount,l.darkAmount)),p("bordercolor"),p("borderwidth")}}},7509:(e,t,n)=>{"use strict";var r=n(93268),i=n(3360),a=n(31496),o=n(53408),s=n(14797),l=n(56319),c=l.strTranslate,u=n(56953),f=n(33489),d=n(12564),h=d.LINE_SPACING,p=d.FROM_TL,m=d.FROM_BR,g=n(34774),v=n(10165);function y(e){return e._id}function b(e,t,n){var r=l.ensureSingle(e,"rect","selector-rect",(function(e){e.attr("shape-rendering","crispEdges")}));r.attr({rx:g.rx,ry:g.ry}),r.call(o.stroke,t.bordercolor).call(o.fill,function(e,t){return t._isActive||t._isHovered?e.activecolor:e.bgcolor}(t,n)).style("stroke-width",t.borderwidth+"px")}function x(e,t,n,r){l.ensureSingle(e,"text","selector-text",(function(e){e.attr("text-anchor","middle")})).call(s.font,t.font).text(function(e,t){if(e.label)return t?l.templateString(e.label,t):e.label;return"all"===e.step?"all":e.count+e.step.charAt(0)}(n,r._fullLayout._meta)).call((function(e){u.convertToTspans(e,r)}))}e.exports=function(e){var t=e._fullLayout._infolayer.selectAll(".rangeselector").data(function(e){for(var t=f.list(e,"x",!0),n=[],r=0;r<t.length;r++){var i=t[r];i.rangeselector&&i.rangeselector.visible&&n.push(i)}return n}(e),y);t.enter().append("g").classed("rangeselector",!0),t.exit().remove(),t.style({cursor:"pointer","pointer-events":"all"}),t.each((function(t){var n=r.select(this),o=t,f=o.rangeselector,d=n.selectAll("g.button").data(l.filterVisible(f.buttons));d.enter().append("g").classed("button",!0),d.exit().remove(),d.each((function(t){var n=r.select(this),a=v(o,t);t._isActive=function(e,t,n){if("all"===t.step)return!0===e.autorange;var r=Object.keys(n);return e.range[0]===n[r[0]]&&e.range[1]===n[r[1]]}(o,t,a),n.call(b,f,t),n.call(x,f,t,e),n.on("click",(function(){e._dragged||i.call("_guiRelayout",e,a)})),n.on("mouseover",(function(){t._isHovered=!0,n.call(b,f,t)})),n.on("mouseout",(function(){t._isHovered=!1,n.call(b,f,t)}))})),function(e,t,n,i,o){var f=0,d=0,v=n.borderwidth;t.each((function(){var e=r.select(this).select(".selector-text"),t=n.font.size*h,i=Math.max(t*u.lineCount(e),16)+3;d=Math.max(d,i)})),t.each((function(){var e=r.select(this),t=e.select(".selector-rect"),i=e.select(".selector-text"),a=i.node()&&s.bBox(i.node()).width,o=n.font.size*h,l=u.lineCount(i),p=Math.max(a+10,g.minButtonWidth);e.attr("transform",c(v+f,v)),t.attr({x:0,y:0,width:p,height:d}),u.positionText(i,p/2,d/2-(l-1)*o/2+3),f+=p+5}));var y=e._fullLayout._size,b=y.l+y.w*n.x,x=y.t+y.h*(1-n.y),_="left";l.isRightAnchor(n)&&(b-=f,_="right");l.isCenterAnchor(n)&&(b-=f/2,_="center");var w="top";l.isBottomAnchor(n)&&(x-=d,w="bottom");l.isMiddleAnchor(n)&&(x-=d/2,w="middle");f=Math.ceil(f),d=Math.ceil(d),b=Math.round(b),x=Math.round(x),a.autoMargin(e,i+"-range-selector",{x:n.x,y:n.y,l:f*p[_],r:f*m[_],b:d*m[w],t:d*p[w]}),o.attr("transform",c(b,x))}(e,d,f,o._name,n)}))}},10165:(e,t,n)=>{"use strict";var r=n(5032),i=n(56319).titleCase;e.exports=function(e,t){var n=e._name,a={};if("all"===t.step)a[n+".autorange"]=!0;else{var o=function(e,t){var n,a=e.range,o=new Date(e.r2l(a[1])),s=t.step,l=r["utc"+i(s)],c=t.count;switch(t.stepmode){case"backward":n=e.l2r(+l.offset(o,-c));break;case"todate":var u=l.offset(o,-c);n=e.l2r(+l.ceil(u))}var f=a[1];return[n,f]}(e,t);a[n+".range[0]"]=o[0],a[n+".range[1]"]=o[1]}return a}},99891:(e,t,n)=>{"use strict";e.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:n(93738)}}},layoutAttributes:n(93738),handleDefaults:n(14813),draw:n(7509)}},60578:(e,t,n)=>{"use strict";var r=n(37811);e.exports={bgcolor:{valType:"color",dflt:r.background,editType:"plot",description:"Sets the background color of the range slider."},bordercolor:{valType:"color",dflt:r.defaultLine,editType:"plot",description:"Sets the border color of the range slider."},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot",description:"Sets the border width of the range slider."},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Determines whether or not the range slider range is","computed in relation to the input data.","If `range` is provided, then `autorange` is set to *false*."].join(" ")},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1},description:["Sets the range of the range slider.","If not set, defaults to the full xaxis range.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot",description:["The height of the range slider as a fraction of the","total plot area height."].join(" ")},visible:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether or not the range slider will be visible.","If visible, perpendicular axes will be set to `fixedrange`"].join(" ")},editType:"calc"}},79865:(e,t,n)=>{"use strict";var r=n(33489).list,i=n(39065).getAutoRange,a=n(30078);e.exports=function(e){for(var t=r(e,"x",!0),n=0;n<t.length;n++){var o=t[n],s=o[a.name];s&&s.visible&&s.autorange&&(s._input.autorange=!0,s._input.range=s.range=i(e,o))}}},30078:e=>{"use strict";e.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},76277:(e,t,n)=>{"use strict";var r=n(56319),i=n(65210),a=n(33489),o=n(60578),s=n(5799);e.exports=function(e,t,n){var l=e[n],c=t[n];if(l.rangeslider||t._requestRangeslider[c._id]){r.isPlainObject(l.rangeslider)||(l.rangeslider={});var u,f,d=l.rangeslider,h=i.newContainer(c,"rangeslider");if(_("visible")){_("bgcolor",t.plot_bgcolor),_("bordercolor"),_("borderwidth"),_("thickness"),_("autorange",!c.isValidRange(d.range)),_("range");var p=t._subplots;if(p)for(var m=p.cartesian.filter((function(e){return e.substr(0,e.indexOf("y"))===a.name2id(n)})).map((function(e){return e.substr(e.indexOf("y"),e.length)})),g=r.simpleMap(m,a.id2name),v=0;v<g.length;v++){var y=g[v];u=d[y]||{},f=i.newContainer(h,y,"yaxis");var b,x=t[y];u.range&&x.isValidRange(u.range)&&(b="fixed"),"match"!==w("rangemode",b)&&w("range",x.range.slice())}h._input=d}}function _(e,t){return r.coerce(d,h,o,e,t)}function w(e,t){return r.coerce(u,f,s,e,t)}}},84381:(e,t,n)=>{"use strict";var r=n(93268),i=n(3360),a=n(31496),o=n(56319),s=o.strTranslate,l=n(14797),c=n(53408),u=n(74770),f=n(64125),d=n(33489),h=n(85605),p=n(47281),m=n(30078);function g(e){return"number"==typeof e.clientX?e.clientX:e.touches&&e.touches.length>0?e.touches[0].clientX:0}function v(e,t,n,r){var i=o.ensureSingle(e,"rect",m.bgClassName,(function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})})),a=r.borderwidth%2==0?r.borderwidth:r.borderwidth-1,u=-r._offsetShift,f=l.crispRound(t,r.borderwidth);i.attr({width:r._width+a,height:r._height+a,transform:s(u,u),"stroke-width":f}).call(c.stroke,r.bordercolor).call(c.fill,r.bgcolor)}function y(e,t,n,r){var i=t._fullLayout;o.ensureSingleById(i._topdefs,"clipPath",r._clipId,(function(e){e.append("rect").attr({x:0,y:0})})).select("rect").attr({width:r._width,height:r._height})}function b(e,t,n,i){var s,c=t.calcdata,u=e.selectAll("g."+m.rangePlotClassName).data(n._subplotsWith,o.identity);u.enter().append("g").attr("class",(function(e){return m.rangePlotClassName+" "+e})).call(l.setClipUrl,i._clipId,t),u.order(),u.exit().remove(),u.each((function(e,o){var l=r.select(this),u=0===o,h=d.getFromId(t,e,"y"),p=h._name,m=i[p],g={data:[],layout:{xaxis:{type:n.type,domain:[0,1],range:i.range.slice(),calendar:n.calendar},width:i._width,height:i._height,margin:{t:0,b:0,l:0,r:0}},_context:t._context};n.rangebreaks&&(g.layout.xaxis.rangebreaks=n.rangebreaks),g.layout[p]={type:h.type,domain:[0,1],range:"match"!==m.rangemode?m.range.slice():h.range.slice(),calendar:h.calendar},h.rangebreaks&&(g.layout[p].rangebreaks=h.rangebreaks),a.supplyDefaults(g);var v=g._fullLayout.xaxis,y=g._fullLayout[p];v.clearCalc(),v.setScale(),y.clearCalc(),y.setScale();var b={id:e,plotgroup:l,xaxis:v,yaxis:y,isRangePlot:!0};u?s=b:(b.mainplot="xy",b.mainplotinfo=s),f.rangePlot(t,b,function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],a=i[0].trace;a.xaxis+a.yaxis===t&&n.push(i)}return n}(c,e))}))}function x(e,t,n,r,i){(o.ensureSingle(e,"rect",m.maskMinClassName,(function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})})).attr("height",r._height).call(c.fill,m.maskColor),o.ensureSingle(e,"rect",m.maskMaxClassName,(function(e){e.attr({y:0,"shape-rendering":"crispEdges"})})).attr("height",r._height).call(c.fill,m.maskColor),"match"!==i.rangemode)&&(o.ensureSingle(e,"rect",m.maskMinOppAxisClassName,(function(e){e.attr({y:0,"shape-rendering":"crispEdges"})})).attr("width",r._width).call(c.fill,m.maskOppAxisColor),o.ensureSingle(e,"rect",m.maskMaxOppAxisClassName,(function(e){e.attr({y:0,"shape-rendering":"crispEdges"})})).attr("width",r._width).style("border-top",m.maskOppBorder).call(c.fill,m.maskOppAxisColor))}function _(e,t,n,r){t._context.staticPlot||o.ensureSingle(e,"rect",m.slideBoxClassName,(function(e){e.attr({y:0,cursor:m.slideBoxCursor,"shape-rendering":"crispEdges"})})).attr({height:r._height,fill:m.slideBoxFill})}function w(e,t,n,r){var i=o.ensureSingle(e,"g",m.grabberMinClassName),a=o.ensureSingle(e,"g",m.grabberMaxClassName),s={x:0,width:m.handleWidth,rx:m.handleRadius,fill:c.background,stroke:c.defaultLine,"stroke-width":m.handleStrokeWidth,"shape-rendering":"crispEdges"},l={y:Math.round(r._height/4),height:Math.round(r._height/2)};o.ensureSingle(i,"rect",m.handleMinClassName,(function(e){e.attr(s)})).attr(l),o.ensureSingle(a,"rect",m.handleMaxClassName,(function(e){e.attr(s)})).attr(l);var u={width:m.grabAreaWidth,x:0,y:0,fill:m.grabAreaFill,cursor:t._context.staticPlot?void 0:m.grabAreaCursor};o.ensureSingle(i,"rect",m.grabAreaMinClassName,(function(e){e.attr(u)})).attr("height",r._height),o.ensureSingle(a,"rect",m.grabAreaMaxClassName,(function(e){e.attr(u)})).attr("height",r._height)}e.exports=function(e){for(var t=e._fullLayout,n=t._rangeSliderData,a=0;a<n.length;a++){var l=n[a][m.name];l._clipId=l._id+"-"+t._uid}var c=t._infolayer.selectAll("g."+m.containerClassName).data(n,(function(e){return e._name}));c.exit().each((function(e){var n=e[m.name];t._topdefs.select("#"+n._clipId).remove()})).remove(),0!==n.length&&(c.enter().append("g").classed(m.containerClassName,!0).attr("pointer-events","all"),c.each((function(n){var a=r.select(this),l=n[m.name],c=t[d.id2name(n.anchor)],f=l[d.id2name(n.anchor)];if(l.range){var A,k=o.simpleMap(l.range,n.r2l),E=o.simpleMap(n.range,n.r2l);A=E[0]<E[1]?[Math.min(k[0],E[0]),Math.max(k[1],E[1])]:[Math.max(k[0],E[0]),Math.min(k[1],E[1])],l.range=l._input.range=o.simpleMap(A,n.l2r)}n.cleanRange("rangeslider.range");var T=t._size,M=n.domain;l._width=T.w*(M[1]-M[0]);var S=Math.round(T.l+T.w*M[0]),C=Math.round(T.t+T.h*(1-n._counterDomainMin)+("bottom"===n.side?n._depth:0)+l._offsetShift+m.extraPad);a.attr("transform",s(S,C)),l._rl=o.simpleMap(l.range,n.r2l);var O=l._rl[0],R=l._rl[1],N=R-O;if(l.p2d=function(e){return e/l._width*N+O},l.d2p=function(e){return(e-O)/N*l._width},n.rangebreaks){var L=n.locateBreaks(O,R);if(L.length){var D,P,I=0;for(D=0;D<L.length;D++)I+=(P=L[D]).max-P.min;var F=l._width/(R-O-I),z=[-F*O];for(D=0;D<L.length;D++)P=L[D],z.push(z[z.length-1]-F*(P.max-P.min));for(l.d2p=function(e){for(var t=z[0],n=0;n<L.length;n++){var r=L[n];if(e>=r.max)t=z[n+1];else if(e<r.min)break}return t+F*e},D=0;D<L.length;D++)(P=L[D]).pmin=l.d2p(P.min),P.pmax=l.d2p(P.max);l.p2d=function(e){for(var t=z[0],n=0;n<L.length;n++){var r=L[n];if(e>=r.pmax)t=z[n+1];else if(e<r.pmin)break}return(e-t)/F}}}if("match"!==f.rangemode){var j=c.r2l(f.range[0]),B=c.r2l(f.range[1])-j;l.d2pOppAxis=function(e){return(e-j)/B*l._height}}a.call(v,e,n,l).call(y,e,n,l).call(b,e,n,l).call(x,e,n,l,f).call(_,e,n,l).call(w,e,n,l),function(e,t,n,a){if(t._context.staticPlot)return;var s=e.select("rect."+m.slideBoxClassName).node(),l=e.select("rect."+m.grabAreaMinClassName).node(),c=e.select("rect."+m.grabAreaMaxClassName).node();function u(){var u=r.event,f=u.target,d=g(u),m=d-e.node().getBoundingClientRect().left,v=a.d2p(n._rl[0]),y=a.d2p(n._rl[1]),b=h.coverSlip();function x(e){var u,h,x,_=+g(e)-d;switch(f){case s:if(x="ew-resize",v+_>n._length||y+_<0)return;u=v+_,h=y+_;break;case l:if(x="col-resize",v+_>n._length)return;u=v+_,h=y;break;case c:if(x="col-resize",y+_<0)return;u=v,h=y+_;break;default:x="ew-resize",u=m,h=m+_}if(h<u){var w=h;h=u,u=w}a._pixelMin=u,a._pixelMax=h,p(r.select(b),x),function(e,t,n,r){function a(e){return n.l2r(o.constrain(e,r._rl[0],r._rl[1]))}var s=a(r.p2d(r._pixelMin)),l=a(r.p2d(r._pixelMax));window.requestAnimationFrame((function(){i.call("_guiRelayout",t,n._name+".range",[s,l])}))}(0,t,n,a)}function _(){b.removeEventListener("mousemove",x),b.removeEventListener("mouseup",_),this.removeEventListener("touchmove",x),this.removeEventListener("touchend",_),o.removeElement(b)}this.addEventListener("touchmove",x),this.addEventListener("touchend",_),b.addEventListener("mousemove",x),b.addEventListener("mouseup",_)}e.on("mousedown",u),e.on("touchstart",u)}(a,e,n,l),function(e,t,n,r,i,a){var l=m.handleWidth/2;function c(e){return o.constrain(e,0,r._width)}function u(e){return o.constrain(e,0,r._height)}function f(e){return o.constrain(e,-l,r._width+l)}var d=c(r.d2p(n._rl[0])),h=c(r.d2p(n._rl[1]));if(e.select("rect."+m.slideBoxClassName).attr("x",d).attr("width",h-d),e.select("rect."+m.maskMinClassName).attr("width",d),e.select("rect."+m.maskMaxClassName).attr("x",h).attr("width",r._width-h),"match"!==a.rangemode){var p=r._height-u(r.d2pOppAxis(i._rl[1])),g=r._height-u(r.d2pOppAxis(i._rl[0]));e.select("rect."+m.maskMinOppAxisClassName).attr("x",d).attr("height",p).attr("width",h-d),e.select("rect."+m.maskMaxOppAxisClassName).attr("x",d).attr("y",g).attr("height",r._height-g).attr("width",h-d),e.select("rect."+m.slideBoxClassName).attr("y",p).attr("height",g-p)}var v=.5,y=Math.round(f(d-l))-v,b=Math.round(f(h-l))+v;e.select("g."+m.grabberMinClassName).attr("transform",s(y,v)),e.select("g."+m.grabberMaxClassName).attr("transform",s(b,v))}(a,0,n,l,c,f),"bottom"===n.side&&u.draw(e,n._id+"title",{propContainer:n,propName:n._name+".title",placeholder:t._dfltTitle.x,attributes:{x:n._offset+n._length/2,y:C+l._height+l._offsetShift+10+1.5*n.title.font.size,"text-anchor":"middle"}})})))}},94122:(e,t,n)=>{"use strict";var r=n(33489),i=n(56953),a=n(30078),o=n(12564).LINE_SPACING,s=a.name;function l(e){var t=e&&e[s];return t&&t.visible}t.isVisible=l,t.makeData=function(e){var t=r.list({_fullLayout:e},"x",!0),n=e.margin,i=[];if(!e._has("gl2d"))for(var a=0;a<t.length;a++){var o=t[a];if(l(o)){i.push(o);var c=o[s];c._id=s+o._id,c._height=(e.height-n.b-n.t)*c.thickness,c._offsetShift=Math.floor(c.borderwidth/2)}}e._rangeSliderData=i},t.autoMarginOpts=function(e,t){var n=e._fullLayout,r=t[s],l=t._id.charAt(0),c=0,u=0;"bottom"===t.side&&(c=t._depth,t.title.text!==n._dfltTitle[l]&&(u=1.5*t.title.font.size+10+r._offsetShift,u+=(t.title.text.match(i.BR_TAG_ALL)||[]).length*t.title.font.size*o));return{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:r._height+c+Math.max(n.margin.b,u),pad:a.extraPad+2*r._offsetShift}}},92091:(e,t,n)=>{"use strict";var r=n(56319),i=n(60578),a=n(5799),o=n(94122);e.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:r.extendFlat({},i,{yaxis:a})}}},layoutAttributes:n(60578),handleDefaults:n(76277),calcAutorange:n(79865),draw:n(84381),isVisible:o.isVisible,makeData:o.makeData,autoMarginOpts:o.autoMarginOpts}},5799:e=>{"use strict";e.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc",description:["Determines whether or not the range of this axis in","the rangeslider use the same value than in the main plot","when zooming in/out.","If *auto*, the autorange will be used.","If *fixed*, the `range` is used.","If *match*, the current range of the corresponding y-axis on the main subplot is used."].join(" ")},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot",description:["Sets the range of this axis for the rangeslider."].join(" ")},editType:"calc"}},2965:(e,t,n)=>{"use strict";var r=n(48244),i=n(19030).line,a=n(9488).T,o=n(86395).extendFlat,s=n(88500).overrideAll,l=n(65210).templatedArray,c=n(53939);e.exports=s(l("selection",{type:{valType:"enumerated",values:["rect","path"],description:["Specifies the selection type to be drawn.","If *rect*, a rectangle is drawn linking","(`x0`,`y0`), (`x1`,`y0`), (`x1`,`y1`) and (`x0`,`y1`).","If *path*, draw a custom SVG path using `path`."].join(" ")},xref:o({},r.xref,{description:["Sets the selection's x coordinate axis.",c.axisRefDescription("x","left","right")].join(" ")}),yref:o({},r.yref,{description:["Sets the selection's x coordinate axis.",c.axisRefDescription("y","bottom","top")].join(" ")}),x0:{valType:"any",description:"Sets the selection's starting x position."},x1:{valType:"any",description:"Sets the selection's end x position."},y0:{valType:"any",description:"Sets the selection's starting y position."},y1:{valType:"any",description:"Sets the selection's end y position."},path:{valType:"string",editType:"arraydraw",description:["For `type` *path* - a valid SVG path similar to `shapes.path` in data coordinates.","Allowed segments are: M, L and Z."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw",description:"Sets the opacity of the selection."},line:{color:i.color,width:o({},i.width,{min:1,dflt:1}),dash:o({},a,{dflt:"dot"})}}),"arraydraw","from-root")},27167:e=>{"use strict";e.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},96098:(e,t,n)=>{"use strict";var r=n(56319),i=n(596),a=n(75078),o=n(2965),s=n(82282);function l(e,t,n){function a(n,i){return r.coerce(e,t,o,n,i)}var l=a("path"),c="path"!==a("type",l?"path":"rect");c&&delete t.path,a("opacity"),a("line.color"),a("line.width"),a("line.dash");for(var u=["x","y"],f=0;f<2;f++){var d,h,p,m=u[f],g={_fullLayout:n},v=i.coerceRef(e,t,g,m);if((d=i.getFromId(g,v))._selectionIndices.push(t._index),p=s.rangeToShapePosition(d),h=s.shapePositionToRange(d),c){var y=m+"0",b=m+"1",x=e[y],_=e[b];e[y]=h(e[y],!0),e[b]=h(e[b],!0),i.coercePosition(t,g,a,v,y),i.coercePosition(t,g,a,v,b);var w=t[y],A=t[b];void 0!==w&&void 0!==A&&(t[y]=p(w),t[b]=p(A),e[y]=x,e[b]=_)}}c&&r.noneOrAll(e,t,["x0","x1","y0","y1"])}e.exports=function(e,t){a(e,t,{name:"selections",handleItemDefaults:l});for(var n=t.selections,r=0;r<n.length;r++){var i=n[r];i&&(void 0===i.path&&(void 0!==i.x0&&void 0!==i.x1&&void 0!==i.y0&&void 0!==i.y1||(t.selections[r]=null)))}}},16774:(e,t,n)=>{"use strict";var r=n(69981).readPaths,i=n(35347),a=n(10556).clearOutlineControllers,o=n(53408),s=n(14797),l=n(65210).arrayEditor,c=n(82282),u=c.getPathString;function f(e){var t=e._fullLayout;for(var n in a(e),t._selectionLayer.selectAll("path").remove(),t._plots){var r=t._plots[n].selectionLayer;r&&r.selectAll("path").remove()}for(var i=0;i<t.selections.length;i++)h(e,i)}function d(e){return e._context.editSelection}function h(e,t){e._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+t+'"]').remove();var n=c.makeSelectionsOptionsAndPlotinfo(e,t),a=n.options,h=n.plotinfo;a._input&&function(n){var c=u(e,a),g={"data-index":t,"fill-rule":"evenodd",d:c},v=a.opacity,y="rgba(0,0,0,0)",b=a.line.color||o.contrast(e._fullLayout.plot_bgcolor),x=a.line.width,_=a.line.dash;x||(x=5,_="solid");var w=d(e)&&e._fullLayout._activeSelectionIndex===t;w&&(y=e._fullLayout.activeselection.fillcolor,v=e._fullLayout.activeselection.opacity);for(var A=[],k=1;k>=0;k--){var E=n.append("path").attr(g).style("opacity",k?.1:v).call(o.stroke,b).call(o.fill,y).call(s.dashLine,k?"solid":_,k?4+x:x);if(p(E,e,a),w){var T=l(e.layout,"selections",a);E.style({cursor:"move"});var M={element:E.node(),plotinfo:h,gd:e,editHelpers:T,isActiveSelection:!0},S=r(c,e);i(S,E,M)}else E.style("pointer-events",k?"all":"none");A[k]=E}var C=A[0];A[1].node().addEventListener("click",(function(){return function(e,t){if(!d(e))return;var n=t.node(),r=+n.getAttribute("data-index");if(r>=0){if(r===e._fullLayout._activeSelectionIndex)return void m(e);e._fullLayout._activeSelectionIndex=r,e._fullLayout._deactivateSelection=m,f(e)}}(e,C)}))}(e._fullLayout._selectionLayer)}function p(e,t,n){var r=n.xref+n.yref;s.setClipUrl(e,"clip"+t._fullLayout._uid+r,t)}function m(e){d(e)&&(e._fullLayout._activeSelectionIndex>=0&&(a(e),delete e._fullLayout._activeSelectionIndex,f(e)))}e.exports={draw:f,drawOne:h,activateLastSelection:function(e){if(!d(e))return;var t=e._fullLayout.selections.length-1;e._fullLayout._activeSelectionIndex=t,e._fullLayout._deactivateSelection=m,f(e)}}},62817:(e,t,n)=>{"use strict";var r=n(9488).T,i=n(86395).extendFlat;e.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none",description:["Describes how a new selection is created.","If `immediate`, a new selection is created after first mouse up.","If `gradual`, a new selection is not created after first mouse.","By adding to and subtracting from the initial selection,","this option allows declaring extra outlines of the selection."].join(" ")},line:{color:{valType:"color",editType:"none",description:["Sets the line color.","By default uses either dark grey or white","to increase contrast with background color."].join(" ")},width:{valType:"number",min:1,dflt:1,editType:"none",description:"Sets the line width (in px)."},dash:i({},r,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none",description:"Sets the color filling the active selection' interior."},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none",description:"Sets the opacity of the active selection."},editType:"none"}}},84326:e=>{"use strict";e.exports=function(e,t,n){n("newselection.mode"),n("newselection.line.width")&&(n("newselection.line.color"),n("newselection.line.dash")),n("activeselection.fillcolor"),n("activeselection.opacity")}},95747:(e,t,n)=>{"use strict";var r=n(89232).selectMode,i=n(10556).clearOutline,a=n(69981),o=a.readPaths,s=a.writePaths,l=a.fixDatesForPaths;e.exports=function(e,t){if(e.length){var n=e[0][0];if(n){var a=n.getAttribute("d"),c=t.gd,u=c._fullLayout.newselection,f=t.plotinfo,d=f.xaxis,h=f.yaxis,p=t.isActiveSelection,m=t.dragmode,g=(c.layout||{}).selections||[];if(!r(m)&&void 0!==p){var v=c._fullLayout._activeSelectionIndex;if(v<g.length)switch(c._fullLayout.selections[v].type){case"rect":m="select";break;case"path":m="lasso"}}var y,b=o(a,c,f,p),x={xref:d._id,yref:h._id,opacity:u.opacity,line:{color:u.line.color,width:u.line.width,dash:u.line.dash}};1===b.length&&(y=b[0]),y&&5===y.length&&"select"===m?(x.type="rect",x.x0=y[0][1],x.y0=y[0][2],x.x1=y[2][1],x.y1=y[2][2]):(x.type="path",d&&h&&l(b,d,h),x.path=s(b),y=null),i(c);for(var _=t.editHelpers,w=(_||{}).modifyItem,A=[],k=0;k<g.length;k++){var E=c._fullLayout.selections[k];if(E){if(A[k]=E._input,void 0!==p&&k===c._fullLayout._activeSelectionIndex){var T=x;switch(E.type){case"rect":w("x0",T.x0),w("x1",T.x1),w("y0",T.y0),w("y1",T.y1);break;case"path":w("path",T.path)}}}else A[k]=E}return void 0===p?(A.push(x),A):_?_.getUpdateObj():{}}}}},39151:(e,t,n)=>{"use strict";var r=n(56319).strTranslate;function i(e,t){switch(e.type){case"log":return e.p2d(t);case"date":return e.p2r(t,0,e.calendar);default:return e.p2r(t)}}e.exports={p2r:i,r2p:function(e,t){switch(e.type){case"log":return e.d2p(t);case"date":return e.r2p(t,0,e.calendar);default:return e.r2p(t)}},axValue:function(e){var t="y"===e._id.charAt(0)?1:0;return function(n){return i(e,n[t])}},getTransform:function(e){return r(e.xaxis._offset,e.yaxis._offset)}}},94190:(e,t,n)=>{"use strict";var r=n(16774),i=n(80132);e.exports={moduleType:"component",name:"selections",layoutAttributes:n(2965),supplyLayoutDefaults:n(96098),supplyDrawNewSelectionDefaults:n(84326),includeBasePlot:n(62740)("selections"),draw:r.draw,drawOne:r.drawOne,reselect:i.reselect,prepSelect:i.prepSelect,clearOutline:i.clearOutline,clearSelectionsCache:i.clearSelectionsCache,selectOnClick:i.selectOnClick}},80132:(e,t,n)=>{"use strict";var r=n(14336),i=n(97889),a=n(3360),o=n(14797).dashStyle,s=n(53408),l=n(17911),c=n(44790).makeEventData,u=n(89232),f=u.freeMode,d=u.rectMode,h=u.drawMode,p=u.openMode,m=u.selectMode,g=n(82282),v=n(68670),y=n(35347),b=n(10556).clearOutline,x=n(69981),_=x.handleEllipse,w=x.readPaths,A=n(18864).newShapes,k=n(95747),E=n(16774).activateLastSelection,T=n(56319),M=T.sorterAsc,S=n(55549),C=n(78503),O=n(33489).getFromId,R=n(68857),N=n(96099).redrawReglTraces,L=n(27167),D=L.MINSELECT,P=S.filter,I=S.tester,F=n(39151),z=F.p2r,j=F.axValue,B=F.getTransform;function U(e){return void 0!==e.subplot}function $(e,t,n,r,i,a,o){var s,l,c,u,f,d,h,m,g,v=t._hoverdata,b=t._fullLayout.clickmode.indexOf("event")>-1,x=[];if(function(e){return e&&Array.isArray(e)&&!0!==e[0].hoverOnBox}(v)){W(e,t,a);var _=function(e,t){var n,r,i=e[0],a=-1,o=[];for(r=0;r<t.length;r++)if(n=t[r],i.fullData._expandedIndex===n.cd[0].trace._expandedIndex){if(!0===i.hoverOnBox)break;void 0!==i.pointNumber?a=i.pointNumber:void 0!==i.binNumber&&(a=i.binNumber,o=i.pointNumbers);break}return{pointNumber:a,pointNumbers:o,searchInfo:n}}(v,s=X(t,n,r,i));if(_.pointNumbers.length>0?function(e,t){var n,r,i,a=[];for(i=0;i<e.length;i++)(n=e[i]).cd[0].trace.selectedpoints&&n.cd[0].trace.selectedpoints.length>0&&a.push(n);if(1===a.length&&a[0]===t.searchInfo&&(r=t.searchInfo.cd[0].trace).selectedpoints.length===t.pointNumbers.length){for(i=0;i<t.pointNumbers.length;i++)if(r.selectedpoints.indexOf(t.pointNumbers[i])<0)return!1;return!0}return!1}(s,_):function(e){var t,n,r=0;for(n=0;n<e.length;n++)if((t=e[n].cd[0].trace).selectedpoints){if(t.selectedpoints.length>1)return!1;if((r+=t.selectedpoints.length)>1)return!1}return 1===r}(s)&&(d=Z(_))){for(o&&o.remove(),g=0;g<s.length;g++)(l=s[g])._module.selectPoints(l,!1);J(t,s),G(a),b&&de(t)}else{for(h=e.shiftKey&&(void 0!==d?d:Z(_)),c=function(e,t,n){return{pointNumber:e,searchInfo:t,subtract:!!n}}(_.pointNumber,_.searchInfo,h),u=V(a.selectionDefs.concat([c])),g=0;g<s.length;g++)if(f=ee(s[g]._module.selectPoints(s[g],u),s[g]),x.length)for(var w=0;w<f.length;w++)x.push(f[w]);else x=f;if(J(t,s,m={points:x}),c&&a&&a.selectionDefs.push(c),o){var A=a.mergedPolygons,k=p(a.dragmode);y(te(A,k),o,a)}b&&fe(t,m)}}}function q(e){return"pointNumber"in e&&"searchInfo"in e}function H(e){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(t,n,r,i){var a=e.searchInfo.cd[0].trace._expandedIndex;return i.cd[0].trace._expandedIndex===a&&r===e.pointNumber},isRect:!1,degenerate:!1,subtract:!!e.subtract}}function V(e){if(e.length){for(var t=[],n=q(e[0])?0:e[0][0][0],r=n,i=q(e[0])?0:e[0][0][1],a=i,o=0;o<e.length;o++)if(q(e[o]))t.push(H(e[o]));else{var s=I(e[o]);s.subtract=!!e[o].subtract,t.push(s),n=Math.min(n,s.xmin),r=Math.max(r,s.xmax),i=Math.min(i,s.ymin),a=Math.max(a,s.ymax)}return{xmin:n,xmax:r,ymin:i,ymax:a,pts:[],contains:function(e,n,r,i){for(var a=!1,o=0;o<t.length;o++)t[o].contains(e,n,r,i)&&(a=!t[o].subtract);return a},isRect:!1,degenerate:!1}}}function W(e,t,n){var r=t._fullLayout,i=n.plotinfo,a=n.dragmode,o=r._lastSelectedSubplot&&r._lastSelectedSubplot===i.id,s=(e.shiftKey||e.altKey)&&!(h(a)&&p(a));o&&s&&i.selection&&i.selection.selectionDefs&&!n.selectionDefs?(n.selectionDefs=i.selection.selectionDefs,n.mergedPolygons=i.selection.mergedPolygons):s&&i.selection||G(n),o||(b(t),r._lastSelectedSubplot=i.id)}function G(e,t){var n=e.dragmode,r=e.plotinfo,i=e.gd;(function(e){return e._fullLayout._activeShapeIndex>=0})(i)&&i._fullLayout._deactivateShape(i),function(e){return e._fullLayout._activeSelectionIndex>=0}(i)&&i._fullLayout._deactivateSelection(i);var o=i._fullLayout._zoomlayer,s=h(n),l=m(n);if(s||l){var c,u,f=o.selectAll(".select-outline-"+r.id);if(f&&i._fullLayout._outlining)s&&(c=A(f,e)),c&&a.call("_guiRelayout",i,{shapes:c}),l&&!U(e)&&(u=k(f,e)),u&&(i._fullLayout._noEmitSelectedAtStart=!0,a.call("_guiRelayout",i,{selections:u}).then((function(){t&&E(i)}))),i._fullLayout._outlining=!1}r.selection={},r.selection.selectionDefs=e.selectionDefs=[],r.selection.mergedPolygons=e.mergedPolygons=[]}function Y(e){return e._id}function X(e,t,n,r){if(!e.calcdata)return[];var i,a,o,s=[],l=t.map(Y),c=n.map(Y);for(o=0;o<e.calcdata.length;o++)if(!0===(a=(i=e.calcdata[o])[0].trace).visible&&a._module&&a._module.selectPoints)if(!U({subplot:r})||a.subplot!==r&&a.geo!==r)if("splom"===a.type){if(a._xaxes[l[0]]&&a._yaxes[c[0]]){var u=K(a._module,i,t[0],n[0]);u.scene=e._fullLayout._splomScenes[a.uid],s.push(u)}}else if("sankey"===a.type){var f=K(a._module,i,t[0],n[0]);s.push(f)}else{if(!(-1!==l.indexOf(a.xaxis)||a._xA&&a._xA.overlaying))continue;if(!(-1!==c.indexOf(a.yaxis)||a._yA&&a._yA.overlaying))continue;s.push(K(a._module,i,O(e,a.xaxis),O(e,a.yaxis)))}else s.push(K(a._module,i,t[0],n[0]));return s}function K(e,t,n,r){return{_module:e,cd:t,xaxis:n,yaxis:r}}function Z(e){var t=e.searchInfo.cd[0].trace,n=e.pointNumber,r=e.pointNumbers,i=r.length>0?r[0]:n;return!!t.selectedpoints&&t.selectedpoints.indexOf(i)>-1}function J(e,t,n){var r,i;for(r=0;r<t.length;r++){var o=t[r].cd[0].trace._fullInput,s=e._fullLayout._tracePreGUI[o.uid]||{};void 0===s.selectedpoints&&(s.selectedpoints=o._input.selectedpoints||null)}if(n){var l=n.points||[];for(r=0;r<t.length;r++)(i=t[r].cd[0].trace)._input.selectedpoints=i._fullInput.selectedpoints=[],i._fullInput!==i&&(i.selectedpoints=[]);for(var c=0;c<l.length;c++){var u=l[c],f=u.data,d=u.fullData,h=u.pointIndex,p=u.pointIndices;p?([].push.apply(f.selectedpoints,p),i._fullInput!==i&&[].push.apply(d.selectedpoints,p)):(f.selectedpoints.push(h),i._fullInput!==i&&d.selectedpoints.push(h))}}else for(r=0;r<t.length;r++)delete(i=t[r].cd[0].trace).selectedpoints,delete i._input.selectedpoints,i._fullInput!==i&&delete i._fullInput.selectedpoints;!function(e,t){for(var n=!1,r=0;r<t.length;r++){var i=t[r],o=i.cd;a.traceIs(o[0].trace,"regl")&&(n=!0);var s=i._module,l=s.styleOnSelect||s.style;l&&(l(e,o,o[0].node3),o[0].nodeRangePlot3&&l(e,o,o[0].nodeRangePlot3))}n&&(R(e),N(e))}(e,t)}function Q(e,t,n){for(var i=(n?r.difference:r.union)({regions:e},{regions:[t]}).regions.reverse(),a=0;a<i.length;a++){var o=i[a];o.subtract=se(o,i.slice(0,a))}return i}function ee(e,t){if(Array.isArray(e))for(var n=t.cd,r=t.cd[0].trace,i=0;i<e.length;i++)e[i]=c(e[i],r,n);return e}function te(e,t){for(var n=[],r=0;r<e.length;r++){n[r]=[];for(var i=0;i<e[r].length;i++){n[r][i]=[],n[r][i][0]=i?"L":"M";for(var a=0;a<e[r][i].length;a++)n[r][i].push(e[r][i][a])}t||n[r].push(["Z",n[r][0][1],n[r][0][2]])}return n}function ne(e,t){for(var n,r,i=[],a=[],o=0;o<t.length;o++){var s=t[o];r=s._module.selectPoints(s,e),a.push(r),n=ee(r,s),i=i.concat(n)}return i}function re(e,t,n,r,i){var a,o,s,l=!!r;i&&(a=i.plotinfo,o=i.xaxes[0]._id,s=i.yaxes[0]._id);var c=[],u=[],f=oe(e),d=e._fullLayout;if(a){var p=d._zoomlayer,g=d.dragmode,v=h(g),y=m(g);if(v||y){var b=O(e,o,"x"),x=O(e,s,"y");if(b&&x){var _=p.selectAll(".select-outline-"+a.id);if(_&&e._fullLayout._outlining&&_.length){for(var A=_[0][0].getAttribute("d"),k=w(A,e,a),E=[],T=0;T<k.length;T++){for(var M=k[T],S=[],C=0;C<M.length;C++)S.push([le(b,M[C][1]),le(x,M[C][2])]);S.xref=o,S.yref=s,S.subtract=se(S,E),E.push(S)}f=f.concat(E)}}}}var R=o&&s?[o+s]:d._subplots.cartesian;!function(e){var t=e.calcdata;if(!t)return;for(var n=0;n<t.length;n++){var r=t[n][0].trace,i=e._fullLayout._splomScenes;if(i){var a=i[r.uid];a&&(a.selectBatch=[])}}}(e);for(var N={},L=0;L<R.length;L++){var D=R[L],P=D.indexOf("y"),I=D.slice(0,P),F=D.slice(P),z=o&&s?n:void 0;if(z=ae(f,I,F,z)){var j=r;if(!l){var B=O(e,I,"x"),U=O(e,F,"y");j=X(e,[B],[U],D);for(var $=0;$<j.length;$++){var q=j[$],H=q.cd[0],V=H.trace;if("scattergl"===q._module.name&&!H.t.xpx){var W=V.x,G=V.y,Y=V._length;H.t.xpx=[],H.t.ypx=[];for(var K=0;K<Y;K++)H.t.xpx[K]=B.c2p(W[K]),H.t.ypx[K]=U.c2p(G[K])}"splom"===q._module.name&&(N[V.uid]||(N[V.uid]=!0))}}var Z=ne(z,j);c=c.concat(Z),u=u.concat(j)}}var Q={points:c};J(e,u,Q);var ee=d.clickmode.indexOf("event")>-1&&t;if(!a&&t){var te=oe(e,!0);if(te.length){var re=te[0].xref,he=te[0].yref;if(re&&he){var pe=ce(te);ue([O(e,re,"x"),O(e,he,"y")])(Q,pe)}}e._fullLayout._noEmitSelectedAtStart?e._fullLayout._noEmitSelectedAtStart=!1:ee&&fe(e,Q),d._reselect=!1}if(!a&&d._deselect){var me=d._deselect;(function(e,t,n){for(var r=0;r<n.length;r++){var i=n[r];if(i.xaxis&&i.xaxis._id===e&&i.yaxis&&i.yaxis._id===t)return!0}return!1})(o=me.xref,s=me.yref,u)||ie(e,o,s,r),ee&&(Q.points.length?fe(e,Q):de(e)),d._deselect=!1}return{eventData:Q,selectionTesters:n}}function ie(e,t,n,r){r=X(e,[O(e,t,"x")],[O(e,n,"y")],t+n);for(var i=0;i<r.length;i++){var a=r[i];a._module.selectPoints(a,!1)}J(e,r)}function ae(e,t,n,r){for(var i,a=0;a<e.length;a++){var o=e[a];if(t===o.xref&&n===o.yref)if(i)r=V(i=Q(i,o,!!o.subtract));else i=[o],r=I(o)}return r}function oe(e,t){for(var n=[],r=e._fullLayout,i=r.selections,a=i.length,o=0;o<a;o++)if(!t||o===r._activeSelectionIndex){var s=i[o];if(s){var l,c,u,f,d,h=s.xref,p=s.yref,m=O(e,h,"x"),y=O(e,p,"y");if("rect"===s.type){d=[];var b=le(m,s.x0),x=le(m,s.x1),_=le(y,s.y0),w=le(y,s.y1);d=[[b,_],[b,w],[x,w],[x,_]],l=Math.min(b,x),c=Math.max(b,x),u=Math.min(_,w),f=Math.max(_,w),d.xmin=l,d.xmax=c,d.ymin=u,d.ymax=f,d.xref=h,d.yref=p,d.subtract=!1,d.isRect=!0,n.push(d)}else if("path"===s.type)for(var A=s.path.split("Z"),k=[],E=0;E<A.length;E++){var T=A[E];if(T){T+="Z";var M=g.extractPathCoords(T,v.paramIsX,"raw"),S=g.extractPathCoords(T,v.paramIsY,"raw");l=1/0,c=-1/0,u=1/0,f=-1/0,d=[];for(var C=0;C<M.length;C++){var R=le(m,M[C]),N=le(y,S[C]);d.push([R,N]),l=Math.min(R,l),c=Math.max(R,c),u=Math.min(N,u),f=Math.max(N,f)}d.xmin=l,d.xmax=c,d.ymin=u,d.ymax=f,d.xref=h,d.yref=p,d.subtract=se(d,k),k.push(d),n.push(d)}}}}return n}function se(e,t){for(var n=!1,r=0;r<t.length;r++)for(var a=t[r],o=0;o<e.length;o++)if(i(e[o],a)){n=!n;break}return n}function le(e,t){return"date"===e.type&&(t=t.replace("_"," ")),"log"===e.type?e.c2p(t):e.r2p(t,null,e.calendar)}function ce(e){for(var t=e.length,n=[],r=0;r<t;r++){var i=e[r];n=(n=n.concat(i)).concat([i[0]])}return function(e){e.isRect=5===e.length&&e[0][0]===e[4][0]&&e[0][1]===e[4][1]&&e[0][0]===e[1][0]&&e[2][0]===e[3][0]&&e[0][1]===e[3][1]&&e[1][1]===e[2][1]||e[0][1]===e[1][1]&&e[2][1]===e[3][1]&&e[0][0]===e[3][0]&&e[1][0]===e[2][0],e.isRect&&(e.xmin=Math.min(e[0][0],e[2][0]),e.xmax=Math.max(e[0][0],e[2][0]),e.ymin=Math.min(e[0][1],e[2][1]),e.ymax=Math.max(e[0][1],e[2][1]));return e}(n)}function ue(e){return function(t,n){for(var r,i,a=0;a<e.length;a++){var o=e[a],s=o._id,l=s.charAt(0);if(n.isRect){r||(r={});var c=n[l+"min"],u=n[l+"max"];void 0!==c&&void 0!==u&&(r[s]=[z(o,c),z(o,u)].sort(M))}else i||(i={}),i[s]=n.map(j(o))}r&&(t.range=r),i&&(t.lassoPoints=i)}}function fe(e,t){t&&(t.selections=(e.layout||{}).selections||[]),e.emit("plotly_selected",t)}function de(e){e.emit("plotly_deselect",null)}e.exports={reselect:re,prepSelect:function(e,t,n,r,i){var c=!U(r),u=f(i),g=d(i),v=p(i),b=h(i),x=m(i),w="drawcircle"===i,A="drawline"===i||w,k=r.gd,E=k._fullLayout,M=x&&"immediate"===E.newselection.mode&&c,S=E._zoomlayer,O=r.element.getBoundingClientRect(),R=r.plotinfo,N=B(R),F=t-O.left,z=n-O.top;E._calcInverseTransform(k);var j=T.apply3DTransform(E._invTransform)(F,z);F=j[0],z=j[1];var q,H,Y,K,Z,ee,ae,oe=E._invScaleX,se=E._invScaleY,le=F,he=z,pe="M"+F+","+z,me=r.xaxes[0],ge=r.yaxes[0],ve=me._length,ye=ge._length,be=e.altKey&&!(h(i)&&v);W(e,k,r),u&&(q=P([[F,z]],L.BENDPX));var xe=S.selectAll("path.select-outline-"+R.id).data([1]),_e=b?E.newshape:E.newselection;b&&(r.hasText=_e.label.text||_e.label.texttemplate);var we=b&&!v?_e.fillcolor:"rgba(0,0,0,0)",Ae=_e.line.color||(c?s.contrast(k._fullLayout.plot_bgcolor):"#7f7f7f");xe.enter().append("path").attr("class","select-outline select-outline-"+R.id).style({opacity:b?_e.opacity/2:1,"stroke-dasharray":o(_e.line.dash,_e.line.width),"stroke-width":_e.line.width+"px","shape-rendering":"crispEdges"}).call(s.stroke,Ae).call(s.fill,we).attr("fill-rule","evenodd").classed("cursor-move",!!b).attr("transform",N).attr("d",pe+"Z");var ke=S.append("path").attr("class","zoombox-corners").style({fill:s.background,stroke:s.defaultLine,"stroke-width":1}).attr("transform",N).attr("d","M0,0Z");if(b&&r.hasText){var Ee=S.select(".label-temp");Ee.empty()&&(Ee=S.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var Te=E._uid+L.SELECTID,Me=[],Se=X(k,r.xaxes,r.yaxes,r.subplot);M&&!e.shiftKey&&(r._clearSubplotSelections=function(){if(c){var e=me._id,t=ge._id;ie(k,e,t,Se);for(var n=(k.layout||{}).selections||[],r=[],i=!1,o=0;o<n.length;o++){var s=E.selections[o];s.xref!==e||s.yref!==t?r.push(n[o]):i=!0}i&&(k._fullLayout._noEmitSelectedAtStart=!0,a.call("_guiRelayout",k,{selections:r}))}});var Ce=function(e){var t=e.plotinfo;return t.fillRangeItems||ue(e.xaxes.concat(e.yaxes))}(r);r.moveFn=function(e,t){r._clearSubplotSelections&&(r._clearSubplotSelections(),r._clearSubplotSelections=void 0),le=Math.max(0,Math.min(ve,oe*e+F)),he=Math.max(0,Math.min(ye,se*t+z));var n=Math.abs(le-F),i=Math.abs(he-z);if(g){var a,o,s;if(x){var l=E.selectdirection;switch(a="any"===l?i<Math.min(.6*n,D)?"h":n<Math.min(.6*i,D)?"v":"d":l){case"h":o=w?ye/2:0,s=ye;break;case"v":o=w?ve/2:0,s=ve}}if(b)switch(E.newshape.drawdirection){case"vertical":a="h",o=w?ye/2:0,s=ye;break;case"horizontal":a="v",o=w?ve/2:0,s=ve;break;case"ortho":n<i?(a="h",o=z,s=he):(a="v",o=F,s=le);break;default:a="d"}"h"===a?((K=A?_(w,[le,o],[le,s]):[[F,o],[F,s],[le,s],[le,o]]).xmin=A?le:Math.min(F,le),K.xmax=A?le:Math.max(F,le),K.ymin=Math.min(o,s),K.ymax=Math.max(o,s),ke.attr("d","M"+K.xmin+","+(z-D)+"h-4v"+2*D+"h4ZM"+(K.xmax-1)+","+(z-D)+"h4v"+2*D+"h-4Z")):"v"===a?((K=A?_(w,[o,he],[s,he]):[[o,z],[o,he],[s,he],[s,z]]).xmin=Math.min(o,s),K.xmax=Math.max(o,s),K.ymin=A?he:Math.min(z,he),K.ymax=A?he:Math.max(z,he),ke.attr("d","M"+(F-D)+","+K.ymin+"v-4h"+2*D+"v4ZM"+(F-D)+","+(K.ymax-1)+"v4h"+2*D+"v-4Z")):"d"===a&&((K=A?_(w,[F,z],[le,he]):[[F,z],[F,he],[le,he],[le,z]]).xmin=Math.min(F,le),K.xmax=Math.max(F,le),K.ymin=Math.min(z,he),K.ymax=Math.max(z,he),ke.attr("d","M0,0Z"))}else u&&(q.addPt([le,he]),K=q.filtered);if(r.selectionDefs&&r.selectionDefs.length?(Y=Q(r.mergedPolygons,K,be),K.subtract=be,H=V(r.selectionDefs.concat([K]))):(Y=[K],H=I(K)),y(te(Y,v),xe,r),x){var c,f=re(k,!1),d=f.eventData?f.eventData.points.slice():[];f=re(k,!1,H,Se,r),H=f.selectionTesters,ae=f.eventData,c=q?q.filtered:ce(Y),C.throttle(Te,L.SELECTDELAY,(function(){for(var e=(Me=ne(H,Se)).slice(),t=0;t<d.length;t++){for(var n=d[t],r=!1,i=0;i<e.length;i++)if(e[i].curveNumber===n.curveNumber&&e[i].pointNumber===n.pointNumber){r=!0;break}r||e.push(n)}e.length&&(ae||(ae={}),ae.points=e),Ce(ae,c),function(e,t){e.emit("plotly_selecting",t)}(k,ae)}))}},r.clickFn=function(e,t){if(ke.remove(),k._fullLayout._activeShapeIndex>=0)k._fullLayout._deactivateShape(k);else if(!b){var n=E.clickmode;C.done(Te).then((function(){if(C.clear(Te),2===e){for(xe.remove(),Z=0;Z<Se.length;Z++)(ee=Se[Z])._module.selectPoints(ee,!1);if(J(k,Se),G(r),de(k),Se.length){var i=Se[0].xaxis,o=Se[0].yaxis;if(i&&o){for(var s=[],c=k._fullLayout.selections,u=0;u<c.length;u++){var f=c[u];f&&(f.xref===i._id&&f.yref===o._id||s.push(f))}s.length<c.length&&(k._fullLayout._noEmitSelectedAtStart=!0,a.call("_guiRelayout",k,{selections:s}))}}}else n.indexOf("select")>-1&&$(t,k,r.xaxes,r.yaxes,r.subplot,r,xe),"event"===n&&fe(k,void 0);l.click(k,t,R.id)})).catch(T.error)}},r.doneFn=function(){ke.remove(),C.done(Te).then((function(){C.clear(Te),!M&&K&&r.selectionDefs&&(K.subtract=be,r.selectionDefs.push(K),r.mergedPolygons.length=0,[].push.apply(r.mergedPolygons,Y)),(M||b)&&G(r,M),r.doneFnCompleted&&r.doneFnCompleted(Me),x&&fe(k,ae)})).catch(T.error)}},clearOutline:b,clearSelectionsCache:G,selectOnClick:$}},12354:(e,t,n)=>{"use strict";var r=n(48244),i=n(95323),a=n(19030).line,o=n(9488).T,s=n(86395).extendFlat,l=n(65210).templatedArray,c=n(53939),u=n(85507),f=n(77014).LF,d=n(60633);e.exports=l("shape",{visible:s({},u.visible,{editType:"calc+arraydraw",description:["Determines whether or not this shape is visible.","If *legendonly*, the shape is not drawn,","but can appear as a legend item","(provided that the legend itself is visible)."].join(" ")}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw",description:["Determines whether or not this","shape is shown in the legend."].join(" ")},legend:s({},u.legend,{editType:"calc+arraydraw",description:["Sets the reference to a legend to show this shape in.","References to these legends are *legend*, *legend2*, *legend3*, etc.","Settings for these legends are set in the layout, under","`layout.legend`, `layout.legend2`, etc."].join(" ")}),legendgroup:s({},u.legendgroup,{editType:"calc+arraydraw",description:["Sets the legend group for this shape.","Traces and shapes part of the same legend group hide/show at the same time","when toggling legend items."].join(" ")}),legendgrouptitle:{text:s({},u.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:i({editType:"calc+arraydraw",description:["Sets this legend group's title font."].join(" ")}),editType:"calc+arraydraw"},legendrank:s({},u.legendrank,{editType:"calc+arraydraw",description:["Sets the legend rank for this shape.","Items and groups with smaller ranks are presented on top/left side while","with *reversed* `legend.traceorder` they are on bottom/right side.","The default legendrank is 1000,","so that you can use ranks less than 1000 to place certain items before all unranked items,","and ranks greater than 1000 to go after all unranked items.","When having unranked or equal rank items shapes would be displayed after traces","i.e. according to their order in data and layout."].join(" ")}),legendwidth:s({},u.legendwidth,{editType:"calc+arraydraw",description:"Sets the width (in px or fraction) of the legend for this shape."}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw",description:["Specifies the shape type to be drawn.","If *line*, a line is drawn from (`x0`,`y0`) to (`x1`,`y1`)","with respect to the axes' sizing mode.","If *circle*, a circle is drawn from","((`x0`+`x1`)/2, (`y0`+`y1`)/2))","with radius","(|(`x0`+`x1`)/2 - `x0`|, |(`y0`+`y1`)/2 -`y0`)|)","with respect to the axes' sizing mode.","If *rect*, a rectangle is drawn linking","(`x0`,`y0`), (`x1`,`y0`), (`x1`,`y1`), (`x0`,`y1`), (`x0`,`y0`)","with respect to the axes' sizing mode.","If *path*, draw a custom SVG path using `path`.","with respect to the axes' sizing mode."].join(" ")},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",editType:"arraydraw",description:["Specifies whether shapes are drawn below gridlines (*below*),","between gridlines and traces (*between*) or above traces (*above*)."].join(" ")},xref:s({},r.xref,{description:["Sets the shape's x coordinate axis.",c.axisRefDescription("x","left","right")].join(" ")}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw",description:["Sets the shapes's sizing mode along the x axis.","If set to *scaled*, `x0`, `x1` and x coordinates within `path` refer to","data values on the x axis or a fraction of the plot area's width","(`xref` set to *paper*).","If set to *pixel*, `xanchor` specifies the x position in terms","of data or plot fraction but `x0`, `x1` and x coordinates within `path`","are pixels relative to `xanchor`. This way, the shape can have","a fixed width while maintaining a position relative to data or","plot fraction."].join(" ")},xanchor:{valType:"any",editType:"calc+arraydraw",description:["Only relevant in conjunction with `xsizemode` set to *pixel*.","Specifies the anchor point on the x axis to which `x0`, `x1`","and x coordinates within `path` are relative to.","E.g. useful to attach a pixel sized shape to a certain data value.","No effect when `xsizemode` not set to *pixel*."].join(" ")},x0:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's starting x position.","See `type` and `xsizemode` for more info."].join(" ")},x1:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's end x position.","See `type` and `xsizemode` for more info."].join(" ")},x0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc",description:["Shifts `x0` away from the center of the category when `xref` is a *category* or","*multicategory* axis. -0.5 corresponds to the start of the category and 0.5","corresponds to the end of the category."].join(" ")},x1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc",description:["Shifts `x1` away from the center of the category when `xref` is a *category* or","*multicategory* axis. -0.5 corresponds to the start of the category and 0.5","corresponds to the end of the category."].join(" ")},yref:s({},r.yref,{description:["Sets the shape's y coordinate axis.",c.axisRefDescription("y","bottom","top")].join(" ")}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw",description:["Sets the shapes's sizing mode along the y axis.","If set to *scaled*, `y0`, `y1` and y coordinates within `path` refer to","data values on the y axis or a fraction of the plot area's height","(`yref` set to *paper*).","If set to *pixel*, `yanchor` specifies the y position in terms","of data or plot fraction but `y0`, `y1` and y coordinates within `path`","are pixels relative to `yanchor`. This way, the shape can have","a fixed height while maintaining a position relative to data or","plot fraction."].join(" ")},yanchor:{valType:"any",editType:"calc+arraydraw",description:["Only relevant in conjunction with `ysizemode` set to *pixel*.","Specifies the anchor point on the y axis to which `y0`, `y1`","and y coordinates within `path` are relative to.","E.g. useful to attach a pixel sized shape to a certain data value.","No effect when `ysizemode` not set to *pixel*."].join(" ")},y0:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's starting y position.","See `type` and `ysizemode` for more info."].join(" ")},y1:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's end y position.","See `type` and `ysizemode` for more info."].join(" ")},y0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc",description:["Shifts `y0` away from the center of the category when `yref` is a *category* or","*multicategory* axis. -0.5 corresponds to the start of the category and 0.5","corresponds to the end of the category."].join(" ")},y1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc",description:["Shifts `y1` away from the center of the category when `yref` is a *category* or","*multicategory* axis. -0.5 corresponds to the start of the category and 0.5","corresponds to the end of the category."].join(" ")},path:{valType:"string",editType:"calc+arraydraw",description:["For `type` *path* - a valid SVG path with the pixel values","replaced by data values in `xsizemode`/`ysizemode` being *scaled*","and taken unmodified as pixels relative to `xanchor` and `yanchor`","in case of *pixel* size mode.","There are a few restrictions / quirks","only absolute instructions, not relative. So the allowed segments","are: M, L, H, V, Q, C, T, S, and Z","arcs (A) are not allowed because radius rx and ry are relative.","In the future we could consider supporting relative commands,","but we would have to decide on how to handle date and log axes.","Note that even as is, Q and C Bezier paths that are smooth on","linear axes may not be smooth on log, and vice versa.",'no chained "polybezier" commands - specify the segment type for',"each one.","On category axes, values are numbers scaled to the serial numbers","of categories because using the categories themselves there would","be no way to describe fractional positions","On data axes: because space and T are both normal components of path","strings, we can't use either to separate date from time parts.","Therefore we'll use underscore for this purpose:","2015-02-21_13:45:56.789"].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw",description:"Sets the opacity of the shape."},line:{color:s({},a.color,{editType:"arraydraw"}),width:s({},a.width,{editType:"calc+arraydraw"}),dash:s({},o,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw",description:["Sets the color filling the shape's interior. Only applies to closed shapes."].join(" ")},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw",description:["Determines which regions of complex paths constitute the interior.","For more info please visit https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/fill-rule"].join(" ")},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw",description:["Determines whether the shape could be activated for edit or not.","Has no effect when the older editable shapes mode is enabled via","`config.editable` or `config.edits.shapePosition`."].join(" ")},label:{text:{valType:"string",dflt:"",editType:"arraydraw",description:["Sets the text to display with shape.","It is also used for legend item if `name` is not provided."].join(" ")},texttemplate:f({},{keys:Object.keys(d)}),font:i({editType:"calc+arraydraw",colorEditType:"arraydraw",description:"Sets the shape label text font."}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw",description:["Sets the position of the label text relative to the shape.","Supported values for rectangles, circles and paths are","*top left*, *top center*, *top right*, *middle left*,","*middle center*, *middle right*, *bottom left*, *bottom center*,","and *bottom right*.","Supported values for lines are *start*, *middle*, and *end*.","Default: *middle center* for rectangles, circles, and paths; *middle* for lines."].join(" ")},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw",description:["Sets the angle at which the label text is drawn","with respect to the horizontal. For lines, angle *auto*","is the same angle as the line. For all other shapes,","angle *auto* is horizontal."].join(" ")},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw",description:["Sets the label's horizontal position anchor","This anchor binds the specified `textposition` to the *left*, *center*","or *right* of the label text.","For example, if `textposition` is set to *top right* and","`xanchor` to *right* then the right-most portion of the","label text lines up with the right-most edge of the","shape."].join(" ")},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw",description:["Sets the label's vertical position anchor","This anchor binds the specified `textposition` to the *top*, *middle*","or *bottom* of the label text.","For example, if `textposition` is set to *top right* and","`yanchor` to *top* then the top-most portion of the","label text lines up with the top-most edge of the","shape."].join(" ")},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw",description:"Sets padding (in px) between edge of label and edge of shape."},editType:"arraydraw"},editType:"arraydraw"})},48633:(e,t,n)=>{"use strict";var r=n(56319),i=n(596),a=n(68670),o=n(82282);function s(e){return c(e.line.width,e.xsizemode,e.x0,e.x1,e.path,!1)}function l(e){return c(e.line.width,e.ysizemode,e.y0,e.y1,e.path,!0)}function c(e,t,n,i,s,l){var c=e/2,u=l;if("pixel"===t){var f=s?o.extractPathCoords(s,l?a.paramIsY:a.paramIsX):[n,i],d=r.aggNums(Math.max,null,f),h=r.aggNums(Math.min,null,f),p=h<0?Math.abs(h)+c:c,m=d>0?d+c:c;return{ppad:c,ppadplus:u?p:m,ppadminus:u?m:p}}return{ppad:c}}function u(e,t,n){var r,i,s="x"===e._id.charAt(0)?"x":"y",l="category"===e.type||"multicategory"===e.type,c=0,u=0,f=l?e.r2c:e.d2c;if("scaled"===t[s+"sizemode"]?(r=t[s+"0"],i=t[s+"1"],l&&(c=t[s+"0shift"],u=t[s+"1shift"])):(r=t[s+"anchor"],i=t[s+"anchor"]),void 0!==r)return[f(r)+c,f(i)+u];if(t.path){var d,h,p,m,g=1/0,v=-1/0,y=t.path.match(a.segmentRE);for("date"===e.type&&(f=o.decodeDate(f)),d=0;d<y.length;d++)void 0!==(h=n[y[d].charAt(0)].drawn)&&(!(p=y[d].substr(1).match(a.paramRE))||p.length<h||((m=f(p[h]))<g&&(g=m),m>v&&(v=m)));return v>=g?[g,v]:void 0}}e.exports=function(e){var t=e._fullLayout,n=r.filterVisible(t.shapes);if(n.length&&e._fullData.length)for(var o=0;o<n.length;o++){var c,f,d=n[o];d._extremes={};var h=i.getRefType(d.xref),p=i.getRefType(d.yref);"paper"!==d.xref&&"domain"!==h&&(f=u(c=i.getFromId(e,d.xref),d,a.paramIsX))&&(d._extremes[c._id]=i.findExtremes(c,f,s(d))),"paper"!==d.yref&&"domain"!==p&&(f=u(c=i.getFromId(e,d.yref),d,a.paramIsY))&&(d._extremes[c._id]=i.findExtremes(c,f,l(d)))}}},68670:e=>{"use strict";e.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},23509:(e,t,n)=>{"use strict";var r=n(56319),i=n(596),a=n(75078),o=n(12354),s=n(82282);function l(e,t,n){function a(n,i){return r.coerce(e,t,o,n,i)}if(t._isShape=!0,a("visible")){a("showlegend")&&(a("legend"),a("legendwidth"),a("legendgroup"),a("legendgrouptitle.text"),r.coerceFont(a,"legendgrouptitle.font"),a("legendrank"));var l=a("path"),c=a("type",l?"path":"rect"),u="path"!==c;u&&delete t.path,a("editable"),a("layer"),a("opacity"),a("fillcolor"),a("fillrule"),a("line.width")&&(a("line.color"),a("line.dash"));for(var f=a("xsizemode"),d=a("ysizemode"),h=["x","y"],p=0;p<2;p++){var m,g,v,y=h[p],b=y+"anchor",x="x"===y?f:d,_={_fullLayout:n},w=i.coerceRef(e,t,_,y,void 0,"paper");if("range"===i.getRefType(w)?((m=i.getFromId(_,w))._shapeIndices.push(t._index),v=s.rangeToShapePosition(m),g=s.shapePositionToRange(m),"category"!==m.type&&"multicategory"!==m.type||(a(y+"0shift"),a(y+"1shift"))):g=v=r.identity,u){var A=y+"0",k=y+"1",E=e[A],T=e[k];e[A]=g(e[A],!0),e[k]=g(e[k],!0),"pixel"===x?(a(A,0),a(k,10)):(i.coercePosition(t,_,a,w,A,.25),i.coercePosition(t,_,a,w,k,.75)),t[A]=v(t[A]),t[k]=v(t[k]),e[A]=E,e[k]=T}if("pixel"===x){var M=e[b];e[b]=g(e[b],!0),i.coercePosition(t,_,a,w,b,.25),t[b]=v(t[b]),e[b]=M}}u&&r.noneOrAll(e,t,["x0","x1","y0","y1"]);var S,C,O="line"===c;if(u&&(S=a("label.texttemplate")),S||(C=a("label.text")),C||S){a("label.textangle");var R=a("label.textposition",O?"middle":"middle center");a("label.xanchor"),a("label.yanchor",function(e,t){return e?"bottom":-1!==t.indexOf("top")?"top":-1!==t.indexOf("bottom")?"bottom":"middle"}(O,R)),a("label.padding"),r.coerceFont(a,"label.font",n.font)}}}e.exports=function(e,t){a(e,t,{name:"shapes",handleItemDefaults:l})}},23359:(e,t,n)=>{"use strict";var r=n(56319),i=n(596),a=n(56953),o=n(14797),s=n(69981).readPaths,l=n(82282),c=l.getPathString,u=n(60633),f=n(12564).FROM_TL;e.exports=function(e,t,n,d){if(d.selectAll(".shape-label").remove(),n.label.text||n.label.texttemplate){var h;if(n.label.texttemplate){var p={};if("path"!==n.type){var m=i.getFromId(e,n.xref),g=i.getFromId(e,n.yref);for(var v in u){var y=u[v](n,m,g);void 0!==y&&(p[v]=y)}}h=r.texttemplateStringForShapes(n.label.texttemplate,{},e._fullLayout._d3locale,p)}else h=n.label.text;var b,x,_,w,A={"data-index":t},k=n.label.font,E=d.append("g").attr(A).classed("shape-label",!0).append("text").attr({"data-notex":1}).classed("shape-label-text",!0).text(h);if(n.path){var T=c(e,n),M=s(T,e);b=1/0,_=1/0,x=-1/0,w=-1/0;for(var S=0;S<M.length;S++)for(var C=0;C<M[S].length;C++)for(var O=M[S][C],R=1;R<O.length;R+=2){var N=O[R],L=O[R+1];b=Math.min(b,N),x=Math.max(x,N),_=Math.min(_,L),w=Math.max(w,L)}}else{var D=i.getFromId(e,n.xref),P=n.x0shift,I=n.x1shift,F=i.getRefType(n.xref),z=i.getFromId(e,n.yref),j=n.y0shift,B=n.y1shift,U=i.getRefType(n.yref),$=function(t,n){return l.getDataToPixel(e,D,n,!1,F)(t)},q=function(t,n){return l.getDataToPixel(e,z,n,!0,U)(t)};b=$(n.x0,P),x=$(n.x1,I),_=q(n.y0,j),w=q(n.y1,B)}var H=n.label.textangle;"auto"===H&&(H="line"===n.type?function(e,t,n,r){var i,a;a=Math.abs(n-e),i=n>=e?t-r:r-t;return-180/Math.PI*Math.atan2(i,a)}(b,_,x,w):0),E.call((function(t){return t.call(o.font,k).attr({}),a.convertToTspans(t,e),t}));var V=function(e,t,n,r,i,a,o){var s,l,c,u,d=i.label.textposition,h=i.label.textangle,p=i.label.padding,m=i.type,g=Math.PI/180*a,v=Math.sin(g),y=Math.cos(g),b=i.label.xanchor,x=i.label.yanchor;if("line"===m){"start"===d?(s=e,l=t):"end"===d?(s=n,l=r):(s=(e+n)/2,l=(t+r)/2),"auto"===b&&(b="start"===d?"auto"===h?n>e?"left":n<e?"right":"center":n>e?"right":n<e?"left":"center":"end"===d?"auto"===h?n>e?"right":n<e?"left":"center":n>e?"left":n<e?"right":"center":"center");var _={left:1,center:0,right:-1},w={bottom:-1,middle:0,top:1};if("auto"===h){var A=w[x];c=-p*v*A,u=p*y*A}else{c=p*_[b],u=p*w[x]}s+=c,l+=u}else c=p+3,-1!==d.indexOf("right")?(s=Math.max(e,n)-c,"auto"===b&&(b="right")):-1!==d.indexOf("left")?(s=Math.min(e,n)+c,"auto"===b&&(b="left")):(s=(e+n)/2,"auto"===b&&(b="center")),l=-1!==d.indexOf("top")?Math.min(t,r):-1!==d.indexOf("bottom")?Math.max(t,r):(t+r)/2,u=p,"bottom"===x?l-=u:"top"===x&&(l+=u);var k=f[x],E=i.label.font.size,T=o.height;return{textx:s+(T*k-E)*v,texty:l+-(T*k-E)*y,xanchor:b}}(b,_,x,w,n,H,o.bBox(E.node())),W=V.textx,G=V.texty,Y=V.xanchor;E.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[Y],y:G,x:W,transform:"rotate("+H+","+W+","+G+")"}).call(a.positionText,W,G)}}},35347:(e,t,n)=>{"use strict";var r=n(56319).strTranslate,i=n(85605),a=n(89232),o=a.drawMode,s=a.selectMode,l=n(3360),c=n(53408),u=n(21941),f=u.i000,d=u.i090,h=u.i180,p=u.i270,m=n(10556).clearOutlineControllers,g=n(69981),v=g.pointsOnRectangle,y=g.pointsOnEllipse,b=g.writePaths,x=n(18864).newShapes,_=n(18864).createShapeObj,w=n(95747),A=n(23359);function k(e,t){var n,r,i,a=e[t][1],o=e[t][2],s=e.length;return r=e[n=(t+1)%s][1],i=e[n][2],r===a&&i===o&&(r=e[n=(t+2)%s][1],i=e[n][2]),[n,r,i]}e.exports=function e(t,n,a,u){u||(u=0);var g=a.gd;function E(){e(t,n,a,u++),(y(t[0])||a.hasText)&&T({redrawing:!0})}function T(e){var t={};void 0!==a.isActiveShape&&(a.isActiveShape=!1,t=x(n,a)),void 0!==a.isActiveSelection&&(a.isActiveSelection=!1,t=w(n,a),g._fullLayout._reselect=!0),Object.keys(t).length&&l.call((e||{}).redrawing?"relayout":"_guiRelayout",g,t)}var M,S,C,O,R,N=g._fullLayout._zoomlayer,L=a.dragmode,D=o(L),P=s(L);((D||P)&&(g._fullLayout._outlining=!0),m(g),n.attr("d",b(t)),u||!a.isActiveShape&&!a.isActiveSelection)||(R=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];e[n]=[];for(var i=0;i<r.length;i++){e[n][i]=[];for(var a=0;a<r[i].length;a++)e[n][i][a]=r[i][a]}}return e}([],t),function(e){M=[];for(var n=0;n<t.length;n++){var o=t[n],s=v(o),l=!s&&y(o);M[n]=[];for(var u=o.length,m=0;m<u;m++)if("Z"!==o[m][0]&&(!l||m===f||m===d||m===h||m===p)){var b,x=s&&a.isActiveSelection;x&&(b=k(o,m));var _=o[m][1],w=o[m][2],A=e.append(x?"rect":"circle").attr("data-i",n).attr("data-j",m).style({fill:c.background,stroke:c.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(x){var E=b[1]-_,T=b[2]-w,S=T?5:Math.max(Math.min(25,Math.abs(E)-5),5),C=E?5:Math.max(Math.min(25,Math.abs(T)-5),5);A.classed(T?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",S).attr("height",C).attr("x",_-S/2).attr("y",w-C/2).attr("transform",r(E/2,T/2))}else A.classed("cursor-grab",!0).attr("r",5).attr("cx",_).attr("cy",w);M[n][m]={element:A.node(),gd:g,prepFn:z,doneFn:B,clickFn:U},i.init(M[n][m])}}}(N.append("g").attr("class","outline-controllers")),function(){if(S=[],!t.length)return;var e=0;S[e]={element:n[0][0],gd:g,prepFn:q,doneFn:H,clickFn:V},i.init(S[e])}());if(D&&a.hasText){var I=N.select(".label-temp"),F=_(n,a,a.dragmode);A(g,"label-temp",F,I)}function z(e){C=+e.srcElement.getAttribute("data-i"),O=+e.srcElement.getAttribute("data-j"),M[C][O].moveFn=j}function j(e,n){if(t.length){var r=R[C][O][1],i=R[C][O][2],o=t[C],s=o.length;if(v(o)){var l=e,c=n;if(a.isActiveSelection)k(o,O)[1]===o[O][1]?c=0:l=0;for(var u=0;u<s;u++)if(u!==O){var f=o[u];f[1]===o[O][1]&&(f[1]=r+l),f[2]===o[O][2]&&(f[2]=i+c)}if(o[O][1]=r+l,o[O][2]=i+c,!v(o))for(var d=0;d<s;d++)for(var h=0;h<o[d].length;h++)o[d][h]=R[C][d][h]}else o[O][1]=r+e,o[O][2]=i+n;E()}}function B(){T()}function U(e,n){if(2===e){C=+n.srcElement.getAttribute("data-i"),O=+n.srcElement.getAttribute("data-j");var r=t[C];v(r)||y(r)||function(){if(t.length&&t[C]&&t[C].length){for(var e=[],n=0;n<t[C].length;n++)n!==O&&e.push(t[C][n]);e.length>1&&(2!==e.length||"Z"!==e[1][0])&&(0===O&&(e[0][0]="M"),t[C]=e,E(),T())}}()}}function $(e,n){!function(e,n){if(t.length)for(var r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)for(var a=0;a+2<t[r][i].length;a+=2)t[r][i][a+1]=R[r][i][a+1]+e,t[r][i][a+2]=R[r][i][a+2]+n}(e,n),E()}function q(e){(C=+e.srcElement.getAttribute("data-i"))||(C=0),S[C].moveFn=$}function H(){T()}function V(e){2===e&&function(e){if(!s(e._fullLayout.dragmode))return;m(e);var t=e._fullLayout._activeSelectionIndex,n=(e.layout||{}).selections||[];if(t<n.length){for(var r=[],i=0;i<n.length;i++)i!==t&&r.push(n[i]);delete e._fullLayout._activeSelectionIndex;var a=e._fullLayout.selections[t];e._fullLayout._deselect={xref:a.xref,yref:a.yref},l.call("_guiRelayout",e,{selections:r})}}(g)}}},44093:(e,t,n)=>{"use strict";var r=n(93268),i=n(3360),a=n(56319),o=n(596),s=n(69981).readPaths,l=n(35347),c=n(23359),u=n(10556).clearOutlineControllers,f=n(53408),d=n(14797),h=n(65210).arrayEditor,p=n(85605),m=n(47281),g=n(68670),v=n(82282),y=v.getPathString;function b(e){var t=e._fullLayout;for(var n in t._shapeUpperLayer.selectAll("path").remove(),t._shapeLowerLayer.selectAll("path").remove(),t._shapeUpperLayer.selectAll("text").remove(),t._shapeLowerLayer.selectAll("text").remove(),t._plots){var r=t._plots[n].shapelayer;r&&(r.selectAll("path").remove(),r.selectAll("text").remove())}for(var i=0;i<t.shapes.length;i++)!0===t.shapes[i].visible&&w(e,i)}function x(e){return!!e._fullLayout._outlining}function _(e){return!e._context.edits.shapePosition}function w(e,t){e._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+t+'"]').remove();var n=v.makeShapesOptionsAndPlotinfo(e,t),u=n.options,w=n.plotinfo;if(u._input&&!0===u.visible)if("above"===u.layer)T(e._fullLayout._shapeUpperLayer);else if("paper"===u.xref||"paper"===u.yref)T(e._fullLayout._shapeLowerLayer);else if("between"===u.layer)T(w.shapelayerBetween);else{if(w._hadPlotinfo)T((w.mainplotinfo||w).shapelayer);else T(e._fullLayout._shapeLowerLayer)}function T(n){var T=y(e,u),M={"data-index":t,"fill-rule":u.fillrule,d:T},S=u.opacity,C=u.fillcolor,O=u.line.width?u.line.color:"rgba(0,0,0,0)",R=u.line.width,N=u.line.dash;R||!0!==u.editable||(R=5,N="solid");var L="Z"!==T[T.length-1],D=_(e)&&u.editable&&e._fullLayout._activeShapeIndex===t;D&&(C=L?"rgba(0,0,0,0)":e._fullLayout.activeshape.fillcolor,S=e._fullLayout.activeshape.opacity);var P,I=n.append("g").classed("shape-group",!0).attr({"data-index":t}),F=I.append("path").attr(M).style("opacity",S).call(f.stroke,O).call(f.fill,C).call(d.dashLine,N,R);if(A(I,e,u),c(e,t,u,I),(D||e._context.edits.shapePosition)&&(P=h(e.layout,"shapes",u)),D){F.style({cursor:"move"});var z={element:F.node(),plotinfo:w,gd:e,editHelpers:P,hasText:u.label.text||u.label.texttemplate,isActiveShape:!0},j=s(T,e);l(j,F,z)}else e._context.edits.shapePosition?function(e,t,n,s,l,u){var f,h,b,_,w,E,T,M,S,C,O,R,N,L,D,P,I=10,F=10,z="pixel"===n.xsizemode,j="pixel"===n.ysizemode,B="line"===n.type,U="path"===n.type,$=u.modifyItem,q=r.select(t.node().parentNode),H=o.getFromId(e,n.xref),V=o.getRefType(n.xref),W=o.getFromId(e,n.yref),G=o.getRefType(n.yref),Y=n.x0shift,X=n.x1shift,K=n.y0shift,Z=n.y1shift,J=function(t,n){return v.getDataToPixel(e,H,n,!1,V)(t)},Q=function(t,n){return v.getDataToPixel(e,W,n,!0,G)(t)},ee=v.getPixelToData(e,H,!1,V),te=v.getPixelToData(e,W,!0,G),ne=ie(),re={element:ne.node(),gd:e,prepFn:se,doneFn:le,clickFn:ce};function ie(){return B?ae():t}function ae(){var e=10,r=Math.max(n.line.width,e),i=l.append("g").attr("data-index",s).attr("drag-helper",!0);i.append("path").attr("d",t.attr("d")).style({cursor:"move","stroke-width":r,"stroke-opacity":"0"});var a={"fill-opacity":"0"},o=Math.max(r/2,e);return i.append("circle").attr({"data-line-point":"start-point",cx:z?J(n.xanchor)+n.x0:J(n.x0,Y),cy:j?Q(n.yanchor)-n.y0:Q(n.y0,K),r:o}).style(a).classed("cursor-grab",!0),i.append("circle").attr({"data-line-point":"end-point",cx:z?J(n.xanchor)+n.x1:J(n.x1,X),cy:j?Q(n.yanchor)-n.y1:Q(n.y1,Z),r:o}).style(a).classed("cursor-grab",!0),i}function oe(n){if(x(e))P=null;else if(B)P="path"===n.target.tagName?"move":"start-point"===n.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var r=re.element.getBoundingClientRect(),i=r.right-r.left,a=r.bottom-r.top,o=n.clientX-r.left,s=n.clientY-r.top,l=!U&&i>I&&a>F&&!n.shiftKey?p.getCursor(o/i,1-s/a):"move";m(t,l),P=l.split("-")[0]}}function se(r){x(e)||(z&&(w=J(n.xanchor)),j&&(E=Q(n.yanchor)),"path"===n.type?D=n.path:(f=z?n.x0:J(n.x0),h=j?n.y0:Q(n.y0),b=z?n.x1:J(n.x1),_=j?n.y1:Q(n.y1)),f<b?(S=f,N="x0",C=b,L="x1"):(S=b,N="x1",C=f,L="x0"),!j&&h<_||j&&h>_?(T=h,O="y0",M=_,R="y1"):(T=_,O="y1",M=h,R="y0"),oe(r),de(l,n),pe(t,n,e),re.moveFn="move"===P?ue:fe,re.altKey=r.altKey)}function le(){x(e)||(m(t),he(l),A(t,e,n),i.call("_guiRelayout",e,u.getUpdateObj()))}function ce(){x(e)||he(l)}function ue(r,i){if("path"===n.type){var a=function(e){return e},o=a,u=a;z?$("xanchor",n.xanchor=ee(w+r)):(o=function(e){return ee(J(e)+r)},H&&"date"===H.type&&(o=v.encodeDate(o))),j?$("yanchor",n.yanchor=te(E+i)):(u=function(e){return te(Q(e)+i)},W&&"date"===W.type&&(u=v.encodeDate(u))),$("path",n.path=k(D,o,u))}else z?$("xanchor",n.xanchor=ee(w+r)):($("x0",n.x0=ee(f+r)),$("x1",n.x1=ee(b+r))),j?$("yanchor",n.yanchor=te(E+i)):($("y0",n.y0=te(h+i)),$("y1",n.y1=te(_+i)));t.attr("d",y(e,n)),de(l,n),c(e,s,n,q)}function fe(r,i){if(U){var a=function(e){return e},o=a,u=a;z?$("xanchor",n.xanchor=ee(w+r)):(o=function(e){return ee(J(e)+r)},H&&"date"===H.type&&(o=v.encodeDate(o))),j?$("yanchor",n.yanchor=te(E+i)):(u=function(e){return te(Q(e)+i)},W&&"date"===W.type&&(u=v.encodeDate(u))),$("path",n.path=k(D,o,u))}else if(B){if("resize-over-start-point"===P){var d=f+r,p=j?h-i:h+i;$("x0",n.x0=z?d:ee(d)),$("y0",n.y0=j?p:te(p))}else if("resize-over-end-point"===P){var m=b+r,g=j?_-i:_+i;$("x1",n.x1=z?m:ee(m)),$("y1",n.y1=j?g:te(g))}}else{var x=function(e){return-1!==P.indexOf(e)},A=x("n"),V=x("s"),G=x("w"),Y=x("e"),X=A?T+i:T,K=V?M+i:M,Z=G?S+r:S,ne=Y?C+r:C;j&&(A&&(X=T-i),V&&(K=M-i)),(!j&&K-X>F||j&&X-K>F)&&($(O,n[O]=j?X:te(X)),$(R,n[R]=j?K:te(K))),ne-Z>I&&($(N,n[N]=z?Z:ee(Z)),$(L,n[L]=z?ne:ee(ne)))}t.attr("d",y(e,n)),de(l,n),c(e,s,n,q)}function de(e,t){function n(){var n="path"!==t.type,r=e.selectAll(".visual-cue").data([0]),i=1;r.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":i}).classed("visual-cue",!0);var o=J(z?t.xanchor:a.midRange(n?[t.x0,t.x1]:v.extractPathCoords(t.path,g.paramIsX))),s=Q(j?t.yanchor:a.midRange(n?[t.y0,t.y1]:v.extractPathCoords(t.path,g.paramIsY)));if(o=v.roundPositionForSharpStrokeRendering(o,i),s=v.roundPositionForSharpStrokeRendering(s,i),z&&j){var l="M"+(o-1-i)+","+(s-1-i)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";r.attr("d",l)}else if(z){var c="M"+(o-1-i)+","+(s-9-i)+"v18 h2 v-18 Z";r.attr("d",c)}else{var u="M"+(o-9-i)+","+(s-1-i)+"h18 v2 h-18 Z";r.attr("d",u)}}(z||j)&&n()}function he(e){e.selectAll(".visual-cue").remove()}function pe(e,t,n){var r=t.xref,i=t.yref,a=o.getFromId(n,r),s=o.getFromId(n,i),l="";"paper"===r||a.autorange||(l+=r),"paper"===i||s.autorange||(l+=i),d.setClipUrl(e,l?"clip"+n._fullLayout._uid+l:null,n)}p.init(re),ne.node().onmousemove=oe}(e,F,u,t,n,P):!0===u.editable&&F.style("pointer-events",L||f.opacity(C)*S<=.5?"stroke":"all");F.node().addEventListener("click",(function(){return function(e,t){if(!_(e))return;var n=t.node(),r=+n.getAttribute("data-index");if(r>=0){if(r===e._fullLayout._activeShapeIndex)return void E(e);e._fullLayout._activeShapeIndex=r,e._fullLayout._deactivateShape=E,b(e)}}(e,F)}))}}function A(e,t,n){var r=(n.xref+n.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");d.setClipUrl(e,r?"clip"+t._fullLayout._uid+r:null,t)}function k(e,t,n){return e.replace(g.segmentRE,(function(e){var r=0,i=e.charAt(0),a=g.paramIsX[i],o=g.paramIsY[i],s=g.numParams[i];return i+e.substr(1).replace(g.paramRE,(function(e){return r>=s||(a[r]?e=t(e):o[r]&&(e=n(e)),r++),e}))}))}function E(e){_(e)&&(e._fullLayout._activeShapeIndex>=0&&(u(e),delete e._fullLayout._activeShapeIndex,b(e)))}e.exports={draw:b,drawOne:w,eraseActiveShape:function(e){if(!_(e))return;u(e);var t=e._fullLayout._activeShapeIndex,n=(e.layout||{}).shapes||[];if(t<n.length){for(var r=[],a=0;a<n.length;a++)a!==t&&r.push(n[a]);return delete e._fullLayout._activeShapeIndex,i.call("_guiRelayout",e,{shapes:r})}},drawLabel:c}},3603:(e,t,n)=>{"use strict";var r=n(88500).overrideAll,i=n(85507),a=n(95323),o=n(9488).T,s=n(86395).extendFlat,l=n(77014).LF,c=n(60633);e.exports=r({newshape:{visible:s({},i.visible,{description:["Determines whether or not new shape is visible.","If *legendonly*, the shape is not drawn,","but can appear as a legend item","(provided that the legend itself is visible)."].join(" ")}),showlegend:{valType:"boolean",dflt:!1,description:["Determines whether or not new","shape is shown in the legend."].join(" ")},legend:s({},i.legend,{description:["Sets the reference to a legend to show new shape in.","References to these legends are *legend*, *legend2*, *legend3*, etc.","Settings for these legends are set in the layout, under","`layout.legend`, `layout.legend2`, etc."].join(" ")}),legendgroup:s({},i.legendgroup,{description:["Sets the legend group for new shape.","Traces and shapes part of the same legend group hide/show at the same time","when toggling legend items."].join(" ")}),legendgrouptitle:{text:s({},i.legendgrouptitle.text,{}),font:a({description:["Sets this legend group's title font."].join(" ")})},legendrank:s({},i.legendrank,{description:["Sets the legend rank for new shape.","Items and groups with smaller ranks are presented on top/left side while","with *reversed* `legend.traceorder` they are on bottom/right side.","The default legendrank is 1000,","so that you can use ranks less than 1000 to place certain items before all unranked items,","and ranks greater than 1000 to go after all unranked items."].join(" ")}),legendwidth:s({},i.legendwidth,{description:"Sets the width (in px or fraction) of the legend for new shape."}),line:{color:{valType:"color",description:["Sets the line color.","By default uses either dark grey or white","to increase contrast with background color."].join(" ")},width:{valType:"number",min:0,dflt:4,description:"Sets the line width (in px)."},dash:s({},o,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",description:["Sets the color filling new shapes' interior.","Please note that if using a fillcolor with alpha greater than half,","drag inside the active shape starts moving the shape underneath,","otherwise a new shape could be started over."].join(" ")},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",description:["Determines the path's interior.","For more info please visit https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/fill-rule"].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,description:"Sets the opacity of new shapes."},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",description:["Specifies whether new shapes are drawn below gridlines (*below*),","between gridlines and traces (*between*) or above traces (*above*)."].join(" ")},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",description:["When `dragmode` is set to *drawrect*, *drawline* or *drawcircle*","this limits the drag to be horizontal, vertical or diagonal.","Using *diagonal* there is no limit e.g. in drawing lines in any direction.","*ortho* limits the draw to be either horizontal or vertical.","*horizontal* allows horizontal extend.","*vertical* allows vertical extend."].join(" ")},name:s({},i.name,{description:["Sets new shape name.","The name appears as the legend item."].join(" ")}),label:{text:{valType:"string",dflt:"",description:["Sets the text to display with the new shape.","It is also used for legend item if `name` is not provided."].join(" ")},texttemplate:l({newshape:!0},{keys:Object.keys(c)}),font:a({description:"Sets the new shape label text font."}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],description:["Sets the position of the label text relative to the new shape.","Supported values for rectangles, circles and paths are","*top left*, *top center*, *top right*, *middle left*,","*middle center*, *middle right*, *bottom left*, *bottom center*,","and *bottom right*.","Supported values for lines are *start*, *middle*, and *end*.","Default: *middle center* for rectangles, circles, and paths; *middle* for lines."].join(" ")},textangle:{valType:"angle",dflt:"auto",description:["Sets the angle at which the label text is drawn","with respect to the horizontal. For lines, angle *auto*","is the same angle as the line. For all other shapes,","angle *auto* is horizontal."].join(" ")},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",description:["Sets the label's horizontal position anchor","This anchor binds the specified `textposition` to the *left*, *center*","or *right* of the label text.","For example, if `textposition` is set to *top right* and","`xanchor` to *right* then the right-most portion of the","label text lines up with the right-most edge of the","new shape."].join(" ")},yanchor:{valType:"enumerated",values:["top","middle","bottom"],description:["Sets the label's vertical position anchor","This anchor binds the specified `textposition` to the *top*, *middle*","or *bottom* of the label text.","For example, if `textposition` is set to *top right* and","`yanchor` to *top* then the top-most portion of the","label text lines up with the top-most edge of the","new shape."].join(" ")},padding:{valType:"number",dflt:3,min:0,description:"Sets padding (in px) between edge of label and edge of new shape."}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",description:"Sets the color filling the active shape' interior."},opacity:{valType:"number",min:0,max:1,dflt:.5,description:"Sets the opacity of the active shape."}}},"none","from-root")},21941:e=>{"use strict";e.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},25748:(e,t,n)=>{"use strict";var r=n(53408),i=n(56319);e.exports=function(e,t,n){if(n("newshape.visible"),n("newshape.name"),n("newshape.showlegend"),n("newshape.legend"),n("newshape.legendwidth"),n("newshape.legendgroup"),n("newshape.legendgrouptitle.text"),i.coerceFont(n,"newshape.legendgrouptitle.font"),n("newshape.legendrank"),n("newshape.drawdirection"),n("newshape.layer"),n("newshape.fillcolor"),n("newshape.fillrule"),n("newshape.opacity"),n("newshape.line.width")){var a=(e||{}).plot_bgcolor||"#FFF";n("newshape.line.color",r.contrast(a)),n("newshape.line.dash")}var o="drawline"===e.dragmode,s=n("newshape.label.text"),l=n("newshape.label.texttemplate");if(s||l){n("newshape.label.textangle");var c=n("newshape.label.textposition",o?"middle":"middle center");n("newshape.label.xanchor"),n("newshape.label.yanchor",function(e,t){return e?"bottom":-1!==t.indexOf("top")?"top":-1!==t.indexOf("bottom")?"bottom":"middle"}(o,c)),n("newshape.label.padding"),i.coerceFont(n,"newshape.label.font",t.font)}n("activeshape.fillcolor"),n("activeshape.opacity")}},69981:(e,t,n)=>{"use strict";var r=n(99061),i=n(21941),a=i.CIRCLE_SIDES,o=i.SQRT2,s=n(39151),l=s.p2r,c=s.r2p,u=[0,3,4,5,6,1,2],f=[0,3,4,1,2];function d(e,t){return Math.abs(e-t)<=1e-6}function h(e,t){var n=t[1]-e[1],r=t[2]-e[2];return Math.sqrt(n*n+r*r)}t.writePaths=function(e){var t=e.length;if(!t)return"M0,0Z";for(var n="",r=0;r<t;r++)for(var i=e[r].length,a=0;a<i;a++){var o=e[r][a][0];if("Z"===o)n+="Z";else for(var s=e[r][a].length,l=0;l<s;l++){var c=l;"Q"===o||"S"===o?c=f[l]:"C"===o&&(c=u[l]),n+=e[r][a][c],l>0&&l<s-1&&(n+=",")}}return n},t.readPaths=function(e,t,n,i){var o,s,u,f=r(e),d=[],h=-1,p=0,m=0,g=function(){s=p,u=m};g();for(var v=0;v<f.length;v++){var y,b,x,_,w=[],A=f[v][0],k=A;switch(A){case"M":h++,d[h]=[],p=+f[v][1],m=+f[v][2],w.push([k,p,m]),g();break;case"Q":case"S":y=+f[v][1],x=+f[v][2],p=+f[v][3],m=+f[v][4],w.push([k,p,m,y,x]);break;case"C":y=+f[v][1],x=+f[v][2],b=+f[v][3],_=+f[v][4],p=+f[v][5],m=+f[v][6],w.push([k,p,m,y,x,b,_]);break;case"T":case"L":p=+f[v][1],m=+f[v][2],w.push([k,p,m]);break;case"H":k="L",p=+f[v][1],w.push([k,p,m]);break;case"V":k="L",m=+f[v][1],w.push([k,p,m]);break;case"A":k="L";var E=+f[v][1],T=+f[v][2];+f[v][4]||(E=-E,T=-T);var M=p-E,S=m;for(o=1;o<=a/2;o++){var C=2*Math.PI*o/a;w.push([k,M+E*Math.cos(C),S+T*Math.sin(C)])}break;case"Z":p===s&&m===u||(p=s,m=u,w.push([k,p,m]))}for(var O=(n||{}).domain,R=t._fullLayout._size,N=n&&"pixel"===n.xsizemode,L=n&&"pixel"===n.ysizemode,D=!1===i,P=0;P<w.length;P++){for(o=0;o+2<7;o+=2){var I=w[P][o+1],F=w[P][o+2];void 0!==I&&void 0!==F&&(p=I,m=F,n&&(n.xaxis&&n.xaxis.p2r?(D&&(I-=n.xaxis._offset),I=N?c(n.xaxis,n.xanchor)+I:l(n.xaxis,I)):(D&&(I-=R.l),O?I=O.x[0]+I/R.w:I/=R.w),n.yaxis&&n.yaxis.p2r?(D&&(F-=n.yaxis._offset),F=L?c(n.yaxis,n.yanchor)-F:l(n.yaxis,F)):(D&&(F-=R.t),F=O?O.y[1]-F/R.h:1-F/R.h)),w[P][o+1]=I,w[P][o+2]=F)}d[h].push(w[P].slice())}}return d},t.pointsOnRectangle=function(e){if(5!==e.length)return!1;for(var t=1;t<3;t++){if(!d(e[0][t]-e[1][t],e[3][t]-e[2][t]))return!1;if(!d(e[0][t]-e[3][t],e[1][t]-e[2][t]))return!1}return!(!d(e[0][1],e[1][1])&&!d(e[0][1],e[3][1]))&&!!(h(e[0],e[1])*h(e[0],e[3]))},t.pointsOnEllipse=function(e){var t=e.length;if(t!==a+1)return!1;t=a;for(var n=0;n<t;n++){var r=(2*t-n)%t,i=(t/2+r)%t,o=(t/2+n)%t;if(!d(h(e[n],e[o]),h(e[r],e[i])))return!1}return!0},t.handleEllipse=function(e,n,r){if(!e)return[n,r];var i=t.ellipseOver({x0:n[0],y0:n[1],x1:r[0],y1:r[1]}),s=(i.x1+i.x0)/2,l=(i.y1+i.y0)/2,c=(i.x1-i.x0)/2,u=(i.y1-i.y0)/2;c||(c=u/=o),u||(u=c/=o);for(var f=[],d=0;d<a;d++){var h=2*d*Math.PI/a;f.push([s+c*Math.cos(h),l+u*Math.sin(h)])}return f},t.ellipseOver=function(e){var t=e.x0,n=e.y0,r=e.x1,i=e.y1,a=r-t,s=i-n,l=((t-=a)+r)/2,c=((n-=s)+i)/2;return{x0:l-(a*=o),y0:c-(s*=o),x1:l+a,y1:c+s}},t.fixDatesForPaths=function(e,t,n){var r="date"===t.type,i="date"===n.type;if(!r&&!i)return e;for(var a=0;a<e.length;a++)for(var o=0;o<e[a].length;o++)for(var s=0;s+2<e[a][o].length;s+=2)r&&(e[a][o][s+1]=e[a][o][s+1].replace(" ","_")),i&&(e[a][o][s+2]=e[a][o][s+2].replace(" ","_"));return e}},18864:(e,t,n)=>{"use strict";var r=n(89232),i=r.drawMode,a=r.openMode,o=n(21941),s=o.i000,l=o.i090,c=o.i180,u=o.i270,f=o.cos45,d=o.sin45,h=n(39151),p=h.p2r,m=h.r2p,g=n(10556).clearOutline,v=n(69981),y=v.readPaths,b=v.writePaths,x=v.ellipseOver,_=v.fixDatesForPaths;function w(e,t,n){var r,i=e[0][0],o=t.gd,h=i.getAttribute("d"),g=o._fullLayout.newshape,v=t.plotinfo,w=t.isActiveShape,A=v.xaxis,k=v.yaxis,E=!!v.domain||!v.xaxis,T=!!v.domain||!v.yaxis,M=a(n),S=y(h,o,v,w),C={editable:!0,visible:g.visible,name:g.name,showlegend:g.showlegend,legend:g.legend,legendwidth:g.legendwidth,legendgroup:g.legendgroup,legendgrouptitle:{text:g.legendgrouptitle.text,font:g.legendgrouptitle.font},legendrank:g.legendrank,label:g.label,xref:E?"paper":A._id,yref:T?"paper":k._id,layer:g.layer,opacity:g.opacity,line:{color:g.line.color,width:g.line.width,dash:g.line.dash}};if(M||(C.fillcolor=g.fillcolor,C.fillrule=g.fillrule),1===S.length&&(r=S[0]),r&&5===r.length&&"drawrect"===n)C.type="rect",C.x0=r[0][1],C.y0=r[0][2],C.x1=r[2][1],C.y1=r[2][2];else if(r&&"drawline"===n)C.type="line",C.x0=r[0][1],C.y0=r[0][2],C.x1=r[1][1],C.y1=r[1][2];else if(r&&"drawcircle"===n){C.type="circle";var O=r[s][1],R=r[l][1],N=r[c][1],L=r[u][1],D=r[s][2],P=r[l][2],I=r[c][2],F=r[u][2],z=v.xaxis&&("date"===v.xaxis.type||"log"===v.xaxis.type),j=v.yaxis&&("date"===v.yaxis.type||"log"===v.yaxis.type);z&&(O=m(v.xaxis,O),R=m(v.xaxis,R),N=m(v.xaxis,N),L=m(v.xaxis,L)),j&&(D=m(v.yaxis,D),P=m(v.yaxis,P),I=m(v.yaxis,I),F=m(v.yaxis,F));var B=(R+L)/2,U=(D+I)/2,$=x({x0:B,y0:U,x1:B+(L-R+N-O)/2*f,y1:U+(F-P+I-D)/2*d});z&&($.x0=p(v.xaxis,$.x0),$.x1=p(v.xaxis,$.x1)),j&&($.y0=p(v.yaxis,$.y0),$.y1=p(v.yaxis,$.y1)),C.x0=$.x0,C.y0=$.y0,C.x1=$.x1,C.y1=$.y1}else C.type="path",A&&k&&_(S,A,k),C.path=b(S),r=null;return C}e.exports={newShapes:function(e,t){if(e.length&&e[0][0]){var n=t.gd,r=t.isActiveShape,a=t.dragmode,o=(n.layout||{}).shapes||[];if(!i(a)&&void 0!==r){var s=n._fullLayout._activeShapeIndex;if(s<o.length)switch(n._fullLayout.shapes[s].type){case"rect":a="drawrect";break;case"circle":a="drawcircle";break;case"line":a="drawline";break;case"path":var l=o[s].path||"";a="Z"===l[l.length-1]?"drawclosedpath":"drawopenpath"}}var c=w(e,t,a);g(n);for(var u=t.editHelpers,f=(u||{}).modifyItem,d=[],h=0;h<o.length;h++){var p=n._fullLayout.shapes[h];if(d[h]=p._input,void 0!==r&&h===n._fullLayout._activeShapeIndex){var m=c;switch(p.type){case"line":case"rect":case"circle":f("x0",m.x0-(p.x0shift||0)),f("x1",m.x1-(p.x1shift||0)),f("y0",m.y0-(p.y0shift||0)),f("y1",m.y1-(p.y1shift||0));break;case"path":f("path",m.path)}}}return void 0===r?(d.push(c),d):u?u.getUpdateObj():{}}},createShapeObj:w}},10556:e=>{"use strict";e.exports={clearOutlineControllers:function(e){var t=e._fullLayout._zoomlayer;t&&t.selectAll(".outline-controllers").remove()},clearOutline:function(e){var t=e._fullLayout._zoomlayer;t&&t.selectAll(".select-outline").remove(),e._fullLayout._outlining=!1}}},82282:(e,t,n)=>{"use strict";var r=n(68670),i=n(56319),a=n(596);function o(e,t){var n=0;return(t=t||0)&&e&&("category"===e.type||"multicategory"===e.type)&&(n=(e.r2p(1)-e.r2p(0))*t),n}t.rangeToShapePosition=function(e){return"log"===e.type?e.r2d:function(e){return e}},t.shapePositionToRange=function(e){return"log"===e.type?e.d2r:function(e){return e}},t.decodeDate=function(e){return function(t){return t.replace&&(t=t.replace("_"," ")),e(t)}},t.encodeDate=function(e){return function(t){return e(t).replace(" ","_")}},t.extractPathCoords=function(e,t,n){var a=[];return e.match(r.segmentRE).forEach((function(e){var o=t[e.charAt(0)].drawn;if(void 0!==o){var s=e.substr(1).match(r.paramRE);if(s&&!(s.length<o)){var l=s[o],c=n?l:i.cleanNumber(l);a.push(c)}}})),a},t.getDataToPixel=function(e,n,r,i,a){var s,l=e._fullLayout._size;if(n)if("domain"===a)s=function(e){return n._length*(i?1-e:e)+n._offset};else{var c=t.shapePositionToRange(n);s=function(e){var t=o(n,r);return n._offset+n.r2p(c(e,!0))+t},"date"===n.type&&(s=t.decodeDate(s))}else s=i?function(e){return l.t+l.h*(1-e)}:function(e){return l.l+l.w*e};return s},t.getPixelToData=function(e,n,r,i){var a,o=e._fullLayout._size;if(n)if("domain"===i)a=function(e){var t=(e-n._offset)/n._length;return r?1-t:t};else{var s=t.rangeToShapePosition(n);a=function(e){return s(n.p2r(e-n._offset))}}else a=r?function(e){return 1-(e-o.t)/o.h}:function(e){return(e-o.l)/o.w};return a},t.roundPositionForSharpStrokeRendering=function(e,t){var n=1===Math.round(t%2),r=Math.round(e);return n?r+.5:r},t.makeShapesOptionsAndPlotinfo=function(e,t){var n=e._fullLayout.shapes[t]||{},r=e._fullLayout._plots[n.xref+n.yref];return!!r?r._hadPlotinfo=!0:(r={},n.xref&&"paper"!==n.xref&&(r.xaxis=e._fullLayout[n.xref+"axis"]),n.yref&&"paper"!==n.yref&&(r.yaxis=e._fullLayout[n.yref+"axis"])),r.xsizemode=n.xsizemode,r.ysizemode=n.ysizemode,r.xanchor=n.xanchor,r.yanchor=n.yanchor,{options:n,plotinfo:r}},t.makeSelectionsOptionsAndPlotinfo=function(e,t){var n=e._fullLayout.selections[t]||{},r=e._fullLayout._plots[n.xref+n.yref];return!!r?r._hadPlotinfo=!0:(r={},n.xref&&(r.xaxis=e._fullLayout[n.xref+"axis"]),n.yref&&(r.yaxis=e._fullLayout[n.yref+"axis"])),{options:n,plotinfo:r}},t.getPathString=function(e,n){var s,l,c,u,f,d,h,p,m=n.type,g=a.getRefType(n.xref),v=a.getRefType(n.yref),y=a.getFromId(e,n.xref),b=a.getFromId(e,n.yref),x=e._fullLayout._size,_=o(y,n.x0shift),w=o(y,n.x1shift),A=o(b,n.y0shift),k=o(b,n.y1shift);if(y?"domain"===g?l=function(e){return y._offset+y._length*e}:(s=t.shapePositionToRange(y),l=function(e){return y._offset+y.r2p(s(e,!0))}):l=function(e){return x.l+x.w*e},b?"domain"===v?u=function(e){return b._offset+b._length*(1-e)}:(c=t.shapePositionToRange(b),u=function(e){return b._offset+b.r2p(c(e,!0))}):u=function(e){return x.t+x.h*(1-e)},"path"===m)return y&&"date"===y.type&&(l=t.decodeDate(l)),b&&"date"===b.type&&(u=t.decodeDate(u)),function(e,t,n){var a=e.path,o=e.xsizemode,s=e.ysizemode,l=e.xanchor,c=e.yanchor;return a.replace(r.segmentRE,(function(e){var a=0,u=e.charAt(0),f=r.paramIsX[u],d=r.paramIsY[u],h=r.numParams[u],p=e.substr(1).replace(r.paramRE,(function(e){return f[a]?e="pixel"===o?t(l)+Number(e):t(e):d[a]&&(e="pixel"===s?n(c)-Number(e):n(e)),++a>h&&(e="X"),e}));return a>h&&(p=p.replace(/[\s,]*X.*/,""),i.log("Ignoring extra params in segment "+e)),u+p}))}(n,l,u);if("pixel"===n.xsizemode){var E=l(n.xanchor);f=E+n.x0+_,d=E+n.x1+w}else f=l(n.x0)+_,d=l(n.x1)+w;if("pixel"===n.ysizemode){var T=u(n.yanchor);h=T-n.y0+A,p=T-n.y1+k}else h=u(n.y0)+A,p=u(n.y1)+k;if("line"===m)return"M"+f+","+h+"L"+d+","+p;if("rect"===m)return"M"+f+","+h+"H"+d+"V"+p+"H"+f+"Z";var M=(f+d)/2,S=(h+p)/2,C=Math.abs(M-f),O=Math.abs(S-h),R="A"+C+","+O,N=M+C+","+S;return"M"+N+R+" 0 1,1 "+(M+","+(S-O))+R+" 0 0,1 "+N+"Z"}},25512:(e,t,n)=>{"use strict";var r=n(44093);e.exports={moduleType:"component",name:"shapes",layoutAttributes:n(12354),supplyLayoutDefaults:n(23509),supplyDrawNewShapeDefaults:n(25748),includeBasePlot:n(62740)("shapes"),calcAutorange:n(48633),draw:r.draw,drawOne:r.drawOne}},60633:e=>{"use strict";function t(e,t){return t?t.d2l(e):e}function n(e,t){return t?t.l2d(e):e}function r(e){return e.x0shift||0}function i(e){return e.x1shift||0}function a(e){return e.y0shift||0}function o(e){return e.y1shift||0}function s(e,n){return t(e.x1,n)+i(e)-t(e.x0,n)-r(e)}function l(e,n,r){return t(e.y1,r)+o(e)-t(e.y0,r)-a(e)}e.exports={x0:function(e){return e.x0},x1:function(e){return e.x1},y0:function(e){return e.y0},y1:function(e){return e.y1},slope:function(e,t,n){return"line"!==e.type?void 0:l(e,0,n)/s(e,t)},dx:s,dy:l,width:function(e,t){return Math.abs(s(e,t))},height:function(e,t,n){return Math.abs(l(e,0,n))},length:function(e,t,n){return"line"!==e.type?void 0:Math.sqrt(Math.pow(s(e,t),2)+Math.pow(l(e,0,n),2))},xcenter:function(e,a){return n((t(e.x1,a)+i(e)+t(e.x0,a)+r(e))/2,a)},ycenter:function(e,r,i){return n((t(e.y1,i)+o(e)+t(e.y0,i)+a(e))/2,i)}}},9280:(e,t,n)=>{"use strict";var r=n(95323),i=n(26909),a=n(86395).extendDeepAll,o=n(88500).overrideAll,s=n(19680),l=n(65210).templatedArray,c=n(83060),u=l("step",{visible:{valType:"boolean",dflt:!0,description:["Determines whether or not this step is included in the slider."].join(" ")},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle",description:["Sets the Plotly method to be called when the slider value is changed.","If the `skip` method is used, the API slider will function as normal","but will perform no API calls and will not bind automatically to state","updates. This may be used to create a component interface and attach to","slider events manually via JavaScript."].join(" ")},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets the arguments values to be passed to the Plotly","method set in `method` on slide."].join(" ")},label:{valType:"string",description:"Sets the text label to appear on the slider"},value:{valType:"string",description:["Sets the value of the slider step, used to refer to the step programatically.","Defaults to the slider label if not provided."].join(" ")},execute:{valType:"boolean",dflt:!0,description:["When true, the API method is executed. When false, all other behaviors are the same","and command execution is skipped. This may be useful when hooking into, for example,","the `plotly_sliderchange` method and executing the API command manually without losing","the benefit of the slider automatically binding to the state of the plot through the","specification of `method` and `args`."].join(" ")}});e.exports=o(l("slider",{visible:{valType:"boolean",dflt:!0,description:["Determines whether or not the slider is visible."].join(" ")},active:{valType:"number",min:0,dflt:0,description:["Determines which button (by index starting from 0) is","considered active."].join(" ")},steps:u,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction",description:["Determines whether this slider length","is set in units of plot *fraction* or in *pixels.","Use `len` to set the value."].join(" ")},len:{valType:"number",min:0,dflt:1,description:["Sets the length of the slider","This measure excludes the padding of both ends.","That is, the slider's length is this length minus the","padding on both ends."].join(" ")},x:{valType:"number",min:-2,max:3,dflt:0,description:"Sets the x position (in normalized coordinates) of the slider."},pad:a(i({editType:"arraydraw"}),{description:"Set the padding of the slider component along each side."},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",description:["Sets the slider's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,dflt:0,description:"Sets the y position (in normalized coordinates) of the slider."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top",description:["Sets the slider's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},transition:{duration:{valType:"number",min:0,dflt:150,description:"Sets the duration of the slider transition"},easing:{valType:"enumerated",values:s.transition.easing.values,dflt:"cubic-in-out",description:"Sets the easing function of the slider transition"}},currentvalue:{visible:{valType:"boolean",dflt:!0,description:["Shows the currently-selected value above the slider."].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",description:["The alignment of the value readout relative to the length of the slider."].join(" ")},offset:{valType:"number",dflt:10,description:["The amount of space, in pixels, between the current value label","and the slider."].join(" ")},prefix:{valType:"string",description:"When currentvalue.visible is true, this sets the prefix of the label."},suffix:{valType:"string",description:"When currentvalue.visible is true, this sets the suffix of the label."},font:r({description:"Sets the font of the current value label text."})},font:r({description:"Sets the font of the slider step labels."}),activebgcolor:{valType:"color",dflt:c.gripBgActiveColor,description:["Sets the background color of the slider grip","while dragging."].join(" ")},bgcolor:{valType:"color",dflt:c.railBgColor,description:"Sets the background color of the slider."},bordercolor:{valType:"color",dflt:c.railBorderColor,description:"Sets the color of the border enclosing the slider."},borderwidth:{valType:"number",min:0,dflt:c.railBorderWidth,description:"Sets the width (in px) of the border enclosing the slider."},ticklen:{valType:"number",min:0,dflt:c.tickLength,description:"Sets the length in pixels of step tick marks"},tickcolor:{valType:"color",dflt:c.tickColor,description:"Sets the color of the border enclosing the slider."},tickwidth:{valType:"number",min:0,dflt:1,description:"Sets the tick width (in px)."},minorticklen:{valType:"number",min:0,dflt:c.minorTickLength,description:"Sets the length in pixels of minor step tick marks"}}),"arraydraw","from-root")},83060:e=>{"use strict";e.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},90135:(e,t,n)=>{"use strict";var r=n(56319),i=n(75078),a=n(9280),o=n(83060).name,s=a.steps;function l(e,t,n){function o(n,i){return r.coerce(e,t,a,n,i)}for(var s=i(e,t,{name:"steps",handleItemDefaults:c}),l=0,u=0;u<s.length;u++)s[u].visible&&l++;if(l<2?t.visible=!1:o("visible")){t._stepCount=l;var f=t._visibleSteps=r.filterVisible(s);(s[o("active")]||{}).visible||(t.active=f[0]._index),o("x"),o("y"),r.noneOrAll(e,t,["x","y"]),o("xanchor"),o("yanchor"),o("len"),o("lenmode"),o("pad.t"),o("pad.r"),o("pad.b"),o("pad.l"),r.coerceFont(o,"font",n.font),o("currentvalue.visible")&&(o("currentvalue.xanchor"),o("currentvalue.prefix"),o("currentvalue.suffix"),o("currentvalue.offset"),r.coerceFont(o,"currentvalue.font",t.font)),o("transition.duration"),o("transition.easing"),o("bgcolor"),o("activebgcolor"),o("bordercolor"),o("borderwidth"),o("ticklen"),o("tickwidth"),o("tickcolor"),o("minorticklen")}}function c(e,t){function n(n,i){return r.coerce(e,t,s,n,i)}if("skip"===e.method||Array.isArray(e.args)?n("visible"):t.visible=!1){n("method"),n("args");var i=n("label","step-"+t._index);n("value",i),n("execute")}}e.exports=function(e,t){i(e,t,{name:o,handleItemDefaults:l})}},847:(e,t,n)=>{"use strict";var r=n(93268),i=n(31496),a=n(53408),o=n(14797),s=n(56319),l=s.strTranslate,c=n(56953),u=n(65210).arrayEditor,f=n(83060),d=n(12564),h=d.LINE_SPACING,p=d.FROM_TL,m=d.FROM_BR;function g(e){return f.autoMarginIdRoot+e._index}function v(e){return e._index}function y(e,t){var n=o.tester.selectAll("g."+f.labelGroupClass).data(t._visibleSteps);n.enter().append("g").classed(f.labelGroupClass,!0);var a=0,l=0;n.each((function(e){var n=_(r.select(this),{step:e},t).node();if(n){var i=o.bBox(n);l=Math.max(l,i.height),a=Math.max(a,i.width)}})),n.remove();var u=t._dims={};u.inputAreaWidth=Math.max(f.railWidth,f.gripHeight);var d=e._fullLayout._size;u.lx=d.l+d.w*t.x,u.ly=d.t+d.h*(1-t.y),"fraction"===t.lenmode?u.outerLength=Math.round(d.w*t.len):u.outerLength=t.len,u.inputAreaStart=0,u.inputAreaLength=Math.round(u.outerLength-t.pad.l-t.pad.r);var h=(u.inputAreaLength-2*f.stepInset)/(t._stepCount-1),v=a+f.labelPadding;if(u.labelStride=Math.max(1,Math.ceil(v/h)),u.labelHeight=l,u.currentValueMaxWidth=0,u.currentValueHeight=0,u.currentValueTotalHeight=0,u.currentValueMaxLines=1,t.currentvalue.visible){var y=o.tester.append("g");n.each((function(e){var n=b(y,t,e.label),r=n.node()&&o.bBox(n.node())||{width:0,height:0},i=c.lineCount(n);u.currentValueMaxWidth=Math.max(u.currentValueMaxWidth,Math.ceil(r.width)),u.currentValueHeight=Math.max(u.currentValueHeight,Math.ceil(r.height)),u.currentValueMaxLines=Math.max(u.currentValueMaxLines,i)})),u.currentValueTotalHeight=u.currentValueHeight+t.currentvalue.offset,y.remove()}u.height=u.currentValueTotalHeight+f.tickOffset+t.ticklen+f.labelOffset+u.labelHeight+t.pad.t+t.pad.b;var x="left";s.isRightAnchor(t)&&(u.lx-=u.outerLength,x="right"),s.isCenterAnchor(t)&&(u.lx-=u.outerLength/2,x="center");var w="top";s.isBottomAnchor(t)&&(u.ly-=u.height,w="bottom"),s.isMiddleAnchor(t)&&(u.ly-=u.height/2,w="middle"),u.outerLength=Math.ceil(u.outerLength),u.height=Math.ceil(u.height),u.lx=Math.round(u.lx),u.ly=Math.round(u.ly);var A={y:t.y,b:u.height*m[w],t:u.height*p[w]};"fraction"===t.lenmode?(A.l=0,A.xl=t.x-t.len*p[x],A.r=0,A.xr=t.x+t.len*m[x]):(A.x=t.x,A.l=u.outerLength*p[x],A.r=u.outerLength*m[x]),i.autoMargin(e,g(t),A)}function b(e,t,n){if(t.currentvalue.visible){var r,i,a=t._dims;switch(t.currentvalue.xanchor){case"right":r=a.inputAreaLength-f.currentValueInset-a.currentValueMaxWidth,i="left";break;case"center":r=.5*a.inputAreaLength,i="middle";break;default:r=f.currentValueInset,i="left"}var l=s.ensureSingle(e,"text",f.labelClass,(function(e){e.attr({"text-anchor":i,"data-notex":1})})),u=t.currentvalue.prefix?t.currentvalue.prefix:"";if("string"==typeof n)u+=n;else{var d=t.steps[t.active].label,p=t._gd._fullLayout._meta;p&&(d=s.templateString(d,p)),u+=d}t.currentvalue.suffix&&(u+=t.currentvalue.suffix),l.call(o.font,t.currentvalue.font).text(u).call(c.convertToTspans,t._gd);var m=c.lineCount(l),g=(a.currentValueMaxLines+1-m)*t.currentvalue.font.size*h;return c.positionText(l,r,g),l}}function x(e,t,n){s.ensureSingle(e,"rect",f.gripRectClass,(function(r){r.call(E,t,e,n).style("pointer-events","all")})).attr({width:f.gripWidth,height:f.gripHeight,rx:f.gripRadius,ry:f.gripRadius}).call(a.stroke,n.bordercolor).call(a.fill,n.bgcolor).style("stroke-width",n.borderwidth+"px")}function _(e,t,n){var r=s.ensureSingle(e,"text",f.labelClass,(function(e){e.attr({"text-anchor":"middle","data-notex":1})})),i=t.step.label,a=n._gd._fullLayout._meta;return a&&(i=s.templateString(i,a)),r.call(o.font,n.font).text(i).call(c.convertToTspans,n._gd),r}function w(e,t){var n=s.ensureSingle(e,"g",f.labelsClass),i=t._dims,a=n.selectAll("g."+f.labelGroupClass).data(i.labelSteps);a.enter().append("g").classed(f.labelGroupClass,!0),a.exit().remove(),a.each((function(e){var n=r.select(this);n.call(_,e,t),o.setTranslate(n,S(t,e.fraction),f.tickOffset+t.ticklen+t.font.size*h+f.labelOffset+i.currentValueTotalHeight)}))}function A(e,t,n,r,i){var a=Math.round(r*(n._stepCount-1)),o=n._visibleSteps[a]._index;o!==n.active&&k(e,t,n,o,!0,i)}function k(e,t,n,r,a,o){var s=n.active;n.active=r,u(e.layout,f.name,n).applyUpdate("active",r);var l=n.steps[n.active];t.call(M,n,o),t.call(b,n),e.emit("plotly_sliderchange",{slider:n,step:n.steps[n.active],interaction:a,previousActive:s}),l&&l.method&&a&&(t._nextMethod?(t._nextMethod.step=l,t._nextMethod.doCallback=a,t._nextMethod.doTransition=o):(t._nextMethod={step:l,doCallback:a,doTransition:o},t._nextMethodRaf=window.requestAnimationFrame((function(){var n=t._nextMethod.step;n.method&&(n.execute&&i.executeAPICommand(e,n.method,n.args),t._nextMethod=null,t._nextMethodRaf=null)}))))}function E(e,t,n){if(!t._context.staticPlot){var i=n.node(),o=r.select(t);e.on("mousedown",l),e.on("touchstart",l)}function s(){return n.data()[0]}function l(){var e=s();t.emit("plotly_sliderstart",{slider:e});var l=n.select("."+f.gripRectClass);r.event.stopPropagation(),r.event.preventDefault(),l.call(a.fill,e.activebgcolor);var c=C(e,r.mouse(i)[0]);function u(){var e=s(),a=C(e,r.mouse(i)[0]);A(t,n,e,a,!1)}function d(){var e=s();e._dragging=!1,l.call(a.fill,e.bgcolor),o.on("mouseup",null),o.on("mousemove",null),o.on("touchend",null),o.on("touchmove",null),t.emit("plotly_sliderend",{slider:e,step:e.steps[e.active]})}A(t,n,e,c,!0),e._dragging=!0,o.on("mousemove",u),o.on("touchmove",u),o.on("mouseup",d),o.on("touchend",d)}}function T(e,t){var n=e.selectAll("rect."+f.tickRectClass).data(t._visibleSteps),i=t._dims;n.enter().append("rect").classed(f.tickRectClass,!0),n.exit().remove(),n.attr({width:t.tickwidth+"px","shape-rendering":"crispEdges"}),n.each((function(e,n){var s=n%i.labelStride==0,l=r.select(this);l.attr({height:s?t.ticklen:t.minorticklen}).call(a.fill,t.tickcolor),o.setTranslate(l,S(t,n/(t._stepCount-1))-.5*t.tickwidth,(s?f.tickOffset:f.minorTickOffset)+i.currentValueTotalHeight)}))}function M(e,t,n){for(var r=e.select("rect."+f.gripRectClass),i=0,a=0;a<t._stepCount;a++)if(t._visibleSteps[a]._index===t.active){i=a;break}var o=S(t,i/(t._stepCount-1));if(!t._invokingCommand){var s=r;n&&t.transition.duration>0&&(s=s.transition().duration(t.transition.duration).ease(t.transition.easing)),s.attr("transform",l(o-.5*f.gripWidth,t._dims.currentValueTotalHeight))}}function S(e,t){var n=e._dims;return n.inputAreaStart+f.stepInset+(n.inputAreaLength-2*f.stepInset)*Math.min(1,Math.max(0,t))}function C(e,t){var n=e._dims;return Math.min(1,Math.max(0,(t-f.stepInset-n.inputAreaStart)/(n.inputAreaLength-2*f.stepInset-2*n.inputAreaStart)))}function O(e,t,n){var r=n._dims,i=s.ensureSingle(e,"rect",f.railTouchRectClass,(function(r){r.call(E,t,e,n).style("pointer-events","all")}));i.attr({width:r.inputAreaLength,height:Math.max(r.inputAreaWidth,f.tickOffset+n.ticklen+r.labelHeight)}).call(a.fill,n.bgcolor).attr("opacity",0),o.setTranslate(i,0,r.currentValueTotalHeight)}function R(e,t){var n=t._dims,r=n.inputAreaLength-2*f.railInset,i=s.ensureSingle(e,"rect",f.railRectClass);i.attr({width:r,height:f.railWidth,rx:f.railRadius,ry:f.railRadius,"shape-rendering":"crispEdges"}).call(a.stroke,t.bordercolor).call(a.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px"),o.setTranslate(i,f.railInset,.5*(n.inputAreaWidth-f.railWidth)+n.currentValueTotalHeight)}e.exports=function(e){var t=e._context.staticPlot,n=e._fullLayout,a=function(e,t){for(var n=e[f.name],r=[],i=0;i<n.length;i++){var a=n[i];a.visible&&(a._gd=t,r.push(a))}return r}(n,e),s=n._infolayer.selectAll("g."+f.containerClassName).data(a.length>0?[0]:[]);function l(t){t._commandObserver&&(t._commandObserver.remove(),delete t._commandObserver),i.autoMargin(e,g(t))}if(s.enter().append("g").classed(f.containerClassName,!0).style("cursor",t?null:"ew-resize"),s.exit().each((function(){r.select(this).selectAll("g."+f.groupClassName).each(l)})).remove(),0!==a.length){var c=s.selectAll("g."+f.groupClassName).data(a,v);c.enter().append("g").classed(f.groupClassName,!0),c.exit().each(l).remove();for(var u=0;u<a.length;u++){var d=a[u];y(e,d)}c.each((function(t){var n=r.select(this);!function(e){var t=e._dims;t.labelSteps=[];for(var n=e._stepCount,r=0;r<n;r+=t.labelStride)t.labelSteps.push({fraction:r/(n-1),step:e._visibleSteps[r]})}(t),i.manageCommandObserver(e,t,t._visibleSteps,(function(t){var r=n.data()[0];r.active!==t.index&&(r._dragging||k(e,n,r,t.index,!1,!0))})),function(e,t,n){(n.steps[n.active]||{}).visible||(n.active=n._visibleSteps[0]._index);t.call(b,n).call(R,n).call(w,n).call(T,n).call(O,e,n).call(x,e,n);var r=n._dims;o.setTranslate(t,r.lx+n.pad.l,r.ly+n.pad.t),t.call(M,n,!1),t.call(b,n)}(e,r.select(this),t)}))}}},14781:(e,t,n)=>{"use strict";var r=n(83060);e.exports={moduleType:"component",name:r.name,layoutAttributes:n(9280),supplyLayoutDefaults:n(90135),draw:n(847)}},74770:(e,t,n)=>{"use strict";var r=n(93268),i=n(5605),a=n(31496),o=n(3360),s=n(56319),l=s.strTranslate,c=n(14797),u=n(53408),f=n(56953),d=n(93352),h=n(12564).OPPOSITE_SIDE,p=/ [XY][0-9]* /;e.exports={draw:function(e,t,n){var m,g=e._fullLayout,v=n.propContainer,y=n.propName,b=n.placeholder,x=n.traceIndex,_=n.avoid||{},w=n.attributes,A=n.transform,k=n.containerGroup,E=1,T=v.title,M=(T&&T.text?T.text:"").trim(),S=!1,C=T&&T.font?T.font:{},O=C.family,R=C.size,N=C.color,L=C.weight,D=C.style,P=C.variant,I=C.textcase,F=C.lineposition,z=C.shadow,j=!!n.subtitlePropName,B=n.subtitlePlaceholder,U=(v.title||{}).subtitle||{text:"",font:{}},$=U.text.trim(),q=!1,H=1,V=U.font,W=V.family,G=V.size,Y=V.color,X=V.weight,K=V.style,Z=V.variant,J=V.textcase,Q=V.lineposition,ee=V.shadow;"title.text"===y?m="titleText":-1!==y.indexOf("axis")?m="axisTitleText":y.indexOf(!0)&&(m="colorbarTitleText");var te=e._context.edits[m];function ne(e,t){return void 0!==e&&void 0!==t&&e.replace(p," % ")===t.replace(p," % ")}""===M?E=0:ne(M,b)&&(te||(M=""),E=.2,S=!0),j&&(""===$?H=0:ne($,B)&&(te||($=""),H=.2,q=!0)),n._meta?M=s.templateString(M,n._meta):g._meta&&(M=s.templateString(M,g._meta));var re,ie=M||$||te;k||(k=s.ensureSingle(g._infolayer,"g","g-"+t),re=g._hColorbarMoveTitle);var ae=k.selectAll("text."+t).data(ie?[0]:[]);ae.enter().append("text"),ae.text(M).attr("class",t),ae.exit().remove();var oe=null,se=t+"-subtitle",le=$||te;if(j&&le&&((oe=k.selectAll("text."+se).data(le?[0]:[])).enter().append("text"),oe.text($).attr("class",se),oe.exit().remove()),!ie)return k;function ce(e,t){s.syncOrAsync([ue,fe],{title:e,subtitle:t})}function ue(n){var i,o=n.title,d=n.subtitle;if(!A&&re&&(A={}),A?(i="",A.rotate&&(i+="rotate("+[A.rotate,w.x,w.y]+")"),(A.offset||re)&&(i+=l(0,(A.offset||0)-(re||0)))):i=null,o.attr("transform",i),o.style("opacity",E*u.opacity(N)).call(c.font,{color:u.rgb(N),size:r.round(R,2),family:O,weight:L,style:D,variant:P,textcase:I,shadow:z,lineposition:F}).attr(w).call(f.convertToTspans,e,(function(e){if(e){var t=r.select(e.node().parentNode).select("."+se);if(!t.empty()){var n=e.node().getBBox();if(n.height){var i=n.y+n.height+1.6*G;t.attr("y",i)}}}})),d){var h=k.select("."+t+"-math-group"),p=o.node().getBBox(),m=h.node()?h.node().getBBox():void 0,g=m?m.y+m.height+1.6*G:p.y+p.height+1.6*G,v=s.extendFlat({},w,{y:g});d.attr("transform",i),d.style("opacity",H*u.opacity(Y)).call(c.font,{color:u.rgb(Y),size:r.round(G,2),family:W,weight:X,style:K,variant:Z,textcase:J,shadow:ee,lineposition:Q}).attr(v).call(f.convertToTspans,e)}return a.previousPromises(e)}function fe(t){var n=t.title,a=r.select(n.node().parentNode);if(_&&_.selection&&_.side&&M){a.attr("transform",null);var o=h[_.side],u="left"===_.side||"top"===_.side?-1:1,f=i(_.pad)?_.pad:2,d=c.bBox(a.node()),p={t:0,b:0,l:0,r:0},m=e._fullLayout._reservedMargin;for(var y in m)for(var b in m[y]){var x=m[y][b];p[b]=Math.max(p[b],x)}var w={left:p.l,top:p.t,right:g.width-p.r,bottom:g.height-p.b},A=_.maxShift||u*(w[_.side]-d[_.side]),k=0;if(A<0)k=A;else{var E=_.offsetLeft||0,T=_.offsetTop||0;d.left-=E,d.right-=E,d.top-=T,d.bottom-=T,_.selection.each((function(){var e=c.bBox(this);s.bBoxIntersect(d,e,f)&&(k=Math.max(k,u*(e[_.side]-d[o])+f))})),k=Math.min(A,k),v._titleScoot=Math.abs(k)}if(k>0||A<0){var S={left:[-k,0],right:[k,0],top:[0,-k],bottom:[0,k]}[_.side];a.attr("transform",l(S[0],S[1]))}}}function de(e,t){e.text(t).on("mouseover.opacity",(function(){r.select(this).transition().duration(d.SHOW_PLACEHOLDER).style("opacity",1)})).on("mouseout.opacity",(function(){r.select(this).transition().duration(d.HIDE_PLACEHOLDER).style("opacity",0)}))}if(ae.call(ce,oe),te&&(M?ae.on(".opacity",null):(de(ae,b),S=!0),ae.call(f.makeEditable,{gd:e}).on("edit",(function(t){void 0!==x?o.call("_guiRestyle",e,y,t,x):o.call("_guiRelayout",e,y,t)})).on("cancel",(function(){this.text(this.attr("data-unformatted")).call(ce)})).on("input",(function(e){this.text(e||" ").call(f.positionText,w.x,w.y)})),j)){if(j&&!M){var he=ae.node().getBBox(),pe=he.y+he.height+1.6*G;oe.attr("y",pe)}$?oe.on(".opacity",null):(de(oe,B),q=!0),oe.call(f.makeEditable,{gd:e}).on("edit",(function(t){o.call("_guiRelayout",e,"title.subtitle.text",t)})).on("cancel",(function(){this.text(this.attr("data-unformatted")).call(ce)})).on("input",(function(e){this.text(e||" ").call(f.positionText,oe.attr("x"),oe.attr("y"))}))}return ae.classed("js-placeholder",S),oe&&oe.classed("js-placeholder",q),k},SUBTITLE_PADDING_EM:1.6,SUBTITLE_PADDING_MATHJAX_EM:1.6}},38267:(e,t,n)=>{"use strict";var r=n(95323),i=n(37811),a=n(86395).extendFlat,o=n(88500).overrideAll,s=n(26909),l=n(65210).templatedArray,c=l("button",{visible:{valType:"boolean",description:"Determines whether or not this button is visible."},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle",description:["Sets the Plotly method to be called on click.","If the `skip` method is used, the API updatemenu will function as normal","but will perform no API calls and will not bind automatically to state","updates. This may be used to create a component interface and attach to","updatemenu events manually via JavaScript."].join(" ")},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets the arguments values to be passed to the Plotly","method set in `method` on click."].join(" ")},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets a 2nd set of `args`,","these arguments values are passed to the Plotly","method set in `method` when clicking this button while in the active state.","Use this to create toggle buttons."].join(" ")},label:{valType:"string",dflt:"",description:"Sets the text label to appear on the button."},execute:{valType:"boolean",dflt:!0,description:["When true, the API method is executed. When false, all other behaviors are the same","and command execution is skipped. This may be useful when hooking into, for example,","the `plotly_buttonclicked` method and executing the API command manually without losing","the benefit of the updatemenu automatically binding to the state of the plot through the","specification of `method` and `args`."].join(" ")}});e.exports=o(l("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean",description:["Determines whether or not the update menu is visible."].join(" ")},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown",description:["Determines whether the buttons are accessible via a dropdown menu","or whether the buttons are stacked horizontally or vertically"].join(" ")},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down",description:["Determines the direction in which the buttons are laid out, whether","in a dropdown menu or a row/column of buttons. For `left` and `up`,","the buttons will still appear in left-to-right or top-to-bottom order","respectively."].join(" ")},active:{valType:"integer",min:-1,dflt:0,description:["Determines which button (by index starting from 0) is","considered active."].join(" ")},showactive:{valType:"boolean",dflt:!0,description:"Highlights active dropdown item or active button if true."},buttons:c,x:{valType:"number",min:-2,max:3,dflt:-.05,description:"Sets the x position (in normalized coordinates) of the update menu."},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right",description:["Sets the update menu's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,dflt:1,description:"Sets the y position (in normalized coordinates) of the update menu."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top",description:["Sets the update menu's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},pad:a(s({editType:"arraydraw"}),{description:"Sets the padding around the buttons or dropdown menu."}),font:r({description:"Sets the font of the update menu button text."}),bgcolor:{valType:"color",description:"Sets the background color of the update menu buttons."},bordercolor:{valType:"color",dflt:i.borderLine,description:"Sets the color of the border enclosing the update menu."},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw",description:"Sets the width (in px) of the border enclosing the update menu."}}),"arraydraw","from-root")},47629:e=>{"use strict";e.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}},13980:(e,t,n)=>{"use strict";var r=n(56319),i=n(75078),a=n(38267),o=n(47629).name,s=a.buttons;function l(e,t,n){function o(n,i){return r.coerce(e,t,a,n,i)}o("visible",i(e,t,{name:"buttons",handleItemDefaults:c}).length>0)&&(o("active"),o("direction"),o("type"),o("showactive"),o("x"),o("y"),r.noneOrAll(e,t,["x","y"]),o("xanchor"),o("yanchor"),o("pad.t"),o("pad.r"),o("pad.b"),o("pad.l"),r.coerceFont(o,"font",n.font),o("bgcolor",n.paper_bgcolor),o("bordercolor"),o("borderwidth"))}function c(e,t){function n(n,i){return r.coerce(e,t,s,n,i)}n("visible","skip"===e.method||Array.isArray(e.args))&&(n("method"),n("args"),n("args2"),n("label"),n("execute"))}e.exports=function(e,t){i(e,t,{name:o,handleItemDefaults:l})}},61200:(e,t,n)=>{"use strict";var r=n(93268),i=n(31496),a=n(53408),o=n(14797),s=n(56319),l=n(56953),c=n(65210).arrayEditor,u=n(12564).LINE_SPACING,f=n(47629),d=n(7126);function h(e){return e._index}function p(e,t){return+e.attr(f.menuIndexAttrName)===t._index}function m(e,t,n,r,i,a,o,s){t.active=o,c(e.layout,f.name,t).applyUpdate("active",o),"buttons"===t.type?v(e,r,null,null,t):"dropdown"===t.type&&(i.attr(f.menuIndexAttrName,"-1"),g(e,r,i,a,t),s||v(e,r,i,a,t))}function g(e,t,n,r,i){var a=s.ensureSingle(t,"g",f.headerClassName,(function(e){e.style("pointer-events","all")})),l=i._dims,c=i.active,u=i.buttons[c]||f.blankHeaderOpts,d={y:i.pad.t,yPad:0,x:i.pad.l,xPad:0,index:0},h={width:l.headerWidth,height:l.headerHeight};a.call(y,i,u,e).call(T,i,d,h),s.ensureSingle(t,"text",f.headerArrowClassName,(function(e){e.attr("text-anchor","end").call(o.font,i.font).text(f.arrowSymbol[i.direction])})).attr({x:l.headerWidth-f.arrowOffsetX+i.pad.l,y:l.headerHeight/2+f.textOffsetY+i.pad.t}),a.on("click",(function(){n.call(M,String(p(n,i)?-1:i._index)),v(e,t,n,r,i)})),a.on("mouseover",(function(){a.call(w)})),a.on("mouseout",(function(){a.call(A,i)})),o.setTranslate(t,l.lx,l.ly)}function v(e,t,n,a,o){n||(n=t).attr("pointer-events","all");var l=function(e){return-1==+e.attr(f.menuIndexAttrName)}(n)&&"buttons"!==o.type?[]:o.buttons,c="dropdown"===o.type?f.dropdownButtonClassName:f.buttonClassName,u=n.selectAll("g."+c).data(s.filterVisible(l)),d=u.enter().append("g").classed(c,!0),h=u.exit();"dropdown"===o.type?(d.attr("opacity","0").transition().attr("opacity","1"),h.transition().attr("opacity","0").remove()):h.remove();var p=0,g=0,v=o._dims,b=-1!==["up","down"].indexOf(o.direction);"dropdown"===o.type&&(b?g=v.headerHeight+f.gapButtonHeader:p=v.headerWidth+f.gapButtonHeader),"dropdown"===o.type&&"up"===o.direction&&(g=-f.gapButtonHeader+f.gapButton-v.openHeight),"dropdown"===o.type&&"left"===o.direction&&(p=-f.gapButtonHeader+f.gapButton-v.openWidth);var x={x:v.lx+p+o.pad.l,y:v.ly+g+o.pad.t,yPad:f.gapButton,xPad:f.gapButton,index:0},k={l:x.x+o.borderwidth,t:x.y+o.borderwidth};u.each((function(s,l){var c=r.select(this);c.call(y,o,s,e).call(T,o,x),c.on("click",(function(){r.event.defaultPrevented||(s.execute&&(s.args2&&o.active===l?(m(e,o,0,t,n,a,-1),i.executeAPICommand(e,s.method,s.args2)):(m(e,o,0,t,n,a,l),i.executeAPICommand(e,s.method,s.args))),e.emit("plotly_buttonclicked",{menu:o,button:s,active:o.active}))})),c.on("mouseover",(function(){c.call(w)})),c.on("mouseout",(function(){c.call(A,o),u.call(_,o)}))})),u.call(_,o),b?(k.w=Math.max(v.openWidth,v.headerWidth),k.h=x.y-k.t):(k.w=x.x-k.l,k.h=Math.max(v.openHeight,v.headerHeight)),k.direction=o.direction,a&&(u.size()?function(e,t,n,r,i,a){var o,s,l,c=i.direction,u="up"===c||"down"===c,d=i._dims,h=i.active;if(u)for(s=0,l=0;l<h;l++)s+=d.heights[l]+f.gapButton;else for(o=0,l=0;l<h;l++)o+=d.widths[l]+f.gapButton;r.enable(a,o,s),r.hbar&&r.hbar.attr("opacity","0").transition().attr("opacity","1");r.vbar&&r.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,a,o,k):function(e){var t=!!e.hbar,n=!!e.vbar;t&&e.hbar.transition().attr("opacity","0").each("end",(function(){t=!1,n||e.disable()}));n&&e.vbar.transition().attr("opacity","0").each("end",(function(){n=!1,t||e.disable()}))}(a))}function y(e,t,n,r){e.call(b,t).call(x,t,n,r)}function b(e,t){s.ensureSingle(e,"rect",f.itemRectClassName,(function(e){e.attr({rx:f.rx,ry:f.ry,"shape-rendering":"crispEdges"})})).call(a.stroke,t.bordercolor).call(a.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px")}function x(e,t,n,r){var i=s.ensureSingle(e,"text",f.itemTextClassName,(function(e){e.attr({"text-anchor":"start","data-notex":1})})),a=n.label,c=r._fullLayout._meta;c&&(a=s.templateString(a,c)),i.call(o.font,t.font).text(a).call(l.convertToTspans,r)}function _(e,t){var n=t.active;e.each((function(e,i){var o=r.select(this);i===n&&t.showactive&&o.select("rect."+f.itemRectClassName).call(a.fill,f.activeColor)}))}function w(e){e.select("rect."+f.itemRectClassName).call(a.fill,f.hoverColor)}function A(e,t){e.select("rect."+f.itemRectClassName).call(a.fill,t.bgcolor)}function k(e,t){var n=t._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},a=o.tester.selectAll("g."+f.dropdownButtonClassName).data(s.filterVisible(t.buttons));a.enter().append("g").classed(f.dropdownButtonClassName,!0);var c=-1!==["up","down"].indexOf(t.direction);a.each((function(i,a){var s=r.select(this);s.call(y,t,i,e);var d=s.select("."+f.itemTextClassName),h=d.node()&&o.bBox(d.node()).width,p=Math.max(h+f.textPadX,f.minWidth),m=t.font.size*u,g=l.lineCount(d),v=Math.max(m*g,f.minHeight)+f.textOffsetY;v=Math.ceil(v),p=Math.ceil(p),n.widths[a]=p,n.heights[a]=v,n.height1=Math.max(n.height1,v),n.width1=Math.max(n.width1,p),c?(n.totalWidth=Math.max(n.totalWidth,p),n.openWidth=n.totalWidth,n.totalHeight+=v+f.gapButton,n.openHeight+=v+f.gapButton):(n.totalWidth+=p+f.gapButton,n.openWidth+=p+f.gapButton,n.totalHeight=Math.max(n.totalHeight,v),n.openHeight=n.totalHeight)})),c?n.totalHeight-=f.gapButton:n.totalWidth-=f.gapButton,n.headerWidth=n.width1+f.arrowPadX,n.headerHeight=n.height1,"dropdown"===t.type&&(c?(n.width1+=f.arrowPadX,n.totalHeight=n.height1):n.totalWidth=n.width1,n.totalWidth+=f.arrowPadX),a.remove();var d=n.totalWidth+t.pad.l+t.pad.r,h=n.totalHeight+t.pad.t+t.pad.b,p=e._fullLayout._size;n.lx=p.l+p.w*t.x,n.ly=p.t+p.h*(1-t.y);var m="left";s.isRightAnchor(t)&&(n.lx-=d,m="right"),s.isCenterAnchor(t)&&(n.lx-=d/2,m="center");var g="top";s.isBottomAnchor(t)&&(n.ly-=h,g="bottom"),s.isMiddleAnchor(t)&&(n.ly-=h/2,g="middle"),n.totalWidth=Math.ceil(n.totalWidth),n.totalHeight=Math.ceil(n.totalHeight),n.lx=Math.round(n.lx),n.ly=Math.round(n.ly),i.autoMargin(e,E(t),{x:t.x,y:t.y,l:d*({right:1,center:.5}[m]||0),r:d*({left:1,center:.5}[m]||0),b:h*({top:1,middle:.5}[g]||0),t:h*({bottom:1,middle:.5}[g]||0)})}function E(e){return f.autoMarginIdRoot+e._index}function T(e,t,n,r){r=r||{};var i=e.select("."+f.itemRectClassName),a=e.select("."+f.itemTextClassName),s=t.borderwidth,c=n.index,d=t._dims;o.setTranslate(e,s+n.x,s+n.y);var h=-1!==["up","down"].indexOf(t.direction),p=r.height||(h?d.heights[c]:d.height1);i.attr({x:0,y:0,width:r.width||(h?d.width1:d.widths[c]),height:p});var m=t.font.size*u,g=(l.lineCount(a)-1)*m/2;l.positionText(a,f.textOffsetX,p/2-g+f.textOffsetY),h?n.y+=d.heights[c]+n.yPad:n.x+=d.widths[c]+n.xPad,n.index++}function M(e,t){e.attr(f.menuIndexAttrName,t||"-1").selectAll("g."+f.dropdownButtonClassName).remove()}e.exports=function(e){var t=e._fullLayout,n=s.filterVisible(t[f.name]);function a(t){i.autoMargin(e,E(t))}var o=t._menulayer.selectAll("g."+f.containerClassName).data(n.length>0?[0]:[]);if(o.enter().append("g").classed(f.containerClassName,!0).style("cursor","pointer"),o.exit().each((function(){r.select(this).selectAll("g."+f.headerGroupClassName).each(a)})).remove(),0!==n.length){var l=o.selectAll("g."+f.headerGroupClassName).data(n,h);l.enter().append("g").classed(f.headerGroupClassName,!0);for(var c=s.ensureSingle(o,"g",f.dropdownButtonGroupClassName,(function(e){e.style("pointer-events","all")})),u=0;u<n.length;u++){var y=n[u];k(e,y)}var b="updatemenus"+t._uid,x=new d(e,c,b);l.enter().size()&&(c.node().parentNode.appendChild(c.node()),c.call(M)),l.exit().each((function(e){c.call(M),a(e)})).remove(),l.each((function(t){var n=r.select(this),a="dropdown"===t.type?c:null;i.manageCommandObserver(e,t,t.buttons,(function(r){m(e,t,t.buttons[r.index],n,a,x,r.index,!0)})),"dropdown"===t.type?(g(e,n,c,x,t),p(c,t)&&v(e,n,c,x,t)):v(e,n,null,null,t)}))}}},83768:(e,t,n)=>{"use strict";var r=n(47629);e.exports={moduleType:"component",name:r.name,layoutAttributes:n(38267),supplyLayoutDefaults:n(13980),draw:n(61200)}},7126:(e,t,n)=>{"use strict";e.exports=s;var r=n(93268),i=n(53408),a=n(14797),o=n(56319);function s(e,t,n){this.gd=e,this.container=t,this.id=n,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}s.barWidth=2,s.barLength=20,s.barRadius=2,s.barPad=1,s.barColor="#808BA4",s.prototype.enable=function(e,t,n){var o=this.gd._fullLayout,l=o.width,c=o.height;this.position=e;var u,f,d,h,p=this.position.l,m=this.position.w,g=this.position.t,v=this.position.h,y=this.position.direction,b="down"===y,x="left"===y,_="up"===y,w=m,A=v;b||x||"right"===y||_||(this.position.direction="down",b=!0),b||_?(f=(u=p)+w,b?(d=g,A=(h=Math.min(d+A,c))-d):A=(h=g+A)-(d=Math.max(h-A,0))):(h=(d=g)+A,x?w=(f=p+w)-(u=Math.max(f-w,0)):(u=p,w=(f=Math.min(u+w,l))-u)),this._box={l:u,t:d,w,h:A};var k=m>w,E=s.barLength+2*s.barPad,T=s.barWidth+2*s.barPad,M=p,S=g+v;S+T>c&&(S=c-T);var C=this.container.selectAll("rect.scrollbar-horizontal").data(k?[0]:[]);C.exit().on(".drag",null).remove(),C.enter().append("rect").classed("scrollbar-horizontal",!0).call(i.fill,s.barColor),k?(this.hbar=C.attr({rx:s.barRadius,ry:s.barRadius,x:M,y:S,width:E,height:T}),this._hbarXMin=M+E/2,this._hbarTranslateMax=w-E):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var O=v>A,R=s.barWidth+2*s.barPad,N=s.barLength+2*s.barPad,L=p+m,D=g;L+R>l&&(L=l-R);var P=this.container.selectAll("rect.scrollbar-vertical").data(O?[0]:[]);P.exit().on(".drag",null).remove(),P.enter().append("rect").classed("scrollbar-vertical",!0).call(i.fill,s.barColor),O?(this.vbar=P.attr({rx:s.barRadius,ry:s.barRadius,x:L,y:D,width:R,height:N}),this._vbarYMin=D+N/2,this._vbarTranslateMax=A-N):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var I=this.id,F=u-.5,z=O?f+R+.5:f+.5,j=d-.5,B=k?h+T+.5:h+.5,U=o._topdefs.selectAll("#"+I).data(k||O?[0]:[]);if(U.exit().remove(),U.enter().append("clipPath").attr("id",I).append("rect"),k||O?(this._clipRect=U.select("rect").attr({x:Math.floor(F),y:Math.floor(j),width:Math.ceil(z)-Math.floor(F),height:Math.ceil(B)-Math.floor(j)}),this.container.call(a.setClipUrl,I,this.gd),this.bg.attr({x:p,y:g,width:m,height:v})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(a.setClipUrl,null),delete this._clipRect),k||O){var $=r.behavior.drag().on("dragstart",(function(){r.event.sourceEvent.preventDefault()})).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call($);var q=r.behavior.drag().on("dragstart",(function(){r.event.sourceEvent.preventDefault(),r.event.sourceEvent.stopPropagation()})).on("drag",this._onBarDrag.bind(this));k&&this.hbar.on(".drag",null).call(q),O&&this.vbar.on(".drag",null).call(q)}this.setTranslate(t,n)},s.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(a.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},s.prototype._onBoxDrag=function(){var e=this.translateX,t=this.translateY;this.hbar&&(e-=r.event.dx),this.vbar&&(t-=r.event.dy),this.setTranslate(e,t)},s.prototype._onBoxWheel=function(){var e=this.translateX,t=this.translateY;this.hbar&&(e+=r.event.deltaY),this.vbar&&(t+=r.event.deltaY),this.setTranslate(e,t)},s.prototype._onBarDrag=function(){var e=this.translateX,t=this.translateY;if(this.hbar){var n=e+this._hbarXMin,i=n+this._hbarTranslateMax;e=(o.constrain(r.event.x,n,i)-n)/(i-n)*(this.position.w-this._box.w)}if(this.vbar){var a=t+this._vbarYMin,s=a+this._vbarTranslateMax;t=(o.constrain(r.event.y,a,s)-a)/(s-a)*(this.position.h-this._box.h)}this.setTranslate(e,t)},s.prototype.setTranslate=function(e,t){var n=this.position.w-this._box.w,r=this.position.h-this._box.h;if(e=o.constrain(e||0,0,n),t=o.constrain(t||0,0,r),this.translateX=e,this.translateY=t,this.container.call(a.setTranslate,this._box.l-this.position.l-e,this._box.t-this.position.t-t),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+e-.5),y:Math.floor(this.position.t+t-.5)}),this.hbar){var i=e/n;this.hbar.call(a.setTranslate,e+i*this._hbarTranslateMax,t)}if(this.vbar){var s=t/r;this.vbar.call(a.setTranslate,e,t+s*this._vbarTranslateMax)}}},12564:e=>{"use strict";e.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},53939:e=>{"use strict";e.exports={axisRefDescription:function(e,t,n){return["If set to a",e,"axis id (e.g. *"+e+"* or","*"+e+"2*), the `"+e+"` position refers to a",e,"coordinate. If set to *paper*, the `"+e+"`","position refers to the distance from the",t,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",t,"("+n+"). If set to a",e,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",t,"of the domain of that axis: e.g.,","*"+e+"2 domain* refers to the domain of the second",e," axis and a",e,"position of 0.5 refers to the","point between the",t,"and the",n,"of the domain of the","second",e,"axis."].join(" ")}}},71982:e=>{"use strict";e.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},77516:e=>{"use strict";e.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},21985:e=>{"use strict";e.exports={circle:"","circle-open":"",square:"","square-open":"",diamond:"","diamond-open":"",cross:"+",x:""}},93352:e=>{"use strict";e.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},33351:e=>{"use strict";e.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,ONEMILLI:1,ONEMICROSEC:.001,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:""}},68435:(e,t)=>{"use strict";t.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]],t.STYLE=t.CSS_DECLARATIONS.map((function(e){return e.join(": ")+"; "})).join("")},81818:(e,t)=>{"use strict";t.xmlns="http://www.w3.org/2000/xmlns/",t.svg="http://www.w3.org/2000/svg",t.xlink="http://www.w3.org/1999/xlink",t.svgAttrs={xmlns:t.svg,"xmlns:xlink":t.xlink}},71016:(e,t,n)=>{"use strict";t.version=n(96911).version,n(46864),n(41643);for(var r=n(3360),i=t.register=r.register,a=n(23892),o=Object.keys(a),s=0;s<o.length;s++){var l=o[s];"_"!==l.charAt(0)&&(t[l]=a[l]),i({moduleType:"apiMethod",name:l,fn:a[l]})}i(n(93959)),i([n(27353),n(64002),n(94190),n(25512),n(12047),n(83768),n(14781),n(92091),n(99891),n(55961),n(74131),n(74062),n(82533),n(32004),n(17911),n(90039)]),i([n(95929),n(1182)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(i(window.PlotlyLocales),delete window.PlotlyLocales),t.Icons=n(57014);var c=n(17911),u=n(31496);t.Plots={resize:u.resize,graphJson:u.graphJson,sendDataToCloud:u.sendDataToCloud},t.Fx={hover:c.hover,unhover:c.unhover,loneHover:c.loneHover,loneUnhover:c.loneUnhover},t.Snapshot=n(53200),t.PlotSchema=n(72683)},57014:e=>{"use strict";e.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},38688:(e,t)=>{"use strict";t.isLeftAnchor=function(e){return"left"===e.xanchor||"auto"===e.xanchor&&e.x<=1/3},t.isCenterAnchor=function(e){return"center"===e.xanchor||"auto"===e.xanchor&&e.x>1/3&&e.x<2/3},t.isRightAnchor=function(e){return"right"===e.xanchor||"auto"===e.xanchor&&e.x>=2/3},t.isTopAnchor=function(e){return"top"===e.yanchor||"auto"===e.yanchor&&e.y>=2/3},t.isMiddleAnchor=function(e){return"middle"===e.yanchor||"auto"===e.yanchor&&e.y>1/3&&e.y<2/3},t.isBottomAnchor=function(e){return"bottom"===e.yanchor||"auto"===e.yanchor&&e.y<=1/3}},12587:(e,t,n)=>{"use strict";var r=n(8295),i=r.mod,a=r.modHalf,o=Math.PI,s=2*o;function l(e){return Math.abs(e[1]-e[0])>s-1e-14}function c(e,t){return a(t-e,s)}function u(e,t){if(l(t))return!0;var n,r;t[0]<t[1]?(n=t[0],r=t[1]):(n=t[1],r=t[0]),(n=i(n,s))>(r=i(r,s))&&(r+=s);var a=i(e,s),o=a+s;return a>=n&&a<=r||o>=n&&o<=r}function f(e,t,n,r,i,a,c){i=i||0,a=a||0;var u,f,d,h,p,m=l([n,r]);function g(e,t){return[e*Math.cos(t)+i,a-e*Math.sin(t)]}m?(u=0,f=o,d=s):n<r?(u=n,d=r):(u=r,d=n),e<t?(h=e,p=t):(h=t,p=e);var v,y=Math.abs(d-u)<=o?0:1;function b(e,t,n){return"A"+[e,e]+" "+[0,y,n]+" "+g(e,t)}return m?v=null===h?"M"+g(p,u)+b(p,f,0)+b(p,d,0)+"Z":"M"+g(h,u)+b(h,f,0)+b(h,d,0)+"ZM"+g(p,u)+b(p,f,1)+b(p,d,1)+"Z":null===h?(v="M"+g(p,u)+b(p,d,0),c&&(v+="L0,0Z")):v="M"+g(h,u)+"L"+g(p,u)+b(p,d,0)+"L"+g(h,d)+b(h,u,1)+"Z",v}e.exports={deg2rad:function(e){return e/180*o},rad2deg:function(e){return e/o*180},angleDelta:c,angleDist:function(e,t){return Math.abs(c(e,t))},isFullCircle:l,isAngleInsideSector:u,isPtInsideSector:function(e,t,n,r){return!!u(t,r)&&(n[0]<n[1]?(i=n[0],a=n[1]):(i=n[1],a=n[0]),e>=i&&e<=a);var i,a},pathArc:function(e,t,n,r,i){return f(null,e,t,n,r,i,0)},pathSector:function(e,t,n,r,i){return f(null,e,t,n,r,i,1)},pathAnnulus:function(e,t,n,r,i,a){return f(e,t,n,r,i,a,1)}}},41146:(e,t,n)=>{"use strict";var r=n(24433).decode,i=n(77192),a=Array.isArray,o=ArrayBuffer,s=DataView;function l(e){return o.isView(e)&&!(e instanceof s)}function c(e){return a(e)||l(e)}t.isTypedArray=l,t.isArrayOrTypedArray=c,t.isArray1D=function(e){return!c(e[0])},t.ensureArray=function(e,t){return a(e)||(e=[]),e.length=t,e};var u={u1c:"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,i1:"undefined"==typeof Int8Array?void 0:Int8Array,u1:"undefined"==typeof Uint8Array?void 0:Uint8Array,i2:"undefined"==typeof Int16Array?void 0:Int16Array,u2:"undefined"==typeof Uint16Array?void 0:Uint16Array,i4:"undefined"==typeof Int32Array?void 0:Int32Array,u4:"undefined"==typeof Uint32Array?void 0:Uint32Array,f4:"undefined"==typeof Float32Array?void 0:Float32Array,f8:"undefined"==typeof Float64Array?void 0:Float64Array};function f(e){return e.constructor===ArrayBuffer}function d(e,t,n){if(c(e)){if(c(e[0])){for(var r=n,i=0;i<e.length;i++)r=t(r,e[i].length);return r}return e.length}return 0}u.uint8c=u.u1c,u.uint8=u.u1,u.int8=u.i1,u.uint16=u.u2,u.int16=u.i2,u.uint32=u.u4,u.int32=u.i4,u.float32=u.f4,u.float64=u.f8,t.isArrayBuffer=f,t.decodeTypedArraySpec=function(e){var t=[],n=function(e){return{bdata:e.bdata,dtype:e.dtype,shape:e.shape}}(e),i=n.dtype,a=u[i];if(!a)throw new Error('Error in dtype: "'+i+'"');var o=a.BYTES_PER_ELEMENT,s=n.bdata;f(s)||(s=r(s));var l=void 0===n.shape?[s.byteLength/o]:(""+n.shape).split(",");l.reverse();var c,d,h=l.length,p=+l[0],m=o*p,g=0;if(1===h)t=new a(s);else if(2===h)for(c=+l[1],d=0;d<c;d++)t[d]=new a(s,g,p),g+=m;else{if(3!==h)throw new Error("ndim: "+h+'is not supported with the shape:"'+n.shape+'"');c=+l[1];for(var v=+l[2],y=0;y<v;y++)for(t[y]=[],d=0;d<c;d++)t[y][d]=new a(s,g,p),g+=m}return t.bdata=n.bdata,t.dtype=n.dtype,t.shape=l.reverse().join(","),e._inputArray=t,t},t.isTypedArraySpec=function(e){return i(e)&&e.hasOwnProperty("dtype")&&"string"==typeof e.dtype&&e.hasOwnProperty("bdata")&&("string"==typeof e.bdata||f(e.bdata))&&(void 0===e.shape||e.hasOwnProperty("shape")&&("string"==typeof e.shape||"number"==typeof e.shape))},t.concat=function(){var e,t,n,r,i,o,s,l,c=[],u=!0,f=0;for(n=0;n<arguments.length;n++)(o=(r=arguments[n]).length)&&(t?c.push(r):(t=r,i=o),a(r)?e=!1:(u=!1,f?e!==r.constructor&&(e=!1):e=r.constructor),f+=o);if(!f)return[];if(!c.length)return t;if(u)return t.concat.apply(t,c);if(e){for((s=new e(f)).set(t),n=0;n<c.length;n++)r=c[n],s.set(r,i),i+=r.length;return s}for(s=new Array(f),l=0;l<t.length;l++)s[l]=t[l];for(n=0;n<c.length;n++){for(r=c[n],l=0;l<r.length;l++)s[i+l]=r[l];i+=l}return s},t.maxRowLength=function(e){return d(e,Math.max,0)},t.minRowLength=function(e){return d(e,Math.min,1/0)}},728:(e,t,n)=>{"use strict";var r=n(5605),i=n(33351).BADNUM,a=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;e.exports=function(e){return"string"==typeof e&&(e=e.replace(a,"")),r(e)?Number(e):i}},68857:e=>{"use strict";e.exports=function(e){var t=e._fullLayout;t._glcanvas&&t._glcanvas.size()&&t._glcanvas.each((function(e){e.regl&&e.regl.clear({color:!0,depth:!0})}))}},17343:e=>{"use strict";e.exports=function(e){e._responsiveChartHandler&&(window.removeEventListener("resize",e._responsiveChartHandler),delete e._responsiveChartHandler)}},13890:(e,t,n)=>{"use strict";var r=n(5605),i=n(3707),a=n(86395).extendFlat,o=n(85507),s=n(51331),l=n(53408),c=n(93352).DESELECTDIM,u=n(19466),f=n(11800).counter,d=n(8295).modHalf,h=n(41146).isArrayOrTypedArray,p=n(41146).isTypedArraySpec,m=n(41146).decodeTypedArraySpec;function g(e,n){var r=t.valObjectMeta[n.valType];if(n.arrayOk&&h(e))return!0;if(r.validateFunction)return r.validateFunction(e,n);var i={},a=i,o={set:function(e){a=e}};return r.coerceFunction(e,o,i,n),a!==i}t.valObjectMeta={data_array:{description:["An {array} of data.","The value must represent an {array} or it will be ignored,","but this array can be provided in several forms:","(1) a regular {array} object","(2) a typed array (e.g. Float32Array)","(3) an object with keys dtype, bdata, and optionally shape.","In this 3rd form, dtype is one of","*f8*, *f4*.","*i4*, *u4*,","*i2*, *u2*,","*i1*, *u1* or *u1c* for Uint8ClampedArray.","In addition to shorthand `dtype` above one could also use the following forms:","*float64*, *float32*,","*int32*, *uint32*,","*int16*, *uint16*,","*int8*, *uint8* or *uint8c* for Uint8ClampedArray.","`bdata` is either a base64-encoded string or the ArrayBuffer of","an integer or float typed array.","For either multi-dimensional arrays you must also","provide its dimensions separated by comma via `shape`.","For example using `dtype`: *f4* and `shape`: *5,100* you can","declare a 2-D array that has 5 rows and 100 columns","containing float32 values i.e. 4 bits per value.","`shape` is optional for one dimensional arrays."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(e,t,n){t.set(h(e)?e:p(e)?m(e):n)}},enumerated:{description:["Enumerated value type. The available values are listed","in `values`."].join(" "),requiredOpts:["values"],otherOpts:["dflt","coerceNumber","arrayOk"],coerceFunction:function(e,t,n,r){r.coerceNumber&&(e=+e),-1===r.values.indexOf(e)?t.set(n):t.set(e)},validateFunction:function(e,t){t.coerceNumber&&(e=+e);for(var n=t.values,r=0;r<n.length;r++){var i=String(n[r]);if("/"===i.charAt(0)&&"/"===i.charAt(i.length-1)){if(new RegExp(i.substr(1,i.length-2)).test(e))return!0}else if(e===n[r])return!0}return!1}},boolean:{description:"A boolean (true/false) value.",requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(e,t,n){!0===e||!1===e?t.set(e):t.set(n)}},number:{description:["A number or a numeric value","(e.g. a number inside a string).","When applicable, values greater (less) than `max` (`min`)","are coerced to the `dflt`."].join(" "),requiredOpts:[],otherOpts:["dflt","min","max","arrayOk"],coerceFunction:function(e,t,n,i){p(e)&&(e=m(e)),!r(e)||void 0!==i.min&&e<i.min||void 0!==i.max&&e>i.max?t.set(n):t.set(+e)}},integer:{description:["An integer or an integer inside a string.","When applicable, values greater (less) than `max` (`min`)","are coerced to the `dflt`."].join(" "),requiredOpts:[],otherOpts:["dflt","min","max","arrayOk","extras"],coerceFunction:function(e,t,n,i){-1===(i.extras||[]).indexOf(e)?(p(e)&&(e=m(e)),e%1||!r(e)||void 0!==i.min&&e<i.min||void 0!==i.max&&e>i.max?t.set(n):t.set(+e)):t.set(e)}},string:{description:["A string value.","Numbers are converted to strings except for attributes with","`strict` set to true."].join(" "),requiredOpts:[],otherOpts:["dflt","noBlank","strict","arrayOk","values"],coerceFunction:function(e,t,n,r){if("string"!=typeof e){var i="number"==typeof e;!0!==r.strict&&i?t.set(String(e)):t.set(n)}else r.noBlank&&!e?t.set(n):t.set(e)}},color:{description:["A string describing color.","Supported formats:","- hex (e.g. '#d3d3d3')","- rgb (e.g. 'rgb(255, 0, 0)')","- rgba (e.g. 'rgb(255, 0, 0, 0.5)')","- hsl (e.g. 'hsl(0, 100%, 50%)')","- hsv (e.g. 'hsv(0, 100%, 100%)')","- named colors (full list: http://www.w3.org/TR/css3-color/#svg-color)"].join(" "),requiredOpts:[],otherOpts:["dflt","arrayOk"],coerceFunction:function(e,t,n){p(e)&&(e=m(e)),i(e).isValid()?t.set(e):t.set(n)}},colorlist:{description:["A list of colors.","Must be an {array} containing valid colors."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(e,t,n){Array.isArray(e)&&e.length&&e.every((function(e){return i(e).isValid()}))?t.set(e):t.set(n)}},colorscale:{description:["A Plotly colorscale either picked by a name:","(any of",Object.keys(s.scales).join(", "),")","customized as an {array} of 2-element {arrays} where","the first element is the normalized color level value","(starting at *0* and ending at *1*),","and the second item is a valid color string."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(e,t,n){t.set(s.get(e,n))}},angle:{description:["A number (in degree) between -180 and 180."].join(" "),requiredOpts:[],otherOpts:["dflt","arrayOk"],coerceFunction:function(e,t,n){p(e)&&(e=m(e)),"auto"===e?t.set("auto"):r(e)?t.set(d(+e,360)):t.set(n)}},subplotid:{description:["An id string of a subplot type (given by dflt), optionally","followed by an integer >1. e.g. if dflt='geo', we can have","'geo', 'geo2', 'geo3', ..."].join(" "),requiredOpts:["dflt"],otherOpts:["regex"],coerceFunction:function(e,t,n,r){var i=r.regex||f(n);"string"==typeof e&&i.test(e)?t.set(e):t.set(n)},validateFunction:function(e,t){var n=t.dflt;return e===n||"string"==typeof e&&!!f(n).test(e)}},flaglist:{description:["A string representing a combination of flags","(order does not matter here).","Combine any of the available `flags` with *+*.","(e.g. ('lines+markers')).","Values in `extras` cannot be combined."].join(" "),requiredOpts:["flags"],otherOpts:["dflt","extras","arrayOk"],coerceFunction:function(e,t,n,r){if(-1===(r.extras||[]).indexOf(e))if("string"==typeof e){for(var i=e.split("+"),a=0;a<i.length;){var o=i[a];-1===r.flags.indexOf(o)||i.indexOf(o)<a?i.splice(a,1):a++}i.length?t.set(i.join("+")):t.set(n)}else t.set(n);else t.set(e)}},any:{description:"Any type.",requiredOpts:[],otherOpts:["dflt","values","arrayOk"],coerceFunction:function(e,t,n){void 0===e?t.set(n):t.set(p(e)?m(e):e)}},info_array:{description:["An {array} of plot information."].join(" "),requiredOpts:["items"],otherOpts:["dflt","freeLength","dimensions"],coerceFunction:function(e,n,r,i){function a(e,n,r){var i,a={set:function(e){i=e}};return void 0===r&&(r=n.dflt),t.valObjectMeta[n.valType].coerceFunction(e,a,r,n),i}if(p(e)&&(e=m(e)),h(e)){var o,s,l,c,u,f,d=2===i.dimensions||"1-2"===i.dimensions&&Array.isArray(e)&&h(e[0]),g=i.items,v=[],y=Array.isArray(g),b=y&&d&&h(g[0]),x=d&&y&&!b,_=y&&!x?g.length:e.length;if(r=Array.isArray(r)?r:[],d)for(o=0;o<_;o++)for(v[o]=[],l=h(e[o])?e[o]:[],u=x?g.length:y?g[o].length:l.length,s=0;s<u;s++)c=x?g[s]:y?g[o][s]:g,void 0!==(f=a(l[s],c,(r[o]||[])[s]))&&(v[o][s]=f);else for(o=0;o<_;o++)void 0!==(f=a(e[o],y?g[o]:g,r[o]))&&(v[o]=f);n.set(v)}else n.set(r)},validateFunction:function(e,t){if(!h(e))return!1;var n=t.items,r=Array.isArray(n),i=2===t.dimensions;if(!t.freeLength&&e.length!==n.length)return!1;for(var a=0;a<e.length;a++)if(i){if(!h(e[a])||!t.freeLength&&e[a].length!==n[a].length)return!1;for(var o=0;o<e[a].length;o++)if(!g(e[a][o],r?n[a][o]:n))return!1}else if(!g(e[a],r?n[a]:n))return!1;return!0}}},t.coerce=function(e,n,r,i,a){var o=u(r,i).get(),s=u(e,i),l=u(n,i),c=s.get(),f=n._template;if(void 0===c&&f&&(c=u(f,i).get(),f=0),void 0===a&&(a=o.dflt),o.arrayOk){if(h(c))return l.set(c),c;if(p(c))return c=m(c),l.set(c),c}var d=t.valObjectMeta[o.valType].coerceFunction;d(c,l,a,o);var v=l.get();return f&&v===a&&!g(c,o)&&(d(c=u(f,i).get(),l,a,o),v=l.get()),v},t.coerce2=function(e,n,r,i,a){var o=u(e,i),s=t.coerce(e,n,r,i,a),l=o.get();return null!=l&&s},t.coerceFont=function(e,t,n,r){r||(r={}),n=a({},n);var i={family:e(t+".family",(n=a(n,r.overrideDflt||{})).family),size:e(t+".size",n.size),color:e(t+".color",n.color),weight:e(t+".weight",n.weight),style:e(t+".style",n.style)};if(r.noFontVariant||(i.variant=e(t+".variant",n.variant)),r.noFontLineposition||(i.lineposition=e(t+".lineposition",n.lineposition)),r.noFontTextcase||(i.textcase=e(t+".textcase",n.textcase)),!r.noFontShadow){var o=n.shadow;"none"===o&&r.autoShadowDflt&&(o="auto"),i.shadow=e(t+".shadow",o)}return i},t.coercePattern=function(e,t,n,r){if(e(t+".shape")){e(t+".solidity"),e(t+".size");var i="overlay"===e(t+".fillmode");if(!r){var a=e(t+".bgcolor",i?n:void 0);e(t+".fgcolor",i?l.contrast(a):n)}e(t+".fgopacity",i?.5:1)}},t.coerceHoverinfo=function(e,n,r){var i,a=n._module.attributes,s=a.hoverinfo?a:o,l=s.hoverinfo;if(1===r._dataLength){var c="all"===l.dflt?l.flags.slice():l.dflt.split("+");c.splice(c.indexOf("name"),1),i=c.join("+")}return t.coerce(e,n,s,"hoverinfo",i)},t.coerceSelectionMarkerOpacity=function(e,t){if(e.marker){var n,r,i=e.marker.opacity;if(void 0!==i)h(i)||e.selected||e.unselected||(n=i,r=c*i),t("selected.marker.opacity",n),t("unselected.marker.opacity",r)}},t.validate=g},9986:(e,t,n)=>{"use strict";var r,i,a=n(39754).DC,o=n(5605),s=n(9954),l=n(8295).mod,c=n(33351),u=c.BADNUM,f=c.ONEDAY,d=c.ONEHOUR,h=c.ONEMIN,p=c.ONESEC,m=c.EPOCHJD,g=n(3360),v=n(39754).aL,y=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,b=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,x=(new Date).getFullYear()-70;function _(e){return e&&g.componentsRegistry.calendars&&"string"==typeof e&&"gregorian"!==e}function w(e,t){return String(e+Math.pow(10,t)).substr(1)}t.dateTick0=function(e,n){var r=function(e,t){return _(e)?t?g.getComponentMethod("calendars","CANONICAL_SUNDAY")[e]:g.getComponentMethod("calendars","CANONICAL_TICK")[e]:t?"2000-01-02":"2000-01-01"}(e,!!n);if(n<2)return r;var i=t.dateTime2ms(r,e);return i+=f*(n-1),t.ms2DateTime(i,0,e)},t.dfltRange=function(e){return _(e)?g.getComponentMethod("calendars","DFLTRANGE")[e]:["2000-01-01","2001-01-01"]},t.isJSDate=function(e){return"object"==typeof e&&null!==e&&"function"==typeof e.getTime},t.dateTime2ms=function(e,n){if(t.isJSDate(e)){var a=e.getTimezoneOffset()*h,o=(e.getUTCMinutes()-e.getMinutes())*h+(e.getUTCSeconds()-e.getSeconds())*p+(e.getUTCMilliseconds()-e.getMilliseconds());if(o){var s=3*h;a=a-s/2+l(o-a+s/2,s)}return(e=Number(e)-a)>=r&&e<=i?e:u}if("string"!=typeof e&&"number"!=typeof e)return u;e=String(e);var c=_(n),v=e.charAt(0);!c||"G"!==v&&"g"!==v||(e=e.substr(1),n="");var w=c&&"chinese"===n.substr(0,7),A=e.match(w?b:y);if(!A)return u;var k=A[1],E=A[3]||"1",T=Number(A[5]||1),M=Number(A[7]||0),S=Number(A[9]||0),C=Number(A[11]||0);if(c){if(2===k.length)return u;var O;k=Number(k);try{var R=g.getComponentMethod("calendars","getCal")(n);if(w){var N="i"===E.charAt(E.length-1);E=parseInt(E,10),O=R.newDate(k,R.toMonthIndex(k,E,N),T)}else O=R.newDate(k,Number(E),T)}catch(e){return u}return O?(O.toJD()-m)*f+M*d+S*h+C*p:u}k=2===k.length?(Number(k)+2e3-x)%100+x:Number(k),E-=1;var L=new Date(Date.UTC(2e3,E,T,M,S));return L.setUTCFullYear(k),L.getUTCMonth()!==E||L.getUTCDate()!==T?u:L.getTime()+C*p},r=t.MIN_MS=t.dateTime2ms("-9999"),i=t.MAX_MS=t.dateTime2ms("9999-12-31 23:59:59.9999"),t.isDateTime=function(e,n){return t.dateTime2ms(e,n)!==u};var A=90*f,k=3*d,E=5*h;function T(e,t,n,r,i){if((t||n||r||i)&&(e+=" "+w(t,2)+":"+w(n,2),(r||i)&&(e+=":"+w(r,2),i))){for(var a=4;i%10==0;)a-=1,i/=10;e+="."+w(i,a)}return e}t.ms2DateTime=function(e,t,n){if("number"!=typeof e||!(e>=r&&e<=i))return u;t||(t=0);var a,o,s,c,y,b,x=Math.floor(10*l(e+.05,1)),w=Math.round(e-x/10);if(_(n)){var M=Math.floor(w/f)+m,S=Math.floor(l(e,f));try{a=g.getComponentMethod("calendars","getCal")(n).fromJD(M).formatDate("yyyy-mm-dd")}catch(e){a=v("G%Y-%m-%d")(new Date(w))}if("-"===a.charAt(0))for(;a.length<11;)a="-0"+a.substr(1);else for(;a.length<10;)a="0"+a;o=t<A?Math.floor(S/d):0,s=t<A?Math.floor(S%d/h):0,c=t<k?Math.floor(S%h/p):0,y=t<E?S%p*10+x:0}else b=new Date(w),a=v("%Y-%m-%d")(b),o=t<A?b.getUTCHours():0,s=t<A?b.getUTCMinutes():0,c=t<k?b.getUTCSeconds():0,y=t<E?10*b.getUTCMilliseconds()+x:0;return T(a,o,s,c,y)},t.ms2DateTimeLocal=function(e){if(!(e>=r+f&&e<=i-f))return u;var t=Math.floor(10*l(e+.05,1)),n=new Date(Math.round(e-t/10));return T(a("%Y-%m-%d")(n),n.getHours(),n.getMinutes(),n.getSeconds(),10*n.getUTCMilliseconds()+t)},t.cleanDate=function(e,n,r){if(e===u)return n;if(t.isJSDate(e)||"number"==typeof e&&isFinite(e)){if(_(r))return s.error("JS Dates and milliseconds are incompatible with world calendars",e),n;if(!(e=t.ms2DateTimeLocal(+e))&&void 0!==n)return n}else if(!t.isDateTime(e,r))return s.error("unrecognized date",e),n;return e};var M=/%\d?f/g,S=/%h/g,C={1:"1",2:"1",3:"2",4:"2"};function O(e,t,n,r){e=e.replace(M,(function(e){var n=Math.min(+e.charAt(1)||6,6);return(t/1e3%1+2).toFixed(n).substr(2).replace(/0+$/,"")||"0"}));var i=new Date(Math.floor(t+.05));if(e=e.replace(S,(function(){return C[n("%q")(i)]})),_(r))try{e=g.getComponentMethod("calendars","worldCalFmt")(e,t,r)}catch(e){return"Invalid"}return n(e)(i)}var R=[59,59.9,59.99,59.999,59.9999];t.formatDate=function(e,t,n,r,i,a){if(i=_(i)&&i,!t)if("y"===n)t=a.year;else if("m"===n)t=a.month;else{if("d"!==n)return function(e,t){var n=l(e+.05,f),r=w(Math.floor(n/d),2)+":"+w(l(Math.floor(n/h),60),2);if("M"!==t){o(t)||(t=0);var i=(100+Math.min(l(e/p,60),R[t])).toFixed(t).substr(1);t>0&&(i=i.replace(/0+$/,"").replace(/[\.]$/,"")),r+=":"+i}return r}(e,n)+"\n"+O(a.dayMonthYear,e,r,i);t=a.dayMonth+"\n"+a.year}return O(t,e,r,i)};var N=3*f;t.incrementMonth=function(e,t,n){n=_(n)&&n;var r=l(e,f);if(e=Math.round(e-r),n)try{var i=Math.round(e/f)+m,a=g.getComponentMethod("calendars","getCal")(n),o=a.fromJD(i);return t%12?a.add(o,t,"m"):a.add(o,t/12,"y"),(o.toJD()-m)*f+r}catch(t){s.error("invalid ms "+e+" in calendar "+n)}var c=new Date(e+N);return c.setUTCMonth(c.getUTCMonth()+t)+r-N},t.findExactDates=function(e,t){for(var n,r,i=0,a=0,s=0,l=0,c=_(t)&&g.getComponentMethod("calendars","getCal")(t),u=0;u<e.length;u++)if(r=e[u],o(r)){if(!(r%f))if(c)try{1===(n=c.fromJD(r/f+m)).day()?1===n.month()?i++:a++:s++}catch(e){}else 1===(n=new Date(r)).getUTCDate()?0===n.getUTCMonth()?i++:a++:s++}else l++;s+=a+=i;var d=e.length-l;return{exactYears:i/d,exactMonths:a/d,exactDays:s/d}}},32159:(e,t,n)=>{"use strict";var r=n(93268),i=n(9954),a=n(74158),o=n(2699);function s(e){var t=e&&e.parentNode;t&&t.removeChild(e)}function l(e,t,n){var r="plotly.js-style-"+e,a=document.getElementById(r);a||((a=document.createElement("style")).setAttribute("id",r),a.appendChild(document.createTextNode("")),document.head.appendChild(a));var o=a.sheet;o.insertRule?o.insertRule(t+"{"+n+"}",0):o.addRule?o.addRule(t,n,0):i.warn("addStyleRule failed")}function c(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform");return"none"===n?null:n.replace("matrix","").replace("3d","").slice(1,-1).split(",").map((function(e){return+e}))}function u(e){for(var t=[];f(e);)t.push(e),e=e.parentNode,"function"==typeof ShadowRoot&&e instanceof ShadowRoot&&(e=e.host);return t}function f(e){return e&&(e instanceof Element||e instanceof HTMLElement)}e.exports={getGraphDiv:function(e){var t;if("string"==typeof e){if(null===(t=document.getElementById(e)))throw new Error("No DOM element with id '"+e+"' exists on the page.");return t}if(null==e)throw new Error("DOM element provided is null or undefined");return e},isPlotDiv:function(e){var t=r.select(e);return t.node()instanceof HTMLElement&&t.size()&&t.classed("js-plotly-plot")},removeElement:s,addStyleRule:function(e,t){l("global",e,t)},addRelatedStyleRule:l,deleteRelatedStyleRule:function(e){var t="plotly.js-style-"+e,n=document.getElementById(t);n&&s(n)},getFullTransformMatrix:function(e){var t=u(e),n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach((function(e){var t=c(e);if(t){var r=a.convertCssMatrix(t);n=o.multiply(n,n,r)}})),n},getElementTransformMatrix:c,getElementAndAncestors:u,equalDomRects:function(e,t){return e&&t&&e.top===t.top&&e.left===t.left&&e.right===t.right&&e.bottom===t.bottom}}},76246:(e,t,n)=>{"use strict";var r=n(74815).EventEmitter,i={init:function(e){if(e._ev instanceof r)return e;var t=new r,n=new r;return e._ev=t,e._internalEv=n,e.on=t.on.bind(t),e.once=t.once.bind(t),e.removeListener=t.removeListener.bind(t),e.removeAllListeners=t.removeAllListeners.bind(t),e._internalOn=n.on.bind(n),e._internalOnce=n.once.bind(n),e._removeInternalListener=n.removeListener.bind(n),e._removeAllInternalListeners=n.removeAllListeners.bind(n),e.emit=function(r,i){"undefined"!=typeof jQuery&&jQuery(e).trigger(r,i),t.emit(r,i),n.emit(r,i)},e},triggerHandler:function(e,t,n){var r,i;"undefined"!=typeof jQuery&&(r=jQuery(e).triggerHandler(t,n));var a=e._ev;if(!a)return r;var o,s=a._events[t];if(!s)return r;function l(e){return e.listener?(a.removeListener(t,e.listener),e.fired?void 0:(e.fired=!0,e.listener.apply(a,[n]))):e.apply(a,[n])}for(s=Array.isArray(s)?s:[s],o=0;o<s.length-1;o++)l(s[o]);return i=l(s[o]),void 0!==r?r:i},purge:function(e){return delete e._ev,delete e.on,delete e.once,delete e.removeListener,delete e.removeAllListeners,delete e.emit,delete e._ev,delete e._internalEv,delete e._internalOn,delete e._internalOnce,delete e._removeInternalListener,delete e._removeAllInternalListeners,e}};e.exports=i},86395:(e,t,n)=>{"use strict";var r=n(77192),i=Array.isArray;function a(e,t,n,o){var s,l,c,u,f,d,h,p=e[0],m=e.length;if(2===m&&i(p)&&i(e[1])&&0===p.length){if(h=function(e,t){var n,r;for(n=0;n<e.length;n++){if(null!==(r=e[n])&&"object"==typeof r)return!1;void 0!==r&&(t[n]=r)}return!0}(e[1],p),h)return p;p.splice(0,p.length)}for(var g=1;g<m;g++)for(l in s=e[g])c=p[l],u=s[l],o&&i(u)?p[l]=u:t&&u&&(r(u)||(f=i(u)))?(f?(f=!1,d=c&&i(c)?c:[]):d=c&&r(c)?c:{},p[l]=a([d,u],t,n,o)):(void 0!==u||n)&&(p[l]=u);return p}t.extendFlat=function(){return a(arguments,!1,!1,!1)},t.extendDeep=function(){return a(arguments,!0,!1,!1)},t.extendDeepAll=function(){return a(arguments,!0,!0,!1)},t.extendDeepNoArrays=function(){return a(arguments,!0,!1,!0)}},46423:e=>{"use strict";e.exports=function(e){for(var t={},n=[],r=0,i=0;i<e.length;i++){var a=e[i];1!==t[a]&&(t[a]=1,n[r++]=a)}return n}},36972:e=>{"use strict";function t(e){return!0===e.visible}function n(e){var t=e[0].trace;return!0===t.visible&&0!==t._length}e.exports=function(e){for(var r,i=(r=e,Array.isArray(r)&&Array.isArray(r[0])&&r[0][0]&&r[0][0].trace?n:t),a=[],o=0;o<e.length;o++){var s=e[o];i(s)&&a.push(s)}return a}},18509:(e,t,n)=>{"use strict";var r,i,a,o=n(8295).mod;function s(e,t,n,r,i,a,o,s){var l=n-e,c=i-e,u=o-i,f=r-t,d=a-t,h=s-a,p=l*h-u*f;if(0===p)return null;var m=(c*h-u*d)/p,g=(c*f-l*d)/p;return g<0||g>1||m<0||m>1?null:{x:e+l*m,y:t+f*m}}function l(e,t,n,r,i){var a=r*e+i*t;if(a<0)return r*r+i*i;if(a>n){var o=r-e,s=i-t;return o*o+s*s}var l=r*t-i*e;return l*l/n}t.segmentsIntersect=s,t.segmentDistance=function(e,t,n,r,i,a,o,c){if(s(e,t,n,r,i,a,o,c))return 0;var u=n-e,f=r-t,d=o-i,h=c-a,p=u*u+f*f,m=d*d+h*h,g=Math.min(l(u,f,p,i-e,a-t),l(u,f,p,o-e,c-t),l(d,h,m,e-i,t-a),l(d,h,m,n-i,r-a));return Math.sqrt(g)},t.getTextLocation=function(e,t,n,s){if(e===i&&s===a||(r={},i=e,a=s),r[n])return r[n];var l=e.getPointAtLength(o(n-s/2,t)),c=e.getPointAtLength(o(n+s/2,t)),u=Math.atan((c.y-l.y)/(c.x-l.x)),f=e.getPointAtLength(o(n,t)),d={x:(4*f.x+l.x+c.x)/6,y:(4*f.y+l.y+c.y)/6,theta:u};return r[n]=d,d},t.clearLocationCache=function(){i=null},t.getVisibleSegment=function(e,t,n){var r,i,a=t.left,o=t.right,s=t.top,l=t.bottom,c=0,u=e.getTotalLength(),f=u;function d(t){var n=e.getPointAtLength(t);0===t?r=n:t===u&&(i=n);var c=n.x<a?a-n.x:n.x>o?n.x-o:0,f=n.y<s?s-n.y:n.y>l?n.y-l:0;return Math.sqrt(c*c+f*f)}for(var h=d(c);h;){if((c+=h+n)>f)return;h=d(c)}for(h=d(f);h;){if(c>(f-=h+n))return;h=d(f)}return{min:c,max:f,len:f-c,total:u,isClosed:0===c&&f===u&&Math.abs(r.x-i.x)<.1&&Math.abs(r.y-i.y)<.1}},t.findPointOnPath=function(e,t,n,r){for(var i,a,o,s=(r=r||{}).pathLength||e.getTotalLength(),l=r.tolerance||.001,c=r.iterationLimit||30,u=e.getPointAtLength(0)[n]>e.getPointAtLength(s)[n]?-1:1,f=0,d=0,h=s;f<c;){if(i=(d+h)/2,o=(a=e.getPointAtLength(i))[n]-t,Math.abs(o)<l)return a;u*o>0?h=i:d=i,f++}return a}},21696:(e,t,n)=>{"use strict";var r=n(5605),i=n(3707),a=n(76302),o=n(74062),s=n(37811).defaultLine,l=n(41146).isArrayOrTypedArray,c=a(s);function u(e,t){var n=e;return n[3]*=t,n}function f(e){if(r(e))return c;var t=a(e);return t.length?t:c}function d(e){return r(e)?e:1}e.exports={formatColor:function(e,t,n){var r=e.color;r&&r._inputArray&&(r=r._inputArray);var i,s,h,p,m,g=l(r),v=l(t),y=o.extractOpts(e),b=[];if(i=void 0!==y.colorscale?o.makeColorScaleFuncFromTrace(e):f,s=g?function(e,t){return void 0===e[t]?c:a(i(e[t]))}:f,h=v?function(e,t){return void 0===e[t]?1:d(e[t])}:d,g||v)for(var x=0;x<n;x++)p=s(r,x),m=h(t,x),b[x]=u(p,m);else b=u(a(r),t);return b},parseColorScale:function(e){var t=o.extractOpts(e),n=t.colorscale;return t.reversescale&&(n=o.flipScale(t.colorscale)),n.map((function(e){var t=e[0],n=i(e[1]).toRgb();return{index:t,rgb:[n.r,n.g,n.b,n.a]}}))}}},42219:(e,t,n)=>{"use strict";var r=n(88705);function i(e){return[e]}e.exports={keyFun:function(e){return e.key},repeat:i,descend:r,wrap:i,unwrap:function(e){return e[0]}}},88705:e=>{"use strict";e.exports=function(e){return e}},23386:e=>{"use strict";e.exports=function(e,t){if(!t)return e;var n=1/Math.abs(t),r=n>1?(n*e+n*t)/n:e+t,i=String(r).length;if(i>16){var a=String(t).length;if(i>=String(e).length+a){var o=parseFloat(r).toPrecision(12);-1===o.indexOf("e+")&&(r=+o)}}return r}},56319:(e,t,n)=>{"use strict";var r=n(93268),i=n(39754).aL,a=n(43078).GP,o=n(5605),s=n(33351),l=s.FP_SAFE,c=-l,u=s.BADNUM,f=e.exports={};f.adjustFormat=function(e){return!e||/^\d[.]\df/.test(e)||/[.]\d%/.test(e)?e:"0.f"===e?"~f":/^\d%/.test(e)?"~%":/^\ds/.test(e)?"~s":!/^[~,.0$]/.test(e)&&/[&fps]/.test(e)?"~"+e:e};var d={};f.warnBadFormat=function(e){var t=String(e);d[t]||(d[t]=1,f.warn('encountered bad format: "'+t+'"'))},f.noFormat=function(e){return String(e)},f.numberFormat=function(e){var t;try{t=a(f.adjustFormat(e))}catch(t){return f.warnBadFormat(e),f.noFormat}return t},f.nestedProperty=n(19466),f.keyedContainer=n(96709),f.relativeAttr=n(17601),f.isPlainObject=n(77192),f.toLogRange=n(55521),f.relinkPrivateKeys=n(11426);var h=n(41146);f.isArrayBuffer=h.isArrayBuffer,f.isTypedArray=h.isTypedArray,f.isArrayOrTypedArray=h.isArrayOrTypedArray,f.isArray1D=h.isArray1D,f.ensureArray=h.ensureArray,f.concat=h.concat,f.maxRowLength=h.maxRowLength,f.minRowLength=h.minRowLength;var p=n(8295);f.mod=p.mod,f.modHalf=p.modHalf;var m=n(13890);f.valObjectMeta=m.valObjectMeta,f.coerce=m.coerce,f.coerce2=m.coerce2,f.coerceFont=m.coerceFont,f.coercePattern=m.coercePattern,f.coerceHoverinfo=m.coerceHoverinfo,f.coerceSelectionMarkerOpacity=m.coerceSelectionMarkerOpacity,f.validate=m.validate;var g=n(9986);f.dateTime2ms=g.dateTime2ms,f.isDateTime=g.isDateTime,f.ms2DateTime=g.ms2DateTime,f.ms2DateTimeLocal=g.ms2DateTimeLocal,f.cleanDate=g.cleanDate,f.isJSDate=g.isJSDate,f.formatDate=g.formatDate,f.incrementMonth=g.incrementMonth,f.dateTick0=g.dateTick0,f.dfltRange=g.dfltRange,f.findExactDates=g.findExactDates,f.MIN_MS=g.MIN_MS,f.MAX_MS=g.MAX_MS;var v=n(42175);f.findBin=v.findBin,f.sorterAsc=v.sorterAsc,f.sorterDes=v.sorterDes,f.distinctVals=v.distinctVals,f.roundUp=v.roundUp,f.sort=v.sort,f.findIndexOfMin=v.findIndexOfMin,f.sortObjectKeys=n(35428);var y=n(18948);f.aggNums=y.aggNums,f.len=y.len,f.mean=y.mean,f.geometricMean=y.geometricMean,f.median=y.median,f.midRange=y.midRange,f.variance=y.variance,f.stdev=y.stdev,f.interp=y.interp;var b=n(74158);f.init2dArray=b.init2dArray,f.transposeRagged=b.transposeRagged,f.dot=b.dot,f.translationMatrix=b.translationMatrix,f.rotationMatrix=b.rotationMatrix,f.rotationXYMatrix=b.rotationXYMatrix,f.apply3DTransform=b.apply3DTransform,f.apply2DTransform=b.apply2DTransform,f.apply2DTransform2=b.apply2DTransform2,f.convertCssMatrix=b.convertCssMatrix,f.inverseTransformMatrix=b.inverseTransformMatrix;var x=n(12587);f.deg2rad=x.deg2rad,f.rad2deg=x.rad2deg,f.angleDelta=x.angleDelta,f.angleDist=x.angleDist,f.isFullCircle=x.isFullCircle,f.isAngleInsideSector=x.isAngleInsideSector,f.isPtInsideSector=x.isPtInsideSector,f.pathArc=x.pathArc,f.pathSector=x.pathSector,f.pathAnnulus=x.pathAnnulus;var _=n(38688);f.isLeftAnchor=_.isLeftAnchor,f.isCenterAnchor=_.isCenterAnchor,f.isRightAnchor=_.isRightAnchor,f.isTopAnchor=_.isTopAnchor,f.isMiddleAnchor=_.isMiddleAnchor,f.isBottomAnchor=_.isBottomAnchor;var w=n(18509);f.segmentsIntersect=w.segmentsIntersect,f.segmentDistance=w.segmentDistance,f.getTextLocation=w.getTextLocation,f.clearLocationCache=w.clearLocationCache,f.getVisibleSegment=w.getVisibleSegment,f.findPointOnPath=w.findPointOnPath;var A=n(86395);f.extendFlat=A.extendFlat,f.extendDeep=A.extendDeep,f.extendDeepAll=A.extendDeepAll,f.extendDeepNoArrays=A.extendDeepNoArrays;var k=n(9954);f.log=k.log,f.warn=k.warn,f.error=k.error;var E=n(11800);f.counterRegex=E.counter;var T=n(78503);f.throttle=T.throttle,f.throttleDone=T.done,f.clearThrottle=T.clear;var M=n(32159);function S(e){var t={};for(var n in e)for(var r=e[n],i=0;i<r.length;i++)t[r[i]]=+n;return t}f.getGraphDiv=M.getGraphDiv,f.isPlotDiv=M.isPlotDiv,f.removeElement=M.removeElement,f.addStyleRule=M.addStyleRule,f.addRelatedStyleRule=M.addRelatedStyleRule,f.deleteRelatedStyleRule=M.deleteRelatedStyleRule,f.getFullTransformMatrix=M.getFullTransformMatrix,f.getElementTransformMatrix=M.getElementTransformMatrix,f.getElementAndAncestors=M.getElementAndAncestors,f.equalDomRects=M.equalDomRects,f.clearResponsive=n(17343),f.preserveDrawingBuffer=n(81443),f.makeTraceGroups=n(80574),f._=n(29636),f.notifier=n(81393),f.filterUnique=n(46423),f.filterVisible=n(36972),f.pushUnique=n(42945),f.increment=n(23386),f.cleanNumber=n(728),f.ensureNumber=function(e){return o(e)?(e=Number(e))>l||e<c?u:e:u},f.isIndex=function(e,t){return!(void 0!==t&&e>=t)&&(o(e)&&e>=0&&e%1==0)},f.noop=n(48267),f.identity=n(88705),f.repeat=function(e,t){for(var n=new Array(t),r=0;r<t;r++)n[r]=e;return n},f.swapAttrs=function(e,t,n,r){n||(n="x"),r||(r="y");for(var i=0;i<t.length;i++){var a=t[i],o=f.nestedProperty(e,a.replace("?",n)),s=f.nestedProperty(e,a.replace("?",r)),l=o.get();o.set(s.get()),s.set(l)}},f.raiseToTop=function(e){e.parentNode.appendChild(e)},f.cancelTransition=function(e){return e.transition().duration(0)},f.constrain=function(e,t,n){return t>n?Math.max(n,Math.min(t,e)):Math.max(t,Math.min(n,e))},f.bBoxIntersect=function(e,t,n){return n=n||0,e.left<=t.right+n&&t.left<=e.right+n&&e.top<=t.bottom+n&&t.top<=e.bottom+n},f.simpleMap=function(e,t,n,r,i){for(var a=e.length,o=new Array(a),s=0;s<a;s++)o[s]=t(e[s],n,r,i);return o},f.randstr=function e(t,n,r,i){if(r||(r=16),void 0===n&&(n=24),n<=0)return"0";var a,o,s=Math.log(Math.pow(2,n))/Math.log(r),l="";for(a=2;s===1/0;a*=2)s=Math.log(Math.pow(2,n/a))/Math.log(r)*a;var c=s-Math.floor(s);for(a=0;a<Math.floor(s);a++)l=Math.floor(Math.random()*r).toString(r)+l;c&&(o=Math.pow(r,c),l=Math.floor(Math.random()*o).toString(r)+l);var u=parseInt(l,r);return t&&t[l]||u!==1/0&&u>=Math.pow(2,n)?i>10?(f.warn("randstr failed uniqueness"),l):e(t,n,r,(i||0)+1):l},f.OptionControl=function(e,t){e||(e={}),t||(t="opt");var n={optionList:[],_newoption:function(r){r[t]=e,n[r.name]=r,n.optionList.push(r)}};return n["_"+t]=e,n},f.smooth=function(e,t){if((t=Math.round(t)||0)<2)return e;var n,r,i,a,o=e.length,s=2*o,l=2*t-1,c=new Array(l),u=new Array(o);for(n=0;n<l;n++)c[n]=(1-Math.cos(Math.PI*(n+1)/t))/(2*t);for(n=0;n<o;n++){for(a=0,r=0;r<l;r++)(i=n+r+1-t)<-o?i-=s*Math.round(i/s):i>=s&&(i-=s*Math.floor(i/s)),i<0?i=-1-i:i>=o&&(i=s-1-i),a+=e[i]*c[r];u[n]=a}return u},f.syncOrAsync=function(e,t,n){var r;function i(){return f.syncOrAsync(e,t,n)}for(;e.length;)if((r=(0,e.splice(0,1)[0])(t))&&r.then)return r.then(i);return n&&n(t)},f.stripTrailingSlash=function(e){return"/"===e.substr(-1)?e.substr(0,e.length-1):e},f.noneOrAll=function(e,t,n){if(e){var r,i=!1,a=!0;for(r=0;r<n.length;r++)null!=e[n[r]]?i=!0:a=!1;if(i&&!a)for(r=0;r<n.length;r++)e[n[r]]=t[n[r]]}},f.mergeArray=function(e,t,n,r){var i="function"==typeof r;if(f.isArrayOrTypedArray(e))for(var a=Math.min(e.length,t.length),o=0;o<a;o++){var s=e[o];t[o][n]=i?r(s):s}},f.mergeArrayCastPositive=function(e,t,n){return f.mergeArray(e,t,n,(function(e){var t=+e;return isFinite(t)&&t>0?t:0}))},f.fillArray=function(e,t,n,r){if(r=r||f.identity,f.isArrayOrTypedArray(e))for(var i=0;i<t.length;i++)t[i][n]=r(e[i])},f.castOption=function(e,t,n,r){r=r||f.identity;var i=f.nestedProperty(e,n).get();return f.isArrayOrTypedArray(i)?Array.isArray(t)&&f.isArrayOrTypedArray(i[t[0]])?r(i[t[0]][t[1]]):r(i[t]):i},f.extractOption=function(e,t,n,r){if(n in e)return e[n];var i=f.nestedProperty(t,r).get();return Array.isArray(i)?void 0:i},f.tagSelected=function(e,t,n){var r,i,a=t.selectedpoints,o=t._indexToPoints;o&&(r=S(o));for(var s=0;s<a.length;s++){var l=a[s];if(f.isIndex(l)||f.isArrayOrTypedArray(l)&&f.isIndex(l[0])&&f.isIndex(l[1])){var c=r?r[l]:l,u=n?n[c]:c;void 0!==(i=u)&&i<e.length&&(e[u].selected=1)}}},f.selIndices2selPoints=function(e){var t=e.selectedpoints,n=e._indexToPoints;if(n){for(var r=S(n),i=[],a=0;a<t.length;a++){var o=t[a];if(f.isIndex(o)){var s=r[o];f.isIndex(s)&&i.push(s)}}return i}return t},f.getTargetArray=function(e,t){var n=t.target;if("string"==typeof n&&n){var r=f.nestedProperty(e,n).get();return!!f.isArrayOrTypedArray(r)&&r}return!!f.isArrayOrTypedArray(n)&&n},f.minExtend=function e(t,n,r){var i={};"object"!=typeof n&&(n={});var a,o,s,l="pieLike"===r?-1:3,c=Object.keys(t);for(a=0;a<c.length;a++)s=t[o=c[a]],"_"!==o.charAt(0)&&"function"!=typeof s&&("module"===o?i[o]=s:Array.isArray(s)?i[o]="colorscale"===o||-1===l?s.slice():s.slice(0,l):f.isTypedArray(s)?i[o]=-1===l?s.subarray():s.subarray(0,l):i[o]=s&&"object"==typeof s?e(t[o],n[o],r):s);for(c=Object.keys(n),a=0;a<c.length;a++)"object"==typeof(s=n[o=c[a]])&&o in i&&"object"==typeof i[o]||(i[o]=s);return i},f.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},f.containsAny=function(e,t){for(var n=0;n<t.length;n++)if(-1!==e.indexOf(t[n]))return!0;return!1},f.isIE=function(){return void 0!==window.navigator.msSaveBlob};var C=/Version\/[\d\.]+.*Safari/;f.isSafari=function(){return C.test(window.navigator.userAgent)};var O=/iPad|iPhone|iPod/;f.isIOS=function(){return O.test(window.navigator.userAgent)};var R=/Firefox\/(\d+)\.\d+/;f.getFirefoxVersion=function(){var e=R.exec(window.navigator.userAgent);if(e&&2===e.length){var t=parseInt(e[1]);if(!isNaN(t))return t}return null},f.isD3Selection=function(e){return e instanceof r.selection},f.ensureSingle=function(e,t,n,r){var i=e.select(t+(n?"."+n:""));if(i.size())return i;var a=e.append(t);return n&&a.classed(n,!0),r&&a.call(r),a},f.ensureSingleById=function(e,t,n,r){var i=e.select(t+"#"+n);if(i.size())return i;var a=e.append(t).attr("id",n);return r&&a.call(r),a},f.objectFromPath=function(e,t){for(var n,r=e.split("."),i=n={},a=0;a<r.length;a++){var o=r[a],s=null,l=r[a].match(/(.*)\[([0-9]+)\]/);l?(o=l[1],s=l[2],n=n[o]=[],a===r.length-1?n[s]=t:n[s]={},n=n[s]):(a===r.length-1?n[o]=t:n[o]={},n=n[o])}return i};var N=/^([^\[\.]+)\.(.+)?/,L=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function D(e){return"__"===e.slice(0,2)}f.expandObjectPaths=function(e){var t,n,r,i,a,o,s;if("object"==typeof e&&!Array.isArray(e))for(n in e)if(e.hasOwnProperty(n))if(t=n.match(N)){if(i=e[n],D(r=t[1]))continue;delete e[n],e[r]=f.extendDeepNoArrays(e[r]||{},f.objectFromPath(n,f.expandObjectPaths(i))[r])}else if(t=n.match(L)){if(i=e[n],D(r=t[1]))continue;if(a=parseInt(t[2]),delete e[n],e[r]=e[r]||[],"."===t[3])s=t[4],o=e[r][a]=e[r][a]||{},f.extendDeepNoArrays(o,f.objectFromPath(s,f.expandObjectPaths(i)));else{if(D(r))continue;e[r][a]=f.expandObjectPaths(i)}}else{if(D(n))continue;e[n]=f.expandObjectPaths(e[n])}return e},f.numSeparate=function(e,t,n){if(n||(n=!1),"string"!=typeof t||0===t.length)throw new Error("Separator string required for formatting!");"number"==typeof e&&(e=String(e));var r=/(\d+)(\d{3})/,i=t.charAt(0),a=t.charAt(1),o=e.split("."),s=o[0],l=o.length>1?i+o[1]:"";if(a&&(o.length>1||s.length>4||n))for(;r.test(s);)s=s.replace(r,"$1"+a+"$2");return s+l},f.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var P=/^\w*$/;f.templateString=function(e,t){var n={};return e.replace(f.TEMPLATE_STRING_REGEX,(function(e,r){var i;return P.test(r)?i=t[r]:(n[r]=n[r]||f.nestedProperty(t,r).get,i=n[r]()),f.isValidTextValue(i)?i:""}))};var I={max:10,count:0,name:"hovertemplate"};f.hovertemplateString=function(){return U.apply(I,arguments)};var F={max:10,count:0,name:"texttemplate"};f.texttemplateString=function(){return U.apply(F,arguments)};var z=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/;var j={max:10,count:0,name:"texttemplate",parseMultDiv:!0};f.texttemplateStringForShapes=function(){return U.apply(j,arguments)};var B=/^[:|\|]/;function U(e,t,n){var r=this,a=arguments;t||(t={});var o={};return e.replace(f.TEMPLATE_STRING_REGEX,(function(e,s,l){var c="_xother"===s||"_yother"===s,u="_xother_"===s||"_yother_"===s,d="xother_"===s||"yother_"===s,h="xother"===s||"yother"===s||c||d||u,p=s;(c||u)&&(p=p.substring(1)),(d||u)&&(p=p.substring(0,p.length-1));var m,g,v,y=null,b=null;if(r.parseMultDiv){var x=function(e){var t=e.match(z);return t?{key:t[1],op:t[2],number:Number(t[3])}:{key:e,op:null,number:null}}(p);p=x.key,y=x.op,b=x.number}if(h){if(void 0===(m=t[p]))return""}else for(v=3;v<a.length;v++)if(g=a[v]){if(g.hasOwnProperty(p)){m=g[p];break}if(P.test(p)||(m=f.nestedProperty(g,p).get(),(m=o[p]||f.nestedProperty(g,p).get())&&(o[p]=m)),void 0!==m)break}if(void 0!==m&&("*"===y&&(m*=b),"/"===y&&(m/=b)),void 0===m&&r)return r.count<r.max&&(f.warn("Variable '"+p+"' in "+r.name+" could not be found!"),m=e),r.count===r.max&&f.warn("Too many "+r.name+" warnings - additional warnings will be suppressed"),r.count++,e;if(l){var _;if(":"===l[0]&&(_=n?n.numberFormat:f.numberFormat,""!==m&&(m=_(l.replace(B,""))(m))),"|"===l[0]){_=n?n.timeFormat:i;var w=f.dateTime2ms(m);m=f.formatDate(w,l.replace(B,""),!1,_)}}else{var A=p+"Label";t.hasOwnProperty(A)&&(m=t[A])}return h&&(m="("+m+")",(c||u)&&(m=" "+m),(d||u)&&(m+=" ")),m}))}f.subplotSort=function(e,t){for(var n=Math.min(e.length,t.length)+1,r=0,i=0,a=0;a<n;a++){var o=e.charCodeAt(a)||0,s=t.charCodeAt(a)||0,l=o>=48&&o<=57,c=s>=48&&s<=57;if(l&&(r=10*r+o-48),c&&(i=10*i+s-48),!l||!c){if(r!==i)return r-i;if(o!==s)return o-s}}return i-r};var $=2e9;f.seedPseudoRandom=function(){$=2e9},f.pseudoRandom=function(){var e=$;return $=(69069*$+1)%4294967296,Math.abs($-e)<429496729?f.pseudoRandom():$/4294967296},f.fillText=function(e,t,n){var r=Array.isArray(n)?function(e){n.push(e)}:function(e){n.text=e},i=f.extractOption(e,t,"htx","hovertext");if(f.isValidTextValue(i))return r(i);var a=f.extractOption(e,t,"tx","text");return f.isValidTextValue(a)?r(a):void 0},f.isValidTextValue=function(e){return e||0===e},f.formatPercent=function(e,t){t=t||0;for(var n=(Math.round(100*e*Math.pow(10,t))*Math.pow(.1,t)).toFixed(t)+"%",r=0;r<t;r++)-1!==n.indexOf(".")&&(n=(n=n.replace("0%","%")).replace(".%","%"));return n},f.isHidden=function(e){var t=window.getComputedStyle(e).display;return!t||"none"===t},f.strTranslate=function(e,t){return e||t?"translate("+e+","+t+")":""},f.strRotate=function(e){return e?"rotate("+e+")":""},f.strScale=function(e){return 1!==e?"scale("+e+")":""},f.getTextTransform=function(e){var t=e.noCenter,n=e.textX,r=e.textY,i=e.targetX,a=e.targetY,o=e.anchorX||0,s=e.anchorY||0,l=e.rotate,c=e.scale;return c?c>1&&(c=1):c=0,f.strTranslate(i-c*(n+o),a-c*(r+s))+f.strScale(c)+(l?"rotate("+l+(t?"":" "+n+" "+r)+")":"")},f.setTransormAndDisplay=function(e,t){e.attr("transform",f.getTextTransform(t)),e.style("display",t.scale?null:"none")},f.ensureUniformFontSize=function(e,t){var n=f.extendFlat({},t);return n.size=Math.max(t.size,e._fullLayout.uniformtext.minsize||0),n},f.join2=function(e,t,n){var r=e.length;return r>1?e.slice(0,-1).join(t)+n+e[r-1]:e.join(t)},f.bigFont=function(e){return Math.round(1.2*e)};var q=f.getFirefoxVersion(),H=null!==q&&q<86;f.getPositionFromD3Event=function(){return H?[r.event.layerX,r.event.layerY]:[r.event.offsetX,r.event.offsetY]}},77192:e=>{"use strict";e.exports=function(e){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(e):"[object Object]"===Object.prototype.toString.call(e)&&Object.getPrototypeOf(e).hasOwnProperty("hasOwnProperty")}},96709:(e,t,n)=>{"use strict";var r=n(19466),i=/^\w*$/;e.exports=function(e,t,n,a){var o,s,l;n=n||"name",a=a||"value";var c={};t&&t.length?(l=r(e,t),s=l.get()):s=e,t=t||"";var u={};if(s)for(o=0;o<s.length;o++)u[s[o][n]]=o;var f=i.test(a),d={set:function(e,t){var i=null===t?4:0;if(!s){if(!l||4===i)return;s=[],l.set(s)}var o=u[e];if(void 0===o){if(4===i)return;i|=3,o=s.length,u[e]=o}else t!==(f?s[o][a]:r(s[o],a).get())&&(i|=2);var h=s[o]=s[o]||{};return h[n]=e,f?h[a]=t:r(h,a).set(t),null!==t&&(i&=-5),c[o]=c[o]|i,d},get:function(e){if(s){var t=u[e];return void 0===t?void 0:f?s[t][a]:r(s[t],a).get()}},rename:function(e,t){var r=u[e];return void 0===r||(c[r]=1|c[r],u[t]=r,delete u[e],s[r][n]=t),d},remove:function(e){var t=u[e];if(void 0===t)return d;var i=s[t];if(Object.keys(i).length>2)return c[t]=2|c[t],d.set(e,null);if(f){for(o=t;o<s.length;o++)c[o]=3|c[o];for(o=t;o<s.length;o++)u[s[o][n]]--;s.splice(t,1),delete u[e]}else r(i,a).set(null),c[t]=6|c[t];return d},constructUpdate:function(){for(var e,i,o={},l=Object.keys(c),u=0;u<l.length;u++)i=l[u],e=t+"["+i+"]",s[i]?(1&c[i]&&(o[e+"."+n]=s[i][n]),2&c[i]&&(o[e+"."+a]=f?4&c[i]?null:s[i][a]:4&c[i]?null:r(s[i],a).get())):o[e]=null;return o}};return d}},29636:(e,t,n)=>{"use strict";var r=n(3360);e.exports=function(e,t){for(var n=e._context.locale,i=0;i<2;i++){for(var a=e._context.locales,o=0;o<2;o++){var s=(a[n]||{}).dictionary;if(s){var l=s[t];if(l)return l}a=r.localeRegistry}var c=n.split("-")[0];if(c===n)break;n=c}return t}},9954:(e,t,n)=>{"use strict";var r=n(78058).dfltConfig,i=n(81393),a=e.exports={};a.log=function(){var e;if(r.logging>1){var t=["LOG:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.trace.apply(console,t)}if(r.notifyOnLogging>1){var n=[];for(e=0;e<arguments.length;e++)n.push(arguments[e]);i(n.join("<br>"),"long")}},a.warn=function(){var e;if(r.logging>0){var t=["WARN:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.trace.apply(console,t)}if(r.notifyOnLogging>0){var n=[];for(e=0;e<arguments.length;e++)n.push(arguments[e]);i(n.join("<br>"),"stick")}},a.error=function(){var e;if(r.logging>0){var t=["ERROR:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.error.apply(console,t)}if(r.notifyOnLogging>0){var n=[];for(e=0;e<arguments.length;e++)n.push(arguments[e]);i(n.join("<br>"),"stick")}}},80574:(e,t,n)=>{"use strict";var r=n(93268);e.exports=function(e,t,n){var i=e.selectAll("g."+n.replace(/\s/g,".")).data(t,(function(e){return e[0].trace.uid}));i.exit().remove(),i.enter().append("g").attr("class",n),i.order();var a=e.classed("rangeplot")?"nodeRangePlot3":"node3";return i.each((function(e){e[0][a]=r.select(this)})),i}},74158:(e,t,n)=>{"use strict";var r=n(2699);t.init2dArray=function(e,t){for(var n=new Array(e),r=0;r<e;r++)n[r]=new Array(t);return n},t.transposeRagged=function(e){var t,n,r=0,i=e.length;for(t=0;t<i;t++)r=Math.max(r,e[t].length);var a=new Array(r);for(t=0;t<r;t++)for(a[t]=new Array(i),n=0;n<i;n++)a[t][n]=e[n][t];return a},t.dot=function(e,n){if(!e.length||!n.length||e.length!==n.length)return null;var r,i,a=e.length;if(e[0].length)for(r=new Array(a),i=0;i<a;i++)r[i]=t.dot(e[i],n);else if(n[0].length){var o=t.transposeRagged(n);for(r=new Array(o.length),i=0;i<o.length;i++)r[i]=t.dot(e,o[i])}else for(r=0,i=0;i<a;i++)r+=e[i]*n[i];return r},t.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]},t.rotationMatrix=function(e){var t=e*Math.PI/180;return[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]},t.rotationXYMatrix=function(e,n,r){return t.dot(t.dot(t.translationMatrix(n,r),t.rotationMatrix(e)),t.translationMatrix(-n,-r))},t.apply3DTransform=function(e){return function(){var n=arguments,r=1===arguments.length?n[0]:[n[0],n[1],n[2]||0];return t.dot(e,[r[0],r[1],r[2],1]).slice(0,3)}},t.apply2DTransform=function(e){return function(){var n=arguments;3===n.length&&(n=n[0]);var r=1===arguments.length?n[0]:[n[0],n[1]];return t.dot(e,[r[0],r[1],1]).slice(0,2)}},t.apply2DTransform2=function(e){var n=t.apply2DTransform(e);return function(e){return n(e.slice(0,2)).concat(n(e.slice(2,4)))}},t.convertCssMatrix=function(e){if(e){var t=e.length;if(16===t)return e;if(6===t)return[e[0],e[1],0,0,e[2],e[3],0,0,0,0,1,0,e[4],e[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},t.inverseTransformMatrix=function(e){var t=[];return r.invert(t,e),[[t[0],t[1],t[2],t[3]],[t[4],t[5],t[6],t[7]],[t[8],t[9],t[10],t[11]],[t[12],t[13],t[14],t[15]]]}},8295:e=>{"use strict";e.exports={mod:function(e,t){var n=e%t;return n<0?n+t:n},modHalf:function(e,t){return Math.abs(e)>t/2?e-Math.round(e/t)*t:e}}},19466:(e,t,n)=>{"use strict";var r=n(5605),i=n(41146).isArrayOrTypedArray;function a(e,t){return function(){var n,r,o,s,l,c=e;for(s=0;s<t.length-1;s++){if(-1===(n=t[s])){for(r=!0,o=[],l=0;l<c.length;l++)o[l]=a(c[l],t.slice(s+1))(),o[l]!==o[0]&&(r=!1);return r?o[0]:o}if("number"==typeof n&&!i(c))return;if("object"!=typeof(c=c[n])||null===c)return}if("object"==typeof c&&null!==c&&null!==(o=c[t[s]]))return o}}e.exports=function(e,t){if(r(t))t=String(t);else if("string"!=typeof t||"[-1]"===t.substr(t.length-4))throw"bad property string";var n,i,o,s,c=t.split(".");for(s=0;s<c.length;s++)if("__"===String(c[s]).slice(0,2))throw"bad property string";for(s=0;s<c.length;){if(n=String(c[s]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(n[1])c[s]=n[1];else{if(0!==s)throw"bad property string";c.splice(0,1)}for(i=n[2].substr(1,n[2].length-2).split("]["),o=0;o<i.length;o++)s++,c.splice(s,0,Number(i[o]))}s++}return"object"!=typeof e?function(e,t,n){return{set:function(){throw"bad container"},get:function(){},astr:t,parts:n,obj:e}}(e,t,c):{set:l(e,c,t),get:a(e,c),astr:t,parts:c,obj:e}};var o=/(^|\.)args\[/;function s(e,t){return void 0===e||null===e&&!t.match(o)}function l(e,t,n){return function(r){var a,o,l=e,d="",h=[[e,d]],p=s(r,n);for(o=0;o<t.length-1;o++){if("number"==typeof(a=t[o])&&!i(l))throw"array index but container is not an array";if(-1===a){if(p=!u(l,t.slice(o+1),r,n))break;return}if(!f(l,a,t[o+1],p))break;if("object"!=typeof(l=l[a])||null===l)throw"container is not an object";d=c(d,a),h.push([l,d])}if(p){if(o===t.length-1&&(delete l[t[o]],Array.isArray(l)&&+t[o]==l.length-1))for(;l.length&&void 0===l[l.length-1];)l.pop()}else l[t[o]]=r}}function c(e,t){var n=t;return r(t)?n="["+t+"]":e&&(n="."+t),e+n}function u(e,t,n,r){var a,o=i(n),c=!0,u=n,d=r.replace("-1",0),h=!o&&s(n,d),p=t[0];for(a=0;a<e.length;a++)d=r.replace("-1",a),o&&(h=s(u=n[a%n.length],d)),h&&(c=!1),f(e,a,p,h)&&l(e[a],t,r.replace("-1",a))(u);return c}function f(e,t,n,r){if(void 0===e[t]){if(r)return!1;e[t]="number"==typeof n?[]:{}}return!0}},48267:e=>{"use strict";e.exports=function(){}},81393:(e,t,n)=>{"use strict";var r=n(93268),i=n(5605),a=[];e.exports=function(e,t){if(-1===a.indexOf(e)){a.push(e);var n=1e3;i(t)?n=t:"long"===t&&(n=3e3);var o=r.select("body").selectAll(".plotly-notifier").data([0]);o.enter().append("div").classed("plotly-notifier",!0),o.selectAll(".notifier-note").data(a).enter().append("div").classed("notifier-note",!0).style("opacity",0).each((function(e){var i=r.select(this);i.append("button").classed("notifier-close",!0).html("&times;").on("click",(function(){i.transition().call(s)}));for(var a=i.append("p"),o=e.split(/<br\s*\/?>/g),l=0;l<o.length;l++)l&&a.append("br"),a.append("span").text(o[l]);"stick"===t?i.transition().duration(350).style("opacity",1):i.transition().duration(700).style("opacity",1).transition().delay(n).call(s)}))}function s(e){e.duration(700).style("opacity",0).each("end",(function(e){var t=a.indexOf(e);-1!==t&&a.splice(t,1),r.select(this).remove()}))}}},4336:(e,t,n)=>{"use strict";var r=n(47281),i="data-savedcursor";e.exports=function(e,t){var n=e.attr(i);if(t){if(!n){for(var a=(e.attr("class")||"").split(" "),o=0;o<a.length;o++){var s=a[o];0===s.indexOf("cursor-")&&e.attr(i,s.substr(7)).classed(s,!1)}e.attr(i)||e.attr(i,"!!")}r(e,t)}else n&&(e.attr(i,null),"!!"===n?r(e):r(e,n))}},55549:(e,t,n)=>{"use strict";var r=n(74158).dot,i=n(33351).BADNUM,a=e.exports={};a.tester=function(e){var t,n=e.slice(),r=n[0][0],a=r,o=n[0][1],s=o;for(n[n.length-1][0]===n[0][0]&&n[n.length-1][1]===n[0][1]||n.push(n[0]),t=1;t<n.length;t++)r=Math.min(r,n[t][0]),a=Math.max(a,n[t][0]),o=Math.min(o,n[t][1]),s=Math.max(s,n[t][1]);var l,c=!1;5===n.length&&(n[0][0]===n[1][0]?n[2][0]===n[3][0]&&n[0][1]===n[3][1]&&n[1][1]===n[2][1]&&(c=!0,l=function(e){return e[0]===n[0][0]}):n[0][1]===n[1][1]&&n[2][1]===n[3][1]&&n[0][0]===n[3][0]&&n[1][0]===n[2][0]&&(c=!0,l=function(e){return e[1]===n[0][1]}));var u=!0,f=n[0];for(t=1;t<n.length;t++)if(f[0]!==n[t][0]||f[1]!==n[t][1]){u=!1;break}return{xmin:r,xmax:a,ymin:o,ymax:s,pts:n,contains:c?function(e,t){var n=e[0],c=e[1];return!(n===i||n<r||n>a||c===i||c<o||c>s)&&(!t||!l(e))}:function(e,t){var l=e[0],c=e[1];if(l===i||l<r||l>a||c===i||c<o||c>s)return!1;var u,f,d,h,p,m=n.length,g=n[0][0],v=n[0][1],y=0;for(u=1;u<m;u++)if(f=g,d=v,g=n[u][0],v=n[u][1],!(l<(h=Math.min(f,g))||l>Math.max(f,g)||c>Math.max(d,v)))if(c<Math.min(d,v))l!==h&&y++;else{if(c===(p=g===f?c:d+(l-f)*(v-d)/(g-f)))return 1!==u||!t;c<=p&&l!==h&&y++}return y%2==1},isRect:c,degenerate:u}},a.isSegmentBent=function(e,t,n,i){var a,o,s,l=e[t],c=[e[n][0]-l[0],e[n][1]-l[1]],u=r(c,c),f=Math.sqrt(u),d=[-c[1]/f,c[0]/f];for(a=t+1;a<n;a++)if(o=[e[a][0]-l[0],e[a][1]-l[1]],(s=r(o,c))<0||s>u||Math.abs(r(o,d))>i)return!0;return!1},a.filter=function(e,t){var n=[e[0]],r=0,i=0;function o(o){e.push(o);var s=n.length,l=r;n.splice(i+1);for(var c=l+1;c<e.length;c++)(c===e.length-1||a.isSegmentBent(e,l,c+1,t))&&(n.push(e[c]),n.length<s-2&&(r=c,i=n.length-1),l=c)}e.length>1&&o(e.pop());return{addPt:o,raw:e,filtered:n}}},8741:(e,t,n)=>{"use strict";var r=n(98942),i=n(24049);e.exports=function(e,t,a){var o=e._fullLayout,s=!0;return o._glcanvas.each((function(r){if(r.regl)r.regl.preloadCachedCode(a);else if(!r.pick||o._has("parcoords")){try{r.regl=i({canvas:this,attributes:{antialias:!r.pick,preserveDrawingBuffer:!0},pixelRatio:e._context.plotGlPixelRatio||n.g.devicePixelRatio,extensions:t||[],cachedCode:a||{}})}catch(e){s=!1}r.regl||(s=!1),s&&this.addEventListener("webglcontextlost",(function(t){e&&e.emit&&e.emit("plotly_webglcontextlost",{event:t,layer:r.key})}),!1)}})),s||r({container:o._glcontainer.node()}),s}},81443:(e,t,n)=>{"use strict";var r=n(5605),i=n(16182);e.exports=function(e){var t;if("string"!=typeof(t=e&&e.hasOwnProperty("userAgent")?e.userAgent:function(){var e;"undefined"!=typeof navigator&&(e=navigator.userAgent);e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]);return e}()))return!0;var n=i({ua:{headers:{"user-agent":t}},tablet:!0,featureDetect:!1});if(!n)for(var a=t.split(" "),o=1;o<a.length;o++){if(-1!==a[o].indexOf("Safari"))for(var s=o-1;s>-1;s--){var l=a[s];if("Version/"===l.substr(0,8)){var c=l.substr(8).split(".")[0];if(r(c)&&(c=+c),c>=13)return!0}}}return n}},42945:e=>{"use strict";e.exports=function(e,t){if(t instanceof RegExp){for(var n=t.toString(),r=0;r<e.length;r++)if(e[r]instanceof RegExp&&e[r].toString()===n)return e;e.push(t)}else!t&&0!==t||-1!==e.indexOf(t)||e.push(t);return e}},32008:(e,t,n)=>{"use strict";var r=n(56319),i=n(78058).dfltConfig;var a={add:function(e,t,n,r,a){var o,s;e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},s=e.undoQueue.index,e.autoplay?e.undoQueue.inSequence||(e.autoplay=!1):(!e.undoQueue.sequence||e.undoQueue.beginSequence?(o={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},e.undoQueue.queue.splice(s,e.undoQueue.queue.length-s,o),e.undoQueue.index+=1):o=e.undoQueue.queue[s-1],e.undoQueue.beginSequence=!1,o&&(o.undo.calls.unshift(t),o.undo.args.unshift(n),o.redo.calls.push(r),o.redo.args.push(a)),e.undoQueue.queue.length>i.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--))},startSequence:function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0},stopSequence:function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1},undo:function(e){var t,n;if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index<=0)){for(e.undoQueue.index--,t=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,n=0;n<t.undo.calls.length;n++)a.plotDo(e,t.undo.calls[n],t.undo.args[n]);e.undoQueue.inSequence=!1,e.autoplay=!1}},redo:function(e){var t,n;if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index>=e.undoQueue.queue.length)){for(t=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,n=0;n<t.redo.calls.length;n++)a.plotDo(e,t.redo.calls[n],t.redo.args[n]);e.undoQueue.inSequence=!1,e.autoplay=!1,e.undoQueue.index++}}};a.plotDo=function(e,t,n){e.autoplay=!0,n=function(e,t){for(var n,i=[],a=0;a<t.length;a++)n=t[a],i[a]=n===e?n:"object"==typeof n?Array.isArray(n)?r.extendDeep([],n):r.extendDeepAll({},n):n;return i}(e,n),t.apply(null,n)},e.exports=a},11800:(e,t)=>{"use strict";t.counter=function(e,t,n,r){var i=(t||"")+(n?"":"$"),a=!1===r?"":"^";return"xy"===e?new RegExp(a+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+i):new RegExp(a+e+"([2-9]|[1-9][0-9]+)?"+i)}},17601:e=>{"use strict";var t=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,n=/^[^\.\[\]]+$/;e.exports=function(e,r){for(;r;){var i=e.match(t);if(i)e=i[1];else{if(!e.match(n))throw new Error("bad relativeAttr call:"+[e,r]);e=""}if("^"!==r.charAt(0))break;r=r.slice(1)}return e&&"["!==r.charAt(0)?e+"."+r:e+r}},11426:(e,t,n)=>{"use strict";var r=n(41146).isArrayOrTypedArray,i=n(77192);e.exports=function e(t,n){for(var a in n){var o=n[a],s=t[a];if(s!==o)if("_"===a.charAt(0)||"function"==typeof o){if(a in t)continue;t[a]=o}else if(r(o)&&r(s)&&i(o[0])){if("customdata"===a||"ids"===a)continue;for(var l=Math.min(o.length,s.length),c=0;c<l;c++)s[c]!==o[c]&&i(o[c])&&i(s[c])&&e(s[c],o[c])}else i(o)&&i(s)&&(e(s,o),Object.keys(s).length||delete t[a])}}},42175:(e,t,n)=>{"use strict";var r=n(5605),i=n(9954),a=n(88705),o=n(33351).BADNUM,s=1e-9;function l(e,t){return e<t}function c(e,t){return e<=t}function u(e,t){return e>t}function f(e,t){return e>=t}t.findBin=function(e,t,n){if(r(t.start))return n?Math.ceil((e-t.start)/t.size-s)-1:Math.floor((e-t.start)/t.size+s);var a,o,d=0,h=t.length,p=0,m=h>1?(t[h-1]-t[0])/(h-1):1;for(o=m>=0?n?l:c:n?f:u,e+=m*s*(n?-1:1)*(m>=0?1:-1);d<h&&p++<100;)o(t[a=Math.floor((d+h)/2)],e)?d=a+1:h=a;return p>90&&i.log("Long binary search..."),d-1},t.sorterAsc=function(e,t){return e-t},t.sorterDes=function(e,t){return t-e},t.distinctVals=function(e){var n,r=e.slice();for(r.sort(t.sorterAsc),n=r.length-1;n>-1&&r[n]===o;n--);for(var i,a=r[n]-r[0]||1,s=a/(n||1)/1e4,l=[],c=0;c<=n;c++){var u=r[c],f=u-i;void 0===i?(l.push(u),i=u):f>s&&(a=Math.min(a,f),l.push(u),i=u)}return{vals:l,minDiff:a}},t.roundUp=function(e,t,n){for(var r,i=0,a=t.length-1,o=0,s=n?0:1,l=n?1:0,c=n?Math.ceil:Math.floor;i<a&&o++<100;)t[r=c((i+a)/2)]<=e?i=r+s:a=r-l;return t[i]},t.sort=function(e,t){for(var n=0,r=0,i=1;i<e.length;i++){var a=t(e[i],e[i-1]);if(a<0?n=1:a>0&&(r=1),n&&r)return e.sort(t)}return r?e:e.reverse()},t.findIndexOfMin=function(e,t){t=t||a;for(var n,r=1/0,i=0;i<e.length;i++){var o=t(e[i]);o<r&&(r=o,n=i)}return n}},47281:e=>{"use strict";e.exports=function(e,t){(e.attr("class")||"").split(" ").forEach((function(t){0===t.indexOf("cursor-")&&e.classed(t,!1)})),t&&e.classed("cursor-"+t,!0)}},98942:(e,t,n)=>{"use strict";var r=n(53408),i=function(){};e.exports=function(e){for(var t in e)"function"==typeof e[t]&&(e[t]=i);e.destroy=function(){e.container.parentNode.removeChild(e.container)};var n=document.createElement("div");n.className="no-webgl",n.style.cursor="pointer",n.style.fontSize="24px",n.style.color=r.defaults[0],n.style.position="absolute",n.style.left=n.style.top="0px",n.style.width=n.style.height="100%",n.style["background-color"]=r.lightLine,n.style["z-index"]=30;var a=document.createElement("p");return a.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",a.style.position="relative",a.style.top="50%",a.style.left="50%",a.style.height="30%",a.style.width="50%",a.style.margin="-15% 0 0 -25%",n.appendChild(a),e.container.appendChild(n),e.container.style.background="#FFFFFF",e.container.onclick=function(){window.open("https://get.webgl.org")},!1}},35428:e=>{"use strict";e.exports=function(e){return Object.keys(e).sort()}},18948:(e,t,n)=>{"use strict";var r=n(5605),i=n(41146).isArrayOrTypedArray;t.aggNums=function(e,n,a,o){var s,l;if((!o||o>a.length)&&(o=a.length),r(n)||(n=!1),i(a[0])){for(l=new Array(o),s=0;s<o;s++)l[s]=t.aggNums(e,n,a[s]);a=l}for(s=0;s<o;s++)r(n)?r(a[s])&&(n=e(+n,+a[s])):n=a[s];return n},t.len=function(e){return t.aggNums((function(e){return e+1}),0,e)},t.mean=function(e,n){return n||(n=t.len(e)),t.aggNums((function(e,t){return e+t}),0,e)/n},t.geometricMean=function(e,n){return n||(n=t.len(e)),Math.pow(t.aggNums((function(e,t){return e*t}),1,e),1/n)},t.midRange=function(e){if(void 0!==e&&0!==e.length)return(t.aggNums(Math.max,null,e)+t.aggNums(Math.min,null,e))/2},t.variance=function(e,n,i){return n||(n=t.len(e)),r(i)||(i=t.mean(e,n)),t.aggNums((function(e,t){return e+Math.pow(t-i,2)}),0,e)/n},t.stdev=function(e,n,r){return Math.sqrt(t.variance(e,n,r))},t.median=function(e){var n=e.slice().sort();return t.interp(n,.5)},t.interp=function(e,t){if(!r(t))throw"n should be a finite number";if((t=t*e.length-.5)<0)return e[0];if(t>e.length-1)return e[e.length-1];var n=t%1;return n*e[Math.ceil(t)]+(1-n)*e[Math.floor(t)]}},47312:(e,t,n)=>{"use strict";var r=n(76302);e.exports=function(e){return e?r(e):[0,0,0,1]}},90738:(e,t,n)=>{"use strict";var r=n(68435),i=n(14797),a=n(56319),o=null;e.exports=function(){if(null!==o)return o;o=!1;var e=a.isIE()||a.isSafari()||a.isIOS();if(window.navigator.userAgent&&!e){var t=Array.from(r.CSS_DECLARATIONS).reverse(),n=window.CSS&&window.CSS.supports||window.supportsCSS;if("function"==typeof n)o=t.some((function(e){return n.apply(null,e)}));else{var s=i.tester.append("image").attr("style",r.STYLE),l=window.getComputedStyle(s.node()).imageRendering;o=t.some((function(e){var t=e[1];return l===t||l===t.toLowerCase()})),s.remove()}}return o}},56953:(e,t,n)=>{"use strict";var r=n(93268),i=n(56319),a=i.strTranslate,o=n(81818),s=n(12564).LINE_SPACING,l=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;t.convertToTspans=function(e,n,g){var M=e.text(),S=!e.attr("data-notex")&&n&&n._context.typesetMath&&"undefined"!=typeof MathJax&&M.match(l),R=r.select(e.node().parentNode);if(!R.empty()){var N=e.attr("class")?e.attr("class").split(" ")[0]:"text";return N+="-math",R.selectAll("svg."+N).remove(),R.selectAll("g."+N+"-group").remove(),e.style("display",null).attr({"data-unformatted":M,"data-math":"N"}),S?(n&&n._promises||[]).push(new Promise((function(t){e.style("display","none");var n=parseInt(e.node().style.fontSize,10),o={fontSize:n};!function(e,t,n){var a,o,s,l,d=parseInt((MathJax.version||"").split(".")[0]);if(2!==d&&3!==d)return void i.warn("No MathJax version:",MathJax.version);var h=function(){return o=i.extendDeepAll({},MathJax.Hub.config),s=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:f},displayAlign:"left"})},p=function(){o=i.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=f},m=function(){if("SVG"!==(a=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},g=function(){"svg"!==(a=MathJax.config.startup.output)&&(MathJax.config.startup.output="svg")},v=function(){var n="math-output-"+i.randstr({},64),a=(l=r.select("body").append("div").attr({id:n}).style({visibility:"hidden",position:"absolute","font-size":t.fontSize+"px"}).text(function(e){return e.replace(c,"\\lt ").replace(u,"\\gt ")}(e))).node();return 2===d?MathJax.Hub.Typeset(a):MathJax.typeset([a])},y=function(){var t=l.select(2===d?".MathJax_SVG":".MathJax"),a=!t.empty()&&l.select("svg").node();if(a){var o,s=a.getBoundingClientRect();o=2===d?r.select("body").select("#MathJax_SVG_glyphs"):t.select("defs"),n(t,o,s)}else i.log("There was an error in the tex syntax.",e),n();l.remove()},b=function(){if("SVG"!==a)return MathJax.Hub.setRenderer(a)},x=function(){"svg"!==a&&(MathJax.config.startup.output=a)},_=function(){return void 0!==s&&(MathJax.Hub.processSectionDelay=s),MathJax.Hub.Config(o)},w=function(){MathJax.config=o};2===d?MathJax.Hub.Queue(h,m,v,y,b,_):3===d&&(p(),g(),MathJax.startup.defaultReady(),MathJax.startup.promise.then((function(){v(),y(),x(),w()})))}(S[2],o,(function(r,i,o){R.selectAll("svg."+N).remove(),R.selectAll("g."+N+"-group").remove();var s=r&&r.select("svg");if(!s||!s.node())return L(),void t();var l=R.append("g").classed(N+"-group",!0).attr({"pointer-events":"none","data-unformatted":M,"data-math":"Y"});l.node().appendChild(s.node()),i&&i.node()&&s.node().insertBefore(i.node().cloneNode(!0),s.node().firstChild);var c=o.width,u=o.height;s.attr({class:N,height:u,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var f=e.node().style.fill||"black",d=s.select("g");d.attr({fill:f,stroke:f});var h=d.node().getBoundingClientRect(),p=h.width,m=h.height;(p>c||m>u)&&(s.style("overflow","hidden"),p=(h=s.node().getBoundingClientRect()).width,m=h.height);var v=+e.attr("x"),y=+e.attr("y"),b=-(n||e.node().getBoundingClientRect().height)/4;if("y"===N[0])l.attr({transform:"rotate("+[-90,v,y]+")"+a(-p/2,b-m/2)});else if("l"===N[0])y=b-m/2;else if("a"===N[0]&&0!==N.indexOf("atitle"))v=0,y=b;else{var x=e.attr("text-anchor");v-=p*("middle"===x?.5:"end"===x?1:0),y=y+b-m/2}s.attr({x:v,y}),g&&g.call(e,l),t(l)}))}))):L(),e}function L(){R.empty()||(N=e.attr("class")+"-math",R.select("svg."+N).remove()),e.text("").style("white-space","pre");var n=function(e,t){t=t.replace(v," ");var n,a=!1,l=[],c=-1;function u(){c++;var t=document.createElementNS(o.svg,"tspan");r.select(t).attr({class:"line",dy:c*s+"em"}),e.appendChild(t),n=t;var i=l;if(l=[{node:t}],i.length>1)for(var a=1;a<i.length;a++)f(i[a])}function f(e){var t,i=e.type,a={};if("a"===i){t="a";var s=e.target,c=e.href,u=e.popup;c&&(a={"xlink:xlink:show":"_blank"===s||"_"!==s.charAt(0)?"new":"replace",target:s,"xlink:xlink:href":c},u&&(a.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+u+'");return false;'))}else t="tspan";e.style&&(a.style=e.style);var f=document.createElementNS(o.svg,t);if("sup"===i||"sub"===i){g(n,m),n.appendChild(f);var d=document.createElementNS(o.svg,"tspan");g(d,m),r.select(d).attr("dy",p[i]),a.dy=h[i],n.appendChild(f),n.appendChild(d)}else n.appendChild(f);r.select(f).attr(a),n=e.node=f,l.push(e)}function g(e,t){e.appendChild(document.createTextNode(t))}function M(e){if(1!==l.length){var r=l.pop();e!==r.type&&i.log("Start tag <"+r.type+"> doesnt match end tag <"+e+">. Pretending it did match.",t),n=l[l.length-1].node}else i.log("Ignoring unexpected end tag </"+e+">.",t)}var S=x.test(t);S?u():(n=e,l=[{node:e}]);for(var R=t.split(y),N=0;N<R.length;N++){var L=R[N],D=L.match(b),P=D&&D[2].toLowerCase(),I=d[P];if("br"===P)u();else if(void 0===I)g(n,C(L));else if(D[1])M(P);else{var F=D[4],z={type:P},j=E(F,_);if(j?(j=j.replace(T,"$1 fill:"),I&&(j+=";"+I)):I&&(j=I),j&&(z.style=j),"a"===P){a=!0;var B=E(F,w);if(B){var U=O(B);U&&(z.href=U,z.target=E(F,A)||"_blank",z.popup=E(F,k))}}f(z)}}return a}(e.node(),M);n&&e.style("pointer-events","all"),t.positionText(e),g&&g.call(e)}};var c=/(<|&lt;|&#60;)/g,u=/(>|&gt;|&#62;)/g;var f=[["$","$"],["\\(","\\)"]];var d={sup:"font-size:70%",sub:"font-size:70%",s:"text-decoration:line-through",u:"text-decoration:underline",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},h={sub:"0.3em",sup:"-0.6em"},p={sub:"-0.21em",sup:"0.42em"},m="",g=["http:","https:","mailto:","",void 0,":"],v=t.NEWLINES=/(\r\n?|\n)/g,y=/(<[^<>]*>)/,b=/<(\/?)([^ >]*)(\s+(.*))?>/i,x=/<br(\s+.*)?>/i;t.BR_TAG_ALL=/<br(\s+.*)?>/gi;var _=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,w=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,A=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,k=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function E(e,t){if(!e)return null;var n=e.match(t),r=n&&(n[3]||n[4]);return r&&C(r)}var T=/(^|;)\s*color:/;t.plainText=function(e,t){for(var n=void 0!==(t=t||{}).len&&-1!==t.len?t.len:1/0,r=void 0!==t.allowedTags?t.allowedTags:["br"],i=e.split(y),a=[],o="",s=0,l=0;l<i.length;l++){var c=i[l],u=c.match(b),f=u&&u[2].toLowerCase();if(f)-1!==r.indexOf(f)&&(a.push(c),o=f);else{var d=c.length;if(s+d<n)a.push(c),s+=d;else if(s<n){var h=n-s;o&&("br"!==o||h<=3||d<=3)&&a.pop(),n>3?a.push(c.substr(0,h-3)+"..."):a.push(c.substr(0,h));break}o=""}}return a.join("")};var M={mu:"",amp:"&",lt:"<",gt:">",nbsp:"",times:"",plusmn:"",deg:""},S=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function C(e){return e.replace(S,(function(e,t){return("#"===t.charAt(0)?function(e){if(e>1114111)return;var t=String.fromCodePoint;if(t)return t(e);var n=String.fromCharCode;return e<=65535?n(e):n(55232+(e>>10),e%1024+56320)}("x"===t.charAt(1)?parseInt(t.substr(2),16):parseInt(t.substr(1),10)):M[t])||e}))}function O(e){var t=encodeURI(decodeURI(e)),n=document.createElement("a"),r=document.createElement("a");n.href=e,r.href=t;var i=n.protocol,a=r.protocol;return-1!==g.indexOf(i)&&-1!==g.indexOf(a)?t:""}function R(e,t,n){var r,a,o,s=n.horizontalAlign,l=n.verticalAlign||"top",c=e.node().getBoundingClientRect(),u=t.node().getBoundingClientRect();return a="bottom"===l?function(){return c.bottom-r.height}:"middle"===l?function(){return c.top+(c.height-r.height)/2}:function(){return c.top},o="right"===s?function(){return c.right-r.width}:"center"===s?function(){return c.left+(c.width-r.width)/2}:function(){return c.left},function(){r=this.node().getBoundingClientRect();var e=o()-u.left,t=a()-u.top,s=n.gd||{};if(n.gd){s._fullLayout._calcInverseTransform(s);var l=i.apply3DTransform(s._fullLayout._invTransform)(e,t);e=l[0],t=l[1]}return this.style({top:t+"px",left:e+"px","z-index":1e3}),this}}t.convertEntities=C,t.sanitizeHTML=function(e){e=e.replace(v," ");for(var t=document.createElement("p"),n=t,i=[],a=e.split(y),o=0;o<a.length;o++){var s=a[o],l=s.match(b),c=l&&l[2].toLowerCase();if(c in d)if(l[1])i.length&&(n=i.pop());else{var u=l[4],f=E(u,_),h=f?{style:f}:{};if("a"===c){var p=E(u,w);if(p){var m=O(p);if(m){h.href=m;var g=E(u,A);g&&(h.target=g)}}}var x=document.createElement(c);n.appendChild(x),r.select(x).attr(h),n=x,i.push(x)}else n.appendChild(document.createTextNode(C(s)))}return t.innerHTML},t.lineCount=function(e){return e.selectAll("tspan.line").size()||1},t.positionText=function(e,t,n){return e.each((function(){var e=r.select(this);function i(t,n){return void 0===n?null===(n=e.attr(t))&&(e.attr(t,0),n=0):e.attr(t,n),n}var a=i("x",t),o=i("y",n);"text"===this.nodeName&&e.selectAll("tspan.line").attr({x:a,y:o})}))};var N="1px ";t.makeTextShadow=function(e){return N+N+N+e+", -"+N+"-"+N+N+e+", "+N+"-"+N+N+e+", -"+N+N+N+e},t.makeEditable=function(e,t){var n=t.gd,i=t.delegate,a=r.dispatch("edit","input","cancel"),o=i||e;if(e.style({"pointer-events":i?"none":"all"}),1!==e.size())throw new Error("boo");function s(){!function(){var i=r.select(n).select(".svg-container"),o=i.append("div"),s=e.node().style,c=parseFloat(s.fontSize||12),u=t.text;void 0===u&&(u=e.attr("data-unformatted"));o.classed("plugin-editable editable",!0).style({position:"absolute","font-family":s.fontFamily||"Arial","font-size":c,color:t.fill||s.fill||"black",opacity:1,"background-color":t.background||"transparent",outline:"#ffffff33 1px solid",margin:[-c/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(u).call(R(e,i,t)).on("blur",(function(){n._editing=!1,e.text(this.textContent).style({opacity:1});var t,i=r.select(this).attr("class");(t=i?"."+i.split(" ")[0]+"-math-group":"[class*=-math-group]")&&r.select(e.node().parentNode).select(t).style({opacity:0});var o=this.textContent;r.select(this).transition().duration(0).remove(),r.select(document).on("mouseup",null),a.edit.call(e,o)})).on("focus",(function(){var e=this;n._editing=!0,r.select(document).on("mouseup",(function(){if(r.event.target===e)return!1;document.activeElement===o.node()&&o.node().blur()}))})).on("keyup",(function(){27===r.event.which?(n._editing=!1,e.style({opacity:1}),r.select(this).style({opacity:0}).on("blur",(function(){return!1})).transition().remove(),a.cancel.call(e,this.textContent)):(a.input.call(e,this.textContent),r.select(this).call(R(e,i,t)))})).on("keydown",(function(){13===r.event.which&&this.blur()})).call(l)}(),e.style({opacity:0});var i,s=o.attr("class");(i=s?"."+s.split(" ")[0]+"-math-group":"[class*=-math-group]")&&r.select(e.node().parentNode).select(i).style({opacity:0})}function l(e){var t=e.node(),n=document.createRange();n.selectNodeContents(t);var r=window.getSelection();r.removeAllRanges(),r.addRange(n),t.focus()}return t.immediate?s():o.on("click",s),r.rebind(e,a,"on")}},78503:(e,t)=>{"use strict";var n={};function r(e){e&&null!==e.timer&&(clearTimeout(e.timer),e.timer=null)}t.throttle=function(e,t,i){var a=n[e],o=Date.now();if(!a){for(var s in n)n[s].ts<o-6e4&&delete n[s];a=n[e]={ts:0,timer:null}}function l(){i(),a.ts=Date.now(),a.onDone&&(a.onDone(),a.onDone=null)}r(a),o>a.ts+t?l():a.timer=setTimeout((function(){l(),a.timer=null}),t)},t.done=function(e){var t=n[e];return t&&t.timer?new Promise((function(e){var n=t.onDone;t.onDone=function(){n&&n(),e(),t.onDone=null}})):Promise.resolve()},t.clear=function(e){if(e)r(n[e]),delete n[e];else for(var i in n)t.clear(i)}},55521:(e,t,n)=>{"use strict";var r=n(5605);e.exports=function(e,t){if(e>0)return Math.log(e)/Math.LN10;var n=Math.log(Math.min(t[0],t[1]))/Math.LN10;return r(n)||(n=Math.log(Math.max(t[0],t[1]))/Math.LN10-6),n}},1182:e=>{"use strict";e.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},95929:e=>{"use strict";e.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},29783:(e,t,n)=>{"use strict";var r=n(3360);e.exports=function(e){for(var t,n,i=r.layoutArrayContainers,a=r.layoutArrayRegexes,o=e.split("[")[0],s=0;s<a.length;s++)if((n=e.match(a[s]))&&0===n.index){t=n[0];break}if(t||(t=i[i.indexOf(o)]),!t)return!1;var l=e.substr(t.length);return l?!!(n=l.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:t,index:Number(n[1]),property:n[3]||""}:{array:t,index:"",property:""}}},88500:(e,t,n)=>{"use strict";var r=n(86395).extendFlat,i=n(77192),a={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"],description:["trace attributes should include an `editType` string matching this flaglist.","*calc* is the most extensive: a full (re)plot starting by clearing `gd.calcdata`","to force it to be regenerated","*clearAxisTypes* resets the types of the axes this trace is on, because new data could","cause the automatic axis type detection to change. Log type will not be cleared, as that","is never automatically chosen so must have been user-specified.","*plot* (re)plots but without first clearing `gd.calcdata`.","*style* only calls `module.style` (or module.editStyle) for all trace modules and redraws the legend.","*markerSize* is like *style*, but propagate axis-range changes due to scatter `marker.size`","*colorbars* only redraws colorbars."].join(" ")},o={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"],description:["layout attributes should include an `editType` string matching this flaglist.","*calc* is the most extensive: a full (re)plot starting by clearing `gd.calcdata`","to force it to be regenerated","*plot* (re)plots but without first clearing `gd.calcdata`.","*legend* only redraws the legend.","*ticks* only redraws axis ticks, labels, and gridlines.","*axrange* minimal sequence when updating axis ranges.","*layoutstyle* reapplies global and SVG cartesian axis styles.","*modebar* just updates the modebar.","*camera* just updates the camera settings for gl3d scenes.","*arraydraw* allows component arrays to invoke the redraw routines just for the","component(s) that changed.","*colorbars* only redraws colorbars."].join(" ")},s=a.flags.slice().concat(["fullReplot"]),l=o.flags.slice().concat("layoutReplot");function c(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!1;return t}function u(e,t,n){var a=r({},e);for(var o in a){var s=a[o];i(s)&&(a[o]=f(s,t,n,o))}return"from-root"===n&&(a.editType=t),a}function f(e,t,n,i){if(e.valType){var a=r({},e);if(a.editType=t,Array.isArray(e.items)){a.items=new Array(e.items.length);for(var o=0;o<e.items.length;o++)a.items[o]=f(e.items[o],t,"from-root")}return a}return u(e,t,"_"===i.charAt(0)?"nested":"from-root")}e.exports={traces:a,layout:o,traceFlags:function(){return c(s)},layoutFlags:function(){return c(l)},update:function(e,t){var n=t.editType;if(n&&"none"!==n)for(var r=n.split("+"),i=0;i<r.length;i++)e[r[i]]=!0},overrideAll:u}},15137:(e,t,n)=>{"use strict";var r=n(5605),i=n(79460),a=n(3360),o=n(56319),s=n(31496),l=n(33489),c=n(53408),u=l.cleanId,f=l.getFromTrace,d=a.traceIs;function h(e,t){var n=e[t],r=t.charAt(0);n&&"paper"!==n&&(e[t]=u(n,r,!0))}function p(e){function t(t,n){var r=e[t],i=e.title&&e.title[n];r&&!i&&(e.title||(e.title={}),e.title[n]=e[t],delete e[t])}e&&("string"!=typeof e.title&&"number"!=typeof e.title||(e.title={text:e.title}),t("titlefont","font"),t("titleposition","position"),t("titleside","side"),t("titleoffset","offset"))}function m(e){if(!o.isPlainObject(e))return!1;var t=e.name;return delete e.name,delete e.showlegend,("string"==typeof t||"number"==typeof t)&&String(t)}function g(e,t,n,r){if(n&&!r)return e;if(r&&!n)return t;if(!e.trim())return t;if(!t.trim())return e;var i,a=Math.min(e.length,t.length);for(i=0;i<a&&e.charAt(i)===t.charAt(i);i++);return e.substr(0,i).trim()}function v(e){var t="middle",n="center";return"string"==typeof e&&(-1!==e.indexOf("top")?t="top":-1!==e.indexOf("bottom")&&(t="bottom"),-1!==e.indexOf("left")?n="left":-1!==e.indexOf("right")&&(n="right")),t+" "+n}function y(e,t){return t in e&&"object"==typeof e[t]&&0===Object.keys(e[t]).length}t.clearPromiseQueue=function(e){Array.isArray(e._promises)&&e._promises.length>0&&o.log("Clearing previous rejected promises from queue."),e._promises=[]},t.cleanLayout=function(e){var n,r;e||(e={}),e.xaxis1&&(e.xaxis||(e.xaxis=e.xaxis1),delete e.xaxis1),e.yaxis1&&(e.yaxis||(e.yaxis=e.yaxis1),delete e.yaxis1),e.scene1&&(e.scene||(e.scene=e.scene1),delete e.scene1);var a=(s.subplotsRegistry.cartesian||{}).attrRegex,l=(s.subplotsRegistry.polar||{}).attrRegex,f=(s.subplotsRegistry.ternary||{}).attrRegex,d=(s.subplotsRegistry.gl3d||{}).attrRegex,m=Object.keys(e);for(n=0;n<m.length;n++){var g=m[n];if(a&&a.test(g)){var v=e[g];v.anchor&&"free"!==v.anchor&&(v.anchor=u(v.anchor)),v.overlaying&&(v.overlaying=u(v.overlaying)),v.type||(v.isdate?v.type="date":v.islog?v.type="log":!1===v.isdate&&!1===v.islog&&(v.type="linear")),"withzero"!==v.autorange&&"tozero"!==v.autorange||(v.autorange=!0,v.rangemode="tozero"),v.insiderange&&delete v.range,delete v.islog,delete v.isdate,delete v.categories,y(v,"domain")&&delete v.domain,void 0!==v.autotick&&(void 0===v.tickmode&&(v.tickmode=v.autotick?"auto":"linear"),delete v.autotick),p(v)}else if(l&&l.test(g)){p(e[g].radialaxis)}else if(f&&f.test(g)){var b=e[g];p(b.aaxis),p(b.baxis),p(b.caxis)}else if(d&&d.test(g)){var x=e[g],_=x.cameraposition;if(Array.isArray(_)&&4===_[0].length){var w=_[0],A=_[1],k=_[2],E=i([],w),T=[];for(r=0;r<3;++r)T[r]=A[r]+k*E[2+4*r];x.camera={eye:{x:T[0],y:T[1],z:T[2]},center:{x:A[0],y:A[1],z:A[2]},up:{x:0,y:0,z:1}},delete x.cameraposition}p(x.xaxis),p(x.yaxis),p(x.zaxis)}}var M=Array.isArray(e.annotations)?e.annotations.length:0;for(n=0;n<M;n++){var S=e.annotations[n];o.isPlainObject(S)&&(S.ref&&("paper"===S.ref?(S.xref="paper",S.yref="paper"):"data"===S.ref&&(S.xref="x",S.yref="y"),delete S.ref),h(S,"xref"),h(S,"yref"))}var C=Array.isArray(e.shapes)?e.shapes.length:0;for(n=0;n<C;n++){var O=e.shapes[n];o.isPlainObject(O)&&(h(O,"xref"),h(O,"yref"))}var R=Array.isArray(e.images)?e.images.length:0;for(n=0;n<R;n++){var N=e.images[n];o.isPlainObject(N)&&(h(N,"xref"),h(N,"yref"))}var L=e.legend;return L&&(L.x>3?(L.x=1.02,L.xanchor="left"):L.x<-2&&(L.x=-.02,L.xanchor="right"),L.y>3?(L.y=1.02,L.yanchor="bottom"):L.y<-2&&(L.y=-.02,L.yanchor="top")),p(e),"rotate"===e.dragmode&&(e.dragmode="orbit"),c.clean(e),e.template&&e.template.layout&&t.cleanLayout(e.template.layout),e},t.cleanData=function(e){for(var n=0;n<e.length;n++){var r,i=e[n];if("histogramy"===i.type&&"xbins"in i&&!("ybins"in i)&&(i.ybins=i.xbins,delete i.xbins),i.error_y&&"opacity"in i.error_y){var l=c.defaults,f=i.error_y.color||(d(i,"bar")?c.defaultLine:l[n%l.length]);i.error_y.color=c.addOpacity(c.rgb(f),c.opacity(f)*i.error_y.opacity),delete i.error_y.opacity}if("bardir"in i&&("h"!==i.bardir||!d(i,"bar")&&"histogram"!==i.type.substr(0,9)||(i.orientation="h",t.swapXYData(i)),delete i.bardir),"histogramy"===i.type&&t.swapXYData(i),"histogramx"!==i.type&&"histogramy"!==i.type||(i.type="histogram"),"scl"in i&&!("colorscale"in i)&&(i.colorscale=i.scl,delete i.scl),"reversescl"in i&&!("reversescale"in i)&&(i.reversescale=i.reversescl,delete i.reversescl),i.xaxis&&(i.xaxis=u(i.xaxis,"x")),i.yaxis&&(i.yaxis=u(i.yaxis,"y")),d(i,"gl3d")&&i.scene&&(i.scene=s.subplotsRegistry.gl3d.cleanId(i.scene)),!d(i,"pie-like")&&!d(i,"bar-like"))if(Array.isArray(i.textposition))for(r=0;r<i.textposition.length;r++)i.textposition[r]=v(i.textposition[r]);else i.textposition&&(i.textposition=v(i.textposition));var h=a.getModule(i);if(h&&h.colorbar){var b=h.colorbar.container,x=b?i[b]:i;x&&x.colorscale&&("YIGnBu"===x.colorscale&&(x.colorscale="YlGnBu"),"YIOrRd"===x.colorscale&&(x.colorscale="YlOrRd"))}if("surface"===i.type&&o.isPlainObject(i.contours)){var _=["x","y","z"];for(r=0;r<_.length;r++){var w=i.contours[_[r]];o.isPlainObject(w)&&(w.highlightColor&&(w.highlightcolor=w.highlightColor,delete w.highlightColor),w.highlightWidth&&(w.highlightwidth=w.highlightWidth,delete w.highlightWidth))}}if("candlestick"===i.type||"ohlc"===i.type){var A=!1!==(i.increasing||{}).showlegend,k=!1!==(i.decreasing||{}).showlegend,E=m(i.increasing),T=m(i.decreasing);if(!1!==E&&!1!==T){var M=g(E,T,A,k);M&&(i.name=M)}else!E&&!T||i.name||(i.name=E||T)}if(Array.isArray(i.transforms)){var S=i.transforms;for(r=0;r<S.length;r++){var C=S[r];if(o.isPlainObject(C))switch(C.type){case"filter":C.filtersrc&&(C.target=C.filtersrc,delete C.filtersrc),C.calendar&&(C.valuecalendar||(C.valuecalendar=C.calendar),delete C.calendar);break;case"groupby":if(C.styles=C.styles||C.style,C.styles&&!Array.isArray(C.styles)){var O=C.styles,R=Object.keys(O);C.styles=[];for(var N=0;N<R.length;N++)C.styles.push({target:R[N],value:O[R[N]]})}}}}y(i,"line")&&delete i.line,"marker"in i&&(y(i.marker,"line")&&delete i.marker.line,y(i,"marker")&&delete i.marker),c.clean(i),i.autobinx&&(delete i.autobinx,delete i.xbins),i.autobiny&&(delete i.autobiny,delete i.ybins),p(i),i.colorbar&&p(i.colorbar),i.marker&&i.marker.colorbar&&p(i.marker.colorbar),i.line&&i.line.colorbar&&p(i.line.colorbar),i.aaxis&&p(i.aaxis),i.baxis&&p(i.baxis)}},t.swapXYData=function(e){var t;if(o.swapAttrs(e,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(e.z)&&Array.isArray(e.z[0])&&(e.transpose?delete e.transpose:e.transpose=!0),e.error_x&&e.error_y){var n=e.error_y,r="copy_ystyle"in n?n.copy_ystyle:!(n.color||n.thickness||n.width);o.swapAttrs(e,["error_?.copy_ystyle"]),r&&o.swapAttrs(e,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof e.hoverinfo){var i=e.hoverinfo.split("+");for(t=0;t<i.length;t++)"x"===i[t]?i[t]="y":"y"===i[t]&&(i[t]="x");e.hoverinfo=i.join("+")}},t.coerceTraceIndices=function(e,t){if(r(t))return[t];if(!Array.isArray(t)||!t.length)return e.data.map((function(e,t){return t}));if(Array.isArray(t)){for(var n=[],i=0;i<t.length;i++)o.isIndex(t[i],e.data.length)?n.push(t[i]):o.warn("trace index (",t[i],") is not a number or is out of bounds");return n}return t},t.manageArrayContainers=function(e,t,n){var i=e.obj,a=e.parts,s=a.length,l=a[s-1],c=r(l);if(c&&null===t){var u=a.slice(0,s-1).join(".");o.nestedProperty(i,u).get().splice(l,1)}else c&&void 0===e.get()?(void 0===e.get()&&(n[e.astr]=null),e.set(t)):e.set(t)};var b=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function x(e){var t=e.search(b);if(t>0)return e.substr(0,t)}t.hasParent=function(e,t){for(var n=x(t);n;){if(n in e)return!0;n=x(n)}return!1};var _=["x","y","z"];t.clearAxisTypes=function(e,t,n){for(var r=0;r<t.length;r++)for(var i=e._fullData[r],a=0;a<3;a++){var s=f(e,i,_[a]);if(s&&"log"!==s.type){var l=s._name,c=s._id.substr(1);if("scene"===c.substr(0,5)){if(void 0!==n[c])continue;l=c+"."+l}var u=l+".type";void 0===n[l]&&void 0===n[u]&&o.nestedProperty(e.layout,u).set(null)}}}},23892:(e,t,n)=>{"use strict";var r=n(89138);t._doPlot=r._doPlot,t.newPlot=r.newPlot,t.restyle=r.restyle,t.relayout=r.relayout,t.redraw=r.redraw,t.update=r.update,t._guiRestyle=r._guiRestyle,t._guiRelayout=r._guiRelayout,t._guiUpdate=r._guiUpdate,t._storeDirectGUIEdit=r._storeDirectGUIEdit,t.react=r.react,t.extendTraces=r.extendTraces,t.prependTraces=r.prependTraces,t.addTraces=r.addTraces,t.deleteTraces=r.deleteTraces,t.moveTraces=r.moveTraces,t.purge=r.purge,t.addFrames=r.addFrames,t.deleteFrames=r.deleteFrames,t.animate=r.animate,t.setPlotConfig=r.setPlotConfig;var i=n(32159).getGraphDiv,a=n(44093).eraseActiveShape;t.deleteActiveShape=function(e){return a(i(e))},t.toImage=n(95093),t.validate=n(37236),t.downloadImage=n(13578);var o=n(70927);t.makeTemplate=o.makeTemplate,t.validateTemplate=o.validateTemplate},74694:(e,t,n)=>{"use strict";var r=n(77192),i=n(48267),a=n(9954),o=n(42175).sorterAsc,s=n(3360);t.containerArrayMatch=n(29783);var l=t.isAddVal=function(e){return"add"===e||r(e)},c=t.isRemoveVal=function(e){return null===e||"remove"===e};t.applyContainerArrayChanges=function(e,t,n,r,u){var f=t.astr,d=s.getComponentMethod(f,"supplyLayoutDefaults"),h=s.getComponentMethod(f,"draw"),p=s.getComponentMethod(f,"drawOne"),m=r.replot||r.recalc||d===i||h===i,g=e.layout,v=e._fullLayout;if(n[""]){Object.keys(n).length>1&&a.warn("Full array edits are incompatible with other edits",f);var y=n[""][""];if(c(y))t.set(null);else{if(!Array.isArray(y))return a.warn("Unrecognized full array edit value",f,y),!0;t.set(y)}return!m&&(d(g,v),h(e),!0)}var b,x,_,w,A,k,E,T,M=Object.keys(n).map(Number).sort(o),S=t.get(),C=S||[],O=u(v,f).get(),R=[],N=-1,L=C.length;for(b=0;b<M.length;b++)if(w=n[_=M[b]],A=Object.keys(w),k=w[""],E=l(k),_<0||_>C.length-(E?0:1))a.warn("index out of range",f,_);else if(void 0!==k)A.length>1&&a.warn("Insertion & removal are incompatible with edits to the same index.",f,_),c(k)?R.push(_):E?("add"===k&&(k={}),C.splice(_,0,k),O&&O.splice(_,0,{})):a.warn("Unrecognized full object edit value",f,_,k),-1===N&&(N=_);else for(x=0;x<A.length;x++)T=f+"["+_+"].",u(C[_],A[x],T).set(w[A[x]]);for(b=R.length-1;b>=0;b--)C.splice(R[b],1),O&&O.splice(R[b],1);if(C.length?S||t.set(C):t.set(null),m)return!1;if(d(g,v),p!==i){var D;if(-1===N)D=M;else{for(L=Math.max(C.length,L),D=[],b=0;b<M.length&&!((_=M[b])>=N);b++)D.push(_);for(b=N;b<L;b++)D.push(b)}for(b=0;b<D.length;b++)p(e,D[b])}else h(e);return!0}},89138:(e,t,n)=>{"use strict";var r=n(93268),i=n(5605),a=n(48684),o=n(56319),s=o.nestedProperty,l=n(76246),c=n(32008),u=n(3360),f=n(72683),d=n(31496),h=n(596),p=n(7737),m=n(31403),g=n(14797),v=n(53408),y=n(81714).initInteractions,b=n(81818),x=n(94190).clearOutline,_=n(78058).dfltConfig,w=n(74694),A=n(15137),k=n(96099),E=n(88500),T=n(56596).AX_NAME_PATTERN,M=0;function S(e){var t=e._fullLayout;t._redrawFromAutoMarginCount?t._redrawFromAutoMarginCount--:e.emit("plotly_afterplot")}function C(e,t){try{e._fullLayout._paper.style("background",t)}catch(e){o.error(e)}}function O(e,t){C(e,v.combine(t,"white"))}function R(e,t){if(!e._context){e._context=o.extendDeep({},_);var n=r.select("base");e._context._baseUrl=n.size()&&n.attr("href")?window.location.href.split("#")[0]:""}var i,s,l,c=e._context;if(t){for(s=Object.keys(t),i=0;i<s.length;i++)"editable"!==(l=s[i])&&"edits"!==l&&l in c&&("setBackground"===l&&"opaque"===t[l]?c[l]=O:c[l]=t[l]);t.plot3dPixelRatio&&!c.plotGlPixelRatio&&(c.plotGlPixelRatio=c.plot3dPixelRatio);var u=t.editable;if(void 0!==u)for(c.editable=u,s=Object.keys(c.edits),i=0;i<s.length;i++)c.edits[s[i]]=u;if(t.edits)for(s=Object.keys(t.edits),i=0;i<s.length;i++)(l=s[i])in c.edits&&(c.edits[l]=t.edits[l]);c._exportedPlot=t._exportedPlot}c.staticPlot&&(c.editable=!1,c.edits={},c.autosizable=!1,c.scrollZoom=!1,c.doubleClick=!1,c.showTips=!1,c.showLink=!1,c.displayModeBar=!1),"hover"!==c.displayModeBar||a||(c.displayModeBar=!0),"transparent"!==c.setBackground&&"function"==typeof c.setBackground||(c.setBackground=C),c._hasZeroHeight=c._hasZeroHeight||0===e.clientHeight,c._hasZeroWidth=c._hasZeroWidth||0===e.clientWidth;var f=c.scrollZoom,d=c._scrollZoom={};if(!0===f)d.cartesian=1,d.gl3d=1,d.geo=1,d.mapbox=1,d.map=1;else if("string"==typeof f){var h=f.split("+");for(i=0;i<h.length;i++)d[h[i]]=1}else!1!==f&&(d.gl3d=1,d.geo=1,d.mapbox=1,d.map=1)}function N(e,t){var n,r,i=t+1,a=[];for(n=0;n<e.length;n++)(r=e[n])<0?a.push(i+r):a.push(r);return a}function L(e,t,n){var r,i;for(r=0;r<t.length;r++){if((i=t[r])!==parseInt(i,10))throw new Error("all values in "+n+" must be integers");if(i>=e.data.length||i<-e.data.length)throw new Error(n+" must be valid indices for gd.data.");if(t.indexOf(i,r+1)>-1||i>=0&&t.indexOf(-e.data.length+i)>-1||i<0&&t.indexOf(e.data.length+i)>-1)throw new Error("each index in "+n+" must be unique.")}}function D(e,t,n){if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(void 0===t)throw new Error("currentIndices is a required argument.");if(Array.isArray(t)||(t=[t]),L(e,t,"currentIndices"),void 0===n||Array.isArray(n)||(n=[n]),void 0!==n&&L(e,n,"newIndices"),void 0!==n&&t.length!==n.length)throw new Error("current and new indices must be of equal length.")}function P(e,t,n,r,a){!function(e,t,n,r){var i=o.isPlainObject(r);if(!Array.isArray(e.data))throw new Error("gd.data must be an array");if(!o.isPlainObject(t))throw new Error("update must be a key:value object");if(void 0===n)throw new Error("indices must be an integer or array of integers");for(var a in L(e,n,"indices"),t){if(!Array.isArray(t[a])||t[a].length!==n.length)throw new Error("attribute "+a+" must be an array of length equal to indices array length");if(i&&(!(a in r)||!Array.isArray(r[a])||r[a].length!==t[a].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(e,t,n,r);for(var l=function(e,t,n,r){var a,l,c,u,f,d=o.isPlainObject(r),h=[];for(var p in Array.isArray(n)||(n=[n]),n=N(n,e.data.length-1),t)for(var m=0;m<n.length;m++){if(a=e.data[n[m]],l=(c=s(a,p)).get(),u=t[p][m],!o.isArrayOrTypedArray(u))throw new Error("attribute: "+p+" index: "+m+" must be an array");if(!o.isArrayOrTypedArray(l))throw new Error("cannot extend missing or non-array attribute: "+p);if(l.constructor!==u.constructor)throw new Error("cannot extend array with an array of a different type: "+p);f=d?r[p][m]:r,i(f)||(f=-1),h.push({prop:c,target:l,insert:u,maxp:Math.floor(f)})}return h}(e,t,n,r),c={},u={},f=0;f<l.length;f++){var d=l[f].prop,h=l[f].maxp,p=a(l[f].target,l[f].insert,h);d.set(p[0]),Array.isArray(c[d.astr])||(c[d.astr]=[]),c[d.astr].push(p[1]),Array.isArray(u[d.astr])||(u[d.astr]=[]),u[d.astr].push(l[f].target.length)}return{update:c,maxPoints:u}}function I(e,t){var n=new e.constructor(e.length+t.length);return n.set(e),n.set(t,e.length),n}function F(e,n,r,i){e=o.getGraphDiv(e),A.clearPromiseQueue(e);var a={};if("string"==typeof n)a[n]=r;else{if(!o.isPlainObject(n))return o.warn("Restyle fail.",n,r,i),Promise.reject();a=o.extendFlat({},n),void 0===i&&(i=r)}Object.keys(a).length&&(e.changed=!0);var s=A.coerceTraceIndices(e,i),l=U(e,a,s),u=l.flags;u.calc&&(e.calcdata=void 0),u.clearAxisTypes&&A.clearAxisTypes(e,s,{});var f=[];u.fullReplot?f.push(t._doPlot):(f.push(d.previousPromises),d.supplyDefaults(e),u.markerSize&&(d.doCalcdata(e),V(f)),u.style&&f.push(k.doTraceStyle),u.colorbars&&f.push(k.doColorBars),f.push(S)),f.push(d.rehover,d.redrag,d.reselect),c.add(e,F,[e,l.undoit,l.traces],F,[e,l.redoit,l.traces]);var h=o.syncOrAsync(f,e);return h&&h.then||(h=Promise.resolve()),h.then((function(){return e.emit("plotly_restyle",l.eventData),e}))}function z(e){return void 0===e?null:e}function j(e,t){return t?function(t,n,r){var i=s(t,n),a=i.set;return i.set=function(t){B((r||"")+n,i.get(),t,e),a(t)},i}:s}function B(e,t,n,r){if(Array.isArray(t)||Array.isArray(n))for(var i=Array.isArray(t)?t:[],a=Array.isArray(n)?n:[],s=Math.max(i.length,a.length),l=0;l<s;l++)B(e+"["+l+"]",i[l],a[l],r);else if(o.isPlainObject(t)||o.isPlainObject(n)){var c=o.isPlainObject(t)?t:{},u=o.isPlainObject(n)?n:{},f=o.extendFlat({},c,u);for(var d in f)B(e+"."+d,c[d],u[d],r)}else void 0===r[e]&&(r[e]=z(t))}function U(e,t,n){var r,i=e._fullLayout,a=e._fullData,l=e.data,c=i._guiEditing,p=j(i._preGUI,c),m=o.extendDeepAll({},t);$(t);var g,v=E.traceFlags(),y={},b={};function x(){return n.map((function(){}))}function _(e){var t=h.id2name(e);-1===g.indexOf(t)&&g.push(t)}function w(e){return"LAYOUT"+e+".autorange"}function k(e){return"LAYOUT"+e+".range"}function T(e){for(var t=e;t<a.length;t++)if(a[t]._input===l[e])return a[t]}function M(r,a,o){if(Array.isArray(r))r.forEach((function(e){M(e,a,o)}));else if(!(r in t)&&!A.hasParent(t,r)){var s;if("LAYOUT"===r.substr(0,6))s=p(e.layout,r.replace("LAYOUT",""));else{var u=n[o];s=j(i._tracePreGUI[T(u)._fullInput.uid],c)(l[u],r)}r in b||(b[r]=x()),void 0===b[r][o]&&(b[r][o]=z(s.get())),void 0!==a&&s.set(a)}}function S(e){return function(t){return a[t][e]}}function C(e){return function(t,r){return!1===t?a[n[r]][e]:null}}for(var O in t){if(A.hasParent(t,O))throw new Error("cannot set "+O+" and a parent attribute simultaneously");var R,N,L,D,P,I,F=t[O];if("autobinx"!==O&&"autobiny"!==O||(O=O.charAt(O.length-1)+"bins",F=Array.isArray(F)?F.map(C(O)):!1===F?n.map(S(O)):null),y[O]=F,"LAYOUT"!==O.substr(0,6)){for(b[O]=x(),r=0;r<n.length;r++){if(R=l[n[r]],N=T(n[r]),D=(L=j(i._tracePreGUI[N._fullInput.uid],c)(R,O)).get(),void 0!==(P=Array.isArray(F)?F[r%F.length]:F)){var B=L.parts[L.parts.length-1],U=O.substr(0,O.length-B.length-1),q=U?U+".":"",H=U?s(N,U).get():N;if((I=f.getTraceValObject(N,L.parts))&&I.impliedEdits&&null!==P)for(var V in I.impliedEdits)M(o.relativeAttr(O,V),I.impliedEdits[V],r);else if("thicknessmode"!==B&&"lenmode"!==B||D===P||"fraction"!==P&&"pixels"!==P||!H){if("type"===O&&("pie"===P!=("pie"===D)||"funnelarea"===P!=("funnelarea"===D))){var W="x",G="y";"bar"!==P&&"bar"!==D||"h"!==R.orientation||(W="y",G="x"),o.swapAttrs(R,["?","?src"],"labels",W),o.swapAttrs(R,["d?","?0"],"label",W),o.swapAttrs(R,["?","?src"],"values",G),"pie"===D||"funnelarea"===D?(s(R,"marker.color").set(s(R,"marker.colors").get()),i._pielayer.selectAll("g.trace").remove()):u.traceIs(R,"cartesian")&&s(R,"marker.colors").set(s(R,"marker.color").get())}}else{var Y=i._size,X=H.orient,K="top"===X||"bottom"===X;if("thicknessmode"===B){var Z=K?Y.h:Y.w;M(q+"thickness",H.thickness*("fraction"===P?1/Z:Z),r)}else{var J=K?Y.w:Y.h;M(q+"len",H.len*("fraction"===P?1/J:J),r)}}b[O][r]=z(D);if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(O)){if("orientation"===O){L.set(P);var Q=R.x&&!R.y?"h":"v";if((L.get()||Q)===N.orientation)continue}else"orientationaxes"===O&&(R.orientation={v:"h",h:"v"}[N.orientation]);A.swapXYData(R),v.calc=v.clearAxisTypes=!0}else-1!==d.dataArrayContainers.indexOf(L.parts[0])?(A.manageArrayContainers(L,P,b),v.calc=!0):(I?I.arrayOk&&!u.traceIs(N,"regl")&&(o.isArrayOrTypedArray(P)||o.isArrayOrTypedArray(D))?v.calc=!0:E.update(v,I):v.calc=!0,L.set(P))}}if(-1!==["swapxyaxes","orientationaxes"].indexOf(O)&&h.swap(e,n),"orientationaxes"===O){var ee=s(e.layout,"hovermode"),te=ee.get();"x"===te?ee.set("y"):"y"===te?ee.set("x"):"x unified"===te?ee.set("y unified"):"y unified"===te&&ee.set("x unified")}if(-1!==["orientation","type"].indexOf(O)){for(g=[],r=0;r<n.length;r++){var ne=l[n[r]];u.traceIs(ne,"cartesian")&&(_(ne.xaxis||"x"),_(ne.yaxis||"y"))}M(g.map(w),!0,0),M(g.map(k),[0,1],0)}}else L=p(e.layout,O.replace("LAYOUT","")),b[O]=[z(L.get())],L.set(Array.isArray(F)?F[0]:F),v.calc=!0}return(v.calc||v.plot)&&(v.fullReplot=!0),{flags:v,undoit:b,redoit:y,traces:n,eventData:o.extendDeepNoArrays([],[m,n])}}function $(e){var t,n,r,i=o.counterRegex("axis",".title",!1,!1),a=/colorbar\.title$/,s=Object.keys(e);for(t=0;t<s.length;t++)n=s[t],r=e[n],"title"!==n&&!i.test(n)&&!a.test(n)||"string"!=typeof r&&"number"!=typeof r?n.indexOf("titlefont")>-1&&-1===n.indexOf("grouptitlefont")?l(n,n.replace("titlefont","title.font")):n.indexOf("titleposition")>-1?l(n,n.replace("titleposition","title.position")):n.indexOf("titleside")>-1?l(n,n.replace("titleside","title.side")):n.indexOf("titleoffset")>-1&&l(n,n.replace("titleoffset","title.offset")):l(n,n.replace("title","title.text"));function l(t,n){e[n]=e[t],delete e[t]}}function q(e,t,n){e=o.getGraphDiv(e),A.clearPromiseQueue(e);var r={};if("string"==typeof t)r[t]=n;else{if(!o.isPlainObject(t))return o.warn("Relayout fail.",t,n),Promise.reject();r=o.extendFlat({},t)}Object.keys(r).length&&(e.changed=!0);var i=X(e,r),a=i.flags;a.calc&&(e.calcdata=void 0);var s=[d.previousPromises];a.layoutReplot?s.push(k.layoutReplot):Object.keys(r).length&&(H(e,a,i)||d.supplyDefaults(e),a.legend&&s.push(k.doLegend),a.layoutstyle&&s.push(k.layoutStyles),a.axrange&&V(s,i.rangesAltered),a.ticks&&s.push(k.doTicksRelayout),a.modebar&&s.push(k.doModeBar),a.camera&&s.push(k.doCamera),a.colorbars&&s.push(k.doColorBars),s.push(S)),s.push(d.rehover,d.redrag,d.reselect),c.add(e,q,[e,i.undoit],q,[e,i.redoit]);var l=o.syncOrAsync(s,e);return l&&l.then||(l=Promise.resolve(e)),l.then((function(){return e.emit("plotly_relayout",i.eventData),e}))}function H(e,t,n){var r,i,a=e._fullLayout;if(!t.axrange)return!1;for(var s in t)if("axrange"!==s&&t[s])return!1;var l=function(e,t){return o.coerce(r,i,m,e,t)},c={};for(var u in n.rangesAltered){var f=h.id2name(u);if(r=e.layout[f],i=a[f],p(r,i,l,c),i._matchGroup)for(var d in i._matchGroup)if(d!==u){var g=a[h.id2name(d)];g.autorange=i.autorange,g.range=i.range.slice(),g._input.range=i.range.slice()}}return!0}function V(e,t){var n=t?function(e){var n=[];for(var r in t){var i=h.getFromId(e,r);if(n.push(r),-1!==(i.ticklabelposition||"").indexOf("inside")&&i._anchorAxis&&n.push(i._anchorAxis._id),i._matchGroup)for(var a in i._matchGroup)t[a]||n.push(a)}return h.draw(e,n,{skipTitle:!0})}:function(e){return h.draw(e,"redraw")};e.push(x,k.doAutoRangeAndConstraints,n,k.drawData,k.finalDraw)}var W=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,G=/^[xyz]axis[0-9]*\.autorange$/,Y=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function X(e,t){var n,r,i,a=e.layout,l=e._fullLayout,c=l._guiEditing,d=j(l._preGUI,c),p=Object.keys(t),m=h.list(e),g=o.extendDeepAll({},t),v={};for($(t),p=Object.keys(t),r=0;r<p.length;r++)if(0===p[r].indexOf("allaxes")){for(i=0;i<m.length;i++){var y=m[i]._id.substr(1),b=-1!==y.indexOf("scene")?y+".":"",x=p[r].replace("allaxes",b+m[i]._name);t[x]||(t[x]=t[p[r]])}delete t[p[r]]}var _=E.layoutFlags(),k={},M={};function S(e,n){if(Array.isArray(e))e.forEach((function(e){S(e,n)}));else if(!(e in t)&&!A.hasParent(t,e)){var r=d(a,e);e in M||(M[e]=z(r.get())),void 0!==n&&r.set(n)}}var C,O={};function R(e){var t=h.name2id(e.split(".")[0]);return O[t]=1,t}for(var N in t){if(A.hasParent(t,N))throw new Error("cannot set "+N+" and a parent attribute simultaneously");for(var L=d(a,N),D=t[N],P=L.parts.length-1;P>0&&"string"!=typeof L.parts[P];)P--;var I=L.parts[P],F=L.parts[P-1]+"."+I,B=L.parts.slice(0,P).join("."),U=s(e.layout,B).get(),q=s(l,B).get(),H=L.get();if(void 0!==D){k[N]=D,M[N]="reverse"===I?D:z(H);var V=f.getLayoutValObject(l,L.parts);if(V&&V.impliedEdits&&null!==D)for(var X in V.impliedEdits)S(o.relativeAttr(N,X),V.impliedEdits[X]);if(-1!==["width","height"].indexOf(N))if(D){S("autosize",null);var Z="height"===N?"width":"height";S(Z,l[Z])}else l[N]=e._initialAutoSize[N];else if("autosize"===N)S("width",D?null:l.width),S("height",D?null:l.height);else if(F.match(W))R(F),s(l,B+"._inputRange").set(null);else if(F.match(G)){R(F),s(l,B+"._inputRange").set(null);var J=s(l,B).get();J._inputDomain&&(J._input.domain=J._inputDomain.slice())}else F.match(Y)&&s(l,B+"._inputDomain").set(null);if("type"===I){C=U;var Q="linear"===q.type&&"log"===D,ee="log"===q.type&&"linear"===D;if(Q||ee){if(C&&C.range)if(q.autorange)Q&&(C.range=C.range[1]>C.range[0]?[1,2]:[2,1]);else{var te=C.range[0],ne=C.range[1];Q?(te<=0&&ne<=0&&S(B+".autorange",!0),te<=0?te=ne/1e6:ne<=0&&(ne=te/1e6),S(B+".range[0]",Math.log(te)/Math.LN10),S(B+".range[1]",Math.log(ne)/Math.LN10)):(S(B+".range[0]",Math.pow(10,te)),S(B+".range[1]",Math.pow(10,ne)))}else S(B+".autorange",!0);Array.isArray(l._subplots.polar)&&l._subplots.polar.length&&l[L.parts[0]]&&"radialaxis"===L.parts[1]&&delete l[L.parts[0]]._subplot.viewInitial["radialaxis.range"],u.getComponentMethod("annotations","convertCoords")(e,q,D,S),u.getComponentMethod("images","convertCoords")(e,q,D,S)}else S(B+".autorange",!0),S(B+".range",null);s(l,B+"._inputRange").set(null)}else if(I.match(T)){var re=s(l,N).get(),ie=(D||{}).type;ie&&"-"!==ie||(ie="linear"),u.getComponentMethod("annotations","convertCoords")(e,re,ie,S),u.getComponentMethod("images","convertCoords")(e,re,ie,S)}var ae=w.containerArrayMatch(N);if(ae){n=ae.array,r=ae.index;var oe=ae.property,se=V||{editType:"calc"};""!==r&&""===oe&&(w.isAddVal(D)?M[N]=null:w.isRemoveVal(D)?M[N]=(s(a,n).get()||[])[r]:o.warn("unrecognized full object value",t)),E.update(_,se),v[n]||(v[n]={});var le=v[n][r];le||(le=v[n][r]={}),le[oe]=D,delete t[N]}else"reverse"===I?(U.range?U.range.reverse():(S(B+".autorange",!0),U.range=[1,0]),q.autorange?_.calc=!0:_.plot=!0):("dragmode"===N&&(!1===D&&!1!==H||!1!==D&&!1===H)||l._has("scatter-like")&&l._has("regl")&&"dragmode"===N&&("lasso"===D||"select"===D)&&"lasso"!==H&&"select"!==H||l._has("gl2d")?_.plot=!0:V?E.update(_,V):_.calc=!0,L.set(D))}}for(n in v){w.applyContainerArrayChanges(e,d(a,n),v[n],_,d)||(_.plot=!0)}for(var ce in O){var ue=(C=h.getFromId(e,ce))&&C._constraintGroup;if(ue)for(var fe in _.calc=!0,ue)O[fe]||(h.getFromId(e,fe)._constraintShrinkable=!0)}(K(e)||t.height||t.width)&&(_.plot=!0);var de=l.shapes;for(r=0;r<de.length;r++)if(de[r].showlegend){_.calc=!0;break}return(_.plot||_.calc)&&(_.layoutReplot=!0),{flags:_,rangesAltered:O,undoit:M,redoit:k,eventData:g}}function K(e){var t=e._fullLayout,n=t.width,r=t.height;return e.layout.autosize&&d.plotAutoSize(e,e.layout,t),t.width!==n||t.height!==r}function Z(e,n,r,i){e=o.getGraphDiv(e),A.clearPromiseQueue(e),o.isPlainObject(n)||(n={}),o.isPlainObject(r)||(r={}),Object.keys(n).length&&(e.changed=!0),Object.keys(r).length&&(e.changed=!0);var a=A.coerceTraceIndices(e,i),s=U(e,o.extendFlat({},n),a),l=s.flags,u=X(e,o.extendFlat({},r)),f=u.flags;(l.calc||f.calc)&&(e.calcdata=void 0),l.clearAxisTypes&&A.clearAxisTypes(e,a,r);var h=[];f.layoutReplot?h.push(k.layoutReplot):l.fullReplot?h.push(t._doPlot):(h.push(d.previousPromises),H(e,f,u)||d.supplyDefaults(e),l.style&&h.push(k.doTraceStyle),(l.colorbars||f.colorbars)&&h.push(k.doColorBars),f.legend&&h.push(k.doLegend),f.layoutstyle&&h.push(k.layoutStyles),f.axrange&&V(h,u.rangesAltered),f.ticks&&h.push(k.doTicksRelayout),f.modebar&&h.push(k.doModeBar),f.camera&&h.push(k.doCamera),h.push(S)),h.push(d.rehover,d.redrag,d.reselect),c.add(e,Z,[e,s.undoit,u.undoit,s.traces],Z,[e,s.redoit,u.redoit,s.traces]);var p=o.syncOrAsync(h,e);return p&&p.then||(p=Promise.resolve(e)),p.then((function(){return e.emit("plotly_update",{data:s.eventData,layout:u.eventData}),e}))}function J(e){return function(t){t._fullLayout._guiEditing=!0;var n=e.apply(null,arguments);return t._fullLayout._guiEditing=!1,n}}var Q=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^(map\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],ee=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function te(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=e.match(r.pattern);if(i){var a=i[1]||"";return{head:a,tail:e.substr(a.length+1),attr:r.attr}}}}function ne(e,t){var n=s(t,e).get();if(void 0!==n)return n;var r=e.split(".");for(r.pop();r.length>1;)if(r.pop(),void 0!==(n=s(t,r.join(".")+".uirevision").get()))return n;return t.uirevision}function re(e,t){for(var n=0;n<t.length;n++)if(t[n]._fullInput.uid===e)return n;return-1}function ie(e,t,n){for(var r=0;r<t.length;r++)if(t[r].uid===e)return r;return!t[n]||t[n].uid?-1:n}function ae(e,t){var n=o.isPlainObject(e),r=Array.isArray(e);return n||r?(n&&o.isPlainObject(t)||r&&Array.isArray(t))&&JSON.stringify(e)===JSON.stringify(t):e===t}function oe(e,t,n,r){var i,a,l,c=r.getValObject,u=r.flags,f=r.immutable,d=r.inArray,h=r.arrayIndex;function p(){var e=i.editType;d&&-1!==e.indexOf("arraydraw")?o.pushUnique(u.arrays[d],h):(E.update(u,i),"none"!==e&&u.nChanges++,r.transition&&i.anim&&u.nChangesAnim++,(W.test(l)||G.test(l))&&(u.rangesAltered[n[0]]=1),Y.test(l)&&s(t,"_inputDomain").set(null),"datarevision"===a&&(u.newDataRevision=1))}function m(e){return"data_array"===e.valType||e.arrayOk}for(a in e){if(u.calc&&!r.transition)return;var g=e[a],v=t[a],y=n.concat(a);if(l=y.join("."),"_"!==a.charAt(0)&&"function"!=typeof g&&g!==v){if(("tick0"===a||"dtick"===a)&&"geo"!==n[0]){var b=t.tickmode;if("auto"===b||"array"===b||!b)continue}if(("range"!==a||!t.autorange)&&("zmin"!==a&&"zmax"!==a||"contourcarpet"!==t.type)&&(i=c(y))&&(!i._compareAsJSON||JSON.stringify(g)!==JSON.stringify(v))){var x,_=i.valType,w=m(i),A=Array.isArray(g),k=Array.isArray(v);if(A&&k){var T="_input_"+a,M=e[T],S=t[T];if(Array.isArray(M)&&M===S)continue}if(void 0===v)w&&A?u.calc=!0:p();else if(i._isLinkedToArray){var C=[],O=!1;d||(u.arrays[a]=C);var R=Math.min(g.length,v.length),N=Math.max(g.length,v.length);if(R!==N){if("arraydraw"!==i.editType){p();continue}O=!0}for(x=0;x<R;x++)oe(g[x],v[x],y.concat(x),o.extendFlat({inArray:a,arrayIndex:x},r));if(O)for(x=R;x<N;x++)C.push(x)}else!_&&o.isPlainObject(g)?oe(g,v,y,r):w?A&&k?(f&&(u.calc=!0),(f||r.newDataRevision)&&p()):A!==k?u.calc=!0:p():A&&k&&g.length===v.length&&String(g)===String(v)||p()}}}for(a in t)if(!(a in e)&&"_"!==a.charAt(0)&&"function"!=typeof t[a]){if(m(i=c(n.concat(a)))&&Array.isArray(t[a]))return void(u.calc=!0);p()}}function se(e,t){var n;for(n in e)if("_"!==n.charAt(0)){var r=e[n],i=t[n];if(r!==i)if(o.isPlainObject(r)&&o.isPlainObject(i)){if(se(r,i))return!0}else{if(!Array.isArray(r)||!Array.isArray(i))return!0;if(r.length!==i.length)return!0;for(var a=0;a<r.length;a++)if(r[a]!==i[a]){if(!o.isPlainObject(r[a])||!o.isPlainObject(i[a]))return!0;if(se(r[a],i[a]))return!0}}}}function le(e){var t=e._fullLayout,n=e.getBoundingClientRect();if(!o.equalDomRects(n,t._lastBBox)){var r=t._invTransform=o.inverseTransformMatrix(o.getFullTransformMatrix(e));t._invScaleX=Math.sqrt(r[0][0]*r[0][0]+r[0][1]*r[0][1]+r[0][2]*r[0][2]),t._invScaleY=Math.sqrt(r[1][0]*r[1][0]+r[1][1]*r[1][1]+r[1][2]*r[1][2]),t._lastBBox=n}}t.animate=function(e,t,n){if(e=o.getGraphDiv(e),!o.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var r=e._transitionData;r._frameQueue||(r._frameQueue=[]);var i=(n=d.supplyAnimationDefaults(n)).transition,a=n.frame;function s(e){return Array.isArray(i)?e>=i.length?i[0]:i[e]:i}function l(e){return Array.isArray(a)?e>=a.length?a[0]:a[e]:a}function c(e,t){var n=0;return function(){if(e&&++n===t)return e()}}return void 0===r._frameWaitingCnt&&(r._frameWaitingCnt=0),new Promise((function(a,u){function f(){r._currentFrame&&r._currentFrame.onComplete&&r._currentFrame.onComplete();var t=r._currentFrame=r._frameQueue.shift();if(t){var n=t.name?t.name.toString():null;e._fullLayout._currentFrame=n,r._lastFrameAt=Date.now(),r._timeToNext=t.frameOpts.duration,d.transition(e,t.frame.data,t.frame.layout,A.coerceTraceIndices(e,t.frame.traces),t.frameOpts,t.transitionOpts).then((function(){t.onComplete&&t.onComplete()})),e.emit("plotly_animatingframe",{name:n,frame:t.frame,animation:{frame:t.frameOpts,transition:t.transitionOpts}})}else e.emit("plotly_animated"),window.cancelAnimationFrame(r._animationRaf),r._animationRaf=null}function h(){e.emit("plotly_animating"),r._lastFrameAt=-1/0,r._timeToNext=0,r._runningTransitions=0,r._currentFrame=null;var t=function(){r._animationRaf=window.requestAnimationFrame(t),Date.now()-r._lastFrameAt>r._timeToNext&&f()};t()}var p,m,g=0;function v(e){return Array.isArray(i)?g>=i.length?e.transitionOpts=i[g]:e.transitionOpts=i[0]:e.transitionOpts=i,g++,e}var y=[],b=null==t,x=Array.isArray(t);if(!b&&!x&&o.isPlainObject(t))y.push({type:"object",data:v(o.extendFlat({},t))});else if(b||-1!==["string","number"].indexOf(typeof t))for(p=0;p<r._frames.length;p++)(m=r._frames[p])&&(b||String(m.group)===String(t))&&y.push({type:"byname",name:String(m.name),data:v({name:m.name})});else if(x)for(p=0;p<t.length;p++){var _=t[p];-1!==["number","string"].indexOf(typeof _)?(_=String(_),y.push({type:"byname",name:_,data:v({name:_})})):o.isPlainObject(_)&&y.push({type:"object",data:v(o.extendFlat({},_))})}for(p=0;p<y.length;p++)if("byname"===(m=y[p]).type&&!r._frameHash[m.data.name])return o.warn('animate failure: frame not found: "'+m.data.name+'"'),void u();-1!==["next","immediate"].indexOf(n.mode)&&function(){if(0!==r._frameQueue.length){for(;r._frameQueue.length;){var t=r._frameQueue.pop();t.onInterrupt&&t.onInterrupt()}e.emit("plotly_animationinterrupted",[])}}(),"reverse"===n.direction&&y.reverse();var w=e._fullLayout._currentFrame;if(w&&n.fromcurrent){var k=-1;for(p=0;p<y.length;p++)if("byname"===(m=y[p]).type&&m.name===w){k=p;break}if(k>0&&k<y.length-1){var E=[];for(p=0;p<y.length;p++)m=y[p],("byname"!==y[p].type||p>k)&&E.push(m);y=E}}y.length>0?function(t){if(0!==t.length){for(var i=0;i<t.length;i++){var o;o="byname"===t[i].type?d.computeFrame(e,t[i].name):t[i].data;var f=l(i),p=s(i);p.duration=Math.min(p.duration,f.duration);var m={frame:o,name:t[i].name,frameOpts:f,transitionOpts:p};i===t.length-1&&(m.onComplete=c(a,2),m.onInterrupt=u),r._frameQueue.push(m)}"immediate"===n.mode&&(r._lastFrameAt=-1/0),r._animationRaf||h()}}(y):(e.emit("plotly_animated"),a())}))},t.addFrames=function(e,t,n){if(e=o.getGraphDiv(e),null==t)return Promise.resolve();if(!o.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var r,i,a,s,l=e._transitionData._frames,u=e._transitionData._frameHash;if(!Array.isArray(t))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+t);var f=l.length+2*t.length,h=[],p={};for(r=t.length-1;r>=0;r--)if(o.isPlainObject(t[r])){var m=t[r].name,g=(u[m]||p[m]||{}).name,v=t[r].name,y=u[g]||p[g];g&&v&&"number"==typeof v&&y&&M<5&&(M++,o.warn('addFrames: overwriting frame "'+(u[g]||p[g]).name+'" with a frame whose name of type "number" also equates to "'+g+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===M&&o.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),p[m]={name:m},h.push({frame:d.supplyFrameDefaults(t[r]),index:n&&void 0!==n[r]&&null!==n[r]?n[r]:f+r})}h.sort((function(e,t){return e.index>t.index?-1:e.index<t.index?1:0}));var b=[],x=[],_=l.length;for(r=h.length-1;r>=0;r--){if("number"==typeof(i=h[r].frame).name&&o.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!i.name)for(;u[i.name="frame "+e._transitionData._counter++];);if(u[i.name]){for(a=0;a<l.length&&(l[a]||{}).name!==i.name;a++);b.push({type:"replace",index:a,value:i}),x.unshift({type:"replace",index:a,value:l[a]})}else s=Math.max(0,Math.min(h[r].index,_)),b.push({type:"insert",index:s,value:i}),x.unshift({type:"delete",index:s}),_++}var w=d.modifyFrames,A=d.modifyFrames,k=[e,x],E=[e,b];return c&&c.add(e,w,k,A,E),d.modifyFrames(e,b)},t.deleteFrames=function(e,t){if(e=o.getGraphDiv(e),!o.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);var n,r,i=e._transitionData._frames,a=[],s=[];if(!t)for(t=[],n=0;n<i.length;n++)t.push(n);for((t=t.slice()).sort(),n=t.length-1;n>=0;n--)r=t[n],a.push({type:"delete",index:r}),s.unshift({type:"insert",index:r,value:i[r]});var l=d.modifyFrames,u=d.modifyFrames,f=[e,s],h=[e,a];return c&&c.add(e,l,f,u,h),d.modifyFrames(e,a)},t.addTraces=function e(n,r,i){n=o.getGraphDiv(n);var a,s,l=[],u=t.deleteTraces,f=e,d=[n,l],h=[n,r];for(function(e,t,n){var r,i;if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(void 0===t)throw new Error("traces must be defined.");for(Array.isArray(t)||(t=[t]),r=0;r<t.length;r++)if("object"!=typeof(i=t[r])||Array.isArray(i)||null===i)throw new Error("all values in traces array must be non-array objects");if(void 0===n||Array.isArray(n)||(n=[n]),void 0!==n&&n.length!==t.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(n,r,i),Array.isArray(r)||(r=[r]),r=r.map((function(e){return o.extendFlat({},e)})),A.cleanData(r),a=0;a<r.length;a++)n.data.push(r[a]);for(a=0;a<r.length;a++)l.push(-r.length+a);if(void 0===i)return s=t.redraw(n),c.add(n,u,d,f,h),s;Array.isArray(i)||(i=[i]);try{D(n,l,i)}catch(e){throw n.data.splice(n.data.length-r.length,r.length),e}return c.startSequence(n),c.add(n,u,d,f,h),s=t.moveTraces(n,l,i),c.stopSequence(n),s},t.deleteTraces=function e(n,r){n=o.getGraphDiv(n);var i,a,s=[],l=t.addTraces,u=e,f=[n,s,r],d=[n,r];if(void 0===r)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(r)||(r=[r]),L(n,r,"indices"),(r=N(r,n.data.length-1)).sort(o.sorterDes),i=0;i<r.length;i+=1)a=n.data.splice(r[i],1)[0],s.push(a);var h=t.redraw(n);return c.add(n,l,f,u,d),h},t.extendTraces=function e(n,r,i,a){var s=P(n=o.getGraphDiv(n),r,i,a,(function(e,t,n){var r,i;if(o.isTypedArray(e))if(n<0){var a=new e.constructor(0),s=I(e,t);n<0?(r=s,i=a):(r=a,i=s)}else if(r=new e.constructor(n),i=new e.constructor(e.length+t.length-n),n===t.length)r.set(t),i.set(e);else if(n<t.length){var l=t.length-n;r.set(t.subarray(l)),i.set(e),i.set(t.subarray(0,l),e.length)}else{var c=n-t.length,u=e.length-c;r.set(e.subarray(u)),r.set(t,c),i.set(e.subarray(0,u))}else r=e.concat(t),i=n>=0&&n<r.length?r.splice(0,r.length-n):[];return[r,i]})),l=t.redraw(n),u=[n,s.update,i,s.maxPoints];return c.add(n,t.prependTraces,u,e,arguments),l},t.moveTraces=function e(n,r,i){var a,s=[],l=[],u=e,f=e,d=[n=o.getGraphDiv(n),i,r],h=[n,r,i];if(D(n,r,i),r=Array.isArray(r)?r:[r],void 0===i)for(i=[],a=0;a<r.length;a++)i.push(-r.length+a);for(i=Array.isArray(i)?i:[i],r=N(r,n.data.length-1),i=N(i,n.data.length-1),a=0;a<n.data.length;a++)-1===r.indexOf(a)&&s.push(n.data[a]);for(a=0;a<r.length;a++)l.push({newIndex:i[a],trace:n.data[r[a]]});for(l.sort((function(e,t){return e.newIndex-t.newIndex})),a=0;a<l.length;a+=1)s.splice(l[a].newIndex,0,l[a].trace);n.data=s;var p=t.redraw(n);return c.add(n,u,d,f,h),p},t.prependTraces=function e(n,r,i,a){var s=P(n=o.getGraphDiv(n),r,i,a,(function(e,t,n){var r,i;if(o.isTypedArray(e))if(n<=0){var a=new e.constructor(0),s=I(t,e);n<0?(r=s,i=a):(r=a,i=s)}else if(r=new e.constructor(n),i=new e.constructor(e.length+t.length-n),n===t.length)r.set(t),i.set(e);else if(n<t.length){var l=t.length-n;r.set(t.subarray(0,l)),i.set(t.subarray(l)),i.set(e,l)}else{var c=n-t.length;r.set(t),r.set(e.subarray(0,c),t.length),i.set(e.subarray(c))}else r=t.concat(e),i=n>=0&&n<r.length?r.splice(n,r.length):[];return[r,i]})),l=t.redraw(n),u=[n,s.update,i,s.maxPoints];return c.add(n,t.extendTraces,u,e,arguments),l},t.newPlot=function(e,n,r,i){return e=o.getGraphDiv(e),d.cleanPlot([],{},e._fullData||[],e._fullLayout||{}),d.purge(e),t._doPlot(e,n,r,i)},t._doPlot=function(e,n,i,a){var s;if(e=o.getGraphDiv(e),l.init(e),o.isPlainObject(n)){var c=n;n=c.data,i=c.layout,a=c.config,s=c.frames}if(!1===l.triggerHandler(e,"plotly_beforeplot",[n,i,a]))return Promise.reject();n||i||o.isPlotDiv(e)||o.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",e),R(e,a),i||(i={}),r.select(e).classed("js-plotly-plot",!0),g.makeTester(),Array.isArray(e._promises)||(e._promises=[]);var f=0===(e.data||[]).length&&Array.isArray(n);Array.isArray(n)&&(A.cleanData(n),f?e.data=n:e.data.push.apply(e.data,n),e.empty=!1),e.layout&&!f||(e.layout=A.cleanLayout(i)),d.supplyDefaults(e);var p=e._fullLayout,m=p._has("cartesian");p._replotting=!0,(f||p._shouldCreateBgLayer)&&(!function(e){var t=r.select(e),n=e._fullLayout;if(n._calcInverseTransform=le,n._calcInverseTransform(e),n._container=t.selectAll(".plot-container").data([0]),n._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),n._paperdiv=n._container.selectAll(".svg-container").data([0]),n._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),n._glcontainer=n._paperdiv.selectAll(".gl-container").data([{}]),n._glcontainer.enter().append("div").classed("gl-container",!0),n._paperdiv.selectAll(".main-svg").remove(),n._paperdiv.select(".modebar-container").remove(),n._paper=n._paperdiv.insert("svg",":first-child").classed("main-svg",!0),n._toppaper=n._paperdiv.append("svg").classed("main-svg",!0),n._modebardiv=n._paperdiv.append("div"),delete n._modeBar,n._hoverpaper=n._paperdiv.append("svg").classed("main-svg",!0),!n._uid){var i={};r.selectAll("defs").each((function(){this.id&&(i[this.id.split("-")[1]]=1)})),n._uid=o.randstr(i)}n._paperdiv.selectAll(".main-svg").attr(b.svgAttrs),n._defs=n._paper.append("defs").attr("id","defs-"+n._uid),n._clips=n._defs.append("g").classed("clips",!0),n._topdefs=n._toppaper.append("defs").attr("id","topdefs-"+n._uid),n._topclips=n._topdefs.append("g").classed("clips",!0),n._bgLayer=n._paper.append("g").classed("bglayer",!0),n._draggers=n._paper.append("g").classed("draglayer",!0);var a=n._paper.append("g").classed("layer-below",!0);n._imageLowerLayer=a.append("g").classed("imagelayer",!0),n._shapeLowerLayer=a.append("g").classed("shapelayer",!0),n._cartesianlayer=n._paper.append("g").classed("cartesianlayer",!0),n._polarlayer=n._paper.append("g").classed("polarlayer",!0),n._smithlayer=n._paper.append("g").classed("smithlayer",!0),n._ternarylayer=n._paper.append("g").classed("ternarylayer",!0),n._geolayer=n._paper.append("g").classed("geolayer",!0),n._funnelarealayer=n._paper.append("g").classed("funnelarealayer",!0),n._pielayer=n._paper.append("g").classed("pielayer",!0),n._iciclelayer=n._paper.append("g").classed("iciclelayer",!0),n._treemaplayer=n._paper.append("g").classed("treemaplayer",!0),n._sunburstlayer=n._paper.append("g").classed("sunburstlayer",!0),n._indicatorlayer=n._toppaper.append("g").classed("indicatorlayer",!0),n._glimages=n._paper.append("g").classed("glimages",!0);var s=n._toppaper.append("g").classed("layer-above",!0);n._imageUpperLayer=s.append("g").classed("imagelayer",!0),n._shapeUpperLayer=s.append("g").classed("shapelayer",!0),n._selectionLayer=n._toppaper.append("g").classed("selectionlayer",!0),n._infolayer=n._toppaper.append("g").classed("infolayer",!0),n._menulayer=n._toppaper.append("g").classed("menulayer",!0),n._zoomlayer=n._toppaper.append("g").classed("zoomlayer",!0),n._hoverlayer=n._hoverpaper.append("g").classed("hoverlayer",!0),n._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),e.emit("plotly_framework")}(e),p._shouldCreateBgLayer&&delete p._shouldCreateBgLayer),g.initGradients(e),g.initPatterns(e),f&&h.saveShowSpikeInitial(e);var v=!e.calcdata||e.calcdata.length!==(e._fullData||[]).length;v&&d.doCalcdata(e);for(var x=0;x<e.calcdata.length;x++)e.calcdata[x][0].trace=e._fullData[x];e._context.responsive?e._responsiveChartHandler||(e._responsiveChartHandler=function(){o.isHidden(e)||d.resize(e)},window.addEventListener("resize",e._responsiveChartHandler)):o.clearResponsive(e);var _=o.extendFlat({},p._size),w=0;function E(){if(d.clearAutoMarginIds(e),k.drawMarginPushers(e),h.allowAutoMargin(e),e._fullLayout.title.text&&e._fullLayout.title.automargin&&d.allowAutoMargin(e,"title.automargin"),p._has("pie"))for(var t=e._fullData,n=0;n<t.length;n++){var r=t[n];"pie"===r.type&&r.automargin&&d.allowAutoMargin(e,"pie."+r.uid+".automargin")}return d.doAutoMargin(e),d.previousPromises(e)}function T(){e._transitioning||(k.doAutoRangeAndConstraints(e),f&&h.saveRangeInitial(e),u.getComponentMethod("rangeslider","calcAutorange")(e))}var M=[d.previousPromises,function(){if(s)return t.addFrames(e,s)},function t(){for(var n=p._basePlotModules,r=0;r<n.length;r++)n[r].drawFramework&&n[r].drawFramework(e);!p._glcanvas&&p._has("gl")&&(p._glcanvas=p._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],(function(e){return e.key})),p._glcanvas.enter().append("canvas").attr("class",(function(e){return"gl-canvas gl-canvas-"+e.key.replace("Layer","")})).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var i=e._context.plotGlPixelRatio;if(p._glcanvas){p._glcanvas.attr("width",p.width*i).attr("height",p.height*i).style("width",p.width+"px").style("height",p.height+"px");var a=p._glcanvas.data()[0].regl;if(a&&(Math.floor(p.width*i)!==a._gl.drawingBufferWidth||Math.floor(p.height*i)!==a._gl.drawingBufferHeight)){var s="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!w)return o.log(s+" Clearing graph and plotting again."),d.cleanPlot([],{},e._fullData,p),d.supplyDefaults(e),p=e._fullLayout,d.doCalcdata(e),w++,t();o.error(s)}}return"h"===p.modebar.orientation?p._modebardiv.style("height",null).style("width","100%"):p._modebardiv.style("width",null).style("height",p.height+"px"),d.previousPromises(e)},E,function(){if(d.didMarginChange(_,p._size))return o.syncOrAsync([E,k.layoutStyles],e)}];m&&M.push((function(){if(v)return o.syncOrAsync([u.getComponentMethod("shapes","calcAutorange"),u.getComponentMethod("annotations","calcAutorange"),T],e);T()})),M.push(k.layoutStyles),m&&M.push((function(){return h.draw(e,f?"":"redraw")}),(function(e){var t=e._fullLayout._insideTickLabelsUpdaterange;if(t)return e._fullLayout._insideTickLabelsUpdaterange=void 0,q(e,t).then((function(){h.saveRangeInitial(e,!0)}))})),M.push(k.drawData,k.finalDraw,y,d.addLinks,d.rehover,d.redrag,d.reselect,d.doAutoMargin,d.previousPromises);var C=o.syncOrAsync(M,e);return C&&C.then||(C=Promise.resolve()),C.then((function(){return S(e),e}))},t.purge=function(e){var t=(e=o.getGraphDiv(e))._fullLayout||{},n=e._fullData||[];return d.cleanPlot([],{},n,t),d.purge(e),l.purge(e),t._container&&t._container.remove(),delete e._context,e},t.react=function(e,n,r,i){var a,l;e=o.getGraphDiv(e),A.clearPromiseQueue(e);var c=e._fullData,h=e._fullLayout;if(o.isPlotDiv(e)&&c&&h){if(o.isPlainObject(n)){var p=n;n=p.data,r=p.layout,i=p.config,a=p.frames}var m=!1;if(i){var g=o.extendDeep({},e._context);e._context=void 0,R(e,i),m=se(g,e._context)}e.data=n||[],A.cleanData(e.data),e.layout=r||{},A.cleanLayout(e.layout),function(e,t,n,r){var i,a,l,c,u,f,d,h,p,m,g=r._preGUI,v=[],y={},b={};for(i in g){if(u=te(i,Q)){if(p=u.head,m=u.tail,a=u.attr||p+".uirevision",(c=(l=s(r,a).get())&&ne(a,t))&&c===l){if(null===(f=g[i])&&(f=void 0),ae(h=(d=s(t,i)).get(),f)){void 0===h&&"autorange"===m&&v.push(p),d.set(z(s(r,i).get()));continue}if("autorange"===m||"range["===m.substr(0,6)){var x=g[p+".range[0]"],_=g[p+".range[1]"],w=g[p+".autorange"];if(w||null===w&&null===x&&null===_){if(!(p in y)){var A=s(t,p).get();y[p]=A&&(A.autorange||!1!==A.autorange&&(!A.range||2!==A.range.length))}if(y[p]){d.set(z(s(r,i).get()));continue}}}}}else o.warn("unrecognized GUI edit: "+i);delete g[i],u&&"range["===u.tail.substr(0,6)&&(b[u.head]=1)}for(var k=0;k<v.length;k++){var E=v[k];if(b[E]){var T=s(t,E).get();T&&delete T.autorange}}var M=r._tracePreGUI;for(var S in M){var C,O=M[S],R=null;for(i in O){if(!R){var N=re(S,n);if(N<0){delete M[S];break}var L=ie(S,e,(C=n[N]._fullInput).index);if(L<0){delete M[S];break}R=e[L]}if(u=te(i,ee)){if(u.attr?c=(l=s(r,u.attr).get())&&ne(u.attr,t):(l=C.uirevision,void 0===(c=R.uirevision)&&(c=t.uirevision)),c&&c===l&&(null===(f=O[i])&&(f=void 0),ae(h=(d=s(R,i)).get(),f))){d.set(z(s(C,i).get()));continue}}else o.warn("unrecognized GUI edit: "+i+" in trace uid "+S);delete O[i]}}}(e.data,e.layout,c,h),d.supplyDefaults(e,{skipUpdateCalc:!0});var v=e._fullData,y=e._fullLayout,b=void 0===y.datarevision,x=y.transition,_=function(e,t,n,r,i){var a=E.layoutFlags();function o(e){return f.getLayoutValObject(n,e)}a.arrays={},a.rangesAltered={},a.nChanges=0,a.nChangesAnim=0;var s={getValObject:o,flags:a,immutable:r,transition:i,gd:e};oe(t,n,[],s),(a.plot||a.calc)&&(a.layoutReplot=!0);i&&a.nChanges&&a.nChangesAnim&&(a.anim=a.nChanges===a.nChangesAnim?"all":"some");return a}(e,h,y,b,x),w=_.newDataRevision,T=function(e,t,n,r,i,a){var o=t.length===n.length;if(!i&&!o)return{fullReplot:!0,calc:!0};var s,l,c=E.traceFlags();function u(e){var t=f.getTraceValObject(l,e);return!l._module.animatable&&t.anim&&(t.anim=!1),t}c.arrays={},c.nChanges=0,c.nChangesAnim=0;var h={getValObject:u,flags:c,immutable:r,transition:i,newDataRevision:a,gd:e},p={};for(s=0;s<t.length;s++)if(n[s]){if(l=n[s]._fullInput,d.hasMakesDataTransform(l)&&(l=n[s]),p[l.uid])continue;p[l.uid]=1,oe(t[s]._fullInput,l,[],h)}(c.calc||c.plot)&&(c.fullReplot=!0);i&&c.nChanges&&c.nChangesAnim&&(c.anim=c.nChanges===c.nChangesAnim&&o?"all":"some");return c}(e,c,v,b,x,w);if(K(e)&&(_.layoutReplot=!0),T.calc||_.calc){e.calcdata=void 0;for(var M=Object.getOwnPropertyNames(y),C=0;C<M.length;C++){var O=M[C],N=O.substring(0,5);if("xaxis"===N||"yaxis"===N){var L=y[O]._emptyCategories;L&&L()}}}else d.supplyDefaultsUpdateCalc(e.calcdata,v);var D=[];if(a&&(e._transitionData={},d.createTransitionData(e),D.push((function(){return t.addFrames(e,a)}))),y.transition&&!m&&(T.anim||_.anim))_.ticks&&D.push(k.doTicksRelayout),d.doCalcdata(e),k.doAutoRangeAndConstraints(e),D.push((function(){return d.transitionFromReact(e,T,_,h)}));else if(T.fullReplot||_.layoutReplot||m)e._fullLayout._skipDefaults=!0,D.push(t._doPlot);else{for(var P in _.arrays){var I=_.arrays[P];if(I.length){var F=u.getComponentMethod(P,"drawOne");if(F!==o.noop)for(var j=0;j<I.length;j++)F(e,I[j]);else{var B=u.getComponentMethod(P,"draw");if(B===o.noop)throw new Error("cannot draw components: "+P);B(e)}}}D.push(d.previousPromises),T.style&&D.push(k.doTraceStyle),(T.colorbars||_.colorbars)&&D.push(k.doColorBars),_.legend&&D.push(k.doLegend),_.layoutstyle&&D.push(k.layoutStyles),_.axrange&&V(D),_.ticks&&D.push(k.doTicksRelayout),_.modebar&&D.push(k.doModeBar),_.camera&&D.push(k.doCamera),D.push(S)}D.push(d.rehover,d.redrag,d.reselect),(l=o.syncOrAsync(D,e))&&l.then||(l=Promise.resolve(e))}else l=t.newPlot(e,n,r,i);return l.then((function(){return e.emit("plotly_react",{data:n,layout:r}),e}))},t.redraw=function(e){if(e=o.getGraphDiv(e),!o.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);return A.cleanData(e.data),A.cleanLayout(e.layout),e.calcdata=void 0,t._doPlot(e).then((function(){return e.emit("plotly_redraw"),e}))},t.relayout=q,t.restyle=F,t.setPlotConfig=function(e){return o.extendFlat(_,e)},t.update=Z,t._guiRelayout=J(q),t._guiRestyle=J(F),t._guiUpdate=J(Z),t._storeDirectGUIEdit=function(e,t,n){for(var r in n){B(r,s(e,r).get(),n[r],t)}}},78058:e=>{"use strict";var t={staticPlot:{valType:"boolean",dflt:!1,description:["Determines whether the graphs are interactive or not.","If *false*, no interactivity, for export or image generation."].join(" ")},typesetMath:{valType:"boolean",dflt:!0,description:["Determines whether math should be typeset or not,","when MathJax (either v2 or v3) is present on the page."].join(" ")},plotlyServerURL:{valType:"string",dflt:"",description:["When set it determines base URL for","the 'Edit in Chart Studio' `showEditInChartStudio`/`showSendToCloud` mode bar button","and the showLink/sendData on-graph link.","To enable sending your data to Chart Studio Cloud, you need to","set both `plotlyServerURL` to 'https://chart-studio.plotly.com' and","also set `showSendToCloud` to true."].join(" ")},editable:{valType:"boolean",dflt:!1,description:["Determines whether the graph is editable or not.","Sets all pieces of `edits`","unless a separate `edits` config item overrides individual parts."].join(" ")},edits:{annotationPosition:{valType:"boolean",dflt:!1,description:["Determines if the main anchor of the annotation is editable.","The main anchor corresponds to the","text (if no arrow) or the arrow (which drags the whole thing leaving","the arrow length & direction unchanged)."].join(" ")},annotationTail:{valType:"boolean",dflt:!1,description:["Has only an effect for annotations with arrows.","Enables changing the length and direction of the arrow."].join(" ")},annotationText:{valType:"boolean",dflt:!1,description:"Enables editing annotation text."},axisTitleText:{valType:"boolean",dflt:!1,description:"Enables editing axis title text."},colorbarPosition:{valType:"boolean",dflt:!1,description:"Enables moving colorbars."},colorbarTitleText:{valType:"boolean",dflt:!1,description:"Enables editing colorbar title text."},legendPosition:{valType:"boolean",dflt:!1,description:"Enables moving the legend."},legendText:{valType:"boolean",dflt:!1,description:"Enables editing the trace name fields from the legend"},shapePosition:{valType:"boolean",dflt:!1,description:"Enables moving shapes."},titleText:{valType:"boolean",dflt:!1,description:"Enables editing the global layout title."}},editSelection:{valType:"boolean",dflt:!0,description:"Enables moving selections."},autosizable:{valType:"boolean",dflt:!1,description:["Determines whether the graphs are plotted with respect to","layout.autosize:true and infer its container size."].join(" ")},responsive:{valType:"boolean",dflt:!1,description:["Determines whether to change the layout size when window is resized.","In v3, this option will be removed and will always be true."].join(" ")},fillFrame:{valType:"boolean",dflt:!1,description:["When `layout.autosize` is turned on, determines whether the graph","fills the container (the default) or the screen (if set to *true*)."].join(" ")},frameMargins:{valType:"number",dflt:0,min:0,max:.5,description:["When `layout.autosize` is turned on, set the frame margins","in fraction of the graph size."].join(" ")},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox","map"],extras:[!0,!1],dflt:"gl3d+geo+map",description:["Determines whether mouse wheel or two-finger scroll zooms is enable.","Turned on by default for gl3d, geo, mapbox and map subplots","(as these subplot types do not have zoombox via pan),","but turned off by default for cartesian subplots.","Set `scrollZoom` to *false* to disable scrolling for all subplots."].join(" ")},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize",description:["Sets the double click interaction mode.","Has an effect only in cartesian plots.","If *false*, double click is disable.","If *reset*, double click resets the axis ranges to their initial values.","If *autosize*, double click set the axis ranges to their autorange values.","If *reset+autosize*, the odd double clicks resets the axis ranges","to their initial values and even double clicks set the axis ranges","to their autorange values."].join(" ")},doubleClickDelay:{valType:"number",dflt:300,min:0,description:["Sets the delay for registering a double-click in ms.","This is the time interval (in ms) between first mousedown and","2nd mouseup to constitute a double-click.","This setting propagates to all on-subplot double clicks","(except for geo, mapbox and map) and on-legend double clicks."].join(" ")},showAxisDragHandles:{valType:"boolean",dflt:!0,description:["Set to *false* to omit cartesian axis pan/zoom drag handles."].join(" ")},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0,description:["Set to *false* to omit direct range entry at the pan/zoom drag points,","note that `showAxisDragHandles` must be enabled to have an effect."].join(" ")},showTips:{valType:"boolean",dflt:!0,description:["Determines whether or not tips are shown while interacting","with the resulting graphs."].join(" ")},showLink:{valType:"boolean",dflt:!1,description:["Determines whether a link to Chart Studio Cloud is displayed","at the bottom right corner of resulting graphs.","Use with `sendData` and `linkText`."].join(" ")},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0,description:["Sets the text appearing in the `showLink` link."].join(" ")},sendData:{valType:"boolean",dflt:!0,description:["If *showLink* is true, does it contain data","just link to a Chart Studio Cloud file?"].join(" ")},showSources:{valType:"any",dflt:!1,description:["Adds a source-displaying function to show sources on","the resulting graphs."].join(" ")},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover",description:["Determines the mode bar display mode.","If *true*, the mode bar is always visible.","If *false*, the mode bar is always hidden.","If *hover*, the mode bar is visible while the mouse cursor","is on the graph container."].join(" ")},showSendToCloud:{valType:"boolean",dflt:!1,description:['Should we include a ModeBar button, labeled "Edit in Chart Studio",',"that sends this chart to chart-studio.plotly.com (formerly plot.ly) or another plotly server","as specified by `plotlyServerURL` for editing, export, etc? Prior to version 1.43.0","this button was included by default, now it is opt-in using this flag.","Note that this button can (depending on `plotlyServerURL` being set) send your data","to an external server. However that server does not persist your data",'until you arrive at the Chart Studio and explicitly click "Save".'].join(" ")},showEditInChartStudio:{valType:"boolean",dflt:!1,description:["Same as `showSendToCloud`, but use a pencil icon instead of a floppy-disk.","Note that if both `showSendToCloud` and `showEditInChartStudio` are turned,","only `showEditInChartStudio` will be honored."].join(" ")},modeBarButtonsToRemove:{valType:"any",dflt:[],description:["Remove mode bar buttons by name.","See ./components/modebar/buttons.js for the list of names."].join(" ")},modeBarButtonsToAdd:{valType:"any",dflt:[],description:["Add mode bar button using config objects","See ./components/modebar/buttons.js for list of arguments.","To enable predefined modebar buttons e.g. shape drawing, hover and spikelines,","simply provide their string name(s). This could include:","*v1hovermode*, *hoverclosest*, *hovercompare*, *togglehover*, *togglespikelines*,","*drawline*, *drawopenpath*, *drawclosedpath*, *drawcircle*, *drawrect* and *eraseshape*.","Please note that these predefined buttons will only be shown if they are compatible","with all trace types used in a graph."].join(" ")},modeBarButtons:{valType:"any",dflt:!1,description:["Define fully custom mode bar buttons as nested array,","where the outer arrays represents button groups, and","the inner arrays have buttons config objects or names of default buttons","See ./components/modebar/buttons.js for more info."].join(" ")},toImageButtonOptions:{valType:"any",dflt:{},description:["Statically override options for toImage modebar button","allowed keys are format, filename, width, height, scale","see ../components/modebar/buttons.js"].join(" ")},displaylogo:{valType:"boolean",dflt:!0,description:["Determines whether or not the plotly logo is displayed","on the end of the mode bar."].join(" ")},watermark:{valType:"boolean",dflt:!1,description:"watermark the images with the company's logo"},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4,description:["Set the pixel ratio during WebGL image export.","This config option was formerly named `plot3dPixelRatio`","which is now deprecated."].join(" ")},setBackground:{valType:"any",dflt:"transparent",description:["Set function to add the background color (i.e. `layout.paper_color`)","to a different container.","This function take the graph div as first argument and the current background","color as second argument.","Alternatively, set to string *opaque* to ensure there is white behind it."].join(" ")},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/",description:["Set the URL to topojson used in geo charts.","By default, the topojson files are fetched from cdn.plot.ly.","For example, set this option to:","<path-to-plotly.js>/dist/topojson/","to render geographical feature using the topojson files","that ship with the plotly.js module."].join(" ")},mapboxAccessToken:{valType:"string",dflt:null,description:["Mapbox access token (required to plot mapbox trace types)","If using an Mapbox Atlas server, set this option to ''","so that plotly.js won't attempt to authenticate to the public Mapbox server."].join(" ")},logging:{valType:"integer",min:0,max:2,dflt:1,description:["Turn all console logging on or off (errors will be thrown)","This should ONLY be set via Plotly.setPlotConfig","Available levels:","0: no logs","1: warnings and errors, but not informational messages","2: verbose logs"].join(" ")},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0,description:["Set on-graph logging (notifier) level","This should ONLY be set via Plotly.setPlotConfig","Available levels:","0: no on-graph logs","1: warnings and errors, but not informational messages","2: verbose logs"].join(" ")},queueLength:{valType:"integer",min:0,dflt:0,description:"Sets the length of the undo/redo queue."},globalTransforms:{valType:"any",dflt:[],description:["Set global transform to be applied to all traces with no","specification needed"].join(" ")},locale:{valType:"string",dflt:"en-US",description:["Which localization should we use?","Should be a string like 'en' or 'en-US'."].join(" ")},locales:{valType:"any",dflt:{},description:["Localization definitions","Locales can be provided either here (specific to one chart) or globally","by registering them as modules.","Should be an object of objects {locale: {dictionary: {...}, format: {...}}}","{","  da: {","      dictionary: {'Reset axes': 'Nulstil aksler', ...},","      format: {months: [...], shortMonths: [...]}","  },","  ...","}","All parts are optional. When looking for translation or format fields, we","look first for an exact match in a config locale, then in a registered","module. If those fail, we strip off any regionalization ('en-US' -> 'en')","and try each (config, registry) again. The final fallback for translation","is untranslated (which is US English) and for formats is the base English","(the only consequence being the last fallback date format %x is DD/MM/YYYY","instead of MM/DD/YYYY). Currently `grouping` and `currency` are ignored","for our automatic number formatting, but can be used in custom formats."].join(" ")}},n={};!function e(t,n){for(var r in t){var i=t[r];i.valType?n[r]=i.dflt:(n[r]||(n[r]={}),e(i,n[r]))}}(t,n),e.exports={configAttributes:t,dfltConfig:n}},72683:(e,t,n)=>{"use strict";var r=n(3360),i=n(56319),a=n(85507),o=n(39626),s=n(88281),l=n(19680),c=n(78058).configAttributes,u=n(88500),f=i.extendDeepAll,d=i.isPlainObject,h=i.isArrayOrTypedArray,p=i.nestedProperty,m=i.valObjectMeta,g="_isSubplotObj",v="_isLinkedToArray",y="_deprecated",b=[g,v,"_arrayAttrRegexps",y];function x(e,t,n){if(!e)return!1;if(e._isLinkedToArray)if(_(t[n]))n++;else if(n<t.length)return!1;for(;n<t.length;n++){var r=e[t[n]];if(!d(r))break;if(e=r,n===t.length-1)break;if(e._isLinkedToArray){if(!_(t[++n]))return!1}else if("info_array"===e.valType){var i=t[++n];if(!_(i))return!1;var a=e.items;if(Array.isArray(a)){if(i>=a.length)return!1;if(2===e.dimensions){if(n++,t.length===n)return e;var o=t[n];if(!_(o))return!1;e=a[i][o]}else e=a[i]}else e=a}}return e}function _(e){return e===Math.round(e)&&e>=0}function w(){var e,t,n={};for(e in f(n,o),r.subplotsRegistry){if((t=r.subplotsRegistry[e]).layoutAttributes)if(Array.isArray(t.attr))for(var i=0;i<t.attr.length;i++)E(n,t,t.attr[i]);else E(n,t,"subplot"===t.attr?t.name:t.attr)}for(e in r.componentsRegistry){var a=(t=r.componentsRegistry[e]).schema;if(a&&(a.subplots||a.layout)){var s=a.subplots;if(s&&s.xaxis&&!s.yaxis)for(var l in s.xaxis)delete n.yaxis[l];delete n.xaxis.shift,delete n.xaxis.autoshift}else"colorscale"===t.name?f(n,t.layoutAttributes):t.layoutAttributes&&T(n,t.layoutAttributes,t.name)}return{layoutAttributes:k(n)}}function A(){var e={frames:f({},s)};return k(e),e.frames}function k(e){return function(e){function n(e){return{valType:"string",description:"Sets the source reference on Chart Studio Cloud for `"+e+"`.",editType:"none"}}function r(e,r,i){t.isValObject(e)?!0!==e.arrayOk&&"data_array"!==e.valType||(i[r+"src"]=n(r)):d(e)&&(e.role="object")}t.crawl(e,r)}(e),function(e){function n(e,t,n){if(e){var r=e[v];r&&(delete e[v],n[t]={items:{}},n[t].items[r]=e,n[t].role="object")}}t.crawl(e,n)}(e),function(e){function t(e){for(var n in e)if(d(e[n]))t(e[n]);else if(Array.isArray(e[n]))for(var r=0;r<e[n].length;r++)t(e[n][r]);else e[n]instanceof RegExp&&(e[n]=e[n].toString())}t(e)}(e),e}function E(e,t,n){var r=p(e,n),i=f({},t.layoutAttributes);i[g]=!0,r.set(i)}function T(e,t,n){var r=p(e,n);r.set(f(r.get()||{},t))}t.IS_SUBPLOT_OBJ=g,t.IS_LINKED_TO_ARRAY=v,t.DEPRECATED=y,t.UNDERSCORE_ATTRS=b,t.get=function(){var e={};r.allTypes.forEach((function(n){e[n]=function(e){var n,i;n=r.modules[e]._module,i=n.basePlotModule;var o={type:null},s=f({},a),l=f({},n.attributes);t.crawl(l,(function(e,t,n,r,i){p(s,i).set(void 0),void 0===e&&p(l,i).set(void 0)})),f(o,s),r.traceIs(e,"noOpacity")&&delete o.opacity;r.traceIs(e,"showLegend")||(delete o.showlegend,delete o.legendgroup);r.traceIs(e,"noHover")&&(delete o.hoverinfo,delete o.hoverlabel);n.selectPoints||delete o.selectedpoints;f(o,l),i.attributes&&f(o,i.attributes);o.type=e;var c={meta:n.meta||{},categories:n.categories||{},animatable:Boolean(n.animatable),type:e,attributes:k(o)};if(n.layoutAttributes){var u={};f(u,n.layoutAttributes),c.layoutAttributes=k(u)}n.animatable||t.crawl(c,(function(e){t.isValObject(e)&&"anim"in e&&delete e.anim}));return c}(n)}));var n={};return Object.keys(r.transformsRegistry).forEach((function(e){n[e]=function(e){var t=r.transformsRegistry[e],n=f({},t.attributes);return Object.keys(r.componentsRegistry).forEach((function(t){var i=r.componentsRegistry[t];i.schema&&i.schema.transforms&&i.schema.transforms[e]&&Object.keys(i.schema.transforms[e]).forEach((function(t){T(n,i.schema.transforms[e][t],t)}))})),{attributes:k(n)}}(e)})),{defs:{valObjects:m,metaKeys:b.concat(["description","role","editType","impliedEdits"]),editType:{traces:u.traces,layout:u.layout},impliedEdits:{description:["Sometimes when an attribute is changed, other attributes","must be altered as well in order to achieve the intended","result. For example, when `range` is specified, it is","important to set `autorange` to `false` or the new `range`","value would be lost in the redraw. `impliedEdits` is the","mechanism to do this: `impliedEdits: {autorange: false}`.","Each key is a relative paths to the attribute string to","change, using *^* to ascend into the parent container,","for example `range[0]` has `impliedEdits: {*^autorange*: false}`.","A value of `undefined` means that the attribute will not be","changed, but its previous value should be recorded in case","we want to reverse this change later. For example, `autorange`","has `impliedEdits: {*range[0]*: undefined, *range[1]*:undefined}","because the range will likely be changed by redraw."].join(" ")}},traces:e,layout:w(),transforms:n,frames:A(),animation:k(l),config:k(c)}},t.crawl=function(e,n,r,i){var a=r||0;i=i||"",Object.keys(e).forEach((function(r){var o=e[r];if(-1===b.indexOf(r)){var s=(i?i+".":"")+r;n(o,r,e,a,s),t.isValObject(o)||d(o)&&"impliedEdits"!==r&&t.crawl(o,n,a+1,s)}}))},t.isValObject=function(e){return e&&void 0!==e.valType},t.findArrayAttributes=function(e){var n,r,i=[],o=[],s=[];function l(e,t,r,i){o=o.slice(0,i).concat([t]),s=s.slice(0,i).concat([e&&e._isLinkedToArray]),e&&("data_array"===e.valType||!0===e.arrayOk)&&!("colorbar"===o[i-1]&&("ticktext"===t||"tickvals"===t))&&c(n,0,"")}function c(e,t,n){var a=e[o[t]],l=n+o[t];if(t===o.length-1)h(a)&&i.push(r+l);else if(s[t]){if(Array.isArray(a))for(var u=0;u<a.length;u++)d(a[u])&&c(a[u],t+1,l+"["+u+"].")}else d(a)&&c(a,t+1,l+".")}n=e,r="",t.crawl(a,l),e._module&&e._module.attributes&&t.crawl(e._module.attributes,l);var u=e.transforms;if(u)for(var f=0;f<u.length;f++){var p=u[f],m=p._module;m&&(r="transforms["+f+"].",n=p,t.crawl(m.attributes,l))}return i},t.getTraceValObject=function(e,t){var n,i,o=t[0],s=1;if("transforms"===o){if(1===t.length)return a.transforms;var l=e.transforms;if(!Array.isArray(l)||!l.length)return!1;var c=t[1];if(!_(c)||c>=l.length)return!1;i=(n=(r.transformsRegistry[l[c].type]||{}).attributes)&&n[t[2]],s=3}else{var u=e._module;if(u||(u=(r.modules[e.type||a.type.dflt]||{})._module),!u)return!1;if(!(i=(n=u.attributes)&&n[o])){var f=u.basePlotModule;f&&f.attributes&&(i=f.attributes[o])}i||(i=a[o])}return x(i,t,s)},t.getLayoutValObject=function(e,t){var n=function(e,t){var n,i,a,s,l=e._basePlotModules;if(l){var c;for(n=0;n<l.length;n++){if((a=l[n]).attrRegex&&a.attrRegex.test(t)){if(a.layoutAttrOverrides)return a.layoutAttrOverrides;!c&&a.layoutAttributes&&(c=a.layoutAttributes)}var u=a.baseLayoutAttrOverrides;if(u&&t in u)return u[t]}if(c)return c}var f=e._modules;if(f)for(n=0;n<f.length;n++)if((s=f[n].layoutAttributes)&&t in s)return s[t];for(i in r.componentsRegistry){if("colorscale"===(a=r.componentsRegistry[i]).name&&0===t.indexOf("coloraxis"))return a.layoutAttributes[t];if(!a.schema&&t===a.name)return a.layoutAttributes}return t in o&&o[t]}(e,t[0]);return x(n,t,1)}},65210:(e,t,n)=>{"use strict";var r=n(56319),i=n(85507),a="templateitemname",o={name:{valType:"string",editType:"none",description:["When used in a template, named items are created in the output figure","in addition to any items the figure already has in this array.","You can modify these items in the output figure by making your own","item with `templateitemname` matching this `name`","alongside your modifications (including `visible: false` or","`enabled: false` to hide it).","Has no effect outside of a template."].join(" ")}};function s(e){return e&&"string"==typeof e}function l(e){var t=e.length-1;return"s"!==e.charAt(t)&&r.warn("bad argument to arrayDefaultKey: "+e),e.substr(0,e.length-1)+"defaults"}o[a]={valType:"string",editType:"calc",description:["Used to refer to a named item in this array in the template. Named","items from the template will be created even without a matching item","in the input figure, but you can modify one by making an item with","`templateitemname` matching its `name`, alongside your modifications","(including `visible: false` or `enabled: false` to hide it).","If there is no template or no matching item, this item will be","hidden unless you explicitly show it with `visible: true`."].join(" ")},t.templatedArray=function(e,t){return t._isLinkedToArray=e,t.name=o.name,t[a]=o[a],t},t.traceTemplater=function(e){var t,n,a={};for(t in e)n=e[t],Array.isArray(n)&&n.length&&(a[t]=0);return{newTrace:function(o){var s={type:t=r.coerce(o,{},i,"type"),_template:null};if(t in a){n=e[t];var l=a[t]%n.length;a[t]++,s._template=n[l]}return s}}},t.newContainer=function(e,t,n){var i=e._template,a=i&&(i[t]||n&&i[n]);return r.isPlainObject(a)||(a=null),e[t]={_template:a}},t.arrayTemplater=function(e,t,n){var r=e._template,i=r&&r[l(t)],o=r&&r[t];Array.isArray(o)&&o.length||(o=[]);var c={};return{newItem:function(e){var t={name:e.name,_input:e},r=t[a]=e[a];if(!s(r))return t._template=i,t;for(var l=0;l<o.length;l++){var u=o[l];if(u.name===r)return c[r]=1,t._template=u,t}return t[n]=e[n]||!1,t._template=!1,t},defaultItems:function(){for(var e=[],t=0;t<o.length;t++){var n=o[t],r=n.name;if(s(r)&&!c[r]){var i={_template:n,name:r,_input:{_templateitemname:r}};i[a]=n[a],e.push(i),c[r]=1}}return e}}},t.arrayDefaultKey=l,t.arrayEditor=function(e,t,n){var i=(r.nestedProperty(e,t).get()||[]).length,o=n._index,s=o>=i&&(n._input||{})._templateitemname;s&&(o=i);var l,c=t+"["+o+"]";function u(){l={},s&&(l[c]={},l[c][a]=s)}function f(e,t){s?r.nestedProperty(l[c],e).set(t):l[c+"."+e]=t}function d(){var e=l;return u(),e}return u(),{modifyBase:function(e,t){l[e]=t},modifyItem:f,getUpdateObj:d,applyUpdate:function(t,n){t&&f(t,n);var i=d();for(var a in i)r.nestedProperty(e,a).set(i[a])}}}},96099:(e,t,n)=>{"use strict";var r=n(93268),i=n(3360),a=n(31496),o=n(56319),s=n(56953),l=n(68857),c=n(53408),u=n(14797),f=n(74770),d=n(90039),h=n(596),p=n(12564),m=n(92397),g=m.enforce,v=m.clean,y=n(39065).doAutoRange,b="start",x="middle",_="end",w=n(56596).zindexSeparator;function A(e,t,n){for(var r=0;r<n.length;r++){var i=n[r][0],a=n[r][1];if(!(i[0]>=e[1]||i[1]<=e[0])&&(a[0]<t[1]&&a[1]>t[0]))return!0}return!1}function k(e){var n,i,s,l,f,m,g=e._fullLayout,v=g._size,y=v.p,b=h.list(e,"",!0);if(g._paperdiv.style({width:e._context.responsive&&g.autosize&&!e._context._hasZeroWidth&&!e.layout.width?"100%":g.width+"px",height:e._context.responsive&&g.autosize&&!e._context._hasZeroHeight&&!e.layout.height?"100%":g.height+"px"}).selectAll(".main-svg").call(u.setSize,g.width,g.height),e._context.setBackground(e,g.paper_bgcolor),t.drawMainTitle(e),d.manage(e),!g._has("cartesian"))return a.previousPromises(e);function x(e,t,n){var r=e._lw/2;return"x"===e._id.charAt(0)?t?"top"===n?t._offset-y-r:t._offset+t._length+y+r:v.t+v.h*(1-(e.position||0))+r%1:t?"right"===n?t._offset+t._length+y+r:t._offset-y-r:v.l+v.w*(e.position||0)+r%1}for(n=0;n<b.length;n++){var _=(l=b[n])._anchorAxis;l._linepositions={},l._lw=u.crispRound(e,l.linewidth,1),l._mainLinePosition=x(l,_,l.side),l._mainMirrorPosition=l.mirror&&_?x(l,_,p.OPPOSITE_SIDE[l.side]):null}var k=[],T=[],S=[],C=1===c.opacity(g.paper_bgcolor)&&1===c.opacity(g.plot_bgcolor)&&g.paper_bgcolor===g.plot_bgcolor;for(i in g._plots)if((s=g._plots[i]).mainplot)s.bg&&s.bg.remove(),s.bg=void 0;else{var O=s.xaxis.domain,R=s.yaxis.domain,N=s.plotgroup;if(A(O,R,S)&&-1===i.indexOf(w)){var L=N.node(),D=s.bg=o.ensureSingle(N,"rect","bg");L.insertBefore(D.node(),L.childNodes[0]),T.push(i)}else N.select("rect.bg").remove(),S.push([O,R]),C||(k.push(i),T.push(i))}var P,I,F,z,j,B,U,$,q,H,V,W,G,Y=g._bgLayer.selectAll(".bg").data(k);for(Y.enter().append("rect").classed("bg",!0),Y.exit().remove(),Y.each((function(e){g._plots[e].bg=r.select(this)})),n=0;n<T.length;n++)s=g._plots[T[n]],f=s.xaxis,m=s.yaxis,s.bg&&void 0!==f._offset&&void 0!==m._offset&&s.bg.call(u.setRect,f._offset-y,m._offset-y,f._length+2*y,m._length+2*y).call(c.fill,g.plot_bgcolor).style("stroke-width",0);if(!g._hasOnlyLargeSploms)for(i in g._plots){s=g._plots[i],f=s.xaxis,m=s.yaxis;var X,K,Z=s.clipId="clip"+g._uid+i+"plot",J=o.ensureSingleById(g._clips,"clipPath",Z,(function(e){e.classed("plotclip",!0).append("rect")}));s.clipRect=J.select("rect").attr({width:f._length,height:m._length}),u.setTranslate(s.plot,f._offset,m._offset),s._hasClipOnAxisFalse?(X=null,K=Z):(X=Z,K=null),u.setClipUrl(s.plot,X,e),s.layerClipId=K}function Q(e){return"M"+P+","+e+"H"+I}function ee(e){return"M"+f._offset+","+e+"h"+f._length}function te(e){return"M"+e+","+$+"V"+U}function ne(e){return void 0!==m._shift&&(e+=m._shift),"M"+e+","+m._offset+"v"+m._length}function re(e,t,n){if(!e.showline||i!==e._mainSubplot)return"";if(!e._anchorAxis)return n(e._mainLinePosition);var r=t(e._mainLinePosition);return e.mirror&&(r+=t(e._mainMirrorPosition)),r}for(i in g._plots){s=g._plots[i],f=s.xaxis,m=s.yaxis;var ie="M0,0";E(f,i)&&(j=M(f,"left",m,b),P=f._offset-(j?y+j:0),B=M(f,"right",m,b),I=f._offset+f._length+(B?y+B:0),F=x(f,m,"bottom"),z=x(f,m,"top"),!(G=!f._anchorAxis||i!==f._mainSubplot)||"allticks"!==f.mirror&&"all"!==f.mirror||(f._linepositions[i]=[F,z]),ie=re(f,Q,ee),G&&f.showline&&("all"===f.mirror||"allticks"===f.mirror)&&(ie+=Q(F)+Q(z)),s.xlines.style("stroke-width",f._lw+"px").call(c.stroke,f.showline?f.linecolor:"rgba(0,0,0,0)")),s.xlines.attr("d",ie);var ae="M0,0";E(m,i)&&(V=M(m,"bottom",f,b),U=m._offset+m._length+(V?y:0),W=M(m,"top",f,b),$=m._offset-(W?y:0),q=x(m,f,"left"),H=x(m,f,"right"),!(G=!m._anchorAxis||i!==m._mainSubplot)||"allticks"!==m.mirror&&"all"!==m.mirror||(m._linepositions[i]=[q,H]),ae=re(m,te,ne),G&&m.showline&&("all"===m.mirror||"allticks"===m.mirror)&&(ae+=te(q)+te(H)),s.ylines.style("stroke-width",m._lw+"px").call(c.stroke,m.showline?m.linecolor:"rgba(0,0,0,0)")),s.ylines.attr("d",ae)}return h.makeClipPaths(e),a.previousPromises(e)}function E(e,t){return(e.ticks||e.showline)&&(t===e._mainSubplot||"all"===e.mirror||"allticks"===e.mirror)}function T(e,t,n){if(!n.showline||!n._lw)return!1;if("all"===n.mirror||"allticks"===n.mirror)return!0;var r=n._anchorAxis;if(!r)return!1;var i=p.FROM_BL[t];return n.side===t?r.domain[i]===e.domain[i]:n.mirror&&r.domain[1-i]===e.domain[1-i]}function M(e,t,n,r){if(T(e,t,n))return n._lw;for(var i=0;i<r.length;i++){var a=r[i];if(a._mainAxis===n._mainAxis&&T(e,t,a))return a._lw}return 0}function S(e){return"top"===e?p.CAP_SHIFT+.3+"em":"bottom"===e?"-0.3em":p.MID_SHIFT+"em"}t.layoutStyles=function(e){return o.syncOrAsync([a.doAutoMargin,k],e)},t.drawMainTitle=function(e){var t=e._fullLayout.title,n=e._fullLayout,i=function(e){var t=e.title,n=x;o.isRightAnchor(t)?n=_:o.isLeftAnchor(t)&&(n=b);return n}(n),l=function(e){var t=e.title,n="0em";o.isTopAnchor(t)?n=p.CAP_SHIFT+"em":o.isMiddleAnchor(t)&&(n=p.MID_SHIFT+"em");return n}(n),c=function(e,t){var n=e.title,r=e._size,i=0;"0em"!==t&&t?t===p.CAP_SHIFT+"em"&&(i=n.pad.t):i=-n.pad.b;return"auto"===n.y?r.t/2:"paper"===n.yref?r.t+r.h-r.h*n.y+i:e.height-e.height*n.y+i}(n,l),d=function(e,t){var n=e.title,r=e._size,i=0;t===b?i=n.pad.l:t===_&&(i=-n.pad.r);if("paper"===n.xref)return r.l+r.w*n.x+i;return e.width*n.x+i}(n,i);if(f.draw(e,"gtitle",{propContainer:n,propName:"title.text",subtitlePropName:"title.subtitle.text",placeholder:n._dfltTitle.plot,subtitlePlaceholder:n._dfltTitle.subtitle,attributes:{x:d,y:c,"text-anchor":i,dy:l}}),t.text&&t.automargin){var h=r.selectAll(".gtitle"),m=u.bBox(r.selectAll(".g-gtitle").node()).height,g=function(e,t,n){var r=t.y,i=t.yanchor,a=r>.5?"t":"b",o=e._fullLayout.margin[a],s=0;"paper"===t.yref?s=n+t.pad.t+t.pad.b:"container"===t.yref&&(s=function(e,t,n,r,i){var a=0;"middle"===n&&(a+=i/2);"t"===e?("top"===n&&(a+=i),a+=r-t*r):("bottom"===n&&(a+=i),a+=t*r);return a}(a,r,i,e._fullLayout.height,n)+t.pad.t+t.pad.b);if(s>o)return s;return 0}(e,t,m);if(g>0){!function(e,t,n,r){var i="title.automargin",s=e._fullLayout.title,l=s.y>.5?"t":"b",c={x:s.x,y:s.y,t:0,b:0},u={};"paper"===s.yref&&function(e,t,n,r,i){var a="paper"===t.yref?e._fullLayout._size.h:e._fullLayout.height,s=o.isTopAnchor(t)?r:r-i,l="b"===n?a-s:s;return!(o.isTopAnchor(t)&&"t"===n||o.isBottomAnchor(t)&&"b"===n)&&l<i}(e,s,l,t,r)?c[l]=n:"container"===s.yref&&(u[l]=n,e._fullLayout._reservedMargin[i]=u);a.allowAutoMargin(e,i),a.autoMargin(e,i,c)}(e,c,g,m),h.attr({x:d,y:c,"text-anchor":i,dy:S(t.yanchor)}).call(s.positionText,d,c);var v=(t.text.match(s.BR_TAG_ALL)||[]).length;if(v){var y=p.LINE_SPACING*v+p.MID_SHIFT;0===t.y&&(y=-y),h.selectAll(".line").each((function(){var e=+this.getAttribute("dy").slice(0,-2)-y+"em";this.setAttribute("dy",e)}))}var w=r.selectAll(".gtitle-subtitle");if(w.node()){var A=h.node().getBBox(),k=A.y+A.height+f.SUBTITLE_PADDING_EM*t.subtitle.font.size;w.attr({x:d,y:k,"text-anchor":i,dy:S(t.yanchor)}).call(s.positionText,d,k)}}}},t.doTraceStyle=function(e){var n,r=e.calcdata,o=[];for(n=0;n<r.length;n++){var s=r[n],c=s[0]||{},u=c.trace||{},f=u._module||{},d=f.arraysToCalcdata;d&&d(s,u);var h=f.editStyle;h&&o.push({fn:h,cd0:c})}if(o.length){for(n=0;n<o.length;n++){var p=o[n];p.fn(e,p.cd0)}l(e),t.redrawReglTraces(e)}return a.style(e),i.getComponentMethod("legend","draw")(e),a.previousPromises(e)},t.doColorBars=function(e){return i.getComponentMethod("colorbar","draw")(e),a.previousPromises(e)},t.layoutReplot=function(e){var t=e.layout;return e.layout=void 0,i.call("_doPlot",e,"",t)},t.doLegend=function(e){return i.getComponentMethod("legend","draw")(e),a.previousPromises(e)},t.doTicksRelayout=function(e){return h.draw(e,"redraw"),e._fullLayout._hasOnlyLargeSploms&&(i.subplotsRegistry.splom.updateGrid(e),l(e),t.redrawReglTraces(e)),t.drawMainTitle(e),a.previousPromises(e)},t.doModeBar=function(e){var t=e._fullLayout;d.manage(e);for(var n=0;n<t._basePlotModules.length;n++){var r=t._basePlotModules[n].updateFx;r&&r(e)}return a.previousPromises(e)},t.doCamera=function(e){for(var t=e._fullLayout,n=t._subplots.gl3d,r=0;r<n.length;r++){var i=t[n[r]];i._scene.setViewport(i)}},t.drawData=function(e){var n=e._fullLayout;l(e);for(var r=n._basePlotModules,o=0;o<r.length;o++)r[o].plot(e);return t.redrawReglTraces(e),a.style(e),i.getComponentMethod("selections","draw")(e),i.getComponentMethod("shapes","draw")(e),i.getComponentMethod("annotations","draw")(e),i.getComponentMethod("images","draw")(e),n._replotting=!1,a.previousPromises(e)},t.redrawReglTraces=function(e){var t=e._fullLayout;if(t._has("regl")){var n,r,i=e._fullData,a=[],s=[];for(t._hasOnlyLargeSploms&&t._splomGrid.draw(),n=0;n<i.length;n++){var l=i[n];!0===l.visible&&0!==l._length&&("splom"===l.type?t._splomScenes[l.uid].draw():"scattergl"===l.type?o.pushUnique(a,l.xaxis+l.yaxis):"scatterpolargl"===l.type&&o.pushUnique(s,l.subplot))}for(n=0;n<a.length;n++)(r=t._plots[a[n]])._scene&&r._scene.draw();for(n=0;n<s.length;n++)(r=t[s[n]]._subplot)._scene&&r._scene.draw()}},t.doAutoRangeAndConstraints=function(e){for(var t,n=h.list(e,"",!0),r={},i=0;i<n.length;i++)if(!r[(t=n[i])._id]){r[t._id]=1,v(e,t),y(e,t);var a=t._matchGroup;if(a)for(var o in a){var s=h.getFromId(e,o);y(e,s,t.range),r[o]=1}}g(e)},t.finalDraw=function(e){i.getComponentMethod("rangeslider","draw")(e),i.getComponentMethod("rangeselector","draw")(e)},t.drawMarginPushers=function(e){i.getComponentMethod("legend","draw")(e),i.getComponentMethod("rangeselector","draw")(e),i.getComponentMethod("sliders","draw")(e),i.getComponentMethod("updatemenus","draw")(e),i.getComponentMethod("colorbar","draw")(e)}},70927:(e,t,n)=>{"use strict";var r=n(56319),i=r.isPlainObject,a=n(72683),o=n(31496),s=n(85507),l=n(65210),c=n(78058).dfltConfig;function u(e,t){e=r.extendDeep({},e);var n,a,o=Object.keys(e).sort();function s(t,n,r){if(i(n)&&i(t))u(t,n);else if(Array.isArray(n)&&Array.isArray(t)){var o=l.arrayTemplater({_template:e},r);for(a=0;a<n.length;a++){var s=n[a],c=o.newItem(s)._template;c&&u(c,s)}var f=o.defaultItems();for(a=0;a<f.length;a++)n.push(f[a]._template);for(a=0;a<n.length;a++)delete n[a].templateitemname}}for(n=0;n<o.length;n++){var c=o[n],d=e[c];if(c in t?s(d,t[c],c):t[c]=d,f(c)===c)for(var h in t){var p=f(h);h===p||p!==c||h in e||s(d,t[h],c)}}}function f(e){return e.replace(/[0-9]+$/,"")}function d(e,t,n,a,o){var s=o&&n(o);for(var c in e){var u=e[c],h=m(e,c,a),p=m(e,c,o),g=n(p);if(!g){var v=f(c);v!==c&&(g=n(p=m(e,v,o)))}if((!s||s!==g)&&!(!g||g._noTemplating||"data_array"===g.valType||g.arrayOk&&Array.isArray(u)))if(!g.valType&&i(u))d(u,t,n,h,p);else if(g._isLinkedToArray&&Array.isArray(u))for(var y=!1,b=0,x={},_=0;_<u.length;_++){var w=u[_];if(i(w)){var A=w.name;if(A)x[A]||(d(w,t,n,m(u,b,h),m(u,b,p)),b++,x[A]=1);else if(!y){var k=m(e,l.arrayDefaultKey(c),a),E=m(u,b,h);d(w,t,n,E,m(u,b,p));var T=r.nestedProperty(t,E);r.nestedProperty(t,k).set(T.get()),T.set(null),y=!0}}}else{r.nestedProperty(t,h).set(u)}}}function h(e,t){return a.getLayoutValObject(e,r.nestedProperty({},t).parts)}function p(e,t){return a.getTraceValObject(e,r.nestedProperty({},t).parts)}function m(e,t,n){return n?Array.isArray(e)?n+"["+t+"]":n+"."+t:t}function g(e){for(var t=0;t<e.length;t++)if(i(e[t]))return!0}function v(e){var t;switch(e.code){case"data":t="The template has no key data.";break;case"layout":t="The template has no key layout.";break;case"missing":t=e.path?"There are no templates for item "+e.path+" with name "+e.templateitemname:"There are no templates for trace "+e.index+", of type "+e.traceType+".";break;case"unused":t=e.path?"The template item at "+e.path+" was not used in constructing the plot.":e.dataCount?"Some of the templates of type "+e.traceType+" were not used. The template has "+e.templateCount+" traces, the data only has "+e.dataCount+" of this type.":"The template has "+e.templateCount+" traces of type "+e.traceType+" but there are none in the data.";break;case"reused":t="Some of the templates of type "+e.traceType+" were used more than once. The template has "+e.templateCount+" traces, the data has "+e.dataCount+" of this type."}return e.msg=t,e}t.makeTemplate=function(e){e=r.isPlainObject(e)?e:r.getGraphDiv(e),e=r.extendDeep({_context:c},{data:e.data,layout:e.layout}),o.supplyDefaults(e);var t=e.data||[],n=e.layout||{};n._basePlotModules=e._fullLayout._basePlotModules,n._modules=e._fullLayout._modules;var a={data:{},layout:{}};t.forEach((function(e){var t={};d(e,t,p.bind(null,e));var n=r.coerce(e,{},s,"type"),i=a.data[n];i||(i=a.data[n]=[]),i.push(t)})),d(n,a.layout,h.bind(null,n)),delete a.layout.template;var l=n.template;if(i(l)){var f,m,g,v,y,b,x=l.layout;i(x)&&u(x,a.layout);var _=l.data;if(i(_)){for(m in a.data)if(g=_[m],Array.isArray(g)){for(b=(y=a.data[m]).length,v=g.length,f=0;f<b;f++)u(g[f%v],y[f]);for(f=b;f<v;f++)y.push(r.extendDeep({},g[f]))}for(m in _)m in a.data||(a.data[m]=r.extendDeep([],_[m]))}}return a},t.validateTemplate=function(e,t){var n=r.extendDeep({},{_context:c,data:e.data,layout:e.layout}),a=n.layout||{};i(t)||(t=a.template||{});var s=t.layout,l=t.data,u=[];n.layout=a,n.layout.template=t,o.supplyDefaults(n);var d=n._fullLayout,h=n._fullData,p={};if(i(s)?(!function e(t,n){for(var r in t)if("_"!==r.charAt(0)&&i(t[r])){var a,o=f(r),s=[];for(a=0;a<n.length;a++)s.push(m(t,r,n[a])),o!==r&&s.push(m(t,o,n[a]));for(a=0;a<s.length;a++)p[s[a]]=1;e(t[r],s)}}(d,["layout"]),function e(t,n){for(var r in t)if(-1===r.indexOf("defaults")&&i(t[r])){var a=m(t,r,n);p[a]?e(t[r],a):u.push({code:"unused",path:a})}}(s,"layout")):u.push({code:"layout"}),i(l)){for(var y,b={},x=0;x<h.length;x++){var _=h[x];b[y=_.type]=(b[y]||0)+1,_._fullInput._template||u.push({code:"missing",index:_._fullInput.index,traceType:y})}for(y in l){var w=l[y].length,A=b[y]||0;w>A?u.push({code:"unused",traceType:y,templateCount:w,dataCount:A}):A>w&&u.push({code:"reused",traceType:y,templateCount:w,dataCount:A})}}else u.push({code:"data"});if(function e(t,n){for(var r in t)if("_"!==r.charAt(0)){var a=t[r],o=m(t,r,n);i(a)?(Array.isArray(t)&&!1===a._template&&a.templateitemname&&u.push({code:"missing",path:o,templateitemname:a.templateitemname}),e(a,o)):Array.isArray(a)&&g(a)&&e(a,o)}}({data:h,layout:d},""),u.length)return u.map(v)}},95093:(e,t,n)=>{"use strict";var r=n(5605),i=n(89138),a=n(31496),o=n(56319),s=n(33677),l=n(82469),c=n(88604),u=n(96911).version,f={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png",description:"Sets the format of exported image."},width:{valType:"number",min:1,description:["Sets the exported image width.","Defaults to the value found in `layout.width`","If set to *null*, the exported image width will match the current graph width."].join(" ")},height:{valType:"number",min:1,description:["Sets the exported image height.","Defaults to the value found in `layout.height`","If set to *null*, the exported image height will match the current graph height."].join(" ")},scale:{valType:"number",min:0,dflt:1,description:["Sets a scaling for the generated image.","If set, all features of a graphs (e.g. text, line width)","are scaled, unlike simply setting","a bigger *width* and *height*."].join(" ")},setBackground:{valType:"any",dflt:!1,description:["Sets the image background mode.","By default, the image background is determined by `layout.paper_bgcolor`,","the *transparent* mode.","One might consider setting `setBackground` to *opaque*","when exporting a *jpeg* image as JPEGs do not support opacity."].join(" ")},imageDataOnly:{valType:"boolean",dflt:!1,description:["Determines whether or not the return value is prefixed by","the image format's corresponding 'data:image;' spec."].join(" ")}};e.exports=function(e,t){var n,d,h,p;function m(e){return!(e in t)||o.validate(t[e],f[e])}if(t=t||{},o.isPlainObject(e)?(n=e.data||[],d=e.layout||{},h=e.config||{},p={}):(e=o.getGraphDiv(e),n=o.extendDeep([],e.data),d=o.extendDeep({},e.layout),h=e._context,p=e._fullLayout||{}),!m("width")&&null!==t.width||!m("height")&&null!==t.height)throw new Error("Height and width should be pixel values.");if(!m("format"))throw new Error("Export format is not "+o.join2(f.format.values,", "," or ")+".");var g={};function v(e,n){return o.coerce(t,g,f,e,n)}var y=v("format"),b=v("width"),x=v("height"),_=v("scale"),w=v("setBackground"),A=v("imageDataOnly"),k=document.createElement("div");k.style.position="absolute",k.style.left="-5000px",document.body.appendChild(k);var E=o.extendFlat({},d);b?E.width=b:null===t.width&&r(p.width)&&(E.width=p.width),x?E.height=x:null===t.height&&r(p.height)&&(E.height=p.height);var T=o.extendFlat({},h,{_exportedPlot:!0,staticPlot:!0,setBackground:w}),M=s.getRedrawFunc(k);function S(){return new Promise((function(e){setTimeout(e,s.getDelay(k._fullLayout))}))}function C(){return new Promise((function(e,t){var n=l(k,y,_),r=k._fullLayout.width,f=k._fullLayout.height;function d(){i.purge(k),document.body.removeChild(k)}if("full-json"===y){var h=a.graphJson(k,!1,"keepdata","object",!0,!0);return h.version=u,h=JSON.stringify(h),d(),e(A?h:s.encodeJSON(h))}if(d(),"svg"===y)return e(A?n:s.encodeSVG(n));var p=document.createElement("canvas");p.id=o.randstr(),c({format:y,width:r,height:f,scale:_,canvas:p,svg:n,promise:!0}).then(e).catch(t)}))}return new Promise((function(e,t){i.newPlot(k,n,E,T).then(M).then(S).then(C).then((function(t){e(function(e){return A?e.replace(s.IMAGE_URL_PREFIX,""):e}(t))})).catch((function(e){t(e)}))}))}},37236:(e,t,n)=>{"use strict";var r=n(56319),i=n(31496),a=n(72683),o=n(78058).dfltConfig,s=r.isPlainObject,l=Array.isArray,c=r.isArrayOrTypedArray;function u(e,t,n,i,a,o){o=o||[];for(var f=Object.keys(e),d=0;d<f.length;d++){var g=f[d];if("transforms"!==g){var v=o.slice();v.push(g);var y=e[g],b=t[g],x=m(n,g),_=(x||{}).valType,w="info_array"===_,A="colorscale"===_,k=(x||{}).items;if(p(n,g))if(s(y)&&s(b)&&"any"!==_)u(y,b,x,i,a,v);else if(w&&l(y)){y.length>b.length&&i.push(h("unused",a,v.concat(b.length)));var E,T,M,S,C,O=b.length,R=Array.isArray(k);if(R&&(O=Math.min(O,k.length)),2===x.dimensions)for(T=0;T<O;T++)if(l(y[T])){y[T].length>b[T].length&&i.push(h("unused",a,v.concat(T,b[T].length)));var N=b[T].length;for(E=0;E<(R?Math.min(N,k[T].length):N);E++)M=R?k[T][E]:k,S=y[T][E],C=b[T][E],r.validate(S,M)?C!==S&&C!==+S&&i.push(h("dynamic",a,v.concat(T,E),S,C)):i.push(h("value",a,v.concat(T,E),S))}else i.push(h("array",a,v.concat(T),y[T]));else for(T=0;T<O;T++)M=R?k[T]:k,S=y[T],C=b[T],r.validate(S,M)?C!==S&&C!==+S&&i.push(h("dynamic",a,v.concat(T),S,C)):i.push(h("value",a,v.concat(T),S))}else if(x.items&&!w&&l(y)){var L,D,P=k[Object.keys(k)[0]],I=[];for(L=0;L<b.length;L++){var F=b[L]._index||L;if((D=v.slice()).push(F),s(y[F])&&s(b[L])){I.push(F);var z=y[F],j=b[L];s(z)&&!1!==z.visible&&!1===j.visible?i.push(h("invisible",a,D)):u(z,j,P,i,a,D)}}for(L=0;L<y.length;L++)(D=v.slice()).push(L),s(y[L])?-1===I.indexOf(L)&&i.push(h("unused",a,D)):i.push(h("object",a,D,y[L]))}else!s(y)&&s(b)?i.push(h("object",a,v,y)):c(y)||!c(b)||w||A?g in t?r.validate(y,x)?"enumerated"===x.valType&&(x.coerceNumber&&y!==+b||y!==b)&&i.push(h("dynamic",a,v,y,b)):i.push(h("value",a,v,y)):i.push(h("unused",a,v,y)):i.push(h("array",a,v,y));else i.push(h("schema",a,v))}}return i}e.exports=function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});var n,c,f=a.get(),d=[],p={_context:r.extendFlat({},o)};l(e)?(p.data=r.extendDeep([],e),n=e):(p.data=[],n=[],d.push(h("array","data"))),s(t)?(p.layout=r.extendDeep({},t),c=t):(p.layout={},c={},arguments.length>1&&d.push(h("object","layout"))),i.supplyDefaults(p);for(var m=p._fullData,g=n.length,v=0;v<g;v++){var y=n[v],b=["data",v];if(s(y)){var x=m[v],_=x.type,w=f.traces[_].attributes;w.type={valType:"enumerated",values:[_]},!1===x.visible&&!1!==y.visible&&d.push(h("invisible",b)),u(y,x,w,d,b);var A=y.transforms,k=x.transforms;if(A){l(A)||d.push(h("array",b,["transforms"])),b.push("transforms");for(var E=0;E<A.length;E++){var T=["transforms",E],M=A[E].type;if(s(A[E])){var S=f.transforms[M]?f.transforms[M].attributes:{};S.type={valType:"enumerated",values:Object.keys(f.transforms)},u(A[E],k[E],S,d,b,T)}else d.push(h("object",b,T))}}}else d.push(h("object",b))}var C=p._fullLayout,O=function(e,t){for(var n=e.layout.layoutAttributes,i=0;i<t.length;i++){var a=t[i],o=e.traces[a.type],s=o.layoutAttributes;s&&(a.subplot?r.extendFlat(n[o.attributes.subplot.dflt],s):r.extendFlat(n,s))}return n}(f,m);return u(c,C,O,d,"layout"),0===d.length?void 0:d};var f={object:function(e,t){return("layout"===e&&""===t?"The layout argument":"data"===e[0]&&""===t?"Trace "+e[1]+" in the data argument":d(e)+"key "+t)+" must be linked to an object container"},array:function(e,t){return("data"===e?"The data argument":d(e)+"key "+t)+" must be linked to an array container"},schema:function(e,t){return d(e)+"key "+t+" is not part of the schema"},unused:function(e,t,n){var r=s(n)?"container":"key";return d(e)+r+" "+t+" did not get coerced"},dynamic:function(e,t,n,r){return[d(e)+"key",t,"(set to '"+n+"')","got reset to","'"+r+"'","during defaults."].join(" ")},invisible:function(e,t){return(t?d(e)+"item "+t:"Trace "+e[1])+" got defaulted to be not visible"},value:function(e,t,n){return[d(e)+"key "+t,"is set to an invalid value ("+n+")"].join(" ")}};function d(e){return l(e)?"In data trace "+e[1]+", ":"In "+e+", "}function h(e,t,n,i,a){var o,s;n=n||"",l(t)?(o=t[0],s=t[1]):(o=t,s=null);var c=function(e){if(!l(e))return String(e);for(var t="",n=0;n<e.length;n++){var r=e[n];"number"==typeof r?t=t.substr(0,t.length-1)+"["+r+"]":t+=r,n<e.length-1&&(t+=".")}return t}(n),u=f[e](t,c,i,a);return r.log(u),{code:e,container:o,trace:s,path:n,astr:c,msg:u}}function p(e,t){var n=v(t),r=n.keyMinusId,i=n.id;return!!(r in e&&e[r]._isSubplotObj&&i)||t in e}function m(e,t){return t in e?e[t]:e[v(t).keyMinusId]}var g=r.counterRegex("([a-z]+)");function v(e){var t=e.match(g);return{keyMinusId:t&&t[1],id:t&&t[2]}}},19680:e=>{"use strict";e.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"],description:["Describes how a new animate call interacts with currently-running","animations. If `immediate`, current animations are interrupted and","the new animation is started. If `next`, the current frame is allowed","to complete, after which the new animation is started. If `afterall`","all existing frames are animated to completion before the new animation","is started."].join(" ")},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward",description:["The direction in which to play the frames triggered by the animation call"].join(" ")},fromcurrent:{valType:"boolean",dflt:!1,description:["Play frames starting at the current frame instead of the beginning."].join(" ")},frame:{duration:{valType:"number",min:0,dflt:500,description:["The duration in milliseconds of each frame. If greater than the frame","duration, it will be limited to the frame duration."].join(" ")},redraw:{valType:"boolean",dflt:!0,description:["Redraw the plot at completion of the transition. This is desirable","for transitions that include properties that cannot be transitioned,","but may significantly slow down updates that do not require a full","redraw of the plot"].join(" ")}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none",description:["The duration of the transition, in milliseconds. If equal to zero,","updates are synchronous."].join(" ")},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none",description:"The easing function used for the transition"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none",description:["Determines whether the figure's layout or traces smoothly transitions","during updates that make both traces and layout change."].join(" ")}}}},75078:(e,t,n)=>{"use strict";var r=n(56319),i=n(65210);e.exports=function(e,t,n){var a,o,s=n.name,l=n.inclusionAttr||"visible",c=t[s],u=r.isArrayOrTypedArray(e[s])?e[s]:[],f=t[s]=[],d=i.arrayTemplater(t,s,l);for(a=0;a<u.length;a++){var h=u[a];r.isPlainObject(h)?o=d.newItem(h):(o=d.newItem({}))[l]=!1,o._index=a,!1!==o[l]&&n.handleItemDefaults(h,o,t,n),f.push(o)}var p=d.defaultItems();for(a=0;a<p.length;a++)(o=p[a])._index=f.length,n.handleItemDefaults({},o,t,n,{}),f.push(o);if(r.isArrayOrTypedArray(c)){var m=Math.min(c.length,f.length);for(a=0;a<m;a++)r.relinkPrivateKeys(f[a],c[a])}return f}},85507:(e,t,n)=>{"use strict";var r=n(95323),i=n(88006);e.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc",description:["Determines whether or not this trace is visible.","If *legendonly*, the trace is not drawn,","but can appear as a legend item","(provided that the legend itself is visible)."].join(" ")},showlegend:{valType:"boolean",dflt:!0,editType:"style",description:["Determines whether or not an item corresponding to this","trace is shown in the legend."].join(" ")},legend:{valType:"subplotid",dflt:"legend",editType:"style",description:["Sets the reference to a legend to show this trace in.","References to these legends are *legend*, *legend2*, *legend3*, etc.","Settings for these legends are set in the layout, under","`layout.legend`, `layout.legend2`, etc."].join(" ")},legendgroup:{valType:"string",dflt:"",editType:"style",description:["Sets the legend group for this trace.","Traces and shapes part of the same legend group hide/show at the same time","when toggling legend items."].join(" ")},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style",description:["Sets the title of the legend group."].join(" ")},font:r({editType:"style",description:["Sets this legend group's title font."].join(" ")}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style",description:["Sets the legend rank for this trace.","Items and groups with smaller ranks are presented on top/left side while","with *reversed* `legend.traceorder` they are on bottom/right side.","The default legendrank is 1000,","so that you can use ranks less than 1000 to place certain items before all unranked items,","and ranks greater than 1000 to go after all unranked items.","When having unranked or equal rank items shapes would be displayed after traces","i.e. according to their order in data and layout."].join(" ")},legendwidth:{valType:"number",min:0,editType:"style",description:"Sets the width (in px or fraction) of the legend for this trace."},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style",description:"Sets the opacity of the trace."},name:{valType:"string",editType:"style",description:["Sets the trace name.","The trace name appears as the legend item and on hover."].join(" ")},uid:{valType:"string",editType:"plot",anim:!0,description:["Assign an id to this trace,","Use this to provide object constancy between traces during animations","and transitions."].join(" ")},ids:{valType:"data_array",editType:"calc",anim:!0,description:["Assigns id labels to each datum.","These ids for object constancy of data points during animation.","Should be an array of strings, not numbers or any other type."].join(" ")},customdata:{valType:"data_array",editType:"calc",description:["Assigns extra data each datum.","This may be useful when listening to hover, click and selection events.","Note that, *scatter* traces also appends customdata items in the markers","DOM elements"].join(" ")},meta:{valType:"any",arrayOk:!0,editType:"plot",description:["Assigns extra meta information associated with this trace","that can be used in various text attributes.","Attributes such as trace `name`, graph, axis and colorbar `title.text`, annotation `text`","`rangeselector`, `updatemenues` and `sliders` `label` text","all support `meta`.","To access the trace `meta` values in an attribute in the same trace, simply use","`%{meta[i]}` where `i` is the index or key of the `meta`","item in question.","To access trace `meta` in layout attributes, use","`%{data[n[.meta[i]}` where `i` is the index or key of the `meta`","and `n` is the trace index."].join(" ")},selectedpoints:{valType:"any",editType:"calc",description:["Array containing integer indices of selected points.","Has an effect only for traces that support selections.","Note that an empty array means an empty selection where the `unselected`","are turned on for all points, whereas, any other non-array values means no","selection all where the `selected` and `unselected` styles have no effect."].join(" ")},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none",description:["Determines which trace information appear on hover.","If `none` or `skip` are set, no information is displayed upon hovering.","But, if `none` is set, click and hover events are still fired."].join(" ")},hoverlabel:i.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc",description:["The stream id number links a data trace on a plot with a stream.","See https://chart-studio.plotly.com/settings for more details."].join(" ")},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc",description:["Sets the maximum number of points to keep on the plots from an","incoming stream.","If `maxpoints` is set to *50*, only the newest 50 points will","be displayed on the plot."].join(" ")},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc",description:["WARNING: All transforms are deprecated and may be removed from the API in next major version.","An array of operations that manipulate the trace data,","for example filtering or sorting the data arrays."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of some user-driven changes to the trace:","`constraintrange` in `parcoords` traces, as well as some","`editable: true` modifications such as `name` and `colorbar.title`.","Defaults to `layout.uirevision`.","Note that other user-driven trace attribute changes are controlled","by `layout` attributes:","`trace.visible` is controlled by `layout.legend.uirevision`,","`selectedpoints` is controlled by `layout.selectionrevision`,","and `colorbar.(x|y)` (accessible with `config: {editable: true}`)","is controlled by `layout.editrevision`.","Trace changes are tracked by `uid`, which only falls back on trace","index if no `uid` is provided. So if your app can add/remove traces","before the end of the `data` array, such that the same trace has a","different index, you can still preserve user-driven changes if you","give each trace a `uid` that stays with it as it moves."].join(" ")}}},29850:(e,t,n)=>{"use strict";var r=n(5605),i=n(56319),a=i.dateTime2ms,o=i.incrementMonth,s=n(33351).ONEAVGMONTH;e.exports=function(e,t,n,i){if("date"!==t.type)return{vals:i};var l=e[n+"periodalignment"];if(!l)return{vals:i};var c,u=e[n+"period"];if(r(u)){if((u=+u)<=0)return{vals:i}}else if("string"==typeof u&&"M"===u.charAt(0)){var f=+u.substring(1);if(!(f>0&&Math.round(f)===f))return{vals:i};c=f}for(var d=t.calendar,h="start"===l,p="end"===l,m=e[n+"period0"],g=a(m,d)||0,v=[],y=[],b=[],x=i.length,_=0;_<x;_++){var w,A,k,E=i[_];if(c){for(w=Math.round((E-g)/(c*s)),k=o(g,c*w,d);k>E;)k=o(k,-c,d);for(;k<=E;)k=o(k,c,d);A=o(k,-c,d)}else{for(k=g+(w=Math.round((E-g)/u))*u;k>E;)k-=u;for(;k<=E;)k+=u;A=k-u}v[_]=h?A:p?k:(A+k)/2,y[_]=A,b[_]=k}return{vals:v,starts:y,ends:b}}},56448:e=>{"use strict";e.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's x coordinates and","a 2D cartesian x axis.","If *x* (the default value), the x coordinates refer to","`layout.xaxis`.","If *x2*, the x coordinates refer to `layout.xaxis2`, and so on."].join(" ")},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's y coordinates and","a 2D cartesian y axis.","If *y* (the default value), the y coordinates refer to","`layout.yaxis`.","If *y2*, the y coordinates refer to `layout.yaxis2`, and so on."].join(" ")}}},39065:(e,t,n)=>{"use strict";var r=n(93268),i=n(5605),a=n(56319),o=n(33351).FP_SAFE,s=n(3360),l=n(14797),c=n(33489),u=c.getFromId,f=c.isLinked;function d(e,t){var n,r,i=[],o=e._fullLayout,s=p(o,t,0),l=p(o,t,1),c=g(e,t),u=c.min,f=c.max;if(0===u.length||0===f.length)return a.simpleMap(t.range,t.r2l);var d=u[0].val,m=f[0].val;for(n=1;n<u.length&&d===m;n++)d=Math.min(d,u[n].val);for(n=1;n<f.length&&d===m;n++)m=Math.max(m,f[n].val);var v=t.autorange,y="reversed"===v||"min reversed"===v||"max reversed"===v;if(!y&&t.range){var b=a.simpleMap(t.range,t.r2l);y=b[1]<b[0]}"reversed"===t.autorange&&(t.autorange=!0);var x,_,w,A,E,T,M=t.rangemode,S="tozero"===M,C="nonnegative"===M,O=t._length,R=O/10,N=0;for(n=0;n<u.length;n++)for(x=u[n],r=0;r<f.length;r++)(T=(_=f[r]).val-x.val-h(t,x.val,_.val))>0&&((E=O-s(x)-l(_))>R?T/E>N&&(w=x,A=_,N=T/E):T/O>N&&(w={val:x.val,nopad:1},A={val:_.val,nopad:1},N=T/O));if(d===m){var L=d-1,D=d+1;if(S)if(0===d)i=[0,1];else{var P=(d>0?f:u).reduce((function(e,t){return Math.max(e,l(t))}),0),I=d/(1-Math.min(.5,P/O));i=d>0?[0,I]:[I,0]}else i=C?[Math.max(0,L),Math.max(1,D)]:[L,D]}else S?(w.val>=0&&(w={val:0,nopad:1}),A.val<=0&&(A={val:0,nopad:1})):C&&(w.val-N*s(w)<0&&(w={val:0,nopad:1}),A.val<=0&&(A={val:1,nopad:1})),N=(A.val-w.val-h(t,x.val,_.val))/(O-s(w)-l(A)),i=[w.val-N*s(w),A.val+N*l(A)];return i=k(i,t),t.limitRange&&t.limitRange(),y&&i.reverse(),a.simpleMap(i,t.l2r||Number)}function h(e,t,n){var r=0;if(e.rangebreaks)for(var i=e.locateBreaks(t,n),a=0;a<i.length;a++){var o=i[a];r+=o.max-o.min}return r}function p(e,t,n){var i=.05*t._length,o=t._anchorAxis||{};if(-1!==(t.ticklabelposition||"").indexOf("inside")||-1!==(o.ticklabelposition||"").indexOf("inside")){var s=t.isReversed();if(!s){var c=a.simpleMap(t.range,t.r2l);s=c[1]<c[0]}s&&(n=!n)}var u=0;return f(e,t._id)||(u=function(e,t,n){var i=0,o="x"===t._id.charAt(0);for(var s in e._plots){var c=e._plots[s];if(t._id===c.xaxis._id||t._id===c.yaxis._id){var u=(o?c.yaxis:c.xaxis)||{};if(-1!==(u.ticklabelposition||"").indexOf("inside")&&(!n&&("left"===u.side||"bottom"===u.side)||n&&("top"===u.side||"right"===u.side))){if(u._vals){var f=a.deg2rad(u._tickAngles[u._id+"tick"]||0),d=Math.abs(Math.cos(f)),h=Math.abs(Math.sin(f));if(!u._vals[0].bb){var p=u._id+"tick";u._selections[p].each((function(e){var t=r.select(this);t.select(".text-math-group").empty()&&(e.bb=l.bBox(t.node()))}))}for(var g=0;g<u._vals.length;g++){var v=u._vals[g].bb;if(v){var y=2*m+v.width,b=2*m+v.height;i=Math.max(i,o?Math.max(y*d,b*h):Math.max(b*d,y*h))}}}"inside"===u.ticks&&"inside"===u.ticklabelposition&&(i+=u.ticklen||0)}}}return i}(e,t,n)),i=Math.max(u,i),"domain"===t.constrain&&t._inputDomain&&(i*=(t._inputDomain[1]-t._inputDomain[0])/(t.domain[1]-t.domain[0])),function(e){return e.nopad?0:e.pad+(e.extrapad?i:u)}}e.exports={applyAutorangeOptions:k,getAutoRange:d,makePadFn:p,doAutoRange:function(e,t,n){if(t.setScale(),t.autorange){t.range=n?n.slice():d(e,t),t._r=t.range.slice(),t._rl=a.simpleMap(t._r,t.r2l);var r=t._input,i={};i[t._attr+".range"]=t.range,i[t._attr+".autorange"]=t.autorange,s.call("_storeDirectGUIEdit",e.layout,e._fullLayout._preGUI,i),r.range=t.range.slice(),r.autorange=t.autorange}var o=t._anchorAxis;if(o&&o.rangeslider){var l=o.rangeslider[t._name];l&&"auto"===l.rangemode&&(l.range=d(e,t)),o._input.rangeslider[t._name]=a.extendFlat({},l)}},findExtremes:function(e,t,n){n||(n={});e._m||e.setScale();var r,a,s,l,c,u,f,d,h,p=[],m=[],g=t.length,b=n.padded||!1,_=n.tozero&&("linear"===e.type||"-"===e.type),w="log"===e.type,A=!1,k=n.vpadLinearized||!1;function E(e){if(Array.isArray(e))return A=!0,function(t){return Math.max(Number(e[t]||0),0)};var t=Math.max(Number(e||0),0);return function(){return t}}var T=E((e._m>0?n.ppadplus:n.ppadminus)||n.ppad||0),M=E((e._m>0?n.ppadminus:n.ppadplus)||n.ppad||0),S=E(n.vpadplus||n.vpad),C=E(n.vpadminus||n.vpad);if(!A){if(d=1/0,h=-1/0,w)for(r=0;r<g;r++)(a=t[r])<d&&a>0&&(d=a),a>h&&a<o&&(h=a);else for(r=0;r<g;r++)(a=t[r])<d&&a>-o&&(d=a),a>h&&a<o&&(h=a);t=[d,h],g=2}var O={tozero:_,extrapad:b};function R(n){s=t[n],i(s)&&(u=T(n),f=M(n),k?(l=e.c2l(s)-C(n),c=e.c2l(s)+S(n)):(d=s-C(n),h=s+S(n),w&&d<h/10&&(d=h/10),l=e.c2l(d),c=e.c2l(h)),_&&(l=Math.min(0,l),c=Math.max(0,c)),x(l)&&v(p,l,f,O),x(c)&&y(m,c,u,O))}var N=Math.min(6,g);for(r=0;r<N;r++)R(r);for(r=g-1;r>=N;r--)R(r);return{min:p,max:m,opts:n}},concatExtremes:g};var m=3;function g(e,t,n){var r,i,a,o=t._id,s=e._fullData,l=e._fullLayout,c=[],f=[];function d(e,t){for(r=0;r<t.length;r++){var n=e[t[r]],s=(n._extremes||{})[o];if(!0===n.visible&&s){for(i=0;i<s.min.length;i++)a=s.min[i],v(c,a.val,a.pad,{extrapad:a.extrapad});for(i=0;i<s.max.length;i++)a=s.max[i],y(f,a.val,a.pad,{extrapad:a.extrapad})}}}if(d(s,t._traceIndices),d(l.annotations||[],t._annIndices||[]),d(l.shapes||[],t._shapeIndices||[]),t._matchGroup&&!n)for(var h in t._matchGroup)if(h!==t._id){var p=u(e,h),m=g(e,p,!0),b=t._length/p._length;for(i=0;i<m.min.length;i++)a=m.min[i],v(c,a.val,a.pad*b,{extrapad:a.extrapad});for(i=0;i<m.max.length;i++)a=m.max[i],y(f,a.val,a.pad*b,{extrapad:a.extrapad})}return{min:c,max:f}}function v(e,t,n,r){b(e,t,n,r,_)}function y(e,t,n,r){b(e,t,n,r,w)}function b(e,t,n,r,i){for(var a=r.tozero,o=r.extrapad,s=!0,l=0;l<e.length&&s;l++){var c=e[l];if(i(c.val,t)&&c.pad>=n&&(c.extrapad||!o)){s=!1;break}i(t,c.val)&&c.pad<=n&&(o||!c.extrapad)&&(e.splice(l,1),l--)}if(s){var u=a&&0===t;e.push({val:t,pad:u?0:n,extrapad:!u&&o})}}function x(e){return i(e)&&Math.abs(e)<o}function _(e,t){return e<=t}function w(e,t){return e>=t}function A(e,t,n){return void 0===t||void 0===n||(t=e.d2l(t))<(n=e.d2l(n))}function k(e,t){if(!t||!t.autorangeoptions)return e;var n=e[0],r=e[1],i=t.autorangeoptions.include;if(void 0!==i){var o=t.d2l(n),s=t.d2l(r);a.isArrayOrTypedArray(i)||(i=[i]);for(var l=0;l<i.length;l++){var c=t.d2l(i[l]);o>=c&&(o=c,n=c),s<=c&&(s=c,r=c)}}return n=function(e,t){var n=t.autorangeoptions;return n&&void 0!==n.minallowed&&A(t,n.minallowed,n.maxallowed)?n.minallowed:n&&void 0!==n.clipmin&&A(t,n.clipmin,n.clipmax)?Math.max(e,t.d2l(n.clipmin)):e}(n,t),r=function(e,t){var n=t.autorangeoptions;return n&&void 0!==n.maxallowed&&A(t,n.minallowed,n.maxallowed)?n.maxallowed:n&&void 0!==n.clipmax&&A(t,n.clipmin,n.clipmax)?Math.min(e,t.d2l(n.clipmax)):e}(r,t),[n,r]}},90525:e=>{"use strict";e.exports=function(e,t,n){var r,i;if(n){var a="reversed"===t||"min reversed"===t||"max reversed"===t;r=n[a?1:0],i=n[a?0:1]}var o=e("autorangeoptions.minallowed",null===i?r:void 0),s=e("autorangeoptions.maxallowed",null===r?i:void 0);void 0===o&&e("autorangeoptions.clipmin"),void 0===s&&e("autorangeoptions.clipmax"),e("autorangeoptions.include")}},596:(e,t,n)=>{"use strict";var r=n(93268),i=n(5605),a=n(31496),o=n(3360),s=n(56319),l=s.strTranslate,c=n(56953),u=n(74770),f=n(53408),d=n(14797),h=n(31403),p=n(59545),m=n(33351),g=m.ONEMAXYEAR,v=m.ONEAVGYEAR,y=m.ONEMINYEAR,b=m.ONEMAXQUARTER,x=m.ONEAVGQUARTER,_=m.ONEMINQUARTER,w=m.ONEMAXMONTH,A=m.ONEAVGMONTH,k=m.ONEMINMONTH,E=m.ONEWEEK,T=m.ONEDAY,M=T/2,S=m.ONEHOUR,C=m.ONEMIN,O=m.ONESEC,R=m.ONEMILLI,N=m.ONEMICROSEC,L=m.MINUS_SIGN,D=m.BADNUM,P={K:"zeroline"},I={K:"gridline",L:"path"},F={K:"minor-gridline",L:"path"},z={K:"tick",L:"path"},j={K:"tick",L:"text"},B={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},U=n(12564),$=U.MID_SHIFT,q=U.CAP_SHIFT,H=U.LINE_SPACING,V=U.OPPOSITE_SIDE,W=e.exports={};W.setConvert=n(97121);var G=n(44992),Y=n(33489),X=Y.idSort,K=Y.isLinked;W.id2name=Y.id2name,W.name2id=Y.name2id,W.cleanId=Y.cleanId,W.list=Y.list,W.listIds=Y.listIds,W.getFromId=Y.getFromId,W.getFromTrace=Y.getFromTrace;var Z=n(39065);W.getAutoRange=Z.getAutoRange,W.findExtremes=Z.findExtremes;function J(e){var t=1e-4*(e[1]-e[0]);return[e[0]-t,e[1]+t]}W.coerceRef=function(e,t,n,r,i,a){var o=r.charAt(r.length-1),l=n._fullLayout._subplots[o+"axis"],c=r+"ref",u={};return i||(i=l[0]||("string"==typeof a?a:a[0])),a||(a=i),l=l.concat(l.map((function(e){return e+" domain"}))),u[c]={valType:"enumerated",values:l.concat(a?"string"==typeof a?[a]:a:[]),dflt:i},s.coerce(e,t,u,c)},W.getRefType=function(e){return void 0===e?e:"paper"===e?"paper":"pixel"===e?"pixel":/( domain)$/.test(e)?"domain":"range"},W.coercePosition=function(e,t,n,r,i,a){var o,l;if("range"!==W.getRefType(r))o=s.ensureNumber,l=n(i,a);else{var c=W.getFromId(t,r);l=n(i,a=c.fraction2r(a)),o=c.cleanPos}e[i]=o(l)},W.cleanPosition=function(e,t,n){return("paper"===n||"pixel"===n?s.ensureNumber:W.getFromId(t,n).cleanPos)(e)},W.redrawComponents=function(e,t){t=t||W.listIds(e);var n=e._fullLayout;function r(r,i,a,s){for(var l=o.getComponentMethod(r,i),c={},u=0;u<t.length;u++)for(var f=n[W.id2name(t[u])][a],d=0;d<f.length;d++){var h=f[d];if(!c[h]&&(l(e,h),c[h]=1,s))return}}r("annotations","drawOne","_annIndices"),r("shapes","drawOne","_shapeIndices"),r("images","draw","_imgIndices",!0),r("selections","drawOne","_selectionIndices")};var Q=W.getDataConversions=function(e,t,n,r){var i,a="x"===n||"y"===n||"z"===n?n:r;if(s.isArrayOrTypedArray(a)){if(i={type:G(r,void 0,{autotypenumbers:e._fullLayout.autotypenumbers}),_categories:[]},W.setConvert(i),"category"===i.type)for(var o=0;o<r.length;o++)i.d2c(r[o])}else i=W.getFromTrace(e,t,a);return i?{d2c:i.d2c,c2d:i.c2d}:"ids"===a?{d2c:te,c2d:te}:{d2c:ee,c2d:ee}};function ee(e){return+e}function te(e){return String(e)}function ne(e,t){return Math.abs((e/t+.5)%1-.5)<.001}function re(e,t){return Math.abs(e/t-1)<.001}function ie(e){return+e.substring(1)}function ae(e,t){return e.rangebreaks&&(t=t.filter((function(t){return e.maskBreaks(t.x)!==D}))),t}function oe(e){var t=e._mainAxis,n=[];if(t._vals)for(var r=0;r<t._vals.length;r++)if(!t._vals[r].noTick){var i=t.l2p(t._vals[r].x),a=e.p2l(i),o=W.tickText(e,a);t._vals[r].minor&&(o.minor=!0,o.text=""),n.push(o)}return n=ae(e,n)}function se(e,t){var n=J(s.simpleMap(e.range,e.r2l)),r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),a="category"===e.type?e.d2l_noadd:e.d2l;"log"===e.type&&"L"!==String(e.dtick).charAt(0)&&(e.dtick="L"+Math.pow(10,Math.floor(Math.min(e.range[0],e.range[1]))-1));for(var o=[],l=0;l<=1;l++)if((void 0===t||!(t&&l||!1===t&&!l))&&(!l||e.minor)){var c=l?e.minor.tickvals:e.tickvals,u=l?[]:e.ticktext;if(c){s.isArrayOrTypedArray(u)||(u=[]);for(var f=0;f<c.length;f++){var d=a(c[f]);if(d>r&&d<i){var h=W.tickText(e,d,!1,String(u[f]));l&&(h.minor=!0,h.text=""),o.push(h)}}}}return o=ae(e,o)}W.getDataToCoordFunc=function(e,t,n,r){return Q(e,t,n,r).d2c},W.counterLetter=function(e){var t=e.charAt(0);return"x"===t?"y":"y"===t?"x":void 0},W.minDtick=function(e,t,n,r){-1===["log","category","multicategory"].indexOf(e.type)&&r?void 0===e._minDtick?(e._minDtick=t,e._forceTick0=n):e._minDtick&&((e._minDtick/t+1e-6)%1<2e-6&&((n-e._forceTick0)/t%1+1.000001)%1<2e-6?(e._minDtick=t,e._forceTick0=n):((t/e._minDtick+1e-6)%1>2e-6||((n-e._forceTick0)/e._minDtick%1+1.000001)%1>2e-6)&&(e._minDtick=0)):e._minDtick=0},W.saveRangeInitial=function(e,t){for(var n=W.list(e,"",!0),r=!1,i=0;i<n.length;i++){var a=n[i],o=void 0===a._rangeInitial0&&void 0===a._rangeInitial1,s=o||a.range[0]!==a._rangeInitial0||a.range[1]!==a._rangeInitial1,l=a.autorange;(o&&!0!==l||t&&s)&&(a._rangeInitial0="min"===l||"max reversed"===l?void 0:a.range[0],a._rangeInitial1="max"===l||"min reversed"===l?void 0:a.range[1],a._autorangeInitial=l,r=!0)}return r},W.saveShowSpikeInitial=function(e,t){for(var n=W.list(e,"",!0),r=!1,i="on",a=0;a<n.length;a++){var o=n[a],s=void 0===o._showSpikeInitial,l=s||!(o.showspikes===o._showspikes);(s||t&&l)&&(o._showSpikeInitial=o.showspikes,r=!0),"on"!==i||o.showspikes||(i="off")}return e._fullLayout._cartesianSpikesEnabled=i,r},W.autoBin=function(e,t,n,r,a,o){var l,c=s.aggNums(Math.min,null,e),u=s.aggNums(Math.max,null,e);if("category"===t.type||"multicategory"===t.type)return{start:c-.5,end:u+.5,size:Math.max(1,Math.round(o)||1),_dataSpan:u-c};if(a||(a=t.calendar),l="log"===t.type?{type:"linear",range:[c,u]}:{type:t.type,range:s.simpleMap([c,u],t.c2r,0,a),calendar:a},W.setConvert(l),o=o&&p.dtick(o,l.type))l.dtick=o,l.tick0=p.tick0(void 0,l.type,a);else{var f;if(n)f=(u-c)/n;else{var d=s.distinctVals(e),h=Math.pow(10,Math.floor(Math.log(d.minDiff)/Math.LN10)),m=h*s.roundUp(d.minDiff/h,[.9,1.9,4.9,9.9],!0);f=Math.max(m,2*s.stdev(e)/Math.pow(e.length,r?.25:.4)),i(f)||(f=1)}W.autoTicks(l,f)}var g,v=l.dtick,y=W.tickIncrement(W.tickFirst(l),v,"reverse",a);if("number"==typeof v)y=function(e,t,n,r,a){var o=0,s=0,l=0,c=0;function u(t){return(1+100*(t-e)/n.dtick)%100<2}for(var f=0;f<t.length;f++)t[f]%1==0?l++:i(t[f])||c++,u(t[f])&&o++,u(t[f]+n.dtick/2)&&s++;var d=t.length-c;if(l===d&&"date"!==n.type)n.dtick<1?e=r-.5*n.dtick:(e-=.5)+n.dtick<r&&(e+=n.dtick);else if(s<.1*d&&(o>.3*d||u(r)||u(a))){var h=n.dtick/2;e+=e+h<r?h:-h}return e}(y,e,l,c,u),g=y+(1+Math.floor((u-y)/v))*v;else for("M"===l.dtick.charAt(0)&&(y=function(e,t,n,r,i){var a=s.findExactDates(t,i),o=.8;if(a.exactDays>o){var l=Number(n.substr(1));a.exactYears>o&&l%12==0?e=W.tickIncrement(e,"M6","reverse")+1.5*T:a.exactMonths>o?e=W.tickIncrement(e,"M1","reverse")+15.5*T:e-=M;var c=W.tickIncrement(e,n);if(c<=r)return c}return e}(y,e,v,c,a)),g=y,0;g<=u;)g=W.tickIncrement(g,v,!1,a);return{start:t.c2r(y,0,a),end:t.c2r(g,0,a),size:v,_dataSpan:u-c}},W.prepMinorTicks=function(e,t,n){if(!t.minor.dtick){delete e.dtick;var r,a=t.dtick&&i(t._tmin);if(a){var o=W.tickIncrement(t._tmin,t.dtick,!0);r=[t._tmin,.99*o+.01*t._tmin]}else{var l=s.simpleMap(t.range,t.r2l);r=[l[0],.8*l[0]+.2*l[1]]}if(e.range=s.simpleMap(r,t.l2r),e._isMinor=!0,W.prepTicks(e,n),a){var c=i(t.dtick),u=i(e.dtick),f=c?t.dtick:+t.dtick.substring(1),d=u?e.dtick:+e.dtick.substring(1);c&&u?ne(f,d)?f===2*E&&d===2*T&&(e.dtick=E):f===2*E&&d===3*T?e.dtick=E:f!==E||(t._input.minor||{}).nticks?re(f/d,2.5)?e.dtick=f/2:e.dtick=f:e.dtick=T:"M"===String(t.dtick).charAt(0)?u?e.dtick="M1":ne(f,d)?f>=12&&2===d&&(e.dtick="M3"):e.dtick=t.dtick:"L"===String(e.dtick).charAt(0)?"L"===String(t.dtick).charAt(0)?ne(f,d)||(e.dtick=re(f/d,2.5)?t.dtick/2:t.dtick):e.dtick="D1":"D2"===e.dtick&&+t.dtick>1&&(e.dtick=1)}e.range=t.range}void 0===t.minor._tick0Init&&(e.tick0=t.tick0)},W.prepTicks=function(e,t){var n=s.simpleMap(e.range,e.r2l,void 0,void 0,t);if("auto"===e.tickmode||!e.dtick){var r,a=e.nticks;a||("category"===e.type||"multicategory"===e.type?(r=e.tickfont?s.bigFont(e.tickfont.size||12):15,a=e._length/r):(r="y"===e._id.charAt(0)?40:80,a=s.constrain(e._length/r,4,9)+1),"radialaxis"===e._name&&(a*=2)),e.minor&&"array"!==e.minor.tickmode||"array"===e.tickmode&&(a*=100),e._roughDTick=Math.abs(n[1]-n[0])/a,W.autoTicks(e,e._roughDTick),e._minDtick>0&&e.dtick<2*e._minDtick&&(e.dtick=e._minDtick,e.tick0=e.l2r(e._forceTick0))}"period"===e.ticklabelmode&&function(e){var t;function n(){return!(i(e.dtick)||"M"!==e.dtick.charAt(0))}var r=n(),a=W.getTickFormat(e);if(a){var o=e._dtickInit!==e.dtick;/%[fLQsSMX]/.test(a)||(/%[HI]/.test(a)?(t=S,o&&!r&&e.dtick<S&&(e.dtick=S)):/%p/.test(a)?(t=M,o&&!r&&e.dtick<M&&(e.dtick=M)):/%[Aadejuwx]/.test(a)?(t=T,o&&!r&&e.dtick<T&&(e.dtick=T)):/%[UVW]/.test(a)?(t=E,o&&!r&&e.dtick<E&&(e.dtick=E)):/%[Bbm]/.test(a)?(t=A,o&&(r?ie(e.dtick)<1:e.dtick<k)&&(e.dtick="M1")):/%[q]/.test(a)?(t=x,o&&(r?ie(e.dtick)<3:e.dtick<_)&&(e.dtick="M3")):/%[Yy]/.test(a)&&(t=v,o&&(r?ie(e.dtick)<12:e.dtick<y)&&(e.dtick="M12")))}(r=n())&&e.tick0===e._dowTick0&&(e.tick0=e._rawTick0);e._definedDelta=t}(e),e.tick0||(e.tick0="date"===e.type?"2000-01-01":0),"date"===e.type&&e.dtick<.1&&(e.dtick=.1),ge(e)},W.calcTicks=function(e,t){for(var n,r,a,o,l=e.type,c=e.calendar,u=e.ticklabelstep,f="period"===e.ticklabelmode,d=e.range[0]>e.range[1],h=!e.ticklabelindex||s.isArrayOrTypedArray(e.ticklabelindex)?e.ticklabelindex:[e.ticklabelindex],p=s.simpleMap(e.range,e.r2l,void 0,void 0,t),m=p[1]<p[0],L=Math.min(p[0],p[1]),P=Math.max(p[0],p[1]),I=Math.max(1e3,e._length||0),F=[],z=[],j=[],B=[],U=[],$=e.minor&&(e.minor.ticks||e.minor.showgrid),q=1;q>=($?0:1);q--){var H=!q;q?(e._dtickInit=e.dtick,e._tick0Init=e.tick0):(e.minor._dtickInit=e.minor.dtick,e.minor._tick0Init=e.minor.tick0);var V=q?e:s.extendFlat({},e,e.minor);if(H?W.prepMinorTicks(V,e,t):W.prepTicks(V,t),"array"!==V.tickmode)if("sync"!==V.tickmode){var G=J(p),Y=G[0],X=G[1],K=i(V.dtick),Z="log"===l&&!(K||"L"===V.dtick.charAt(0)),Q=W.tickFirst(V,t);if(q){if(e._tmin=Q,Q<Y!==m)break;"category"!==l&&"multicategory"!==l||(X=m?Math.max(-.5,X):Math.min(e._categories.length-.5,X))}var ee,te,ne=null,re=Q;if(q)K?te=e.dtick:"date"===l?"string"==typeof e.dtick&&"M"===e.dtick.charAt(0)&&(te=A*e.dtick.substring(1)):te=e._roughDTick,ee=Math.round((e.r2l(re)-e.r2l(e.tick0))/te)-1;var ie=V.dtick;for(V.rangebreaks&&V._tick0Init!==V.tick0&&(re=Ie(re,e),m||(re=W.tickIncrement(re,ie,!m,c))),q&&f&&(re=W.tickIncrement(re,ie,!m,c),ee--);m?re>=X:re<=X;re=W.tickIncrement(re,ie,m,c)){if(q&&ee++,V.rangebreaks&&!m){if(re<Y)continue;if(V.maskBreaks(re)===D&&Ie(re,V)>=P)break}if(j.length>I||re===ne)break;ne=re;var ae={value:re};q?(Z&&re!==(0|re)&&(ae.simpleLabel=!0),u>1&&ee%u&&(ae.skipLabel=!0),j.push(ae)):(ae.minor=!0,B.push(ae))}}else j=[],F=oe(e);else q?(j=[],F=se(e,!H)):(B=[],z=se(e,!H))}if(!B||B.length<2)h=!1;else{var le=(B[1].value-B[0].value)*(d?-1:1);n=le,r=e.tickformat,(/%f/.test(r)?n>=N:/%L/.test(r)?n>=R:/%[SX]/.test(r)?n>=O:/%M/.test(r)?n>=C:/%[HI]/.test(r)?n>=S:/%p/.test(r)?n>=M:/%[Aadejuwx]/.test(r)?n>=T:/%[UVW]/.test(r)?n>=E:/%[Bbm]/.test(r)?n>=k:/%[q]/.test(r)?n>=_:!/%[Yy]/.test(r)||n>=y)||(h=!1)}if(h){var ce=j.concat(B);f&&j.length&&(ce=ce.slice(1)),(ce=ce.sort((function(e,t){return e.value-t.value})).filter((function(e,t,n){return 0===t||e.value!==n[t-1].value}))).map((function(e,t){return void 0!==e.minor||e.skipLabel?null:t})).filter((function(e){return null!==e})).forEach((function(e){h.map((function(t){var n=e+t;n>=0&&n<ce.length&&s.pushUnique(U,ce[n])}))}))}else U=j;if($&&!("inside"===e.minor.ticks&&"outside"===e.ticks||"outside"===e.minor.ticks&&"inside"===e.ticks)){for(var ue=j.map((function(e){return e.value})),fe=[],de=0;de<B.length;de++){var he=B[de],pe=he.value;if(-1===ue.indexOf(pe)){for(var me=!1,ge=0;!me&&ge<j.length;ge++)1e7+j[ge].value===1e7+pe&&(me=!0);me||fe.push(he)}}B=fe}if(f&&function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r].value,a=r,o=r+1;r<e.length-1?(a=r,o=r+1):r>0?(a=r-1,o=r):(a=r,o=r);var s,l=e[a].value,c=e[o].value,u=Math.abs(c-l),f=n||u,d=0;f>=y?d=u>=y&&u<=g?u:v:n===x&&f>=_?d=u>=_&&u<=b?u:x:f>=k?d=u>=k&&u<=w?u:A:n===E&&f>=E?d=E:f>=T?d=T:n===M&&f>=M?d=M:n===S&&f>=S&&(d=S),d>=u&&(d=u,s=!0);var h=i+d;if(t.rangebreaks&&d>0){for(var p=0,m=0;m<84;m++){var C=(m+.5)/84;t.maskBreaks(i*(1-C)+C*h)!==D&&p++}(d*=p/84)||(e[r].drop=!0),s&&u>E&&(d=u)}(d>0||0===r)&&(e[r].periodX=i+d/2)}}(U,e,e._definedDelta),e.rangebreaks){var ve="y"===e._id.charAt(0),ye=1;"auto"===e.tickmode&&(ye=e.tickfont?e.tickfont.size:12);var be=NaN;for(a=j.length-1;a>-1;a--)if(j[a].drop)j.splice(a,1);else{j[a].value=Ie(j[a].value,e);var xe=e.c2p(j[a].value);(ve?be>xe-ye:be<xe+ye)?j.splice(m?a+1:a,1):be=xe}}Pe(e)&&360===Math.abs(p[1]-p[0])&&j.pop(),e._tmax=(j[j.length-1]||{}).value,e._prevDateHead="",e._inCalcTicks=!0;var _e,we=function(t){t.text="",e._prevDateHead=o};function Ae(e,t){var n=W.tickText(e,t.value,!1,t.simpleLabel),r=t.periodX;return void 0!==r&&(n.periodX=r,(r>P||r<L)&&(r>P&&(n.periodX=P),r<L&&(n.periodX=L),we(n))),n}for(j=j.concat(B),a=0;a<j.length;a++){var ke=j[a].minor,Ee=j[a].value;ke?((_e=h&&-1!==U.indexOf(j[a])?Ae(e,j[a]):{x:Ee}).minor=!0,z.push(_e)):(o=e._prevDateHead,_e=Ae(e,j[a]),(j[a].skipLabel||h&&-1===U.indexOf(j[a]))&&we(_e),F.push(_e))}return F=F.concat(z),e._inCalcTicks=!1,f&&F.length&&(F[0].noTick=!0),F};var le=[2,5,10],ce=[1,2,3,6,12],ue=[1,2,5,10,15,30],fe=[1,2,3,7,14],de=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],he=[-.301,0,.301,.699,1],pe=[15,30,45,90,180];function me(e,t,n){return t*s.roundUp(e/t,n)}function ge(e){var t=e.dtick;if(e._tickexponent=0,i(t)||"string"==typeof t||(t=1),"category"!==e.type&&"multicategory"!==e.type||(e._tickround=null),"date"===e.type){var n=e.r2l(e.tick0),r=e.l2r(n).replace(/(^-|i)/g,""),a=r.length;if("M"===String(t).charAt(0))a>10||"01-01"!==r.substr(5)?e._tickround="d":e._tickround=+t.substr(1)%12==0?"y":"m";else if(t>=T&&a<=10||t>=15*T)e._tickround="d";else if(t>=C&&a<=16||t>=S)e._tickround="M";else if(t>=O&&a<=19||t>=C)e._tickround="S";else{var o=e.l2r(n+t).replace(/^-/,"").length;e._tickround=Math.max(a,o)-20,e._tickround<0&&(e._tickround=4)}}else if(i(t)||"L"===t.charAt(0)){var s=e.range.map(e.r2d||Number);i(t)||(t=Number(t.substr(1))),e._tickround=2-Math.floor(Math.log(t)/Math.LN10+.01);var l=Math.max(Math.abs(s[0]),Math.abs(s[1])),c=Math.floor(Math.log(l)/Math.LN10+.01),u=void 0===e.minexponent?3:e.minexponent;Math.abs(c)>u&&(be(e.exponentformat)&&!xe(c)?e._tickexponent=3*Math.round((c-1)/3):e._tickexponent=c)}else e._tickround=null}function ve(e,t,n){var r=e.tickfont||{};return{x:t,dx:0,dy:0,text:n||"",fontSize:r.size,font:r.family,fontWeight:r.weight,fontStyle:r.style,fontVariant:r.variant,fontTextcase:r.textcase,fontLineposition:r.lineposition,fontShadow:r.shadow,fontColor:r.color}}W.autoTicks=function(e,t,n){var r;function a(e){return Math.pow(e,Math.floor(Math.log(t)/Math.LN10))}if("date"===e.type){e.tick0=s.dateTick0(e.calendar,0);var o=2*t;if(o>v)t/=v,r=a(10),e.dtick="M"+12*me(t,r,le);else if(o>A)t/=A,e.dtick="M"+me(t,1,ce);else if(o>T){if(e.dtick=me(t,T,e._hasDayOfWeekBreaks?[1,2,7,14]:fe),!n){var l=W.getTickFormat(e),c="period"===e.ticklabelmode;c&&(e._rawTick0=e.tick0),/%[uVW]/.test(l)?e.tick0=s.dateTick0(e.calendar,2):e.tick0=s.dateTick0(e.calendar,1),c&&(e._dowTick0=e.tick0)}}else o>S?e.dtick=me(t,S,ce):o>C?e.dtick=me(t,C,ue):o>O?e.dtick=me(t,O,ue):(r=a(10),e.dtick=me(t,r,le))}else if("log"===e.type){e.tick0=0;var u=s.simpleMap(e.range,e.r2l);if(e._isMinor&&(t*=1.5),t>.7)e.dtick=Math.ceil(t);else if(Math.abs(u[1]-u[0])<1){var f=1.5*Math.abs((u[1]-u[0])/t);t=Math.abs(Math.pow(10,u[1])-Math.pow(10,u[0]))/f,r=a(10),e.dtick="L"+me(t,r,le)}else e.dtick=t>.3?"D2":"D1"}else"category"===e.type||"multicategory"===e.type?(e.tick0=0,e.dtick=Math.ceil(Math.max(t,1))):Pe(e)?(e.tick0=0,r=1,e.dtick=me(t,r,pe)):(e.tick0=0,r=a(10),e.dtick=me(t,r,le));if(0===e.dtick&&(e.dtick=1),!i(e.dtick)&&"string"!=typeof e.dtick){var d=e.dtick;throw e.dtick=1,"ax.dtick error: "+String(d)}},W.tickIncrement=function(e,t,n,a){var o=n?-1:1;if(i(t))return s.increment(e,o*t);var l=t.charAt(0),c=o*Number(t.substr(1));if("M"===l)return s.incrementMonth(e,c,a);if("L"===l)return Math.log(Math.pow(10,e)+c)/Math.LN10;if("D"===l){var u="D2"===t?he:de,f=e+.01*o,d=s.roundUp(s.mod(f,1),u,n);return Math.floor(f)+Math.log(r.round(Math.pow(10,d),1))/Math.LN10}throw"unrecognized dtick "+String(t)},W.tickFirst=function(e,t){var n=e.r2l||Number,a=s.simpleMap(e.range,n,void 0,void 0,t),o=a[1]<a[0],l=o?Math.floor:Math.ceil,c=J(a)[0],u=e.dtick,f=n(e.tick0);if(i(u)){var d=l((c-f)/u)*u+f;return"category"!==e.type&&"multicategory"!==e.type||(d=s.constrain(d,0,e._categories.length-1)),d}var h=u.charAt(0),p=Number(u.substr(1));if("M"===h){for(var m,g,v,y=0,b=f;y<10;){if(((m=W.tickIncrement(b,u,o,e.calendar))-c)*(b-c)<=0)return o?Math.min(b,m):Math.max(b,m);g=(c-(b+m)/2)/(m-b),v=h+(Math.abs(Math.round(g))||1)*p,b=W.tickIncrement(b,v,g<0?!o:o,e.calendar),y++}return s.error("tickFirst did not converge",e),b}if("L"===h)return Math.log(l((Math.pow(10,c)-f)/p)*p+f)/Math.LN10;if("D"===h){var x="D2"===u?he:de,_=s.roundUp(s.mod(c,1),x,o);return Math.floor(c)+Math.log(r.round(Math.pow(10,_),1))/Math.LN10}throw"unrecognized dtick "+String(u)},W.tickText=function(e,t,n,r){var a,o=ve(e,t),l="array"===e.tickmode,c=n||l,u=e.type,f="category"===u?e.d2l_noadd:e.d2l,d=function(t){var n=e.l2p(t);return n>=0&&n<=e._length?t:null};if(l&&s.isArrayOrTypedArray(e.ticktext)){var h=s.simpleMap(e.range,e.r2l),p=(Math.abs(h[1]-h[0])-(e._lBreaks||0))/1e4;for(a=0;a<e.ticktext.length&&!(Math.abs(t-f(e.tickvals[a]))<p);a++);if(a<e.ticktext.length)return o.text=String(e.ticktext[a]),o.xbnd=[d(o.x-.5),d(o.x+e.dtick-.5)],o}function m(r){if(void 0===r)return!0;if(n)return"none"===r;var i={first:e._tmin,last:e._tmax}[r];return"all"!==r&&t!==i}var g=n?"never":"none"!==e.exponentformat&&m(e.showexponent)?"hide":"";if("date"===u?function(e,t,n,r){var a=e._tickround,o=n&&e.hoverformat||W.getTickFormat(e);r=!o&&r,r&&(a=i(a)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[a]);var l,c=s.formatDate(t.x,o,a,e._dateFormat,e.calendar,e._extraFormat),u=c.indexOf("\n");-1!==u&&(l=c.substr(u+1),c=c.substr(0,u));r&&(void 0===l||"00:00:00"!==c&&"00:00"!==c?8===c.length&&(c=c.replace(/:00$/,"")):(c=l,l=""));if(l)if(n)"d"===a?c+=", "+l:c=l+(c?", "+c:"");else if(e._inCalcTicks&&e._prevDateHead===l){var f=Fe(e),d=e._trueSide||e.side;(!f&&"top"===d||f&&"bottom"===d)&&(c+="<br> ")}else e._prevDateHead=l,c+="<br>"+l;t.text=c}(e,o,n,c):"log"===u?function(e,t,n,r,a){var o=e.dtick,l=t.x,c=e.tickformat,u="string"==typeof o&&o.charAt(0);"never"===a&&(a="");r&&"L"!==u&&(o="L3",u="L");if(c||"L"===u)t.text=_e(Math.pow(10,l),e,a,r);else if(i(o)||"D"===u&&s.mod(l+.01,1)<.1){var f=Math.round(l),d=Math.abs(f),h=e.exponentformat;"power"===h||be(h)&&xe(f)?(t.text=0===f?1:1===f?"10":"10<sup>"+(f>1?"":L)+d+"</sup>",t.fontSize*=1.25):("e"===h||"E"===h)&&d>2?t.text="1"+h+(f>0?"+":L)+d:(t.text=_e(Math.pow(10,l),e,"","fakehover"),"D1"===o&&"y"===e._id.charAt(0)&&(t.dy-=t.fontSize/6))}else{if("D"!==u)throw"unrecognized dtick "+String(o);t.text=String(Math.round(Math.pow(10,s.mod(l,1)))),t.fontSize*=.75}if("D1"===e.dtick){var p=String(t.text).charAt(0);"0"!==p&&"1"!==p||("y"===e._id.charAt(0)?t.dx-=t.fontSize/4:(t.dy+=t.fontSize/2,t.dx+=(e.range[1]>e.range[0]?1:-1)*t.fontSize*(l<0?.5:.25)))}}(e,o,0,c,g):"category"===u?function(e,t){var n=e._categories[Math.round(t.x)];void 0===n&&(n="");t.text=String(n)}(e,o):"multicategory"===u?function(e,t,n){var r=Math.round(t.x),i=e._categories[r]||[],a=void 0===i[1]?"":String(i[1]),o=void 0===i[0]?"":String(i[0]);n?t.text=o+" - "+a:(t.text=a,t.text2=o)}(e,o,n):Pe(e)?function(e,t,n,r,i){if("radians"!==e.thetaunit||n)t.text=_e(t.x,e,i,r);else{var a=t.x/180;if(0===a)t.text="0";else{var o=function(e){function t(e,t){return Math.abs(e-t)<=1e-6}function n(e,r){return t(r,0)?e:n(r,e%r)}function r(e){for(var n=1;!t(Math.round(e*n)/n,e);)n*=10;return n}var i=r(e),a=e*i,o=Math.abs(n(a,i));return[Math.round(a/o),Math.round(i/o)]}(a);if(o[1]>=100)t.text=_e(s.deg2rad(t.x),e,i,r);else{var l=t.x<0;1===o[1]?1===o[0]?t.text="":t.text=o[0]+"":t.text=["<sup>",o[0],"</sup>","","<sub>",o[1],"</sub>",""].join(""),l&&(t.text=L+t.text)}}}}(e,o,n,c,g):function(e,t,n,r,i){"never"===i?i="":"all"===e.showexponent&&Math.abs(t.x/e.dtick)<1e-6&&(i="hide");t.text=_e(t.x,e,i,r)}(e,o,0,c,g),r||(e.tickprefix&&!m(e.showtickprefix)&&(o.text=e.tickprefix+o.text),e.ticksuffix&&!m(e.showticksuffix)&&(o.text+=e.ticksuffix)),e.labelalias&&e.labelalias.hasOwnProperty(o.text)){var v=e.labelalias[o.text];"string"==typeof v&&(o.text=v)}return("boundaries"===e.tickson||e.showdividers)&&(o.xbnd=[d(o.x-.5),d(o.x+e.dtick-.5)]),o},W.hoverLabelText=function(e,t,n){n&&(e=s.extendFlat({},e,{hoverformat:n}));var r=s.isArrayOrTypedArray(t)?t[0]:t,i=s.isArrayOrTypedArray(t)?t[1]:void 0;if(void 0!==i&&i!==r)return W.hoverLabelText(e,r,n)+" - "+W.hoverLabelText(e,i,n);var a="log"===e.type&&r<=0,o=W.tickText(e,e.c2l(a?-r:r),"hover").text;return a?0===r?"0":L+o:o};var ye=["f","p","n","","m","","k","M","G","T"];function be(e){return"SI"===e||"B"===e}function xe(e){return e>14||e<-15}function _e(e,t,n,r){var a=e<0,o=t._tickround,l=n||t.exponentformat||"B",c=t._tickexponent,u=W.getTickFormat(t),f=t.separatethousands;if(r){var d={exponentformat:l,minexponent:t.minexponent,dtick:"none"===t.showexponent?t.dtick:i(e)&&Math.abs(e)||1,range:"none"===t.showexponent?t.range.map(t.r2d):[0,e||1]};ge(d),o=(Number(d._tickround)||0)+4,c=d._tickexponent,t.hoverformat&&(u=t.hoverformat)}if(u)return t._numFormat(u)(e).replace(/-/g,L);var h,p=Math.pow(10,-o)/2;if("none"===l&&(c=0),(e=Math.abs(e))<p)e="0",a=!1;else{if(e+=p,c&&(e*=Math.pow(10,-c),o+=c),0===o)e=String(Math.floor(e));else if(o<0){e=(e=String(Math.round(e))).substr(0,e.length+o);for(var m=o;m<0;m++)e+="0"}else{var g=(e=String(e)).indexOf(".")+1;g&&(e=e.substr(0,g+o).replace(/\.?0+$/,""))}e=s.numSeparate(e,t._separators,f)}c&&"hide"!==l&&(be(l)&&xe(c)&&(l="power"),h=c<0?L+-c:"power"!==l?"+"+c:String(c),"e"===l||"E"===l?e+=l+h:"power"===l?e+="10<sup>"+h+"</sup>":"B"===l&&9===c?e+="B":be(l)&&(e+=ye[c/3+5]));return a?L+e:e}function we(e,t){if(e){var n=Object.keys(B).reduce((function(e,n){return-1!==t.indexOf(n)&&B[n].forEach((function(t){e[t]=1})),e}),{});Object.keys(e).forEach((function(t){n[t]||(1===t.length?e[t]=0:delete e[t])}))}}function Ae(e,t){for(var n=[],r={},i=0;i<t.length;i++){var a=t[i];r[a.text2]?r[a.text2].push(a.x):r[a.text2]=[a.x]}for(var o in r)n.push(ve(e,s.interp(r[o],.5),o));return n}function ke(e){return void 0!==e.periodX?e.periodX:e.x}function Ee(e){return[e.text,e.x,e.axInfo,e.font,e.fontSize,e.fontColor].join("_")}function Te(e){var t=e.title.font.size,n=(e.title.text.match(c.BR_TAG_ALL)||[]).length;return e.title.hasOwnProperty("standoff")?t*(q+n*H):n?t*(n+1)*H:t}function Me(e,t){var n=e.l2p(t);return n>1&&n<e._length-1}function Se(e){var t=r.select(e),n=t.select(".text-math-group");return n.empty()?t.select("text"):n}function Ce(e){return e._id+".automargin"}function Oe(e){return Ce(e)+".mirror"}function Re(e){return e._id+".rangeslider"}function Ne(e,t){for(var n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n])}function Le(e,t,n){var r,i,a=[],o=[],l=e.layout;for(r=0;r<t.length;r++)a.push(W.getFromId(e,t[r]));for(r=0;r<n.length;r++)o.push(W.getFromId(e,n[r]));var c=Object.keys(h),u=["anchor","domain","overlaying","position","side","tickangle","editType"],f=["linear","log"];for(r=0;r<c.length;r++){var d=c[r],p=a[0][d],m=o[0][d],g=!0,v=!1,y=!1;if("_"!==d.charAt(0)&&"function"!=typeof p&&-1===u.indexOf(d)){for(i=1;i<a.length&&g;i++){var b=a[i][d];"type"===d&&-1!==f.indexOf(p)&&-1!==f.indexOf(b)&&p!==b?v=!0:b!==p&&(g=!1)}for(i=1;i<o.length&&g;i++){var x=o[i][d];"type"===d&&-1!==f.indexOf(m)&&-1!==f.indexOf(x)&&m!==x?y=!0:o[i][d]!==m&&(g=!1)}g&&(v&&(l[a[0]._name].type="linear"),y&&(l[o[0]._name].type="linear"),De(l,d,a,o,e._fullLayout._dfltTitle))}}for(r=0;r<e._fullLayout.annotations.length;r++){var _=e._fullLayout.annotations[r];-1!==t.indexOf(_.xref)&&-1!==n.indexOf(_.yref)&&s.swapAttrs(l.annotations[r],["?"])}}function De(e,t,n,r,i){var a,o=s.nestedProperty,l=o(e[n[0]._name],t).get(),c=o(e[r[0]._name],t).get();for("title"===t&&(l&&l.text===i.x&&(l.text=i.y),c&&c.text===i.y&&(c.text=i.x)),a=0;a<n.length;a++)o(e,n[a]._name+"."+t).set(c);for(a=0;a<r.length;a++)o(e,r[a]._name+"."+t).set(l)}function Pe(e){return"angularaxis"===e._id}function Ie(e,t){for(var n=t._rangebreaks.length,r=0;r<n;r++){var i=t._rangebreaks[r];if(e>=i.min&&e<i.max)return i.max}return e}function Fe(e){return-1!==(e.ticklabelposition||"").indexOf("inside")}function ze(e,t){Fe(e._anchorAxis||{})&&e._hideCounterAxisInsideTickLabels&&e._hideCounterAxisInsideTickLabels(t)}function je(e,t,n,r){var i,a="free"===e.anchor||void 0!==e.overlaying&&!1!==e.overlaying?e.overlaying:e._id;i=r?"right"===e.side?t:-t:t,a in n||(n[a]={}),e.side in n[a]||(n[a][e.side]=0),n[a][e.side]+=i}W.getTickFormat=function(e){var t,n,r,i,a,o,s,l;function c(e){return"string"!=typeof e?e:Number(e.replace("M",""))*A}function u(e,t){var n=["L","D"];if(typeof e==typeof t){if("number"==typeof e)return e-t;var r=n.indexOf(e.charAt(0)),i=n.indexOf(t.charAt(0));return r===i?Number(e.replace(/(L|D)/g,""))-Number(t.replace(/(L|D)/g,"")):r-i}return"number"==typeof e?1:-1}function f(e,t){var n=null===t[0],r=null===t[1],i=u(e,t[0])>=0,a=u(e,t[1])<=0;return(n||i)&&(r||a)}if(e.tickformatstops&&e.tickformatstops.length>0)switch(e.type){case"date":case"linear":for(t=0;t<e.tickformatstops.length;t++)if((r=e.tickformatstops[t]).enabled&&(i=e.dtick,a=r.dtickrange,o=void 0,s=void 0,l=void 0,o=c||function(e){return e},s=a[0],l=a[1],(!s&&"number"!=typeof s||o(s)<=o(i))&&(!l&&"number"!=typeof l||o(l)>=o(i)))){n=r;break}break;case"log":for(t=0;t<e.tickformatstops.length;t++)if((r=e.tickformatstops[t]).enabled&&f(e.dtick,r.dtickrange)){n=r;break}}return n?n.value:e.tickformat},W.getSubplots=function(e,t){var n=e._fullLayout._subplots,r=n.cartesian.concat(n.gl2d||[]),i=t?W.findSubplotsWithAxis(r,t):r;return i.sort((function(e,t){var n=e.substr(1).split("y"),r=t.substr(1).split("y");return n[0]===r[0]?+n[1]-+r[1]:+n[0]-+r[0]})),i},W.findSubplotsWithAxis=function(e,t){for(var n=new RegExp("x"===t._id.charAt(0)?"^"+t._id+"y":t._id+"$"),r=[],i=0;i<e.length;i++){var a=e[i];n.test(a)&&r.push(a)}return r},W.makeClipPaths=function(e){var t=e._fullLayout;if(!t._hasOnlyLargeSploms){var n,i,a={_offset:0,_length:t.width,_id:""},o={_offset:0,_length:t.height,_id:""},s=W.list(e,"x",!0),l=W.list(e,"y",!0),c=[];for(n=0;n<s.length;n++)for(c.push({x:s[n],y:o}),i=0;i<l.length;i++)0===n&&c.push({x:a,y:l[i]}),c.push({x:s[n],y:l[i]});var u=t._clips.selectAll(".axesclip").data(c,(function(e){return e.x._id+e.y._id}));u.enter().append("clipPath").classed("axesclip",!0).attr("id",(function(e){return"clip"+t._uid+e.x._id+e.y._id})).append("rect"),u.exit().remove(),u.each((function(e){r.select(this).select("rect").attr({x:e.x._offset||0,y:e.y._offset||0,width:e.x._length||1,height:e.y._length||1})}))}},W.draw=function(e,t,n){var r=e._fullLayout;"redraw"===t&&r._paper.selectAll("g.subplot").each((function(e){var t=e[0],n=r._plots[t];if(n){var i=n.xaxis,a=n.yaxis;n.xaxislayer.selectAll("."+i._id+"tick").remove(),n.yaxislayer.selectAll("."+a._id+"tick").remove(),n.xaxislayer.selectAll("."+i._id+"tick2").remove(),n.yaxislayer.selectAll("."+a._id+"tick2").remove(),n.xaxislayer.selectAll("."+i._id+"divider").remove(),n.yaxislayer.selectAll("."+a._id+"divider").remove(),n.minorGridlayer&&n.minorGridlayer.selectAll("path").remove(),n.gridlayer&&n.gridlayer.selectAll("path").remove(),n.zerolinelayer&&n.zerolinelayer.selectAll("path").remove(),r._infolayer.select(".g-"+i._id+"title").remove(),r._infolayer.select(".g-"+a._id+"title").remove()}}));var i=t&&"redraw"!==t?t:W.listIds(e),a=W.list(e).filter((function(e){return e.autoshift})).map((function(e){return e.overlaying}));i.map((function(t){var n=W.getFromId(e,t);if("sync"===n.tickmode&&n.overlaying){var r=i.findIndex((function(e){return e===n.overlaying}));r>=0&&i.unshift(i.splice(r,1).shift())}}));var o={false:{left:0,right:0}};return s.syncOrAsync(i.map((function(t){return function(){if(t){var r=W.getFromId(e,t);n||(n={}),n.axShifts=o,n.overlayingShiftedAx=a;var i=W.drawOne(e,r,n);return r._shiftPusher&&je(r,r._fullDepth||0,o,!0),r._r=r.range.slice(),r._rl=s.simpleMap(r._r,r.r2l),i}}})))},W.drawOne=function(e,t,n){var r,i,l,h=(n=n||{}).axShifts||{},p=n.overlayingShiftedAx||[];t.setScale();var m=e._fullLayout,g=t._id,v=g.charAt(0),y=W.counterLetter(g),b=m._plots[t._mainSubplot];if(b){if(t._shiftPusher=t.autoshift||-1!==p.indexOf(t._id)||-1!==p.indexOf(t.overlaying),t._shiftPusher&"free"===t.anchor){var x=t.linewidth/2||0;"inside"===t.ticks&&(x+=t.ticklen),je(t,x,h,!0),je(t,t.shift||0,h,!1)}!0===n.skipTitle&&void 0!==t._shift||(t._shift=function(e,t){return e.autoshift?t[e.overlaying][e.side]:e.shift||0}(t,h));var _=b[v+"axislayer"],w=t._mainLinePosition,A=w+=t._shift,k=t._mainMirrorPosition,E=t._vals=W.calcTicks(t),T=[t.mirror,A,k].join("_");for(r=0;r<E.length;r++)E[r].axInfo=T;t._selections={},t._tickAngles&&(t._prevTickAngles=t._tickAngles),t._tickAngles={},t._depth=null;var M={};if(t.visible){var S,C,O=W.makeTransTickFn(t),R=W.makeTransTickLabelFn(t),N="inside"===t.ticks,L="outside"===t.ticks;if("boundaries"===t.tickson){var D=function(e,t){var n,r=[],i=function(e,t){var n=e.xbnd[t];null!==n&&r.push(s.extendFlat({},e,{x:n}))};if(t.length){for(n=0;n<t.length;n++)i(t[n],0);i(t[n-1],1)}return r}(0,E);C=W.clipEnds(t,D),S=N?C:D}else C=W.clipEnds(t,E),S=N&&"period"!==t.ticklabelmode?C:E;var P,I=t._gridVals=C,F=function(e,t){var n,r,i=[],a=t.length&&t[t.length-1].x<t[0].x,o=function(e,t){var n=e.xbnd[t];null!==n&&i.push(s.extendFlat({},e,{x:n}))};if(e.showdividers&&t.length){for(n=0;n<t.length;n++){var l=t[n];l.text2!==r&&o(l,a?1:0),r=l.text2}o(t[n-1],a?0:1)}return i}(t,E);if(!m._hasOnlyLargeSploms){var z=t._subplotsWith,j={};for(r=0;r<z.length;r++){i=z[r];var B=(l=m._plots[i])[y+"axis"],U=B._mainAxis._id;if(!j[U]){j[U]=1;var G="x"===v?"M0,"+B._offset+"v"+B._length:"M"+B._offset+",0h"+B._length;W.drawGrid(e,t,{vals:I,counterAxis:B,layer:l.gridlayer.select("."+g),minorLayer:l.minorGridlayer.select("."+g),path:G,transFn:O}),W.drawZeroLine(e,t,{counterAxis:B,layer:l.zerolinelayer,path:G,transFn:O})}}}var Y=W.getTickSigns(t),X=W.getTickSigns(t,"minor");if(t.ticks||t.minor&&t.minor.ticks){var K,Z,J,Q,ee=W.makeTickPath(t,A,Y[2]),te=W.makeTickPath(t,A,X[2],{minor:!0});if(t._anchorAxis&&t.mirror&&!0!==t.mirror?(K=W.makeTickPath(t,k,Y[3]),Z=W.makeTickPath(t,k,X[3],{minor:!0}),J=ee+K,Q=te+Z):(K="",Z="",J=ee,Q=te),t.showdividers&&L&&"boundaries"===t.tickson){var ne={};for(r=0;r<F.length;r++)ne[F[r].x]=1;P=function(e){return ne[e.x]?K:J}}else P=function(e){return e.minor?Q:J}}if(W.drawTicks(e,t,{vals:S,layer:_,path:P,transFn:O}),"allticks"===t.mirror){var re=Object.keys(t._linepositions||{});for(r=0;r<re.length;r++){i=re[r],l=m._plots[i];var ie=t._linepositions[i]||[],ae=ie[0],oe=ie[1],se=ie[2],le=W.makeTickPath(t,ae,se?Y[0]:X[0],{minor:se})+W.makeTickPath(t,oe,se?Y[1]:X[1],{minor:se});W.drawTicks(e,t,{vals:S,layer:l[v+"axislayer"],path:le,transFn:O})}}var ce=[];if(ce.push((function(){return W.drawLabels(e,t,{vals:E,layer:_,plotinfo:l,transFn:R,labelFns:W.makeLabelFns(t,A)})})),"multicategory"===t.type){var ue={x:2,y:10}[v];ce.push((function(){var n={x:"height",y:"width"}[v],r=de()[n]+ue+(t._tickAngles[g+"tick"]?t.tickfont.size*H:0);return W.drawLabels(e,t,{vals:Ae(t,E),layer:_,cls:g+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:O,labelFns:W.makeLabelFns(t,A+r*Y[4])})})),ce.push((function(){return t._depth=Y[4]*(de("tick2")[t.side]-A),function(e,t,n){var r=t._id+"divider",i=n.vals,a=n.layer.selectAll("path."+r).data(i,Ee);a.exit().remove(),a.enter().insert("path",":first-child").classed(r,1).classed("crisp",1).call(f.stroke,t.dividercolor).style("stroke-width",d.crispRound(e,t.dividerwidth,1)+"px"),a.attr("transform",n.transFn).attr("d",n.path)}(e,t,{vals:F,layer:_,path:W.makeTickPath(t,A,Y[4],{len:t._depth}),transFn:O})}))}else t.title.hasOwnProperty("standoff")&&ce.push((function(){t._depth=Y[4]*(de()[t.side]-A)}));var fe=o.getComponentMethod("rangeslider","isVisible")(t);return n.skipTitle||fe&&"bottom"===t.side||ce.push((function(){return function(e,t){var n,r=e._fullLayout,i=t._id,a=i.charAt(0),o=t.title.font.size,s=(t.title.text.match(c.BR_TAG_ALL)||[]).length;if(t.title.hasOwnProperty("standoff"))"bottom"===t.side||"right"===t.side?n=t._depth+t.title.standoff+o*q:"top"!==t.side&&"left"!==t.side||(n=t._depth+t.title.standoff+o*($+s*H));else{var l=Fe(t);if("multicategory"===t.type)n=t._depth;else{var f=1.5*o;l&&(f=.5*o,"outside"===t.ticks&&(f+=t.ticklen)),n=10+f+(t.linewidth?t.linewidth-1:0)}l||(n+="x"===a?"top"===t.side?o*(t.showticklabels?1:0):o*(t.showticklabels?1.5:.5):"right"===t.side?o*(t.showticklabels?1:.5):o*(t.showticklabels?.5:0))}var h,p,m,g,v=W.getPxPosition(e,t);"x"===a?(p=t._offset+t._length/2,m="top"===t.side?v-n:v+n):(m=t._offset+t._length/2,p="right"===t.side?v+n:v-n,h={rotate:"-90",offset:0});if("multicategory"!==t.type){var y=t._selections[t._id+"tick"];if(g={selection:y,side:t.side},y&&y.node()&&y.node().parentNode){var b=d.getTranslate(y.node().parentNode);g.offsetLeft=b.x,g.offsetTop=b.y}t.title.hasOwnProperty("standoff")&&(g.pad=0)}return t._titleStandoff=n,u.draw(e,i+"title",{propContainer:t,propName:t._name+".title.text",placeholder:r._dfltTitle[a],avoid:g,transform:h,attributes:{x:p,y:m,"text-anchor":"middle"}})}(e,t)})),ce.push((function(){var n,r,i,s,l=t.side.charAt(0),c=V[t.side].charAt(0),u=W.getPxPosition(e,t),f=L?t.ticklen:0;(t.automargin||fe||t._shiftPusher)&&("multicategory"===t.type?n=de("tick2"):(n=de(),"x"===v&&"b"===l&&(t._depth=Math.max(n.width>0?n.bottom-u:0,f))));var d=0,h=0;if(t._shiftPusher&&(d=Math.max(f,n.height>0?"l"===l?u-n.left:n.right-u:0),t.title.text!==m._dfltTitle[v]&&(h=(t._titleStandoff||0)+(t._titleScoot||0),"l"===l&&(h+=Te(t))),t._fullDepth=Math.max(d,h)),t.automargin){r={x:0,y:0,r:0,l:0,t:0,b:0};var p=[0,1],g="number"==typeof t._shift?t._shift:0;if("x"===v){if("b"===l?r[l]=t._depth:(r[l]=t._depth=Math.max(n.width>0?u-n.top:0,f),p.reverse()),n.width>0){var b=n.right-(t._offset+t._length);b>0&&(r.xr=1,r.r=b);var x=t._offset-n.left;x>0&&(r.xl=0,r.l=x)}}else if("l"===l?(t._depth=Math.max(n.height>0?u-n.left:0,f),r[l]=t._depth-g):(t._depth=Math.max(n.height>0?n.right-u:0,f),r[l]=t._depth+g,p.reverse()),n.height>0){var _=n.bottom-(t._offset+t._length);_>0&&(r.yb=0,r.b=_);var w=t._offset-n.top;w>0&&(r.yt=1,r.t=w)}r[y]="free"===t.anchor?t.position:t._anchorAxis.domain[p[0]],t.title.text!==m._dfltTitle[v]&&(r[l]+=Te(t)+(t.title.standoff||0)),t.mirror&&"free"!==t.anchor&&((i={x:0,y:0,r:0,l:0,t:0,b:0})[c]=t.linewidth,t.mirror&&!0!==t.mirror&&(i[c]+=f),!0===t.mirror||"ticks"===t.mirror?i[y]=t._anchorAxis.domain[p[1]]:"all"!==t.mirror&&"allticks"!==t.mirror||(i[y]=[t._counterDomainMin,t._counterDomainMax][p[1]]))}fe&&(s=o.getComponentMethod("rangeslider","autoMarginOpts")(e,t)),"string"==typeof t.automargin&&(we(r,t.automargin),we(i,t.automargin)),a.autoMargin(e,Ce(t),r),a.autoMargin(e,Oe(t),i),a.autoMargin(e,Re(t),s)})),s.syncOrAsync(ce)}}function de(e){var n=g+(e||"tick");return M[n]||(M[n]=function(e,t,n){var r,i,a,o;if(e._selections[t].size())r=1/0,i=-1/0,a=1/0,o=-1/0,e._selections[t].each((function(){var e=Se(this),t=d.bBox(e.node().parentNode);r=Math.min(r,t.top),i=Math.max(i,t.bottom),a=Math.min(a,t.left),o=Math.max(o,t.right)}));else{var s=W.makeLabelFns(e,n);r=i=s.yFn({dx:0,dy:0,fontSize:0}),a=o=s.xFn({dx:0,dy:0,fontSize:0})}return{top:r,bottom:i,left:a,right:o,height:i-r,width:o-a}}(t,n,A)),M[n]}},W.getTickSigns=function(e,t){var n=e._id.charAt(0),r={x:"top",y:"right"}[n],i=e.side===r?1:-1,a=[-1,1,i,-i];return"inside"!==(t?(e.minor||{}).ticks:e.ticks)==("x"===n)&&(a=a.map((function(e){return-e}))),e.side&&a.push({l:-1,t:-1,r:1,b:1}[e.side.charAt(0)]),a},W.makeTransTickFn=function(e){return"x"===e._id.charAt(0)?function(t){return l(e._offset+e.l2p(t.x),0)}:function(t){return l(0,e._offset+e.l2p(t.x))}},W.makeTransTickLabelFn=function(e){var t=function(e){var t=e.ticklabelposition||"",n=function(e){return-1!==t.indexOf(e)},r=n("top"),i=n("left"),a=n("right"),o=n("bottom"),s=n("inside"),l=o||i||r||a;if(!l&&!s)return[0,0];var c=e.side,u=l?(e.tickwidth||0)/2:0,f=3,d=e.tickfont?e.tickfont.size:12;(o||r)&&(u+=d*q,f+=(e.linewidth||0)/2);(i||a)&&(u+=(e.linewidth||0)/2,f+=3);s&&"top"===c&&(f-=d*(1-q));(i||r)&&(u=-u);"bottom"!==c&&"right"!==c||(f=-f);return[l?u:0,s?f:0]}(e),n=e.ticklabelshift||0,r=e.ticklabelstandoff||0,i=t[0],a=t[1],o=e.range[0]>e.range[1],s=e.ticklabelposition&&-1!==e.ticklabelposition.indexOf("inside"),c=!s;n&&(n*=o?-1:1);if(r){var u=e.side;r*=s&&("top"===u||"left"===u)||c&&("bottom"===u||"right"===u)?1:-1}return"x"===e._id.charAt(0)?function(t){return l(i+e._offset+e.l2p(ke(t))+n,a+r)}:function(t){return l(a+r,i+e._offset+e.l2p(ke(t))+n)}},W.makeTickPath=function(e,t,n,r){r||(r={});var i=r.minor;if(i&&!e.minor)return"";var a=void 0!==r.len?r.len:i?e.minor.ticklen:e.ticklen,o=e._id.charAt(0),s=(e.linewidth||1)/2;return"x"===o?"M0,"+(t+s*n)+"v"+a*n:"M"+(t+s*n)+",0h"+a*n},W.makeLabelFns=function(e,t,n){var r=e.ticklabelposition||"",a=function(e){return-1!==r.indexOf(e)},o=a("top"),l=a("left"),c=a("right"),u=a("bottom")||l||o||c,f=a("inside"),d="inside"===r&&"inside"===e.ticks||!f&&"outside"===e.ticks&&"boundaries"!==e.tickson,h=0,p=0,m=d?e.ticklen:0;if(f?m*=-1:u&&(m=0),d&&(h+=m,n)){var g=s.deg2rad(n);h=m*Math.cos(g)+1,p=m*Math.sin(g)}e.showticklabels&&(d||e.showline)&&(h+=.2*e.tickfont.size);var v,y,b,x,_,w={labelStandoff:h+=(e.linewidth||1)/2*(f?-1:1),labelShift:p},A=0,k=e.side,E=e._id.charAt(0),T=e.tickangle;if("x"===E)x=(_=!f&&"bottom"===k||f&&"top"===k)?1:-1,f&&(x*=-1),v=p*x,y=t+h*x,b=_?1:-.2,90===Math.abs(T)&&(f?b+=$:b=-90===T&&"bottom"===k?q:90===T&&"top"===k?$:.5,A=$/2*(T/90)),w.xFn=function(e){return e.dx+v+A*e.fontSize},w.yFn=function(e){return e.dy+y+e.fontSize*b},w.anchorFn=function(e,t){if(u){if(l)return"end";if(c)return"start"}return i(t)&&0!==t&&180!==t?t*x<0!==f?"end":"start":"middle"},w.heightFn=function(t,n,r){return n<-60||n>60?-.5*r:"top"===e.side!==f?-r:0};else if("y"===E){if(x=(_=!f&&"left"===k||f&&"right"===k)?1:-1,f&&(x*=-1),v=h,y=p*x,b=0,f||90!==Math.abs(T)||(b=-90===T&&"left"===k||90===T&&"right"===k?q:.5),f){var M=i(T)?+T:0;if(0!==M){var S=s.deg2rad(M);A=Math.abs(Math.sin(S))*q*x,b=0}}w.xFn=function(e){return e.dx+t-(v+e.fontSize*b)*x+A*e.fontSize},w.yFn=function(e){return e.dy+y+e.fontSize*$},w.anchorFn=function(e,t){return i(t)&&90===Math.abs(t)?"middle":_?"end":"start"},w.heightFn=function(t,n,r){return"right"===e.side&&(n*=-1),n<-30?-r:n<30?-.5*r:0}}return w},W.drawTicks=function(e,t,n){n=n||{};var i=t._id+"tick",a=[].concat(t.minor&&t.minor.ticks?n.vals.filter((function(e){return e.minor&&!e.noTick})):[]).concat(t.ticks?n.vals.filter((function(e){return!e.minor&&!e.noTick})):[]),o=n.layer.selectAll("path."+i).data(a,Ee);o.exit().remove(),o.enter().append("path").classed(i,1).classed("ticks",1).classed("crisp",!1!==n.crisp).each((function(e){return f.stroke(r.select(this),e.minor?t.minor.tickcolor:t.tickcolor)})).style("stroke-width",(function(n){return d.crispRound(e,n.minor?t.minor.tickwidth:t.tickwidth,1)+"px"})).attr("d",n.path).style("display",null),ze(t,[z]),o.attr("transform",n.transFn)},W.drawGrid=function(e,t,n){if(n=n||{},"sync"!==t.tickmode){var i=t._id+"grid",a=t.minor&&t.minor.showgrid,o=a?n.vals.filter((function(e){return e.minor})):[],s=t.showgrid?n.vals.filter((function(e){return!e.minor})):[],l=n.counterAxis;if(l&&W.shouldShowZeroLine(e,t,l))for(var c="array"===t.tickmode,u=0;u<s.length;u++){var h=s[u].x;if(c?!h:Math.abs(h)<t.dtick/100){if(s=s.slice(0,u).concat(s.slice(u+1)),!c)break;u--}}t._gw=d.crispRound(e,t.gridwidth,1);for(var p=a?d.crispRound(e,t.minor.gridwidth,1):0,m=n.layer,g=n.minorLayer,v=1;v>=0;v--){var y=v?m:g;if(y){var b=y.selectAll("path."+i).data(v?s:o,Ee);b.exit().remove(),b.enter().append("path").classed(i,1).classed("crisp",!1!==n.crisp),b.attr("transform",n.transFn).attr("d",n.path).each((function(e){return f.stroke(r.select(this),e.minor?t.minor.gridcolor:t.gridcolor||"#ddd")})).style("stroke-dasharray",(function(e){return d.dashStyle(e.minor?t.minor.griddash:t.griddash,e.minor?t.minor.gridwidth:t.gridwidth)})).style("stroke-width",(function(e){return(e.minor?p:t._gw)+"px"})).style("display",null),"function"==typeof n.path&&b.attr("d",n.path)}}ze(t,[I,F])}},W.drawZeroLine=function(e,t,n){n=n||n;var r=t._id+"zl",i=W.shouldShowZeroLine(e,t,n.counterAxis),a=n.layer.selectAll("path."+r).data(i?[{x:0,id:t._id}]:[]);a.exit().remove(),a.enter().append("path").classed(r,1).classed("zl",1).classed("crisp",!1!==n.crisp).each((function(){n.layer.selectAll("path").sort((function(e,t){return X(e.id,t.id)}))})),a.attr("transform",n.transFn).attr("d",n.path).call(f.stroke,t.zerolinecolor||f.defaultLine).style("stroke-width",d.crispRound(e,t.zerolinewidth,t._gw||1)+"px").style("display",null),ze(t,[P])},W.drawLabels=function(e,t,n){n=n||{};var a=e._fullLayout,o=t._id,u=n.cls||o+"tick",f=n.vals.filter((function(e){return e.text})),h=n.labelFns,p=n.secondary?0:t.tickangle,m=(t._prevTickAngles||{})[u],g=n.layer.selectAll("g."+u).data(t.showticklabels?f:[],Ee),v=[];function y(e,a){e.each((function(e){var o=r.select(this),s=o.select(".text-math-group"),u=h.anchorFn(e,a),f=n.transFn.call(o.node(),e)+(i(a)&&0!=+a?" rotate("+a+","+h.xFn(e)+","+(h.yFn(e)-e.fontSize/2)+")":""),p=c.lineCount(o),m=H*e.fontSize,g=h.heightFn(e,i(a)?+a:0,(p-1)*m);if(g&&(f+=l(0,g)),s.empty()){var v=o.select("text");v.attr({transform:f,"text-anchor":u}),v.style("opacity",1),t._adjustTickLabelsOverflow&&t._adjustTickLabelsOverflow()}else{var y=d.bBox(s.node()).width*{end:-.5,start:.5}[u];s.attr("transform",f+l(y,0))}}))}g.enter().append("g").classed(u,1).append("text").attr("text-anchor","middle").each((function(t){var n=r.select(this),i=e._promises.length;n.call(c.positionText,h.xFn(t),h.yFn(t)).call(d.font,{family:t.font,size:t.fontSize,color:t.fontColor,weight:t.fontWeight,style:t.fontStyle,variant:t.fontVariant,textcase:t.fontTextcase,lineposition:t.fontLineposition,shadow:t.fontShadow}).text(t.text).call(c.convertToTspans,e),e._promises[i]?v.push(e._promises.pop().then((function(){y(n,p)}))):y(n,p)})),ze(t,[j]),g.exit().remove(),n.repositionOnUpdate&&g.each((function(e){r.select(this).select("text").call(c.positionText,h.xFn(e),h.yFn(e))})),t._adjustTickLabelsOverflow=function(){var n=t.ticklabeloverflow;if(n&&"allow"!==n){var i=-1!==n.indexOf("hide"),o="x"===t._id.charAt(0),l=0,c=o?e._fullLayout.width:e._fullLayout.height;if(-1!==n.indexOf("domain")){var u=s.simpleMap(t.range,t.r2l);l=t.l2p(u[0])+t._offset,c=t.l2p(u[1])+t._offset}var f=Math.min(l,c),h=Math.max(l,c),p=t.side,m=1/0,v=-1/0;for(var y in g.each((function(e){var n=r.select(this);if(n.select(".text-math-group").empty()){var a=d.bBox(n.node()),s=0;o?(a.right>h||a.left<f)&&(s=1):(a.bottom>h||a.top+(t.tickangle?0:e.fontSize/4)<f)&&(s=1);var l=n.select("text");s?i&&l.style("opacity",0):(l.style("opacity",1),m="bottom"===p||"right"===p?Math.min(m,o?a.top:a.left):-1/0,v="top"===p||"left"===p?Math.max(v,o?a.bottom:a.right):1/0)}})),a._plots){var b=a._plots[y];if(t._id===b.xaxis._id||t._id===b.yaxis._id){var x=o?b.yaxis:b.xaxis;x&&(x["_visibleLabelMin_"+t._id]=m,x["_visibleLabelMax_"+t._id]=v)}}}},t._hideCounterAxisInsideTickLabels=function(e){var n="x"===t._id.charAt(0),i=[];for(var o in a._plots){var s=a._plots[o];t._id!==s.xaxis._id&&t._id!==s.yaxis._id||i.push(n?s.yaxis:s.xaxis)}i.forEach((function(n,i){n&&Fe(n)&&(e||[P,F,I,z,j]).forEach((function(e){var o="tick"===e.K&&"text"===e.L&&"period"===t.ticklabelmode,s=a._plots[t._mainSubplot];(e.K===P.K?s.zerolinelayer.selectAll("."+t._id+"zl"):e.K===F.K?s.minorGridlayer.selectAll("."+t._id):e.K===I.K?s.gridlayer.selectAll("."+t._id):s[t._id.charAt(0)+"axislayer"]).each((function(){var a=r.select(this);e.L&&(a=a.selectAll(e.L)),a.each((function(a){var s=t.l2p(o?ke(a):a.x)+t._offset,l=r.select(this);s<t["_visibleLabelMax_"+n._id]&&s>t["_visibleLabelMin_"+n._id]?l.style("display","none"):"tick"!==e.K||i||l.style("display",null)}))}))}))}))},y(g,m+1?m:p);var b=null;t._selections&&(t._selections[u]=g);var x=[function(){return v.length&&Promise.all(v)}];t.automargin&&a._redrawFromAutoMarginCount&&90===m?(b=m,x.push((function(){y(g,m)}))):x.push((function(){if(y(g,p),f.length&&t.autotickangles&&("log"!==t.type||"D"!==String(t.dtick).charAt(0))){b=t.autotickangles[0];var e,r=0,i=[],a=1;g.each((function(e){r=Math.max(r,e.fontSize);var n=t.l2p(e.x),o=Se(this),s=d.bBox(o.node());a=Math.max(a,c.lineCount(o)),i.push({top:0,bottom:10,height:10,left:n-s.width/2,right:n+s.width/2+2,width:s.width+2})}));var o=("boundaries"===t.tickson||t.showdividers)&&!n.secondary,l=f.length,u=Math.abs((f[l-1].x-f[0].x)*t._m)/(l-1),h=o?u/2:u,m=o?t.ticklen:1.25*r*a,v=h/Math.sqrt(Math.pow(h,2)+Math.pow(m,2)),x=t.autotickangles.map((function(e){return e*Math.PI/180})),_=x.find((function(e){return Math.abs(Math.cos(e))<=v}));void 0===_&&(_=x.reduce((function(e,t){return Math.abs(Math.cos(e))<Math.abs(Math.cos(t))?e:t}),x[0]));var w=_*(180/Math.PI);if(o){var A=2;for(t.ticks&&(A+=t.tickwidth/2),e=0;e<i.length;e++){var k=f[e].xbnd,E=i[e];if(null!==k[0]&&E.left-t.l2p(k[0])<A||null!==k[1]&&t.l2p(k[1])-E.right<A){b=w;break}}}else{var T=t.ticklabelposition||"",M=function(e){return-1!==T.indexOf(e)},S=M("top"),C=M("left"),O=M("right"),R=M("bottom")||C||S||O?(t.tickwidth||0)+6:0;for(e=0;e<i.length-1;e++)if(s.bBoxIntersect(i[e],i[e+1],R)){b=w;break}}b&&y(g,b)}})),t._tickAngles&&x.push((function(){t._tickAngles[u]=null===b?i(p)?p:0:b}));var _=function(){var e=0,n=0;return g.each((function(r,i){var a,o=Se(this);o.select(".text-math-group").empty()&&(t._vals[i]&&(a=t._vals[i].bb||d.bBox(o.node()),t._vals[i].bb=a),e=Math.max(e,a.width),n=Math.max(n,a.height))})),{labelsMaxW:e,labelsMaxH:n}},w=t._anchorAxis;if(w&&(w.autorange||w.insiderange)&&Fe(t)&&!K(a,t._id)&&(a._insideTickLabelsUpdaterange||(a._insideTickLabelsUpdaterange={}),w.autorange&&(a._insideTickLabelsUpdaterange[w._name+".autorange"]=w.autorange,x.push(_)),w.insiderange)){var A=_(),k="y"===t._id.charAt(0)?A.labelsMaxW:A.labelsMaxH;k+=6,"inside"===t.ticklabelposition&&(k+=t.ticklen||0);var E="right"===t.side||"top"===t.side?1:-1,T=1===E?1:0,M=1===E?0:1,S=[];S[M]=w.range[M];var C=w.range,O=w.r2p(C[T]),R=w.r2p(C[M]),N=a._insideTickLabelsUpdaterange[w._name+".range"];if(N){var L=w.r2p(N[T]),D=w.r2p(N[M]),B=E*("y"===t._id.charAt(0)?1:-1);B*O<B*L&&(O=L,S[T]=C[T]=N[T]),B*R>B*D&&(R=D,S[M]=C[M]=N[M])}var U=Math.abs(R-O);U-k>0?k*=1+k/(U-=k):k=0,"y"!==t._id.charAt(0)&&(k=-k),S[T]=w.p2r(w.r2p(C[T])+E*k),"min"===w.autorange||"max reversed"===w.autorange?(S[0]=null,w._rangeInitial0=void 0,w._rangeInitial1=void 0):"max"!==w.autorange&&"min reversed"!==w.autorange||(S[1]=null,w._rangeInitial0=void 0,w._rangeInitial1=void 0),a._insideTickLabelsUpdaterange[w._name+".range"]=S}var $=s.syncOrAsync(x);return $&&$.then&&e._promises.push($),$},W.getPxPosition=function(e,t){var n,r=e._fullLayout._size,i=t._id.charAt(0),a=t.side;return"free"!==t.anchor?n=t._anchorAxis:"x"===i?n={_offset:r.t+(1-(t.position||0))*r.h,_length:0}:"y"===i&&(n={_offset:r.l+(t.position||0)*r.w+t._shift,_length:0}),"top"===a||"left"===a?n._offset:"bottom"===a||"right"===a?n._offset+n._length:void 0},W.shouldShowZeroLine=function(e,t,n){var r=s.simpleMap(t.range,t.r2l);return r[0]*r[1]<=0&&t.zeroline&&("linear"===t.type||"-"===t.type)&&!(t.rangebreaks&&t.maskBreaks(0)===D)&&(Me(t,0)||!function(e,t,n,r){var i=n._mainAxis;if(!i)return;var a=e._fullLayout,o=t._id.charAt(0),s=W.counterLetter(t._id),l=t._offset+(Math.abs(r[0])<Math.abs(r[1])==("x"===o)?0:t._length);function c(e){if(!e.showline||!e.linewidth)return!1;var n=Math.max((e.linewidth+t.zerolinewidth)/2,1);function r(e){return"number"==typeof e&&Math.abs(e-l)<n}if(r(e._mainLinePosition)||r(e._mainMirrorPosition))return!0;var i=e._linepositions||{};for(var a in i)if(r(i[a][0])||r(i[a][1]))return!0}var u=a._plots[n._mainSubplot];if(!(u.mainplotinfo||u).overlays.length)return c(n,l);for(var f=W.list(e,s),d=0;d<f.length;d++){var h=f[d];if(h._mainAxis===i&&c(h,l))return!0}}(e,t,n,r)||function(e,t){for(var n=e._fullData,r=t._mainSubplot,i=t._id.charAt(0),a=0;a<n.length;a++){var s=n[a];if(!0===s.visible&&s.xaxis+s.yaxis===r){if(o.traceIs(s,"bar-like")&&s.orientation==={x:"h",y:"v"}[i])return!0;if(s.fill&&s.fill.charAt(s.fill.length-1)===i)return!0}}return!1}(e,t))},W.clipEnds=function(e,t){return t.filter((function(t){return Me(e,t.x)}))},W.allowAutoMargin=function(e){for(var t=W.list(e,"",!0),n=0;n<t.length;n++){var r=t[n];r.automargin&&(a.allowAutoMargin(e,Ce(r)),r.mirror&&a.allowAutoMargin(e,Oe(r))),o.getComponentMethod("rangeslider","isVisible")(r)&&a.allowAutoMargin(e,Re(r))}},W.swap=function(e,t){for(var n=function(e,t){var n,r,i=[];for(n=0;n<t.length;n++){var a=[],o=e._fullData[t[n]].xaxis,s=e._fullData[t[n]].yaxis;if(o&&s){for(r=0;r<i.length;r++)-1===i[r].x.indexOf(o)&&-1===i[r].y.indexOf(s)||a.push(r);if(a.length){var l,c=i[a[0]];if(a.length>1)for(r=1;r<a.length;r++)l=i[a[r]],Ne(c.x,l.x),Ne(c.y,l.y);Ne(c.x,[o]),Ne(c.y,[s])}else i.push({x:[o],y:[s]})}}return i}(e,t),r=0;r<n.length;r++)Le(e,n[r].x,n[r].y)}},44992:(e,t,n)=>{"use strict";var r=n(5605),i=n(56319),a=n(33351).BADNUM,o=i.isArrayOrTypedArray,s=i.isDateTime,l=i.cleanNumber,c=Math.round;function u(e,t){return t?r(e):"number"==typeof e}function f(e){return Math.max(1,(e-1)/1e3)}e.exports=function(e,t,n){var i=e,d=n.noMultiCategory;if(o(i)&&!i.length)return"-";if(!d&&function(e){return o(e[0])&&o(e[1])}(i))return"multicategory";if(d&&Array.isArray(i[0])){for(var h=[],p=0;p<i.length;p++)if(o(i[p]))for(var m=0;m<i[p].length;m++)h.push(i[p][m]);i=h}if(function(e,t){for(var n=e.length,i=f(n),a=0,o=0,l={},u=0;u<n;u+=i){var d=e[c(u)],h=String(d);l[h]||(l[h]=1,s(d,t)&&a++,r(d)&&o++)}return a>2*o}(i,t))return"date";var g="strict"!==n.autotypenumbers;return function(e,t){for(var n=e.length,r=f(n),i=0,o=0,s={},u=0;u<n;u+=r){var d=e[c(u)],h=String(d);if(!s[h]){s[h]=1;var p=typeof d;"boolean"===p?o++:(t?l(d)!==a:"number"===p)?i++:"string"===p&&o++}}return o>2*i}(i,g)?"category":function(e,t){for(var n=e.length,r=0;r<n;r++)if(u(e[r],t))return!0;return!1}(i,g)?"linear":"-"}},10849:(e,t,n)=>{"use strict";var r=n(5605),i=n(3360),a=n(56319),o=n(65210),s=n(75078),l=n(31403),c=n(1383),u=n(56087),f=n(90586),d=n(13506),h=n(32303),p=n(8199),m=n(7737),g=n(97121),v=n(56596).WEEKDAY_PATTERN,y=n(56596).HOUR_PATTERN;function b(e,t,n){function i(n,r){return a.coerce(e,t,l.rangebreaks,n,r)}if(i("enabled")){var o=i("bounds");if(o&&o.length>=2){var s,c,u="";if(2===o.length)for(s=0;s<2;s++)if(c=_(o[s])){u=v;break}var f=i("pattern",u);if(f===v)for(s=0;s<2;s++)(c=_(o[s]))&&(t.bounds[s]=o[s]=c-1);if(f)for(s=0;s<2;s++)switch(c=o[s],f){case v:if(!r(c))return void(t.enabled=!1);if((c=+c)!==Math.floor(c)||c<0||c>=7)return void(t.enabled=!1);t.bounds[s]=o[s]=c;break;case y:if(!r(c))return void(t.enabled=!1);if((c=+c)<0||c>24)return void(t.enabled=!1);t.bounds[s]=o[s]=c}if(!1===n.autorange){var d=n.range;if(d[0]<d[1]){if(o[0]<d[0]&&o[1]>d[1])return void(t.enabled=!1)}else if(o[0]>d[0]&&o[1]<d[1])return void(t.enabled=!1)}}else{var h=i("values");if(!h||!h.length)return void(t.enabled=!1);i("dvalue")}}}e.exports=function(e,t,n,r,y){var x,_=r.letter,w=r.font||{},A=r.splomStash||{},k=n("visible",!r.visibleDflt),E=t._template||{},T=t.type||E.type||"-";"date"===T&&(i.getComponentMethod("calendars","handleDefaults")(e,t,"calendar",r.calendar),r.noTicklabelmode||(x=n("ticklabelmode")));r.noTicklabelindex||"date"!==T&&"linear"!==T||n("ticklabelindex");var M="";r.noTicklabelposition&&"multicategory"!==T||(M=a.coerce(e,t,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===x?["outside","inside"]:"x"===_?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),r.noTicklabeloverflow||n("ticklabeloverflow",-1!==M.indexOf("inside")?"hide past domain":"category"===T||"multicategory"===T?"allow":"hide past div"),g(t,y),m(e,t,n,r),h(e,t,n,r),"category"===T||r.noHover||n("hoverformat");var S=n("color"),C=S!==l.color.dflt?S:w.color,O=A.label||y._dfltTitle[_];if(d(e,t,n,T,r),!k)return t;n("title.text",O),a.coerceFont(n,"title.font",w,{overrideDflt:{size:a.bigFont(w.size),color:C}}),c(e,t,n,T);var R=r.hasMinor;if(R&&(o.newContainer(t,"minor"),c(e,t,n,T,{isMinor:!0})),f(e,t,n,T,r),u(e,t,n,r),R){var N=r.isMinor;r.isMinor=!0,u(e,t,n,r),r.isMinor=N}p(e,t,n,{dfltColor:S,bgColor:r.bgColor,showGrid:r.showGrid,hasMinor:R,attributes:l}),!R||t.minor.ticks||t.minor.showgrid||delete t.minor,(t.showline||t.ticks)&&n("mirror");var L,D="multicategory"===T;r.noTickson||"category"!==T&&!D||!t.ticks&&!t.showgrid||(D&&(L="boundaries"),"boundaries"===n("tickson",L)&&delete t.ticklabelposition);D&&(n("showdividers")&&(n("dividercolor"),n("dividerwidth")));if("date"===T)if(s(e,t,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:b}),t.rangebreaks.length){for(var P=0;P<t.rangebreaks.length;P++)if(t.rangebreaks[P].pattern===v){t._hasDayOfWeekBreaks=!0;break}if(g(t,y),y._has("scattergl")||y._has("splom"))for(var I=0;I<r.data.length;I++){var F=r.data[I];"scattergl"!==F.type&&"splom"!==F.type||(F.visible=!1,a.warn(F.type+" traces do not work on axes with rangebreaks. Setting trace "+F.index+" to `visible: false`."))}}else delete t.rangebreaks;return t};var x={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function _(e){if("string"==typeof e)return x[e.substr(0,3).toLowerCase()]}},66010:(e,t,n)=>{"use strict";var r=n(71982),i=r.FORMAT_LINK,a=r.DATE_FORMAT_LINK;function o(e,t){return["Sets the "+e+" formatting rule"+(t?"for `"+t+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+i+"."].join(" ")}function s(e,t){return o(e,t)+[" And for dates see: "+a+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}e.exports={axisHoverFormat:function(e,t){return{valType:"string",dflt:"",editType:"none",description:(t?o:s)("hover text",e)+["By default the values are formatted using "+(t?"generic number format":"`"+e+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:o,descriptionWithDates:s}},33489:(e,t,n)=>{"use strict";var r=n(3360),i=n(56596);function a(e,t){if(t&&t.length)for(var n=0;n<t.length;n++)if(t[n][e])return!0;return!1}t.id2name=function(e){if("string"==typeof e&&e.match(i.AX_ID_PATTERN)){var t=e.split(" ")[0].substr(1);return"1"===t&&(t=""),e.charAt(0)+"axis"+t}},t.name2id=function(e){if(e.match(i.AX_NAME_PATTERN)){var t=e.substr(5);return"1"===t&&(t=""),e.charAt(0)+t}},t.cleanId=function(e,t,n){var r=/( domain)$/.test(e);if("string"==typeof e&&e.match(i.AX_ID_PATTERN)&&(!t||e.charAt(0)===t)&&(!r||n)){var a=e.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===a&&(a=""),e.charAt(0)+a+(r&&n?" domain":"")}},t.list=function(e,n,r){var i=e._fullLayout;if(!i)return[];var a,o=t.listIds(e,n),s=new Array(o.length);for(a=0;a<o.length;a++){var l=o[a];s[a]=i[l.charAt(0)+"axis"+l.substr(1)]}if(!r){var c=i._subplots.gl3d||[];for(a=0;a<c.length;a++){var u=i[c[a]];n?s.push(u[n+"axis"]):s.push(u.xaxis,u.yaxis,u.zaxis)}}return s},t.listIds=function(e,t){var n=e._fullLayout;if(!n)return[];var r=n._subplots;return t?r[t+"axis"]:r.xaxis.concat(r.yaxis)},t.getFromId=function(e,n,r){var i=e._fullLayout;return n=void 0===n||"string"!=typeof n?n:n.replace(" domain",""),"x"===r?n=n.replace(/y[0-9]*/,""):"y"===r&&(n=n.replace(/x[0-9]*/,"")),i[t.id2name(n)]},t.getFromTrace=function(e,n,i){var a=e._fullLayout,o=null;if(r.traceIs(n,"gl3d")){var s=n.scene;"scene"===s.substr(0,5)&&(o=a[s][i+"axis"])}else o=t.getFromId(e,n[i+"axis"]||i);return o},t.idSort=function(e,t){var n=e.charAt(0),r=t.charAt(0);return n!==r?n>r?1:-1:+(e.substr(1)||1)-+(t.substr(1)||1)},t.ref2id=function(e){return!!/^[xyz]/.test(e)&&e.split(" ")[0]},t.isLinked=function(e,t){return a(t,e._axisMatchGroups)||a(t,e._axisConstraintGroups)}},32303:(e,t,n)=>{"use strict";var r=n(41146).isTypedArraySpec;e.exports=function(e,t,n,i){if("category"===t.type){var a,o=e.categoryarray,s=Array.isArray(o)&&o.length>0||r(o);s&&(a="array");var l,c=n("categoryorder",a);"array"===c&&(l=n("categoryarray")),s||"array"!==c||(c=t.categoryorder="trace"),"trace"===c?t._initialCategories=[]:"array"===c?t._initialCategories=l.slice():(l=function(e,t){var n,r,i,a=t.dataAttr||e._id.charAt(0),o={};if(t.axData)n=t.axData;else for(n=[],r=0;r<t.data.length;r++){var s=t.data[r];s[a+"axis"]===e._id&&n.push(s)}for(r=0;r<n.length;r++){var l=n[r][a];for(i=0;i<l.length;i++){var c=l[i];null!=c&&(o[c]=1)}}return Object.keys(o)}(t,i).sort(),"category ascending"===c?t._initialCategories=l:"category descending"===c&&(t._initialCategories=l.reverse()))}}},59545:(e,t,n)=>{"use strict";var r=n(5605),i=n(56319),a=n(33351),o=a.ONEDAY,s=a.ONEWEEK;t.dtick=function(e,t){var n="log"===t,i="date"===t,a="category"===t,s=i?o:1;if(!e)return s;if(r(e))return(e=Number(e))<=0?s:a?Math.max(1,Math.round(e)):i?Math.max(.1,e):e;if("string"!=typeof e||!i&&!n)return s;var l=e.charAt(0),c=e.substr(1);return(c=r(c)?Number(c):0)<=0||!(i&&"M"===l&&c===Math.round(c)||n&&"L"===l||n&&"D"===l&&(1===c||2===c))?s:e},t.tick0=function(e,t,n,a){return"date"===t?i.cleanDate(e,i.dateTick0(n,a%s==0?1:0)):"D1"!==a&&"D2"!==a?r(e)?Number(e):0:void 0}},56596:(e,t,n)=>{"use strict";var r=n(11800).counter;e.exports={idRegex:{x:r("x","( domain)?"),y:r("y","( domain)?")},attrRegex:r("[xy]axis"),xAxisMatch:r("xaxis"),yAxisMatch:r("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"},zindexSeparator:"z"}},92397:(e,t,n)=>{"use strict";var r=n(56319),i=n(39065),a=n(33489).id2name,o=n(31403),s=n(74577),l=n(97121),c=n(33351).ALMOST_EQUAL,u=n(12564).FROM_BL;function f(e,t,n){var i=n.axIds,s=n.layoutOut,l=n.hasImage,c=s._axisConstraintGroups,u=s._axisMatchGroups,f=t._id,m=f.charAt(0),g=((s._splomAxes||{})[m]||{})[f]||{},v=t._id,y="x"===v.charAt(0);function b(n,i){return r.coerce(e,t,o,n,i)}t._matchGroup=null,t._constraintGroup=null,b("constrain",l?"domain":"range"),r.coerce(e,t,{constraintoward:{valType:"enumerated",values:y?["left","center","right"]:["bottom","middle","top"],dflt:y?"center":"middle"}},"constraintoward");var x,_,w=t.type,A=[];for(x=0;x<i.length;x++){if((_=i[x])!==v)s[a(_)].type===w&&A.push(_)}var k=h(c,v);if(k){var E=[];for(x=0;x<A.length;x++)k[_=A[x]]||E.push(_);A=E}var T,M,S=A.length;S&&(e.matches||g.matches)&&(T=r.coerce(e,t,{matches:{valType:"enumerated",values:A,dflt:-1!==A.indexOf(g.matches)?g.matches:void 0}},"matches"));var C=l&&!y?t.anchor:void 0;if(S&&!T&&(e.scaleanchor||C)&&(M=r.coerce(e,t,{scaleanchor:{valType:"enumerated",values:A.concat([!1])}},"scaleanchor",C)),T){t._matchGroup=p(u,v,T,1);var O=s[a(T)],R=d(s,t)/d(s,O);y!==("x"===T.charAt(0))&&(R=(y?"x":"y")+R),p(c,v,T,R)}else e.matches&&-1!==i.indexOf(e.matches)&&r.warn("ignored "+t._name+'.matches: "'+e.matches+'" to avoid an infinite loop');if(M){var N=b("scaleratio");N||(N=t.scaleratio=1),p(c,v,M,N)}else e.scaleanchor&&-1!==i.indexOf(e.scaleanchor)&&r.warn("ignored "+t._name+'.scaleanchor: "'+e.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function d(e,t){var n=t.domain;return n||(n=e[a(t.overlaying)].domain),n[1]-n[0]}function h(e,t){for(var n=0;n<e.length;n++)if(e[n][t])return e[n];return null}function p(e,t,n,r){var i,a,o,s,l,c=h(e,t);null===c?((c={})[t]=1,l=e.length,e.push(c)):l=e.indexOf(c);var u=Object.keys(c);for(i=0;i<e.length;i++)if(o=e[i],i!==l&&o[n]){var f=o[n];for(a=0;a<u.length;a++)o[s=u[a]]=m(f,m(r,c[s]));return void e.splice(l,1)}if(1!==r)for(a=0;a<u.length;a++){var d=u[a];c[d]=m(r,c[d])}c[n]=1}function m(e,t){var n,r,i="",a="";"string"==typeof e&&(n=(i=e.match(/^[xy]*/)[0]).length,e=+e.substr(n)),"string"==typeof t&&(r=(a=t.match(/^[xy]*/)[0]).length,t=+t.substr(r));var o=e*t;return n||r?n&&r&&i.charAt(0)!==a.charAt(0)?n===r?o:(n>r?i.substr(r):a.substr(n))+o:i+a+e*t:o}function g(e,t){for(var n=t._size,r=n.h/n.w,i={},a=Object.keys(e),o=0;o<a.length;o++){var s=a[o],l=e[s];if("string"==typeof l){var c=l.match(/^[xy]*/)[0],u=c.length;l=+l.substr(u);for(var f="y"===c.charAt(0)?r:1/r,d=0;d<u;d++)l*=f}i[s]=l}return i}function v(e,t){var n=e._inputDomain,r=u[e.constraintoward],i=n[0]+(n[1]-n[0])*r;e.domain=e._input.domain=[i+(n[0]-i)/t,i+(n[1]-i)/t],e.setScale()}t.handleDefaults=function(e,t,n){var i,o,s,c,u,d,h,p,m=n.axIds,g=n.axHasImage,v=t._axisConstraintGroups=[],y=t._axisMatchGroups=[];for(i=0;i<m.length;i++)f(u=e[c=a(m[i])],d=t[c],{axIds:m,layoutOut:t,hasImage:g[c]});function b(e,n){for(i=0;i<e.length;i++)for(s in o=e[i])t[a(s)][n]=o}for(b(y,"_matchGroup"),i=0;i<v.length;i++)for(s in o=v[i])if((d=t[a(s)]).fixedrange){for(var x in o){var _=a(x);!1===(e[_]||{}).fixedrange&&r.warn("fixedrange was specified as false for axis "+_+" but was overridden because another axis in its constraint group has fixedrange true"),t[_].fixedrange=!0}break}for(i=0;i<v.length;){for(s in o=v[i]){(d=t[a(s)])._matchGroup&&Object.keys(d._matchGroup).length===Object.keys(o).length&&(v.splice(i,1),i--);break}i++}b(v,"_constraintGroup");var w=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],A=!1,k=!1;function E(){p=d[h],"rangebreaks"===h&&(k=d._hasDayOfWeekBreaks)}for(i=0;i<y.length;i++){o=y[i];for(var T=0;T<w.length;T++){var M;for(s in h=w[T],p=null,o)if(u=e[c=a(s)],d=t[c],h in d){if(!d.matches&&(M=d,h in u)){E();break}null===p&&h in u&&E()}if("range"===h&&p&&u.range&&2===u.range.length&&null!==u.range[0]&&null!==u.range[1]&&(A=!0),"autorange"===h&&null===p&&A&&(p=!1),null===p&&h in M&&(p=M[h]),null!==p)for(s in o)(d=t[a(s)])[h]="range"===h?p.slice():p,"rangebreaks"===h&&(d._hasDayOfWeekBreaks=k,l(d,t))}}},t.enforce=function(e){var t,n,r,o,l,u,f,d,h=e._fullLayout,p=h._axisConstraintGroups||[];for(t=0;t<p.length;t++){r=g(p[t],h);var m=Object.keys(r),y=1/0,b=0,x=1/0,_={},w={},A=!1;for(n=0;n<m.length;n++)w[o=m[n]]=l=h[a(o)],l._inputDomain?l.domain=l._inputDomain.slice():l._inputDomain=l.domain.slice(),l._inputRange||(l._inputRange=l.range.slice()),l.setScale(),_[o]=u=Math.abs(l._m)/r[o],y=Math.min(y,u),"domain"!==l.constrain&&l._constraintShrinkable||(x=Math.min(x,u)),delete l._constraintShrinkable,b=Math.max(b,u),"domain"===l.constrain&&(A=!0);if(!(y>c*b)||A)for(n=0;n<m.length;n++)if(u=_[o=m[n]],f=(l=w[o]).constrain,u!==x||"domain"===f)if(d=u/x,"range"===f)s(l,d);else{var k=l._inputDomain,E=(l.domain[1]-l.domain[0])/(k[1]-k[0]),T=(l.r2l(l.range[1])-l.r2l(l.range[0]))/(l.r2l(l._inputRange[1])-l.r2l(l._inputRange[0]));if((d/=E)*T<1){l.domain=l._input.domain=k.slice(),s(l,d);continue}if(T<1&&(l.range=l._input.range=l._inputRange.slice(),d*=T),l.autorange){var M=l.r2l(l.range[0]),S=l.r2l(l.range[1]),C=(M+S)/2,O=C,R=C,N=Math.abs(S-C),L=C-N*d*1.0001,D=C+N*d*1.0001,P=i.makePadFn(h,l,0),I=i.makePadFn(h,l,1);v(l,d);var F,z,j=Math.abs(l._m),B=i.concatExtremes(e,l),U=B.min,$=B.max;for(z=0;z<U.length;z++)(F=U[z].val-P(U[z])/j)>L&&F<O&&(O=F);for(z=0;z<$.length;z++)(F=$[z].val+I($[z])/j)<D&&F>R&&(R=F);d/=(R-O)/(2*N),O=l.l2r(O),R=l.l2r(R),l.range=l._input.range=M<S?[O,R]:[R,O]}v(l,d)}}},t.getAxisGroup=function(e,t){for(var n=e._axisMatchGroups,r=0;r<n.length;r++){if(n[r][t])return"g"+r}return t},t.clean=function(e,t){if(t._inputDomain){for(var n=!1,r=t._id,i=e._fullLayout._axisConstraintGroups,a=0;a<i.length;a++)if(i[a][r]){n=!0;break}n&&"domain"===t.constrain||(t._input.domain=t.domain=t._inputDomain,delete t._inputDomain)}}},53330:(e,t,n)=>{"use strict";var r=n(93268),i=n(56319),a=i.numberFormat,o=n(3707),s=n(80959),l=n(3360),c=i.strTranslate,u=n(56953),f=n(53408),d=n(14797),h=n(17911),p=n(596),m=n(47281),g=n(85605),v=n(89232),y=v.selectingOrDrawing,b=v.freeMode,x=n(12564).FROM_TL,_=n(68857),w=n(96099).redrawReglTraces,A=n(31496),k=n(33489).getFromId,E=n(94190).prepSelect,T=n(94190).clearOutline,M=n(94190).selectOnClick,S=n(74577),C=n(56596),O=C.MINDRAG,R=C.MINZOOM,N=!0;function L(e,t,n,r){var a=i.ensureSingle(e.draglayer,t,n,(function(t){t.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",e.id)}));return a.call(m,r),a.node()}function D(e,t,n,i,a,o,s){var l=L(e,"rect",t,n);return r.select(l).call(d.setRect,i,a,o,s),l}function P(e,t){for(var n=0;n<e.length;n++)if(!e[n].fixedrange)return t;return""}function I(e,t,n,r,i){for(var a=0;a<e.length;a++){var o=e[a];if(!o.fixedrange)if(o.rangebreaks){var s="y"===o._id.charAt(0),l=s?1-t:t,c=s?1-n:n;r[o._name+".range[0]"]=o.l2r(o.p2l(l*o._length)),r[o._name+".range[1]"]=o.l2r(o.p2l(c*o._length))}else{var u=o._rl[0],f=o._rl[1]-u;r[o._name+".range[0]"]=o.l2r(u+f*t),r[o._name+".range[1]"]=o.l2r(u+f*n)}}if(i&&i.length){var d=(t+(1-n))/2;I(i,d,1-d,r,[])}}function F(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(!r.fixedrange){if(r.rangebreaks){var i=r._length,a=(r.p2l(0+t)-r.p2l(0)+(r.p2l(i+t)-r.p2l(i)))/2;r.range=[r.l2r(r._rl[0]-a),r.l2r(r._rl[1]-a)]}else r.range=[r.l2r(r._rl[0]-t/r._m),r.l2r(r._rl[1]-t/r._m)];r.limitRange&&r.limitRange()}}}function z(e){return 1-(e>=0?Math.min(e,.9):1/(1/Math.max(e,-.3)+3.222))}function j(e,t,n,r,i){return e.append("path").attr("class","zoombox").style({fill:t>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",c(n,r)).attr("d",i+"Z")}function B(e,t,n){return e.append("path").attr("class","zoombox-corners").style({fill:f.background,stroke:f.defaultLine,"stroke-width":1,opacity:0}).attr("transform",c(t,n)).attr("d","M0,0Z")}function U(e,t,n,r,i,a){e.attr("d",r+"M"+n.l+","+n.t+"v"+n.h+"h"+n.w+"v-"+n.h+"h-"+n.w+"Z"),$(e,t,i,a)}function $(e,t,n,r){n||(e.transition().style("fill",r>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),t.transition().style("opacity",1).duration(200))}function q(e){r.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function H(e){N&&e.data&&e._context.showTips&&(i.notifier(i._(e,"Double-click to zoom back out"),"long"),N=!1)}function V(e){var t=Math.floor(Math.min(e.b-e.t,e.r-e.l,R)/2);return"M"+(e.l-3.5)+","+(e.t-.5+t)+"h3v"+-t+"h"+t+"v-3h-"+(t+3)+"ZM"+(e.r+3.5)+","+(e.t-.5+t)+"h-3v"+-t+"h"+-t+"v-3h"+(t+3)+"ZM"+(e.r+3.5)+","+(e.b+.5-t)+"h-3v"+t+"h"+-t+"v3h"+(t+3)+"ZM"+(e.l-3.5)+","+(e.b+.5-t)+"h3v"+t+"h"+t+"v3h-"+(t+3)+"Z"}function W(e,t,n,r,a){for(var o,s,l,c,u=!1,f={},d={},h=(a||{}).xaHash,p=(a||{}).yaHash,m=0;m<t.length;m++){var g=t[m];for(o in n)if(g[o]){for(l in g)a&&(h[l]||p[l])||("x"===l.charAt(0)?n:r)[l]||(f[l]=o);for(s in r)a&&(h[s]||p[s])||!g[s]||(u=!0)}for(s in r)if(g[s])for(c in g)a&&(h[c]||p[c])||("x"===c.charAt(0)?n:r)[c]||(d[c]=s)}u&&(i.extendFlat(f,d),d={});var v={},y=[];for(l in f){var b=k(e,l);y.push(b),v[b._id]=b}var x={},_=[];for(c in d){var w=k(e,c);_.push(w),x[w._id]=w}return{xaHash:v,yaHash:x,xaxes:y,yaxes:_,xLinks:f,yLinks:d,isSubplotConstrained:u}}function G(e,t){if(s){var n=void 0!==e.onwheel?"wheel":"mousewheel";e._onwheel&&e.removeEventListener(n,e._onwheel),e._onwheel=t,e.addEventListener(n,t,{passive:!1})}else void 0!==e.onwheel?e.onwheel=t:void 0!==e.onmousewheel?e.onmousewheel=t:e.isAddedWheelEvent||(e.isAddedWheelEvent=!0,e.addEventListener("wheel",t,{passive:!1}))}function Y(e){var t=[];for(var n in e)t.push(e[n]);return t}e.exports={makeDragBox:function(e,t,n,s,c,f,m,v){var N,L,$,X,K,Z,J,Q,ee,te,ne,re,ie,ae,oe,se,le,ce,ue,fe,de,he,pe,me=e._fullLayout._zoomlayer,ge=m+v==="nsew",ve=1===(m+v).length;function ye(){if(N=t.xaxis,L=t.yaxis,ee=N._length,te=L._length,J=N._offset,Q=L._offset,($={})[N._id]=N,(X={})[L._id]=L,m&&v)for(var n=t.overlays,r=0;r<n.length;r++){var i=n[r].xaxis;$[i._id]=i;var a=n[r].yaxis;X[a._id]=a}K=Y($),Z=Y(X),ie=P(K,v),ae=P(Z,m),oe=!ae&&!ie,re=W(e,e._fullLayout._axisMatchGroups,$,X);var o=(ne=W(e,e._fullLayout._axisConstraintGroups,$,X,re)).isSubplotConstrained||re.isSubplotConstrained;se=v||o,le=m||o;var s=e._fullLayout;ce=s._has("scattergl"),ue=s._has("splom"),fe=s._has("svg")}n+=t.yaxis._shift,ye();var be=function(e,t,n){if(!e)return"pointer";if("nsew"===e)return n?"":"pan"===t?"move":"crosshair";return e.toLowerCase()+"-resize"}(ae+ie,e._fullLayout.dragmode,ge),xe=D(t,m+v+"drag",be,n,s,c,f);if(oe&&!ge)return xe.onmousedown=null,xe.style.pointerEvents="none",xe;var _e,we,Ae,ke,Ee,Te,Me,Se,Ce,Oe,Re={element:xe,gd:e,plotinfo:t};function Ne(){Re.plotinfo.selection=!1,T(e)}function Le(e,n){var i=Re.gd;if(i._fullLayout._activeShapeIndex>=0)i._fullLayout._deactivateShape(i);else{var o=i._fullLayout.clickmode;if(q(i),2!==e||ve||He(),ge)o.indexOf("select")>-1&&M(n,i,K,Z,t.id,Re),o.indexOf("event")>-1&&h.click(i,n,t.id);else if(1===e&&ve){var s=m?L:N,c="s"===m||"w"===v?0:1,f=s._name+".range["+c+"]",d=function(e,t){var n,r=e.range[t],i=Math.abs(r-e.range[1-t]);return"date"===e.type?r:"log"===e.type?(n=Math.ceil(Math.max(0,-Math.log(i)/Math.LN10))+3,a("."+n+"g")(Math.pow(10,r))):(n=Math.floor(Math.log(Math.abs(r))/Math.LN10)-Math.floor(Math.log(i)/Math.LN10)+4,a("."+String(n)+"g")(r))}(s,c),p="left",g="middle";if(s.fixedrange)return;m?(g="n"===m?"top":"bottom","right"===s.side&&(p="right")):"e"===v&&(p="right"),i._context.showAxisRangeEntryBoxes&&r.select(xe).call(u.makeEditable,{gd:i,immediate:!0,background:i._fullLayout.paper_bgcolor,text:String(d),fill:s.tickfont?s.tickfont.color:"#444",horizontalAlign:p,verticalAlign:g}).on("edit",(function(e){var t=s.d2r(e);void 0!==t&&l.call("_guiRelayout",i,f,t)}))}}}function De(t,n){if(e._transitioningWithDuration)return!1;var r=Math.max(0,Math.min(ee,he*t+_e)),i=Math.max(0,Math.min(te,pe*n+we)),a=Math.abs(r-_e),o=Math.abs(i-we);function s(){Me="",Ae.r=Ae.l,Ae.t=Ae.b,Ce.attr("d","M0,0Z")}if(Ae.l=Math.min(_e,r),Ae.r=Math.max(_e,r),Ae.t=Math.min(we,i),Ae.b=Math.max(we,i),ne.isSubplotConstrained)a>R||o>R?(Me="xy",a/ee>o/te?(o=a*te/ee,we>i?Ae.t=we-o:Ae.b=we+o):(a=o*ee/te,_e>r?Ae.l=_e-a:Ae.r=_e+a),Ce.attr("d",V(Ae))):s();else if(re.isSubplotConstrained)if(a>R||o>R){Me="xy";var l=Math.min(Ae.l/ee,(te-Ae.b)/te),c=Math.max(Ae.r/ee,(te-Ae.t)/te);Ae.l=l*ee,Ae.r=c*ee,Ae.b=(1-l)*te,Ae.t=(1-c)*te,Ce.attr("d",V(Ae))}else s();else!ae||o<Math.min(Math.max(.6*a,O),R)?a<O||!ie?s():(Ae.t=0,Ae.b=te,Me="x",Ce.attr("d",function(e,t){return"M"+(e.l-.5)+","+(t-R-.5)+"h-3v"+(2*R+1)+"h3ZM"+(e.r+.5)+","+(t-R-.5)+"h3v"+(2*R+1)+"h-3Z"}(Ae,we))):!ie||a<Math.min(.6*o,R)?(Ae.l=0,Ae.r=ee,Me="y",Ce.attr("d",function(e,t){return"M"+(t-R-.5)+","+(e.t-.5)+"v-3h"+(2*R+1)+"v3ZM"+(t-R-.5)+","+(e.b+.5)+"v3h"+(2*R+1)+"v-3Z"}(Ae,_e))):(Me="xy",Ce.attr("d",V(Ae)));Ae.w=Ae.r-Ae.l,Ae.h=Ae.b-Ae.t,Me&&(Oe=!0),e._dragged=Oe,U(Se,Ce,Ae,Ee,Te,ke),Pe(),e.emit("plotly_relayouting",de),Te=!0}function Pe(){de={},"xy"!==Me&&"x"!==Me||(I(K,Ae.l/ee,Ae.r/ee,de,ne.xaxes),$e("x",de)),"xy"!==Me&&"y"!==Me||(I(Z,(te-Ae.b)/te,(te-Ae.t)/te,de,ne.yaxes),$e("y",de))}function Ie(){Pe(),q(e),Ve(),H(e)}Re.prepFn=function(t,n,r){var a=Re.dragmode,s=e._fullLayout.dragmode;s!==a&&(Re.dragmode=s),ye(),he=e._fullLayout._invScaleX,pe=e._fullLayout._invScaleY,oe||(ge?t.shiftKey?"pan"===s?s="zoom":y(s)||(s="pan"):t.ctrlKey&&(s="pan"):s="pan"),b(s)?Re.minDrag=1:Re.minDrag=void 0,y(s)?(Re.xaxes=K,Re.yaxes=Z,E(t,n,r,Re,s)):(Re.clickFn=Le,y(a)&&Ne(),oe||("zoom"===s?(Re.moveFn=De,Re.doneFn=Ie,Re.minDrag=1,function(t,n,r){var a=xe.getBoundingClientRect();_e=n-a.left,we=r-a.top,e._fullLayout._calcInverseTransform(e);var s=i.apply3DTransform(e._fullLayout._invTransform)(_e,we);_e=s[0],we=s[1],Ae={l:_e,r:_e,w:0,t:we,b:we,h:0},ke=e._hmpixcount?e._hmlumcount/e._hmpixcount:o(e._fullLayout.plot_bgcolor).getLuminance(),Te=!1,Me="xy",Oe=!1,Se=j(me,ke,J,Q,Ee="M0,0H"+ee+"V"+te+"H0V0"),Ce=B(me,J,Q)}(0,n,r)):"pan"===s&&(Re.moveFn=Ue,Re.doneFn=Ve))),e._fullLayout._redrag=function(){var t=e._dragdata;if(t&&t.element===xe){var n=e._fullLayout.dragmode;y(n)||(ye(),We([0,0,ee,te]),Re.moveFn(t.dx,t.dy))}}},g.init(Re);var Fe=[0,0,ee,te],ze=null,je=C.REDRAWDELAY,Be=t.mainplot?e._fullLayout._plots[t.mainplot]:t;function Ue(t,n){if(t*=he,n*=pe,!e._transitioningWithDuration){if(e._fullLayout._replotting=!0,"ew"===ie||"ns"===ae){var r=ie?-t:0,i=ae?-n:0;if(re.isSubplotConstrained){if(ie&&ae){var a=(t/ee-n/te)/2;r=-(t=a*ee),i=-(n=-a*te)}ae?r=-i*ee/te:i=-r*te/ee}return ie&&(F(K,t),$e("x")),ae&&(F(Z,n),$e("y")),We([r,i,ee,te]),qe(),void e.emit("plotly_relayouting",de)}var o,s,l="w"===ie==("n"===ae)?1:-1;if(ie&&ae&&(ne.isSubplotConstrained||re.isSubplotConstrained)){var c=(t/ee+l*n/te)/2;t=c*ee,n=l*c*te}if("w"===ie?t=h(K,0,t):"e"===ie?t=h(K,1,-t):ie||(t=0),"n"===ae?n=h(Z,1,n):"s"===ae?n=h(Z,0,-n):ae||(n=0),o="w"===ie?t:0,s="n"===ae?n:0,ne.isSubplotConstrained&&!re.isSubplotConstrained||re.isSubplotConstrained&&ie&&ae&&l>0){var u;if(re.isSubplotConstrained||!ie&&1===ae.length){for(u=0;u<K.length;u++)K[u].range=K[u]._r.slice(),S(K[u],1-n/te);o=(t=n*ee/te)/2}if(re.isSubplotConstrained||!ae&&1===ie.length){for(u=0;u<Z.length;u++)Z[u].range=Z[u]._r.slice(),S(Z[u],1-t/ee);s=(n=t*te/ee)/2}}re.isSubplotConstrained&&ae||$e("x"),re.isSubplotConstrained&&ie||$e("y");var f=ee-t,d=te-n;!re.isSubplotConstrained||ie&&ae||(ie?(s=o?0:t*te/ee,d=f*te/ee):(o=s?0:n*ee/te,f=d*ee/te)),We([o,s,f,d]),qe(),e.emit("plotly_relayouting",de)}function h(e,t,n){for(var r,i,a=1-t,o=0;o<e.length;o++){var s=e[o];if(!s.fixedrange){r=s,i=s._rl[a]+(s._rl[t]-s._rl[a])/z(n/s._length);var l=s.l2r(i);!1!==l&&void 0!==l&&(s.range[t]=l)}}return r._length*(r._rl[t]-i)/(r._rl[t]-r._rl[a])}}function $e(e,t){for(var n=re.isSubplotConstrained?{x:Z,y:K}[e]:re[e+"axes"],r=re.isSubplotConstrained?{x:K,y:Z}[e]:[],i=0;i<n.length;i++){var a=n[i],o=a._id,s=re.xLinks[o]||re.yLinks[o],l=r[0]||$[s]||X[s];l&&(t?(t[a._name+".range[0]"]=t[l._name+".range[0]"],t[a._name+".range[1]"]=t[l._name+".range[1]"]):a.range=l.range.slice())}}function qe(){var n,r=[];function i(e){for(n=0;n<e.length;n++)e[n].fixedrange||r.push(e[n]._id)}function a(e,t){for(n=0;n<e.length;n++){var i=e[n],a=i[t];i.fixedrange||"sync"!==a.tickmode||r.push(a._id)}}for(se&&(i(K),i(ne.xaxes),i(re.xaxes),a(t.overlays,"xaxis")),le&&(i(Z),i(ne.yaxes),i(re.yaxes),a(t.overlays,"yaxis")),de={},n=0;n<r.length;n++){var o=r[n],s=k(e,o);p.drawOne(e,s,{skipTitle:!0}),de[s._name+".range[0]"]=s.range[0],de[s._name+".range[1]"]=s.range[1]}p.redrawComponents(e,r)}function He(){if(!e._transitioningWithDuration){var t=e._context.doubleClick,n=[];ie&&(n=n.concat(K)),ae&&(n=n.concat(Z)),re.xaxes&&(n=n.concat(re.xaxes)),re.yaxes&&(n=n.concat(re.yaxes));var r,i,a={};if("reset+autosize"===t)for(t="autosize",i=0;i<n.length;i++){var o=(r=n[i])._rangeInitial0,s=r._rangeInitial1,c=void 0!==o||void 0!==s;if(c&&(void 0!==o&&o!==r.range[0]||void 0!==s&&s!==r.range[1])||!c&&!0!==r.autorange){t="reset";break}}if("autosize"===t)for(i=0;i<n.length;i++)(r=n[i]).fixedrange||(a[r._name+".autorange"]=!0);else if("reset"===t)for((ie||ne.isSubplotConstrained)&&(n=n.concat(ne.xaxes)),ae&&!ne.isSubplotConstrained&&(n=n.concat(ne.yaxes)),ne.isSubplotConstrained&&(ie?ae||(n=n.concat(Z)):n=n.concat(K)),i=0;i<n.length;i++)if(!(r=n[i]).fixedrange){var u=r._name,f=r._autorangeInitial;void 0===r._rangeInitial0&&void 0===r._rangeInitial1?a[u+".autorange"]=!0:void 0===r._rangeInitial0?(a[u+".autorange"]=f,a[u+".range"]=[null,r._rangeInitial1]):void 0===r._rangeInitial1?(a[u+".range"]=[r._rangeInitial0,null],a[u+".autorange"]=f):a[u+".range"]=[r._rangeInitial0,r._rangeInitial1]}e.emit("plotly_doubleclick",null),l.call("_guiRelayout",e,a)}}function Ve(){We([0,0,ee,te]),i.syncOrAsync([A.previousPromises,function(){e._fullLayout._replotting=!1,l.call("_guiRelayout",e,de)}],e)}function We(t){var n,r,a,o,s=e._fullLayout,c=s._plots,u=s._subplots.cartesian;if(ue&&l.subplotsRegistry.splom.drag(e),ce)for(n=0;n<u.length;n++)if(a=(r=c[u[n]]).xaxis,o=r.yaxis,r._scene){a.limitRange&&a.limitRange(),o.limitRange&&o.limitRange();var f=i.simpleMap(a.range,a.r2l),h=i.simpleMap(o.range,o.r2l);r._scene.update({range:[f[0],h[0],f[1],h[1]]})}if((ue||ce)&&(_(e),w(e)),fe){var p=t[2]/N._length,g=t[3]/L._length;for(n=0;n<u.length;n++){a=(r=c[u[n]]).xaxis,o=r.yaxis;var y,b,x,A,k=(se||re.isSubplotConstrained)&&!a.fixedrange&&$[a._id],E=(le||re.isSubplotConstrained)&&!o.fixedrange&&X[o._id];if(k?(y=p,x=v||re.isSubplotConstrained?t[0]:Xe(a,y)):re.xaHash[a._id]?(y=p,x=t[0]*a._length/N._length):re.yaHash[a._id]?(y=g,x="ns"===ae?-t[1]*a._length/L._length:Xe(a,y,{n:"top",s:"bottom"}[ae])):x=Ye(a,y=Ge(a,p,g)),y>1&&(void 0!==a.maxallowed&&se===(a.range[0]<a.range[1]?"e":"w")||void 0!==a.minallowed&&se===(a.range[0]<a.range[1]?"w":"e"))&&(y=1,x=0),E?(b=g,A=m||re.isSubplotConstrained?t[1]:Xe(o,b)):re.yaHash[o._id]?(b=g,A=t[1]*o._length/L._length):re.xaHash[o._id]?(b=p,A="ew"===ie?-t[0]*o._length/N._length:Xe(o,b,{e:"right",w:"left"}[ie])):A=Ye(o,b=Ge(o,p,g)),b>1&&(void 0!==o.maxallowed&&le===(o.range[0]<o.range[1]?"n":"s")||void 0!==o.minallowed&&le===(o.range[0]<o.range[1]?"s":"n"))&&(b=1,A=0),y||b){y||(y=1),b||(b=1);var T=a._offset-x/y,M=o._offset-A/b;r.clipRect.call(d.setTranslate,x,A).call(d.setScale,y,b),r.plot.call(d.setTranslate,T,M).call(d.setScale,1/y,1/b),y===r.xScaleFactor&&b===r.yScaleFactor||(d.setPointGroupScale(r.zoomScalePts,y,b),d.setTextPointsScale(r.zoomScaleTxt,y,b)),d.hideOutsideRangePoints(r.clipOnAxisFalseTraces,r),r.xScaleFactor=y,r.yScaleFactor=b}}}}function Ge(e,t,n){return e.fixedrange?0:se&&ne.xaHash[e._id]?t:le&&(ne.isSubplotConstrained?ne.xaHash:ne.yaHash)[e._id]?n:0}function Ye(e,t){return t?(e.range=e._r.slice(),S(e,t),Xe(e,t)):0}function Xe(e,t,n){return e._length*(1-t)*x[n||e.constraintoward||"middle"]}return m.length*v.length!=1&&G(xe,(function(t){if(e._context._scrollZoom.cartesian||e._fullLayout._enablescrollzoom){if(Ne(),e._transitioningWithDuration)return t.preventDefault(),void t.stopPropagation();ye(),clearTimeout(ze);var n=-t.deltaY;if(isFinite(n)||(n=t.wheelDelta/10),isFinite(n)){var r,a=Math.exp(-Math.min(Math.max(n,-20),20)/200),o=Be.draglayer.select(".nsewdrag").node().getBoundingClientRect(),s=(t.clientX-o.left)/o.width,l=(o.bottom-t.clientY)/o.height;if(se){for(v||(s=.5),r=0;r<K.length;r++)c(K[r],s,a);$e("x"),Fe[2]*=a,Fe[0]+=Fe[2]*s*(1/a-1)}if(le){for(m||(l=.5),r=0;r<Z.length;r++)c(Z[r],l,a);$e("y"),Fe[3]*=a,Fe[1]+=Fe[3]*(1-l)*(1/a-1)}We(Fe),qe(),e.emit("plotly_relayouting",de),ze=setTimeout((function(){e._fullLayout&&(Fe=[0,0,ee,te],Ve())}),je),t.preventDefault()}else i.log("Did not find wheel motion attributes: ",t)}function c(e,t,n){if(!e.fixedrange){var r=i.simpleMap(e.range,e.r2l),a=r[0]+(r[1]-r[0])*t;e.range=r.map((function(t){return e.l2r(a+(t-a)*n)}))}}})),xe},makeDragger:L,makeRectDragger:D,makeZoombox:j,makeCorners:B,updateZoombox:U,xyCorners:V,transitionZoombox:$,removeZoombox:q,showDoubleClickNotifier:H,attachWheelEventHandler:G}},81714:(e,t,n)=>{"use strict";var r=n(93268),i=n(17911),a=n(85605),o=n(47281),s=n(53330).makeDragBox,l=n(56596).DRAGGERSIZE;t.initInteractions=function(e){var n=e._fullLayout;if(e._context.staticPlot)r.select(e).selectAll(".drag").remove();else if(n._has("cartesian")||n._has("splom")){Object.keys(n._plots||{}).sort((function(e,t){if((n._plots[e].mainplot&&!0)===(n._plots[t].mainplot&&!0)){var r=e.split("y"),i=t.split("y");return r[0]===i[0]?Number(r[1]||1)-Number(i[1]||1):Number(r[0]||1)-Number(i[0]||1)}return n._plots[e].mainplot?1:-1})).forEach((function(t){var r=n._plots[t],o=r.xaxis,c=r.yaxis;if(!r.mainplot){var u=s(e,r,o._offset,c._offset,o._length,c._length,"ns","ew");u.onmousemove=function(n){e._fullLayout._rehover=function(){e._fullLayout._hoversubplot===t&&e._fullLayout._plots[t]&&i.hover(e,n,t)},i.hover(e,n,t),e._fullLayout._lasthover=u,e._fullLayout._hoversubplot=t},u.onmouseout=function(t){e._dragging||(e._fullLayout._hoversubplot=null,a.unhover(e,t))},e._context.showAxisDragHandles&&(s(e,r,o._offset-l,c._offset-l,l,l,"n","w"),s(e,r,o._offset+o._length,c._offset-l,l,l,"n","e"),s(e,r,o._offset-l,c._offset+c._length,l,l,"s","w"),s(e,r,o._offset+o._length,c._offset+c._length,l,l,"s","e"))}if(e._context.showAxisDragHandles){if(t===o._mainSubplot){var f=o._mainLinePosition;"top"===o.side&&(f-=l),s(e,r,o._offset+.1*o._length,f,.8*o._length,l,"","ew"),s(e,r,o._offset,f,.1*o._length,l,"","w"),s(e,r,o._offset+.9*o._length,f,.1*o._length,l,"","e")}if(t===c._mainSubplot){var d=c._mainLinePosition;"right"!==c.side&&(d-=l),s(e,r,d,c._offset+.1*c._length,l,.8*c._length,"ns",""),s(e,r,d,c._offset+.9*c._length,l,.1*c._length,"s",""),s(e,r,d,c._offset,l,.1*c._length,"n","")}}}));var o=n._hoverlayer.node();o.onmousemove=function(t){t.target=e._fullLayout._lasthover,i.hover(e,t,n._hoversubplot)},o.onclick=function(t){t.target=e._fullLayout._lasthover,i.click(e,t)},o.onmousedown=function(t){e._fullLayout._lasthover.onmousedown(t)},t.updateFx(e)}},t.updateFx=function(e){var t=e._fullLayout,n="pan"===t.dragmode?"move":"crosshair";o(t._draggers,n)}},62740:(e,t,n)=>{"use strict";var r=n(3360),i=n(56319),a=n(33489);e.exports=function(e){return function(t,n){var o=t[e];if(Array.isArray(o))for(var s=r.subplotsRegistry.cartesian,l=s.idRegex,c=n._subplots,u=c.xaxis,f=c.yaxis,d=c.cartesian,h=n._has("cartesian")||n._has("gl2d"),p=0;p<o.length;p++){var m=o[p];if(i.isPlainObject(m)){var g=a.cleanId(m.xref,"x",!1),v=a.cleanId(m.yref,"y",!1),y=l.x.test(g),b=l.y.test(v);if(y||b){h||i.pushUnique(n._basePlotModules,s);var x=!1;y&&-1===u.indexOf(g)&&(u.push(g),x=!0),b&&-1===f.indexOf(v)&&(f.push(v),x=!0),x&&y&&b&&d.push(g+v)}}}}}},64125:(e,t,n)=>{"use strict";var r=n(93268),i=n(3360),a=n(56319),o=n(31496),s=n(14797),l=n(38895).eV,c=n(33489),u=n(56596),f=n(81818),d=a.ensureSingle;function h(e,t,n){return a.ensureSingle(e,t,n,(function(e){e.datum(n)}))}var p=u.zindexSeparator;function m(e,t,n,a,o){for(var c,f,d,h=u.traceLayerClasses,p=e._fullLayout,m=p._zindices,g=p._modules,v=[],y=[],b=0;b<m.length;b++)for(var x=m[b],_=0;_<g.length;_++){var w=(c=g[_]).name,A=i.modules[w].categories;if(A.svg){var k=c.layerName||w+"layer",E=k+(b?Number(b)+1:""),T=c.plot;d=(f=l(n,T,x))[0],n=f[1],d.length&&v.push({i:h.indexOf(k),zindex:b,className:E,plotMethod:T,cdModule:d}),A.zoomScale&&y.push("."+E)}}v.sort((function(e,t){return(e.zindex||0)-(t.zindex||0)||e.i-t.i}));var M=t.plot.selectAll("g.mlayer").data(v,(function(e){return e.className}));if(M.enter().append("g").attr("class",(function(e){return e.className})).classed("mlayer",!0).classed("rangeplot",t.isRangePlot),M.exit().remove(),M.order(),M.each((function(n){var i=r.select(this),l=n.className;n.plotMethod(e,t,n.cdModule,i,a,o),-1===u.clipOnAxisFalseQuery.indexOf("."+l)&&s.setClipUrl(i,t.layerClipId,e)})),p._has("scattergl")&&(c=i.getModule("scattergl"),d=l(n,c)[0],c.plot(e,t,d)),!e._context.staticPlot&&(t._hasClipOnAxisFalse&&(t.clipOnAxisFalseTraces=t.plot.selectAll(u.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),y.length)){var S=t.plot.selectAll(y.join(",")).selectAll(".trace");t.zoomScalePts=S.selectAll("path.point"),t.zoomScaleTxt=S.selectAll(".textpoint")}}function g(e,t){var n=e._fullLayout,r=t.plotgroup,i=t.id,a=-1!==i.indexOf(p),o=u.layerValue2layerClass[t.xaxis.layer],s=u.layerValue2layerClass[t.yaxis.layer],l=n._hasOnlyLargeSploms;if(!t.mainplot||n._zindices.length>1)if(l)t.xlines=d(r,"path","xlines-above"),t.ylines=d(r,"path","ylines-above"),t.xaxislayer=d(r,"g","xaxislayer-above"),t.yaxislayer=d(r,"g","yaxislayer-above");else{if(!a){var f=d(r,"g","layer-subplot");t.shapelayer=d(f,"g","shapelayer"),t.imagelayer=d(f,"g","imagelayer"),t.minorGridlayer=d(r,"g","minor-gridlayer"),t.gridlayer=d(r,"g","gridlayer"),t.zerolinelayer=d(r,"g","zerolinelayer");var m=d(r,"g","layer-between");t.shapelayerBetween=d(m,"g","shapelayer"),t.imagelayerBetween=d(m,"g","imagelayer"),d(r,"path","xlines-below"),d(r,"path","ylines-below"),t.overlinesBelow=d(r,"g","overlines-below"),d(r,"g","xaxislayer-below"),d(r,"g","yaxislayer-below"),t.overaxesBelow=d(r,"g","overaxes-below")}t.overplot=d(r,"g","overplot"),t.plot=d(t.overplot,"g",i),a||(t.xlines=d(r,"path","xlines-above"),t.ylines=d(r,"path","ylines-above"),t.overlinesAbove=d(r,"g","overlines-above"),d(r,"g","xaxislayer-above"),d(r,"g","yaxislayer-above"),t.overaxesAbove=d(r,"g","overaxes-above"),t.xlines=r.select(".xlines-"+o),t.ylines=r.select(".ylines-"+s),t.xaxislayer=r.select(".xaxislayer-"+o),t.yaxislayer=r.select(".yaxislayer-"+s))}else{var g=t.mainplotinfo,v=g.plotgroup,y=i+"-x",b=i+"-y";t.minorGridlayer=g.minorGridlayer,t.gridlayer=g.gridlayer,t.zerolinelayer=g.zerolinelayer,d(g.overlinesBelow,"path",y),d(g.overlinesBelow,"path",b),d(g.overaxesBelow,"g",y),d(g.overaxesBelow,"g",b),t.plot=d(g.overplot,"g",i),d(g.overlinesAbove,"path",y),d(g.overlinesAbove,"path",b),d(g.overaxesAbove,"g",y),d(g.overaxesAbove,"g",b),t.xlines=v.select(".overlines-"+o).select("."+y),t.ylines=v.select(".overlines-"+s).select("."+b),t.xaxislayer=v.select(".overaxes-"+o).select("."+y),t.yaxislayer=v.select(".overaxes-"+s).select("."+b)}a||(l||(h(t.minorGridlayer,"g",t.xaxis._id),h(t.minorGridlayer,"g",t.yaxis._id),t.minorGridlayer.selectAll("g").map((function(e){return e[0]})).sort(c.idSort),h(t.gridlayer,"g",t.xaxis._id),h(t.gridlayer,"g",t.yaxis._id),t.gridlayer.selectAll("g").map((function(e){return e[0]})).sort(c.idSort)),t.xlines.style("fill","none").classed("crisp",!0),t.ylines.style("fill","none").classed("crisp",!0))}function v(e,t){if(e){var n={};for(var i in e.each((function(e){var i=e[0];r.select(this).remove(),y(i,t),n[i]=!0})),t._plots)for(var a=t._plots[i].overlays||[],o=0;o<a.length;o++){var s=a[o];n[s.id]&&s.plot.selectAll(".trace").remove()}}}function y(e,t){t._draggers.selectAll("g."+e).remove(),t._defs.select("#clip"+t._uid+e+"plot").remove()}t.name="cartesian",t.attr=["xaxis","yaxis"],t.idRoot=["x","y"],t.idRegex=u.idRegex,t.attrRegex=u.attrRegex,t.attributes=n(56448),t.layoutAttributes=n(31403),t.supplyLayoutDefaults=n(77548),t.transitionAxes=n(5580),t.finalizeSubplots=function(e,t){var n,r,i,o=t._subplots,s=o.xaxis,l=o.yaxis,f=o.cartesian,d=f.concat(o.gl2d||[]),h={},p={};for(n=0;n<d.length;n++){var m=d[n].split("y");h[m[0]]=1,p["y"+m[1]]=1}for(n=0;n<s.length;n++)h[r=s[n]]||(i=(e[c.id2name(r)]||{}).anchor,u.idRegex.y.test(i)||(i="y"),f.push(r+i),d.push(r+i),p[i]||(p[i]=1,a.pushUnique(l,i)));for(n=0;n<l.length;n++)p[i=l[n]]||(r=(e[c.id2name(i)]||{}).anchor,u.idRegex.x.test(r)||(r="x"),f.push(r+i),d.push(r+i),h[r]||(h[r]=1,a.pushUnique(s,r)));if(!d.length){for(var g in r="",i="",e){if(u.attrRegex.test(g))"x"===g.charAt(0)?(!r||+g.substr(5)<+r.substr(5))&&(r=g):(!i||+g.substr(5)<+i.substr(5))&&(i=g)}r=r?c.name2id(r):"x",i=i?c.name2id(i):"y",s.push(r),l.push(i),f.push(r+i)}},t.plot=function(e,t,n,r){var i,o=e._fullLayout,s=o._subplots.cartesian,l=e.calcdata;if(!Array.isArray(t))for(t=[],i=0;i<l.length;i++)t.push(i);for(var c=o._zindices,u=0;u<c.length;u++){var f=c[u];for(i=0;i<s.length;i++){var d=s[i],h=o._plots[d];if(u>0){var g=h.id;if(-1!==g.indexOf(p))continue;g+=p+(u+1),h=a.extendFlat({},h,{id:g,plot:o._cartesianlayer.selectAll(".subplot").select("."+g)})}for(var v,y=[],b=0;b<l.length;b++){var x=l[b],_=x[0].trace;f===(_.zorder||0)&&(_.xaxis+_.yaxis===d&&((-1!==t.indexOf(_.index)||_.carpet)&&(v&&v[0].trace.xaxis+v[0].trace.yaxis===d&&-1!==["tonextx","tonexty","tonext"].indexOf(_.fill)&&-1===y.indexOf(v)&&y.push(v),y.push(x)),v=x))}m(e,h,y,n,r)}}},t.clean=function(e,t,n,r){var i,a,o,s=r._plots||{},l=t._plots||{},u=r._subplots||{};if(r._hasOnlyLargeSploms&&!t._hasOnlyLargeSploms)for(o in s)(i=s[o]).plotgroup&&i.plotgroup.remove();var f=r._has&&r._has("gl"),d=t._has&&t._has("gl");if(f&&!d)for(o in s)(i=s[o])._scene&&i._scene.destroy();if(u.xaxis&&u.yaxis){var h=c.listIds({_fullLayout:r});for(a=0;a<h.length;a++){var m=h[a];t[c.id2name(m)]||r._infolayer.selectAll(".g-"+m+"title").remove()}}var g=r._has&&r._has("cartesian"),b=t._has&&t._has("cartesian");if(g&&!b)v(r._cartesianlayer.selectAll(".subplot"),r),r._defs.selectAll(".axesclip").remove(),delete r._axisConstraintGroups,delete r._axisMatchGroups;else if(u.cartesian)for(a=0;a<u.cartesian.length;a++){var x=u.cartesian[a];if(-1===x.indexOf(p)&&!l[x]){var _="."+x+",."+x+"-x,."+x+"-y";r._cartesianlayer.selectAll(_).remove(),y(x,r)}}},t.drawFramework=function(e){var t,n=e._fullLayout,i=e.calcdata,o={};for(t=0;t<i.length;t++){var s=i[t][0],l=s.trace.zorder||0;o[l]||(o[l]=[]),o[l].push(s)}var c=Object.keys(o).map(Number).sort(a.sorterAsc);c.length||(c=[0]),n._zindices=c;var u=function(e){var t,n,r,i,a,o,s=e._fullLayout,l=s._zindices.length,c=s._subplots.cartesian,u=c.length,f=[],d=[];for(t=0;t<u;t++){r=c[t],a=(i=s._plots[r]).xaxis,o=i.yaxis;var h=a._mainAxis,m=o._mainAxis,g=h._id+m._id,v=s._plots[g];i.overlays=[],g!==r&&v?(i.mainplot=g,i.mainplotinfo=v,d.push(r)):(i.mainplot=void 0,i.mainplotinfo=void 0,f.push(r))}for(t=0;t<d.length;t++)r=d[t],(i=s._plots[r]).mainplotinfo.overlays.push(i);var y=f.concat(d),b=[];for(t=0;t<u;t++){r=y[t],a=(i=s._plots[r]).xaxis,o=i.yaxis;for(var x=[],_=1;_<=l;_++){var w="";for(_>1&&(w+=p+_),x.push(r+w),n=0;n<i.overlays.length;n++)x.push(i.overlays[n].id+w)}x=x.concat([a.layer,o.layer,a.overlaying||"",o.overlaying||""]),b.push(x)}return b}(e),f=u.length,h=[];for(t=0;t<f;t++)h[t]=u[t].slice();for(var m=1;m<c.length;m++){var y=[];for(t=0;t<f;t++)y[t]=u[t].slice(),y[t][0]+=p+(m+1);h=h.concat(y)}var b=n._cartesianlayer.selectAll(".subplot").data(h,String);b.enter().append("g").attr("class",(function(e){return"subplot "+e[0]})),b.order(),b.exit().call(v,n),b.each((function(t){var i=t[0],o=i.indexOf(p),s=-1!==o,l=s?i.slice(0,o):i,c=n._plots[i];c||(c=a.extendFlat({},n._plots[l]))&&(c.id=i,n._plots[i]=c,n._subplots.cartesian.push(i)),c&&(c.plotgroup=r.select(this),g(e,c),s||(c.draglayer=d(n._draggers,"g",i)))}))},t.rangePlot=function(e,t,n){g(e,t),m(e,t,n),o.style(e)},t.toSVG=function(e){var t=e._fullLayout._glimages,n=r.select(e).selectAll(".svg-container");n.filter((function(e,t){return t===n.size()-1})).selectAll(".gl-canvas-context, .gl-canvas-focus").each((function(){var e=this,n=e.toDataURL("image/png");t.append("svg:image").attr({xmlns:f.svg,"xlink:href":n,preserveAspectRatio:"none",x:0,y:0,width:e.style.width,height:e.style.height})}))},t.updateFx=n(81714).updateFx},31403:(e,t,n)=>{"use strict";var r=n(95323),i=n(37811),a=n(9488).T,o=n(86395).extendFlat,s=n(65210).templatedArray,l=n(66010).descriptionWithDates,c=n(33351).ONEDAY,u=n(56596),f=u.HOUR_PATTERN,d=u.WEEKDAY_PATTERN,h={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0},description:["Sets the tick mode for this axis.","If *auto*, the number of ticks is set via `nticks`.","If *linear*, the placement of the ticks is determined by","a starting position `tick0` and a tick step `dtick`","(*linear* is the default value if `tick0` and `dtick` are provided).","If *array*, the placement of the ticks is set via `tickvals`","and the tick text is `ticktext`.","(*array* is the default value if `tickvals` is provided)."].join(" ")},p=o({},h,{values:h.values.slice().concat(["sync"]),description:[h.description,"If *sync*, the number of ticks will sync with the overlayed axis","set by `overlaying` property."].join(" ")});function m(e){return{valType:"integer",min:0,dflt:e?5:0,editType:"ticks",description:["Specifies the maximum number of ticks for the particular axis.","The actual number of ticks will be chosen automatically to be","less than or equal to `nticks`.","Has an effect only if `tickmode` is set to *auto*."].join(" ")}}var g={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"},description:["Sets the placement of the first tick on this axis.","Use with `dtick`.","If the axis `type` is *log*, then you must take the log of your starting tick","(e.g. to set the starting tick to 100, set the `tick0` to 2)","except when `dtick`=*L<f>* (see `dtick` for more info).","If the axis `type` is *date*, it should be a date string, like date data.","If the axis `type` is *category*, it should be a number, using the scale where","each category is assigned a serial number from zero in the order it appears."].join(" ")},v={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"},description:["Sets the step in-between ticks on this axis. Use with `tick0`.","Must be a positive number, or special strings available to *log* and *date* axes.","If the axis `type` is *log*, then ticks are set every 10^(n*dtick) where n","is the tick number. For example,","to set a tick mark at 1, 10, 100, 1000, ... set dtick to 1.","To set tick marks at 1, 100, 10000, ... set dtick to 2.","To set tick marks at 1, 5, 25, 125, 625, 3125, ... set dtick to log_10(5), or 0.69897000433.","*log* has several special values; *L<f>*, where `f` is a positive number,","gives ticks linearly spaced in value (but not position).","For example `tick0` = 0.1, `dtick` = *L0.5* will put ticks at 0.1, 0.6, 1.1, 1.6 etc.","To show powers of 10 plus small digits between, use *D1* (all digits) or *D2* (only 2 and 5).","`tick0` is ignored for *D1* and *D2*.","If the axis `type` is *date*, then you must convert the time to milliseconds.","For example, to set the interval between ticks to one day,","set `dtick` to 86400000.0.","*date* also has special values *M<n>* gives ticks spaced by a number of months.","`n` must be a positive integer.","To set ticks on the 15th of every third month, set `tick0` to *2000-01-15* and `dtick` to *M3*.","To set ticks every 4 years, set `dtick` to *M48*"].join(" ")},y={valType:"data_array",editType:"ticks",description:["Sets the values at which ticks on this axis appear.","Only has an effect if `tickmode` is set to *array*.","Used with `ticktext`."].join(" ")},b={valType:"enumerated",values:["outside","inside",""],editType:"ticks",description:["Determines whether ticks are drawn or not.","If **, this axis' ticks are not drawn.","If *outside* (*inside*), this axis' are drawn outside (inside)","the axis lines."].join(" ")};function x(e){var t={valType:"number",min:0,editType:"ticks",description:"Sets the tick length (in px)."};return e||(t.dflt=5),t}function _(e){var t={valType:"number",min:0,editType:"ticks",description:"Sets the tick width (in px)."};return e||(t.dflt=1),t}var w={valType:"color",dflt:i.defaultLine,editType:"ticks",description:"Sets the tick color."},A={valType:"color",dflt:i.lightLine,editType:"ticks",description:"Sets the color of the grid lines."};function k(e){var t={valType:"number",min:0,editType:"ticks",description:"Sets the width (in px) of the grid lines."};return e||(t.dflt=1),t}var E=o({},a,{editType:"ticks"}),T={valType:"boolean",editType:"ticks",description:["Determines whether or not grid lines are drawn.","If *true*, the grid lines are drawn at every tick mark."].join(" ")};e.exports={visible:{valType:"boolean",editType:"plot",description:["A single toggle to hide the axis while preserving interaction like dragging.","Default is true when a cheater plot is present on the axis, otherwise","false"].join(" ")},color:{valType:"color",dflt:i.defaultLine,editType:"ticks",description:["Sets default for all colors associated with this axis","all at once: line, font, tick, and grid colors.","Grid color is lightened by blending this with the plot background","Individual pieces can override this."].join(" ")},title:{text:{valType:"string",editType:"ticks",description:["Sets the title of this axis.","Note that before the existence of `title.text`, the title's","contents used to be defined as the `title` attribute itself.","This behavior has been deprecated."].join(" ")},font:r({editType:"ticks",description:["Sets this axis' title font.","Note that the title's font used to be customized","by the now deprecated `titlefont` attribute."].join(" ")}),standoff:{valType:"number",min:0,editType:"ticks",description:["Sets the standoff distance (in px) between the axis labels and the title text","The default value is a function of the axis tick labels, the title `font.size`","and the axis `linewidth`.","Note that the axis title position is always constrained within the margins,","so the actual standoff distance is always less than the set or default value.","By setting `standoff` and turning on `automargin`, plotly.js will push the","margins to fit the axis title at given standoff distance."].join(" ")},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0,description:["Sets the axis type.","By default, plotly attempts to determined the axis type","by looking into the data of the traces that referenced","the axis in question."].join(" ")},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc",description:["Using *strict* a numeric string in trace data is not converted to a number.","Using *convert types* a numeric string in trace data may be","treated as a number during automatic axis `type` detection.","Defaults to layout.autotypenumbers."].join(" ")},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Determines whether or not the range of this axis is","computed in relation to the input data.","See `rangemode` for more info.","If `range` is provided and it has a value for both the","lower and upper bound, `autorange` is set to *false*.","Using *min* applies autorange only to set the minimum.","Using *max* applies autorange only to set the maximum.","Using *min reversed* applies autorange only to set the minimum on a reversed axis.","Using *max reversed* applies autorange only to set the maximum on a reversed axis.","Using *reversed* applies autorange on both ends and reverses the axis direction."].join(" ")},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Use this value exactly as autorange minimum."].join(" ")},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Use this value exactly as autorange maximum."].join(" ")},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Clip autorange minimum if it goes beyond this value.","Has no effect when `autorangeoptions.minallowed` is provided."].join(" ")},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Clip autorange maximum if it goes beyond this value.","Has no effect when `autorangeoptions.maxallowed` is provided."].join(" ")},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Ensure this value is included in autorange."].join(" ")},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot",description:["If *normal*, the range is computed in relation to the extrema","of the input data.","If *tozero*`, the range extends to 0,","regardless of the input data","If *nonnegative*, the range is non-negative,","regardless of the input data.","Applies only to linear axes."].join(" ")},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0,description:["Sets the range of this axis.","If the axis `type` is *log*, then you must take the log of your","desired range (e.g. to set the range from 1 to 100,","set the range from 0 to 2).","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears.","Leaving either or both elements `null` impacts the default `autorange`."].join(" ")},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1},description:["Determines the minimum range of this axis."].join(" ")},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1},description:["Determines the maximum range of this axis."].join(" ")},fixedrange:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not this axis is zoom-able.","If true, then zoom is disabled."].join(" ")},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot",description:["Could be used to set the desired inside range of this axis","(excluding the labels) when `ticklabelposition` of","the anchored axis has *inside*.","Not implemented for axes with `type` *log*.","This would be ignored when `range` is provided."].join(" ")},scaleanchor:{valType:"enumerated",values:[u.idRegex.x.toString(),u.idRegex.y.toString(),!1],editType:"plot",description:["If set to another axis id (e.g. `x2`, `y`), the range of this axis","changes together with the range of the corresponding axis","such that the scale of pixels per unit is in a constant ratio.","Both axes are still zoomable, but when you zoom one, the other will","zoom the same amount, keeping a fixed midpoint.","`constrain` and `constraintoward` determine how we enforce the constraint.","You can chain these, ie `yaxis: {scaleanchor: *x*}, xaxis2: {scaleanchor: *y*}`","but you can only link axes of the same `type`.","The linked axis can have the opposite letter (to constrain the aspect ratio)","or the same letter (to match scales across subplots).","Loops (`yaxis: {scaleanchor: *x*}, xaxis: {scaleanchor: *y*}` or longer) are redundant","and the last constraint encountered will be ignored to avoid possible","inconsistent constraints via `scaleratio`.","Note that setting axes simultaneously in both a `scaleanchor` and a `matches` constraint","is currently forbidden.","Setting `false` allows to remove a default constraint (occasionally,","you may need to prevent a default `scaleanchor` constraint from",'being applied, eg. when having an image trace `yaxis: {scaleanchor: "x"}`',"is set automatically in order for pixels to be rendered as squares,","setting `yaxis: {scaleanchor: false}` allows to remove the constraint)."].join(" ")},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot",description:["If this axis is linked to another by `scaleanchor`, this determines the pixel","to unit scale ratio. For example, if this value is 10, then every unit on","this axis spans 10 times the number of pixels as a unit on the linked axis.","Use this for example to create an elevation profile where the vertical scale","is exaggerated a fixed amount with respect to the horizontal."].join(" ")},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot",description:["If this axis needs to be compressed (either due to its own `scaleanchor` and","`scaleratio` or those of the other axis), determines how that happens:","by increasing the *range*, or by decreasing the *domain*.","Default is *domain* for axes containing image traces, *range* otherwise."].join(" ")},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot",description:["If this axis needs to be compressed (either due to its own `scaleanchor` and","`scaleratio` or those of the other axis), determines which direction we push","the originally specified plot area. Options are *left*, *center* (default),","and *right* for x axes, and *top*, *middle* (default), and *bottom* for y axes."].join(" ")},matches:{valType:"enumerated",values:[u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"calc",description:["If set to another axis id (e.g. `x2`, `y`), the range of this axis","will match the range of the corresponding axis in data-coordinates space.","Moreover, matching axes share auto-range values, category lists and","histogram auto-bins.","Note that setting axes simultaneously in both a `scaleanchor` and a `matches` constraint","is currently forbidden.","Moreover, note that matching axes must have the same `type`."].join(" ")},rangebreaks:s("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether this axis rangebreak is enabled or disabled.","Please note that `rangebreaks` only work for *date* axis type."].join(" ")},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc",description:["Sets the lower and upper bounds of this axis rangebreak.","Can be used with `pattern`."].join(" ")},pattern:{valType:"enumerated",values:[d,f,""],editType:"calc",description:["Determines a pattern on the time line that generates breaks.","If *"+d+"* - days of the week in English e.g. 'Sunday' or `sun`","(matching is case-insensitive and considers only the first three characters),","as well as Sunday-based integers between 0 and 6.","If *"+f+"* - hour (24-hour clock) as decimal numbers between 0 and 24.","for more info.","Examples:","- { pattern: '"+d+"', bounds: [6, 1] }"," or simply { bounds: ['sat', 'mon'] }","  breaks from Saturday to Monday (i.e. skips the weekends).","- { pattern: '"+f+"', bounds: [17, 8] }","  breaks from 5pm to 8am (i.e. skips non-work hours)."].join(" ")},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"},description:["Sets the coordinate values corresponding to the rangebreaks.","An alternative to `bounds`.","Use `dvalue` to set the size of the values along the axis."].join(" ")},dvalue:{valType:"number",editType:"calc",min:0,dflt:c,description:["Sets the size of each `values` item.","The default is one day in milliseconds."].join(" ")},editType:"calc"}),tickmode:p,nticks:m(),tick0:g,dtick:v,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks",description:["Sets the spacing between tick labels as compared to the spacing between ticks.","A value of 1 (default) means each tick gets a label.","A value of 2 means shows every 2nd label.","A larger value n means only every nth tick is labeled.","`tick0` determines which labels are shown.","Not implemented for axes with `type` *log* or *multicategory*, or when `tickmode` is *array*."].join(" ")},tickvals:y,ticktext:{valType:"data_array",editType:"ticks",description:["Sets the text displayed at the ticks position via `tickvals`.","Only has an effect if `tickmode` is set to *array*.","Used with `tickvals`."].join(" ")},ticks:b,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks",description:["Determines where ticks and grid lines are drawn with respect to their","corresponding tick labels.","Only has an effect for axes of `type` *category* or *multicategory*.","When set to *boundaries*, ticks and grid lines are drawn half a category","to the left/bottom of labels."].join(" ")},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks",description:["Determines where tick labels are drawn with respect to their","corresponding ticks and grid lines.","Only has an effect for axes of `type` *date*","When set to *period*, tick labels are drawn in the middle of the period","between ticks."].join(" ")},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc",description:["Determines where tick labels are drawn with respect to the axis","Please note that","top or bottom has no effect on x axes or when `ticklabelmode` is set to *period*.","Similarly","left or right has no effect on y axes or when `ticklabelmode` is set to *period*.","Has no effect on *multicategory* axes or when `tickson` is set to *boundaries*.","When used on axes linked by `matches` or `scaleanchor`,","no extra padding for inside labels would be added by autorange,","so that the scales could match."].join(" ")},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc",description:["Determines how we handle tick labels that would overflow either the graph div or the domain of the axis.","The default value for inside tick labels is *hide past domain*.","Otherwise on *category* and *multicategory* axes the default is *allow*.","In other cases the default is *hide past div*."].join(" ")},ticklabelshift:{valType:"integer",dflt:0,editType:"ticks",description:["Shifts the tick labels by the specified number of pixels in parallel to the axis.","Positive values move the labels in the positive direction of the axis."].join(" ")},ticklabelstandoff:{valType:"integer",dflt:0,editType:"ticks",description:["Sets the standoff distance (in px) between the axis tick labels and their default position.","A positive `ticklabelstandoff` moves the labels farther away from the plot area","if `ticklabelposition` is *outside*, and deeper into the plot area if","`ticklabelposition` is *inside*. A negative `ticklabelstandoff` works in the opposite","direction, moving outside ticks towards the plot area and inside ticks towards","the outside. If the negative value is large enough, inside ticks can even end up","outside and vice versa."].join(" ")},ticklabelindex:{valType:"integer",arrayOk:!0,editType:"calc",description:["Only for axes with `type` *date* or *linear*.","Instead of drawing the major tick label, draw the label for the minor tick","that is n positions away from the major tick. E.g. to always draw the label for the","minor tick before each major tick, choose `ticklabelindex` -1. This is useful for date","axes with `ticklabelmode` *period* if you want to label the period that ends with each","major tick instead of the period that begins there."].join(" ")},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle",description:["Determines if the axis lines or/and ticks are mirrored to","the opposite side of the plotting area.","If *true*, the axis lines are mirrored.","If *ticks*, the axis lines and ticks are mirrored.","If *false*, mirroring is disable.","If *all*, axis lines are mirrored on all shared-axes subplots.","If *allticks*, axis lines and ticks are mirrored","on all shared-axes subplots."].join(" ")},ticklen:x(),tickwidth:_(),tickcolor:w,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks",description:"Determines whether or not the tick labels are drawn."},labelalias:{valType:"any",dflt:!1,editType:"ticks",description:["Replacement text for specific tick or hover labels.","For example using {US: 'USA', CA: 'Canada'} changes US to USA","and CA to Canada. The labels we would have shown must match","the keys exactly, after adding any tickprefix or ticksuffix.","For negative numbers the minus sign symbol used (U+2212) is wider than the regular ascii dash.","That means you need to use 1 instead of -1.","labelalias can be used with any axis type, and both keys (if needed)","and values (if desired) can include html-like tags or MathJax."].join(" ")},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks",description:["Determines whether long tick labels automatically grow the figure","margins."].join(" ")},showspikes:{valType:"boolean",dflt:!1,editType:"modebar",description:["Determines whether or not spikes (aka droplines) are drawn for this axis.","Note: This only takes affect when hovermode = closest"].join(" ")},spikecolor:{valType:"color",dflt:null,editType:"none",description:"Sets the spike color. If undefined, will use the series color"},spikethickness:{valType:"number",dflt:3,editType:"none",description:"Sets the width (in px) of the zero line."},spikedash:o({},a,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none",description:["Determines the drawing mode for the spike line","If *toaxis*, the line is drawn from the data point to the axis the ","series is plotted on.","If *across*, the line is drawn across the entire plot area, and","supercedes *toaxis*.","If *marker*, then a marker dot is drawn on the axis the series is","plotted on"].join(" ")},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none",description:"Determines whether spikelines are stuck to the cursor or to the closest datapoints."},tickfont:r({editType:"ticks",description:"Sets the tick font."}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks",description:["Sets the angle of the tick labels with respect to the horizontal.","For example, a `tickangle` of -90 draws the tick labels","vertically."].join(" ")},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks",description:["When `tickangle` is set to *auto*, it will be set to the first","angle in this array that is large enough to prevent label","overlap."].join(" ")},tickprefix:{valType:"string",dflt:"",editType:"ticks",description:"Sets a tick label prefix."},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks",description:["If *all*, all tick labels are displayed with a prefix.","If *first*, only the first tick is displayed with a prefix.","If *last*, only the last tick is displayed with a suffix.","If *none*, tick prefixes are hidden."].join(" ")},ticksuffix:{valType:"string",dflt:"",editType:"ticks",description:"Sets a tick label suffix."},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks",description:"Same as `showtickprefix` but for tick suffixes."},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks",description:["If *all*, all exponents are shown besides their significands.","If *first*, only the exponent of the first tick is shown.","If *last*, only the exponent of the last tick is shown.","If *none*, no exponents appear."].join(" ")},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks",description:["Determines a formatting rule for the tick exponents.","For example, consider the number 1,000,000,000.","If *none*, it appears as 1,000,000,000.","If *e*, 1e+9.","If *E*, 1E+9.","If *power*, 1x10^9 (with 9 in a super script).","If *SI*, 1G.","If *B*, 1B."].join(" ")},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks",description:["Hide SI prefix for 10^n if |n| is below this number.","This only has an effect when `tickformat` is *SI* or *B*."].join(" ")},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks",description:['If "true", even 4-digit integers are separated'].join(" ")},tickformat:{valType:"string",dflt:"",editType:"ticks",description:l("tick label")},tickformatstops:s("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks",description:["Determines whether or not this stop is used.","If `false`, this stop is ignored even within its `dtickrange`."].join(" ")},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks",description:["range [*min*, *max*], where *min*, *max* - dtick values","which describe some zoom level, it is possible to omit *min*","or *max* value by passing *null*"].join(" ")},value:{valType:"string",dflt:"",editType:"ticks",description:["string - dtickformat for described zoom level, the same as *tickformat*"].join(" ")},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:l("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle",description:["Determines whether or not a line bounding this axis is drawn."].join(" ")},linecolor:{valType:"color",dflt:i.defaultLine,editType:"layoutstyle",description:"Sets the axis line color."},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle",description:"Sets the width (in px) of the axis line."},showgrid:T,gridcolor:A,gridwidth:k(),griddash:E,zeroline:{valType:"boolean",editType:"ticks",description:["Determines whether or not a line is drawn at along the 0 value","of this axis.","If *true*, the zero line is drawn on top of the grid lines."].join(" ")},zerolinecolor:{valType:"color",dflt:i.defaultLine,editType:"ticks",description:"Sets the line color of the zero line."},zerolinewidth:{valType:"number",dflt:1,editType:"ticks",description:"Sets the width (in px) of the zero line."},showdividers:{valType:"boolean",dflt:!0,editType:"ticks",description:["Determines whether or not a dividers are drawn","between the category levels of this axis.","Only has an effect on *multicategory* axes."].join(" ")},dividercolor:{valType:"color",dflt:i.defaultLine,editType:"ticks",description:["Sets the color of the dividers","Only has an effect on *multicategory* axes."].join(" ")},dividerwidth:{valType:"number",dflt:1,editType:"ticks",description:["Sets the width (in px) of the dividers","Only has an effect on *multicategory* axes."].join(" ")},anchor:{valType:"enumerated",values:["free",u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"plot",description:["If set to an opposite-letter axis id (e.g. `x2`, `y`), this axis is bound to","the corresponding opposite-letter axis.","If set to *free*, this axis' position is determined by `position`."].join(" ")},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot",description:["Determines whether a x (y) axis is positioned","at the *bottom* (*left*) or *top* (*right*)","of the plotting area."].join(" ")},overlaying:{valType:"enumerated",values:["free",u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"plot",description:["If set a same-letter axis id, this axis is overlaid on top of","the corresponding same-letter axis, with traces and axes visible for both","axes.","If *false*, this axis does not overlay any same-letter axes.","In this case, for axes with overlapping domains only the highest-numbered","axis will be visible."].join(" ")},minor:{tickmode:h,nticks:m("minor"),tick0:g,dtick:v,tickvals:y,ticks:b,ticklen:x("minor"),tickwidth:_("minor"),tickcolor:w,gridcolor:A,gridwidth:k("minor"),griddash:E,showgrid:T,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot",description:["Sets the layer on which this axis is displayed.","If *above traces*, this axis is displayed above all the subplot's traces","If *below traces*, this axis is displayed below all the subplot's traces,","but above the grid lines.","Useful when used together with scatter-like traces with `cliponaxis`","set to *false* to show markers and/or text nodes above this axis."].join(" ")},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot",description:["Sets the domain of this axis (in plot fraction)."].join(" ")},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot",description:["Sets the position of this axis in the plotting space","(in normalized coordinates).","Only has an effect if `anchor` is set to *free*."].join(" ")},autoshift:{valType:"boolean",dflt:!1,editType:"plot",description:["Automatically reposition the axis to avoid","overlap with other axes with the same `overlaying` value.","This repositioning will account for any `shift` amount applied to other","axes on the same side with `autoshift` is set to true.","Only has an effect if `anchor` is set to *free*."].join(" ")},shift:{valType:"number",editType:"plot",description:["Moves the axis a given number of pixels from where it would have been otherwise.","Accepts both positive and negative values, which will shift the axis either right","or left, respectively.","If `autoshift` is set to true, then this defaults to a padding of -3 if `side` is set to *left*.","and defaults to +3 if `side` is set to *right*. Defaults to 0 if `autoshift` is set to false.","Only has an effect if `anchor` is set to *free*."].join(" ")},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","geometric mean ascending","geometric mean descending","median ascending","median descending"],dflt:"trace",editType:"calc",description:["Specifies the ordering logic for the case of categorical variables.","By default, plotly uses *trace*, which specifies the order that is present in the data supplied.","Set `categoryorder` to *category ascending* or *category descending* if order should be determined by","the alphanumerical order of the category names.","Set `categoryorder` to *array* to derive the ordering from the attribute `categoryarray`. If a category","is not found in the `categoryarray` array, the sorting behavior for that attribute will be identical to","the *trace* mode. The unspecified categories will follow the categories in `categoryarray`.","Set `categoryorder` to *total ascending* or *total descending* if order should be determined by the","numerical order of the values.","Similarly, the order can be determined by the min, max, sum, mean, geometric mean or median of all the values."].join(" ")},categoryarray:{valType:"data_array",editType:"calc",description:["Sets the order in which categories on this axis appear.","Only has an effect if `categoryorder` is set to *array*.","Used with `categoryorder`."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in axis `range`,","`autorange`, and `title` if in `editable: true` configuration.","Defaults to `layout.uirevision`."].join(" ")},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks",description:["Obsolete.","Set `tickmode` to *auto* for old `autotick` *true* behavior.","Set `tickmode` to *linear* for `autotick` *false*."].join(" ")},title:{valType:"string",editType:"ticks",description:["Value of `title` is no longer a simple *string* but a set of sub-attributes.","To set the axis' title, please use `title.text` now."].join(" ")},titlefont:r({editType:"ticks",description:["Former `titlefont` is now the sub-attribute `font` of `title`.","To customize title font properties, please use `title.font` now."].join(" ")})}}},77548:(e,t,n)=>{"use strict";var r=n(56319),i=n(53408),a=n(44790).isUnifiedHover,o=n(14271),s=n(65210),l=n(39626),c=n(31403),u=n(14238),f=n(10849),d=n(92397),h=n(6835),p=n(33489),m=p.id2name,g=p.name2id,v=n(56596).AX_ID_PATTERN,y=n(3360),b=y.traceIs,x=y.getComponentMethod;function _(e,t,n){Array.isArray(e[t])?e[t].push(n):e[t]=[n]}e.exports=function(e,t,n){var y,w,A=t.autotypenumbers,k={},E={},T={},M={},S={},C={},O={},R={},N={},L={};for(y=0;y<n.length;y++){var D=n[y];if(b(D,"cartesian")||b(D,"gl2d")){var P,I;if(D.xaxis)P=m(D.xaxis),_(k,P,D);else if(D.xaxes)for(w=0;w<D.xaxes.length;w++)_(k,m(D.xaxes[w]),D);if(D.yaxis)I=m(D.yaxis),_(k,I,D);else if(D.yaxes)for(w=0;w<D.yaxes.length;w++)_(k,m(D.yaxes[w]),D);if("funnel"===D.type?"h"===D.orientation?(P&&(E[P]=!0),I&&(O[I]=!0)):I&&(T[I]=!0):"image"===D.type?(I&&(R[I]=!0),P&&(R[P]=!0)):(I&&(S[I]=!0,C[I]=!0),b(D,"carpet")&&("carpet"!==D.type||D._cheater)||P&&(M[P]=!0)),"carpet"===D.type&&D._cheater&&P&&(E[P]=!0),b(D,"2dMap")&&(N[P]=!0,N[I]=!0),b(D,"oriented"))L["h"===D.orientation?I:P]=!0}}var F=t._subplots,z=F.xaxis,j=F.yaxis,B=r.simpleMap(z,m),U=r.simpleMap(j,m),$=B.concat(U),q=i.background;z.length&&j.length&&(q=r.coerce(e,t,l,"plot_bgcolor"));var H,V,W,G,Y,X=i.combine(q,t.paper_bgcolor);function K(){var e=k[H]||[];Y._traceIndices=e.map((function(e){return e._expandedIndex})),Y._annIndices=[],Y._shapeIndices=[],Y._selectionIndices=[],Y._imgIndices=[],Y._subplotsWith=[],Y._counterAxes=[],Y._name=Y._attr=H,Y._id=V}function Z(e,t){return r.coerce(G,Y,c,e,t)}function J(e,t){return r.coerce2(G,Y,c,e,t)}function Q(e){return"x"===e?j:z}function ee(t,n){for(var r="x"===t?B:U,i=[],a=0;a<r.length;a++){var o=r[a];o===n||(e[o]||{}).overlaying||i.push(g(o))}return i}var te={x:Q("x"),y:Q("y")},ne=te.x.concat(te.y),re={},ie=[];function ae(){var e=G.matches;v.test(e)&&-1===ne.indexOf(e)&&(re[e]=G.type,ie=Object.keys(re))}var oe=o(e,t),se=a(oe);for(y=0;y<$.length;y++){H=$[y],V=g(H),W=H.charAt(0),r.isPlainObject(e[H])||(e[H]={}),G=e[H],Y=s.newContainer(t,H,W+"axis"),K();var le="x"===W&&!M[H]&&E[H]||"y"===W&&!S[H]&&T[H],ce="y"===W&&(!C[H]&&O[H]||R[H]),ue={hasMinor:!0,letter:W,font:t.font,outerTicks:N[H],showGrid:!L[H],data:k[H]||[],bgColor:X,calendar:t.calendar,automargin:!0,visibleDflt:le,reverseDflt:ce,autotypenumbersDflt:A,splomStash:((t._splomAxes||{})[W]||{})[V],noAutotickangles:"y"===W};Z("uirevision",t.uirevision),u(G,Y,Z,ue),f(G,Y,Z,ue,t);var fe=se&&W===oe.charAt(0),de=J("spikecolor",se?Y.color:void 0),he=J("spikethickness",se?1.5:void 0),pe=J("spikedash",se?"dot":void 0),me=J("spikemode",se?"across":void 0),ge=J("spikesnap");Z("showspikes",!!(fe||de||he||pe||me||ge))||(delete Y.spikecolor,delete Y.spikethickness,delete Y.spikedash,delete Y.spikemode,delete Y.spikesnap);var ve=m(G.overlaying),ye=[0,1];if(void 0!==t[ve]){var be=m(t[ve].anchor);void 0!==t[be]&&(ye=t[be].domain)}h(G,Y,Z,{letter:W,counterAxes:te[W],overlayableAxes:ee(W,H),grid:t.grid,overlayingDomain:ye}),Z("title.standoff"),ae(),Y._input=G}for(y=0;y<ie.length;){V=ie[y++],W=(H=m(V)).charAt(0),r.isPlainObject(e[H])||(e[H]={}),G=e[H],Y=s.newContainer(t,H,W+"axis"),K();var xe={letter:W,font:t.font,outerTicks:N[H],showGrid:!L[H],data:[],bgColor:X,calendar:t.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:A,splomStash:((t._splomAxes||{})[W]||{})[V]};Z("uirevision",t.uirevision),Y.type=re[V]||"linear",f(G,Y,Z,xe,t),h(G,Y,Z,{letter:W,counterAxes:te[W],overlayableAxes:ee(W,H),grid:t.grid}),Z("fixedrange"),ae(),Y._input=G}var _e=x("rangeslider","handleDefaults"),we=x("rangeselector","handleDefaults");for(y=0;y<B.length;y++)H=B[y],G=e[H],Y=t[H],_e(e,t,H),"date"===Y.type&&we(G,Y,t,U,Y.calendar),Z("fixedrange");for(y=0;y<U.length;y++){H=U[y],G=e[H],Y=t[H];var Ae=t[m(Y.anchor)];Z("fixedrange",x("rangeslider","isVisible")(Ae))}d.handleDefaults(e,t,{axIds:ne.concat(ie).sort(p.idSort),axHasImage:R})}},8199:(e,t,n)=>{"use strict";var r=n(3707).mix,i=n(37811),a=n(56319);e.exports=function(e,t,n,o){var s=(o=o||{}).dfltColor;function l(n,r){return a.coerce2(e,t,o.attributes,n,r)}var c=l("linecolor",s),u=l("linewidth");n("showline",o.showLine||!!c||!!u)||(delete t.linecolor,delete t.linewidth);var f=l("gridcolor",r(s,o.bgColor,o.blend||i.lightFraction).toRgbString()),d=l("gridwidth"),h=l("griddash");if(n("showgrid",o.showGrid||!!f||!!d||!!h)||(delete t.gridcolor,delete t.gridwidth,delete t.griddash),o.hasMinor){var p=l("minor.gridcolor",r(t.gridcolor,o.bgColor,67).toRgbString()),m=l("minor.gridwidth",t.gridwidth||1),g=l("minor.griddash",t.griddash||"solid");n("minor.showgrid",!!p||!!m||!!g)||(delete t.minor.gridcolor,delete t.minor.gridwidth,delete t.minor.griddash)}if(!o.noZeroLine){var v=l("zerolinecolor",s),y=l("zerolinewidth");n("zeroline",o.showGrid||!!v||!!y)||(delete t.zerolinecolor,delete t.zerolinewidth)}}},6835:(e,t,n)=>{"use strict";var r=n(5605),i=n(56319);e.exports=function(e,t,n,a){var o,s,l,c,u,f,d=a.counterAxes||[],h=a.overlayableAxes||[],p=a.letter,m=a.grid,g=a.overlayingDomain;m&&(s=m._domains[p][m._axisMap[t._id]],o=m._anchors[t._id],s&&(l=m[p+"side"].split(" ")[0],c=m.domain[p]["right"===l||"top"===l?1:0])),s=s||[0,1],o=o||(r(e.position)?"free":d[0]||"free"),l=l||("x"===p?"bottom":"left"),c=c||0,u=0,f=!1;var v=i.coerce(e,t,{anchor:{valType:"enumerated",values:["free"].concat(d),dflt:o}},"anchor"),y=i.coerce(e,t,{side:{valType:"enumerated",values:"x"===p?["bottom","top"]:["left","right"],dflt:l}},"side");if("free"===v){if("y"===p)n("autoshift")&&(c="left"===y?g[0]:g[1],f=!t.automargin||t.automargin,u="left"===y?-3:3),n("shift",u);n("position",c)}n("automargin",f);var b=!1;if(h.length&&(b=i.coerce(e,t,{overlaying:{valType:"enumerated",values:[!1].concat(h),dflt:!1}},"overlaying")),!b){var x=n("domain",s);x[0]>x[1]-1/4096&&(t.domain=s),i.noneOrAll(e.domain,t.domain,s),"sync"===t.tickmode&&(t.tickmode="auto")}return n("layer"),t}},13506:(e,t,n)=>{"use strict";var r=n(26709);e.exports=function(e,t,n,i,a){a||(a={});var o=a.tickSuffixDflt,s=r(e);n("tickprefix")&&n("showtickprefix",s),n("ticksuffix",o)&&n("showticksuffix",s)}},7737:(e,t,n)=>{"use strict";var r=n(90525);e.exports=function(e,t,n,i){var a=t._template||{},o=t.type||a.type||"-";n("minallowed"),n("maxallowed");var s,l=n("range");l||(i.noInsiderange||"log"===o||(!(s=n("insiderange"))||null!==s[0]&&null!==s[1]||(t.insiderange=!1,s=void 0),s&&(l=n("range",s))));var c,u=t.getAutorangeDflt(l,i),f=n("autorange",u);!l||(null!==l[0]||null!==l[1])&&(null!==l[0]&&null!==l[1]||"reversed"!==f&&!0!==f)&&(null===l[0]||"min"!==f&&"max reversed"!==f)&&(null===l[1]||"max"!==f&&"min reversed"!==f)||(l=void 0,delete t.range,t.autorange=!0,c=!0),c||(f=n("autorange",u=t.getAutorangeDflt(l,i))),f&&(r(n,f,l),"linear"!==o&&"-"!==o||n("rangemode")),t.cleanRange()}},74577:(e,t,n)=>{"use strict";var r=n(12564).FROM_BL;e.exports=function(e,t,n){void 0===n&&(n=r[e.constraintoward||"center"]);var i=[e.r2l(e.range[0]),e.r2l(e.range[1])],a=i[0]+(i[1]-i[0])*n;e.range=e._input.range=[e.l2r(a+(i[0]-a)*t),e.l2r(a+(i[1]-a)*t)],e.setScale()}},97121:(e,t,n)=>{"use strict";var r=n(93268),i=n(39754).aL,a=n(56319),o=a.numberFormat,s=n(5605),l=a.cleanNumber,c=a.ms2DateTime,u=a.dateTime2ms,f=a.ensureNumber,d=a.isArrayOrTypedArray,h=n(33351),p=h.FP_SAFE,m=h.BADNUM,g=h.LOG_CLIP,v=h.ONEWEEK,y=h.ONEDAY,b=h.ONEHOUR,x=h.ONEMIN,_=h.ONESEC,w=n(33489),A=n(56596),k=A.HOUR_PATTERN,E=A.WEEKDAY_PATTERN;function T(e){return Math.pow(10,e)}function M(e){return null!=e}e.exports=function(e,t){t=t||{};var n=e._id||"x",h=n.charAt(0);function S(t,n){if(t>0)return Math.log(t)/Math.LN10;if(t<=0&&n&&e.range&&2===e.range.length){var r=e.range[0],i=e.range[1];return.5*(r+i-2*g*Math.abs(r-i))}return m}function C(t,n,r,i){if((i||{}).msUTC&&s(t))return+t;var o=u(t,r||e.calendar);if(o===m){if(!s(t))return m;t=+t;var l=Math.floor(10*a.mod(t+.05,1)),c=Math.round(t-l/10);o=u(new Date(c))+l/10}return o}function O(t,n,r){return c(t,n,r||e.calendar)}function R(t){return e._categories[Math.round(t)]}function N(t){if(M(t)){if(void 0===e._categoriesMap&&(e._categoriesMap={}),void 0!==e._categoriesMap[t])return e._categoriesMap[t];e._categories.push("number"==typeof t?String(t):t);var n=e._categories.length-1;return e._categoriesMap[t]=n,n}return m}function L(t){if(e._categoriesMap)return e._categoriesMap[t]}function D(e){var t=L(e);return void 0!==t?t:s(e)?+e:void 0}function P(e){return s(e)?+e:L(e)}function I(e,t,n){return r.round(n+t*e,2)}function F(e,t,n){return(e-n)/t}var z=function(t){return s(t)?I(t,e._m,e._b):m},j=function(t){return F(t,e._m,e._b)};if(e.rangebreaks){var B="y"===h;z=function(t){if(!s(t))return m;var n=e._rangebreaks.length;if(!n)return I(t,e._m,e._b);var r=B;e.range[0]>e.range[1]&&(r=!r);for(var i=r?-1:1,a=i*t,o=0,l=0;l<n;l++){var c=i*e._rangebreaks[l].min,u=i*e._rangebreaks[l].max;if(a<c)break;if(!(a>u)){o=a<(c+u)/2?l:l+1;break}o=l+1}var f=e._B[o]||0;return isFinite(f)?I(t,e._m2,f):0},j=function(t){var n=e._rangebreaks.length;if(!n)return F(t,e._m,e._b);for(var r=0,i=0;i<n&&!(t<e._rangebreaks[i].pmin);i++)t>e._rangebreaks[i].pmax&&(r=i+1);return F(t,e._m2,e._B[r])}}e.c2l="log"===e.type?S:f,e.l2c="log"===e.type?T:f,e.l2p=z,e.p2l=j,e.c2p="log"===e.type?function(e,t){return z(S(e,t))}:z,e.p2c="log"===e.type?function(e){return T(j(e))}:j,-1!==["linear","-"].indexOf(e.type)?(e.d2r=e.r2d=e.d2c=e.r2c=e.d2l=e.r2l=l,e.c2d=e.c2r=e.l2d=e.l2r=f,e.d2p=e.r2p=function(t){return e.l2p(l(t))},e.p2d=e.p2r=j,e.cleanPos=f):"log"===e.type?(e.d2r=e.d2l=function(e,t){return S(l(e),t)},e.r2d=e.r2c=function(e){return T(l(e))},e.d2c=e.r2l=l,e.c2d=e.l2r=f,e.c2r=S,e.l2d=T,e.d2p=function(t,n){return e.l2p(e.d2r(t,n))},e.p2d=function(e){return T(j(e))},e.r2p=function(t){return e.l2p(l(t))},e.p2r=j,e.cleanPos=f):"date"===e.type?(e.d2r=e.r2d=a.identity,e.d2c=e.r2c=e.d2l=e.r2l=C,e.c2d=e.c2r=e.l2d=e.l2r=O,e.d2p=e.r2p=function(t,n,r){return e.l2p(C(t,0,r))},e.p2d=e.p2r=function(e,t,n){return O(j(e),t,n)},e.cleanPos=function(t){return a.cleanDate(t,m,e.calendar)}):"category"===e.type?(e.d2c=e.d2l=N,e.r2d=e.c2d=e.l2d=R,e.d2r=e.d2l_noadd=D,e.r2c=function(t){var n=P(t);return void 0!==n?n:e.fraction2r(.5)},e.l2r=e.c2r=f,e.r2l=P,e.d2p=function(t){return e.l2p(e.r2c(t))},e.p2d=function(e){return R(j(e))},e.r2p=e.d2p,e.p2r=j,e.cleanPos=function(e){return"string"==typeof e&&""!==e?e:f(e)}):"multicategory"===e.type&&(e.r2d=e.c2d=e.l2d=R,e.d2r=e.d2l_noadd=D,e.r2c=function(t){var n=D(t);return void 0!==n?n:e.fraction2r(.5)},e.r2c_just_indices=L,e.l2r=e.c2r=f,e.r2l=D,e.d2p=function(t){return e.l2p(e.r2c(t))},e.p2d=function(e){return R(j(e))},e.r2p=e.d2p,e.p2r=j,e.cleanPos=function(e){return Array.isArray(e)||"string"==typeof e&&""!==e?e:f(e)},e.setupMultiCategory=function(r){var i,o,s=e._traceIndices,l=e._matchGroup;if(l&&0===e._categories.length)for(var c in l)if(c!==n){var u=t[w.id2name(c)];s=s.concat(u._traceIndices)}var f=[[0,{}],[0,{}]],p=[];for(i=0;i<s.length;i++){var m=r[s[i]];if(h in m){var g=m[h],v=m._length||a.minRowLength(g);if(d(g[0])&&d(g[1]))for(o=0;o<v;o++){var y=g[0][o],b=g[1][o];M(y)&&M(b)&&(p.push([y,b]),y in f[0][1]||(f[0][1][y]=f[0][0]++),b in f[1][1]||(f[1][1][b]=f[1][0]++))}}}for(p.sort((function(e,t){var n=f[0][1],r=n[e[0]]-n[t[0]];if(r)return r;var i=f[1][1];return i[e[1]]-i[t[1]]})),i=0;i<p.length;i++)N(p[i])}),e.fraction2r=function(t){var n=e.r2l(e.range[0]),r=e.r2l(e.range[1]);return e.l2r(n+t*(r-n))},e.r2fraction=function(t){var n=e.r2l(e.range[0]),r=e.r2l(e.range[1]);return(e.r2l(t)-n)/(r-n)},e.limitRange=function(t){var n=e.minallowed,r=e.maxallowed;if(void 0!==n||void 0!==r){t||(t="range");var i=a.nestedProperty(e,t).get(),o=a.simpleMap(i,e.r2l),s=o[1]<o[0];s&&o.reverse();var l=a.simpleMap([n,r],e.r2l);if(void 0!==n&&o[0]<l[0]&&(i[s?1:0]=n),void 0!==r&&o[1]>l[1]&&(i[s?0:1]=r),i[0]===i[1]){var c=e.l2r(n),u=e.l2r(r);if(void 0!==n){var f=c+1;void 0!==r&&(f=Math.min(f,u)),i[s?1:0]=f}if(void 0!==r){var d=u+1;void 0!==n&&(d=Math.max(d,c)),i[s?0:1]=d}}}},e.cleanRange=function(t,n){e._cleanRange(t,n),e.limitRange(t)},e._cleanRange=function(t,n){n||(n={}),t||(t="range");var r,i,o=a.nestedProperty(e,t).get();if(i=(i="date"===e.type?a.dfltRange(e.calendar):"y"===h?A.DFLTRANGEY:"realaxis"===e._name?[0,1]:n.dfltRange||A.DFLTRANGEX).slice(),"tozero"!==e.rangemode&&"nonnegative"!==e.rangemode||(i[0]=0),o&&2===o.length){var l=null===o[0],c=null===o[1];for("date"!==e.type||e.autorange||(o[0]=a.cleanDate(o[0],m,e.calendar),o[1]=a.cleanDate(o[1],m,e.calendar)),r=0;r<2;r++)if("date"===e.type){if(!a.isDateTime(o[r],e.calendar)){e[t]=i;break}if(e.r2l(o[0])===e.r2l(o[1])){var u=a.constrain(e.r2l(o[0]),a.MIN_MS+1e3,a.MAX_MS-1e3);o[0]=e.l2r(u-1e3),o[1]=e.l2r(u+1e3);break}}else{if(!s(o[r])){if(l||c||!s(o[1-r])){e[t]=i;break}o[r]=o[1-r]*(r?10:.1)}if(o[r]<-p?o[r]=-p:o[r]>p&&(o[r]=p),o[0]===o[1]){var f=Math.max(1,Math.abs(1e-6*o[0]));o[0]-=f,o[1]+=f}}}else a.nestedProperty(e,t).set(i)},e.setScale=function(n){var r=t._size;if(e.overlaying){var i=w.getFromId({_fullLayout:t},e.overlaying);e.domain=i.domain}var a=n&&e._r?"_r":"range",o=e.calendar;e.cleanRange(a);var s,l,c=e.r2l(e[a][0],o),u=e.r2l(e[a][1],o),f="y"===h;if((f?(e._offset=r.t+(1-e.domain[1])*r.h,e._length=r.h*(e.domain[1]-e.domain[0]),e._m=e._length/(c-u),e._b=-e._m*u):(e._offset=r.l+e.domain[0]*r.w,e._length=r.w*(e.domain[1]-e.domain[0]),e._m=e._length/(u-c),e._b=-e._m*c),e._rangebreaks=[],e._lBreaks=0,e._m2=0,e._B=[],e.rangebreaks)&&(e._rangebreaks=e.locateBreaks(Math.min(c,u),Math.max(c,u)),e._rangebreaks.length)){for(s=0;s<e._rangebreaks.length;s++)l=e._rangebreaks[s],e._lBreaks+=Math.abs(l.max-l.min);var d=f;c>u&&(d=!d),d&&e._rangebreaks.reverse();var p=d?-1:1;for(e._m2=p*e._length/(Math.abs(u-c)-e._lBreaks),e._B.push(-e._m2*(f?u:c)),s=0;s<e._rangebreaks.length;s++)l=e._rangebreaks[s],e._B.push(e._B[e._B.length-1]-p*e._m2*(l.max-l.min));for(s=0;s<e._rangebreaks.length;s++)(l=e._rangebreaks[s]).pmin=z(l.min),l.pmax=z(l.max)}if(!isFinite(e._m)||!isFinite(e._b)||e._length<0)throw t._replotting=!1,new Error("Something went wrong with axis scaling")},e.maskBreaks=function(t){var n,r,i,o,s,c=e.rangebreaks||[];c._cachedPatterns||(c._cachedPatterns=c.map((function(t){return t.enabled&&t.bounds?a.simpleMap(t.bounds,t.pattern?l:e.d2c):null}))),c._cachedValues||(c._cachedValues=c.map((function(t){return t.enabled&&t.values?a.simpleMap(t.values,e.d2c).sort(a.sorterAsc):null})));for(var u=0;u<c.length;u++){var f=c[u];if(f.enabled)if(f.bounds){var d=f.pattern;switch(r=(n=c._cachedPatterns[u])[0],i=n[1],d){case E:o=(s=new Date(t)).getUTCDay(),r>i&&(i+=7,o<r&&(o+=7));break;case k:o=(s=new Date(t)).getUTCHours()+(s.getUTCMinutes()/60+s.getUTCSeconds()/3600+s.getUTCMilliseconds()/36e5),r>i&&(i+=24,o<r&&(o+=24));break;case"":o=t}if(o>=r&&o<i)return m}else for(var h=c._cachedValues[u],p=0;p<h.length;p++)if(i=(r=h[p])+f.dvalue,t>=r&&t<i)return m}return t},e.locateBreaks=function(t,n){var r,i,o,s,c=[];if(!e.rangebreaks)return c;var u=e.rangebreaks.slice().sort((function(e,t){return e.pattern===E&&t.pattern===k?-1:t.pattern===E&&e.pattern===k?1:0})),f=function(e,r){if((e=a.constrain(e,t,n))!==(r=a.constrain(r,t,n))){for(var i=!0,o=0;o<c.length;o++){var s=c[o];e<s.max&&r>=s.min&&(e<s.min&&(s.min=e),r>s.max&&(s.max=r),i=!1)}i&&c.push({min:e,max:r})}};for(r=0;r<u.length;r++){var d=u[r];if(d.enabled)if(d.bounds){var h=t,p=n;d.pattern&&(h=Math.floor(h)),o=(i=a.simpleMap(d.bounds,d.pattern?l:e.r2l))[0],s=i[1];var m,g,w=new Date(h);switch(d.pattern){case E:g=v,m=(s-o+(s<o?7:0))*y,h+=o*y-(w.getUTCDay()*y+w.getUTCHours()*b+w.getUTCMinutes()*x+w.getUTCSeconds()*_+w.getUTCMilliseconds());break;case k:g=y,m=(s-o+(s<o?24:0))*b,h+=o*b-(w.getUTCHours()*b+w.getUTCMinutes()*x+w.getUTCSeconds()*_+w.getUTCMilliseconds());break;default:h=Math.min(i[0],i[1]),m=g=(p=Math.max(i[0],i[1]))-h}for(var A=h;A<p;A+=g)f(A,A+m)}else for(var T=a.simpleMap(d.values,e.d2c),M=0;M<T.length;M++)f(o=T[M],s=o+d.dvalue)}return c.sort((function(e,t){return e.min-t.min})),c},e.makeCalcdata=function(t,n,r){var i,o,s,l,c=e.type,u="date"===c&&t[n+"calendar"];if(n in t){if(i=t[n],l=t._length||a.minRowLength(i),a.isTypedArray(i)&&("linear"===c||"log"===c)){if(l===i.length)return i;if(i.subarray)return i.subarray(0,l)}if("multicategory"===c)return function(e,t){for(var n=new Array(t),r=0;r<t;r++){var i=(e[0]||[])[r],a=(e[1]||[])[r];n[r]=L([i,a])}return n}(i,l);for(o=new Array(l),s=0;s<l;s++)o[s]=e.d2c(i[s],0,u,r)}else{var f=n+"0"in t?e.d2c(t[n+"0"],0,u):0,d=t["d"+n]?Number(t["d"+n]):1;for(i=t[{x:"y",y:"x"}[n]],l=t._length||i.length,o=new Array(l),s=0;s<l;s++)o[s]=f+s*d}if(e.rangebreaks)for(s=0;s<l;s++)o[s]=e.maskBreaks(o[s]);return o},e.isValidRange=function(t,n){return Array.isArray(t)&&2===t.length&&(n&&null===t[0]||s(e.r2l(t[0])))&&(n&&null===t[1]||s(e.r2l(t[1])))},e.getAutorangeDflt=function(t,n){var r=!e.isValidRange(t,"nullOk");return r&&n&&n.reverseDflt?r="reversed":t&&(null===t[0]&&null===t[1]?r=!0:null===t[0]&&null!==t[1]?r="min":null!==t[0]&&null===t[1]&&(r="max")),r},e.isReversed=function(){var t=e.autorange;return"reversed"===t||"min reversed"===t||"max reversed"===t},e.isPtWithinRange=function(t,n){var r=e.c2l(t[h],null,n),i=e.r2l(e.range[0]),a=e.r2l(e.range[1]);return i<a?i<=r&&r<=a:a<=r&&r<=i},e._emptyCategories=function(){e._categories=[],e._categoriesMap={}},e.clearCalc=function(){var n=e._matchGroup;if(n){var r=null,i=null;for(var a in n){var o=t[w.id2name(a)];if(o._categories){r=o._categories,i=o._categoriesMap;break}}r&&i?(e._categories=r,e._categoriesMap=i):e._emptyCategories()}else e._emptyCategories();if(e._initialCategories)for(var s=0;s<e._initialCategories.length;s++)N(e._initialCategories[s])},e.sortByInitialCategories=function(){var r=[];if(e._emptyCategories(),e._initialCategories)for(var i=0;i<e._initialCategories.length;i++)N(e._initialCategories[i]);r=r.concat(e._traceIndices);var a=e._matchGroup;for(var o in a)if(n!==o){var s=t[w.id2name(o)];s._categories=e._categories,s._categoriesMap=e._categoriesMap,r=r.concat(s._traceIndices)}return r};var U=t._d3locale;"date"===e.type&&(e._dateFormat=U?U.timeFormat:i,e._extraFormat=t._extraFormat),e._separators=t.separators,e._numFormat=U?U.numberFormat:o,delete e._minDtick,delete e._forceTick0}},26709:e=>{"use strict";e.exports=function(e){var t=["showexponent","showtickprefix","showticksuffix"].filter((function(t){return void 0!==e[t]}));if(t.every((function(n){return e[n]===e[t[0]]}))||1===t.length)return e[t[0]]}},90586:(e,t,n)=>{"use strict";var r=n(56319),i=n(53408).contrast,a=n(31403),o=n(26709),s=n(75078);function l(e,t){function n(n,i){return r.coerce(e,t,a.tickformatstops,n,i)}n("enabled")&&(n("dtickrange"),n("value"))}e.exports=function(e,t,n,c,u){u||(u={});var f=n("labelalias");r.isPlainObject(f)||delete t.labelalias;var d=o(e);if(n("showticklabels")){u.noTicklabelshift||n("ticklabelshift"),u.noTicklabelstandoff||n("ticklabelstandoff");var h=u.font||{},p=t.color,m=-1!==(t.ticklabelposition||"").indexOf("inside")?i(u.bgColor):p&&p!==a.color.dflt?p:h.color;if(r.coerceFont(n,"tickfont",h,{overrideDflt:{color:m}}),u.noTicklabelstep||"multicategory"===c||"log"===c||n("ticklabelstep"),!u.noAng){var g=n("tickangle");u.noAutotickangles||"auto"!==g||n("autotickangles")}if("category"!==c){var v=n("tickformat");s(e,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:l}),t.tickformatstops.length||delete t.tickformatstops,u.noExp||v||"date"===c||(n("showexponent",d),n("exponentformat"),n("minexponent"),n("separatethousands"))}}}},56087:(e,t,n)=>{"use strict";var r=n(56319),i=n(31403);e.exports=function(e,t,n,a){var o=a.isMinor,s=o?e.minor||{}:e,l=o?t.minor:t,c=o?i.minor:i,u=o?"minor.":"",f=r.coerce2(s,l,c,"ticklen",o?.6*(t.ticklen||5):void 0),d=r.coerce2(s,l,c,"tickwidth",o?t.tickwidth||1:void 0),h=r.coerce2(s,l,c,"tickcolor",(o?t.tickcolor:void 0)||l.color);n(u+"ticks",!o&&a.outerTicks||f||d||h?"outside":"")||(delete l.ticklen,delete l.tickwidth,delete l.tickcolor)}},1383:(e,t,n)=>{"use strict";var r=n(59545),i=n(56319).isArrayOrTypedArray,a=n(41146).isTypedArraySpec,o=n(41146).decodeTypedArraySpec;e.exports=function(e,t,n,s,l){l||(l={});var c=l.isMinor,u=c?e.minor||{}:e,f=c?t.minor:t,d=c?"minor.":"";function h(e){var t=u[e];return a(t)&&(t=o(t)),void 0!==t?t:(f._template||{})[e]}var p=h("tick0"),m=h("dtick"),g=h("tickvals"),v=n(d+"tickmode",i(g)?"array":m?"linear":"auto");if("auto"===v||"sync"===v)n(d+"nticks");else if("linear"===v){var y=f.dtick=r.dtick(m,s);f.tick0=r.tick0(p,s,t.calendar,y)}else if("multicategory"!==s){void 0===n(d+"tickvals")?f.tickmode="auto":c||n("ticktext")}}},5580:(e,t,n)=>{"use strict";var r=n(93268),i=n(3360),a=n(56319),o=n(14797),s=n(596);e.exports=function(e,t,n,l){var c=e._fullLayout;if(0!==t.length){var u,f,d,h;l&&(u=l());var p=r.ease(n.easing);return e._transitionData._interruptCallbacks.push((function(){return window.cancelAnimationFrame(h),h=null,function(){for(var n={},r=0;r<t.length;r++){var a=t[r],o=a.plotinfo.xaxis,s=a.plotinfo.yaxis;a.xr0&&(n[o._name+".range"]=a.xr0.slice()),a.yr0&&(n[s._name+".range"]=a.yr0.slice())}return i.call("relayout",e,n).then((function(){for(var e=0;e<t.length;e++)m(t[e].plotinfo)}))}()})),f=Date.now(),h=window.requestAnimationFrame((function r(){d=Date.now();for(var a=Math.min(1,(d-f)/n.duration),o=p(a),s=0;s<t.length;s++)g(t[s],o);d-f>n.duration?(!function(){for(var n={},r=0;r<t.length;r++){var a=t[r],o=a.plotinfo.xaxis,s=a.plotinfo.yaxis;a.xr1&&(n[o._name+".range"]=a.xr1.slice()),a.yr1&&(n[s._name+".range"]=a.yr1.slice())}u&&u(),i.call("relayout",e,n).then((function(){for(var e=0;e<t.length;e++)m(t[e].plotinfo)}))}(),h=window.cancelAnimationFrame(r)):h=window.requestAnimationFrame(r)})),Promise.resolve()}function m(e){var t=e.xaxis,n=e.yaxis;c._defs.select("#"+e.clipId+"> rect").call(o.setTranslate,0,0).call(o.setScale,1,1),e.plot.call(o.setTranslate,t._offset,n._offset).call(o.setScale,1,1);var r=e.plot.selectAll(".scatterlayer .trace");r.selectAll(".point").call(o.setPointGroupScale,1,1),r.selectAll(".textpoint").call(o.setTextPointsScale,1,1),r.call(o.hideOutsideRangePoints,e)}function g(t,n){var r=t.plotinfo,i=r.xaxis,l=r.yaxis,c=i._length,u=l._length,f=!!t.xr1,d=!!t.yr1,h=[];if(f){var p=a.simpleMap(t.xr0,i.r2l),m=a.simpleMap(t.xr1,i.r2l),g=p[1]-p[0],v=m[1]-m[0];h[0]=(p[0]*(1-n)+n*m[0]-p[0])/(p[1]-p[0])*c,h[2]=c*(1-n+n*v/g),i.range[0]=i.l2r(p[0]*(1-n)+n*m[0]),i.range[1]=i.l2r(p[1]*(1-n)+n*m[1])}else h[0]=0,h[2]=c;if(d){var y=a.simpleMap(t.yr0,l.r2l),b=a.simpleMap(t.yr1,l.r2l),x=y[1]-y[0],_=b[1]-b[0];h[1]=(y[1]*(1-n)+n*b[1]-y[1])/(y[0]-y[1])*u,h[3]=u*(1-n+n*_/x),l.range[0]=i.l2r(y[0]*(1-n)+n*b[0]),l.range[1]=l.l2r(y[1]*(1-n)+n*b[1])}else h[1]=0,h[3]=u;s.drawOne(e,i,{skipTitle:!0}),s.drawOne(e,l,{skipTitle:!0}),s.redrawComponents(e,[i._id,l._id]);var w=f?c/h[2]:1,A=d?u/h[3]:1,k=f?h[0]:0,E=d?h[1]:0,T=f?h[0]/h[2]*c:0,M=d?h[1]/h[3]*u:0,S=i._offset-T,C=l._offset-M;r.clipRect.call(o.setTranslate,k,E).call(o.setScale,1/w,1/A),r.plot.call(o.setTranslate,S,C).call(o.setScale,w,A),o.setPointGroupScale(r.zoomScalePts,1/w,1/A),o.setTextPointsScale(r.zoomScaleTxt,1/w,1/A)}s.redrawComponents(e)}},14238:(e,t,n)=>{"use strict";var r=n(3360).traceIs,i=n(44992);function a(e){return{v:"x",h:"y"}[e.orientation||"v"]}function o(e,t){var n=a(e),i=r(e,"box-violin"),o=r(e._fullInput||{},"candlestick");return i&&!o&&t===n&&void 0===e[n]&&void 0===e[n+"0"]}e.exports=function(e,t,n,s){n("autotypenumbers",s.autotypenumbersDflt),"-"===n("type",(s.splomStash||{}).type)&&(!function(e,t){if("-"!==e.type)return;var n,s=e._id,l=s.charAt(0);-1!==s.indexOf("scene")&&(s=l);var c=function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];if("splom"===i.type&&i._length>0&&(i["_"+n+"axes"]||{})[t])return i;if((i[n+"axis"]||n)===t){if(o(i,n))return i;if((i[n]||[]).length||i[n+"0"])return i}}}(t,s,l);if(!c)return;if("histogram"===c.type&&l==={v:"y",h:"x"}[c.orientation||"v"])return void(e.type="linear");var u=l+"calendar",f=c[u],d={noMultiCategory:!r(c,"cartesian")||r(c,"noMultiCategory")};"box"===c.type&&c._hasPreCompStats&&l==={h:"x",v:"y"}[c.orientation||"v"]&&(d.noMultiCategory=!0);if(d.autotypenumbers=e.autotypenumbers,o(c,l)){var h=a(c),p=[];for(n=0;n<t.length;n++){var m=t[n];r(m,"box-violin")&&(m[l+"axis"]||l)===s&&(void 0!==m[h]?p.push(m[h][0]):void 0!==m.name?p.push(m.name):p.push("text"),m[u]!==f&&(f=void 0))}e.type=i(p,f,d)}else if("splom"===c.type){var g=c.dimensions[c._axesDim[s]];g.visible&&(e.type=i(g.values,f,d))}else e.type=i(c[l]||[c[l+"0"]],f,d)}(t,s.data),"-"===t.type?t.type="linear":e.type=t.type)}},33077:(e,t,n)=>{"use strict";var r=n(3360),i=n(56319);function a(e,t,n){var r,a,o,s=!1;if("data"===t.type)r=e._fullData[null!==t.traces?t.traces[0]:0];else{if("layout"!==t.type)return!1;r=e._fullLayout}return a=i.nestedProperty(r,t.prop).get(),(o=n[t.type]=n[t.type]||{}).hasOwnProperty(t.prop)&&o[t.prop]!==a&&(s=!0),o[t.prop]=a,{changed:s,value:a}}function o(e,t){var n=[],r=t[0],a={};if("string"==typeof r)a[r]=t[1];else{if(!i.isPlainObject(r))return n;a=r}return l(a,(function(e,t,r){n.push({type:"layout",prop:e,value:r})}),"",0),n}function s(e,t){var n,r,a,o,s=[];if(r=t[0],a=t[1],n=t[2],o={},"string"==typeof r)o[r]=a;else{if(!i.isPlainObject(r))return s;o=r,void 0===n&&(n=a)}return void 0===n&&(n=null),l(o,(function(t,r,i){var a,o;if(Array.isArray(i)){o=i.slice();var l=Math.min(o.length,e.data.length);n&&(l=Math.min(l,n.length)),a=[];for(var c=0;c<l;c++)a[c]=n?n[c]:c}else o=i,a=n?n.slice():null;if(null===a)Array.isArray(o)&&(o=o[0]);else if(Array.isArray(a)){if(!Array.isArray(o)){var u=o;o=[];for(var f=0;f<a.length;f++)o[f]=u}o.length=Math.min(a.length,o.length)}s.push({type:"data",prop:t,traces:a,value:o})}),"",0),s}function l(e,t,n,r){Object.keys(e).forEach((function(a){var o=e[a];if("_"!==a[0]){var s=n+(r>0?".":"")+a;i.isPlainObject(o)?l(o,t,s,r+1):t(s,a,o)}}))}t.manageCommandObserver=function(e,n,r,o){var s={},l=!0;n&&n._commandObserver&&(s=n._commandObserver),s.cache||(s.cache={}),s.lookupTable={};var c=t.hasSimpleAPICommandBindings(e,r,s.lookupTable);if(n&&n._commandObserver){if(c)return s;if(n._commandObserver.remove)return n._commandObserver.remove(),n._commandObserver=null,s}if(c){a(e,c,s.cache),s.check=function(){if(l){var t=a(e,c,s.cache);return t.changed&&o&&void 0!==s.lookupTable[t.value]&&(s.disable(),Promise.resolve(o({value:t.value,type:c.type,prop:c.prop,traces:c.traces,index:s.lookupTable[t.value]})).then(s.enable,s.enable)),t.changed}};for(var u=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],f=0;f<u.length;f++)e._internalOn(u[f],s.check);s.remove=function(){for(var t=0;t<u.length;t++)e._removeInternalListener(u[t],s.check)}}else i.log("Unable to automatically bind plot updates to API command"),s.lookupTable={},s.remove=function(){};return s.disable=function(){l=!1},s.enable=function(){l=!0},n&&(n._commandObserver=s),s},t.hasSimpleAPICommandBindings=function(e,n,r){var i,a,o=n.length;for(i=0;i<o;i++){var s,l=n[i],c=l.method,u=l.args;if(Array.isArray(u)||(u=[]),!c)return!1;var f=t.computeAPICommandBindings(e,c,u);if(1!==f.length)return!1;if(a){if((s=f[0]).type!==a.type)return!1;if(s.prop!==a.prop)return!1;if(Array.isArray(a.traces)){if(!Array.isArray(s.traces))return!1;s.traces.sort();for(var d=0;d<a.traces.length;d++)if(a.traces[d]!==s.traces[d])return!1}else if(s.prop!==a.prop)return!1}else a=f[0],Array.isArray(a.traces)&&a.traces.sort();var h=(s=f[0]).value;if(Array.isArray(h)){if(1!==h.length)return!1;h=h[0]}r&&(r[h]=i)}return a},t.executeAPICommand=function(e,t,n){if("skip"===t)return Promise.resolve();var a=r.apiMethodRegistry[t],o=[e];Array.isArray(n)||(n=[]);for(var s=0;s<n.length;s++)o.push(n[s]);return a.apply(null,o).catch((function(e){return i.warn("API call to Plotly."+t+" rejected.",e),Promise.reject(e)}))},t.computeAPICommandBindings=function(e,t,n){var r;switch(Array.isArray(n)||(n=[]),t){case"restyle":r=s(e,n);break;case"relayout":r=o(e,n);break;case"update":r=s(e,[n[0],n[2]]).concat(o(e,[n[1]]));break;case"animate":r=function(e,t){return Array.isArray(t[0])&&1===t[0].length&&-1!==["string","number"].indexOf(typeof t[0][0])?[{type:"layout",prop:"_currentFrame",value:t[0][0].toString()}]:[]}(0,n);break;default:r=[]}return r}},18874:(e,t,n)=>{"use strict";var r=n(86395).extendFlat;t.u=function(e,t){t=t||{};var n={valType:"info_array",editType:(e=e||{}).editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]},i=e.name?e.name+" ":"",a=e.trace?"trace ":"subplot ",o=t.description?" "+t.description:"",s={x:r({},n,{description:["Sets the horizontal domain of this ",i,a,"(in plot fraction).",o].join("")}),y:r({},n,{description:["Sets the vertical domain of this ",i,a,"(in plot fraction).",o].join("")}),editType:e.editType};return e.noGridCell||(s.row={valType:"integer",min:0,dflt:0,editType:e.editType,description:["If there is a layout grid, use the domain ","for this row in the grid for this ",i,a,".",o].join("")},s.column={valType:"integer",min:0,dflt:0,editType:e.editType,description:["If there is a layout grid, use the domain ","for this column in the grid for this ",i,a,".",o].join("")}),s},t.N=function(e,t,n,r){var i=r&&r.x||[0,1],a=r&&r.y||[0,1],o=t.grid;if(o){var s=n("domain.column");void 0!==s&&(s<o.columns?i=o._domains.x[s]:delete e.domain.column);var l=n("domain.row");void 0!==l&&(l<o.rows?a=o._domains.y[l]:delete e.domain.row)}var c=n("domain.x",i),u=n("domain.y",a);c[0]<c[1]||(e.domain.x=i.slice()),u[0]<u[1]||(e.domain.y=a.slice())}},95323:e=>{"use strict";e.exports=function(e){var t=e.variantValues,n=e.editType,r=e.colorEditType;void 0===r&&(r=n);var i={editType:n,valType:"integer",min:1,max:1e3,extras:["normal","bold"],dflt:"normal",description:["Sets the weight (or boldness) of the font."].join(" ")};e.noNumericWeightValues&&(i.valType="enumerated",i.values=i.extras,i.extras=void 0,i.min=void 0,i.max=void 0);var a={family:{valType:"string",noBlank:!0,strict:!0,editType:n,description:["HTML font family - the typeface that will be applied by the web browser.","The web browser will only be able to apply a font if it is available on the system","which it operates. Provide multiple font families, separated by commas, to indicate","the preference in which to apply fonts if they aren't available on the system.","The Chart Studio Cloud (at https://chart-studio.plotly.com or on-premise) generates images on a server,","where only a select number of","fonts are installed and supported.","These include *Arial*, *Balto*, *Courier New*, *Droid Sans*, *Droid Serif*,","*Droid Sans Mono*, *Gravitas One*, *Old Standard TT*, *Open Sans*, *Overpass*,","*PT Sans Narrow*, *Raleway*, *Times New Roman*."].join(" ")},size:{valType:"number",min:1,editType:n},color:{valType:"color",editType:r},weight:i,style:{editType:n,valType:"enumerated",values:["normal","italic"],dflt:"normal",description:["Sets whether a font should be styled with a normal or italic face from its family."].join(" ")},variant:e.noFontVariant?void 0:{editType:n,valType:"enumerated",values:t||["normal","small-caps","all-small-caps","all-petite-caps","petite-caps","unicase"],dflt:"normal",description:["Sets the variant of the font."].join(" ")},textcase:e.noFontTextcase?void 0:{editType:n,valType:"enumerated",values:["normal","word caps","upper","lower"],dflt:"normal",description:["Sets capitalization of text.","It can be used to make text appear in all-uppercase or all-lowercase,","or with each word capitalized."].join(" ")},lineposition:e.noFontLineposition?void 0:{editType:n,valType:"flaglist",flags:["under","over","through"],extras:["none"],dflt:"none",description:["Sets the kind of decoration line(s) with text,","such as an *under*, *over* or *through*","as well as combinations e.g. *under+over*, etc."].join(" ")},shadow:e.noFontShadow?void 0:{editType:n,valType:"string",dflt:e.autoShadowDflt?"auto":"none",description:["Sets the shape and color of the shadow behind text.","*auto* places minimal shadow and applies contrast text font color.","See https://developer.mozilla.org/en-US/docs/Web/CSS/text-shadow for additional options."].join(" ")},editType:n,description:""+(e.description||"")};return e.autoSize&&(a.size.dflt="auto"),e.autoColor&&(a.color.dflt="auto"),e.arrayOk&&(a.family.arrayOk=!0,a.weight.arrayOk=!0,a.style.arrayOk=!0,e.noFontVariant||(a.variant.arrayOk=!0),e.noFontTextcase||(a.textcase.arrayOk=!0),e.noFontLineposition||(a.lineposition.arrayOk=!0),e.noFontShadow||(a.shadow.arrayOk=!0),a.size.arrayOk=!0,a.color.arrayOk=!0),a}},88281:e=>{"use strict";e.exports={_isLinkedToArray:"frames_entry",group:{valType:"string",description:["An identifier that specifies the group to which the frame belongs,","used by animate to select a subset of frames."].join(" ")},name:{valType:"string",description:"A label by which to identify the frame"},traces:{valType:"any",description:["A list of trace indices that identify the respective traces in the","data attribute"].join(" ")},baseframe:{valType:"string",description:["The name of the frame into which this frame's properties are merged","before applying. This is used to unify properties and avoid needing","to specify the same values for the same properties in multiple frames."].join(" ")},data:{valType:"any",description:["A list of traces this frame modifies. The format is identical to the","normal trace definition."].join(" ")},layout:{valType:"any",description:["Layout properties which this frame modifies. The format is identical","to the normal layout definition."].join(" ")}}},38895:(e,t,n)=>{"use strict";var r=n(3360),i=n(56596).SUBPLOT_PATTERN;t.eV=function(e,t,n){var i,a=[],o=[];if(!(i="string"==typeof t?r.getModule(t).plot:"function"==typeof t?t:t.plot))return[a,e];for(var s=n,l=0;l<e.length;l++){var c=e[l],u=c[0].trace,f=void 0!==u.zorder;!0===u.visible&&0!==u._length&&(!u._module||u._module.plot!==i||f&&u.zorder!==s?o.push(c):a.push(c))}return[a,o]},t.KO=function(e,t,n){if(!r.subplotsRegistry[t])return[];var a,o,s,l=r.subplotsRegistry[t].attr,c=[];if("gl2d"===t){var u=n.match(i);o="x"+u[1],s="y"+u[2]}for(var f=0;f<e.length;f++)a=e[f],"gl2d"===t&&r.traceIs(a,"gl2d")?a[l[0]]===o&&a[l[1]]===s&&c.push(a):a[l]===n&&c.push(a);return c}},29945:(e,t,n)=>{"use strict";var r=n(88500).overrideAll,i=n(97557),a=n(28637),o=n(38895).KO,s=n(56319),l=n(81818),c="gl3d",u="scene";t.name=c,t.attr=u,t.idRoot=u,t.idRegex=t.attrRegex=s.counterRegex("scene"),t.attributes=n(83471),t.layoutAttributes=n(16966),t.baseLayoutAttrOverrides=r({hoverlabel:i.hoverlabel},"plot","nested"),t.supplyLayoutDefaults=n(1960),t.plot=function(e){for(var t=e._fullLayout,n=e._fullData,r=t._subplots[c],i=0;i<r.length;i++){var s=r[i],l=o(n,c,s),u=t[s],f=u.camera,d=u._scene;d||(d=new a({id:s,graphDiv:e,container:e.querySelector(".gl-container"),staticPlot:e._context.staticPlot,plotGlPixelRatio:e._context.plotGlPixelRatio,camera:f},t),u._scene=d),d.viewInitial||(d.viewInitial={up:{x:f.up.x,y:f.up.y,z:f.up.z},eye:{x:f.eye.x,y:f.eye.y,z:f.eye.z},center:{x:f.center.x,y:f.center.y,z:f.center.z}}),d.plot(l,t,e.layout)}},t.clean=function(e,t,n,r){for(var i=r._subplots[c]||[],a=0;a<i.length;a++){var o=i[a];!t[o]&&r[o]._scene&&(r[o]._scene.destroy(),r._infolayer&&r._infolayer.selectAll(".annotation-"+o).remove())}},t.toSVG=function(e){for(var t=e._fullLayout,n=t._subplots[c],r=t._size,i=0;i<n.length;i++){var a=t[n[i]],o=a.domain,s=a._scene,u=s.toImage("png");t._glimages.append("svg:image").attr({xmlns:l.svg,"xlink:href":u,x:r.l+r.w*o.x[0],y:r.t+r.h*(1-o.y[1]),width:r.w*(o.x[1]-o.x[0]),height:r.h*(o.y[1]-o.y[0]),preserveAspectRatio:"none"}),s.destroy()}},t.cleanId=function(e){if(e.match(/^scene[0-9]*$/)){var t=e.substr(5);return"1"===t&&(t=""),u+t}},t.updateFx=function(e){for(var t=e._fullLayout,n=t._subplots[c],r=0;r<n.length;r++){t[n[r]]._scene.updateFx(t.dragmode,t.hovermode)}}},83471:e=>{"use strict";e.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's 3D coordinate system and","a 3D scene.","If *scene* (the default value), the (x,y,z) coordinates refer to","`layout.scene`.","If *scene2*, the (x,y,z) coordinates refer to `layout.scene2`,","and so on."].join(" ")}}},76683:(e,t,n)=>{"use strict";var r=n(53408),i=n(31403),a=n(86395).extendFlat,o=n(88500).overrideAll;e.exports=o({visible:i.visible,showspikes:{valType:"boolean",dflt:!0,description:["Sets whether or not spikes starting from","data points to this axis' wall are shown on hover."].join(" ")},spikesides:{valType:"boolean",dflt:!0,description:["Sets whether or not spikes extending from the","projection data points to this axis' wall boundaries","are shown on hover."].join(" ")},spikethickness:{valType:"number",min:0,dflt:2,description:"Sets the thickness (in px) of the spikes."},spikecolor:{valType:"color",dflt:r.defaultLine,description:"Sets the color of the spikes."},showbackground:{valType:"boolean",dflt:!1,description:["Sets whether or not this axis' wall","has a background color."].join(" ")},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)",description:"Sets the background color of this axis' wall."},showaxeslabels:{valType:"boolean",dflt:!0,description:"Sets whether or not this axis is labeled"},color:i.color,categoryorder:i.categoryorder,categoryarray:i.categoryarray,title:{text:i.title.text,font:i.title.font},type:a({},i.type,{values:["-","linear","log","date","category"]}),autotypenumbers:i.autotypenumbers,autorange:i.autorange,autorangeoptions:{minallowed:i.autorangeoptions.minallowed,maxallowed:i.autorangeoptions.maxallowed,clipmin:i.autorangeoptions.clipmin,clipmax:i.autorangeoptions.clipmax,include:i.autorangeoptions.include,editType:"plot"},rangemode:i.rangemode,minallowed:i.minallowed,maxallowed:i.maxallowed,range:a({},i.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:i.minor.tickmode,nticks:i.nticks,tick0:i.tick0,dtick:i.dtick,tickvals:i.tickvals,ticktext:i.ticktext,ticks:i.ticks,mirror:i.mirror,ticklen:i.ticklen,tickwidth:i.tickwidth,tickcolor:i.tickcolor,showticklabels:i.showticklabels,labelalias:i.labelalias,tickfont:i.tickfont,tickangle:i.tickangle,tickprefix:i.tickprefix,showtickprefix:i.showtickprefix,ticksuffix:i.ticksuffix,showticksuffix:i.showticksuffix,showexponent:i.showexponent,exponentformat:i.exponentformat,minexponent:i.minexponent,separatethousands:i.separatethousands,tickformat:i.tickformat,tickformatstops:i.tickformatstops,hoverformat:i.hoverformat,showline:i.showline,linecolor:i.linecolor,linewidth:i.linewidth,showgrid:i.showgrid,gridcolor:a({},i.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:i.gridwidth,zeroline:i.zeroline,zerolinecolor:i.zerolinecolor,zerolinewidth:i.zerolinewidth,_deprecated:{title:i._deprecated.title,titlefont:i._deprecated.titlefont}},"plot","from-root")},55308:(e,t,n)=>{"use strict";var r=n(3707).mix,i=n(56319),a=n(65210),o=n(76683),s=n(14238),l=n(10849),c=["xaxis","yaxis","zaxis"],u=13600/187;e.exports=function(e,t,n){var f,d;function h(e,t){return i.coerce(f,d,o,e,t)}for(var p=0;p<c.length;p++){var m=c[p];f=e[m]||{},(d=a.newContainer(t,m))._id=m[0]+n.scene,d._name=m,s(f,d,h,n),l(f,d,h,{font:n.font,letter:m[0],data:n.data,showGrid:!0,noAutotickangles:!0,noTicklabelindex:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelshift:!0,noTicklabelstandoff:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,noInsiderange:!0,bgColor:n.bgColor,calendar:n.calendar},n.fullLayout),h("gridcolor",r(d.color,n.bgColor,u).toRgbString()),h("title.text",m[0]),d.setScale=i.noop,h("showspikes")&&(h("spikesides"),h("spikethickness"),h("spikecolor",d.color)),h("showaxeslabels"),h("showbackground")&&h("backgroundcolor")}}},32059:(e,t,n)=>{"use strict";var r=n(47312),i=n(56319),a=["xaxis","yaxis","zaxis"];function o(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickFontWeight=["normal","normal","normal","normal"],this.tickFontStyle=["normal","normal","normal","normal"],this.tickFontVariant=["normal","normal","normal","normal"],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelFontWeight=["normal","normal","normal","normal"],this.labelFontStyle=["normal","normal","normal","normal"],this.labelFontVariant=["normal","normal","normal","normal"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}o.prototype.merge=function(e,t){for(var n=this,o=0;o<3;++o){var s=t[a[o]];s.visible?(n.labels[o]=e._meta?i.templateString(s.title.text,e._meta):s.title.text,"font"in s.title&&(s.title.font.color&&(n.labelColor[o]=r(s.title.font.color)),s.title.font.family&&(n.labelFont[o]=s.title.font.family),s.title.font.size&&(n.labelSize[o]=s.title.font.size),s.title.font.weight&&(n.labelFontWeight[o]=s.title.font.weight),s.title.font.style&&(n.labelFontStyle[o]=s.title.font.style),s.title.font.variant&&(n.labelFontVariant[o]=s.title.font.variant)),"showline"in s&&(n.lineEnable[o]=s.showline),"linecolor"in s&&(n.lineColor[o]=r(s.linecolor)),"linewidth"in s&&(n.lineWidth[o]=s.linewidth),"showgrid"in s&&(n.gridEnable[o]=s.showgrid),"gridcolor"in s&&(n.gridColor[o]=r(s.gridcolor)),"gridwidth"in s&&(n.gridWidth[o]=s.gridwidth),"log"===s.type?n.zeroEnable[o]=!1:"zeroline"in s&&(n.zeroEnable[o]=s.zeroline),"zerolinecolor"in s&&(n.zeroLineColor[o]=r(s.zerolinecolor)),"zerolinewidth"in s&&(n.zeroLineWidth[o]=s.zerolinewidth),"ticks"in s&&s.ticks?n.lineTickEnable[o]=!0:n.lineTickEnable[o]=!1,"ticklen"in s&&(n.lineTickLength[o]=n._defaultLineTickLength[o]=s.ticklen),"tickcolor"in s&&(n.lineTickColor[o]=r(s.tickcolor)),"tickwidth"in s&&(n.lineTickWidth[o]=s.tickwidth),"tickangle"in s&&(n.tickAngle[o]="auto"===s.tickangle?-3600:Math.PI*-s.tickangle/180),"showticklabels"in s&&(n.tickEnable[o]=s.showticklabels),"tickfont"in s&&(s.tickfont.color&&(n.tickColor[o]=r(s.tickfont.color)),s.tickfont.family&&(n.tickFont[o]=s.tickfont.family),s.tickfont.size&&(n.tickSize[o]=s.tickfont.size),s.tickfont.weight&&(n.tickFontWeight[o]=s.tickfont.weight),s.tickfont.style&&(n.tickFontStyle[o]=s.tickfont.style),s.tickfont.variant&&(n.tickFontVariant[o]=s.tickfont.variant)),"mirror"in s?-1!==["ticks","all","allticks"].indexOf(s.mirror)?(n.lineTickMirror[o]=!0,n.lineMirror[o]=!0):!0===s.mirror?(n.lineTickMirror[o]=!1,n.lineMirror[o]=!0):(n.lineTickMirror[o]=!1,n.lineMirror[o]=!1):n.lineMirror[o]=!1,"showbackground"in s&&!1!==s.showbackground?(n.backgroundEnable[o]=!0,n.backgroundColor[o]=r(s.backgroundcolor)):n.backgroundEnable[o]=!1):(n.tickEnable[o]=!1,n.labelEnable[o]=!1,n.lineEnable[o]=!1,n.lineTickEnable[o]=!1,n.gridEnable[o]=!1,n.zeroEnable[o]=!1,n.backgroundEnable[o]=!1)}},e.exports=function(e,t){var n=new o;return n.merge(e,t),n}},1960:(e,t,n)=>{"use strict";var r=n(56319),i=n(53408),a=n(3360),o=n(92970),s=n(55308),l=n(16966),c=n(38895).KO,u="gl3d";function f(e,t,n,r){for(var o=n("bgcolor"),l=i.combine(o,r.paper_bgcolor),f=["up","center","eye"],d=0;d<f.length;d++)n("camera."+f[d]+".x"),n("camera."+f[d]+".y"),n("camera."+f[d]+".z");n("camera.projection.type");var h=!!n("aspectratio.x")&&!!n("aspectratio.y")&&!!n("aspectratio.z"),p=n("aspectmode",h?"manual":"auto");h||(e.aspectratio=t.aspectratio={x:1,y:1,z:1},"manual"===p&&(t.aspectmode="auto"),e.aspectmode=t.aspectmode);var m=c(r.fullData,u,r.id);s(e,t,{font:r.font,scene:r.id,data:m,bgColor:l,calendar:r.calendar,autotypenumbersDflt:r.autotypenumbersDflt,fullLayout:r.fullLayout}),a.getComponentMethod("annotations3d","handleDefaults")(e,t,r);var g=r.getDfltFromLayout("dragmode");if(!1!==g&&!g)if(g="orbit",e.camera&&e.camera.up){var v=e.camera.up.x,y=e.camera.up.y,b=e.camera.up.z;0!==b&&(v&&y&&b?b/Math.sqrt(v*v+y*y+b*b)>.999&&(g="turntable"):g="turntable")}else g="turntable";n("dragmode",g),n("hovermode",r.getDfltFromLayout("hovermode"))}e.exports=function(e,t,n){var i=t._basePlotModules.length>1;o(e,t,n,{type:u,attributes:l,handleDefaults:f,fullLayout:t,font:t.font,fullData:n,getDfltFromLayout:function(t){if(!i)return r.validate(e[t],l[t])?e[t]:void 0},autotypenumbersDflt:t.autotypenumbers,paper_bgcolor:t.paper_bgcolor,calendar:t.calendar})}},16966:(e,t,n)=>{"use strict";var r=n(76683),i=n(18874).u,a=n(86395).extendFlat,o=n(56319).counterRegex;function s(e,t,n){return{x:{valType:"number",dflt:e,editType:"camera"},y:{valType:"number",dflt:t,editType:"camera"},z:{valType:"number",dflt:n,editType:"camera"},editType:"camera"}}e.exports={_arrayAttrRegexps:[o("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:a(s(0,0,1),{description:["Sets the (x,y,z) components of the 'up' camera vector.","This vector determines the up direction of this scene","with respect to the page.","The default is *{x: 0, y: 0, z: 1}* which means that","the z axis points up."].join(" ")}),center:a(s(0,0,0),{description:["Sets the (x,y,z) components of the 'center' camera vector","This vector determines the translation (x,y,z) space","about the center of this scene.","By default, there is no such translation."].join(" ")}),eye:a(s(1.25,1.25,1.25),{description:["Sets the (x,y,z) components of the 'eye' camera vector.","This vector determines the view point about the origin","of this scene."].join(" ")}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc",description:["Sets the projection type. The projection type could be","either *perspective* or *orthographic*. The default is","*perspective*."].join(" ")},editType:"calc"},editType:"camera"},domain:i({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0},description:["If *cube*, this scene's axes are drawn as a cube,","regardless of the axes' ranges.","If *data*, this scene's axes are drawn","in proportion with the axes' ranges.","If *manual*, this scene's axes are drawn","in proportion with the input of *aspectratio*","(the default behavior if *aspectratio* is provided).","If *auto*, this scene's axes are drawn","using the results of *data* except when one axis","is more than four times the size of the two others,","where in that case the results of *cube* are used."].join(" ")},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"},description:["Sets this scene's axis aspectratio."].join(" ")},xaxis:r,yaxis:r,zaxis:r,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot",description:["Determines the mode of drag interactions for this scene."].join(" ")},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar",description:["Determines the mode of hover interactions for this scene."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in camera attributes.","Defaults to `layout.uirevision`."].join(" ")},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera",description:"Obsolete. Use `camera` instead."}}}},39001:(e,t,n)=>{"use strict";var r=n(47312),i=["xaxis","yaxis","zaxis"];function a(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}a.prototype.merge=function(e){for(var t=0;t<3;++t){var n=e[i[t]];n.visible?(this.enabled[t]=n.showspikes,this.colors[t]=r(n.spikecolor),this.drawSides[t]=n.spikesides,this.lineWidth[t]=n.spikethickness):(this.enabled[t]=!1,this.drawSides[t]=!1)}},e.exports=function(e){var t=new a;return t.merge(e),t}},69306:(e,t,n)=>{"use strict";e.exports=function(e){for(var t=e.axesOptions,n=e.glplot.axesPixels,s=e.fullSceneLayout,l=[[],[],[]],c=0;c<3;++c){var u=s[a[c]];if(u._length=(n[c].hi-n[c].lo)*n[c].pixelsPerDataUnit/e.dataScale[c],Math.abs(u._length)===1/0||isNaN(u._length))l[c]=[];else{u._input_range=u.range.slice(),u.range[0]=n[c].lo/e.dataScale[c],u.range[1]=n[c].hi/e.dataScale[c],u._m=1/(e.dataScale[c]*n[c].pixelsPerDataUnit),u.range[0]===u.range[1]&&(u.range[0]-=1,u.range[1]+=1);var f=u.tickmode;if("auto"===u.tickmode){u.tickmode="linear";var d=u.nticks||i.constrain(u._length/40,4,9);r.autoTicks(u,Math.abs(u.range[1]-u.range[0])/d)}for(var h=r.calcTicks(u,{msUTC:!0}),p=0;p<h.length;++p)h[p].x=h[p].x*e.dataScale[c],"date"===u.type&&(h[p].text=h[p].text.replace(/\<br\>/g," "));l[c]=h,u.tickmode=f}}t.ticks=l;for(c=0;c<3;++c){o[c]=.5*(e.glplot.bounds[0][c]+e.glplot.bounds[1][c]);for(p=0;p<2;++p)t.bounds[p][c]=e.glplot.bounds[p][c]}e.contourLevels=function(e){for(var t=new Array(3),n=0;n<3;++n){for(var r=e[n],i=new Array(r.length),a=0;a<r.length;++a)i[a]=r[a].x;t[n]=i}return t}(l)};var r=n(596),i=n(56319),a=["xaxis","yaxis","zaxis"],o=[0,0,0]},45248:e=>{"use strict";function t(e,t){var n,r,i=[0,0,0,0];for(n=0;n<4;++n)for(r=0;r<4;++r)i[r]+=e[4*n+r]*t[n];return i}e.exports=function(e,n){return t(e.projection,t(e.view,t(e.model,[n[0],n[1],n[2],1])))}},28637:(e,t,n)=>{"use strict";var r,i,a=n(2528).gl_plot3d,o=a.createCamera,s=a.createScene,l=n(99436),c=n(80959),u=n(3360),f=n(56319),d=f.preserveDrawingBuffer(),h=n(596),p=n(17911),m=n(47312),g=n(98942),v=n(45248),y=n(32059),b=n(39001),x=n(69306),_=n(39065).applyAutorangeOptions,w=!1;function A(e,t){var n=document.createElement("div"),r=e.container;this.graphDiv=e.graphDiv;var i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.style.position="absolute",i.style.top=i.style.left="0px",i.style.width=i.style.height="100%",i.style["z-index"]=20,i.style["pointer-events"]="none",n.appendChild(i),this.svgContainer=i,n.id=e.id,n.style.position="absolute",n.style.top=n.style.left="0px",n.style.width=n.style.height="100%",r.appendChild(n),this.fullLayout=t,this.id=e.id||"scene",this.fullSceneLayout=t[this.id],this.plotArgs=[[],{},{}],this.axesOptions=y(t,t[this.id]),this.spikeOptions=b(t[this.id]),this.container=n,this.staticMode=!!e.staticPlot,this.pixelRatio=this.pixelRatio||e.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=u.getComponentMethod("annotations3d","convert"),this.drawAnnotations=u.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var k=A.prototype;k.prepareOptions=function(){var e=this,t={canvas:e.canvas,gl:e.gl,glOptions:{preserveDrawingBuffer:d,premultipliedAlpha:!0,antialias:!0},container:e.container,axes:e.axesOptions,spikes:e.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:e.camera,pixelRatio:e.pixelRatio};if(e.staticMode){if(!(i||(r=document.createElement("canvas"),i=l({canvas:r,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");t.gl=i,t.canvas=r}return t};var E=!0;k.tryCreatePlot=function(){var e=this,t=e.prepareOptions(),n=!0;try{e.glplot=s(t)}catch(r){if(e.staticMode||!E||d)n=!1;else{f.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{d=t.glOptions.preserveDrawingBuffer=!0,e.glplot=s(t)}catch(e){d=t.glOptions.preserveDrawingBuffer=!1,n=!1}}}return E=!1,n},k.initializeGLCamera=function(){var e=this,t=e.fullSceneLayout.camera,n="orthographic"===t.projection.type;e.camera=o(e.container,{center:[t.center.x,t.center.y,t.center.z],eye:[t.eye.x,t.eye.y,t.eye.z],up:[t.up.x,t.up.y,t.up.z],_ortho:n,zoomMin:.01,zoomMax:100,mode:"orbit"})},k.initializeGLPlot=function(){var e=this;if(e.initializeGLCamera(),!e.tryCreatePlot())return g(e);e.traces={},e.make4thDimension();var t=e.graphDiv,n=t.layout,r=function(){var t={};return e.isCameraChanged(n)&&(t[e.id+".camera"]=e.getCamera()),e.isAspectChanged(n)&&(t[e.id+".aspectratio"]=e.glplot.getAspectratio(),"manual"!==n[e.id].aspectmode&&(e.fullSceneLayout.aspectmode=n[e.id].aspectmode=t[e.id+".aspectmode"]="manual")),t},i=function(e){if(!1!==e.fullSceneLayout.dragmode){var t=r();e.saveLayout(n),e.graphDiv.emit("plotly_relayout",t)}};return e.glplot.canvas&&(e.glplot.canvas.addEventListener("mouseup",(function(){i(e)})),e.glplot.canvas.addEventListener("touchstart",(function(){w=!0})),e.glplot.canvas.addEventListener("wheel",(function(n){if(t._context._scrollZoom.gl3d){if(e.camera._ortho){var r=n.deltaX>n.deltaY?1.1:1/1.1,a=e.glplot.getAspectratio();e.glplot.setAspectratio({x:r*a.x,y:r*a.y,z:r*a.z})}i(e)}}),!!c&&{passive:!1}),e.glplot.canvas.addEventListener("mousemove",(function(){if(!1!==e.fullSceneLayout.dragmode&&0!==e.camera.mouseListener.buttons){var t=r();e.graphDiv.emit("plotly_relayouting",t)}})),e.staticMode||e.glplot.canvas.addEventListener("webglcontextlost",(function(n){t&&t.emit&&t.emit("plotly_webglcontextlost",{event:n,layer:e.id})}),!1)),e.glplot.oncontextloss=function(){e.recoverContext()},e.glplot.onrender=function(){e.render()},!0},k.render=function(){var e,t=this,n=t.graphDiv,r=t.svgContainer,i=t.container.getBoundingClientRect();n._fullLayout._calcInverseTransform(n);var a=n._fullLayout._invScaleX,o=n._fullLayout._invScaleY,s=i.width*a,l=i.height*o;r.setAttributeNS(null,"viewBox","0 0 "+s+" "+l),r.setAttributeNS(null,"width",s),r.setAttributeNS(null,"height",l),x(t),t.glplot.axes.update(t.axesOptions);for(var c=Object.keys(t.traces),u=null,d=t.glplot.selection,m=0;m<c.length;++m)"skip"!==(e=t.traces[c[m]]).data.hoverinfo&&e.handlePick(d)&&(u=e),e.setContourLevels&&e.setContourLevels();function g(e,n,r){var i=t.fullSceneLayout[e+"axis"];return"log"!==i.type&&(n=i.d2l(n)),h.hoverLabelText(i,n,r)}if(null!==u){var y=v(t.glplot.cameraParams,d.dataCoordinate);e=u.data;var b,_=n._fullData[e.index],A=d.index,k={xLabel:g("x",d.traceCoordinate[0],e.xhoverformat),yLabel:g("y",d.traceCoordinate[1],e.yhoverformat),zLabel:g("z",d.traceCoordinate[2],e.zhoverformat)},E=p.castHoverinfo(_,t.fullLayout,A),T=(E||"").split("+"),M=E&&"all"===E;_.hovertemplate||M||(-1===T.indexOf("x")&&(k.xLabel=void 0),-1===T.indexOf("y")&&(k.yLabel=void 0),-1===T.indexOf("z")&&(k.zLabel=void 0),-1===T.indexOf("text")&&(d.textLabel=void 0),-1===T.indexOf("name")&&(u.name=void 0));var S=[];"cone"===e.type||"streamtube"===e.type?(k.uLabel=g("x",d.traceCoordinate[3],e.uhoverformat),(M||-1!==T.indexOf("u"))&&S.push("u: "+k.uLabel),k.vLabel=g("y",d.traceCoordinate[4],e.vhoverformat),(M||-1!==T.indexOf("v"))&&S.push("v: "+k.vLabel),k.wLabel=g("z",d.traceCoordinate[5],e.whoverformat),(M||-1!==T.indexOf("w"))&&S.push("w: "+k.wLabel),k.normLabel=d.traceCoordinate[6].toPrecision(3),(M||-1!==T.indexOf("norm"))&&S.push("norm: "+k.normLabel),"streamtube"===e.type&&(k.divergenceLabel=d.traceCoordinate[7].toPrecision(3),(M||-1!==T.indexOf("divergence"))&&S.push("divergence: "+k.divergenceLabel)),d.textLabel&&S.push(d.textLabel),b=S.join("<br>")):"isosurface"===e.type||"volume"===e.type?(k.valueLabel=h.hoverLabelText(t._mockAxis,t._mockAxis.d2l(d.traceCoordinate[3]),e.valuehoverformat),S.push("value: "+k.valueLabel),d.textLabel&&S.push(d.textLabel),b=S.join("<br>")):b=d.textLabel;var C={x:d.traceCoordinate[0],y:d.traceCoordinate[1],z:d.traceCoordinate[2],data:_._input,fullData:_,curveNumber:_.index,pointNumber:A};p.appendArrayPointValue(C,_,A),e._module.eventData&&(C=_._module.eventData(C,d,_,{},A));var O={points:[C]};if(t.fullSceneLayout.hovermode){var R=[];p.loneHover({trace:_,x:(.5+.5*y[0]/y[3])*s,y:(.5-.5*y[1]/y[3])*l,xLabel:k.xLabel,yLabel:k.yLabel,zLabel:k.zLabel,text:b,name:u.name,color:p.castHoverOption(_,A,"bgcolor")||u.color,borderColor:p.castHoverOption(_,A,"bordercolor"),fontFamily:p.castHoverOption(_,A,"font.family"),fontSize:p.castHoverOption(_,A,"font.size"),fontColor:p.castHoverOption(_,A,"font.color"),nameLength:p.castHoverOption(_,A,"namelength"),textAlign:p.castHoverOption(_,A,"align"),hovertemplate:f.castOption(_,A,"hovertemplate"),hovertemplateLabels:f.extendFlat({},C,k),eventData:[C]},{container:r,gd:n,inOut_bbox:R}),C.bbox=R[0]}d.distance<5&&(d.buttons||w)?n.emit("plotly_click",O):n.emit("plotly_hover",O),this.oldEventData=O}else p.loneUnhover(r),this.oldEventData&&n.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;t.drawAnnotations(t)},k.recoverContext=function(){var e=this;e.glplot.dispose();var t=function(){e.glplot.gl.isContextLost()?requestAnimationFrame(t):e.initializeGLPlot()?e.plot.apply(e,e.plotArgs):f.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(t)};var T=["xaxis","yaxis","zaxis"];function M(e,t,n){for(var r=e.fullSceneLayout,i=0;i<3;i++){var a=T[i],o=a.charAt(0),s=r[a],l=t[o],c=t[o+"calendar"],u=t["_"+o+"length"];if(f.isArrayOrTypedArray(l))for(var d,h=0;h<(u||l.length);h++)if(f.isArrayOrTypedArray(l[h]))for(var p=0;p<l[h].length;++p)d=s.d2l(l[h][p],0,c),!isNaN(d)&&isFinite(d)&&(n[0][i]=Math.min(n[0][i],d),n[1][i]=Math.max(n[1][i],d));else d=s.d2l(l[h],0,c),!isNaN(d)&&isFinite(d)&&(n[0][i]=Math.min(n[0][i],d),n[1][i]=Math.max(n[1][i],d));else n[0][i]=Math.min(n[0][i],0),n[1][i]=Math.max(n[1][i],u-1)}}k.plot=function(e,t,n){var r=this;if(r.plotArgs=[e,t,n],!r.glplot.contextLost){var i,a,o,s,l,c,u=t[r.id],f=n[r.id];r.fullLayout=t,r.fullSceneLayout=u,r.axesOptions.merge(t,u),r.spikeOptions.merge(u),r.setViewport(u),r.updateFx(u.dragmode,u.hovermode),r.camera.enableWheel=r.graphDiv._context._scrollZoom.gl3d,r.glplot.setClearColor(m(u.bgcolor)),r.setConvert(l),e?Array.isArray(e)||(e=[e]):e=[];var d=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(o=0;o<e.length;++o)!0===(i=e[o]).visible&&0!==i._length&&M(this,i,d);!function(e,t){for(var n=e.fullSceneLayout,r=n.annotations||[],i=0;i<3;i++)for(var a=T[i],o=a.charAt(0),s=n[a],l=0;l<r.length;l++){var c=r[l];if(c.visible){var u=s.r2l(c[o]);!isNaN(u)&&isFinite(u)&&(t[0][i]=Math.min(t[0][i],u),t[1][i]=Math.max(t[1][i],u))}}}(this,d);var h=[1,1,1];for(s=0;s<3;++s)d[1][s]===d[0][s]?h[s]=1:h[s]=1/(d[1][s]-d[0][s]);for(r.dataScale=h,r.convertAnnotations(this),o=0;o<e.length;++o)!0===(i=e[o]).visible&&0!==i._length&&((a=r.traces[i.uid])?a.data.type===i.type?a.update(i):(a.dispose(),a=i._module.plot(this,i),r.traces[i.uid]=a):(a=i._module.plot(this,i),r.traces[i.uid]=a),a.name=i.name);var p=Object.keys(r.traces);e:for(o=0;o<p.length;++o){for(s=0;s<e.length;++s)if(e[s].uid===p[o]&&!0===e[s].visible&&0!==e[s]._length)continue e;(a=r.traces[p[o]]).dispose(),delete r.traces[p[o]]}r.glplot.objects.sort((function(e,t){return e._trace.data.index-t._trace.data.index}));var g,v=[[0,0,0],[0,0,0]],y=[],b={};for(o=0;o<3;++o){var x;if((c=(l=u[T[o]]).type)in b?(b[c].acc*=h[o],b[c].count+=1):b[c]={acc:h[o],count:1},l.autorange){v[0][o]=1/0,v[1][o]=-1/0;var w=r.glplot.objects,A=r.fullSceneLayout.annotations||[],k=l._name.charAt(0);for(s=0;s<w.length;s++){var E=w[s],S=E.bounds,C=E._trace.data._pad||0;"ErrorBars"===E.constructor.name&&l._lowerLogErrorBound?v[0][o]=Math.min(v[0][o],l._lowerLogErrorBound):v[0][o]=Math.min(v[0][o],S[0][o]/h[o]-C),v[1][o]=Math.max(v[1][o],S[1][o]/h[o]+C)}for(s=0;s<A.length;s++){var O=A[s];if(O.visible){var R=l.r2l(O[k]);v[0][o]=Math.min(v[0][o],R),v[1][o]=Math.max(v[1][o],R)}}if("rangemode"in l&&"tozero"===l.rangemode&&(v[0][o]=Math.min(v[0][o],0),v[1][o]=Math.max(v[1][o],0)),v[0][o]>v[1][o])v[0][o]=-1,v[1][o]=1;else{var N=v[1][o]-v[0][o];v[0][o]-=N/32,v[1][o]+=N/32}if(x=[v[0][o],v[1][o]],x=_(x,l),v[0][o]=x[0],v[1][o]=x[1],l.isReversed()){var L=v[0][o];v[0][o]=v[1][o],v[1][o]=L}}else x=l.range,v[0][o]=l.r2l(x[0]),v[1][o]=l.r2l(x[1]);v[0][o]===v[1][o]&&(v[0][o]-=1,v[1][o]+=1),y[o]=v[1][o]-v[0][o],l.range=[v[0][o],v[1][o]],l.limitRange(),r.glplot.setBounds(o,{min:l.range[0]*h[o],max:l.range[1]*h[o]})}var D=u.aspectmode;if("cube"===D)g=[1,1,1];else if("manual"===D){var P=u.aspectratio;g=[P.x,P.y,P.z]}else{if("auto"!==D&&"data"!==D)throw new Error("scene.js aspectRatio was not one of the enumerated types");var I=[1,1,1];for(o=0;o<3;++o){var F=b[c=(l=u[T[o]]).type];I[o]=Math.pow(F.acc,1/F.count)/h[o]}g="data"===D||Math.max.apply(null,I)/Math.min.apply(null,I)<=4?I:[1,1,1]}u.aspectratio.x=f.aspectratio.x=g[0],u.aspectratio.y=f.aspectratio.y=g[1],u.aspectratio.z=f.aspectratio.z=g[2],r.glplot.setAspectratio(u.aspectratio),r.viewInitial.aspectratio||(r.viewInitial.aspectratio={x:u.aspectratio.x,y:u.aspectratio.y,z:u.aspectratio.z}),r.viewInitial.aspectmode||(r.viewInitial.aspectmode=u.aspectmode);var z=u.domain||null,j=t._size||null;if(z&&j){var B=r.container.style;B.position="absolute",B.left=j.l+z.x[0]*j.w+"px",B.top=j.t+(1-z.y[1])*j.h+"px",B.width=j.w*(z.x[1]-z.x[0])+"px",B.height=j.h*(z.y[1]-z.y[0])+"px"}r.glplot.redraw()}},k.destroy=function(){var e=this;e.glplot&&(e.camera.mouseListener.enabled=!1,e.container.removeEventListener("wheel",e.camera.wheelListener),e.camera=null,e.glplot.dispose(),e.container.parentNode.removeChild(e.container),e.glplot=null)},k.getCamera=function(){var e,t=this;return t.camera.view.recalcMatrix(t.camera.view.lastT()),{up:{x:(e=t.camera).up[0],y:e.up[1],z:e.up[2]},center:{x:e.center[0],y:e.center[1],z:e.center[2]},eye:{x:e.eye[0],y:e.eye[1],z:e.eye[2]},projection:{type:!0===e._ortho?"orthographic":"perspective"}}},k.setViewport=function(e){var t,n=this,r=e.camera;n.camera.lookAt.apply(this,[[(t=r).eye.x,t.eye.y,t.eye.z],[t.center.x,t.center.y,t.center.z],[t.up.x,t.up.y,t.up.z]]),n.glplot.setAspectratio(e.aspectratio),"orthographic"===r.projection.type!==n.camera._ortho&&(n.glplot.redraw(),n.glplot.clearRGBA(),n.glplot.dispose(),n.initializeGLPlot())},k.isCameraChanged=function(e){var t=this.getCamera(),n=f.nestedProperty(e,this.id+".camera").get();function r(e,t,n,r){var i=["up","center","eye"],a=["x","y","z"];return t[i[n]]&&e[i[n]][a[r]]===t[i[n]][a[r]]}var i=!1;if(void 0===n)i=!0;else{for(var a=0;a<3;a++)for(var o=0;o<3;o++)if(!r(t,n,a,o)){i=!0;break}(!n.projection||t.projection&&t.projection.type!==n.projection.type)&&(i=!0)}return i},k.isAspectChanged=function(e){var t=this.glplot.getAspectratio(),n=f.nestedProperty(e,this.id+".aspectratio").get();return void 0===n||n.x!==t.x||n.y!==t.y||n.z!==t.z},k.saveLayout=function(e){var t,n,r,i,a,o,s=this,l=s.fullLayout,c=s.isCameraChanged(e),d=s.isAspectChanged(e),h=c||d;if(h){var p={};if(c&&(t=s.getCamera(),r=(n=f.nestedProperty(e,s.id+".camera")).get(),p[s.id+".camera"]=r),d&&(i=s.glplot.getAspectratio(),o=(a=f.nestedProperty(e,s.id+".aspectratio")).get(),p[s.id+".aspectratio"]=o),u.call("_storeDirectGUIEdit",e,l._preGUI,p),c)n.set(t),f.nestedProperty(l,s.id+".camera").set(t);if(d)a.set(i),f.nestedProperty(l,s.id+".aspectratio").set(i),s.glplot.redraw()}return h},k.updateFx=function(e,t){var n=this,r=n.camera;if(r)if("orbit"===e)r.mode="orbit",r.keyBindingMode="rotate";else if("turntable"===e){r.up=[0,0,1],r.mode="turntable",r.keyBindingMode="rotate";var i=n.graphDiv,a=i._fullLayout,o=n.fullSceneLayout.camera,s=o.up.x,l=o.up.y,c=o.up.z;if(c/Math.sqrt(s*s+l*l+c*c)<.999){var d=n.id+".camera.up",h={x:0,y:0,z:1},p={};p[d]=h;var m=i.layout;u.call("_storeDirectGUIEdit",m,a._preGUI,p),o.up=h,f.nestedProperty(m,d).set(h)}}else r.keyBindingMode=e;n.fullSceneLayout.hovermode=t},k.toImage=function(e){var t=this;e||(e="png"),t.staticMode&&t.container.appendChild(r),t.glplot.redraw();var n=t.glplot.gl,i=n.drawingBufferWidth,a=n.drawingBufferHeight;n.bindFramebuffer(n.FRAMEBUFFER,null);var o=new Uint8Array(i*a*4);n.readPixels(0,0,i,a,n.RGBA,n.UNSIGNED_BYTE,o),function(e,t,n){for(var r=0,i=n-1;r<i;++r,--i)for(var a=0;a<t;++a)for(var o=0;o<4;++o){var s=4*(t*r+a)+o,l=4*(t*i+a)+o,c=e[s];e[s]=e[l],e[l]=c}}(o,i,a),function(e,t,n){for(var r=0;r<n;++r)for(var i=0;i<t;++i){var a=4*(t*r+i),o=e[a+3];if(o>0)for(var s=255/o,l=0;l<3;++l)e[a+l]=Math.min(s*e[a+l],255)}}(o,i,a);var s=document.createElement("canvas");s.width=i,s.height=a;var l,c=s.getContext("2d",{willReadFrequently:!0}),u=c.createImageData(i,a);switch(u.data.set(o),c.putImageData(u,0,0),e){case"jpeg":l=s.toDataURL("image/jpeg");break;case"webp":l=s.toDataURL("image/webp");break;default:l=s.toDataURL("image/png")}return t.staticMode&&t.container.removeChild(r),l},k.setConvert=function(){for(var e=0;e<3;e++){var t=this.fullSceneLayout[T[e]];h.setConvert(t,this.fullLayout),t.setScale=f.noop}},k.make4thDimension=function(){var e=this,t=e.graphDiv._fullLayout;e._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},h.setConvert(e._mockAxis,t)},e.exports=A},39626:(e,t,n)=>{"use strict";var r=n(95323),i=n(19680),a=n(37811),o=n(3603),s=n(62817),l=n(26909),c=n(86395).extendFlat,u=r({editType:"calc",description:["Sets the global font.","Note that fonts used in traces and other","layout components inherit from the global font."].join(" ")});u.family.dflt='"Open Sans", verdana, arial, sans-serif',u.size.dflt=12,u.color.dflt=a.defaultLine,e.exports={font:u,title:{text:{valType:"string",editType:"layoutstyle",description:["Sets the plot's title.","Note that before the existence of `title.text`, the title's","contents used to be defined as the `title` attribute itself.","This behavior has been deprecated."].join(" ")},font:r({editType:"layoutstyle",description:["Sets the title font.","Note that the title's font used to be customized","by the now deprecated `titlefont` attribute."].join(" ")}),subtitle:{text:{valType:"string",editType:"layoutstyle",description:"Sets the plot's subtitle."},font:r({editType:"layoutstyle",description:"Sets the subtitle font."}),editType:"layoutstyle"},xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `x` refers to.","*container* spans the entire `width` of the plot.","*paper* refers to the width of the plotting area only."].join(" ")},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `y` refers to.","*container* spans the entire `height` of the plot.","*paper* refers to the height of the plotting area only."].join(" ")},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle",description:["Sets the x position with respect to `xref` in normalized","coordinates from *0* (left) to *1* (right)."].join(" ")},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle",description:["Sets the y position with respect to `yref` in normalized","coordinates from *0* (bottom) to *1* (top).","*auto* places the baseline of the title onto the","vertical center of the top margin."].join(" ")},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle",description:["Sets the title's horizontal alignment with respect to its x position.","*left* means that the title starts at x,","*right* means that the title ends at x","and *center* means that the title's center is at x.","*auto* divides `xref` by three and calculates the `xanchor`","value automatically based on the value of `x`."].join(" ")},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle",description:["Sets the title's vertical alignment with respect to its y position.","*top* means that the title's cap line is at y,","*bottom* means that the title's baseline is at y","and *middle* means that the title's midline is at y.","*auto* divides `yref` by three and calculates the `yanchor`","value automatically based on the value of `y`."].join(" ")},pad:c(l({editType:"layoutstyle"}),{description:["Sets the padding of the title.","Each padding value only applies when the corresponding","`xanchor`/`yanchor` value is set accordingly. E.g. for left","padding to take effect, `xanchor` must be set to *left*.","The same rule applies if `xanchor`/`yanchor` is determined automatically.","Padding is muted if the respective anchor value is *middle*/*center*."].join(" ")}),automargin:{valType:"boolean",dflt:!1,editType:"plot",description:["Determines whether the title can automatically push the figure margins.","If `yref='paper'` then the margin will expand to ensure that the title doesnt","overlap with the edges of the container. If `yref='container'` then the margins","will ensure that the title doesnt overlap with the plot area, tick labels,","and axis titles. If `automargin=true` and the margins need to be expanded,","then y will be set to a default 1 and yanchor will be set to an appropriate","default to ensure that minimal margin space is needed. Note that when `yref='paper'`,","only 1 or 0 are allowed y values. Invalid values will be reset to the default 1."].join(" ")},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot",description:["Determines how the font size for various text","elements are uniformed between each trace type.","If the computed text sizes were smaller than","the minimum size defined by `uniformtext.minsize`","using *hide* option hides the text; and","using *show* option shows the text without further downscaling.","Please note that if the size defined by `minsize` is greater than","the font size defined by trace, then the `minsize` is used."].join(" ")},minsize:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets the minimum text size between traces of the same type."].join(" ")},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none",description:["Determines whether or not a layout width or height","that has been left undefined by the user","is initialized on each relayout.","Note that, regardless of this attribute,","an undefined layout width or height","is always initialized on the first call to plot."].join(" ")},width:{valType:"number",min:10,dflt:700,editType:"plot",description:["Sets the plot's width (in px)."].join(" ")},height:{valType:"number",min:10,dflt:450,editType:"plot",description:["Sets the plot's height (in px)."].join(" ")},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot",description:"Minimum width of the plot with margin.automargin applied (in px)"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot",description:"Minimum height of the plot with margin.automargin applied (in px)"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot",description:"Sets the left margin (in px)."},r:{valType:"number",min:0,dflt:80,editType:"plot",description:"Sets the right margin (in px)."},t:{valType:"number",min:0,dflt:100,editType:"plot",description:"Sets the top margin (in px)."},b:{valType:"number",min:0,dflt:80,editType:"plot",description:"Sets the bottom margin (in px)."},pad:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets the amount of padding (in px)","between the plotting area and the axis lines"].join(" ")},autoexpand:{valType:"boolean",dflt:!0,editType:"plot",description:["Turns on/off margin expansion computations.","Legends, colorbars, updatemenus, sliders, axis rangeselector and rangeslider","are allowed to push the margins by defaults."].join(" ")},editType:"plot"},computed:{valType:"any",editType:"none",description:["Placeholder for exporting automargin-impacting values namely","`margin.t`, `margin.b`, `margin.l` and `margin.r` in *full-json* mode."].join(" ")},paper_bgcolor:{valType:"color",dflt:a.background,editType:"plot",description:"Sets the background color of the paper where the graph is drawn."},plot_bgcolor:{valType:"color",dflt:a.background,editType:"layoutstyle",description:["Sets the background color of the plotting area in-between x and y axes."].join(" ")},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc",description:["Using *strict* a numeric string in trace data is not converted to a number.","Using *convert types* a numeric string in trace data may be","treated as a number during automatic axis `type` detection.","This is the default value; however it could be overridden for individual axes."].join(" ")},separators:{valType:"string",editType:"plot",description:["Sets the decimal and thousand separators.","For example, *. * puts a '.' before decimals and a space","between thousands. In English locales, dflt is *.,* but","other locales may alter this default."].join(" ")},hidesources:{valType:"boolean",dflt:!1,editType:"plot",description:["Determines whether or not a text link citing the data source is","placed at the bottom-right cored of the figure.","Has only an effect only on graphs that have been generated via","forked graphs from the Chart Studio Cloud (at https://chart-studio.plotly.com or on-premise)."].join(" ")},showlegend:{valType:"boolean",editType:"legend",description:["Determines whether or not a legend is drawn.","Default is `true` if there is a trace to show and any of these:","a) Two or more traces would by default be shown in the legend.","b) One pie trace is shown in the legend.","c) One trace is explicitly given with `showlegend: true`."].join(" ")},colorway:{valType:"colorlist",dflt:a.defaults,editType:"calc",description:"Sets the default trace colors."},datarevision:{valType:"any",editType:"calc",description:["If provided, a changed value tells `Plotly.react` that","one or more data arrays has changed. This way you can modify","arrays in-place rather than making a complete new copy for an","incremental change.","If NOT provided, `Plotly.react` assumes that data arrays are","being treated as immutable, thus any data array with a","different identity from its predecessor contains new data."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Used to allow user interactions with the plot to persist after","`Plotly.react` calls that are unaware of these interactions.","If `uirevision` is omitted, or if it is given and it changed from","the previous `Plotly.react` call, the exact new figure is used.","If `uirevision` is truthy and did NOT change, any attribute","that has been affected by user interactions and did not receive a","different value in the new figure will keep the interaction value.","`layout.uirevision` attribute serves as the default for","`uirevision` attributes in various sub-containers. For finer","control you can set these sub-attributes directly. For example,","if your app separately controls the data on the x and y axes you","might set `xaxis.uirevision=*time*` and `yaxis.uirevision=*cost*`.","Then if only the y data is changed, you can update","`yaxis.uirevision=*quantity*` and the y axis range will reset but","the x axis range will retain any user-driven zoom."].join(" ")},editrevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in `editable: true`","configuration, other than trace names and axis titles.","Defaults to `layout.uirevision`."].join(" ")},selectionrevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in selected points","from all traces."].join(" ")},template:{valType:"any",editType:"calc",description:["Default attributes to be applied to the plot. Templates can be","created from existing plots using `Plotly.makeTemplate`, or","created manually. They should be objects with format:","`{layout: layoutTemplate, data: {[type]: [traceTemplate, ...]}, ...}`","`layoutTemplate` and `traceTemplate` are objects matching the","attribute structure of `layout` and a data trace. ","Trace templates are applied cyclically to traces of each type.","Container arrays (eg `annotations`) have special handling:","An object ending in `defaults` (eg `annotationdefaults`) is applied","to each array item. But if an item has a `templateitemname` key","we look in the template array for an item with matching `name` and","apply that instead. If no matching `name` is found we mark the item","invisible. Any named template item not referenced is appended to","the end of the array, so you can use this for a watermark annotation","or a logo image, for example. To omit one of these items on the plot,","make an item with matching `templateitemname` and `visible: false`."].join(" ")},newshape:o.newshape,activeshape:o.activeshape,newselection:s.newselection,activeselection:s.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot",description:["Assigns extra meta information that can be used in various `text` attributes.","Attributes such as the graph, axis and colorbar `title.text`, annotation `text`","`trace.name` in legend items, `rangeselector`, `updatemenus` and `sliders` `label` text","all support `meta`. One can access `meta` fields using template strings:","`%{meta[i]}` where `i` is the index of the `meta`","item in question.","`meta` can also be an object for example `{key: value}` which can be accessed","%{meta[key]}."].join(" ")},transition:c({},i.transition,{description:["Sets transition options used during Plotly.react updates."].join(" "),editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle",description:["Value of `title` is no longer a simple *string* but a set of sub-attributes.","To set the contents of the title, please use `title.text` now."].join(" ")},titlefont:r({editType:"layoutstyle",description:["Former `titlefont` is now the sub-attribute `font` of `title`.","To customize title font properties, please use `title.font` now."].join(" ")})}}},26909:e=>{"use strict";e.exports=function(e){var t=e.editType;return{t:{valType:"number",dflt:0,editType:t,description:"The amount of padding (in px) along the top of the component."},r:{valType:"number",dflt:0,editType:t,description:"The amount of padding (in px) on the right side of the component."},b:{valType:"number",dflt:0,editType:t,description:"The amount of padding (in px) along the bottom of the component."},l:{valType:"number",dflt:0,editType:t,description:"The amount of padding (in px) on the left side of the component."},editType:t}}},31496:(e,t,n)=>{"use strict";var r=n(93268),i=n(39754).de,a=n(43078).OE,o=n(5605),s=n(24433),l=n(3360),c=n(72683),u=n(65210),f=n(56319),d=n(53408),h=n(33351).BADNUM,p=n(33489),m=n(10556).clearOutline,g=n(91493),v=n(19680),y=n(88281),b=n(38895).eV,x=f.relinkPrivateKeys,_=f._,w=e.exports={};f.extendFlat(w,l),w.attributes=n(85507),w.attributes.type.values=w.allTypes,w.fontAttrs=n(95323),w.layoutAttributes=n(39626);var A=w.transformsRegistry,k=n(33077);w.executeAPICommand=k.executeAPICommand,w.computeAPICommandBindings=k.computeAPICommandBindings,w.manageCommandObserver=k.manageCommandObserver,w.hasSimpleAPICommandBindings=k.hasSimpleAPICommandBindings,w.redrawText=function(e){return e=f.getGraphDiv(e),new Promise((function(t){setTimeout((function(){e._fullLayout&&(l.getComponentMethod("annotations","draw")(e),l.getComponentMethod("legend","draw")(e),l.getComponentMethod("colorbar","draw")(e),t(w.previousPromises(e)))}),300)}))},w.resize=function(e){var t;e=f.getGraphDiv(e);var n=new Promise((function(n,r){e&&!f.isHidden(e)||r(new Error("Resize must be passed a displayed plot div element.")),e._redrawTimer&&clearTimeout(e._redrawTimer),e._resolveResize&&(t=e._resolveResize),e._resolveResize=n,e._redrawTimer=setTimeout((function(){if(!e.layout||e.layout.width&&e.layout.height||f.isHidden(e))n(e);else{delete e.layout.width,delete e.layout.height;var t=e.changed;e.autoplay=!0,l.call("relayout",e,{autosize:!0}).then((function(){e.changed=t,e._resolveResize===n&&(delete e._resolveResize,n(e))}))}}),100)}));return t&&t(n),n},w.previousPromises=function(e){if((e._promises||[]).length)return Promise.all(e._promises).then((function(){e._promises=[]}))},w.addLinks=function(e){if(e._context.showLink||e._context.showSources){var t=e._fullLayout,n=f.ensureSingle(t._paper,"text","js-plot-link-container",(function(e){e.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:d.defaultLine,"pointer-events":"all"}).each((function(){var e=r.select(this);e.append("tspan").classed("js-link-to-tool",!0),e.append("tspan").classed("js-link-spacer",!0),e.append("tspan").classed("js-sourcelinks",!0)}))})),i=n.node(),a={y:t._paper.attr("height")-9};document.body.contains(i)&&i.getComputedTextLength()>=t.width-20?(a["text-anchor"]="start",a.x=5):(a["text-anchor"]="end",a.x=t._paper.attr("width")-7),n.attr(a);var o=n.select(".js-link-to-tool"),s=n.select(".js-link-spacer"),l=n.select(".js-sourcelinks");e._context.showSources&&e._context.showSources(e),e._context.showLink&&function(e,t){t.text("");var n=t.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" "+String.fromCharCode(187));if(e._context.sendData)n.on("click",(function(){w.sendDataToCloud(e)}));else{var r=window.location.pathname.split("/"),i=window.location.search;n.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+r[2].split(".")[0]+"/"+r[1]+i})}}(e,o),s.text(o.text()&&l.text()?" - ":"")}},w.sendDataToCloud=function(e){var t=(window.PLOTLYENV||{}).BASE_URL||e._context.plotlyServerURL;if(t){e.emit("plotly_beforeexport");var n=r.select(e).append("div").attr("id","hiddenform").style("display","none"),i=n.append("form").attr({action:t+"/external",method:"post",target:"_blank"});return i.append("input").attr({type:"text",name:"data"}).node().value=w.graphJson(e,!1,"keepdata"),i.node().submit(),n.remove(),e.emit("plotly_afterexport"),!1}};var E=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],T=["year","month","dayMonth","dayMonthYear"];function M(e,t){var n=e._context.locale;n||(n="en-US");var r=!1,i={};function a(e){for(var n=!0,a=0;a<t.length;a++){var o=t[a];i[o]||(e[o]?i[o]=e[o]:n=!1)}n&&(r=!0)}for(var o=0;o<2;o++){for(var s=e._context.locales,c=0;c<2;c++){var u=(s[n]||{}).format;if(u&&(a(u),r))break;s=l.localeRegistry}var f=n.split("-")[0];if(r||f===n)break;n=f}return r||a(l.localeRegistry.en.format),i}function S(e,t){var n={_fullLayout:t},r="x"===e._id.charAt(0),i=e._mainAxis._anchorAxis,a="",o="",s="";if(i&&(s=i._mainAxis._id,a=r?e._id+s:s+e._id),!a||!t._plots[a]){a="";for(var l=e._counterAxes,c=0;c<l.length;c++){var u=l[c],f=r?e._id+u:u+e._id;o||(o=f);var d=p.getFromId(n,u);if(s&&d.overlaying===s){a=f;break}}}return a||o}function C(e){var t=e.transforms;if(Array.isArray(t)&&t.length)for(var n=0;n<t.length;n++){var r=t[n],i=r._module||A[r.type];if(i&&i.makesData)return!0}return!1}function O(e,t,n,r){for(var i=e.transforms,a=[e],o=0;o<i.length;o++){var s=i[o],l=A[s.type];l&&l.transform&&(a=l.transform(a,{transform:s,fullTrace:e,fullData:t,layout:n,fullLayout:r,transformIndex:o}))}return a}function R(e){return"string"==typeof e&&"px"===e.substr(e.length-2)&&parseFloat(e)}function N(e){var t=e.margin;if(!e._size){var n=e._size={l:Math.round(t.l),r:Math.round(t.r),t:Math.round(t.t),b:Math.round(t.b),p:Math.round(t.pad)};n.w=Math.round(e.width)-n.l-n.r,n.h=Math.round(e.height)-n.t-n.b}e._pushmargin||(e._pushmargin={}),e._pushmarginIds||(e._pushmarginIds={}),e._reservedMargin||(e._reservedMargin={})}w.supplyDefaults=function(e,t){var n=t&&t.skipUpdateCalc,r=e._fullLayout||{};if(r._skipDefaults)delete r._skipDefaults;else{var o,s=e._fullLayout={},c=e.layout||{},u=e._fullData||[],d=e._fullData=[],h=e.data||[],p=e.calcdata||[],g=e._context||{};e._transitionData||w.createTransitionData(e),s._dfltTitle={plot:_(e,"Click to enter Plot title"),subtitle:_(e,"Click to enter Plot subtitle"),x:_(e,"Click to enter X axis title"),y:_(e,"Click to enter Y axis title"),colorbar:_(e,"Click to enter Colorscale title"),annotation:_(e,"new text")},s._traceWord=_(e,"trace");var v=M(e,E);if(s._mapboxAccessToken=g.mapboxAccessToken,r._initialAutoSizeIsDone){var y=r.width,b=r.height;w.supplyLayoutGlobalDefaults(c,s,v),c.width||(s.width=y),c.height||(s.height=b),w.sanitizeMargins(s)}else{w.supplyLayoutGlobalDefaults(c,s,v);var A=!c.width||!c.height,k=s.autosize,S=g.autosizable;A&&(k||S)?w.plotAutoSize(e,c,s):A&&w.sanitizeMargins(s),!k&&A&&(c.width=s.width,c.height=s.height)}s._d3locale=function(e,t){return e.decimal=t.charAt(0),e.thousands=t.charAt(1),{numberFormat:function(t){try{t=a(e).format(f.adjustFormat(t))}catch(e){return f.warnBadFormat(t),f.noFormat}return t},timeFormat:i(e).utcFormat}}(v,s.separators),s._extraFormat=M(e,T),s._initialAutoSizeIsDone=!0,s._dataLength=h.length,s._modules=[],s._visibleModules=[],s._basePlotModules=[];var C=s._subplots=function(){var e,t,n=l.collectableSubplotTypes,r={};if(!n){n=[];var i=l.subplotsRegistry;for(var a in i){var o=i[a].attr;if(o&&(n.push(a),Array.isArray(o)))for(t=0;t<o.length;t++)f.pushUnique(n,o[t])}}for(e=0;e<n.length;e++)r[n[e]]=[];return r}(),O=s._splomAxes={x:{},y:{}},R=s._splomSubplots={};s._splomGridDflt={},s._scatterStackOpts={},s._firstScatter={},s._alignmentOpts={},s._colorAxes={},s._requestRangeslider={},s._traceUids=function(e,t){var n,r,i=t.length,a=[];for(n=0;n<e.length;n++){var o=e[n]._fullInput;o!==r&&a.push(o),r=o}var s=a.length,l=new Array(i),c={};function u(e,t){l[t]=e,c[e]=1}function d(e,t){if(e&&"string"==typeof e&&!c[e])return u(e,t),!0}for(n=0;n<i;n++){var h=t[n].uid;"number"==typeof h&&(h=String(h)),d(h,n)||(n<s&&d(a[n].uid,n)||u(f.randstr(c),n))}return l}(u,h),s._globalTransforms=(e._context||{}).globalTransforms,w.supplyDataDefaults(h,d,c,s);var L=Object.keys(O.x),D=Object.keys(O.y);if(L.length>1&&D.length>1){for(l.getComponentMethod("grid","sizeDefaults")(c,s),o=0;o<L.length;o++)f.pushUnique(C.xaxis,L[o]);for(o=0;o<D.length;o++)f.pushUnique(C.yaxis,D[o]);for(var P in R)f.pushUnique(C.cartesian,P)}if(s._has=w._hasPlotType.bind(s),u.length===d.length)for(o=0;o<d.length;o++)x(d[o],u[o]);w.supplyLayoutModuleDefaults(c,s,d,e._transitionData);var I=s._visibleModules,F=[];for(o=0;o<I.length;o++){var z=I[o].crossTraceDefaults;z&&f.pushUnique(F,z)}for(o=0;o<F.length;o++)F[o](d,s);s._hasOnlyLargeSploms=1===s._basePlotModules.length&&"splom"===s._basePlotModules[0].name&&L.length>15&&D.length>15&&0===s.shapes.length&&0===s.images.length,w.linkSubplots(d,s,u,r),w.cleanPlot(d,s,u,r);var j=!(!r._has||!r._has("gl2d")),B=!(!s._has||!s._has("gl2d")),U=!(!r._has||!r._has("cartesian"))||j,$=!(!s._has||!s._has("cartesian"))||B;U&&!$?r._bgLayer.remove():$&&!U&&(s._shouldCreateBgLayer=!0),r._zoomlayer&&!e._dragging&&m({_fullLayout:r}),function(e,t){var n,r=[];t.meta&&(n=t._meta={meta:t.meta,layout:{meta:t.meta}});for(var i=0;i<e.length;i++){var a=e[i];a.meta?r[a.index]=a._meta={meta:a.meta}:t.meta&&(a._meta={meta:t.meta}),t.meta&&(a._meta.layout={meta:t.meta})}r.length&&(n||(n=t._meta={}),n.data=r)}(d,s),x(s,r),l.getComponentMethod("colorscale","crossTraceDefaults")(d,s),s._preGUI||(s._preGUI={}),s._tracePreGUI||(s._tracePreGUI={});var q,H=s._tracePreGUI,V={};for(q in H)V[q]="old";for(o=0;o<d.length;o++)V[q=d[o]._fullInput.uid]||(H[q]={}),V[q]="new";for(q in V)"old"===V[q]&&delete H[q];N(s),l.getComponentMethod("rangeslider","makeData")(s),n||p.length!==d.length||w.supplyDefaultsUpdateCalc(p,d)}},w.supplyDefaultsUpdateCalc=function(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=(e[n]||[])[0];if(i&&i.trace){var a=i.trace;if(a._hasCalcTransform){var o,s,l,c=a._arrayAttrs;for(o=0;o<c.length;o++)s=c[o],l=f.nestedProperty(a,s).get().slice(),f.nestedProperty(r,s).set(l)}i.trace=r}}},w.createTransitionData=function(e){e._transitionData||(e._transitionData={}),e._transitionData._frames||(e._transitionData._frames=[]),e._transitionData._frameHash||(e._transitionData._frameHash={}),e._transitionData._counter||(e._transitionData._counter=0),e._transitionData._interruptCallbacks||(e._transitionData._interruptCallbacks=[])},w._hasPlotType=function(e){var t,n=this._basePlotModules||[];for(t=0;t<n.length;t++)if(n[t].name===e)return!0;var r=this._modules||[];for(t=0;t<r.length;t++){var i=r[t].name;if(i===e)return!0;var a=l.modules[i];if(a&&a.categories[e])return!0}return!1},w.cleanPlot=function(e,t,n,r){var i,a,o=r._basePlotModules||[];for(i=0;i<o.length;i++){var s=o[i];s.clean&&s.clean(e,t,n,r)}var l=r._has&&r._has("gl"),c=t._has&&t._has("gl");l&&!c&&void 0!==r._glcontainer&&(r._glcontainer.selectAll(".gl-canvas").remove(),r._glcontainer.selectAll(".no-webgl").remove(),r._glcanvas=null);var u=!!r._infolayer;e:for(i=0;i<n.length;i++){var f=n[i].uid;for(a=0;a<e.length;a++){if(f===e[a].uid)continue e}u&&r._infolayer.select(".cb"+f).remove()}},w.linkSubplots=function(e,t,n,r){var i,a,o=r._plots||{},s=t._plots={},c=t._subplots,u={_fullData:e,_fullLayout:t},d=c.cartesian.concat(c.gl2d||[]);for(i=0;i<d.length;i++){var h,m=d[i],g=o[m],v=p.getFromId(u,m,"x"),y=p.getFromId(u,m,"y");for(g?h=s[m]=g:(h=s[m]={}).id=m,v._counterAxes.push(y._id),y._counterAxes.push(v._id),v._subplotsWith.push(m),y._subplotsWith.push(m),h.xaxis=v,h.yaxis=y,h._hasClipOnAxisFalse=!1,a=0;a<e.length;a++){var b=e[a];if(b.xaxis===h.xaxis._id&&b.yaxis===h.yaxis._id&&!1===b.cliponaxis){h._hasClipOnAxisFalse=!0;break}}}var x,_=p.list(u,null,!0);for(i=0;i<_.length;i++){var w=null;(x=_[i]).overlaying&&(w=p.getFromId(u,x.overlaying))&&w.overlaying&&(x.overlaying=!1,w=null),x._mainAxis=w||x,w&&(x.domain=w.domain.slice()),x._anchorAxis="free"===x.anchor?null:p.getFromId(u,x.anchor)}for(i=0;i<_.length;i++)if((x=_[i])._counterAxes.sort(p.idSort),x._subplotsWith.sort(f.subplotSort),x._mainSubplot=S(x,t),x._counterAxes.length&&(x.spikemode&&-1!==x.spikemode.indexOf("across")||x.automargin&&x.mirror&&"free"!==x.anchor||l.getComponentMethod("rangeslider","isVisible")(x))){var A=1,k=0;for(a=0;a<x._counterAxes.length;a++){var E=p.getFromId(u,x._counterAxes[a]);A=Math.min(A,E.domain[0]),k=Math.max(k,E.domain[1])}A<k&&(x._counterDomainMin=A,x._counterDomainMax=k)}},w.clearExpandedTraceDefaultColors=function(e){var t,n,r;for(n=[],(t=e._module._colorAttrs)||(e._module._colorAttrs=t=[],c.crawl(e._module.attributes,(function(e,r,i,a){n[a]=r,n.length=a+1,"color"===e.valType&&void 0===e.dflt&&t.push(n.join("."))}))),r=0;r<t.length;r++){f.nestedProperty(e,"_input."+t[r]).get()||f.nestedProperty(e,t[r]).set(null)}},w.supplyDataDefaults=function(e,t,n,r){var i,a,o,s=r._modules,c=r._visibleModules,d=r._basePlotModules,h=0,p=0;function m(e){t.push(e);var n=e._module;n&&(f.pushUnique(s,n),!0===e.visible&&f.pushUnique(c,n),f.pushUnique(d,e._module.basePlotModule),h++,!1!==e._input.visible&&p++)}r._transformModules=[];var g={},v=[],y=(n.template||{}).data||{},b=u.traceTemplater(y);for(i=0;i<e.length;i++){if(o=e[i],(a=b.newTrace(o)).uid=r._traceUids[i],w.supplyTraceDefaults(o,a,p,r,i),a.index=i,a._input=o,a._expandedIndex=h,a.transforms&&a.transforms.length)for(var _=!1!==o.visible&&!1===a.visible,A=O(a,t,n,r),k=0;k<A.length;k++){var E=A[k],T={_template:a._template,type:a.type,uid:a.uid+k};_&&!1===E.visible&&delete E.visible,w.supplyTraceDefaults(E,T,h,r,i),x(T,E),T.index=i,T._input=o,T._fullInput=a,T._expandedIndex=h,T._expandedInput=E,m(T)}else a._fullInput=a,a._expandedInput=a,m(a);l.traceIs(a,"carpetAxis")&&(g[a.carpet]=a),l.traceIs(a,"carpetDependent")&&v.push(i)}for(i=0;i<v.length;i++)if((a=t[v[i]]).visible){var M=g[a.carpet];a._carpet=M,M&&M.visible?(a.xaxis=M.xaxis,a.yaxis=M.yaxis):a.visible=!1}},w.supplyAnimationDefaults=function(e){var t;e=e||{};var n={};function r(t,r){return f.coerce(e||{},n,v,t,r)}if(r("mode"),r("direction"),r("fromcurrent"),Array.isArray(e.frame))for(n.frame=[],t=0;t<e.frame.length;t++)n.frame[t]=w.supplyAnimationFrameDefaults(e.frame[t]||{});else n.frame=w.supplyAnimationFrameDefaults(e.frame||{});if(Array.isArray(e.transition))for(n.transition=[],t=0;t<e.transition.length;t++)n.transition[t]=w.supplyAnimationTransitionDefaults(e.transition[t]||{});else n.transition=w.supplyAnimationTransitionDefaults(e.transition||{});return n},w.supplyAnimationFrameDefaults=function(e){var t={};function n(n,r){return f.coerce(e||{},t,v.frame,n,r)}return n("duration"),n("redraw"),t},w.supplyAnimationTransitionDefaults=function(e){var t={};function n(n,r){return f.coerce(e||{},t,v.transition,n,r)}return n("duration"),n("easing"),t},w.supplyFrameDefaults=function(e){var t={};function n(n,r){return f.coerce(e,t,y,n,r)}return n("group"),n("name"),n("traces"),n("baseframe"),n("data"),n("layout"),t},w.supplyTraceDefaults=function(e,t,n,r,i){var a,o=r.colorway||d.defaults,s=o[n%o.length];function c(n,r){return f.coerce(e,t,w.attributes,n,r)}var u=c("visible");c("type"),c("name",r._traceWord+" "+i),c("uirevision",r.uirevision);var h=w.getModule(t);if(t._module=h,h){var p=h.basePlotModule,m=p.attr,g=p.attributes;if(m&&g){var v=r._subplots,y="";if(u||"gl2d"!==p.name){if(Array.isArray(m))for(a=0;a<m.length;a++){var b=m[a],x=f.coerce(e,t,g,b);v[b]&&f.pushUnique(v[b],x),y+=x}else y=f.coerce(e,t,g,m);v[p.name]&&f.pushUnique(v[p.name],y)}}}if(u){if(c("customdata"),c("ids"),c("meta"),l.traceIs(t,"showLegend")?(f.coerce(e,t,h.attributes.showlegend?h.attributes:w.attributes,"showlegend"),c("legend"),c("legendwidth"),c("legendgroup"),c("legendgrouptitle.text"),c("legendrank"),t._dfltShowLegend=!0):t._dfltShowLegend=!1,h&&h.supplyDefaults(e,t,s,r),l.traceIs(t,"noOpacity")||c("opacity"),l.traceIs(t,"notLegendIsolatable")&&(t.visible=!!t.visible),l.traceIs(t,"noHover")||(t.hovertemplate||f.coerceHoverinfo(e,t,r),"parcats"!==t.type&&l.getComponentMethod("fx","supplyDefaults")(e,t,s,r)),h&&h.selectPoints){var _=c("selectedpoints");f.isTypedArray(_)&&(t.selectedpoints=Array.from(_))}w.supplyTransformDefaults(e,t,r)}return t},w.hasMakesDataTransform=C,w.supplyTransformDefaults=function(e,t,n){if(t._length||C(e)){var r=n._globalTransforms||[],i=n._transformModules||[];if(Array.isArray(e.transforms)||0!==r.length)for(var a=e.transforms||[],o=r.concat(a),s=t.transforms=[],l=0;l<o.length;l++){var c,u=o[l],d=u.type,h=A[d],p=!(u._module&&u._module===h),m=h&&"function"==typeof h.transform;h||f.warn("Unrecognized transform type "+d+"."),h&&h.supplyDefaults&&(p||m)?((c=h.supplyDefaults(u,t,n,e)).type=d,c._module=h,f.pushUnique(i,h)):c=f.extendFlat({},u),s.push(c)}}},w.supplyLayoutGlobalDefaults=function(e,t,n){function r(n,r){return f.coerce(e,t,w.layoutAttributes,n,r)}var i=e.template;f.isPlainObject(i)&&(t.template=i,t._template=i.layout,t._dataTemplate=i.data),r("autotypenumbers");var a=f.coerceFont(r,"font"),o=a.size;f.coerceFont(r,"title.font",a,{overrideDflt:{size:Math.round(1.4*o)}}),r("title.text",t._dfltTitle.plot),r("title.xref");var s=r("title.yref");r("title.pad.t"),r("title.pad.r"),r("title.pad.b"),r("title.pad.l");var c=r("title.automargin");r("title.x"),r("title.xanchor"),r("title.y"),r("title.yanchor"),r("title.subtitle.text",t._dfltTitle.subtitle),f.coerceFont(r,"title.subtitle.font",a,{overrideDflt:{size:Math.round(.7*t.title.font.size)}}),c&&("paper"===s&&(0!==t.title.y&&(t.title.y=1),"auto"===t.title.yanchor&&(t.title.yanchor=0===t.title.y?"top":"bottom")),"container"===s&&("auto"===t.title.y&&(t.title.y=1),"auto"===t.title.yanchor&&(t.title.yanchor=t.title.y<.5?"bottom":"top"))),r("uniformtext.mode")&&r("uniformtext.minsize"),r("autosize",!(e.width&&e.height)),r("width"),r("height"),r("minreducedwidth"),r("minreducedheight"),r("margin.l"),r("margin.r"),r("margin.t"),r("margin.b"),r("margin.pad"),r("margin.autoexpand"),e.width&&e.height&&w.sanitizeMargins(t),l.getComponentMethod("grid","sizeDefaults")(e,t),r("paper_bgcolor"),r("separators",n.decimal+n.thousands),r("hidesources"),r("colorway"),r("datarevision");var u=r("uirevision");r("editrevision",u),r("selectionrevision",u),l.getComponentMethod("modebar","supplyLayoutDefaults")(e,t),l.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(e,t,r),l.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(e,t,r),r("meta"),f.isPlainObject(e.transition)&&(r("transition.duration"),r("transition.easing"),r("transition.ordering")),l.getComponentMethod("calendars","handleDefaults")(e,t,"calendar"),l.getComponentMethod("fx","supplyLayoutGlobalDefaults")(e,t,r),f.coerce(e,t,g,"scattermode")},w.plotAutoSize=function(e,t,n){var r,i,a=e._context||{},s=a.frameMargins,l=f.isPlotDiv(e);if(l&&e.emit("plotly_autosize"),a.fillFrame)r=window.innerWidth,i=window.innerHeight,document.body.style.overflow="hidden";else{var c=l?window.getComputedStyle(e):{};if(r=R(c.width)||R(c.maxWidth)||n.width,i=R(c.height)||R(c.maxHeight)||n.height,o(s)&&s>0){var u=1-2*s;r=Math.round(u*r),i=Math.round(u*i)}}var d=w.layoutAttributes.width.min,h=w.layoutAttributes.height.min;r<d&&(r=d),i<h&&(i=h);var p=!t.width&&Math.abs(n.width-r)>1,m=!t.height&&Math.abs(n.height-i)>1;(m||p)&&(p&&(n.width=r),m&&(n.height=i)),e._initialAutoSize||(e._initialAutoSize={width:r,height:i}),w.sanitizeMargins(n)},w.supplyLayoutModuleDefaults=function(e,t,n,r){var i,a,o,s=l.componentsRegistry,c=t._basePlotModules,u=l.subplotsRegistry.cartesian;for(i in s)(o=s[i]).includeBasePlot&&o.includeBasePlot(e,t);for(var d in c.length||c.push(u),t._has("cartesian")&&(l.getComponentMethod("grid","contentDefaults")(e,t),u.finalizeSubplots(e,t)),t._subplots)t._subplots[d].sort(f.subplotSort);for(a=0;a<c.length;a++)(o=c[a]).supplyLayoutDefaults&&o.supplyLayoutDefaults(e,t,n);var h=t._modules;for(a=0;a<h.length;a++)(o=h[a]).supplyLayoutDefaults&&o.supplyLayoutDefaults(e,t,n);var p=t._transformModules;for(a=0;a<p.length;a++)(o=p[a]).supplyLayoutDefaults&&o.supplyLayoutDefaults(e,t,n,r);for(i in s)(o=s[i]).supplyLayoutDefaults&&o.supplyLayoutDefaults(e,t,n)},w.purge=function(e){var t=e._fullLayout||{};void 0!==t._glcontainer&&(t._glcontainer.selectAll(".gl-canvas").remove(),t._glcontainer.remove(),t._glcanvas=null),t._modeBar&&t._modeBar.destroy(),e._transitionData&&(e._transitionData._interruptCallbacks&&(e._transitionData._interruptCallbacks.length=0),e._transitionData._animationRaf&&window.cancelAnimationFrame(e._transitionData._animationRaf)),f.clearThrottle(),f.clearResponsive(e),delete e.data,delete e.layout,delete e._fullData,delete e._fullLayout,delete e.calcdata,delete e.empty,delete e.fid,delete e.undoqueue,delete e.undonum,delete e.autoplay,delete e.changed,delete e._promises,delete e._redrawTimer,delete e._hmlumcount,delete e._hmpixcount,delete e._transitionData,delete e._transitioning,delete e._initialAutoSize,delete e._transitioningWithDuration,delete e._dragging,delete e._dragged,delete e._dragdata,delete e._hoverdata,delete e._snapshotInProgress,delete e._editing,delete e._mouseDownTime,delete e._legendMouseDownTime,e.removeAllListeners&&e.removeAllListeners()},w.style=function(e){var t,n=e._fullLayout._visibleModules,r=[];for(t=0;t<n.length;t++){var i=n[t];i.style&&f.pushUnique(r,i.style)}for(t=0;t<r.length;t++)r[t](e)},w.sanitizeMargins=function(e){if(e&&e.margin){var t,n=e.width,r=e.height,i=e.margin,a=n-(i.l+i.r),o=r-(i.t+i.b);a<0&&(t=(n-1)/(i.l+i.r),i.l=Math.floor(t*i.l),i.r=Math.floor(t*i.r)),o<0&&(t=(r-1)/(i.t+i.b),i.t=Math.floor(t*i.t),i.b=Math.floor(t*i.b))}},w.clearAutoMarginIds=function(e){e._fullLayout._pushmarginIds={}},w.allowAutoMargin=function(e,t){e._fullLayout._pushmarginIds[t]=1};w.autoMargin=function(e,t,n){var r=e._fullLayout,i=r.width,a=r.height,o=r.margin,s=r.minreducedwidth,l=r.minreducedheight,c=f.constrain(i-o.l-o.r,2,s),u=f.constrain(a-o.t-o.b,2,l),d=Math.max(0,i-c),h=Math.max(0,a-u),p=r._pushmargin,m=r._pushmarginIds;if(!1!==o.autoexpand){if(n){var g=n.pad;if(void 0===g&&(g=Math.min(12,o.l,o.r,o.t,o.b)),d){var v=(n.l+n.r)/d;v>1&&(n.l/=v,n.r/=v)}if(h){var y=(n.t+n.b)/h;y>1&&(n.t/=y,n.b/=y)}var b=void 0!==n.xl?n.xl:n.x,x=void 0!==n.xr?n.xr:n.x,_=void 0!==n.yt?n.yt:n.y,A=void 0!==n.yb?n.yb:n.y;p[t]={l:{val:b,size:n.l+g},r:{val:x,size:n.r+g},b:{val:A,size:n.b+g},t:{val:_,size:n.t+g}},m[t]=1}else delete p[t],delete m[t];if(!r._replotting)return w.doAutoMargin(e)}},w.doAutoMargin=function(e){var t=e._fullLayout,n=t.width,r=t.height;t._size||(t._size={}),N(t);var i=t._size,a=t.margin,s={t:0,b:0,l:0,r:0},c=f.extendFlat({},i),u=a.l,d=a.r,h=a.t,m=a.b,g=t._pushmargin,v=t._pushmarginIds,y=t.minreducedwidth,b=t.minreducedheight;if(!1!==a.autoexpand){for(var x in g)v[x]||delete g[x];var _=e._fullLayout._reservedMargin;for(var A in _)for(var k in _[A]){var E=_[A][k];s[k]=Math.max(s[k],E)}for(var T in g.base={l:{val:0,size:u},r:{val:1,size:d},t:{val:1,size:h},b:{val:0,size:m}},s){var M=0;for(var S in g)"base"!==S&&o(g[S][T].size)&&(M=g[S][T].size>M?g[S][T].size:M);var C=Math.max(0,a[T]-M);s[T]=Math.max(0,s[T]-C)}for(var O in g){var R=g[O].l||{},L=g[O].b||{},D=R.val,P=R.size,I=L.val,F=L.size,z=n-s.r-s.l,j=r-s.t-s.b;for(var B in g){if(o(P)&&g[B].r){var U=g[B].r.val,$=g[B].r.size;if(U>D){var q=(P*U+($-z)*D)/(U-D),H=($*(1-D)+(P-z)*(1-U))/(U-D);q+H>u+d&&(u=q,d=H)}}if(o(F)&&g[B].t){var V=g[B].t.val,W=g[B].t.size;if(V>I){var G=(F*V+(W-j)*I)/(V-I),Y=(W*(1-I)+(F-j)*(1-V))/(V-I);G+Y>m+h&&(m=G,h=Y)}}}}}var X=f.constrain(n-a.l-a.r,2,y),K=f.constrain(r-a.t-a.b,2,b),Z=Math.max(0,n-X),J=Math.max(0,r-K);if(Z){var Q=(u+d)/Z;Q>1&&(u/=Q,d/=Q)}if(J){var ee=(m+h)/J;ee>1&&(m/=ee,h/=ee)}if(i.l=Math.round(u)+s.l,i.r=Math.round(d)+s.r,i.t=Math.round(h)+s.t,i.b=Math.round(m)+s.b,i.p=Math.round(a.pad),i.w=Math.round(n)-i.l-i.r,i.h=Math.round(r)-i.t-i.b,!t._replotting&&(w.didMarginChange(c,i)||function(e){if("_redrawFromAutoMarginCount"in e._fullLayout)return!1;var t=p.list(e,"",!0);for(var n in t)if(t[n].autoshift||t[n].shift)return!0;return!1}(e))){"_redrawFromAutoMarginCount"in t?t._redrawFromAutoMarginCount++:t._redrawFromAutoMarginCount=1;var te=3*(1+Object.keys(v).length);if(t._redrawFromAutoMarginCount<te)return l.call("_doPlot",e);t._size=c,f.warn("Too many auto-margin redraws.")}!function(e){var t=p.list(e,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach((function(e){for(var n=0;n<t.length;n++){var r=t[n][e];r&&r()}}))}(e)};var L=["l","r","t","b","p","w","h"];function D(e,t,n){var r=!1;var i=[w.previousPromises,function(){if(e._transitionData)return e._transitioning=!1,function(e){var t=Promise.resolve();if(!e)return t;for(;e.length;)t=t.then(e.shift());return t}(e._transitionData._interruptCallbacks)},n.prepareFn,w.rehover,w.reselect,function(){return e.emit("plotly_transitioning",[]),new Promise((function(i){e._transitioning=!0,t.duration>0&&(e._transitioningWithDuration=!0),e._transitionData._interruptCallbacks.push((function(){r=!0})),n.redraw&&e._transitionData._interruptCallbacks.push((function(){return l.call("redraw",e)})),e._transitionData._interruptCallbacks.push((function(){e.emit("plotly_transitioninterrupted",[])}));var a=0,o=0;function s(){return a++,function(){o++,r||o!==a||function(t){if(!e._transitionData)return;(function(e){if(e)for(;e.length;)e.shift()})(e._transitionData._interruptCallbacks),Promise.resolve().then((function(){if(n.redraw)return l.call("redraw",e)})).then((function(){e._transitioning=!1,e._transitioningWithDuration=!1,e.emit("plotly_transitioned",[])})).then(t)}(i)}}n.runFn(s),setTimeout(s())}))}],a=f.syncOrAsync(i,e);return a&&a.then||(a=Promise.resolve()),a.then((function(){return e}))}w.didMarginChange=function(e,t){for(var n=0;n<L.length;n++){var r=L[n],i=e[r],a=t[r];if(!o(i)||Math.abs(a-i)>1)return!0}return!1},w.graphJson=function(e,t,n,r,i,a){(i&&t&&!e._fullData||i&&!t&&!e._fullLayout)&&w.supplyDefaults(e);var o=i?e._fullData:e.data,l=i?e._fullLayout:e.layout,c=(e._transitionData||{})._frames;function u(e,t){if("function"==typeof e)return t?"_function_":null;if(f.isPlainObject(e)){var r,i={};return Object.keys(e).sort().forEach((function(a){if(-1===["_","["].indexOf(a.charAt(0)))if("function"!=typeof e[a]){if("keepdata"===n){if("src"===a.substr(a.length-3))return}else if("keepstream"===n){if("string"==typeof(r=e[a+"src"])&&r.indexOf(":")>0&&!f.isPlainObject(e.stream))return}else if("keepall"!==n&&"string"==typeof(r=e[a+"src"])&&r.indexOf(":")>0)return;i[a]=u(e[a],t)}else t&&(i[a]="_function")})),i}var a=Array.isArray(e),o=f.isTypedArray(e);if((a||o)&&e.dtype&&e.shape){var l=e.bdata;return u({dtype:e.dtype,shape:e.shape,bdata:f.isArrayBuffer(l)?s.encode(l):l},t)}return a?e.map((function(e){return u(e,t)})):o?f.simpleMap(e,f.identity):f.isJSDate(e)?f.ms2DateTimeLocal(+e):e}var d={data:(o||[]).map((function(e){var n=u(e);return t&&delete n.fit,n}))};if(!t&&(d.layout=u(l),i)){var h=l._size;d.layout.computed={margin:{b:h.b,l:h.l,r:h.r,t:h.t}}}return c&&(d.frames=u(c)),a&&(d.config=u(e._context,!0)),"object"===r?d:JSON.stringify(d)},w.modifyFrames=function(e,t){var n,r,i,a=e._transitionData._frames,o=e._transitionData._frameHash;for(n=0;n<t.length;n++)switch((r=t[n]).type){case"replace":i=r.value;var s=(a[r.index]||{}).name,l=i.name;a[r.index]=o[l]=i,l!==s&&(delete o[s],o[l]=i);break;case"insert":o[(i=r.value).name]=i,a.splice(r.index,0,i);break;case"delete":delete o[(i=a[r.index]).name],a.splice(r.index,1)}return Promise.resolve()},w.computeFrame=function(e,t){var n,r,i,a,o=e._transitionData._frameHash;if(!t)throw new Error("computeFrame must be given a string frame name");var s=o[t.toString()];if(!s)return!1;for(var l=[s],c=[s.name];s.baseframe&&(s=o[s.baseframe.toString()])&&-1===c.indexOf(s.name);)l.push(s),c.push(s.name);for(var u={};s=l.pop();)if(s.layout&&(u.layout=w.extendLayout(u.layout,s.layout)),s.data){if(u.data||(u.data=[]),!(r=s.traces))for(r=[],n=0;n<s.data.length;n++)r[n]=n;for(u.traces||(u.traces=[]),n=0;n<s.data.length;n++)null!=(i=r[n])&&(-1===(a=u.traces.indexOf(i))&&(a=u.data.length,u.traces[a]=i),u.data[a]=w.extendTrace(u.data[a],s.data[n]))}return u},w.recomputeFrameHash=function(e){for(var t=e._transitionData._frameHash={},n=e._transitionData._frames,r=0;r<n.length;r++){var i=n[r];i&&i.name&&(t[i.name]=i)}},w.extendObjectWithContainers=function(e,t,n){var r,i,a,o,s,l,c,u=f.extendDeepNoArrays({},t||{}),d=f.expandObjectPaths(u),h={};if(n&&n.length)for(a=0;a<n.length;a++)void 0===(i=(r=f.nestedProperty(d,n[a])).get())?f.nestedProperty(h,n[a]).set(null):(r.set(null),f.nestedProperty(h,n[a]).set(i));if(e=f.extendDeepNoArrays(e||{},d),n&&n.length)for(a=0;a<n.length;a++)if(l=f.nestedProperty(h,n[a]).get()){for(c=(s=f.nestedProperty(e,n[a])).get(),Array.isArray(c)||(c=[],s.set(c)),o=0;o<l.length;o++){var p=l[o];c[o]=null===p?null:w.extendObjectWithContainers(c[o],p)}s.set(c)}return e},w.dataArrayContainers=["transforms","dimensions"],w.layoutArrayContainers=l.layoutArrayContainers,w.extendTrace=function(e,t){return w.extendObjectWithContainers(e,t,w.dataArrayContainers)},w.extendLayout=function(e,t){return w.extendObjectWithContainers(e,t,w.layoutArrayContainers)},w.transition=function(e,t,n,r,i,a){var o={redraw:i.redraw},s={},l=[];return o.prepareFn=function(){for(var i=Array.isArray(t)?t.length:0,a=r.slice(0,i),o=0;o<a.length;o++){var c=a[o],u=e._fullData[c]._module;if(u){if(u.animatable){var d=u.basePlotModule.name;s[d]||(s[d]=[]),s[d].push(c)}e.data[a[o]]=w.extendTrace(e.data[a[o]],t[o])}}var h=f.expandObjectPaths(f.extendDeepNoArrays({},n)),p=/^[xy]axis[0-9]*$/;for(var m in h)p.test(m)&&delete h[m].range;w.extendLayout(e.layout,h),delete e.calcdata,w.supplyDefaults(e),w.doCalcdata(e);var g=f.expandObjectPaths(n);if(g){var v=e._fullLayout._plots;for(var y in v){var b=v[y],x=b.xaxis,_=b.yaxis,A=x.range.slice(),k=_.range.slice(),E=null,T=null,M=null,S=null;Array.isArray(g[x._name+".range"])?E=g[x._name+".range"].slice():Array.isArray((g[x._name]||{}).range)&&(E=g[x._name].range.slice()),Array.isArray(g[_._name+".range"])?T=g[_._name+".range"].slice():Array.isArray((g[_._name]||{}).range)&&(T=g[_._name].range.slice()),A&&E&&(x.r2l(A[0])!==x.r2l(E[0])||x.r2l(A[1])!==x.r2l(E[1]))&&(M={xr0:A,xr1:E}),k&&T&&(_.r2l(k[0])!==_.r2l(T[0])||_.r2l(k[1])!==_.r2l(T[1]))&&(S={yr0:k,yr1:T}),(M||S)&&l.push(f.extendFlat({plotinfo:b},M,S))}}return Promise.resolve()},o.runFn=function(t){var r,i,o=e._fullLayout._basePlotModules,c=l.length;if(n)for(i=0;i<o.length;i++)o[i].transitionAxes&&o[i].transitionAxes(e,l,a,t);for(var u in c?((r=f.extendFlat({},a)).duration=0,delete s.cartesian):r=a,s){var d=s[u];e._fullData[d[0]]._module.basePlotModule.plot(e,d,r,t)}},D(e,a,o)},w.transitionFromReact=function(e,t,n,r){var i=e._fullLayout,a=i.transition,o={},s=[];return o.prepareFn=function(){var e=i._plots;for(var a in o.redraw=!1,"some"===t.anim&&(o.redraw=!0),"some"===n.anim&&(o.redraw=!0),e){var l=e[a],c=l.xaxis,u=l.yaxis,d=r[c._name].range.slice(),h=r[u._name].range.slice(),p=c.range.slice(),m=u.range.slice();c.setScale(),u.setScale();var g=null,v=null;c.r2l(d[0])===c.r2l(p[0])&&c.r2l(d[1])===c.r2l(p[1])||(g={xr0:d,xr1:p}),u.r2l(h[0])===u.r2l(m[0])&&u.r2l(h[1])===u.r2l(m[1])||(v={yr0:h,yr1:m}),(g||v)&&s.push(f.extendFlat({plotinfo:l},g,v))}return Promise.resolve()},o.runFn=function(n){for(var r,i,o,l=e._fullData,c=e._fullLayout._basePlotModules,u=[],d=0;d<l.length;d++)u.push(d);function h(){if(e._fullLayout)for(var t=0;t<c.length;t++)c[t].transitionAxes&&c[t].transitionAxes(e,s,r,n)}function p(){if(e._fullLayout)for(var t=0;t<c.length;t++)c[t].plot(e,o,i,n)}s.length&&t.anim?"traces first"===a.ordering?(r=f.extendFlat({},a,{duration:0}),o=u,i=a,setTimeout(h,a.duration),p()):(r=a,o=null,i=f.extendFlat({},a,{duration:0}),setTimeout(p,r.duration),h()):s.length?(r=a,h()):t.anim&&(o=u,i=a,p())},D(e,a,o)},w.doCalcdata=function(e,t){var n,r,i,a,o=p.list(e),s=e._fullData,u=e._fullLayout,d=new Array(s.length),m=(e.calcdata||[]).slice();for(e.calcdata=d,u._numBoxes=0,u._numViolins=0,u._violinScaleGroupStats={},e._hmpixcount=0,e._hmlumcount=0,u._piecolormap={},u._sunburstcolormap={},u._treemapcolormap={},u._iciclecolormap={},u._funnelareacolormap={},i=0;i<s.length;i++)Array.isArray(t)&&-1===t.indexOf(i)&&(d[i]=m[i]);for(i=0;i<s.length;i++)(n=s[i])._arrayAttrs=c.findArrayAttributes(n),n._extremes={};var g=u._subplots.polar||[];for(i=0;i<g.length;i++)o.push(u[g[i]].radialaxis,u[g[i]].angularaxis);for(var v in u._colorAxes){var y=u[v];!1!==y.cauto&&(delete y.cmin,delete y.cmax)}var b=!1;function x(t){if(n=s[t],r=n._module,!0===n.visible&&n.transforms){if(r&&r.calc){var i=r.calc(e,n);i[0]&&i[0].t&&i[0].t._scene&&delete i[0].t._scene.dirty}for(a=0;a<n.transforms.length;a++){var o=n.transforms[a];(r=A[o.type])&&r.calcTransform&&(n._hasCalcTransform=!0,b=!0,r.calcTransform(e,n,o))}}}function _(t,i){if(n=s[t],!!(r=n._module).isContainer===i){var o=[];if(!0===n.visible&&0!==n._length){delete n._indexToPoints;var l=n.transforms||[];for(a=l.length-1;a>=0;a--)if(l[a].enabled){n._indexToPoints=l[a]._indexToPoints;break}r&&r.calc&&(o=r.calc(e,n))}Array.isArray(o)&&o[0]||(o=[{x:h,y:h}]),o[0].t||(o[0].t={}),o[0].trace=n,d[t]=o}}for(I(o,s,u),i=0;i<s.length;i++)_(i,!0);for(i=0;i<s.length;i++)x(i);for(b&&I(o,s,u),i=0;i<s.length;i++)_(i,!0);for(i=0;i<s.length;i++)_(i,!1);F(e);var w=function(e,t){var n,r,i,a,o,s=[];function c(e,n,r){var i=n._id.charAt(0);if("histogram2dcontour"===e){var a=n._counterAxes[0],o=p.getFromId(t,a),s="x"===i||"x"===a&&"category"===o.type,l="y"===i||"y"===a&&"category"===o.type;return function(e,t){return 0===e||0===t||s&&e===r[t].length-1||l&&t===r.length-1?-1:("y"===i?t:e)-1}}return function(e,t){return"y"===i?t:e}}var u={min:function(e){return f.aggNums(Math.min,null,e)},max:function(e){return f.aggNums(Math.max,null,e)},sum:function(e){return f.aggNums((function(e,t){return e+t}),null,e)},total:function(e){return f.aggNums((function(e,t){return e+t}),null,e)},mean:function(e){return f.mean(e)},"geometric mean":function(e){return f.geometricMean(e)},median:function(e){return f.median(e)}};function d(e,t){return e[1]-t[1]}function h(e,t){return t[1]-e[1]}for(n=0;n<e.length;n++){var m=e[n];if("category"===m.type){var g=m.categoryorder.match(P);if(g){var v=g[1],y=g[2],b=m._id.charAt(0),x="x"===b,_=[];for(r=0;r<m._categories.length;r++)_.push([m._categories[r],[]]);for(r=0;r<m._traceIndices.length;r++){var w=m._traceIndices[r],A=t._fullData[w];if(!0===A.visible){var k=A.type;l.traceIs(A,"histogram")&&(delete A._xautoBinFinished,delete A._yautoBinFinished);var E="splom"===k,T="scattergl"===k,M=t.calcdata[w];for(i=0;i<M.length;i++){var S,C,O=M[i];if(E){var R=A._axesDim[m._id];if(!x){var N=A._diag[R][0];N&&(m=t._fullLayout[p.id2name(N)])}var L=O.trace.dimensions[R].values;for(a=0;a<L.length;a++)for(S=m._categoriesMap[L[a]],o=0;o<O.trace.dimensions.length;o++)if(o!==R){var D=O.trace.dimensions[o];_[S][1].push(D.values[a])}}else if(T){for(a=0;a<O.t.x.length;a++)x?(S=O.t.x[a],C=O.t.y[a]):(S=O.t.y[a],C=O.t.x[a]),_[S][1].push(C);O.t&&O.t._scene&&delete O.t._scene.dirty}else if(O.hasOwnProperty("z")){C=O.z;var I=c(A.type,m,C);for(a=0;a<C.length;a++)for(o=0;o<C[a].length;o++)(S=I(o,a))+1&&_[S][1].push(C[a][o])}else for(void 0===(S=O.p)&&(S=O[b]),void 0===(C=O.s)&&(C=O.v),void 0===C&&(C=x?O.y:O.x),Array.isArray(C)||(C=void 0===C?[]:[C]),a=0;a<C.length;a++)_[S][1].push(C[a])}}}m._categoriesValue=_;var F=[];for(r=0;r<_.length;r++)F.push([_[r][0],u[v](_[r][1])]);F.sort("descending"===y?h:d),m._categoriesAggregatedValue=F,m._initialCategories=F.map((function(e){return e[0]})),s=s.concat(m.sortByInitialCategories())}}}return s}(o,e);if(w.length){for(u._numBoxes=0,u._numViolins=0,i=0;i<w.length;i++)_(w[i],!0);for(i=0;i<w.length;i++)_(w[i],!1);F(e)}l.getComponentMethod("fx","calc")(e),l.getComponentMethod("errorbars","calc")(e)};var P=/(total|sum|min|max|mean|geometric mean|median) (ascending|descending)/;function I(e,t,n){var r={};function i(e){e.clearCalc(),"multicategory"===e.type&&e.setupMultiCategory(t),r[e._id]=1}f.simpleMap(e,i);for(var a=n._axisMatchGroups||[],o=0;o<a.length;o++)for(var s in a[o])r[s]||i(n[p.id2name(s)])}function F(e){var t,n,r,i=e._fullLayout,a=i._visibleModules,o={};for(n=0;n<a.length;n++){var s=a[n],l=s.crossTraceCalc;if(l){var c=s.basePlotModule.name;o[c]?f.pushUnique(o[c],l):o[c]=[l]}}for(r in o){var u=o[r],d=i._subplots[r];if(Array.isArray(d))for(t=0;t<d.length;t++){var h=d[t],p="cartesian"===r?i._plots[h]:i[h];for(n=0;n<u.length;n++)u[n](e,p,h)}else for(n=0;n<u.length;n++)u[n](e)}}w.rehover=function(e){e._fullLayout._rehover&&e._fullLayout._rehover()},w.redrag=function(e){e._fullLayout._redrag&&e._fullLayout._redrag()},w.reselect=function(e){var t=e._fullLayout,n=(e.layout||{}).selections,r=t._previousSelections;t._previousSelections=n;var i=t._reselect||JSON.stringify(n)!==JSON.stringify(r);l.getComponentMethod("selections","reselect")(e,i)},w.generalUpdatePerTraceModule=function(e,t,n,r){var i,a=t.traceHash,o={};for(i=0;i<n.length;i++){var s=n[i],l=s[0].trace;l.visible&&(o[l.type]=o[l.type]||[],o[l.type].push(s))}for(var c in a)if(!o[c]){var u=a[c][0];u[0].trace.visible=!1,o[c]=[u]}for(var d in o){var h=o[d];h[0][0].trace._module.plot(e,t,f.filterVisible(h),r)}t.traceHash=o},w.plotBasePlot=function(e,t,n,r,i){var a=l.getModule(e),o=b(t.calcdata,a)[0];a.plot(t,o,r,i)},w.cleanBasePlot=function(e,t,n,r,i){var a=i._has&&i._has(e),o=n._has&&n._has(e);a&&!o&&i["_"+e+"layer"].selectAll("g.trace").remove()}},92970:(e,t,n)=>{"use strict";var r=n(56319),i=n(65210),a=n(18874).N;e.exports=function(e,t,n,o){var s,l,c=o.type,u=o.attributes,f=o.handleDefaults,d=o.partition||"x",h=t._subplots[c],p=h.length,m=p&&h[0].replace(/\d+$/,"");function g(e,t){return r.coerce(s,l,u,e,t)}for(var v=0;v<p;v++){var y=h[v];s=e[y]?e[y]:e[y]={},l=i.newContainer(t,y,m),o.noUirevision||g("uirevision",t.uirevision);var b={};b[d]=[v/p,(v+1)/p],a(l,t,g,b),o.id=y,f(s,l,g,o)}}},77014:(e,t,n)=>{"use strict";var r=n(71982),i=r.FORMAT_LINK,a=r.DATE_FORMAT_LINK;function o(e){return["Variables are inserted using %{variable},",'for example "y: %{y}"'+(e&&e.supportOther?" as well as %{xother}, {%_xother}, {%_xother_}, {%xother_}. When showing info for several points, *xother* will be added to those with different x positions from the first point. An underscore before or after *(x|y)other* will add a space on that side, only when this field is shown.":"."),'Numbers are formatted using d3-format\'s syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".',i,"for details on the formatting syntax.",'Dates are formatted using d3-time-format\'s syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".',a,"for details on the date formatting syntax."].join(" ")}function s(e){var t=e.description?" "+e.description:"",n=e.keys||[];if(n.length>0){for(var r=[],i=0;i<n.length;i++)r[i]="`"+n[i]+"`";t+="Finally, the template string has access to ",t=1===n.length?t+"variable "+r[0]:t+"variables "+r.slice(0,-1).join(", ")+" and "+r.slice(-1)+"."}return t}t.rb=function(e,t){e=e||{};var n=s(t=t||{}),r={valType:"string",dflt:"",editType:e.editType||"none",description:["Template string used for rendering the information that appear on hover box.","Note that this will override `hoverinfo`.",o({supportOther:!0}),"The variables available in `hovertemplate` are the ones emitted as event data described at this link https://plotly.com/javascript/plotlyjs-events/#event-data.","Additionally, every attributes that can be specified per-point (the ones that are `arrayOk: true`) are available.",n,'Anything contained in tag `<extra>` is displayed in the secondary box, for example "<extra>{fullData.name}</extra>".',"To hide the secondary box completely, use an empty tag `<extra></extra>`."].join(" ")};return!1!==e.arrayOk&&(r.arrayOk=!0),r},t.ay=function(e,t){e=e||{};var n=s(t=t||{}),r={valType:"string",dflt:"",editType:e.editType||"calc",description:["Template string used for rendering the information text that appear on points.","Note that this will override `textinfo`.",o(),"Every attributes that can be specified per-point (the ones that are `arrayOk: true`) are available.",n].join(" ")};return!1!==e.arrayOk&&(r.arrayOk=!0),r},t.LF=function(e,t){t=t||{};var n=(e=e||{}).newshape?"new ":"",r=s(t);return{valType:"string",dflt:"",editType:e.editType||"arraydraw",description:["Template string used for rendering the "+n+"shape's label.","Note that this will override `text`.",["Variables are inserted using %{variable},",'for example "x0: %{x0}".','Numbers are formatted using d3-format\'s syntax %{variable:d3-format}, for example "Price: %{x0:$.2f}". See',i,"for details on the formatting syntax.",'Dates are formatted using d3-time-format\'s syntax %{variable|d3-time-format}, for example "Day: %{x0|%m %b %Y}". See',a,"for details on the date formatting syntax.","A single multiplication or division operation may be applied to numeric variables, and combined with",'d3 number formatting, for example "Length in cm: %{x0*2.54}", "%{slope*60:.1f} meters per second."',"For log axes, variable values are given in log units.","For date axes, x/y coordinate variables and center variables use datetimes, while all other variable values use values in ms."].join(" "),r].join(" ")}}},3360:(e,t,n)=>{"use strict";var r=n(9954),i=n(48267),a=n(42945),o=n(77192),s=n(32159).addStyleRule,l=n(86395),c=n(85507),u=n(39626),f=l.extendFlat,d=l.extendDeepAll;function h(e){var i=e.name,a=e.categories,o=e.meta;if(t.modules[i])r.log("Type "+i+" already registered");else{t.subplotsRegistry[e.basePlotModule.name]||function(e){var n=e.name;if(t.subplotsRegistry[n])return void r.log("Plot type "+n+" already registered.");for(var i in v(e),t.subplotsRegistry[n]=e,t.componentsRegistry)x(i,e.name)}(e.basePlotModule);for(var l={},c=0;c<a.length;c++)l[a[c]]=!0,t.allCategories[a[c]]=!0;for(var u in t.modules[i]={_module:e,categories:l},o&&Object.keys(o).length&&(t.modules[i].meta=o),t.allTypes.push(i),t.componentsRegistry)y(u,i);e.layoutAttributes&&f(t.traceLayoutAttributes,e.layoutAttributes);var d=e.basePlotModule,h=d.name;if("mapbox"===h){var p=d.constants.styleRules;for(var m in p)s(".js-plotly-plot .plotly .mapboxgl-"+m,p[m])}"map"===h&&n(94624),"geo"!==h&&"mapbox"!==h&&"map"!==h||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}function p(e){if("string"!=typeof e.name)throw new Error("Component module *name* must be a string.");var n=e.name;for(var r in t.componentsRegistry[n]=e,e.layoutAttributes&&(e.layoutAttributes._isLinkedToArray&&a(t.layoutArrayContainers,n),v(e)),t.modules)y(n,r);for(var i in t.subplotsRegistry)x(n,i);for(var o in t.transformsRegistry)b(n,o);e.schema&&e.schema.layout&&d(u,e.schema.layout)}function m(e){if("string"!=typeof e.name)throw new Error("Transform module *name* must be a string.");var n="Transform module "+e.name,i="function"==typeof e.transform,a="function"==typeof e.calcTransform;if(!i&&!a)throw new Error(n+" is missing a *transform* or *calcTransform* method.");for(var s in i&&a&&r.log([n+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),o(e.attributes)||r.log(n+" registered without an *attributes* object."),"function"!=typeof e.supplyDefaults&&r.log(n+" registered without a *supplyDefaults* method."),t.transformsRegistry[e.name]=e,t.componentsRegistry)b(s,e.name)}function g(e){var n=e.name,r=n.split("-")[0],i=e.dictionary,a=e.format,o=i&&Object.keys(i).length,s=a&&Object.keys(a).length,l=t.localeRegistry,c=l[n];if(c||(l[n]=c={}),r!==n){var u=l[r];u||(l[r]=u={}),o&&u.dictionary===c.dictionary&&(u.dictionary=i),s&&u.format===c.format&&(u.format=a)}o&&(c.dictionary=i),s&&(c.format=a)}function v(e){if(e.layoutAttributes){var n=e.layoutAttributes._arrayAttrRegexps;if(n)for(var r=0;r<n.length;r++)a(t.layoutArrayRegexes,n[r])}}function y(e,n){var r=t.componentsRegistry[e].schema;if(r&&r.traces){var i=r.traces[n];i&&d(t.modules[n]._module.attributes,i)}}function b(e,n){var r=t.componentsRegistry[e].schema;if(r&&r.transforms){var i=r.transforms[n];i&&d(t.transformsRegistry[n].attributes,i)}}function x(e,n){var r=t.componentsRegistry[e].schema;if(r&&r.subplots){var i=t.subplotsRegistry[n],a=i.layoutAttributes,o="subplot"===i.attr?i.name:i.attr;Array.isArray(o)&&(o=o[0]);var s=r.subplots[o];a&&s&&d(a,s)}}function _(e){return"object"==typeof e&&(e=e.type),e}t.modules={},t.allCategories={},t.allTypes=[],t.subplotsRegistry={},t.transformsRegistry={},t.componentsRegistry={},t.layoutArrayContainers=[],t.layoutArrayRegexes=[],t.traceLayoutAttributes={},t.localeRegistry={},t.apiMethodRegistry={},t.collectableSubplotTypes=null,t.register=function(e){if(t.collectableSubplotTypes=null,!e)throw new Error("No argument passed to Plotly.register.");e&&!Array.isArray(e)&&(e=[e]);for(var n=0;n<e.length;n++){var r=e[n];if(!r)throw new Error("Invalid module was attempted to be registered!");switch(r.moduleType){case"trace":h(r);break;case"transform":m(r);break;case"component":p(r);break;case"locale":g(r);break;case"apiMethod":var i=r.name;t.apiMethodRegistry[i]=r.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},t.getModule=function(e){var n=t.modules[_(e)];return!!n&&n._module},t.traceIs=function(e,n){if("various"===(e=_(e)))return!1;var i=t.modules[e];return i||(e&&r.log("Unrecognized trace type "+e+"."),i=t.modules[c.type.dflt]),!!i.categories[n]},t.getTransformIndices=function(e,t){for(var n=[],r=e.transforms||[],i=0;i<r.length;i++)r[i].type===t&&n.push(i);return n},t.hasTransform=function(e,t){for(var n=e.transforms||[],r=0;r<n.length;r++)if(n[r].type===t)return!0;return!1},t.getComponentMethod=function(e,n){var r=t.componentsRegistry[e];return r&&r[n]||i},t.call=function(){var e=arguments[0],n=[].slice.call(arguments,1);return t.apiMethodRegistry[e].apply(null,n)}},61142:(e,t,n)=>{"use strict";var r=n(3360),i=n(56319),a=i.extendFlat,o=i.extendDeep;function s(e){var t;switch(e){case"themes__thumb":t={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}e.exports=function(e,t){var n,i,l=e.data,c=e.layout,u=o([],l),f=o({},c,s(t.tileClass)),d=e._context||{};if(t.width&&(f.width=t.width),t.height&&(f.height=t.height),"thumbnail"===t.tileClass||"themes__thumb"===t.tileClass){f.annotations=[];var h=Object.keys(f);for(n=0;n<h.length;n++)i=h[n],["xaxis","yaxis","zaxis"].indexOf(i.slice(0,5))>-1&&(f[h[n]].title={text:""});for(n=0;n<u.length;n++){var p=u[n];p.showscale=!1,p.marker&&(p.marker.showscale=!1),r.traceIs(p,"pie-like")&&(p.textposition="none")}}if(Array.isArray(t.annotations))for(n=0;n<t.annotations.length;n++)f.annotations.push(t.annotations[n]);var m=Object.keys(f).filter((function(e){return e.match(/^scene\d*$/)}));if(m.length){var g={};for("thumbnail"===t.tileClass&&(g={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),n=0;n<m.length;n++){var v=f[m[n]];v.xaxis||(v.xaxis={}),v.yaxis||(v.yaxis={}),v.zaxis||(v.zaxis={}),a(v.xaxis,g),a(v.yaxis,g),a(v.zaxis,g),v._scene=null}}var y=document.createElement("div");t.tileClass&&(y.className=t.tileClass);var b={gd:y,td:y,layout:f,data:u,config:{staticPlot:void 0===t.staticPlot||t.staticPlot,plotGlPixelRatio:void 0===t.plotGlPixelRatio?2:t.plotGlPixelRatio,displaylogo:t.displaylogo||!1,showLink:t.showLink||!1,showTips:t.showTips||!1,mapboxAccessToken:d.mapboxAccessToken}};return"transparent"!==t.setBackground&&(b.config.setBackground=t.setBackground||"opaque"),b.gd.defaultLayout=s(t.tileClass),b}},13578:(e,t,n)=>{"use strict";var r=n(56319),i=n(95093),a=n(7851),o=n(33677);e.exports=function(e,t){var n;return r.isPlainObject(e)||(n=r.getGraphDiv(e)),(t=t||{}).format=t.format||"png",t.width=t.width||null,t.height=t.height||null,t.imageDataOnly=!0,new Promise((function(s,l){n&&n._snapshotInProgress&&l(new Error("Snapshotting already in progress.")),r.isIE()&&"svg"!==t.format&&l(new Error(o.MSG_IE_BAD_FORMAT)),n&&(n._snapshotInProgress=!0);var c=i(e,t),u=t.filename||e.fn||"newplot";u+="."+t.format.replace("-","."),c.then((function(e){return n&&(n._snapshotInProgress=!1),a(e,u,t.format)})).then((function(e){s(e)})).catch((function(e){n&&(n._snapshotInProgress=!1),l(e)}))}))}},7851:(e,t,n)=>{"use strict";var r=n(56319),i=n(33677);e.exports=function(e,t,n){var a=document.createElement("a"),o="download"in a;return new Promise((function(s,l){var c,u;if(r.isIE())return c=i.createBlob(e,"svg"),window.navigator.msSaveBlob(c,t),c=null,s(t);if(o)return c=i.createBlob(e,n),u=i.createObjectURL(c),a.href=u,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),i.revokeObjectURL(u),c=null,s(t);if(r.isSafari()){var f="svg"===n?",":";base64,";return i.octetStream(f+encodeURIComponent(e)),s(t)}l(new Error("download error"))}))}},33677:(e,t,n)=>{"use strict";var r=n(3360);t.getDelay=function(e){return e._has&&(e._has("gl3d")||e._has("gl2d")||e._has("mapbox")||e._has("map"))?500:0},t.getRedrawFunc=function(e){return function(){r.getComponentMethod("colorbar","draw")(e)}},t.encodeSVG=function(e){return"data:image/svg+xml,"+encodeURIComponent(e)},t.encodeJSON=function(e){return"data:application/json,"+encodeURIComponent(e)};var i=window.URL||window.webkitURL;t.createObjectURL=function(e){return i.createObjectURL(e)},t.revokeObjectURL=function(e){return i.revokeObjectURL(e)},t.createBlob=function(e,t){if("svg"===t)return new window.Blob([e],{type:"image/svg+xml;charset=utf-8"});if("full-json"===t)return new window.Blob([e],{type:"application/json;charset=utf-8"});var n=function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}(window.atob(e));return new window.Blob([n],{type:"image/"+t})},t.octetStream=function(e){document.location.href="data:application/octet-stream"+e},t.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,t.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},53200:(e,t,n)=>{"use strict";var r=n(33677),i={getDelay:r.getDelay,getRedrawFunc:r.getRedrawFunc,clone:n(61142),toSVG:n(82469),svgToImg:n(88604),toImage:n(39802),downloadImage:n(13578)};e.exports=i},88604:(e,t,n)=>{"use strict";var r=n(56319),i=n(74815).EventEmitter,a=n(33677);e.exports=function(e){var t=e.emitter||new i,n=new Promise((function(i,o){var s=window.Image,l=e.svg,c=e.format||"png";if(r.isIE()&&"svg"!==c){var u=new Error(a.MSG_IE_BAD_FORMAT);return o(u),e.promise?n:t.emit("error",u)}var f,d,h=e.canvas,p=e.scale||1,m=e.width||300,g=e.height||150,v=p*m,y=p*g,b=h.getContext("2d",{willReadFrequently:!0}),x=new s;"svg"===c||r.isSafari()?d=a.encodeSVG(l):(f=a.createBlob(l,"svg"),d=a.createObjectURL(f)),h.width=v,h.height=y,x.onload=function(){var n;switch(f=null,a.revokeObjectURL(d),"svg"!==c&&b.drawImage(x,0,0,v,y),c){case"jpeg":n=h.toDataURL("image/jpeg");break;case"png":n=h.toDataURL("image/png");break;case"webp":n=h.toDataURL("image/webp");break;case"svg":n=d;break;default:var r="Image format is not jpeg, png, svg or webp.";if(o(new Error(r)),!e.promise)return t.emit("error",r)}i(n),e.promise||t.emit("success",n)},x.onerror=function(n){if(f=null,a.revokeObjectURL(d),o(n),!e.promise)return t.emit("error",n)},x.src=d}));return e.promise?n:t}},39802:(e,t,n)=>{"use strict";var r=n(74815).EventEmitter,i=n(3360),a=n(56319),o=n(33677),s=n(61142),l=n(82469),c=n(88604);e.exports=function(e,t){var n=new r,u=s(e,{format:"png"}),f=u.gd;f.style.position="absolute",f.style.left="-5000px",document.body.appendChild(f);var d=o.getRedrawFunc(f);return i.call("_doPlot",f,u.data,u.layout,u.config).then(d).then((function(){var e=o.getDelay(f._fullLayout);setTimeout((function(){var e=l(f),r=document.createElement("canvas");r.id=a.randstr(),(n=c({format:t.format,width:f._fullLayout.width,height:f._fullLayout.height,canvas:r,emitter:n,svg:e})).clean=function(){f&&document.body.removeChild(f)}}),e)})).catch((function(e){n.emit("error",e)})),n}},82469:(e,t,n)=>{"use strict";var r=n(93268),i=n(56319),a=n(14797),o=n(53408),s=n(81818),l=/"/g,c="TOBESTRIPPED",u=new RegExp('("'+c+")|("+c+'")',"g");e.exports=function(e,t,n){var f,d=e._fullLayout,h=d._paper,p=d._toppaper,m=d.width,g=d.height;h.insert("rect",":first-child").call(a.setRect,0,0,m,g).call(o.fill,d.paper_bgcolor);var v=d._basePlotModules||[];for(f=0;f<v.length;f++){var y=v[f];y.toSVG&&y.toSVG(e)}if(p){var b=p.node().childNodes,x=Array.prototype.slice.call(b);for(f=0;f<x.length;f++){var _=x[f];_.childNodes.length&&h.node().appendChild(_)}}d._draggers&&d._draggers.remove(),h.node().style.background="",h.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each((function(){var e=r.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){e.style({visibility:null,display:null});var t=this.style.fontFamily;t&&-1!==t.indexOf('"')&&e.style("font-family",t.replace(l,c));var n=this.style.fontWeight;!n||"normal"!==n&&"400"!==n||e.style("font-weight",void 0);var i=this.style.fontStyle;i&&"normal"===i&&e.style("font-style",void 0);var a=this.style.fontVariant;a&&"normal"===a&&e.style("font-variant",void 0)}else e.remove()})),h.selectAll(".gradient_filled,.pattern_filled").each((function(){var e=r.select(this),t=this.style.fill;t&&-1!==t.indexOf("url(")&&e.style("fill",t.replace(l,c));var n=this.style.stroke;n&&-1!==n.indexOf("url(")&&e.style("stroke",n.replace(l,c))})),"pdf"!==t&&"eps"!==t||h.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),h.node().setAttributeNS(s.xmlns,"xmlns",s.svg),h.node().setAttributeNS(s.xmlns,"xmlns:xlink",s.xlink),"svg"===t&&n&&(h.attr("width",n*m),h.attr("height",n*g),h.attr("viewBox","0 0 "+m+" "+g));var w=(new window.XMLSerializer).serializeToString(h.node());return w=function(e){var t=r.select("body").append("div").style({display:"none"}).html(""),n=e.replace(/(&[^;]*;)/gi,(function(e){return"&lt;"===e?"&#60;":"&rt;"===e?"&#62;":-1!==e.indexOf("<")||-1!==e.indexOf(">")?"":t.html(e).text()}));return t.remove(),n}(w),w=(w=w.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(u,"'"),i.isIE()&&(w=(w=(w=w.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),w}},41116:(e,t,n)=>{"use strict";var r=n(56319);e.exports=function(e,t){for(var n=0;n<e.length;n++)e[n].i=n;r.mergeArray(t.text,e,"tx"),r.mergeArray(t.hovertext,e,"htx");var i=t.marker;if(i){r.mergeArray(i.opacity,e,"mo",!0),r.mergeArray(i.color,e,"mc");var a=i.line;a&&(r.mergeArray(a.color,e,"mlc"),r.mergeArrayCastPositive(a.width,e,"mlw"))}}},22523:(e,t,n)=>{"use strict";var r=n(19030),i=n(66010).axisHoverFormat,a=n(77014).rb,o=n(77014).ay,s=n(50549),l=n(95323),c=n(16461),u=n(9488).k,f=n(86395).extendFlat,d=l({editType:"calc",arrayOk:!0,colorEditType:"style",description:""}),h=f({},r.marker.line.width,{dflt:0}),p=f({width:h,editType:"calc"},s("marker.line")),m=f({line:p,editType:"calc"},s("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style",description:"Sets the opacity of the bars."},pattern:u,cornerradius:{valType:"any",editType:"calc",description:["Sets the rounding of corners. May be an integer number of pixels,","or a percentage of bar width (as a string ending in %). Defaults to `layout.barcornerradius`.","In stack or relative barmode, the first trace to set cornerradius is used for the whole stack."].join(" ")}});e.exports={x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,xhoverformat:i("x"),yhoverformat:i("y"),text:r.text,texttemplate:o({editType:"plot"},{keys:c.eventDataKeys}),hovertext:r.hovertext,hovertemplate:a({},{keys:c.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc",description:["Specifies the location of the `text`.","*inside* positions `text` inside, next to the bar end","(rotated and scaled if needed).","*outside* positions `text` outside, next to the bar end","(scaled if needed), unless there is another bar stacked on","this one, then the text gets pushed inside.","*auto* tries to position `text` inside the bar, but if","the bar is too small and no bar is stacked on this one","the text is moved outside.","If *none*, no text appears."].join(" ")},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot",description:["Determines if texts are kept at center or start/end points in `textposition` *inside* mode."].join(" ")},textangle:{valType:"angle",dflt:"auto",editType:"plot",description:["Sets the angle of the tick labels with respect to the bar.","For example, a `tickangle` of -90 draws the tick labels","vertically. With *auto* the texts may automatically be","rotated to fit with the maximum size in bars."].join(" ")},textfont:f({},d,{description:"Sets the font used for `text`."}),insidetextfont:f({},d,{description:"Sets the font used for `text` lying inside the bar."}),outsidetextfont:f({},d,{description:"Sets the font used for `text` lying outside the bar."}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc",description:["Constrain the size of text inside or outside a bar to be no","larger than the bar itself."].join(" ")},cliponaxis:f({},r.cliponaxis,{description:["Determines whether the text nodes","are clipped about the subplot axes.","To show the text nodes above axis lines and tick labels,","make sure to set `xaxis.layer` and `yaxis.layer` to *below traces*."].join(" ")}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes",description:["Sets the orientation of the bars.","With *v* (*h*), the value of the each bar spans","along the vertical (horizontal)."].join(" ")},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc",description:["Sets where the bar base is drawn (in position axis units).","In *stack* or *relative* barmode,","traces that set *base* will be excluded","and drawn in *overlay* mode instead."].join(" ")},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc",description:["Shifts the position where the bar is drawn","(in position axis units).","In *group* barmode,","traces that set *offset* will be excluded","and drawn in *overlay* mode instead."].join(" ")},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc",description:["Sets the bar width (in position axis units)."].join(" ")},marker:m,offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup,selected:{marker:{opacity:r.selected.marker.opacity,color:r.selected.marker.color,editType:"style"},textfont:r.selected.textfont,editType:"style"},unselected:{marker:{opacity:r.unselected.marker.opacity,color:r.unselected.marker.color,editType:"style"},textfont:r.unselected.textfont,editType:"style"},zorder:r.zorder,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"],description:"Renamed to `orientation`."}}}},92347:(e,t,n)=>{"use strict";var r=n(596),i=n(29850),a=n(96175).hasColorscale,o=n(57737),s=n(41116),l=n(57715);e.exports=function(e,t){var n,c,u,f,d,h,p=r.getFromId(e,t.xaxis||"x"),m=r.getFromId(e,t.yaxis||"y"),g={msUTC:!(!t.base&&0!==t.base)};"h"===t.orientation?(n=p.makeCalcdata(t,"x",g),u=m.makeCalcdata(t,"y"),f=i(t,m,"y",u),d=!!t.yperiodalignment,h="y"):(n=m.makeCalcdata(t,"y",g),u=p.makeCalcdata(t,"x"),f=i(t,p,"x",u),d=!!t.xperiodalignment,h="x"),c=f.vals;for(var v=Math.min(c.length,n.length),y=new Array(v),b=0;b<v;b++)y[b]={p:c[b],s:n[b]},d&&(y[b].orig_p=u[b],y[b][h+"End"]=f.ends[b],y[b][h+"Start"]=f.starts[b]),t.ids&&(y[b].id=String(t.ids[b]));return a(t,"marker")&&o(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),a(t,"marker.line")&&o(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),s(y,t),l(y,t),y}},16461:e=>{"use strict";e.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},97088:(e,t,n)=>{"use strict";var r=n(5605),i=n(56319).isArrayOrTypedArray,a=n(33351).BADNUM,o=n(3360),s=n(596),l=n(92397).getAxisGroup,c=n(11938);function u(e,t,n,o,u){if(o.length){var x,_,w,A;switch(function(e,t){var n,a;for(n=0;n<t.length;n++){var o,s=t[n],l=s[0].trace,c="funnel"===l.type?l._base:l.base,u="h"===l.orientation?l.xcalendar:l.ycalendar,f="category"===e.type||"multicategory"===e.type?function(){return null}:e.d2c;if(i(c)){for(a=0;a<Math.min(c.length,s.length);a++)o=f(c[a],0,u),r(o)?(s[a].b=+o,s[a].hasB=1):s[a].b=0;for(;a<s.length;a++)s[a].b=0}else{o=f(c,0,u);var d=r(o);for(o=d?o:0,a=0;a<s.length;a++)s[a].b=o,d&&(s[a].hasB=1)}}}(n,o),u.mode){case"overlay":f(t,n,o,u);break;case"group":for(x=[],_=[],w=0;w<o.length;w++)void 0===(A=o[w])[0].trace.offset?_.push(A):x.push(A);_.length&&function(e,t,n,r,i){var o=new c(r,{posAxis:t,sepNegVal:!1,overlapNoMerge:!i.norm});(function(e,t,n,r){for(var i=e._fullLayout,a=n.positions,o=n.distinctPositions,s=n.minDiff,c=n.traces,u=c.length,f=a.length!==o.length,d=s*(1-r.gap),g=l(i,t._id)+c[0][0].trace.orientation,v=i._alignmentOpts[g]||{},y=0;y<u;y++){var b,x,_=c[y],w=_[0].trace,A=v[w.alignmentgroup]||{},k=Object.keys(A.offsetGroups||{}).length,E=(b=k?d/k:f?d/u:d)*(1-(r.groupgap||0));x=k?((2*w._offsetIndex+1-k)*b-E)/2:f?((2*y+1-u)*b-E)/2:-E/2;var T=_[0].t;T.barwidth=E,T.poffset=x,T.bargroupwidth=d,T.bardelta=s}n.binWidth=c[0][0].t.barwidth/100,h(n),p(t,n),m(t,n,f)})(e,t,o,i),function(e,t){for(var n=e.traces,r=0;r<n.length;r++){var i=n[r];if(void 0===i[0].trace.base)for(var o=new c([i],{posAxis:t,sepNegVal:!0,overlapNoMerge:!0}),s=0;s<i.length;s++){var l=i[s];if(l.p!==a){var u=o.put(l.p,l.b+l.s);u&&(l.b=u)}}}}(o,t),i.norm?(v(o),y(n,o,i)):g(n,o)}(e,t,n,_,u),x.length&&f(t,n,x,u);break;case"stack":case"relative":for(x=[],_=[],w=0;w<o.length;w++)void 0===(A=o[w])[0].trace.base?_.push(A):x.push(A);!function(e){if(e.length<2)return;var t,n,i,a,o,s;for(t=0;t<e.length&&void 0===(a=(n=e[t][0].trace).marker?n.marker.cornerradius:void 0);t++);if(void 0!==a)for(o=r(a)?+a:+a.slice(0,-1),s=r(a)?"px":"%",t=0;t<e.length;t++)(i=e[t][0].t).cornerradiusvalue=o,i.cornerradiusform=s}(_),_.length&&function(e,t,n,r,i){var o=new c(r,{posAxis:t,sepNegVal:"relative"===i.mode,overlapNoMerge:!(i.norm||"stack"===i.mode||"relative"===i.mode)});d(t,o,i),function(e,t,n){var r,i,o,l,c,u,f=b(e),d=t.traces;for(l=0;l<d.length;l++)if("funnel"===(i=(r=d[l])[0].trace).type)for(c=0;c<r.length;c++)(u=r[c]).s!==a&&t.put(u.p,-.5*u.s);for(l=0;l<d.length;l++){o="funnel"===(i=(r=d[l])[0].trace).type;var h=[];for(c=0;c<r.length;c++)if((u=r[c]).s!==a){var p;p=o?u.s:u.s+u.b;var m=t.put(u.p,p),g=m+p;u.b=m,u[f]=g,n.norm||(h.push(g),u.hasB&&h.push(m))}n.norm||(i._extremes[e._id]=s.findExtremes(e,h,{tozero:!0,padded:!0}))}}(n,o,i);for(var l=0;l<r.length;l++)for(var u=r[l],f=0;f<u.length;f++){var h=u[f];if(h.s!==a)h.b+h.s===o.get(h.p,h.s)&&(h._outmost=!0)}i.norm&&y(n,o,i)}(0,t,n,_,u),x.length&&f(t,n,x,u)}!function(e){var t,n,i,a,o,s,l;for(t=0;t<e.length;t++)i=(n=e[t])[0].trace,void 0===(a=n[0].t).cornerradiusvalue&&void 0!==(o=i.marker?i.marker.cornerradius:void 0)&&(s=r(o)?+o:+o.slice(0,-1),l=r(o)?"px":"%",a.cornerradiusvalue=s,a.cornerradiusform=l)}(o),function(e,t){var n,a,o,s=b(t),l={},c=1/0,u=-1/0;for(n=0;n<e.length;n++)for(o=e[n],a=0;a<o.length;a++){var f=o[a].p;r(f)&&(c=Math.min(c,f),u=Math.max(u,f))}var d=1e4/(u-c),h=l.round=function(e){return String(Math.round(d*(e-c)))},p={},m={},g=e.some((function(e){var t=e[0].trace;return"marker"in t&&t.marker.cornerradius}));for(n=0;n<e.length;n++){(o=e[n])[0].t.extents=l;var v=o[0].t.poffset,y=i(v);for(a=0;a<o.length;a++){var x=o[a],_=x[s]-x.w/2;if(r(_)){var w=x[s]+x.w/2,A=h(x.p);l[A]?l[A]=[Math.min(_,l[A][0]),Math.max(w,l[A][1])]:l[A]=[_,w]}if(x.p0=x.p+(y?v[a]:v),x.p1=x.p0+x.w,x.s0=x.b,x.s1=x.s0+x.s,g){var k=Math.min(x.s0,x.s1)||0,E=Math.max(x.s0,x.s1)||0,T=x[s];p[T]=T in p?Math.min(p[T],k):k,m[T]=T in m?Math.max(m[T],E):E}}}g&&function(e,t,n,r){for(var i=b(r),a=0;a<e.length;a++)for(var o=e[a],s=0;s<o.length;s++){var l=o[s],c=l[i];l._sMin=t[c],l._sMax=n[c]}}(e,p,m,t)}(o,t)}}function f(e,t,n,r){for(var i=0;i<n.length;i++){var a=n[i],o=new c([a],{posAxis:e,sepNegVal:!1,overlapNoMerge:!r.norm});d(e,o,r),r.norm?(v(o),y(t,o,r)):g(t,o)}}function d(e,t,n){for(var r=t.minDiff,i=t.traces,a=r*(1-n.gap),o=a*(1-(n.groupgap||0)),s=-o/2,l=0;l<i.length;l++){var c=i[l][0].t;c.barwidth=o,c.poffset=s,c.bargroupwidth=a,c.bardelta=r}t.binWidth=i[0][0].t.barwidth/100,h(t),p(e,t),m(e,t)}function h(e){var t,n,a=e.traces;for(t=0;t<a.length;t++){var o,s=a[t],l=s[0],c=l.trace,u=l.t,f=c._offset||c.offset,d=u.poffset;if(i(f)){for(o=Array.prototype.slice.call(f,0,s.length),n=0;n<o.length;n++)r(o[n])||(o[n]=d);for(n=o.length;n<s.length;n++)o.push(d);u.poffset=o}else void 0!==f&&(u.poffset=f);var h=c._width||c.width,p=u.barwidth;if(i(h)){var m=Array.prototype.slice.call(h,0,s.length);for(n=0;n<m.length;n++)r(m[n])||(m[n]=p);for(n=m.length;n<s.length;n++)m.push(p);if(u.barwidth=m,void 0===f){for(o=[],n=0;n<s.length;n++)o.push(d+(p-m[n])/2);u.poffset=o}}else void 0!==h&&(u.barwidth=h,void 0===f&&(u.poffset=d+(p-h)/2))}}function p(e,t){for(var n=t.traces,r=b(e),a=0;a<n.length;a++)for(var o=n[a],s=o[0].t,l=s.poffset,c=i(l),u=s.barwidth,f=i(u),d=0;d<o.length;d++){var h=o[d],p=h.w=f?u[d]:u;void 0===h.p&&(h.p=h[r],h["orig_"+r]=h[r]);var m=(c?l[d]:l)+p/2;h[r]=h.p+m}}function m(e,t,n){var r=t.traces,a=t.minDiff/2;s.minDtick(e,t.minDiff,t.distinctPositions[0],n);for(var o=0;o<r.length;o++){var l,c,u,f,d=r[o],h=d[0],p=h.trace,m=[];for(f=0;f<d.length;f++)c=(l=d[f]).p-a,u=l.p+a,m.push(c,u);if(p.width||p.offset){var g=h.t,v=g.poffset,y=g.barwidth,b=i(v),x=i(y);for(f=0;f<d.length;f++){l=d[f];var _=b?v[f]:v,w=x?y[f]:y;u=(c=l.p+_)+w,m.push(c,u)}}p._extremes[e._id]=s.findExtremes(e,m,{padded:!1})}}function g(e,t){for(var n=t.traces,r=b(e),i=0;i<n.length;i++){for(var a=n[i],o=a[0].trace,l="scatter"===o.type,c="v"===o.orientation,u=[],f=!1,d=0;d<a.length;d++){var h=a[d],p=l?0:h.b,m=l?c?h.y:h.x:p+h.s;h[r]=m,u.push(m),h.hasB&&u.push(p),h.hasB&&h.b||(f=!0)}o._extremes[e._id]=s.findExtremes(e,u,{tozero:f,padded:!0})}}function v(e){for(var t=e.traces,n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++){var o=r[i];o.s!==a&&e.put(o.p,o.b+o.s)}}function y(e,t,n){var i=t.traces,o=b(e),l="fraction"===n.norm?1:100,c=l/1e9,u=e.l2c(e.c2l(0)),f="stack"===n.mode?l:u;function d(t){return r(e.c2l(t))&&(t<u-c||t>f+c||!r(u))}for(var h=0;h<i.length;h++){for(var p=i[h],m=p[0].trace,g=[],v=!1,y=!1,x=0;x<p.length;x++){var _=p[x];if(_.s!==a){var w=Math.abs(l/t.get(_.p,_.s));_.b*=w,_.s*=w;var A=_.b,k=A+_.s;_[o]=k,g.push(k),y=y||d(k),_.hasB&&(g.push(A),y=y||d(A)),_.hasB&&_.b||(v=!0)}}m._extremes[e._id]=s.findExtremes(e,g,{tozero:v,padded:y})}}function b(e){return e._id.charAt(0)}e.exports={crossTraceCalc:function(e,t){for(var n=t.xaxis,r=t.yaxis,i=e._fullLayout,a=e._fullData,s=e.calcdata,l=[],c=[],f=0;f<a.length;f++){var d=a[f];if(!0===d.visible&&o.traceIs(d,"bar")&&d.xaxis===n._id&&d.yaxis===r._id&&("h"===d.orientation?l.push(s[f]):c.push(s[f]),d._computePh))for(var h=e.calcdata[f],p=0;p<h.length;p++)"function"==typeof h[p].ph0&&(h[p].ph0=h[p].ph0()),"function"==typeof h[p].ph1&&(h[p].ph1=h[p].ph1())}var m={xCat:"category"===n.type||"multicategory"===n.type,yCat:"category"===r.type||"multicategory"===r.type,mode:i.barmode,norm:i.barnorm,gap:i.bargap,groupgap:i.bargroupgap};u(e,n,r,c,m),u(e,r,n,l,m)},setGroupPositions:u}},72316:(e,t,n)=>{"use strict";var r=n(5605),i=n(56319),a=n(53408),o=n(3360),s=n(69165),l=n(119),c=n(14550),u=n(26403),f=n(22523),d=i.coerceFont;function h(e){if(r(e)){if((e=+e)>=0)return e}else if("string"==typeof e&&"%"===(e=e.trim()).slice(-1)&&r(e.slice(0,-1))&&(e=+e.slice(0,-1))>=0)return e+"%"}function p(e,t,n,r,a,o){var s=!(!1===(o=o||{}).moduleHasSelected),l=!(!1===o.moduleHasUnselected),c=!(!1===o.moduleHasConstrain),u=!(!1===o.moduleHasCliponaxis),f=!(!1===o.moduleHasTextangle),h=!(!1===o.moduleHasInsideanchor),p=!!o.hasPathbar,m=Array.isArray(a)||"auto"===a,g=m||"inside"===a,v=m||"outside"===a;if(g||v){var y=d(r,"textfont",n.font),b=i.extendFlat({},y),x=!(e.textfont&&e.textfont.color);if(x&&delete b.color,d(r,"insidetextfont",b),p){var _=i.extendFlat({},y);x&&delete _.color,d(r,"pathbar.textfont",_)}v&&d(r,"outsidetextfont",y),s&&r("selected.textfont.color"),l&&r("unselected.textfont.color"),c&&r("constraintext"),u&&r("cliponaxis"),f&&r("textangle"),r("texttemplate")}g&&h&&r("insidetextanchor")}e.exports={supplyDefaults:function(e,t,n,r){function u(n,r){return i.coerce(e,t,f,n,r)}if(s(e,t,r,u)){l(e,t,r,u),u("xhoverformat"),u("yhoverformat"),u("zorder"),u("orientation",t.x&&!t.y?"h":"v"),u("base"),u("offset"),u("width"),u("text"),u("hovertext"),u("hovertemplate");var d=u("textposition");p(e,t,r,u,d,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),c(e,t,u,n,r);var h=(t.marker.line||{}).color,m=o.getComponentMethod("errorbars","supplyDefaults");m(e,t,h||a.defaultLine,{axis:"y"}),m(e,t,h||a.defaultLine,{axis:"x",inherit:"y"}),i.coerceSelectionMarkerOpacity(t,u)}else t.visible=!1},crossTraceDefaults:function(e,t){var n,r;function a(e,t){return i.coerce(r._input,r,f,e,t)}for(var o=0;o<e.length;o++)if("bar"===(r=e[o]).type){n=r._input;var s=a("marker.cornerradius",t.barcornerradius);r.marker&&(r.marker.cornerradius=h(s)),"group"===t.barmode&&u(n,r,t,a)}},handleText:p,validateCornerradius:h}},49247:e=>{"use strict";e.exports=function(e,t,n){return e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),"h"===n.orientation?(e.label=e.y,e.value=e.x):(e.label=e.x,e.value=e.y),e}},15173:(e,t,n)=>{"use strict";var r=n(5605),i=n(3707),a=n(56319).isArrayOrTypedArray;t.coerceString=function(e,t,n){if("string"==typeof t){if(t||!e.noBlank)return t}else if(("number"==typeof t||!0===t)&&!e.strict)return String(t);return void 0!==n?n:e.dflt},t.coerceNumber=function(e,t,n){if(r(t)){t=+t;var i=e.min,a=e.max;if(!(void 0!==i&&t<i||void 0!==a&&t>a))return t}return void 0!==n?n:e.dflt},t.coerceColor=function(e,t,n){return i(t).isValid()?t:void 0!==n?n:e.dflt},t.coerceEnumerated=function(e,t,n){return e.coerceNumber&&(t=+t),-1!==e.values.indexOf(t)?t:void 0!==n?n:e.dflt},t.getValue=function(e,t){var n;return a(e)?t<e.length&&(n=e[t]):n=e,n},t.getLineWidth=function(e,t){return 0<t.mlw?t.mlw:a(e.marker.line.width)?0:e.marker.line.width}},49958:(e,t,n)=>{"use strict";var r=n(17911),i=n(3360),a=n(53408),o=n(56319).fillText,s=n(15173).getLineWidth,l=n(596).hoverLabelText,c=n(33351).BADNUM;function u(e,t,n,i,a){var s,u,f,d,h,p,m,g=e.cd,v=g[0].trace,y=g[0].t,b="closest"===i,x="waterfall"===v.type,_=e.maxHoverDistance,w=e.maxSpikeDistance;"h"===v.orientation?(s=n,u=t,f="y",d="x",h=D,p=N):(s=t,u=n,f="x",d="y",p=D,h=N);var A=v[f+"period"],k=b||A;function E(e){return M(e,-1)}function T(e){return M(e,1)}function M(e,t){var n=e.w;return e[f]+t*n/2}function S(e){return e[f+"End"]-e[f+"Start"]}var C=b?E:A?function(e){return e.p-S(e)/2}:function(e){return Math.min(E(e),e.p-y.bardelta/2)},O=b?T:A?function(e){return e.p+S(e)/2}:function(e){return Math.max(T(e),e.p+y.bardelta/2)};function R(e,t,n){return a.finiteRange&&(n=0),r.inbox(e-s,t-s,n+Math.min(1,Math.abs(t-e)/m)-1)}function N(e){return R(C(e),O(e),_)}function L(e){var t=e[d];if(x){var n=Math.abs(e.rawS)||0;u>0?t+=n:u<0&&(t-=n)}return t}function D(e){var t=u,n=e.b,i=L(e);return r.inbox(n-t,i-t,_+(i-t)/(i-n)-1)}var P=e[f+"a"],I=e[d+"a"];m=Math.abs(P.r2c(P.range[1])-P.r2c(P.range[0]));var F=r.getDistanceFunction(i,h,p,(function(e){return(h(e)+p(e))/2}));if(r.getClosest(g,F,e),!1!==e.index&&g[e.index].p!==c){k||(C=function(e){return Math.min(E(e),e.p-y.bargroupwidth/2)},O=function(e){return Math.max(T(e),e.p+y.bargroupwidth/2)});var z=g[e.index],j=v.base?z.b+z.s:z.s;e[d+"0"]=e[d+"1"]=I.c2p(z[d],!0),e[d+"LabelVal"]=j;var B=y.extents[y.extents.round(z.p)];e[f+"0"]=P.c2p(b?C(z):B[0],!0),e[f+"1"]=P.c2p(b?O(z):B[1],!0);var U=void 0!==z.orig_p;return e[f+"LabelVal"]=U?z.orig_p:z.p,e.labelLabel=l(P,e[f+"LabelVal"],v[f+"hoverformat"]),e.valueLabel=l(I,e[d+"LabelVal"],v[d+"hoverformat"]),e.baseLabel=l(I,z.b,v[d+"hoverformat"]),e.spikeDistance=(function(e){var t=u,n=e.b,i=L(e);return r.inbox(n-t,i-t,w+(i-t)/(i-n)-1)}(z)+function(e){return R(E(e),T(e),w)}(z))/2,e[f+"Spike"]=P.c2p(z.p,!0),o(z,v,e),e.hovertemplate=v.hovertemplate,e}}function f(e,t){var n=t.mcc||e.marker.color,r=t.mlcc||e.marker.line.color,i=s(e,t);return a.opacity(n)?n:a.opacity(r)&&i?r:void 0}e.exports={hoverPoints:function(e,t,n,r,a){var o=u(e,t,n,r,a);if(o){var s=o.cd,l=s[0].trace,c=s[o.index];return o.color=f(l,c),i.getComponentMethod("errorbars","hoverInfo")(c,l,o),[o]}},hoverOnBars:u,getTraceColor:f}},31992:(e,t,n)=>{"use strict";e.exports={attributes:n(22523),layoutAttributes:n(92754),supplyDefaults:n(72316).supplyDefaults,crossTraceDefaults:n(72316).crossTraceDefaults,supplyLayoutDefaults:n(52549),calc:n(92347),crossTraceCalc:n(97088).crossTraceCalc,colorbar:n(83304),arraysToCalcdata:n(41116),plot:n(31061).plot,style:n(51289).style,styleOnSelect:n(51289).styleOnSelect,hoverPoints:n(49958).hoverPoints,eventData:n(49247),selectPoints:n(1702),moduleType:"trace",name:"bar",basePlotModule:n(64125),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{description:["The data visualized by the span of the bars is set in `y`","if `orientation` is set to *v* (the default)","and the labels are set in `x`.","By setting `orientation` to *h*, the roles are interchanged."].join(" ")}}},92754:e=>{"use strict";e.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *stack*, the bars are stacked on top of one another","With *relative*, the bars are stacked on top of one another,","with negative values below the axis, positive values above","With *group*, the bars are plotted next to one another","centered around the shared location.","With *overlay*, the bars are plotted over one another,","you might need to reduce *opacity* to see multiple bars."].join(" ")},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc",description:["Sets the normalization for bar traces on the graph.","With *fraction*, the value of each bar is divided by the sum of all","values at that location coordinate.","*percent* is the same but multiplied by 100 to show percentages."].join(" ")},bargap:{valType:"number",min:0,max:1,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","adjacent location coordinates."].join(" ")},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","the same location coordinate."].join(" ")},barcornerradius:{valType:"any",editType:"calc",description:["Sets the rounding of bar corners. May be an integer number of pixels,","or a percentage of bar width (as a string ending in %)."].join(" ")}}},52549:(e,t,n)=>{"use strict";var r=n(3360),i=n(596),a=n(56319),o=n(92754),s=n(72316).validateCornerradius;e.exports=function(e,t,n){function l(n,r){return a.coerce(e,t,o,n,r)}for(var c=!1,u=!1,f=!1,d={},h=l("barmode"),p=0;p<n.length;p++){var m=n[p];if(r.traceIs(m,"bar")&&m.visible){if(c=!0,"group"===h){var g=m.xaxis+m.yaxis;d[g]&&(f=!0),d[g]=!0}if(m.visible&&"histogram"===m.type)"category"!==i.getFromId({_fullLayout:t},m["v"===m.orientation?"xaxis":"yaxis"]).type&&(u=!0)}}if(c){"overlay"!==h&&l("barnorm"),l("bargap",u&&!f?0:.2),l("bargroupgap");var v=l("barcornerradius");t.barcornerradius=s(v)}else delete t.barmode}},31061:(e,t,n)=>{"use strict";var r=n(93268),i=n(5605),a=n(56319),o=n(56953),s=n(53408),l=n(14797),c=n(3360),u=n(596).tickText,f=n(11464),d=f.recordMinTextSize,h=f.clearMinTextSize,p=n(51289),m=n(15173),g=n(16461),v=n(22523),y=v.text,b=v.textposition,x=n(44790).appendArrayPointValue,_=g.TEXTPAD;function w(e){return e.id}function A(e){if(e.ids)return w}function k(e){return(e>0)-(e<0)}function E(e,t){return e<t?1:-1}function T(e,t,n,r){var i;return!t.uniformtext.mode&&M(n)?(r&&(i=r()),e.transition().duration(n.duration).ease(n.easing).each("end",(function(){i&&i()})).each("interrupt",(function(){i&&i()}))):e}function M(e){return e&&e.duration>0}function S(e,t,n,r,i){return!(e<0||t<0)&&(n<=e&&r<=t||n<=t&&r<=e||(i?e>=n*(t/r):t>=r*(e/n)))}function C(e){return"auto"===e?0:e}function O(e,t){var n=Math.PI/180*t,r=Math.abs(Math.sin(n)),i=Math.abs(Math.cos(n));return{x:e.width*i+e.height*r,y:e.width*r+e.height*i}}function R(e,t,n,r,i,a){var o=!!a.isHorizontal,s=!!a.constrained,l=a.angle||0,c=a.anchor,u="end"===c,f="start"===c,d=((a.leftToRight||0)+1)/2,h=1-d,p=a.hasB,m=a.r,g=a.overhead,v=i.width,y=i.height,b=Math.abs(t-e),x=Math.abs(r-n),w=b>2*_&&x>2*_?_:0;b-=2*w,x-=2*w;var A=C(l);"auto"!==l||v<=b&&y<=x||!(v>b||y>x)||(v>x||y>b)&&v<y==b<x||(A+=90);var k,T,M=O(i,A);if(m&&m-g>_){var S=function(e,t,n,r,i,a,o,s,l){var c,u,f,d,h,p=Math.max(0,Math.abs(t-e)-2*_),m=Math.max(0,Math.abs(r-n)-2*_),g=a-_,v=o?g-Math.sqrt(g*g-(g-o)*(g-o)):g,y=l?2*g:s?g-o:2*v,b=l?2*g:s?2*v:g-o;i.y/i.x>=m/(p-y)?d=m/i.y:i.y/i.x<=(m-b)/p?d=p/i.x:!l&&s?(c=i.x*i.x+i.y*i.y/4,f=(p-g)*(p-g)+(m/2-g)*(m/2-g)-g*g,d=(-(u=-2*i.x*(p-g)-i.y*(m/2-g))+Math.sqrt(u*u-4*c*f))/(2*c)):l?(c=(i.x*i.x+i.y*i.y)/4,f=(p/2-g)*(p/2-g)+(m/2-g)*(m/2-g)-g*g,d=(-(u=-i.x*(p/2-g)-i.y*(m/2-g))+Math.sqrt(u*u-4*c*f))/(2*c)):(c=i.x*i.x/4+i.y*i.y,f=(p/2-g)*(p/2-g)+(m-g)*(m-g)-g*g,d=(-(u=-i.x*(p/2-g)-2*i.y*(m-g))+Math.sqrt(u*u-4*c*f))/(2*c));d=Math.min(1,d),h=s?Math.max(0,g-Math.sqrt(Math.max(0,g*g-(g-(m-i.y*d)/2)*(g-(m-i.y*d)/2)))-o):Math.max(0,g-Math.sqrt(Math.max(0,g*g-(g-(p-i.x*d)/2)*(g-(p-i.x*d)/2)))-o);return{scale:d,pad:h}}(e,t,n,r,M,m,g,o,p);k=S.scale,T=S.pad}else k=1,s&&(k=Math.min(1,b/M.x,x/M.y)),T=0;var R=i.left*h+i.right*d,N=(i.top+i.bottom)/2,L=(e+_)*h+(t-_)*d,D=(n+r)/2,P=0,I=0;if(f||u){var F=(o?M.x:M.y)/2;m&&(u||p)&&(w+=T);var z=o?E(e,t):E(n,r);o?f?(L=e+z*w,P=-z*F):(L=t-z*w,P=z*F):f?(D=n+z*w,I=-z*F):(D=r-z*w,I=z*F)}return{textX:R,textY:N,targetX:L,targetY:D,anchorX:P,anchorY:I,scale:k,rotate:A}}e.exports={plot:function(e,t,n,f,g,v){var w=t.xaxis,N=t.yaxis,L=e._fullLayout,D=e._context.staticPlot;g||(g={mode:L.barmode,norm:L.barmode,gap:L.bargap,groupgap:L.bargroupgap},h("bar",L));var P=a.makeTraceGroups(f,n,"trace bars").each((function(n){var c=r.select(this),f=n[0].trace,h=n[0].t,P="waterfall"===f.type,I="funnel"===f.type,F="histogram"===f.type,z="bar"===f.type,j=z||I,B=0;P&&f.connector.visible&&"between"===f.connector.mode&&(B=f.connector.line.width/2);var U="h"===f.orientation,$=M(g),q=a.ensureSingle(c,"g","points"),H=A(f),V=q.selectAll("g.point").data(a.identity,H);V.enter().append("g").classed("point",!0),V.exit().remove(),V.each((function(c,A){var M,P,I=r.select(this),q=function(e,t,n,r){var i=[],a=[],o=r?t:n,s=r?n:t;return i[0]=o.c2p(e.s0,!0),a[0]=s.c2p(e.p0,!0),i[1]=o.c2p(e.s1,!0),a[1]=s.c2p(e.p1,!0),r?[i,a]:[a,i]}(c,w,N,U),H=q[0][0],V=q[0][1],W=q[1][0],G=q[1][1],Y=0==(U?V-H:G-W);if(Y&&j&&m.getLineWidth(f,c)&&(Y=!1),Y||(Y=!(i(H)&&i(V)&&i(W)&&i(G))),c.isBlank=Y,Y&&(U?V=H:G=W),B&&!Y&&(U?(H-=E(H,V)*B,V+=E(H,V)*B):(W-=E(W,G)*B,G+=E(W,G)*B)),"waterfall"===f.type){if(!Y){var X=f[c.dir].marker;M=X.line.width,P=X.color}}else M=m.getLineWidth(f,c),P=c.mc||f.marker.color;function K(e){var t=r.round(M/2%1,2);return 0===g.gap&&0===g.groupgap?r.round(Math.round(e)-t,2):e}var Z=s.opacity(P)<1||M>.01?K:function(e,t,n){return n&&e===t?e:Math.abs(e-t)>=2?K(e):e>t?Math.ceil(e):Math.floor(e)};e._context.staticPlot||(H=Z(H,V,U),V=Z(V,H,U),W=Z(W,G,!U),G=Z(G,W,!U));var J,Q=U?w.c2p:N.c2p;J=c.s0>0?c._sMax:c.s0<0?c._sMin:c.s1>0?c._sMax:c._sMin;var ee,te,ne=z||F?function(e,t){if(!e)return 0;var n,r=U?Math.abs(G-W):Math.abs(V-H),i=U?Math.abs(V-H):Math.abs(G-W),a=Z(Math.abs(Q(J,!0)-Q(0,!0))),o=c.hasB?Math.min(r/2,i/2):Math.min(r/2,a);return n="%"===t?r*(Math.min(50,e)/100):e,Z(Math.max(Math.min(n,o),0))}(h.cornerradiusvalue,h.cornerradiusform):0,re="M"+H+","+W+"V"+G+"H"+V+"V"+W+"Z",ie=0;if(ne&&c.s){var ae=0===k(c.s0)||k(c.s)===k(c.s0)?c.s1:c.s0;if((ie=Z(c.hasB?0:Math.abs(Q(J,!0)-Q(ae,!0))))<ne){var oe=E(H,V),se=E(W,G),le=oe===-se?1:0;if(U)if(c.hasB)ee="M"+(H+ne*oe)+","+W+"A "+ne+","+ne+" 0 0 "+le+" "+H+","+(W+ne*se)+"V"+(G-ne*se)+"A "+ne+","+ne+" 0 0 "+le+" "+(H+ne*oe)+","+G+"H"+(V-ne*oe)+"A "+ne+","+ne+" 0 0 "+le+" "+V+","+(G-ne*se)+"V"+(W+ne*se)+"A "+ne+","+ne+" 0 0 "+le+" "+(V-ne*oe)+","+W+"Z";else{var ce=(te=Math.abs(V-H)+ie)<ne?ne-Math.sqrt(te*(2*ne-te)):0,ue=ie>0?Math.sqrt(ie*(2*ne-ie)):0,fe=oe>0?Math.max:Math.min;ee="M"+H+","+W+"V"+(G-ce*se)+"H"+fe(V-(ne-ie)*oe,H)+"A "+ne+","+ne+" 0 0 "+le+" "+V+","+(G-ne*se-ue)+"V"+(W+ne*se+ue)+"A "+ne+","+ne+" 0 0 "+le+" "+fe(V-(ne-ie)*oe,H)+","+(W+ce*se)+"Z"}else if(c.hasB)ee="M"+(H+ne*oe)+","+W+"A "+ne+","+ne+" 0 0 "+le+" "+H+","+(W+ne*se)+"V"+(G-ne*se)+"A "+ne+","+ne+" 0 0 "+le+" "+(H+ne*oe)+","+G+"H"+(V-ne*oe)+"A "+ne+","+ne+" 0 0 "+le+" "+V+","+(G-ne*se)+"V"+(W+ne*se)+"A "+ne+","+ne+" 0 0 "+le+" "+(V-ne*oe)+","+W+"Z";else{var de=(te=Math.abs(G-W)+ie)<ne?ne-Math.sqrt(te*(2*ne-te)):0,he=ie>0?Math.sqrt(ie*(2*ne-ie)):0,pe=se>0?Math.max:Math.min;ee="M"+(H+de*oe)+","+W+"V"+pe(G-(ne-ie)*se,W)+"A "+ne+","+ne+" 0 0 "+le+" "+(H+ne*oe-he)+","+G+"H"+(V-ne*oe+he)+"A "+ne+","+ne+" 0 0 "+le+" "+(V-de*oe)+","+pe(G-(ne-ie)*se,W)+"V"+W+"Z"}}else ee=re}else ee=re;var me=T(a.ensureSingle(I,"path"),L,g,v);if(me.style("vector-effect",D?"none":"non-scaling-stroke").attr("d",isNaN((V-H)*(G-W))||Y&&e._context.staticPlot?"M0,0Z":ee).call(l.setClipUrl,t.layerClipId,e),!L.uniformtext.mode&&$){var ge=l.makePointStyleFns(f);l.singlePointStyle(c,me,f,ge,e)}!function(e,t,n,r,i,s,c,f,h,g,v,w,A){var k,M=t.xaxis,N=t.yaxis,L=e._fullLayout;function D(t,n,r){return a.ensureSingle(t,"text").text(n).attr({class:"bartext bartext-"+k,"text-anchor":"middle","data-notex":1}).call(l.font,r).call(o.convertToTspans,e)}var P=r[0].trace,I="h"===P.orientation,F=function(e,t,n,r,i){var o,s=t[0].trace,l=s.texttemplate;o=l?function(e,t,n,r,i){var o=t[0].trace,s=a.castOption(o,n,"texttemplate");if(!s)return"";var l,c,f,d,h="histogram"===o.type,p="waterfall"===o.type,m="funnel"===o.type,g="h"===o.orientation;g?(l="y",c=i,f="x",d=r):(l="x",c=r,f="y",d=i);function v(e){return u(c,c.c2l(e),!0).text}function y(e){return u(d,d.c2l(e),!0).text}var b=t[n],_={};_.label=b.p,_.labelLabel=_[l+"Label"]=v(b.p);var w=a.castOption(o,b.i,"text");(0===w||w)&&(_.text=w);_.value=b.s,_.valueLabel=_[f+"Label"]=y(b.s);var A={};x(A,o,b.i),(h||void 0===A.x)&&(A.x=g?_.value:_.label);(h||void 0===A.y)&&(A.y=g?_.label:_.value);(h||void 0===A.xLabel)&&(A.xLabel=g?_.valueLabel:_.labelLabel);(h||void 0===A.yLabel)&&(A.yLabel=g?_.labelLabel:_.valueLabel);p&&(_.delta=+b.rawS||b.s,_.deltaLabel=y(_.delta),_.final=b.v,_.finalLabel=y(_.final),_.initial=_.final-_.delta,_.initialLabel=y(_.initial));m&&(_.value=b.s,_.valueLabel=y(_.value),_.percentInitial=b.begR,_.percentInitialLabel=a.formatPercent(b.begR),_.percentPrevious=b.difR,_.percentPreviousLabel=a.formatPercent(b.difR),_.percentTotal=b.sumR,_.percenTotalLabel=a.formatPercent(b.sumR));var k=a.castOption(o,b.i,"customdata");k&&(_.customdata=k);return a.texttemplateString(s,_,e._d3locale,A,_,o._meta||{})}(e,t,n,r,i):s.textinfo?function(e,t,n,r){var i=e[0].trace,o="h"===i.orientation,s="waterfall"===i.type,l="funnel"===i.type;function c(e){return u(o?r:n,e,!0).text}function f(e){return u(o?n:r,+e,!0).text}var d,h=i.textinfo,p=e[t],m=h.split("+"),g=[],v=function(e){return-1!==m.indexOf(e)};v("label")&&g.push(c(e[t].p));v("text")&&(0===(d=a.castOption(i,p.i,"text"))||d)&&g.push(d);if(s){var y=+p.rawS||p.s,b=p.v,x=b-y;v("initial")&&g.push(f(x)),v("delta")&&g.push(f(y)),v("final")&&g.push(f(b))}if(l){v("value")&&g.push(f(p.s));var _=0;v("percent initial")&&_++,v("percent previous")&&_++,v("percent total")&&_++;var w=_>1;v("percent initial")&&(d=a.formatPercent(p.begR),w&&(d+=" of initial"),g.push(d)),v("percent previous")&&(d=a.formatPercent(p.difR),w&&(d+=" of previous"),g.push(d)),v("percent total")&&(d=a.formatPercent(p.sumR),w&&(d+=" of total"),g.push(d))}return g.join("<br>")}(t,n,r,i):m.getValue(s.text,n);return m.coerceString(y,o)}(L,r,i,M,N);k=function(e,t){var n=m.getValue(e.textposition,t);return m.coerceEnumerated(b,n)}(P,i);var z="stack"===w.mode||"relative"===w.mode,j=r[i],B=!z||j._outmost,U=j.hasB,$=g&&g-v>_;if(!F||"none"===k||(j.isBlank||s===c||f===h)&&("auto"===k||"inside"===k))return void n.select("text").remove();var q=L.font,H=p.getBarColor(r[i],P),V=p.getInsideTextFont(P,i,q,H),W=p.getOutsideTextFont(P,i,q),G=P.insidetextanchor||"end",Y=n.datum();I?"log"===M.type&&Y.s0<=0&&(s=M.range[0]<M.range[1]?0:M._length):"log"===N.type&&Y.s0<=0&&(f=N.range[0]<N.range[1]?N._length:0);var X,K,Z,J,Q,ee=Math.abs(c-s),te=Math.abs(h-f),ne=ee-2*_,re=te-2*_;"outside"===k&&(B||j.hasB||(k="inside"));if("auto"===k)if(B){k="inside",X=D(n,F,Q=a.ensureUniformFontSize(e,V)),Z=(K=l.bBox(X.node())).width,J=K.height;var ie,ae=Z>0&&J>0;ie=$?U?S(ne-2*g,re,Z,J,I)||S(ne,re-2*g,Z,J,I):I?S(ne-(g-v),re,Z,J,I)||S(ne,re-2*(g-v),Z,J,I):S(ne,re-(g-v),Z,J,I)||S(ne-2*(g-v),re,Z,J,I):S(ne,re,Z,J,I),ae&&ie?k="inside":(k="outside",X.remove(),X=null)}else k="inside";if(!X){var oe=(X=D(n,F,Q=a.ensureUniformFontSize(e,"outside"===k?W:V))).attr("transform");if(X.attr("transform",""),Z=(K=l.bBox(X.node())).width,J=K.height,X.attr("transform",oe),Z<=0||J<=0)return void X.remove()}var se,le=P.textangle;se="outside"===k?function(e,t,n,r,i,a){var o,s=!!a.isHorizontal,l=!!a.constrained,c=a.angle||0,u=i.width,f=i.height,d=Math.abs(t-e),h=Math.abs(r-n);o=s?h>2*_?_:0:d>2*_?_:0;var p=1;l&&(p=s?Math.min(1,h/f):Math.min(1,d/u));var m=C(c),g=O(i,m),v=(s?g.x:g.y)/2,y=(i.left+i.right)/2,b=(i.top+i.bottom)/2,x=(e+t)/2,w=(n+r)/2,A=0,k=0,T=s?E(t,e):E(n,r);s?(x=t-T*o,A=T*v):(w=r+T*o,k=-T*v);return{textX:y,textY:b,targetX:x,targetY:w,anchorX:A,anchorY:k,scale:p,rotate:m}}(s,c,f,h,K,{isHorizontal:I,constrained:"both"===P.constraintext||"outside"===P.constraintext,angle:le}):R(s,c,f,h,K,{isHorizontal:I,constrained:"both"===P.constraintext||"inside"===P.constraintext,angle:le,anchor:G,hasB:U,r:g,overhead:v});se.fontSize=Q.size,d("histogram"===P.type?"bar":P.type,se,L),j.transform=se;var ce=T(X,L,w,A);a.setTransormAndDisplay(ce,se)}(e,t,I,n,A,H,V,W,G,ne,ie,g,v),t.layerClipId&&l.hideOutsideRangePoint(c,I.select("text"),w,N,f.xcalendar,f.ycalendar)}));var W=!1===f.cliponaxis;l.setClipUrl(c,W?null:t.layerClipId,e)}));c.getComponentMethod("errorbars","plot")(e,P,t,g)},toMoveInsideBar:R}},1702:e=>{"use strict";function t(e,t,n,r,i){var a=t.c2p(r?e.s0:e.p0,!0),o=t.c2p(r?e.s1:e.p1,!0),s=n.c2p(r?e.p0:e.s0,!0),l=n.c2p(r?e.p1:e.s1,!0);return i?[(a+o)/2,(s+l)/2]:r?[o,(s+l)/2]:[(a+o)/2,l]}e.exports=function(e,n){var r,i=e.cd,a=e.xaxis,o=e.yaxis,s=i[0].trace,l="funnel"===s.type,c="h"===s.orientation,u=[];if(!1===n)for(r=0;r<i.length;r++)i[r].selected=0;else for(r=0;r<i.length;r++){var f=i[r],d="ct"in f?f.ct:t(f,a,o,c,l);n.contains(d,!1,r,e)?(u.push({pointNumber:r,x:a.c2d(f.x),y:o.c2d(f.y)}),f.selected=1):f.selected=0}return u}},11938:(e,t,n)=>{"use strict";e.exports=i;var r=n(56319).distinctVals;function i(e,t){this.traces=e,this.sepNegVal=t.sepNegVal,this.overlapNoMerge=t.overlapNoMerge;for(var n=1/0,i=t.posAxis._id.charAt(0),a=[],o=0;o<e.length;o++){for(var s=e[o],l=0;l<s.length;l++){var c=s[l],u=c.p;void 0===u&&(u=c[i]),void 0!==u&&a.push(u)}s[0]&&s[0].width1&&(n=Math.min(s[0].width1,n))}this.positions=a;var f=r(a);this.distinctPositions=f.vals,1===f.vals.length&&n!==1/0?this.minDiff=n:this.minDiff=Math.min(f.minDiff,n);var d=(t.posAxis||{}).type;"category"!==d&&"multicategory"!==d||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}i.prototype.put=function(e,t){var n=this.getLabel(e,t),r=this.bins[n]||0;return this.bins[n]=r+t,r},i.prototype.get=function(e,t){var n=this.getLabel(e,t);return this.bins[n]||0},i.prototype.getLabel=function(e,t){return(t<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?e:Math.round(e/this.binWidth))}},51289:(e,t,n)=>{"use strict";var r=n(93268),i=n(53408),a=n(14797),o=n(56319),s=n(3360),l=n(11464).resizeText,c=n(22523),u=c.textfont,f=c.insidetextfont,d=c.outsidetextfont,h=n(15173);function p(e,t,n){a.pointStyle(e.selectAll("path"),t,n),m(e,t,n)}function m(e,t,n){e.selectAll("text").each((function(e){var i=r.select(this),s=o.ensureUniformFontSize(n,g(i,e,t,n));a.font(i,s)}))}function g(e,t,n,r){var i=r._fullLayout.font,a=n.textfont;if(e.classed("bartext-inside")){var o=_(t,n);a=y(n,t.i,i,o)}else e.classed("bartext-outside")&&(a=b(n,t.i,i));return a}function v(e,t,n){return x(u,e.textfont,t,n)}function y(e,t,n,r){var a=v(e,t,n);return(void 0===e._input.textfont||void 0===e._input.textfont.color||Array.isArray(e.textfont.color)&&void 0===e.textfont.color[t])&&(a={color:i.contrast(r),family:a.family,size:a.size,weight:a.weight,style:a.style,variant:a.variant,textcase:a.textcase,lineposition:a.lineposition,shadow:a.shadow}),x(f,e.insidetextfont,t,a)}function b(e,t,n){var r=v(e,t,n);return x(d,e.outsidetextfont,t,r)}function x(e,t,n,r){t=t||{};var i=h.getValue(t.family,n),a=h.getValue(t.size,n),o=h.getValue(t.color,n),s=h.getValue(t.weight,n),l=h.getValue(t.style,n),c=h.getValue(t.variant,n),u=h.getValue(t.textcase,n),f=h.getValue(t.lineposition,n),d=h.getValue(t.shadow,n);return{family:h.coerceString(e.family,i,r.family),size:h.coerceNumber(e.size,a,r.size),color:h.coerceColor(e.color,o,r.color),weight:h.coerceString(e.weight,s,r.weight),style:h.coerceString(e.style,l,r.style),variant:h.coerceString(e.variant,c,r.variant),textcase:h.coerceString(e.variant,u,r.textcase),lineposition:h.coerceString(e.variant,f,r.lineposition),shadow:h.coerceString(e.variant,d,r.shadow)}}function _(e,t){return"waterfall"===t.type?t[e.dir].marker.color:e.mcc||e.mc||t.marker.color}e.exports={style:function(e){var t=r.select(e).selectAll('g[class^="barlayer"]').selectAll("g.trace");l(e,t,"bar");var n=t.size(),i=e._fullLayout;t.style("opacity",(function(e){return e[0].trace.opacity})).each((function(e){("stack"===i.barmode&&n>1||0===i.bargap&&0===i.bargroupgap&&!e[0].trace.marker.line.width)&&r.select(this).attr("shape-rendering","crispEdges")})),t.selectAll("g.points").each((function(t){p(r.select(this),t[0].trace,e)})),s.getComponentMethod("errorbars","style")(t)},styleTextPoints:m,styleOnSelect:function(e,t,n){var i=t[0].trace;i.selectedpoints?function(e,t,n){a.selectedPointStyle(e.selectAll("path"),t),function(e,t,n){e.each((function(e){var i,s=r.select(this);if(e.selected){i=o.ensureUniformFontSize(n,g(s,e,t,n));var l=t.selected.textfont&&t.selected.textfont.color;l&&(i.color=l),a.font(s,i)}else a.selectedTextStyle(s,t)}))}(e.selectAll("text"),t,n)}(n,i,e):(p(n,i,e),s.getComponentMethod("errorbars","style")(n))},getInsideTextFont:y,getOutsideTextFont:b,getBarColor:_,resizeText:l}},14550:(e,t,n)=>{"use strict";var r=n(53408),i=n(96175).hasColorscale,a=n(14530),o=n(56319).coercePattern;e.exports=function(e,t,n,s,l){var c=n("marker.color",s),u=i(e,"marker");u&&a(e,t,l,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",r.defaultLine),i(e,"marker.line")&&a(e,t,l,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width"),n("marker.opacity"),o(n,"marker.pattern",c,u),n("selected.marker.color"),n("unselected.marker.color")}},11464:(e,t,n)=>{"use strict";var r=n(93268),i=n(56319);function a(e){return"_"+e+"Text_minsize"}e.exports={recordMinTextSize:function(e,t,n){if(n.uniformtext.mode){var r=a(e),i=n.uniformtext.minsize,o=t.scale*t.fontSize;t.hide=o<i,n[r]=n[r]||1/0,t.hide||(n[r]=Math.min(n[r],Math.max(o,i)))}},clearMinTextSize:function(e,t){t[a(e)]=void 0},resizeText:function(e,t,n){var a=e._fullLayout,o=a["_"+n+"Text_minsize"];if(o){var s,l="hide"===a.uniformtext.mode;switch(n){case"funnelarea":case"pie":case"sunburst":s="g.slice";break;case"treemap":case"icicle":s="g.slice, g.pathbar";break;default:s="g.points > g.point"}t.selectAll(s).each((function(e){var t=e.transform;if(t){t.scale=l&&t.hide?0:o/t.fontSize;var n=r.select(this).select("text");i.setTransormAndDisplay(n,t)}}))}}}},10179:(e,t,n)=>{"use strict";var r=n(23876),i=n(19030),a=n(22523),o=n(37811),s=n(66010).axisHoverFormat,l=n(77014).rb,c=n(86395).extendFlat,u=i.marker,f=u.line;e.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the y sample data or coordinates.","See overview for more info."].join(" ")},x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the x sample data or coordinates.","See overview for more info."].join(" ")},x0:{valType:"any",editType:"calc+clearAxisTypes",description:["Sets the x coordinate for single-box traces","or the starting coordinate for multi-box traces","set using q1/median/q3.","See overview for more info."].join(" ")},y0:{valType:"any",editType:"calc+clearAxisTypes",description:["Sets the y coordinate for single-box traces","or the starting coordinate for multi-box traces","set using q1/median/q3.","See overview for more info."].join(" ")},dx:{valType:"number",editType:"calc",description:["Sets the x coordinate step for multi-box traces","set using q1/median/q3."].join(" ")},dy:{valType:"number",editType:"calc",description:["Sets the y coordinate step for multi-box traces","set using q1/median/q3."].join(" ")},xperiod:i.xperiod,yperiod:i.yperiod,xperiod0:i.xperiod0,yperiod0:i.yperiod0,xperiodalignment:i.xperiodalignment,yperiodalignment:i.yperiodalignment,xhoverformat:s("x"),yhoverformat:s("y"),name:{valType:"string",editType:"calc+clearAxisTypes",description:["Sets the trace name.","The trace name appears as the legend item and on hover.","For box traces, the name will also be used for the position","coordinate, if `x` and `x0` (`y` and `y0` if horizontal) are","missing and the position axis is categorical"].join(" ")},q1:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the Quartile 1 values.","There should be as many items as the number of boxes desired."].join(" ")},median:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the median values.","There should be as many items as the number of boxes desired."].join(" ")},q3:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the Quartile 3 values.","There should be as many items as the number of boxes desired."].join(" ")},lowerfence:{valType:"data_array",editType:"calc",description:["Sets the lower fence values.","There should be as many items as the number of boxes desired.","This attribute has effect only under the q1/median/q3 signature.","If `lowerfence` is not provided but a sample (in `y` or `x`) is set,","we compute the lower as the last sample point below 1.5 times the IQR."].join(" ")},upperfence:{valType:"data_array",editType:"calc",description:["Sets the upper fence values.","There should be as many items as the number of boxes desired.","This attribute has effect only under the q1/median/q3 signature.","If `upperfence` is not provided but a sample (in `y` or `x`) is set,","we compute the upper as the last sample point above 1.5 times the IQR."].join(" ")},notched:{valType:"boolean",editType:"calc",description:["Determines whether or not notches are drawn.","Notches displays a confidence interval around the median.","We compute the confidence interval as median +/- 1.57 * IQR / sqrt(N),","where IQR is the interquartile range and N is the sample size.","If two boxes' notches do not overlap there is 95% confidence their medians differ.","See https://sites.google.com/site/davidsstatistics/home/notched-box-plots for more info.","Defaults to *false* unless `notchwidth` or `notchspan` is set."].join(" ")},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc",description:["Sets the width of the notches relative to","the box' width.","For example, with 0, the notches are as wide as the box(es)."].join(" ")},notchspan:{valType:"data_array",editType:"calc",description:["Sets the notch span from the boxes' `median` values.","There should be as many items as the number of boxes desired.","This attribute has effect only under the q1/median/q3 signature.","If `notchspan` is not provided but a sample (in `y` or `x`) is set,","we compute it as 1.57 * IQR / sqrt(N),","where N is the sample size."].join(" ")},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc",description:["If *outliers*, only the sample points lying outside the whiskers","are shown","If *suspectedoutliers*, the outlier points are shown and","points either less than 4*Q1-3*Q3 or greater than 4*Q3-3*Q1","are highlighted (see `outliercolor`)","If *all*, all sample points are shown","If *false*, only the box(es) are shown with no sample points","Defaults to *suspectedoutliers* when `marker.outliercolor` or","`marker.line.outliercolor` is set.","Defaults to *all* under the q1/median/q3 signature.","Otherwise defaults to *outliers*."].join(" ")},jitter:{valType:"number",min:0,max:1,editType:"calc",description:["Sets the amount of jitter in the sample points drawn.","If *0*, the sample points align along the distribution axis.","If *1*, the sample points are drawn in a random jitter of width","equal to the width of the box(es)."].join(" ")},pointpos:{valType:"number",min:-2,max:2,editType:"calc",description:["Sets the position of the sample points in relation to the box(es).","If *0*, the sample points are places over the center of the box(es).","Positive (negative) values correspond to positions to the","right (left) for vertical boxes and above (below) for horizontal boxes"].join(" ")},sdmultiple:{valType:"number",min:0,editType:"calc",dflt:1,description:["Scales the box size when sizemode=sd","Allowing boxes to be drawn across any stddev range","For example 1-stddev, 3-stddev, 5-stddev"].join(" ")},sizemode:{valType:"enumerated",values:["quartiles","sd"],editType:"calc",dflt:"quartiles",description:["Sets the upper and lower bound for the boxes","quartiles means box is drawn between Q1 and Q3","SD means the box is drawn between Mean +- Standard Deviation","Argument sdmultiple (default 1) to scale the box size","So it could be drawn 1-stddev, 3-stddev etc"].join(" ")},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc",description:["If *true*, the mean of the box(es)' underlying distribution is","drawn as a dashed line inside the box(es).","If *sd* the standard deviation is also drawn.","Defaults to *true* when `mean` is set.","Defaults to *sd* when `sd` is set","Otherwise defaults to *false*."].join(" ")},mean:{valType:"data_array",editType:"calc",description:["Sets the mean values.","There should be as many items as the number of boxes desired.","This attribute has effect only under the q1/median/q3 signature.","If `mean` is not provided but a sample (in `y` or `x`) is set,","we compute the mean for each box using the sample values."].join(" ")},sd:{valType:"data_array",editType:"calc",description:["Sets the standard deviation values.","There should be as many items as the number of boxes desired.","This attribute has effect only under the q1/median/q3 signature.","If `sd` is not provided but a sample (in `y` or `x`) is set,","we compute the standard deviation for each box using the sample values."].join(" ")},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes",description:["Sets the orientation of the box(es).","If *v* (*h*), the distribution is visualized along","the vertical (horizontal)."].join(" ")},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc",description:["Sets the method used to compute the sample's Q1 and Q3 quartiles.","The *linear* method uses the 25th percentile for Q1 and 75th percentile for Q3","as computed using method #10 (listed on http://jse.amstat.org/v14n3/langford.html).","The *exclusive* method uses the median to divide the ordered dataset into two halves","if the sample is odd, it does not include the median in either half -","Q1 is then the median of the lower half and","Q3 the median of the upper half.","The *inclusive* method also uses the median to divide the ordered dataset into two halves","but if the sample is odd, it includes the median in both halves -","Q1 is then the median of the lower half and","Q3 the median of the upper half."].join(" ")},width:{valType:"number",min:0,dflt:0,editType:"calc",description:["Sets the width of the box in data coordinate","If *0* (default value) the width is automatically selected based on the positions","of other box traces in the same subplot."].join(" ")},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style",description:"Sets the color of the outlier sample points."},symbol:c({},u.symbol,{arrayOk:!1,editType:"plot"}),opacity:c({},u.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:c({},u.angle,{arrayOk:!1,editType:"calc"}),size:c({},u.size,{arrayOk:!1,editType:"calc"}),color:c({},u.color,{arrayOk:!1,editType:"style"}),line:{color:c({},f.color,{arrayOk:!1,dflt:o.defaultLine,editType:"style"}),width:c({},f.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style",description:["Sets the border line color of the outlier sample points.","Defaults to marker.color"].join(" ")},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style",description:["Sets the border line width (in px) of the outlier sample points."].join(" ")},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style",description:"Sets the color of line bounding the box(es)."},width:{valType:"number",min:0,dflt:2,editType:"style",description:"Sets the width (in px) of line bounding the box(es)."},editType:"plot"},fillcolor:r(),whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc",description:["Sets the width of the whiskers relative to","the box' width.","For example, with 1, the whiskers are as wide as the box(es)."].join(" ")},showwhiskers:{valType:"boolean",editType:"calc",description:["Determines whether or not whiskers are visible.","Defaults to true for `sizemode` *quartiles*, false for *sd*."].join(" ")},offsetgroup:a.offsetgroup,alignmentgroup:a.alignmentgroup,selected:{marker:i.selected.marker,editType:"style"},unselected:{marker:i.unselected.marker,editType:"style"},text:c({},i.text,{description:["Sets the text elements associated with each sample value.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),hovertext:c({},i.hovertext,{description:"Same as `text`."}),hovertemplate:l({description:["N.B. This only has an effect when hovering on points."].join(" ")}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style",description:["Do the hover effects highlight individual boxes ","or sample points or both?"].join(" ")},zorder:i.zorder}},39939:(e,t,n)=>{"use strict";var r=n(5605),i=n(596),a=n(29850),o=n(56319),s=n(33351).BADNUM,l=o._;e.exports=function(e,t){var n,c,y,b,x,_,w,A=e._fullLayout,k=i.getFromId(e,t.xaxis||"x"),E=i.getFromId(e,t.yaxis||"y"),T=[],M="violin"===t.type?"_numViolins":"_numBoxes";"h"===t.orientation?(y=k,b="x",x=E,_="y",w=!!t.yperiodalignment):(y=E,b="y",x=k,_="x",w=!!t.xperiodalignment);var S,C,O,R,N,L,D=function(e,t,n,i){var s,l=t in e,c=t+"0"in e,u="d"+t in e;if(l||c&&u){var f=n.makeCalcdata(e,t);return[a(e,n,t,f).vals,f]}s=c?e[t+"0"]:"name"in e&&("category"===n.type||r(e.name)&&-1!==["linear","log"].indexOf(n.type)||o.isDateTime(e.name)&&"date"===n.type)?e.name:i;for(var d="multicategory"===n.type?n.r2c_just_indices(s):n.d2c(s,0,e[t+"calendar"]),h=e._length,p=new Array(h),m=0;m<h;m++)p[m]=d;return[p]}(t,_,x,A[M]),P=D[0],I=D[1],F=o.distinctVals(P,x),z=F.vals,j=F.minDiff/2,B="all"===(t.boxpoints||t.points)?o.identity:function(e){return e.v<S.lf||e.v>S.uf};if(t._hasPreCompStats){var U=t[b],$=function(e){return y.d2c((t[e]||[])[n])},q=1/0,H=-1/0;for(n=0;n<t._length;n++){var V=P[n];if(r(V)){if((S={}).pos=S[_]=V,w&&I&&(S.orig_p=I[n]),S.q1=$("q1"),S.med=$("median"),S.q3=$("q3"),C=[],U&&o.isArrayOrTypedArray(U[n]))for(c=0;c<U[n].length;c++)(L=y.d2c(U[n][c]))!==s&&(u(N={v:L,i:[n,c]},t,[n,c]),C.push(N));if(S.pts=C.sort(f),R=(O=S[b]=C.map(d)).length,S.med!==s&&S.q1!==s&&S.q3!==s&&S.med>=S.q1&&S.q3>=S.med){var W=$("lowerfence");S.lf=W!==s&&W<=S.q1?W:h(S,O,R);var G=$("upperfence");S.uf=G!==s&&G>=S.q3?G:p(S,O,R);var Y=$("mean");S.mean=Y!==s?Y:R?o.mean(O,R):(S.q1+S.q3)/2;var X=$("sd");S.sd=Y!==s&&X>=0?X:R?o.stdev(O,R,S.mean):S.q3-S.q1,S.lo=m(S),S.uo=g(S);var K=$("notchspan");K=K!==s&&K>0?K:v(S,R),S.ln=S.med-K,S.un=S.med+K;var Z=S.lf,J=S.uf;t.boxpoints&&O.length&&(Z=Math.min(Z,O[0]),J=Math.max(J,O[R-1])),t.notched&&(Z=Math.min(Z,S.ln),J=Math.max(J,S.un)),S.min=Z,S.max=J}else{var Q;o.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+S.q1,"median = "+S.med,"q3 = "+S.q3].join("\n")),Q=S.med!==s?S.med:S.q1!==s?S.q3!==s?(S.q1+S.q3)/2:S.q1:S.q3!==s?S.q3:0,S.med=Q,S.q1=S.q3=Q,S.lf=S.uf=Q,S.mean=S.sd=Q,S.ln=S.un=Q,S.min=S.max=Q}q=Math.min(q,S.min),H=Math.max(H,S.max),S.pts2=C.filter(B),T.push(S)}}t._extremes[y._id]=i.findExtremes(y,[q,H],{padded:!0})}else{var ee=y.makeCalcdata(t,b),te=function(e,t){for(var n=e.length,r=new Array(n+1),i=0;i<n;i++)r[i]=e[i]-t;return r[n]=e[n-1]+t,r}(z,j),ne=z.length,re=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=[];return t}(ne);for(n=0;n<t._length;n++)if(L=ee[n],r(L)){var ie=o.findBin(P[n],te);ie>=0&&ie<ne&&(u(N={v:L,i:n},t,n),re[ie].push(N))}var ae=1/0,oe=-1/0,se=t.quartilemethod,le="exclusive"===se,ce="inclusive"===se;for(n=0;n<ne;n++)if(re[n].length>0){var ue,fe;if((S={}).pos=S[_]=z[n],C=S.pts=re[n].sort(f),R=(O=S[b]=C.map(d)).length,S.min=O[0],S.max=O[R-1],S.mean=o.mean(O,R),S.sd=o.stdev(O,R,S.mean)*t.sdmultiple,S.med=o.interp(O,.5),R%2&&(le||ce))le?(ue=O.slice(0,R/2),fe=O.slice(R/2+1)):ce&&(ue=O.slice(0,R/2+1),fe=O.slice(R/2)),S.q1=o.interp(ue,.5),S.q3=o.interp(fe,.5);else S.q1=o.interp(O,.25),S.q3=o.interp(O,.75);S.lf=h(S,O,R),S.uf=p(S,O,R),S.lo=m(S),S.uo=g(S);var de=v(S,R);S.ln=S.med-de,S.un=S.med+de,ae=Math.min(ae,S.ln),oe=Math.max(oe,S.un),S.pts2=C.filter(B),T.push(S)}t.notched&&o.isTypedArray(ee)&&(ee=Array.from(ee)),t._extremes[y._id]=i.findExtremes(y,t.notched?ee.concat([ae,oe]):ee,{padded:!0})}return function(e,t){if(o.isArrayOrTypedArray(t.selectedpoints))for(var n=0;n<e.length;n++){for(var r=e[n].pts||[],i={},a=0;a<r.length;a++)i[r[a].i]=a;o.tagSelected(r,t,i)}}(T,t),T.length>0?(T[0].t={num:A[M],dPos:j,posLetter:_,valLetter:b,labels:{med:l(e,"median:"),min:l(e,"min:"),q1:l(e,"q1:"),q3:l(e,"q3:"),max:l(e,"max:"),mean:"sd"===t.boxmean||"sd"===t.sizemode?l(e,"mean  :").replace("",1===t.sdmultiple?"":t.sdmultiple+""):l(e,"mean:"),lf:l(e,"lower fence:"),uf:l(e,"upper fence:")}},A[M]++,T):[{t:{empty:!0}}]};var c={text:"tx",hovertext:"htx"};function u(e,t,n){for(var r in c)o.isArrayOrTypedArray(t[r])&&(Array.isArray(n)?o.isArrayOrTypedArray(t[r][n[0]])&&(e[c[r]]=t[r][n[0]][n[1]]):e[c[r]]=t[r][n])}function f(e,t){return e.v-t.v}function d(e){return e.v}function h(e,t,n){return 0===n?e.q1:Math.min(e.q1,t[Math.min(o.findBin(2.5*e.q1-1.5*e.q3,t,!0)+1,n-1)])}function p(e,t,n){return 0===n?e.q3:Math.max(e.q3,t[Math.max(o.findBin(2.5*e.q3-1.5*e.q1,t),0)])}function m(e){return 4*e.q1-3*e.q3}function g(e){return 4*e.q3-3*e.q1}function v(e,t){return 0===t?0:1.57*(e.q3-e.q1)/Math.sqrt(t)}},25368:(e,t,n)=>{"use strict";var r=n(596),i=n(56319),a=n(92397).getAxisGroup,o=["v","h"];function s(e,t,n,o){var s,l,c,u=t.calcdata,f=t._fullLayout,d=o._id,h=d.charAt(0),p=[],m=0;for(s=0;s<n.length;s++)for(c=u[n[s]],l=0;l<c.length;l++)p.push(o.c2l(c[l].pos,!0)),m+=(c[l].pts2||[]).length;if(p.length){var g=i.distinctVals(p);"category"!==o.type&&"multicategory"!==o.type||(g.minDiff=1);var v=g.minDiff/2;r.minDtick(o,g.minDiff,g.vals[0],!0);var y=f["violin"===e?"_numViolins":"_numBoxes"],b="group"===f[e+"mode"]&&y>1,x=1-f[e+"gap"],_=1-f[e+"groupgap"];for(s=0;s<n.length;s++){var w,A,k,E,T,M,S=(c=u[n[s]])[0].trace,C=c[0].t,O=S.width,R=S.side;if(O)w=A=E=O/2,k=0;else if(w=v,b){var N=a(f,o._id)+S.orientation,L=(f._alignmentOpts[N]||{})[S.alignmentgroup]||{},D=Object.keys(L.offsetGroups||{}).length,P=D||y;A=w*x*_/P,k=2*w*(((D?S._offsetIndex:C.num)+.5)/P-.5)*x,E=w*x/P}else A=w*x*_,k=0,E=w;C.dPos=w,C.bPos=k,C.bdPos=A,C.wHover=E;var I,F,z,j,B,U,$=k+A,q=Boolean(O);if("positive"===R?(T=w*(O?1:.5),I=$,M=I=k):"negative"===R?(T=I=k,M=w*(O?1:.5),F=$):(T=M=w,I=F=$),(S.boxpoints||S.points)&&m>0){var H=S.pointpos,V=S.jitter,W=S.marker.size/2,G=0;H+V>=0&&((G=$*(H+V))>T?(q=!0,B=W,z=G):G>I&&(B=W,z=T)),G<=T&&(z=T);var Y=0;H-V<=0&&((Y=-$*(H-V))>M?(q=!0,U=W,j=Y):Y>F&&(U=W,j=M)),Y<=M&&(j=M)}else z=T,j=M;var X=new Array(c.length);for(l=0;l<c.length;l++)X[l]=c[l].pos;S._extremes[d]=r.findExtremes(o,X,{padded:q,vpadminus:j,vpadplus:z,vpadLinearized:!0,ppadminus:{x:U,y:B}[h],ppadplus:{x:B,y:U}[h]})}}}e.exports={crossTraceCalc:function(e,t){for(var n=e.calcdata,r=t.xaxis,i=t.yaxis,a=0;a<o.length;a++){for(var l=o[a],c="h"===l?i:r,u=[],f=0;f<n.length;f++){var d=n[f],h=d[0].t,p=d[0].trace;!0!==p.visible||"box"!==p.type&&"candlestick"!==p.type||h.empty||(p.orientation||"v")!==l||p.xaxis!==r._id||p.yaxis!==i._id||u.push(f)}s("box",e,u,c)}},setPositionOffset:s}},79556:(e,t,n)=>{"use strict";var r=n(56319),i=n(3360),a=n(53408),o=n(119),s=n(26403),l=n(44992),c=n(10179);function u(e,t,n,a){function o(e){var t=0;return e&&e.length&&(t+=1,r.isArrayOrTypedArray(e[0])&&e[0].length&&(t+=1)),t}function s(t){return r.validate(e[t],c[t])}var u,f=n("y"),d=n("x");if("box"===t.type){var h=n("q1"),p=n("median"),m=n("q3");t._hasPreCompStats=h&&h.length&&p&&p.length&&m&&m.length,u=Math.min(r.minRowLength(h),r.minRowLength(p),r.minRowLength(m))}var g,v,y=o(f),b=o(d),x=y&&r.minRowLength(f),_=b&&r.minRowLength(d),w=a.calendar,A={autotypenumbers:a.autotypenumbers};if(t._hasPreCompStats)switch(String(b)+String(y)){case"00":var k=s("x0")||s("dx");g=(s("y0")||s("dy"))&&!k?"h":"v",v=u;break;case"10":g="v",v=Math.min(u,_);break;case"20":g="h",v=Math.min(u,d.length);break;case"01":g="h",v=Math.min(u,x);break;case"02":g="v",v=Math.min(u,f.length);break;case"12":g="v",v=Math.min(u,_,f.length);break;case"21":g="h",v=Math.min(u,d.length,x);break;case"11":v=0;break;case"22":var E,T=!1;for(E=0;E<d.length;E++)if("category"===l(d[E],w,A)){T=!0;break}if(T)g="v",v=Math.min(u,_,f.length);else{for(E=0;E<f.length;E++)if("category"===l(f[E],w,A)){T=!0;break}T?(g="h",v=Math.min(u,d.length,x)):(g="v",v=Math.min(u,_,f.length))}}else y>0?(g="v",v=b>0?Math.min(_,x):Math.min(x)):b>0?(g="h",v=Math.min(_)):v=0;if(v){t._length=v;var M=n("orientation",g);t._hasPreCompStats?"v"===M&&0===b?(n("x0",0),n("dx",1)):"h"===M&&0===y&&(n("y0",0),n("dy",1)):"v"===M&&0===b?n("x0"):"h"===M&&0===y&&n("y0"),i.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],a)}else t.visible=!1}function f(e,t,n,i){var a=i.prefix,o=r.coerce2(e,t,c,"marker.outliercolor"),s=n("marker.line.outliercolor"),l="outliers";t._hasPreCompStats?l="all":(o||s)&&(l="suspectedoutliers");var u=n(a+"points",l);u?(n("jitter","all"===u?.3:0),n("pointpos","all"===u?-1.5:0),n("marker.symbol"),n("marker.opacity"),n("marker.size"),n("marker.angle"),n("marker.color",t.line.color),n("marker.line.color"),n("marker.line.width"),"suspectedoutliers"===u&&(n("marker.line.outliercolor",t.marker.color),n("marker.line.outlierwidth")),n("selected.marker.color"),n("unselected.marker.color"),n("selected.marker.size"),n("unselected.marker.size"),n("text"),n("hovertext")):delete t.marker;var f=n("hoveron");"all"!==f&&-1===f.indexOf("points")||n("hovertemplate"),r.coerceSelectionMarkerOpacity(t,n)}e.exports={supplyDefaults:function(e,t,n,i){function s(n,i){return r.coerce(e,t,c,n,i)}if(u(e,t,s,i),!1!==t.visible){o(e,t,i,s),s("xhoverformat"),s("yhoverformat");var l=t._hasPreCompStats;l&&(s("lowerfence"),s("upperfence")),s("line.color",(e.marker||{}).color||n),s("line.width"),s("fillcolor",a.addOpacity(t.line.color,.5));var d=!1;if(l){var h=s("mean"),p=s("sd");h&&h.length&&(d=!0,p&&p.length&&(d="sd"))}s("whiskerwidth");var m,g=s("sizemode");"quartiles"===g&&(m=s("boxmean",d)),s("showwhiskers","quartiles"===g),"sd"!==g&&"sd"!==m||s("sdmultiple"),s("width"),s("quartilemethod");var v=!1;if(l){var y=s("notchspan");y&&y.length&&(v=!0)}else r.validate(e.notchwidth,c.notchwidth)&&(v=!0);s("notched",v)&&s("notchwidth"),f(e,t,s,{prefix:"box"}),s("zorder")}},crossTraceDefaults:function(e,t){var n,i;function a(e){return r.coerce(i._input,i,c,e)}for(var o=0;o<e.length;o++){var l=(i=e[o]).type;"box"!==l&&"violin"!==l||(n=i._input,"group"===t[l+"mode"]&&s(n,i,t,a))}},handleSampleDefaults:u,handlePointsDefaults:f}},37367:e=>{"use strict";e.exports=function(e,t){return t.hoverOnBox&&(e.hoverOnBox=t.hoverOnBox),"xVal"in t&&(e.x=t.xVal),"yVal"in t&&(e.y=t.yVal),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),e}},28910:(e,t,n)=>{"use strict";var r=n(596),i=n(56319),a=n(17911),o=n(53408),s=i.fillText;function l(e,t,n,s){var l,c,u,f,d,h,p,m,g,v,y,b,x,_,w=e.cd,A=e.xa,k=e.ya,E=w[0].trace,T=w[0].t,M="violin"===E.type,S=T.bdPos,C=T.wHover,O=function(e){return u.c2l(e.pos)+T.bPos-u.c2l(h)};M&&"both"!==E.side?("positive"===E.side&&(g=function(e){var t=O(e);return a.inbox(t,t+C,v)},b=S,x=0),"negative"===E.side&&(g=function(e){var t=O(e);return a.inbox(t-C,t,v)},b=0,x=S)):(g=function(e){var t=O(e);return a.inbox(t-C,t+C,v)},b=x=S),_=M?function(e){return a.inbox(e.span[0]-d,e.span[1]-d,v)}:function(e){return a.inbox(e.min-d,e.max-d,v)},"h"===E.orientation?(d=t,h=n,p=_,m=g,l="y",u=k,c="x",f=A):(d=n,h=t,p=g,m=_,l="x",u=A,c="y",f=k);var R=Math.min(1,S/Math.abs(u.r2c(u.range[1])-u.r2c(u.range[0])));function N(e){return(p(e)+m(e))/2}v=e.maxHoverDistance-R,y=e.maxSpikeDistance-R;var L=a.getDistanceFunction(s,p,m,N);if(a.getClosest(w,L,e),!1===e.index)return[];var D=w[e.index],P=E.line.color,I=(E.marker||{}).color;o.opacity(P)&&E.line.width?e.color=P:o.opacity(I)&&E.boxpoints?e.color=I:e.color=E.fillcolor,e[l+"0"]=u.c2p(D.pos+T.bPos-x,!0),e[l+"1"]=u.c2p(D.pos+T.bPos+b,!0),e[l+"LabelVal"]=void 0!==D.orig_p?D.orig_p:D.pos;var F=l+"Spike";e.spikeDistance=N(D)*y/v,e[F]=u.c2p(D.pos,!0);var z=E.boxmean||"sd"===E.sizemode||(E.meanline||{}).visible,j=E.boxpoints||E.points,B=j&&z?["max","uf","q3","med","mean","q1","lf","min"]:j&&!z?["max","uf","q3","med","q1","lf","min"]:!j&&z?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],U=f.range[1]<f.range[0];E.orientation===(U?"v":"h")&&B.reverse();for(var $=e.spikeDistance,q=e[F],H=[],V=0;V<B.length;V++){var W=B[V];if(W in D){var G=D[W],Y=f.c2p(G,!0),X=i.extendFlat({},e);X.attr=W,X[c+"0"]=X[c+"1"]=Y,X[c+"LabelVal"]=G,X[c+"Label"]=(T.labels?T.labels[W]+" ":"")+r.hoverLabelText(f,G,E[c+"hoverformat"]),X.hoverOnBox=!0,"mean"!==W||!("sd"in D)||"sd"!==E.boxmean&&"sd"!==E.sizemode||(X[c+"err"]=D.sd),X.hovertemplate=!1,H.push(X)}}e.name="",e.spikeDistance=void 0,e[F]=void 0;for(var K=0;K<H.length;K++)"med"!==H[K].attr?(H[K].name="",H[K].spikeDistance=void 0,H[K][F]=void 0):(H[K].spikeDistance=$,H[K][F]=q);return H}function c(e,t,n){for(var r,o,l,c=e.cd,u=e.xa,f=e.ya,d=c[0].trace,h=u.c2p(t),p=f.c2p(n),m=a.quadrature((function(e){var t=Math.max(3,e.mrc||0);return Math.max(Math.abs(u.c2p(e.x)-h)-t,1-3/t)}),(function(e){var t=Math.max(3,e.mrc||0);return Math.max(Math.abs(f.c2p(e.y)-p)-t,1-3/t)})),g=!1,v=0;v<c.length;v++){o=c[v];for(var y=0;y<(o.pts||[]).length;y++){var b=m(l=o.pts[y]);b<=e.distance&&(e.distance=b,g=[v,y])}}if(!g)return!1;l=(o=c[g[0]]).pts[g[1]];var x=u.c2p(l.x,!0),_=f.c2p(l.y,!0),w=l.mrc||1;r=i.extendFlat({},e,{index:l.i,color:(d.marker||{}).color,name:d.name,x0:x-w,x1:x+w,y0:_-w,y1:_+w,spikeDistance:e.distance,hovertemplate:d.hovertemplate});var A,k=o.orig_p,E=void 0!==k?k:o.pos;return"h"===d.orientation?(A=f,r.xLabelVal=l.x,r.yLabelVal=E):(A=u,r.xLabelVal=E,r.yLabelVal=l.y),r[A._id.charAt(0)+"Spike"]=A.c2p(o.pos,!0),s(l,d,r),r}e.exports={hoverPoints:function(e,t,n,r){var i,a=e.cd[0].trace.hoveron,o=[];return-1!==a.indexOf("boxes")&&(o=o.concat(l(e,t,n,r))),-1!==a.indexOf("points")&&(i=c(e,t,n)),"closest"===r?i?[i]:o:i?(o.push(i),o):o},hoverOnBoxes:l,hoverOnPoints:c}},78992:(e,t,n)=>{"use strict";e.exports={attributes:n(10179),layoutAttributes:n(71946),supplyDefaults:n(79556).supplyDefaults,crossTraceDefaults:n(79556).crossTraceDefaults,supplyLayoutDefaults:n(77405).supplyLayoutDefaults,calc:n(39939),crossTraceCalc:n(25368).crossTraceCalc,plot:n(68077).plot,style:n(74689).style,styleOnSelect:n(74689).styleOnSelect,hoverPoints:n(28910).hoverPoints,eventData:n(37367),selectPoints:n(79214),moduleType:"trace",name:"box",basePlotModule:n(64125),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{description:["Each box spans from quartile 1 (Q1) to quartile 3 (Q3).","The second quartile (Q2, i.e. the median) is marked by a line inside the box.","The fences grow outward from the boxes' edges,","by default they span +/- 1.5 times the interquartile range (IQR: Q3-Q1),","The sample mean and standard deviation as well as notches and","the sample, outlier and suspected outliers points can be optionally","added to the box plot.","The values and positions corresponding to each boxes can be input","using two signatures.","The first signature expects users to supply the sample values in the `y`","data array for vertical boxes (`x` for horizontal boxes).","By supplying an `x` (`y`) array, one box per distinct `x` (`y`) value is drawn","If no `x` (`y`) {array} is provided, a single box is drawn.","In this case, the box is positioned with the trace `name` or with `x0` (`y0`) if provided.","The second signature expects users to supply the boxes corresponding Q1, median and Q3","statistics in the `q1`, `median` and `q3` data arrays respectively.","Other box features relying on statistics namely `lowerfence`, `upperfence`, `notchspan`","can be set directly by the users.","To have plotly compute them or to show sample points besides the boxes,","users can set the `y` data array for vertical boxes (`x` for horizontal boxes)","to a 2D array with the outer length corresponding","to the number of boxes in the traces and the inner length corresponding the sample size."].join(" ")}}},71946:e=>{"use strict";e.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc",description:["Determines how boxes at the same location coordinate","are displayed on the graph.","If *group*, the boxes are plotted next to one another","centered around the shared location.","If *overlay*, the boxes are plotted over one another,","you might need to set *opacity* to see them multiple boxes.","Has no effect on traces that have *width* set."].join(" ")},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc",description:["Sets the gap (in plot fraction) between boxes of","adjacent location coordinates.","Has no effect on traces that have *width* set."].join(" ")},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc",description:["Sets the gap (in plot fraction) between boxes of","the same location coordinate.","Has no effect on traces that have *width* set."].join(" ")}}},77405:(e,t,n)=>{"use strict";var r=n(3360),i=n(56319),a=n(71946);function o(e,t,n,i,a){for(var o=a+"Layout",s=!1,l=0;l<n.length;l++){var c=n[l];if(r.traceIs(c,o)){s=!0;break}}s&&(i(a+"mode"),i(a+"gap"),i(a+"groupgap"))}e.exports={supplyLayoutDefaults:function(e,t,n){o(0,0,n,(function(n,r){return i.coerce(e,t,a,n,r)}),"box")},_supply:o}},68077:(e,t,n)=>{"use strict";var r=n(93268),i=n(56319),a=n(14797);function o(e,t,n,a,o){var s,l,c="h"===n.orientation,u=t.val,f=t.pos,d=!!f.rangebreaks,h=a.bPos,p=a.wdPos||0,m=a.bPosPxOffset||0,g=n.whiskerwidth||0,v=!1!==n.showwhiskers,y=n.notched||!1,b=y?1-2*n.notchwidth:1;Array.isArray(a.bdPos)?(s=a.bdPos[0],l=a.bdPos[1]):(s=a.bdPos,l=a.bdPos);var x=e.selectAll("path.box").data("violin"!==n.type||n.box.visible?i.identity:[]);x.enter().append("path").style("vector-effect",o?"none":"non-scaling-stroke").attr("class","box"),x.exit().remove(),x.each((function(e){if(e.empty)return r.select(this).attr("d","M0,0Z");var t=f.c2l(e.pos+h,!0),a=f.l2p(t-s)+m,o=f.l2p(t+l)+m,x=d?(a+o)/2:f.l2p(t)+m,_=n.whiskerwidth,w=d?a*_+(1-_)*x:f.l2p(t-p)+m,A=d?o*_+(1-_)*x:f.l2p(t+p)+m,k=f.l2p(t-s*b)+m,E=f.l2p(t+l*b)+m,T="sd"===n.sizemode,M=u.c2p(T?e.mean-e.sd:e.q1,!0),S=T?u.c2p(e.mean+e.sd,!0):u.c2p(e.q3,!0),C=i.constrain(T?u.c2p(e.mean,!0):u.c2p(e.med,!0),Math.min(M,S)+1,Math.max(M,S)-1),O=void 0===e.lf||!1===n.boxpoints||T,R=u.c2p(O?e.min:e.lf,!0),N=u.c2p(O?e.max:e.uf,!0),L=u.c2p(e.ln,!0),D=u.c2p(e.un,!0);c?r.select(this).attr("d","M"+C+","+k+"V"+E+"M"+M+","+a+"V"+o+(y?"H"+L+"L"+C+","+E+"L"+D+","+o:"")+"H"+S+"V"+a+(y?"H"+D+"L"+C+","+k+"L"+L+","+a:"")+"Z"+(v?"M"+M+","+x+"H"+R+"M"+S+","+x+"H"+N+(0===g?"":"M"+R+","+w+"V"+A+"M"+N+","+w+"V"+A):"")):r.select(this).attr("d","M"+k+","+C+"H"+E+"M"+a+","+M+"H"+o+(y?"V"+L+"L"+E+","+C+"L"+o+","+D:"")+"V"+S+"H"+a+(y?"V"+D+"L"+k+","+C+"L"+a+","+L:"")+"Z"+(v?"M"+x+","+M+"V"+R+"M"+x+","+S+"V"+N+(0===g?"":"M"+w+","+R+"H"+A+"M"+w+","+N+"H"+A):""))}))}function s(e,t,n,r){var o=t.x,s=t.y,l=r.bdPos,c=r.bPos,u=n.boxpoints||n.points;i.seedPseudoRandom();var f=e.selectAll("g.points").data(u?function(e){return e.forEach((function(e){e.t=r,e.trace=n})),e}:[]);f.enter().append("g").attr("class","points"),f.exit().remove();var d=f.selectAll("path").data((function(e){var t,r,a=e.pts2,o=Math.max((e.max-e.min)/10,e.q3-e.q1),s=1e-9*o,f=.01*o,d=[],h=0;if(n.jitter){if(0===o)for(h=1,d=new Array(a.length),t=0;t<a.length;t++)d[t]=1;else for(t=0;t<a.length;t++){var p=Math.max(0,t-5),m=a[p].v,g=Math.min(a.length-1,t+5),v=a[g].v;"all"!==u&&(a[t].v<e.lf?v=Math.min(v,e.lf):m=Math.max(m,e.uf));var y=Math.sqrt(f*(g-p)/(v-m+s))||0;y=i.constrain(Math.abs(y),0,1),d.push(y),h=Math.max(y,h)}r=2*n.jitter/(h||1)}for(t=0;t<a.length;t++){var b=a[t],x=b.v,_=n.jitter?r*d[t]*(i.pseudoRandom()-.5):0,w=e.pos+c+l*(n.pointpos+_);"h"===n.orientation?(b.y=w,b.x=x):(b.x=w,b.y=x),"suspectedoutliers"===u&&x<e.uo&&x>e.lo&&(b.so=!0)}return a}));d.enter().append("path").classed("point",!0),d.exit().remove(),d.call(a.translatePoints,o,s)}function l(e,t,n,a){var o,s,l=t.val,c=t.pos,u=!!c.rangebreaks,f=a.bPos,d=a.bPosPxOffset||0,h=n.boxmean||(n.meanline||{}).visible;Array.isArray(a.bdPos)?(o=a.bdPos[0],s=a.bdPos[1]):(o=a.bdPos,s=a.bdPos);var p=e.selectAll("path.mean").data("box"===n.type&&n.boxmean||"violin"===n.type&&n.box.visible&&n.meanline.visible?i.identity:[]);p.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),p.exit().remove(),p.each((function(e){var t=c.c2l(e.pos+f,!0),i=c.l2p(t-o)+d,a=c.l2p(t+s)+d,p=u?(i+a)/2:c.l2p(t)+d,m=l.c2p(e.mean,!0),g=l.c2p(e.mean-e.sd,!0),v=l.c2p(e.mean+e.sd,!0);"h"===n.orientation?r.select(this).attr("d","M"+m+","+i+"V"+a+("sd"===h?"m0,0L"+g+","+p+"L"+m+","+i+"L"+v+","+p+"Z":"")):r.select(this).attr("d","M"+i+","+m+"H"+a+("sd"===h?"m0,0L"+p+","+g+"L"+i+","+m+"L"+p+","+v+"Z":""))}))}e.exports={plot:function(e,t,n,a){var c=e._context.staticPlot,u=t.xaxis,f=t.yaxis;i.makeTraceGroups(a,n,"trace boxes").each((function(e){var t,n,i=r.select(this),a=e[0],d=a.t,h=a.trace;(d.wdPos=d.bdPos*h.whiskerwidth,!0!==h.visible||d.empty)?i.remove():("h"===h.orientation?(t=f,n=u):(t=u,n=f),o(i,{pos:t,val:n},h,d,c),s(i,{x:u,y:f},h,d),l(i,{pos:t,val:n},h,d))}))},plotBoxAndWhiskers:o,plotPoints:s,plotBoxMean:l}},79214:e=>{"use strict";e.exports=function(e,t){var n,r,i=e.cd,a=e.xaxis,o=e.yaxis,s=[];if(!1===t)for(n=0;n<i.length;n++)for(r=0;r<(i[n].pts||[]).length;r++)i[n].pts[r].selected=0;else for(n=0;n<i.length;n++)for(r=0;r<(i[n].pts||[]).length;r++){var l=i[n].pts[r],c=a.c2p(l.x),u=o.c2p(l.y);t.contains([c,u],null,l.i,e)?(s.push({pointNumber:l.i,x:a.c2d(l.x),y:o.c2d(l.y)}),l.selected=1):l.selected=0}return s}},74689:(e,t,n)=>{"use strict";var r=n(93268),i=n(53408),a=n(14797);e.exports={style:function(e,t,n){var o=n||r.select(e).selectAll("g.trace.boxes");o.style("opacity",(function(e){return e[0].trace.opacity})),o.each((function(t){var n=r.select(this),o=t[0].trace,s=o.line.width;function l(e,t,n,r){e.style("stroke-width",t+"px").call(i.stroke,n).call(i.fill,r)}var c=n.selectAll("path.box");if("candlestick"===o.type)c.each((function(e){if(!e.empty){var t=r.select(this),n=o[e.dir];l(t,n.line.width,n.line.color,n.fillcolor),t.style("opacity",o.selectedpoints&&!e.selected?.3:1)}}));else{l(c,s,o.line.color,o.fillcolor),n.selectAll("path.mean").style({"stroke-width":s,"stroke-dasharray":2*s+"px,"+s+"px"}).call(i.stroke,o.line.color);var u=n.selectAll("path.point");a.pointStyle(u,o,e)}}))},styleOnSelect:function(e,t,n){var r=t[0].trace,i=n.selectAll("path.point");r.selectedpoints?a.selectedPointStyle(i,r):a.pointStyle(i,r,e)}}},74940:(e,t,n)=>{"use strict";var r=n(19030),i=n(85507),a=n(95323),o=n(66010).axisHoverFormat,s=n(77014).rb,l=n(77014).ay,c=n(50549),u=n(86395).extendFlat;e.exports=u({z:{valType:"data_array",editType:"calc",description:"Sets the z data."},x:u({},r.x,{impliedEdits:{xtype:"array"}}),x0:u({},r.x0,{impliedEdits:{xtype:"scaled"}}),dx:u({},r.dx,{impliedEdits:{xtype:"scaled"}}),y:u({},r.y,{impliedEdits:{ytype:"array"}}),y0:u({},r.y0,{impliedEdits:{ytype:"scaled"}}),dy:u({},r.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:u({},r.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:u({},r.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:u({},r.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:u({},r.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:u({},r.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:u({},r.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc",description:"Sets the text elements associated with each z value."},hovertext:{valType:"data_array",editType:"calc",description:"Same as `text`."},transpose:{valType:"boolean",dflt:!1,editType:"calc",description:"Transposes the z data."},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes",description:["If *array*, the heatmap's x coordinates are given by *x*","(the default behavior when `x` is provided).","If *scaled*, the heatmap's x coordinates are given by *x0* and *dx*","(the default behavior when `x` is not provided)."].join(" ")},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes",description:["If *array*, the heatmap's y coordinates are given by *y*","(the default behavior when `y` is provided)","If *scaled*, the heatmap's y coordinates are given by *y0* and *dy*","(the default behavior when `y` is not provided)"].join(" ")},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc",description:["Picks a smoothing algorithm use to smooth `z` data."].join(" ")},hoverongaps:{valType:"boolean",dflt:!0,editType:"none",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the `z` data have hover labels associated with them."].join(" ")},connectgaps:{valType:"boolean",editType:"calc",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the `z` data are filled in.","It is defaulted to true if `z` is a","one dimensional array and `zsmooth` is not false;","otherwise it is defaulted to false."].join(" ")},xgap:{valType:"number",dflt:0,min:0,editType:"plot",description:"Sets the horizontal gap (in pixels) between bricks."},ygap:{valType:"number",dflt:0,min:0,editType:"plot",description:"Sets the vertical gap (in pixels) between bricks."},xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z",1),hovertemplate:s(),texttemplate:l({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:a({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style",description:"Sets the text font."}),showlegend:u({},i.showlegend,{dflt:!1}),zorder:r.zorder},{transforms:void 0},c("",{cLetter:"z",autoColorDflt:!1}))},88252:(e,t,n)=>{"use strict";var r=n(3360),i=n(56319),a=n(596),o=n(29850),s=n(73980),l=n(57737),c=n(86767),u=n(14431),f=n(505),d=n(80056),h=n(50570),p=n(33351).BADNUM;function m(e){for(var t=[],n=e.length,r=0;r<n;r++){var i=e[r];i!==p&&t.push(i)}return t}e.exports=function(e,t){var n,g,v,y,b,x,_,w,A,k,E,T=a.getFromId(e,t.xaxis||"x"),M=a.getFromId(e,t.yaxis||"y"),S=r.traceIs(t,"contour"),C=r.traceIs(t,"histogram"),O=r.traceIs(t,"gl2d"),R=S?"best":t.zsmooth;if(T._minDtick=0,M._minDtick=0,C)y=(E=s(e,t)).orig_x,n=E.x,g=E.x0,v=E.dx,w=E.orig_y,b=E.y,x=E.y0,_=E.dy,A=E.z;else{var N=t.z;i.isArray1D(N)?(c(t,T,M,"x","y",["z"]),n=t._x,b=t._y,N=t._z):(y=t.x?T.makeCalcdata(t,"x"):[],w=t.y?M.makeCalcdata(t,"y"):[],n=o(t,T,"x",y).vals,b=o(t,M,"y",w).vals,t._x=n,t._y=b),g=t.x0,v=t.dx,x=t.y0,_=t.dy,A=u(N,t,T,M)}function L(e){R=t._input.zsmooth=t.zsmooth=!1,i.warn('cannot use zsmooth: "fast": '+e)}function D(e){if(e.length>1){var t=(e[e.length-1]-e[0])/(e.length-1),n=Math.abs(t/100);for(k=0;k<e.length-1;k++)if(Math.abs(e[k+1]-e[k]-t)>n)return!1}return!0}(T.rangebreaks||M.rangebreaks)&&(A=function(e,t,n){for(var r=[],i=-1,a=0;a<n.length;a++)if(t[a]!==p){r[++i]=[];for(var o=0;o<n[a].length;o++)e[o]!==p&&r[i].push(n[a][o])}return r}(n,b,A),C||(n=m(n),b=m(b),t._x=n,t._y=b)),C||!S&&!t.connectgaps||(t._emptypoints=d(A),f(A,t._emptypoints)),t._islinear=!1,"log"===T.type||"log"===M.type?"fast"===R&&L("log axis found"):D(n)?D(b)?t._islinear=!0:"fast"===R&&L("y scale is not linear"):"fast"===R&&L("x scale is not linear");var P=i.maxRowLength(A),I="scaled"===t.xtype?"":n,F=h(t,I,g,v,P,T),z="scaled"===t.ytype?"":b,j=h(t,z,x,_,A.length,M);O||(t._extremes[T._id]=a.findExtremes(T,F),t._extremes[M._id]=a.findExtremes(M,j));var B={x:F,y:j,z:A,text:t._text||t.text,hovertext:t._hovertext||t.hovertext};if(t.xperiodalignment&&y&&(B.orig_x=y),t.yperiodalignment&&w&&(B.orig_y=w),I&&I.length===F.length-1&&(B.xCenter=I),z&&z.length===j.length-1&&(B.yCenter=z),C&&(B.xRanges=E.xRanges,B.yRanges=E.yRanges,B.pts=E.pts),S||l(e,t,{vals:A,cLetter:"z"}),S&&t.contours&&"heatmap"===t.contours.coloring){var U={type:"contour"===t.type?"heatmap":"histogram2d",xcalendar:t.xcalendar,ycalendar:t.ycalendar};B.xfill=h(U,I,g,v,P,T),B.yfill=h(U,z,x,_,A.length,M)}return[B]}},14431:(e,t,n)=>{"use strict";var r=n(5605),i=n(56319),a=n(33351).BADNUM;e.exports=function(e,t,n,o){var s,l,c,u,f,d;function h(e){if(r(e))return+e}if(t&&t.transpose){for(s=0,f=0;f<e.length;f++)s=Math.max(s,e[f].length);if(0===s)return!1;c=function(e){return e.length},u=function(e,t,n){return(e[n]||[])[t]}}else s=e.length,c=function(e,t){return e[t].length},u=function(e,t,n){return(e[t]||[])[n]};var p=function(e,t,n){return t===a||n===a?a:u(e,t,n)};function m(e){if(t&&"carpet"!==t.type&&"contourcarpet"!==t.type&&e&&"category"===e.type&&t["_"+e._id.charAt(0)].length){var n=e._id.charAt(0),r={},o=t["_"+n+"CategoryMap"]||t[n];for(f=0;f<o.length;f++)r[o[f]]=f;return function(t){var n=r[e._categories[t]];return n+1?n:a}}return i.identity}var g=m(n),v=m(o);o&&"category"===o.type&&(s=o._categories.length);var y=new Array(s);for(f=0;f<s;f++)for(l=n&&"category"===n.type?n._categories.length:c(e,f),y[f]=new Array(l),d=0;d<l;d++)y[f][d]=h(p(e,v(f),g(d)));return y}},8261:e=>{"use strict";e.exports={min:"zmin",max:"zmax"}},86767:(e,t,n)=>{"use strict";var r=n(56319),i=n(33351).BADNUM,a=n(29850);e.exports=function(e,t,n,o,s,l){var c=e._length,u=t.makeCalcdata(e,o),f=n.makeCalcdata(e,s);u=a(e,t,o,u).vals,f=a(e,n,s,f).vals;var d,h,p,m,g=e.text,v=void 0!==g&&r.isArray1D(g),y=e.hovertext,b=void 0!==y&&r.isArray1D(y),x=r.distinctVals(u),_=x.vals,w=r.distinctVals(f),A=w.vals,k=[],E=A.length,T=_.length;for(d=0;d<l.length;d++)k[d]=r.init2dArray(E,T);v&&(p=r.init2dArray(E,T)),b&&(m=r.init2dArray(E,T));var M=r.init2dArray(E,T);for(d=0;d<c;d++)if(u[d]!==i&&f[d]!==i){var S=r.findBin(u[d]+x.minDiff/2,_),C=r.findBin(f[d]+w.minDiff/2,A);for(h=0;h<l.length;h++){var O=e[l[h]];k[h][C][S]=O[d],M[C][S]=d}v&&(p[C][S]=g[d]),b&&(m[C][S]=y[d])}for(e["_"+o]=_,e["_"+s]=A,h=0;h<l.length;h++)e["_"+l[h]]=k[h];v&&(e._text=p),b&&(e._hovertext=m),t&&"category"===t.type&&(e["_"+o+"CategoryMap"]=_.map((function(e){return t._categories[e]}))),n&&"category"===n.type&&(e["_"+s+"CategoryMap"]=A.map((function(e){return n._categories[e]}))),e._after2before=M}},38987:(e,t,n)=>{"use strict";var r=n(56319),i=n(63647),a=n(5924),o=n(119),s=n(87765),l=n(14530),c=n(74940);e.exports=function(e,t,n,u){function f(n,i){return r.coerce(e,t,c,n,i)}i(e,t,f,u)?(o(e,t,u,f),f("xhoverformat"),f("yhoverformat"),f("text"),f("hovertext"),f("hovertemplate"),a(f,u),s(e,t,f,u),f("hoverongaps"),f("connectgaps",r.isArray1D(t.z)&&!1!==t.zsmooth),l(e,t,u,f,{prefix:"",cLetter:"z"}),f("zorder")):t.visible=!1}},80056:(e,t,n)=>{"use strict";var r=n(56319).maxRowLength;e.exports=function(e){var t,n,i,a,o,s,l,c,u=[],f={},d=[],h=e[0],p=[],m=[0,0,0],g=r(e);for(n=0;n<e.length;n++)for(t=p,p=h,h=e[n+1]||[],i=0;i<g;i++)void 0===p[i]&&((s=(void 0!==p[i-1]?1:0)+(void 0!==p[i+1]?1:0)+(void 0!==t[i]?1:0)+(void 0!==h[i]?1:0))?(0===n&&s++,0===i&&s++,n===e.length-1&&s++,i===p.length-1&&s++,s<4&&(f[[n,i]]=[n,i,s]),u.push([n,i,s])):d.push([n,i]));for(;d.length;){for(l={},c=!1,o=d.length-1;o>=0;o--)(s=((f[[(n=(a=d[o])[0])-1,i=a[1]]]||m)[2]+(f[[n+1,i]]||m)[2]+(f[[n,i-1]]||m)[2]+(f[[n,i+1]]||m)[2])/20)&&(l[a]=[n,i,s],d.splice(o,1),c=!0);if(!c)throw"findEmpties iterated with no new neighbors";for(a in l)f[a]=l[a],u.push(l[a])}return u.sort((function(e,t){return t[2]-e[2]}))}},59147:(e,t,n)=>{"use strict";var r=n(17911),i=n(56319),a=i.isArrayOrTypedArray,o=n(596),s=n(74062).extractOpts;e.exports=function(e,t,n,l,c){c||(c={});var u,f,d,h,p=c.isContour,m=e.cd[0],g=m.trace,v=e.xa,y=e.ya,b=m.x,x=m.y,_=m.z,w=m.xCenter,A=m.yCenter,k=m.zmask,E=g.zhoverformat,T=b,M=x;if(!1!==e.index){try{d=Math.round(e.index[1]),h=Math.round(e.index[0])}catch(t){return void i.error("Error hovering on heatmap, pointNumber must be [row,col], found:",e.index)}if(d<0||d>=_[0].length||h<0||h>_.length)return}else{if(r.inbox(t-b[0],t-b[b.length-1],0)>0||r.inbox(n-x[0],n-x[x.length-1],0)>0)return;if(p){var S;for(T=[2*b[0]-b[1]],S=1;S<b.length;S++)T.push((b[S]+b[S-1])/2);for(T.push([2*b[b.length-1]-b[b.length-2]]),M=[2*x[0]-x[1]],S=1;S<x.length;S++)M.push((x[S]+x[S-1])/2);M.push([2*x[x.length-1]-x[x.length-2]])}d=Math.max(0,Math.min(T.length-2,i.findBin(t,T))),h=Math.max(0,Math.min(M.length-2,i.findBin(n,M)))}var C,O,R=v.c2p(b[d]),N=v.c2p(b[d+1]),L=y.c2p(x[h]),D=y.c2p(x[h+1]);p?(C=m.orig_x||b,O=m.orig_y||x,N=R,u=C[d],D=L,f=O[h]):(C=m.orig_x||w||b,O=m.orig_y||A||x,u=w?C[d]:(C[d]+C[d+1])/2,f=A?O[h]:(O[h]+O[h+1])/2,v&&"category"===v.type&&(u=b[d]),y&&"category"===y.type&&(f=x[h]),g.zsmooth&&(R=N=v.c2p(u),L=D=y.c2p(f)));var P=_[h][d];if(k&&!k[h][d]&&(P=void 0),void 0!==P||g.hoverongaps){var I;a(m.hovertext)&&a(m.hovertext[h])?I=m.hovertext[h][d]:a(m.text)&&a(m.text[h])&&(I=m.text[h][d]);var F=s(g),z={type:"linear",range:[F.min,F.max],hoverformat:E,_separators:v._separators,_numFormat:v._numFormat},j=o.tickText(z,P,"hover").text;return[i.extendFlat(e,{index:g._after2before?g._after2before[h][d]:[h,d],distance:e.maxHoverDistance,spikeDistance:e.maxSpikeDistance,x0:R,x1:N,y0:L,y1:D,xLabelVal:u,yLabelVal:f,zLabelVal:P,zLabel:j,text:I})]}}},79441:(e,t,n)=>{"use strict";e.exports={attributes:n(74940),supplyDefaults:n(38987),calc:n(88252),plot:n(62158),colorbar:n(8261),style:n(37076),hoverPoints:n(59147),moduleType:"trace",name:"heatmap",basePlotModule:n(64125),categories:["cartesian","svg","2dMap","showLegend"],meta:{description:["The data that describes the heatmap value-to-color mapping","is set in `z`.","Data in `z` can either be a {2D array} of values (ragged or not)","or a 1D array of values.","In the case where `z` is a {2D array},","say that `z` has N rows and M columns.","Then, by default, the resulting heatmap will have N partitions along","the y axis and M partitions along the x axis.","In other words, the i-th row/ j-th column cell in `z`","is mapped to the i-th partition of the y axis","(starting from the bottom of the plot) and the j-th partition","of the x-axis (starting from the left of the plot).","This behavior can be flipped by using `transpose`.","Moreover, `x` (`y`) can be provided with M or M+1 (N or N+1) elements.","If M (N), then the coordinates correspond to the center of the","heatmap cells and the cells have equal width.","If M+1 (N+1), then the coordinates correspond to the edges of the","heatmap cells.","In the case where `z` is a 1D {array}, the x and y coordinates must be","provided in `x` and `y` respectively to form data triplets."].join(" ")}}},505:(e,t,n)=>{"use strict";var r=n(56319),i=[[-1,0],[1,0],[0,-1],[0,1]];function a(e){return.5-.25*Math.min(1,.5*e)}function o(e,t,n){var r,a,o,s,l,c,u,f,d,h,p,m,g,v=0;for(s=0;s<t.length;s++){for(a=(r=t[s])[0],o=r[1],p=e[a][o],h=0,d=0,l=0;l<4;l++)(u=e[a+(c=i[l])[0]])&&void 0!==(f=u[o+c[1]])&&(0===h?m=g=f:(m=Math.min(m,f),g=Math.max(g,f)),d++,h+=f);if(0===d)throw"iterateInterp2d order is wrong: no defined neighbors";e[a][o]=h/d,void 0===p?d<4&&(v=1):(e[a][o]=(1+n)*e[a][o]-n*p,g>m&&(v=Math.max(v,Math.abs(e[a][o]-p)/(g-m))))}return v}e.exports=function(e,t){var n,i=1;for(o(e,t),n=0;n<t.length&&!(t[n][2]<4);n++);for(t=t.slice(n),n=0;n<100&&i>.01;n++)i=o(e,t,a(i));return i>.01&&r.log("interp2d didn't converge quickly",i),e}},5924:(e,t,n)=>{"use strict";var r=n(56319);e.exports=function(e,t){e("texttemplate");var n=r.extendFlat({},t.font,{color:"auto",size:"auto"});r.coerceFont(e,"textfont",n)}},50570:(e,t,n)=>{"use strict";var r=n(3360),i=n(56319).isArrayOrTypedArray;e.exports=function(e,t,n,a,o,s){var l,c,u,f=[],d=r.traceIs(e,"contour"),h=r.traceIs(e,"histogram"),p=r.traceIs(e,"gl2d");if(i(t)&&t.length>1&&!h&&"category"!==s.type){var m=t.length;if(!(m<=o))return d?t.slice(0,o):t.slice(0,o+1);if(d||p)f=Array.from(t).slice(0,o);else if(1===o)f="log"===s.type?[.5*t[0],2*t[0]]:[t[0]-.5,t[0]+.5];else if("log"===s.type){for(f=[Math.pow(t[0],1.5)/Math.pow(t[1],.5)],u=1;u<m;u++)f.push(Math.sqrt(t[u-1]*t[u]));f.push(Math.pow(t[m-1],1.5)/Math.pow(t[m-2],.5))}else{for(f=[1.5*t[0]-.5*t[1]],u=1;u<m;u++)f.push(.5*(t[u-1]+t[u]));f.push(1.5*t[m-1]-.5*t[m-2])}if(m<o){var g,v=f[f.length-1];if("log"===s.type)for(g=v/f[f.length-2],u=m;u<o;u++)v*=g,f.push(v);else for(g=v-f[f.length-2],u=m;u<o;u++)v+=g,f.push(v)}}else{var y=e[s._id.charAt(0)+"calendar"];if(h)l=s.r2c(n,0,y);else if(i(t)&&1===t.length)l=t[0];else if(void 0===n)l=0;else{l=("log"===s.type?s.d2c:s.r2c)(n,0,y)}for(c=a||1,u=d||p?0:-.5;u<o;u++)f.push(l+c*u)}return f}},62158:(e,t,n)=>{"use strict";var r=n(93268),i=n(3707),a=n(3360),o=n(14797),s=n(596),l=n(56319),c=n(56953),u=n(75852),f=n(53408),d=n(74062).extractOpts,h=n(74062).makeColorScaleFuncFromTrace,p=n(81818),m=n(12564).LINE_SPACING,g=n(90738),v=n(68435).STYLE,y="heatmap-label";function b(e){return e.selectAll("g."+y)}function x(e){b(e).remove()}function _(e,t){var n=t.length-2,r=l.constrain(l.findBin(e,t),0,n),i=t[r],a=t[r+1],o=l.constrain(r+(e-i)/(a-i)-.5,0,n),s=Math.round(o),c=Math.abs(o-s);return o&&o!==n&&c?{bin0:s,frac:c,bin1:Math.round(s+c/(o-s))}:{bin0:s,bin1:s,frac:0}}function w(e,t){var n=t.length-1,r=l.constrain(l.findBin(e,t),0,n),i=t[r],a=(e-i)/(t[r+1]-i)||0;return a<=0?{bin0:r,bin1:r,frac:0}:a<.5?{bin0:r,bin1:r+1,frac:a}:{bin0:r+1,bin1:r,frac:1-a}}function A(e,t,n){e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=Math.round(255*n[3])}e.exports=function(e,t,n,k){var E=t.xaxis,T=t.yaxis;l.makeTraceGroups(k,n,"hm").each((function(t){var n,k,M,S,C,O,R,N,L=r.select(this),D=t[0],P=D.trace,I=P.xgap||0,F=P.ygap||0,z=D.z,j=D.x,B=D.y,U=D.xCenter,$=D.yCenter,q=a.traceIs(P,"contour"),H=q?"best":P.zsmooth,V=z.length,W=l.maxRowLength(z),G=!1,Y=!1;for(O=0;void 0===n&&O<j.length-1;)n=E.c2p(j[O]),O++;for(O=j.length-1;void 0===k&&O>0;)k=E.c2p(j[O]),O--;for(k<n&&(M=k,k=n,n=M,G=!0),O=0;void 0===S&&O<B.length-1;)S=T.c2p(B[O]),O++;for(O=B.length-1;void 0===C&&O>0;)C=T.c2p(B[O]),O--;C<S&&(M=S,S=C,C=M,Y=!0),q&&(U=j,$=B,j=D.xfill,B=D.yfill);var X="default";if(H?X="best"===H?"smooth":"fast":P._islinear&&0===I&&0===F&&g()&&(X="fast"),"fast"!==X){var K="best"===H?0:.5;n=Math.max(-K*E._length,n),k=Math.min((1+K)*E._length,k),S=Math.max(-K*T._length,S),C=Math.min((1+K)*T._length,C)}var Z,J,Q=Math.round(k-n),ee=Math.round(C-S);if(n>=E._length||k<=0||S>=T._length||C<=0)return L.selectAll("image").data([]).exit().remove(),void x(L);"fast"===X?(Z=W,J=V):(Z=Q,J=ee);var te=document.createElement("canvas");te.width=Z,te.height=J;var ne,re,ie=te.getContext("2d",{willReadFrequently:!0}),ae=h(P,{noNumericCheck:!0,returnArray:!0});"fast"===X?(ne=G?function(e){return W-1-e}:l.identity,re=Y?function(e){return V-1-e}:l.identity):(ne=function(e){return l.constrain(Math.round(E.c2p(j[e])-n),0,Q)},re=function(e){return l.constrain(Math.round(T.c2p(B[e])-S),0,ee)});var oe,se,le,ce,ue=re(0),fe=[ue,ue],de=G?0:1,he=Y?0:1,pe=0,me=0,ge=0,ve=0;function ye(e,t){if(void 0!==e){var n=ae(e);return n[0]=Math.round(n[0]),n[1]=Math.round(n[1]),n[2]=Math.round(n[2]),pe+=t,me+=n[0]*t,ge+=n[1]*t,ve+=n[2]*t,n}return[0,0,0,0]}function be(e,t,n,r){var i=e[n.bin0];if(void 0===i)return ye(void 0,1);var a,o=e[n.bin1],s=t[n.bin0],l=t[n.bin1],c=o-i||0,u=s-i||0;return a=void 0===o?void 0===l?0:void 0===s?2*(l-i):2*(2*l-s-i)/3:void 0===l?void 0===s?0:2*(2*i-o-s)/3:void 0===s?2*(2*l-o-i)/3:l+i-o-s,ye(i+n.frac*c+r.frac*(u+n.frac*a))}if("default"!==X){var xe,_e=0;try{xe=new Uint8Array(Z*J*4)}catch(e){xe=new Array(Z*J*4)}if("smooth"===X){var we,Ae,ke,Ee=U||j,Te=$||B,Me=new Array(Ee.length),Se=new Array(Te.length),Ce=new Array(Q),Oe=U?w:_,Re=$?w:_;for(O=0;O<Ee.length;O++)Me[O]=Math.round(E.c2p(Ee[O])-n);for(O=0;O<Te.length;O++)Se[O]=Math.round(T.c2p(Te[O])-S);for(O=0;O<Q;O++)Ce[O]=Oe(O,Me);for(R=0;R<ee;R++)for(Ae=z[(we=Re(R,Se)).bin0],ke=z[we.bin1],O=0;O<Q;O++,_e+=4)A(xe,_e,ce=be(Ae,ke,Ce[O],we))}else for(R=0;R<V;R++)for(le=z[R],fe=re(R),O=0;O<W;O++)ce=ye(le[O],1),A(xe,_e=4*(fe*W+ne(O)),ce);var Ne=ie.createImageData(Z,J);try{Ne.data.set(xe)}catch(e){var Le=Ne.data,De=Le.length;for(R=0;R<De;R++)Le[R]=xe[R]}ie.putImageData(Ne,0,0)}else{var Pe=Math.floor(I/2),Ie=Math.floor(F/2);for(R=0;R<V;R++)if(le=z[R],fe.reverse(),fe[he]=re(R+1),fe[0]!==fe[1]&&void 0!==fe[0]&&void 0!==fe[1])for(oe=[se=ne(0),se],O=0;O<W;O++)oe.reverse(),oe[de]=ne(O+1),oe[0]!==oe[1]&&void 0!==oe[0]&&void 0!==oe[1]&&(ce=ye(le[O],(oe[1]-oe[0])*(fe[1]-fe[0])),ie.fillStyle="rgba("+ce.join(",")+")",ie.fillRect(oe[0]+Pe,fe[0]+Ie,oe[1]-oe[0]-I,fe[1]-fe[0]-F))}me=Math.round(me/pe),ge=Math.round(ge/pe),ve=Math.round(ve/pe);var Fe=i("rgb("+me+","+ge+","+ve+")");e._hmpixcount=(e._hmpixcount||0)+pe,e._hmlumcount=(e._hmlumcount||0)+pe*Fe.getLuminance();var ze=L.selectAll("image").data(t);ze.enter().append("svg:image").attr({xmlns:p.svg,preserveAspectRatio:"none"}),ze.attr({height:ee,width:Q,x:n,y:S,"xlink:href":te.toDataURL("image/png")}),"fast"!==X||H||ze.attr("style",v),x(L);var je=P.texttemplate;if(je){var Be=d(P),Ue={type:"linear",range:[Be.min,Be.max],_separators:E._separators,_numFormat:E._numFormat},$e="histogram2dcontour"===P.type,qe="contour"===P.type,He=qe?V-1:V,Ve=qe?1:0,We=qe?W-1:W,Ge=[];for(O=qe?1:0;O<He;O++){var Ye;if(qe)Ye=D.y[O];else if($e){if(0===O||O===V-1)continue;Ye=D.y[O]}else if(D.yCenter)Ye=D.yCenter[O];else{if(O+1===V&&void 0===D.y[O+1])continue;Ye=(D.y[O]+D.y[O+1])/2}var Xe=Math.round(T.c2p(Ye));if(!(0>Xe||Xe>T._length))for(R=Ve;R<We;R++){var Ke;if(qe)Ke=D.x[R];else if($e){if(0===R||R===W-1)continue;Ke=D.x[R]}else if(D.xCenter)Ke=D.xCenter[R];else{if(R+1===W&&void 0===D.x[R+1])continue;Ke=(D.x[R]+D.x[R+1])/2}var Ze=Math.round(E.c2p(Ke));if(!(0>Ze||Ze>E._length)){var Je=u({x:Ke,y:Ye},P,e._fullLayout);Je.x=Ke,Je.y=Ye;var Qe=D.z[O][R];void 0===Qe?(Je.z="",Je.zLabel=""):(Je.z=Qe,Je.zLabel=s.tickText(Ue,Qe,"hover").text);var et=D.text&&D.text[O]&&D.text[O][R];void 0!==et&&!1!==et||(et=""),Je.text=et;var tt=l.texttemplateString(je,Je,e._fullLayout._d3locale,Je,P._meta||{});if(tt){var nt=tt.split("<br>"),rt=nt.length,it=0;for(N=0;N<rt;N++)it=Math.max(it,nt[N].length);Ge.push({l:rt,c:it,t:tt,x:Ze,y:Xe,z:Qe})}}}}var at=P.textfont,ot=at.size,st=e._fullLayout.font.size;if(!ot||"auto"===ot){var lt=1/0,ct=1/0,ut=0,ft=0;for(N=0;N<Ge.length;N++){var dt=Ge[N];if(ut=Math.max(ut,dt.l),ft=Math.max(ft,dt.c),N<Ge.length-1){var ht=Ge[N+1],pt=Math.abs(ht.x-dt.x),mt=Math.abs(ht.y-dt.y);pt&&(lt=Math.min(lt,pt)),mt&&(ct=Math.min(ct,mt))}}isFinite(lt)&&isFinite(ct)?(lt-=I,ct-=F,lt/=ft,ct/=ut,lt/=m/2,ct/=m,ot=Math.min(Math.floor(lt),Math.floor(ct),st)):ot=st}if(ot<=0||!isFinite(ot))return;b(L).data(Ge).enter().append("g").classed(y,1).append("text").attr("text-anchor","middle").each((function(t){var n=r.select(this),i=at.color;i&&"auto"!==i||(i=f.contrast(void 0===t.z?e._fullLayout.plot_bgcolor:"rgba("+ae(t.z).join()+")")),n.attr("data-notex",1).call(c.positionText,function(e){return e.x}(t),function(e){return e.y-ot*(e.l*m/2-1)}(t)).call(o.font,{family:at.family,size:ot,color:i,weight:at.weight,style:at.style,variant:at.variant,textcase:at.textcase,lineposition:at.lineposition,shadow:at.shadow}).text(t.t).call(c.convertToTspans,e)}))}}))}},37076:(e,t,n)=>{"use strict";var r=n(93268);e.exports=function(e){r.select(e).selectAll(".hm image").style("opacity",(function(e){return e.trace.opacity}))}},87765:e=>{"use strict";e.exports=function(e,t,n){!1===n("zsmooth")&&(n("xgap"),n("ygap")),n("zhoverformat")}},63647:(e,t,n)=>{"use strict";var r=n(5605),i=n(56319),a=n(3360);function o(e,t){var n=t(e);return"scaled"===(n?t(e+"type","array"):"scaled")&&(t(e+"0"),t("d"+e)),n}e.exports=function(e,t,n,s,l,c){var u,f,d=n("z");if(l=l||"x",c=c||"y",void 0===d||!d.length)return 0;if(i.isArray1D(d)){u=n(l),f=n(c);var h=i.minRowLength(u),p=i.minRowLength(f);if(0===h||0===p)return 0;t._length=Math.min(h,p,d.length)}else{if(u=o(l,n),f=o(c,n),!function(e){for(var t,n=!0,a=!1,o=!1,s=0;s<e.length;s++){if(t=e[s],!i.isArrayOrTypedArray(t)){n=!1;break}t.length>0&&(a=!0);for(var l=0;l<t.length;l++)if(r(t[l])){o=!0;break}}return n&&a&&o}(d))return 0;n("transpose"),t._length=null}return"heatmapgl"===e.type||a.getComponentMethod("calendars","handleTraceDefaults")(e,t,[l,c],s),!0}},46818:(e,t,n)=>{"use strict";var r=n(22523),i=n(66010).axisHoverFormat,a=n(77014).rb,o=n(77014).ay,s=n(95323),l=n(3860),c=n(91102),u=n(86395).extendFlat;e.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the sample data to be binned on the x axis."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the sample data to be binned on the y axis."].join(" ")},xhoverformat:i("x"),yhoverformat:i("y"),text:u({},r.text,{description:["Sets hover text elements associated with each bar.","If a single string, the same string appears over all bars.","If an array of string, the items are mapped in order to the","this trace's coordinates."].join(" ")}),hovertext:u({},r.hovertext,{description:"Same as `text`."}),orientation:r.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc",description:["Specifies the binning function used for this histogram trace.","If *count*, the histogram values are computed by counting the","number of values lying inside each bin.","If *sum*, *avg*, *min*, *max*,","the histogram values are computed using","the sum, the average, the minimum or the maximum","of the values lying inside each bin respectively."].join(" ")},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc",description:["Specifies the type of normalization used for this histogram trace.","If **, the span of each bar corresponds to the number of","occurrences (i.e. the number of data points lying inside the bins).","If *percent* / *probability*, the span of each bar corresponds to","the percentage / fraction of occurrences with respect to the total","number of sample points","(here, the sum of all bin HEIGHTS equals 100% / 1).","If *density*, the span of each bar corresponds to the number of","occurrences in a bin divided by the size of the bin interval","(here, the sum of all bin AREAS equals the","total number of sample points).","If *probability density*, the area of each bar corresponds to the","probability that an event will fall into the corresponding bin","(here, the sum of all bin AREAS equals 1)."].join(" ")},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc",description:["If true, display the cumulative distribution by summing the","binned values. Use the `direction` and `centralbin` attributes","to tune the accumulation method.","Note: in this mode, the *density* `histnorm` settings behave","the same as their equivalents without *density*:","** and *density* both rise to the number of data points, and","*probability* and *probability density* both rise to the","number of sample points."].join(" ")},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc",description:["Only applies if cumulative is enabled.","If *increasing* (default) we sum all prior bins, so the result","increases from left to right. If *decreasing* we sum later bins","so the result decreases from left to right."].join(" ")},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc",description:["Only applies if cumulative is enabled.","Sets whether the current bin is included, excluded, or has half","of its value included in the current cumulative value.","*include* is the default for compatibility with various other","tools, however it introduces a half-bin bias to the results.","*exclude* makes the opposite half-bin bias, and *half* removes","it."].join(" ")},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc",description:["Specifies the maximum number of desired bins. This value will be used","in an algorithm that will decide the optimal bin size such that the","histogram best visualizes the distribution of the data.","Ignored if `xbins.size` is provided."].join(" ")},xbins:l("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc",description:["Specifies the maximum number of desired bins. This value will be used","in an algorithm that will decide the optimal bin size such that the","histogram best visualizes the distribution of the data.","Ignored if `ybins.size` is provided."].join(" ")},ybins:l("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc",description:["Obsolete: since v1.42 each bin attribute is auto-determined","separately and `autobinx` is not needed. However, we accept","`autobinx: true` or `false` and will update `xbins` accordingly","before deleting `autobinx` from the trace."].join(" ")},autobiny:{valType:"boolean",dflt:null,editType:"calc",description:["Obsolete: since v1.42 each bin attribute is auto-determined","separately and `autobiny` is not needed. However, we accept","`autobiny: true` or `false` and will update `ybins` accordingly","before deleting `autobiny` from the trace."].join(" ")},bingroup:{valType:"string",dflt:"",editType:"calc",description:["Set a group of histogram traces which will have compatible bin settings.","Note that traces on the same subplot and with the same *orientation*","under `barmode` *stack*, *relative* and *group* are forced into the same bingroup,","Using `bingroup`, traces under `barmode` *overlay* and on different axes","(of the same axis type) can have compatible bin settings.","Note that histogram and histogram2d* trace can share the same `bingroup`"].join(" ")},hovertemplate:a({},{keys:c.eventDataKeys}),texttemplate:o({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:u({},r.textposition,{arrayOk:!1}),textfont:s({arrayOk:!1,editType:"plot",colorEditType:"style",description:"Sets the text font."}),outsidetextfont:s({arrayOk:!1,editType:"plot",colorEditType:"style",description:"Sets the font used for `text` lying outside the bar."}),insidetextfont:s({arrayOk:!1,editType:"plot",colorEditType:"style",description:"Sets the font used for `text` lying inside the bar."}),insidetextanchor:r.insidetextanchor,textangle:r.textangle,cliponaxis:r.cliponaxis,constraintext:r.constraintext,marker:r.marker,offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup,selected:r.selected,unselected:r.unselected,_deprecated:{bardir:r._deprecated.bardir},zorder:r.zorder}},79060:e=>{"use strict";e.exports=function(e,t){for(var n=e.length,r=0,i=0;i<n;i++)t[i]?(e[i]/=t[i],r+=e[i]):e[i]=null;return r}},3860:e=>{"use strict";e.exports=function(e,t){return{start:{valType:"any",editType:"calc",description:["Sets the starting value for the",e,"axis bins. Defaults to the minimum data value,","shifted down if necessary to make nice round values","and to remove ambiguous bin edges. For example, if most of the","data is integers we shift the bin edges 0.5 down, so a `size`","of 5 would have a default `start` of -0.5, so it is clear","that 0-4 are in the first bin, 5-9 in the second, but","continuous data gets a start of 0 and bins [0,5), [5,10) etc.","Dates behave similarly, and `start` should be a date string.","For category data, `start` is based on the category serial","numbers, and defaults to -0.5.",t?"If multiple non-overlaying histograms share a subplot, the first explicit `start` is used exactly and all others are shifted down (if necessary) to differ from that one by an integer number of bins.":""].join(" ")},end:{valType:"any",editType:"calc",description:["Sets the end value for the",e,"axis bins. The last bin may not end exactly at this value,","we increment the bin edge by `size` from `start` until we","reach or exceed `end`. Defaults to the maximum data value.","Like `start`, for dates use a date string, and for category","data `end` is based on the category serial numbers."].join(" ")},size:{valType:"any",editType:"calc",description:["Sets the size of each",e,"axis bin.","Default behavior: If `nbins"+e+"` is 0 or omitted,","we choose a nice round bin size such that the number of bins","is about the same as the typical number of samples in each bin.","If `nbins"+e+"` is provided, we choose a nice round","bin size giving no more than that many bins.","For date data, use milliseconds or *M<n>* for months, as in","`axis.dtick`. For category data, the number of categories to","bin together (always defaults to 1).",t?"If multiple non-overlaying histograms share a subplot, the first explicit `size` is used and all others discarded. If no `size` is provided,the sample data from all traces is combined to determine `size` as described above.":""].join(" ")},editType:"calc"}}},75084:(e,t,n)=>{"use strict";var r=n(5605);e.exports={count:function(e,t,n){return n[e]++,1},sum:function(e,t,n,i){var a=i[t];return r(a)?(a=Number(a),n[e]+=a,a):0},avg:function(e,t,n,i,a){var o=i[t];return r(o)&&(o=Number(o),n[e]+=o,a[e]++),0},min:function(e,t,n,i){var a=i[t];if(r(a)){if(a=Number(a),!r(n[e]))return n[e]=a,a;if(n[e]>a){var o=a-n[e];return n[e]=a,o}}return 0},max:function(e,t,n,i){var a=i[t];if(r(a)){if(a=Number(a),!r(n[e]))return n[e]=a,a;if(n[e]<a){var o=a-n[e];return n[e]=a,o}}return 0}}},23190:(e,t,n)=>{"use strict";var r=n(33351),i=r.ONEAVGYEAR,a=r.ONEAVGMONTH,o=r.ONEDAY,s=r.ONEHOUR,l=r.ONEMIN,c=r.ONESEC,u=n(596).tickIncrement;function f(e,t,n,r){if(e*t<=0)return 1/0;for(var i=Math.abs(t-e),a="date"===n.type,o=d(i,a),s=0;s<10;s++){var l=d(80*o,a);if(o===l)break;if(!h(l,e,t,a,n,r))break;o=l}return o}function d(e,t){return t&&e>c?e>o?e>1.1*i?i:e>1.1*a?a:o:e>s?s:e>l?l:c:Math.pow(10,Math.floor(Math.log(e)/Math.LN10))}function h(e,t,n,r,a,s){if(r&&e>o){var l=p(t,a,s),c=p(n,a,s),u=e===i?0:1;return l[u]!==c[u]}return Math.floor(n/e)-Math.floor(t/e)>.1}function p(e,t,n){var r=t.c2d(e,i,n).split("-");return""===r[0]&&(r.unshift(),r[0]="-"+r[0]),r}e.exports=function(e,t,n,r,a){var s,l,c=-1.1*t,d=-.1*t,h=e-d,p=n[0],m=n[1],g=Math.min(f(p+d,p+h,r,a),f(m+d,m+h,r,a)),v=Math.min(f(p+c,p+d,r,a),f(m+c,m+d,r,a));if(g>v&&v<Math.abs(m-p)/4e3?(s=g,l=!1):(s=Math.min(g,v),l=!0),"date"===r.type&&s>o){var y=s===i?1:6,b=s===i?"M12":"M1";return function(t,n){var o=r.c2d(t,i,a),s=o.indexOf("-",y);s>0&&(o=o.substr(0,s));var c=r.d2c(o,0,a);if(c<t){var f=u(c,b,!1,a);(c+f)/2<t+e&&(c=f)}return n&&l?u(c,b,!0,a):c}}return function(t,n){var r=s*Math.round(t/s);return r+s/10<t&&r+.9*s<t+e&&(r+=s),n&&l&&(r-=s),r}}},20318:(e,t,n)=>{"use strict";var r=n(5605),i=n(56319),a=n(3360),o=n(596),s=n(41116),l=n(75084),c=n(93735),u=n(79060),f=n(23190);function d(e,t,n,s,l){var c,u,f,h,p,m,g,v=s+"bins",y=e._fullLayout,b=t["_"+s+"bingroup"],x=y._histogramBinOpts[b],_="overlay"===y.barmode,w=function(e){return n.r2c(e,0,h)},A=function(e){return n.c2r(e,0,h)},k="date"===n.type?function(e){return e||0===e?i.cleanDate(e,null,h):null}:function(e){return r(e)?Number(e):null};function E(e,t,n){t[e+"Found"]?(t[e]=k(t[e]),null===t[e]&&(t[e]=n[e])):(m[e]=t[e]=n[e],i.nestedProperty(u[0],v+"."+e).set(n[e]))}if(t["_"+s+"autoBinFinished"])delete t["_"+s+"autoBinFinished"];else{u=x.traces;var T=[],M=!0,S=!1,C=!1;for(c=0;c<u.length;c++)if((f=u[c]).visible){var O=x.dirs[c];p=f["_"+O+"pos0"]=n.makeCalcdata(f,O),T=i.concat(T,p),delete f["_"+s+"autoBinFinished"],!0===t.visible&&(M?M=!1:(delete f._autoBin,f["_"+s+"autoBinFinished"]=1),a.traceIs(f,"2dMap")&&(S=!0),"histogram2dcontour"===f.type&&(C=!0))}h=u[0][s+"calendar"];var R=o.autoBin(T,n,x.nbins,S,h,x.sizeFound&&x.size),N=u[0]._autoBin={};if(m=N[x.dirs[0]]={},C&&(x.size||(R.start=A(o.tickIncrement(w(R.start),R.size,!0,h))),void 0===x.end&&(R.end=A(o.tickIncrement(w(R.end),R.size,!1,h)))),_&&!a.traceIs(t,"2dMap")&&0===R._dataSpan&&"category"!==n.type&&"multicategory"!==n.type&&""===t.bingroup&&void 0===t.xbins){if(l)return[R,p,!0];R=function(e,t,n,r,a){var o,s,l,c=e._fullLayout,u=function(e,t){for(var n=t.xaxis,r=t.yaxis,i=t.orientation,a=[],o=e._fullData,s=0;s<o.length;s++){var l=o[s];"histogram"===l.type&&!0===l.visible&&l.orientation===i&&l.xaxis===n&&l.yaxis===r&&a.push(l)}return a}(e,t),f=!1,h=1/0,p=[t];for(o=0;o<u.length;o++)if((s=u[o])===t)f=!0;else if(f){var m=d(e,s,n,r,!0),g=m[0],v=m[2];s["_"+r+"autoBinFinished"]=1,s["_"+r+"pos0"]=m[1],v?p.push(s):h=Math.min(h,g.size)}else l=c._histogramBinOpts[s["_"+r+"bingroup"]],h=Math.min(h,l.size||s[a].size);var y=new Array(p.length);for(o=0;o<p.length;o++)for(var b=p[o]["_"+r+"pos0"],x=0;x<b.length;x++)if(void 0!==b[x]){y[o]=b[x];break}isFinite(h)||(h=i.distinctVals(y).minDiff);for(o=0;o<p.length;o++){var _=(s=p[o])[r+"calendar"],w={start:n.c2r(y[o]-h/2,0,_),end:n.c2r(y[o]+h/2,0,_),size:h};s._input[a]=s[a]=w,(l=c._histogramBinOpts[s["_"+r+"bingroup"]])&&i.extendFlat(l,w)}return t[a]}(e,t,n,s,v)}(g=f.cumulative||{}).enabled&&"include"!==g.currentbin&&("decreasing"===g.direction?R.start=A(o.tickIncrement(w(R.start),R.size,!0,h)):R.end=A(o.tickIncrement(w(R.end),R.size,!1,h))),x.size=R.size,x.sizeFound||(m.size=R.size,i.nestedProperty(u[0],v+".size").set(R.size)),E("start",x,R),E("end",x,R)}p=t["_"+s+"pos0"],delete t["_"+s+"pos0"];var L=t._input[v]||{},D=i.extendFlat({},x),P=x.start,I=n.r2l(L.start),F=void 0!==I;if((x.startFound||F)&&I!==n.r2l(P)){var z=F?I:i.aggNums(Math.min,null,p),j={type:"category"===n.type||"multicategory"===n.type?"linear":n.type,r2l:n.r2l,dtick:x.size,tick0:P,calendar:h,range:[z,o.tickIncrement(z,x.size,!1,h)].map(n.l2r)},B=o.tickFirst(j);B>n.r2l(z)&&(B=o.tickIncrement(B,x.size,!0,h)),D.start=n.l2r(B),F||i.nestedProperty(t,v+".start").set(D.start)}var U=x.end,$=n.r2l(L.end),q=void 0!==$;if((x.endFound||q)&&$!==n.r2l(U)){var H=q?$:i.aggNums(Math.max,null,p);D.end=n.l2r(H),q||i.nestedProperty(t,v+".start").set(D.end)}var V="autobin"+s;return!1===t._input[V]&&(t._input[v]=i.extendFlat({},t[v]||{}),delete t._input[V],delete t[V]),[D,p]}e.exports={calc:function(e,t){var n,a,h,p,m=[],g=[],v="h"===t.orientation,y=o.getFromId(e,v?t.yaxis:t.xaxis),b=v?"y":"x",x={x:"y",y:"x"}[b],_=t[b+"calendar"],w=t.cumulative,A=d(e,t,y,b),k=A[0],E=A[1],T="string"==typeof k.size,M=[],S=T?M:k,C=[],O=[],R=[],N=0,L=t.histnorm,D=t.histfunc,P=-1!==L.indexOf("density");w.enabled&&P&&(L=L.replace(/ ?density$/,""),P=!1);var I,F="max"===D||"min"===D?null:0,z=l.count,j=c[L],B=!1,U=function(e){return y.r2c(e,0,_)};for(i.isArrayOrTypedArray(t[x])&&"count"!==D&&(I=t[x],B="avg"===D,z=l[D]),n=U(k.start),h=U(k.end)+(n-o.tickIncrement(n,k.size,!1,_))/1e6;n<h&&m.length<1e6&&(a=o.tickIncrement(n,k.size,!1,_),m.push((n+a)/2),g.push(F),R.push([]),M.push(n),P&&C.push(1/(a-n)),B&&O.push(0),!(a<=n));)n=a;M.push(n),T||"date"!==y.type||(S={start:U(S.start),end:U(S.end),size:S.size}),e._fullLayout._roundFnOpts||(e._fullLayout._roundFnOpts={});var $=t["_"+b+"bingroup"],q={leftGap:1/0,rightGap:1/0};$&&(e._fullLayout._roundFnOpts[$]||(e._fullLayout._roundFnOpts[$]=q),q=e._fullLayout._roundFnOpts[$]);var H,V=g.length,W=!0,G=q.leftGap,Y=q.rightGap,X={};for(n=0;n<E.length;n++){var K=E[n];(p=i.findBin(K,S))>=0&&p<V&&(N+=z(p,n,g,I,O),W&&R[p].length&&K!==E[R[p][0]]&&(W=!1),R[p].push(n),X[n]=p,G=Math.min(G,K-M[p]),Y=Math.min(Y,M[p+1]-K))}q.leftGap=G,q.rightGap=Y,W||(H=function(t,n){return function(){var r=e._fullLayout._roundFnOpts[$];return f(r.leftGap,r.rightGap,M,y,_)(t,n)}}),B&&(N=u(g,O)),j&&j(g,N,C),w.enabled&&function(e,t,n){var r,i,a;function o(t){a=e[t],e[t]/=2}function s(t){i=e[t],e[t]=a+i/2,a+=i}if("half"===n)if("increasing"===t)for(o(0),r=1;r<e.length;r++)s(r);else for(o(e.length-1),r=e.length-2;r>=0;r--)s(r);else if("increasing"===t){for(r=1;r<e.length;r++)e[r]+=e[r-1];"exclude"===n&&(e.unshift(0),e.pop())}else{for(r=e.length-2;r>=0;r--)e[r]+=e[r+1];"exclude"===n&&(e.push(0),e.shift())}}(g,w.direction,w.currentbin);var Z=Math.min(m.length,g.length),J=[],Q=0,ee=Z-1;for(n=0;n<Z;n++)if(g[n]){Q=n;break}for(n=Z-1;n>=Q;n--)if(g[n]){ee=n;break}for(n=Q;n<=ee;n++)if(r(m[n])&&r(g[n])){var te={p:m[n],s:g[n],b:0};w.enabled||(te.pts=R[n],W?te.ph0=te.ph1=R[n].length?E[R[n][0]]:m[n]:(t._computePh=!0,te.ph0=H(M[n]),te.ph1=H(M[n+1],!0))),J.push(te)}return 1===J.length&&(J[0].width1=o.tickIncrement(J[0].p,k.size,!1,_)-J[0].p),s(J,t),i.isArrayOrTypedArray(t.selectedpoints)&&i.tagSelected(J,t,X),J},calcAllAutoBins:d}},91102:e=>{"use strict";e.exports={eventDataKeys:["binNumber"]}},51750:(e,t,n)=>{"use strict";var r=n(56319),i=n(33489),a=n(3360).traceIs,o=n(26403),s=n(72316).validateCornerradius,l=r.nestedProperty,c=n(92397).getAxisGroup,u=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],f=["x","y"];e.exports=function(e,t){var n,d,h,p,m,g,v,y=t._histogramBinOpts={},b=[],x={},_=[];function w(e,t){return r.coerce(n._input,n,n._module.attributes,e,t)}function A(e){return"v"===e.orientation?"x":"y"}function k(e,n,a){var o=e.uid+"__"+a;n||(n=o);var s=function(e,n){return i.getFromTrace({_fullLayout:t},e,n).type}(e,a),l=e[a+"calendar"]||"",c=y[n],u=!0;c&&(s===c.axType&&l===c.calendar?(u=!1,c.traces.push(e),c.dirs.push(a)):(n=o,s!==c.axType&&r.warn(["Attempted to group the bins of trace",e.index,"set on a","type:"+s,"axis","with bins on","type:"+c.axType,"axis."].join(" ")),l!==c.calendar&&r.warn(["Attempted to group the bins of trace",e.index,"set with a",l,"calendar","with bins",c.calendar?"on a "+c.calendar+" calendar":"w/o a set calendar"].join(" ")))),u&&(y[n]={traces:[e],dirs:[a],axType:s,calendar:e[a+"calendar"]||""}),e["_"+a+"bingroup"]=n}for(m=0;m<e.length;m++)if(n=e[m],a(n,"histogram")){if(b.push(n),delete n._xautoBinFinished,delete n._yautoBinFinished,"histogram"===n.type){var E=w("marker.cornerradius",t.barcornerradius);n.marker&&(n.marker.cornerradius=s(E))}a(n,"2dMap")||o(n._input,n,t,w)}var T=t._alignmentOpts||{};for(m=0;m<b.length;m++){if(n=b[m],h="",!a(n,"2dMap")){if(p=A(n),"group"===t.barmode&&n.alignmentgroup){var M=n[p+"axis"],S=c(t,M)+n.orientation;(T[S]||{})[n.alignmentgroup]&&(h=S)}h||"overlay"===t.barmode||(h=c(t,n.xaxis)+c(t,n.yaxis)+A(n))}h?(x[h]||(x[h]=[]),x[h].push(n)):_.push(n)}for(h in x)if(1!==(d=x[h]).length){var C=!1;for(d.length&&(n=d[0],C=w("bingroup")),h=C||h,m=0;m<d.length;m++){var O=(n=d[m])._input.bingroup;O&&O!==h&&r.warn(["Trace",n.index,"must match","within bingroup",h+".","Ignoring its bingroup:",O,"setting."].join(" ")),n.bingroup=h,k(n,h,A(n))}}else _.push(d[0]);for(m=0;m<_.length;m++){n=_[m];var R=w("bingroup");if(a(n,"2dMap"))for(v=0;v<2;v++){var N=w((p=f[v])+"bingroup",R?R+"__"+p:null);k(n,N,p)}else k(n,R,A(n))}for(h in y){var L=y[h];for(d=L.traces,g=0;g<u.length;g++){var D,P,I=u[g],F=I.name;if("nbins"!==F||!L.sizeFound){for(m=0;m<d.length;m++){if(n=d[m],p=L.dirs[m],D=I.aStr[p],void 0!==l(n._input,D).get()){L[F]=w(D),L[F+"Found"]=!0;break}(P=(n._autoBin||{})[p]||{})[F]&&l(n,D).set(P[F])}if("start"===F||"end"===F)for(;m<d.length;m++)(n=d[m])["_"+p+"bingroup"]&&w(D,(P=(n._autoBin||{})[p]||{})[F]);"nbins"!==F||L.sizeFound||L.nbinsFound||(n=d[0],L[F]=w(D))}}}}},31861:(e,t,n)=>{"use strict";var r=n(3360),i=n(56319),a=n(53408),o=n(72316).handleText,s=n(14550),l=n(46818);e.exports=function(e,t,n,c){function u(n,r){return i.coerce(e,t,l,n,r)}var f=u("x"),d=u("y");u("cumulative.enabled")&&(u("cumulative.direction"),u("cumulative.currentbin")),u("text");var h=u("textposition");o(e,t,c,u,h,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),u("hovertext"),u("hovertemplate"),u("xhoverformat"),u("yhoverformat");var p=u("orientation",d&&!f?"h":"v"),m="v"===p?"x":"y",g="v"===p?"y":"x",v=f&&d?Math.min(i.minRowLength(f)&&i.minRowLength(d)):i.minRowLength(t[m]||[]);if(v){t._length=v,r.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],c),t[g]&&u("histfunc"),u("histnorm"),u("autobin"+m),s(e,t,u,n,c),i.coerceSelectionMarkerOpacity(t,u);var y=(t.marker.line||{}).color,b=r.getComponentMethod("errorbars","supplyDefaults");b(e,t,y||a.defaultLine,{axis:"y"}),b(e,t,y||a.defaultLine,{axis:"x",inherit:"y"}),u("zorder")}else t.visible=!1}},41486:e=>{"use strict";e.exports=function(e,t,n,r,i){if(e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,"zLabelVal"in t&&(e.z=t.zLabelVal),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),!(n.cumulative||{}).enabled){var a,o=Array.isArray(i)?r[0].pts[i[0]][i[1]]:r[i].pts;if(e.pointNumbers=o,e.binNumber=e.pointNumber,delete e.pointNumber,delete e.pointIndex,n._indexToPoints){a=[];for(var s=0;s<o.length;s++)a=a.concat(n._indexToPoints[o[s]])}else a=o;e.pointIndices=a}return e}},79629:(e,t,n)=>{"use strict";var r=n(49958).hoverPoints,i=n(596).hoverLabelText;e.exports=function(e,t,n,a,o){var s=r(e,t,n,a,o);if(s){var l=(e=s[0]).cd[e.index],c=e.cd[0].trace;if(!c.cumulative.enabled){var u="h"===c.orientation?"y":"x";e[u+"Label"]=i(e[u+"a"],[l.ph0,l.ph1],c[u+"hoverformat"])}return s}}},5787:(e,t,n)=>{"use strict";e.exports={attributes:n(46818),layoutAttributes:n(92754),supplyDefaults:n(31861),crossTraceDefaults:n(51750),supplyLayoutDefaults:n(52549),calc:n(20318).calc,crossTraceCalc:n(97088).crossTraceCalc,plot:n(31061).plot,layerName:"barlayer",style:n(51289).style,styleOnSelect:n(51289).styleOnSelect,colorbar:n(83304),hoverPoints:n(79629),selectPoints:n(1702),eventData:n(41486),moduleType:"trace",name:"histogram",basePlotModule:n(64125),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{description:["The sample data from which statistics are computed is set in `x`","for vertically spanning histograms and","in `y` for horizontally spanning histograms.","Binning options are set `xbins` and `ybins` respectively","if no aggregation data is provided."].join(" ")}}},93735:e=>{"use strict";e.exports={percent:function(e,t){for(var n=e.length,r=100/t,i=0;i<n;i++)e[i]*=r},probability:function(e,t){for(var n=e.length,r=0;r<n;r++)e[r]/=t},density:function(e,t,n,r){var i=e.length;r=r||1;for(var a=0;a<i;a++)e[a]*=n[a]*r},"probability density":function(e,t,n,r){var i=e.length;r&&(t/=r);for(var a=0;a<i;a++)e[a]*=n[a]/t}}},73980:(e,t,n)=>{"use strict";var r=n(56319),i=n(596),a=n(75084),o=n(93735),s=n(79060),l=n(23190),c=n(20318).calcAllAutoBins;function u(e,t,n,r){var i,a=new Array(e);if(r)for(i=0;i<e;i++)a[i]=1/(t[i+1]-t[i]);else{var o=1/n;for(i=0;i<e;i++)a[i]=o}return a}function f(e,t){return{start:e(t.start),end:e(t.end),size:t.size}}function d(e,t,n,r,i,a){var o,s=e.length-1,c=new Array(s),u=l(n,r,e,i,a);for(o=0;o<s;o++){var f=(t||[])[o];c[o]=void 0===f?[u(e[o]),u(e[o+1],!0)]:[f,f]}return c}e.exports=function(e,t){var n,l,h,p,m=i.getFromId(e,t.xaxis),g=i.getFromId(e,t.yaxis),v=t.xcalendar,y=t.ycalendar,b=function(e){return m.r2c(e,0,v)},x=function(e){return g.r2c(e,0,y)},_=c(e,t,m,"x"),w=_[0],A=_[1],k=c(e,t,g,"y"),E=k[0],T=k[1],M=t._length;A.length>M&&A.splice(M,A.length-M),T.length>M&&T.splice(M,T.length-M);var S=[],C=[],O=[],R="string"==typeof w.size,N="string"==typeof E.size,L=[],D=[],P=R?L:w,I=N?D:E,F=0,z=[],j=[],B=t.histnorm,U=t.histfunc,$=-1!==B.indexOf("density"),q="max"===U||"min"===U?null:0,H=a.count,V=o[B],W=!1,G=[],Y=[],X="z"in t?t.z:"marker"in t&&Array.isArray(t.marker.color)?t.marker.color:"";X&&"count"!==U&&(W="avg"===U,H=a[U]);var K=w.size,Z=b(w.start),J=b(w.end)+(Z-i.tickIncrement(Z,K,!1,v))/1e6;for(n=Z;n<J;n=i.tickIncrement(n,K,!1,v))C.push(q),L.push(n),W&&O.push(0);L.push(n);var Q,ee=C.length,te=(n-Z)/ee,ne=(Q=Z+te/2,m.c2r(Q,0,v)),re=E.size,ie=x(E.start),ae=x(E.end)+(ie-i.tickIncrement(ie,re,!1,y))/1e6;for(n=ie;n<ae;n=i.tickIncrement(n,re,!1,y)){S.push(C.slice()),D.push(n);var oe=new Array(ee);for(l=0;l<ee;l++)oe[l]=[];j.push(oe),W&&z.push(O.slice())}D.push(n);var se=S.length,le=(n-ie)/se,ce=function(e){return g.c2r(e,0,y)}(ie+le/2);$&&(G=u(C.length,P,te,R),Y=u(S.length,I,le,N)),R||"date"!==m.type||(P=f(b,P)),N||"date"!==g.type||(I=f(x,I));var ue=!0,fe=!0,de=new Array(ee),he=new Array(se),pe=1/0,me=1/0,ge=1/0,ve=1/0;for(n=0;n<M;n++){var ye=A[n],be=T[n];h=r.findBin(ye,P),p=r.findBin(be,I),h>=0&&h<ee&&p>=0&&p<se&&(F+=H(h,n,S[p],X,z[p]),j[p][h].push(n),ue&&(void 0===de[h]?de[h]=ye:de[h]!==ye&&(ue=!1)),fe&&(void 0===he[p]?he[p]=be:he[p]!==be&&(fe=!1)),pe=Math.min(pe,ye-L[h]),me=Math.min(me,L[h+1]-ye),ge=Math.min(ge,be-D[p]),ve=Math.min(ve,D[p+1]-be))}if(W)for(p=0;p<se;p++)F+=s(S[p],z[p]);if(V)for(p=0;p<se;p++)V(S[p],F,G,Y[p]);return{x:A,xRanges:d(L,ue&&de,pe,me,m,v),x0:ne,dx:te,y:T,yRanges:d(D,fe&&he,ge,ve,g,y),y0:ce,dy:le,z:S,pts:j}}},11998:(e,t,n)=>{"use strict";var r=n(85507),i=n(18874).u,a=n(95323),o=n(37811),s=n(77014).rb,l=n(77014).ay,c=n(86395).extendFlat,u=n(9488).k,f=a({editType:"plot",arrayOk:!0,colorEditType:"plot",description:"Sets the font used for `textinfo`."});e.exports={labels:{valType:"data_array",editType:"calc",description:["Sets the sector labels.","If `labels` entries are duplicated, we sum associated `values`","or simply count occurrences if `values` is not provided.","For other array attributes (including color) we use the first","non-empty entry among all occurrences of the label."].join(" ")},label0:{valType:"number",dflt:0,editType:"calc",description:["Alternate to `labels`.","Builds a numeric set of labels.","Use with `dlabel`","where `label0` is the starting label and `dlabel` the step."].join(" ")},dlabel:{valType:"number",dflt:1,editType:"calc",description:"Sets the label step. See `label0` for more info."},values:{valType:"data_array",editType:"calc",description:["Sets the values of the sectors.","If omitted, we count occurrences of each label."].join(" ")},marker:{colors:{valType:"data_array",editType:"calc",description:["Sets the color of each sector.","If not specified, the default trace color set is used","to pick the sector colors."].join(" ")},line:{color:{valType:"color",dflt:o.defaultLine,arrayOk:!0,editType:"style",description:["Sets the color of the line enclosing each sector."].join(" ")},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style",description:["Sets the width (in px) of the line enclosing each sector."].join(" ")},editType:"calc"},pattern:u,editType:"calc"},text:{valType:"data_array",editType:"plot",description:["Sets text elements associated with each sector.","If trace `textinfo` contains a *text* flag, these elements will be seen","on the chart.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style",description:["Sets hover text elements associated with each sector.","If a single string, the same string appears for","all data points.","If an array of string, the items are mapped in order of","this trace's sectors.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")},scalegroup:{valType:"string",dflt:"",editType:"calc",description:["If there are multiple pie charts that should be sized according to","their totals, link them by providing a non-empty group id here","shared by every trace in the same group."].join(" ")},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc",description:["Determines which trace information appear on the graph."].join(" ")},hoverinfo:c({},r.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:s({},{keys:["label","color","value","percent","text"]}),texttemplate:l({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot",description:["Specifies the location of the `textinfo`."].join(" ")},textfont:c({},f,{description:"Sets the font used for `textinfo`."}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot",description:["Controls the orientation of the text inside chart sectors.","When set to *auto*, text may be oriented in any direction in order","to be as big as possible in the middle of a sector.","The *horizontal* option orients text to be parallel with the bottom","of the chart, and may make text smaller in order to achieve that goal.","The *radial* option orients text along the radius of the sector.","The *tangential* option orients text perpendicular to the radius of the sector."].join(" ")},insidetextfont:c({},f,{description:"Sets the font used for `textinfo` lying inside the sector."}),outsidetextfont:c({},f,{description:"Sets the font used for `textinfo` lying outside the sector."}),automargin:{valType:"boolean",dflt:!1,editType:"plot",description:["Determines whether outside text labels can push the margins."].join(" ")},title:{text:{valType:"string",dflt:"",editType:"plot",description:["Sets the title of the chart.","If it is empty, no title is displayed.","Note that before the existence of `title.text`, the title's","contents used to be defined as the `title` attribute itself.","This behavior has been deprecated."].join(" ")},font:c({},f,{description:["Sets the font used for `title`.","Note that the title's font used to be set","by the now deprecated `titlefont` attribute."].join(" ")}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot",description:["Specifies the location of the `title`.","Note that the title's position used to be set","by the now deprecated `titleposition` attribute."].join(" ")},editType:"plot"},domain:i({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc",description:["Sets the fraction of the radius to cut out of the pie.","Use this to make a donut chart."].join(" ")},sort:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether or not the sectors are reordered","from largest to smallest."].join(" ")},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc",description:["Specifies the direction at which succeeding sectors follow","one another."].join(" ")},rotation:{valType:"angle",dflt:0,editType:"calc",description:["Instead of the first slice starting at 12 o'clock,","rotate to some other angle."].join(" ")},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc",description:["Sets the fraction of larger radius to pull the sectors","out from the center. This can be a constant","to pull all slices apart from each other equally","or an array to highlight one or more slices."].join(" ")},_deprecated:{title:{valType:"string",dflt:"",editType:"calc",description:["Deprecated in favor of `title.text`.","Note that value of `title` is no longer a simple","*string* but a set of sub-attributes."].join(" ")},titlefont:c({},f,{description:"Deprecated in favor of `title.font`."}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc",description:"Deprecated in favor of `title.position`."}}}},37914:(e,t,n)=>{"use strict";var r=n(5605),i=n(3707),a=n(53408),o={};function s(e){return function(t,n){return!!t&&(!!(t=i(t)).isValid()&&(t=a.addOpacity(t,t.getAlpha()),e[n]||(e[n]=t),t))}}function l(e,t){var n,r=JSON.stringify(e),a=t[r];if(!a){for(a=e.slice(),n=0;n<e.length;n++)a.push(i(e[n]).lighten(20).toHexString());for(n=0;n<e.length;n++)a.push(i(e[n]).darken(20).toHexString());t[r]=a}return a}e.exports={calc:function(e,t){var n,i,a=[],o=e._fullLayout,l=o.hiddenlabels||[],c=t.labels,u=t.marker.colors||[],f=t.values,d=t._length,h=t._hasValues&&d;if(t.dlabel)for(c=new Array(d),n=0;n<d;n++)c[n]=String(t.label0+n*t.dlabel);var p={},m=s(o["_"+t.type+"colormap"]),g=0,v=!1;for(n=0;n<d;n++){var y,b,x;if(h){if(y=f[n],!r(y))continue;y=+y}else y=1;void 0!==(b=c[n])&&""!==b||(b=n);var _=p[b=String(b)];void 0===_?(p[b]=a.length,(x=-1!==l.indexOf(b))||(g+=y),a.push({v:y,label:b,color:m(u[n],b),i:n,pts:[n],hidden:x})):(v=!0,(i=a[_]).v+=y,i.pts.push(n),i.hidden||(g+=y),!1===i.color&&u[n]&&(i.color=m(u[n],b)))}return a=a.filter((function(e){return e.v>=0})),("funnelarea"===t.type?v:t.sort)&&a.sort((function(e,t){return t.v-e.v})),a[0]&&(a[0].vTotal=g),a},crossTraceCalc:function(e,t){var n=(t||{}).type;n||(n="pie");var r=e._fullLayout,i=e.calcdata,a=r[n+"colorway"],s=r["_"+n+"colormap"];r["extend"+n+"colors"]&&(a=l(a,o));for(var c=0,u=0;u<i.length;u++){var f=i[u];if(f[0].trace.type===n)for(var d=0;d<f.length;d++){var h=f[d];!1===h.color&&(s[h.label]?h.color=s[h.label]:(s[h.label]=h.color=a[c%a.length],c++))}}},makePullColorFn:s,generateExtendedColors:l}},54441:(e,t,n)=>{"use strict";var r=n(5605),i=n(56319),a=n(11998),o=n(18874).N,s=n(72316).handleText,l=n(56319).coercePattern;function c(e,t){var n=i.isArrayOrTypedArray(e),a=i.isArrayOrTypedArray(t),o=Math.min(n?e.length:1/0,a?t.length:1/0);if(isFinite(o)||(o=0),o&&a){for(var s,l=0;l<o;l++){var c=t[l];if(r(c)&&c>0){s=!0;break}}s||(o=0)}return{hasLabels:n,hasValues:a,len:o}}function u(e,t,n,r,i){r("marker.line.width")&&r("marker.line.color",i?void 0:n.paper_bgcolor);var a=r("marker.colors");l(r,"marker.pattern",a),e.marker&&!t.marker.pattern.fgcolor&&(t.marker.pattern.fgcolor=e.marker.colors),t.marker.pattern.bgcolor||(t.marker.pattern.bgcolor=n.paper_bgcolor)}e.exports={handleLabelsAndValues:c,handleMarkerDefaults:u,supplyDefaults:function(e,t,n,r){function l(n,r){return i.coerce(e,t,a,n,r)}var f=c(l("labels"),l("values")),d=f.len;if(t._hasLabels=f.hasLabels,t._hasValues=f.hasValues,!t._hasLabels&&t._hasValues&&(l("label0"),l("dlabel")),d){t._length=d,u(e,t,r,l,!0),l("scalegroup");var h,p=l("text"),m=l("texttemplate");if(m||(h=l("textinfo",i.isArrayOrTypedArray(p)?"text+percent":"percent")),l("hovertext"),l("hovertemplate"),m||h&&"none"!==h){var g=l("textposition");s(e,t,r,l,g,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(g)||"auto"===g||"outside"===g)&&l("automargin"),("inside"===g||"auto"===g||Array.isArray(g))&&l("insidetextorientation")}else"none"===h&&l("textposition","none");o(t,r,l);var v=l("hole");if(l("title.text")){var y=l("title.position",v?"middle center":"top center");v||"middle center"!==y||(t.title.position="top center"),i.coerceFont(l,"title.font",r.font)}l("sort"),l("direction"),l("rotation"),l("pull")}else t.visible=!1}}},89458:(e,t,n)=>{"use strict";var r=n(44790).appendArrayMultiPointValues;e.exports=function(e,t){var n={curveNumber:t.index,pointNumbers:e.pts,data:t._input,fullData:t,label:e.label,color:e.color,value:e.v,percent:e.percent,text:e.text,bbox:e.bbox,v:e.v};return 1===e.pts.length&&(n.pointNumber=n.i=e.pts[0]),r(n,t,e.pts),"funnelarea"===t.type&&(delete n.v,delete n.i),n}},21249:(e,t,n)=>{"use strict";var r=n(14797),i=n(53408);e.exports=function(e,t,n,a){var o=n.marker.pattern;o&&o.shape?r.pointStyle(e,n,a,t):i.fill(e,t.color)}},64238:(e,t,n)=>{"use strict";var r=n(56319);function i(e){return-1!==e.indexOf("e")?e.replace(/[.]?0+e/,"e"):-1!==e.indexOf(".")?e.replace(/[.]?0+$/,""):e}t.formatPiePercent=function(e,t){var n=i((100*e).toPrecision(3));return r.numSeparate(n,t)+"%"},t.formatPieValue=function(e,t){var n=i(e.toPrecision(10));return r.numSeparate(n,t)},t.getFirstFilled=function(e,t){if(r.isArrayOrTypedArray(e))for(var n=0;n<t.length;n++){var i=e[t[n]];if(i||0===i||""===i)return i}},t.castOption=function(e,n){return r.isArrayOrTypedArray(e)?t.getFirstFilled(e,n):e||void 0},t.getRotationAngle=function(e){return("auto"===e?0:e)*Math.PI/180}},71528:(e,t,n)=>{"use strict";var r=n(93268),i=n(31496),a=n(17911),o=n(53408),s=n(14797),l=n(56319),c=l.strScale,u=l.strTranslate,f=n(56953),d=n(11464),h=d.recordMinTextSize,p=d.clearMinTextSize,m=n(16461).TEXTPAD,g=n(64238),v=n(89458),y=n(56319).isValidTextValue;function b(e,t,n){var i=n[0],o=i.cx,s=i.cy,c=i.trace,u="funnelarea"===c.type;"_hasHoverLabel"in c||(c._hasHoverLabel=!1),"_hasHoverEvent"in c||(c._hasHoverEvent=!1),e.on("mouseover",(function(e){var n=t._fullLayout,f=t._fullData[c.index];if(!t._dragging&&!1!==n.hovermode){var d=f.hoverinfo;if(Array.isArray(d)&&(d=a.castHoverinfo({hoverinfo:[g.castOption(d,e.pts)],_module:c._module},n,0)),"all"===d&&(d="label+text+value+percent+name"),f.hovertemplate||"none"!==d&&"skip"!==d&&d){var h=e.rInscribed||0,p=o+e.pxmid[0]*(1-h),m=s+e.pxmid[1]*(1-h),y=n.separators,b=[];if(d&&-1!==d.indexOf("label")&&b.push(e.label),e.text=g.castOption(f.hovertext||f.text,e.pts),d&&-1!==d.indexOf("text")){var x=e.text;l.isValidTextValue(x)&&b.push(x)}e.value=e.v,e.valueLabel=g.formatPieValue(e.v,y),d&&-1!==d.indexOf("value")&&b.push(e.valueLabel),e.percent=e.v/i.vTotal,e.percentLabel=g.formatPiePercent(e.percent,y),d&&-1!==d.indexOf("percent")&&b.push(e.percentLabel);var _=f.hoverlabel,w=_.font,A=[];a.loneHover({trace:c,x0:p-h*i.r,x1:p+h*i.r,y:m,_x0:u?o+e.TL[0]:p-h*i.r,_x1:u?o+e.TR[0]:p+h*i.r,_y0:u?s+e.TL[1]:m-h*i.r,_y1:u?s+e.BL[1]:m+h*i.r,text:b.join("<br>"),name:f.hovertemplate||-1!==d.indexOf("name")?f.name:void 0,idealAlign:e.pxmid[0]<0?"left":"right",color:g.castOption(_.bgcolor,e.pts)||e.color,borderColor:g.castOption(_.bordercolor,e.pts),fontFamily:g.castOption(w.family,e.pts),fontSize:g.castOption(w.size,e.pts),fontColor:g.castOption(w.color,e.pts),nameLength:g.castOption(_.namelength,e.pts),textAlign:g.castOption(_.align,e.pts),hovertemplate:g.castOption(f.hovertemplate,e.pts),hovertemplateLabels:e,eventData:[v(e,f)]},{container:n._hoverlayer.node(),outerContainer:n._paper.node(),gd:t,inOut_bbox:A}),e.bbox=A[0],c._hasHoverLabel=!0}c._hasHoverEvent=!0,t.emit("plotly_hover",{points:[v(e,f)],event:r.event})}})),e.on("mouseout",(function(e){var n=t._fullLayout,i=t._fullData[c.index],o=r.select(this).datum();c._hasHoverEvent&&(e.originalEvent=r.event,t.emit("plotly_unhover",{points:[v(o,i)],event:r.event}),c._hasHoverEvent=!1),c._hasHoverLabel&&(a.loneUnhover(n._hoverlayer.node()),c._hasHoverLabel=!1)})),e.on("click",(function(e){var n=t._fullLayout,i=t._fullData[c.index];t._dragging||!1===n.hovermode||(t._hoverdata=[v(e,i)],a.click(t,r.event))}))}function x(e,t,n){var r=g.castOption(e.insidetextfont.color,t.pts);!r&&e._input.textfont&&(r=g.castOption(e._input.textfont.color,t.pts));var i=g.castOption(e.insidetextfont.family,t.pts)||g.castOption(e.textfont.family,t.pts)||n.family,a=g.castOption(e.insidetextfont.size,t.pts)||g.castOption(e.textfont.size,t.pts)||n.size,s=g.castOption(e.insidetextfont.weight,t.pts)||g.castOption(e.textfont.weight,t.pts)||n.weight,l=g.castOption(e.insidetextfont.style,t.pts)||g.castOption(e.textfont.style,t.pts)||n.style,c=g.castOption(e.insidetextfont.variant,t.pts)||g.castOption(e.textfont.variant,t.pts)||n.variant,u=g.castOption(e.insidetextfont.textcase,t.pts)||g.castOption(e.textfont.textcase,t.pts)||n.textcase,f=g.castOption(e.insidetextfont.lineposition,t.pts)||g.castOption(e.textfont.lineposition,t.pts)||n.lineposition,d=g.castOption(e.insidetextfont.shadow,t.pts)||g.castOption(e.textfont.shadow,t.pts)||n.shadow;return{color:r||o.contrast(t.color),family:i,size:a,weight:s,style:l,variant:c,textcase:u,lineposition:f,shadow:d}}function _(e,t){for(var n,r,i=0;i<e.length;i++)if((r=(n=e[i][0]).trace).title.text){var a=r.title.text;r._meta&&(a=l.templateString(a,r._meta));var o=s.tester.append("text").attr("data-notex",1).text(a).call(s.font,r.title.font).call(f.convertToTspans,t),c=s.bBox(o.node(),!0);n.titleBox={width:c.width,height:c.height},o.remove()}}function w(e,t,n){var r=n.r||t.rpx1,i=t.rInscribed;if(t.startangle===t.stopangle)return{rCenter:1-i,scale:0,rotate:0,textPosAngle:0};var a,o=t.ring,s=1===o&&Math.abs(t.startangle-t.stopangle)===2*Math.PI,l=t.halfangle,c=t.midangle,u=n.trace.insidetextorientation,f="horizontal"===u,d="tangential"===u,h="radial"===u,p="auto"===u,m=[];if(!p){var g,v=function(n,i){if(function(e,t){var n=e.startangle,r=e.stopangle;return n>t&&t>r||n<t&&t<r}(t,n)){var s=Math.abs(n-t.startangle),l=Math.abs(n-t.stopangle),c=s<l?s:l;(a="tan"===i?k(e,r,o,c,0):A(e,r,o,c,Math.PI/2)).textPosAngle=n,m.push(a)}};if(f||d){for(g=4;g>=-4;g-=2)v(Math.PI*g,"tan");for(g=4;g>=-4;g-=2)v(Math.PI*(g+1),"tan")}if(f||h){for(g=4;g>=-4;g-=2)v(Math.PI*(g+1.5),"rad");for(g=4;g>=-4;g-=2)v(Math.PI*(g+.5),"rad")}}if(s||p||f){var y=Math.sqrt(e.width*e.width+e.height*e.height);if((a={scale:i*r*2/y,rCenter:1-i,rotate:0}).textPosAngle=(t.startangle+t.stopangle)/2,a.scale>=1)return a;m.push(a)}(p||h)&&((a=A(e,r,o,l,c)).textPosAngle=(t.startangle+t.stopangle)/2,m.push(a)),(p||d)&&((a=k(e,r,o,l,c)).textPosAngle=(t.startangle+t.stopangle)/2,m.push(a));for(var b=0,x=0,_=0;_<m.length;_++){var w=m[_].scale;if(x<w&&(x=w,b=_),!p&&x>=1)break}return m[b]}function A(e,t,n,r,i){t=Math.max(0,t-2*m);var a=e.width/e.height,o=M(a,r,t,n);return{scale:2*o/e.height,rCenter:E(a,o/t),rotate:T(i)}}function k(e,t,n,r,i){t=Math.max(0,t-2*m);var a=e.height/e.width,o=M(a,r,t,n);return{scale:2*o/e.width,rCenter:E(a,o/t),rotate:T(i+Math.PI/2)}}function E(e,t){return Math.cos(t)-e*t}function T(e){return(180/Math.PI*e+720)%180-90}function M(e,t,n,r){var i=e+1/(2*Math.tan(t));return n*Math.min(1/(Math.sqrt(i*i+.5)+i),r/(Math.sqrt(e*e+r/2)+e))}function S(e,t){return e.v!==t.vTotal||t.trace.hole?Math.min(1/(1+1/Math.sin(e.halfangle)),e.ring/2):1}function C(e,t){var n=t.pxmid[0],r=t.pxmid[1],i=e.width/2,a=e.height/2;return n<0&&(i*=-1),r<0&&(a*=-1),{scale:1,rCenter:1,rotate:0,x:i+Math.abs(a)*(i>0?1:-1)/2,y:a/(1+n*n/(r*r)),outside:!0}}function O(e,t){var n,r,i,a=e.trace,o={x:e.cx,y:e.cy},s={tx:0,ty:0};s.ty+=a.title.font.size,i=N(a),-1!==a.title.position.indexOf("top")?(o.y-=(1+i)*e.r,s.ty-=e.titleBox.height):-1!==a.title.position.indexOf("bottom")&&(o.y+=(1+i)*e.r);var l,c,u=(l=e.r,c=e.trace.aspectratio,l/(void 0===c?1:c)),f=t.w*(a.domain.x[1]-a.domain.x[0])/2;return-1!==a.title.position.indexOf("left")?(f+=u,o.x-=(1+i)*u,s.tx+=e.titleBox.width/2):-1!==a.title.position.indexOf("center")?f*=2:-1!==a.title.position.indexOf("right")&&(f+=u,o.x+=(1+i)*u,s.tx-=e.titleBox.width/2),n=f/e.titleBox.width,r=R(e,t)/e.titleBox.height,{x:o.x,y:o.y,scale:Math.min(n,r),tx:s.tx,ty:s.ty}}function R(e,t){var n=e.trace,r=t.h*(n.domain.y[1]-n.domain.y[0]);return Math.min(e.titleBox.height,r/2)}function N(e){var t,n=e.pull;if(!n)return 0;if(l.isArrayOrTypedArray(n))for(n=0,t=0;t<e.pull.length;t++)e.pull[t]>n&&(n=e.pull[t]);return n}function L(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r][0],a=i.trace,o=a.domain,s=t.w*(o.x[1]-o.x[0]),l=t.h*(o.y[1]-o.y[0]);a.title.text&&"middle center"!==a.title.position&&(l-=R(i,t));var c=s/2,u=l/2;"funnelarea"!==a.type||a.scalegroup||(u/=a.aspectratio),i.r=Math.min(c,u)/(1+N(a)),i.cx=t.l+t.w*(a.domain.x[1]+a.domain.x[0])/2,i.cy=t.t+t.h*(1-a.domain.y[0])-l/2,a.title.text&&-1!==a.title.position.indexOf("bottom")&&(i.cy-=R(i,t)),a.scalegroup&&-1===n.indexOf(a.scalegroup)&&n.push(a.scalegroup)}!function(e,t){for(var n,r,i,a=0;a<t.length;a++){var o=1/0,s=t[a];for(r=0;r<e.length;r++)if((i=(n=e[r][0]).trace).scalegroup===s){var l;if("pie"===i.type)l=n.r*n.r;else if("funnelarea"===i.type){var c,u;i.aspectratio>1?u=(c=n.r)/i.aspectratio:c=(u=n.r)*i.aspectratio,l=(c*=(1+i.baseratio)/2)*u}o=Math.min(o,l/n.vTotal)}for(r=0;r<e.length;r++)if((i=(n=e[r][0]).trace).scalegroup===s){var f=o*n.vTotal;"funnelarea"===i.type&&(f/=(1+i.baseratio)/2,f/=i.aspectratio),n.r=Math.sqrt(f)}}}(e,n)}function D(e,t){return[e*Math.sin(t),-e*Math.cos(t)]}function P(e,t,n){var r=e._fullLayout,i=n.trace,a=i.texttemplate,o=i.textinfo;if(!a&&o&&"none"!==o){var s,c=o.split("+"),u=function(e){return-1!==c.indexOf(e)},f=u("label"),d=u("text"),h=u("value"),p=u("percent"),m=r.separators;if(s=f?[t.label]:[],d){var v=g.getFirstFilled(i.text,t.pts);y(v)&&s.push(v)}h&&s.push(g.formatPieValue(t.v,m)),p&&s.push(g.formatPiePercent(t.v/n.vTotal,m)),t.text=s.join("<br>")}if(a){var b=l.castOption(i,t.i,"texttemplate");if(b){var x=function(e){return{label:e.label,value:e.v,valueLabel:g.formatPieValue(e.v,r.separators),percent:e.v/n.vTotal,percentLabel:g.formatPiePercent(e.v/n.vTotal,r.separators),color:e.color,text:e.text,customdata:l.castOption(i,e.i,"customdata")}}(t),_=g.getFirstFilled(i.text,t.pts);(y(_)||""===_)&&(x.text=_),t.text=l.texttemplateString(b,x,e._fullLayout._d3locale,x,i._meta||{})}else t.text=""}}function I(e,t){var n=e.rotate*Math.PI/180,r=Math.cos(n),i=Math.sin(n),a=(t.left+t.right)/2,o=(t.top+t.bottom)/2;e.textX=a*r-o*i,e.textY=a*i+o*r,e.noCenter=!0}e.exports={plot:function(e,t){var n=e._context.staticPlot,a=e._fullLayout,d=a._size;p("pie",a),_(t,e),L(t,d);var m=l.makeTraceGroups(a._pielayer,t,"trace").each((function(t){var p=r.select(this),m=t[0],v=m.trace;!function(e){var t,n,r,i=e[0],a=i.r,o=i.trace,s=g.getRotationAngle(o.rotation),l=2*Math.PI/i.vTotal,c="px0",u="px1";if("counterclockwise"===o.direction){for(t=0;t<e.length&&e[t].hidden;t++);if(t===e.length)return;s+=l*e[t].v,l*=-1,c="px1",u="px0"}for(r=D(a,s),t=0;t<e.length;t++)(n=e[t]).hidden||(n[c]=r,n.startangle=s,s+=l*n.v/2,n.pxmid=D(a,s),n.midangle=s,r=D(a,s+=l*n.v/2),n.stopangle=s,n[u]=r,n.largeArc=n.v>i.vTotal/2?1:0,n.halfangle=Math.PI*Math.min(n.v/i.vTotal,.5),n.ring=1-o.hole,n.rInscribed=S(n,i))}(t),p.attr("stroke-linejoin","round"),p.each((function(){var y=r.select(this).selectAll("g.slice").data(t);y.enter().append("g").classed("slice",!0),y.exit().remove();var _=[[[],[]],[[],[]]],A=!1;y.each((function(i,o){if(i.hidden)r.select(this).selectAll("path,g").remove();else{i.pointNumber=i.i,i.curveNumber=v.index,_[i.pxmid[1]<0?0:1][i.pxmid[0]<0?0:1].push(i);var c=m.cx,u=m.cy,d=r.select(this),p=d.selectAll("path.surface").data([i]);if(p.enter().append("path").classed("surface",!0).style({"pointer-events":n?"none":"all"}),d.call(b,e,t),v.pull){var y=+g.castOption(v.pull,i.pts)||0;y>0&&(c+=y*i.pxmid[0],u+=y*i.pxmid[1])}i.cxFinal=c,i.cyFinal=u;var k=v.hole;if(i.v===m.vTotal){var E="M"+(c+i.px0[0])+","+(u+i.px0[1])+R(i.px0,i.pxmid,!0,1)+R(i.pxmid,i.px0,!0,1)+"Z";k?p.attr("d","M"+(c+k*i.px0[0])+","+(u+k*i.px0[1])+R(i.px0,i.pxmid,!1,k)+R(i.pxmid,i.px0,!1,k)+"Z"+E):p.attr("d",E)}else{var T=R(i.px0,i.px1,!0,1);if(k){var M=1-k;p.attr("d","M"+(c+k*i.px1[0])+","+(u+k*i.px1[1])+R(i.px1,i.px0,!1,k)+"l"+M*i.px0[0]+","+M*i.px0[1]+T+"Z")}else p.attr("d","M"+c+","+u+"l"+i.px0[0]+","+i.px0[1]+T+"Z")}P(e,i,m);var S=g.castOption(v.textposition,i.pts),O=d.selectAll("g.slicetext").data(i.text&&"none"!==S?[0]:[]);O.enter().append("g").classed("slicetext",!0),O.exit().remove(),O.each((function(){var n=l.ensureSingle(r.select(this),"text","",(function(e){e.attr("data-notex",1)})),d=l.ensureUniformFontSize(e,"outside"===S?function(e,t,n){var r=g.castOption(e.outsidetextfont.color,t.pts)||g.castOption(e.textfont.color,t.pts)||n.color,i=g.castOption(e.outsidetextfont.family,t.pts)||g.castOption(e.textfont.family,t.pts)||n.family,a=g.castOption(e.outsidetextfont.size,t.pts)||g.castOption(e.textfont.size,t.pts)||n.size,o=g.castOption(e.outsidetextfont.weight,t.pts)||g.castOption(e.textfont.weight,t.pts)||n.weight,s=g.castOption(e.outsidetextfont.style,t.pts)||g.castOption(e.textfont.style,t.pts)||n.style,l=g.castOption(e.outsidetextfont.variant,t.pts)||g.castOption(e.textfont.variant,t.pts)||n.variant,c=g.castOption(e.outsidetextfont.textcase,t.pts)||g.castOption(e.textfont.textcase,t.pts)||n.textcase,u=g.castOption(e.outsidetextfont.lineposition,t.pts)||g.castOption(e.textfont.lineposition,t.pts)||n.lineposition,f=g.castOption(e.outsidetextfont.shadow,t.pts)||g.castOption(e.textfont.shadow,t.pts)||n.shadow;return{color:r,family:i,size:a,weight:o,style:s,variant:l,textcase:c,lineposition:u,shadow:f}}(v,i,a.font):x(v,i,a.font));n.text(i.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(s.font,d).call(f.convertToTspans,e);var p,y=s.bBox(n.node());if("outside"===S)p=C(y,i);else if(p=w(y,i,m),"auto"===S&&p.scale<1){var b=l.ensureUniformFontSize(e,v.outsidetextfont);n.call(s.font,b),p=C(y=s.bBox(n.node()),i)}var _=p.textPosAngle,k=void 0===_?i.pxmid:D(m.r,_);if(p.targetX=c+k[0]*p.rCenter+(p.x||0),p.targetY=u+k[1]*p.rCenter+(p.y||0),I(p,y),p.outside){var E=p.targetY;i.yLabelMin=E-y.height/2,i.yLabelMid=E,i.yLabelMax=E+y.height/2,i.labelExtraX=0,i.labelExtraY=0,A=!0}p.fontSize=d.size,h(v.type,p,a),t[o].transform=p,l.setTransormAndDisplay(n,p)}))}function R(e,t,n,r){var a=r*(t[0]-e[0]),o=r*(t[1]-e[1]);return"a"+r*m.r+","+r*m.r+" 0 "+i.largeArc+(n?" 1 ":" 0 ")+a+","+o}}));var k=r.select(this).selectAll("g.titletext").data(v.title.text?[0]:[]);if(k.enter().append("g").classed("titletext",!0),k.exit().remove(),k.each((function(){var t,n=l.ensureSingle(r.select(this),"text","",(function(e){e.attr("data-notex",1)})),i=v.title.text;v._meta&&(i=l.templateString(i,v._meta)),n.text(i).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(s.font,v.title.font).call(f.convertToTspans,e),t="middle center"===v.title.position?function(e){var t=Math.sqrt(e.titleBox.width*e.titleBox.width+e.titleBox.height*e.titleBox.height);return{x:e.cx,y:e.cy,scale:e.trace.hole*e.r*2/t,tx:0,ty:-e.titleBox.height/2+e.trace.title.font.size}}(m):O(m,d),n.attr("transform",u(t.x,t.y)+c(Math.min(1,t.scale))+u(t.tx,t.ty))})),A&&function(e,t){var n,r,i,a,o,s,c,u,f,d,h,p,m;function v(e,t){return e.pxmid[1]-t.pxmid[1]}function y(e,t){return t.pxmid[1]-e.pxmid[1]}function b(e,n){n||(n={});var i,u,f,h,p=n.labelExtraY+(r?n.yLabelMax:n.yLabelMin),m=r?e.yLabelMin:e.yLabelMax,v=r?e.yLabelMax:e.yLabelMin,y=e.cyFinal+o(e.px0[1],e.px1[1]),b=p-m;if(b*c>0&&(e.labelExtraY=b),l.isArrayOrTypedArray(t.pull))for(u=0;u<d.length;u++)(f=d[u])===e||(g.castOption(t.pull,e.pts)||0)>=(g.castOption(t.pull,f.pts)||0)||((e.pxmid[1]-f.pxmid[1])*c>0?(b=f.cyFinal+o(f.px0[1],f.px1[1])-m-e.labelExtraY)*c>0&&(e.labelExtraY+=b):(v+e.labelExtraY-y)*c>0&&(i=3*s*Math.abs(u-d.indexOf(e)),(h=f.cxFinal+a(f.px0[0],f.px1[0])+i-(e.cxFinal+e.pxmid[0])-e.labelExtraX)*s>0&&(e.labelExtraX+=h)))}for(r=0;r<2;r++)for(i=r?v:y,o=r?Math.max:Math.min,c=r?1:-1,n=0;n<2;n++){for(a=n?Math.max:Math.min,s=n?1:-1,(u=e[r][n]).sort(i),f=e[1-r][n],d=f.concat(u),p=[],h=0;h<u.length;h++)void 0!==u[h].yLabelMid&&p.push(u[h]);for(m=!1,h=0;r&&h<f.length;h++)if(void 0!==f[h].yLabelMid){m=f[h];break}for(h=0;h<p.length;h++){var x=h&&p[h-1];m&&!h&&(x=m),b(p[h],x)}}}(_,v),function(e,t){e.each((function(e){var n=r.select(this);if(e.labelExtraX||e.labelExtraY){var i=n.select("g.slicetext text");e.transform.targetX+=e.labelExtraX,e.transform.targetY+=e.labelExtraY,l.setTransormAndDisplay(i,e.transform);var a=e.cxFinal+e.pxmid[0],s="M"+a+","+(e.cyFinal+e.pxmid[1]),c=(e.yLabelMax-e.yLabelMin)*(e.pxmid[0]<0?-1:1)/4;if(e.labelExtraX){var u=e.labelExtraX*e.pxmid[1]/e.pxmid[0],f=e.yLabelMid+e.labelExtraY-(e.cyFinal+e.pxmid[1]);Math.abs(u)>Math.abs(f)?s+="l"+f*e.pxmid[0]/e.pxmid[1]+","+f+"H"+(a+e.labelExtraX+c):s+="l"+e.labelExtraX+","+u+"v"+(f-u)+"h"+c}else s+="V"+(e.yLabelMid+e.labelExtraY)+"h"+c;l.ensureSingle(n,"path","textline").call(o.stroke,t.outsidetextfont.color).attr({"stroke-width":Math.min(2,t.outsidetextfont.size/8),d:s,fill:"none"})}else n.select("path.textline").remove()}))}(y,v),A&&v.automargin){var E=s.bBox(p.node()),T=v.domain,M=d.w*(T.x[1]-T.x[0]),S=d.h*(T.y[1]-T.y[0]),R=(.5*M-m.r)/d.w,N=(.5*S-m.r)/d.h;i.autoMargin(e,"pie."+v.uid+".automargin",{xl:T.x[0]-R,xr:T.x[1]+R,yb:T.y[0]-N,yt:T.y[1]+N,l:Math.max(m.cx-m.r-E.left,0),r:Math.max(E.right-(m.cx+m.r),0),b:Math.max(E.bottom-(m.cy+m.r),0),t:Math.max(m.cy-m.r-E.top,0),pad:5})}}))}));setTimeout((function(){m.selectAll("tspan").each((function(){var e=r.select(this);e.attr("dy")&&e.attr("dy",e.attr("dy"))}))}),0)},formatSliceLabel:P,transformInsideText:w,determineInsideTextFont:x,positionTitleOutside:O,prerenderTitles:_,layoutAreas:L,attachFxHandlers:b,computeTransform:I}},95853:(e,t,n)=>{"use strict";var r=n(53408),i=n(64238).castOption,a=n(21249);e.exports=function(e,t,n,o){var s=n.marker.line,l=i(s.color,t.pts)||r.defaultLine,c=i(s.width,t.pts)||0;e.call(a,t,n,o).style("stroke-width",c).call(r.stroke,l)}},85749:(e,t,n)=>{"use strict";var r=n(95323),i=n(85507),a=n(37811),o=n(88006),s=n(18874).u,l=n(77014).rb,c=n(50549),u=n(65210).templatedArray,f=n(66010).descriptionOnlyNumbers,d=n(86395).extendFlat,h=n(88500).overrideAll;(e.exports=h({hoverinfo:d({},i.hoverinfo,{flags:[],arrayOk:!1,description:["Determines which trace information appear on hover.","If `none` or `skip` are set, no information is displayed upon hovering.","But, if `none` is set, click and hover events are still fired.","Note that this attribute is superseded by `node.hoverinfo` and `node.hoverinfo`","for nodes and links respectively."].join(" ")}),hoverlabel:o.hoverlabel,domain:s({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h",description:"Sets the orientation of the Sankey diagram."},valueformat:{valType:"string",dflt:".3s",description:f("value")},valuesuffix:{valType:"string",dflt:"",description:["Adds a unit to follow the value in the hover tooltip. Add a space if a separation","is necessary from the value."].join(" ")},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap",description:["If value is `snap` (the default), the node arrangement is assisted by automatic snapping of elements to","preserve space between nodes specified via `nodepad`.","If value is `perpendicular`, the nodes can only move along a line perpendicular to the flow.","If value is `freeform`, the nodes can freely move on the plane.","If value is `fixed`, the nodes are stationary."].join(" ")},textfont:r({autoShadowDflt:!0,description:"Sets the font for node labels"}),customdata:void 0,node:{label:{valType:"data_array",dflt:[],description:"The shown name of the node."},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"},description:["Groups of nodes.","Each group is defined by an array with the indices of the nodes it contains.","Multiple groups can be specified."].join(" ")},x:{valType:"data_array",dflt:[],description:"The normalized horizontal position of the node."},y:{valType:"data_array",dflt:[],description:"The normalized vertical position of the node."},color:{valType:"color",arrayOk:!0,description:["Sets the `node` color. It can be a single value, or an array for specifying color for each `node`.","If `node.color` is omitted, then the default `Plotly` color palette will be cycled through","to have a variety of colors. These defaults are not fully opaque, to allow some visibility of","what is beneath the node."].join(" ")},customdata:{valType:"data_array",editType:"calc",description:["Assigns extra data to each node."].join(" ")},line:{color:{valType:"color",dflt:a.defaultLine,arrayOk:!0,description:["Sets the color of the `line` around each `node`."].join(" ")},width:{valType:"number",min:0,dflt:.5,arrayOk:!0,description:["Sets the width (in px) of the `line` around each `node`."].join(" ")}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20,description:"Sets the padding (in px) between the `nodes`."},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20,description:"Sets the thickness (in px) of the `nodes`."},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all",description:["Determines which trace information appear when hovering nodes.","If `none` or `skip` are set, no information is displayed upon hovering.","But, if `none` is set, click and hover events are still fired."].join(" ")},hoverlabel:o.hoverlabel,hovertemplate:l({},{description:"Variables `sourceLinks` and `targetLinks` are arrays of link objects.",keys:["value","label"]}),align:{valType:"enumerated",values:["justify","left","right","center"],dflt:"justify",description:"Sets the alignment method used to position the nodes along the horizontal axis."},description:"The nodes of the Sankey plot."},link:{arrowlen:{valType:"number",min:0,dflt:0,description:["Sets the length (in px) of the links arrow, if 0 no arrow will be drawn."].join(" ")},label:{valType:"data_array",dflt:[],description:"The shown name of the link."},color:{valType:"color",arrayOk:!0,description:["Sets the `link` color. It can be a single value, or an array for specifying color for each `link`.","If `link.color` is omitted, then by default, a translucent grey link will be used."].join(" ")},hovercolor:{valType:"color",arrayOk:!0,description:["Sets the `link` hover color. It can be a single value, or an array for specifying hover colors for","each `link`. If `link.hovercolor` is omitted, then by default, links will become slightly more","opaque when hovered over."].join(" ")},customdata:{valType:"data_array",editType:"calc",description:["Assigns extra data to each link."].join(" ")},line:{color:{valType:"color",dflt:a.defaultLine,arrayOk:!0,description:["Sets the color of the `line` around each `link`."].join(" ")},width:{valType:"number",min:0,dflt:0,arrayOk:!0,description:["Sets the width (in px) of the `line` around each `link`."].join(" ")}},source:{valType:"data_array",dflt:[],description:"An integer number `[0..nodes.length - 1]` that represents the source node."},target:{valType:"data_array",dflt:[],description:"An integer number `[0..nodes.length - 1]` that represents the target node."},value:{valType:"data_array",dflt:[],description:"A numeric value representing the flow volume value."},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all",description:["Determines which trace information appear when hovering links.","If `none` or `skip` are set, no information is displayed upon hovering.","But, if `none` is set, click and hover events are still fired."].join(" ")},hoverlabel:o.hoverlabel,hovertemplate:l({},{description:"Variables `source` and `target` are node objects.",keys:["value","label"]}),colorscales:u("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",description:"The label of the links to color based on their concentration within a flow.",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1,description:"Sets the upper bound of the color domain."},cmin:{valType:"number",editType:"calc",dflt:0,description:"Sets the lower bound of the color domain."},colorscale:d(c().colorscale,{dflt:[[0,"white"],[1,"black"]]})}),description:"The links of the Sankey plot."}},"calc","nested")).transforms=void 0},76687:(e,t,n)=>{"use strict";var r=n(88500).overrideAll,i=n(38895).eV,a=n(53743),o=n(97557),s=n(47281),l=n(85605),c=n(94190).prepSelect,u=n(56319),f=n(3360),d="sankey";function h(e,t){var n=e._fullData[t],r=e._fullLayout,i=r.dragmode,a="pan"===r.dragmode?"move":"crosshair",o=n._bgRect;if(o&&"pan"!==i&&"zoom"!==i){s(o,a);var d={_id:"x",c2p:u.identity,_offset:n._sankey.translateX,_length:n._sankey.width},h={_id:"y",c2p:u.identity,_offset:n._sankey.translateY,_length:n._sankey.height},p={gd:e,element:o.node(),plotinfo:{id:t,xaxis:d,yaxis:h,fillRangeItems:u.noop},subplot:t,xaxes:[d],yaxes:[h],doneFnCompleted:function(n){var r,i=e._fullData[t],a=i.node.groups.slice(),o=[];function s(e){for(var t=i._sankey.graph.nodes,n=0;n<t.length;n++)if(t[n].pointNumber===e)return t[n]}for(var l=0;l<n.length;l++){var c=s(n[l].pointNumber);if(c)if(c.group){for(var u=0;u<c.childrenNodes.length;u++)o.push(c.childrenNodes[u].pointNumber);a[c.pointNumber-i.node._count]=!1}else o.push(c.pointNumber)}r=a.filter(Boolean).concat([o]),f.call("_guiRestyle",e,{"node.groups":[r]},t)},prepFn:function(e,t,n){c(e,t,n,p,i)}};l.init(p)}}t.name=d,t.baseLayoutAttrOverrides=r({hoverlabel:o.hoverlabel},"plot","nested"),t.plot=function(e){var n=i(e.calcdata,d)[0];a(e,n),t.updateFx(e)},t.clean=function(e,t,n,r){var i=r._has&&r._has(d),a=t._has&&t._has(d);i&&!a&&(r._paperdiv.selectAll(".sankey").remove(),r._paperdiv.selectAll(".bgsankey").remove())},t.updateFx=function(e){for(var t=0;t<e._fullData.length;t++)h(e,t)}},24105:(e,t,n)=>{"use strict";var r=n(29777),i=n(56319),a=n(42219).wrap,o=i.isArrayOrTypedArray,s=i.isIndex,l=n(74062);function c(e){var t,n=e.node,a=e.link,c=[],u=o(a.color),f=o(a.hovercolor),d=o(a.customdata),h={},p={},m=a.colorscales.length;for(t=0;t<m;t++){var g=a.colorscales[t],v=l.extractScale(g,{cLetter:"c"}),y=l.makeColorScaleFunc(v);p[g.label]=y}var b=0;for(t=0;t<a.value.length;t++)a.source[t]>b&&(b=a.source[t]),a.target[t]>b&&(b=a.target[t]);var x,_=b+1;e.node._count=_;var w=e.node.groups,A={};for(t=0;t<w.length;t++){var k=w[t];for(x=0;x<k.length;x++){var E=k[x],T=_+t;A.hasOwnProperty(E)?i.warn("Node "+E+" is already part of a group."):A[E]=T}}var M={source:[],target:[]};for(t=0;t<a.value.length;t++){var S=a.value[t],C=a.source[t],O=a.target[t];if(S>0&&s(C,_)&&s(O,_)&&(!A.hasOwnProperty(C)||!A.hasOwnProperty(O)||A[C]!==A[O])){A.hasOwnProperty(O)&&(O=A[O]),A.hasOwnProperty(C)&&(C=A[C]),O=+O,h[C=+C]=h[O]=!0;var R="";a.label&&a.label[t]&&(R=a.label[t]);var N=null;R&&p.hasOwnProperty(R)&&(N=p[R]),c.push({pointNumber:t,label:R,color:u?a.color[t]:a.color,hovercolor:f?a.hovercolor[t]:a.hovercolor,customdata:d?a.customdata[t]:a.customdata,concentrationscale:N,source:C,target:O,value:+S}),M.source.push(C),M.target.push(O)}}var L=_+w.length,D=o(n.color),P=o(n.customdata),I=[];for(t=0;t<L;t++)if(h[t]){var F=n.label[t];I.push({group:t>_-1,childrenNodes:[],pointNumber:t,label:F,color:D?n.color[t]:n.color,customdata:P?n.customdata[t]:n.customdata})}var z=!1;return function(e,t,n){for(var a=i.init2dArray(e,0),o=0;o<Math.min(t.length,n.length);o++)if(i.isIndex(t[o],e)&&i.isIndex(n[o],e)){if(t[o]===n[o])return!0;a[t[o]].push(n[o])}var s=r(a);return s.components.some((function(e){return e.length>1}))}(L,M.source,M.target)&&(z=!0),{circular:z,links:c,nodes:I,groups:w,groupLookup:A}}e.exports=function(e,t){var n=c(t);return a({circular:n.circular,_nodes:n.nodes,_links:n.links,_groups:n.groups,_groupLookup:n.groupLookup})}},64543:e=>{"use strict";e.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},82338:(e,t,n)=>{"use strict";var r=n(56319),i=n(85749),a=n(53408),o=n(3707),s=n(18874).N,l=n(79752),c=n(65210),u=n(75078);function f(e,t){function n(n,a){return r.coerce(e,t,i.link.colorscales,n,a)}n("label"),n("cmin"),n("cmax"),n("colorscale")}e.exports=function(e,t,n,d){function h(n,a){return r.coerce(e,t,i,n,a)}var p=r.extendDeep(d.hoverlabel,e.hoverlabel),m=e.node,g=c.newContainer(t,"node");function v(e,t){return r.coerce(m,g,i.node,e,t)}v("label"),v("groups"),v("x"),v("y"),v("pad"),v("thickness"),v("line.color"),v("line.width"),v("hoverinfo",e.hoverinfo),l(m,g,v,p),v("hovertemplate"),v("align");var y=d.colorway;v("color",g.label.map((function(e,t){return a.addOpacity(function(e){return y[e%y.length]}(t),.8)}))),v("customdata");var b=e.link||{},x=c.newContainer(t,"link");function _(e,t){return r.coerce(b,x,i.link,e,t)}_("label"),_("arrowlen"),_("source"),_("target"),_("value"),_("line.color"),_("line.width"),_("hoverinfo",e.hoverinfo),l(b,x,_,p),_("hovertemplate");var w,A=o(d.paper_bgcolor).getLuminance()<.333,k=_("color",A?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)");function E(e){var t=o(e);if(!t.isValid())return e;var n=t.getAlpha();return n<=.8?t.setAlpha(n+.2):t=A?t.brighten():t.darken(),t.toRgbString()}_("hovercolor",Array.isArray(k)?k.map(E):E(k)),_("customdata"),u(b,x,{name:"colorscales",handleItemDefaults:f}),s(t,d,h),h("orientation"),h("valueformat"),h("valuesuffix"),g.x.length&&g.y.length&&(w="freeform"),h("arrangement",w),r.coerceFont(h,"textfont",d.font,{autoShadowDflt:!0}),t._length=null}},83534:(e,t,n)=>{"use strict";e.exports={attributes:n(85749),supplyDefaults:n(82338),calc:n(24105),plot:n(53743),moduleType:"trace",name:"sankey",basePlotModule:n(76687),selectPoints:n(79172),categories:["noOpacity"],meta:{description:["Sankey plots for network flow data analysis.","The nodes are specified in `nodes` and the links between sources and targets in `links`.","The colors are set in `nodes[i].color` and `links[i].color`, otherwise defaults are used."].join(" ")}}},53743:(e,t,n)=>{"use strict";var r=n(93268),i=n(56319),a=i.numberFormat,o=n(99520),s=n(17911),l=n(53408),c=n(64543).cn,u=i._;function f(e){return""!==e}function d(e,t){return e.filter((function(e){return e.key===t.traceId}))}function h(e,t){r.select(e).select("path").style("fill-opacity",t),r.select(e).select("rect").style("fill-opacity",t)}function p(e){r.select(e).select("text.name").style("fill","black")}function m(e){return function(t){return-1!==e.node.sourceLinks.indexOf(t.link)||-1!==e.node.targetLinks.indexOf(t.link)}}function g(e){return function(t){return-1!==t.node.sourceLinks.indexOf(e.link)||-1!==t.node.targetLinks.indexOf(e.link)}}function v(e,t,n){t&&n&&d(n,t).selectAll("."+c.sankeyLink).filter(m(t)).call(b.bind(0,t,n,!1))}function y(e,t,n){t&&n&&d(n,t).selectAll("."+c.sankeyLink).filter(m(t)).call(x.bind(0,t,n,!1))}function b(e,t,n,r){r.style("fill",(function(e){if(!e.link.concentrationscale)return e.tinyColorHoverHue})).style("fill-opacity",(function(e){if(!e.link.concentrationscale)return e.tinyColorHoverAlpha})),r.each((function(n){var r=n.link.label;""!==r&&d(t,e).selectAll("."+c.sankeyLink).filter((function(e){return e.link.label===r})).style("fill",(function(e){if(!e.link.concentrationscale)return e.tinyColorHoverHue})).style("fill-opacity",(function(e){if(!e.link.concentrationscale)return e.tinyColorHoverAlpha}))})),n&&d(t,e).selectAll("."+c.sankeyNode).filter(g(e)).call(v)}function x(e,t,n,r){r.style("fill",(function(e){return e.tinyColorHue})).style("fill-opacity",(function(e){return e.tinyColorAlpha})),r.each((function(n){var r=n.link.label;""!==r&&d(t,e).selectAll("."+c.sankeyLink).filter((function(e){return e.link.label===r})).style("fill",(function(e){return e.tinyColorHue})).style("fill-opacity",(function(e){return e.tinyColorAlpha}))})),n&&d(t,e).selectAll(c.sankeyNode).filter(g(e)).call(y)}function _(e,t){var n=e.hoverlabel||{},r=i.nestedProperty(n,t).get();return!Array.isArray(r)&&r}e.exports=function(e,t){for(var n=e._fullLayout,i=n._paper,d=n._size,m=0;m<e._fullData.length;m++)if(e._fullData[m].visible&&e._fullData[m].type===c.sankey&&!e._fullData[m]._viewInitial){var g=e._fullData[m].node;e._fullData[m]._viewInitial={node:{groups:g.groups.slice(),x:g.x.slice(),y:g.y.slice()}}}var w=u(e,"source:")+" ",A=u(e,"target:")+" ",k=u(e,"concentration:")+" ",E=u(e,"incoming flow count:")+" ",T=u(e,"outgoing flow count:")+" ";o(e,i,t,{width:d.w,height:d.h,margin:{t:d.t,r:d.r,b:d.b,l:d.l}},{linkEvents:{hover:function(t,n,i){!1!==e._fullLayout.hovermode&&(r.select(t).call(b.bind(0,n,i,!0)),"skip"!==n.link.trace.link.hoverinfo&&(n.link.fullData=n.link.trace,e.emit("plotly_hover",{event:r.event,points:[n.link]})))},follow:function(t,i){if(!1!==e._fullLayout.hovermode){var o=i.link.trace.link;if("none"!==o.hoverinfo&&"skip"!==o.hoverinfo){for(var c=[],u=0,d=0;d<i.flow.links.length;d++){var m=i.flow.links[d];if("closest"!==e._fullLayout.hovermode||i.link.pointNumber===m.pointNumber){i.link.pointNumber===m.pointNumber&&(u=d),m.fullData=m.trace,o=i.link.trace.link;var g=y(m),v={valueLabel:a(i.valueFormat)(m.value)+i.valueSuffix};c.push({x:g[0],y:g[1],name:v.valueLabel,text:[m.label||"",w+m.source.label,A+m.target.label,m.concentrationscale?k+a("%0.2f")(m.flow.labelConcentration):""].filter(f).join("<br>"),color:_(o,"bgcolor")||l.addOpacity(m.color,1),borderColor:_(o,"bordercolor"),fontFamily:_(o,"font.family"),fontSize:_(o,"font.size"),fontColor:_(o,"font.color"),fontWeight:_(o,"font.weight"),fontStyle:_(o,"font.style"),fontVariant:_(o,"font.variant"),fontTextcase:_(o,"font.textcase"),fontLineposition:_(o,"font.lineposition"),fontShadow:_(o,"font.shadow"),nameLength:_(o,"namelength"),textAlign:_(o,"align"),idealAlign:r.event.x<g[0]?"right":"left",hovertemplate:o.hovertemplate,hovertemplateLabels:v,eventData:[m]})}}s.loneHover(c,{container:n._hoverlayer.node(),outerContainer:n._paper.node(),gd:e,anchorIndex:u}).each((function(){i.link.concentrationscale||h(this,.65),p(this)}))}}function y(e){var t,n;e.circular?(t=(e.circularPathData.leftInnerExtent+e.circularPathData.rightInnerExtent)/2,n=e.circularPathData.verticalFullExtent):(t=(e.source.x1+e.target.x0)/2,n=(e.y0+e.y1)/2);var r=[t,n];return"v"===e.trace.orientation&&r.reverse(),r[0]+=i.parent.translateX,r[1]+=i.parent.translateY,r}},unhover:function(t,i,a){!1!==e._fullLayout.hovermode&&(r.select(t).call(x.bind(0,i,a,!0)),"skip"!==i.link.trace.link.hoverinfo&&(i.link.fullData=i.link.trace,e.emit("plotly_unhover",{event:r.event,points:[i.link]})),s.loneUnhover(n._hoverlayer.node()))},select:function(t,n){var i=n.link;i.originalEvent=r.event,e._hoverdata=[i],s.click(e,{target:!0})}},nodeEvents:{hover:function(t,n,i){!1!==e._fullLayout.hovermode&&(r.select(t).call(v,n,i),"skip"!==n.node.trace.node.hoverinfo&&(n.node.fullData=n.node.trace,e.emit("plotly_hover",{event:r.event,points:[n.node]})))},follow:function(t,i){if(!1!==e._fullLayout.hovermode){var o=i.node.trace.node;if("none"!==o.hoverinfo&&"skip"!==o.hoverinfo){var l=r.select(t).select("."+c.nodeRect),u=e._fullLayout._paperdiv.node().getBoundingClientRect(),d=l.node().getBoundingClientRect(),m=d.left-2-u.left,g=d.right+2-u.left,v=d.top+d.height/4-u.top,y={valueLabel:a(i.valueFormat)(i.node.value)+i.valueSuffix};i.node.fullData=i.node.trace,e._fullLayout._calcInverseTransform(e);var b=e._fullLayout._invScaleX,x=e._fullLayout._invScaleY,w=s.loneHover({x0:b*m,x1:b*g,y:x*v,name:a(i.valueFormat)(i.node.value)+i.valueSuffix,text:[i.node.label,E+i.node.targetLinks.length,T+i.node.sourceLinks.length].filter(f).join("<br>"),color:_(o,"bgcolor")||i.tinyColorHue,borderColor:_(o,"bordercolor"),fontFamily:_(o,"font.family"),fontSize:_(o,"font.size"),fontColor:_(o,"font.color"),fontWeight:_(o,"font.weight"),fontStyle:_(o,"font.style"),fontVariant:_(o,"font.variant"),fontTextcase:_(o,"font.textcase"),fontLineposition:_(o,"font.lineposition"),fontShadow:_(o,"font.shadow"),nameLength:_(o,"namelength"),textAlign:_(o,"align"),idealAlign:"left",hovertemplate:o.hovertemplate,hovertemplateLabels:y,eventData:[i.node]},{container:n._hoverlayer.node(),outerContainer:n._paper.node(),gd:e});h(w,.85),p(w)}}},unhover:function(t,i,a){!1!==e._fullLayout.hovermode&&(r.select(t).call(y,i,a),"skip"!==i.node.trace.node.hoverinfo&&(i.node.fullData=i.node.trace,e.emit("plotly_unhover",{event:r.event,points:[i.node]})),s.loneUnhover(n._hoverlayer.node()))},select:function(t,n,i){var a=n.node;a.originalEvent=r.event,e._hoverdata=[a],r.select(t).call(y,n,i),s.click(e,{target:!0})}}})}},99520:(e,t,n)=>{"use strict";var r=n(3457),i=n(72767).interpolateNumber,a=n(93268),o=n(52270),s=n(16923),l=n(64543),c=n(3707),u=n(53408),f=n(14797),d=n(56319),h=d.strTranslate,p=d.strRotate,m=n(42219),g=m.keyFun,v=m.repeat,y=m.unwrap,b=n(56953),x=n(3360),_=n(12564),w=_.CAP_SHIFT,A=_.LINE_SPACING;function k(e,t,n){var r,i=y(t),a=i.trace,u=a.domain,f="h"===a.orientation,h=a.node.pad,p=a.node.thickness,m={justify:o.sankeyJustify,left:o.sankeyLeft,right:o.sankeyRight,center:o.sankeyCenter}[a.node.align],g=e.width*(u.x[1]-u.x[0]),v=e.height*(u.y[1]-u.y[0]),b=i._nodes,x=i._links,_=i.circular;(r=_?s.sankeyCircular().circularLinkGap(0):o.sankey()).iterations(l.sankeyIterations).size(f?[g,v]:[v,g]).nodeWidth(p).nodePadding(h).nodeId((function(e){return e.pointNumber})).nodeAlign(m).nodes(b).links(x);var w,A,k,E=r();for(var T in r.nodePadding()<h&&d.warn("node.pad was reduced to ",r.nodePadding()," to fit within the figure."),i._groupLookup){var M,S=parseInt(i._groupLookup[T]);for(w=0;w<E.nodes.length;w++)if(E.nodes[w].pointNumber===S){M=E.nodes[w];break}if(M){var C={pointNumber:parseInt(T),x0:M.x0,x1:M.x1,y0:M.y0,y1:M.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};E.nodes.unshift(C),M.childrenNodes.unshift(C)}}if(function(){for(w=0;w<E.nodes.length;w++){var e,t,n=E.nodes[w],r={};for(A=0;A<n.targetLinks.length;A++)e=(t=n.targetLinks[A]).source.pointNumber+":"+t.target.pointNumber,r.hasOwnProperty(e)||(r[e]=[]),r[e].push(t);var i=Object.keys(r);for(A=0;A<i.length;A++){var a=r[e=i[A]],o=0,s={};for(k=0;k<a.length;k++)s[(t=a[k]).label]||(s[t.label]=0),s[t.label]+=t.value,o+=t.value;for(k=0;k<a.length;k++)(t=a[k]).flow={value:o,labelConcentration:s[t.label]/o,concentration:t.value/o,links:a},t.concentrationscale&&(t.color=c(t.concentrationscale(t.flow.labelConcentration)))}var l=0;for(A=0;A<n.sourceLinks.length;A++)l+=n.sourceLinks[A].value;for(A=0;A<n.sourceLinks.length;A++)(t=n.sourceLinks[A]).concentrationOut=t.value/l;var u=0;for(A=0;A<n.targetLinks.length;A++)u+=n.targetLinks[A].value;for(A=0;A<n.targetLinks.length;A++)(t=n.targetLinks[A]).concenrationIn=t.value/u}}(),a.node.x.length&&a.node.y.length){for(w=0;w<Math.min(a.node.x.length,a.node.y.length,E.nodes.length);w++)if(a.node.x[w]&&a.node.y[w]){var O=[a.node.x[w]*g,a.node.y[w]*v];E.nodes[w].x0=O[0]-p/2,E.nodes[w].x1=O[0]+p/2;var R=E.nodes[w].y1-E.nodes[w].y0;E.nodes[w].y0=O[1]-R/2,E.nodes[w].y1=O[1]+R/2}if("snap"===a.arrangement)!function(e){e.forEach((function(e){var t,n,r,i=0,a=e.length;for(e.sort((function(e,t){return e.y0-t.y0})),r=0;r<a;++r)(t=e[r]).y0>=i||(n=i-t.y0)>1e-6&&(t.y0+=n,t.y1+=n),i=t.y1+h}))}(function(e){var t,n,r=e.map((function(e,t){return{x0:e.x0,index:t}})).sort((function(e,t){return e.x0-t.x0})),i=[],a=-1,o=-1/0;for(w=0;w<r.length;w++){var s=e[r[w].index];s.x0>o+p&&(a+=1,t=s.x0),o=s.x0,i[a]||(i[a]=[]),i[a].push(s),n=t-s.x0,s.x0+=n,s.x1+=n}return i}(b=E.nodes));r.update(E)}return{circular:_,key:n,trace:a,guid:d.randstr(),horizontal:f,width:g,height:v,nodePad:a.node.pad,nodeLineColor:a.node.line.color,nodeLineWidth:a.node.line.width,linkLineColor:a.link.line.color,linkLineWidth:a.link.line.width,linkArrowLength:a.link.arrowlen,valueFormat:a.valueformat,valueSuffix:a.valuesuffix,textFont:a.textfont,translateX:u.x[0]*e.width+e.margin.l,translateY:e.height-u.y[1]*e.height+e.margin.t,dragParallel:f?v:g,dragPerpendicular:f?g:v,arrangement:a.arrangement,sankey:r,graph:E,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function E(e,t,n){var r=c(t.color),i=c(t.hovercolor),a=t.source.label+"|"+t.target.label+"__"+n;return t.trace=e.trace,t.curveNumber=e.trace.index,{circular:e.circular,key:a,traceId:e.key,pointNumber:t.pointNumber,link:t,tinyColorHue:u.tinyRGB(r),tinyColorAlpha:r.getAlpha(),tinyColorHoverHue:u.tinyRGB(i),tinyColorHoverAlpha:i.getAlpha(),linkPath:T,linkLineColor:e.linkLineColor,linkLineWidth:e.linkLineWidth,linkArrowLength:e.linkArrowLength,valueFormat:e.valueFormat,valueSuffix:e.valueSuffix,sankey:e.sankey,parent:e,interactionState:e.interactionState,flow:t.flow}}function T(){return function(e){var t=e.linkArrowLength;if(e.link.circular)return function(e,t){var n=e.width/2,r=e.circularPathData;return"top"===e.circularLinkType?"M "+(r.targetX-t)+" "+(r.targetY+n)+" L"+(r.rightInnerExtent-t)+" "+(r.targetY+n)+"A"+(r.rightLargeArcRadius+n)+" "+(r.rightSmallArcRadius+n)+" 0 0 1 "+(r.rightFullExtent-n-t)+" "+(r.targetY-r.rightSmallArcRadius)+"L"+(r.rightFullExtent-n-t)+" "+r.verticalRightInnerExtent+"A"+(r.rightLargeArcRadius+n)+" "+(r.rightLargeArcRadius+n)+" 0 0 1 "+(r.rightInnerExtent-t)+" "+(r.verticalFullExtent-n)+"L"+r.leftInnerExtent+" "+(r.verticalFullExtent-n)+"A"+(r.leftLargeArcRadius+n)+" "+(r.leftLargeArcRadius+n)+" 0 0 1 "+(r.leftFullExtent+n)+" "+r.verticalLeftInnerExtent+"L"+(r.leftFullExtent+n)+" "+(r.sourceY-r.leftSmallArcRadius)+"A"+(r.leftLargeArcRadius+n)+" "+(r.leftSmallArcRadius+n)+" 0 0 1 "+r.leftInnerExtent+" "+(r.sourceY+n)+"L"+r.sourceX+" "+(r.sourceY+n)+"L"+r.sourceX+" "+(r.sourceY-n)+"L"+r.leftInnerExtent+" "+(r.sourceY-n)+"A"+(r.leftLargeArcRadius-n)+" "+(r.leftSmallArcRadius-n)+" 0 0 0 "+(r.leftFullExtent-n)+" "+(r.sourceY-r.leftSmallArcRadius)+"L"+(r.leftFullExtent-n)+" "+r.verticalLeftInnerExtent+"A"+(r.leftLargeArcRadius-n)+" "+(r.leftLargeArcRadius-n)+" 0 0 0 "+r.leftInnerExtent+" "+(r.verticalFullExtent+n)+"L"+(r.rightInnerExtent-t)+" "+(r.verticalFullExtent+n)+"A"+(r.rightLargeArcRadius-n)+" "+(r.rightLargeArcRadius-n)+" 0 0 0 "+(r.rightFullExtent+n-t)+" "+r.verticalRightInnerExtent+"L"+(r.rightFullExtent+n-t)+" "+(r.targetY-r.rightSmallArcRadius)+"A"+(r.rightLargeArcRadius-n)+" "+(r.rightSmallArcRadius-n)+" 0 0 0 "+(r.rightInnerExtent-t)+" "+(r.targetY-n)+"L"+(r.targetX-t)+" "+(r.targetY-n)+(t>0?"L"+r.targetX+" "+r.targetY:"")+"Z":"M "+(r.targetX-t)+" "+(r.targetY-n)+" L"+(r.rightInnerExtent-t)+" "+(r.targetY-n)+"A"+(r.rightLargeArcRadius+n)+" "+(r.rightSmallArcRadius+n)+" 0 0 0 "+(r.rightFullExtent-n-t)+" "+(r.targetY+r.rightSmallArcRadius)+"L"+(r.rightFullExtent-n-t)+" "+r.verticalRightInnerExtent+"A"+(r.rightLargeArcRadius+n)+" "+(r.rightLargeArcRadius+n)+" 0 0 0 "+(r.rightInnerExtent-t)+" "+(r.verticalFullExtent+n)+"L"+r.leftInnerExtent+" "+(r.verticalFullExtent+n)+"A"+(r.leftLargeArcRadius+n)+" "+(r.leftLargeArcRadius+n)+" 0 0 0 "+(r.leftFullExtent+n)+" "+r.verticalLeftInnerExtent+"L"+(r.leftFullExtent+n)+" "+(r.sourceY+r.leftSmallArcRadius)+"A"+(r.leftLargeArcRadius+n)+" "+(r.leftSmallArcRadius+n)+" 0 0 0 "+r.leftInnerExtent+" "+(r.sourceY-n)+"L"+r.sourceX+" "+(r.sourceY-n)+"L"+r.sourceX+" "+(r.sourceY+n)+"L"+r.leftInnerExtent+" "+(r.sourceY+n)+"A"+(r.leftLargeArcRadius-n)+" "+(r.leftSmallArcRadius-n)+" 0 0 1 "+(r.leftFullExtent-n)+" "+(r.sourceY+r.leftSmallArcRadius)+"L"+(r.leftFullExtent-n)+" "+r.verticalLeftInnerExtent+"A"+(r.leftLargeArcRadius-n)+" "+(r.leftLargeArcRadius-n)+" 0 0 1 "+r.leftInnerExtent+" "+(r.verticalFullExtent-n)+"L"+(r.rightInnerExtent-t)+" "+(r.verticalFullExtent-n)+"A"+(r.rightLargeArcRadius-n)+" "+(r.rightLargeArcRadius-n)+" 0 0 1 "+(r.rightFullExtent+n-t)+" "+r.verticalRightInnerExtent+"L"+(r.rightFullExtent+n-t)+" "+(r.targetY+r.rightSmallArcRadius)+"A"+(r.rightLargeArcRadius-n)+" "+(r.rightSmallArcRadius-n)+" 0 0 1 "+(r.rightInnerExtent-t)+" "+(r.targetY+n)+"L"+(r.targetX-t)+" "+(r.targetY+n)+(t>0?"L"+r.targetX+" "+r.targetY:"")+"Z"}(e.link,t);var n=Math.abs((e.link.target.x0-e.link.source.x1)/2);t>n&&(t=n);var r=e.link.source.x1,a=e.link.target.x0-t,o=i(r,a),s=o(.5),l=o(.5),c=e.link.y0-e.link.width/2,u=e.link.y0+e.link.width/2,f=e.link.y1-e.link.width/2,d=e.link.y1+e.link.width/2,h="M"+r+","+c,p="C"+s+","+c+" "+l+","+f+" "+a+","+f,m="C"+l+","+d+" "+s+","+u+" "+r+","+u,g=t>0?"L"+(a+t)+","+(f+e.link.width/2):"";return h+p+(g+="L"+a+","+d)+m+"Z"}}function M(e,t){var n=c(t.color),r=l.nodePadAcross,i=e.nodePad/2;t.dx=t.x1-t.x0,t.dy=t.y1-t.y0;var a=t.dx,o=Math.max(.5,t.dy),s="node_"+t.pointNumber;return t.group&&(s=d.randstr()),t.trace=e.trace,t.curveNumber=e.trace.index,{index:t.pointNumber,key:s,partOfGroup:t.partOfGroup||!1,group:t.group,traceId:e.key,trace:e.trace,node:t,nodePad:e.nodePad,nodeLineColor:e.nodeLineColor,nodeLineWidth:e.nodeLineWidth,textFont:e.textFont,size:e.horizontal?e.height:e.width,visibleWidth:Math.ceil(a),visibleHeight:o,zoneX:-r,zoneY:-i,zoneWidth:a+2*r,zoneHeight:o+2*i,labelY:e.horizontal?t.dy/2+1:t.dx/2+1,left:1===t.originalLayer,sizeAcross:e.width,forceLayouts:e.forceLayouts,horizontal:e.horizontal,darkBackground:n.getBrightness()<=128,tinyColorHue:u.tinyRGB(n),tinyColorAlpha:n.getAlpha(),valueFormat:e.valueFormat,valueSuffix:e.valueSuffix,sankey:e.sankey,graph:e.graph,arrangement:e.arrangement,uniqueNodeLabelPathId:[e.guid,e.key,s].join("_"),interactionState:e.interactionState,figure:e}}function S(e){e.attr("transform",(function(e){return h(e.node.x0.toFixed(3),e.node.y0.toFixed(3))}))}function C(e){e.call(S)}function O(e,t){e.call(C),t.attr("d",T())}function R(e){e.attr("width",(function(e){return e.node.x1-e.node.x0})).attr("height",(function(e){return e.visibleHeight}))}function N(e){return e.link.width>1||e.linkLineWidth>0}function L(e){return h(e.translateX,e.translateY)+(e.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function D(e,t,n){e.on(".basic",null).on("mouseover.basic",(function(e){e.interactionState.dragInProgress||e.partOfGroup||(n.hover(this,e,t),e.interactionState.hovered=[this,e])})).on("mousemove.basic",(function(e){e.interactionState.dragInProgress||e.partOfGroup||(n.follow(this,e),e.interactionState.hovered=[this,e])})).on("mouseout.basic",(function(e){e.interactionState.dragInProgress||e.partOfGroup||(n.unhover(this,e,t),e.interactionState.hovered=!1)})).on("click.basic",(function(e){e.interactionState.hovered&&(n.unhover(this,e,t),e.interactionState.hovered=!1),e.interactionState.dragInProgress||e.partOfGroup||n.select(this,e,t)}))}function P(e,t,n,i){var o=a.behavior.drag().origin((function(e){return{x:e.node.x0+e.visibleWidth/2,y:e.node.y0+e.visibleHeight/2}})).on("dragstart",(function(a){if("fixed"!==a.arrangement&&(d.ensureSingle(i._fullLayout._infolayer,"g","dragcover",(function(e){i._fullLayout._dragCover=e})),d.raiseToTop(this),a.interactionState.dragInProgress=a.node,F(a.node),a.interactionState.hovered&&(n.nodeEvents.unhover.apply(0,a.interactionState.hovered),a.interactionState.hovered=!1),"snap"===a.arrangement)){var o=a.traceId+"|"+a.key;a.forceLayouts[o]?a.forceLayouts[o].alpha(1):function(e,t,n){!function(e){for(var t=0;t<e.length;t++)e[t].y=(e[t].y0+e[t].y1)/2,e[t].x=(e[t].x0+e[t].x1)/2}(n.graph.nodes);var i=n.graph.nodes.filter((function(e){return e.originalX===n.node.originalX})).filter((function(e){return!e.partOfGroup}));n.forceLayouts[t]=r.forceSimulation(i).alphaDecay(0).force("collide",r.forceCollide().radius((function(e){return e.dy/2+n.nodePad/2})).strength(1).iterations(l.forceIterations)).force("constrain",function(e,t,n,r){return function(){for(var e=0,i=0;i<n.length;i++){var a=n[i];a===r.interactionState.dragInProgress?(a.x=a.lastDraggedX,a.y=a.lastDraggedY):(a.vx=(a.originalX-a.x)/l.forceTicksPerFrame,a.y=Math.min(r.size-a.dy/2,Math.max(a.dy/2,a.y))),e=Math.max(e,Math.abs(a.vx),Math.abs(a.vy))}!r.interactionState.dragInProgress&&e<.1&&r.forceLayouts[t].alpha()>0&&r.forceLayouts[t].alpha(0)}}(0,t,i,n)).stop()}(0,o,a),function(e,t,n,r,i){window.requestAnimationFrame((function a(){var o;for(o=0;o<l.forceTicksPerFrame;o++)n.forceLayouts[r].tick();if(function(e){for(var t=0;t<e.length;t++)e[t].y0=e[t].y-e[t].dy/2,e[t].y1=e[t].y0+e[t].dy,e[t].x0=e[t].x-e[t].dx/2,e[t].x1=e[t].x0+e[t].dx}(n.graph.nodes),n.sankey.update(n.graph),O(e.filter(z(n)),t),n.forceLayouts[r].alpha()>0)window.requestAnimationFrame(a);else{var s=n.node.originalX;n.node.x0=s-n.visibleWidth/2,n.node.x1=s+n.visibleWidth/2,I(n,i)}}))}(e,t,a,o,i)}})).on("drag",(function(n){if("fixed"!==n.arrangement){var r=a.event.x,i=a.event.y;"snap"===n.arrangement?(n.node.x0=r-n.visibleWidth/2,n.node.x1=r+n.visibleWidth/2,n.node.y0=i-n.visibleHeight/2,n.node.y1=i+n.visibleHeight/2):("freeform"===n.arrangement&&(n.node.x0=r-n.visibleWidth/2,n.node.x1=r+n.visibleWidth/2),i=Math.max(0,Math.min(n.size-n.visibleHeight/2,i)),n.node.y0=i-n.visibleHeight/2,n.node.y1=i+n.visibleHeight/2),F(n.node),"snap"!==n.arrangement&&(n.sankey.update(n.graph),O(e.filter(z(n)),t))}})).on("dragend",(function(e){if("fixed"!==e.arrangement){e.interactionState.dragInProgress=!1;for(var t=0;t<e.node.childrenNodes.length;t++)e.node.childrenNodes[t].x=e.node.x,e.node.childrenNodes[t].y=e.node.y;"snap"!==e.arrangement&&I(e,i)}}));e.on(".drag",null).call(o)}function I(e,t){for(var n=[],r=[],i=0;i<e.graph.nodes.length;i++){var a=(e.graph.nodes[i].x0+e.graph.nodes[i].x1)/2,o=(e.graph.nodes[i].y0+e.graph.nodes[i].y1)/2;n.push(a/e.figure.width),r.push(o/e.figure.height)}x.call("_guiRestyle",t,{"node.x":[n],"node.y":[r]},e.trace.index).then((function(){t._fullLayout._dragCover&&t._fullLayout._dragCover.remove()}))}function F(e){e.lastDraggedX=e.x0+e.dx/2,e.lastDraggedY=e.y0+e.dy/2}function z(e){return function(t){return t.node.originalX===e.node.originalX}}e.exports=function(e,t,n,r,i){var o=e._context.staticPlot,s=!1;d.ensureSingle(e._fullLayout._infolayer,"g","first-render",(function(){s=!0}));var m=e._fullLayout._dragCover,x=n.filter((function(e){return y(e).trace.visible})).map(k.bind(null,r)),_=t.selectAll("."+l.cn.sankey).data(x,g);_.exit().remove(),_.enter().append("g").classed(l.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",o?"none":"auto").attr("transform",L),_.each((function(t,n){e._fullData[n]._sankey=t;var r="bgsankey-"+t.trace.uid+"-"+n;d.ensureSingle(e._fullLayout._draggers,"rect",r),e._fullData[n]._bgRect=a.select("."+r),e._fullData[n]._bgRect.style("pointer-events",o?"none":"all").attr("width",t.width).attr("height",t.height).attr("x",t.translateX).attr("y",t.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})})),_.transition().ease(l.ease).duration(l.duration).attr("transform",L);var C=_.selectAll("."+l.cn.sankeyLinks).data(v,g);C.enter().append("g").classed(l.cn.sankeyLinks,!0).style("fill","none");var O=C.selectAll("."+l.cn.sankeyLink).data((function(e){return e.graph.links.filter((function(e){return e.value})).map(E.bind(null,e))}),g);O.enter().append("path").classed(l.cn.sankeyLink,!0).call(D,_,i.linkEvents),O.style("stroke",(function(e){return N(e)?u.tinyRGB(c(e.linkLineColor)):e.tinyColorHue})).style("stroke-opacity",(function(e){return N(e)?u.opacity(e.linkLineColor):e.tinyColorAlpha})).style("fill",(function(e){return e.tinyColorHue})).style("fill-opacity",(function(e){return e.tinyColorAlpha})).style("stroke-width",(function(e){return N(e)?e.linkLineWidth:1})).attr("d",T()),O.style("opacity",(function(){return e._context.staticPlot||s||m?1:0})).transition().ease(l.ease).duration(l.duration).style("opacity",1),O.exit().transition().ease(l.ease).duration(l.duration).style("opacity",0).remove();var I=_.selectAll("."+l.cn.sankeyNodeSet).data(v,g);I.enter().append("g").classed(l.cn.sankeyNodeSet,!0),I.style("cursor",(function(e){switch(e.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}}));var F=I.selectAll("."+l.cn.sankeyNode).data((function(e){var t=e.graph.nodes;return function(e){var t,n=[];for(t=0;t<e.length;t++)e[t].originalX=(e[t].x0+e[t].x1)/2,e[t].originalY=(e[t].y0+e[t].y1)/2,-1===n.indexOf(e[t].originalX)&&n.push(e[t].originalX);for(n.sort((function(e,t){return e-t})),t=0;t<e.length;t++)e[t].originalLayerIndex=n.indexOf(e[t].originalX),e[t].originalLayer=e[t].originalLayerIndex/(n.length-1)}(t),t.map(M.bind(null,e))}),g);F.enter().append("g").classed(l.cn.sankeyNode,!0).call(S).style("opacity",(function(t){return!e._context.staticPlot&&!s||t.partOfGroup?0:1})),F.call(D,_,i.nodeEvents).call(P,O,i,e),F.transition().ease(l.ease).duration(l.duration).call(S).style("opacity",(function(e){return e.partOfGroup?0:1})),F.exit().transition().ease(l.ease).duration(l.duration).style("opacity",0).remove();var z=F.selectAll("."+l.cn.nodeRect).data(v);z.enter().append("rect").classed(l.cn.nodeRect,!0).call(R),z.style("stroke-width",(function(e){return e.nodeLineWidth})).style("stroke",(function(e){return u.tinyRGB(c(e.nodeLineColor))})).style("stroke-opacity",(function(e){return u.opacity(e.nodeLineColor)})).style("fill",(function(e){return e.tinyColorHue})).style("fill-opacity",(function(e){return e.tinyColorAlpha})),z.transition().ease(l.ease).duration(l.duration).call(R);var j=F.selectAll("."+l.cn.nodeLabel).data(v);j.enter().append("text").classed(l.cn.nodeLabel,!0).style("cursor","default"),j.attr("data-notex",1).text((function(e){return e.node.label})).each((function(t){var n=a.select(this);f.font(n,t.textFont),b.convertToTspans(n,e)})).attr("text-anchor",(function(e){return e.horizontal&&e.left?"end":"start"})).attr("transform",(function(e){var t=a.select(this),n=b.lineCount(t),r=e.textFont.size*((n-1)*A-w),i=e.nodeLineWidth/2+3,o=((e.horizontal?e.visibleHeight:e.visibleWidth)-r)/2;e.horizontal&&(e.left?i=-i:i+=e.visibleWidth);var s=e.horizontal?"":"scale(-1,1)"+p(90);return h(e.horizontal?i:o,e.horizontal?o:i)+s})),j.transition().ease(l.ease).duration(l.duration)}},79172:e=>{"use strict";e.exports=function(e,t){for(var n=[],r=e.cd[0].trace,i=r._sankey.graph.nodes,a=0;a<i.length;a++){var o=i[a];if(!o.partOfGroup){var s=[(o.x0+o.x1)/2,(o.y0+o.y1)/2];"v"===r.orientation&&s.reverse(),t&&t.contains(s,!1,a,e)&&n.push({pointNumber:o.pointNumber})}}return n}},54685:(e,t,n)=>{"use strict";var r=n(56319);e.exports=function(e,t){for(var n=0;n<e.length;n++)e[n].i=n;r.mergeArray(t.text,e,"tx"),r.mergeArray(t.texttemplate,e,"txt"),r.mergeArray(t.hovertext,e,"htx"),r.mergeArray(t.customdata,e,"data"),r.mergeArray(t.textposition,e,"tp"),t.textfont&&(r.mergeArrayCastPositive(t.textfont.size,e,"ts"),r.mergeArray(t.textfont.color,e,"tc"),r.mergeArray(t.textfont.family,e,"tf"),r.mergeArray(t.textfont.weight,e,"tw"),r.mergeArray(t.textfont.style,e,"ty"),r.mergeArray(t.textfont.variant,e,"tv"),r.mergeArray(t.textfont.textcase,e,"tC"),r.mergeArray(t.textfont.lineposition,e,"tE"),r.mergeArray(t.textfont.shadow,e,"tS"));var i=t.marker;if(i){r.mergeArrayCastPositive(i.size,e,"ms"),r.mergeArrayCastPositive(i.opacity,e,"mo"),r.mergeArray(i.symbol,e,"mx"),r.mergeArray(i.angle,e,"ma"),r.mergeArray(i.standoff,e,"mf"),r.mergeArray(i.color,e,"mc");var a=i.line;i.line&&(r.mergeArray(a.color,e,"mlc"),r.mergeArrayCastPositive(a.width,e,"mlw"));var o=i.gradient;o&&"none"!==o.type&&(r.mergeArray(o.type,e,"mgt"),r.mergeArray(o.color,e,"mgc"))}}},19030:(e,t,n)=>{"use strict";var r=n(66010).axisHoverFormat,i=n(77014).ay,a=n(77014).rb,o=n(50549),s=n(95323),l=n(9488).T,c=n(9488).k,u=n(14797),f=n(80938),d=n(86395).extendFlat,h=n(23876);function p(e){return{valType:"any",dflt:0,editType:"calc",description:["Only relevant when the axis `type` is *date*.","Sets the period positioning in milliseconds or *M<n>* on the "+e+" axis.","Special values in the form of *M<n>* could be used to declare","the number of months. In this case `n` must be a positive integer."].join(" ")}}function m(e){return{valType:"any",editType:"calc",description:["Only relevant when the axis `type` is *date*.","Sets the base for period positioning in milliseconds or date string on the "+e+" axis.","When `"+e+"period` is round number of weeks,","the `"+e+"period0` by default would be on a Sunday i.e. 2000-01-02,","otherwise it would be at 2000-01-01."].join(" ")}}function g(e){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc",description:["Only relevant when the axis `type` is *date*.","Sets the alignment of data points on the "+e+" axis."].join(" ")}}e.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0,description:"Sets the x coordinates."},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0,description:["Alternate to `x`.","Builds a linear space of x coordinates.","Use with `dx`","where `x0` is the starting coordinate and `dx` the step."].join(" ")},dx:{valType:"number",dflt:1,editType:"calc",anim:!0,description:["Sets the x coordinate step.","See `x0` for more info."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0,description:"Sets the y coordinates."},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0,description:["Alternate to `y`.","Builds a linear space of y coordinates.","Use with `dy`","where `y0` is the starting coordinate and `dy` the step."].join(" ")},dy:{valType:"number",dflt:1,editType:"calc",anim:!0,description:["Sets the y coordinate step.","See `y0` for more info."].join(" ")},xperiod:p("x"),yperiod:p("y"),xperiod0:m("x0"),yperiod0:m("y0"),xperiodalignment:g("x"),yperiodalignment:g("y"),xhoverformat:r("x"),yhoverformat:r("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc",description:["Set several traces linked to the same position axis","or matching axes to the same","offsetgroup where bars of the same position coordinate will line up."].join(" ")},alignmentgroup:{valType:"string",dflt:"",editType:"calc",description:["Set several traces linked to the same position axis","or matching axes to the same","alignmentgroup. This controls whether bars compute their positional","range dependently or independently."].join(" ")},stackgroup:{valType:"string",dflt:"",editType:"calc",description:["Set several scatter traces (on the same subplot) to the same","stackgroup in order to add their y values (or their x values if","`orientation` is *h*). If blank or omitted this trace will not be","stacked. Stacking also turns `fill` on by default, using *tonexty*","(*tonextx*) if `orientation` is *h* (*v*) and sets the default","`mode` to *lines* irrespective of point count.","You can only stack on a numeric (linear or log) axis.","Traces in a `stackgroup` will only fill to (or be filled to) other","traces in the same group. With multiple `stackgroup`s or some","traces stacked and some not, if fill-linked traces are not already","consecutive, the later ones will be pushed down in the drawing order."].join(" ")},orientation:{valType:"enumerated",values:["v","h"],editType:"calc",description:["Only relevant in the following cases:","1. when `scattermode` is set to *group*.","2. when `stackgroup` is used, and only the first","`orientation` found in the `stackgroup` will be used - including","if `visible` is *legendonly* but not if it is `false`. Sets the","stacking direction. With *v* (*h*), the y (x) values of subsequent","traces are added. Also affects the default value of `fill`."].join(" ")},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc",description:["Only relevant when `stackgroup` is used, and only the first","`groupnorm` found in the `stackgroup` will be used - including","if `visible` is *legendonly* but not if it is `false`.","Sets the normalization for the sum of this `stackgroup`.","With *fraction*, the value of each trace at each location is","divided by the sum of all trace values at that location.","*percent* is the same but multiplied by 100 to show percentages.","If there are multiple subplots, or multiple `stackgroup`s on one","subplot, each will be normalized within its own set."].join(" ")},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc",description:["Only relevant when `stackgroup` is used, and only the first","`stackgaps` found in the `stackgroup` will be used - including","if `visible` is *legendonly* but not if it is `false`.","Determines how we handle locations at which other traces in this","group have data but this one does not.","With *infer zero* we insert a zero at these locations.","With *interpolate* we linearly interpolate between existing","values, and extrapolate a constant beyond the existing values."].join(" ")},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:["Sets text elements associated with each (x,y) pair.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},texttemplate:i({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style",description:["Sets hover text elements associated with each (x,y) pair.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc",description:["Determines the drawing mode for this scatter trace.","If the provided `mode` includes *text* then the `text` elements","appear at the coordinates. Otherwise, the `text` elements","appear on hover.","If there are less than "+f.PTS_LINESONLY+" points","and the trace is not stacked","then the default is *lines+markers*. Otherwise, *lines*."].join(" ")},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style",description:["Do the hover effects highlight individual points (markers or","line points) or do they highlight filled regions?","If the fill is *toself* or *tonext* and there are no markers","or text, then the default is *fills*, otherwise it is *points*."].join(" ")},hovertemplate:a({},{keys:f.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0,description:"Sets the line color."},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0,description:"Sets the line width (in px)."},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot",description:["Determines the line shape.","With *spline* the lines are drawn using spline interpolation.","The other available values correspond to step-wise line shapes."].join(" ")},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot",description:["Has an effect only if `shape` is set to *spline*","Sets the amount of smoothing.","*0* corresponds to no smoothing (equivalent to a *linear* shape)."].join(" ")},dash:d({},l,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot",description:["Sets the line back off from the end point of the nth line segment (in px).","This option is useful e.g. to avoid overlap with arrowhead markers.","With *auto* the lines would trim before markers if `marker.angleref` is set to *previous*."].join(" ")},simplify:{valType:"boolean",dflt:!0,editType:"plot",description:["Simplifies lines by removing nearly-collinear points. When transitioning","lines, it may be desirable to disable this so that the number of points","along the resulting SVG path is unaffected."].join(" ")},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the provided data arrays are connected."].join(" ")},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot",description:["Determines whether or not markers and text nodes","are clipped about the subplot axes.","To show markers and text nodes above axis lines and tick labels,","make sure to set `xaxis.layer` and `yaxis.layer` to *below traces*."].join(" ")},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc",description:["Sets the area to fill with a solid color.","Defaults to *none* unless this trace is stacked, then it gets","*tonexty* (*tonextx*) if `orientation` is *v* (*h*)","Use with `fillcolor` if not *none*.","*tozerox* and *tozeroy* fill to x=0 and y=0 respectively.","*tonextx* and *tonexty* fill between the endpoints of this","trace and the endpoints of the trace before it, connecting those","endpoints with straight lines (to make a stacked area graph);","if there is no trace before it, they behave like *tozerox* and","*tozeroy*.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape.","*tonext* fills the space between two traces if one completely","encloses the other (eg consecutive contour lines), and behaves like","*toself* if there is no trace before it. *tonext* should not be","used if one trace does not enclose the other.","Traces in a `stackgroup` will only fill to (or be filled to) other","traces in the same group. With multiple `stackgroup`s or some","traces stacked and some not, if fill-linked traces are not already","consecutive, the later ones will be pushed down in the drawing order."].join(" ")},fillcolor:h(!0),fillgradient:d({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc",description:["Sets the type/orientation of the color gradient for the fill.","Defaults to *none*."].join(" ")},start:{valType:"number",editType:"calc",description:["Sets the gradient start value.","It is given as the absolute position on the axis determined by","the orientiation. E.g., if orientation is *horizontal*, the","gradient will be horizontal and start from the x-position","given by start. If omitted, the gradient starts at the lowest","value of the trace along the respective axis.","Ignored if orientation is *radial*."].join(" ")},stop:{valType:"number",editType:"calc",description:["Sets the gradient end value.","It is given as the absolute position on the axis determined by","the orientiation. E.g., if orientation is *horizontal*, the","gradient will be horizontal and end at the x-position","given by end. If omitted, the gradient ends at the highest","value of the trace along the respective axis.","Ignored if orientation is *radial*."].join(" ")},colorscale:{valType:"colorscale",editType:"style",description:["Sets the fill gradient colors as a color scale.","The color scale is interpreted as a gradient","applied in the direction specified by *orientation*,","from the lowest to the highest value of the scatter","plot along that axis, or from the center to the most","distant point from it, if orientation is *radial*."].join(" ")},editType:"calc",description:["Sets a fill gradient.","If not specified, the fillcolor is used instead."].join(" ")}),fillpattern:c,marker:d({symbol:{valType:"enumerated",values:u.symbolList,dflt:"circle",arrayOk:!0,editType:"style",description:["Sets the marker symbol type.","Adding 100 is equivalent to appending *-open* to a symbol name.","Adding 200 is equivalent to appending *-dot* to a symbol name.","Adding 300 is equivalent to appending *-open-dot*","or *dot-open* to a symbol name."].join(" ")},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0,description:"Sets the marker opacity."},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1,description:["Sets the marker angle in respect to `angleref`."].join(" ")},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1,description:["Sets the reference for marker angle.","With *previous*, angle 0 points along the line from the previous point to this one.","With *up*, angle 0 points toward the top of the screen."].join(" ")},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0,description:["Moves the marker away from the data point in the direction of `angle` (in px).","This can be useful for example if you have another marker at this","location and you want to point an arrowhead marker at it."].join(" ")},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0,description:"Sets the marker size (in px)."},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets a maximum number of points to be drawn on the graph.","*0* corresponds to no limit."].join(" ")},sizeref:{valType:"number",dflt:1,editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the scale factor used to determine the rendered size of","marker points. Use with `sizemin` and `sizemode`."].join(" ")},sizemin:{valType:"number",min:0,dflt:0,editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the minimum size (in px) of the rendered marker points."].join(" ")},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the rule for which the data in `size` is converted","to pixels."].join(" ")},line:d({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0,description:"Sets the width (in px) of the lines bounding the marker points."},editType:"calc"},o("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc",description:["Sets the type of gradient used to fill the markers"].join(" ")},color:{valType:"color",arrayOk:!0,editType:"calc",description:["Sets the final color of the gradient fill:","the center color for radial, the right for horizontal,","or the bottom for vertical."].join(" ")},editType:"calc"},editType:"calc"},o("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style",description:"Sets the marker opacity of selected points."},color:{valType:"color",editType:"style",description:"Sets the marker color of selected points."},size:{valType:"number",min:0,editType:"style",description:"Sets the marker size of selected points."},editType:"style"},textfont:{color:{valType:"color",editType:"style",description:"Sets the text font color of selected points."},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style",description:"Sets the marker opacity of unselected points, applied only when a selection exists."},color:{valType:"color",editType:"style",description:"Sets the marker color of unselected points, applied only when a selection exists."},size:{valType:"number",min:0,editType:"style",description:"Sets the marker size of unselected points, applied only when a selection exists."},editType:"style"},textfont:{color:{valType:"color",editType:"style",description:"Sets the text font color of unselected points, applied only when a selection exists."},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc",description:["Sets the positions of the `text` elements","with respects to the (x,y) coordinates."].join(" ")},textfont:s({editType:"calc",colorEditType:"style",arrayOk:!0,description:"Sets the text font."}),zorder:{valType:"integer",dflt:0,editType:"plot",description:["Sets the layer on which this trace is displayed, relative to","other SVG traces on the same subplot. SVG traces with higher `zorder`","appear in front of those with lower `zorder`."].join(" ")}}},90226:(e,t,n)=>{"use strict";var r=n(5605),i=n(56319),a=n(596),o=n(29850),s=n(33351).BADNUM,l=n(43612),c=n(35514),u=n(54685),f=n(57715);function d(e,t,n,r,i,o,s){var c=t._length,u=e._fullLayout,f=n._id,d=r._id,h=u._firstScatter[m(t)]===t.uid,p=(g(t,u,n,r)||{}).orientation,v=t.fill;n._minDtick=0,r._minDtick=0;var y={padded:!0},b={padded:!0};s&&(y.ppad=b.ppad=s);var x=c<2||i[0]!==i[c-1]||o[0]!==o[c-1];x&&("tozerox"===v||"tonextx"===v&&(h||"h"===p))?y.tozero=!0:(t.error_y||{}).visible||"tonexty"!==v&&"tozeroy"!==v&&(l.hasMarkers(t)||l.hasText(t))||(y.padded=!1,y.ppad=0),x&&("tozeroy"===v||"tonexty"===v&&(h||"v"===p))?b.tozero=!0:"tonextx"!==v&&"tozerox"!==v||(b.padded=!1),f&&(t._extremes[f]=a.findExtremes(n,i,y)),d&&(t._extremes[d]=a.findExtremes(r,o,b))}function h(e,t){if(l.hasMarkers(e)){var n,r=e.marker,o=1.6*(e.marker.sizeref||1);if(n="area"===e.marker.sizemode?function(e){return Math.max(Math.sqrt((e||0)/o),3)}:function(e){return Math.max((e||0)/o,3)},i.isArrayOrTypedArray(r.size)){var s={type:"linear"};a.setConvert(s);for(var c=s.makeCalcdata(e.marker,"size"),u=new Array(t),f=0;f<t;f++)u[f]=n(c[f]);return u}return n(r.size)}}function p(e,t){var n=m(t),r=e._firstScatter;r[n]||(r[n]=t.uid)}function m(e){var t=e.stackgroup;return e.xaxis+e.yaxis+e.type+(t?"-"+t:"")}function g(e,t,n,r){var i=e.stackgroup;if(i){var a=t._scatterStackOpts[n._id+r._id][i],o="v"===a.orientation?r:n;return"linear"===o.type||"log"===o.type?a:void 0}}e.exports={calc:function(e,t){var n,l,m,v,y,b,x=e._fullLayout,_=t._xA=a.getFromId(e,t.xaxis||"x","x"),w=t._yA=a.getFromId(e,t.yaxis||"y","y"),A=_.makeCalcdata(t,"x"),k=w.makeCalcdata(t,"y"),E=o(t,_,"x",A),T=o(t,w,"y",k),M=E.vals,S=T.vals,C=t._length,O=new Array(C),R=t.ids,N=g(t,x,_,w),L=!1;p(x,t);var D,P="x",I="y";N?(i.pushUnique(N.traceIndices,t._expandedIndex),(n="v"===N.orientation)?(I="s",D="x"):(P="s",D="y"),y="interpolate"===N.stackgaps):d(e,t,_,w,M,S,h(t,C));var F=!!t.xperiodalignment,z=!!t.yperiodalignment;for(l=0;l<C;l++){var j=O[l]={},B=r(M[l]),U=r(S[l]);B&&U?(j[P]=M[l],j[I]=S[l],F&&(j.orig_x=A[l],j.xEnd=E.ends[l],j.xStart=E.starts[l]),z&&(j.orig_y=k[l],j.yEnd=T.ends[l],j.yStart=T.starts[l])):N&&(n?B:U)?(j[D]=n?M[l]:S[l],j.gap=!0,y?(j.s=s,L=!0):j.s=0):j[P]=j[I]=s,R&&(j.id=String(R[l]))}if(u(O,t),c(e,t),f(O,t),N){for(l=0;l<O.length;)O[l][D]===s?O.splice(l,1):l++;if(i.sort(O,(function(e,t){return e[D]-t[D]||e.i-t.i})),L){for(l=0;l<O.length-1&&O[l].gap;)l++;for((b=O[l].s)||(b=O[l].s=0),m=0;m<l;m++)O[m].s=b;for(v=O.length-1;v>l&&O[v].gap;)v--;for(b=O[v].s,m=O.length-1;m>v;m--)O[m].s=b;for(;l<v;)if(O[++l].gap){for(m=l+1;O[m].gap;)m++;for(var $=O[l-1][D],q=O[l-1].s,H=(O[m].s-q)/(O[m][D]-$);l<m;)O[l].s=q+(O[l][D]-$)*H,l++}}}return O},calcMarkerSize:h,calcAxisExpansion:d,setFirstScatter:p,getStackOpts:g}},57715:(e,t,n)=>{"use strict";var r=n(56319);e.exports=function(e,t){r.isArrayOrTypedArray(t.selectedpoints)&&r.tagSelected(e,t)}},35514:(e,t,n)=>{"use strict";var r=n(96175).hasColorscale,i=n(57737),a=n(43612);e.exports=function(e,t){a.hasLines(t)&&r(t,"line")&&i(e,t,{vals:t.line.color,containerStr:"line",cLetter:"c"}),a.hasMarkers(t)&&(r(t,"marker")&&i(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),r(t,"marker.line")&&i(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},80938:e=>{"use strict";e.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},66049:(e,t,n)=>{"use strict";var r=n(90226),i=n(97088).setGroupPositions;function a(e,t,n,r,i,a,o){i[r]=!0;var s={i:null,gap:!0,s:0};if(s[o]=n,e.splice(t,0,s),t&&n===e[t-1][o]){var l=e[t-1];s.s=l.s,s.i=l.i,s.gap=l.gap}else a&&(s.s=function(e,t,n,r){var i=e[t-1],a=e[t+1];return a?i?i.s+(a.s-i.s)*(n-i[r])/(a[r]-i[r]):a.s:i.s}(e,t,n,o));t||(e[0].t=e[1].t,e[0].trace=e[1].trace,delete e[1].t,delete e[1].trace)}e.exports=function(e,t){"group"===e._fullLayout.scattermode&&function(e,t){for(var n=t.xaxis,r=t.yaxis,a=e._fullLayout,o=e._fullData,s=e.calcdata,l=[],c=[],u=0;u<o.length;u++){var f=o[u];!0===f.visible&&"scatter"===f.type&&f.xaxis===n._id&&f.yaxis===r._id&&("h"===f.orientation?l.push(s[u]):"v"===f.orientation&&c.push(s[u]))}var d={mode:a.scattermode,gap:a.scattergap};i(e,n,r,c,d),i(e,r,n,l,d)}(e,t);var n=t.xaxis,o=t.yaxis,s=n._id+o._id,l=e._fullLayout._scatterStackOpts[s];if(l){var c,u,f,d,h,p,m,g,v,y,b,x,_,w,A,k=e.calcdata;for(var E in l){var T=(y=l[E]).traceIndices;if(T.length){for(b="interpolate"===y.stackgaps,x=y.groupnorm,"v"===y.orientation?(_="x",w="y"):(_="y",w="x"),A=new Array(T.length),c=0;c<A.length;c++)A[c]=!1;p=k[T[0]];var M=new Array(p.length);for(c=0;c<p.length;c++)M[c]=p[c][_];for(c=1;c<T.length;c++){for(h=k[T[c]],u=f=0;u<h.length;u++){for(m=h[u][_];m>M[f]&&f<M.length;f++)a(h,u,M[f],c,A,b,_),u++;if(m!==M[f]){for(d=0;d<c;d++)a(k[T[d]],f,m,d,A,b,_);M.splice(f,0,m)}f++}for(;f<M.length;f++)a(h,u,M[f],c,A,b,_),u++}var S=M.length;for(u=0;u<p.length;u++){for(g=p[u][w]=p[u].s,c=1;c<T.length;c++)(h=k[T[c]])[0].trace._rawLength=h[0].trace._length,h[0].trace._length=S,g+=h[u].s,h[u][w]=g;if(x)for(v=("fraction"===x?g:g/100)||1,c=0;c<T.length;c++){var C=k[T[c]][u];C[w]/=v,C.sNorm=C.s/v}}for(c=0;c<T.length;c++){var O=(h=k[T[c]])[0].trace,R=r.calcMarkerSize(O,O._rawLength),N=Array.isArray(R);if(R&&A[c]||N){var L=R;for(R=new Array(S),u=0;u<S;u++)R[u]=h[u].gap?0:N?L[h[u].i]:L}var D=new Array(S),P=new Array(S);for(u=0;u<S;u++)D[u]=h[u].x,P[u]=h[u].y;r.calcAxisExpansion(e,O,n,o,D,P,R),h[0].t.orientation=y.orientation}}}}}},31930:(e,t,n)=>{"use strict";var r=n(56319),i=n(26403),a=n(19030);e.exports=function(e,t){var n,o,s;function l(e){return r.coerce(o._input,o,a,e)}if("group"===t.scattermode)for(s=0;s<e.length;s++)"scatter"===(o=e[s]).type&&(n=o._input,i(n,o,t,l));for(s=0;s<e.length;s++){var c=e[s];if("scatter"===c.type){var u=c.fill;if("none"!==u&&"toself"!==u&&(c.opacity=void 0,"tonexty"===u||"tonextx"===u))for(var f=s-1;f>=0;f--){var d=e[f];if("scatter"===d.type&&d.xaxis===c.xaxis&&d.yaxis===c.yaxis){d.opacity=void 0;break}}}}}},40609:(e,t,n)=>{"use strict";var r=n(56319),i=n(3360),a=n(19030),o=n(80938),s=n(43612),l=n(69165),c=n(119),u=n(59112),f=n(47694),d=n(65726),h=n(8008),p=n(86041),m=n(76332),g=n(56319).coercePattern;e.exports=function(e,t,n,v){function y(n,i){return r.coerce(e,t,a,n,i)}var b=l(e,t,v,y);if(b||(t.visible=!1),t.visible){c(e,t,v,y),y("xhoverformat"),y("yhoverformat"),y("zorder");var x=u(e,t,v,y);"group"===v.scattermode&&void 0===t.orientation&&y("orientation","v");var _=!x&&b<o.PTS_LINESONLY?"lines+markers":"lines";y("text"),y("hovertext"),y("mode",_),s.hasMarkers(t)&&f(e,t,n,v,y,{gradient:!0}),s.hasLines(t)&&(d(e,t,n,v,y,{backoff:!0}),h(e,t,y),y("connectgaps"),y("line.simplify")),s.hasText(t)&&(y("texttemplate"),p(e,t,v,y));var w=[];(s.hasMarkers(t)||s.hasText(t))&&(y("cliponaxis"),y("marker.maxdisplayed"),w.push("points")),y("fill",x?x.fillDflt:"none"),"none"!==t.fill&&(m(e,t,n,y,{moduleHasFillgradient:!0}),s.hasLines(t)||h(e,t,y),g(y,"fillpattern",t.fillcolor,!1));var A=(t.line||{}).color,k=(t.marker||{}).color;"tonext"!==t.fill&&"toself"!==t.fill||w.push("fills"),y("hoveron",w.join("+")||"points"),"fills"!==t.hoveron&&y("hovertemplate");var E=i.getComponentMethod("errorbars","supplyDefaults");E(e,t,A||k||n,{axis:"y"}),E(e,t,A||k||n,{axis:"x",inherit:"y"}),r.coerceSelectionMarkerOpacity(t,y)}}},23876:e=>{"use strict";e.exports=function(e){return{valType:"color",editType:"style",anim:!0,description:["Sets the fill color.","Defaults to a half-transparent variant of the line color,","marker color, or marker line color, whichever is available."+(e?" If fillgradient is specified, fillcolor is ignored except for setting the background color of the hover label, if any.":"")].join(" ")}}},76332:(e,t,n)=>{"use strict";var r=n(53408),i=n(56319).isArrayOrTypedArray;e.exports=function(e,t,n,a,o){o||(o={});var s,l=!1;if(t.marker){var c=t.marker.color,u=(t.marker.line||{}).color;c&&!i(c)?l=c:u&&!i(u)&&(l=u)}if(o.moduleHasFillgradient&&"none"!==a("fillgradient.type")){a("fillgradient.start"),a("fillgradient.stop");var f=a("fillgradient.colorscale");f&&(s=function(e){for(var t=r.interpolate(e[0][1],e[1][1],.5),n=2;n<e.length;n++){var i=r.interpolate(e[n-1][1],e[n][1],.5);t=r.interpolate(t,i,e[n-1][0]/e[n][0])}return t}(f))}a("fillcolor",r.addOpacity((t.line||{}).color||l||s||n,.5))}},75852:(e,t,n)=>{"use strict";var r=n(596);e.exports=function(e,t,n){var i={},a={_fullLayout:n},o=r.getFromTrace(a,t,"x"),s=r.getFromTrace(a,t,"y"),l=e.orig_x;void 0===l&&(l=e.x);var c=e.orig_y;return void 0===c&&(c=e.y),i.xLabel=r.tickText(o,o.c2l(l),!0).text,i.yLabel=r.tickText(s,s.c2l(c),!0).text,i}},13245:(e,t,n)=>{"use strict";var r=n(53408),i=n(43612);e.exports=function(e,t){var n,a;if("lines"===e.mode)return(n=e.line.color)&&r.opacity(n)?n:e.fillcolor;if("none"===e.mode)return e.fill?e.fillcolor:"";var o=t.mcc||(e.marker||{}).color,s=t.mlcc||((e.marker||{}).line||{}).color;return(a=o&&r.opacity(o)?o:s&&r.opacity(s)&&(t.mlw||((e.marker||{}).line||{}).width)?s:"")?r.opacity(a)<.3?r.addOpacity(a,.3):a:(n=(e.line||{}).color)&&r.opacity(n)&&i.hasLines(e)&&e.line.width?n:e.fillcolor}},26403:(e,t,n)=>{"use strict";var r=n(92397).getAxisGroup;e.exports=function(e,t,n,i){var a=t.orientation,o=t[{v:"x",h:"y"}[a]+"axis"],s=r(n,o)+a,l=n._alignmentOpts||{},c=i("alignmentgroup"),u=l[s];u||(u=l[s]={});var f=u[c];f?f.traces.push(t):f=u[c]={traces:[t],alignmentIndex:Object.keys(u).length,offsetGroups:{}};var d=i("offsetgroup"),h=f.offsetGroups,p=h[d];d&&(p||(p=h[d]={offsetIndex:Object.keys(h).length}),t._offsetIndex=p.offsetIndex)}},76425:(e,t,n)=>{"use strict";var r=n(56319),i=n(17911),a=n(3360),o=n(13245),s=n(53408),l=r.fillText;e.exports=function(e,t,n,c){var u=e.cd,f=u[0].trace,d=e.xa,h=e.ya,p=d.c2p(t),m=h.c2p(n),g=[p,m],v=f.hoveron||"",y=-1!==f.mode.indexOf("markers")?3:.5,b=!!f.xperiodalignment,x=!!f.yperiodalignment;if(-1!==v.indexOf("points")){var _=function(e){var t=Math.max(y,e.mrc||0),n=d.c2p(e.x)-p,r=h.c2p(e.y)-m;return Math.max(Math.sqrt(n*n+r*r)-t,1-y/t)},w=i.getDistanceFunction(c,(function(e){if(b){var t=d.c2p(e.xStart),n=d.c2p(e.xEnd);return p>=Math.min(t,n)&&p<=Math.max(t,n)?0:1/0}var r=Math.max(3,e.mrc||0),i=1-1/r,a=Math.abs(d.c2p(e.x)-p);return a<r?i*a/r:a-r+i}),(function(e){if(x){var t=h.c2p(e.yStart),n=h.c2p(e.yEnd);return m>=Math.min(t,n)&&m<=Math.max(t,n)?0:1/0}var r=Math.max(3,e.mrc||0),i=1-1/r,a=Math.abs(h.c2p(e.y)-m);return a<r?i*a/r:a-r+i}),_);if(i.getClosest(u,w,e),!1!==e.index){var A=u[e.index],k=d.c2p(A.x,!0),E=h.c2p(A.y,!0),T=A.mrc||1;e.index=A.i;var M=u[0].t.orientation,S=M&&(A.sNorm||A.s),C="h"===M?S:void 0!==A.orig_x?A.orig_x:A.x,O="v"===M?S:void 0!==A.orig_y?A.orig_y:A.y;return r.extendFlat(e,{color:o(f,A),x0:k-T,x1:k+T,xLabelVal:C,y0:E-T,y1:E+T,yLabelVal:O,spikeDistance:_(A),hovertemplate:f.hovertemplate}),l(A,f,e),a.getComponentMethod("errorbars","hoverInfo")(A,f,e),[e]}}function R(e){if(!e)return!1;var t=e.node();try{var n=new DOMPoint(g[0],g[1]);return t.isPointInFill(n)}catch(e){var r=t.ownerSVGElement.createSVGPoint();return r.x=g[0],r.y=g[1],t.isPointInFill(r)}}if(-1!==v.indexOf("fills")&&f._fillElement&&(R(f._fillElement)&&!R(f._fillExclusionElement))){var N=function(e){var t,n,r,i,a,o,s,l,c,u=[],f=1/0,p=-1/0,m=1/0,v=-1/0;for(t=0;t<e.length;t++){var y=e[t];y.contains(g)&&(u.push(y),m=Math.min(m,y.ymin),v=Math.max(v,y.ymax))}if(0===u.length)return null;for(n=((m=Math.max(m,0))+(v=Math.min(v,h._length)))/2,t=0;t<u.length;t++)for(i=u[t].pts,r=1;r<i.length;r++)(l=i[r-1][1])>n!=(c=i[r][1])>=n&&(o=i[r-1][0],s=i[r][0],c-l&&(a=o+(s-o)*(n-l)/(c-l),f=Math.min(f,a),p=Math.max(p,a)));return{x0:f=Math.max(f,0),x1:p=Math.min(p,d._length),y0:n,y1:n}}(f._polygons);null===N&&(N={x0:g[0],x1:g[0],y0:g[1],y1:g[1]});var L=s.defaultLine;return s.opacity(f.fillcolor)?L=f.fillcolor:s.opacity((f.line||{}).color)&&(L=f.line.color),r.extendFlat(e,{distance:e.maxHoverDistance,x0:N.x0,x1:N.x1,y0:N.y0,y1:N.y1,color:L,hovertemplate:!1}),delete e.index,f.text&&!r.isArrayOrTypedArray(f.text)?e.text=String(f.text):e.text=f.name,[e]}}},93959:(e,t,n)=>{"use strict";var r=n(43612);e.exports={hasLines:r.hasLines,hasMarkers:r.hasMarkers,hasText:r.hasText,isBubble:r.isBubble,attributes:n(19030),layoutAttributes:n(91493),supplyDefaults:n(40609),crossTraceDefaults:n(31930),supplyLayoutDefaults:n(1618),calc:n(90226).calc,crossTraceCalc:n(66049),arraysToCalcdata:n(54685),plot:n(39088),colorbar:n(83304),formatLabels:n(75852),style:n(93114).style,styleOnSelect:n(93114).styleOnSelect,hoverPoints:n(76425),selectPoints:n(28203),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:n(64125),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{description:["The scatter trace type encompasses line charts, scatter charts, text charts, and bubble charts.","The data visualized as scatter point or lines is set in `x` and `y`.","Text (appearing either on the chart or on hover only) is via `text`.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","to numerical arrays."].join(" ")}}},91493:e=>{"use strict";e.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc",description:["Determines how scatter points at the same location coordinate","are displayed on the graph.","With *group*, the scatter points are plotted next to one another","centered around the shared location.","With *overlay*, the scatter points are plotted over one another,","you might need to reduce *opacity* to see multiple scatter points."].join(" ")},scattergap:{valType:"number",min:0,max:1,editType:"calc",description:["Sets the gap (in plot fraction) between scatter points of","adjacent location coordinates.","Defaults to `bargap`."].join(" ")}}},1618:(e,t,n)=>{"use strict";var r=n(56319),i=n(91493);e.exports=function(e,t){var n,a,o="group"===t.barmode;"group"===t.scattermode&&(n="scattergap",a=o?t.bargap:.2,r.coerce(e,t,i,n,a))}},65726:(e,t,n)=>{"use strict";var r=n(56319).isArrayOrTypedArray,i=n(96175).hasColorscale,a=n(14530);e.exports=function(e,t,n,o,s,l){l||(l={});var c=(e.marker||{}).color;(c&&c._inputArray&&(c=c._inputArray),s("line.color",n),i(e,"line"))?a(e,t,o,s,{prefix:"line.",cLetter:"c"}):s("line.color",!r(c)&&c||n);s("line.width"),l.noDash||s("line.dash"),l.backoff&&s("line.backoff")}},87639:(e,t,n)=>{"use strict";var r=n(14797),i=n(33351),a=i.BADNUM,o=i.LOG_CLIP,s=o+.5,l=o-.5,c=n(56319),u=c.segmentsIntersect,f=c.constrain,d=n(80938);e.exports=function(e,t){var n,i,o,h,p,m,g,v,y,b,x,_,w,A,k,E,T,M,S=t.trace||{},C=t.xaxis,O=t.yaxis,R="log"===C.type,N="log"===O.type,L=C._length,D=O._length,P=t.backoff,I=S.marker,F=t.connectGaps,z=t.baseTolerance,j=t.shape,B="linear"===j,U=S.fill&&"none"!==S.fill,$=[],q=d.minTolerance,H=e.length,V=new Array(H),W=0;function G(n){var r=e[n];if(!r)return!1;var i=t.linearized?C.l2p(r.x):C.c2p(r.x),o=t.linearized?O.l2p(r.y):O.c2p(r.y);if(i===a){if(R&&(i=C.c2p(r.x,!0)),i===a)return!1;N&&o===a&&(i*=Math.abs(C._m*D*(C._m>0?s:l)/(O._m*L*(O._m>0?s:l)))),i*=1e3}if(o===a){if(N&&(o=O.c2p(r.y,!0)),o===a)return!1;o*=1e3}return[i,o]}function Y(e,t,n,r){var i=n-e,a=r-t,o=.5-e,s=.5-t,l=i*i+a*a,c=i*o+a*s;if(c>0&&c<l){var u=o*a-s*i;if(u*u<l)return!0}}function X(e,t){var n=e[0]/L,r=e[1]/D,i=Math.max(0,-n,n-1,-r,r-1);return i&&void 0!==T&&Y(n,r,T,M)&&(i=0),i&&t&&Y(n,r,t[0]/L,t[1]/D)&&(i=0),(1+d.toleranceGrowth*i)*z}function K(e,t){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}var Z,J,Q,ee,te,ne,re,ie=d.maxScreensAway,ae=-L*ie,oe=L*(1+ie),se=-D*ie,le=D*(1+ie),ce=[[ae,se,oe,se],[oe,se,oe,le],[oe,le,ae,le],[ae,le,ae,se]];function ue(e){if(e[0]<ae||e[0]>oe||e[1]<se||e[1]>le)return[f(e[0],ae,oe),f(e[1],se,le)]}function fe(e,t){return e[0]===t[0]&&(e[0]===ae||e[0]===oe)||(e[1]===t[1]&&(e[1]===se||e[1]===le)||void 0)}function de(e,t,n){return function(r,i){var a=ue(r),o=ue(i),s=[];if(a&&o&&fe(a,o))return s;a&&s.push(a),o&&s.push(o);var l=2*c.constrain((r[e]+i[e])/2,t,n)-((a||r)[e]+(o||i)[e]);l&&((a&&o?l>0==a[e]>o[e]?a:o:a||o)[e]+=l);return s}}function he(e){var t=e[0],n=e[1],r=t===V[W-1][0],i=n===V[W-1][1];if(!r||!i)if(W>1){var a=t===V[W-2][0],o=n===V[W-2][1];r&&(t===ae||t===oe)&&a?o?W--:V[W-1]=e:i&&(n===se||n===le)&&o?a?W--:V[W-1]=e:V[W++]=e}else V[W++]=e}function pe(e){V[W-1][0]!==e[0]&&V[W-1][1]!==e[1]&&he([Q,ee]),he(e),te=null,Q=ee=0}"linear"===j||"spline"===j?re=function(e,t){for(var n=[],r=0,i=0;i<4;i++){var a=ce[i],o=u(e[0],e[1],t[0],t[1],a[0],a[1],a[2],a[3]);o&&(!r||Math.abs(o.x-n[0][0])>1||Math.abs(o.y-n[0][1])>1)&&(o=[o.x,o.y],r&&K(o,e)<K(n[0],e)?n.unshift(o):n.push(o),r++)}return n}:"hv"===j||"vh"===j?re=function(e,t){var n=[],r=ue(e),i=ue(t);return r&&i&&fe(r,i)||(r&&n.push(r),i&&n.push(i)),n}:"hvh"===j?re=de(0,ae,oe):"vhv"===j&&(re=de(1,se,le));var me=c.isArrayOrTypedArray(I);function ge(t){if(t&&P&&(t.i=n,t.d=e,t.trace=S,t.marker=me?I[t.i]:I,t.backoff=P),T=t[0]/L,M=t[1]/D,Z=t[0]<ae?ae:t[0]>oe?oe:0,J=t[1]<se?se:t[1]>le?le:0,Z||J){if(W)if(te){var r=re(te,t);r.length>1&&(pe(r[0]),V[W++]=r[1])}else ne=re(V[W-1],t)[0],V[W++]=ne;else V[W++]=[Z||t[0],J||t[1]];var i=V[W-1];Z&&J&&(i[0]!==Z||i[1]!==J)?(te&&(Q!==Z&&ee!==J?he(Q&&ee?(a=te,s=(o=t)[0]-a[0],l=(o[1]-a[1])/s,(a[1]*o[0]-o[1]*a[0])/s>0?[l>0?ae:oe,le]:[l>0?oe:ae,se]):[Q||Z,ee||J]):Q&&ee&&he([Q,ee])),he([Z,J])):Q-Z&&ee-J&&he([Z||Q,J||ee]),te=t,Q=Z,ee=J}else te&&pe(re(te,t)[0]),V[W++]=t;var a,o,s,l}for(n=0;n<H;n++)if(i=G(n)){for(W=0,te=null,ge(i),n++;n<H;n++){if(!(h=G(n))){if(F)continue;break}if(B&&t.simplify){var ve=G(n+1);if(b=K(h,i),U&&(0===W||W===H-1)||!(b<X(h,ve)*q)){for(v=[(h[0]-i[0])/b,(h[1]-i[1])/b],p=i,x=b,_=A=k=0,g=!1,o=h,n++;n<e.length;n++){if(m=ve,ve=G(n+1),!m){if(F)continue;break}if(E=(y=[m[0]-i[0],m[1]-i[1]])[0]*v[1]-y[1]*v[0],A=Math.min(A,E),(k=Math.max(k,E))-A>X(m,ve))break;o=m,(w=y[0]*v[0]+y[1]*v[1])>x?(x=w,h=m,g=!1):w<_&&(_=w,p=m,g=!0)}if(g?(ge(h),o!==p&&ge(p)):(p!==i&&ge(p),o!==h&&ge(h)),ge(o),n>=e.length||!m)break;ge(m),i=m}}else ge(h)}te&&he([Q||te[0],ee||te[1]]),$.push(V.slice(0,W))}var ye=j.slice(j.length-1);if(P&&"h"!==ye&&"v"!==ye){for(var be=!1,xe=-1,_e=[],we=0;we<$.length;we++)for(var Ae=0;Ae<$[we].length-1;Ae++){var ke=$[we][Ae],Ee=$[we][Ae+1],Te=r.applyBackoff(Ee,ke);Te[0]===Ee[0]&&Te[1]===Ee[1]||(be=!0),_e[xe+1]||(_e[++xe]=[ke,[Te[0],Te[1]]])}return be?_e:$}return $}},8008:e=>{"use strict";e.exports=function(e,t,n){"spline"===n("line.shape")&&n("line.smoothing")}},18656:e=>{"use strict";var t={tonextx:1,tonexty:1,tonext:1};e.exports=function(e,n,r){var i,a,o,s,l,c={},u=!1,f=-1,d=0,h=-1;for(a=0;a<r.length;a++)(o=(i=r[a][0].trace).stackgroup||"")?o in c?l=c[o]:(l=c[o]=d,d++):i.fill in t&&h>=0?l=h:(l=h=d,d++),l<f&&(u=!0),i._groupIndex=f=l;var p=r.slice();u&&p.sort((function(e,t){var n=e[0].trace,r=t[0].trace;return n._groupIndex-r._groupIndex||n.index-r.index}));var m={};for(a=0;a<p.length;a++)o=(i=p[a][0].trace).stackgroup||"",!0===i.visible?(i._nexttrace=null,i.fill in t&&(s=m[o],i._prevtrace=s||null,s&&(s._nexttrace=i)),i._ownfill=i.fill&&("tozero"===i.fill.substr(0,6)||"toself"===i.fill||"to"===i.fill.substr(0,2)&&!i._prevtrace),m[o]=i):i._prevtrace=i._nexttrace=i._ownfill=null;return p}},70789:(e,t,n)=>{"use strict";var r=n(5605);e.exports=function(e,t){t||(t=2);var n=e.marker,i=n.sizeref||1,a=n.sizemin||0,o="area"===n.sizemode?function(e){return Math.sqrt(e/i)}:function(e){return e/i};return function(e){var n=o(e/t);return r(n)&&n>0?Math.max(n,a):0}}},83304:e=>{"use strict";e.exports={container:"marker",min:"cmin",max:"cmax"}},47694:(e,t,n)=>{"use strict";var r=n(53408),i=n(96175).hasColorscale,a=n(14530),o=n(43612);e.exports=function(e,t,n,s,l,c){var u=o.isBubble(e),f=(e.line||{}).color;(c=c||{},f&&(n=f),l("marker.symbol"),l("marker.opacity",u?.7:1),l("marker.size"),c.noAngle||(l("marker.angle"),c.noAngleRef||l("marker.angleref"),c.noStandOff||l("marker.standoff")),l("marker.color",n),i(e,"marker")&&a(e,t,s,l,{prefix:"marker.",cLetter:"c"}),c.noSelect||(l("selected.marker.color"),l("unselected.marker.color"),l("selected.marker.size"),l("unselected.marker.size")),c.noLine||(l("marker.line.color",f&&!Array.isArray(f)&&t.marker.color!==f?f:u?r.background:r.defaultLine),i(e,"marker.line")&&a(e,t,s,l,{prefix:"marker.line.",cLetter:"c"}),l("marker.line.width",u?1:0)),u&&(l("marker.sizeref"),l("marker.sizemin"),l("marker.sizemode")),c.gradient)&&("none"!==l("marker.gradient.type")&&l("marker.gradient.color"))}},119:(e,t,n)=>{"use strict";var r=n(56319).dateTick0,i=n(33351).ONEWEEK;function a(e,t){return r(t,e%i==0?1:0)}e.exports=function(e,t,n,r,i){if(i||(i={x:!0,y:!0}),i.x){var o=r("xperiod");o&&(r("xperiod0",a(o,t.xcalendar)),r("xperiodalignment"))}if(i.y){var s=r("yperiod");s&&(r("yperiod0",a(s,t.ycalendar)),r("yperiodalignment"))}}},39088:(e,t,n)=>{"use strict";var r=n(93268),i=n(3360),a=n(56319),o=a.ensureSingle,s=a.identity,l=n(14797),c=n(43612),u=n(87639),f=n(18656),d=n(55549).tester;function h(e,t,n,f,h,p,m){var g,v=e._context.staticPlot;!function(e,t,n,i,o){var s=n.xaxis,l=n.yaxis,u=r.extent(a.simpleMap(s.range,s.r2c)),f=r.extent(a.simpleMap(l.range,l.r2c)),d=i[0].trace;if(!c.hasMarkers(d))return;var h=d.marker.maxdisplayed;if(0===h)return;var p=i.filter((function(e){return e.x>=u[0]&&e.x<=u[1]&&e.y>=f[0]&&e.y<=f[1]})),m=Math.ceil(p.length/h),g=0;o.forEach((function(e,n){var r=e[0].trace;c.hasMarkers(r)&&r.marker.maxdisplayed>0&&n<t&&g++}));var v=Math.round(g*m/3+Math.floor(g/3)*m/7.1);i.forEach((function(e){delete e.vis})),p.forEach((function(e,t){0===Math.round((t+v)%m)&&(e.vis=!0)}))}(0,t,n,f,h);var y=!!m&&m.duration>0;function b(e){return y?e.transition():e}var x=n.xaxis,_=n.yaxis,w=f[0].trace,A=w.line,k=r.select(p),E=o(k,"g","errorbars"),T=o(k,"g","lines"),M=o(k,"g","points"),S=o(k,"g","text");if(i.getComponentMethod("errorbars","plot")(e,E,n,m),!0===w.visible){var C,O;b(k).style("opacity",w.opacity);var R,N,L=w.fill.charAt(w.fill.length-1);"x"!==L&&"y"!==L&&(L=""),"y"===L?(R=1,N=_.c2p(0,!0)):"x"===L&&(R=0,N=x.c2p(0,!0)),f[0][n.isRangePlot?"nodeRangePlot3":"node3"]=k;var D,P,I="",F=[],z=w._prevtrace,j=null,B=null;z&&(I=z._prevRevpath||"",O=z._nextFill,F=z._ownPolygons,j=z._fillsegments,B=z._fillElement);var U,$,q,H,V,W,G="",Y="",X=[];w._polygons=[];var K=[],Z=[],J=a.noop;if(C=w._ownFill,c.hasLines(w)||"none"!==w.fill){O&&O.datum(f),-1!==["hv","vh","hvh","vhv"].indexOf(A.shape)?(U=l.steps(A.shape),$=l.steps(A.shape.split("").reverse().join(""))):U=$="spline"===A.shape?function(e){var t=e[e.length-1];return e.length>1&&e[0][0]===t[0]&&e[0][1]===t[1]?l.smoothclosed(e.slice(1),A.smoothing):l.smoothopen(e,A.smoothing)}:function(e){return"M"+e.join("L")},q=function(e){return $(e.reverse())},Z=u(f,{xaxis:x,yaxis:_,trace:w,connectGaps:w.connectgaps,baseTolerance:Math.max(A.width||1,3)/4,shape:A.shape,backoff:A.backoff,simplify:A.simplify,fill:w.fill}),K=new Array(Z.length);var Q=0;for(g=0;g<Z.length;g++){var ee,te=Z[g];ee&&L?ee.push.apply(ee,te):(ee=te.slice(),K[Q]=ee,Q++)}w._fillElement=null,w._fillExclusionElement=B,w._fillsegments=K.slice(0,Q),K=w._fillsegments,Z.length&&(H=Z[0][0].slice(),W=(V=Z[Z.length-1])[V.length-1].slice()),J=function(e){return function(t){if(D=U(t),P=q(t),G?L?(G+="L"+D.substr(1),Y=P+"L"+Y.substr(1)):(G+="Z"+D,Y=P+"Z"+Y):(G=D,Y=P),c.hasLines(w)){var n=r.select(this);if(n.datum(f),e)b(n.style("opacity",0).attr("d",D).call(l.lineGroupStyle)).style("opacity",1);else{var i=b(n);i.attr("d",D),l.singleLineStyle(f,i)}}}}}var ne=T.selectAll(".js-line").data(Z);b(ne.exit()).style("opacity",0).remove(),ne.each(J(!1)),ne.enter().append("path").classed("js-line",!0).style("vector-effect",v?"none":"non-scaling-stroke").call(l.lineGroupStyle).each(J(!0)),l.setClipUrl(ne,n.layerClipId,e);var re=function(){var e=new Array(K.length);for(g=0;g<K.length;g++)e[g]=d(K[g]);return e},ie=function(e){var t,n;if(e&&0!==e.length){for(t=new Array(e.length-1+K.length),n=0;n<e.length-1;n++)t[n]=d(e[n]);var r=e[e.length-1].slice();for(r.reverse(),n=0;n<K.length;n++)t[e.length-1+n]=d(K[n].concat(r))}else for(t=new Array(K.length),n=0;n<K.length;n++){var i=K[n][0].slice(),a=K[n][K[n].length-1].slice();i[R]=a[R]=N;var o=[a,i].concat(K[n]);t[n]=d(o)}return t};Z.length?(C?(C.datum(f),H&&W&&(L?(H[R]=W[R]=N,b(C).attr("d","M"+W+"L"+H+"L"+G.substr(1)).call(l.singleFillStyle,e),X=ie(null)):(b(C).attr("d",G+"Z").call(l.singleFillStyle,e),X=re())),w._polygons=X,w._fillElement=C):O&&("tonext"===w.fill.substr(0,6)&&G&&I?("tonext"===w.fill?(b(O).attr("d",G+"Z"+I+"Z").call(l.singleFillStyle,e),X=re(),w._polygons=X.concat(F)):(b(O).attr("d",G+"L"+I.substr(1)+"Z").call(l.singleFillStyle,e),X=ie(j),w._polygons=X),w._fillElement=O):oe(O)),w._prevRevpath=Y):(C?oe(C):O&&oe(O),w._prevRevpath=null),w._ownPolygons=X,M.datum(f),S.datum(f),function(t,i,a){var o,u=a[0].trace,f=c.hasMarkers(u),d=c.hasText(u),h=fe(u),p=de,m=de;if(f||d){var g=s,v=u.stackgroup,w=v&&"infer zero"===e._fullLayout._scatterStackOpts[x._id+_._id][v].stackgaps;u.marker.maxdisplayed||u._needsCull?g=w?le:se:v&&!w&&(g=ce),f&&(p=g),d&&(m=g)}var A,k=(o=t.selectAll("path.point").data(p,h)).enter().append("path").classed("point",!0);y&&k.call(l.pointStyle,u,e).call(l.translatePoints,x,_).style("opacity",0).transition().style("opacity",1),o.order(),f&&(A=l.makePointStyleFns(u)),o.each((function(t){var i=r.select(this),a=b(i);l.translatePoint(t,a,x,_)?(l.singlePointStyle(t,a,u,A,e),n.layerClipId&&l.hideOutsideRangePoint(t,a,x,_,u.xcalendar,u.ycalendar),u.customdata&&i.classed("plotly-customdata",null!==t.data&&void 0!==t.data)):a.remove()})),y?o.exit().transition().style("opacity",0).remove():o.exit().remove(),(o=i.selectAll("g").data(m,h)).enter().append("g").classed("textpoint",!0).append("text"),o.order(),o.each((function(e){var t=r.select(this),i=b(t.select("text"));l.translatePoint(e,i,x,_)?n.layerClipId&&l.hideOutsideRangePoint(e,t,x,_,u.xcalendar,u.ycalendar):t.remove()})),o.selectAll("text").call(l.textPointStyle,u,e).each((function(e){var t=x.c2p(e.x),n=_.c2p(e.y);r.select(this).selectAll("tspan.line").each((function(){b(r.select(this)).attr({x:t,y:n})}))})),o.exit().remove()}(M,S,f);var ae=!1===w.cliponaxis?null:n.layerClipId;l.setClipUrl(M,ae,e),l.setClipUrl(S,ae,e)}function oe(e){b(e).attr("d","M0,0Z")}function se(e){return e.filter((function(e){return!e.gap&&e.vis}))}function le(e){return e.filter((function(e){return e.vis}))}function ce(e){return e.filter((function(e){return!e.gap}))}function ue(e){return e.id}function fe(e){if(e.ids)return ue}function de(){return!1}}e.exports=function(e,t,n,i,a,c){var u,d,p=!a,m=!!a&&a.duration>0,g=f(e,t,n);((u=i.selectAll("g.trace").data(g,(function(e){return e[0].trace.uid}))).enter().append("g").attr("class",(function(e){return"trace scatter trace"+e[0].trace.uid})).style("stroke-miterlimit",2),u.order(),function(e,t,n){t.each((function(t){var i=o(r.select(this),"g","fills");l.setClipUrl(i,n.layerClipId,e);var a=t[0].trace,c=[];a._ownfill&&c.push("_ownFill"),a._nexttrace&&c.push("_nextFill");var u=i.selectAll("g").data(c,s);u.enter().append("g"),u.exit().each((function(e){a[e]=null})).remove(),u.order().each((function(e){a[e]=o(r.select(this),"path","js-fill")}))}))}(e,u,t),m)?(c&&(d=c()),r.transition().duration(a.duration).ease(a.easing).each("end",(function(){d&&d()})).each("interrupt",(function(){d&&d()})).each((function(){i.selectAll("g.trace").each((function(n,r){h(e,r,t,n,g,this,a)}))}))):u.each((function(n,r){h(e,r,t,n,g,this,a)}));p&&u.exit().remove(),i.selectAll("path:not([d])").remove()}},28203:(e,t,n)=>{"use strict";var r=n(43612);e.exports=function(e,t){var n,i,a,o,s=e.cd,l=e.xaxis,c=e.yaxis,u=[],f=s[0].trace;if(!r.hasMarkers(f)&&!r.hasText(f))return[];if(!1===t)for(n=0;n<s.length;n++)s[n].selected=0;else for(n=0;n<s.length;n++)i=s[n],a=l.c2p(i.x),o=c.c2p(i.y),null!==i.i&&t.contains([a,o],!1,n,e)?(u.push({pointNumber:i.i,x:l.c2d(i.x),y:c.c2d(i.y)}),i.selected=1):i.selected=0;return u}},59112:e=>{"use strict";var t=["orientation","groupnorm","stackgaps"];e.exports=function(e,n,r,i){var a=r._scatterStackOpts,o=i("stackgroup");if(o){var s=n.xaxis+n.yaxis,l=a[s];l||(l=a[s]={});var c=l[o],u=!1;c?c.traces.push(n):(c=l[o]={traceIndices:[],traces:[n]},u=!0);for(var f={orientation:n.x&&!n.y?"h":"v"},d=0;d<t.length;d++){var h=t[d],p=h+"Found";if(!c[p]){var m=void 0!==e[h],g="orientation"===h;if((m||u)&&(c[h]=i(h,f[h]),g&&(c.fillDflt="h"===c[h]?"tonextx":"tonexty"),m&&(c[p]=!0,!u&&(delete c.traces[0][h],g))))for(var v=0;v<c.traces.length-1;v++){var y=c.traces[v];y._input.fill!==y.fill&&(y.fill=c.fillDflt)}}}return c}}},93114:(e,t,n)=>{"use strict";var r=n(93268),i=n(14797),a=n(3360);function o(e,t,n){i.pointStyle(e.selectAll("path.point"),t,n)}function s(e,t,n){i.textPointStyle(e.selectAll("text"),t,n)}e.exports={style:function(e){var t=r.select(e).selectAll("g.trace.scatter");t.style("opacity",(function(e){return e[0].trace.opacity})),t.selectAll("g.points").each((function(t){o(r.select(this),t.trace||t[0].trace,e)})),t.selectAll("g.text").each((function(t){s(r.select(this),t.trace||t[0].trace,e)})),t.selectAll("g.trace path.js-line").call(i.lineGroupStyle),t.selectAll("g.trace path.js-fill").call(i.fillGroupStyle,e,!1),a.getComponentMethod("errorbars","style")(t)},stylePoints:o,styleText:s,styleOnSelect:function(e,t,n){var r=t[0].trace;r.selectedpoints?(i.selectedPointStyle(n.selectAll("path.point"),r),i.selectedTextStyle(n.selectAll("text"),r)):(o(n,r,e),s(n,r,e))}}},43612:(e,t,n)=>{"use strict";var r=n(56319),i=n(41146).isTypedArraySpec;e.exports={hasLines:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("lines")},hasMarkers:function(e){return e.visible&&(e.mode&&-1!==e.mode.indexOf("markers")||"splom"===e.type)},hasText:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("text")},isBubble:function(e){var t=e.marker;return r.isPlainObject(t)&&(r.isArrayOrTypedArray(t.size)||i(t.size))}}},86041:(e,t,n)=>{"use strict";var r=n(56319);e.exports=function(e,t,n,i,a){a=a||{},i("textposition"),r.coerceFont(i,"textfont",a.font||n.font,a),a.noSelect||(i("selected.textfont.color"),i("unselected.textfont.color"))}},69165:(e,t,n)=>{"use strict";var r=n(56319),i=n(3360);e.exports=function(e,t,n,a){var o,s=a("x"),l=a("y");if(i.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],n),s){var c=r.minRowLength(s);l?o=Math.min(c,r.minRowLength(l)):(o=c,a("y0"),a("dy"))}else{if(!l)return 0;o=r.minRowLength(l),a("x0"),a("dx")}return t._length=o,o}},9959:(e,t,n)=>{"use strict";var r=n(19030),i=n(95323),a=n(50549),o=n(66010).axisHoverFormat,s=n(77014).rb,l=n(77014).ay,c=n(85507),u=n(77516),f=n(21985),d=n(86395).extendFlat,h=n(88500).overrideAll,p=n(35428),m=r.line,g=r.marker,v=g.line,y=d({width:m.width,dash:{valType:"enumerated",values:p(u),dflt:"solid",description:"Sets the dash style of the lines."}},a("line"));function b(e){return{show:{valType:"boolean",dflt:!1,description:["Sets whether or not projections are shown along the",e,"axis."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,description:"Sets the projection color."},scale:{valType:"number",min:0,max:10,dflt:2/3,description:["Sets the scale factor determining the size of the","projection marker points."].join(" ")}}}var x=e.exports=h({x:r.x,y:r.y,z:{valType:"data_array",description:"Sets the z coordinates."},text:d({},r.text,{description:["Sets text elements associated with each (x,y,z) triplet.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y,z) coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")}),texttemplate:l({},{}),hovertext:d({},r.hovertext,{description:["Sets text elements associated with each (x,y,z) triplet.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y,z) coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),hovertemplate:s(),xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z"),mode:d({},r.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1,description:["If *-1*, the scatter points are not fill with a surface","If *0*, *1*, *2*, the scatter points are filled with","a Delaunay surface about the x, y, z respectively."].join(" ")},surfacecolor:{valType:"color",description:"Sets the surface fill color."},projection:{x:b("x"),y:b("y"),z:b("z")},connectgaps:r.connectgaps,line:y,marker:d({symbol:{valType:"enumerated",values:p(f),dflt:"circle",arrayOk:!0,description:"Sets the marker symbol type."},size:d({},g.size,{dflt:8}),sizeref:g.sizeref,sizemin:g.sizemin,sizemode:g.sizemode,opacity:d({},g.opacity,{arrayOk:!1,description:["Sets the marker opacity.","Note that the marker opacity for scatter3d traces","must be a scalar value for performance reasons.","To set a blending opacity value","(i.e. which is not transparent), set *marker.color*","to an rgba color and use its alpha channel."].join(" ")}),colorbar:g.colorbar,line:d({width:d({},v.width,{arrayOk:!1})},a("marker.line"))},a("marker")),textposition:d({},r.textposition,{dflt:"top center"}),textfont:i({noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,editType:"calc",colorEditType:"style",arrayOk:!0,variantValues:["normal","small-caps"],description:"Sets the text font."}),opacity:c.opacity,hoverinfo:d({},c.hoverinfo)},"calc","nested");x.x.editType=x.y.editType=x.z.editType="calc+clearAxisTypes"},65607:(e,t,n)=>{"use strict";var r=n(54685),i=n(35514);e.exports=function(e,t){var n=[{x:!1,y:!1,trace:t,t:{}}];return r(n,t),i(e,t),n}},26945:(e,t,n)=>{"use strict";var r=n(3360);function i(e,t,n,i){if(!t||!t.visible)return null;for(var a=r.getComponentMethod("errorbars","makeComputeError")(t),o=new Array(e.length),s=0;s<e.length;s++){var l=a(+e[s],s);if("log"===i.type){var c=i.c2l(e[s]),u=e[s]-l[0],f=e[s]+l[1];if(o[s]=[(i.c2l(u,!0)-c)*n,(i.c2l(f,!0)-c)*n],u>0){var d=i.c2l(u);i._lowerLogErrorBound||(i._lowerLogErrorBound=d),i._lowerErrorBound=Math.min(i._lowerLogErrorBound,d)}}else o[s]=[-l[0]*n,l[1]*n]}return o}e.exports=function(e,t,n){var r=[i(e.x,e.error_x,t[0],n.xaxis),i(e.y,e.error_y,t[1],n.yaxis),i(e.z,e.error_z,t[2],n.zaxis)],a=function(e){for(var t=0;t<e.length;t++)if(e[t])return e[t].length;return 0}(r);if(0===a)return null;for(var o=new Array(a),s=0;s<a;s++){for(var l=[[0,0,0],[0,0,0]],c=0;c<3;c++)if(r[c])for(var u=0;u<2;u++)l[u][c]=r[c][s][u];o[s]=l}return o}},20019:(e,t,n)=>{"use strict";var r=n(2528).gl_line3d,i=n(2528).gl_scatter3d,a=n(2528).gl_error3d,o=n(2528).gl_mesh3d,s=n(2528).delaunay_triangulate,l=n(56319),c=n(47312),u=n(21696).formatColor,f=n(70789),d=n(77516),h=n(21985),p=n(596),m=n(44790).appendArrayPointValue,g=n(26945);function v(e,t){this.scene=e,this.uid=t,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var y=v.prototype;function b(e){return null==e?0:e.indexOf("left")>-1?-1:e.indexOf("right")>-1?1:0}function x(e){return null==e?0:e.indexOf("top")>-1?-1:e.indexOf("bottom")>-1?1:0}function _(e,t){return t(4*e)}function w(e){return h[e]}function A(e,t,n,r,i){var a=null;if(l.isArrayOrTypedArray(e)){a=[];for(var o=0;o<t;o++)void 0===e[o]?a[o]=r:a[o]=n(e[o],i)}else a=n(e,l.identity);return a}function k(e,t){var n,r,i,a,o,s,d=[],h=e.fullSceneLayout,v=e.dataScale,y=h.xaxis,k=h.yaxis,E=h.zaxis,T=t.marker,M=t.line,S=t.x||[],C=t.y||[],O=t.z||[],R=S.length,N=t.xcalendar,L=t.ycalendar,D=t.zcalendar;for(o=0;o<R;o++)n=y.d2l(S[o],0,N)*v[0],r=k.d2l(C[o],0,L)*v[1],i=E.d2l(O[o],0,D)*v[2],d[o]=[n,r,i];if(Array.isArray(t.text))s=t.text;else if(l.isTypedArray(t.text))s=Array.from(t.text);else if(void 0!==t.text)for(s=new Array(R),o=0;o<R;o++)s[o]=t.text;function P(e,t){var n=h[e];return p.tickText(n,n.d2l(t),!0).text}var I=t.texttemplate;if(I){var F=e.fullLayout._d3locale,z=Array.isArray(I),j=z?Math.min(I.length,R):R,B=z?function(e){return I[e]}:function(){return I};for(s=new Array(j),o=0;o<j;o++){var U={x:S[o],y:C[o],z:O[o]},$={xLabel:P("xaxis",S[o]),yLabel:P("yaxis",C[o]),zLabel:P("zaxis",O[o])},q={};m(q,t,o);var H=t._meta||{};s[o]=l.texttemplateString(B(o),$,F,q,U,H)}}if(a={position:d,mode:t.mode,text:s},"line"in t&&(a.lineColor=u(M,1,R),a.lineWidth=M.width,a.lineDashes=M.dash),"marker"in t){var V=f(t);a.scatterColor=u(T,1,R),a.scatterSize=A(T.size,R,_,20,V),a.scatterMarker=A(T.symbol,R,w,""),a.scatterLineWidth=T.line.width,a.scatterLineColor=u(T.line,1,R),a.scatterAngle=0}"textposition"in t&&(a.textOffset=function(e){var t=[0,0];if(Array.isArray(e))for(var n=0;n<e.length;n++)t[n]=[0,0],e[n]&&(t[n][0]=b(e[n]),t[n][1]=x(e[n]));else t[0]=b(e),t[1]=x(e);return t}(t.textposition),a.textColor=u(t.textfont,1,R),a.textSize=A(t.textfont.size,R,l.identity,12),a.textFontFamily=t.textfont.family,a.textFontWeight=t.textfont.weight,a.textFontStyle=t.textfont.style,a.textFontVariant=t.textfont.variant,a.textAngle=0);var W=["x","y","z"];for(a.project=[!1,!1,!1],a.projectScale=[1,1,1],a.projectOpacity=[1,1,1],o=0;o<3;++o){var G=t.projection[W[o]];(a.project[o]=G.show)&&(a.projectOpacity[o]=G.opacity,a.projectScale[o]=G.scale)}a.errorBounds=g(t,v,h);var Y=function(e){for(var t=[0,0,0],n=[[0,0,0],[0,0,0],[0,0,0]],r=[1,1,1],i=0;i<3;i++){var a=e[i];a&&!1!==a.copy_zstyle&&!1!==e[2].visible&&(a=e[2]),a&&a.visible&&(t[i]=a.width/2,n[i]=c(a.color),r[i]=a.thickness)}return{capSize:t,color:n,lineWidth:r}}([t.error_x,t.error_y,t.error_z]);return a.errorColor=Y.color,a.errorLineWidth=Y.lineWidth,a.errorCapSize=Y.capSize,a.delaunayAxis=t.surfaceaxis,a.delaunayColor=c(t.surfacecolor),a}function E(e){if(l.isArrayOrTypedArray(e)){var t=e[0];return l.isArrayOrTypedArray(t)&&(e=t),"rgb("+e.slice(0,3).map((function(e){return Math.round(255*e)}))+")"}return null}function T(e){return l.isArrayOrTypedArray(e)?4===e.length&&"number"==typeof e[0]?E(e):e.map(E):null}y.handlePick=function(e){if(e.object&&(e.object===this.linePlot||e.object===this.delaunayMesh||e.object===this.textMarkers||e.object===this.scatterPlot)){var t=e.index=e.data.index;return e.object.highlight&&e.object.highlight(null),this.scatterPlot&&(e.object=this.scatterPlot,this.scatterPlot.highlight(e.data)),e.textLabel="",this.textLabels&&(l.isArrayOrTypedArray(this.textLabels)?(this.textLabels[t]||0===this.textLabels[t])&&(e.textLabel=this.textLabels[t]):e.textLabel=this.textLabels),e.traceCoordinate=[this.data.x[t],this.data.y[t],this.data.z[t]],!0}},y.update=function(e){var t,n,l,c,u=this.scene.glplot.gl,f=d.solid;this.data=e;var h=k(this.scene,e);"mode"in h&&(this.mode=h.mode),"lineDashes"in h&&h.lineDashes in d&&(f=d[h.lineDashes]),this.color=T(h.scatterColor)||T(h.lineColor),this.dataPoints=h.position,t={gl:this.scene.glplot.gl,position:h.position,color:h.lineColor,lineWidth:h.lineWidth||1,dashes:f[0],dashScale:f[1],opacity:e.opacity,connectGaps:e.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(t):(this.linePlot=r(t),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var p=e.opacity;if(e.marker&&void 0!==e.marker.opacity&&(p*=e.marker.opacity),n={gl:this.scene.glplot.gl,position:h.position,color:h.scatterColor,size:h.scatterSize,glyph:h.scatterMarker,opacity:p,orthographic:!0,lineWidth:h.scatterLineWidth,lineColor:h.scatterLineColor,project:h.project,projectScale:h.projectScale,projectOpacity:h.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(n):(this.scatterPlot=i(n),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),c={gl:this.scene.glplot.gl,position:h.position,glyph:h.text,color:h.textColor,size:h.textSize,angle:h.textAngle,alignment:h.textOffset,font:h.textFontFamily,fontWeight:h.textFontWeight,fontStyle:h.textFontStyle,fontVariant:h.textFontVariant,orthographic:!0,lineWidth:0,project:!1,opacity:e.opacity},this.textLabels=e.hovertext||e.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(c):(this.textMarkers=i(c),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),l={gl:this.scene.glplot.gl,position:h.position,color:h.errorColor,error:h.errorBounds,lineWidth:h.errorLineWidth,capSize:h.errorCapSize,opacity:e.opacity},this.errorBars?h.errorBounds?this.errorBars.update(l):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):h.errorBounds&&(this.errorBars=a(l),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),h.delaunayAxis>=0){var m=function(e,t,n){var r,i=(n+1)%3,a=(n+2)%3,o=[],l=[];for(r=0;r<e.length;++r){var c=e[r];!isNaN(c[i])&&isFinite(c[i])&&!isNaN(c[a])&&isFinite(c[a])&&(o.push([c[i],c[a]]),l.push(r))}var u=s(o);for(r=0;r<u.length;++r)for(var f=u[r],d=0;d<f.length;++d)f[d]=l[f[d]];return{positions:e,cells:u,meshColor:t}}(h.position,h.delaunayColor,h.delaunayAxis);m.opacity=e.opacity,this.delaunayMesh?this.delaunayMesh.update(m):(m.gl=u,this.delaunayMesh=o(m),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},y.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},e.exports=function(e,t){var n=new v(e,t.uid);return n.update(t),n}},45408:(e,t,n)=>{"use strict";var r=n(3360),i=n(56319),a=n(43612),o=n(47694),s=n(65726),l=n(86041),c=n(9959);e.exports=function(e,t,n,u){function f(n,r){return i.coerce(e,t,c,n,r)}var d=function(e,t,n,i){var a=0,o=n("x"),s=n("y"),l=n("z");r.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y","z"],i),o&&s&&l&&(a=Math.min(o.length,s.length,l.length),t._length=t._xlength=t._ylength=t._zlength=a);return a}(e,t,f,u);if(d){f("text"),f("hovertext"),f("hovertemplate"),f("xhoverformat"),f("yhoverformat"),f("zhoverformat"),f("mode"),a.hasMarkers(t)&&o(e,t,n,u,f,{noSelect:!0,noAngle:!0}),a.hasLines(t)&&(f("connectgaps"),s(e,t,n,u,f)),a.hasText(t)&&(f("texttemplate"),l(e,t,u,f,{noSelect:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}));var h=(t.line||{}).color,p=(t.marker||{}).color;f("surfaceaxis")>=0&&f("surfacecolor",h||p);for(var m=["x","y","z"],g=0;g<3;++g){var v="projection."+m[g];f(v+".show")&&(f(v+".opacity"),f(v+".scale"))}var y=r.getComponentMethod("errorbars","supplyDefaults");y(e,t,h||p||n,{axis:"z"}),y(e,t,h||p||n,{axis:"y",inherit:"z"}),y(e,t,h||p||n,{axis:"x",inherit:"z"})}else t.visible=!1}},86316:(e,t,n)=>{"use strict";e.exports={plot:n(20019),attributes:n(9959),markerSymbols:n(21985),supplyDefaults:n(45408),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:n(65607),moduleType:"trace",name:"scatter3d",basePlotModule:n(29945),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{hrName:"scatter_3d",description:["The data visualized as scatter point or lines in 3D dimension","is set in `x`, `y`, `z`.","Text (appearing either on the chart or on hover only) is via `text`.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","Projections are achieved via `projection`.","Surface fills are achieved via `surfaceaxis`."].join(" ")}}},12227:(e,t,n)=>{"use strict";var r=n(85507),i=n(95323),a=n(23876),o=n(19030),s=n(66010).axisHoverFormat,l=n(50549),c=n(35428),u=n(86395).extendFlat,f=n(88500).overrideAll,d=n(95845).DASHES,h=o.line,p=o.marker,m=p.line,g=e.exports=f({x:o.x,x0:o.x0,dx:o.dx,y:o.y,y0:o.y0,dy:o.dy,xperiod:o.xperiod,yperiod:o.yperiod,xperiod0:o.xperiod0,yperiod0:o.yperiod0,xperiodalignment:o.xperiodalignment,yperiodalignment:o.yperiodalignment,xhoverformat:s("x"),yhoverformat:s("y"),text:o.text,hovertext:o.hovertext,textposition:o.textposition,textfont:i({noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,editType:"calc",colorEditType:"style",arrayOk:!0,noNumericWeightValues:!0,variantValues:["normal","small-caps"],description:"Sets the text font."}),mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],description:["Determines the drawing mode for this scatter trace."].join(" ")},line:{color:h.color,width:h.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot",description:["Determines the line shape.","The values correspond to step-wise line shapes."].join(" ")},dash:{valType:"enumerated",values:c(d),dflt:"solid",description:"Sets the style of the lines."}},marker:u({},l("marker"),{symbol:p.symbol,angle:p.angle,size:p.size,sizeref:p.sizeref,sizemin:p.sizemin,sizemode:p.sizemode,opacity:p.opacity,colorbar:p.colorbar,line:u({},l("marker.line"),{width:m.width})}),connectgaps:o.connectgaps,fill:u({},o.fill,{dflt:"none"}),fillcolor:a(),selected:{marker:o.selected.marker,textfont:o.selected.textfont},unselected:{marker:o.unselected.marker,textfont:o.unselected.textfont},opacity:r.opacity},"calc","nested");g.x.editType=g.y.editType=g.x0.editType=g.y0.editType="calc+clearAxisTypes",g.hovertemplate=o.hovertemplate,g.texttemplate=o.texttemplate},35096:(e,t,n)=>{"use strict";var r=n(91022);e.exports={moduleType:"trace",name:"scattergl",basePlotModule:n(64125),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:n(12227),supplyDefaults:n(40996),crossTraceDefaults:n(31930),colorbar:n(83304),formatLabels:n(34499),calc:n(72387),hoverPoints:r.hoverPoints,selectPoints:n(2158),meta:{hrName:"scatter_gl",description:["The data visualized as scatter point or lines is set in `x` and `y`","using the WebGL plotting engine.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","to a numerical arrays."].join(" ")}}},72387:(e,t,n)=>{"use strict";var r=n(96377),i=n(56319),a=n(33489),o=n(39065).findExtremes,s=n(29850),l=n(90226),c=l.calcMarkerSize,u=l.calcAxisExpansion,f=l.setFirstScatter,d=n(35514),h=n(42103),p=n(21894),m=n(33351).BADNUM,g=n(95845).TOO_MANY_POINTS;function v(e,t,n){var r=e._extremes[t._id],i=o(t,n._bnds,{padded:!0});r.min=r.min.concat(i.min),r.max=r.max.concat(i.max)}e.exports=function(e,t){var n,o=e._fullLayout,l=t._xA=a.getFromId(e,t.xaxis,"x"),y=t._yA=a.getFromId(e,t.yaxis,"y"),b=o._plots[t.xaxis+t.yaxis],x=t._length,_=x>=g,w=2*x,A={},k=l.makeCalcdata(t,"x"),E=y.makeCalcdata(t,"y"),T=s(t,l,"x",k),M=s(t,y,"y",E),S=T.vals,C=M.vals;t._x=S,t._y=C,t.xperiodalignment&&(t._origX=k,t._xStarts=T.starts,t._xEnds=T.ends),t.yperiodalignment&&(t._origY=E,t._yStarts=M.starts,t._yEnds=M.ends);var O=new Array(w),R=new Array(x);for(n=0;n<x;n++)O[2*n]=S[n]===m?NaN:S[n],O[2*n+1]=C[n]===m?NaN:C[n],R[n]=n;if("log"===l.type)for(n=0;n<w;n+=2)O[n]=l.c2l(O[n]);if("log"===y.type)for(n=1;n<w;n+=2)O[n]=y.c2l(O[n]);_&&"log"!==l.type&&"log"!==y.type?A.tree=r(O):A.ids=R,d(e,t);var N,L=function(e,t,n,r,a,o){var s=h.style(e,n);s.marker&&(s.marker.positions=r);s.line&&r.length>1&&i.extendFlat(s.line,h.linePositions(e,n,r));if(s.errorX||s.errorY){var l=h.errorBarPositions(e,n,r,a,o);s.errorX&&i.extendFlat(s.errorX,l.x),s.errorY&&i.extendFlat(s.errorY,l.y)}s.text&&(i.extendFlat(s.text,{positions:r},h.textPosition(e,n,s.text,s.marker)),i.extendFlat(s.textSel,{positions:r},h.textPosition(e,n,s.text,s.markerSel)),i.extendFlat(s.textUnsel,{positions:r},h.textPosition(e,n,s.text,s.markerUnsel)));return s}(e,0,t,O,S,C),D=p(e,b);return f(o,t),_?L.marker&&(N=L.marker.sizeAvg||Math.max(L.marker.size,3)):N=c(t,x),u(e,t,l,y,S,C,N),L.errorX&&v(t,l,L.errorX),L.errorY&&v(t,y,L.errorY),L.fill&&!D.fill2d&&(D.fill2d=!0),L.marker&&!D.scatter2d&&(D.scatter2d=!0),L.line&&!D.line2d&&(D.line2d=!0),!L.errorX&&!L.errorY||D.error2d||(D.error2d=!0),L.text&&!D.glText&&(D.glText=!0),L.marker&&(L.marker.snap=x),D.lineOptions.push(L.line),D.errorXOptions.push(L.errorX),D.errorYOptions.push(L.errorY),D.fillOptions.push(L.fill),D.markerOptions.push(L.marker),D.markerSelectedOptions.push(L.markerSel),D.markerUnselectedOptions.push(L.markerUnsel),D.textOptions.push(L.text),D.textSelectedOptions.push(L.textSel),D.textUnselectedOptions.push(L.textUnsel),D.selectBatch.push([]),D.unselectBatch.push([]),A._scene=D,A.index=D.count,A.x=S,A.y=C,A.positions=O,D.count++,[{x:!1,y:!1,t:A,trace:t}]}},95845:e=>{"use strict";e.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},42103:(e,t,n)=>{"use strict";var r=n(5605),i=n(66313),a=n(76302),o=n(3360),s=n(56319),l=s.isArrayOrTypedArray,c=n(14797),u=n(33489),f=n(21696).formatColor,d=n(43612),h=n(70789),p=n(79437),m=n(95845),g=n(93352).DESELECTDIM,v={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},y=n(44790).appendArrayPointValue;function b(e,t){var n,i=e._fullLayout,a=t._length,o=t.textfont,c=t.textposition,u=l(c)?c:[c],f=o.color,d=o.size,h=o.family,p=o.weight,m=o.style,g=o.variant,v={},b=e._context.plotGlPixelRatio,_=t.texttemplate;if(_){v.text=[];var w=i._d3locale,A=Array.isArray(_),k=A?Math.min(_.length,a):a,E=A?function(e){return _[e]}:function(){return _};for(n=0;n<k;n++){var T={i:n},M=t._module.formatLabels(T,t,i),S={};y(S,t,n);var C=t._meta||{};v.text.push(s.texttemplateString(E(n),M,w,S,T,C))}}else l(t.text)&&t.text.length<a?v.text=t.text.slice():v.text=t.text;if(l(v.text))for(n=v.text.length;n<a;n++)v.text[n]="";for(v.opacity=t.opacity,v.font={},v.align=[],v.baseline=[],n=0;n<u.length;n++){var O=u[n].split(/\s+/);switch(O[1]){case"left":v.align.push("right");break;case"right":v.align.push("left");break;default:v.align.push(O[1])}switch(O[0]){case"top":v.baseline.push("bottom");break;case"bottom":v.baseline.push("top");break;default:v.baseline.push(O[0])}}if(l(f))for(v.color=new Array(a),n=0;n<a;n++)v.color[n]=f[n];else v.color=f;if(l(d)||Array.isArray(h)||l(p)||Array.isArray(m)||Array.isArray(g))for(v.font=new Array(a),n=0;n<a;n++){var R=v.font[n]={};R.size=(s.isTypedArray(d)?d[n]:l(d)?r(d[n])?d[n]:0:d)*b,R.family=Array.isArray(h)?h[n]:h,R.weight=x(l(p)?p[n]:p),R.style=Array.isArray(m)?m[n]:m,R.variant=Array.isArray(g)?g[n]:g}else v.font={size:d*b,family:h,weight:x(p),style:m,variant:g};return v}function x(e){return e<=1e3?e>500?"bold":"normal":e}function _(e,t){var n,r,i=t._length,o=t.marker,s={},c=l(o.symbol),u=l(o.angle),d=l(o.color),m=l(o.line.color),g=l(o.opacity),v=l(o.size),y=l(o.line.width);if(c||(r=p.isOpenSymbol(o.symbol)),c||d||m||g||u){s.symbols=new Array(i),s.angles=new Array(i),s.colors=new Array(i),s.borderColors=new Array(i);var b=o.symbol,x=o.angle,_=f(o,o.opacity,i),w=f(o.line,o.opacity,i);if(!l(w[0])){var A=w;for(w=Array(i),n=0;n<i;n++)w[n]=A}if(!l(_[0])){var k=_;for(_=Array(i),n=0;n<i;n++)_[n]=k}if(!l(b)){var E=b;for(b=Array(i),n=0;n<i;n++)b[n]=E}if(!l(x)){var T=x;for(x=Array(i),n=0;n<i;n++)x[n]=T}for(s.symbols=b,s.angles=x,s.colors=_,s.borderColors=w,n=0;n<i;n++)c&&(r=p.isOpenSymbol(o.symbol[n])),r&&(w[n]=_[n].slice(),_[n]=_[n].slice(),_[n][3]=0);for(s.opacity=t.opacity,s.markers=new Array(i),n=0;n<i;n++)s.markers[n]=O({mx:s.symbols[n],ma:s.angles[n]},t)}else r?(s.color=a(o.color,"uint8"),s.color[3]=0,s.borderColor=a(o.color,"uint8")):(s.color=a(o.color,"uint8"),s.borderColor=a(o.line.color,"uint8")),s.opacity=t.opacity*o.opacity,s.marker=O({mx:o.symbol,ma:o.angle},t);var M,S=h(t,1);if(v||y){var C,R=s.sizes=new Array(i),N=s.borderSizes=new Array(i),L=0;if(v){for(n=0;n<i;n++)R[n]=S(o.size[n]),L+=R[n];C=L/i}else for(M=S(o.size),n=0;n<i;n++)R[n]=M;if(y)for(n=0;n<i;n++)N[n]=o.line.width[n];else for(M=o.line.width,n=0;n<i;n++)N[n]=M;s.sizeAvg=C}else s.size=S(o&&o.size||10),s.borderSizes=S(o.line.width);return s}function w(e,t,n){var r=t.marker,i={};return n?(n.marker&&n.marker.symbol?i=_(0,s.extendFlat({},r,n.marker)):n.marker&&(n.marker.size&&(i.size=n.marker.size),n.marker.color&&(i.colors=n.marker.color),void 0!==n.marker.opacity&&(i.opacity=n.marker.opacity)),i):i}function A(e,t,n){var r={};if(!n)return r;if(n.textfont){var i={opacity:1,text:t.text,texttemplate:t.texttemplate,textposition:t.textposition,textfont:s.extendFlat({},t.textfont)};n.textfont&&s.extendFlat(i.textfont,n.textfont),r=b(e,i)}return r}function k(e,t,n){var r={capSize:2*t.width*n,lineWidth:t.thickness*n,color:t.color};return t.copy_ystyle&&(r=e.error_y),r}var E=m.SYMBOL_SDF_SIZE,T=m.SYMBOL_SIZE,M=m.SYMBOL_STROKE,S={},C=c.symbolFuncs[0](.05*T);function O(e,t){var n,r,a=e.mx;if("circle"===a)return null;var o=c.symbolNumber(a),s=c.symbolFuncs[o%100],l=!!c.symbolNoDot[o%100],u=!!c.symbolNoFill[o%100],f=p.isDotSymbol(a);if(e.ma&&(a+="_"+e.ma),S[a])return S[a];var d=c.getMarkerAngle(e,t);return n=f&&!l?s(1.1*T,d)+C:s(T,d),r=i(n,{w:E,h:E,viewBox:[-T,-T,T,T],stroke:u?M:-M}),S[a]=r,r||null}e.exports={style:function(e,t){var n,r={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},i=e._context.plotGlPixelRatio;if(!0!==t.visible)return r;if(d.hasText(t)&&(r.text=b(e,t),r.textSel=A(e,t,t.selected),r.textUnsel=A(e,t,t.unselected)),d.hasMarkers(t)&&(r.marker=_(e,t),r.markerSel=w(e,t,t.selected),r.markerUnsel=w(e,t,t.unselected),!t.unselected&&l(t.marker.opacity))){var a=t.marker.opacity;for(r.markerUnsel.opacity=new Array(a.length),n=0;n<a.length;n++)r.markerUnsel.opacity[n]=g*a[n]}if(d.hasLines(t)){r.line={overlay:!0,thickness:t.line.width*i,color:t.line.color,opacity:t.opacity};var o=(m.DASHES[t.line.dash]||[1]).slice();for(n=0;n<o.length;++n)o[n]*=t.line.width*i;r.line.dashes=o}return t.error_x&&t.error_x.visible&&(r.errorX=k(t,t.error_x,i)),t.error_y&&t.error_y.visible&&(r.errorY=k(t,t.error_y,i)),t.fill&&"none"!==t.fill&&(r.fill={closed:!0,fill:t.fillcolor,thickness:0}),r},markerStyle:_,markerSelection:w,linePositions:function(e,t,n){var r,i,a=n.length,o=a/2;if(d.hasLines(t)&&o)if("hv"===t.line.shape){for(r=[],i=0;i<o-1;i++)isNaN(n[2*i])||isNaN(n[2*i+1])?r.push(NaN,NaN,NaN,NaN):(r.push(n[2*i],n[2*i+1]),isNaN(n[2*i+2])||isNaN(n[2*i+3])?r.push(NaN,NaN):r.push(n[2*i+2],n[2*i+1]));r.push(n[a-2],n[a-1])}else if("hvh"===t.line.shape){for(r=[],i=0;i<o-1;i++)if(isNaN(n[2*i])||isNaN(n[2*i+1])||isNaN(n[2*i+2])||isNaN(n[2*i+3]))isNaN(n[2*i])||isNaN(n[2*i+1])?r.push(NaN,NaN):r.push(n[2*i],n[2*i+1]),r.push(NaN,NaN);else{var s=(n[2*i]+n[2*i+2])/2;r.push(n[2*i],n[2*i+1],s,n[2*i+1],s,n[2*i+3])}r.push(n[a-2],n[a-1])}else if("vhv"===t.line.shape){for(r=[],i=0;i<o-1;i++)if(isNaN(n[2*i])||isNaN(n[2*i+1])||isNaN(n[2*i+2])||isNaN(n[2*i+3]))isNaN(n[2*i])||isNaN(n[2*i+1])?r.push(NaN,NaN):r.push(n[2*i],n[2*i+1]),r.push(NaN,NaN);else{var l=(n[2*i+1]+n[2*i+3])/2;r.push(n[2*i],n[2*i+1],n[2*i],l,n[2*i+2],l)}r.push(n[a-2],n[a-1])}else if("vh"===t.line.shape){for(r=[],i=0;i<o-1;i++)isNaN(n[2*i])||isNaN(n[2*i+1])?r.push(NaN,NaN,NaN,NaN):(r.push(n[2*i],n[2*i+1]),isNaN(n[2*i+2])||isNaN(n[2*i+3])?r.push(NaN,NaN):r.push(n[2*i],n[2*i+3]));r.push(n[a-2],n[a-1])}else r=n;var c=!1;for(i=0;i<r.length;i++)if(isNaN(r[i])){c=!0;break}var u=c||r.length>m.TOO_MANY_POINTS||d.hasMarkers(t)?"rect":"round";if(c&&t.connectgaps){var f=r[0],h=r[1];for(i=0;i<r.length;i+=2)isNaN(r[i])||isNaN(r[i+1])?(r[i]=f,r[i+1]=h):(f=r[i],h=r[i+1])}return{join:u,positions:r}},errorBarPositions:function(e,t,n,i,a){var s=o.getComponentMethod("errorbars","makeComputeError"),l=u.getFromId(e,t.xaxis,"x"),c=u.getFromId(e,t.yaxis,"y"),f=n.length/2,d={};function h(e,i){var a=i._id.charAt(0),o=t["error_"+a];if(o&&o.visible&&("linear"===i.type||"log"===i.type)){for(var l=s(o),c={x:0,y:1}[a],u={x:[0,1,2,3],y:[2,3,0,1]}[a],h=new Float64Array(4*f),p=1/0,m=-1/0,g=0,v=0;g<f;g++,v+=4){var y=e[g];if(r(y)){var b=n[2*g+c],x=l(y,g),_=x[0],w=x[1];if(r(_)&&r(w)){var A=y-_,k=y+w;h[v+u[0]]=b-i.c2l(A),h[v+u[1]]=i.c2l(k)-b,h[v+u[2]]=0,h[v+u[3]]=0,p=Math.min(p,y-_),m=Math.max(m,y+w)}}}d[a]={positions:n,errors:h,_bnds:[p,m]}}}return h(i,l),h(a,c),d},textPosition:function(e,t,n,r){var i,a=t._length,o={};if(d.hasMarkers(t)){var s=n.font,c=n.align,u=n.baseline;for(o.offset=new Array(a),i=0;i<a;i++){var f=r.sizes?r.sizes[i]:r.size,h=l(s)?s[i].size:s.size,p=l(c)?c.length>1?c[i]:c[0]:c,m=l(u)?u.length>1?u[i]:u[0]:u,g=v[p],y=v[m],b=f?f/.8+1:0,x=-y*b-.5*y;o.offset[i]=[g*b/h,x/h]}}return o}}},40996:(e,t,n)=>{"use strict";var r=n(56319),i=n(3360),a=n(79437),o=n(12227),s=n(80938),l=n(43612),c=n(69165),u=n(119),f=n(47694),d=n(65726),h=n(76332),p=n(86041);e.exports=function(e,t,n,m){function g(n,i){return r.coerce(e,t,o,n,i)}var v=!!e.marker&&a.isOpenSymbol(e.marker.symbol),y=l.isBubble(e),b=c(e,t,m,g);if(b){u(e,t,m,g),g("xhoverformat"),g("yhoverformat");var x=b<s.PTS_LINESONLY?"lines+markers":"lines";g("text"),g("hovertext"),g("hovertemplate"),g("mode",x),l.hasMarkers(t)&&(f(e,t,n,m,g,{noAngleRef:!0,noStandOff:!0}),g("marker.line.width",v||y?1:0)),l.hasLines(t)&&(g("connectgaps"),d(e,t,n,m,g),g("line.shape")),l.hasText(t)&&(g("texttemplate"),p(e,t,m,g,{noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}));var _=(t.line||{}).color,w=(t.marker||{}).color;g("fill"),"none"!==t.fill&&h(e,t,n,g);var A=i.getComponentMethod("errorbars","supplyDefaults");A(e,t,_||w||n,{axis:"y"}),A(e,t,_||w||n,{axis:"x",inherit:"y"}),r.coerceSelectionMarkerOpacity(t,g)}else t.visible=!1}},16324:(e,t,n)=>{"use strict";var r=n(56319),i=n(53408),a=n(93352).DESELECTDIM;e.exports={styleTextSelection:function(e){var t,n,o=e[0],s=o.trace,l=o.t,c=l._scene,u=l.index,f=c.selectBatch[u],d=c.unselectBatch[u],h=c.textOptions[u],p=c.textSelectedOptions[u]||{},m=c.textUnselectedOptions[u]||{},g=r.extendFlat({},h);if(f.length||d.length){var v=p.color,y=m.color,b=h.color,x=r.isArrayOrTypedArray(b);for(g.color=new Array(s._length),t=0;t<f.length;t++)n=f[t],g.color[n]=v||(x?b[n]:b);for(t=0;t<d.length;t++){n=d[t];var _=x?b[n]:b;g.color[n]=y||(v?_:i.addOpacity(_,a))}}c.glText[u].update(g)}}},34499:(e,t,n)=>{"use strict";var r=n(75852);e.exports=function(e,t,n){var i=e.i;return"x"in e||(e.x=t._x[i]),"y"in e||(e.y=t._y[i]),r(e,t,n)}},79437:(e,t,n)=>{"use strict";var r=n(95845);t.isOpenSymbol=function(e){return"string"==typeof e?r.OPEN_RE.test(e):e%200>100},t.isDotSymbol=function(e){return"string"==typeof e?r.DOT_RE.test(e):e>200}},91022:(e,t,n)=>{"use strict";var r=n(3360),i=n(56319),a=n(13245);function o(e,t,n,o){var s=e.xa,l=e.ya,c=e.distance,u=e.dxy,f=e.index,d={pointNumber:f,x:t[f],y:n[f]};d.tx=i.isArrayOrTypedArray(o.text)?o.text[f]:o.text,d.htx=Array.isArray(o.hovertext)?o.hovertext[f]:o.hovertext,d.data=Array.isArray(o.customdata)?o.customdata[f]:o.customdata,d.tp=Array.isArray(o.textposition)?o.textposition[f]:o.textposition;var h=o.textfont;h&&(d.ts=i.isArrayOrTypedArray(h.size)?h.size[f]:h.size,d.tc=i.isArrayOrTypedArray(h.color)?h.color[f]:h.color,d.tf=Array.isArray(h.family)?h.family[f]:h.family,d.tw=Array.isArray(h.weight)?h.weight[f]:h.weight,d.ty=Array.isArray(h.style)?h.style[f]:h.style,d.tv=Array.isArray(h.variant)?h.variant[f]:h.variant);var p=o.marker;p&&(d.ms=i.isArrayOrTypedArray(p.size)?p.size[f]:p.size,d.mo=i.isArrayOrTypedArray(p.opacity)?p.opacity[f]:p.opacity,d.mx=i.isArrayOrTypedArray(p.symbol)?p.symbol[f]:p.symbol,d.ma=i.isArrayOrTypedArray(p.angle)?p.angle[f]:p.angle,d.mc=i.isArrayOrTypedArray(p.color)?p.color[f]:p.color);var m=p&&p.line;m&&(d.mlc=Array.isArray(m.color)?m.color[f]:m.color,d.mlw=i.isArrayOrTypedArray(m.width)?m.width[f]:m.width);var g=p&&p.gradient;g&&"none"!==g.type&&(d.mgt=Array.isArray(g.type)?g.type[f]:g.type,d.mgc=Array.isArray(g.color)?g.color[f]:g.color);var v=s.c2p(d.x,!0),y=l.c2p(d.y,!0),b=d.mrc||1,x=o.hoverlabel;x&&(d.hbg=Array.isArray(x.bgcolor)?x.bgcolor[f]:x.bgcolor,d.hbc=Array.isArray(x.bordercolor)?x.bordercolor[f]:x.bordercolor,d.hts=i.isArrayOrTypedArray(x.font.size)?x.font.size[f]:x.font.size,d.htc=Array.isArray(x.font.color)?x.font.color[f]:x.font.color,d.htf=Array.isArray(x.font.family)?x.font.family[f]:x.font.family,d.hnl=i.isArrayOrTypedArray(x.namelength)?x.namelength[f]:x.namelength);var _=o.hoverinfo;_&&(d.hi=Array.isArray(_)?_[f]:_);var w=o.hovertemplate;w&&(d.ht=Array.isArray(w)?w[f]:w);var A={};A[e.index]=d;var k=o._origX,E=o._origY,T=i.extendFlat({},e,{color:a(o,d),x0:v-b,x1:v+b,xLabelVal:k?k[f]:d.x,y0:y-b,y1:y+b,yLabelVal:E?E[f]:d.y,cd:A,distance:c,spikeDistance:u,hovertemplate:d.ht});return d.htx?T.text=d.htx:d.tx?T.text=d.tx:o.text&&(T.text=o.text),i.fillText(d,o,T),r.getComponentMethod("errorbars","hoverInfo")(d,o,T),T}e.exports={hoverPoints:function(e,t,n,r){var i,a,s,l,c,u,f,d,h,p,m=e.cd,g=m[0].t,v=m[0].trace,y=e.xa,b=e.ya,x=g.x,_=g.y,w=y.c2p(t),A=b.c2p(n),k=e.distance;if(g.tree){var E=y.p2c(w-k),T=y.p2c(w+k),M=b.p2c(A-k),S=b.p2c(A+k);i="x"===r?g.tree.range(Math.min(E,T),Math.min(b._rl[0],b._rl[1]),Math.max(E,T),Math.max(b._rl[0],b._rl[1])):g.tree.range(Math.min(E,T),Math.min(M,S),Math.max(E,T),Math.max(M,S))}else i=g.ids;var C=k;if("x"===r){var O=!!v.xperiodalignment,R=!!v.yperiodalignment;for(u=0;u<i.length;u++){if(l=x[a=i[u]],f=Math.abs(y.c2p(l)-w),O){var N=y.c2p(v._xStarts[a]),L=y.c2p(v._xEnds[a]);f=w>=Math.min(N,L)&&w<=Math.max(N,L)?0:1/0}if(f<C){if(C=f,c=_[a],d=b.c2p(c)-A,R){var D=b.c2p(v._yStarts[a]),P=b.c2p(v._yEnds[a]);d=A>=Math.min(D,P)&&A<=Math.max(D,P)?0:1/0}p=Math.sqrt(f*f+d*d),s=i[u]}}}else for(u=i.length-1;u>-1;u--)l=x[a=i[u]],c=_[a],f=y.c2p(l)-w,d=b.c2p(c)-A,(h=Math.sqrt(f*f+d*d))<C&&(C=p=h,s=a);return e.index=s,e.distance=C,e.dxy=p,void 0===s?[e]:[o(e,x,_,v)]},calcHover:o}},66224:(e,t,n)=>{"use strict";var r=n(35096);r.plot=n(43597),e.exports=r},43597:(e,t,n)=>{"use strict";var r=n(6720),i=n(55386),a=n(26382),o=n(66636),s=n(56319),l=n(89232).selectMode,c=n(8741),u=n(43612),f=n(18656),d=n(16324).styleTextSelection,h={};function p(e,t,n,r){var i=e._size,a=e.width*r,o=e.height*r,s=i.l*r,l=i.b*r,c=i.r*r,u=i.t*r,f=i.w*r,d=i.h*r;return[s+t.domain[0]*f,l+n.domain[0]*d,a-c-(1-t.domain[1])*f,o-u-(1-n.domain[1])*d]}(e.exports=function(e,t,n){if(n.length){var m,g,v=e._fullLayout,y=t._scene,b=t.xaxis,x=t.yaxis;if(y)if(c(e,["ANGLE_instanced_arrays","OES_element_index_uint"],h)){var _=y.count,w=v._glcanvas.data()[0].regl;if(f(e,t,n),y.dirty){if(!y.line2d&&!y.error2d||y.scatter2d||y.fill2d||y.glText||w.clear({}),!0===y.error2d&&(y.error2d=a(w)),!0===y.line2d&&(y.line2d=i(w)),!0===y.scatter2d&&(y.scatter2d=r(w)),!0===y.fill2d&&(y.fill2d=i(w)),!0===y.glText)for(y.glText=new Array(_),m=0;m<_;m++)y.glText[m]=new o(w);if(y.glText){if(_>y.glText.length){var A=_-y.glText.length;for(m=0;m<A;m++)y.glText.push(new o(w))}else if(_<y.glText.length){var k=y.glText.length-_;y.glText.splice(_,k).forEach((function(e){e.destroy()}))}for(m=0;m<_;m++)y.glText[m].update(y.textOptions[m])}if(y.line2d&&(y.line2d.update(y.lineOptions),y.lineOptions=y.lineOptions.map((function(e){if(e&&e.positions){for(var t=e.positions,n=0;n<t.length&&(isNaN(t[n])||isNaN(t[n+1]));)n+=2;for(var r=t.length-2;r>n&&(isNaN(t[r])||isNaN(t[r+1]));)r-=2;e.positions=t.slice(n,r+2)}return e})),y.line2d.update(y.lineOptions)),y.error2d){var E=(y.errorXOptions||[]).concat(y.errorYOptions||[]);y.error2d.update(E)}y.scatter2d&&y.scatter2d.update(y.markerOptions),y.fillOrder=s.repeat(null,_),y.fill2d&&(y.fillOptions=y.fillOptions.map((function(e,t){var r=n[t];if(e&&r&&r[0]&&r[0].trace){var i,a,o=r[0],s=o.trace,l=o.t,c=y.lineOptions[t],u=[];s._ownfill&&u.push(t),s._nexttrace&&u.push(t+1),u.length&&(y.fillOrder[t]=u);var f,d,h=[],p=c&&c.positions||l.positions;if("tozeroy"===s.fill){for(f=0;f<p.length&&isNaN(p[f+1]);)f+=2;for(d=p.length-2;d>f&&isNaN(p[d+1]);)d-=2;0!==p[f+1]&&(h=[p[f],0]),h=h.concat(p.slice(f,d+2)),0!==p[d+1]&&(h=h.concat([p[d],0]))}else if("tozerox"===s.fill){for(f=0;f<p.length&&isNaN(p[f]);)f+=2;for(d=p.length-2;d>f&&isNaN(p[d]);)d-=2;0!==p[f]&&(h=[0,p[f+1]]),h=h.concat(p.slice(f,d+2)),0!==p[d]&&(h=h.concat([0,p[d+1]]))}else if("toself"===s.fill||"tonext"===s.fill){for(h=[],i=0,e.splitNull=!0,a=0;a<p.length;a+=2)(isNaN(p[a])||isNaN(p[a+1]))&&((h=h.concat(p.slice(i,a))).push(p[i],p[i+1]),h.push(null,null),i=a+2);h=h.concat(p.slice(i)),i&&h.push(p[i],p[i+1])}else{var m=s._nexttrace;if(m){var g=y.lineOptions[t+1];if(g){var v=g.positions;if("tonexty"===s.fill){for(h=p.slice(),t=Math.floor(v.length/2);t--;){var b=v[2*t],x=v[2*t+1];isNaN(b)||isNaN(x)||h.push(b,x)}e.fill=m.fillcolor}}}}if(s._prevtrace&&"tonext"===s._prevtrace.fill){var _=y.lineOptions[t-1].positions,w=h.length/2,A=[i=w];for(a=0;a<_.length;a+=2)(isNaN(_[a])||isNaN(_[a+1]))&&(A.push(a/2+w+1),i=a+2);h=h.concat(_),e.hole=A}return e.fillmode=s.fill,e.opacity=s.opacity,e.positions=h,e}})),y.fill2d.update(y.fillOptions))}var T=v.dragmode,M=l(T),S=v.clickmode.indexOf("select")>-1;for(m=0;m<_;m++){var C=n[m][0],O=C.trace,R=C.t,N=R.index,L=O._length,D=R.x,P=R.y;if(O.selectedpoints||M||S){if(M||(M=!0),O.selectedpoints){var I=y.selectBatch[N]=s.selIndices2selPoints(O),F={};for(g=0;g<I.length;g++)F[I[g]]=1;var z=[];for(g=0;g<L;g++)F[g]||z.push(g);y.unselectBatch[N]=z}var j=R.xpx=new Array(L),B=R.ypx=new Array(L);for(g=0;g<L;g++)j[g]=b.c2p(D[g]),B[g]=x.c2p(P[g])}else R.xpx=R.ypx=null}if(M){if(y.select2d||(y.select2d=r(v._glcanvas.data()[1].regl)),y.scatter2d){var U=new Array(_);for(m=0;m<_;m++)U[m]=y.selectBatch[m].length||y.unselectBatch[m].length?y.markerUnselectedOptions[m]:{};y.scatter2d.update(U)}y.select2d&&(y.select2d.update(y.markerOptions),y.select2d.update(y.markerSelectedOptions)),y.glText&&n.forEach((function(e){var t=((e||[])[0]||{}).trace||{};u.hasText(t)&&d(e)}))}else y.scatter2d&&y.scatter2d.update(y.markerOptions);var $={viewport:p(v,b,x,e._context.plotGlPixelRatio),range:[(b._rl||b.range)[0],(x._rl||x.range)[0],(b._rl||b.range)[1],(x._rl||x.range)[1]]},q=s.repeat($,y.count);y.fill2d&&y.fill2d.update(q),y.line2d&&y.line2d.update(q),y.error2d&&y.error2d.update(q.concat(q)),y.scatter2d&&y.scatter2d.update(q),y.select2d&&y.select2d.update(q),y.glText&&y.glText.forEach((function(e){e.update($)}))}else y.init()}}).reglPrecompiled=h},21894:(e,t,n)=>{"use strict";var r=n(56319);e.exports=function(e,t){var n=t._scene,i={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},a={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return t._scene||((n=t._scene={}).init=function(){r.extendFlat(n,a,i)},n.init(),n.update=function(e){var t=r.repeat(e,n.count);if(n.fill2d&&n.fill2d.update(t),n.scatter2d&&n.scatter2d.update(t),n.line2d&&n.line2d.update(t),n.error2d&&n.error2d.update(t.concat(t)),n.select2d&&n.select2d.update(t),n.glText)for(var i=0;i<n.count;i++)n.glText[i].update(e)},n.draw=function(){for(var e=n.count,t=n.fill2d,i=n.error2d,a=n.line2d,o=n.scatter2d,s=n.glText,l=n.select2d,c=n.selectBatch,u=n.unselectBatch,f=0;f<e;f++){if(t&&n.fillOrder[f]&&t.draw(n.fillOrder[f]),a&&n.lineOptions[f]&&a.draw(f),i&&(n.errorXOptions[f]&&i.draw(f),n.errorYOptions[f]&&i.draw(f+e)),o&&n.markerOptions[f])if(u[f].length){var d=r.repeat([],n.count);d[f]=u[f],o.draw(d)}else c[f].length||o.draw(f);s[f]&&n.textOptions[f]&&s[f].render()}l&&l.draw(c),n.dirty=!1},n.destroy=function(){n.fill2d&&n.fill2d.destroy&&n.fill2d.destroy(),n.scatter2d&&n.scatter2d.destroy&&n.scatter2d.destroy(),n.error2d&&n.error2d.destroy&&n.error2d.destroy(),n.line2d&&n.line2d.destroy&&n.line2d.destroy(),n.select2d&&n.select2d.destroy&&n.select2d.destroy(),n.glText&&n.glText.forEach((function(e){e.destroy&&e.destroy()})),n.lineOptions=null,n.fillOptions=null,n.markerOptions=null,n.markerSelectedOptions=null,n.markerUnselectedOptions=null,n.errorXOptions=null,n.errorYOptions=null,n.textOptions=null,n.textSelectedOptions=null,n.textUnselectedOptions=null,n.selectBatch=null,n.unselectBatch=null,t._scene=null}),n.dirty||r.extendFlat(n,i),n}},2158:(e,t,n)=>{"use strict";var r=n(43612),i=n(16324).styleTextSelection;e.exports=function(e,t){var n=e.cd,a=e.xaxis,o=e.yaxis,s=[],l=n[0].trace,c=n[0].t,u=l._length,f=c.x,d=c.y,h=c._scene,p=c.index;if(!h)return s;var m=r.hasText(l),g=r.hasMarkers(l),v=!g&&!m;if(!0!==l.visible||v)return s;var y=[],b=[];if(!1!==t&&!t.degenerate)for(var x=0;x<u;x++)t.contains([c.xpx[x],c.ypx[x]],!1,x,e)?(y.push(x),s.push({pointNumber:x,x:a.c2d(f[x]),y:o.c2d(d[x])})):b.push(x);if(g){var _=h.scatter2d;if(y.length||b.length){if(!h.selectBatch[p].length&&!h.unselectBatch[p].length){var w=new Array(h.count);w[p]=h.markerUnselectedOptions[p],_.update.apply(_,w)}}else{var A=new Array(h.count);A[p]=h.markerOptions[p],_.update.apply(_,A)}}return h.selectBatch[p]=y,h.unselectBatch[p]=b,m&&i(n),s}},17270:(e,t,n)=>{"use strict";var r=n(85507),i=n(77014).rb,a=n(77014).ay,o=n(50549),s=n(18874).u,l=n(11998),c=n(57674),u=n(86395).extendFlat,f=n(9488).k;e.exports={labels:{valType:"data_array",editType:"calc",description:["Sets the labels of each of the sectors."].join(" ")},parents:{valType:"data_array",editType:"calc",description:["Sets the parent sectors for each of the sectors.","Empty string items '' are understood to reference","the root node in the hierarchy.",'If `ids` is filled, `parents` items are understood to be "ids" themselves.',"When `ids` is not set, plotly attempts to find matching items in `labels`,","but beware they must be unique."].join(" ")},values:{valType:"data_array",editType:"calc",description:["Sets the values associated with each of the sectors.","Use with `branchvalues` to determine how the values are summed."].join(" ")},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc",description:["Determines how the items in `values` are summed.","When set to *total*, items in `values` are taken to be value of all its descendants.","When set to *remainder*, items in `values` corresponding to the root and the branches sectors","are taken to be the extra part not part of the sum of the values at their leaves."].join(" ")},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc",description:["Determines default for `values` when it is not provided,","by inferring a 1 for each of the *leaves* and/or *branches*, otherwise 0."].join(" ")},level:{valType:"any",editType:"plot",anim:!0,description:["Sets the level from which this trace hierarchy is rendered.","Set `level` to `''` to start from the root node in the hierarchy.",'Must be an "id" if `ids` is filled in, otherwise plotly attempts to find a matching',"item in `labels`."].join(" ")},maxdepth:{valType:"integer",editType:"plot",dflt:-1,description:["Sets the number of rendered sectors from any given `level`.","Set `maxdepth` to *-1* to render all the levels in the hierarchy."].join(" ")},marker:u({colors:{valType:"data_array",editType:"calc",description:["Sets the color of each sector of this trace.","If not specified, the default trace color set is used","to pick the sector colors."].join(" ")},line:{color:u({},l.marker.line.color,{dflt:null,description:["Sets the color of the line enclosing each sector.","Defaults to the `paper_bgcolor` value."].join(" ")}),width:u({},l.marker.line.width,{dflt:1}),editType:"calc"},pattern:f,editType:"calc"},o("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1,description:["Sets the opacity of the leaves. With colorscale","it is defaulted to 1; otherwise it is defaulted to 0.7"].join(" ")},editType:"plot"},text:l.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot",description:["Determines which trace information appear on the graph."].join(" ")},texttemplate:a({editType:"plot"},{keys:c.eventDataKeys.concat(["label","value"])}),hovertext:l.hovertext,hoverinfo:u({},r.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:i({},{keys:c.eventDataKeys}),textfont:l.textfont,insidetextorientation:l.insidetextorientation,insidetextfont:l.insidetextfont,outsidetextfont:u({},l.outsidetextfont,{description:["Sets the font used for `textinfo` lying outside the sector.","This option refers to the root of the hierarchy","presented at the center of a sunburst graph.","Please note that if a hierarchy has multiple root nodes,","this option won't have any effect and `insidetextfont` would be used."].join(" ")}),rotation:{valType:"angle",dflt:0,editType:"plot",description:["Rotates the whole diagram counterclockwise by some angle.","By default the first slice starts at 3 o'clock."].join(" ")},sort:l.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)",description:["sets the color of the root node for a sunburst/treemap/icicle trace.","this has no effect when a colorscale is used to set the markers."].join(" ")},editType:"calc"},domain:s({name:"sunburst",trace:!0,editType:"calc"})}},28914:(e,t,n)=>{"use strict";var r=n(73351),i=n(5605),a=n(56319),o=n(74062).makeColorScaleFuncFromTrace,s=n(37914).makePullColorFn,l=n(37914).generateExtendedColors,c=n(74062).calc,u=n(33351).ALMOST_EQUAL,f={},d={},h={};function p(e,t,n){var r=0,i=e.children;if(i){for(var a=i.length,o=0;o<a;o++)r+=p(i[o],t,n);n.branches&&r++}else n.leaves&&r++;return e.value=e.data.data.value=r,t._values||(t._values=[]),t._values[e.data.data.i]=r,r}t.calc=function(e,t){var n,l,f,d,h,m,g=e._fullLayout,v=t.ids,y=a.isArrayOrTypedArray(v),b=t.labels,x=t.parents,_=t.values,w=a.isArrayOrTypedArray(_),A=[],k={},E={},T=function(e){return e||"number"==typeof e},M=function(e){return!w||i(_[e])&&_[e]>=0};y?(n=Math.min(v.length,x.length),l=function(e){return T(v[e])&&M(e)},f=function(e){return String(v[e])}):(n=Math.min(b.length,x.length),l=function(e){return T(b[e])&&M(e)},f=function(e){return String(b[e])}),w&&(n=Math.min(n,_.length));for(var S=0;S<n;S++)if(l(S)){var C=f(S),O=T(x[S])?String(x[S]):"",R={i:S,id:C,pid:O,label:T(b[S])?String(b[S]):""};w&&(R.v=+_[S]),A.push(R),h=C,k[d=O]?k[d].push(h):k[d]=[h],E[h]=1}if(k[""]){if(k[""].length>1){for(var N=a.randstr(),L=0;L<A.length;L++)""===A[L].pid&&(A[L].pid=N);A.unshift({hasMultipleRoots:!0,id:N,pid:"",label:""})}}else{var D,P=[];for(D in k)E[D]||P.push(D);if(1!==P.length)return a.warn(["Multiple implied roots, cannot build",t.type,"hierarchy of",t.name+".","These roots include:",P.join(", ")].join(" "));D=P[0],A.unshift({hasImpliedRoot:!0,id:D,pid:"",label:D})}try{m=r.stratify().id((function(e){return e.id})).parentId((function(e){return e.pid}))(A)}catch(e){return a.warn(["Failed to build",t.type,"hierarchy of",t.name+".","Error:",e.message].join(" "))}var I=r.hierarchy(m),F=!1;if(w)switch(t.branchvalues){case"remainder":I.sum((function(e){return e.data.v}));break;case"total":I.each((function(e){var n=e.data.data,r=n.v;if(e.children){var i=e.children.reduce((function(e,t){return e+t.data.data.v}),0);if((n.hasImpliedRoot||n.hasMultipleRoots)&&(r=i),r<i*u)return F=!0,a.warn(["Total value for node",e.data.data.id,"of",t.name,"is smaller than the sum of its children.","\nparent value =",r,"\nchildren sum =",i].join(" "))}e.value=r}))}else p(I,t,{branches:-1!==t.count.indexOf("branches"),leaves:-1!==t.count.indexOf("leaves")});if(!F){var z,j;t.sort&&I.sort((function(e,t){return t.value-e.value}));var B=t.marker.colors||[],U=!!B.length;return t._hasColorscale?(U||(B=w?t.values:t._values),c(e,t,{vals:B,containerStr:"marker",cLetter:"c"}),j=o(t.marker)):z=s(g["_"+t.type+"colormap"]),I.each((function(e){var n=e.data.data;n.color=t._hasColorscale?j(B[n.i]):z(B[n.i],n.id)})),A[0].hierarchy=I,A}},t._runCrossTraceCalc=function(e,t){var n=t._fullLayout,r=t.calcdata,i=n[e+"colorway"],a=n["_"+e+"colormap"];n["extend"+e+"colors"]&&(i=l(i,"icicle"===e?h:"treemap"===e?d:f));var o,s=0;function c(e){var t=e.data.data,n=t.id;!1===t.color&&(a[n]?t.color=a[n]:e.parent?e.parent.parent?t.color=e.parent.data.data.color:(a[n]=t.color=i[s%i.length],s++):t.color=o)}for(var u=0;u<r.length;u++){var p=r[u][0];p.trace.type===e&&p.hierarchy&&(o=p.trace.root.color,p.hierarchy.each(c))}},t.crossTraceCalc=function(e){return t._runCrossTraceCalc("sunburst",e)}},57674:e=>{"use strict";e.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},57129:(e,t,n)=>{"use strict";var r=n(14797),i=n(53408);e.exports=function(e,t,n,a,o){var s=t.data.data,l=s.i,c=o||s.color;if(l>=0){t.i=s.i;var u=n.marker;u.pattern&&u.colors&&u.pattern.shape||(u.color=c,t.color=c),r.pointStyle(e,n,a,t)}else i.fill(e,c)}},48125:(e,t,n)=>{"use strict";var r=n(93268),i=n(3360),a=n(44790).appendArrayPointValue,o=n(17911),s=n(56319),l=n(76246),c=n(4230),u=n(64238).formatPieValue;function f(e,t,n){for(var r=e.data.data,i={curveNumber:t.index,pointNumber:r.i,data:t._input,fullData:t},o=0;o<n.length;o++){var s=n[o];s in e&&(i[s]=e[s])}return"parentString"in e&&!c.isHierarchyRoot(e)&&(i.parent=e.parentString),a(i,t,r.i),i}e.exports=function(e,t,n,a,d){var h=a[0],p=h.trace,m=h.hierarchy,g="sunburst"===p.type,v="treemap"===p.type||"icicle"===p.type;"_hasHoverLabel"in p||(p._hasHoverLabel=!1),"_hasHoverEvent"in p||(p._hasHoverEvent=!1);e.on("mouseover",(function(i){var a=n._fullLayout;if(!n._dragging&&!1!==a.hovermode){var l,y=n._fullData[p.index],b=i.data.data,x=b.i,_=c.isHierarchyRoot(i),w=c.getParent(m,i),A=c.getValue(i),k=function(e){return s.castOption(y,x,e)},E=k("hovertemplate"),T=o.castHoverinfo(y,a,x),M=a.separators;if(E||T&&"none"!==T&&"skip"!==T){var S,C;g&&(S=h.cx+i.pxmid[0]*(1-i.rInscribed),C=h.cy+i.pxmid[1]*(1-i.rInscribed)),v&&(S=i._hoverX,C=i._hoverY);var O,R={},N=[],L=[],D=function(e){return-1!==N.indexOf(e)};T&&(N="all"===T?y._module.attributes.hoverinfo.flags:T.split("+")),R.label=b.label,D("label")&&R.label&&L.push(R.label),b.hasOwnProperty("v")&&(R.value=b.v,R.valueLabel=u(R.value,M),D("value")&&L.push(R.valueLabel)),R.currentPath=i.currentPath=c.getPath(i.data),D("current path")&&!_&&L.push(R.currentPath);var P=[],I=function(){-1===P.indexOf(O)&&(L.push(O),P.push(O))};R.percentParent=i.percentParent=A/c.getValue(w),R.parent=i.parentString=c.getPtLabel(w),D("percent parent")&&(O=c.formatPercent(R.percentParent,M)+" of "+R.parent,I()),R.percentEntry=i.percentEntry=A/c.getValue(t),R.entry=i.entry=c.getPtLabel(t),!D("percent entry")||_||i.onPathbar||(O=c.formatPercent(R.percentEntry,M)+" of "+R.entry,I()),R.percentRoot=i.percentRoot=A/c.getValue(m),R.root=i.root=c.getPtLabel(m),D("percent root")&&!_&&(O=c.formatPercent(R.percentRoot,M)+" of "+R.root,I()),R.text=k("hovertext")||k("text"),D("text")&&(O=R.text,s.isValidTextValue(O)&&L.push(O)),l=[f(i,y,d.eventDataKeys)];var F={trace:y,y:C,_x0:i._x0,_x1:i._x1,_y0:i._y0,_y1:i._y1,text:L.join("<br>"),name:E||D("name")?y.name:void 0,color:k("hoverlabel.bgcolor")||b.color,borderColor:k("hoverlabel.bordercolor"),fontFamily:k("hoverlabel.font.family"),fontSize:k("hoverlabel.font.size"),fontColor:k("hoverlabel.font.color"),fontWeight:k("hoverlabel.font.weight"),fontStyle:k("hoverlabel.font.style"),fontVariant:k("hoverlabel.font.variant"),nameLength:k("hoverlabel.namelength"),textAlign:k("hoverlabel.align"),hovertemplate:E,hovertemplateLabels:R,eventData:l};g&&(F.x0=S-i.rInscribed*i.rpx1,F.x1=S+i.rInscribed*i.rpx1,F.idealAlign=i.pxmid[0]<0?"left":"right"),v&&(F.x=S,F.idealAlign=S<0?"left":"right");var z=[];o.loneHover(F,{container:a._hoverlayer.node(),outerContainer:a._paper.node(),gd:n,inOut_bbox:z}),l[0].bbox=z[0],p._hasHoverLabel=!0}if(v){var j=e.select("path.surface");d.styleOne(j,i,y,n,{hovered:!0})}p._hasHoverEvent=!0,n.emit("plotly_hover",{points:l||[f(i,y,d.eventDataKeys)],event:r.event})}})),e.on("mouseout",(function(t){var i=n._fullLayout,a=n._fullData[p.index],s=r.select(this).datum();if(p._hasHoverEvent&&(t.originalEvent=r.event,n.emit("plotly_unhover",{points:[f(s,a,d.eventDataKeys)],event:r.event}),p._hasHoverEvent=!1),p._hasHoverLabel&&(o.loneUnhover(i._hoverlayer.node()),p._hasHoverLabel=!1),v){var l=e.select("path.surface");d.styleOne(l,s,a,n,{hovered:!1})}})),e.on("click",(function(e){var t=n._fullLayout,a=n._fullData[p.index],s=g&&(c.isHierarchyRoot(e)||c.isLeaf(e)),u=c.getPtId(e),h=c.isEntry(e)?c.findEntryWithChild(m,u):c.findEntryWithLevel(m,u),v=c.getPtId(h),y={points:[f(e,a,d.eventDataKeys)],event:r.event};s||(y.nextLevel=v);var b=l.triggerHandler(n,"plotly_"+p.type+"click",y);if(!1!==b&&t.hovermode&&(n._hoverdata=[f(e,a,d.eventDataKeys)],o.click(n,r.event)),!s&&!1!==b&&!n._dragging&&!n._transitioning){i.call("_storeDirectGUIEdit",a,t._tracePreGUI[a.uid],{level:a.level});var x={data:[{level:v}],traces:[p.index]},_={frame:{redraw:!1,duration:d.transitionTime},transition:{duration:d.transitionTime,easing:d.transitionEasing},mode:"immediate",fromcurrent:!0};o.loneUnhover(t._hoverlayer.node()),i.call("animate",n,x,_)}}))}},4230:(e,t,n)=>{"use strict";var r=n(56319),i=n(53408),a=n(47281),o=n(64238);function s(e){return e.data.data.pid}t.findEntryWithLevel=function(e,n){var r;return n&&e.eachAfter((function(e){if(t.getPtId(e)===n)return r=e.copy()})),r||e},t.findEntryWithChild=function(e,n){var r;return e.eachAfter((function(e){for(var i=e.children||[],a=0;a<i.length;a++){var o=i[a];if(t.getPtId(o)===n)return r=e.copy()}})),r||e},t.isEntry=function(e){return!e.parent},t.isLeaf=function(e){return!e.children},t.getPtId=function(e){return e.data.data.id},t.getPtLabel=function(e){return e.data.data.label},t.getValue=function(e){return e.value},t.isHierarchyRoot=function(e){return""===s(e)},t.setSliceCursor=function(e,n,r){var i=r.isTransitioning;if(!i){var o=e.datum();i=r.hideOnRoot&&t.isHierarchyRoot(o)||r.hideOnLeaves&&t.isLeaf(o)}a(e,i?null:"pointer")},t.getInsideTextFontKey=function(e,t,n,i,a){var o=(a||{}).onPathbar?"pathbar.textfont":"insidetextfont",s=n.data.data.i;return r.castOption(t,s,o+"."+e)||r.castOption(t,s,"textfont."+e)||i.size},t.getOutsideTextFontKey=function(e,t,n,i){var a=n.data.data.i;return r.castOption(t,a,"outsidetextfont."+e)||r.castOption(t,a,"textfont."+e)||i.size},t.isOutsideText=function(e,n){return!e._hasColorscale&&t.isHierarchyRoot(n)},t.determineTextFont=function(e,n,a,o){return t.isOutsideText(e,n)?function(e,n,r){return{color:t.getOutsideTextFontKey("color",e,n,r),family:t.getOutsideTextFontKey("family",e,n,r),size:t.getOutsideTextFontKey("size",e,n,r),weight:t.getOutsideTextFontKey("weight",e,n,r),style:t.getOutsideTextFontKey("style",e,n,r),variant:t.getOutsideTextFontKey("variant",e,n,r),textcase:t.getOutsideTextFontKey("textcase",e,n,r),lineposition:t.getOutsideTextFontKey("lineposition",e,n,r),shadow:t.getOutsideTextFontKey("shadow",e,n,r)}}(e,n,a):function(e,n,a,o){var s=(o||{}).onPathbar,l=n.data.data,c=l.i,u=r.castOption(e,c,(s?"pathbar.textfont":"insidetextfont")+".color");return!u&&e._input.textfont&&(u=r.castOption(e._input,c,"textfont.color")),{color:u||i.contrast(l.color),family:t.getInsideTextFontKey("family",e,n,a,o),size:t.getInsideTextFontKey("size",e,n,a,o),weight:t.getInsideTextFontKey("weight",e,n,a,o),style:t.getInsideTextFontKey("style",e,n,a,o),variant:t.getInsideTextFontKey("variant",e,n,a,o),textcase:t.getInsideTextFontKey("textcase",e,n,a,o),lineposition:t.getInsideTextFontKey("lineposition",e,n,a,o),shadow:t.getInsideTextFontKey("shadow",e,n,a,o)}}(e,n,a,o)},t.hasTransition=function(e){return!!(e&&e.duration>0)},t.getMaxDepth=function(e){return e.maxdepth>=0?e.maxdepth:1/0},t.isHeader=function(e,n){return!(t.isLeaf(e)||e.depth===n._maxDepth-1)},t.getParent=function(e,n){return t.findEntryWithLevel(e,s(n))},t.listPath=function(e,n){var r=e.parent;if(!r)return[];var i=n?[r.data[n]]:[r];return t.listPath(r,n).concat(i)},t.getPath=function(e){return t.listPath(e,"label").join("/")+"/"},t.formatValue=o.formatPieValue,t.formatPercent=function(e,t){var n=r.formatPercent(e,0);return"0%"===n&&(n=o.formatPiePercent(e,t)),n}},77776:(e,t,n)=>{"use strict";var r=n(93268),i=n(73351),a=n(72767).interpolate,o=n(14797),s=n(56319),l=n(56953),c=n(11464),u=c.recordMinTextSize,f=c.clearMinTextSize,d=n(71528),h=n(64238).getRotationAngle,p=d.computeTransform,m=d.transformInsideText,g=n(10810).styleOne,v=n(51289).resizeText,y=n(48125),b=n(57674),x=n(4230);function _(e,n,c,f){var d=e._context.staticPlot,v=e._fullLayout,_=!v.uniformtext.mode&&x.hasTransition(f),A=r.select(c).selectAll("g.slice"),k=n[0],E=k.trace,T=k.hierarchy,M=x.findEntryWithLevel(T,E.level),S=x.getMaxDepth(E),C=v._size,O=E.domain,R=C.w*(O.x[1]-O.x[0]),N=C.h*(O.y[1]-O.y[0]),L=.5*Math.min(R,N),D=k.cx=C.l+C.w*(O.x[1]+O.x[0])/2,P=k.cy=C.t+C.h*(1-O.y[0])-N/2;if(!M)return A.remove();var I=null,F={};_&&A.each((function(e){F[x.getPtId(e)]={rpx0:e.rpx0,rpx1:e.rpx1,x0:e.x0,x1:e.x1,transform:e.transform},!I&&x.isEntry(e)&&(I=e)}));var z=function(e){return i.partition().size([2*Math.PI,e.height+1])(e)}(M).descendants(),j=M.height+1,B=0,U=S;k.hasMultipleRoots&&x.isHierarchyRoot(M)&&(z=z.slice(1),j-=1,B=1,U+=1),z=z.filter((function(e){return e.y1<=U}));var $=h(E.rotation);$&&z.forEach((function(e){e.x0+=$,e.x1+=$}));var q=Math.min(j,S),H=function(e){return(e-B)/q*L},V=function(e,t){return[e*Math.cos(t),-e*Math.sin(t)]},W=function(e){return s.pathAnnulus(e.rpx0,e.rpx1,e.x0,e.x1,D,P)},G=function(e){return D+w(e)[0]*(e.transform.rCenter||0)+(e.transform.x||0)},Y=function(e){return P+w(e)[1]*(e.transform.rCenter||0)+(e.transform.y||0)};(A=A.data(z,x.getPtId)).enter().append("g").classed("slice",!0),_?A.exit().transition().each((function(){var e=r.select(this);e.select("path.surface").transition().attrTween("d",(function(e){var t=function(e){var t,n=x.getPtId(e),r=F[n],i=F[x.getPtId(M)];if(i){var o=(e.x1>i.x1?2*Math.PI:0)+$;t=e.rpx1<i.rpx1?{x0:e.x0,x1:e.x1,rpx0:0,rpx1:0}:{x0:o,x1:o,rpx0:e.rpx0,rpx1:e.rpx1}}else{var s,l=x.getPtId(e.parent);A.each((function(e){if(x.getPtId(e)===l)return s=e}));var c,u=s.children;u.forEach((function(e,t){if(x.getPtId(e)===n)return c=t}));var f=u.length,d=a(s.x0,s.x1);t={rpx0:L,rpx1:L,x0:d(c/f),x1:d((c+1)/f)}}return a(r,t)}(e);return function(e){return W(t(e))}})),e.select("g.slicetext").attr("opacity",0)})).remove():A.exit().remove(),A.order();var X=null;if(_&&I){var K=x.getPtId(I);A.each((function(e){null===X&&x.getPtId(e)===K&&(X=e.x1)}))}var Z=A;function J(e){var t=e.parent,n=F[x.getPtId(t)],r={};if(n){var i=t.children,o=i.indexOf(e),s=i.length,l=a(n.x0,n.x1);r.x0=l(o/s),r.x1=l(o/s)}else r.x0=r.x1=0;return r}_&&(Z=Z.transition().each("end",(function(){var t=r.select(this);x.setSliceCursor(t,e,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})}))),Z.each((function(i){var c=r.select(this),f=s.ensureSingle(c,"path","surface",(function(e){e.style("pointer-events",d?"none":"all")}));i.rpx0=H(i.y0),i.rpx1=H(i.y1),i.xmid=(i.x0+i.x1)/2,i.pxmid=V(i.rpx1,i.xmid),i.midangle=-(i.xmid-Math.PI/2),i.startangle=-(i.x0-Math.PI/2),i.stopangle=-(i.x1-Math.PI/2),i.halfangle=.5*Math.min(s.angleDelta(i.x0,i.x1)||Math.PI,Math.PI),i.ring=1-i.rpx0/i.rpx1,i.rInscribed=function(e){return 0===e.rpx0&&s.isFullCircle([e.x0,e.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(e.halfangle)),e.ring/2))}(i),_?f.transition().attrTween("d",(function(e){var t=function(e){var t,n=F[x.getPtId(e)],r={x0:e.x0,x1:e.x1,rpx0:e.rpx0,rpx1:e.rpx1};if(n)t=n;else if(I)if(e.parent)if(X){var i=(e.x1>X?2*Math.PI:0)+$;t={x0:i,x1:i}}else t={rpx0:L,rpx1:L},s.extendFlat(t,J(e));else t={rpx0:0,rpx1:0};else t={x0:$,x1:$};return a(t,r)}(e);return function(e){return W(t(e))}})):f.attr("d",W),c.call(y,M,e,n,{eventDataKeys:b.eventDataKeys,transitionTime:b.CLICK_TRANSITION_TIME,transitionEasing:b.CLICK_TRANSITION_EASING}).call(x.setSliceCursor,e,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:e._transitioning}),f.call(g,i,E,e);var h=s.ensureSingle(c,"g","slicetext"),w=s.ensureSingle(h,"text","",(function(e){e.attr("data-notex",1)})),A=s.ensureUniformFontSize(e,x.determineTextFont(E,i,v.font));w.text(t.formatSliceLabel(i,M,E,n,v)).classed("slicetext",!0).attr("text-anchor","middle").call(o.font,A).call(l.convertToTspans,e);var T=o.bBox(w.node());i.transform=m(T,i,k),i.transform.targetX=G(i),i.transform.targetY=Y(i);var S=function(e,t){var n=e.transform;return p(n,t),n.fontSize=A.size,u(E.type,n,v),s.getTextTransform(n)};_?w.transition().attrTween("transform",(function(e){var t=function(e){var t,n=F[x.getPtId(e)],r=e.transform;if(n)t=n;else if(t={rpx1:e.rpx1,transform:{textPosAngle:r.textPosAngle,scale:0,rotate:r.rotate,rCenter:r.rCenter,x:r.x,y:r.y}},I)if(e.parent)if(X){var i=e.x1>X?2*Math.PI:0;t.x0=t.x1=i}else s.extendFlat(t,J(e));else t.x0=t.x1=$;else t.x0=t.x1=$;var o=a(t.transform.textPosAngle,e.transform.textPosAngle),l=a(t.rpx1,e.rpx1),c=a(t.x0,e.x0),f=a(t.x1,e.x1),d=a(t.transform.scale,r.scale),h=a(t.transform.rotate,r.rotate),p=0===r.rCenter?3:0===t.transform.rCenter?1/3:1,m=a(t.transform.rCenter,r.rCenter),g=function(e){return m(Math.pow(e,p))};return function(e){var t=l(e),n=c(e),i=f(e),a=g(e),s={pxmid:V(t,(n+i)/2),rpx1:t,transform:{textPosAngle:o(e),rCenter:a,x:r.x,y:r.y}};return u(E.type,r,v),{transform:{targetX:G(s),targetY:Y(s),scale:d(e),rotate:h(e),rCenter:a}}}}(e);return function(e){return S(t(e),T)}})):w.attr("transform",S(i,T))}))}function w(e){return function(e,t){return[e*Math.sin(t),-e*Math.cos(t)]}(e.rpx1,e.transform.textPosAngle)}t.plot=function(e,t,n,i){var a,o,s=e._fullLayout,l=s._sunburstlayer,c=!n,u=!s.uniformtext.mode&&x.hasTransition(n);(f("sunburst",s),(a=l.selectAll("g.trace.sunburst").data(t,(function(e){return e[0].trace.uid}))).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),a.order(),u)?(i&&(o=i()),r.transition().duration(n.duration).ease(n.easing).each("end",(function(){o&&o()})).each("interrupt",(function(){o&&o()})).each((function(){l.selectAll("g.trace").each((function(t){_(e,t,this,n)}))}))):(a.each((function(t){_(e,t,this,n)})),s.uniformtext.mode&&v(e,s._sunburstlayer.selectAll(".trace"),"sunburst"));c&&a.exit().remove()},t.formatSliceLabel=function(e,t,n,r,i){var a=n.texttemplate,o=n.textinfo;if(!(a||o&&"none"!==o))return"";var l=i.separators,c=r[0],u=e.data.data,f=c.hierarchy,d=x.isHierarchyRoot(e),h=x.getParent(f,e),p=x.getValue(e);if(!a){var m,g=o.split("+"),v=function(e){return-1!==g.indexOf(e)},y=[];if(v("label")&&u.label&&y.push(u.label),u.hasOwnProperty("v")&&v("value")&&y.push(x.formatValue(u.v,l)),!d){v("current path")&&y.push(x.getPath(e.data));var b=0;v("percent parent")&&b++,v("percent entry")&&b++,v("percent root")&&b++;var _=b>1;if(b){var w,A=function(e){m=x.formatPercent(w,l),_&&(m+=" of "+e),y.push(m)};v("percent parent")&&!d&&(w=p/x.getValue(h),A("parent")),v("percent entry")&&(w=p/x.getValue(t),A("entry")),v("percent root")&&(w=p/x.getValue(f),A("root"))}}return v("text")&&(m=s.castOption(n,u.i,"text"),s.isValidTextValue(m)&&y.push(m)),y.join("<br>")}var k=s.castOption(n,u.i,"texttemplate");if(!k)return"";var E={};u.label&&(E.label=u.label),u.hasOwnProperty("v")&&(E.value=u.v,E.valueLabel=x.formatValue(u.v,l)),E.currentPath=x.getPath(e.data),d||(E.percentParent=p/x.getValue(h),E.percentParentLabel=x.formatPercent(E.percentParent,l),E.parent=x.getPtLabel(h)),E.percentEntry=p/x.getValue(t),E.percentEntryLabel=x.formatPercent(E.percentEntry,l),E.entry=x.getPtLabel(t),E.percentRoot=p/x.getValue(f),E.percentRootLabel=x.formatPercent(E.percentRoot,l),E.root=x.getPtLabel(f),u.hasOwnProperty("color")&&(E.color=u.color);var T=s.castOption(n,u.i,"text");return(s.isValidTextValue(T)||""===T)&&(E.text=T),E.customdata=s.castOption(n,u.i,"customdata"),s.texttemplateString(k,E,i._d3locale,E,n._meta||{})}},10810:(e,t,n)=>{"use strict";var r=n(93268),i=n(53408),a=n(56319),o=n(11464).resizeText,s=n(57129);function l(e,t,n,r){var o=t.data.data,l=!t.children,c=o.i,u=a.castOption(n,c,"marker.line.color")||i.defaultLine,f=a.castOption(n,c,"marker.line.width")||0;e.call(s,t,n,r).style("stroke-width",f).call(i.stroke,u).style("opacity",l?n.leaf.opacity:null)}e.exports={style:function(e){var t=e._fullLayout._sunburstlayer.selectAll(".trace");o(e,t,"sunburst"),t.each((function(t){var n=r.select(this),i=t[0].trace;n.style("opacity",i.opacity),n.selectAll("path.surface").each((function(t){r.select(this).call(l,t,i,e)}))}))},styleOne:l}},61694:(e,t,n)=>{"use strict";var r=n(77014).rb,i=n(77014).ay,a=n(50549),o=n(18874).u,s=n(11998),l=n(17270),c=n(11874),u=n(86395).extendFlat,f=n(9488).k;e.exports={labels:l.labels,parents:l.parents,values:l.values,branchvalues:l.branchvalues,count:l.count,level:l.level,maxdepth:l.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot",description:["Determines d3 treemap solver.","For more info please refer to https://github.com/d3/d3-hierarchy#treemap-tiling"].join(" ")},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot",description:["When using *squarify* `packing` algorithm, according to https://github.com/d3/d3-hierarchy/blob/v3.1.1/README.md#squarify_ratio","this option specifies the desired aspect ratio of the generated rectangles.","The ratio must be specified as a number greater than or equal to one.","Note that the orientation of the generated rectangles (tall or wide)","is not implied by the ratio; for example, a ratio of two will attempt","to produce a mixture of rectangles whose width:height ratio is either 2:1 or 1:2.","When using *squarify*, unlike d3 which uses the Golden Ratio i.e. 1.618034,","Plotly applies 1 to increase squares in treemap layouts."].join(" ")},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot",description:["Determines if the positions obtained from solver are flipped on each axis."].join(" ")},pad:{valType:"number",min:0,dflt:3,editType:"plot",description:["Sets the inner padding (in px)."].join(" ")},editType:"calc"},marker:u({pad:{t:{valType:"number",min:0,editType:"plot",description:["Sets the padding form the top (in px)."].join(" ")},l:{valType:"number",min:0,editType:"plot",description:["Sets the padding form the left (in px)."].join(" ")},r:{valType:"number",min:0,editType:"plot",description:["Sets the padding form the right (in px)."].join(" ")},b:{valType:"number",min:0,editType:"plot",description:["Sets the padding form the bottom (in px)."].join(" ")},editType:"calc"},colors:l.marker.colors,pattern:f,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style",description:["Determines if the sector colors are faded towards","the background from the leaves up to the headers.","This option is unavailable when a `colorscale` is present,","defaults to false when `marker.colors` is set,","but otherwise defaults to true.","When set to *reversed*, the fading direction is inverted,","that is the top elements within hierarchy are drawn with fully saturated colors","while the leaves are faded towards the background color."].join(" ")},line:l.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets the maximum rounding of corners (in px)."].join(" ")},editType:"calc"},a("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot",description:["Determines if the path bar is drawn","i.e. outside the trace `domain` and","with one pixel gap."].join(" ")},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot",description:["Determines on which side of the the treemap the","`pathbar` should be presented."].join(" ")},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot",description:["Determines which shape is used for edges between `barpath` labels."].join(" ")},thickness:{valType:"number",min:12,editType:"plot",description:["Sets the thickness of `pathbar` (in px). If not specified the `pathbar.textfont.size` is used","with 3 pixles extra padding on each side."].join(" ")},textfont:u({},s.textfont,{description:"Sets the font used inside `pathbar`."}),editType:"calc"},text:s.text,textinfo:l.textinfo,texttemplate:i({editType:"plot"},{keys:c.eventDataKeys.concat(["label","value"])}),hovertext:s.hovertext,hoverinfo:l.hoverinfo,hovertemplate:r({},{keys:c.eventDataKeys}),textfont:s.textfont,insidetextfont:s.insidetextfont,outsidetextfont:u({},s.outsidetextfont,{description:["Sets the font used for `textinfo` lying outside the sector.","This option refers to the root of the hierarchy","presented on top left corner of a treemap graph.","Please note that if a hierarchy has multiple root nodes,","this option won't have any effect and `insidetextfont` would be used."].join(" ")}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot",description:["Sets the positions of the `text` elements."].join(" ")},sort:s.sort,root:l.root,domain:o({name:"treemap",trace:!0,editType:"calc"})}},70446:(e,t,n)=>{"use strict";var r=n(31496);t.name="treemap",t.plot=function(e,n,i,a){r.plotBasePlot(t.name,e,n,i,a)},t.clean=function(e,n,i,a){r.cleanBasePlot(t.name,e,n,i,a)}},47706:(e,t,n)=>{"use strict";var r=n(28914);t._=function(e,t){return r.calc(e,t)},t.t=function(e){return r._runCrossTraceCalc("treemap",e)}},11874:e=>{"use strict";e.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},48553:(e,t,n)=>{"use strict";var r=n(56319),i=n(61694),a=n(53408),o=n(18874).N,s=n(72316).handleText,l=n(16461).TEXTPAD,c=n(54441).handleMarkerDefaults,u=n(74062),f=u.hasColorscale,d=u.handleDefaults;e.exports=function(e,t,n,u){function h(n,a){return r.coerce(e,t,i,n,a)}var p=h("labels"),m=h("parents");if(p&&p.length&&m&&m.length){var g=h("values");g&&g.length?h("branchvalues"):h("count"),h("level"),h("maxdepth"),"squarify"===h("tiling.packing")&&h("tiling.squarifyratio"),h("tiling.flip"),h("tiling.pad");var v=h("text");h("texttemplate"),t.texttemplate||h("textinfo",r.isArrayOrTypedArray(v)?"text+label":"label"),h("hovertext"),h("hovertemplate");var y=h("pathbar.visible");s(e,t,u,h,"auto",{hasPathbar:y,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),h("textposition");var b=-1!==t.textposition.indexOf("bottom");c(e,t,u,h),(t._hasColorscale=f(e,"marker","colors")||(e.marker||{}).coloraxis)?d(e,t,u,h,{prefix:"marker.",cLetter:"c"}):h("marker.depthfade",!(t.marker.colors||[]).length);var x=2*t.textfont.size;h("marker.pad.t",b?x/4:x),h("marker.pad.l",x/4),h("marker.pad.r",x/4),h("marker.pad.b",b?x:x/4),h("marker.cornerradius"),t._hovered={marker:{line:{width:2,color:a.contrast(u.paper_bgcolor)}}},y&&(h("pathbar.thickness",t.pathbar.textfont.size+2*l),h("pathbar.side"),h("pathbar.edgeshape")),h("sort"),h("root.color"),o(t,u,h),t._length=null}else t.visible=!1}},77057:(e,t,n)=>{"use strict";var r=n(93268),i=n(4230),a=n(11464).clearMinTextSize,o=n(51289).resizeText,s=n(89879);e.exports=function(e,t,n,l,c){var u,f,d=c.type,h=c.drawDescendants,p=e._fullLayout,m=p["_"+d+"layer"],g=!n;(a(d,p),(u=m.selectAll("g.trace."+d).data(t,(function(e){return e[0].trace.uid}))).enter().append("g").classed("trace",!0).classed(d,!0),u.order(),!p.uniformtext.mode&&i.hasTransition(n))?(l&&(f=l()),r.transition().duration(n.duration).ease(n.easing).each("end",(function(){f&&f()})).each("interrupt",(function(){f&&f()})).each((function(){m.selectAll("g.trace").each((function(t){s(e,t,this,n,h)}))}))):(u.each((function(t){s(e,t,this,n,h)})),p.uniformtext.mode&&o(e,m.selectAll(".trace"),d));g&&u.exit().remove()}},1184:(e,t,n)=>{"use strict";var r=n(93268),i=n(56319),a=n(14797),o=n(56953),s=n(66701),l=n(12802).styleOne,c=n(11874),u=n(4230),f=n(48125),d=!0;e.exports=function(e,t,n,h,p){var m=p.barDifY,g=p.width,v=p.height,y=p.viewX,b=p.viewY,x=p.pathSlice,_=p.toMoveInsideSlice,w=p.strTransform,A=p.hasTransition,k=p.handleSlicesExit,E=p.makeUpdateSliceInterpolator,T=p.makeUpdateTextInterpolator,M={},S=e._context.staticPlot,C=e._fullLayout,O=t[0],R=O.trace,N=O.hierarchy,L=g/R._entryDepth,D=u.listPath(n.data,"id"),P=s(N.copy(),[g,v],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(P=P.filter((function(e){var t=D.indexOf(e.data.id);return-1!==t&&(e.x0=L*t,e.x1=L*(t+1),e.y0=m,e.y1=m+v,e.onPathbar=!0,!0)}))).reverse(),(h=h.data(P,u.getPtId)).enter().append("g").classed("pathbar",!0),k(h,d,M,[g,v],x),h.order();var I=h;A&&(I=I.transition().each("end",(function(){var t=r.select(this);u.setSliceCursor(t,e,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})}))),I.each((function(s){s._x0=y(s.x0),s._x1=y(s.x1),s._y0=b(s.y0),s._y1=b(s.y1),s._hoverX=y(s.x1-Math.min(g,v)/2),s._hoverY=b(s.y1-v/2);var h=r.select(this),p=i.ensureSingle(h,"path","surface",(function(e){e.style("pointer-events",S?"none":"all")}));A?p.transition().attrTween("d",(function(e){var t=E(e,d,M,[g,v]);return function(e){return x(t(e))}})):p.attr("d",x),h.call(f,n,e,t,{styleOne:l,eventDataKeys:c.eventDataKeys,transitionTime:c.CLICK_TRANSITION_TIME,transitionEasing:c.CLICK_TRANSITION_EASING}).call(u.setSliceCursor,e,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:e._transitioning}),p.call(l,s,R,e,{hovered:!1}),s._text=(u.getPtLabel(s)||"").split("<br>").join(" ")||"";var m=i.ensureSingle(h,"g","slicetext"),k=i.ensureSingle(m,"text","",(function(e){e.attr("data-notex",1)})),O=i.ensureUniformFontSize(e,u.determineTextFont(R,s,C.font,{onPathbar:!0}));k.text(s._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(a.font,O).call(o.convertToTspans,e),s.textBB=a.bBox(k.node()),s.transform=_(s,{fontSize:O.size,onPathbar:!0}),s.transform.fontSize=O.size,A?k.transition().attrTween("transform",(function(e){var t=T(e,d,M,[g,v]);return function(e){return w(t(e))}})):k.attr("transform",w(s))}))}},8518:(e,t,n)=>{"use strict";var r=n(93268),i=n(56319),a=n(14797),o=n(56953),s=n(66701),l=n(12802).styleOne,c=n(11874),u=n(4230),f=n(48125),d=n(77776).formatSliceLabel,h=!1;e.exports=function(e,t,n,p,m){var g=m.width,v=m.height,y=m.viewX,b=m.viewY,x=m.pathSlice,_=m.toMoveInsideSlice,w=m.strTransform,A=m.hasTransition,k=m.handleSlicesExit,E=m.makeUpdateSliceInterpolator,T=m.makeUpdateTextInterpolator,M=m.prevEntry,S=e._context.staticPlot,C=e._fullLayout,O=t[0].trace,R=-1!==O.textposition.indexOf("left"),N=-1!==O.textposition.indexOf("right"),L=-1!==O.textposition.indexOf("bottom"),D=!L&&!O.marker.pad.t||L&&!O.marker.pad.b,P=s(n,[g,v],{packing:O.tiling.packing,squarifyratio:O.tiling.squarifyratio,flipX:O.tiling.flip.indexOf("x")>-1,flipY:O.tiling.flip.indexOf("y")>-1,pad:{inner:O.tiling.pad,top:O.marker.pad.t,left:O.marker.pad.l,right:O.marker.pad.r,bottom:O.marker.pad.b}}).descendants(),I=1/0,F=-1/0;P.forEach((function(e){var t=e.depth;t>=O._maxDepth?(e.x0=e.x1=(e.x0+e.x1)/2,e.y0=e.y1=(e.y0+e.y1)/2):(I=Math.min(I,t),F=Math.max(F,t))})),p=p.data(P,u.getPtId),O._maxVisibleLayers=isFinite(F)?F-I+1:0,p.enter().append("g").classed("slice",!0),k(p,h,{},[g,v],x),p.order();var z=null;if(A&&M){var j=u.getPtId(M);p.each((function(e){null===z&&u.getPtId(e)===j&&(z={x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1})}))}var B=function(){return z||{x0:0,x1:g,y0:0,y1:v}},U=p;return A&&(U=U.transition().each("end",(function(){var t=r.select(this);u.setSliceCursor(t,e,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})}))),U.each((function(s){var p=u.isHeader(s,O);s._x0=y(s.x0),s._x1=y(s.x1),s._y0=b(s.y0),s._y1=b(s.y1),s._hoverX=y(s.x1-O.marker.pad.r),s._hoverY=b(L?s.y1-O.marker.pad.b/2:s.y0+O.marker.pad.t/2);var m=r.select(this),k=i.ensureSingle(m,"path","surface",(function(e){e.style("pointer-events",S?"none":"all")}));A?k.transition().attrTween("d",(function(e){var t=E(e,h,B(),[g,v]);return function(e){return x(t(e))}})):k.attr("d",x),m.call(f,n,e,t,{styleOne:l,eventDataKeys:c.eventDataKeys,transitionTime:c.CLICK_TRANSITION_TIME,transitionEasing:c.CLICK_TRANSITION_EASING}).call(u.setSliceCursor,e,{isTransitioning:e._transitioning}),k.call(l,s,O,e,{hovered:!1}),s.x0===s.x1||s.y0===s.y1?s._text="":s._text=p?D?"":u.getPtLabel(s)||"":d(s,n,O,t,C)||"";var M=i.ensureSingle(m,"g","slicetext"),P=i.ensureSingle(M,"text","",(function(e){e.attr("data-notex",1)})),I=i.ensureUniformFontSize(e,u.determineTextFont(O,s,C.font)),F=s._text||" ",z=p&&-1===F.indexOf("<br>");P.text(F).classed("slicetext",!0).attr("text-anchor",N?"end":R||z?"start":"middle").call(a.font,I).call(o.convertToTspans,e),s.textBB=a.bBox(P.node()),s.transform=_(s,{fontSize:I.size,isHeader:p}),s.transform.fontSize=I.size,A?P.transition().attrTween("transform",(function(e){var t=T(e,h,B(),[g,v]);return function(e){return w(t(e))}})):P.attr("transform",w(s))})),z}},76703:e=>{"use strict";e.exports=function e(t,n,r){var i;r.swapXY&&(i=t.x0,t.x0=t.y0,t.y0=i,i=t.x1,t.x1=t.y1,t.y1=i),r.flipX&&(i=t.x0,t.x0=n[0]-t.x1,t.x1=n[0]-i),r.flipY&&(i=t.y0,t.y0=n[1]-t.y1,t.y1=n[1]-i);var a=t.children;if(a)for(var o=0;o<a.length;o++)e(a[o],n,r)}},28031:(e,t,n)=>{"use strict";e.exports={moduleType:"trace",name:"treemap",basePlotModule:n(70446),categories:[],animatable:!0,attributes:n(61694),layoutAttributes:n(30365),supplyDefaults:n(48553),supplyLayoutDefaults:n(33034),calc:n(47706)._,crossTraceCalc:n(47706).t,plot:n(5544),style:n(12802).style,colorbar:n(83304),meta:{description:["Visualize hierarchal data from leaves (and/or outer branches) towards root","with rectangles. The treemap sectors are determined by the entries in","*labels* or *ids* and in *parents*."].join(" ")}}},30365:e=>{"use strict";e.exports={treemapcolorway:{valType:"colorlist",editType:"calc",description:["Sets the default treemap slice colors. Defaults to the main","`colorway` used for trace colors. If you specify a new","list here it can still be extended with lighter and darker","colors, see `extendtreemapcolors`."].join(" ")},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc",description:["If `true`, the treemap slice colors (whether given by `treemapcolorway` or","inherited from `colorway`) will be extended to three times its","original length by first repeating every color 20% lighter then","each color 20% darker. This is intended to reduce the likelihood","of reusing the same color when you have many slices, but you can","set `false` to disable.","Colors provided in the trace, using `marker.colors`, are never","extended."].join(" ")}}},33034:(e,t,n)=>{"use strict";var r=n(56319),i=n(30365);e.exports=function(e,t){function n(n,a){return r.coerce(e,t,i,n,a)}n("treemapcolorway",t.colorway),n("extendtreemapcolors")}},66701:(e,t,n)=>{"use strict";var r=n(73351),i=n(76703);e.exports=function(e,t,n){var a,o=n.flipX,s=n.flipY,l="dice-slice"===n.packing,c=n.pad[s?"bottom":"top"],u=n.pad[o?"right":"left"],f=n.pad[o?"left":"right"],d=n.pad[s?"top":"bottom"];l&&(a=u,u=c,c=a,a=f,f=d,d=a);var h=r.treemap().tile(function(e,t){switch(e){case"squarify":return r.treemapSquarify.ratio(t);case"binary":return r.treemapBinary;case"dice":return r.treemapDice;case"slice":return r.treemapSlice;default:return r.treemapSliceDice}}(n.packing,n.squarifyratio)).paddingInner(n.pad.inner).paddingLeft(u).paddingRight(f).paddingTop(c).paddingBottom(d).size(l?[t[1],t[0]]:t)(e);return(l||o||s)&&i(h,t,{swapXY:l,flipX:o,flipY:s}),h}},5544:(e,t,n)=>{"use strict";var r=n(77057),i=n(8518);e.exports=function(e,t,n,a){return r(e,t,n,a,{type:"treemap",drawDescendants:i})}},89879:(e,t,n)=>{"use strict";var r=n(93268),i=n(72767).interpolate,a=n(4230),o=n(56319),s=n(16461).TEXTPAD,l=n(31061).toMoveInsideBar,c=n(11464).recordMinTextSize,u=n(11874),f=n(1184);function d(e){return a.isHierarchyRoot(e)?"":a.getPtId(e)}e.exports=function(e,t,n,h,p){var m=e._fullLayout,g=t[0],v=g.trace,y="icicle"===v.type,b=g.hierarchy,x=a.findEntryWithLevel(b,v.level),_=r.select(n),w=_.selectAll("g.pathbar"),A=_.selectAll("g.slice");if(!x)return w.remove(),void A.remove();var k=a.isHierarchyRoot(x),E=!m.uniformtext.mode&&a.hasTransition(h),T=a.getMaxDepth(v),M=m._size,S=v.domain,C=M.w*(S.x[1]-S.x[0]),O=M.h*(S.y[1]-S.y[0]),R=C,N=v.pathbar.thickness,L=v.marker.line.width+u.gapWithPathbar,D=v.pathbar.visible?v.pathbar.side.indexOf("bottom")>-1?O+L:-(N+L):0,P={x0:R,x1:R,y0:D,y1:D+N},I=function(e,t,n){var r=v.tiling.pad,i=function(e){return e-r<=t.x0},a=function(e){return e+r>=t.x1},o=function(e){return e-r<=t.y0},s=function(e){return e+r>=t.y1};return e.x0===t.x0&&e.x1===t.x1&&e.y0===t.y0&&e.y1===t.y1?{x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1}:{x0:i(e.x0-r)?0:a(e.x0-r)?n[0]:e.x0,x1:i(e.x1+r)?0:a(e.x1+r)?n[0]:e.x1,y0:o(e.y0-r)?0:s(e.y0-r)?n[1]:e.y0,y1:o(e.y1+r)?0:s(e.y1+r)?n[1]:e.y1}},F=null,z={},j={},B=null,U=function(e,t){return t?z[d(e)]:j[d(e)]},$=function(e,t,n,r){if(t)return z[d(b)]||P;var i=j[v.level]||n;return function(e){return e.data.depth-x.data.depth<T}(e)?I(e,i,r):{}};g.hasMultipleRoots&&k&&T++,v._maxDepth=T,v._backgroundColor=m.paper_bgcolor,v._entryDepth=x.data.depth,v._atRootLevel=k;var q=-C/2+M.l+M.w*(S.x[1]+S.x[0])/2,H=-O/2+M.t+M.h*(1-(S.y[1]+S.y[0])/2),V=function(e){return q+e},W=function(e){return H+e},G=W(0),Y=V(0),X=function(e){return Y+e},K=function(e){return G+e};function Z(e,t){return e+","+t}var J=X(0),Q=function(e){e.x=Math.max(J,e.x)},ee=v.pathbar.edgeshape,te=v[y?"tiling":"marker"].pad,ne=function(e){return-1!==v.textposition.indexOf(e)},re=ne("top"),ie=ne("left"),ae=ne("right"),oe=ne("bottom"),se=function(e,t){var n=e.x0,r=e.x1,i=e.y0,a=e.y1,o=e.textBB,u=re||t.isHeader&&!oe?"start":oe?"end":"middle",f=ne("right"),d=ne("left")||t.onPathbar?-1:f?1:0;if(t.isHeader){if((n+=(y?te:te.l)-s)>=(r-=(y?te:te.r)-s)){var h=(n+r)/2;n=h,r=h}var p;oe?i<(p=a-(y?te:te.b))&&p<a&&(i=p):i<(p=i+(y?te:te.t))&&p<a&&(a=p)}var g=l(n,r,i,a,o,{isHorizontal:!1,constrained:!0,angle:0,anchor:u,leftToRight:d});return g.fontSize=t.fontSize,g.targetX=V(g.targetX),g.targetY=W(g.targetY),isNaN(g.targetX)||isNaN(g.targetY)?{}:(n!==r&&i!==a&&c(v.type,g,m),{scale:g.scale,rotate:g.rotate,textX:g.textX,textY:g.textY,anchorX:g.anchorX,anchorY:g.anchorY,targetX:g.targetX,targetY:g.targetY})},le=function(e,t){for(var n,r=0,i=e;!n&&r<T;)r++,(i=i.parent)?n=U(i,t):r=T;return n||{}},ce=function(e,t,n,r,a){var s,l=U(e,t);if(l)s=l;else if(t)s=P;else if(F)if(e.parent){var c=B||n;c&&!t?s=I(e,c,r):(s={},o.extendFlat(s,le(e,t)))}else s=o.extendFlat({},e),y&&("h"===a.orientation?a.flipX?s.x0=e.x1:s.x1=0:a.flipY?s.y0=e.y1:s.y1=0);else s={};return i(s,{x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1})},ue=function(e,t,n,r){var s=U(e,t),l={},u=$(e,t,n,r);o.extendFlat(l,{transform:se({x0:u.x0,x1:u.x1,y0:u.y0,y1:u.y1,textBB:e.textBB,_text:e._text},{isHeader:a.isHeader(e,v)})}),s?l=s:e.parent&&o.extendFlat(l,le(e,t));var f=e.transform;return e.x0!==e.x1&&e.y0!==e.y1&&c(v.type,f,m),i(l,{transform:{scale:f.scale,rotate:f.rotate,textX:f.textX,textY:f.textY,anchorX:f.anchorX,anchorY:f.anchorY,targetX:f.targetX,targetY:f.targetY}})},fe=function(e,t,n,a,o){var s=a[0],l=a[1];E?e.exit().transition().each((function(){var e=r.select(this);e.select("path.surface").transition().attrTween("d",(function(e){var n=function(e,t,n,r){var a,o=U(e,t);if(t)a=P;else{var s=U(x,t);a=s?I(e,s,r):{}}return i(o,a)}(e,t,0,[s,l]);return function(e){return o(n(e))}})),e.select("g.slicetext").attr("opacity",0)})).remove():e.exit().remove()},de=function(e){var t=e.transform;return e.x0!==e.x1&&e.y0!==e.y1&&c(v.type,t,m),o.getTextTransform({textX:t.textX,textY:t.textY,anchorX:t.anchorX,anchorY:t.anchorY,targetX:t.targetX,targetY:t.targetY,scale:t.scale,rotate:t.rotate})};E&&(w.each((function(e){z[d(e)]={x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1},e.transform&&(z[d(e)].transform={textX:e.transform.textX,textY:e.transform.textY,anchorX:e.transform.anchorX,anchorY:e.transform.anchorY,targetX:e.transform.targetX,targetY:e.transform.targetY,scale:e.transform.scale,rotate:e.transform.rotate})})),A.each((function(e){j[d(e)]={x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1},e.transform&&(j[d(e)].transform={textX:e.transform.textX,textY:e.transform.textY,anchorX:e.transform.anchorX,anchorY:e.transform.anchorY,targetX:e.transform.targetX,targetY:e.transform.targetY,scale:e.transform.scale,rotate:e.transform.rotate}),!F&&a.isEntry(e)&&(F=e)}))),B=p(e,t,x,A,{width:C,height:O,viewX:V,viewY:W,pathSlice:function(e){var t=V(e.x0),n=V(e.x1),r=W(e.y0),i=W(e.y1),a=n-t,o=i-r;if(!a||!o)return"";var s=v.marker.cornerradius||0,l=Math.min(s,a/2,o/2);l&&e.data&&e.data.data&&e.data.data.label&&(re&&(l=Math.min(l,te.t)),ie&&(l=Math.min(l,te.l)),ae&&(l=Math.min(l,te.r)),oe&&(l=Math.min(l,te.b)));var c=function(e,t){return l?"a"+Z(l,l)+" 0 0 1 "+Z(e,t):""};return"M"+Z(t,r+l)+c(l,-l)+"L"+Z(n-l,r)+c(l,l)+"L"+Z(n,i-l)+c(-l,l)+"L"+Z(t+l,i)+c(-l,-l)+"Z"},toMoveInsideSlice:se,prevEntry:F,makeUpdateSliceInterpolator:ce,makeUpdateTextInterpolator:ue,handleSlicesExit:fe,hasTransition:E,strTransform:de}),v.pathbar.visible?f(e,t,x,w,{barDifY:D,width:R,height:N,viewX:X,viewY:K,pathSlice:function(e){var t=X(Math.max(Math.min(e.x0,e.x0),0)),n=X(Math.min(Math.max(e.x1,e.x1),R)),r=K(e.y0),i=K(e.y1),a=N/2,o={},s={};o.x=t,s.x=n,o.y=s.y=(r+i)/2;var l={x:t,y:r},c={x:n,y:r},u={x:n,y:i},f={x:t,y:i};return">"===ee?(l.x-=a,c.x-=a,u.x-=a,f.x-=a):"/"===ee?(u.x-=a,f.x-=a,o.x-=a/2,s.x-=a/2):"\\"===ee?(l.x-=a,c.x-=a,o.x-=a/2,s.x-=a/2):"<"===ee&&(o.x-=a,s.x-=a),Q(l),Q(f),Q(o),Q(c),Q(u),Q(s),"M"+Z(l.x,l.y)+"L"+Z(c.x,c.y)+"L"+Z(s.x,s.y)+"L"+Z(u.x,u.y)+"L"+Z(f.x,f.y)+"L"+Z(o.x,o.y)+"Z"},toMoveInsideSlice:se,makeUpdateSliceInterpolator:ce,makeUpdateTextInterpolator:ue,handleSlicesExit:fe,hasTransition:E,strTransform:de}):w.remove()}},12802:(e,t,n)=>{"use strict";var r=n(93268),i=n(53408),a=n(56319),o=n(4230),s=n(11464).resizeText,l=n(57129);function c(e,t,n,r,s){var c,u,f=(s||{}).hovered,d=t.data.data,h=d.i,p=d.color,m=o.isHierarchyRoot(t),g=1;if(f)c=n._hovered.marker.line.color,u=n._hovered.marker.line.width;else if(m&&p===n.root.color)g=100,c="rgba(0,0,0,0)",u=0;else if(c=a.castOption(n,h,"marker.line.color")||i.defaultLine,u=a.castOption(n,h,"marker.line.width")||0,!n._hasColorscale&&!t.onPathbar){var v=n.marker.depthfade;if(v){var y,b=i.combine(i.addOpacity(n._backgroundColor,.75),p);if(!0===v){var x=o.getMaxDepth(n);y=isFinite(x)?o.isLeaf(t)?0:n._maxVisibleLayers-(t.data.depth-n._entryDepth):t.data.height+1}else y=t.data.depth-n._entryDepth,n._atRootLevel||y++;if(y>0)for(var _=0;_<y;_++){var w=.5*_/y;p=i.combine(i.addOpacity(b,w),p)}}}e.call(l,t,n,r,p).style("stroke-width",u).call(i.stroke,c).style("opacity",g)}e.exports={style:function(e){var t=e._fullLayout._treemaplayer.selectAll(".trace");s(e,t,"treemap"),t.each((function(t){var n=r.select(this),i=t[0].trace;n.style("opacity",i.opacity),n.selectAll("path.surface").each((function(t){r.select(this).call(c,t,i,e,{hovered:!1})}))}))},styleOne:c}},57529:(e,t,n)=>{"use strict";var r=n(10179),i=n(86395).extendFlat,a=n(66010).axisHoverFormat;e.exports={y:r.y,x:r.x,x0:r.x0,y0:r.y0,xhoverformat:a("x"),yhoverformat:a("y"),name:i({},r.name,{description:["Sets the trace name.","The trace name appears as the legend item and on hover.","For violin traces, the name will also be used for the position","coordinate, if `x` and `x0` (`y` and `y0` if horizontal) are","missing and the position axis is categorical.","Note that the trace name is also used as a default value","for attribute `scalegroup` (please see its description for details)."].join(" ")}),orientation:i({},r.orientation,{description:["Sets the orientation of the violin(s).","If *v* (*h*), the distribution is visualized along","the vertical (horizontal)."].join(" ")}),bandwidth:{valType:"number",min:0,editType:"calc",description:["Sets the bandwidth used to compute the kernel density estimate.","By default, the bandwidth is determined by Silverman's rule of thumb."].join(" ")},scalegroup:{valType:"string",dflt:"",editType:"calc",description:["If there are multiple violins that should be sized according to","to some metric (see `scalemode`), link them by providing a non-empty group id here","shared by every trace in the same group.","If a violin's `width` is undefined, `scalegroup` will default to the trace's name.","In this case, violins with the same names will be linked together"].join(" ")},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc",description:["Sets the metric by which the width of each violin is determined.","*width* means each violin has the same (max) width","*count* means the violins are scaled by the number of sample points making","up each violin."].join(" ")},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc",description:["Sets the method by which the span in data space where the density function will be computed.","*soft* means the span goes from the sample's minimum value minus two bandwidths","to the sample's maximum value plus two bandwidths.","*hard* means the span goes from the sample's minimum to its maximum value.","For custom span settings, use mode *manual* and fill in the `span` attribute."].join(" ")},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc",description:["Sets the span in data space for which the density function will be computed.","Has an effect only when `spanmode` is set to *manual*."].join(" ")},line:{color:{valType:"color",editType:"style",description:"Sets the color of line bounding the violin(s)."},width:{valType:"number",min:0,dflt:2,editType:"style",description:"Sets the width (in px) of line bounding the violin(s)."},editType:"plot"},fillcolor:r.fillcolor,points:i({},r.boxpoints,{description:["If *outliers*, only the sample points lying outside the whiskers","are shown","If *suspectedoutliers*, the outlier points are shown and","points either less than 4*Q1-3*Q3 or greater than 4*Q3-3*Q1","are highlighted (see `outliercolor`)","If *all*, all sample points are shown","If *false*, only the violins are shown with no sample points.","Defaults to *suspectedoutliers* when `marker.outliercolor` or","`marker.line.outliercolor` is set,","otherwise defaults to *outliers*."].join(" ")}),jitter:i({},r.jitter,{description:["Sets the amount of jitter in the sample points drawn.","If *0*, the sample points align along the distribution axis.","If *1*, the sample points are drawn in a random jitter of width","equal to the width of the violins."].join(" ")}),pointpos:i({},r.pointpos,{description:["Sets the position of the sample points in relation to the violins.","If *0*, the sample points are places over the center of the violins.","Positive (negative) values correspond to positions to the","right (left) for vertical violins and above (below) for horizontal violins."].join(" ")}),width:i({},r.width,{description:["Sets the width of the violin in data coordinates.","If *0* (default value) the width is automatically selected based on the positions","of other violin traces in the same subplot."].join(" ")}),marker:r.marker,text:r.text,hovertext:r.hovertext,hovertemplate:r.hovertemplate,quartilemethod:r.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot",description:["Determines if an miniature box plot is drawn inside the violins. "].join(" ")},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot",description:["Sets the width of the inner box plots relative to","the violins' width.","For example, with 1, the inner box plots are as wide as the violins."].join(" ")},fillcolor:{valType:"color",editType:"style",description:"Sets the inner box plot fill color."},line:{color:{valType:"color",editType:"style",description:"Sets the inner box plot bounding line color."},width:{valType:"number",min:0,editType:"style",description:"Sets the inner box plot bounding line width."},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot",description:["Determines if a line corresponding to the sample's mean is shown","inside the violins.","If `box.visible` is turned on, the mean line is drawn inside the inner box.","Otherwise, the mean line is drawn from one side of the violin to other."].join(" ")},color:{valType:"color",editType:"style",description:"Sets the mean line color."},width:{valType:"number",min:0,editType:"style",description:"Sets the mean line width."},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc",description:["Determines on which side of the position value the density function making up","one half of a violin is plotted.","Useful when comparing two violin traces under *overlay* mode, where one trace","has `side` set to *positive* and the other to *negative*."].join(" ")},offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup,selected:r.selected,unselected:r.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style",description:["Do the hover effects highlight individual violins","or sample points or the kernel density estimate or any combination of them?"].join(" ")},zorder:r.zorder}},89629:(e,t,n)=>{"use strict";var r=n(56319),i=n(596),a=n(39939),o=n(60907),s=n(33351).BADNUM;function l(e,t,n){var i=t.max-t.min;if(!i)return e.bandwidth?e.bandwidth:0;if(e.bandwidth)return Math.max(e.bandwidth,i/1e4);var a=n.length,o=r.stdev(n,a-1,t.mean);return Math.max(function(e,t,n){return 1.059*Math.min(t,n/1.349)*Math.pow(e,-.2)}(a,o,t.q3-t.q1),i/100)}function c(e,t,n,r){var a,o=e.spanmode,l=e.span||[],c=[t.min,t.max],u=[t.min-2*r,t.max+2*r];function f(r){var i=l[r],a="multicategory"===n.type?n.r2c(i):n.d2c(i,0,e[t.valLetter+"calendar"]);return a===s?u[r]:a}var d={type:"linear",range:a="soft"===o?u:"hard"===o?c:[f(0),f(1)]};return i.setConvert(d),d.cleanRange(),a}e.exports=function(e,t){var n=a(e,t);if(n[0].t.empty)return n;for(var s=e._fullLayout,u=i.getFromId(e,t["h"===t.orientation?"xaxis":"yaxis"]),f=1/0,d=-1/0,h=0,p=0,m=0;m<n.length;m++){var g=n[m],v=g.pts.map(o.extractVal),y=g.bandwidth=l(t,g,v),b=g.span=c(t,g,u,y);if(g.min===g.max&&0===y)b=g.span=[g.min,g.max],g.density=[{v:1,t:b[0]}],g.bandwidth=y,h=Math.max(h,1);else{var x=b[1]-b[0],_=Math.ceil(x/(y/3)),w=x/_;if(!isFinite(w)||!isFinite(_))return r.error("Something went wrong with computing the violin span"),n[0].t.empty=!0,n;var A=o.makeKDE(g,t,v);g.density=new Array(_);for(var k=0,E=b[0];E<b[1]+w/2;k++,E+=w){var T=A(E);g.density[k]={v:T,t:E},h=Math.max(h,T)}}p=Math.max(p,v.length),f=Math.min(f,b[0]),d=Math.max(d,b[1])}var M=i.findExtremes(u,[f,d],{padded:!0});if(t._extremes[u._id]=M,t.width)n[0].t.maxKDE=h;else{var S=s._violinScaleGroupStats,C=t.scalegroup,O=S[C];O?(O.maxKDE=Math.max(O.maxKDE,h),O.maxCount=Math.max(O.maxCount,p)):S[C]={maxKDE:h,maxCount:p}}return n[0].t.labels.kde=r._(e,"kde:"),n}},67774:(e,t,n)=>{"use strict";var r=n(25368).setPositionOffset,i=["v","h"];e.exports=function(e,t){for(var n=e.calcdata,a=t.xaxis,o=t.yaxis,s=0;s<i.length;s++){for(var l=i[s],c="h"===l?o:a,u=[],f=0;f<n.length;f++){var d=n[f],h=d[0].t,p=d[0].trace;!0!==p.visible||"violin"!==p.type||h.empty||p.orientation!==l||p.xaxis!==a._id||p.yaxis!==o._id||u.push(f)}r("violin",e,u,c)}}},10846:(e,t,n)=>{"use strict";var r=n(56319),i=n(53408),a=n(79556),o=n(57529);e.exports=function(e,t,n,s){function l(n,i){return r.coerce(e,t,o,n,i)}function c(n,i){return r.coerce2(e,t,o,n,i)}if(a.handleSampleDefaults(e,t,l,s),!1!==t.visible){l("bandwidth"),l("side"),l("width")||(l("scalegroup",t.name),l("scalemode"));var u,f=l("span");Array.isArray(f)&&(u="manual"),l("spanmode",u);var d=l("line.color",(e.marker||{}).color||n),h=l("line.width"),p=l("fillcolor",i.addOpacity(t.line.color,.5));a.handlePointsDefaults(e,t,l,{prefix:""});var m=c("box.width"),g=c("box.fillcolor",p),v=c("box.line.color",d),y=c("box.line.width",h);l("box.visible",Boolean(m||g||v||y))||(t.box={visible:!1});var b=c("meanline.color",d),x=c("meanline.width",h);l("meanline.visible",Boolean(b||x))||(t.meanline={visible:!1}),l("quartilemethod"),l("zorder")}}},60907:(e,t,n)=>{"use strict";var r=n(56319),i=function(e){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*e*e)};t.makeKDE=function(e,t,n){var r=n.length,a=i,o=e.bandwidth,s=1/(r*o);return function(e){for(var t=0,i=0;i<r;i++)t+=a((e-n[i])/o);return s*t}},t.getPositionOnKdePath=function(e,t,n){var i,a;"h"===t.orientation?(i="y",a="x"):(i="x",a="y");var o=r.findPointOnPath(e.path,n,a,{pathLength:e.pathLength}),s=e.posCenterPx,l=o[i];return[l,"both"===t.side?2*s-l:s]},t.getKdeValue=function(e,n,r){var i=e.pts.map(t.extractVal);return t.makeKDE(e,n,i)(r)/e.posDensityScale},t.extractVal=function(e){return e.v}},40640:(e,t,n)=>{"use strict";var r=n(53408),i=n(56319),a=n(596),o=n(28910),s=n(60907);e.exports=function(e,t,n,l,c){c||(c={});var u,f,d=c.hoverLayer,h=e.cd,p=h[0].trace,m=p.hoveron,g=-1!==m.indexOf("violins"),v=-1!==m.indexOf("kde"),y=[];if(g||v){var b=o.hoverOnBoxes(e,t,n,l);if(v&&b.length>0){var x,_,w,A,k,E=e.xa,T=e.ya;"h"===p.orientation?(k=t,x="y",w=T,_="x",A=E):(k=n,x="x",w=E,_="y",A=T);var M=h[e.index];if(k>=M.span[0]&&k<=M.span[1]){var S=i.extendFlat({},e),C=A.c2p(k,!0),O=s.getKdeValue(M,p,k),R=s.getPositionOnKdePath(M,p,C),N=w._offset,L=w._length;S[x+"0"]=R[0],S[x+"1"]=R[1],S[_+"0"]=S[_+"1"]=C,S[_+"Label"]=_+": "+a.hoverLabelText(A,k,p[_+"hoverformat"])+", "+h[0].t.labels.kde+" "+O.toFixed(3);for(var D=0,P=0;P<b.length;P++)if("med"===b[P].attr){D=P;break}S.spikeDistance=b[D].spikeDistance;var I=x+"Spike";S[I]=b[D][I],b[D].spikeDistance=void 0,b[D][I]=void 0,S.hovertemplate=!1,y.push(S),(f={})[x+"1"]=i.constrain(N+R[0],N,N+L),f[x+"2"]=i.constrain(N+R[1],N,N+L),f[_+"1"]=f[_+"2"]=A._offset+C}}g&&(y=y.concat(b))}-1!==m.indexOf("points")&&(u=o.hoverOnPoints(e,t,n));var F=d.selectAll(".violinline-"+p.uid).data(f?[0]:[]);return F.enter().append("line").classed("violinline-"+p.uid,!0).attr("stroke-width",1.5),F.exit().remove(),F.attr(f).call(r.stroke,e.color),"closest"===l?u?[u]:y:u?(y.push(u),y):y}},6490:(e,t,n)=>{"use strict";e.exports={attributes:n(57529),layoutAttributes:n(19316),supplyDefaults:n(10846),crossTraceDefaults:n(79556).crossTraceDefaults,supplyLayoutDefaults:n(71107),calc:n(89629),crossTraceCalc:n(67774),plot:n(33683),style:n(57907),styleOnSelect:n(93114).styleOnSelect,hoverPoints:n(40640),selectPoints:n(79214),moduleType:"trace",name:"violin",basePlotModule:n(64125),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{description:["In vertical (horizontal) violin plots,","statistics are computed using `y` (`x`) values.","By supplying an `x` (`y`) array, one violin per distinct x (y) value","is drawn","If no `x` (`y`) {array} is provided, a single violin is drawn.","That violin position is then positioned with","with `name` or with `x0` (`y0`) if provided."].join(" ")}}},19316:(e,t,n)=>{"use strict";var r=n(71946),i=n(56319).extendFlat;e.exports={violinmode:i({},r.boxmode,{description:["Determines how violins at the same location coordinate","are displayed on the graph.","If *group*, the violins are plotted next to one another","centered around the shared location.","If *overlay*, the violins are plotted over one another,","you might need to set *opacity* to see them multiple violins.","Has no effect on traces that have *width* set."].join(" ")}),violingap:i({},r.boxgap,{description:["Sets the gap (in plot fraction) between violins of","adjacent location coordinates.","Has no effect on traces that have *width* set."].join(" ")}),violingroupgap:i({},r.boxgroupgap,{description:["Sets the gap (in plot fraction) between violins of","the same location coordinate.","Has no effect on traces that have *width* set."].join(" ")})}},71107:(e,t,n)=>{"use strict";var r=n(56319),i=n(19316),a=n(77405);e.exports=function(e,t,n){a._supply(e,t,n,(function(n,a){return r.coerce(e,t,i,n,a)}),"violin")}},33683:(e,t,n)=>{"use strict";var r=n(93268),i=n(56319),a=n(14797),o=n(68077),s=n(87639),l=n(60907);e.exports=function(e,t,n,c){var u=e._context.staticPlot,f=e._fullLayout,d=t.xaxis,h=t.yaxis;function p(e,t){var n=s(e,{xaxis:d,yaxis:h,trace:t,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return a.smoothopen(n[0],1)}i.makeTraceGroups(c,n,"trace violins").each((function(e){var n=r.select(this),a=e[0],s=a.t,c=a.trace;if(!0!==c.visible||s.empty)n.remove();else{var m=s.bPos,g=s.bdPos,v=t[s.valLetter+"axis"],y=t[s.posLetter+"axis"],b="both"===c.side,x=b||"positive"===c.side,_=b||"negative"===c.side,w=n.selectAll("path.violin").data(i.identity);w.enter().append("path").style("vector-effect",u?"none":"non-scaling-stroke").attr("class","violin"),w.exit().remove(),w.each((function(e){var t,n,i,a,o,l,u,d,h=r.select(this),w=e.density,A=w.length,k=y.c2l(e.pos+m,!0),E=y.l2p(k);if(c.width)t=s.maxKDE/g;else{var T=f._violinScaleGroupStats[c.scalegroup];t="count"===c.scalemode?T.maxKDE/g*(T.maxCount/e.pts.length):T.maxKDE/g}if(x){for(u=new Array(A),o=0;o<A;o++)(d=u[o]={})[s.posLetter]=k+w[o].v/t,d[s.valLetter]=v.c2l(w[o].t,!0);n=p(u,c)}if(_){for(u=new Array(A),l=0,o=A-1;l<A;l++,o--)(d=u[l]={})[s.posLetter]=k-w[o].v/t,d[s.valLetter]=v.c2l(w[o].t,!0);i=p(u,c)}if(b)a=n+"L"+i.substr(1)+"Z";else{var M=[E,v.c2p(w[0].t)],S=[E,v.c2p(w[A-1].t)];"h"===c.orientation&&(M.reverse(),S.reverse()),a=x?"M"+M+"L"+n.substr(1)+"L"+S:"M"+S+"L"+i.substr(1)+"L"+M}h.attr("d",a),e.posCenterPx=E,e.posDensityScale=t*g,e.path=h.node(),e.pathLength=e.path.getTotalLength()/(b?2:1)}));var A,k,E,T=c.box,M=T.width,S=(T.line||{}).width;b?(A=g*M,k=0):x?(A=[0,g*M/2],k=S*{x:1,y:-1}[s.posLetter]):(A=[g*M/2,0],k=S*{x:-1,y:1}[s.posLetter]),o.plotBoxAndWhiskers(n,{pos:y,val:v},c,{bPos:m,bdPos:A,bPosPxOffset:k}),o.plotBoxMean(n,{pos:y,val:v},c,{bPos:m,bdPos:A,bPosPxOffset:k}),!c.box.visible&&c.meanline.visible&&(E=i.identity);var C=n.selectAll("path.meanline").data(E||[]);C.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",u?"none":"non-scaling-stroke"),C.exit().remove(),C.each((function(e){var t=v.c2p(e.mean,!0),n=l.getPositionOnKdePath(e,c,t);r.select(this).attr("d","h"===c.orientation?"M"+t+","+n[0]+"V"+n[1]:"M"+n[0]+","+t+"H"+n[1])})),o.plotPoints(n,{x:d,y:h},c,s)}}))}},57907:(e,t,n)=>{"use strict";var r=n(93268),i=n(53408),a=n(93114).stylePoints;e.exports=function(e){var t=r.select(e).selectAll("g.trace.violins");t.style("opacity",(function(e){return e[0].trace.opacity})),t.each((function(t){var n=t[0].trace,o=r.select(this),s=n.box||{},l=s.line||{},c=n.meanline||{},u=c.width;o.selectAll("path.violin").style("stroke-width",n.line.width+"px").call(i.stroke,n.line.color).call(i.fill,n.fillcolor),o.selectAll("path.box").style("stroke-width",l.width+"px").call(i.stroke,l.color).call(i.fill,s.fillcolor);var f={"stroke-width":u+"px","stroke-dasharray":2*u+"px,"+u+"px"};o.selectAll("path.mean").style(f).call(i.stroke,c.color),o.selectAll("path.meanline").style(f).call(i.stroke,c.color),a(o,n,e)}))}},65140:(e,t)=>{"use strict";t.z=function(e,t){for(var n,r,i=0;i<e.length&&(n=e[i])!==t;i++)n._indexToPoints&&!1!==n.enabled&&(r=n._indexToPoints);var a=r?function(e){return r[e]}:function(e){return[e]};return a}},63725:(e,t,n)=>{"use strict";var r=n(56319),i=n(596),a=n(65140).z,o=n(33351).BADNUM;t.moduleType="transform",t.name="sort",t.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether this sort transform is enabled or disabled."].join(" ")},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc",description:["Sets the target by which the sort transform is applied.","If a string, *target* is assumed to be a reference to a data array","in the parent trace object.","To sort about nested variables, use *.* to access them.","For example, set `target` to *marker.size* to sort","about the marker size array.","If an array, *target* is then the data array by which","the sort transform is applied."].join(" ")},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc",description:["Sets the sort transform order."].join(" ")},editType:"calc"},t.supplyDefaults=function(e){var n={};function i(i,a){return r.coerce(e,n,t.attributes,i,a)}return i("enabled")&&(i("target"),i("order")),n},t.calcTransform=function(e,t,n){if(n.enabled){var s=r.getTargetArray(t,n);if(s){var l=n.target,c=s.length;t._length&&(c=Math.min(c,t._length));var u,f,d=t._arrayAttrs,h=function(e,t,n,r){var i,a=new Array(r),s=new Array(r);for(i=0;i<r;i++)a[i]={v:t[i],i};for(a.sort(function(e,t){switch(e.order){case"ascending":return function(e,n){var r=t(e.v),i=t(n.v);return r===o?1:i===o?-1:r-i};case"descending":return function(e,n){var r=t(e.v),i=t(n.v);return r===o?1:i===o?-1:i-r}}}(e,n)),i=0;i<r;i++)s[i]=a[i].i;return s}(n,s,i.getDataToCoordFunc(e,t,l,s),c),p=a(t.transforms,n),m={};for(u=0;u<d.length;u++){var g=r.nestedProperty(t,d[u]),v=g.get(),y=new Array(c);for(f=0;f<c;f++)y[f]=v[h[f]];g.set(y)}for(f=0;f<c;f++)m[f]=p(h[f]);n._indexToPoints=m,t._length=c}}}},96911:(e,t)=>{"use strict";t.version="2.35.2"},2528:e=>{!function(){var t={1964:function(e,t,n){e.exports={alpha_shape:n(3502),convex_hull:n(7352),delaunay_triangulate:n(7642),gl_cone3d:n(6405),gl_error3d:n(9165),gl_heatmap2d:n(2510),gl_line3d:n(5714),gl_mesh3d:n(7201),gl_plot2d:n(1850),gl_plot3d:n(4100),gl_pointcloud2d:n(4696),gl_scatter3d:n(8418),gl_select_box:n(3161),gl_spikes2d:n(4098),gl_streamtube3d:n(7815),gl_surface3d:n(9499),ndarray:n(9618),ndarray_linear_interpolate:n(4317)}},4793:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function i(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}function a(e,t,n){return t=s(t),function(e,t){if(t&&("object"==c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,o()?Reflect.construct(t,n||[],s(e).constructor):t.apply(e,n))}function o(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(o=function(){return!!e})()}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}var u=n(7507),f=n(3778),d="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.hp=m,t.IS=50;var h=2147483647;function p(e){if(e>h)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,m.prototype),t}function m(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return y(e)}return g(e,t,n)}function g(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!m.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|w(e,t),r=p(n),i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(ne(e,Uint8Array)){var t=new Uint8Array(e);return x(t.buffer,t.byteOffset,t.byteLength)}return b(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+c(e));if(ne(e,ArrayBuffer)||e&&ne(e.buffer,ArrayBuffer))return x(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(ne(e,SharedArrayBuffer)||e&&ne(e.buffer,SharedArrayBuffer)))return x(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return m.from(r,t,n);var i=function(e){if(m.isBuffer(e)){var t=0|_(e.length),n=p(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||re(e.length)?p(0):b(e);if("Buffer"===e.type&&Array.isArray(e.data))return b(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return m.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+c(e))}function v(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function y(e){return v(e),p(e<0?0:0|_(e))}function b(e){for(var t=e.length<0?0:0|_(e.length),n=p(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function x(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,m.prototype),r}function _(e){if(e>=h)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h.toString(16)+" bytes");return 0|e}function w(e,t){if(m.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ne(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+c(e));var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return Q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return ee(e).length;default:if(i)return r?-1:Q(e).length;t=(""+t).toLowerCase(),i=!0}}function A(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return F(this,t,n);case"utf8":case"utf-8":return L(this,t,n);case"ascii":return P(this,t,n);case"latin1":case"binary":return I(this,t,n);case"base64":return N(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function k(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function E(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),re(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=m.from(t,r)),m.isBuffer(t))return 0===t.length?-1:T(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):T(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function T(e,t,n,r,i){var a,o=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,l/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var u=-1;for(a=n;a<s;a++)if(c(e,a)===c(t,-1===u?0:a-u)){if(-1===u&&(u=a),a-u+1===l)return u*o}else-1!==u&&(a-=a-u),u=-1}else for(n+l>s&&(n=s-l),a=n;a>=0;a--){for(var f=!0,d=0;d<l;d++)if(c(e,a+d)!==c(t,d)){f=!1;break}if(f)return a}return-1}function M(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a,o=t.length;for(r>o/2&&(r=o/2),a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(re(s))return a;e[n+a]=s}return a}function S(e,t,n,r){return te(Q(t,e.length-n),e,n,r)}function C(e,t,n,r){return te(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function O(e,t,n,r){return te(ee(t),e,n,r)}function R(e,t,n,r){return te(function(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function N(e,t,n){return 0===t&&n===e.length?u.fromByteArray(e):u.fromByteArray(e.slice(t,n))}function L(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a=e[i],o=null,s=a>239?4:a>223?3:a>191?2:1;if(i+s<=n){var l=void 0,c=void 0,u=void 0,f=void 0;switch(s){case 1:a<128&&(o=a);break;case 2:128==(192&(l=e[i+1]))&&(f=(31&a)<<6|63&l)>127&&(o=f);break;case 3:l=e[i+1],c=e[i+2],128==(192&l)&&128==(192&c)&&(f=(15&a)<<12|(63&l)<<6|63&c)>2047&&(f<55296||f>57343)&&(o=f);break;case 4:l=e[i+1],c=e[i+2],u=e[i+3],128==(192&l)&&128==(192&c)&&128==(192&u)&&(f=(15&a)<<18|(63&l)<<12|(63&c)<<6|63&u)>65535&&f<1114112&&(o=f)}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=s}return function(e){var t=e.length;if(t<=D)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=D));return n}(r)}m.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),m.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}}),Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}}),m.poolSize=8192,m.from=function(e,t,n){return g(e,t,n)},Object.setPrototypeOf(m.prototype,Uint8Array.prototype),Object.setPrototypeOf(m,Uint8Array),m.alloc=function(e,t,n){return function(e,t,n){return v(e),e<=0?p(e):void 0!==t?"string"==typeof n?p(e).fill(t,n):p(e).fill(t):p(e)}(e,t,n)},m.allocUnsafe=function(e){return y(e)},m.allocUnsafeSlow=function(e){return y(e)},m.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==m.prototype},m.compare=function(e,t){if(ne(e,Uint8Array)&&(e=m.from(e,e.offset,e.byteLength)),ne(t,Uint8Array)&&(t=m.from(t,t.offset,t.byteLength)),!m.isBuffer(e)||!m.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},m.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return m.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=m.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(ne(a,Uint8Array))i+a.length>r.length?(m.isBuffer(a)||(a=m.from(a)),a.copy(r,i)):Uint8Array.prototype.set.call(r,a,i);else{if(!m.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i)}i+=a.length}return r},m.byteLength=w,m.prototype._isBuffer=!0,m.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)k(this,t,t+1);return this},m.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)k(this,t,t+3),k(this,t+1,t+2);return this},m.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)k(this,t,t+7),k(this,t+1,t+6),k(this,t+2,t+5),k(this,t+3,t+4);return this},m.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?L(this,0,e):A.apply(this,arguments)},m.prototype.toLocaleString=m.prototype.toString,m.prototype.equals=function(e){if(!m.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===m.compare(this,e)},m.prototype.inspect=function(){var e="",n=t.IS;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},d&&(m.prototype[d]=m.prototype.inspect),m.prototype.compare=function(e,t,n,r,i){if(ne(e,Uint8Array)&&(e=m.from(e,e.offset,e.byteLength)),!m.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+c(e));if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(a,o),l=this.slice(r,i),u=e.slice(t,n),f=0;f<s;++f)if(l[f]!==u[f]){a=l[f],o=u[f];break}return a<o?-1:o<a?1:0},m.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},m.prototype.indexOf=function(e,t,n){return E(this,e,t,n,!0)},m.prototype.lastIndexOf=function(e,t,n){return E(this,e,t,n,!1)},m.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return M(this,e,t,n);case"utf8":case"utf-8":return S(this,e,t,n);case"ascii":case"latin1":case"binary":return C(this,e,t,n);case"base64":return O(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var D=4096;function P(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function I(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function F(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=ie[e[a]];return i}function z(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length-1;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function j(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function B(e,t,n,r,i,a){if(!m.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function U(e,t,n,r,i){X(t,r,i,e,n,7);var a=Number(t&BigInt(4294967295));e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a;var o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,n}function $(e,t,n,r,i){X(t,r,i,e,n,7);var a=Number(t&BigInt(4294967295));e[n+7]=a,a>>=8,e[n+6]=a,a>>=8,e[n+5]=a,a>>=8,e[n+4]=a;var o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=o,o>>=8,e[n+2]=o,o>>=8,e[n+1]=o,o>>=8,e[n]=o,n+8}function q(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function H(e,t,n,r,i){return t=+t,n>>>=0,i||q(e,0,n,4),f.write(e,t,n,r,23,4),n+4}function V(e,t,n,r,i){return t=+t,n>>>=0,i||q(e,0,n,8),f.write(e,t,n,r,52,8),n+8}m.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,m.prototype),r},m.prototype.readUintLE=m.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},m.prototype.readUintBE=m.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},m.prototype.readUint8=m.prototype.readUInt8=function(e,t){return e>>>=0,t||j(e,1,this.length),this[e]},m.prototype.readUint16LE=m.prototype.readUInt16LE=function(e,t){return e>>>=0,t||j(e,2,this.length),this[e]|this[e+1]<<8},m.prototype.readUint16BE=m.prototype.readUInt16BE=function(e,t){return e>>>=0,t||j(e,2,this.length),this[e]<<8|this[e+1]},m.prototype.readUint32LE=m.prototype.readUInt32LE=function(e,t){return e>>>=0,t||j(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},m.prototype.readUint32BE=m.prototype.readUInt32BE=function(e,t){return e>>>=0,t||j(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},m.prototype.readBigUInt64LE=ae((function(e){K(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Z(e,this.length-8);var r=t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24),i=this[++e]+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+n*Math.pow(2,24);return BigInt(r)+(BigInt(i)<<BigInt(32))})),m.prototype.readBigUInt64BE=ae((function(e){K(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Z(e,this.length-8);var r=t*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e],i=this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),m.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},m.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},m.prototype.readInt8=function(e,t){return e>>>=0,t||j(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},m.prototype.readInt16LE=function(e,t){e>>>=0,t||j(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},m.prototype.readInt16BE=function(e,t){e>>>=0,t||j(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},m.prototype.readInt32LE=function(e,t){return e>>>=0,t||j(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},m.prototype.readInt32BE=function(e,t){return e>>>=0,t||j(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},m.prototype.readBigInt64LE=ae((function(e){K(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Z(e,this.length-8);var r=this[e+4]+this[e+5]*Math.pow(2,8)+this[e+6]*Math.pow(2,16)+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24))})),m.prototype.readBigInt64BE=ae((function(e){K(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Z(e,this.length-8);var r=(t<<24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n)})),m.prototype.readFloatLE=function(e,t){return e>>>=0,t||j(e,4,this.length),f.read(this,e,!0,23,4)},m.prototype.readFloatBE=function(e,t){return e>>>=0,t||j(e,4,this.length),f.read(this,e,!1,23,4)},m.prototype.readDoubleLE=function(e,t){return e>>>=0,t||j(e,8,this.length),f.read(this,e,!0,52,8)},m.prototype.readDoubleBE=function(e,t){return e>>>=0,t||j(e,8,this.length),f.read(this,e,!1,52,8)},m.prototype.writeUintLE=m.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||B(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},m.prototype.writeUintBE=m.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||B(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},m.prototype.writeUint8=m.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,1,255,0),this[t]=255&e,t+1},m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},m.prototype.writeBigUInt64LE=ae((function(e){return U(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),m.prototype.writeBigUInt64BE=ae((function(e){return $(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),m.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);B(this,e,t,n,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o|0)-s&255;return t+n},m.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);B(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o|0)-s&255;return t+n},m.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},m.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},m.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},m.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},m.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},m.prototype.writeBigInt64LE=ae((function(e){return U(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),m.prototype.writeBigInt64BE=ae((function(e){return $(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),m.prototype.writeFloatLE=function(e,t,n){return H(this,e,t,!0,n)},m.prototype.writeFloatBE=function(e,t,n){return H(this,e,t,!1,n)},m.prototype.writeDoubleLE=function(e,t,n){return V(this,e,t,!0,n)},m.prototype.writeDoubleBE=function(e,t,n){return V(this,e,t,!1,n)},m.prototype.copy=function(e,t,n,r){if(!m.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},m.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!m.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=m.isBuffer(e)?e:m.from(e,r),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var W={};function G(e,t,n){W[e]=function(n){function i(){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=a(this,i),Object.defineProperty(n,"message",{value:t.apply(n,arguments),writable:!0,configurable:!0}),n.name="".concat(n.name," [").concat(e,"]"),n.stack,delete n.name,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(i,n),function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(i,[{key:"code",get:function(){return e},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}])}(n)}function Y(e){for(var t="",n=e.length,r="-"===e[0]?1:0;n>=r+4;n-=3)t="_".concat(e.slice(n-3,n)).concat(t);return"".concat(e.slice(0,n)).concat(t)}function X(e,t,n,r,i,a){if(e>n||e<t){var o,s="bigint"==typeof t?"n":"";throw o=a>3?0===t||t===BigInt(0)?">= 0".concat(s," and < 2").concat(s," ** ").concat(8*(a+1)).concat(s):">= -(2".concat(s," ** ").concat(8*(a+1)-1).concat(s,") and < 2 ** ")+"".concat(8*(a+1)-1).concat(s):">= ".concat(t).concat(s," and <= ").concat(n).concat(s),new W.ERR_OUT_OF_RANGE("value",o,e)}!function(e,t,n){K(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||Z(t,e.length-(n+1))}(r,i,a)}function K(e,t){if("number"!=typeof e)throw new W.ERR_INVALID_ARG_TYPE(t,"number",e)}function Z(e,t,n){if(Math.floor(e)!==e)throw K(e,n),new W.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new W.ERR_BUFFER_OUT_OF_BOUNDS;throw new W.ERR_OUT_OF_RANGE(n||"offset",">= ".concat(n?1:0," and <= ").concat(t),e)}G("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),G("ERR_INVALID_ARG_TYPE",(function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(c(t))}),TypeError),G("ERR_OUT_OF_RANGE",(function(e,t,n){var r='The value of "'.concat(e,'" is out of range.'),i=n;return Number.isInteger(n)&&Math.abs(n)>Math.pow(2,32)?i=Y(String(n)):"bigint"==typeof n&&(i=String(n),(n>Math.pow(BigInt(2),BigInt(32))||n<-Math.pow(BigInt(2),BigInt(32)))&&(i=Y(i)),i+="n"),r+=" It must be ".concat(t,". Received ").concat(i)}),RangeError);var J=/[^+/0-9A-Za-z-_]/g;function Q(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function ee(e){return u.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(J,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function te(e,t,n,r){var i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function ne(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function re(e){return e!=e}var ie=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}();function ae(e){return"undefined"==typeof BigInt?oe:e}function oe(){throw new Error("BigInt not supported")}},9216:function(e){"use strict";e.exports=i,e.exports.isMobile=i,e.exports.default=i;var t=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,n=/CrOS/,r=/android|ipad|playbook|silk/i;function i(e){e||(e={});var i=e.ua;if(i||"undefined"==typeof navigator||(i=navigator.userAgent),i&&i.headers&&"string"==typeof i.headers["user-agent"]&&(i=i.headers["user-agent"]),"string"!=typeof i)return!1;var a=t.test(i)&&!n.test(i)||!!e.tablet&&r.test(i);return!a&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==i.indexOf("Macintosh")&&-1!==i.indexOf("Safari")&&(a=!0),a}},6296:function(e,t,n){"use strict";e.exports=function(e){var t=(e=e||{}).eye||[0,0,1],n=e.center||[0,0,0],s=e.up||[0,1,0],l=e.distanceLimits||[0,1/0],c=e.mode||"turntable",u=r(),f=i(),d=a();return u.setDistanceLimits(l[0],l[1]),u.lookAt(0,t,n,s),f.setDistanceLimits(l[0],l[1]),f.lookAt(0,t,n,s),d.setDistanceLimits(l[0],l[1]),d.lookAt(0,t,n,s),new o({turntable:u,orbit:f,matrix:d},c)};var r=n(7261),i=n(9977),a=n(4192);function o(e,t){this._controllerNames=Object.keys(e),this._controllerList=this._controllerNames.map((function(t){return e[t]})),this._mode=t,this._active=e[t],this._active||(this._mode="turntable",this._active=e.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var s=o.prototype;s.flush=function(e){for(var t=this._controllerList,n=0;n<t.length;++n)t[n].flush(e)},s.idle=function(e){for(var t=this._controllerList,n=0;n<t.length;++n)t[n].idle(e)},s.lookAt=function(e,t,n,r){for(var i=this._controllerList,a=0;a<i.length;++a)i[a].lookAt(e,t,n,r)},s.rotate=function(e,t,n,r){for(var i=this._controllerList,a=0;a<i.length;++a)i[a].rotate(e,t,n,r)},s.pan=function(e,t,n,r){for(var i=this._controllerList,a=0;a<i.length;++a)i[a].pan(e,t,n,r)},s.translate=function(e,t,n,r){for(var i=this._controllerList,a=0;a<i.length;++a)i[a].translate(e,t,n,r)},s.setMatrix=function(e,t){for(var n=this._controllerList,r=0;r<n.length;++r)n[r].setMatrix(e,t)},s.setDistanceLimits=function(e,t){for(var n=this._controllerList,r=0;r<n.length;++r)n[r].setDistanceLimits(e,t)},s.setDistance=function(e,t){for(var n=this._controllerList,r=0;r<n.length;++r)n[r].setDistance(e,t)},s.recalcMatrix=function(e){this._active.recalcMatrix(e)},s.getDistance=function(e){return this._active.getDistance(e)},s.getDistanceLimits=function(e){return this._active.getDistanceLimits(e)},s.lastT=function(){return this._active.lastT()},s.setMode=function(e){if(e!==this._mode){var t=this._controllerNames.indexOf(e);if(!(t<0)){var n=this._active,r=this._controllerList[t],i=Math.max(n.lastT(),r.lastT());n.recalcMatrix(i),r.setMatrix(i,n.computedMatrix),this._active=r,this._mode=e,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},s.getMode=function(){return this._mode}},7169:function(e,t,n){"use strict";var r="undefined"==typeof WeakMap?n(1538):WeakMap,i=n(2762),a=n(8116),o=new r;e.exports=function(e){var t=o.get(e),n=t&&(t._triangleBuffer.handle||t._triangleBuffer.buffer);if(!n||!e.isBuffer(n)){var r=i(e,new Float32Array([-1,-1,-1,4,4,-1]));(t=a(e,[{buffer:r,type:e.FLOAT,size:2}]))._triangleBuffer=r,o.set(e,t)}t.bind(),e.drawArrays(e.TRIANGLES,0,3),t.unbind()}},1085:function(e,t,n){var r=n(1371);e.exports=function(e,t,n){t="number"==typeof t?t:1,n=n||": ";var i=e.split(/\r?\n/),a=String(i.length+t-1).length;return i.map((function(e,i){var o=i+t,s=String(o).length;return r(o,a-s)+n+e})).join("\n")}},3952:function(e,t,n){"use strict";e.exports=function(e){var t=e.length;if(0===t)return[];if(1===t)return[0];for(var n=e[0].length,r=[e[0]],a=[0],o=1;o<t;++o)if(r.push(e[o]),i(r,n)){if(a.push(o),a.length===n+1)return a}else r.pop();return a};var r=n(3250);function i(e,t){for(var n=new Array(t+1),i=0;i<e.length;++i)n[i]=e[i];for(i=0;i<=e.length;++i){for(var a=e.length;a<=t;++a){for(var o=new Array(t),s=0;s<t;++s)o[s]=Math.pow(a+1-i,s);n[a]=o}if(r.apply(void 0,n))return!0}return!1}},5995:function(e,t,n){"use strict";e.exports=function(e,t){return r(t).filter((function(n){for(var r=new Array(n.length),a=0;a<n.length;++a)r[a]=t[n[a]];return i(r)*e<1}))};var r=n(7642),i=n(6037)},3502:function(e,t,n){e.exports=function(e,t){return i(r(e,t))};var r=n(5995),i=n(9127)},6468:function(e){e.exports=function(e){return atob(e)}},2642:function(e,t,n){"use strict";e.exports=function(e,t){for(var n=t.length,a=new Array(n+1),o=0;o<n;++o){for(var s=new Array(n+1),l=0;l<=n;++l)s[l]=e[l][o];a[o]=s}a[n]=new Array(n+1);for(o=0;o<=n;++o)a[n][o]=1;var c=new Array(n+1);for(o=0;o<n;++o)c[o]=t[o];c[n]=1;var u=r(a,c),f=i(u[n+1]);0===f&&(f=1);var d=new Array(n+1);for(o=0;o<=n;++o)d[o]=i(u[o])/f;return d};var r=n(727);function i(e){for(var t=0,n=0;n<e.length;++n)t+=e[n];return t}},7507:function(e,t){"use strict";t.byteLength=function(e){var t=s(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,a=s(e),o=a[0],l=a[1],c=new i(function(e,t,n){return 3*(t+n)/4-n}(0,o,l)),u=0,f=l>0?o-4:o;for(n=0;n<f;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;2===l&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,c[u++]=255&t);1===l&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t);return c},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,a=[],o=16383,s=0,c=r-i;s<c;s+=o)a.push(l(e,s,s+o>c?c:s+o));1===i?(t=e[r-1],a.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],a.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return a.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)n[o]=a[o],r[a.charCodeAt(o)]=o;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,r){for(var i,a,o=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(n[(a=i)>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},3865:function(e,t,n){"use strict";var r=n(869);e.exports=function(e,t){return r(e[0].mul(t[1]).add(t[0].mul(e[1])),e[1].mul(t[1]))}},1318:function(e){"use strict";e.exports=function(e,t){return e[0].mul(t[1]).cmp(t[0].mul(e[1]))}},8697:function(e,t,n){"use strict";var r=n(869);e.exports=function(e,t){return r(e[0].mul(t[1]),e[1].mul(t[0]))}},7842:function(e,t,n){"use strict";var r=n(6330),i=n(1533),a=n(2651),o=n(4387),s=n(869),l=n(8697);e.exports=function e(t,n){if(r(t))return n?l(t,e(n)):[t[0].clone(),t[1].clone()];var c,u,f=0;if(i(t))c=t.clone();else if("string"==typeof t)c=o(t);else{if(0===t)return[a(0),a(1)];if(t===Math.floor(t))c=a(t);else{for(;t!==Math.floor(t);)t*=Math.pow(2,256),f-=256;c=a(t)}}if(r(n))c.mul(n[1]),u=n[0].clone();else if(i(n))u=n.clone();else if("string"==typeof n)u=o(n);else if(n)if(n===Math.floor(n))u=a(n);else{for(;n!==Math.floor(n);)n*=Math.pow(2,256),f+=256;u=a(n)}else u=a(1);f>0?c=c.ushln(f):f<0&&(u=u.ushln(-f));return s(c,u)}},6330:function(e,t,n){"use strict";var r=n(1533);e.exports=function(e){return Array.isArray(e)&&2===e.length&&r(e[0])&&r(e[1])}},5716:function(e,t,n){"use strict";var r=n(6859);e.exports=function(e){return e.cmp(new r(0))}},1369:function(e,t,n){"use strict";var r=n(5716);e.exports=function(e){var t=e.length,n=e.words,i=0;if(1===t)i=n[0];else if(2===t)i=n[0]+67108864*n[1];else for(var a=0;a<t;a++){i+=n[a]*Math.pow(67108864,a)}return r(e)*i}},4025:function(e,t,n){"use strict";var r=n(2361),i=n(8828).countTrailingZeros;e.exports=function(e){var t=i(r.lo(e));if(t<32)return t;var n=i(r.hi(e));if(n>20)return 52;return n+32}},1533:function(e,t,n){"use strict";n(6859);e.exports=function(e){return e&&"object"==typeof e&&Boolean(e.words)}},2651:function(e,t,n){"use strict";var r=n(6859),i=n(2361);e.exports=function(e){var t=i.exponent(e);return t<52?new r(e):new r(e*Math.pow(2,52-t)).ushln(t-52)}},869:function(e,t,n){"use strict";var r=n(2651),i=n(5716);e.exports=function(e,t){var n=i(e),a=i(t);if(0===n)return[r(0),r(1)];if(0===a)return[r(0),r(0)];a<0&&(e=e.neg(),t=t.neg());var o=e.gcd(t);if(o.cmpn(1))return[e.div(o),t.div(o)];return[e,t]}},4387:function(e,t,n){"use strict";var r=n(6859);e.exports=function(e){return new r(e)}},6504:function(e,t,n){"use strict";var r=n(869);e.exports=function(e,t){return r(e[0].mul(t[0]),e[1].mul(t[1]))}},7721:function(e,t,n){"use strict";var r=n(5716);e.exports=function(e){return r(e[0])*r(e[1])}},5572:function(e,t,n){"use strict";var r=n(869);e.exports=function(e,t){return r(e[0].mul(t[1]).sub(e[1].mul(t[0])),e[1].mul(t[1]))}},946:function(e,t,n){"use strict";var r=n(1369),i=n(4025);e.exports=function(e){var t=e[0],n=e[1];if(0===t.cmpn(0))return 0;var a=t.abs().divmod(n.abs()),o=a.div,s=r(o),l=a.mod,c=t.negative!==n.negative?-1:1;if(0===l.cmpn(0))return c*s;if(s){var u=i(s)+4;return c*(s+(d=r(l.ushln(u).divRound(n)))*Math.pow(2,-u))}var f=n.bitLength()-l.bitLength()+53,d=r(l.ushln(f).divRound(n));return f<1023?c*d*Math.pow(2,-f):c*(d*=Math.pow(2,-1023))*Math.pow(2,1023-f)}},2478:function(e){"use strict";function t(e,t,n,r,i){for(var a=i+1;r<=i;){var o=r+i>>>1,s=e[o];(void 0!==n?n(s,t):s-t)>=0?(a=o,i=o-1):r=o+1}return a}function n(e,t,n,r,i){for(var a=i+1;r<=i;){var o=r+i>>>1,s=e[o];(void 0!==n?n(s,t):s-t)>0?(a=o,i=o-1):r=o+1}return a}function r(e,t,n,r,i){for(var a=r-1;r<=i;){var o=r+i>>>1,s=e[o];(void 0!==n?n(s,t):s-t)<0?(a=o,r=o+1):i=o-1}return a}function i(e,t,n,r,i){for(var a=r-1;r<=i;){var o=r+i>>>1,s=e[o];(void 0!==n?n(s,t):s-t)<=0?(a=o,r=o+1):i=o-1}return a}function a(e,t,n,r,i){for(;r<=i;){var a=r+i>>>1,o=e[a],s=void 0!==n?n(o,t):o-t;if(0===s)return a;s<=0?r=a+1:i=a-1}return-1}function o(e,t,n,r,i,a){return"function"==typeof n?a(e,t,n,void 0===r?0:0|r,void 0===i?e.length-1:0|i):a(e,t,void 0,void 0===n?0:0|n,void 0===r?e.length-1:0|r)}e.exports={ge:function(e,n,r,i,a){return o(e,n,r,i,a,t)},gt:function(e,t,r,i,a){return o(e,t,r,i,a,n)},lt:function(e,t,n,i,a){return o(e,t,n,i,a,r)},le:function(e,t,n,r,a){return o(e,t,n,r,a,i)},eq:function(e,t,n,r,i){return o(e,t,n,r,i,a)}}},8828:function(e,t){"use strict";function n(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}t.INT_BITS=32,t.INT_MAX=2147483647,t.INT_MIN=-1<<31,t.sign=function(e){return(e>0)-(e<0)},t.abs=function(e){var t=e>>31;return(e^t)-t},t.min=function(e,t){return t^(e^t)&-(e<t)},t.max=function(e,t){return e^(e^t)&-(e<t)},t.isPow2=function(e){return!(e&e-1||!e)},t.log2=function(e){var t,n;return t=(e>65535)<<4,t|=n=((e>>>=t)>255)<<3,t|=n=((e>>>=n)>15)<<2,(t|=n=((e>>>=n)>3)<<1)|(e>>>=n)>>1},t.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},t.popCount=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},t.countTrailingZeros=n,t.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1},t.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},t.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var r=new Array(256);!function(e){for(var t=0;t<256;++t){var n=t,r=t,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;e[t]=r<<i&255}}(r),t.reverse=function(e){return r[255&e]<<24|r[e>>>8&255]<<16|r[e>>>16&255]<<8|r[e>>>24&255]},t.interleave2=function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},t.deinterleave2=function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},t.interleave3=function(e,t,n){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},t.deinterleave3=function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},t.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>n(e)+1}},6859:function(e,t,n){!function(e,t){"use strict";function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function a(e,t,n){if(a.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var o;"object"==typeof e?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:n(7790).Buffer}catch(e){}function s(e,t){var n=e.charCodeAt(t);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function l(e,t,n){var r=s(e,n);return n-1>=t&&(r|=s(e,n-1)<<4),r}function c(e,t,n,r){for(var i=0,a=Math.min(e.length,n),o=t;o<a;o++){var s=e.charCodeAt(o)-48;i*=r,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}a.isBN=function(e){return e instanceof a||null!==e&&"object"==typeof e&&e.constructor.wordSize===a.wordSize&&Array.isArray(e.words)},a.max=function(e,t){return e.cmp(t)>0?e:t},a.min=function(e,t){return e.cmp(t)<0?e:t},a.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,n):(this._parseBase(e,t,i),"le"===n&&this._initArray(this.toArray(),t,n)))},a.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},a.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,o,s=0;if("be"===n)for(i=e.length-1,a=0;i>=0;i-=3)o=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);else if("le"===n)for(i=0,a=0;i<e.length;i+=3)o=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);return this.strip()},a.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,a=0,o=0;if("be"===n)for(r=e.length-1;r>=t;r-=2)i=l(e,t,r)<<a,this.words[o]|=67108863&i,a>=18?(a-=18,o+=1,this.words[o]|=i>>>26):a+=8;else for(r=(e.length-t)%2==0?t+1:t;r<e.length;r+=2)i=l(e,t,r)<<a,this.words[o]|=67108863&i,a>=18?(a-=18,o+=1,this.words[o]|=i>>>26):a+=8;this.strip()},a.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=t)r++;r--,i=i/t|0;for(var a=e.length-n,o=a%r,s=Math.min(a,a-o)+n,l=0,u=n;u<s;u+=r)l=c(e,u,u+r,t),this.imuln(i),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==o){var f=1;for(l=c(e,u,e.length,t),u=0;u<o;u++)f*=t;this.imuln(f),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},a.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},a.prototype.clone=function(){var e=new a(null);return this.copy(e),e},a.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function h(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0;n.length=r,r=r-1|0;var i=0|e.words[0],a=0|t.words[0],o=i*a,s=67108863&o,l=o/67108864|0;n.words[0]=s;for(var c=1;c<r;c++){for(var u=l>>>26,f=67108863&l,d=Math.min(c,t.length-1),h=Math.max(0,c-e.length+1);h<=d;h++){var p=c-h|0;u+=(o=(i=0|e.words[p])*(a=0|t.words[h])+f)/67108864|0,f=67108863&o}n.words[c]=0|f,l=0|u}return 0!==l?n.words[c]=0|l:n.length--,n.strip()}a.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var i=0,a=0,o=0;o<this.length;o++){var s=this.words[o],l=(16777215&(s<<i|a)).toString(16);n=0!==(a=s>>>24-i&16777215)||o!==this.length-1?u[6-l.length]+l+n:l+n,(i+=2)>=26&&(i-=26,o--)}for(0!==a&&(n=a.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var c=f[e],h=d[e];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(h).toString(e);n=(p=p.idivn(h)).isZero()?m+n:u[c-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(e,t){return r(void 0!==o),this.toArrayLike(o,e,t)},a.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},a.prototype.toArrayLike=function(e,t,n){var i=this.byteLength(),a=n||Math.max(1,i);r(i<=a,"byte array longer than desired length"),r(a>0,"Requested array length <= 0"),this.strip();var o,s,l="le"===t,c=new e(a),u=this.clone();if(l){for(s=0;!u.isZero();s++)o=u.andln(255),u.iushrn(8),c[s]=o;for(;s<a;s++)c[s]=0}else{for(s=0;s<a-i;s++)c[s]=0;for(s=0;!u.isZero();s++)o=u.andln(255),u.iushrn(8),c[a-s-1]=o}return c},Math.clz32?a.prototype._countBits=function(e){return 32-Math.clz32(e)}:a.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},a.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 8191&t||(n+=13,t>>>=13),127&t||(n+=7,t>>>=7),15&t||(n+=4,t>>>=4),3&t||(n+=2,t>>>=2),1&t||n++,n},a.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},a.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},a.prototype.ior=function(e){return r(!(this.negative|e.negative)),this.iuor(e)},a.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},a.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},a.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},a.prototype.iand=function(e){return r(!(this.negative|e.negative)),this.iuand(e)},a.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},a.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},a.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this.strip()},a.prototype.ixor=function(e){return r(!(this.negative|e.negative)),this.iuxor(e)},a.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},a.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},a.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},a.prototype.notn=function(e){return this.clone().inotn(e)},a.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},a.prototype.iadd=function(e){var t,n,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,r=e):(n=e,r=this);for(var i=0,a=0;a<r.length;a++)t=(0|n.words[a])+(0|r.words[a])+i,this.words[a]=67108863&t,i=t>>>26;for(;0!==i&&a<n.length;a++)t=(0|n.words[a])+i,this.words[a]=67108863&t,i=t>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this},a.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},a.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,r,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=e):(n=e,r=this);for(var a=0,o=0;o<r.length;o++)a=(t=(0|n.words[o])-(0|r.words[o])+a)>>26,this.words[o]=67108863&t;for(;0!==a&&o<n.length;o++)a=(t=(0|n.words[o])+a)>>26,this.words[o]=67108863&t;if(0===a&&o<n.length&&n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this.length=Math.max(this.length,o),n!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,n){var r,i,a,o=e.words,s=t.words,l=n.words,c=0,u=0|o[0],f=8191&u,d=u>>>13,h=0|o[1],p=8191&h,m=h>>>13,g=0|o[2],v=8191&g,y=g>>>13,b=0|o[3],x=8191&b,_=b>>>13,w=0|o[4],A=8191&w,k=w>>>13,E=0|o[5],T=8191&E,M=E>>>13,S=0|o[6],C=8191&S,O=S>>>13,R=0|o[7],N=8191&R,L=R>>>13,D=0|o[8],P=8191&D,I=D>>>13,F=0|o[9],z=8191&F,j=F>>>13,B=0|s[0],U=8191&B,$=B>>>13,q=0|s[1],H=8191&q,V=q>>>13,W=0|s[2],G=8191&W,Y=W>>>13,X=0|s[3],K=8191&X,Z=X>>>13,J=0|s[4],Q=8191&J,ee=J>>>13,te=0|s[5],ne=8191&te,re=te>>>13,ie=0|s[6],ae=8191&ie,oe=ie>>>13,se=0|s[7],le=8191&se,ce=se>>>13,ue=0|s[8],fe=8191&ue,de=ue>>>13,he=0|s[9],pe=8191&he,me=he>>>13;n.negative=e.negative^t.negative,n.length=19;var ge=(c+(r=Math.imul(f,U))|0)+((8191&(i=(i=Math.imul(f,$))+Math.imul(d,U)|0))<<13)|0;c=((a=Math.imul(d,$))+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(p,U),i=(i=Math.imul(p,$))+Math.imul(m,U)|0,a=Math.imul(m,$);var ve=(c+(r=r+Math.imul(f,H)|0)|0)+((8191&(i=(i=i+Math.imul(f,V)|0)+Math.imul(d,H)|0))<<13)|0;c=((a=a+Math.imul(d,V)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(v,U),i=(i=Math.imul(v,$))+Math.imul(y,U)|0,a=Math.imul(y,$),r=r+Math.imul(p,H)|0,i=(i=i+Math.imul(p,V)|0)+Math.imul(m,H)|0,a=a+Math.imul(m,V)|0;var ye=(c+(r=r+Math.imul(f,G)|0)|0)+((8191&(i=(i=i+Math.imul(f,Y)|0)+Math.imul(d,G)|0))<<13)|0;c=((a=a+Math.imul(d,Y)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(x,U),i=(i=Math.imul(x,$))+Math.imul(_,U)|0,a=Math.imul(_,$),r=r+Math.imul(v,H)|0,i=(i=i+Math.imul(v,V)|0)+Math.imul(y,H)|0,a=a+Math.imul(y,V)|0,r=r+Math.imul(p,G)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(m,G)|0,a=a+Math.imul(m,Y)|0;var be=(c+(r=r+Math.imul(f,K)|0)|0)+((8191&(i=(i=i+Math.imul(f,Z)|0)+Math.imul(d,K)|0))<<13)|0;c=((a=a+Math.imul(d,Z)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(A,U),i=(i=Math.imul(A,$))+Math.imul(k,U)|0,a=Math.imul(k,$),r=r+Math.imul(x,H)|0,i=(i=i+Math.imul(x,V)|0)+Math.imul(_,H)|0,a=a+Math.imul(_,V)|0,r=r+Math.imul(v,G)|0,i=(i=i+Math.imul(v,Y)|0)+Math.imul(y,G)|0,a=a+Math.imul(y,Y)|0,r=r+Math.imul(p,K)|0,i=(i=i+Math.imul(p,Z)|0)+Math.imul(m,K)|0,a=a+Math.imul(m,Z)|0;var xe=(c+(r=r+Math.imul(f,Q)|0)|0)+((8191&(i=(i=i+Math.imul(f,ee)|0)+Math.imul(d,Q)|0))<<13)|0;c=((a=a+Math.imul(d,ee)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(T,U),i=(i=Math.imul(T,$))+Math.imul(M,U)|0,a=Math.imul(M,$),r=r+Math.imul(A,H)|0,i=(i=i+Math.imul(A,V)|0)+Math.imul(k,H)|0,a=a+Math.imul(k,V)|0,r=r+Math.imul(x,G)|0,i=(i=i+Math.imul(x,Y)|0)+Math.imul(_,G)|0,a=a+Math.imul(_,Y)|0,r=r+Math.imul(v,K)|0,i=(i=i+Math.imul(v,Z)|0)+Math.imul(y,K)|0,a=a+Math.imul(y,Z)|0,r=r+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(m,Q)|0,a=a+Math.imul(m,ee)|0;var _e=(c+(r=r+Math.imul(f,ne)|0)|0)+((8191&(i=(i=i+Math.imul(f,re)|0)+Math.imul(d,ne)|0))<<13)|0;c=((a=a+Math.imul(d,re)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(C,U),i=(i=Math.imul(C,$))+Math.imul(O,U)|0,a=Math.imul(O,$),r=r+Math.imul(T,H)|0,i=(i=i+Math.imul(T,V)|0)+Math.imul(M,H)|0,a=a+Math.imul(M,V)|0,r=r+Math.imul(A,G)|0,i=(i=i+Math.imul(A,Y)|0)+Math.imul(k,G)|0,a=a+Math.imul(k,Y)|0,r=r+Math.imul(x,K)|0,i=(i=i+Math.imul(x,Z)|0)+Math.imul(_,K)|0,a=a+Math.imul(_,Z)|0,r=r+Math.imul(v,Q)|0,i=(i=i+Math.imul(v,ee)|0)+Math.imul(y,Q)|0,a=a+Math.imul(y,ee)|0,r=r+Math.imul(p,ne)|0,i=(i=i+Math.imul(p,re)|0)+Math.imul(m,ne)|0,a=a+Math.imul(m,re)|0;var we=(c+(r=r+Math.imul(f,ae)|0)|0)+((8191&(i=(i=i+Math.imul(f,oe)|0)+Math.imul(d,ae)|0))<<13)|0;c=((a=a+Math.imul(d,oe)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(N,U),i=(i=Math.imul(N,$))+Math.imul(L,U)|0,a=Math.imul(L,$),r=r+Math.imul(C,H)|0,i=(i=i+Math.imul(C,V)|0)+Math.imul(O,H)|0,a=a+Math.imul(O,V)|0,r=r+Math.imul(T,G)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(M,G)|0,a=a+Math.imul(M,Y)|0,r=r+Math.imul(A,K)|0,i=(i=i+Math.imul(A,Z)|0)+Math.imul(k,K)|0,a=a+Math.imul(k,Z)|0,r=r+Math.imul(x,Q)|0,i=(i=i+Math.imul(x,ee)|0)+Math.imul(_,Q)|0,a=a+Math.imul(_,ee)|0,r=r+Math.imul(v,ne)|0,i=(i=i+Math.imul(v,re)|0)+Math.imul(y,ne)|0,a=a+Math.imul(y,re)|0,r=r+Math.imul(p,ae)|0,i=(i=i+Math.imul(p,oe)|0)+Math.imul(m,ae)|0,a=a+Math.imul(m,oe)|0;var Ae=(c+(r=r+Math.imul(f,le)|0)|0)+((8191&(i=(i=i+Math.imul(f,ce)|0)+Math.imul(d,le)|0))<<13)|0;c=((a=a+Math.imul(d,ce)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(P,U),i=(i=Math.imul(P,$))+Math.imul(I,U)|0,a=Math.imul(I,$),r=r+Math.imul(N,H)|0,i=(i=i+Math.imul(N,V)|0)+Math.imul(L,H)|0,a=a+Math.imul(L,V)|0,r=r+Math.imul(C,G)|0,i=(i=i+Math.imul(C,Y)|0)+Math.imul(O,G)|0,a=a+Math.imul(O,Y)|0,r=r+Math.imul(T,K)|0,i=(i=i+Math.imul(T,Z)|0)+Math.imul(M,K)|0,a=a+Math.imul(M,Z)|0,r=r+Math.imul(A,Q)|0,i=(i=i+Math.imul(A,ee)|0)+Math.imul(k,Q)|0,a=a+Math.imul(k,ee)|0,r=r+Math.imul(x,ne)|0,i=(i=i+Math.imul(x,re)|0)+Math.imul(_,ne)|0,a=a+Math.imul(_,re)|0,r=r+Math.imul(v,ae)|0,i=(i=i+Math.imul(v,oe)|0)+Math.imul(y,ae)|0,a=a+Math.imul(y,oe)|0,r=r+Math.imul(p,le)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(m,le)|0,a=a+Math.imul(m,ce)|0;var ke=(c+(r=r+Math.imul(f,fe)|0)|0)+((8191&(i=(i=i+Math.imul(f,de)|0)+Math.imul(d,fe)|0))<<13)|0;c=((a=a+Math.imul(d,de)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,r=Math.imul(z,U),i=(i=Math.imul(z,$))+Math.imul(j,U)|0,a=Math.imul(j,$),r=r+Math.imul(P,H)|0,i=(i=i+Math.imul(P,V)|0)+Math.imul(I,H)|0,a=a+Math.imul(I,V)|0,r=r+Math.imul(N,G)|0,i=(i=i+Math.imul(N,Y)|0)+Math.imul(L,G)|0,a=a+Math.imul(L,Y)|0,r=r+Math.imul(C,K)|0,i=(i=i+Math.imul(C,Z)|0)+Math.imul(O,K)|0,a=a+Math.imul(O,Z)|0,r=r+Math.imul(T,Q)|0,i=(i=i+Math.imul(T,ee)|0)+Math.imul(M,Q)|0,a=a+Math.imul(M,ee)|0,r=r+Math.imul(A,ne)|0,i=(i=i+Math.imul(A,re)|0)+Math.imul(k,ne)|0,a=a+Math.imul(k,re)|0,r=r+Math.imul(x,ae)|0,i=(i=i+Math.imul(x,oe)|0)+Math.imul(_,ae)|0,a=a+Math.imul(_,oe)|0,r=r+Math.imul(v,le)|0,i=(i=i+Math.imul(v,ce)|0)+Math.imul(y,le)|0,a=a+Math.imul(y,ce)|0,r=r+Math.imul(p,fe)|0,i=(i=i+Math.imul(p,de)|0)+Math.imul(m,fe)|0,a=a+Math.imul(m,de)|0;var Ee=(c+(r=r+Math.imul(f,pe)|0)|0)+((8191&(i=(i=i+Math.imul(f,me)|0)+Math.imul(d,pe)|0))<<13)|0;c=((a=a+Math.imul(d,me)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(z,H),i=(i=Math.imul(z,V))+Math.imul(j,H)|0,a=Math.imul(j,V),r=r+Math.imul(P,G)|0,i=(i=i+Math.imul(P,Y)|0)+Math.imul(I,G)|0,a=a+Math.imul(I,Y)|0,r=r+Math.imul(N,K)|0,i=(i=i+Math.imul(N,Z)|0)+Math.imul(L,K)|0,a=a+Math.imul(L,Z)|0,r=r+Math.imul(C,Q)|0,i=(i=i+Math.imul(C,ee)|0)+Math.imul(O,Q)|0,a=a+Math.imul(O,ee)|0,r=r+Math.imul(T,ne)|0,i=(i=i+Math.imul(T,re)|0)+Math.imul(M,ne)|0,a=a+Math.imul(M,re)|0,r=r+Math.imul(A,ae)|0,i=(i=i+Math.imul(A,oe)|0)+Math.imul(k,ae)|0,a=a+Math.imul(k,oe)|0,r=r+Math.imul(x,le)|0,i=(i=i+Math.imul(x,ce)|0)+Math.imul(_,le)|0,a=a+Math.imul(_,ce)|0,r=r+Math.imul(v,fe)|0,i=(i=i+Math.imul(v,de)|0)+Math.imul(y,fe)|0,a=a+Math.imul(y,de)|0;var Te=(c+(r=r+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((a=a+Math.imul(m,me)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(z,G),i=(i=Math.imul(z,Y))+Math.imul(j,G)|0,a=Math.imul(j,Y),r=r+Math.imul(P,K)|0,i=(i=i+Math.imul(P,Z)|0)+Math.imul(I,K)|0,a=a+Math.imul(I,Z)|0,r=r+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,ee)|0)+Math.imul(L,Q)|0,a=a+Math.imul(L,ee)|0,r=r+Math.imul(C,ne)|0,i=(i=i+Math.imul(C,re)|0)+Math.imul(O,ne)|0,a=a+Math.imul(O,re)|0,r=r+Math.imul(T,ae)|0,i=(i=i+Math.imul(T,oe)|0)+Math.imul(M,ae)|0,a=a+Math.imul(M,oe)|0,r=r+Math.imul(A,le)|0,i=(i=i+Math.imul(A,ce)|0)+Math.imul(k,le)|0,a=a+Math.imul(k,ce)|0,r=r+Math.imul(x,fe)|0,i=(i=i+Math.imul(x,de)|0)+Math.imul(_,fe)|0,a=a+Math.imul(_,de)|0;var Me=(c+(r=r+Math.imul(v,pe)|0)|0)+((8191&(i=(i=i+Math.imul(v,me)|0)+Math.imul(y,pe)|0))<<13)|0;c=((a=a+Math.imul(y,me)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(z,K),i=(i=Math.imul(z,Z))+Math.imul(j,K)|0,a=Math.imul(j,Z),r=r+Math.imul(P,Q)|0,i=(i=i+Math.imul(P,ee)|0)+Math.imul(I,Q)|0,a=a+Math.imul(I,ee)|0,r=r+Math.imul(N,ne)|0,i=(i=i+Math.imul(N,re)|0)+Math.imul(L,ne)|0,a=a+Math.imul(L,re)|0,r=r+Math.imul(C,ae)|0,i=(i=i+Math.imul(C,oe)|0)+Math.imul(O,ae)|0,a=a+Math.imul(O,oe)|0,r=r+Math.imul(T,le)|0,i=(i=i+Math.imul(T,ce)|0)+Math.imul(M,le)|0,a=a+Math.imul(M,ce)|0,r=r+Math.imul(A,fe)|0,i=(i=i+Math.imul(A,de)|0)+Math.imul(k,fe)|0,a=a+Math.imul(k,de)|0;var Se=(c+(r=r+Math.imul(x,pe)|0)|0)+((8191&(i=(i=i+Math.imul(x,me)|0)+Math.imul(_,pe)|0))<<13)|0;c=((a=a+Math.imul(_,me)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(z,Q),i=(i=Math.imul(z,ee))+Math.imul(j,Q)|0,a=Math.imul(j,ee),r=r+Math.imul(P,ne)|0,i=(i=i+Math.imul(P,re)|0)+Math.imul(I,ne)|0,a=a+Math.imul(I,re)|0,r=r+Math.imul(N,ae)|0,i=(i=i+Math.imul(N,oe)|0)+Math.imul(L,ae)|0,a=a+Math.imul(L,oe)|0,r=r+Math.imul(C,le)|0,i=(i=i+Math.imul(C,ce)|0)+Math.imul(O,le)|0,a=a+Math.imul(O,ce)|0,r=r+Math.imul(T,fe)|0,i=(i=i+Math.imul(T,de)|0)+Math.imul(M,fe)|0,a=a+Math.imul(M,de)|0;var Ce=(c+(r=r+Math.imul(A,pe)|0)|0)+((8191&(i=(i=i+Math.imul(A,me)|0)+Math.imul(k,pe)|0))<<13)|0;c=((a=a+Math.imul(k,me)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,r=Math.imul(z,ne),i=(i=Math.imul(z,re))+Math.imul(j,ne)|0,a=Math.imul(j,re),r=r+Math.imul(P,ae)|0,i=(i=i+Math.imul(P,oe)|0)+Math.imul(I,ae)|0,a=a+Math.imul(I,oe)|0,r=r+Math.imul(N,le)|0,i=(i=i+Math.imul(N,ce)|0)+Math.imul(L,le)|0,a=a+Math.imul(L,ce)|0,r=r+Math.imul(C,fe)|0,i=(i=i+Math.imul(C,de)|0)+Math.imul(O,fe)|0,a=a+Math.imul(O,de)|0;var Oe=(c+(r=r+Math.imul(T,pe)|0)|0)+((8191&(i=(i=i+Math.imul(T,me)|0)+Math.imul(M,pe)|0))<<13)|0;c=((a=a+Math.imul(M,me)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,r=Math.imul(z,ae),i=(i=Math.imul(z,oe))+Math.imul(j,ae)|0,a=Math.imul(j,oe),r=r+Math.imul(P,le)|0,i=(i=i+Math.imul(P,ce)|0)+Math.imul(I,le)|0,a=a+Math.imul(I,ce)|0,r=r+Math.imul(N,fe)|0,i=(i=i+Math.imul(N,de)|0)+Math.imul(L,fe)|0,a=a+Math.imul(L,de)|0;var Re=(c+(r=r+Math.imul(C,pe)|0)|0)+((8191&(i=(i=i+Math.imul(C,me)|0)+Math.imul(O,pe)|0))<<13)|0;c=((a=a+Math.imul(O,me)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,r=Math.imul(z,le),i=(i=Math.imul(z,ce))+Math.imul(j,le)|0,a=Math.imul(j,ce),r=r+Math.imul(P,fe)|0,i=(i=i+Math.imul(P,de)|0)+Math.imul(I,fe)|0,a=a+Math.imul(I,de)|0;var Ne=(c+(r=r+Math.imul(N,pe)|0)|0)+((8191&(i=(i=i+Math.imul(N,me)|0)+Math.imul(L,pe)|0))<<13)|0;c=((a=a+Math.imul(L,me)|0)+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,r=Math.imul(z,fe),i=(i=Math.imul(z,de))+Math.imul(j,fe)|0,a=Math.imul(j,de);var Le=(c+(r=r+Math.imul(P,pe)|0)|0)+((8191&(i=(i=i+Math.imul(P,me)|0)+Math.imul(I,pe)|0))<<13)|0;c=((a=a+Math.imul(I,me)|0)+(i>>>13)|0)+(Le>>>26)|0,Le&=67108863;var De=(c+(r=Math.imul(z,pe))|0)+((8191&(i=(i=Math.imul(z,me))+Math.imul(j,pe)|0))<<13)|0;return c=((a=Math.imul(j,me))+(i>>>13)|0)+(De>>>26)|0,De&=67108863,l[0]=ge,l[1]=ve,l[2]=ye,l[3]=be,l[4]=xe,l[5]=_e,l[6]=we,l[7]=Ae,l[8]=ke,l[9]=Ee,l[10]=Te,l[11]=Me,l[12]=Se,l[13]=Ce,l[14]=Oe,l[15]=Re,l[16]=Ne,l[17]=Le,l[18]=De,0!==c&&(l[19]=c,n.length++),n};function m(e,t,n){return(new g).mulp(e,t,n)}function g(e,t){this.x=e,this.y=t}Math.imul||(p=h),a.prototype.mulTo=function(e,t){var n,r=this.length+e.length;return n=10===this.length&&10===e.length?p(this,e,t):r<63?h(this,e,t):r<1024?function(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,i=0,a=0;a<n.length-1;a++){var o=i;i=0;for(var s=67108863&r,l=Math.min(a,t.length-1),c=Math.max(0,a-e.length+1);c<=l;c++){var u=a-c,f=(0|e.words[u])*(0|t.words[c]),d=67108863&f;s=67108863&(d=d+s|0),i+=(o=(o=o+(f/67108864|0)|0)+(d>>>26)|0)>>>26,o&=67108863}n.words[a]=s,r=o,o=i}return 0!==r?n.words[a]=r:n.length--,n.strip()}(this,e,t):m(this,e,t),n},g.prototype.makeRBT=function(e){for(var t=new Array(e),n=a.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,n,e);return t},g.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var r=0,i=0;i<t;i++)r|=(1&e)<<t-i-1,e>>=1;return r},g.prototype.permute=function(e,t,n,r,i,a){for(var o=0;o<a;o++)r[o]=t[e[o]],i[o]=n[e[o]]},g.prototype.transform=function(e,t,n,r,i,a){this.permute(a,e,t,n,r,i);for(var o=1;o<i;o<<=1)for(var s=o<<1,l=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),u=0;u<i;u+=s)for(var f=l,d=c,h=0;h<o;h++){var p=n[u+h],m=r[u+h],g=n[u+h+o],v=r[u+h+o],y=f*g-d*v;v=f*v+d*g,g=y,n[u+h]=p+g,r[u+h]=m+v,n[u+h+o]=p-g,r[u+h+o]=m-v,h!==s&&(y=l*f-c*d,d=l*d+c*f,f=y)}},g.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},g.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=e[r];e[r]=e[n-r-1],e[n-r-1]=i,i=t[r],t[r]=-t[n-r-1],t[n-r-1]=-i}},g.prototype.normalize13b=function(e,t){for(var n=0,r=0;r<t/2;r++){var i=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+n;e[r]=67108863&i,n=i<67108864?0:i/67108864|0}return e},g.prototype.convert13b=function(e,t,n,i){for(var a=0,o=0;o<t;o++)a+=0|e[o],n[2*o]=8191&a,a>>>=13,n[2*o+1]=8191&a,a>>>=13;for(o=2*t;o<i;++o)n[o]=0;r(0===a),r(!(-8192&a))},g.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},g.prototype.mulp=function(e,t,n){var r=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(r),a=this.stub(r),o=new Array(r),s=new Array(r),l=new Array(r),c=new Array(r),u=new Array(r),f=new Array(r),d=n.words;d.length=r,this.convert13b(e.words,e.length,o,r),this.convert13b(t.words,t.length,c,r),this.transform(o,a,s,l,r,i),this.transform(c,a,u,f,r,i);for(var h=0;h<r;h++){var p=s[h]*u[h]-l[h]*f[h];l[h]=s[h]*f[h]+l[h]*u[h],s[h]=p}return this.conjugate(s,l,r),this.transform(s,l,d,a,r,i),this.conjugate(d,a,r),this.normalize13b(d,r),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},a.prototype.mul=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},a.prototype.mulf=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),m(this,e,t)},a.prototype.imul=function(e){return this.clone().mulTo(e,this)},a.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,n=0;n<this.length;n++){var i=(0|this.words[n])*e,a=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=a>>>26,this.words[n]=67108863&a}return 0!==t&&(this.words[n]=t,this.length++),this},a.prototype.muln=function(e){return this.clone().imuln(e)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n/26|0,i=n%26;t[n]=(e.words[r]&1<<i)>>>i}return t}(e);if(0===t.length)return new a(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var i=n.sqr();r<t.length;r++,i=i.sqr())0!==t[r]&&(n=n.mul(i));return n},a.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,a=67108863>>>26-n<<26-n;if(0!==n){var o=0;for(t=0;t<this.length;t++){var s=this.words[t]&a,l=(0|this.words[t])-s<<n;this.words[t]=l|o,o=s>>>26-n}o&&(this.words[t]=o,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},a.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},a.prototype.iushrn=function(e,t,n){var i;r("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var a=e%26,o=Math.min((e-a)/26,this.length),s=67108863^67108863>>>a<<a,l=n;if(i-=o,i=Math.max(0,i),l){for(var c=0;c<o;c++)l.words[c]=this.words[c];l.length=o}if(0===o);else if(this.length>o)for(this.length-=o,c=0;c<this.length;c++)this.words[c]=this.words[c+o];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;c>=0&&(0!==u||c>=i);c--){var f=0|this.words[c];this.words[c]=u<<26-a|f>>>a,u=f&s}return l&&0!==u&&(l.words[l.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},a.prototype.shln=function(e){return this.clone().ishln(e)},a.prototype.ushln=function(e){return this.clone().iushln(e)},a.prototype.shrn=function(e){return this.clone().ishrn(e)},a.prototype.ushrn=function(e){return this.clone().iushrn(e)},a.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;return!(this.length<=n)&&!!(this.words[n]&i)},a.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},a.prototype.maskn=function(e){return this.clone().imaskn(e)},a.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},a.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},a.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},a.prototype.addn=function(e){return this.clone().iaddn(e)},a.prototype.subn=function(e){return this.clone().isubn(e)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(e,t,n){var i,a,o=e.length+n;this._expand(o);var s=0;for(i=0;i<e.length;i++){a=(0|this.words[i+n])+s;var l=(0|e.words[i])*t;s=((a-=67108863&l)>>26)-(l/67108864|0),this.words[i+n]=67108863&a}for(;i<this.length-n;i++)s=(a=(0|this.words[i+n])+s)>>26,this.words[i+n]=67108863&a;if(0===s)return this.strip();for(r(-1===s),s=0,i=0;i<this.length;i++)s=(a=-(0|this.words[i])+s)>>26,this.words[i]=67108863&a;return this.negative=1,this.strip()},a.prototype._wordDiv=function(e,t){var n=(this.length,e.length),r=this.clone(),i=e,o=0|i.words[i.length-1];0!==(n=26-this._countBits(o))&&(i=i.ushln(n),r.iushln(n),o=0|i.words[i.length-1]);var s,l=r.length-i.length;if("mod"!==t){(s=new a(null)).length=l+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var u=r.clone()._ishlnsubmul(i,1,l);0===u.negative&&(r=u,s&&(s.words[l]=1));for(var f=l-1;f>=0;f--){var d=67108864*(0|r.words[i.length+f])+(0|r.words[i.length+f-1]);for(d=Math.min(d/o|0,67108863),r._ishlnsubmul(i,d,f);0!==r.negative;)d--,r.negative=0,r._ishlnsubmul(i,1,f),r.isZero()||(r.negative^=1);s&&(s.words[f]=d)}return s&&s.strip(),r.strip(),"div"!==t&&0!==n&&r.iushrn(n),{div:s||null,mod:r}},a.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(i=s.div.neg()),"div"!==t&&(o=s.mod.neg(),n&&0!==o.negative&&o.iadd(e)),{div:i,mod:o}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(i=s.div.neg()),{div:i,mod:s.mod}):this.negative&e.negative?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(o=s.mod.neg(),n&&0!==o.negative&&o.isub(e)),{div:s.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new a(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new a(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new a(this.modn(e.words[0]))}:this._wordDiv(e,t);var i,o,s},a.prototype.div=function(e){return this.divmod(e,"div",!1).div},a.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},a.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},a.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),i=e.andln(1),a=n.cmp(r);return a<0||1===i&&0===a?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},a.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,n=0,i=this.length-1;i>=0;i--)n=(t*n+(0|this.words[i]))%e;return n},a.prototype.idivn=function(e){r(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*t;this.words[n]=i/e|0,t=i%e}return this.strip()},a.prototype.divn=function(e){return this.clone().idivn(e)},a.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new a(1),o=new a(0),s=new a(0),l=new a(1),c=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++c;for(var u=n.clone(),f=t.clone();!t.isZero();){for(var d=0,h=1;!(t.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(i.isOdd()||o.isOdd())&&(i.iadd(u),o.isub(f)),i.iushrn(1),o.iushrn(1);for(var p=0,m=1;!(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(s.isOdd()||l.isOdd())&&(s.iadd(u),l.isub(f)),s.iushrn(1),l.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(s),o.isub(l)):(n.isub(t),s.isub(i),l.isub(o))}return{a:s,b:l,gcd:n.iushln(c)}},a.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,o=new a(1),s=new a(0),l=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,u=1;!(t.words[0]&u)&&c<26;++c,u<<=1);if(c>0)for(t.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(l),o.iushrn(1);for(var f=0,d=1;!(n.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(n.iushrn(f);f-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);t.cmp(n)>=0?(t.isub(n),o.isub(s)):(n.isub(t),s.isub(o))}return(i=0===t.cmpn(1)?o:s).cmpn(0)<0&&i.iadd(e),i},a.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var r=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=t.cmp(n);if(i<0){var a=t;t=n,n=a}else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},a.prototype.invm=function(e){return this.egcd(e).a.umod(e)},a.prototype.isEven=function(){return!(1&this.words[0])},a.prototype.isOdd=function(){return!(1&~this.words[0])},a.prototype.andln=function(e){return this.words[0]&e},a.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var a=i,o=n;0!==a&&o<this.length;o++){var s=0|this.words[o];a=(s+=a)>>>26,s&=67108863,this.words[o]=s}return 0!==a&&(this.words[o]=a,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},a.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},a.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|e.words[n];if(r!==i){r<i?t=-1:r>i&&(t=1);break}}return t},a.prototype.gtn=function(e){return 1===this.cmpn(e)},a.prototype.gt=function(e){return 1===this.cmp(e)},a.prototype.gten=function(e){return this.cmpn(e)>=0},a.prototype.gte=function(e){return this.cmp(e)>=0},a.prototype.ltn=function(e){return-1===this.cmpn(e)},a.prototype.lt=function(e){return-1===this.cmp(e)},a.prototype.lten=function(e){return this.cmpn(e)<=0},a.prototype.lte=function(e){return this.cmp(e)<=0},a.prototype.eqn=function(e){return 0===this.cmpn(e)},a.prototype.eq=function(e){return 0===this.cmp(e)},a.red=function(e){return new A(e)},a.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},a.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(e){return this.red=e,this},a.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},a.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},a.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},a.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},a.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},a.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},a.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},a.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},a.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var v={k256:null,p224:null,p192:null,p25519:null};function y(e,t){this.name=e,this.p=new a(t,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function x(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function A(e){if("string"==typeof e){var t=a._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function k(e){A.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var e=new a(null);return e.words=new Array(Math.ceil(this.n/13)),e},y.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},y.prototype.split=function(e,t){e.iushrn(this.n,0,t)},y.prototype.imulK=function(e){return e.imul(this.k)},i(b,y),b.prototype.split=function(e,t){for(var n=4194303,r=Math.min(e.length,9),i=0;i<r;i++)t.words[i]=e.words[i];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var a=e.words[9];for(t.words[t.length++]=a&n,i=10;i<e.length;i++){var o=0|e.words[i];e.words[i-10]=(o&n)<<4|a>>>22,a=o}a>>>=22,e.words[i-10]=a,0===a&&e.length>10?e.length-=10:e.length-=9},b.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(x,y),i(_,y),i(w,y),w.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,i=67108863&r;r>>>=26,e.words[n]=i,t=r}return 0!==t&&(e.words[e.length++]=t),e},a._prime=function(e){if(v[e])return v[e];var t;if("k256"===e)t=new b;else if("p224"===e)t=new x;else if("p192"===e)t=new _;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new w}return v[e]=t,t},A.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},A.prototype._verify2=function(e,t){r(!(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},A.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},A.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},A.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},A.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},A.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},A.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},A.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},A.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},A.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},A.prototype.isqr=function(e){return this.imul(e,e.clone())},A.prototype.sqr=function(e){return this.mul(e,e)},A.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new a(1)).iushrn(2);return this.pow(e,n)}for(var i=this.m.subn(1),o=0;!i.isZero()&&0===i.andln(1);)o++,i.iushrn(1);r(!i.isZero());var s=new a(1).toRed(this),l=s.redNeg(),c=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new a(2*u*u).toRed(this);0!==this.pow(u,c).cmp(l);)u.redIAdd(l);for(var f=this.pow(u,i),d=this.pow(e,i.addn(1).iushrn(1)),h=this.pow(e,i),p=o;0!==h.cmp(s);){for(var m=h,g=0;0!==m.cmp(s);g++)m=m.redSqr();r(g<p);var v=this.pow(f,new a(1).iushln(p-g-1));d=d.redMul(v),f=v.redSqr(),h=h.redMul(f),p=g}return d},A.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},A.prototype.pow=function(e,t){if(t.isZero())return new a(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new a(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var i=n[0],o=0,s=0,l=t.bitLength()%26;for(0===l&&(l=26),r=t.length-1;r>=0;r--){for(var c=t.words[r],u=l-1;u>=0;u--){var f=c>>u&1;i!==n[0]&&(i=this.sqr(i)),0!==f||0!==o?(o<<=1,o|=f,(4===++s||0===r&&0===u)&&(i=this.mul(i,n[o]),s=0,o=0)):s=0}l=26}return i},A.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},A.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},a.mont=function(e){return new k(e)},i(k,A),k.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},k.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},k.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},k.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new a(0)._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},k.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=n.nmd(e),this)},6204:function(e){"use strict";e.exports=function(e){var t,n,r,i=e.length,a=0;for(t=0;t<i;++t)a+=e[t].length;var o=new Array(a),s=0;for(t=0;t<i;++t){var l=e[t],c=l.length;for(n=0;n<c;++n){var u=o[s++]=new Array(c-1),f=0;for(r=0;r<c;++r)r!==n&&(u[f++]=l[r]);if(1&n){var d=u[1];u[1]=u[0],u[0]=d}}}return o}},6867:function(e,t,n){"use strict";e.exports=function(e,t,n){switch(arguments.length){case 1:return r=[],c(i=e,i,u,!0),r;case 2:return"function"==typeof t?c(e,e,t,!0):function(e,t){return r=[],c(e,t,u,!1),r}(e,t);case 3:return c(e,t,n,!1);default:throw new Error("box-intersect: Invalid arguments")}var i};var r,i=n(1888),a=n(855),o=n(7150);function s(e,t){for(var n=0;n<e;++n)if(!(t[n]<=t[n+e]))return!0;return!1}function l(e,t,n,r){for(var i=0,a=0,o=0,l=e.length;o<l;++o){var c=e[o];if(!s(t,c)){for(var u=0;u<2*t;++u)n[i++]=c[u];r[a++]=o}}return a}function c(e,t,n,r){var s=e.length,c=t.length;if(!(s<=0||c<=0)){var u=e[0].length>>>1;if(!(u<=0)){var f,d=i.mallocDouble(2*u*s),h=i.mallocInt32(s);if((s=l(e,u,d,h))>0){if(1===u&&r)a.init(s),f=a.sweepComplete(u,n,0,s,d,h,0,s,d,h);else{var p=i.mallocDouble(2*u*c),m=i.mallocInt32(c);(c=l(t,u,p,m))>0&&(a.init(s+c),f=1===u?a.sweepBipartite(u,n,0,s,d,h,0,c,p,m):o(u,n,r,s,d,h,c,p,m),i.free(p),i.free(m))}i.free(d),i.free(h)}return f}}}function u(e,t){r.push([e,t])}},2455:function(e,t){"use strict";function n(e){return e?function(e,t,n,r,i,a,o,s,l,c,u){return i-r>l-s?function(e,t,n,r,i,a,o,s,l,c,u){for(var f=2*e,d=r,h=f*r;d<i;++d,h+=f){var p=a[t+h],m=a[t+h+e],g=o[d];e:for(var v=s,y=f*s;v<l;++v,y+=f){var b=c[t+y],x=c[t+y+e],_=u[v];if(!(x<p||m<b)){for(var w=t+1;w<e;++w){var A=a[w+h],k=a[w+e+h],E=c[w+y],T=c[w+e+y];if(k<E||T<A)continue e}var M=n(g,_);if(void 0!==M)return M}}}}(e,t,n,r,i,a,o,s,l,c,u):function(e,t,n,r,i,a,o,s,l,c,u){for(var f=2*e,d=s,h=f*s;d<l;++d,h+=f){var p=c[t+h],m=c[t+h+e],g=u[d];e:for(var v=r,y=f*r;v<i;++v,y+=f){var b=a[t+y],x=a[t+y+e],_=o[v];if(!(m<b||x<p)){for(var w=t+1;w<e;++w){var A=a[w+y],k=a[w+e+y],E=c[w+h],T=c[w+e+h];if(k<E||T<A)continue e}var M=n(_,g);if(void 0!==M)return M}}}}(e,t,n,r,i,a,o,s,l,c,u)}:function(e,t,n,r,i,a,o,s,l,c,u,f){return a-i>c-l?r?function(e,t,n,r,i,a,o,s,l,c,u){for(var f=2*e,d=r,h=f*r;d<i;++d,h+=f){var p=a[t+h],m=a[t+h+e],g=o[d];e:for(var v=s,y=f*s;v<l;++v,y+=f){var b=c[t+y],x=u[v];if(!(b<=p||m<b)){for(var _=t+1;_<e;++_){var w=a[_+h],A=a[_+e+h],k=c[_+y],E=c[_+e+y];if(A<k||E<w)continue e}var T=n(x,g);if(void 0!==T)return T}}}}(e,t,n,i,a,o,s,l,c,u,f):function(e,t,n,r,i,a,o,s,l,c,u){for(var f=2*e,d=r,h=f*r;d<i;++d,h+=f){var p=a[t+h],m=a[t+h+e],g=o[d];e:for(var v=s,y=f*s;v<l;++v,y+=f){var b=c[t+y],x=u[v];if(!(b<p||m<b)){for(var _=t+1;_<e;++_){var w=a[_+h],A=a[_+e+h],k=c[_+y],E=c[_+e+y];if(A<k||E<w)continue e}var T=n(g,x);if(void 0!==T)return T}}}}(e,t,n,i,a,o,s,l,c,u,f):r?function(e,t,n,r,i,a,o,s,l,c,u){for(var f=2*e,d=s,h=f*s;d<l;++d,h+=f){var p=c[t+h],m=u[d];e:for(var g=r,v=f*r;g<i;++g,v+=f){var y=a[t+v],b=a[t+v+e],x=o[g];if(!(p<=y||b<p)){for(var _=t+1;_<e;++_){var w=a[_+v],A=a[_+e+v],k=c[_+h],E=c[_+e+h];if(A<k||E<w)continue e}var T=n(m,x);if(void 0!==T)return T}}}}(e,t,n,i,a,o,s,l,c,u,f):function(e,t,n,r,i,a,o,s,l,c,u){for(var f=2*e,d=s,h=f*s;d<l;++d,h+=f){var p=c[t+h],m=u[d];e:for(var g=r,v=f*r;g<i;++g,v+=f){var y=a[t+v],b=a[t+v+e],x=o[g];if(!(p<y||b<p)){for(var _=t+1;_<e;++_){var w=a[_+v],A=a[_+e+v],k=c[_+h],E=c[_+e+h];if(A<k||E<w)continue e}var T=n(x,m);if(void 0!==T)return T}}}}(e,t,n,i,a,o,s,l,c,u,f)}}t.partial=n(!1),t.full=n(!0)},7150:function(e,t,n){"use strict";e.exports=function(e,t,n,a,u,M,S,C,O){!function(e,t){var n=8*i.log2(t+1)*(e+1)|0,a=i.nextPow2(x*n);w.length<a&&(r.free(w),w=r.mallocInt32(a));var o=i.nextPow2(_*n);A.length<o&&(r.free(A),A=r.mallocDouble(o))}(e,a+S);var R,N=0,L=2*e;k(N++,0,0,a,0,S,n?16:0,-1/0,1/0),n||k(N++,0,0,S,0,a,1,-1/0,1/0);for(;N>0;){var D=(N-=1)*x,P=w[D],I=w[D+1],F=w[D+2],z=w[D+3],j=w[D+4],B=w[D+5],U=N*_,$=A[U],q=A[U+1],H=1&B,V=!!(16&B),W=u,G=M,Y=C,X=O;if(H&&(W=C,G=O,Y=u,X=M),!(2&B&&I>=(F=g(e,P,I,F,W,G,q))||4&B&&(I=v(e,P,I,F,W,G,$))>=F)){var K=F-I,Z=j-z;if(V){if(e*K*(K+Z)<h){if(void 0!==(R=l.scanComplete(e,P,t,I,F,W,G,z,j,Y,X)))return R;continue}}else{if(e*Math.min(K,Z)<f){if(void 0!==(R=o(e,P,t,H,I,F,W,G,z,j,Y,X)))return R;continue}if(e*K*Z<d){if(void 0!==(R=l.scanBipartite(e,P,t,H,I,F,W,G,z,j,Y,X)))return R;continue}}var J=p(e,P,I,F,W,G,$,q);if(I<J)if(e*(J-I)<f){if(void 0!==(R=s(e,P+1,t,I,J,W,G,z,j,Y,X)))return R}else if(P===e-2){if(void 0!==(R=H?l.sweepBipartite(e,t,z,j,Y,X,I,J,W,G):l.sweepBipartite(e,t,I,J,W,G,z,j,Y,X)))return R}else k(N++,P+1,I,J,z,j,H,-1/0,1/0),k(N++,P+1,z,j,I,J,1^H,-1/0,1/0);if(J<F){var Q=c(e,P,z,j,Y,X),ee=Y[L*Q+P],te=m(e,P,Q,j,Y,X,ee);if(te<j&&k(N++,P,J,F,te,j,(4|H)+(V?16:0),ee,q),z<Q&&k(N++,P,J,F,z,Q,(2|H)+(V?16:0),$,ee),Q+1===te){if(void 0!==(R=V?T(e,P,t,J,F,W,G,Q,Y,X[Q]):E(e,P,t,H,J,F,W,G,Q,Y,X[Q])))return R}else if(Q<te){var ne;if(V){if(J<(ne=y(e,P,J,F,W,G,ee))){var re=m(e,P,J,ne,W,G,ee);if(P===e-2){if(J<re&&void 0!==(R=l.sweepComplete(e,t,J,re,W,G,Q,te,Y,X)))return R;if(re<ne&&void 0!==(R=l.sweepBipartite(e,t,re,ne,W,G,Q,te,Y,X)))return R}else J<re&&k(N++,P+1,J,re,Q,te,16,-1/0,1/0),re<ne&&(k(N++,P+1,re,ne,Q,te,0,-1/0,1/0),k(N++,P+1,Q,te,re,ne,1,-1/0,1/0))}}else J<(ne=H?b(e,P,J,F,W,G,ee):y(e,P,J,F,W,G,ee))&&(P===e-2?R=H?l.sweepBipartite(e,t,Q,te,Y,X,J,ne,W,G):l.sweepBipartite(e,t,J,ne,W,G,Q,te,Y,X):(k(N++,P+1,J,ne,Q,te,H,-1/0,1/0),k(N++,P+1,Q,te,J,ne,1^H,-1/0,1/0)))}}}}};var r=n(1888),i=n(8828),a=n(2455),o=a.partial,s=a.full,l=n(855),c=n(3545),u=n(8105),f=128,d=1<<22,h=1<<22,p=u("!(lo>=p0)&&!(p1>=hi)"),m=u("lo===p0"),g=u("lo<p0"),v=u("hi<=p0"),y=u("lo<=p0&&p0<=hi"),b=u("lo<p0&&p0<=hi"),x=6,_=2,w=r.mallocInt32(1024),A=r.mallocDouble(1024);function k(e,t,n,r,i,a,o,s,l){var c=x*e;w[c]=t,w[c+1]=n,w[c+2]=r,w[c+3]=i,w[c+4]=a,w[c+5]=o;var u=_*e;A[u]=s,A[u+1]=l}function E(e,t,n,r,i,a,o,s,l,c,u){var f=2*e,d=l*f,h=c[d+t];e:for(var p=i,m=i*f;p<a;++p,m+=f){var g=o[m+t],v=o[m+t+e];if(!(h<g||v<h)&&(!r||h!==g)){for(var y,b=s[p],x=t+1;x<e;++x){g=o[m+x],v=o[m+x+e];var _=c[d+x],w=c[d+x+e];if(v<_||w<g)continue e}if(void 0!==(y=r?n(u,b):n(b,u)))return y}}}function T(e,t,n,r,i,a,o,s,l,c){var u=2*e,f=s*u,d=l[f+t];e:for(var h=r,p=r*u;h<i;++h,p+=u){var m=o[h];if(m!==c){var g=a[p+t],v=a[p+t+e];if(!(d<g||v<d)){for(var y=t+1;y<e;++y){g=a[p+y],v=a[p+y+e];var b=l[f+y],x=l[f+y+e];if(v<b||x<g)continue e}var _=n(m,c);if(void 0!==_)return _}}}}},3545:function(e,t,n){"use strict";e.exports=function(e,t,n,o,s,l){if(o<=n+1)return n;var c=n,u=o,f=o+n>>>1,d=2*e,h=f,p=s[d*f+t];for(;c<u;){if(u-c<i){a(e,t,c,u,s,l),p=s[d*f+t];break}var m=u-c,g=Math.random()*m+c|0,v=s[d*g+t],y=Math.random()*m+c|0,b=s[d*y+t],x=Math.random()*m+c|0,_=s[d*x+t];v<=b?_>=b?(h=y,p=b):v>=_?(h=g,p=v):(h=x,p=_):b>=_?(h=y,p=b):_>=v?(h=g,p=v):(h=x,p=_);for(var w=d*(u-1),A=d*h,k=0;k<d;++k,++w,++A){var E=s[w];s[w]=s[A],s[A]=E}var T=l[u-1];l[u-1]=l[h],l[h]=T;for(w=d*(u-1),A=d*(h=r(e,t,c,u-1,s,l,p)),k=0;k<d;++k,++w,++A){E=s[w];s[w]=s[A],s[A]=E}T=l[u-1];if(l[u-1]=l[h],l[h]=T,f<h){for(u=h-1;c<u&&s[d*(u-1)+t]===p;)u-=1;u+=1}else{if(!(h<f))break;for(c=h+1;c<u&&s[d*c+t]===p;)c+=1}}return r(e,t,n,f,s,l,s[d*f+t])};var r=n(8105)("lo<p0"),i=8;function a(e,t,n,r,i,a){for(var o=2*e,s=o*(n+1)+t,l=n+1;l<r;++l,s+=o)for(var c=i[s],u=l,f=o*(l-1);u>n&&i[f+t]>c;--u,f-=o){for(var d=f,h=f+o,p=0;p<o;++p,++d,++h){var m=i[d];i[d]=i[h],i[h]=m}var g=a[u];a[u]=a[u-1],a[u-1]=g}}},8105:function(e){"use strict";e.exports=function(e){return t[e]};var t={"lo===p0":function(e,t,n,r,i,a,o){for(var s=2*e,l=s*n,c=l,u=n,f=t,d=n;r>d;++d,l+=s){if(i[l+f]===o)if(u===d)u+=1,c+=s;else{for(var h=0;s>h;++h){var p=i[l+h];i[l+h]=i[c],i[c++]=p}var m=a[d];a[d]=a[u],a[u++]=m}}return u},"lo<p0":function(e,t,n,r,i,a,o){for(var s=2*e,l=s*n,c=l,u=n,f=t,d=n;r>d;++d,l+=s){if(i[l+f]<o)if(u===d)u+=1,c+=s;else{for(var h=0;s>h;++h){var p=i[l+h];i[l+h]=i[c],i[c++]=p}var m=a[d];a[d]=a[u],a[u++]=m}}return u},"lo<=p0":function(e,t,n,r,i,a,o){for(var s=2*e,l=s*n,c=l,u=n,f=e+t,d=n;r>d;++d,l+=s){if(i[l+f]<=o)if(u===d)u+=1,c+=s;else{for(var h=0;s>h;++h){var p=i[l+h];i[l+h]=i[c],i[c++]=p}var m=a[d];a[d]=a[u],a[u++]=m}}return u},"hi<=p0":function(e,t,n,r,i,a,o){for(var s=2*e,l=s*n,c=l,u=n,f=e+t,d=n;r>d;++d,l+=s){if(i[l+f]<=o)if(u===d)u+=1,c+=s;else{for(var h=0;s>h;++h){var p=i[l+h];i[l+h]=i[c],i[c++]=p}var m=a[d];a[d]=a[u],a[u++]=m}}return u},"lo<p0&&p0<=hi":function(e,t,n,r,i,a,o){for(var s=2*e,l=s*n,c=l,u=n,f=t,d=e+t,h=n;r>h;++h,l+=s){var p=i[l+f],m=i[l+d];if(p<o&&o<=m)if(u===h)u+=1,c+=s;else{for(var g=0;s>g;++g){var v=i[l+g];i[l+g]=i[c],i[c++]=v}var y=a[h];a[h]=a[u],a[u++]=y}}return u},"lo<=p0&&p0<=hi":function(e,t,n,r,i,a,o){for(var s=2*e,l=s*n,c=l,u=n,f=t,d=e+t,h=n;r>h;++h,l+=s){var p=i[l+f],m=i[l+d];if(p<=o&&o<=m)if(u===h)u+=1,c+=s;else{for(var g=0;s>g;++g){var v=i[l+g];i[l+g]=i[c],i[c++]=v}var y=a[h];a[h]=a[u],a[u++]=y}}return u},"!(lo>=p0)&&!(p1>=hi)":function(e,t,n,r,i,a,o,s){for(var l=2*e,c=l*n,u=c,f=n,d=t,h=e+t,p=n;r>p;++p,c+=l){var m=i[c+d],g=i[c+h];if(!(m>=o||s>=g))if(f===p)f+=1,u+=l;else{for(var v=0;l>v;++v){var y=i[c+v];i[c+v]=i[u],i[u++]=y}var b=a[p];a[p]=a[f],a[f++]=b}}return f}}},1811:function(e){"use strict";e.exports=function(e,r){r<=4*t?n(0,r-1,e):c(0,r-1,e)};var t=32;function n(e,t,n){for(var r=2*(e+1),i=e+1;i<=t;++i){for(var a=n[r++],o=n[r++],s=i,l=r-2;s-- >e;){var c=n[l-2],u=n[l-1];if(c<a)break;if(c===a&&u<o)break;n[l]=c,n[l+1]=u,l-=2}n[l]=a,n[l+1]=o}}function r(e,t,n){t*=2;var r=n[e*=2],i=n[e+1];n[e]=n[t],n[e+1]=n[t+1],n[t]=r,n[t+1]=i}function i(e,t,n){t*=2,n[e*=2]=n[t],n[e+1]=n[t+1]}function a(e,t,n,r){t*=2,n*=2;var i=r[e*=2],a=r[e+1];r[e]=r[t],r[e+1]=r[t+1],r[t]=r[n],r[t+1]=r[n+1],r[n]=i,r[n+1]=a}function o(e,t,n,r,i){t*=2,i[e*=2]=i[t],i[t]=n,i[e+1]=i[t+1],i[t+1]=r}function s(e,t,n){t*=2;var r=n[e*=2],i=n[t];return!(r<i)&&(r!==i||n[e+1]>n[t+1])}function l(e,t,n,r){var i=r[e*=2];return i<t||i===t&&r[e+1]<n}function c(e,u,f){var d=(u-e+1)/6|0,h=e+d,p=u-d,m=e+u>>1,g=m-d,v=m+d,y=h,b=g,x=m,_=v,w=p,A=e+1,k=u-1,E=0;s(y,b,f)&&(E=y,y=b,b=E),s(_,w,f)&&(E=_,_=w,w=E),s(y,x,f)&&(E=y,y=x,x=E),s(b,x,f)&&(E=b,b=x,x=E),s(y,_,f)&&(E=y,y=_,_=E),s(x,_,f)&&(E=x,x=_,_=E),s(b,w,f)&&(E=b,b=w,w=E),s(b,x,f)&&(E=b,b=x,x=E),s(_,w,f)&&(E=_,_=w,w=E);for(var T=f[2*b],M=f[2*b+1],S=f[2*_],C=f[2*_+1],O=2*y,R=2*x,N=2*w,L=2*h,D=2*m,P=2*p,I=0;I<2;++I){var F=f[O+I],z=f[R+I],j=f[N+I];f[L+I]=F,f[D+I]=z,f[P+I]=j}i(g,e,f),i(v,u,f);for(var B=A;B<=k;++B)if(l(B,T,M,f))B!==A&&r(B,A,f),++A;else if(!l(B,S,C,f))for(;;){if(l(k,S,C,f)){l(k,T,M,f)?(a(B,A,k,f),++A,--k):(r(B,k,f),--k);break}if(--k<B)break}o(e,A-1,T,M,f),o(u,k+1,S,C,f),A-2-e<=t?n(e,A-2,f):c(e,A-2,f),u-(k+2)<=t?n(k+2,u,f):c(k+2,u,f),k-A<=t?n(A,k,f):c(A,k,f)}},855:function(e,t,n){"use strict";e.exports={init:function(e){var t=i.nextPow2(e);l.length<t&&(r.free(l),l=r.mallocInt32(t));c.length<t&&(r.free(c),c=r.mallocInt32(t));u.length<t&&(r.free(u),u=r.mallocInt32(t));f.length<t&&(r.free(f),f=r.mallocInt32(t));d.length<t&&(r.free(d),d=r.mallocInt32(t));h.length<t&&(r.free(h),h=r.mallocInt32(t));var n=8*t;p.length<n&&(r.free(p),p=r.mallocDouble(n))},sweepBipartite:function(e,t,n,r,i,s,d,h,v,y){for(var b=0,x=2*e,_=e-1,w=x-1,A=n;A<r;++A){var k=s[A],E=x*A;p[b++]=i[E+_],p[b++]=-(k+1),p[b++]=i[E+w],p[b++]=k}for(A=d;A<h;++A){k=y[A]+o;var T=x*A;p[b++]=v[T+_],p[b++]=-k,p[b++]=v[T+w],p[b++]=k}var M=b>>>1;a(p,M);var S=0,C=0;for(A=0;A<M;++A){var O=0|p[2*A+1];if(O>=o)m(u,f,C--,O=O-o|0);else if(O>=0)m(l,c,S--,O);else if(O<=-o){O=-O-o|0;for(var R=0;R<S;++R){if(void 0!==(N=t(l[R],O)))return N}g(u,f,C++,O)}else{O=-O-1|0;for(R=0;R<C;++R){var N;if(void 0!==(N=t(O,u[R])))return N}g(l,c,S++,O)}}},sweepComplete:function(e,t,n,r,i,o,s,v,y,b){for(var x=0,_=2*e,w=e-1,A=_-1,k=n;k<r;++k){var E=o[k]+1<<1,T=_*k;p[x++]=i[T+w],p[x++]=-E,p[x++]=i[T+A],p[x++]=E}for(k=s;k<v;++k){E=b[k]+1<<1;var M=_*k;p[x++]=y[M+w],p[x++]=1|-E,p[x++]=y[M+A],p[x++]=1|E}var S=x>>>1;a(p,S);var C=0,O=0,R=0;for(k=0;k<S;++k){var N=0|p[2*k+1],L=1&N;if(k<S-1&&N>>1==p[2*k+3]>>1&&(L=2,k+=1),N<0){for(var D=-(N>>1)-1,P=0;P<R;++P){if(void 0!==(I=t(d[P],D)))return I}if(0!==L)for(P=0;P<C;++P){if(void 0!==(I=t(l[P],D)))return I}if(1!==L)for(P=0;P<O;++P){var I;if(void 0!==(I=t(u[P],D)))return I}0===L?g(l,c,C++,D):1===L?g(u,f,O++,D):2===L&&g(d,h,R++,D)}else{D=(N>>1)-1;0===L?m(l,c,C--,D):1===L?m(u,f,O--,D):2===L&&m(d,h,R--,D)}}},scanBipartite:function(e,t,n,r,i,s,u,f,d,h,v,y){var b=0,x=2*e,_=t,w=t+e,A=1,k=1;r?k=o:A=o;for(var E=i;E<s;++E){var T=E+A,M=x*E;p[b++]=u[M+_],p[b++]=-T,p[b++]=u[M+w],p[b++]=T}for(E=d;E<h;++E){T=E+k;var S=x*E;p[b++]=v[S+_],p[b++]=-T}var C=b>>>1;a(p,C);var O=0;for(E=0;E<C;++E){var R=0|p[2*E+1];if(R<0){var N=!1;if((T=-R)>=o?(N=!r,T-=o):(N=!!r,T-=1),N)g(l,c,O++,T);else{var L=y[T],D=x*T,P=v[D+t+1],I=v[D+t+1+e];e:for(var F=0;F<O;++F){var z=l[F],j=x*z;if(!(I<u[j+t+1]||u[j+t+1+e]<P)){for(var B=t+2;B<e;++B)if(v[D+B+e]<u[j+B]||u[j+B+e]<v[D+B])continue e;var U,$=f[z];if(void 0!==(U=r?n(L,$):n($,L)))return U}}}}else m(l,c,O--,R-A)}},scanComplete:function(e,t,n,r,i,s,c,u,f,d,h){for(var m=0,g=2*e,v=t,y=t+e,b=r;b<i;++b){var x=b+o,_=g*b;p[m++]=s[_+v],p[m++]=-x,p[m++]=s[_+y],p[m++]=x}for(b=u;b<f;++b){x=b+1;var w=g*b;p[m++]=d[w+v],p[m++]=-x}var A=m>>>1;a(p,A);var k=0;for(b=0;b<A;++b){var E=0|p[2*b+1];if(E<0){if((x=-E)>=o)l[k++]=x-o;else{var T=h[x-=1],M=g*x,S=d[M+t+1],C=d[M+t+1+e];e:for(var O=0;O<k;++O){var R=l[O],N=c[R];if(N===T)break;var L=g*R;if(!(C<s[L+t+1]||s[L+t+1+e]<S)){for(var D=t+2;D<e;++D)if(d[M+D+e]<s[L+D]||s[L+D+e]<d[M+D])continue e;var P=n(N,T);if(void 0!==P)return P}}}}else{for(x=E-o,O=k-1;O>=0;--O)if(l[O]===x){for(D=O+1;D<k;++D)l[D-1]=l[D];break}--k}}}};var r=n(1888),i=n(8828),a=n(1811),o=1<<28,s=1024,l=r.mallocInt32(s),c=r.mallocInt32(s),u=r.mallocInt32(s),f=r.mallocInt32(s),d=r.mallocInt32(s),h=r.mallocInt32(s),p=r.mallocDouble(8192);function m(e,t,n,r){var i=t[r],a=e[n-1];e[i]=a,t[a]=i}function g(e,t,n,r){e[n]=r,t[r]=n}},2538:function(e,t,n){"use strict";var r=n(8902),i=n(5542),a=n(2272),o=n(5023);function s(e){return[Math.min(e[0],e[1]),Math.max(e[0],e[1])]}function l(e,t){return e[0]-t[0]||e[1]-t[1]}function c(e,t,n){return t in e?e[t]:n}e.exports=function(e,t,n){Array.isArray(t)?(n=n||{},t=t||[]):(n=t||{},t=[]);var u=!!c(n,"delaunay",!0),f=!!c(n,"interior",!0),d=!!c(n,"exterior",!0),h=!!c(n,"infinity",!1);if(!f&&!d||0===e.length)return[];var p=r(e,t);if(u||f!==d||h){for(var m=i(e.length,function(e){return e.map(s).sort(l)}(t)),g=0;g<p.length;++g){var v=p[g];m.addTriangle(v[0],v[1],v[2])}return u&&a(e,m),d?f?h?o(m,0,h):m.cells():o(m,1,h):o(m,-1)}return p}},2272:function(e,t,n){"use strict";var r=n(2646)[4];n(2478);function i(e,t,n,i,a,o){var s=t.opposite(i,a);if(!(s<0)){if(a<i){var l=i;i=a,a=l,l=o,o=s,s=l}t.isConstraint(i,a)||r(e[i],e[a],e[o],e[s])<0&&n.push(i,a)}}e.exports=function(e,t){for(var n=[],a=e.length,o=t.stars,s=0;s<a;++s)for(var l=o[s],c=1;c<l.length;c+=2){if(!((h=l[c])<s)&&!t.isConstraint(s,h)){for(var u=l[c-1],f=-1,d=1;d<l.length;d+=2)if(l[d-1]===h){f=l[d];break}f<0||r(e[s],e[h],e[u],e[f])<0&&n.push(s,h)}}for(;n.length>0;){for(var h=n.pop(),p=(u=-1,f=-1,l=o[s=n.pop()],1);p<l.length;p+=2){var m=l[p-1],g=l[p];m===h?f=g:g===h&&(u=m)}u<0||f<0||(r(e[s],e[h],e[u],e[f])>=0||(t.flip(s,h),i(e,t,n,u,s,f),i(e,t,n,s,f,u),i(e,t,n,f,h,u),i(e,t,n,h,u,f)))}}},5023:function(e,t,n){"use strict";var r,i=n(2478);function a(e,t,n,r,i,a,o){this.cells=e,this.neighbor=t,this.flags=r,this.constraint=n,this.active=i,this.next=a,this.boundary=o}function o(e,t){return e[0]-t[0]||e[1]-t[1]||e[2]-t[2]}e.exports=function(e,t,n){var r=function(e,t){for(var n=e.cells(),r=n.length,i=0;i<r;++i){var s=(v=n[i])[0],l=v[1],c=v[2];l<c?l<s&&(v[0]=l,v[1]=c,v[2]=s):c<s&&(v[0]=c,v[1]=s,v[2]=l)}n.sort(o);var u=new Array(r);for(i=0;i<u.length;++i)u[i]=0;var f=[],d=[],h=new Array(3*r),p=new Array(3*r),m=null;t&&(m=[]);var g=new a(n,h,p,u,f,d,m);for(i=0;i<r;++i)for(var v=n[i],y=0;y<3;++y){s=v[y],l=v[(y+1)%3];var b=h[3*i+y]=g.locate(l,s,e.opposite(l,s)),x=p[3*i+y]=e.isConstraint(s,l);b<0&&(x?d.push(i):(f.push(i),u[i]=1),t&&m.push([l,s,-1]))}return g}(e,n);if(0===t)return n?r.cells.concat(r.boundary):r.cells;var i=1,s=r.active,l=r.next,c=r.flags,u=r.cells,f=r.constraint,d=r.neighbor;for(;s.length>0||l.length>0;){for(;s.length>0;){var h=s.pop();if(c[h]!==-i){c[h]=i;u[h];for(var p=0;p<3;++p){var m=d[3*h+p];m>=0&&0===c[m]&&(f[3*h+p]?l.push(m):(s.push(m),c[m]=i))}}}var g=l;l=s,s=g,l.length=0,i=-i}var v=function(e,t,n){for(var r=0,i=0;i<e.length;++i)t[i]===n&&(e[r++]=e[i]);return e.length=r,e}(u,c,t);if(n)return v.concat(r.boundary);return v},a.prototype.locate=(r=[0,0,0],function(e,t,n){var a=e,s=t,l=n;return t<n?t<e&&(a=t,s=n,l=e):n<e&&(a=n,s=e,l=t),a<0?-1:(r[0]=a,r[1]=s,r[2]=l,i.eq(this.cells,r,o))})},8902:function(e,t,n){"use strict";var r=n(2478),i=n(3250)[3];function a(e,t,n,r,i){this.a=e,this.b=t,this.idx=n,this.lowerIds=r,this.upperIds=i}function o(e,t,n,r){this.a=e,this.b=t,this.type=n,this.idx=r}function s(e,t){var n=e.a[0]-t.a[0]||e.a[1]-t.a[1]||e.type-t.type;return n||(0!==e.type&&(n=i(e.a,e.b,t.b))?n:e.idx-t.idx)}function l(e,t){return i(e.a,e.b,t)}function c(e,t,n,a,o){for(var s=r.lt(t,a,l),c=r.gt(t,a,l),u=s;u<c;++u){for(var f=t[u],d=f.lowerIds,h=d.length;h>1&&i(n[d[h-2]],n[d[h-1]],a)>0;)e.push([d[h-1],d[h-2],o]),h-=1;d.length=h,d.push(o);var p=f.upperIds;for(h=p.length;h>1&&i(n[p[h-2]],n[p[h-1]],a)<0;)e.push([p[h-2],p[h-1],o]),h-=1;p.length=h,p.push(o)}}function u(e,t){var n;return(n=e.a[0]<t.a[0]?i(e.a,e.b,t.a):i(t.b,t.a,e.a))?n:(n=t.b[0]<e.b[0]?i(e.a,e.b,t.b):i(t.b,t.a,e.b))||e.idx-t.idx}function f(e,t,n){var i=r.le(e,n,u),o=e[i],s=o.upperIds,l=s[s.length-1];o.upperIds=[l],e.splice(i+1,0,new a(n.a,n.b,n.idx,[l],s))}function d(e,t,n){var i=n.a;n.a=n.b,n.b=i;var a=r.eq(e,n,u),o=e[a];e[a-1].upperIds=o.upperIds,e.splice(a,1)}e.exports=function(e,t){for(var n=e.length,r=t.length,i=[],l=0;l<n;++l)i.push(new o(e[l],null,0,l));for(l=0;l<r;++l){var u=t[l],h=e[u[0]],p=e[u[1]];h[0]<p[0]?i.push(new o(h,p,2,l),new o(p,h,1,l)):h[0]>p[0]&&i.push(new o(p,h,2,l),new o(h,p,1,l))}i.sort(s);for(var m=i[0].a[0]-(1+Math.abs(i[0].a[0]))*Math.pow(2,-52),g=[new a([m,1],[m,0],-1,[],[],[],[])],v=[],y=(l=0,i.length);l<y;++l){var b=i[l],x=b.type;0===x?c(v,g,e,b.a,b.idx):2===x?f(g,e,b):d(g,e,b)}return v}},5542:function(e,t,n){"use strict";var r=n(2478);function i(e,t){this.stars=e,this.edges=t}e.exports=function(e,t){for(var n=new Array(e),r=0;r<e;++r)n[r]=[];return new i(n,t)};var a=i.prototype;function o(e,t,n){for(var r=1,i=e.length;r<i;r+=2)if(e[r-1]===t&&e[r]===n)return e[r-1]=e[i-2],e[r]=e[i-1],void(e.length=i-2)}a.isConstraint=function(){var e=[0,0];function t(e,t){return e[0]-t[0]||e[1]-t[1]}return function(n,i){return e[0]=Math.min(n,i),e[1]=Math.max(n,i),r.eq(this.edges,e,t)>=0}}(),a.removeTriangle=function(e,t,n){var r=this.stars;o(r[e],t,n),o(r[t],n,e),o(r[n],e,t)},a.addTriangle=function(e,t,n){var r=this.stars;r[e].push(t,n),r[t].push(n,e),r[n].push(e,t)},a.opposite=function(e,t){for(var n=this.stars[t],r=1,i=n.length;r<i;r+=2)if(n[r]===e)return n[r-1];return-1},a.flip=function(e,t){var n=this.opposite(e,t),r=this.opposite(t,e);this.removeTriangle(e,t,n),this.removeTriangle(t,e,r),this.addTriangle(e,r,n),this.addTriangle(t,n,r)},a.edges=function(){for(var e=this.stars,t=[],n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length;a<o;a+=2)t.push([i[a],i[a+1]]);return t},a.cells=function(){for(var e=this.stars,t=[],n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length;a<o;a+=2){var s=i[a],l=i[a+1];n<Math.min(s,l)&&t.push([n,s,l])}return t}},2419:function(e){"use strict";e.exports=function(e){for(var t=1,n=1;n<e.length;++n)for(var r=0;r<n;++r)if(e[n]<e[r])t=-t;else if(e[r]===e[n])return 0;return t}},3628:function(e,t,n){"use strict";var r=n(1338),i=n(727);function a(e,t){for(var n=0,r=e.length,i=0;i<r;++i)n+=e[i]*t[i];return n}function o(e){var t=e.length;if(0===t)return[];e[0].length;var n=r([e.length+1,e.length+1],1),o=r([e.length+1],1);n[t][t]=0;for(var s=0;s<t;++s){for(var l=0;l<=s;++l)n[l][s]=n[s][l]=2*a(e[s],e[l]);o[s]=a(e[s],e[s])}var c=i(n,o),u=0,f=c[t+1];for(s=0;s<f.length;++s)u+=f[s];var d=new Array(t);for(s=0;s<t;++s){f=c[s];var h=0;for(l=0;l<f.length;++l)h+=f[l];d[s]=h/u}return d}function s(e){if(0===e.length)return[];for(var t=e[0].length,n=r([t]),i=o(e),a=0;a<e.length;++a)for(var s=0;s<t;++s)n[s]+=e[a][s]*i[a];return n}s.barycenetric=o,e.exports=s},6037:function(e,t,n){e.exports=function(e){for(var t=r(e),n=0,i=0;i<e.length;++i)for(var a=e[i],o=0;o<t.length;++o)n+=Math.pow(a[o]-t[o],2);return Math.sqrt(n/e.length)};var r=n(3628)},332:function(e,t,n){"use strict";e.exports=function(e,t,n){var r;if(n){r=t;for(var i=new Array(t.length),a=0;a<t.length;++a){var o=t[a];i[a]=[o[0],o[1],n[a]]}t=i}var s=function(e,t,n){var r=p(e,[],h(e));return v(t,r,n),!!r}(e,t,!!n);for(;y(e,t,!!n);)s=!0;if(n&&s){r.length=0,n.length=0;for(a=0;a<t.length;++a){o=t[a];r.push([o[0],o[1]]),n.push(o[2])}}return s};var r=n(1755),i=n(6867),a=n(1125),o=n(7842),s=n(1318),l=n(946),c=n(5838),u=n(1278),f=n(3637);function d(e){var t=l(e);return[u(t,-1/0),u(t,1/0)]}function h(e){for(var t=new Array(e.length),n=0;n<e.length;++n){var r=e[n];t[n]=[u(r[0],-1/0),u(r[1],-1/0),u(r[0],1/0),u(r[1],1/0)]}return t}function p(e,t,n){for(var a=t.length,o=new r(a),s=[],l=0;l<t.length;++l){var c=t[l],f=d(c[0]),h=d(c[1]);s.push([u(f[0],-1/0),u(h[0],-1/0),u(f[1],1/0),u(h[1],1/0)])}i(s,(function(e,t){o.link(e,t)}));var p=!0,m=new Array(a);for(l=0;l<a;++l){(v=o.find(l))!==l&&(p=!1,e[v]=[Math.min(e[l][0],e[v][0]),Math.min(e[l][1],e[v][1])])}if(p)return null;var g=0;for(l=0;l<a;++l){var v;(v=o.find(l))===l?(m[l]=g,e[g++]=e[l]):m[l]=-1}e.length=g;for(l=0;l<a;++l)m[l]<0&&(m[l]=m[o.find(l)]);return m}function m(e,t){return e[0]-t[0]||e[1]-t[1]}function g(e,t){var n=e[0]-t[0]||e[1]-t[1];return n||(e[2]<t[2]?-1:e[2]>t[2]?1:0)}function v(e,t,n){if(0!==e.length){if(t)for(var r=0;r<e.length;++r){var i=t[(o=e[r])[0]],a=t[o[1]];o[0]=Math.min(i,a),o[1]=Math.max(i,a)}else for(r=0;r<e.length;++r){var o;i=(o=e[r])[0],a=o[1];o[0]=Math.min(i,a),o[1]=Math.max(i,a)}n?e.sort(g):e.sort(m);var s=1;for(r=1;r<e.length;++r){var l=e[r-1],c=e[r];(c[0]!==l[0]||c[1]!==l[1]||n&&c[2]!==l[2])&&(e[s++]=c)}e.length=s}}function y(e,t,n){var r=function(e,t){for(var n=new Array(t.length),r=0;r<t.length;++r){var i=t[r],a=e[i[0]],o=e[i[1]];n[r]=[u(Math.min(a[0],o[0]),-1/0),u(Math.min(a[1],o[1]),-1/0),u(Math.max(a[0],o[0]),1/0),u(Math.max(a[1],o[1]),1/0)]}return n}(e,t),d=function(e,t,n){var r=[];return i(n,(function(n,i){var o=t[n],s=t[i];if(o[0]!==s[0]&&o[0]!==s[1]&&o[1]!==s[0]&&o[1]!==s[1]){var l=e[o[0]],c=e[o[1]],u=e[s[0]],f=e[s[1]];a(l,c,u,f)&&r.push([n,i])}})),r}(e,t,r),m=h(e),g=function(e,t,n,r){var o=[];return i(n,r,(function(n,r){var i=t[n];if(i[0]!==r&&i[1]!==r){var s=e[r],l=e[i[0]],c=e[i[1]];a(l,c,s,s)&&o.push([n,r])}})),o}(e,t,r,m),y=function(e,t,n,r,i){var a,u,d=e.map((function(e){return[o(e[0]),o(e[1])]}));for(a=0;a<n.length;++a){var h=n[a];u=h[0];var p=h[1],m=t[u],g=t[p],v=f(c(e[m[0]]),c(e[m[1]]),c(e[g[0]]),c(e[g[1]]));if(v){var y=e.length;e.push([l(v[0]),l(v[1])]),d.push(v),r.push([u,y],[p,y])}}for(r.sort((function(e,t){if(e[0]!==t[0])return e[0]-t[0];var n=d[e[1]],r=d[t[1]];return s(n[0],r[0])||s(n[1],r[1])})),a=r.length-1;a>=0;--a){var b=t[u=(M=r[a])[0]],x=b[0],_=b[1],w=e[x],A=e[_];if((w[0]-A[0]||w[1]-A[1])<0){var k=x;x=_,_=k}b[0]=x;var E,T=b[1]=M[1];for(i&&(E=b[2]);a>0&&r[a-1][0]===u;){var M,S=(M=r[--a])[1];i?t.push([T,S,E]):t.push([T,S]),T=S}i?t.push([T,_,E]):t.push([T,_])}return d}(e,t,d,g,n),b=p(e,y);return v(t,b,n),!!b||(d.length>0||g.length>0)}},3637:function(e,t,n){"use strict";e.exports=function(e,t,n,r){var a=s(t,e),f=s(r,n),d=u(a,f);if(0===o(d))return null;var h=s(e,n),p=u(f,h),m=i(p,d),g=c(a,m);return l(e,g)};var r=n(6504),i=n(8697),a=n(5572),o=n(7721),s=n(544),l=n(2653),c=n(8987);function u(e,t){return a(r(e[0],t[1]),r(e[1],t[0]))}},3642:function(e){e.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},6729:function(e,t,n){"use strict";var r=n(3642),i=n(395);function a(e){return[e[0]/255,e[1]/255,e[2]/255,e[3]]}function o(e){for(var t,n="#",r=0;r<3;++r)n+=("00"+(t=(t=e[r]).toString(16))).substr(t.length);return n}function s(e){return"rgba("+e.join(",")+")"}e.exports=function(e){var t,n,l,c,u,f,d,h,p,m;e||(e={});h=(e.nshades||72)-1,d=e.format||"hex",(f=e.colormap)||(f="jet");if("string"==typeof f){if(f=f.toLowerCase(),!r[f])throw Error(f+" not a supported colorscale");u=r[f]}else{if(!Array.isArray(f))throw Error("unsupported colormap option",f);u=f.slice()}if(u.length>h+1)throw new Error(f+" map requires nshades to be at least size "+u.length);p=Array.isArray(e.alpha)?2!==e.alpha.length?[1,1]:e.alpha.slice():"number"==typeof e.alpha?[e.alpha,e.alpha]:[1,1];t=u.map((function(e){return Math.round(e.index*h)})),p[0]=Math.min(Math.max(p[0],0),1),p[1]=Math.min(Math.max(p[1],0),1);var g=u.map((function(e,t){var n=u[t].index,r=u[t].rgb.slice();return 4===r.length&&r[3]>=0&&r[3]<=1||(r[3]=p[0]+(p[1]-p[0])*n),r})),v=[];for(m=0;m<t.length-1;++m){c=t[m+1]-t[m],n=g[m],l=g[m+1];for(var y=0;y<c;y++){var b=y/c;v.push([Math.round(i(n[0],l[0],b)),Math.round(i(n[1],l[1],b)),Math.round(i(n[2],l[2],b)),i(n[3],l[3],b)])}}v.push(u[u.length-1].rgb.concat(p[1])),"hex"===d?v=v.map(o):"rgbaString"===d?v=v.map(s):"float"===d&&(v=v.map(a));return v}},3140:function(e,t,n){"use strict";e.exports=function(e,t,n,a){var o=r(t,n,a);if(0===o){var s=i(r(e,t,n)),c=i(r(e,t,a));if(s===c){if(0===s){var u=l(e,t,n);return u===l(e,t,a)?0:u?1:-1}return 0}return 0===c?s>0||l(e,t,a)?-1:1:0===s?c>0||l(e,t,n)?1:-1:i(c-s)}var f=r(e,t,n);return f>0?o>0&&r(e,t,a)>0?1:-1:f<0?o>0||r(e,t,a)>0?1:-1:r(e,t,a)>0||l(e,t,n)?1:-1};var r=n(3250),i=n(8572),a=n(9362),o=n(5382),s=n(8210);function l(e,t,n){var r=a(e[0],-t[0]),i=a(e[1],-t[1]),l=a(n[0],-t[0]),c=a(n[1],-t[1]),u=s(o(r,l),o(i,c));return u[u.length-1]>=0}},8572:function(e){"use strict";e.exports=function(e){return e<0?-1:e>0?1:0}},8507:function(e){e.exports=function(e,r){var i=e.length,a=e.length-r.length;if(a)return a;switch(i){case 0:return 0;case 1:return e[0]-r[0];case 2:return e[0]+e[1]-r[0]-r[1]||t(e[0],e[1])-t(r[0],r[1]);case 3:var o=e[0]+e[1],s=r[0]+r[1];if(a=o+e[2]-(s+r[2]))return a;var l=t(e[0],e[1]),c=t(r[0],r[1]);return t(l,e[2])-t(c,r[2])||t(l+e[2],o)-t(c+r[2],s);case 4:var u=e[0],f=e[1],d=e[2],h=e[3],p=r[0],m=r[1],g=r[2],v=r[3];return u+f+d+h-(p+m+g+v)||t(u,f,d,h)-t(p,m,g,v,p)||t(u+f,u+d,u+h,f+d,f+h,d+h)-t(p+m,p+g,p+v,m+g,m+v,g+v)||t(u+f+d,u+f+h,u+d+h,f+d+h)-t(p+m+g,p+m+v,p+g+v,m+g+v);default:for(var y=e.slice().sort(n),b=r.slice().sort(n),x=0;x<i;++x)if(a=y[x]-b[x])return a;return 0}};var t=Math.min;function n(e,t){return e-t}},3788:function(e,t,n){"use strict";var r=n(8507),i=n(2419);e.exports=function(e,t){return r(e,t)||i(e)-i(t)}},7352:function(e,t,n){"use strict";var r=n(5721),i=n(4750),a=n(2690);e.exports=function(e){var t=e.length;if(0===t)return[];if(1===t)return[[0]];var n=e[0].length;if(0===n)return[];if(1===n)return r(e);if(2===n)return i(e);return a(e,n)}},5721:function(e){"use strict";e.exports=function(e){for(var t=0,n=0,r=1;r<e.length;++r)e[r][0]<e[t][0]&&(t=r),e[r][0]>e[n][0]&&(n=r);return t<n?[[t],[n]]:t>n?[[n],[t]]:[[t]]}},4750:function(e,t,n){"use strict";e.exports=function(e){var t=r(e),n=t.length;if(n<=2)return[];for(var i=new Array(n),a=t[n-1],o=0;o<n;++o){var s=t[o];i[o]=[a,s],a=s}return i};var r=n(3090)},2690:function(e,t,n){"use strict";e.exports=function(e,t){try{return r(e,!0)}catch(o){var n=i(e);if(n.length<=t)return[];var a=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<t.length;++i)r[i]=e[t[i]];var a=t.length;for(i=0;i<n;++i)t.indexOf(i)<0&&(r[a++]=e[i]);return r}(e,n);return function(e,t){for(var n=e.length,r=t.length,i=0;i<n;++i)for(var a=e[i],o=0;o<a.length;++o){var s=a[o];if(s<r)a[o]=t[s];else{s-=r;for(var l=0;l<r;++l)s>=t[l]&&(s+=1);a[o]=s}}return e}(r(a,!0),n)}};var r=n(8954),i=n(3952)},4769:function(e){"use strict";e.exports=function(e,t,n,r,i,a){var o=i-1,s=i*i,l=o*o,c=(1+2*i)*l,u=i*l,f=s*(3-2*i),d=s*o;if(e.length){a||(a=new Array(e.length));for(var h=e.length-1;h>=0;--h)a[h]=c*e[h]+u*t[h]+f*n[h]+d*r[h];return a}return c*e+u*t+f*n+d*r},e.exports.derivative=function(e,t,n,r,i,a){var o=6*i*i-6*i,s=3*i*i-4*i+1,l=-6*i*i+6*i,c=3*i*i-2*i;if(e.length){a||(a=new Array(e.length));for(var u=e.length-1;u>=0;--u)a[u]=o*e[u]+s*t[u]+l*n[u]+c*r[u];return a}return o*e+s*t+l*n[u]+c*r}},7642:function(e,t,n){"use strict";var r=n(8954),i=n(1682);function a(e,t){this.point=e,this.index=t}function o(e,t){for(var n=e.point,r=t.point,i=n.length,a=0;a<i;++a){var o=r[a]-n[a];if(o)return o}return 0}e.exports=function(e,t){var n=e.length;if(0===n)return[];var s=e[0].length;if(s<1)return[];if(1===s)return function(e,t,n){if(1===e)return n?[[-1,0]]:[];var r=t.map((function(e,t){return[e[0],t]}));r.sort((function(e,t){return e[0]-t[0]}));for(var i=new Array(e-1),a=1;a<e;++a){var o=r[a-1],s=r[a];i[a-1]=[o[1],s[1]]}n&&i.push([-1,i[0][1]],[i[e-1][1],-1]);return i}(n,e,t);for(var l=new Array(n),c=1,u=0;u<n;++u){for(var f=e[u],d=new Array(s+1),h=0,p=0;p<s;++p){var m=f[p];d[p]=m,h+=m*m}d[s]=h,l[u]=new a(d,u),c=Math.max(h,c)}i(l,o),n=l.length;var g=new Array(n+s+1),v=new Array(n+s+1),y=(s+1)*(s+1)*c,b=new Array(s+1);for(u=0;u<=s;++u)b[u]=0;b[s]=y,g[0]=b.slice(),v[0]=-1;for(u=0;u<=s;++u){(d=b.slice())[u]=1,g[u+1]=d,v[u+1]=-1}for(u=0;u<n;++u){var x=l[u];g[u+s+1]=x.point,v[u+s+1]=x.index}var _=r(g,!1);_=t?_.filter((function(e){for(var t=0,n=0;n<=s;++n){var r=v[e[n]];if(r<0&&++t>=2)return!1;e[n]=r}return!0})):_.filter((function(e){for(var t=0;t<=s;++t){var n=v[e[t]];if(n<0)return!1;e[t]=n}return!0}));if(1&s)for(u=0;u<_.length;++u){d=(x=_[u])[0];x[0]=x[1],x[1]=d}return _}},2361:function(e){var t=!1;if("undefined"!=typeof Float64Array){var n=new Float64Array(1),r=new Uint32Array(n.buffer);if(n[0]=1,t=!0,1072693248===r[1]){e.exports=function(e){return n[0]=e,[r[0],r[1]]},e.exports.pack=function(e,t){return r[0]=e,r[1]=t,n[0]},e.exports.lo=function(e){return n[0]=e,r[0]},e.exports.hi=function(e){return n[0]=e,r[1]}}else if(1072693248===r[0]){e.exports=function(e){return n[0]=e,[r[1],r[0]]},e.exports.pack=function(e,t){return r[1]=e,r[0]=t,n[0]},e.exports.lo=function(e){return n[0]=e,r[1]},e.exports.hi=function(e){return n[0]=e,r[0]}}else t=!1}if(!t){var i=new Buffer(8);e.exports=function(e){return i.writeDoubleLE(e,0,!0),[i.readUInt32LE(0,!0),i.readUInt32LE(4,!0)]},e.exports.pack=function(e,t){return i.writeUInt32LE(e,0,!0),i.writeUInt32LE(t,4,!0),i.readDoubleLE(0,!0)},e.exports.lo=function(e){return i.writeDoubleLE(e,0,!0),i.readUInt32LE(0,!0)},e.exports.hi=function(e){return i.writeDoubleLE(e,0,!0),i.readUInt32LE(4,!0)}}e.exports.sign=function(t){return e.exports.hi(t)>>>31},e.exports.exponent=function(t){return(e.exports.hi(t)<<1>>>21)-1023},e.exports.fraction=function(t){var n=e.exports.lo(t),r=e.exports.hi(t),i=1048575&r;return 2146435072&r&&(i+=1<<20),[n,i]},e.exports.denormalized=function(t){return!(2146435072&e.exports.hi(t))}},1338:function(e){"use strict";function t(e,n,r){var i=0|e[r];if(i<=0)return[];var a,o=new Array(i);if(r===e.length-1)for(a=0;a<i;++a)o[a]=n;else for(a=0;a<i;++a)o[a]=t(e,n,r+1);return o}e.exports=function(e,n){switch(void 0===n&&(n=0),typeof e){case"number":if(e>0)return function(e,t){var n,r;for(n=new Array(e),r=0;r<e;++r)n[r]=t;return n}(0|e,n);break;case"object":if("number"==typeof e.length)return t(e,n,0)}return[]}},3134:function(e,t,n){"use strict";e.exports=function(e,t){var n=e.length;if("number"!=typeof t){t=0;for(var i=0;i<n;++i){var a=e[i];t=Math.max(t,a[0],a[1])}t=1+(0|t)}t|=0;var o=new Array(t);for(i=0;i<t;++i)o[i]=[];for(i=0;i<n;++i){o[(a=e[i])[0]].push(a[1]),o[a[1]].push(a[0])}for(var s=0;s<t;++s)r(o[s],(function(e,t){return e-t}));return o};var r=n(1682)},5033:function(e){"use strict";e.exports=function(e,t,n){var r=t||0,i=n||1;return[[e[12]+e[0],e[13]+e[1],e[14]+e[2],e[15]+e[3]],[e[12]-e[0],e[13]-e[1],e[14]-e[2],e[15]-e[3]],[e[12]+e[4],e[13]+e[5],e[14]+e[6],e[15]+e[7]],[e[12]-e[4],e[13]-e[5],e[14]-e[6],e[15]-e[7]],[r*e[12]+e[8],r*e[13]+e[9],r*e[14]+e[10],r*e[15]+e[11]],[i*e[12]-e[8],i*e[13]-e[9],i*e[14]-e[10],i*e[15]-e[11]]]}},9215:function(e,t,n){"use strict";e.exports=function(e,t,n){switch(arguments.length){case 0:return new o([0],[0],0);case 1:return"number"==typeof e?new o(r=l(e),r,0):new o(e,l(e.length),0);case 2:var r;if("number"==typeof t)return new o(e,r=l(e.length),+t);n=0;case 3:if(e.length!==t.length)throw new Error("state and velocity lengths must match");return new o(e,t,n)}};var r=n(4769),i=n(2478);function a(e,t,n){return Math.min(t,Math.max(e,n))}function o(e,t,n){this.dimension=e.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var r=0;r<this.dimension;++r)this.bounds[0][r]=-1/0,this.bounds[1][r]=1/0;this._state=e.slice().reverse(),this._velocity=t.slice().reverse(),this._time=[n],this._scratch=[e.slice(),e.slice(),e.slice(),e.slice(),e.slice()]}var s=o.prototype;function l(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}s.flush=function(e){var t=i.gt(this._time,e)-1;t<=0||(this._time.splice(0,t),this._state.splice(0,t*this.dimension),this._velocity.splice(0,t*this.dimension))},s.curve=function(e){var t=this._time,n=t.length,o=i.le(t,e),s=this._scratch[0],l=this._state,c=this._velocity,u=this.dimension,f=this.bounds;if(o<0)for(var d=u-1,h=0;h<u;++h,--d)s[h]=l[d];else if(o>=n-1){d=l.length-1;var p=e-t[n-1];for(h=0;h<u;++h,--d)s[h]=l[d]+p*c[d]}else{d=u*(o+1)-1;var m=t[o],g=t[o+1]-m||1,v=this._scratch[1],y=this._scratch[2],b=this._scratch[3],x=this._scratch[4],_=!0;for(h=0;h<u;++h,--d)v[h]=l[d],b[h]=c[d]*g,y[h]=l[d+u],x[h]=c[d+u]*g,_=_&&v[h]===y[h]&&b[h]===x[h]&&0===b[h];if(_)for(h=0;h<u;++h)s[h]=v[h];else r(v,b,y,x,(e-m)/g,s)}var w=f[0],A=f[1];for(h=0;h<u;++h)s[h]=a(w[h],A[h],s[h]);return s},s.dcurve=function(e){var t=this._time,n=t.length,a=i.le(t,e),o=this._scratch[0],s=this._state,l=this._velocity,c=this.dimension;if(a>=n-1)for(var u=s.length-1,f=(t[n-1],0);f<c;++f,--u)o[f]=l[u];else{u=c*(a+1)-1;var d=t[a],h=t[a+1]-d||1,p=this._scratch[1],m=this._scratch[2],g=this._scratch[3],v=this._scratch[4],y=!0;for(f=0;f<c;++f,--u)p[f]=s[u],g[f]=l[u]*h,m[f]=s[u+c],v[f]=l[u+c]*h,y=y&&p[f]===m[f]&&g[f]===v[f]&&0===g[f];if(y)for(f=0;f<c;++f)o[f]=0;else{r.derivative(p,g,m,v,(e-d)/h,o);for(f=0;f<c;++f)o[f]/=h}}return o},s.lastT=function(){var e=this._time;return e[e.length-1]},s.stable=function(){for(var e=this._velocity,t=e.length,n=this.dimension-1;n>=0;--n)if(e[--t])return!1;return!0},s.jump=function(e){var t=this.lastT(),n=this.dimension;if(!(e<t||arguments.length!==n+1)){var r=this._state,i=this._velocity,o=r.length-this.dimension,s=this.bounds,l=s[0],c=s[1];this._time.push(t,e);for(var u=0;u<2;++u)for(var f=0;f<n;++f)r.push(r[o++]),i.push(0);this._time.push(e);for(f=n;f>0;--f)r.push(a(l[f-1],c[f-1],arguments[f])),i.push(0)}},s.push=function(e){var t=this.lastT(),n=this.dimension;if(!(e<t||arguments.length!==n+1)){var r=this._state,i=this._velocity,o=r.length-this.dimension,s=e-t,l=this.bounds,c=l[0],u=l[1],f=s>1e-6?1/s:0;this._time.push(e);for(var d=n;d>0;--d){var h=a(c[d-1],u[d-1],arguments[d]);r.push(h),i.push((h-r[o++])*f)}}},s.set=function(e){var t=this.dimension;if(!(e<this.lastT()||arguments.length!==t+1)){var n=this._state,r=this._velocity,i=this.bounds,o=i[0],s=i[1];this._time.push(e);for(var l=t;l>0;--l)n.push(a(o[l-1],s[l-1],arguments[l])),r.push(0)}},s.move=function(e){var t=this.lastT(),n=this.dimension;if(!(e<=t||arguments.length!==n+1)){var r=this._state,i=this._velocity,o=r.length-this.dimension,s=this.bounds,l=s[0],c=s[1],u=e-t,f=u>1e-6?1/u:0;this._time.push(e);for(var d=n;d>0;--d){var h=arguments[d];r.push(a(l[d-1],c[d-1],r[o++]+h)),i.push(h*f)}}},s.idle=function(e){var t=this.lastT();if(!(e<t)){var n=this.dimension,r=this._state,i=this._velocity,o=r.length-n,s=this.bounds,l=s[0],c=s[1],u=e-t;this._time.push(e);for(var f=n-1;f>=0;--f)r.push(a(l[f],c[f],r[o]+u*i[o])),i.push(0),o+=1}}},3840:function(e){"use strict";e.exports=function(e){return new a(e||h,null)};function t(e,t,n,r,i,a){this._color=e,this.key=t,this.value=n,this.left=r,this.right=i,this._count=a}function n(e){return new t(e._color,e.key,e.value,e.left,e.right,e._count)}function r(e,n){return new t(e,n.key,n.value,n.left,n.right,n._count)}function i(e){e._count=1+(e.left?e.left._count:0)+(e.right?e.right._count:0)}function a(e,t){this._compare=e,this.root=t}var o=a.prototype;function s(e,t){var n;if(t.left&&(n=s(e,t.left)))return n;return(n=e(t.key,t.value))||(t.right?s(e,t.right):void 0)}function l(e,t,n,r){if(t(e,r.key)<=0){var i;if(r.left)if(i=l(e,t,n,r.left))return i;if(i=n(r.key,r.value))return i}if(r.right)return l(e,t,n,r.right)}function c(e,t,n,r,i){var a,o=n(e,i.key),s=n(t,i.key);if(o<=0){if(i.left&&(a=c(e,t,n,r,i.left)))return a;if(s>0&&(a=r(i.key,i.value)))return a}if(s>0&&i.right)return c(e,t,n,r,i.right)}function u(e,t){this.tree=e,this._stack=t}Object.defineProperty(o,"keys",{get:function(){var e=[];return this.forEach((function(t,n){e.push(t)})),e}}),Object.defineProperty(o,"values",{get:function(){var e=[];return this.forEach((function(t,n){e.push(n)})),e}}),Object.defineProperty(o,"length",{get:function(){return this.root?this.root._count:0}}),o.insert=function(e,n){for(var o=this._compare,s=this.root,l=[],c=[];s;){var u=o(e,s.key);l.push(s),c.push(u),s=u<=0?s.left:s.right}l.push(new t(0,e,n,null,null,1));for(var f=l.length-2;f>=0;--f){s=l[f];c[f]<=0?l[f]=new t(s._color,s.key,s.value,l[f+1],s.right,s._count+1):l[f]=new t(s._color,s.key,s.value,s.left,l[f+1],s._count+1)}for(f=l.length-1;f>1;--f){var d=l[f-1];s=l[f];if(1===d._color||1===s._color)break;var h=l[f-2];if(h.left===d)if(d.left===s){if(!(p=h.right)||0!==p._color){if(h._color=0,h.left=d.right,d._color=1,d.right=h,l[f-2]=d,l[f-1]=s,i(h),i(d),f>=3)(m=l[f-3]).left===h?m.left=d:m.right=d;break}d._color=1,h.right=r(1,p),h._color=0,f-=1}else{if(!(p=h.right)||0!==p._color){if(d.right=s.left,h._color=0,h.left=s.right,s._color=1,s.left=d,s.right=h,l[f-2]=s,l[f-1]=d,i(h),i(d),i(s),f>=3)(m=l[f-3]).left===h?m.left=s:m.right=s;break}d._color=1,h.right=r(1,p),h._color=0,f-=1}else if(d.right===s){if(!(p=h.left)||0!==p._color){if(h._color=0,h.right=d.left,d._color=1,d.left=h,l[f-2]=d,l[f-1]=s,i(h),i(d),f>=3)(m=l[f-3]).right===h?m.right=d:m.left=d;break}d._color=1,h.left=r(1,p),h._color=0,f-=1}else{var p;if(!(p=h.left)||0!==p._color){var m;if(d.left=s.right,h._color=0,h.right=s.left,s._color=1,s.right=d,s.left=h,l[f-2]=s,l[f-1]=d,i(h),i(d),i(s),f>=3)(m=l[f-3]).right===h?m.right=s:m.left=s;break}d._color=1,h.left=r(1,p),h._color=0,f-=1}}return l[0]._color=1,new a(o,l[0])},o.forEach=function(e,t,n){if(this.root)switch(arguments.length){case 1:return s(e,this.root);case 2:return l(t,this._compare,e,this.root);case 3:if(this._compare(t,n)>=0)return;return c(t,n,this._compare,e,this.root)}},Object.defineProperty(o,"begin",{get:function(){for(var e=[],t=this.root;t;)e.push(t),t=t.left;return new u(this,e)}}),Object.defineProperty(o,"end",{get:function(){for(var e=[],t=this.root;t;)e.push(t),t=t.right;return new u(this,e)}}),o.at=function(e){if(e<0)return new u(this,[]);for(var t=this.root,n=[];;){if(n.push(t),t.left){if(e<t.left._count){t=t.left;continue}e-=t.left._count}if(!e)return new u(this,n);if(e-=1,!t.right)break;if(e>=t.right._count)break;t=t.right}return new u(this,[])},o.ge=function(e){for(var t=this._compare,n=this.root,r=[],i=0;n;){var a=t(e,n.key);r.push(n),a<=0&&(i=r.length),n=a<=0?n.left:n.right}return r.length=i,new u(this,r)},o.gt=function(e){for(var t=this._compare,n=this.root,r=[],i=0;n;){var a=t(e,n.key);r.push(n),a<0&&(i=r.length),n=a<0?n.left:n.right}return r.length=i,new u(this,r)},o.lt=function(e){for(var t=this._compare,n=this.root,r=[],i=0;n;){var a=t(e,n.key);r.push(n),a>0&&(i=r.length),n=a<=0?n.left:n.right}return r.length=i,new u(this,r)},o.le=function(e){for(var t=this._compare,n=this.root,r=[],i=0;n;){var a=t(e,n.key);r.push(n),a>=0&&(i=r.length),n=a<0?n.left:n.right}return r.length=i,new u(this,r)},o.find=function(e){for(var t=this._compare,n=this.root,r=[];n;){var i=t(e,n.key);if(r.push(n),0===i)return new u(this,r);n=i<=0?n.left:n.right}return new u(this,[])},o.remove=function(e){var t=this.find(e);return t?t.remove():this},o.get=function(e){for(var t=this._compare,n=this.root;n;){var r=t(e,n.key);if(0===r)return n.value;n=r<=0?n.left:n.right}};var f=u.prototype;function d(e,t){e.key=t.key,e.value=t.value,e.left=t.left,e.right=t.right,e._color=t._color,e._count=t._count}function h(e,t){return e<t?-1:e>t?1:0}Object.defineProperty(f,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(f,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),f.clone=function(){return new u(this.tree,this._stack.slice())},f.remove=function(){var e=this._stack;if(0===e.length)return this.tree;var o=new Array(e.length),s=e[e.length-1];o[o.length-1]=new t(s._color,s.key,s.value,s.left,s.right,s._count);for(var l=e.length-2;l>=0;--l){(s=e[l]).left===e[l+1]?o[l]=new t(s._color,s.key,s.value,o[l+1],s.right,s._count):o[l]=new t(s._color,s.key,s.value,s.left,o[l+1],s._count)}if((s=o[o.length-1]).left&&s.right){var c=o.length;for(s=s.left;s.right;)o.push(s),s=s.right;var u=o[c-1];o.push(new t(s._color,u.key,u.value,s.left,s.right,s._count)),o[c-1].key=s.key,o[c-1].value=s.value;for(l=o.length-2;l>=c;--l)s=o[l],o[l]=new t(s._color,s.key,s.value,s.left,o[l+1],s._count);o[c-1].left=o[c]}if(0===(s=o[o.length-1])._color){var f=o[o.length-2];f.left===s?f.left=null:f.right===s&&(f.right=null),o.pop();for(l=0;l<o.length;++l)o[l]._count--;return new a(this.tree._compare,o[0])}if(s.left||s.right){s.left?d(s,s.left):s.right&&d(s,s.right),s._color=1;for(l=0;l<o.length-1;++l)o[l]._count--;return new a(this.tree._compare,o[0])}if(1===o.length)return new a(this.tree._compare,null);for(l=0;l<o.length;++l)o[l]._count--;var h=o[o.length-2];return function(e){for(var t,a,o,s,l=e.length-1;l>=0;--l){if(t=e[l],0===l)return void(t._color=1);if((a=e[l-1]).left===t){if((o=a.right).right&&0===o.right._color)return s=(o=a.right=n(o)).right=n(o.right),a.right=o.left,o.left=a,o.right=s,o._color=a._color,t._color=1,a._color=1,s._color=1,i(a),i(o),l>1&&((c=e[l-2]).left===a?c.left=o:c.right=o),void(e[l-1]=o);if(o.left&&0===o.left._color)return s=(o=a.right=n(o)).left=n(o.left),a.right=s.left,o.left=s.right,s.left=a,s.right=o,s._color=a._color,a._color=1,o._color=1,t._color=1,i(a),i(o),i(s),l>1&&((c=e[l-2]).left===a?c.left=s:c.right=s),void(e[l-1]=s);if(1===o._color){if(0===a._color)return a._color=1,void(a.right=r(0,o));a.right=r(0,o);continue}o=n(o),a.right=o.left,o.left=a,o._color=a._color,a._color=0,i(a),i(o),l>1&&((c=e[l-2]).left===a?c.left=o:c.right=o),e[l-1]=o,e[l]=a,l+1<e.length?e[l+1]=t:e.push(t),l+=2}else{if((o=a.left).left&&0===o.left._color)return s=(o=a.left=n(o)).left=n(o.left),a.left=o.right,o.right=a,o.left=s,o._color=a._color,t._color=1,a._color=1,s._color=1,i(a),i(o),l>1&&((c=e[l-2]).right===a?c.right=o:c.left=o),void(e[l-1]=o);if(o.right&&0===o.right._color)return s=(o=a.left=n(o)).right=n(o.right),a.left=s.right,o.right=s.left,s.right=a,s.left=o,s._color=a._color,a._color=1,o._color=1,t._color=1,i(a),i(o),i(s),l>1&&((c=e[l-2]).right===a?c.right=s:c.left=s),void(e[l-1]=s);if(1===o._color){if(0===a._color)return a._color=1,void(a.left=r(0,o));a.left=r(0,o);continue}var c;o=n(o),a.left=o.right,o.right=a,o._color=a._color,a._color=0,i(a),i(o),l>1&&((c=e[l-2]).right===a?c.right=o:c.left=o),e[l-1]=o,e[l]=a,l+1<e.length?e[l+1]=t:e.push(t),l+=2}}}(o),h.left===s?h.left=null:h.right=null,new a(this.tree._compare,o[0])},Object.defineProperty(f,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(f,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(f,"index",{get:function(){var e=0,t=this._stack;if(0===t.length){var n=this.tree.root;return n?n._count:0}t[t.length-1].left&&(e=t[t.length-1].left._count);for(var r=t.length-2;r>=0;--r)t[r+1]===t[r].right&&(++e,t[r].left&&(e+=t[r].left._count));return e},enumerable:!0}),f.next=function(){var e=this._stack;if(0!==e.length){var t=e[e.length-1];if(t.right)for(t=t.right;t;)e.push(t),t=t.left;else for(e.pop();e.length>0&&e[e.length-1].right===t;)t=e[e.length-1],e.pop()}},Object.defineProperty(f,"hasNext",{get:function(){var e=this._stack;if(0===e.length)return!1;if(e[e.length-1].right)return!0;for(var t=e.length-1;t>0;--t)if(e[t-1].left===e[t])return!0;return!1}}),f.update=function(e){var n=this._stack;if(0===n.length)throw new Error("Can't update empty node!");var r=new Array(n.length),i=n[n.length-1];r[r.length-1]=new t(i._color,i.key,e,i.left,i.right,i._count);for(var o=n.length-2;o>=0;--o)(i=n[o]).left===n[o+1]?r[o]=new t(i._color,i.key,i.value,r[o+1],i.right,i._count):r[o]=new t(i._color,i.key,i.value,i.left,r[o+1],i._count);return new a(this.tree._compare,r[0])},f.prev=function(){var e=this._stack;if(0!==e.length){var t=e[e.length-1];if(t.left)for(t=t.left;t;)e.push(t),t=t.right;else for(e.pop();e.length>0&&e[e.length-1].left===t;)t=e[e.length-1],e.pop()}},Object.defineProperty(f,"hasPrev",{get:function(){var e=this._stack;if(0===e.length)return!1;if(e[e.length-1].left)return!0;for(var t=e.length-1;t>0;--t)if(e[t-1].right===e[t])return!0;return!1}})},3837:function(e,t,n){"use strict";e.exports=function(e,t){var n=new h(e);return n.update(t),n};var r=n(4935),i=n(501),a=n(5304),o=n(6429),s=n(6444),l=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),c=ArrayBuffer,u=DataView;function f(e){return Array.isArray(e)||function(e){return c.isView(e)&&!(e instanceof u)}(e)}function d(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function h(e){this.gl=e,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickFontStyle=["normal","normal","normal"],this.tickFontWeight=["normal","normal","normal"],this.tickFontVariant=["normal","normal","normal"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["sans-serif","sans-serif","sans-serif"],this.labelFontStyle=["normal","normal","normal"],this.labelFontWeight=["normal","normal","normal"],this.labelFontVariant=["normal","normal","normal"],this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=a(e)}var p=h.prototype;function m(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}p.update=function(e){function t(t,n,r){if(r in e){var i,a=e[r],o=this[r];(t?f(a)&&f(a[0]):f(a))?this[r]=i=[n(a[0]),n(a[1]),n(a[2])]:this[r]=i=[n(a),n(a),n(a)];for(var s=0;s<3;++s)if(i[s]!==o[s])return!0}return!1}e=e||{};var n,a=t.bind(this,!1,Number),o=t.bind(this,!1,Boolean),l=t.bind(this,!1,String),c=t.bind(this,!0,(function(e){if(f(e)){if(3===e.length)return[+e[0],+e[1],+e[2],1];if(4===e.length)return[+e[0],+e[1],+e[2],+e[3]]}return[0,0,0,1]})),u=!1,d=!1;if("bounds"in e)for(var h=e.bounds,p=0;p<2;++p)for(var m=0;m<3;++m)h[p][m]!==this.bounds[p][m]&&(d=!0),this.bounds[p][m]=h[p][m];if("ticks"in e){n=e.ticks,u=!0,this.autoTicks=!1;for(p=0;p<3;++p)this.tickSpacing[p]=0}else a("tickSpacing")&&(this.autoTicks=!0,d=!0);if(this._firstInit&&("ticks"in e||"tickSpacing"in e||(this.autoTicks=!0),d=!0,u=!0,this._firstInit=!1),d&&this.autoTicks&&(n=s.create(this.bounds,this.tickSpacing),u=!0),u){for(p=0;p<3;++p)n[p].sort((function(e,t){return e.x-t.x}));s.equal(n,this.ticks)?u=!1:this.ticks=n}o("tickEnable"),l("tickFont")&&(u=!0),l("tickFontStyle")&&(u=!0),l("tickFontWeight")&&(u=!0),l("tickFontVariant")&&(u=!0),a("tickSize"),a("tickAngle"),a("tickPad"),c("tickColor");var g=l("labels");l("labelFont")&&(g=!0),l("labelFontStyle")&&(g=!0),l("labelFontWeight")&&(g=!0),l("labelFontVariant")&&(g=!0),o("labelEnable"),a("labelSize"),a("labelPad"),c("labelColor"),o("lineEnable"),o("lineMirror"),a("lineWidth"),c("lineColor"),o("lineTickEnable"),o("lineTickMirror"),a("lineTickLength"),a("lineTickWidth"),c("lineTickColor"),o("gridEnable"),a("gridWidth"),c("gridColor"),o("zeroEnable"),c("zeroLineColor"),a("zeroLineWidth"),o("backgroundEnable"),c("backgroundColor");var v=[{family:this.labelFont[0],style:this.labelFontStyle[0],weight:this.labelFontWeight[0],variant:this.labelFontVariant[0]},{family:this.labelFont[1],style:this.labelFontStyle[1],weight:this.labelFontWeight[1],variant:this.labelFontVariant[1]},{family:this.labelFont[2],style:this.labelFontStyle[2],weight:this.labelFontWeight[2],variant:this.labelFontVariant[2]}],y=[{family:this.tickFont[0],style:this.tickFontStyle[0],weight:this.tickFontWeight[0],variant:this.tickFontVariant[0]},{family:this.tickFont[1],style:this.tickFontStyle[1],weight:this.tickFontWeight[1],variant:this.tickFontVariant[1]},{family:this.tickFont[2],style:this.tickFontStyle[2],weight:this.tickFontWeight[2],variant:this.tickFontVariant[2]}];this._text?this._text&&(g||u)&&this._text.update(this.bounds,this.labels,v,this.ticks,y):this._text=r(this.gl,this.bounds,this.labels,v,this.ticks,y),this._lines&&u&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=i(this.gl,this.bounds,this.ticks))};var g=[new m,new m,new m];function v(e,t,n,r,i){for(var a=e.primalOffset,o=e.primalMinor,s=e.mirrorOffset,l=e.mirrorMinor,c=r[t],u=0;u<3;++u)if(t!==u){var f=a,d=s,h=o,p=l;c&1<<u&&(f=s,d=a,h=l,p=o),f[u]=n[0][u],d[u]=n[1][u],i[u]>0?(h[u]=-1,p[u]=0):(h[u]=0,p[u]=1)}}var y=[0,0,0],b={model:l,view:l,projection:l,_ortho:!1};p.isOpaque=function(){return!0},p.isTransparent=function(){return!1},p.drawTransparent=function(e){};var x=[0,0,0],_=[0,0,0],w=[0,0,0];p.draw=function(e){e=e||b;for(var t=this.gl,n=e.model||l,r=e.view||l,i=e.projection||l,a=this.bounds,s=e._ortho||!1,c=o(n,r,i,a,s),u=c.cubeEdges,f=c.axis,h=r[12],p=r[13],m=r[14],A=r[15],k=(s?2:1)*this.pixelRatio*(i[3]*h+i[7]*p+i[11]*m+i[15]*A)/t.drawingBufferHeight,E=0;E<3;++E)this.lastCubeProps.cubeEdges[E]=u[E],this.lastCubeProps.axis[E]=f[E];var T=g;for(E=0;E<3;++E)v(g[E],E,this.bounds,u,f);t=this.gl;var M,S=y;for(E=0;E<3;++E)this.backgroundEnable[E]?S[E]=f[E]:S[E]=0;this._background.draw(n,r,i,a,S,this.backgroundColor),this._lines.bind(n,r,i,this);for(E=0;E<3;++E){var C=[0,0,0];f[E]>0?C[E]=a[1][E]:C[E]=a[0][E];for(var O=0;O<2;++O){var R=(E+1+O)%3,N=(E+1+(1^O))%3;this.gridEnable[R]&&this._lines.drawGrid(R,N,this.bounds,C,this.gridColor[R],this.gridWidth[R]*this.pixelRatio)}for(O=0;O<2;++O){R=(E+1+O)%3,N=(E+1+(1^O))%3;this.zeroEnable[N]&&Math.min(a[0][N],a[1][N])<=0&&Math.max(a[0][N],a[1][N])>=0&&this._lines.drawZero(R,N,this.bounds,C,this.zeroLineColor[N],this.zeroLineWidth[N]*this.pixelRatio)}}for(E=0;E<3;++E){this.lineEnable[E]&&this._lines.drawAxisLine(E,this.bounds,T[E].primalOffset,this.lineColor[E],this.lineWidth[E]*this.pixelRatio),this.lineMirror[E]&&this._lines.drawAxisLine(E,this.bounds,T[E].mirrorOffset,this.lineColor[E],this.lineWidth[E]*this.pixelRatio);var L=d(x,T[E].primalMinor),D=d(_,T[E].mirrorMinor),P=this.lineTickLength;for(O=0;O<3;++O){var I=k/n[5*O];L[O]*=P[O]*I,D[O]*=P[O]*I}this.lineTickEnable[E]&&this._lines.drawAxisTicks(E,T[E].primalOffset,L,this.lineTickColor[E],this.lineTickWidth[E]*this.pixelRatio),this.lineTickMirror[E]&&this._lines.drawAxisTicks(E,T[E].mirrorOffset,D,this.lineTickColor[E],this.lineTickWidth[E]*this.pixelRatio)}this._lines.unbind(),this._text.bind(n,r,i,this.pixelRatio);var F,z;function j(e){(z=[0,0,0])[e]=1}function B(e,t,n){var r=(e+1)%3,i=(e+2)%3,a=t[r],o=t[i],s=n[r],l=n[i];a>0&&l>0||a>0&&l<0||a<0&&l>0||a<0&&l<0?j(r):(o>0&&s>0||o>0&&s<0||o<0&&s>0||o<0&&s<0)&&j(i)}for(E=0;E<3;++E){var U=T[E].primalMinor,$=T[E].mirrorMinor,q=d(w,T[E].primalOffset);for(O=0;O<3;++O)this.lineTickEnable[E]&&(q[O]+=k*U[O]*Math.max(this.lineTickLength[O],0)/n[5*O]);var H=[0,0,0];if(H[E]=1,this.tickEnable[E]){-3600===this.tickAngle[E]?(this.tickAngle[E]=0,this.tickAlign[E]="auto"):this.tickAlign[E]=-1,F=1,"auto"===(M=[this.tickAlign[E],.5,F])[0]?M[0]=0:M[0]=parseInt(""+M[0]),z=[0,0,0],B(E,U,$);for(O=0;O<3;++O)q[O]+=k*U[O]*this.tickPad[O]/n[5*O];this._text.drawTicks(E,this.tickSize[E],this.tickAngle[E],q,this.tickColor[E],H,z,M)}if(this.labelEnable[E]){F=0,z=[0,0,0],this.labels[E].length>4&&(j(E),F=1),"auto"===(M=[this.labelAlign[E],.5,F])[0]?M[0]=0:M[0]=parseInt(""+M[0]);for(O=0;O<3;++O)q[O]+=k*U[O]*this.labelPad[O]/n[5*O];q[E]+=.5*(a[0][E]+a[1][E]),this._text.drawLabel(E,this.labelSize[E],this.labelAngle[E],q,this.labelColor[E],[0,0,0],z,M)}}this._text.unbind()},p.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},5304:function(e,t,n){"use strict";e.exports=function(e){for(var t=[],n=[],s=0,l=0;l<3;++l)for(var c=(l+1)%3,u=(l+2)%3,f=[0,0,0],d=[0,0,0],h=-1;h<=1;h+=2){n.push(s,s+2,s+1,s+1,s+2,s+3),f[l]=h,d[l]=h;for(var p=-1;p<=1;p+=2){f[c]=p;for(var m=-1;m<=1;m+=2)f[u]=m,t.push(f[0],f[1],f[2],d[0],d[1],d[2]),s+=1}var g=c;c=u,u=g}var v=r(e,new Float32Array(t)),y=r(e,new Uint16Array(n),e.ELEMENT_ARRAY_BUFFER),b=i(e,[{buffer:v,type:e.FLOAT,size:3,offset:0,stride:24},{buffer:v,type:e.FLOAT,size:3,offset:12,stride:24}],y),x=a(e);return x.attributes.position.location=0,x.attributes.normal.location=1,new o(e,v,b,x)};var r=n(2762),i=n(8116),a=n(1879).bg;function o(e,t,n,r){this.gl=e,this.buffer=t,this.vao=n,this.shader=r}var s=o.prototype;s.draw=function(e,t,n,r,i,a){for(var o=!1,s=0;s<3;++s)o=o||i[s];if(o){var l=this.gl;l.enable(l.POLYGON_OFFSET_FILL),l.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:e,view:t,projection:n,bounds:r,enable:i,colors:a},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),l.disable(l.POLYGON_OFFSET_FILL)}},s.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},6429:function(e,t,n){"use strict";e.exports=function(e,t,n,a,h){i(s,t,e),i(s,n,s);for(var y=0,b=0;b<2;++b){u[2]=a[b][2];for(var x=0;x<2;++x){u[1]=a[x][1];for(var _=0;_<2;++_)u[0]=a[_][0],d(l[y],u,s),y+=1}}var w=-1;for(b=0;b<8;++b){for(var A=l[b][3],k=0;k<3;++k)c[b][k]=l[b][k]/A;h&&(c[b][2]*=-1),A<0&&(w<0||c[b][2]<c[w][2])&&(w=b)}if(w<0){w=0;for(var E=0;E<3;++E){for(var T=(E+2)%3,M=(E+1)%3,S=-1,C=-1,O=0;O<2;++O){var R=(L=O<<E)+(O<<T)+(1-O<<M),N=L+(1-O<<T)+(O<<M);o(c[L],c[R],c[N],f)<0||(O?S=1:C=1)}if(S<0||C<0)C>S&&(w|=1<<E);else{for(O=0;O<2;++O){R=(L=O<<E)+(O<<T)+(1-O<<M),N=L+(1-O<<T)+(O<<M);var L,D=p([l[L],l[R],l[N],l[L+(1<<T)+(1<<M)]]);O?S=D:C=D}C>S&&(w|=1<<E)}}}var P=7^w,I=-1;for(b=0;b<8;++b)b!==w&&b!==P&&(I<0||c[I][1]>c[b][1])&&(I=b);var F=-1;for(b=0;b<3;++b){if((j=I^1<<b)!==w&&j!==P)F<0&&(F=j),(M=c[j])[0]<c[F][0]&&(F=j)}var z=-1;for(b=0;b<3;++b){var j;if((j=I^1<<b)!==w&&j!==P&&j!==F)z<0&&(z=j),(M=c[j])[0]>c[z][0]&&(z=j)}var B=m;B[0]=B[1]=B[2]=0,B[r.log2(F^I)]=I&F,B[r.log2(I^z)]=I&z;var U=7^z;U===w||U===P?(U=7^F,B[r.log2(z^U)]=U&z):B[r.log2(F^U)]=U&F;var $=g,q=w;for(E=0;E<3;++E)$[E]=q&1<<E?-1:1;return v};var r=n(8828),i=n(6760),a=n(5202),o=n(3250),s=new Array(16),l=new Array(8),c=new Array(8),u=new Array(3),f=[0,0,0];function d(e,t,n){for(var r=0;r<4;++r){e[r]=n[12+r];for(var i=0;i<3;++i)e[r]+=t[i]*n[4*i+r]}}!function(){for(var e=0;e<8;++e)l[e]=[1,1,1,1],c[e]=[1,1,1]}();var h=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function p(e){for(var t=0;t<h.length;++t)if((e=a.positive(e,h[t])).length<3)return 0;var n=e[0],r=n[0]/n[3],i=n[1]/n[3],o=0;for(t=1;t+1<e.length;++t){var s=e[t],l=e[t+1],c=s[0]/s[3]-r,u=s[1]/s[3]-i,f=l[0]/l[3]-r,d=l[1]/l[3]-i;o+=Math.abs(c*d-u*f)}return o}var m=[1,1,1],g=[0,0,0],v={cubeEdges:m,axis:g}},501:function(e,t,n){"use strict";e.exports=function(e,t,n){var o=[],s=[0,0,0],l=[0,0,0],c=[0,0,0],u=[0,0,0];o.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var f=0;f<3;++f){for(var d=o.length/3|0,p=0;p<n[f].length;++p){var m=+n[f][p].x;o.push(m,0,1,m,1,1,m,0,-1,m,0,-1,m,1,1,m,1,-1)}var g=o.length/3|0;s[f]=d,l[f]=g-d;d=o.length/3|0;for(var v=0;v<n[f].length;++v){m=+n[f][v].x;o.push(m,0,1,m,1,1,m,0,-1,m,0,-1,m,1,1,m,1,-1)}g=o.length/3|0;c[f]=d,u[f]=g-d}var y=r(e,new Float32Array(o)),b=i(e,[{buffer:y,type:e.FLOAT,size:3,stride:0,offset:0}]),x=a(e);return x.attributes.position.location=0,new h(e,y,b,x,l,s,u,c)};var r=n(2762),i=n(8116),a=n(1879).n,o=[0,0,0],s=[0,0,0],l=[0,0,0],c=[0,0,0],u=[1,1];function f(e){return e[0]=e[1]=e[2]=0,e}function d(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function h(e,t,n,r,i,a,o,s){this.gl=e,this.vertBuffer=t,this.vao=n,this.shader=r,this.tickCount=i,this.tickOffset=a,this.gridCount=o,this.gridOffset=s}var p=h.prototype;p.bind=function(e,t,n){this.shader.bind(),this.shader.uniforms.model=e,this.shader.uniforms.view=t,this.shader.uniforms.projection=n,u[0]=this.gl.drawingBufferWidth,u[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=u,this.vao.bind()},p.unbind=function(){this.vao.unbind()},p.drawAxisLine=function(e,t,n,r,i){var a=f(s);this.shader.uniforms.majorAxis=s,a[e]=t[1][e]-t[0][e],this.shader.uniforms.minorAxis=a;var o,u=d(c,n);u[e]+=t[0][e],this.shader.uniforms.offset=u,this.shader.uniforms.lineWidth=i,this.shader.uniforms.color=r,(o=f(l))[(e+2)%3]=1,this.shader.uniforms.screenAxis=o,this.vao.draw(this.gl.TRIANGLES,6),(o=f(l))[(e+1)%3]=1,this.shader.uniforms.screenAxis=o,this.vao.draw(this.gl.TRIANGLES,6)},p.drawAxisTicks=function(e,t,n,r,i){if(this.tickCount[e]){var a=f(o);a[e]=1,this.shader.uniforms.majorAxis=a,this.shader.uniforms.offset=t,this.shader.uniforms.minorAxis=n,this.shader.uniforms.color=r,this.shader.uniforms.lineWidth=i;var s=f(l);s[e]=1,this.shader.uniforms.screenAxis=s,this.vao.draw(this.gl.TRIANGLES,this.tickCount[e],this.tickOffset[e])}},p.drawGrid=function(e,t,n,r,i,a){if(this.gridCount[e]){var u=f(s);u[t]=n[1][t]-n[0][t],this.shader.uniforms.minorAxis=u;var h=d(c,r);h[t]+=n[0][t],this.shader.uniforms.offset=h;var p=f(o);p[e]=1,this.shader.uniforms.majorAxis=p;var m=f(l);m[e]=1,this.shader.uniforms.screenAxis=m,this.shader.uniforms.lineWidth=a,this.shader.uniforms.color=i,this.vao.draw(this.gl.TRIANGLES,this.gridCount[e],this.gridOffset[e])}},p.drawZero=function(e,t,n,r,i,a){var o=f(s);this.shader.uniforms.majorAxis=o,o[e]=n[1][e]-n[0][e],this.shader.uniforms.minorAxis=o;var u=d(c,r);u[e]+=n[0][e],this.shader.uniforms.offset=u;var h=f(l);h[t]=1,this.shader.uniforms.screenAxis=h,this.shader.uniforms.lineWidth=a,this.shader.uniforms.color=i,this.vao.draw(this.gl.TRIANGLES,6)},p.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1879:function(e,t,n){"use strict";var r=n(3236),i=n(9405),a=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * (view * (model * vec4(p, 1.0)));\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),o=r(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);t.n=function(e){return i(e,a,o,null,[{name:"position",type:"vec3"}])};var s=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * (view * (model * vec4(p, 1.0)));\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}\n"]),l=r(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);t.Q=function(e){return i(e,s,l,null,[{name:"position",type:"vec3"}])};var c=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * (view * (model * vec4(nPosition, 1.0)));\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}\n"]),u=r(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);t.bg=function(e){return i(e,c,u,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},4935:function(e,t,n){"use strict";e.exports=function(e,t,n,a,s,l){var u=r(e),f=i(e,[{buffer:u,size:3}]),d=o(e);d.attributes.position.location=0;var h=new c(e,d,u,f);return h.update(t,n,a,s,l),h};var r=n(2762),i=n(8116),a=n(4359),o=n(1879).Q,s=window||process.global||{},l=s.__TEXT_CACHE||{};s.__TEXT_CACHE={};function c(e,t,n,r){this.gl=e,this.shader=t,this.buffer=n,this.vao=r,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var u=c.prototype,f=[0,0];u.bind=function(e,t,n,r){this.vao.bind(),this.shader.bind();var i=this.shader.uniforms;i.model=e,i.view=t,i.projection=n,i.pixelScale=r,f[0]=this.gl.drawingBufferWidth,f[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=f},u.unbind=function(){this.vao.unbind()},u.update=function(e,t,n,r,i){var o=[];function s(e,t,n,r,i,s){var c=[n.style,n.weight,n.variant,n.family].join("_"),u=l[c];u||(u=l[c]={});var f=u[t];f||(f=u[t]=function(e,t){try{return a(e,t)}catch(t){return console.warn('error vectorizing text:"'+e+'" error:',t),{cells:[],positions:[]}}}(t,{triangles:!0,font:n.family,fontStyle:n.style,fontWeight:n.weight,fontVariant:n.variant,textAlign:"center",textBaseline:"middle",lineSpacing:i,styletags:s}));for(var d=(r||12)/12,h=f.positions,p=f.cells,m=0,g=p.length;m<g;++m)for(var v=p[m],y=2;y>=0;--y){var b=h[v[y]];o.push(d*b[0],-d*b[1],e)}}for(var c=[0,0,0],u=[0,0,0],f=[0,0,0],d=[0,0,0],h={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},p=0;p<3;++p){f[p]=o.length/3|0,s(.5*(e[0][p]+e[1][p]),t[p],n[p],12,1.25,h),d[p]=(o.length/3|0)-f[p],c[p]=o.length/3|0;for(var m=0;m<r[p].length;++m)if(r[p][m].text){var g={family:r[p][m].font||i[p].family,style:i[p].fontStyle||i[p].style,weight:i[p].fontWeight||i[p].weight,variant:i[p].fontVariant||i[p].variant};s(r[p][m].x,r[p][m].text,g,r[p][m].fontSize||12,1.25,h)}u[p]=(o.length/3|0)-c[p]}this.buffer.update(o),this.tickOffset=c,this.tickCount=u,this.labelOffset=f,this.labelCount=d},u.drawTicks=function(e,t,n,r,i,a,o,s){this.tickCount[e]&&(this.shader.uniforms.axis=a,this.shader.uniforms.color=i,this.shader.uniforms.angle=n,this.shader.uniforms.scale=t,this.shader.uniforms.offset=r,this.shader.uniforms.alignDir=o,this.shader.uniforms.alignOpt=s,this.vao.draw(this.gl.TRIANGLES,this.tickCount[e],this.tickOffset[e]))},u.drawLabel=function(e,t,n,r,i,a,o,s){this.labelCount[e]&&(this.shader.uniforms.axis=a,this.shader.uniforms.color=i,this.shader.uniforms.angle=n,this.shader.uniforms.scale=t,this.shader.uniforms.offset=r,this.shader.uniforms.alignDir=o,this.shader.uniforms.alignOpt=s,this.vao.draw(this.gl.TRIANGLES,this.labelCount[e],this.labelOffset[e]))},u.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},6444:function(e,t){"use strict";function n(e,t){var n=e+"",r=n.indexOf("."),i=0;r>=0&&(i=n.length-r-1);var a=Math.pow(10,i),o=Math.round(e*t*a),s=o+"";if(s.indexOf("e")>=0)return s;var l=o/a,c=o%a;o<0?(l=0|-Math.ceil(l),c=0|-c):(l=0|Math.floor(l),c|=0);var u=""+l;if(o<0&&(u="-"+u),i){for(var f=""+c;f.length<i;)f="0"+f;return u+"."+f}return u}t.create=function(e,t){for(var r=[],i=0;i<3;++i){for(var a=[],o=(e[0][i],e[1][i],0);o*t[i]<=e[1][i];++o)a.push({x:o*t[i],text:n(t[i],o)});for(o=-1;o*t[i]>=e[0][i];--o)a.push({x:o*t[i],text:n(t[i],o)});r.push(a)}return r},t.equal=function(e,t){for(var n=0;n<3;++n){if(e[n].length!==t[n].length)return!1;for(var r=0;r<e[n].length;++r){var i=e[n][r],a=t[n][r];if(i.x!==a.x||i.text!==a.text||i.font!==a.font||i.fontColor!==a.fontColor||i.fontSize!==a.fontSize||i.dx!==a.dx||i.dy!==a.dy)return!1}}return!0}},5445:function(e,t,n){"use strict";e.exports=function(e,t,n,l,f){var d=t.model||c,h=t.view||c,v=t.projection||c,y=t._ortho||!1,b=e.bounds,x=(f=f||a(d,h,v,b,y)).axis;o(u,h,d),o(u,v,u);for(var _=m,w=0;w<3;++w)_[w].lo=1/0,_[w].hi=-1/0,_[w].pixelsPerDataUnit=1/0;var A=r(s(u,u));s(u,u);for(var k=0;k<3;++k){var E=(k+1)%3,T=(k+2)%3,M=g;e:for(w=0;w<2;++w){var S=[];if(x[k]<0!=!!w){M[k]=b[w][k];for(var C=0;C<2;++C){M[E]=b[C^w][E];for(var O=0;O<2;++O)M[T]=b[O^C^w][T],S.push(M.slice())}var R=y?5:4;for(C=R;C===R;++C){if(0===S.length)continue e;S=i.positive(S,A[C])}for(C=0;C<S.length;++C){T=S[C];var N=p(g,u,T,n,l);for(O=0;O<3;++O)_[O].lo=Math.min(_[O].lo,T[O]),_[O].hi=Math.max(_[O].hi,T[O]),O!==k&&(_[O].pixelsPerDataUnit=Math.min(_[O].pixelsPerDataUnit,Math.abs(N[O])))}}}}return _};var r=n(5033),i=n(5202),a=n(6429),o=n(6760),s=n(5665),l=n(5352),c=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),u=new Float32Array(16);function f(e,t,n){this.lo=e,this.hi=t,this.pixelsPerDataUnit=n}var d=[0,0,0,1],h=[0,0,0,1];function p(e,t,n,r,i){for(var a=0;a<3;++a){for(var o=d,s=h,c=0;c<3;++c)s[c]=o[c]=n[c];s[3]=o[3]=1,s[a]+=1,l(s,s,t),s[3]<0&&(e[a]=1/0),o[a]-=1,l(o,o,t),o[3]<0&&(e[a]=1/0);var u=(o[0]/o[3]-s[0]/s[3])*r,f=(o[1]/o[3]-s[1]/s[3])*i;e[a]=.25*Math.sqrt(u*u+f*f)}return e}var m=[new f(1/0,-1/0,1/0),new f(1/0,-1/0,1/0),new f(1/0,-1/0,1/0)],g=[0,0,0]},2762:function(e,t,n){"use strict";var r=n(1888),i=n(5298),a=n(9618),o=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function s(e,t,n,r,i){this.gl=e,this.type=t,this.handle=n,this.length=r,this.usage=i}var l=s.prototype;function c(e,t,n,r,i,a){var o=i.length*i.BYTES_PER_ELEMENT;if(a<0)return e.bufferData(t,i,r),o;if(o+a>n)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return e.bufferSubData(t,a,i),n}function u(e,t){for(var n=r.malloc(e.length,t),i=e.length,a=0;a<i;++a)n[a]=e[a];return n}l.bind=function(){this.gl.bindBuffer(this.type,this.handle)},l.unbind=function(){this.gl.bindBuffer(this.type,null)},l.dispose=function(){this.gl.deleteBuffer(this.handle)},l.update=function(e,t){if("number"!=typeof t&&(t=-1),this.bind(),"object"==typeof e&&void 0!==e.shape){var n=e.dtype;if(o.indexOf(n)<0&&(n="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER)n=gl.getExtension("OES_element_index_uint")&&"uint16"!==n?"uint32":"uint16";if(n===e.dtype&&function(e,t){for(var n=1,r=t.length-1;r>=0;--r){if(t[r]!==n)return!1;n*=e[r]}return!0}(e.shape,e.stride))0===e.offset&&e.data.length===e.shape[0]?this.length=c(this.gl,this.type,this.length,this.usage,e.data,t):this.length=c(this.gl,this.type,this.length,this.usage,e.data.subarray(e.offset,e.shape[0]),t);else{var s=r.malloc(e.size,n),l=a(s,e.shape);i.assign(l,e),this.length=c(this.gl,this.type,this.length,this.usage,t<0?s:s.subarray(0,e.size),t),r.free(s)}}else if(Array.isArray(e)){var f;f=this.type===this.gl.ELEMENT_ARRAY_BUFFER?u(e,"uint16"):u(e,"float32"),this.length=c(this.gl,this.type,this.length,this.usage,t<0?f:f.subarray(0,e.length),t),r.free(f)}else if("object"==typeof e&&"number"==typeof e.length)this.length=c(this.gl,this.type,this.length,this.usage,e,t);else{if("number"!=typeof e&&void 0!==e)throw new Error("gl-buffer: Invalid data type");if(t>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(e|=0)<=0&&(e=1),this.gl.bufferData(this.type,0|e,this.usage),this.length=e}},e.exports=function(e,t,n,r){if(n=n||e.ARRAY_BUFFER,r=r||e.DYNAMIC_DRAW,n!==e.ARRAY_BUFFER&&n!==e.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(r!==e.DYNAMIC_DRAW&&r!==e.STATIC_DRAW&&r!==e.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var i=e.createBuffer(),a=new s(e,n,i,0,r);return a.update(t),a}},6405:function(e,t,n){"use strict";var r=n(2931);e.exports=function(e,t){var n=e.positions,i=e.vectors,a={positions:[],vertexIntensity:[],vertexIntensityBounds:e.vertexIntensityBounds,vectors:[],cells:[],coneOffset:e.coneOffset,colormap:e.colormap};if(0===e.positions.length)return t&&(t[0]=[0,0,0],t[1]=[0,0,0]),a;for(var o=0,s=1/0,l=-1/0,c=1/0,u=-1/0,f=1/0,d=-1/0,h=null,p=null,m=[],g=1/0,v=!1,y="raw"===e.coneSizemode,b=0;b<n.length;b++){var x=n[b];s=Math.min(x[0],s),l=Math.max(x[0],l),c=Math.min(x[1],c),u=Math.max(x[1],u),f=Math.min(x[2],f),d=Math.max(x[2],d);var _=i[b];if(r.length(_)>o&&(o=r.length(_)),b&&!y){var w=2*r.distance(h,x)/(r.length(p)+r.length(_));w?(g=Math.min(g,w),v=!1):v=!0}v||(h=x,p=_),m.push(_)}var A=[s,c,f],k=[l,u,d];t&&(t[0]=A,t[1]=k),0===o&&(o=1);var E=1/o;isFinite(g)||(g=1),a.vectorScale=g;var T=e.coneSize||(y?1:.5);e.absoluteConeSize&&(T=e.absoluteConeSize*E),a.coneScale=T;b=0;for(var M=0;b<n.length;b++)for(var S=(x=n[b])[0],C=x[1],O=x[2],R=m[b],N=r.length(R)*E,L=0;L<8;L++){a.positions.push([S,C,O,M++]),a.positions.push([S,C,O,M++]),a.positions.push([S,C,O,M++]),a.positions.push([S,C,O,M++]),a.positions.push([S,C,O,M++]),a.positions.push([S,C,O,M++]),a.vectors.push(R),a.vectors.push(R),a.vectors.push(R),a.vectors.push(R),a.vectors.push(R),a.vectors.push(R),a.vertexIntensity.push(N,N,N),a.vertexIntensity.push(N,N,N);var D=a.positions.length;a.cells.push([D-6,D-5,D-4],[D-3,D-2,D-1])}return a};var i=n(614);e.exports.createMesh=n(9060),e.exports.createConeMesh=function(t,n){return e.exports.createMesh(t,n,{shaders:i,traceType:"cone"})}},9060:function(e,t,n){"use strict";var r=n(9405),i=n(2762),a=n(8116),o=n(7766),s=n(6760),l=n(7608),c=n(9618),u=n(6729),f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function d(e,t,n,r,i,a,o,s,l,c,u){this.gl=e,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=t,this.dirty=!0,this.triShader=n,this.pickShader=r,this.trianglePositions=i,this.triangleVectors=a,this.triangleColors=s,this.triangleUVs=l,this.triangleIds=o,this.triangleVAO=c,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=u,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=f,this._view=f,this._projection=f,this._resolution=[1,1]}var h=d.prototype;h.isOpaque=function(){return this.opacity>=1},h.isTransparent=function(){return this.opacity<1},h.pickSlots=1,h.setPickBase=function(e){this.pickId=e},h.update=function(e){e=e||{};var t=this.gl;this.dirty=!0,"lightPosition"in e&&(this.lightPosition=e.lightPosition),"opacity"in e&&(this.opacity=e.opacity),"ambient"in e&&(this.ambientLight=e.ambient),"diffuse"in e&&(this.diffuseLight=e.diffuse),"specular"in e&&(this.specularLight=e.specular),"roughness"in e&&(this.roughness=e.roughness),"fresnel"in e&&(this.fresnel=e.fresnel),void 0!==e.tubeScale&&(this.tubeScale=e.tubeScale),void 0!==e.vectorScale&&(this.vectorScale=e.vectorScale),void 0!==e.coneScale&&(this.coneScale=e.coneScale),void 0!==e.coneOffset&&(this.coneOffset=e.coneOffset),e.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=t.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=t.LINEAR,this.texture.setPixels(function(e){for(var t=u({colormap:e,nshades:256,format:"rgba"}),n=new Uint8Array(1024),r=0;r<256;++r){for(var i=t[r],a=0;a<3;++a)n[4*r+a]=i[a];n[4*r+3]=255*i[3]}return c(n,[256,256,4],[4,0,1])}(e.colormap)),this.texture.generateMipmap());var n=e.cells,r=e.positions,i=e.vectors;if(r&&n&&i){var a=[],o=[],s=[],l=[],f=[];this.cells=n,this.positions=r,this.vectors=i;var d=e.meshColor||[1,1,1,1],h=e.vertexIntensity,p=1/0,m=-1/0;if(h)if(e.vertexIntensityBounds)p=+e.vertexIntensityBounds[0],m=+e.vertexIntensityBounds[1];else for(var g=0;g<h.length;++g){var v=h[g];p=Math.min(p,v),m=Math.max(m,v)}else for(g=0;g<r.length;++g){v=r[g][2];p=Math.min(p,v),m=Math.max(m,v)}this.intensity=h||function(e){for(var t=e.length,n=new Array(t),r=0;r<t;++r)n[r]=e[r][2];return n}(r),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(g=0;g<r.length;++g)for(var y=r[g],b=0;b<3;++b)!isNaN(y[b])&&isFinite(y[b])&&(this.bounds[0][b]=Math.min(this.bounds[0][b],y[b]),this.bounds[1][b]=Math.max(this.bounds[1][b],y[b]));var x=0;e:for(g=0;g<n.length;++g){var _=n[g];if(3===_.length){for(b=0;b<3;++b){y=r[A=_[b]];for(var w=0;w<3;++w)if(isNaN(y[w])||!isFinite(y[w]))continue e}for(b=0;b<3;++b){var A;y=r[A=_[2-b]];a.push(y[0],y[1],y[2],y[3]);var k=i[A];o.push(k[0],k[1],k[2],k[3]||0);var E,T=d;3===T.length?s.push(T[0],T[1],T[2],1):s.push(T[0],T[1],T[2],T[3]),E=h?[(h[A]-p)/(m-p),0]:[(y[2]-p)/(m-p),0],l.push(E[0],E[1]),f.push(g)}x+=1}}this.triangleCount=x,this.trianglePositions.update(a),this.triangleVectors.update(o),this.triangleColors.update(s),this.triangleUVs.update(l),this.triangleIds.update(new Uint32Array(f))}},h.drawTransparent=h.draw=function(e){e=e||{};for(var t=this.gl,n=e.model||f,r=e.view||f,i=e.projection||f,a=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)a[0][o]=Math.max(a[0][o],this.clipBounds[0][o]),a[1][o]=Math.min(a[1][o],this.clipBounds[1][o]);var c={model:n,view:r,projection:i,inverseModel:f.slice(),clipBounds:a,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};c.inverseModel=l(c.inverseModel,c.model),t.disable(t.CULL_FACE),this.texture.bind(0);var u=new Array(16);s(u,c.view,c.model),s(u,c.projection,u),l(u,u);for(o=0;o<3;++o)c.eyePosition[o]=u[12+o]/u[15];var d=u[15];for(o=0;o<3;++o)d+=this.lightPosition[o]*u[4*o+3];for(o=0;o<3;++o){for(var h=u[12+o],p=0;p<3;++p)h+=u[4*p+o]*this.lightPosition[p];c.lightPosition[o]=h/d}if(this.triangleCount>0){var m=this.triShader;m.bind(),m.uniforms=c,this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},h.drawPick=function(e){e=e||{};for(var t=this.gl,n=e.model||f,r=e.view||f,i=e.projection||f,a=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)a[0][o]=Math.max(a[0][o],this.clipBounds[0][o]),a[1][o]=Math.min(a[1][o],this.clipBounds[1][o]);this._model=[].slice.call(n),this._view=[].slice.call(r),this._projection=[].slice.call(i),this._resolution=[t.drawingBufferWidth,t.drawingBufferHeight];var s={model:n,view:r,projection:i,clipBounds:a,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},l=this.pickShader;l.bind(),l.uniforms=s,this.triangleCount>0&&(this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},h.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=e.value[0]+256*e.value[1]+65536*e.value[2],n=this.cells[t],r=this.positions[n[1]].slice(0,3),i={position:r,dataCoordinate:r,index:Math.floor(n[1]/48)};return"cone"===this.traceType?i.index=Math.floor(n[1]/48):"streamtube"===this.traceType&&(i.intensity=this.intensity[n[1]],i.velocity=this.vectors[n[1]].slice(0,3),i.divergence=this.vectors[n[1]][3],i.index=t),i},h.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},e.exports=function(e,t,n){var s=n.shaders;1===arguments.length&&(e=(t=e).gl);var l=function(e,t){var n=r(e,t.meshShader.vertex,t.meshShader.fragment,null,t.meshShader.attributes);return n.attributes.position.location=0,n.attributes.color.location=2,n.attributes.uv.location=3,n.attributes.vector.location=4,n}(e,s),u=function(e,t){var n=r(e,t.pickShader.vertex,t.pickShader.fragment,null,t.pickShader.attributes);return n.attributes.position.location=0,n.attributes.id.location=1,n.attributes.vector.location=4,n}(e,s),f=o(e,c(new Uint8Array([255,255,255,255]),[1,1,4]));f.generateMipmap(),f.minFilter=e.LINEAR_MIPMAP_LINEAR,f.magFilter=e.LINEAR;var h=i(e),p=i(e),m=i(e),g=i(e),v=i(e),y=new d(e,f,l,u,h,p,v,m,g,a(e,[{buffer:h,type:e.FLOAT,size:4},{buffer:v,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:m,type:e.FLOAT,size:4},{buffer:g,type:e.FLOAT,size:2},{buffer:p,type:e.FLOAT,size:4}]),n.traceType||"cone");return y.update(t),y}},614:function(e,t,n){var r=n(3236),i=r(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),a=r(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),o=r(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * (view * conePosition);\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),s=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);t.meshShader={vertex:i,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},t.pickShader={vertex:o,fragment:s,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},737:function(e){e.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},5171:function(e,t,n){var r=n(737);e.exports=function(e){return r[e]}},9165:function(e,t,n){"use strict";e.exports=function(e){var t=e.gl,n=r(t),o=i(t,[{buffer:n,type:t.FLOAT,size:3,offset:0,stride:40},{buffer:n,type:t.FLOAT,size:4,offset:12,stride:40},{buffer:n,type:t.FLOAT,size:3,offset:28,stride:40}]),l=a(t);l.attributes.position.location=0,l.attributes.color.location=1,l.attributes.offset.location=2;var c=new s(t,n,o,l);return c.update(e),c};var r=n(2762),i=n(8116),a=n(3436),o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(e,t,n,r){this.gl=e,this.shader=r,this.buffer=t,this.vao=n,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var l=s.prototype;function c(e,t){for(var n=0;n<3;++n)e[0][n]=Math.min(e[0][n],t[n]),e[1][n]=Math.max(e[1][n],t[n])}l.isOpaque=function(){return!this.hasAlpha},l.isTransparent=function(){return this.hasAlpha},l.drawTransparent=l.draw=function(e){var t=this.gl,n=this.shader.uniforms;this.shader.bind();var r=n.view=e.view||o,i=n.projection=e.projection||o;n.model=e.model||o,n.clipBounds=this.clipBounds,n.opacity=this.opacity;var a=r[12],s=r[13],l=r[14],c=r[15],u=(e._ortho||!1?2:1)*this.pixelRatio*(i[3]*a+i[7]*s+i[11]*l+i[15]*c)/t.drawingBufferHeight;this.vao.bind();for(var f=0;f<3;++f)t.lineWidth(this.lineWidth[f]*this.pixelRatio),n.capSize=this.capSize[f]*u,this.lineCount[f]&&t.drawArrays(t.LINES,this.lineOffset[f],this.lineCount[f]);this.vao.unbind()};var u=function(){for(var e=new Array(3),t=0;t<3;++t){for(var n=[],r=1;r<=2;++r)for(var i=-1;i<=1;i+=2){var a=[0,0,0];a[(r+t)%3]=i,n.push(a)}e[t]=n}return e}();function f(e,t,n,r){for(var i=u[r],a=0;a<i.length;++a){var o=i[a];e.push(t[0],t[1],t[2],n[0],n[1],n[2],n[3],o[0],o[1],o[2])}return i.length}l.update=function(e){"lineWidth"in(e=e||{})&&(this.lineWidth=e.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in e&&(this.capSize=e.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in e&&(this.opacity=+e.opacity,this.opacity<1&&(this.hasAlpha=!0));var t=e.color||[[0,0,0],[0,0,0],[0,0,0]],n=e.position,r=e.error;if(Array.isArray(t[0])||(t=[t,t,t]),n&&r){var i=[],a=n.length,o=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var s=0;s<3;++s){this.lineOffset[s]=o;e:for(var l=0;l<a;++l){for(var u=n[l],d=0;d<3;++d)if(isNaN(u[d])||!isFinite(u[d]))continue e;var h=r[l],p=t[s];if(Array.isArray(p[0])&&(p=t[l]),3===p.length?p=[p[0],p[1],p[2],1]:4===p.length&&(p=[p[0],p[1],p[2],p[3]],!this.hasAlpha&&p[3]<1&&(this.hasAlpha=!0)),!isNaN(h[0][s])&&!isNaN(h[1][s])){var m;if(h[0][s]<0)(m=u.slice())[s]+=h[0][s],i.push(u[0],u[1],u[2],p[0],p[1],p[2],p[3],0,0,0,m[0],m[1],m[2],p[0],p[1],p[2],p[3],0,0,0),c(this.bounds,m),o+=2+f(i,m,p,s);if(h[1][s]>0)(m=u.slice())[s]+=h[1][s],i.push(u[0],u[1],u[2],p[0],p[1],p[2],p[3],0,0,0,m[0],m[1],m[2],p[0],p[1],p[2],p[3],0,0,0),c(this.bounds,m),o+=2+f(i,m,p,s)}}this.lineCount[s]=o-this.lineOffset[s]}this.buffer.update(i)}},l.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},3436:function(e,t,n){"use strict";var r=n(3236),i=n(9405),a=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * (view * worldPosition);\n  fragColor           = color;\n  fragPosition        = position;\n}"]),o=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);e.exports=function(e){return i(e,a,o,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},2260:function(e,t,n){"use strict";var r=n(7766);e.exports=function(e,t,n,r){i||(i=e.FRAMEBUFFER_UNSUPPORTED,a=e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,o=e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,s=e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var c=e.getExtension("WEBGL_draw_buffers");!l&&c&&function(e,t){var n=e.getParameter(t.MAX_COLOR_ATTACHMENTS_WEBGL);l=new Array(n+1);for(var r=0;r<=n;++r){for(var i=new Array(n),a=0;a<r;++a)i[a]=e.COLOR_ATTACHMENT0+a;for(a=r;a<n;++a)i[a]=e.NONE;l[r]=i}}(e,c);Array.isArray(t)&&(r=n,n=0|t[1],t=0|t[0]);if("number"!=typeof t)throw new Error("gl-fbo: Missing shape parameter");var u=e.getParameter(e.MAX_RENDERBUFFER_SIZE);if(t<0||t>u||n<0||n>u)throw new Error("gl-fbo: Parameters are too large for FBO");var f=1;if("color"in(r=r||{})){if((f=Math.max(0|r.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(f>1){if(!c)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(f>e.getParameter(c.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+f+" draw buffers")}}var d=e.UNSIGNED_BYTE,h=e.getExtension("OES_texture_float");if(r.float&&f>0){if(!h)throw new Error("gl-fbo: Context does not support floating point textures");d=e.FLOAT}else r.preferFloat&&f>0&&h&&(d=e.FLOAT);var m=!0;"depth"in r&&(m=!!r.depth);var g=!1;"stencil"in r&&(g=!!r.stencil);return new p(e,t,n,d,f,m,g,c)};var i,a,o,s,l=null;function c(e){return[e.getParameter(e.FRAMEBUFFER_BINDING),e.getParameter(e.RENDERBUFFER_BINDING),e.getParameter(e.TEXTURE_BINDING_2D)]}function u(e,t){e.bindFramebuffer(e.FRAMEBUFFER,t[0]),e.bindRenderbuffer(e.RENDERBUFFER,t[1]),e.bindTexture(e.TEXTURE_2D,t[2])}function f(e){switch(e){case i:throw new Error("gl-fbo: Framebuffer unsupported");case a:throw new Error("gl-fbo: Framebuffer incomplete attachment");case o:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case s:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function d(e,t,n,i,a,o){if(!i)return null;var s=r(e,t,n,a,i);return s.magFilter=e.NEAREST,s.minFilter=e.NEAREST,s.mipSamples=1,s.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,o,e.TEXTURE_2D,s.handle,0),s}function h(e,t,n,r,i){var a=e.createRenderbuffer();return e.bindRenderbuffer(e.RENDERBUFFER,a),e.renderbufferStorage(e.RENDERBUFFER,r,t,n),e.framebufferRenderbuffer(e.FRAMEBUFFER,i,e.RENDERBUFFER,a),a}function p(e,t,n,r,i,a,o,s){this.gl=e,this._shape=[0|t,0|n],this._destroyed=!1,this._ext=s,this.color=new Array(i);for(var p=0;p<i;++p)this.color[p]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=r,this._useDepth=a,this._useStencil=o;var m=this,g=[0|t,0|n];Object.defineProperties(g,{0:{get:function(){return m._shape[0]},set:function(e){return m.width=e}},1:{get:function(){return m._shape[1]},set:function(e){return m.height=e}}}),this._shapeVector=g,function(e){var t=c(e.gl),n=e.gl,r=e.handle=n.createFramebuffer(),i=e._shape[0],a=e._shape[1],o=e.color.length,s=e._ext,p=e._useStencil,m=e._useDepth,g=e._colorType;n.bindFramebuffer(n.FRAMEBUFFER,r);for(var v=0;v<o;++v)e.color[v]=d(n,i,a,g,n.RGBA,n.COLOR_ATTACHMENT0+v);0===o?(e._color_rb=h(n,i,a,n.RGBA4,n.COLOR_ATTACHMENT0),s&&s.drawBuffersWEBGL(l[0])):o>1&&s.drawBuffersWEBGL(l[o]);var y=n.getExtension("WEBGL_depth_texture");y?p?e.depth=d(n,i,a,y.UNSIGNED_INT_24_8_WEBGL,n.DEPTH_STENCIL,n.DEPTH_STENCIL_ATTACHMENT):m&&(e.depth=d(n,i,a,n.UNSIGNED_SHORT,n.DEPTH_COMPONENT,n.DEPTH_ATTACHMENT)):m&&p?e._depth_rb=h(n,i,a,n.DEPTH_STENCIL,n.DEPTH_STENCIL_ATTACHMENT):m?e._depth_rb=h(n,i,a,n.DEPTH_COMPONENT16,n.DEPTH_ATTACHMENT):p&&(e._depth_rb=h(n,i,a,n.STENCIL_INDEX,n.STENCIL_ATTACHMENT));var b=n.checkFramebufferStatus(n.FRAMEBUFFER);if(b!==n.FRAMEBUFFER_COMPLETE){for(e._destroyed=!0,n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteFramebuffer(e.handle),e.handle=null,e.depth&&(e.depth.dispose(),e.depth=null),e._depth_rb&&(n.deleteRenderbuffer(e._depth_rb),e._depth_rb=null),v=0;v<e.color.length;++v)e.color[v].dispose(),e.color[v]=null;e._color_rb&&(n.deleteRenderbuffer(e._color_rb),e._color_rb=null),u(n,t),f(b)}u(n,t)}(this)}var m=p.prototype;function g(e,t,n){if(e._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(e._shape[0]!==t||e._shape[1]!==n){var r=e.gl,i=r.getParameter(r.MAX_RENDERBUFFER_SIZE);if(t<0||t>i||n<0||n>i)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");e._shape[0]=t,e._shape[1]=n;for(var a=c(r),o=0;o<e.color.length;++o)e.color[o].shape=e._shape;e._color_rb&&(r.bindRenderbuffer(r.RENDERBUFFER,e._color_rb),r.renderbufferStorage(r.RENDERBUFFER,r.RGBA4,e._shape[0],e._shape[1])),e.depth&&(e.depth.shape=e._shape),e._depth_rb&&(r.bindRenderbuffer(r.RENDERBUFFER,e._depth_rb),e._useDepth&&e._useStencil?r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e._shape[0],e._shape[1]):e._useDepth?r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_COMPONENT16,e._shape[0],e._shape[1]):e._useStencil&&r.renderbufferStorage(r.RENDERBUFFER,r.STENCIL_INDEX,e._shape[0],e._shape[1])),r.bindFramebuffer(r.FRAMEBUFFER,e.handle);var s=r.checkFramebufferStatus(r.FRAMEBUFFER);s!==r.FRAMEBUFFER_COMPLETE&&(e.dispose(),u(r,a),f(s)),u(r,a)}}Object.defineProperties(m,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(e){if(Array.isArray(e)||(e=[0|e,0|e]),2!==e.length)throw new Error("gl-fbo: Shape vector must be length 2");var t=0|e[0],n=0|e[1];return g(this,t,n),[t,n]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(e){return g(this,e|=0,this._shape[1]),e},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(e){return e|=0,g(this,this._shape[0],e),e},enumerable:!1}}),m.bind=function(){if(!this._destroyed){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.handle),e.viewport(0,0,this._shape[0],this._shape[1])}},m.dispose=function(){if(!this._destroyed){this._destroyed=!0;var e=this.gl;e.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(e.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var t=0;t<this.color.length;++t)this.color[t].dispose(),this.color[t]=null;this._color_rb&&(e.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},2992:function(e,t,n){var r=n(3387).sprintf,i=n(5171),a=n(1848),o=n(1085);e.exports=function(e,t,n){"use strict";var s=a(t)||"of unknown name (see npm glsl-shader-name)",l="unknown type";void 0!==n&&(l=n===i.FRAGMENT_SHADER?"fragment":"vertex");for(var c=r("Error compiling %s shader %s:\n",l,s),u=r("%s%s",c,e),f=e.split("\n"),d={},h=0;h<f.length;h++){var p=f[h];if(""!==p&&"\0"!==p){var m=parseInt(p.split(":")[2]);if(isNaN(m))throw new Error(r("Could not parse error: %s",p));d[m]=p}}var g=o(t).split("\n");for(h=0;h<g.length;h++){if(d[h+3]||d[h+2]||d[h+1])if(c+=g[h]+"\n",d[h+1]){var v=d[h+1];v=v.substr(v.split(":",3).join(":").length+1).trim(),c+=r("^^^ %s\n\n",v)}}return{long:c.trim(),short:u.trim()}}},2510:function(e,t,n){"use strict";e.exports=function(e,t){var n=e.gl,r=o(n,l.vertex,l.fragment),i=o(n,l.pickVertex,l.pickFragment),a=s(n),u=s(n),f=s(n),d=s(n),h=new c(e,r,i,a,u,f,d);return h.update(t),e.addObject(h),h};var r=n(2478),i=n(7762),a=n(1888),o=n(9405),s=n(2762),l=n(6768);function c(e,t,n,r,i,a,o){this.plot=e,this.shader=t,this.pickShader=n,this.positionBuffer=r,this.weightBuffer=i,this.colorBuffer=a,this.idBuffer=o,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var u,f=c.prototype,d=[0,0,1,0,0,1,1,0,1,1,0,1];f.draw=(u=[1,0,0,0,1,0,0,0,1],function(){var e=this.plot,t=this.shader,n=this.bounds,r=this.numVertices;if(!(r<=0)){var i=e.gl,a=e.dataBox,o=n[2]-n[0],s=n[3]-n[1],l=a[2]-a[0],c=a[3]-a[1];u[0]=2*o/l,u[4]=2*s/c,u[6]=2*(n[0]-a[0])/l-1,u[7]=2*(n[1]-a[1])/c-1,t.bind();var f=t.uniforms;f.viewTransform=u,f.shape=this.shape;var d=t.attributes;this.positionBuffer.bind(),d.position.pointer(),this.weightBuffer.bind(),d.weight.pointer(i.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),d.color.pointer(i.UNSIGNED_BYTE,!0),i.drawArrays(i.TRIANGLES,0,r)}}),f.drawPick=function(){var e=[1,0,0,0,1,0,0,0,1],t=[0,0,0,0];return function(n){var r=this.plot,i=this.pickShader,a=this.bounds,o=this.numVertices;if(!(o<=0)){var s=r.gl,l=r.dataBox,c=a[2]-a[0],u=a[3]-a[1],f=l[2]-l[0],d=l[3]-l[1];e[0]=2*c/f,e[4]=2*u/d,e[6]=2*(a[0]-l[0])/f-1,e[7]=2*(a[1]-l[1])/d-1;for(var h=0;h<4;++h)t[h]=n>>8*h&255;this.pickOffset=n,i.bind();var p=i.uniforms;p.viewTransform=e,p.pickOffset=t,p.shape=this.shape;var m=i.attributes;return this.positionBuffer.bind(),m.position.pointer(),this.weightBuffer.bind(),m.weight.pointer(s.UNSIGNED_BYTE,!1),this.idBuffer.bind(),m.pickId.pointer(s.UNSIGNED_BYTE,!1),s.drawArrays(s.TRIANGLES,0,o),n+this.shape[0]*this.shape[1]}}}(),f.pick=function(e,t,n){var r=this.pickOffset,i=this.shape[0]*this.shape[1];if(n<r||n>=r+i)return null;var a=n-r,o=this.xData,s=this.yData;return{object:this,pointId:a,dataCoord:[o[a%this.shape[0]],s[a/this.shape[0]|0]]}},f.update=function(e){var t=(e=e||{}).shape||[0,0],n=e.x||i(t[0]),o=e.y||i(t[1]),s=e.z||new Float32Array(t[0]*t[1]),l=!1!==e.zsmooth;this.xData=n,this.yData=o;var c,u,f,h,p=e.colorLevels||[0],m=e.colorValues||[0,0,0,1],g=p.length,v=this.bounds;l?(c=v[0]=n[0],u=v[1]=o[0],f=v[2]=n[n.length-1],h=v[3]=o[o.length-1]):(c=v[0]=n[0]+(n[1]-n[0])/2,u=v[1]=o[0]+(o[1]-o[0])/2,f=v[2]=n[n.length-1]+(n[n.length-1]-n[n.length-2])/2,h=v[3]=o[o.length-1]+(o[o.length-1]-o[o.length-2])/2);var y=1/(f-c),b=1/(h-u),x=t[0],_=t[1];this.shape=[x,_];var w=(l?(x-1)*(_-1):x*_)*(d.length>>>1);this.numVertices=w;for(var A=a.mallocUint8(4*w),k=a.mallocFloat32(2*w),E=a.mallocUint8(2*w),T=a.mallocUint32(w),M=0,S=l?x-1:x,C=l?_-1:_,O=0;O<C;++O){var R,N;l?(R=b*(o[O]-u),N=b*(o[O+1]-u)):(R=O<_-1?b*(o[O]-(o[O+1]-o[O])/2-u):b*(o[O]-(o[O]-o[O-1])/2-u),N=O<_-1?b*(o[O]+(o[O+1]-o[O])/2-u):b*(o[O]+(o[O]-o[O-1])/2-u));for(var L=0;L<S;++L){var D,P;l?(D=y*(n[L]-c),P=y*(n[L+1]-c)):(D=L<x-1?y*(n[L]-(n[L+1]-n[L])/2-c):y*(n[L]-(n[L]-n[L-1])/2-c),P=L<x-1?y*(n[L]+(n[L+1]-n[L])/2-c):y*(n[L]+(n[L]-n[L-1])/2-c));for(var I=0;I<d.length;I+=2){var F,z,j,B,U=d[I],$=d[I+1],q=s[l?(O+$)*x+(L+U):O*x+L],H=r.le(p,q);if(H<0)F=m[0],z=m[1],j=m[2],B=m[3];else if(H===g-1)F=m[4*g-4],z=m[4*g-3],j=m[4*g-2],B=m[4*g-1];else{var V=(q-p[H])/(p[H+1]-p[H]),W=1-V,G=4*H,Y=4*(H+1);F=W*m[G]+V*m[Y],z=W*m[G+1]+V*m[Y+1],j=W*m[G+2]+V*m[Y+2],B=W*m[G+3]+V*m[Y+3]}A[4*M]=255*F,A[4*M+1]=255*z,A[4*M+2]=255*j,A[4*M+3]=255*B,k[2*M]=.5*D+.5*P,k[2*M+1]=.5*R+.5*N,E[2*M]=U,E[2*M+1]=$,T[M]=O*x+L,M+=1}}}this.positionBuffer.update(k),this.weightBuffer.update(E),this.colorBuffer.update(A),this.idBuffer.update(T),a.free(k),a.free(A),a.free(E),a.free(T)},f.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},6768:function(e,t,n){"use strict";var r=n(3236);e.exports={fragment:r(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:r(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},7319:function(e,t,n){var r=n(3236),i=n(9405),a=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * (view * (model * vec4(p, 1.0)));\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),o=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),s=r(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),l=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];t.createShader=function(e){return i(e,a,o,null,l)},t.createPickShader=function(e){return i(e,a,s,null,l)}},5714:function(e,t,n){"use strict";e.exports=function(e){var t=e.gl||e.scene&&e.scene.gl,n=f(t);n.attributes.position.location=0,n.attributes.nextPosition.location=1,n.attributes.arcLength.location=2,n.attributes.lineWidth.location=3,n.attributes.color.location=4;var o=d(t);o.attributes.position.location=0,o.attributes.nextPosition.location=1,o.attributes.arcLength.location=2,o.attributes.lineWidth.location=3,o.attributes.color.location=4;for(var s=r(t),l=i(t,[{buffer:s,size:3,offset:0,stride:48},{buffer:s,size:3,offset:12,stride:48},{buffer:s,size:1,offset:24,stride:48},{buffer:s,size:1,offset:28,stride:48},{buffer:s,size:4,offset:32,stride:48}]),u=c(new Array(1024),[256,1,4]),h=0;h<1024;++h)u.data[h]=255;var p=a(t,u);p.wrap=t.REPEAT;var m=new v(t,n,o,s,l,p);return m.update(e),m};var r=n(2762),i=n(8116),a=n(7766),o=new Uint8Array(4),s=new Float32Array(o.buffer);var l=n(2478),c=n(9618),u=n(7319),f=u.createShader,d=u.createPickShader,h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function p(e,t){for(var n=0,r=0;r<3;++r){var i=e[r]-t[r];n+=i*i}return Math.sqrt(n)}function m(e){for(var t=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],n=0;n<3;++n)t[0][n]=Math.max(e[0][n],t[0][n]),t[1][n]=Math.min(e[1][n],t[1][n]);return t}function g(e,t,n,r){this.arcLength=e,this.position=t,this.index=n,this.dataCoordinate=r}function v(e,t,n,r,i,a){this.gl=e,this.shader=t,this.pickShader=n,this.buffer=r,this.vao=i,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=a,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var y=v.prototype;y.isTransparent=function(){return this.hasAlpha},y.isOpaque=function(){return!this.hasAlpha},y.pickSlots=1,y.setPickBase=function(e){this.pickId=e},y.drawTransparent=y.draw=function(e){if(this.vertexCount){var t=this.gl,n=this.shader,r=this.vao;n.bind(),n.uniforms={model:e.model||h,view:e.view||h,projection:e.projection||h,clipBounds:m(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[t.drawingBufferWidth,t.drawingBufferHeight],pixelRatio:this.pixelRatio},r.bind(),r.draw(t.TRIANGLE_STRIP,this.vertexCount),r.unbind()}},y.drawPick=function(e){if(this.vertexCount){var t=this.gl,n=this.pickShader,r=this.vao;n.bind(),n.uniforms={model:e.model||h,view:e.view||h,projection:e.projection||h,pickId:this.pickId,clipBounds:m(this.clipBounds),screenShape:[t.drawingBufferWidth,t.drawingBufferHeight],pixelRatio:this.pixelRatio},r.bind(),r.draw(t.TRIANGLE_STRIP,this.vertexCount),r.unbind()}},y.update=function(e){var t,n;this.dirty=!0;var r=!!e.connectGaps;"dashScale"in e&&(this.dashScale=e.dashScale),this.hasAlpha=!1,"opacity"in e&&(this.opacity=+e.opacity,this.opacity<1&&(this.hasAlpha=!0));var i=[],a=[],o=[],s=0,u=0,f=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],d=e.position||e.positions;if(d){var h=e.color||e.colors||[0,0,0,1],m=e.lineWidth||1,g=!1;e:for(t=1;t<d.length;++t){var v,y,b,x=d[t-1],_=d[t];for(a.push(s),o.push(x.slice()),n=0;n<3;++n){if(isNaN(x[n])||isNaN(_[n])||!isFinite(x[n])||!isFinite(_[n])){if(!r&&i.length>0){for(var w=0;w<24;++w)i.push(i[i.length-12]);u+=2,g=!0}continue e}f[0][n]=Math.min(f[0][n],x[n],_[n]),f[1][n]=Math.max(f[1][n],x[n],_[n])}Array.isArray(h[0])?(v=h.length>t-1?h[t-1]:h.length>0?h[h.length-1]:[0,0,0,1],y=h.length>t?h[t]:h.length>0?h[h.length-1]:[0,0,0,1]):v=y=h,3===v.length&&(v=[v[0],v[1],v[2],1]),3===y.length&&(y=[y[0],y[1],y[2],1]),!this.hasAlpha&&v[3]<1&&(this.hasAlpha=!0),b=Array.isArray(m)?m.length>t-1?m[t-1]:m.length>0?m[m.length-1]:[0,0,0,1]:m;var A=s;if(s+=p(x,_),g){for(n=0;n<2;++n)i.push(x[0],x[1],x[2],_[0],_[1],_[2],A,b,v[0],v[1],v[2],v[3]);u+=2,g=!1}i.push(x[0],x[1],x[2],_[0],_[1],_[2],A,b,v[0],v[1],v[2],v[3],x[0],x[1],x[2],_[0],_[1],_[2],A,-b,v[0],v[1],v[2],v[3],_[0],_[1],_[2],x[0],x[1],x[2],s,-b,y[0],y[1],y[2],y[3],_[0],_[1],_[2],x[0],x[1],x[2],s,b,y[0],y[1],y[2],y[3]),u+=4}}if(this.buffer.update(i),a.push(s),o.push(d[d.length-1].slice()),this.bounds=f,this.vertexCount=u,this.points=o,this.arcLength=a,"dashes"in e){var k=e.dashes.slice();for(k.unshift(0),t=1;t<k.length;++t)k[t]=k[t-1]+k[t];var E=c(new Array(1024),[256,1,4]);for(t=0;t<256;++t){for(n=0;n<4;++n)E.set(t,0,n,0);1&l.le(k,k[k.length-1]*t/255)?E.set(t,0,0,0):E.set(t,0,0,255)}this.texture.setPixels(E)}},y.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},y.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=function(e,t,n,r){return o[0]=r,o[1]=n,o[2]=t,o[3]=e,s[0]}(e.value[0],e.value[1],e.value[2],0),n=l.le(this.arcLength,t);if(n<0)return null;if(n===this.arcLength.length-1)return new g(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),n);for(var r=this.points[n],i=this.points[Math.min(n+1,this.points.length-1)],a=(t-this.arcLength[n])/(this.arcLength[n+1]-this.arcLength[n]),c=1-a,u=[0,0,0],f=0;f<3;++f)u[f]=c*r[f]+a*i[f];var d=Math.min(a<.5?n:n+1,this.points.length-1);return new g(t,u,d,this.points[d])}},1903:function(e){e.exports=function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},6864:function(e){e.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},9921:function(e){e.exports=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=e[9],f=e[10],d=e[11],h=e[12],p=e[13],m=e[14],g=e[15];return(t*o-n*a)*(f*g-d*m)-(t*s-r*a)*(u*g-d*p)+(t*l-i*a)*(u*m-f*p)+(n*s-r*o)*(c*g-d*h)-(n*l-i*o)*(c*m-f*h)+(r*l-i*s)*(c*p-u*h)}},7399:function(e){e.exports=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,l=i+i,c=n*o,u=r*o,f=r*s,d=i*o,h=i*s,p=i*l,m=a*o,g=a*s,v=a*l;return e[0]=1-f-p,e[1]=u+v,e[2]=d-g,e[3]=0,e[4]=u-v,e[5]=1-c-p,e[6]=h+m,e[7]=0,e[8]=d+g,e[9]=h-m,e[10]=1-c-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},6743:function(e){e.exports=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=r+r,l=i+i,c=a+a,u=r*s,f=r*l,d=r*c,h=i*l,p=i*c,m=a*c,g=o*s,v=o*l,y=o*c;return e[0]=1-(h+m),e[1]=f+y,e[2]=d-v,e[3]=0,e[4]=f-y,e[5]=1-(u+m),e[6]=p+g,e[7]=0,e[8]=d+v,e[9]=p-g,e[10]=1-(u+h),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}},7894:function(e){e.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},7608:function(e){e.exports=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],f=t[9],d=t[10],h=t[11],p=t[12],m=t[13],g=t[14],v=t[15],y=n*s-r*o,b=n*l-i*o,x=n*c-a*o,_=r*l-i*s,w=r*c-a*s,A=i*c-a*l,k=u*m-f*p,E=u*g-d*p,T=u*v-h*p,M=f*g-d*m,S=f*v-h*m,C=d*v-h*g,O=y*C-b*S+x*M+_*T-w*E+A*k;if(!O)return null;return O=1/O,e[0]=(s*C-l*S+c*M)*O,e[1]=(i*S-r*C-a*M)*O,e[2]=(m*A-g*w+v*_)*O,e[3]=(d*w-f*A-h*_)*O,e[4]=(l*T-o*C-c*E)*O,e[5]=(n*C-i*T+a*E)*O,e[6]=(g*x-p*A-v*b)*O,e[7]=(u*A-d*x+h*b)*O,e[8]=(o*S-s*T+c*k)*O,e[9]=(r*T-n*S-a*k)*O,e[10]=(p*w-m*x+v*y)*O,e[11]=(f*x-u*w-h*y)*O,e[12]=(s*E-o*M-l*k)*O,e[13]=(n*M-r*E+i*k)*O,e[14]=(m*b-p*_-g*y)*O,e[15]=(u*_-f*b+d*y)*O,e}},6582:function(e,t,n){var r=n(7894);e.exports=function(e,t,n,i){var a,o,s,l,c,u,f,d,h,p,m=t[0],g=t[1],v=t[2],y=i[0],b=i[1],x=i[2],_=n[0],w=n[1],A=n[2];if(Math.abs(m-_)<1e-6&&Math.abs(g-w)<1e-6&&Math.abs(v-A)<1e-6)return r(e);f=m-_,d=g-w,h=v-A,p=1/Math.sqrt(f*f+d*d+h*h),a=b*(h*=p)-x*(d*=p),o=x*(f*=p)-y*h,s=y*d-b*f,(p=Math.sqrt(a*a+o*o+s*s))?(a*=p=1/p,o*=p,s*=p):(a=0,o=0,s=0);l=d*s-h*o,c=h*a-f*s,u=f*o-d*a,(p=Math.sqrt(l*l+c*c+u*u))?(l*=p=1/p,c*=p,u*=p):(l=0,c=0,u=0);return e[0]=a,e[1]=l,e[2]=f,e[3]=0,e[4]=o,e[5]=c,e[6]=d,e[7]=0,e[8]=s,e[9]=u,e[10]=h,e[11]=0,e[12]=-(a*m+o*g+s*v),e[13]=-(l*m+c*g+u*v),e[14]=-(f*m+d*g+h*v),e[15]=1,e}},6760:function(e){e.exports=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],f=t[8],d=t[9],h=t[10],p=t[11],m=t[12],g=t[13],v=t[14],y=t[15],b=n[0],x=n[1],_=n[2],w=n[3];return e[0]=b*r+x*s+_*f+w*m,e[1]=b*i+x*l+_*d+w*g,e[2]=b*a+x*c+_*h+w*v,e[3]=b*o+x*u+_*p+w*y,b=n[4],x=n[5],_=n[6],w=n[7],e[4]=b*r+x*s+_*f+w*m,e[5]=b*i+x*l+_*d+w*g,e[6]=b*a+x*c+_*h+w*v,e[7]=b*o+x*u+_*p+w*y,b=n[8],x=n[9],_=n[10],w=n[11],e[8]=b*r+x*s+_*f+w*m,e[9]=b*i+x*l+_*d+w*g,e[10]=b*a+x*c+_*h+w*v,e[11]=b*o+x*u+_*p+w*y,b=n[12],x=n[13],_=n[14],w=n[15],e[12]=b*r+x*s+_*f+w*m,e[13]=b*i+x*l+_*d+w*g,e[14]=b*a+x*c+_*h+w*v,e[15]=b*o+x*u+_*p+w*y,e}},4040:function(e){e.exports=function(e,t,n,r,i,a,o){var s=1/(t-n),l=1/(r-i),c=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(o+a)*c,e[15]=1,e}},4772:function(e){e.exports=function(e,t,n,r,i){var a=1/Math.tan(t/2),o=1/(r-i);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*o,e[15]=0,e}},6079:function(e){e.exports=function(e,t,n,r){var i,a,o,s,l,c,u,f,d,h,p,m,g,v,y,b,x,_,w,A,k,E,T,M,S=r[0],C=r[1],O=r[2],R=Math.sqrt(S*S+C*C+O*O);if(Math.abs(R)<1e-6)return null;S*=R=1/R,C*=R,O*=R,i=Math.sin(n),a=Math.cos(n),o=1-a,s=t[0],l=t[1],c=t[2],u=t[3],f=t[4],d=t[5],h=t[6],p=t[7],m=t[8],g=t[9],v=t[10],y=t[11],b=S*S*o+a,x=C*S*o+O*i,_=O*S*o-C*i,w=S*C*o-O*i,A=C*C*o+a,k=O*C*o+S*i,E=S*O*o+C*i,T=C*O*o-S*i,M=O*O*o+a,e[0]=s*b+f*x+m*_,e[1]=l*b+d*x+g*_,e[2]=c*b+h*x+v*_,e[3]=u*b+p*x+y*_,e[4]=s*w+f*A+m*k,e[5]=l*w+d*A+g*k,e[6]=c*w+h*A+v*k,e[7]=u*w+p*A+y*k,e[8]=s*E+f*T+m*M,e[9]=l*E+d*T+g*M,e[10]=c*E+h*T+v*M,e[11]=u*E+p*T+y*M,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e}},5567:function(e){e.exports=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],l=t[7],c=t[8],u=t[9],f=t[10],d=t[11];t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[4]=a*i+c*r,e[5]=o*i+u*r,e[6]=s*i+f*r,e[7]=l*i+d*r,e[8]=c*i-a*r,e[9]=u*i-o*r,e[10]=f*i-s*r,e[11]=d*i-l*r,e}},2408:function(e){e.exports=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],c=t[8],u=t[9],f=t[10],d=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=a*i-c*r,e[1]=o*i-u*r,e[2]=s*i-f*r,e[3]=l*i-d*r,e[8]=a*r+c*i,e[9]=o*r+u*i,e[10]=s*r+f*i,e[11]=l*r+d*i,e}},7089:function(e){e.exports=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],c=t[4],u=t[5],f=t[6],d=t[7];t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=a*i+c*r,e[1]=o*i+u*r,e[2]=s*i+f*r,e[3]=l*i+d*r,e[4]=c*i-a*r,e[5]=u*i-o*r,e[6]=f*i-s*r,e[7]=d*i-l*r,e}},2504:function(e){e.exports=function(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},7656:function(e){e.exports=function(e,t,n){var r,i,a,o,s,l,c,u,f,d,h,p,m=n[0],g=n[1],v=n[2];t===e?(e[12]=t[0]*m+t[4]*g+t[8]*v+t[12],e[13]=t[1]*m+t[5]*g+t[9]*v+t[13],e[14]=t[2]*m+t[6]*g+t[10]*v+t[14],e[15]=t[3]*m+t[7]*g+t[11]*v+t[15]):(r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],f=t[8],d=t[9],h=t[10],p=t[11],e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=f,e[9]=d,e[10]=h,e[11]=p,e[12]=r*m+s*g+f*v+t[12],e[13]=i*m+l*g+d*v+t[13],e[14]=a*m+c*g+h*v+t[14],e[15]=o*m+u*g+p*v+t[15]);return e}},5665:function(e){e.exports=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}},7626:function(e,t,n){"use strict";var r=n(2642),i=n(9346);function a(e,t){for(var n=[0,0,0,0],r=0;r<4;++r)for(var i=0;i<4;++i)n[i]+=e[4*r+i]*t[r];return n}function o(e,t,n,r,i){for(var o=a(r,a(n,a(t,[e[0],e[1],e[2],1]))),s=0;s<3;++s)o[s]/=o[3];return[.5*i[0]*(1+o[0]),.5*i[1]*(1-o[1])]}function s(e,t){for(var n=[0,0,0],r=0;r<e.length;++r)for(var i=e[r],a=t[r],o=0;o<3;++o)n[o]+=a*i[o];return n}e.exports=function(e,t,n,a,l,c){if(1===e.length)return[0,e[0].slice()];for(var u=new Array(e.length),f=0;f<e.length;++f)u[f]=o(e[f],n,a,l,c);var d=0,h=1/0;for(f=0;f<u.length;++f){for(var p=0,m=0;m<2;++m)p+=Math.pow(u[f][m]-t[m],2);p<h&&(h=p,d=f)}var g=function(e,t){if(2===e.length){for(var n=0,a=0,o=0;o<2;++o)n+=Math.pow(t[o]-e[0][o],2),a+=Math.pow(t[o]-e[1][o],2);return(n=Math.sqrt(n))+(a=Math.sqrt(a))<1e-6?[1,0]:[a/(n+a),n/(a+n)]}if(3===e.length){var s=[0,0];return i(e[0],e[1],e[2],t,s),r(e,s)}return[]}(u,t),v=0;for(f=0;f<3;++f){if(g[f]<-.001||g[f]>1.0001)return null;v+=g[f]}if(Math.abs(v-1)>.001)return null;return[d,s(e,g),g]}},840:function(e,t,n){var r=n(3236),i=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * (view * (model * vec4(p, 1.0)));\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),a=r(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),o=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * (view * (model * vec4(position, 1.0)));\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),s=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),l=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * (view * (model * vec4(position, 1.0)));\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),c=r(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),u=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * (view * (model * vec4(position, 1.0)));\n  f_id        = id;\n  f_position  = position;\n}"]),f=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),d=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * (view * (model * vec4(position, 1.0)));\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),h=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * (view * (model * vec4(position, 1.0)));\n}"]),p=r(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);t.meshShader={vertex:i,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},t.wireShader={vertex:o,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},t.pointShader={vertex:l,fragment:c,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},t.pickShader={vertex:u,fragment:f,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},t.pointPickShader={vertex:d,fragment:f,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},t.contourShader={vertex:h,fragment:p,attributes:[{name:"position",type:"vec3"}]}},7201:function(e,t,n){"use strict";var r=n(9405),i=n(2762),a=n(8116),o=n(7766),s=n(8406),l=n(6760),c=n(7608),u=n(9618),f=n(6729),d=n(7765),h=n(1888),p=n(840),m=n(7626),g=p.meshShader,v=p.wireShader,y=p.pointShader,b=p.pickShader,x=p.pointPickShader,_=p.contourShader,w=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function A(e,t,n,r,i,a,o,s,l,c,u,f,d,h,p,m,g,v,y,b,x,_,A,k,E,T,M){this.gl=e,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=t,this.dirty=!0,this.triShader=n,this.lineShader=r,this.pointShader=i,this.pickShader=a,this.pointPickShader=o,this.contourShader=s,this.trianglePositions=l,this.triangleColors=u,this.triangleNormals=d,this.triangleUVs=f,this.triangleIds=c,this.triangleVAO=h,this.triangleCount=0,this.lineWidth=1,this.edgePositions=p,this.edgeColors=g,this.edgeUVs=v,this.edgeIds=m,this.edgeVAO=y,this.edgeCount=0,this.pointPositions=b,this.pointColors=_,this.pointUVs=A,this.pointSizes=k,this.pointIds=x,this.pointVAO=E,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=T,this.contourVAO=M,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=w,this._view=w,this._projection=w,this._resolution=[1,1]}var k=A.prototype;function E(e,t){if(!t)return 1;if(!t.length)return 1;for(var n=0;n<t.length;++n){if(t.length<2)return 1;if(t[n][0]===e)return t[n][1];if(t[n][0]>e&&n>0){var r=(t[n][0]-e)/(t[n][0]-t[n-1][0]);return t[n][1]*(1-r)+r*t[n-1][1]}}return 1}function T(e){var t=r(e,y.vertex,y.fragment);return t.attributes.position.location=0,t.attributes.color.location=2,t.attributes.uv.location=3,t.attributes.pointSize.location=4,t}function M(e){var t=r(e,b.vertex,b.fragment);return t.attributes.position.location=0,t.attributes.id.location=1,t}function S(e){var t=r(e,x.vertex,x.fragment);return t.attributes.position.location=0,t.attributes.id.location=1,t.attributes.pointSize.location=4,t}function C(e){var t=r(e,_.vertex,_.fragment);return t.attributes.position.location=0,t}k.isOpaque=function(){return!this.hasAlpha},k.isTransparent=function(){return this.hasAlpha},k.pickSlots=1,k.setPickBase=function(e){this.pickId=e},k.highlight=function(e){if(e&&this.contourEnable){for(var t=d(this.cells,this.intensity,e.intensity),n=t.cells,r=t.vertexIds,i=t.vertexWeights,a=n.length,o=h.mallocFloat32(6*a),s=0,l=0;l<a;++l)for(var c=n[l],u=0;u<2;++u){var f=c[0];2===c.length&&(f=c[u]);for(var p=r[f][0],m=r[f][1],g=i[f],v=1-g,y=this.positions[p],b=this.positions[m],x=0;x<3;++x)o[s++]=g*y[x]+v*b[x]}this.contourCount=s/3|0,this.contourPositions.update(o.subarray(0,s)),h.free(o)}else this.contourCount=0},k.update=function(e){e=e||{};var t=this.gl;this.dirty=!0,"contourEnable"in e&&(this.contourEnable=e.contourEnable),"contourColor"in e&&(this.contourColor=e.contourColor),"lineWidth"in e&&(this.lineWidth=e.lineWidth),"lightPosition"in e&&(this.lightPosition=e.lightPosition),this.hasAlpha=!1,"opacity"in e&&(this.opacity=e.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in e&&(this.opacityscale=e.opacityscale,this.hasAlpha=!0),"ambient"in e&&(this.ambientLight=e.ambient),"diffuse"in e&&(this.diffuseLight=e.diffuse),"specular"in e&&(this.specularLight=e.specular),"roughness"in e&&(this.roughness=e.roughness),"fresnel"in e&&(this.fresnel=e.fresnel),e.texture?(this.texture.dispose(),this.texture=o(t,e.texture)):e.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=t.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=t.LINEAR,this.texture.setPixels(function(e,t){for(var n=f({colormap:e,nshades:256,format:"rgba"}),r=new Uint8Array(1024),i=0;i<256;++i){for(var a=n[i],o=0;o<3;++o)r[4*i+o]=a[o];r[4*i+3]=t?255*E(i/255,t):255*a[3]}return u(r,[256,256,4],[4,0,1])}(e.colormap,this.opacityscale)),this.texture.generateMipmap());var n=e.cells,r=e.positions;if(r&&n){var i=[],a=[],l=[],c=[],d=[],h=[],p=[],m=[],g=[],v=[],y=[],b=[],x=[],_=[];this.cells=n,this.positions=r;var w=e.vertexNormals,A=e.cellNormals,k=void 0===e.vertexNormalsEpsilon?1e-6:e.vertexNormalsEpsilon,T=void 0===e.faceNormalsEpsilon?1e-6:e.faceNormalsEpsilon;e.useFacetNormals&&!A&&(A=s.faceNormals(n,r,T)),A||w||(w=s.vertexNormals(n,r,k));var M=e.vertexColors,S=e.cellColors,C=e.meshColor||[1,1,1,1],O=e.vertexUVs,R=e.vertexIntensity,N=e.cellUVs,L=e.cellIntensity,D=1/0,P=-1/0;if(!O&&!N)if(R)if(e.vertexIntensityBounds)D=+e.vertexIntensityBounds[0],P=+e.vertexIntensityBounds[1];else for(var I=0;I<R.length;++I){var F=R[I];D=Math.min(D,F),P=Math.max(P,F)}else if(L)if(e.cellIntensityBounds)D=+e.cellIntensityBounds[0],P=+e.cellIntensityBounds[1];else for(I=0;I<L.length;++I){F=L[I];D=Math.min(D,F),P=Math.max(P,F)}else for(I=0;I<r.length;++I){F=r[I][2];D=Math.min(D,F),P=Math.max(P,F)}this.intensity=R||(L||function(e){for(var t=e.length,n=new Array(t),r=0;r<t;++r)n[r]=e[r][2];return n}(r)),this.pickVertex=!(L||S);var z=e.pointSizes,j=e.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(I=0;I<r.length;++I)for(var B=r[I],U=0;U<3;++U)!isNaN(B[U])&&isFinite(B[U])&&(this.bounds[0][U]=Math.min(this.bounds[0][U],B[U]),this.bounds[1][U]=Math.max(this.bounds[1][U],B[U]));var $=0,q=0,H=0;e:for(I=0;I<n.length;++I){var V=n[I];switch(V.length){case 1:for(B=r[G=V[0]],U=0;U<3;++U)if(isNaN(B[U])||!isFinite(B[U]))continue e;v.push(B[0],B[1],B[2]),Y=M?M[G]:S?S[I]:C,this.opacityscale&&R?a.push(Y[0],Y[1],Y[2],this.opacity*E((R[G]-D)/(P-D),this.opacityscale)):3===Y.length?y.push(Y[0],Y[1],Y[2],this.opacity):(y.push(Y[0],Y[1],Y[2],Y[3]*this.opacity),Y[3]<1&&(this.hasAlpha=!0)),X=O?O[G]:R?[(R[G]-D)/(P-D),0]:N?N[I]:L?[(L[I]-D)/(P-D),0]:[(B[2]-D)/(P-D),0],b.push(X[0],X[1]),z?x.push(z[G]):x.push(j),_.push(I),H+=1;break;case 2:for(U=0;U<2;++U){B=r[G=V[U]];for(var W=0;W<3;++W)if(isNaN(B[W])||!isFinite(B[W]))continue e}for(U=0;U<2;++U){B=r[G=V[U]];h.push(B[0],B[1],B[2]),Y=M?M[G]:S?S[I]:C,this.opacityscale&&R?a.push(Y[0],Y[1],Y[2],this.opacity*E((R[G]-D)/(P-D),this.opacityscale)):3===Y.length?p.push(Y[0],Y[1],Y[2],this.opacity):(p.push(Y[0],Y[1],Y[2],Y[3]*this.opacity),Y[3]<1&&(this.hasAlpha=!0)),X=O?O[G]:R?[(R[G]-D)/(P-D),0]:N?N[I]:L?[(L[I]-D)/(P-D),0]:[(B[2]-D)/(P-D),0],m.push(X[0],X[1]),g.push(I)}q+=1;break;case 3:for(U=0;U<3;++U)for(B=r[G=V[U]],W=0;W<3;++W)if(isNaN(B[W])||!isFinite(B[W]))continue e;for(U=0;U<3;++U){var G,Y,X,K;B=r[G=V[2-U]];i.push(B[0],B[1],B[2]),(Y=M?M[G]:S?S[I]:C)?this.opacityscale&&R?a.push(Y[0],Y[1],Y[2],this.opacity*E((R[G]-D)/(P-D),this.opacityscale)):3===Y.length?a.push(Y[0],Y[1],Y[2],this.opacity):(a.push(Y[0],Y[1],Y[2],Y[3]*this.opacity),Y[3]<1&&(this.hasAlpha=!0)):a.push(.5,.5,.5,1),X=O?O[G]:R?[(R[G]-D)/(P-D),0]:N?N[I]:L?[(L[I]-D)/(P-D),0]:[(B[2]-D)/(P-D),0],c.push(X[0],X[1]),K=w?w[G]:A[I],l.push(K[0],K[1],K[2]),d.push(I)}$+=1}}this.pointCount=H,this.edgeCount=q,this.triangleCount=$,this.pointPositions.update(v),this.pointColors.update(y),this.pointUVs.update(b),this.pointSizes.update(x),this.pointIds.update(new Uint32Array(_)),this.edgePositions.update(h),this.edgeColors.update(p),this.edgeUVs.update(m),this.edgeIds.update(new Uint32Array(g)),this.trianglePositions.update(i),this.triangleColors.update(a),this.triangleUVs.update(c),this.triangleNormals.update(l),this.triangleIds.update(new Uint32Array(d))}},k.drawTransparent=k.draw=function(e){e=e||{};for(var t=this.gl,n=e.model||w,r=e.view||w,i=e.projection||w,a=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)a[0][o]=Math.max(a[0][o],this.clipBounds[0][o]),a[1][o]=Math.min(a[1][o],this.clipBounds[1][o]);var s={model:n,view:r,projection:i,inverseModel:w.slice(),clipBounds:a,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};s.inverseModel=c(s.inverseModel,s.model),t.disable(t.CULL_FACE),this.texture.bind(0);var u=new Array(16);l(u,s.view,s.model),l(u,s.projection,u),c(u,u);for(o=0;o<3;++o)s.eyePosition[o]=u[12+o]/u[15];var f,d=u[15];for(o=0;o<3;++o)d+=this.lightPosition[o]*u[4*o+3];for(o=0;o<3;++o){for(var h=u[12+o],p=0;p<3;++p)h+=u[4*p+o]*this.lightPosition[p];s.lightPosition[o]=h/d}this.triangleCount>0&&((f=this.triShader).bind(),f.uniforms=s,this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());this.edgeCount>0&&this.lineWidth>0&&((f=this.lineShader).bind(),f.uniforms=s,this.edgeVAO.bind(),t.lineWidth(this.lineWidth*this.pixelRatio),t.drawArrays(t.LINES,0,2*this.edgeCount),this.edgeVAO.unbind());this.pointCount>0&&((f=this.pointShader).bind(),f.uniforms=s,this.pointVAO.bind(),t.drawArrays(t.POINTS,0,this.pointCount),this.pointVAO.unbind());this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((f=this.contourShader).bind(),f.uniforms=s,this.contourVAO.bind(),t.drawArrays(t.LINES,0,this.contourCount),this.contourVAO.unbind())},k.drawPick=function(e){e=e||{};for(var t=this.gl,n=e.model||w,r=e.view||w,i=e.projection||w,a=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)a[0][o]=Math.max(a[0][o],this.clipBounds[0][o]),a[1][o]=Math.min(a[1][o],this.clipBounds[1][o]);this._model=[].slice.call(n),this._view=[].slice.call(r),this._projection=[].slice.call(i),this._resolution=[t.drawingBufferWidth,t.drawingBufferHeight];var s,l={model:n,view:r,projection:i,clipBounds:a,pickId:this.pickId/255};((s=this.pickShader).bind(),s.uniforms=l,this.triangleCount>0&&(this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),t.lineWidth(this.lineWidth*this.pixelRatio),t.drawArrays(t.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0)&&((s=this.pointPickShader).bind(),s.uniforms=l,this.pointVAO.bind(),t.drawArrays(t.POINTS,0,this.pointCount),this.pointVAO.unbind())},k.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;for(var t=e.value[0]+256*e.value[1]+65536*e.value[2],n=this.cells[t],r=this.positions,i=new Array(n.length),a=0;a<n.length;++a)i[a]=r[n[a]];var o=e.coord[0],s=e.coord[1];if(!this.pickVertex){var l=this.positions[n[0]],c=this.positions[n[1]],u=this.positions[n[2]],f=[(l[0]+c[0]+u[0])/3,(l[1]+c[1]+u[1])/3,(l[2]+c[2]+u[2])/3];return{_cellCenter:!0,position:[o,s],index:t,cell:n,cellId:t,intensity:this.intensity[t],dataCoordinate:f}}var d=m(i,[o*this.pixelRatio,this._resolution[1]-s*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!d)return null;var h=d[2],p=0;for(a=0;a<n.length;++a)p+=h[a]*this.intensity[n[a]];return{position:d[1],index:n[d[0]],cell:n,cellId:t,intensity:p,dataCoordinate:this.positions[n[d[0]]]}},k.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},e.exports=function(e,t){if(1===arguments.length&&(e=(t=e).gl),!(e.getExtension("OES_standard_derivatives")||e.getExtension("MOZ_OES_standard_derivatives")||e.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var n=function(e){var t=r(e,g.vertex,g.fragment);return t.attributes.position.location=0,t.attributes.color.location=2,t.attributes.uv.location=3,t.attributes.normal.location=4,t}(e),s=function(e){var t=r(e,v.vertex,v.fragment);return t.attributes.position.location=0,t.attributes.color.location=2,t.attributes.uv.location=3,t}(e),l=T(e),c=M(e),f=S(e),d=C(e),h=o(e,u(new Uint8Array([255,255,255,255]),[1,1,4]));h.generateMipmap(),h.minFilter=e.LINEAR_MIPMAP_LINEAR,h.magFilter=e.LINEAR;var p=i(e),m=i(e),y=i(e),b=i(e),x=i(e),_=a(e,[{buffer:p,type:e.FLOAT,size:3},{buffer:x,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:m,type:e.FLOAT,size:4},{buffer:y,type:e.FLOAT,size:2},{buffer:b,type:e.FLOAT,size:3}]),w=i(e),k=i(e),E=i(e),O=i(e),R=a(e,[{buffer:w,type:e.FLOAT,size:3},{buffer:O,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:k,type:e.FLOAT,size:4},{buffer:E,type:e.FLOAT,size:2}]),N=i(e),L=i(e),D=i(e),P=i(e),I=i(e),F=a(e,[{buffer:N,type:e.FLOAT,size:3},{buffer:I,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:L,type:e.FLOAT,size:4},{buffer:D,type:e.FLOAT,size:2},{buffer:P,type:e.FLOAT,size:1}]),z=i(e),j=new A(e,h,n,s,l,c,f,d,p,x,m,y,b,_,w,O,k,E,R,N,I,L,D,P,F,z,a(e,[{buffer:z,type:e.FLOAT,size:3}]));return j.update(t),j}},8120:function(e,t,n){"use strict";e.exports=function(e){var t=e.gl,n=r(t,[0,0,0,1,1,0,1,1]),s=i(t,a.boxVert,a.lineFrag);return new o(e,n,s)};var r=n(2762),i=n(9405),a=n(3603);function o(e,t,n){this.plot=e,this.vbo=t,this.shader=n}var s,l,c=o.prototype;c.bind=function(){var e=this.shader;this.vbo.bind(),this.shader.bind(),e.attributes.coord.pointer(),e.uniforms.screenBox=this.plot.screenBox},c.drawBox=(s=[0,0],l=[0,0],function(e,t,n,r,i){var a=this.plot,o=this.shader,c=a.gl;s[0]=e,s[1]=t,l[0]=n,l[1]=r,o.uniforms.lo=s,o.uniforms.hi=l,o.uniforms.color=i,c.drawArrays(c.TRIANGLE_STRIP,0,4)}),c.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},1913:function(e,t,n){"use strict";e.exports=function(e){var t=e.gl,n=r(t),a=i(t,o.gridVert,o.gridFrag),l=i(t,o.tickVert,o.gridFrag);return new s(e,n,a,l)};var r=n(2762),i=n(9405),a=n(2478),o=n(3603);function s(e,t,n,r){this.plot=e,this.vbo=t,this.shader=n,this.tickShader=r,this.ticks=[[],[]]}function l(e,t){return e-t}var c,u,f,d,h,p=s.prototype;p.draw=(c=[0,0],u=[0,0],f=[0,0],function(){for(var e=this.plot,t=this.vbo,n=this.shader,r=this.ticks,i=e.gl,a=e._tickBounds,o=e.dataBox,s=e.viewBox,l=e.gridLineWidth,d=e.gridLineColor,h=e.gridLineEnable,p=e.pixelRatio,m=0;m<2;++m){var g=a[m],v=a[m+2]-g,y=.5*(o[m+2]+o[m]),b=o[m+2]-o[m];u[m]=2*v/b,c[m]=2*(g-y)/b}n.bind(),t.bind(),n.attributes.dataCoord.pointer(),n.uniforms.dataShift=c,n.uniforms.dataScale=u;var x=0;for(m=0;m<2;++m){f[0]=f[1]=0,f[m]=1,n.uniforms.dataAxis=f,n.uniforms.lineWidth=l[m]/(s[m+2]-s[m])*p,n.uniforms.color=d[m];var _=6*r[m].length;h[m]&&_&&i.drawArrays(i.TRIANGLES,x,_),x+=_}}),p.drawTickMarks=function(){var e=[0,0],t=[0,0],n=[1,0],r=[0,1],i=[0,0],o=[0,0];return function(){for(var s=this.plot,c=this.vbo,u=this.tickShader,f=this.ticks,d=s.gl,h=s._tickBounds,p=s.dataBox,m=s.viewBox,g=s.pixelRatio,v=s.screenBox,y=v[2]-v[0],b=v[3]-v[1],x=m[2]-m[0],_=m[3]-m[1],w=0;w<2;++w){var A=h[w],k=h[w+2]-A,E=.5*(p[w+2]+p[w]),T=p[w+2]-p[w];t[w]=2*k/T,e[w]=2*(A-E)/T}t[0]*=x/y,e[0]*=x/y,t[1]*=_/b,e[1]*=_/b,u.bind(),c.bind(),u.attributes.dataCoord.pointer();var M=u.uniforms;M.dataShift=e,M.dataScale=t;var S=s.tickMarkLength,C=s.tickMarkWidth,O=s.tickMarkColor,R=6*f[0].length,N=Math.min(a.ge(f[0],(p[0]-h[0])/(h[2]-h[0]),l),f[0].length),L=Math.min(a.gt(f[0],(p[2]-h[0])/(h[2]-h[0]),l),f[0].length),D=0+6*N,P=6*Math.max(0,L-N),I=Math.min(a.ge(f[1],(p[1]-h[1])/(h[3]-h[1]),l),f[1].length),F=Math.min(a.gt(f[1],(p[3]-h[1])/(h[3]-h[1]),l),f[1].length),z=R+6*I,j=6*Math.max(0,F-I);i[0]=2*(m[0]-S[1])/y-1,i[1]=(m[3]+m[1])/b-1,o[0]=S[1]*g/y,o[1]=C[1]*g/b,j&&(M.color=O[1],M.tickScale=o,M.dataAxis=r,M.screenOffset=i,d.drawArrays(d.TRIANGLES,z,j)),i[0]=(m[2]+m[0])/y-1,i[1]=2*(m[1]-S[0])/b-1,o[0]=C[0]*g/y,o[1]=S[0]*g/b,P&&(M.color=O[0],M.tickScale=o,M.dataAxis=n,M.screenOffset=i,d.drawArrays(d.TRIANGLES,D,P)),i[0]=2*(m[2]+S[3])/y-1,i[1]=(m[3]+m[1])/b-1,o[0]=S[3]*g/y,o[1]=C[3]*g/b,j&&(M.color=O[3],M.tickScale=o,M.dataAxis=r,M.screenOffset=i,d.drawArrays(d.TRIANGLES,z,j)),i[0]=(m[2]+m[0])/y-1,i[1]=2*(m[3]+S[2])/b-1,o[0]=C[2]*g/y,o[1]=S[2]*g/b,P&&(M.color=O[2],M.tickScale=o,M.dataAxis=n,M.screenOffset=i,d.drawArrays(d.TRIANGLES,D,P))}}(),p.update=(d=[1,1,-1,-1,1,-1],h=[1,-1,1,1,-1,-1],function(e){for(var t=e.ticks,n=e.bounds,r=new Float32Array(18*(t[0].length+t[1].length)),i=(this.plot.zeroLineEnable,0),a=[[],[]],o=0;o<2;++o)for(var s=a[o],l=t[o],c=n[o],u=n[o+2],f=0;f<l.length;++f){var p=(l[f].x-c)/(u-c);s.push(p);for(var m=0;m<6;++m)r[i++]=p,r[i++]=d[m],r[i++]=h[m]}this.ticks=a,this.vbo.update(r)}),p.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},4747:function(e,t,n){"use strict";e.exports=function(e){var t=e.gl,n=r(t,[-1,-1,-1,1,1,-1,1,1]),s=i(t,a.lineVert,a.lineFrag);return new o(e,n,s)};var r=n(2762),i=n(9405),a=n(3603);function o(e,t,n){this.plot=e,this.vbo=t,this.shader=n}var s,l,c=o.prototype;c.bind=function(){var e=this.shader;this.vbo.bind(),this.shader.bind(),e.attributes.coord.pointer(),e.uniforms.screenBox=this.plot.screenBox},c.drawLine=(s=[0,0],l=[0,0],function(e,t,n,r,i,a){var o=this.plot,c=this.shader,u=o.gl;s[0]=e,s[1]=t,l[0]=n,l[1]=r,c.uniforms.start=s,c.uniforms.end=l,c.uniforms.width=i*o.pixelRatio,c.uniforms.color=a,u.drawArrays(u.TRIANGLE_STRIP,0,4)}),c.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3603:function(e,t,n){"use strict";var r=n(3236),i=r(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);e.exports={lineVert:r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:i,textVert:r(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:i,gridVert:r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:i,boxVert:r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},2142:function(e,t,n){"use strict";e.exports=function(e){var t=e.gl,n=r(t),a=i(t,s.textVert,s.textFrag);return new l(e,n,a)};var r=n(2762),i=n(9405),a=n(529),o=n(2478),s=n(3603);function l(e,t,n){this.plot=e,this.vbo=t,this.shader=n,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var c,u,f,d,h,p,m=l.prototype;m.drawTicks=(c=[0,0],u=[0,0],f=[0,0],function(e){var t=this.plot,n=this.shader,r=this.tickX[e],i=this.tickOffset[e],a=t.gl,s=t.viewBox,l=t.dataBox,d=t.screenBox,h=t.pixelRatio,p=t.tickEnable,m=t.tickPad,g=t.tickColor,v=t.tickAngle,y=t.labelEnable,b=t.labelPad,x=t.labelColor,_=t.labelAngle,w=this.labelOffset[e],A=this.labelCount[e],k=o.lt(r,l[e]),E=o.le(r,l[e+2]);c[0]=c[1]=0,c[e]=1,u[e]=(s[2+e]+s[e])/(d[2+e]-d[e])-1;var T=2/d[2+(1^e)]-d[1^e];u[1^e]=T*s[1^e]-1,p[e]&&(u[1^e]-=T*h*m[e],k<E&&i[E]>i[k]&&(n.uniforms.dataAxis=c,n.uniforms.screenOffset=u,n.uniforms.color=g[e],n.uniforms.angle=v[e],a.drawArrays(a.TRIANGLES,i[k],i[E]-i[k]))),y[e]&&A&&(u[1^e]-=T*h*b[e],n.uniforms.dataAxis=f,n.uniforms.screenOffset=u,n.uniforms.color=x[e],n.uniforms.angle=_[e],a.drawArrays(a.TRIANGLES,w,A)),u[1^e]=T*s[2+(1^e)]-1,p[e+2]&&(u[1^e]+=T*h*m[e+2],k<E&&i[E]>i[k]&&(n.uniforms.dataAxis=c,n.uniforms.screenOffset=u,n.uniforms.color=g[e+2],n.uniforms.angle=v[e+2],a.drawArrays(a.TRIANGLES,i[k],i[E]-i[k]))),y[e+2]&&A&&(u[1^e]+=T*h*b[e+2],n.uniforms.dataAxis=f,n.uniforms.screenOffset=u,n.uniforms.color=x[e+2],n.uniforms.angle=_[e+2],a.drawArrays(a.TRIANGLES,w,A))}),m.drawTitle=function(){var e=[0,0],t=[0,0];return function(){var n=this.plot,r=this.shader,i=n.gl,a=n.screenBox,o=n.titleCenter,s=n.titleAngle,l=n.titleColor,c=n.pixelRatio;if(this.titleCount){for(var u=0;u<2;++u)t[u]=2*(o[u]*c-a[u])/(a[2+u]-a[u])-1;r.bind(),r.uniforms.dataAxis=e,r.uniforms.screenOffset=t,r.uniforms.angle=s,r.uniforms.color=l,i.drawArrays(i.TRIANGLES,this.titleOffset,this.titleCount)}}}(),m.bind=(d=[0,0],h=[0,0],p=[0,0],function(){var e=this.plot,t=this.shader,n=e._tickBounds,r=e.dataBox,i=e.screenBox,a=e.viewBox;t.bind();for(var o=0;o<2;++o){var s=n[o],l=n[o+2]-s,c=.5*(r[o+2]+r[o]),u=r[o+2]-r[o],f=a[o],m=a[o+2]-f,g=i[o],v=i[o+2]-g;h[o]=2*l/u*m/v,d[o]=2*(s-c)/u*m/v}p[1]=2*e.pixelRatio/(i[3]-i[1]),p[0]=p[1]*(i[3]-i[1])/(i[2]-i[0]),t.uniforms.dataScale=h,t.uniforms.dataShift=d,t.uniforms.textScale=p,this.vbo.bind(),t.attributes.textCoordinate.pointer()}),m.update=function(e){var t,n,r,i,o,s=[],l=e.ticks,c=e.bounds;for(o=0;o<2;++o){var u=[Math.floor(s.length/3)],f=[-1/0],d=l[o];for(t=0;t<d.length;++t){var h=d[t],p=h.x,m=h.text,g=h.font||"sans-serif",v=h.fontStyle||"normal",y=h.fontWeight||"normal",b=h.fontVariant||"normal";i=h.fontSize||12;for(var x=1/(c[o+2]-c[o]),_=c[o],w=m.split("\n"),A=0;A<w.length;A++)for(r=a(g,w[A],{fontStyle:v,fontWeight:y,fontVariant:b}).data,n=0;n<r.length;n+=2)s.push(r[n]*i,-r[n+1]*i-A*i*1.2,(p-_)*x);u.push(Math.floor(s.length/3)),f.push(p)}this.tickOffset[o]=u,this.tickX[o]=f}for(o=0;o<2;++o){for(this.labelOffset[o]=Math.floor(s.length/3),r=a(e.labelFont[o],e.labels[o],{fontStyle:e.labelFontStyle[o],fontWeight:e.labelFontWeight[o],fontVariant:e.labelFontVariant[o],textAlign:"center"}).data,i=e.labelSize[o],t=0;t<r.length;t+=2)s.push(r[t]*i,-r[t+1]*i,0);this.labelCount[o]=Math.floor(s.length/3)-this.labelOffset[o]}for(this.titleOffset=Math.floor(s.length/3),r=a(e.titleFont,e.title,{fontStyle:e.titleFontStyle,fontWeight:e.titleFontWeight,fontVariant:e.titleFontVariant}).data,i=e.titleSize,t=0;t<r.length;t+=2)s.push(r[t]*i,-r[t+1]*i,0);this.titleCount=Math.floor(s.length/3)-this.titleOffset,this.vbo.update(s)},m.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},1850:function(e,t,n){"use strict";e.exports=function(e){var t=e.gl,n=r(t,[t.drawingBufferWidth,t.drawingBufferHeight]),c=new l(t,n);return c.grid=i(c),c.text=a(c),c.line=o(c),c.box=s(c),c.update(e),c};var r=n(3589),i=n(1913),a=n(2142),o=n(4747),s=n(8120);function l(e,t){this.gl=e,this.pickBuffer=t,this.screenBox=[0,0,e.drawingBufferWidth,e.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var c=l.prototype;function u(e){for(var t=e.slice(),n=0;n<t.length;++n)t[n]=t[n].slice();return t}function f(e,t){return e.x-t.x}c.setDirty=function(){this.dirty=this.pickDirty=!0},c.setOverlayDirty=function(){this.dirty=!0},c.nextDepthValue=function(){return this._depthCounter++/65536},c.draw=function(){var e=this.gl,t=this.screenBox,n=this.viewBox,r=this.dataBox,i=this.pixelRatio,a=this.grid,o=this.line,s=this.text,l=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,e.bindFramebuffer(e.FRAMEBUFFER,null),e.enable(e.SCISSOR_TEST),e.disable(e.DEPTH_TEST),e.depthFunc(e.LESS),e.depthMask(!1),e.enable(e.BLEND),e.blendEquation(e.FUNC_ADD,e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),this.borderColor){e.scissor(t[0],t[1],t[2]-t[0],t[3]-t[1]);var c=this.borderColor;e.clearColor(c[0]*c[3],c[1]*c[3],c[2]*c[3],c[3]),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}e.scissor(n[0],n[1],n[2]-n[0],n[3]-n[1]),e.viewport(n[0],n[1],n[2]-n[0],n[3]-n[1]);var u=this.backgroundColor;e.clearColor(u[0]*u[3],u[1]*u[3],u[2]*u[3],u[3]),e.clear(e.COLOR_BUFFER_BIT),a.draw();var f=this.zeroLineEnable,d=this.zeroLineColor,h=this.zeroLineWidth;if(f[0]||f[1]){o.bind();for(var p=0;p<2;++p)if(f[p]&&r[p]<=0&&r[p+2]>=0){var m=t[p]-r[p]*(t[p+2]-t[p])/(r[p+2]-r[p]);0===p?o.drawLine(m,t[1],m,t[3],h[p],d[p]):o.drawLine(t[0],m,t[2],m,h[p],d[p])}}for(p=0;p<l.length;++p)l[p].draw();e.viewport(t[0],t[1],t[2]-t[0],t[3]-t[1]),e.scissor(t[0],t[1],t[2]-t[0],t[3]-t[1]),this.grid.drawTickMarks(),o.bind();var g=this.borderLineEnable,v=this.borderLineWidth,y=this.borderLineColor;for(g[1]&&o.drawLine(n[0],n[1]-.5*v[1]*i,n[0],n[3]+.5*v[3]*i,v[1],y[1]),g[0]&&o.drawLine(n[0]-.5*v[0]*i,n[1],n[2]+.5*v[2]*i,n[1],v[0],y[0]),g[3]&&o.drawLine(n[2],n[1]-.5*v[1]*i,n[2],n[3]+.5*v[3]*i,v[3],y[3]),g[2]&&o.drawLine(n[0]-.5*v[0]*i,n[3],n[2]+.5*v[2]*i,n[3],v[2],y[2]),s.bind(),p=0;p<2;++p)s.drawTicks(p);this.titleEnable&&s.drawTitle();var b=this.overlays;for(p=0;p<b.length;++p)b[p].draw();e.disable(e.SCISSOR_TEST),e.disable(e.BLEND),e.depthMask(!0)}},c.drawPick=function(){if(!this.static){var e=this.pickBuffer;this.gl,this._pickTimeout=null,e.begin();for(var t=1,n=this.objects,r=0;r<n.length;++r)t=n[r].drawPick(t);e.end()}},c.pick=function(e,t){if(!this.static){var n=this.pixelRatio,r=this.pickPixelRatio,i=this.viewBox,a=0|Math.round((e-i[0]/n)*r),o=0|Math.round((t-i[1]/n)*r),s=this.pickBuffer.query(a,o,this.pickRadius);if(!s)return null;for(var l=s.id+(s.value[0]<<8)+(s.value[1]<<16)+(s.value[2]<<24),c=this.objects,u=0;u<c.length;++u){var f=c[u].pick(a,o,l);if(f)return f}return null}},c.setScreenBox=function(e){var t=this.screenBox,n=this.pixelRatio;t[0]=0|Math.round(e[0]*n),t[1]=0|Math.round(e[1]*n),t[2]=0|Math.round(e[2]*n),t[3]=0|Math.round(e[3]*n),this.setDirty()},c.setDataBox=function(e){var t=this.dataBox;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3])&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],this.setDirty())},c.setViewBox=function(e){var t=this.pixelRatio,n=this.viewBox;n[0]=0|Math.round(e[0]*t),n[1]=0|Math.round(e[1]*t),n[2]=0|Math.round(e[2]*t),n[3]=0|Math.round(e[3]*t);var r=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((e[2]-e[0])*r),0|Math.round((e[3]-e[1])*r)],this.setDirty()},c.update=function(e){e=e||{};var t=this.gl;this.pixelRatio=e.pixelRatio||1;var n=this.pixelRatio;this.pickPixelRatio=Math.max(n,1),this.setScreenBox(e.screenBox||[0,0,t.drawingBufferWidth/n,t.drawingBufferHeight/n]);this.screenBox;this.setViewBox(e.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/n,.125*(this.screenBox[3]-this.screenBox[1])/n,.875*(this.screenBox[2]-this.screenBox[0])/n,.875*(this.screenBox[3]-this.screenBox[1])/n]);var r=this.viewBox,i=(r[2]-r[0])/(r[3]-r[1]);this.setDataBox(e.dataBox||[-10,-10/i,10,10/i]),this.borderColor=!1!==e.borderColor&&(e.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(e.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(e.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(e.gridLineWidth||[1,1]).slice(),this.gridLineColor=u(e.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(e.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(e.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=u(e.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(e.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(e.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=u(e.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(e.titleCenter||[.5*(r[0]+r[2])/n,(r[3]+120)/n]).slice(),this.titleEnable=!("titleEnable"in e)||!!e.titleEnable,this.titleAngle=e.titleAngle||0,this.titleColor=(e.titleColor||[0,0,0,1]).slice(),this.labelPad=(e.labelPad||[15,15,15,15]).slice(),this.labelAngle=(e.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(e.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=u(e.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(e.tickPad||[15,15,15,15]).slice(),this.tickAngle=(e.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(e.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=u(e.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(e.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(e.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=u(e.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var a=e.ticks||[[],[]],o=this._tickBounds;o[0]=o[1]=1/0,o[2]=o[3]=-1/0;for(var s=0;s<2;++s){var l=a[s].slice(0);0!==l.length&&(l.sort(f),o[s]=Math.min(o[s],l[0].x),o[s+2]=Math.max(o[s+2],l[l.length-1].x))}this.grid.update({bounds:o,ticks:a}),this.text.update({bounds:o,ticks:a,labels:e.labels||["x","y"],labelSize:e.labelSize||[12,12],labelFont:e.labelFont||["sans-serif","sans-serif"],labelFontStyle:e.labelFontStyle||["normal","normal"],labelFontWeight:e.labelFontWeight||["normal","normal"],labelFontVariant:e.labelFontVariant||["normal","normal"],title:e.title||"",titleSize:e.titleSize||18,titleFont:e.titleFont||"sans-serif",titleFontStyle:e.titleFontStyle||"normal",titleFontWeight:e.titleFontWeight||"normal",titleFontVariant:e.titleFontVariant||"normal"}),this.static=!!e.static,this.setDirty()},c.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var e=this.objects.length-1;e>=0;--e)this.objects[e].dispose();this.objects.length=0;for(e=this.overlays.length-1;e>=0;--e)this.overlays[e].dispose();this.overlays.length=0,this.gl=null},c.addObject=function(e){this.objects.indexOf(e)<0&&(this.objects.push(e),this.setDirty())},c.removeObject=function(e){for(var t=this.objects,n=0;n<t.length;++n)if(t[n]===e){t.splice(n,1),this.setDirty();break}},c.addOverlay=function(e){this.overlays.indexOf(e)<0&&(this.overlays.push(e),this.setOverlayDirty())},c.removeOverlay=function(e){for(var t=this.overlays,n=0;n<t.length;++n)if(t[n]===e){t.splice(n,1),this.setOverlayDirty();break}}},4437:function(e,t,n){"use strict";e.exports=function(e,t){e=e||document.body,t=t||{};var n=[.01,1/0];"distanceLimits"in t&&(n[0]=t.distanceLimits[0],n[1]=t.distanceLimits[1]);"zoomMin"in t&&(n[0]=t.zoomMin);"zoomMax"in t&&(n[1]=t.zoomMax);var c=i({center:t.center||[0,0,0],up:t.up||[0,1,0],eye:t.eye||[0,0,10],mode:t.mode||"orbit",distanceLimits:n}),u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],f=0,d=e.clientWidth,h=e.clientHeight,p={keyBindingMode:"rotate",enableWheel:!0,view:c,element:e,delay:t.delay||16,rotateSpeed:t.rotateSpeed||1,zoomSpeed:t.zoomSpeed||1,translateSpeed:t.translateSpeed||1,flipX:!!t.flipX,flipY:!!t.flipY,modes:c.modes,_ortho:t._ortho||t.projection&&"orthographic"===t.projection.type||!1,tick:function(){var t=r(),n=this.delay,i=t-2*n;c.idle(t-n),c.recalcMatrix(i),c.flush(t-(100+2*n));for(var a=!0,o=c.computedMatrix,s=0;s<16;++s)a=a&&u[s]===o[s],u[s]=o[s];var l=e.clientWidth===d&&e.clientHeight===h;return d=e.clientWidth,h=e.clientHeight,a?!l:(f=Math.exp(c.computedRadius[0]),!0)},lookAt:function(e,t,n){c.lookAt(c.lastT(),e,t,n)},rotate:function(e,t,n){c.rotate(c.lastT(),e,t,n)},pan:function(e,t,n){c.pan(c.lastT(),e,t,n)},translate:function(e,t,n){c.translate(c.lastT(),e,t,n)}};return Object.defineProperties(p,{matrix:{get:function(){return c.computedMatrix},set:function(e){return c.setMatrix(c.lastT(),e),c.computedMatrix},enumerable:!0},mode:{get:function(){return c.getMode()},set:function(e){var t=c.computedUp.slice(),n=c.computedEye.slice(),i=c.computedCenter.slice();if(c.setMode(e),"turntable"===e){var a=r();c._active.lookAt(a,n,i,t),c._active.lookAt(a+500,n,i,[0,0,1]),c._active.flush(a)}return c.getMode()},enumerable:!0},center:{get:function(){return c.computedCenter},set:function(e){return c.lookAt(c.lastT(),null,e),c.computedCenter},enumerable:!0},eye:{get:function(){return c.computedEye},set:function(e){return c.lookAt(c.lastT(),e),c.computedEye},enumerable:!0},up:{get:function(){return c.computedUp},set:function(e){return c.lookAt(c.lastT(),null,null,e),c.computedUp},enumerable:!0},distance:{get:function(){return f},set:function(e){return c.setDistance(c.lastT(),e),e},enumerable:!0},distanceLimits:{get:function(){return c.getDistanceLimits(n)},set:function(e){return c.setDistanceLimits(e),e},enumerable:!0}}),e.addEventListener("contextmenu",(function(e){return e.preventDefault(),!1})),p._lastX=-1,p._lastY=-1,p._lastMods={shift:!1,control:!1,alt:!1,meta:!1},p.enableMouseListeners=function(){function t(t,n,i,a){var o=p.keyBindingMode;if(!1!==o){var s="rotate"===o,l="pan"===o,u="zoom"===o,d=!!a.control,h=!!a.alt,m=!!a.shift,g=!!(1&t),v=!!(2&t),y=!!(4&t),b=1/e.clientHeight,x=b*(n-p._lastX),_=b*(i-p._lastY),w=p.flipX?1:-1,A=p.flipY?1:-1,k=Math.PI*p.rotateSpeed,E=r();if(-1!==p._lastX&&-1!==p._lastY&&((s&&g&&!d&&!h&&!m||g&&!d&&!h&&m)&&c.rotate(E,w*k*x,-A*k*_,0),(l&&g&&!d&&!h&&!m||v||g&&d&&!h&&!m)&&c.pan(E,-p.translateSpeed*x*f,p.translateSpeed*_*f,0),u&&g&&!d&&!h&&!m||y||g&&!d&&h&&!m)){var T=-p.zoomSpeed*_/window.innerHeight*(E-c.lastT())*100;c.pan(E,0,0,f*(Math.exp(T)-1))}return p._lastX=n,p._lastY=i,p._lastMods=a,!0}}p.mouseListener=a(e,t),e.addEventListener("touchstart",(function(n){var r=s(n.changedTouches[0],e);t(0,r[0],r[1],p._lastMods),t(1,r[0],r[1],p._lastMods)}),!!l&&{passive:!0}),e.addEventListener("touchmove",(function(n){var r=s(n.changedTouches[0],e);t(1,r[0],r[1],p._lastMods),n.preventDefault()}),!!l&&{passive:!1}),e.addEventListener("touchend",(function(e){t(0,p._lastX,p._lastY,p._lastMods)}),!!l&&{passive:!0}),p.wheelListener=o(e,(function(e,t){if(!1!==p.keyBindingMode&&p.enableWheel){var n=p.flipX?1:-1,i=p.flipY?1:-1,a=r();if(Math.abs(e)>Math.abs(t))c.rotate(a,0,0,-e*n*Math.PI*p.rotateSpeed/window.innerWidth);else if(!p._ortho){var o=-p.zoomSpeed*i*t/window.innerHeight*(a-c.lastT())/20;c.pan(a,0,0,f*(Math.exp(o)-1))}}}),!0)},p.enableMouseListeners(),p};var r=n(3025),i=n(6296),a=n(351),o=n(8512),s=n(24),l=n(7520)},799:function(e,t,n){var r=n(3236),i=n(9405),a=r(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),o=r(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);e.exports=function(e){return i(e,a,o,null,[{name:"position",type:"vec2"}])}},4100:function(e,t,n){"use strict";var r=n(4437),i=n(3837),a=n(5445),o=n(4449),s=n(3589),l=n(2260),c=n(7169),u=n(351),f=n(4772),d=n(4040),h=n(799),p=n(9216)({tablet:!0,featureDetect:!0});function m(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function g(e){var t=Math.round(Math.log(Math.abs(e))/Math.log(10));if(t<0){var n=Math.round(Math.pow(10,-t));return Math.ceil(e*n)/n}if(t>0){n=Math.round(Math.pow(10,t));return Math.ceil(e/n)*n}return Math.ceil(e)}function v(e){return"boolean"!=typeof e||e}e.exports={createScene:function(e){(e=e||{}).camera=e.camera||{};var t=e.canvas;if(!t){if(t=document.createElement("canvas"),e.container)e.container.appendChild(t);else document.body.appendChild(t)}var n=e.gl;n||(e.glOptions&&(p=!!e.glOptions.preserveDrawingBuffer),n=function(e,t){var n=null;try{(n=e.getContext("webgl",t))||(n=e.getContext("experimental-webgl",t))}catch(e){return null}return n}(t,e.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:p}));if(!n)throw new Error("webgl not supported");var y=e.bounds||[[-10,-10,-10],[10,10,10]],b=new m,x=l(n,n.drawingBufferWidth,n.drawingBufferHeight,{preferFloat:!p}),_=h(n),w=e.cameraObject&&!0===e.cameraObject._ortho||e.camera.projection&&"orthographic"===e.camera.projection.type||!1,A={eye:e.camera.eye||[2,0,0],center:e.camera.center||[0,0,0],up:e.camera.up||[0,1,0],zoomMin:e.camera.zoomMax||.1,zoomMax:e.camera.zoomMin||100,mode:e.camera.mode||"turntable",_ortho:w},k=e.axes||{},E=i(n,k);E.enable=!k.disable;var T=e.spikes||{},M=o(n,T),S=[],C=[],O=[],R=[],N=!0,L=!0,D=new Array(16),P=new Array(16),I={view:null,projection:D,model:P,_ortho:!1},F=(L=!0,[n.drawingBufferWidth,n.drawingBufferHeight]),z=e.cameraObject||r(t,A),j={gl:n,contextLost:!1,pixelRatio:e.pixelRatio||1,canvas:t,selection:b,camera:z,axes:E,axesPixels:null,spikes:M,bounds:y,objects:S,shape:F,aspect:e.aspectRatio||[1,1,1],pickRadius:e.pickRadius||10,zNear:e.zNear||.01,zFar:e.zFar||1e3,fovy:e.fovy||Math.PI/4,clearColor:e.clearColor||[0,0,0,0],autoResize:v(e.autoResize),autoBounds:v(e.autoBounds),autoScale:!!e.autoScale,autoCenter:v(e.autoCenter),clipToBounds:v(e.clipToBounds),snapToData:!!e.snapToData,onselect:e.onselect||null,onrender:e.onrender||null,onclick:e.onclick||null,cameraParams:I,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(e){this.aspect[0]=e.x,this.aspect[1]=e.y,this.aspect[2]=e.z,L=!0},setBounds:function(e,t){this.bounds[0][e]=t.min,this.bounds[1][e]=t.max},setClearColor:function(e){this.clearColor=e},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},B=[n.drawingBufferWidth/j.pixelRatio|0,n.drawingBufferHeight/j.pixelRatio|0];function U(){if(!j._stopped&&j.autoResize){var e=t.parentNode,n=1,r=1;e&&e!==document.body?(n=e.clientWidth,r=e.clientHeight):(n=window.innerWidth,r=window.innerHeight);var i=0|Math.ceil(n*j.pixelRatio),a=0|Math.ceil(r*j.pixelRatio);if(i!==t.width||a!==t.height){t.width=i,t.height=a;var o=t.style;o.position=o.position||"absolute",o.left="0px",o.top="0px",o.width=n+"px",o.height=r+"px",N=!0}}}j.autoResize&&U();function $(){for(var e=S.length,t=R.length,r=0;r<t;++r)O[r]=0;e:for(r=0;r<e;++r){var i=S[r],a=i.pickSlots;if(a){for(var o=0;o<t;++o)if(O[o]+a<255){C[r]=o,i.setPickBase(O[o]+1),O[o]+=a;continue e}var l=s(n,F);C[r]=t,R.push(l),O.push(a),i.setPickBase(1),t+=1}else C[r]=-1}for(;t>0&&0===O[t-1];)O.pop(),R.pop().dispose()}function q(){if(j.contextLost)return!0;n.isContextLost()&&(j.contextLost=!0,j.mouseListener.enabled=!1,j.selection.object=null,j.oncontextloss&&j.oncontextloss())}window.addEventListener("resize",U),j.update=function(e){j._stopped||(e=e||{},N=!0,L=!0)},j.add=function(e){j._stopped||(e.axes=E,S.push(e),C.push(-1),N=!0,L=!0,$())},j.remove=function(e){if(!j._stopped){var t=S.indexOf(e);t<0||(S.splice(t,1),C.pop(),N=!0,L=!0,$())}},j.dispose=function(){if(!j._stopped&&(j._stopped=!0,window.removeEventListener("resize",U),t.removeEventListener("webglcontextlost",q),j.mouseListener.enabled=!1,!j.contextLost)){E.dispose(),M.dispose();for(var e=0;e<S.length;++e)S[e].dispose();x.dispose();for(e=0;e<R.length;++e)R[e].dispose();_.dispose(),n=null,E=null,M=null,S=[]}},j._mouseRotating=!1,j._prevButtons=0,j.enableMouseListeners=function(){j.mouseListener=u(t,(function(e,t,n){if(!j._stopped){var r=R.length,i=S.length,a=b.object;b.distance=1/0,b.mouse[0]=t,b.mouse[1]=n,b.object=null,b.screen=null,b.dataCoordinate=b.dataPosition=null;var o=!1;if(e&&j._prevButtons)j._mouseRotating=!0;else{j._mouseRotating&&(L=!0),j._mouseRotating=!1;for(var s=0;s<r;++s){var l=R[s].query(t,B[1]-n-1,j.pickRadius);if(l){if(l.distance>b.distance)continue;for(var c=0;c<i;++c){var u=S[c];if(C[c]===s){var f=u.pick(l);f&&(b.buttons=e,b.screen=l.coord,b.distance=l.distance,b.object=u,b.index=f.distance,b.dataPosition=f.position,b.dataCoordinate=f.dataCoordinate,b.data=f,o=!0)}}}}}a&&a!==b.object&&(a.highlight&&a.highlight(null),N=!0),b.object&&(b.object.highlight&&b.object.highlight(b.data),N=!0),(o=o||b.object!==a)&&j.onselect&&j.onselect(b),1&e&&!(1&j._prevButtons)&&j.onclick&&j.onclick(b),j._prevButtons=e}}))},t.addEventListener("webglcontextlost",q);var H=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],V=[H[0].slice(),H[1].slice()];function W(){if(!q()){U();var e=j.camera.tick();I.view=j.camera.matrix,N=N||e,L=L||e,E.pixelRatio=j.pixelRatio,M.pixelRatio=j.pixelRatio;var t=S.length,r=H[0],i=H[1];r[0]=r[1]=r[2]=1/0,i[0]=i[1]=i[2]=-1/0;for(var o=0;o<t;++o){(O=S[o]).pixelRatio=j.pixelRatio,O.axes=j.axes,N=N||!!O.dirty,L=L||!!O.dirty;var s=O.bounds;if(s)for(var l=s[0],u=s[1],h=0;h<3;++h)r[h]=Math.min(r[h],l[h]),i[h]=Math.max(i[h],u[h])}var p=j.bounds;if(j.autoBounds)for(h=0;h<3;++h){if(i[h]<r[h])r[h]=-1,i[h]=1;else{r[h]===i[h]&&(r[h]-=1,i[h]+=1);var m=.05*(i[h]-r[h]);r[h]=r[h]-m,i[h]=i[h]+m}p[0][h]=r[h],p[1][h]=i[h]}var v=!1;for(h=0;h<3;++h)v=v||V[0][h]!==p[0][h]||V[1][h]!==p[1][h],V[0][h]=p[0][h],V[1][h]=p[1][h];if(L=L||v,N=N||v){if(v){var y=[0,0,0];for(o=0;o<3;++o)y[o]=g((p[1][o]-p[0][o])/10);E.autoTicks?E.update({bounds:p,tickSpacing:y}):E.update({bounds:p})}var A=n.drawingBufferWidth,k=n.drawingBufferHeight;F[0]=A,F[1]=k,B[0]=0|Math.max(A/j.pixelRatio,1),B[1]=0|Math.max(k/j.pixelRatio,1),function(e,t){var n=e.bounds,r=e.cameraParams,i=r.projection,a=r.model,o=e.gl.drawingBufferWidth,s=e.gl.drawingBufferHeight,l=e.zNear,c=e.zFar,u=e.fovy,h=o/s;t?(d(i,-h,h,-1,1,l,c),r._ortho=!0):(f(i,u,h,l,c),r._ortho=!1);for(var p=0;p<16;++p)a[p]=0;a[15]=1;var m=0;for(p=0;p<3;++p)m=Math.max(m,n[1][p]-n[0][p]);for(p=0;p<3;++p)e.autoScale?a[5*p]=e.aspect[p]/(n[1][p]-n[0][p]):a[5*p]=1/m,e.autoCenter&&(a[12+p]=.5*-a[5*p]*(n[0][p]+n[1][p]))}(j,w);for(o=0;o<t;++o){(O=S[o]).axesBounds=p,j.clipToBounds&&(O.clipBounds=p)}b.object&&(j.snapToData?M.position=b.dataCoordinate:M.position=b.dataPosition,M.bounds=p),L&&(L=!1,function(){if(!q()){n.colorMask(!0,!0,!0,!0),n.depthMask(!0),n.disable(n.BLEND),n.enable(n.DEPTH_TEST),n.depthFunc(n.LEQUAL);for(var e=S.length,t=R.length,r=0;r<t;++r){var i=R[r];i.shape=B,i.begin();for(var a=0;a<e;++a)if(C[a]===r){var o=S[a];o.drawPick&&(o.pixelRatio=1,o.drawPick(I))}i.end()}}}()),j.axesPixels=a(j.axes,I,A,k),j.onrender&&j.onrender(),n.bindFramebuffer(n.FRAMEBUFFER,null),n.viewport(0,0,A,k),j.clearRGBA(),n.depthMask(!0),n.colorMask(!0,!0,!0,!0),n.enable(n.DEPTH_TEST),n.depthFunc(n.LEQUAL),n.disable(n.BLEND),n.disable(n.CULL_FACE);var T=!1;E.enable&&(T=T||E.isTransparent(),E.draw(I)),M.axes=E,b.object&&M.draw(I),n.disable(n.CULL_FACE);for(o=0;o<t;++o){(O=S[o]).axes=E,O.pixelRatio=j.pixelRatio,O.isOpaque&&O.isOpaque()&&O.draw(I),O.isTransparent&&O.isTransparent()&&(T=!0)}if(T){x.shape=F,x.bind(),n.clear(n.DEPTH_BUFFER_BIT),n.colorMask(!1,!1,!1,!1),n.depthMask(!0),n.depthFunc(n.LESS),E.enable&&E.isTransparent()&&E.drawTransparent(I);for(o=0;o<t;++o){(O=S[o]).isOpaque&&O.isOpaque()&&O.draw(I)}n.enable(n.BLEND),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),n.colorMask(!0,!0,!0,!0),n.depthMask(!1),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),E.isTransparent()&&E.drawTransparent(I);for(o=0;o<t;++o){var O;(O=S[o]).isTransparent&&O.isTransparent()&&O.drawTransparent(I)}n.bindFramebuffer(n.FRAMEBUFFER,null),n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),n.disable(n.DEPTH_TEST),_.bind(),x.color[0].bind(0),_.uniforms.accumBuffer=0,c(n),n.disable(n.BLEND)}N=!1;for(o=0;o<t;++o)S[o].dirty=!1}}}return j.enableMouseListeners(),function e(){if(j._stopped||j.contextLost)return;W(),requestAnimationFrame(e)}(),j.redraw=function(){j._stopped||(N=!0,W())},j},createCamera:r}},6640:function(e,t,n){var r=n(3236);t.pointVertex=r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),t.pointFragment=r(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),t.pickVertex=r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),t.pickFragment=r(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},4696:function(e,t,n){"use strict";var r=n(9405),i=n(2762),a=n(1888),o=n(6640);function s(e,t,n,r,i){this.plot=e,this.offsetBuffer=t,this.pickBuffer=n,this.shader=r,this.pickShader=i,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}e.exports=function(e,t){var n=e.gl,a=i(n),l=i(n),c=r(n,o.pointVertex,o.pointFragment),u=r(n,o.pickVertex,o.pickFragment),f=new s(e,a,l,c,u);return f.update(t),e.addObject(f),f};var l,c,u=s.prototype;u.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},u.update=function(e){var t;function n(t,n){return t in e?e[t]:n}e=e||{},this.sizeMin=n("sizeMin",.5),this.sizeMax=n("sizeMax",20),this.color=n("color",[1,0,0,1]).slice(),this.areaRatio=n("areaRatio",1),this.borderColor=n("borderColor",[0,0,0,1]).slice(),this.blend=n("blend",!1);var r=e.positions.length>>>1,i=e.positions instanceof Float32Array,o=e.idToIndex instanceof Int32Array&&e.idToIndex.length>=r,s=e.positions,l=i?s:a.mallocFloat32(s.length),c=o?e.idToIndex:a.mallocInt32(r);if(i||l.set(s),!o)for(l.set(s),t=0;t<r;t++)c[t]=t;this.points=s,this.offsetBuffer.update(l),this.pickBuffer.update(c),i||a.free(l),o||a.free(c),this.pointCount=r,this.pickOffset=0},u.unifiedDraw=(l=[1,0,0,0,1,0,0,0,1],c=[0,0,0,0],function(e){var t=void 0!==e,n=t?this.pickShader:this.shader,r=this.plot.gl,i=this.plot.dataBox;if(0===this.pointCount)return e;var a=i[2]-i[0],o=i[3]-i[1],s=function(e,t){var n,r=0,i=e.length>>>1;for(n=0;n<i;n++){var a=e[2*n],o=e[2*n+1];a>=t[0]&&a<=t[2]&&o>=t[1]&&o<=t[3]&&r++}return r}(this.points,i),u=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(s,.33333)));l[0]=2/a,l[4]=2/o,l[6]=-2*i[0]/a-1,l[7]=-2*i[1]/o-1,this.offsetBuffer.bind(),n.bind(),n.attributes.position.pointer(),n.uniforms.matrix=l,n.uniforms.color=this.color,n.uniforms.borderColor=this.borderColor,n.uniforms.pointCloud=u<5,n.uniforms.pointSize=u,n.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),t&&(c[0]=255&e,c[1]=e>>8&255,c[2]=e>>16&255,c[3]=e>>24&255,this.pickBuffer.bind(),n.attributes.pickId.pointer(r.UNSIGNED_BYTE),n.uniforms.pickOffset=c,this.pickOffset=e);var f=r.getParameter(r.BLEND),d=r.getParameter(r.DITHER);return f&&!this.blend&&r.disable(r.BLEND),d&&r.disable(r.DITHER),r.drawArrays(r.POINTS,0,this.pointCount),f&&!this.blend&&r.enable(r.BLEND),d&&r.enable(r.DITHER),e+this.pointCount}),u.draw=u.unifiedDraw,u.drawPick=u.unifiedDraw,u.pick=function(e,t,n){var r=this.pickOffset,i=this.pointCount;if(n<r||n>=r+i)return null;var a=n-r,o=this.points;return{object:this,pointId:a,dataCoord:[o[2*a],o[2*a+1]]}}},783:function(e){e.exports=function(e,t,n,r){var i,a,o,s,l,c=t[0],u=t[1],f=t[2],d=t[3],h=n[0],p=n[1],m=n[2],g=n[3];(a=c*h+u*p+f*m+d*g)<0&&(a=-a,h=-h,p=-p,m=-m,g=-g);1-a>1e-6?(i=Math.acos(a),o=Math.sin(i),s=Math.sin((1-r)*i)/o,l=Math.sin(r*i)/o):(s=1-r,l=r);return e[0]=s*c+l*h,e[1]=s*u+l*p,e[2]=s*f+l*m,e[3]=s*d+l*g,e}},5964:function(e){"use strict";e.exports=function(e){return e||0===e?e.toString():""}},9366:function(e,t,n){"use strict";var r=n(4359);e.exports=function(e,t,n){var a=[t.style,t.weight,t.variant,t.family].join("_"),o=i[a];o||(o=i[a]={});if(e in o)return o[e];var s={textAlign:"center",textBaseline:"middle",lineHeight:1,font:t.family,fontStyle:t.style,fontWeight:t.weight,fontVariant:t.variant,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},l=r(e,s);s.triangles=!1;var c,u,f=r(e,s);if(n&&1!==n){for(c=0;c<l.positions.length;++c)for(u=0;u<l.positions[c].length;++u)l.positions[c][u]/=n;for(c=0;c<f.positions.length;++c)for(u=0;u<f.positions[c].length;++u)f.positions[c][u]/=n}var d=[[1/0,1/0],[-1/0,-1/0]],h=f.positions.length;for(c=0;c<h;++c){var p=f.positions[c];for(u=0;u<2;++u)d[0][u]=Math.min(d[0][u],p[u]),d[1][u]=Math.max(d[1][u],p[u])}return o[e]=[l,f,d]};var i={}},1283:function(e,t,n){var r=n(9405),i=n(3236),a=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),o=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),s=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * (view * (model * vec4(position, 1)));\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * (view * (model * vec4(dataPosition, 1)));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),l=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),c=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),u=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],f={vertex:a,fragment:l,attributes:u},d={vertex:o,fragment:l,attributes:u},h={vertex:s,fragment:l,attributes:u},p={vertex:a,fragment:c,attributes:u},m={vertex:o,fragment:c,attributes:u},g={vertex:s,fragment:c,attributes:u};function v(e,t){var n=r(e,t),i=n.attributes;return i.position.location=0,i.color.location=1,i.glyph.location=2,i.id.location=3,n}t.createPerspective=function(e){return v(e,f)},t.createOrtho=function(e){return v(e,d)},t.createProject=function(e){return v(e,h)},t.createPickPerspective=function(e){return v(e,p)},t.createPickOrtho=function(e){return v(e,m)},t.createPickProject=function(e){return v(e,g)}},8418:function(e,t,n){"use strict";var r=n(5219),i=n(2762),a=n(8116),o=n(1888),s=n(6760),l=n(1283),c=n(9366),u=n(5964),f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],d=ArrayBuffer,h=DataView;function p(e){return Array.isArray(e)||function(e){return d.isView(e)&&!(e instanceof h)}(e)}function m(e,t){var n=e[0],r=e[1],i=e[2],a=e[3];return e[0]=t[0]*n+t[4]*r+t[8]*i+t[12]*a,e[1]=t[1]*n+t[5]*r+t[9]*i+t[13]*a,e[2]=t[2]*n+t[6]*r+t[10]*i+t[14]*a,e[3]=t[3]*n+t[7]*r+t[11]*i+t[15]*a,e}function g(e,t,n,r){return m(r,r),m(r,r),m(r,r)}function v(e,t){this.index=e,this.dataCoordinate=this.position=t}function y(e){return!0===e||e>1?1:e}function b(e,t,n,r,i,a,o,s,l,c,u,f){this.gl=e,this.pixelRatio=1,this.shader=t,this.orthoShader=n,this.projectShader=r,this.pointBuffer=i,this.colorBuffer=a,this.glyphBuffer=o,this.idBuffer=s,this.vao=l,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=c,this.pickOrthoShader=u,this.pickProjectShader=f,this.points=[],this._selectResult=new v(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}e.exports=function(e){var t=e.gl,n=l.createPerspective(t),r=l.createOrtho(t),o=l.createProject(t),s=l.createPickPerspective(t),c=l.createPickOrtho(t),u=l.createPickProject(t),f=i(t),d=i(t),h=i(t),p=i(t),m=a(t,[{buffer:f,size:3,type:t.FLOAT},{buffer:d,size:4,type:t.FLOAT},{buffer:h,size:2,type:t.FLOAT},{buffer:p,size:4,type:t.UNSIGNED_BYTE,normalized:!0}]),g=new b(t,n,r,o,f,d,h,p,m,s,c,u);return g.update(e),g};var x=b.prototype;x.pickSlots=1,x.setPickBase=function(e){this.pickId=e},x.isTransparent=function(){if(this.hasAlpha)return!0;for(var e=0;e<3;++e)if(this.axesProject[e]&&this.projectHasAlpha)return!0;return!1},x.isOpaque=function(){if(!this.hasAlpha)return!0;for(var e=0;e<3;++e)if(this.axesProject[e]&&!this.projectHasAlpha)return!0;return!1};var _=[0,0],w=[0,0,0],A=[0,0,0],k=[0,0,0,1],E=[0,0,0,1],T=f.slice(),M=[0,0,0],S=[[0,0,0],[0,0,0]];function C(e){return e[0]=e[1]=e[2]=0,e}function O(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1,e}function R(e,t,n,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[n]=r,e}function N(e,t,n,r){var i,a=t.axesProject,o=t.gl,l=e.uniforms,c=n.model||f,u=n.view||f,d=n.projection||f,h=t.axesBounds,p=function(e){for(var t=S,n=0;n<2;++n)for(var r=0;r<3;++r)t[n][r]=Math.max(Math.min(e[n][r],1e8),-1e8);return t}(t.clipBounds);i=t.axes&&t.axes.lastCubeProps?t.axes.lastCubeProps.axis:[1,1,1],_[0]=2/o.drawingBufferWidth,_[1]=2/o.drawingBufferHeight,e.bind(),l.view=u,l.projection=d,l.screenSize=_,l.highlightId=t.highlightId,l.highlightScale=t.highlightScale,l.clipBounds=p,l.pickGroup=t.pickId/255,l.pixelRatio=r;for(var m=0;m<3;++m)if(a[m]){l.scale=t.projectScale[m],l.opacity=t.projectOpacity[m];for(var v=T,y=0;y<16;++y)v[y]=0;for(y=0;y<4;++y)v[5*y]=1;v[5*m]=0,i[m]<0?v[12+m]=h[0][m]:v[12+m]=h[1][m],s(v,c,v),l.model=v;var b=(m+1)%3,x=(m+2)%3,N=C(w),L=C(A);N[b]=1,L[x]=1;var D=g(0,0,0,O(k,N)),P=g(0,0,0,O(E,L));if(Math.abs(D[1])>Math.abs(P[1])){var I=D;D=P,P=I,I=N,N=L,L=I;var F=b;b=x,x=F}D[0]<0&&(N[b]=-1),P[1]>0&&(L[x]=-1);var z=0,j=0;for(y=0;y<4;++y)z+=Math.pow(c[4*b+y],2),j+=Math.pow(c[4*x+y],2);N[b]/=Math.sqrt(z),L[x]/=Math.sqrt(j),l.axes[0]=N,l.axes[1]=L,l.fragClipBounds[0]=R(M,p[0],m,-1e8),l.fragClipBounds[1]=R(M,p[1],m,1e8),t.vao.bind(),t.vao.draw(o.TRIANGLES,t.vertexCount),t.lineWidth>0&&(o.lineWidth(t.lineWidth*r),t.vao.draw(o.LINES,t.lineVertexCount,t.vertexCount)),t.vao.unbind()}}var L=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function D(e,t,n,r,i,a,o){var s=n.gl;if((a===n.projectHasAlpha||o)&&N(t,n,r,i),a===n.hasAlpha||o){e.bind();var l=e.uniforms;l.model=r.model||f,l.view=r.view||f,l.projection=r.projection||f,_[0]=2/s.drawingBufferWidth,_[1]=2/s.drawingBufferHeight,l.screenSize=_,l.highlightId=n.highlightId,l.highlightScale=n.highlightScale,l.fragClipBounds=L,l.clipBounds=n.axes.bounds,l.opacity=n.opacity,l.pickGroup=n.pickId/255,l.pixelRatio=i,n.vao.bind(),n.vao.draw(s.TRIANGLES,n.vertexCount),n.lineWidth>0&&(s.lineWidth(n.lineWidth*i),n.vao.draw(s.LINES,n.lineVertexCount,n.vertexCount)),n.vao.unbind()}}function P(e,t,n,i){var a;a=p(e)?t<e.length?e[t]:void 0:e,a=u(a);var o=!0;r(a)&&(a="",o=!1),n||(n={});var s=n.family;p(s)&&(s=s[t]),s||(s="normal");var l=n.weight;p(l)&&(l=l[t]),l||(l="normal");var f=n.style;p(f)&&(f=f[t]),f||(f="normal");var d=n.variant;p(d)&&(d=d[t]),d||(d="normal");var h=c(a,{family:s,weight:l,style:f,variant:d},i);return{mesh:(h=c(a,n,i))[0],lines:h[1],bounds:h[2],visible:o}}x.draw=function(e){D(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,e,this.pixelRatio,!1,!1)},x.drawTransparent=function(e){D(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,e,this.pixelRatio,!0,!1)},x.drawPick=function(e){D(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,e,1,!0,!0)},x.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=e.value[2]+(e.value[1]<<8)+(e.value[0]<<16);if(t>=this.pointCount||t<0)return null;var n=this.points[t],r=this._selectResult;r.index=t;for(var i=0;i<3;++i)r.position[i]=r.dataCoordinate[i]=n[i];return r},x.highlight=function(e){if(e){var t=e.index,n=255&t,r=t>>8&255,i=t>>16&255;this.highlightId=[n/255,r/255,i/255,0]}else this.highlightId=[1,1,1,1]},x.update=function(e){if("perspective"in(e=e||{})&&(this.useOrtho=!e.perspective),"orthographic"in e&&(this.useOrtho=!!e.orthographic),"lineWidth"in e&&(this.lineWidth=e.lineWidth),"project"in e)if(p(e.project))this.axesProject=e.project;else{var t=!!e.project;this.axesProject=[t,t,t]}if("projectScale"in e)if(p(e.projectScale))this.projectScale=e.projectScale.slice();else{var n=+e.projectScale;this.projectScale=[n,n,n]}if(this.projectHasAlpha=!1,"projectOpacity"in e){if(p(e.projectOpacity))this.projectOpacity=e.projectOpacity.slice();else{n=+e.projectOpacity;this.projectOpacity=[n,n,n]}for(var r=0;r<3;++r)this.projectOpacity[r]=y(this.projectOpacity[r]),this.projectOpacity[r]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in e&&(this.opacity=y(e.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var i,a,s=e.position,l={family:e.font||"normal",style:e.fontStyle||"normal",weight:e.fontWeight||"normal",variant:e.fontVariant||"normal"},c=e.alignment||[0,0];if(2===c.length)i=c[0],a=c[1];else{i=[],a=[];for(r=0;r<c.length;++r)i[r]=c[r][0],a[r]=c[r][1]}var u=[1/0,1/0,1/0],f=[-1/0,-1/0,-1/0],d=e.glyph,h=e.color,m=e.size,g=e.angle,v=e.lineColor,b=-1,x=0,_=0,w=0;if(s.length){w=s.length;e:for(r=0;r<w;++r){for(var A=s[r],k=0;k<3;++k)if(isNaN(A[k])||!isFinite(A[k]))continue e;var E=(B=P(d,r,l,this.pixelRatio)).mesh,T=B.lines,M=B.bounds;x+=3*E.cells.length,_+=2*T.edges.length}}var S=x+_,C=o.mallocFloat(3*S),O=o.mallocFloat(4*S),R=o.mallocFloat(2*S),N=o.mallocUint32(S);if(S>0){var L=0,D=x,I=[0,0,0,1],F=[0,0,0,1],z=p(h)&&p(h[0]),j=p(v)&&p(v[0]);e:for(r=0;r<w;++r){b+=1;for(A=s[r],k=0;k<3;++k){if(isNaN(A[k])||!isFinite(A[k]))continue e;f[k]=Math.max(f[k],A[k]),u[k]=Math.min(u[k],A[k])}E=(B=P(d,r,l,this.pixelRatio)).mesh,T=B.lines,M=B.bounds;var B,U=B.visible;if(U)if(p(h)){if(3===($=z?r<h.length?h[r]:[0,0,0,0]:h).length){for(k=0;k<3;++k)I[k]=$[k];I[3]=1}else if(4===$.length){for(k=0;k<4;++k)I[k]=$[k];!this.hasAlpha&&$[3]<1&&(this.hasAlpha=!0)}}else I[0]=I[1]=I[2]=0,I[3]=1;else I=[1,1,1,0];if(U)if(p(v)){var $;if(3===($=j?r<v.length?v[r]:[0,0,0,0]:v).length){for(k=0;k<3;++k)F[k]=$[k];F[k]=1}else if(4===$.length){for(k=0;k<4;++k)F[k]=$[k];!this.hasAlpha&&$[3]<1&&(this.hasAlpha=!0)}}else F[0]=F[1]=F[2]=0,F[3]=1;else F=[1,1,1,0];var q=.5;U?p(m)?q=r<m.length?+m[r]:12:m?q=+m:this.useOrtho&&(q=12):q=0;var H=0;p(g)?H=r<g.length?+g[r]:0:g&&(H=+g);var V=Math.cos(H),W=Math.sin(H);for(A=s[r],k=0;k<3;++k)f[k]=Math.max(f[k],A[k]),u[k]=Math.min(u[k],A[k]);var G=i,Y=a;G=0;p(i)?G=r<i.length?i[r]:0:i&&(G=i);Y=0;p(a)?Y=r<a.length?a[r]:0:a&&(Y=a);var X=[G*=G>0?1-M[0][0]:G<0?1+M[1][0]:1,Y*=Y>0?1-M[0][1]:Y<0?1+M[1][1]:1],K=E.cells||[],Z=E.positions||[];for(k=0;k<K.length;++k)for(var J=K[k],Q=0;Q<3;++Q){for(var ee=0;ee<3;++ee)C[3*L+ee]=A[ee];for(ee=0;ee<4;++ee)O[4*L+ee]=I[ee];N[L]=b;var te=Z[J[Q]];R[2*L]=q*(V*te[0]-W*te[1]+X[0]),R[2*L+1]=q*(W*te[0]+V*te[1]+X[1]),L+=1}for(K=T.edges,Z=T.positions,k=0;k<K.length;++k)for(J=K[k],Q=0;Q<2;++Q){for(ee=0;ee<3;++ee)C[3*D+ee]=A[ee];for(ee=0;ee<4;++ee)O[4*D+ee]=F[ee];N[D]=b;te=Z[J[Q]];R[2*D]=q*(V*te[0]-W*te[1]+X[0]),R[2*D+1]=q*(W*te[0]+V*te[1]+X[1]),D+=1}}}this.bounds=[u,f],this.points=s,this.pointCount=s.length,this.vertexCount=x,this.lineVertexCount=_,this.pointBuffer.update(C),this.colorBuffer.update(O),this.glyphBuffer.update(R),this.idBuffer.update(N),o.free(C),o.free(O),o.free(R),o.free(N)},x.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},4298:function(e,t,n){"use strict";var r=n(3236);t.boxVertex=r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),t.boxFragment=r(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},3161:function(e,t,n){"use strict";var r=n(9405),i=n(2762),a=n(4298);function o(e,t,n){this.plot=e,this.boxBuffer=t,this.boxShader=n,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}e.exports=function(e,t){var n=e.gl,s=i(n,[0,0,0,1,1,0,1,1]),l=r(n,a.boxVertex,a.boxFragment),c=new o(e,s,l);return c.update(t),e.addOverlay(c),c};var s=o.prototype;s.draw=function(){if(this.enabled){var e=this.plot,t=this.selectBox,n=this.borderWidth,r=(this.innerFill,this.innerColor),i=(this.outerFill,this.outerColor),a=this.borderColor,o=e.box,s=e.screenBox,l=e.dataBox,c=e.viewBox,u=e.pixelRatio,f=(t[0]-l[0])*(c[2]-c[0])/(l[2]-l[0])+c[0],d=(t[1]-l[1])*(c[3]-c[1])/(l[3]-l[1])+c[1],h=(t[2]-l[0])*(c[2]-c[0])/(l[2]-l[0])+c[0],p=(t[3]-l[1])*(c[3]-c[1])/(l[3]-l[1])+c[1];if(f=Math.max(f,c[0]),d=Math.max(d,c[1]),h=Math.min(h,c[2]),p=Math.min(p,c[3]),!(h<f||p<d)){o.bind();var m=s[2]-s[0],g=s[3]-s[1];if(this.outerFill&&(o.drawBox(0,0,m,d,i),o.drawBox(0,d,f,p,i),o.drawBox(0,p,m,g,i),o.drawBox(h,d,m,p,i)),this.innerFill&&o.drawBox(f,d,h,p,r),n>0){var v=n*u;o.drawBox(f-v,d-v,h+v,d+v,a),o.drawBox(f-v,p-v,h+v,p+v,a),o.drawBox(f-v,d-v,f+v,p+v,a),o.drawBox(h-v,d-v,h+v,p+v,a)}}}},s.update=function(e){e=e||{},this.innerFill=!!e.innerFill,this.outerFill=!!e.outerFill,this.innerColor=(e.innerColor||[0,0,0,.5]).slice(),this.outerColor=(e.outerColor||[0,0,0,.5]).slice(),this.borderColor=(e.borderColor||[0,0,0,1]).slice(),this.borderWidth=e.borderWidth||0,this.selectBox=(e.selectBox||this.selectBox).slice()},s.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},3589:function(e,t,n){"use strict";e.exports=function(e,t){var n=t[0],a=t[1],o=r(e,n,a,{}),s=i.mallocUint8(n*a*4);return new l(e,o,s)};var r=n(2260),i=n(1888),a=n(9618),o=n(8828).nextPow2;function s(e,t,n,r,i){this.coord=[e,t],this.id=n,this.value=r,this.distance=i}function l(e,t,n){this.gl=e,this.fbo=t,this.buffer=n,this._readTimeout=null;var r=this;this._readCallback=function(){r.gl&&(t.bind(),e.readPixels(0,0,t.shape[0],t.shape[1],e.RGBA,e.UNSIGNED_BYTE,r.buffer),r._readTimeout=null)}}var c=l.prototype;Object.defineProperty(c,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(e){if(this.gl){this.fbo.shape=e;var t=this.fbo.shape[0],n=this.fbo.shape[1];if(n*t*4>this.buffer.length){i.free(this.buffer);for(var r=this.buffer=i.mallocUint8(o(n*t*4)),a=0;a<n*t*4;++a)r[a]=255}return e}}}),c.begin=function(){var e=this.gl;this.shape;e&&(this.fbo.bind(),e.clearColor(1,1,1,1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT))},c.end=function(){var e=this.gl;e&&(e.bindFramebuffer(e.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},c.query=function(e,t,n){if(!this.gl)return null;var r=this.fbo.shape.slice();e|=0,t|=0,"number"!=typeof n&&(n=1);var i=0|Math.min(Math.max(e-n,0),r[0]),o=0|Math.min(Math.max(e+n,0),r[0]),l=0|Math.min(Math.max(t-n,0),r[1]),c=0|Math.min(Math.max(t+n,0),r[1]);if(o<=i||c<=l)return null;var u=[o-i,c-l],f=a(this.buffer,[u[0],u[1],4],[4,4*r[0],1],4*(i+r[0]*l)),d=function(e,t,n){for(var r=1e8,i=-1,a=-1,o=e.shape[0],s=e.shape[1],l=0;l<o;l++)for(var c=0;c<s;c++){var u=e.get(l,c,0),f=e.get(l,c,1),d=e.get(l,c,2),h=e.get(l,c,3);if(u<255||f<255||d<255||h<255){var p=t-l,m=n-c,g=p*p+m*m;g<r&&(r=g,i=l,a=c)}}return[i,a,r]}(f.hi(u[0],u[1],1),n,n),h=d[0],p=d[1];return h<0||Math.pow(this.radius,2)<d[2]?null:new s(h+i|0,p+l|0,f.get(h,p,0),[f.get(h,p,1),f.get(h,p,2),f.get(h,p,3)],Math.sqrt(d[2]))},c.dispose=function(){this.gl&&(this.fbo.dispose(),i.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},9405:function(e,t,n){"use strict";var r=n(3327),i=n(8731),a=n(216),o=n(5091),s=n(2145),l=n(8866);function c(e){this.gl=e,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var u=c.prototype;function f(e,t){return e.name<t.name?-1:1}u.bind=function(){var e;this.program||this._relink();var t=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),n=this.gl.lastAttribCount;if(t>n)for(e=n;e<t;e++)this.gl.enableVertexAttribArray(e);else if(n>t)for(e=t;e<n;e++)this.gl.disableVertexAttribArray(e);this.gl.lastAttribCount=t,this.gl.useProgram(this.program)},u.dispose=function(){for(var e=this.gl.lastAttribCount,t=0;t<e;t++)this.gl.disableVertexAttribArray(t);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},u.update=function(e,t,n,c){if(!t||1===arguments.length){var u=e;e=u.vertex,t=u.fragment,n=u.uniforms,c=u.attributes}var d=this,h=d.gl,p=d._vref;d._vref=o.shader(h,h.VERTEX_SHADER,e),p&&p.dispose(),d.vertShader=d._vref.shader;var m=this._fref;if(d._fref=o.shader(h,h.FRAGMENT_SHADER,t),m&&m.dispose(),d.fragShader=d._fref.shader,!n||!c){var g=h.createProgram();if(h.attachShader(g,d.fragShader),h.attachShader(g,d.vertShader),h.linkProgram(g),!h.getProgramParameter(g,h.LINK_STATUS)){var v=h.getProgramInfoLog(g);throw new l(v,"Error linking program:"+v)}n=n||s.uniforms(h,g),c=c||s.attributes(h,g),h.deleteProgram(g)}(c=c.slice()).sort(f);var y,b=[],x=[],_=[];for(y=0;y<c.length;++y){var w=c[y];if(w.type.indexOf("mat")>=0){for(var A=0|w.type.charAt(w.type.length-1),k=new Array(A),E=0;E<A;++E)k[E]=_.length,x.push(w.name+"["+E+"]"),"number"==typeof w.location?_.push(w.location+E):Array.isArray(w.location)&&w.location.length===A&&"number"==typeof w.location[E]?_.push(0|w.location[E]):_.push(-1);b.push({name:w.name,type:w.type,locations:k})}else b.push({name:w.name,type:w.type,locations:[_.length]}),x.push(w.name),"number"==typeof w.location?_.push(0|w.location):_.push(-1)}var T=0;for(y=0;y<_.length;++y)if(_[y]<0){for(;_.indexOf(T)>=0;)T+=1;_[y]=T}var M=new Array(n.length);function S(){d.program=o.program(h,d._vref,d._fref,x,_);for(var e=0;e<n.length;++e)M[e]=h.getUniformLocation(d.program,n[e].name)}S(),d._relink=S,d.types={uniforms:a(n),attributes:a(c)},d.attributes=i(h,d,b,_),Object.defineProperty(d,"uniforms",r(h,d,n,M))},e.exports=function(e,t,n,r,i){var a=new c(e);return a.update(t,n,r,i),a}},8866:function(e){function t(e,t,n){this.shortMessage=t||"",this.longMessage=n||"",this.rawError=e||"",this.message="gl-shader: "+(t||e||"")+(n?"\n"+n:""),this.stack=(new Error).stack}t.prototype=new Error,t.prototype.name="GLError",t.prototype.constructor=t,e.exports=t},8731:function(e,t,n){"use strict";e.exports=function(e,t,n,i){for(var a={},o=0,c=n.length;o<c;++o){var u=n[o],f=u.name,d=u.type,h=u.locations;switch(d){case"bool":case"int":case"float":s(e,t,h[0],i,1,a,f);break;default:if(d.indexOf("vec")>=0){if((p=d.charCodeAt(d.length-1)-48)<2||p>4)throw new r("","Invalid data type for attribute "+f+": "+d);s(e,t,h[0],i,p,a,f)}else{if(!(d.indexOf("mat")>=0))throw new r("","Unknown data type for attribute "+f+": "+d);var p;if((p=d.charCodeAt(d.length-1)-48)<2||p>4)throw new r("","Invalid data type for attribute "+f+": "+d);l(e,t,h,i,p,a,f)}}}return a};var r=n(8866);function i(e,t,n,r,i,a){this._gl=e,this._wrapper=t,this._index=n,this._locations=r,this._dimension=i,this._constFunc=a}var a=i.prototype;a.pointer=function(e,t,n,r){var i=this,a=i._gl,o=i._locations[i._index];a.vertexAttribPointer(o,i._dimension,e||a.FLOAT,!!t,n||0,r||0),a.enableVertexAttribArray(o)},a.set=function(e,t,n,r){return this._constFunc(this._locations[this._index],e,t,n,r)},Object.defineProperty(a,"location",{get:function(){return this._locations[this._index]},set:function(e){return e!==this._locations[this._index]&&(this._locations[this._index]=0|e,this._wrapper.program=null),0|e}});var o=[function(e,t,n){return void 0===n.length?e.vertexAttrib1f(t,n):e.vertexAttrib1fv(t,n)},function(e,t,n,r){return void 0===n.length?e.vertexAttrib2f(t,n,r):e.vertexAttrib2fv(t,n)},function(e,t,n,r,i){return void 0===n.length?e.vertexAttrib3f(t,n,r,i):e.vertexAttrib3fv(t,n)},function(e,t,n,r,i,a){return void 0===n.length?e.vertexAttrib4f(t,n,r,i,a):e.vertexAttrib4fv(t,n)}];function s(e,t,n,r,a,s,l){var c=o[a],u=new i(e,t,n,r,a,c);Object.defineProperty(s,l,{set:function(t){return e.disableVertexAttribArray(r[n]),c(e,r[n],t),t},get:function(){return u},enumerable:!0})}function l(e,t,n,r,i,a,o){for(var l=new Array(i),c=new Array(i),u=0;u<i;++u)s(e,t,n[u],r,i,l,u),c[u]=l[u];Object.defineProperty(l,"location",{set:function(e){if(Array.isArray(e))for(var t=0;t<i;++t)c[t].location=e[t];else for(t=0;t<i;++t)c[t].location=e+t;return e},get:function(){for(var e=new Array(i),t=0;t<i;++t)e[t]=r[n[t]];return e},enumerable:!0}),l.pointer=function(t,a,o,s){t=t||e.FLOAT,a=!!a,o=o||i*i,s=s||0;for(var l=0;l<i;++l){var c=r[n[l]];e.vertexAttribPointer(c,i,t,a,o,s+l*i),e.enableVertexAttribArray(c)}};var f=new Array(i),d=e["vertexAttrib"+i+"fv"];Object.defineProperty(a,o,{set:function(t){for(var a=0;a<i;++a){var o=r[n[a]];if(e.disableVertexAttribArray(o),Array.isArray(t[0]))d.call(e,o,t[a]);else{for(var s=0;s<i;++s)f[s]=t[i*a+s];d.call(e,o,f)}}return t},get:function(){return l},enumerable:!0})}},3327:function(e,t,n){"use strict";var r=n(216),i=n(8866);function a(e){return function(){return e}}function o(e,t){for(var n=new Array(e),r=0;r<e;++r)n[r]=t;return n}e.exports=function(e,t,n,s){function l(t){return function(r){for(var a=c("",t),o=0;o<a.length;++o){var l=a[o],u=l[0],f=l[1];if(s[f]){var d=r;if("string"==typeof u&&(0===u.indexOf(".")||0===u.indexOf("["))){var h=u;if(0===u.indexOf(".")&&(h=u.slice(1)),h.indexOf("]")===h.length-1){var p=h.indexOf("["),m=h.slice(0,p),g=h.slice(p+1,h.length-1);d=m?r[m][g]:r[g]}else d=r[h]}var v,y=n[f].type;switch(y){case"bool":case"int":case"sampler2D":case"samplerCube":e.uniform1i(s[f],d);break;case"float":e.uniform1f(s[f],d);break;default:var b=y.indexOf("vec");if(!(0<=b&&b<=1&&y.length===4+b)){if(0===y.indexOf("mat")&&4===y.length){if((v=y.charCodeAt(y.length-1)-48)<2||v>4)throw new i("","Invalid uniform dimension type for matrix "+name+": "+y);e["uniformMatrix"+v+"fv"](s[f],!1,d);break}throw new i("","Unknown uniform data type for "+name+": "+y)}if((v=y.charCodeAt(y.length-1)-48)<2||v>4)throw new i("","Invalid data type");switch(y.charAt(0)){case"b":case"i":e["uniform"+v+"iv"](s[f],d);break;case"v":e["uniform"+v+"fv"](s[f],d);break;default:throw new i("","Unrecognized data type for vector "+name+": "+y)}}}}}}function c(e,t){if("object"!=typeof t)return[[e,t]];var n=[];for(var r in t){var i=t[r],a=e;parseInt(r)+""===r?a+="["+r+"]":a+="."+r,"object"==typeof i?n.push.apply(n,c(a,i)):n.push([a,i])}return n}function u(e,t,r){if("object"==typeof r){var c=f(r);Object.defineProperty(e,t,{get:a(c),set:l(r),enumerable:!0,configurable:!1})}else s[r]?Object.defineProperty(e,t,{get:(u=r,function(e,t,n){return e.getUniform(t.program,n[u])}),set:l(r),enumerable:!0,configurable:!1}):e[t]=function(e){switch(e){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var t=e.indexOf("vec");if(0<=t&&t<=1&&e.length===4+t){if((n=e.charCodeAt(e.length-1)-48)<2||n>4)throw new i("","Invalid data type");return"b"===e.charAt(0)?o(n,!1):o(n,0)}if(0===e.indexOf("mat")&&4===e.length){var n;if((n=e.charCodeAt(e.length-1)-48)<2||n>4)throw new i("","Invalid uniform dimension type for matrix "+name+": "+e);return o(n*n,0)}throw new i("","Unknown uniform data type for "+name+": "+e)}}(n[r].type);var u}function f(e){var t;if(Array.isArray(e)){t=new Array(e.length);for(var n=0;n<e.length;++n)u(t,n,e[n])}else for(var r in t={},e)u(t,r,e[r]);return t}var d=r(n,!0);return{get:a(f(d)),set:l(d),enumerable:!0,configurable:!0}}},216:function(e){"use strict";e.exports=function(e,t){for(var n={},r=0;r<e.length;++r)for(var i=e[r].name.split("."),a=n,o=0;o<i.length;++o){var s=i[o].split("[");if(s.length>1){s[0]in a||(a[s[0]]=[]),a=a[s[0]];for(var l=1;l<s.length;++l){var c=parseInt(s[l]);l<s.length-1||o<i.length-1?(c in a||(l<s.length-1?a[c]=[]:a[c]={}),a=a[c]):a[c]=t?r:e[r].type}}else o<i.length-1?(s[0]in a||(a[s[0]]={}),a=a[s[0]]):a[s[0]]=t?r:e[r].type}return n}},2145:function(e,t){"use strict";t.uniforms=function(e,t){for(var n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=[],a=0;a<n;++a){var o=e.getActiveUniform(t,a);if(o){var s=i(e,o.type);if(o.size>1)for(var l=0;l<o.size;++l)r.push({name:o.name.replace("[0]","["+l+"]"),type:s});else r.push({name:o.name,type:s})}}return r},t.attributes=function(e,t){for(var n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),r=[],a=0;a<n;++a){var o=e.getActiveAttrib(t,a);o&&r.push({name:o.name,type:i(e,o.type)})}return r};var n={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},r=null;function i(e,t){if(!r){var i=Object.keys(n);r={};for(var a=0;a<i.length;++a){var o=i[a];r[e[o]]=n[o]}}return r[t]}},5091:function(e,t,n){"use strict";t.shader=function(e,t,n){return u(e).getShaderReference(t,n)},t.program=function(e,t,n,r,i){return u(e).getProgram(t,n,r,i)};var r=n(8866),i=n(2992),a=new("undefined"==typeof WeakMap?n(606):WeakMap),o=0;function s(e,t,n,r,i,a,o){this.id=e,this.src=t,this.type=n,this.shader=r,this.count=a,this.programs=[],this.cache=o}function l(e){this.gl=e,this.shaders=[{},{}],this.programs={}}s.prototype.dispose=function(){if(0==--this.count){for(var e=this.cache,t=e.gl,n=this.programs,r=0,i=n.length;r<i;++r){var a=e.programs[n[r]];a&&(delete e.programs[r],t.deleteProgram(a))}t.deleteShader(this.shader),delete e.shaders[this.type===t.FRAGMENT_SHADER|0][this.src]}};var c=l.prototype;function u(e){var t=a.get(e);return t||(t=new l(e),a.set(e,t)),t}c.getShaderReference=function(e,t){var n=this.gl,a=this.shaders[e===n.FRAGMENT_SHADER|0],l=a[t];if(l&&n.isShader(l.shader))l.count+=1;else{var c=function(e,t,n){var a=e.createShader(t);if(e.shaderSource(a,n),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS)){var o=e.getShaderInfoLog(a);try{var s=i(o,n,t)}catch(e){throw console.warn("Failed to format compiler error: "+e),new r(o,"Error compiling shader:\n"+o)}throw new r(o,s.short,s.long)}return a}(n,e,t);l=a[t]=new s(o++,t,e,c,[],1,this)}return l},c.getProgram=function(e,t,n,i){var a=[e.id,t.id,n.join(":"),i.join(":")].join("@"),o=this.programs[a];return o&&this.gl.isProgram(o)||(this.programs[a]=o=function(e,t,n,i,a){var o=e.createProgram();e.attachShader(o,t),e.attachShader(o,n);for(var s=0;s<i.length;++s)e.bindAttribLocation(o,a[s],i[s]);if(e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS)){var l=e.getProgramInfoLog(o);throw new r(l,"Error linking program: "+l)}return o}(this.gl,e.shader,t.shader,n,i),e.programs.push(a),t.programs.push(a)),o}},4098:function(e){"use strict";function t(e){this.plot=e,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}e.exports=function(e,n){var r=new t(e);return r.update(n),e.addOverlay(r),r};var n=t.prototype;n.update=function(e){e=e||{},this.enable=(e.enable||[!0,!0,!1,!1]).slice(),this.width=(e.width||[1,1,1,1]).slice(),this.color=(e.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map((function(e){return e.slice()})),this.center=(e.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},n.draw=function(){var e=this.enable,t=this.width,n=this.color,r=this.center,i=this.plot,a=i.line,o=i.dataBox,s=i.viewBox;if(a.bind(),o[0]<=r[0]&&r[0]<=o[2]&&o[1]<=r[1]&&r[1]<=o[3]){var l=s[0]+(r[0]-o[0])/(o[2]-o[0])*(s[2]-s[0]),c=s[1]+(r[1]-o[1])/(o[3]-o[1])*(s[3]-s[1]);e[0]&&a.drawLine(l,c,s[0],c,t[0],n[0]),e[1]&&a.drawLine(l,c,l,s[1],t[1],n[1]),e[2]&&a.drawLine(l,c,s[2],c,t[2],n[2]),e[3]&&a.drawLine(l,c,l,s[3],t[3],n[3])}},n.dispose=function(){this.plot.removeOverlay(this)}},1493:function(e,t,n){"use strict";var r=n(3236),i=n(9405),a=r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * (view * (model * vec4(vertexPosition, 1.0)));\n  vec2 clipOffset = (projection * (view * (model * vec4(color, 0.0)))).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),o=r(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);e.exports=function(e){return i(e,a,o,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},4449:function(e,t,n){"use strict";var r=n(2762),i=n(8116),a=n(1493);e.exports=function(e,t){var n=[];function o(e,t,r,i,a,o){var s=[e,t,r,0,0,0,1];s[i+3]=1,s[i]=a,n.push.apply(n,s),s[6]=-1,n.push.apply(n,s),s[i]=o,n.push.apply(n,s),n.push.apply(n,s),s[6]=1,n.push.apply(n,s),s[i]=a,n.push.apply(n,s)}o(0,0,0,0,0,1),o(0,0,0,1,0,1),o(0,0,0,2,0,1),o(1,0,0,1,-1,1),o(1,0,0,2,-1,1),o(0,1,0,0,-1,1),o(0,1,0,2,-1,1),o(0,0,1,0,-1,1),o(0,0,1,1,-1,1);var l=r(e,n),c=i(e,[{type:e.FLOAT,buffer:l,size:3,offset:0,stride:28},{type:e.FLOAT,buffer:l,size:3,offset:12,stride:28},{type:e.FLOAT,buffer:l,size:1,offset:24,stride:28}]),u=a(e);u.attributes.position.location=0,u.attributes.color.location=1,u.attributes.weight.location=2;var f=new s(e,l,c,u);return f.update(t),f};var o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(e,t,n,r){this.gl=e,this.buffer=t,this.vao=n,this.shader=r,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var l=s.prototype,c=[0,0,0],u=[0,0,0],f=[0,0];l.isTransparent=function(){return!1},l.drawTransparent=function(e){},l.draw=function(e){var t=this.gl,n=this.vao,r=this.shader;n.bind(),r.bind();var i,a=e.model||o,s=e.view||o,l=e.projection||o;this.axes&&(i=this.axes.lastCubeProps.axis);for(var d=c,h=u,p=0;p<3;++p)i&&i[p]<0?(d[p]=this.bounds[0][p],h[p]=this.bounds[1][p]):(d[p]=this.bounds[1][p],h[p]=this.bounds[0][p]);f[0]=t.drawingBufferWidth,f[1]=t.drawingBufferHeight,r.uniforms.model=a,r.uniforms.view=s,r.uniforms.projection=l,r.uniforms.coordinates=[this.position,d,h],r.uniforms.colors=this.colors,r.uniforms.screenShape=f;for(p=0;p<3;++p)r.uniforms.lineWidth=this.lineWidth[p]*this.pixelRatio,this.enabled[p]&&(n.draw(t.TRIANGLES,6,6*p),this.drawSides[p]&&n.draw(t.TRIANGLES,12,18+12*p));n.unbind()},l.update=function(e){e&&("bounds"in e&&(this.bounds=e.bounds),"position"in e&&(this.position=e.position),"lineWidth"in e&&(this.lineWidth=e.lineWidth),"colors"in e&&(this.colors=e.colors),"enabled"in e&&(this.enabled=e.enabled),"drawSides"in e&&(this.drawSides=e.drawSides))},l.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},6740:function(e,t,n){var r=n(3236),i=r(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),a=r(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),o=r(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * (view * tubePosition);\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),s=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);t.meshShader={vertex:i,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},t.pickShader={vertex:o,fragment:s,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7815:function(e,t,n){"use strict";var r=n(2931),i=n(9970),a=["xyz","xzy","yxz","yzx","zxy","zyx"],o=function(e,t,n,a){for(var o=0,s=0;s<e.length;s++)for(var l=e[s].velocities,c=0;c<l.length;c++)o=Math.max(o,r.length(l[c]));var u=e.map((function(e){return function(e,t,n,a){for(var o=e.points,s=e.velocities,l=e.divergences,c=[],u=[],f=[],d=[],h=[],p=[],m=0,g=0,v=i.create(),y=i.create(),b=0;b<o.length;b++){var x=o[b],_=s[b],w=l[b];0===t&&(w=.05*n),g=r.length(_)/a,v=i.create(),r.copy(v,_),v[3]=w;for(var A=0;A<8;A++)h[A]=[x[0],x[1],x[2],A];if(d.length>0)for(A=0;A<8;A++){var k=(A+1)%8;c.push(d[A],h[A],h[k],h[k],d[k],d[A]),f.push(y,v,v,v,y,y),p.push(m,g,g,g,m,m);var E=c.length;u.push([E-6,E-5,E-4],[E-3,E-2,E-1])}var T=d;d=h,h=T;var M=y;y=v,v=M;var S=m;m=g,g=S}return{positions:c,cells:u,vectors:f,vertexIntensity:p}}(e,n,a,o)})),f=[],d=[],h=[],p=[];for(s=0;s<u.length;s++){var m=u[s],g=f.length;f=f.concat(m.positions),h=h.concat(m.vectors),p=p.concat(m.vertexIntensity);for(c=0;c<m.cells.length;c++){var v=m.cells[c],y=[];d.push(y);for(var b=0;b<v.length;b++)y.push(v[b]+g)}}return{positions:f,cells:d,vectors:h,vertexIntensity:p,colormap:t}},s=function(e,t){var n,r=e.length;for(n=0;n<r;n++){var i=e[n];if(i===t)return n;if(i>t)return n-1}return n},l=function(e,t,n){return e<t?t:e>n?n:e},c=function(e){var t=1/0;e.sort((function(e,t){return e-t}));for(var n=e.length,r=1;r<n;r++){var i=Math.abs(e[r]-e[r-1]);i<t&&(t=i)}return t};e.exports=function(e,t){var n=e.startingPositions,i=e.maxLength||1e3,u=e.tubeSize||1,f=e.absoluteTubeSize,d=e.gridFill||"+x+y+z",h={};-1!==d.indexOf("-x")&&(h.reversedX=!0),-1!==d.indexOf("-y")&&(h.reversedY=!0),-1!==d.indexOf("-z")&&(h.reversedZ=!0),h.filled=a.indexOf(d.replace(/-/g,"").replace(/\+/g,""));var p=e.getVelocity||function(t){return function(e,t,n){var i=t.vectors,a=t.meshgrid,o=e[0],c=e[1],u=e[2],f=a[0].length,d=a[1].length,h=a[2].length,p=s(a[0],o),m=s(a[1],c),g=s(a[2],u),v=p+1,y=m+1,b=g+1;if(p=l(p,0,f-1),v=l(v,0,f-1),m=l(m,0,d-1),y=l(y,0,d-1),g=l(g,0,h-1),b=l(b,0,h-1),p<0||m<0||g<0||v>f-1||y>d-1||b>h-1)return r.create();var x,_,w,A,k,E,T=a[0][p],M=a[0][v],S=a[1][m],C=a[1][y],O=a[2][g],R=(o-T)/(M-T),N=(c-S)/(C-S),L=(u-O)/(a[2][b]-O);switch(isFinite(R)||(R=.5),isFinite(N)||(N=.5),isFinite(L)||(L=.5),n.reversedX&&(p=f-1-p,v=f-1-v),n.reversedY&&(m=d-1-m,y=d-1-y),n.reversedZ&&(g=h-1-g,b=h-1-b),n.filled){case 5:k=g,E=b,w=m*h,A=y*h,x=p*h*d,_=v*h*d;break;case 4:k=g,E=b,x=p*h,_=v*h,w=m*h*f,A=y*h*f;break;case 3:w=m,A=y,k=g*d,E=b*d,x=p*d*h,_=v*d*h;break;case 2:w=m,A=y,x=p*d,_=v*d,k=g*d*f,E=b*d*f;break;case 1:x=p,_=v,k=g*f,E=b*f,w=m*f*h,A=y*f*h;break;default:x=p,_=v,w=m*f,A=y*f,k=g*f*d,E=b*f*d}var D=i[x+w+k],P=i[x+w+E],I=i[x+A+k],F=i[x+A+E],z=i[_+w+k],j=i[_+w+E],B=i[_+A+k],U=i[_+A+E],$=r.create(),q=r.create(),H=r.create(),V=r.create();r.lerp($,D,z,R),r.lerp(q,P,j,R),r.lerp(H,I,B,R),r.lerp(V,F,U,R);var W=r.create(),G=r.create();r.lerp(W,$,H,N),r.lerp(G,q,V,N);var Y=r.create();return r.lerp(Y,W,G,L),Y}(t,e,h)},m=e.getDivergence||function(e,t){var n=r.create(),i=1e-4;r.add(n,e,[i,0,0]);var a=p(n);r.subtract(a,a,t),r.scale(a,a,1/i),r.add(n,e,[0,i,0]);var o=p(n);r.subtract(o,o,t),r.scale(o,o,1/i),r.add(n,e,[0,0,i]);var s=p(n);return r.subtract(s,s,t),r.scale(s,s,1/i),r.add(n,a,o),r.add(n,n,s),n},g=[],v=t[0][0],y=t[0][1],b=t[0][2],x=t[1][0],_=t[1][1],w=t[1][2],A=function(e){var t=e[0],n=e[1],r=e[2];return!(t<v||t>x||n<y||n>_||r<b||r>w)},k=10*r.distance(t[0],t[1])/i,E=k*k,T=1,M=0,S=n.length;S>1&&(T=function(e){for(var t=[],n=[],r=[],i={},a={},o={},s=e.length,l=0;l<s;l++){var u=e[l],f=u[0],d=u[1],h=u[2];i[f]||(t.push(f),i[f]=!0),a[d]||(n.push(d),a[d]=!0),o[h]||(r.push(h),o[h]=!0)}var p=c(t),m=c(n),g=c(r),v=Math.min(p,m,g);return isFinite(v)?v:1}(n));for(var C=0;C<S;C++){var O=r.create();r.copy(O,n[C]);var R=[O],N=[],L=p(O),D=O;N.push(L);var P=[],I=m(O,L),F=r.length(I);isFinite(F)&&F>M&&(M=F),P.push(F),g.push({points:R,velocities:N,divergences:P});for(var z=0;z<100*i&&R.length<i&&A(O);){z++;var j=r.clone(L),B=r.squaredLength(j);if(0===B)break;if(B>E&&r.scale(j,j,k/Math.sqrt(B)),r.add(j,j,O),L=p(j),r.squaredDistance(D,j)-E>-1e-4*E){R.push(j),D=j,N.push(L);I=m(j,L),F=r.length(I);isFinite(F)&&F>M&&(M=F),P.push(F)}O=j}}var U=o(g,e.colormap,M,T);return f?U.tubeScale=f:(0===M&&(M=1),U.tubeScale=.5*u*T/M),U};var u=n(6740),f=n(6405).createMesh;e.exports.createTubeMesh=function(e,t){return f(e,t,{shaders:u,traceType:"streamtube"})}},990:function(e,t,n){var r=n(9405),i=n(3236),a=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  mat4 objectOffsetTranslation = mat4(1.0) + mat4(vec4(0), vec4(0), vec4(0), vec4(objectOffset, 0));\n  vec4 worldPosition = (model * objectOffsetTranslation) * vec4(localCoordinate, 1.0);\n  vec4 clipPosition = projection * (view * worldPosition);\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),o=i(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color  in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),s=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  mat4 objectOffsetTranslation = mat4(1.0) + mat4(vec4(0), vec4(0), vec4(0), vec4(objectOffset, 0));\n  vec4 worldPosition = (model * objectOffsetTranslation) * vec4(dataCoordinate, 1.0);\n\n  vec4 clipPosition = projection * (view * worldPosition);\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),l=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);t.createShader=function(e){var t=r(e,a,o,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t.attributes.normal.location=2,t},t.createPickShader=function(e){var t=r(e,a,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t.attributes.normal.location=2,t},t.createContourShader=function(e){var t=r(e,s,o,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t},t.createPickContourShader=function(e){var t=r(e,s,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t}},9499:function(e,t,n){"use strict";e.exports=function(e){var t=e.gl,n=y(t),r=x(t),s=b(t),l=_(t),c=i(t),u=a(t,[{buffer:c,size:4,stride:w,offset:0},{buffer:c,size:3,stride:w,offset:16},{buffer:c,size:3,stride:w,offset:28}]),f=i(t),d=a(t,[{buffer:f,size:4,stride:20,offset:0},{buffer:f,size:1,stride:20,offset:16}]),h=i(t),p=a(t,[{buffer:h,size:2,type:t.FLOAT}]),m=o(t,1,M,t.RGBA,t.UNSIGNED_BYTE);m.minFilter=t.LINEAR,m.magFilter=t.LINEAR;var g=new S(t,[0,0],[[0,0,0],[0,0,0]],n,r,c,u,m,s,l,f,d,h,p,[0,0,0]),v={levels:[[],[],[]]};for(var A in e)v[A]=e[A];return v.colormap=v.colormap||"jet",g.update(v),g};var r=n(8828),i=n(2762),a=n(8116),o=n(7766),s=n(1888),l=n(6729),c=n(5298),u=n(9994),f=n(9618),d=n(3711),h=n(6760),p=n(7608),m=n(2478),g=n(6199),v=n(990),y=v.createShader,b=v.createContourShader,x=v.createPickShader,_=v.createPickContourShader,w=40,A=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],k=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],E=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function T(e,t,n,r,i){this.position=e,this.index=t,this.uv=n,this.level=r,this.dataCoordinate=i}!function(){for(var e=0;e<3;++e){var t=E[e],n=(e+2)%3;t[(e+1)%3+0]=1,t[n+3]=1,t[e+6]=1}}();var M=256;function S(e,t,n,r,i,a,o,l,c,u,d,h,p,m,g){this.gl=e,this.shape=t,this.bounds=n,this.objectOffset=g,this.intensityBounds=[],this._shader=r,this._pickShader=i,this._coordinateBuffer=a,this._vao=o,this._colorMap=l,this._contourShader=c,this._contourPickShader=u,this._contourBuffer=d,this._contourVAO=h,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new T([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=p,this._dynamicVAO=m,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[f(s.mallocFloat(1024),[0,0]),f(s.mallocFloat(1024),[0,0]),f(s.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var C=S.prototype;C.genColormap=function(e,t){var n=!1,r=u([l({colormap:e,nshades:M,format:"rgba"}).map((function(e,r){var i=t?function(e,t){if(!t)return 1;if(!t.length)return 1;for(var n=0;n<t.length;++n){if(t.length<2)return 1;if(t[n][0]===e)return t[n][1];if(t[n][0]>e&&n>0){var r=(t[n][0]-e)/(t[n][0]-t[n-1][0]);return t[n][1]*(1-r)+r*t[n-1][1]}}return 1}(r/255,t):e[3];return i<1&&(n=!0),[e[0],e[1],e[2],255*i]}))]);return c.divseq(r,255),this.hasAlphaScale=n,r},C.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},C.isOpaque=function(){return!this.isTransparent()},C.pickSlots=1,C.setPickBase=function(e){this.pickId=e};var O=[0,0,0],R={showSurface:!1,showContour:!1,projections:[A.slice(),A.slice(),A.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function N(e,t){var n,r,i,a=t.axes&&t.axes.lastCubeProps.axis||O,o=t.showSurface,s=t.showContour;for(n=0;n<3;++n)for(o=o||t.surfaceProject[n],r=0;r<3;++r)s=s||t.contourProject[n][r];for(n=0;n<3;++n){var l=R.projections[n];for(r=0;r<16;++r)l[r]=0;for(r=0;r<4;++r)l[5*r]=1;l[5*n]=0,l[12+n]=t.axesBounds[+(a[n]>0)][n],h(l,e.model,l);var c=R.clipBounds[n];for(i=0;i<2;++i)for(r=0;r<3;++r)c[i][r]=e.clipBounds[i][r];c[0][n]=-1e8,c[1][n]=1e8}return R.showSurface=o,R.showContour=s,R}var L={model:A,view:A,projection:A,inverseModel:A.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},D=A.slice(),P=[1,0,0,0,1,0,0,0,1];function I(e,t){e=e||{};var n=this.gl;n.disable(n.CULL_FACE),this._colorMap.bind(0);var r=L;r.model=e.model||A,r.view=e.view||A,r.projection=e.projection||A,r.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],r.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],r.objectOffset=this.objectOffset,r.contourColor=this.contourColor[0],r.inverseModel=p(r.inverseModel,r.model);for(var i=0;i<2;++i)for(var a=r.clipBounds[i],o=0;o<3;++o)a[o]=Math.min(Math.max(this.clipBounds[i][o],-1e8),1e8);r.kambient=this.ambientLight,r.kdiffuse=this.diffuseLight,r.kspecular=this.specularLight,r.roughness=this.roughness,r.fresnel=this.fresnel,r.opacity=this.opacity,r.height=0,r.permutation=P,r.vertexColor=this.vertexColor;var s=D;for(h(s,r.view,r.model),h(s,r.projection,s),p(s,s),i=0;i<3;++i)r.eyePosition[i]=s[12+i]/s[15];var l=s[15];for(i=0;i<3;++i)l+=this.lightPosition[i]*s[4*i+3];for(i=0;i<3;++i){var c=s[12+i];for(o=0;o<3;++o)c+=s[4*o+i]*this.lightPosition[o];r.lightPosition[i]=c/l}var u=N(r,this);if(u.showSurface){for(this._shader.bind(),this._shader.uniforms=r,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(n.TRIANGLES,this._vertexCount),i=0;i<3;++i)this.surfaceProject[i]&&this.vertexCount&&(this._shader.uniforms.model=u.projections[i],this._shader.uniforms.clipBounds=u.clipBounds[i],this._vao.draw(n.TRIANGLES,this._vertexCount));this._vao.unbind()}if(u.showContour){var f=this._contourShader;r.kambient=1,r.kdiffuse=0,r.kspecular=0,r.opacity=1,f.bind(),f.uniforms=r;var d=this._contourVAO;for(d.bind(),i=0;i<3;++i)for(f.uniforms.permutation=E[i],n.lineWidth(this.contourWidth[i]*this.pixelRatio),o=0;o<this.contourLevels[i].length;++o)o===this.highlightLevel[i]?(f.uniforms.contourColor=this.highlightColor[i],f.uniforms.contourTint=this.highlightTint[i]):0!==o&&o-1!==this.highlightLevel[i]||(f.uniforms.contourColor=this.contourColor[i],f.uniforms.contourTint=this.contourTint[i]),this._contourCounts[i][o]&&(f.uniforms.height=this.contourLevels[i][o],d.draw(n.LINES,this._contourCounts[i][o],this._contourOffsets[i][o]));for(i=0;i<3;++i)for(f.uniforms.model=u.projections[i],f.uniforms.clipBounds=u.clipBounds[i],o=0;o<3;++o)if(this.contourProject[i][o]){f.uniforms.permutation=E[o],n.lineWidth(this.contourWidth[o]*this.pixelRatio);for(var m=0;m<this.contourLevels[o].length;++m)m===this.highlightLevel[o]?(f.uniforms.contourColor=this.highlightColor[o],f.uniforms.contourTint=this.highlightTint[o]):0!==m&&m-1!==this.highlightLevel[o]||(f.uniforms.contourColor=this.contourColor[o],f.uniforms.contourTint=this.contourTint[o]),this._contourCounts[o][m]&&(f.uniforms.height=this.contourLevels[o][m],d.draw(n.LINES,this._contourCounts[o][m],this._contourOffsets[o][m]))}for(d.unbind(),(d=this._dynamicVAO).bind(),i=0;i<3;++i)if(0!==this._dynamicCounts[i])for(f.uniforms.model=r.model,f.uniforms.clipBounds=r.clipBounds,f.uniforms.permutation=E[i],n.lineWidth(this.dynamicWidth[i]*this.pixelRatio),f.uniforms.contourColor=this.dynamicColor[i],f.uniforms.contourTint=this.dynamicTint[i],f.uniforms.height=this.dynamicLevel[i],d.draw(n.LINES,this._dynamicCounts[i],this._dynamicOffsets[i]),o=0;o<3;++o)this.contourProject[o][i]&&(f.uniforms.model=u.projections[o],f.uniforms.clipBounds=u.clipBounds[o],d.draw(n.LINES,this._dynamicCounts[i],this._dynamicOffsets[i]));d.unbind()}}C.draw=function(e){return I.call(this,e,!1)},C.drawTransparent=function(e){return I.call(this,e,!0)};var F={model:A,view:A,projection:A,inverseModel:A,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function z(e,t){return Array.isArray(e)?[t(e[0]),t(e[1]),t(e[2])]:[t(e),t(e),t(e)]}function j(e){return Array.isArray(e)?3===e.length?[e[0],e[1],e[2],1]:[e[0],e[1],e[2],e[3]]:[0,0,0,1]}function B(e){if(Array.isArray(e)){if(Array.isArray(e))return[j(e[0]),j(e[1]),j(e[2])];var t=j(e);return[t.slice(),t.slice(),t.slice()]}}C.drawPick=function(e){e=e||{};var t=this.gl;t.disable(t.CULL_FACE);var n=F;n.model=e.model||A,n.view=e.view||A,n.projection=e.projection||A,n.shape=this._field[2].shape,n.pickId=this.pickId/255,n.lowerBound=this.bounds[0],n.upperBound=this.bounds[1],n.objectOffset=this.objectOffset,n.permutation=P;for(var r=0;r<2;++r)for(var i=n.clipBounds[r],a=0;a<3;++a)i[a]=Math.min(Math.max(this.clipBounds[r][a],-1e8),1e8);var o=N(n,this);if(o.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=n,this._vao.bind(),this._vao.draw(t.TRIANGLES,this._vertexCount),r=0;r<3;++r)this.surfaceProject[r]&&(this._pickShader.uniforms.model=o.projections[r],this._pickShader.uniforms.clipBounds=o.clipBounds[r],this._vao.draw(t.TRIANGLES,this._vertexCount));this._vao.unbind()}if(o.showContour){var s=this._contourPickShader;s.bind(),s.uniforms=n;var l=this._contourVAO;for(l.bind(),a=0;a<3;++a)for(t.lineWidth(this.contourWidth[a]*this.pixelRatio),s.uniforms.permutation=E[a],r=0;r<this.contourLevels[a].length;++r)this._contourCounts[a][r]&&(s.uniforms.height=this.contourLevels[a][r],l.draw(t.LINES,this._contourCounts[a][r],this._contourOffsets[a][r]));for(r=0;r<3;++r)for(s.uniforms.model=o.projections[r],s.uniforms.clipBounds=o.clipBounds[r],a=0;a<3;++a)if(this.contourProject[r][a]){s.uniforms.permutation=E[a],t.lineWidth(this.contourWidth[a]*this.pixelRatio);for(var c=0;c<this.contourLevels[a].length;++c)this._contourCounts[a][c]&&(s.uniforms.height=this.contourLevels[a][c],l.draw(t.LINES,this._contourCounts[a][c],this._contourOffsets[a][c]))}l.unbind()}},C.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=this._field[2].shape,n=this._pickResult,r=t[0]*(e.value[0]+(e.value[2]>>4)/16)/255,i=Math.floor(r),a=r-i,o=t[1]*(e.value[1]+(15&e.value[2])/16)/255,s=Math.floor(o),l=o-s;i+=1,s+=1;var c=n.position;c[0]=c[1]=c[2]=0;for(var u=0;u<2;++u)for(var f=u?a:1-a,d=0;d<2;++d)for(var h=i+u,p=s+d,g=f*(d?l:1-l),v=0;v<3;++v)c[v]+=this._field[v].get(h,p)*g;for(var y=this._pickResult.level,b=0;b<3;++b)if(y[b]=m.le(this.contourLevels[b],c[b]),y[b]<0)this.contourLevels[b].length>0&&(y[b]=0);else if(y[b]<this.contourLevels[b].length-1){var x=this.contourLevels[b][y[b]],_=this.contourLevels[b][y[b]+1];Math.abs(x-c[b])>Math.abs(_-c[b])&&(y[b]+=1)}for(n.index[0]=a<.5?i:i+1,n.index[1]=l<.5?s:s+1,n.uv[0]=r/t[0],n.uv[1]=o/t[1],v=0;v<3;++v)n.dataCoordinate[v]=this._field[v].get(n.index[0],n.index[1]);return n},C.padField=function(e,t){var n=t.shape.slice(),r=e.shape.slice();c.assign(e.lo(1,1).hi(n[0],n[1]),t),c.assign(e.lo(1).hi(n[0],1),t.hi(n[0],1)),c.assign(e.lo(1,r[1]-1).hi(n[0],1),t.lo(0,n[1]-1).hi(n[0],1)),c.assign(e.lo(0,1).hi(1,n[1]),t.hi(1)),c.assign(e.lo(r[0]-1,1).hi(1,n[1]),t.lo(n[0]-1)),e.set(0,0,t.get(0,0)),e.set(0,r[1]-1,t.get(0,n[1]-1)),e.set(r[0]-1,0,t.get(n[0]-1,0)),e.set(r[0]-1,r[1]-1,t.get(n[0]-1,n[1]-1))},C.update=function(e){e=e||{},this.objectOffset=e.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in e&&(this.contourWidth=z(e.contourWidth,Number)),"showContour"in e&&(this.showContour=z(e.showContour,Boolean)),"showSurface"in e&&(this.showSurface=!!e.showSurface),"contourTint"in e&&(this.contourTint=z(e.contourTint,Boolean)),"contourColor"in e&&(this.contourColor=B(e.contourColor)),"contourProject"in e&&(this.contourProject=z(e.contourProject,(function(e){return z(e,Boolean)}))),"surfaceProject"in e&&(this.surfaceProject=e.surfaceProject),"dynamicColor"in e&&(this.dynamicColor=B(e.dynamicColor)),"dynamicTint"in e&&(this.dynamicTint=z(e.dynamicTint,Number)),"dynamicWidth"in e&&(this.dynamicWidth=z(e.dynamicWidth,Number)),"opacity"in e&&(this.opacity=e.opacity),"opacityscale"in e&&(this.opacityscale=e.opacityscale),"colorBounds"in e&&(this.colorBounds=e.colorBounds),"vertexColor"in e&&(this.vertexColor=e.vertexColor?1:0),"colormap"in e&&this._colorMap.setPixels(this.genColormap(e.colormap,this.opacityscale));var t=e.field||e.coords&&e.coords[2]||null,n=!1;if(t||(t=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in e||"coords"in e){var i=(t.shape[0]+2)*(t.shape[1]+2);i>this._field[2].data.length&&(s.freeFloat(this._field[2].data),this._field[2].data=s.mallocFloat(r.nextPow2(i))),this._field[2]=f(this._field[2].data,[t.shape[0]+2,t.shape[1]+2]),this.padField(this._field[2],t),this.shape=t.shape.slice();for(var a=this.shape,o=0;o<2;++o)this._field[2].size>this._field[o].data.length&&(s.freeFloat(this._field[o].data),this._field[o].data=s.mallocFloat(this._field[2].size)),this._field[o]=f(this._field[o].data,[a[0]+2,a[1]+2]);if(e.coords){var l=e.coords;if(!Array.isArray(l)||3!==l.length)throw new Error("gl-surface: invalid coordinates for x/y");for(o=0;o<2;++o){var c=l[o];for(v=0;v<2;++v)if(c.shape[v]!==a[v])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[o],c)}}else if(e.ticks){var u=e.ticks;if(!Array.isArray(u)||2!==u.length)throw new Error("gl-surface: invalid ticks");for(o=0;o<2;++o){var h=u[o];if((Array.isArray(h)||h.length)&&(h=f(h)),h.shape[0]!==a[o])throw new Error("gl-surface: invalid tick length");var p=f(h.data,a);p.stride[o]=h.stride[0],p.stride[1^o]=0,this.padField(this._field[o],p)}}else{for(o=0;o<2;++o){var m=[0,0];m[o]=1,this._field[o]=f(this._field[o].data,[a[0]+2,a[1]+2],m,0)}this._field[0].set(0,0,0);for(var v=0;v<a[0];++v)this._field[0].set(v+1,0,v);for(this._field[0].set(a[0]+1,0,a[0]-1),this._field[1].set(0,0,0),v=0;v<a[1];++v)this._field[1].set(0,v+1,v);this._field[1].set(0,a[1]+1,a[1]-1)}var y=this._field,b=f(s.mallocFloat(3*y[2].size*2),[3,a[0]+2,a[1]+2,2]);for(o=0;o<3;++o)g(b.pick(o),y[o],"mirror");var x=f(s.mallocFloat(3*y[2].size),[a[0]+2,a[1]+2,3]);for(o=0;o<a[0]+2;++o)for(v=0;v<a[1]+2;++v){var _=b.get(0,o,v,0),w=b.get(0,o,v,1),A=b.get(1,o,v,0),E=b.get(1,o,v,1),T=b.get(2,o,v,0),M=b.get(2,o,v,1),S=A*M-E*T,C=T*w-M*_,O=_*E-w*A,R=Math.sqrt(S*S+C*C+O*O);R<1e-8?(R=Math.max(Math.abs(S),Math.abs(C),Math.abs(O)))<1e-8?(O=1,C=S=0,R=1):R=1/R:R=1/Math.sqrt(R),x.set(o,v,0,S*R),x.set(o,v,1,C*R),x.set(o,v,2,O*R)}s.free(b.data);var N=[1/0,1/0,1/0],L=[-1/0,-1/0,-1/0],D=1/0,P=-1/0,I=(a[0]-1)*(a[1]-1)*6,F=s.mallocFloat(r.nextPow2(10*I)),j=0,U=0;for(o=0;o<a[0]-1;++o)e:for(v=0;v<a[1]-1;++v){for(var $=0;$<2;++$)for(var q=0;q<2;++q)for(var H=0;H<3;++H){var V=this._field[H].get(1+o+$,1+v+q);if(isNaN(V)||!isFinite(V))continue e}for(H=0;H<6;++H){var W=o+k[H][0],G=v+k[H][1],Y=this._field[0].get(W+1,G+1),X=this._field[1].get(W+1,G+1);V=this._field[2].get(W+1,G+1),S=x.get(W+1,G+1,0),C=x.get(W+1,G+1,1),O=x.get(W+1,G+1,2),e.intensity&&(K=e.intensity.get(W,G));var K=e.intensity?e.intensity.get(W,G):V+this.objectOffset[2];F[j++]=W,F[j++]=G,F[j++]=Y,F[j++]=X,F[j++]=V,F[j++]=0,F[j++]=K,F[j++]=S,F[j++]=C,F[j++]=O,N[0]=Math.min(N[0],Y+this.objectOffset[0]),N[1]=Math.min(N[1],X+this.objectOffset[1]),N[2]=Math.min(N[2],V+this.objectOffset[2]),D=Math.min(D,K),L[0]=Math.max(L[0],Y+this.objectOffset[0]),L[1]=Math.max(L[1],X+this.objectOffset[1]),L[2]=Math.max(L[2],V+this.objectOffset[2]),P=Math.max(P,K),U+=1}}for(e.intensityBounds&&(D=+e.intensityBounds[0],P=+e.intensityBounds[1]),o=6;o<j;o+=10)F[o]=(F[o]-D)/(P-D);this._vertexCount=U,this._coordinateBuffer.update(F.subarray(0,j)),s.freeFloat(F),s.free(x.data),this.bounds=[N,L],this.intensity=e.intensity||this._field[2],this.intensityBounds[0]===D&&this.intensityBounds[1]===P||(n=!0),this.intensityBounds=[D,P]}if("levels"in e){var Z=e.levels;for(Z=Array.isArray(Z[0])?Z.slice():[[],[],Z],o=0;o<3;++o)Z[o]=Z[o].slice(),Z[o].sort((function(e,t){return e-t}));for(o=0;o<3;++o)for(v=0;v<Z[o].length;++v)Z[o][v]-=this.objectOffset[o];e:for(o=0;o<3;++o){if(Z[o].length!==this.contourLevels[o].length){n=!0;break}for(v=0;v<Z[o].length;++v)if(Z[o][v]!==this.contourLevels[o][v]){n=!0;break e}}this.contourLevels=Z}if(n){y=this._field,a=this.shape;for(var J=[],Q=0;Q<3;++Q){var ee=this.contourLevels[Q],te=[],ne=[],re=[0,0,0];for(o=0;o<ee.length;++o){var ie=d(this._field[Q],ee[o]);te.push(J.length/5|0),U=0;e:for(v=0;v<ie.cells.length;++v){var ae=ie.cells[v];for(H=0;H<2;++H){var oe=ie.positions[ae[H]],se=oe[0],le=0|Math.floor(se),ce=se-le,ue=oe[1],fe=0|Math.floor(ue),de=ue-fe,he=!1;t:for(var pe=0;pe<3;++pe){re[pe]=0;var me=(Q+pe+1)%3;for($=0;$<2;++$){var ge=$?ce:1-ce;for(W=0|Math.min(Math.max(le+$,0),a[0]),q=0;q<2;++q){var ve=q?de:1-de;if(G=0|Math.min(Math.max(fe+q,0),a[1]),V=pe<2?this._field[me].get(W,G):(this.intensity.get(W,G)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(V)||isNaN(V)){he=!0;break t}var ye=ge*ve;re[pe]+=ye*V}}}if(he){if(H>0){for(var be=0;be<5;++be)J.pop();U-=1}continue e}J.push(re[0],re[1],oe[0],oe[1],re[2]),U+=1}}ne.push(U)}this._contourOffsets[Q]=te,this._contourCounts[Q]=ne}var xe=s.mallocFloat(J.length);for(o=0;o<J.length;++o)xe[o]=J[o];this._contourBuffer.update(xe),s.freeFloat(xe)}},C.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var e=0;e<3;++e)s.freeFloat(this._field[e].data)},C.highlight=function(e){var t,n;if(!e)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(t=0;t<3;++t)this.enableHighlight[t]?this.highlightLevel[t]=e.level[t]:this.highlightLevel[t]=-1;for(n=this.snapToData?e.dataCoordinate:e.position,t=0;t<3;++t)n[t]-=this.objectOffset[t];if(this.enableDynamic[0]&&n[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&n[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&n[2]!==this.dynamicLevel[2]){for(var r=0,i=this.shape,a=s.mallocFloat(12*i[0]*i[1]),o=0;o<3;++o)if(this.enableDynamic[o]){this.dynamicLevel[o]=n[o];var l=(o+1)%3,c=(o+2)%3,u=this._field[o],f=this._field[l],h=this._field[c],p=d(u,n[o]),m=p.cells,g=p.positions;for(this._dynamicOffsets[o]=r,t=0;t<m.length;++t)for(var v=m[t],y=0;y<2;++y){var b=g[v[y]],x=+b[0],_=0|x,w=0|Math.min(_+1,i[0]),A=x-_,k=1-A,E=+b[1],T=0|E,M=0|Math.min(T+1,i[1]),S=E-T,C=1-S,O=k*C,R=k*S,N=A*C,L=A*S,D=O*f.get(_,T)+R*f.get(_,M)+N*f.get(w,T)+L*f.get(w,M),P=O*h.get(_,T)+R*h.get(_,M)+N*h.get(w,T)+L*h.get(w,M);if(isNaN(D)||isNaN(P)){y&&(r-=1);break}a[2*r+0]=D,a[2*r+1]=P,r+=1}this._dynamicCounts[o]=r-this._dynamicOffsets[o]}else this.dynamicLevel[o]=NaN,this._dynamicCounts[o]=0;this._dynamicBuffer.update(a.subarray(0,2*r)),s.freeFloat(a)}}},7766:function(e,t,n){"use strict";var r=n(9618),i=n(5298),a=n(1888);e.exports=function(e){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");o||function(e){o=[e.LINEAR,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_NEAREST],s=[e.NEAREST,e.LINEAR,e.NEAREST_MIPMAP_NEAREST,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_LINEAR],l=[e.REPEAT,e.CLAMP_TO_EDGE,e.MIRRORED_REPEAT]}(e);if("number"==typeof arguments[1])return g(e,arguments[1],arguments[2],arguments[3]||e.RGBA,arguments[4]||e.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return g(e,0|arguments[1][0],0|arguments[1][1],arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var t=arguments[1],n=c(t)?t:t.raw;if(n)return function(e,t,n,r,i,a){var o=m(e);return e.texImage2D(e.TEXTURE_2D,0,i,i,a,t),new d(e,o,n,r,i,a)}(e,n,0|t.width,0|t.height,arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE);if(t.shape&&t.data&&t.stride)return function(e,t){var n=t.dtype,o=t.shape.slice(),s=e.getParameter(e.MAX_TEXTURE_SIZE);if(o[0]<0||o[0]>s||o[1]<0||o[1]>s)throw new Error("gl-texture2d: Invalid texture size");var l=p(o,t.stride.slice()),c=0;"float32"===n?c=e.FLOAT:"float64"===n?(c=e.FLOAT,l=!1,n="float32"):"uint8"===n?c=e.UNSIGNED_BYTE:(c=e.UNSIGNED_BYTE,l=!1,n="uint8");var f,h,g=0;if(2===o.length)g=e.LUMINANCE,o=[o[0],o[1],1],t=r(t.data,o,[t.stride[0],t.stride[1],1],t.offset);else{if(3!==o.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===o[2])g=e.ALPHA;else if(2===o[2])g=e.LUMINANCE_ALPHA;else if(3===o[2])g=e.RGB;else{if(4!==o[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");g=e.RGBA}}c!==e.FLOAT||e.getExtension("OES_texture_float")||(c=e.UNSIGNED_BYTE,l=!1);var v=t.size;if(l)f=0===t.offset&&t.data.length===v?t.data:t.data.subarray(t.offset,t.offset+v);else{var y=[o[2],o[2]*o[0],1];h=a.malloc(v,n);var b=r(h,o,y,0);"float32"!==n&&"float64"!==n||c!==e.UNSIGNED_BYTE?i.assign(b,t):u(b,t),f=h.subarray(0,v)}var x=m(e);e.texImage2D(e.TEXTURE_2D,0,g,o[0],o[1],0,g,c,f),l||a.free(h);return new d(e,x,o[0],o[1],g,c)}(e,t)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var o=null,s=null,l=null;function c(e){return"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&e instanceof ImageData}var u=function(e,t){i.muls(e,t,255)};function f(e,t,n){var r=e.gl,i=r.getParameter(r.MAX_TEXTURE_SIZE);if(t<0||t>i||n<0||n>i)throw new Error("gl-texture2d: Invalid texture size");return e._shape=[t,n],e.bind(),r.texImage2D(r.TEXTURE_2D,0,e.format,t,n,0,e.format,e.type,null),e._mipLevels=[0],e}function d(e,t,n,r,i,a){this.gl=e,this.handle=t,this.format=i,this.type=a,this._shape=[n,r],this._mipLevels=[0],this._magFilter=e.NEAREST,this._minFilter=e.NEAREST,this._wrapS=e.CLAMP_TO_EDGE,this._wrapT=e.CLAMP_TO_EDGE,this._anisoSamples=1;var o=this,s=[this._wrapS,this._wrapT];Object.defineProperties(s,[{get:function(){return o._wrapS},set:function(e){return o.wrapS=e}},{get:function(){return o._wrapT},set:function(e){return o.wrapT=e}}]),this._wrapVector=s;var l=[this._shape[0],this._shape[1]];Object.defineProperties(l,[{get:function(){return o._shape[0]},set:function(e){return o.width=e}},{get:function(){return o._shape[1]},set:function(e){return o.height=e}}]),this._shapeVector=l}var h=d.prototype;function p(e,t){return 3===e.length?1===t[2]&&t[1]===e[0]*e[2]&&t[0]===e[2]:1===t[0]&&t[1]===e[0]}function m(e){var t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t}function g(e,t,n,r,i){var a=e.getParameter(e.MAX_TEXTURE_SIZE);if(t<0||t>a||n<0||n>a)throw new Error("gl-texture2d: Invalid texture shape");if(i===e.FLOAT&&!e.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var o=m(e);return e.texImage2D(e.TEXTURE_2D,0,r,t,n,0,r,i,null),new d(e,o,t,n,r,i)}Object.defineProperties(h,{minFilter:{get:function(){return this._minFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&o.indexOf(e)>=0&&(t.getExtension("OES_texture_float_linear")||(e=t.NEAREST)),s.indexOf(e)<0)throw new Error("gl-texture2d: Unknown filter mode "+e);return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e),this._minFilter=e}},magFilter:{get:function(){return this._magFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&o.indexOf(e)>=0&&(t.getExtension("OES_texture_float_linear")||(e=t.NEAREST)),s.indexOf(e)<0)throw new Error("gl-texture2d: Unknown filter mode "+e);return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e),this._magFilter=e}},mipSamples:{get:function(){return this._anisoSamples},set:function(e){var t=this._anisoSamples;if(this._anisoSamples=0|Math.max(e,1),t!==this._anisoSamples){var n=this.gl.getExtension("EXT_texture_filter_anisotropic");n&&this.gl.texParameterf(this.gl.TEXTURE_2D,n.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(e){if(this.bind(),l.indexOf(e)<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,e),this._wrapS=e}},wrapT:{get:function(){return this._wrapT},set:function(e){if(this.bind(),l.indexOf(e)<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,e),this._wrapT=e}},wrap:{get:function(){return this._wrapVector},set:function(e){if(Array.isArray(e)||(e=[e,e]),2!==e.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var t=0;t<2;++t)if(l.indexOf(e[t])<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);this._wrapS=e[0],this._wrapT=e[1];var n=this.gl;return this.bind(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,this._wrapS),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,this._wrapT),e}},shape:{get:function(){return this._shapeVector},set:function(e){if(Array.isArray(e)){if(2!==e.length)throw new Error("gl-texture2d: Invalid texture shape")}else e=[0|e,0|e];return f(this,0|e[0],0|e[1]),[0|e[0],0|e[1]]}},width:{get:function(){return this._shape[0]},set:function(e){return f(this,e|=0,this._shape[1]),e}},height:{get:function(){return this._shape[1]},set:function(e){return e|=0,f(this,this._shape[0],e),e}}}),h.bind=function(e){var t=this.gl;return void 0!==e&&t.activeTexture(t.TEXTURE0+(0|e)),t.bindTexture(t.TEXTURE_2D,this.handle),void 0!==e?0|e:t.getParameter(t.ACTIVE_TEXTURE)-t.TEXTURE0},h.dispose=function(){this.gl.deleteTexture(this.handle)},h.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var e=Math.min(this._shape[0],this._shape[1]),t=0;e>0;++t,e>>>=1)this._mipLevels.indexOf(t)<0&&this._mipLevels.push(t)},h.setPixels=function(e,t,n,o){var s=this.gl;this.bind(),Array.isArray(t)?(o=n,n=0|t[1],t=0|t[0]):(t=t||0,n=n||0),o=o||0;var l=c(e)?e:e.raw;if(l){this._mipLevels.indexOf(o)<0?(s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,this.type,l),this._mipLevels.push(o)):s.texSubImage2D(s.TEXTURE_2D,o,t,n,this.format,this.type,l)}else{if(!(e.shape&&e.stride&&e.data))throw new Error("gl-texture2d: Unsupported data type");if(e.shape.length<2||t+e.shape[1]>this._shape[1]>>>o||n+e.shape[0]>this._shape[0]>>>o||t<0||n<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(e,t,n,o,s,l,c,f){var d=f.dtype,h=f.shape.slice();if(h.length<2||h.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var m=0,g=0,v=p(h,f.stride.slice());"float32"===d?m=e.FLOAT:"float64"===d?(m=e.FLOAT,v=!1,d="float32"):"uint8"===d?m=e.UNSIGNED_BYTE:(m=e.UNSIGNED_BYTE,v=!1,d="uint8");if(2===h.length)g=e.LUMINANCE,h=[h[0],h[1],1],f=r(f.data,h,[f.stride[0],f.stride[1],1],f.offset);else{if(3!==h.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===h[2])g=e.ALPHA;else if(2===h[2])g=e.LUMINANCE_ALPHA;else if(3===h[2])g=e.RGB;else{if(4!==h[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");g=e.RGBA}h[2]}g!==e.LUMINANCE&&g!==e.ALPHA||s!==e.LUMINANCE&&s!==e.ALPHA||(g=s);if(g!==s)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var y=f.size,b=c.indexOf(o)<0;b&&c.push(o);if(m===l&&v)0===f.offset&&f.data.length===y?b?e.texImage2D(e.TEXTURE_2D,o,s,h[0],h[1],0,s,l,f.data):e.texSubImage2D(e.TEXTURE_2D,o,t,n,h[0],h[1],s,l,f.data):b?e.texImage2D(e.TEXTURE_2D,o,s,h[0],h[1],0,s,l,f.data.subarray(f.offset,f.offset+y)):e.texSubImage2D(e.TEXTURE_2D,o,t,n,h[0],h[1],s,l,f.data.subarray(f.offset,f.offset+y));else{var x;x=l===e.FLOAT?a.mallocFloat32(y):a.mallocUint8(y);var _=r(x,h,[h[2],h[2]*h[0],1]);m===e.FLOAT&&l===e.UNSIGNED_BYTE?u(_,f):i.assign(_,f),b?e.texImage2D(e.TEXTURE_2D,o,s,h[0],h[1],0,s,l,x.subarray(0,y)):e.texSubImage2D(e.TEXTURE_2D,o,t,n,h[0],h[1],s,l,x.subarray(0,y)),l===e.FLOAT?a.freeFloat32(x):a.freeUint8(x)}}(s,t,n,o,this.format,this.type,this._mipLevels,e)}}},1433:function(e){"use strict";e.exports=function(e,t,n){t?t.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);var r=0|e.getParameter(e.MAX_VERTEX_ATTRIBS);if(n){if(n.length>r)throw new Error("gl-vao: Too many vertex attributes");for(var i=0;i<n.length;++i){var a=n[i];if(a.buffer){var o=a.buffer,s=a.size||4,l=a.type||e.FLOAT,c=!!a.normalized,u=a.stride||0,f=a.offset||0;o.bind(),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,s,l,c,u,f)}else{if("number"==typeof a)e.vertexAttrib1f(i,a);else if(1===a.length)e.vertexAttrib1f(i,a[0]);else if(2===a.length)e.vertexAttrib2f(i,a[0],a[1]);else if(3===a.length)e.vertexAttrib3f(i,a[0],a[1],a[2]);else{if(4!==a.length)throw new Error("gl-vao: Invalid vertex attribute");e.vertexAttrib4f(i,a[0],a[1],a[2],a[3])}e.disableVertexAttribArray(i)}}for(;i<r;++i)e.disableVertexAttribArray(i)}else{e.bindBuffer(e.ARRAY_BUFFER,null);for(i=0;i<r;++i)e.disableVertexAttribArray(i)}}},870:function(e,t,n){"use strict";var r=n(1433);function i(e){this.gl=e,this._elements=null,this._attributes=null,this._elementsType=e.UNSIGNED_SHORT}i.prototype.bind=function(){r(this.gl,this._elements,this._attributes)},i.prototype.update=function(e,t,n){this._elements=t,this._attributes=e,this._elementsType=n||this.gl.UNSIGNED_SHORT},i.prototype.dispose=function(){},i.prototype.unbind=function(){},i.prototype.draw=function(e,t,n){n=n||0;var r=this.gl;this._elements?r.drawElements(e,t,this._elementsType,n):r.drawArrays(e,n,t)},e.exports=function(e){return new i(e)}},7518:function(e,t,n){"use strict";var r=n(1433);function i(e,t,n,r,i,a){this.location=e,this.dimension=t,this.a=n,this.b=r,this.c=i,this.d=a}function a(e,t,n){this.gl=e,this._ext=t,this.handle=n,this._attribs=[],this._useElements=!1,this._elementsType=e.UNSIGNED_SHORT}i.prototype.bind=function(e){switch(this.dimension){case 1:e.vertexAttrib1f(this.location,this.a);break;case 2:e.vertexAttrib2f(this.location,this.a,this.b);break;case 3:e.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:e.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},a.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var e=0;e<this._attribs.length;++e)this._attribs[e].bind(this.gl)},a.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},a.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},a.prototype.update=function(e,t,n){if(this.bind(),r(this.gl,t,e),this.unbind(),this._attribs.length=0,e)for(var a=0;a<e.length;++a){var o=e[a];"number"==typeof o?this._attribs.push(new i(a,1,o)):Array.isArray(o)&&this._attribs.push(new i(a,o.length,o[0],o[1],o[2],o[3]))}this._useElements=!!t,this._elementsType=n||this.gl.UNSIGNED_SHORT},a.prototype.draw=function(e,t,n){n=n||0;var r=this.gl;this._useElements?r.drawElements(e,t,this._elementsType,n):r.drawArrays(e,n,t)},e.exports=function(e,t){return new a(e,t,t.createVertexArrayOES())}},8116:function(e,t,n){"use strict";var r=n(7518),i=n(870);function a(e){this.bindVertexArrayOES=e.bindVertexArray.bind(e),this.createVertexArrayOES=e.createVertexArray.bind(e),this.deleteVertexArrayOES=e.deleteVertexArray.bind(e)}e.exports=function(e,t,n,o){var s,l=e.createVertexArray?new a(e):e.getExtension("OES_vertex_array_object");return(s=l?r(e,l):i(e)).update(t,n,o),s}},5632:function(e){e.exports=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}},8192:function(e,t,n){e.exports=function(e,t){var n=r(e[0],e[1],e[2]),o=r(t[0],t[1],t[2]);i(n,n),i(o,o);var s=a(n,o);return s>1?0:Math.acos(s)};var r=n(2825),i=n(3536),a=n(244)},9226:function(e){e.exports=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}},3126:function(e){e.exports=function(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}},3990:function(e){e.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}},1091:function(e){e.exports=function(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}},5911:function(e){e.exports=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],l=n[2];return e[0]=i*l-a*s,e[1]=a*o-r*l,e[2]=r*s-i*o,e}},5455:function(e,t,n){e.exports=n(7056)},7056:function(e){e.exports=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}},4008:function(e,t,n){e.exports=n(6690)},6690:function(e){e.exports=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}},244:function(e){e.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}},2613:function(e){e.exports=1e-6},9922:function(e,t,n){e.exports=function(e,t){var n=e[0],i=e[1],a=e[2],o=t[0],s=t[1],l=t[2];return Math.abs(n-o)<=r*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-s)<=r*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(a-l)<=r*Math.max(1,Math.abs(a),Math.abs(l))};var r=n(2613)},9265:function(e){e.exports=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}},2681:function(e){e.exports=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}},5137:function(e,t,n){e.exports=function(e,t,n,i,a,o){var s,l;t||(t=3);n||(n=0);l=i?Math.min(i*t+n,e.length):e.length;for(s=n;s<l;s+=t)r[0]=e[s],r[1]=e[s+1],r[2]=e[s+2],a(r,r,o),e[s]=r[0],e[s+1]=r[1],e[s+2]=r[2];return e};var r=n(1091)()},2825:function(e){e.exports=function(e,t,n){var r=new Float32Array(3);return r[0]=e,r[1]=t,r[2]=n,r}},2931:function(e,t,n){e.exports={EPSILON:n(2613),create:n(1091),clone:n(3126),angle:n(8192),fromValues:n(2825),copy:n(3990),set:n(1463),equals:n(9922),exactEquals:n(9265),add:n(5632),subtract:n(6843),sub:n(2229),multiply:n(5847),mul:n(4505),divide:n(6690),div:n(4008),min:n(8107),max:n(7417),floor:n(2681),ceil:n(9226),round:n(2447),scale:n(6621),scaleAndAdd:n(8489),distance:n(7056),dist:n(5455),squaredDistance:n(2953),sqrDist:n(6141),length:n(1387),len:n(868),squaredLength:n(3066),sqrLen:n(5486),negate:n(5093),inverse:n(811),normalize:n(3536),dot:n(244),cross:n(5911),lerp:n(6658),random:n(7636),transformMat4:n(5673),transformMat3:n(492),transformQuat:n(264),rotateX:n(6894),rotateY:n(109),rotateZ:n(8692),forEach:n(5137)}},811:function(e){e.exports=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}},868:function(e,t,n){e.exports=n(1387)},1387:function(e){e.exports=function(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}},6658:function(e){e.exports=function(e,t,n,r){var i=t[0],a=t[1],o=t[2];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=o+r*(n[2]-o),e}},7417:function(e){e.exports=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}},8107:function(e){e.exports=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}},4505:function(e,t,n){e.exports=n(5847)},5847:function(e){e.exports=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}},5093:function(e){e.exports=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}},3536:function(e){e.exports=function(e,t){var n=t[0],r=t[1],i=t[2],a=n*n+r*r+i*i;a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a);return e}},7636:function(e){e.exports=function(e,t){t=t||1;var n=2*Math.random()*Math.PI,r=2*Math.random()-1,i=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=r*t,e}},6894:function(e){e.exports=function(e,t,n,r){var i=n[1],a=n[2],o=t[1]-i,s=t[2]-a,l=Math.sin(r),c=Math.cos(r);return e[0]=t[0],e[1]=i+o*c-s*l,e[2]=a+o*l+s*c,e}},109:function(e){e.exports=function(e,t,n,r){var i=n[0],a=n[2],o=t[0]-i,s=t[2]-a,l=Math.sin(r),c=Math.cos(r);return e[0]=i+s*l+o*c,e[1]=t[1],e[2]=a+s*c-o*l,e}},8692:function(e){e.exports=function(e,t,n,r){var i=n[0],a=n[1],o=t[0]-i,s=t[1]-a,l=Math.sin(r),c=Math.cos(r);return e[0]=i+o*c-s*l,e[1]=a+o*l+s*c,e[2]=t[2],e}},2447:function(e){e.exports=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}},6621:function(e){e.exports=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}},8489:function(e){e.exports=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}},1463:function(e){e.exports=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}},6141:function(e,t,n){e.exports=n(2953)},5486:function(e,t,n){e.exports=n(3066)},2953:function(e){e.exports=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}},3066:function(e){e.exports=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}},2229:function(e,t,n){e.exports=n(6843)},6843:function(e){e.exports=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}},492:function(e){e.exports=function(e,t,n){var r=t[0],i=t[1],a=t[2];return e[0]=r*n[0]+i*n[3]+a*n[6],e[1]=r*n[1]+i*n[4]+a*n[7],e[2]=r*n[2]+i*n[5]+a*n[8],e}},5673:function(e){e.exports=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];return o=o||1,e[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/o,e[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o,e[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o,e}},264:function(e){e.exports=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],l=n[2],c=n[3],u=c*r+s*a-l*i,f=c*i+l*r-o*a,d=c*a+o*i-s*r,h=-o*r-s*i-l*a;return e[0]=u*c+h*-o+f*-l-d*-s,e[1]=f*c+h*-s+d*-o-u*-l,e[2]=d*c+h*-l+u*-s-f*-o,e}},4361:function(e){e.exports=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}},2335:function(e){e.exports=function(e){var t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}},2933:function(e){e.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}},7536:function(e){e.exports=function(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}},4691:function(e){e.exports=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+a*a)}},1373:function(e){e.exports=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}},3750:function(e){e.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}},3390:function(e){e.exports=function(e,t,n,r){var i=new Float32Array(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}},9970:function(e,t,n){e.exports={create:n(7536),clone:n(2335),fromValues:n(3390),copy:n(2933),set:n(4578),add:n(4361),subtract:n(6860),multiply:n(3576),divide:n(1373),min:n(2334),max:n(160),scale:n(9288),scaleAndAdd:n(4844),distance:n(4691),squaredDistance:n(7960),length:n(6808),squaredLength:n(483),negate:n(1498),inverse:n(4494),normalize:n(5177),dot:n(3750),lerp:n(2573),random:n(9131),transformMat4:n(5352),transformQuat:n(4041)}},4494:function(e){e.exports=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}},6808:function(e){e.exports=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)}},2573:function(e){e.exports=function(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=t[3];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=o+r*(n[2]-o),e[3]=s+r*(n[3]-s),e}},160:function(e){e.exports=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e}},2334:function(e){e.exports=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e}},3576:function(e){e.exports=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}},1498:function(e){e.exports=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}},5177:function(e){e.exports=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*n+r*r+i*i+a*a;o>0&&(o=1/Math.sqrt(o),e[0]=n*o,e[1]=r*o,e[2]=i*o,e[3]=a*o);return e}},9131:function(e,t,n){var r=n(5177),i=n(9288);e.exports=function(e,t){return t=t||1,e[0]=Math.random(),e[1]=Math.random(),e[2]=Math.random(),e[3]=Math.random(),r(e,e),i(e,e,t),e}},9288:function(e){e.exports=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}},4844:function(e){e.exports=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e}},4578:function(e){e.exports=function(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}},7960:function(e){e.exports=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return n*n+r*r+i*i+a*a}},483:function(e){e.exports=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i}},6860:function(e){e.exports=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}},5352:function(e){e.exports=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e}},4041:function(e){e.exports=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],l=n[2],c=n[3],u=c*r+s*a-l*i,f=c*i+l*r-o*a,d=c*a+o*i-s*r,h=-o*r-s*i-l*a;return e[0]=u*c+h*-o+f*-l-d*-s,e[1]=f*c+h*-s+d*-o-u*-l,e[2]=d*c+h*-l+u*-s-f*-o,e[3]=t[3],e}},1848:function(e,t,n){var r=n(4905),i=n(6468);e.exports=function(e){for(var t=Array.isArray(e)?e:r(e),n=0;n<t.length;n++){var a=t[n];if("preprocessor"===a.type){var o=a.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(o&&o[2]){var s=o[1],l=o[2];return(s?i(l):l).trim()}}}}},5874:function(e,t,n){e.exports=function(e){var t,n,A,k=0,E=0,T=l,M=[],S=[],C=1,O=0,R=0,N=!1,L=!1,D="",P=a,I=r;"300 es"===(e=e||{}).version&&(P=s,I=o);var F={},z={};for(k=0;k<P.length;k++)F[P[k]]=!0;for(k=0;k<I.length;k++)z[I[k]]=!0;return function(e){return S=[],null!==e?function(e){k=0,e.toString&&(e=e.toString());var n;D+=e.replace(/\r\n/g,"\n"),A=D.length;for(;t=D[k],k<A;){switch(n=k,T){case u:k=H();break;case f:k=q();break;case d:k=$();break;case h:k=V();break;case p:k=Y();break;case _:k=G();break;case m:k=X();break;case c:k=K();break;case b:k=U();break;case l:k=B()}if(n!==k)if("\n"===D[n])O=0,++C;else++O}return E+=k,D=D.slice(k),S}(e):function(){M.length&&j(M.join(""));return T=x,j("(eof)"),S}()};function j(e){e.length&&S.push({type:w[T],data:e,position:R,line:C,column:O})}function B(){return M=M.length?[]:M,"/"===n&&"*"===t?(R=E+k-1,T=u,n=t,k+1):"/"===n&&"/"===t?(R=E+k-1,T=f,n=t,k+1):"#"===t?(T=d,R=E+k,k):/\s/.test(t)?(T=b,R=E+k,k):(N=/\d/.test(t),L=/[^\w_]/.test(t),R=E+k,T=N?p:L?h:c,k)}function U(){return/[^\s]/g.test(t)?(j(M.join("")),T=l,k):(M.push(t),n=t,k+1)}function $(){return"\r"!==t&&"\n"!==t||"\\"===n?(M.push(t),n=t,k+1):(j(M.join("")),T=l,k)}function q(){return $()}function H(){return"/"===t&&"*"===n?(M.push(t),j(M.join("")),T=l,k+1):(M.push(t),n=t,k+1)}function V(){if("."===n&&/\d/.test(t))return T=m,k;if("/"===n&&"*"===t)return T=u,k;if("/"===n&&"/"===t)return T=f,k;if("."===t&&M.length){for(;W(M););return T=m,k}if(";"===t||")"===t||"("===t){if(M.length)for(;W(M););return j(t),T=l,k+1}var e=2===M.length&&"="!==t;if(/[\w_\d\s]/.test(t)||e){for(;W(M););return T=l,k}return M.push(t),n=t,k+1}function W(e){for(var t,n,r=0;;){if(t=i.indexOf(e.slice(0,e.length+r).join("")),n=i[t],-1===t){if(r--+e.length>0)continue;n=e.slice(0,1).join("")}return j(n),R+=n.length,(M=M.slice(n.length)).length}}function G(){return/[^a-fA-F0-9]/.test(t)?(j(M.join("")),T=l,k):(M.push(t),n=t,k+1)}function Y(){return"."===t||/[eE]/.test(t)?(M.push(t),T=m,n=t,k+1):"x"===t&&1===M.length&&"0"===M[0]?(T=_,M.push(t),n=t,k+1):/[^\d]/.test(t)?(j(M.join("")),T=l,k):(M.push(t),n=t,k+1)}function X(){return"f"===t&&(M.push(t),n=t,k+=1),/[eE]/.test(t)?(M.push(t),n=t,k+1):("-"!==t&&"+"!==t||!/[eE]/.test(n))&&/[^\d]/.test(t)?(j(M.join("")),T=l,k):(M.push(t),n=t,k+1)}function K(){if(/[^\d\w_]/.test(t)){var e=M.join("");return T=z[e]?y:F[e]?v:g,j(M.join("")),T=l,k}return M.push(t),n=t,k+1}};var r=n(620),i=n(7827),a=n(6852),o=n(7932),s=n(3508),l=999,c=9999,u=0,f=1,d=2,h=3,p=4,m=5,g=6,v=7,y=8,b=9,x=10,_=11,w=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3508:function(e,t,n){var r=n(6852);r=r.slice().filter((function(e){return!/^(gl\_|texture)/.test(e)})),e.exports=r.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},6852:function(e){e.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},7932:function(e,t,n){var r=n(620);e.exports=r.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},620:function(e){e.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},7827:function(e){e.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},4905:function(e,t,n){var r=n(5874);e.exports=function(e,t){var n=r(t),i=[];return i=(i=i.concat(n(e))).concat(n(null))}},3236:function(e){e.exports=function(e){"string"==typeof e&&(e=[e]);for(var t=[].slice.call(arguments,1),n=[],r=0;r<e.length-1;r++)n.push(e[r],t[r]||"");return n.push(e[r]),n.join("")}},7520:function(e,t,n){"use strict";var r=n(9507);e.exports=r&&function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(t){e=!1}return e}()},3778:function(e,t){t.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,f=n?i-1:0,d=n?-1:1,h=e[t+f];for(f+=d,a=h&(1<<-u)-1,h>>=-u,u+=s;u>0;a=256*a+e[t+f],f+=d,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=r;u>0;o=256*o+e[t+f],f+=d,u-=8);if(0===a)a=1-c;else{if(a===l)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),a-=c}return(h?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var o,s,l,c=8*a-i-1,u=(1<<c)-1,f=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+f>=1?d/l:d*Math.pow(2,1-f))*l>=2&&(o++,l/=2),o+f>=u?(s=0,o=u):o+f>=1?(s=(t*l-1)*Math.pow(2,i),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;e[n+h]=255&o,h+=p,o/=256,c-=8);e[n+h-p]|=128*m}},8954:function(e,t,n){"use strict";e.exports=function(e,t){var n=e.length;if(0===n)throw new Error("Must have at least d+1 points");var i=e[0].length;if(n<=i)throw new Error("Must input at least d+1 points");var o=e.slice(0,i+1),s=r.apply(void 0,o);if(0===s)throw new Error("Input not in general position");for(var l=new Array(i+1),u=0;u<=i;++u)l[u]=u;s<0&&(l[0]=1,l[1]=0);var f=new a(l,new Array(i+1),!1),d=f.adjacent,h=new Array(i+2);for(u=0;u<=i;++u){for(var p=l.slice(),m=0;m<=i;++m)m===u&&(p[m]=-1);var g=p[0];p[0]=p[1],p[1]=g;var v=new a(p,new Array(i+1),!0);d[u]=v,h[u]=v}h[i+1]=f;for(u=0;u<=i;++u){p=d[u].vertices;var y=d[u].adjacent;for(m=0;m<=i;++m){var b=p[m];if(b<0)y[m]=f;else for(var x=0;x<=i;++x)d[x].vertices.indexOf(b)<0&&(y[m]=d[x])}}var _=new c(i,o,h),w=!!t;for(u=i+1;u<n;++u)_.insert(e[u],w);return _.boundary()};var r=n(3250),i=n(6803).Fw;function a(e,t,n){this.vertices=e,this.adjacent=t,this.boundary=n,this.lastVisited=-1}function o(e,t,n){this.vertices=e,this.cell=t,this.index=n}function s(e,t){return i(e.vertices,t.vertices)}a.prototype.flip=function(){var e=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=e;var t=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=t};var l=[];function c(e,t,n){this.dimension=e,this.vertices=t,this.simplices=n,this.interior=n.filter((function(e){return!e.boundary})),this.tuple=new Array(e+1);for(var i=0;i<=e;++i)this.tuple[i]=this.vertices[i];var a,o=l[e];o||(o=l[e]=((a=r[e+1])||(a=r),function(e){return function(){var t=this.tuple;return e.apply(this,t)}}(a))),this.orient=o}var u=c.prototype;u.handleBoundaryDegeneracy=function(e,t){var n=this.dimension,r=this.vertices.length-1,i=this.tuple,a=this.vertices,o=[e];for(e.lastVisited=-r;o.length>0;)for(var s=(e=o.pop()).adjacent,l=0;l<=n;++l){var c=s[l];if(c.boundary&&!(c.lastVisited<=-r)){for(var u=c.vertices,f=0;f<=n;++f){var d=u[f];i[f]=d<0?t:a[d]}var h=this.orient();if(h>0)return c;c.lastVisited=-r,0===h&&o.push(c)}}return null},u.walk=function(e,t){var n=this.vertices.length-1,r=this.dimension,i=this.vertices,a=this.tuple,o=t?this.interior.length*Math.random()|0:this.interior.length-1,s=this.interior[o];e:for(;!s.boundary;){for(var l=s.vertices,c=s.adjacent,u=0;u<=r;++u)a[u]=i[l[u]];s.lastVisited=n;for(u=0;u<=r;++u){var f=c[u];if(!(f.lastVisited>=n)){var d=a[u];a[u]=e;var h=this.orient();if(a[u]=d,h<0){s=f;continue e}f.boundary?f.lastVisited=-n:f.lastVisited=n}}return}return s},u.addPeaks=function(e,t){var n=this.vertices.length-1,r=this.dimension,i=this.vertices,l=this.tuple,c=this.interior,u=this.simplices,f=[t];t.lastVisited=n,t.vertices[t.vertices.indexOf(-1)]=n,t.boundary=!1,c.push(t);for(var d=[];f.length>0;){var h=(t=f.pop()).vertices,p=t.adjacent,m=h.indexOf(n);if(!(m<0))for(var g=0;g<=r;++g)if(g!==m){var v=p[g];if(v.boundary&&!(v.lastVisited>=n)){var y=v.vertices;if(v.lastVisited!==-n){for(var b=0,x=0;x<=r;++x)y[x]<0?(b=x,l[x]=e):l[x]=i[y[x]];if(this.orient()>0){y[b]=n,v.boundary=!1,c.push(v),f.push(v),v.lastVisited=n;continue}v.lastVisited=-n}var _=v.adjacent,w=h.slice(),A=p.slice(),k=new a(w,A,!0);u.push(k);var E=_.indexOf(t);if(!(E<0)){_[E]=k,A[m]=v,w[g]=-1,A[g]=t,p[g]=k,k.flip();for(x=0;x<=r;++x){var T=w[x];if(!(T<0||T===n)){for(var M=new Array(r-1),S=0,C=0;C<=r;++C){var O=w[C];O<0||C===x||(M[S++]=O)}d.push(new o(M,k,x))}}}}}}d.sort(s);for(g=0;g+1<d.length;g+=2){var R=d[g],N=d[g+1],L=R.index,D=N.index;L<0||D<0||(R.cell.adjacent[R.index]=N.cell,N.cell.adjacent[N.index]=R.cell)}},u.insert=function(e,t){var n=this.vertices;n.push(e);var r=this.walk(e,t);if(r){for(var i=this.dimension,a=this.tuple,o=0;o<=i;++o){var s=r.vertices[o];a[o]=s<0?e:n[s]}var l=this.orient(a);l<0||(0!==l||(r=this.handleBoundaryDegeneracy(r,e)))&&this.addPeaks(e,r)}},u.boundary=function(){for(var e=this.dimension,t=[],n=this.simplices,r=n.length,i=0;i<r;++i){var a=n[i];if(a.boundary){for(var o=new Array(e),s=a.vertices,l=0,c=0,u=0;u<=e;++u)s[u]>=0?o[l++]=s[u]:c=1&u;if(c===(1&e)){var f=o[0];o[0]=o[1],o[1]=f}t.push(o)}}return t}},3352:function(e,t,n){"use strict";var r=n(2478);function i(e,t,n,r,i){this.mid=e,this.left=t,this.right=n,this.leftPoints=r,this.rightPoints=i,this.count=(t?t.count:0)+(n?n.count:0)+r.length}e.exports=function(e){if(!e||0===e.length)return new v(null);return new v(g(e))};var a=i.prototype;function o(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function s(e,t){var n=g(t);e.mid=n.mid,e.left=n.left,e.right=n.right,e.leftPoints=n.leftPoints,e.rightPoints=n.rightPoints,e.count=n.count}function l(e,t){var n=e.intervals([]);n.push(t),s(e,n)}function c(e,t){var n=e.intervals([]),r=n.indexOf(t);return r<0?0:(n.splice(r,1),s(e,n),1)}function u(e,t,n){for(var r=0;r<e.length&&e[r][0]<=t;++r){var i=n(e[r]);if(i)return i}}function f(e,t,n){for(var r=e.length-1;r>=0&&e[r][1]>=t;--r){var i=n(e[r]);if(i)return i}}function d(e,t){for(var n=0;n<e.length;++n){var r=t(e[n]);if(r)return r}}function h(e,t){return e-t}function p(e,t){var n=e[0]-t[0];return n||e[1]-t[1]}function m(e,t){var n=e[1]-t[1];return n||e[0]-t[0]}function g(e){if(0===e.length)return null;for(var t=[],n=0;n<e.length;++n)t.push(e[n][0],e[n][1]);t.sort(h);var r=t[t.length>>1],a=[],o=[],s=[];for(n=0;n<e.length;++n){var l=e[n];l[1]<r?a.push(l):r<l[0]?o.push(l):s.push(l)}var c=s,u=s.slice();return c.sort(p),u.sort(m),new i(r,g(a),g(o),c,u)}function v(e){this.root=e}a.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e},a.insert=function(e){var t=this.count-this.leftPoints.length;if(this.count+=1,e[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?l(this,e):this.left.insert(e):this.left=g([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?l(this,e):this.right.insert(e):this.right=g([e]);else{var n=r.ge(this.leftPoints,e,p),i=r.ge(this.rightPoints,e,m);this.leftPoints.splice(n,0,e),this.rightPoints.splice(i,0,e)}},a.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(t-1)?c(this,e):2===(s=this.left.remove(e))?(this.left=null,this.count-=1,1):(1===s&&(this.count-=1),s):0;if(e[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(t-1)?c(this,e):2===(s=this.right.remove(e))?(this.right=null,this.count-=1,1):(1===s&&(this.count-=1),s):0;if(1===this.count)return this.leftPoints[0]===e?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===e){if(this.left&&this.right){for(var n=this,i=this.left;i.right;)n=i,i=i.right;if(n===this)i.right=this.right;else{var a=this.left,s=this.right;n.count-=i.count,n.right=i.left,i.left=a,i.right=s}o(this,i),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?o(this,this.left):o(this,this.right);return 1}for(a=r.ge(this.leftPoints,e,p);a<this.leftPoints.length&&this.leftPoints[a][0]===e[0];++a)if(this.leftPoints[a]===e){this.count-=1,this.leftPoints.splice(a,1);for(s=r.ge(this.rightPoints,e,m);s<this.rightPoints.length&&this.rightPoints[s][1]===e[1];++s)if(this.rightPoints[s]===e)return this.rightPoints.splice(s,1),1}return 0},a.queryPoint=function(e,t){if(e<this.mid){if(this.left)if(n=this.left.queryPoint(e,t))return n;return u(this.leftPoints,e,t)}if(e>this.mid){var n;if(this.right)if(n=this.right.queryPoint(e,t))return n;return f(this.rightPoints,e,t)}return d(this.leftPoints,t)},a.queryInterval=function(e,t,n){var r;if(e<this.mid&&this.left&&(r=this.left.queryInterval(e,t,n)))return r;if(t>this.mid&&this.right&&(r=this.right.queryInterval(e,t,n)))return r;return t<this.mid?u(this.leftPoints,t,n):e>this.mid?f(this.rightPoints,e,n):d(this.leftPoints,n)};var y=v.prototype;y.insert=function(e){this.root?this.root.insert(e):this.root=new i(e[0],null,null,[e],[e])},y.remove=function(e){if(this.root){var t=this.root.remove(e);return 2===t&&(this.root=null),0!==t}return!1},y.queryPoint=function(e,t){if(this.root)return this.root.queryPoint(e,t)},y.queryInterval=function(e,t,n){if(e<=t&&this.root)return this.root.queryInterval(e,t,n)},Object.defineProperty(y,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(y,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},7762:function(e){"use strict";e.exports=function(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=n;return t}},9507:function(e){e.exports=!0},7163:function(e){function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},5219:function(e){"use strict";e.exports=function(e){for(var t,n=e.length,r=0;r<n;r++)if(((t=e.charCodeAt(r))<9||t>13)&&32!==t&&133!==t&&160!==t&&5760!==t&&6158!==t&&(t<8192||t>8205)&&8232!==t&&8233!==t&&8239!==t&&8287!==t&&8288!==t&&12288!==t&&65279!==t)return!1;return!0}},395:function(e){e.exports=function(e,t,n){return e*(1-n)+t*n}},2652:function(e,t,n){var r=n(4335),i=n(6864),a=n(1903),o=n(9921),s=n(7608),l=n(5665),c={length:n(1387),normalize:n(3536),dot:n(244),cross:n(5911)},u=i(),f=i(),d=[0,0,0,0],h=[[0,0,0],[0,0,0],[0,0,0]],p=[0,0,0];function m(e,t,n,r,i){e[0]=t[0]*r+n[0]*i,e[1]=t[1]*r+n[1]*i,e[2]=t[2]*r+n[2]*i}e.exports=function(e,t,n,i,g,v){if(t||(t=[0,0,0]),n||(n=[0,0,0]),i||(i=[0,0,0]),g||(g=[0,0,0,1]),v||(v=[0,0,0,1]),!r(u,e))return!1;if(a(f,u),f[3]=0,f[7]=0,f[11]=0,f[15]=1,Math.abs(o(f)<1e-8))return!1;var y,b,x=u[3],_=u[7],w=u[11],A=u[12],k=u[13],E=u[14],T=u[15];if(0!==x||0!==_||0!==w){if(d[0]=x,d[1]=_,d[2]=w,d[3]=T,!s(f,f))return!1;l(f,f),function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o}(g,d,f)}else g[0]=g[1]=g[2]=0,g[3]=1;if(t[0]=A,t[1]=k,t[2]=E,b=u,(y=h)[0][0]=b[0],y[0][1]=b[1],y[0][2]=b[2],y[1][0]=b[4],y[1][1]=b[5],y[1][2]=b[6],y[2][0]=b[8],y[2][1]=b[9],y[2][2]=b[10],n[0]=c.length(h[0]),c.normalize(h[0],h[0]),i[0]=c.dot(h[0],h[1]),m(h[1],h[1],h[0],1,-i[0]),n[1]=c.length(h[1]),c.normalize(h[1],h[1]),i[0]/=n[1],i[1]=c.dot(h[0],h[2]),m(h[2],h[2],h[0],1,-i[1]),i[2]=c.dot(h[1],h[2]),m(h[2],h[2],h[1],1,-i[2]),n[2]=c.length(h[2]),c.normalize(h[2],h[2]),i[1]/=n[2],i[2]/=n[2],c.cross(p,h[1],h[2]),c.dot(h[0],p)<0)for(var M=0;M<3;M++)n[M]*=-1,h[M][0]*=-1,h[M][1]*=-1,h[M][2]*=-1;return v[0]=.5*Math.sqrt(Math.max(1+h[0][0]-h[1][1]-h[2][2],0)),v[1]=.5*Math.sqrt(Math.max(1-h[0][0]+h[1][1]-h[2][2],0)),v[2]=.5*Math.sqrt(Math.max(1-h[0][0]-h[1][1]+h[2][2],0)),v[3]=.5*Math.sqrt(Math.max(1+h[0][0]+h[1][1]+h[2][2],0)),h[2][1]>h[1][2]&&(v[0]=-v[0]),h[0][2]>h[2][0]&&(v[1]=-v[1]),h[1][0]>h[0][1]&&(v[2]=-v[2]),!0}},4335:function(e){e.exports=function(e,t){var n=t[15];if(0===n)return!1;for(var r=1/n,i=0;i<16;i++)e[i]=t[i]*r;return!0}},7442:function(e,t,n){var r=n(6658),i=n(7182),a=n(2652),o=n(9921),s=n(8648),l=f(),c=f(),u=f();function f(){return{translate:d(),scale:d(1),skew:d(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function d(e){return[e||0,e||0,e||0]}e.exports=function(e,t,n,f){if(0===o(t)||0===o(n))return!1;var d=a(t,l.translate,l.scale,l.skew,l.perspective,l.quaternion),h=a(n,c.translate,c.scale,c.skew,c.perspective,c.quaternion);return!(!d||!h)&&(r(u.translate,l.translate,c.translate,f),r(u.skew,l.skew,c.skew,f),r(u.scale,l.scale,c.scale,f),r(u.perspective,l.perspective,c.perspective,f),s(u.quaternion,l.quaternion,c.quaternion,f),i(e,u.translate,u.scale,u.skew,u.perspective,u.quaternion),!0)}},7182:function(e,t,n){var r={identity:n(7894),translate:n(7656),multiply:n(6760),create:n(6864),scale:n(2504),fromRotationTranslation:n(6743)},i=(r.create(),r.create());e.exports=function(e,t,n,a,o,s){return r.identity(e),r.fromRotationTranslation(e,s,t),e[3]=o[0],e[7]=o[1],e[11]=o[2],e[15]=o[3],r.identity(i),0!==a[2]&&(i[9]=a[2],r.multiply(e,e,i)),0!==a[1]&&(i[9]=0,i[8]=a[1],r.multiply(e,e,i)),0!==a[0]&&(i[8]=0,i[4]=a[0],r.multiply(e,e,i)),r.scale(e,e,n),e}},4192:function(e,t,n){"use strict";var r=n(2478),i=n(7442),a=n(7608),o=n(5567),s=n(2408),l=n(7089),c=n(6582),u=n(7656),f=(n(2504),n(3536)),d=[0,0,0];function h(e){this._components=e.slice(),this._time=[0],this.prevMatrix=e.slice(),this.nextMatrix=e.slice(),this.computedMatrix=e.slice(),this.computedInverse=e.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}e.exports=function(e){return new h((e=e||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var p=h.prototype;p.recalcMatrix=function(e){var t=this._time,n=r.le(t,e),o=this.computedMatrix;if(!(n<0)){var s=this._components;if(n===t.length-1)for(var l=16*n,c=0;c<16;++c)o[c]=s[l++];else{var u=t[n+1]-t[n],d=(l=16*n,this.prevMatrix),h=!0;for(c=0;c<16;++c)d[c]=s[l++];var p=this.nextMatrix;for(c=0;c<16;++c)p[c]=s[l++],h=h&&d[c]===p[c];if(u<1e-6||h)for(c=0;c<16;++c)o[c]=d[c];else i(o,d,p,(e-t[n])/u)}var m=this.computedUp;m[0]=o[1],m[1]=o[5],m[2]=o[9],f(m,m);var g=this.computedInverse;a(g,o);var v=this.computedEye,y=g[15];v[0]=g[12]/y,v[1]=g[13]/y,v[2]=g[14]/y;var b=this.computedCenter,x=Math.exp(this.computedRadius[0]);for(c=0;c<3;++c)b[c]=v[c]-o[2+4*c]*x}},p.idle=function(e){if(!(e<this.lastT())){for(var t=this._components,n=t.length-16,r=0;r<16;++r)t.push(t[n++]);this._time.push(e)}},p.flush=function(e){var t=r.gt(this._time,e)-2;t<0||(this._time.splice(0,t),this._components.splice(0,16*t))},p.lastT=function(){return this._time[this._time.length-1]},p.lookAt=function(e,t,n,r){this.recalcMatrix(e),t=t||this.computedEye,n=n||d,r=r||this.computedUp,this.setMatrix(e,c(this.computedMatrix,t,n,r));for(var i=0,a=0;a<3;++a)i+=Math.pow(n[a]-t[a],2);i=Math.log(Math.sqrt(i)),this.computedRadius[0]=i},p.rotate=function(e,t,n,r){this.recalcMatrix(e);var i=this.computedInverse;t&&s(i,i,t),n&&o(i,i,n),r&&l(i,i,r),this.setMatrix(e,a(this.computedMatrix,i))};var m=[0,0,0];p.pan=function(e,t,n,r){m[0]=-(t||0),m[1]=-(n||0),m[2]=-(r||0),this.recalcMatrix(e);var i=this.computedInverse;u(i,i,m),this.setMatrix(e,a(i,i))},p.translate=function(e,t,n,r){m[0]=t||0,m[1]=n||0,m[2]=r||0,this.recalcMatrix(e);var i=this.computedMatrix;u(i,i,m),this.setMatrix(e,i)},p.setMatrix=function(e,t){if(!(e<this.lastT())){this._time.push(e);for(var n=0;n<16;++n)this._components.push(t[n])}},p.setDistance=function(e,t){this.computedRadius[0]=t},p.setDistanceLimits=function(e,t){var n=this._limits;n[0]=e,n[1]=t},p.getDistanceLimits=function(e){var t=this._limits;return e?(e[0]=t[0],e[1]=t[1],e):t}},3090:function(e,t,n){"use strict";e.exports=function(e){var t=e.length;if(t<3){for(var n=new Array(t),i=0;i<t;++i)n[i]=i;return 2===t&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]?[0]:n}var a=new Array(t);for(i=0;i<t;++i)a[i]=i;a.sort((function(t,n){var r=e[t][0]-e[n][0];return r||e[t][1]-e[n][1]}));var o=[a[0],a[1]],s=[a[0],a[1]];for(i=2;i<t;++i){for(var l=a[i],c=e[l],u=o.length;u>1&&r(e[o[u-2]],e[o[u-1]],c)<=0;)u-=1,o.pop();for(o.push(l),u=s.length;u>1&&r(e[s[u-2]],e[s[u-1]],c)>=0;)u-=1,s.pop();s.push(l)}n=new Array(s.length+o.length-2);for(var f=0,d=(i=0,o.length);i<d;++i)n[f++]=o[i];for(var h=s.length-2;h>0;--h)n[f++]=s[h];return n};var r=n(3250)[3]},351:function(e,t,n){"use strict";e.exports=function(e,t){t||(t=e,e=window);var n=0,i=0,a=0,o={shift:!1,alt:!1,control:!1,meta:!1},s=!1;function l(e){var t=!1;return"altKey"in e&&(t=t||e.altKey!==o.alt,o.alt=!!e.altKey),"shiftKey"in e&&(t=t||e.shiftKey!==o.shift,o.shift=!!e.shiftKey),"ctrlKey"in e&&(t=t||e.ctrlKey!==o.control,o.control=!!e.ctrlKey),"metaKey"in e&&(t=t||e.metaKey!==o.meta,o.meta=!!e.metaKey),t}function c(e,s){var c=r.x(s),u=r.y(s);"buttons"in s&&(e=0|s.buttons),(e!==n||c!==i||u!==a||l(s))&&(n=0|e,i=c||0,a=u||0,t&&t(n,i,a,o))}function u(e){c(0,e)}function f(){(n||i||a||o.shift||o.alt||o.meta||o.control)&&(i=a=0,n=0,o.shift=o.alt=o.control=o.meta=!1,t&&t(0,0,0,o))}function d(e){l(e)&&t&&t(n,i,a,o)}function h(e){0===r.buttons(e)?c(0,e):c(n,e)}function p(e){c(n|r.buttons(e),e)}function m(e){c(n&~r.buttons(e),e)}function g(){s||(s=!0,e.addEventListener("mousemove",h),e.addEventListener("mousedown",p),e.addEventListener("mouseup",m),e.addEventListener("mouseleave",u),e.addEventListener("mouseenter",u),e.addEventListener("mouseout",u),e.addEventListener("mouseover",u),e.addEventListener("blur",f),e.addEventListener("keyup",d),e.addEventListener("keydown",d),e.addEventListener("keypress",d),e!==window&&(window.addEventListener("blur",f),window.addEventListener("keyup",d),window.addEventListener("keydown",d),window.addEventListener("keypress",d)))}g();var v={element:e};return Object.defineProperties(v,{enabled:{get:function(){return s},set:function(t){t?g():function(){if(!s)return;s=!1,e.removeEventListener("mousemove",h),e.removeEventListener("mousedown",p),e.removeEventListener("mouseup",m),e.removeEventListener("mouseleave",u),e.removeEventListener("mouseenter",u),e.removeEventListener("mouseout",u),e.removeEventListener("mouseover",u),e.removeEventListener("blur",f),e.removeEventListener("keyup",d),e.removeEventListener("keydown",d),e.removeEventListener("keypress",d),e!==window&&(window.removeEventListener("blur",f),window.removeEventListener("keyup",d),window.removeEventListener("keydown",d),window.removeEventListener("keypress",d))}()},enumerable:!0},buttons:{get:function(){return n},enumerable:!0},x:{get:function(){return i},enumerable:!0},y:{get:function(){return a},enumerable:!0},mods:{get:function(){return o},enumerable:!0}}),v};var r=n(4687)},24:function(e){var t={left:0,top:0};e.exports=function(e,n,r){n=n||e.currentTarget||e.srcElement,Array.isArray(r)||(r=[0,0]);var i=e.clientX||0,a=e.clientY||0,o=(s=n,s===window||s===document||s===document.body?t:s.getBoundingClientRect());var s;return r[0]=i-o.left,r[1]=a-o.top,r}},4687:function(e,t){"use strict";function n(e){return e.target||e.srcElement||window}t.buttons=function(e){if("object"==typeof e){if("buttons"in e)return e.buttons;if("which"in e){if(2===(t=e.which))return 4;if(3===t)return 2;if(t>0)return 1<<t-1}else if("button"in e){var t;if(1===(t=e.button))return 4;if(2===t)return 2;if(t>=0)return 1<<t}}return 0},t.element=n,t.x=function(e){if("object"==typeof e){if("offsetX"in e)return e.offsetX;var t=n(e).getBoundingClientRect();return e.clientX-t.left}return 0},t.y=function(e){if("object"==typeof e){if("offsetY"in e)return e.offsetY;var t=n(e).getBoundingClientRect();return e.clientY-t.top}return 0}},8512:function(e,t,n){"use strict";var r=n(665);e.exports=function(e,t,n){"function"==typeof e&&(n=!!t,t=e,e=window);var i=r("ex",e),a=function(e){n&&e.preventDefault();var r=e.deltaX||0,a=e.deltaY||0,o=e.deltaZ||0,s=1;switch(e.deltaMode){case 1:s=i;break;case 2:s=window.innerHeight}if(a*=s,o*=s,(r*=s)||a||o)return t(r,a,o,e)};return e.addEventListener("wheel",a),a}},2640:function(e,t,n){"use strict";var r=n(1888);e.exports=function(e){function t(e){throw new Error("ndarray-extract-contour: "+e)}"object"!=typeof e&&t("Must specify arguments");var n=e.order;Array.isArray(n)||t("Must specify order");var a=e.arrayArguments||1;a<1&&t("Must have at least one array argument");var o=e.scalarArguments||0;o<0&&t("Scalar arg count must be > 0");"function"!=typeof e.vertex&&t("Must specify vertex creation function");"function"!=typeof e.cell&&t("Must specify cell creation function");"function"!=typeof e.phase&&t("Must specify phase function");for(var s=e.getters||[],l=new Array(a),c=0;c<a;++c)s.indexOf(c)>=0?l[c]=!0:l[c]=!1;return function(e,t,n,a,o,s){var l=[s,o].join(",");return(0,i[l])(e,t,n,r.mallocUint32,r.freeUint32)}(e.vertex,e.cell,e.phase,0,n,l)};var i={"false,0,1":function(e,t,n,r,i){return function(a,o,s,l){var c,u=0|a.shape[0],f=0|a.shape[1],d=a.data,h=0|a.offset,p=0|a.stride[0],m=0|a.stride[1],g=h,v=0|-p,y=0,b=0|-m,x=0,_=-p-m|0,w=0,A=0|p,k=m-p*u|0,E=0,T=0,M=0,S=2*u|0,C=r(S),O=r(S),R=0,N=0,L=-1,D=-1,P=0,I=0|-u,F=0|u,z=0,j=-u-1|0,B=u-1|0,U=0,$=0,q=0;for(E=0;E<u;++E)C[R++]=n(d[g],o,s,l),g+=A;if(g+=k,f>0){if(T=1,C[R++]=n(d[g],o,s,l),g+=A,u>0)for(E=1,c=d[g],N=C[R]=n(c,o,s,l),P=C[R+L],z=C[R+I],U=C[R+j],N===P&&N===z&&N===U||(y=d[g+v],x=d[g+b],w=d[g+_],e(E,T,c,y,x,w,N,P,z,U,o,s,l),$=O[R]=M++),R+=1,g+=A,E=2;E<u;++E)c=d[g],N=C[R]=n(c,o,s,l),P=C[R+L],z=C[R+I],U=C[R+j],N===P&&N===z&&N===U||(y=d[g+v],x=d[g+b],w=d[g+_],e(E,T,c,y,x,w,N,P,z,U,o,s,l),$=O[R]=M++,U!==P&&t(O[R+L],$,w,y,U,P,o,s,l)),R+=1,g+=A;for(g+=k,R=0,q=L,L=D,D=q,q=I,I=F,F=q,q=j,j=B,B=q,T=2;T<f;++T){if(C[R++]=n(d[g],o,s,l),g+=A,u>0)for(E=1,c=d[g],N=C[R]=n(c,o,s,l),P=C[R+L],z=C[R+I],U=C[R+j],N===P&&N===z&&N===U||(y=d[g+v],x=d[g+b],w=d[g+_],e(E,T,c,y,x,w,N,P,z,U,o,s,l),$=O[R]=M++,U!==z&&t(O[R+I],$,x,w,z,U,o,s,l)),R+=1,g+=A,E=2;E<u;++E)c=d[g],N=C[R]=n(c,o,s,l),P=C[R+L],z=C[R+I],U=C[R+j],N===P&&N===z&&N===U||(y=d[g+v],x=d[g+b],w=d[g+_],e(E,T,c,y,x,w,N,P,z,U,o,s,l),$=O[R]=M++,U!==z&&t(O[R+I],$,x,w,z,U,o,s,l),U!==P&&t(O[R+L],$,w,y,U,P,o,s,l)),R+=1,g+=A;1&T&&(R=0),q=L,L=D,D=q,q=I,I=F,F=q,q=j,j=B,B=q,g+=k}}i(O),i(C)}},"false,1,0":function(e,t,n,r,i){return function(a,o,s,l){var c,u=0|a.shape[0],f=0|a.shape[1],d=a.data,h=0|a.offset,p=0|a.stride[0],m=0|a.stride[1],g=h,v=0|-p,y=0,b=0|-m,x=0,_=-p-m|0,w=0,A=0|m,k=p-m*f|0,E=0,T=0,M=0,S=2*f|0,C=r(S),O=r(S),R=0,N=0,L=-1,D=-1,P=0,I=0|-f,F=0|f,z=0,j=-f-1|0,B=f-1|0,U=0,$=0,q=0;for(T=0;T<f;++T)C[R++]=n(d[g],o,s,l),g+=A;if(g+=k,u>0){if(E=1,C[R++]=n(d[g],o,s,l),g+=A,f>0)for(T=1,c=d[g],N=C[R]=n(c,o,s,l),z=C[R+I],P=C[R+L],U=C[R+j],N===z&&N===P&&N===U||(y=d[g+v],x=d[g+b],w=d[g+_],e(E,T,c,y,x,w,N,z,P,U,o,s,l),$=O[R]=M++),R+=1,g+=A,T=2;T<f;++T)c=d[g],N=C[R]=n(c,o,s,l),z=C[R+I],P=C[R+L],U=C[R+j],N===z&&N===P&&N===U||(y=d[g+v],x=d[g+b],w=d[g+_],e(E,T,c,y,x,w,N,z,P,U,o,s,l),$=O[R]=M++,U!==P&&t(O[R+L],$,x,w,P,U,o,s,l)),R+=1,g+=A;for(g+=k,R=0,q=I,I=F,F=q,q=L,L=D,D=q,q=j,j=B,B=q,E=2;E<u;++E){if(C[R++]=n(d[g],o,s,l),g+=A,f>0)for(T=1,c=d[g],N=C[R]=n(c,o,s,l),z=C[R+I],P=C[R+L],U=C[R+j],N===z&&N===P&&N===U||(y=d[g+v],x=d[g+b],w=d[g+_],e(E,T,c,y,x,w,N,z,P,U,o,s,l),$=O[R]=M++,U!==z&&t(O[R+I],$,w,y,U,z,o,s,l)),R+=1,g+=A,T=2;T<f;++T)c=d[g],N=C[R]=n(c,o,s,l),z=C[R+I],P=C[R+L],U=C[R+j],N===z&&N===P&&N===U||(y=d[g+v],x=d[g+b],w=d[g+_],e(E,T,c,y,x,w,N,z,P,U,o,s,l),$=O[R]=M++,U!==P&&t(O[R+L],$,x,w,P,U,o,s,l),U!==z&&t(O[R+I],$,w,y,U,z,o,s,l)),R+=1,g+=A;1&E&&(R=0),q=I,I=F,F=q,q=L,L=D,D=q,q=j,j=B,B=q,g+=k}}i(O),i(C)}}}},6199:function(e,t,n){"use strict";var r=n(1338),i={zero:function(e,t,n,r){var i=e[0];r|=0;var a=0,o=n[0];for(a=0;a<i;++a)t[r]=0,r+=o},fdTemplate1:function(e,t,n,r,i,a,o){var s=e[0],l=n[0],c=-1*l,u=l;r|=0,o|=0;var f=0,d=l,h=a[0];for(f=0;f<s;++f)i[o]=.5*(t[r+c]-t[r+u]),r+=d,o+=h},fdTemplate2:function(e,t,n,r,i,a,o,s,l,c){var u=e[0],f=e[1],d=n[0],h=n[1],p=a[0],m=a[1],g=l[0],v=l[1],y=-1*d,b=d,x=-1*h,_=h;r|=0,o|=0,c|=0;var w=0,A=0,k=h,E=d-f*h,T=m,M=p-f*m,S=v,C=g-f*v;for(A=0;A<u;++A){for(w=0;w<f;++w)i[o]=.5*(t[r+y]-t[r+b]),s[c]=.5*(t[r+x]-t[r+_]),r+=k,o+=T,c+=S;r+=E,o+=M,c+=C}}},a={cdiff:function(e){var t={};return function(n,r,i){var a=n.dtype,o=n.order,s=r.dtype,l=r.order,c=i.dtype,u=i.order,f=[a,o.join(),s,l.join(),c,u.join()].join(),d=t[f];return d||(t[f]=d=e([a,o,s,l,c,u])),d(n.shape.slice(0),n.data,n.stride,0|n.offset,r.data,r.stride,0|r.offset,i.data,i.stride,0|i.offset)}},zero:function(e){var t={};return function(n){var r=n.dtype,i=n.order,a=[r,i.join()].join(),o=t[a];return o||(t[a]=o=e([r,i])),o(n.shape.slice(0),n.data,n.stride,0|n.offset)}},fdTemplate1:function(e){var t={};return function(n,r){var i=n.dtype,a=n.order,o=r.dtype,s=r.order,l=[i,a.join(),o,s.join()].join(),c=t[l];return c||(t[l]=c=e([i,a,o,s])),c(n.shape.slice(0),n.data,n.stride,0|n.offset,r.data,r.stride,0|r.offset)}},fdTemplate2:function(e){var t={};return function(n,r,i){var a=n.dtype,o=n.order,s=r.dtype,l=r.order,c=i.dtype,u=i.order,f=[a,o.join(),s,l.join(),c,u.join()].join(),d=t[f];return d||(t[f]=d=e([a,o,s,l,c,u])),d(n.shape.slice(0),n.data,n.stride,0|n.offset,r.data,r.stride,0|r.offset,i.data,i.stride,0|i.offset)}}};function o(e){return(0,a[e.funcName])(s.bind(void 0,e))}function s(e){return i[e.funcName]}function l(e){return o({funcName:e.funcName})}var c={},u={},f=l({funcName:"cdiff"}),d=l({funcName:"zero"});function h(e){return e in c?c[e]:c[e]=l({funcName:"fdTemplate"+e})}function p(e,t,n,r){return function(e,i){var a=i.shape.slice();return a[0]>2&&a[1]>2&&r(i.pick(-1,-1).lo(1,1).hi(a[0]-2,a[1]-2),e.pick(-1,-1,0).lo(1,1).hi(a[0]-2,a[1]-2),e.pick(-1,-1,1).lo(1,1).hi(a[0]-2,a[1]-2)),a[1]>2&&(n(i.pick(0,-1).lo(1).hi(a[1]-2),e.pick(0,-1,1).lo(1).hi(a[1]-2)),t(e.pick(0,-1,0).lo(1).hi(a[1]-2))),a[1]>2&&(n(i.pick(a[0]-1,-1).lo(1).hi(a[1]-2),e.pick(a[0]-1,-1,1).lo(1).hi(a[1]-2)),t(e.pick(a[0]-1,-1,0).lo(1).hi(a[1]-2))),a[0]>2&&(n(i.pick(-1,0).lo(1).hi(a[0]-2),e.pick(-1,0,0).lo(1).hi(a[0]-2)),t(e.pick(-1,0,1).lo(1).hi(a[0]-2))),a[0]>2&&(n(i.pick(-1,a[1]-1).lo(1).hi(a[0]-2),e.pick(-1,a[1]-1,0).lo(1).hi(a[0]-2)),t(e.pick(-1,a[1]-1,1).lo(1).hi(a[0]-2))),e.set(0,0,0,0),e.set(0,0,1,0),e.set(a[0]-1,0,0,0),e.set(a[0]-1,0,1,0),e.set(0,a[1]-1,0,0),e.set(0,a[1]-1,1,0),e.set(a[0]-1,a[1]-1,0,0),e.set(a[0]-1,a[1]-1,1,0),e}}e.exports=function(e,t,n){return Array.isArray(n)||(n=r(t.dimension,"string"==typeof n?n:"clamp")),0===t.size?e:0===t.dimension?(e.set(0),e):function(e){var t=e.join();if(a=u[t])return a;for(var n=e.length,r=[f,d],i=1;i<=n;++i)r.push(h(i));var a=p.apply(void 0,r);return u[t]=a,a}(n)(e,t)}},4317:function(e){"use strict";function t(e,t){var n=Math.floor(t),r=t-n,i=0<=n&&n<e.shape[0],a=0<=n+1&&n+1<e.shape[0];return(1-r)*(i?+e.get(n):0)+r*(a?+e.get(n+1):0)}function n(e,t,n){var r=Math.floor(t),i=t-r,a=0<=r&&r<e.shape[0],o=0<=r+1&&r+1<e.shape[0],s=Math.floor(n),l=n-s,c=0<=s&&s<e.shape[1],u=0<=s+1&&s+1<e.shape[1],f=a&&c?e.get(r,s):0,d=a&&u?e.get(r,s+1):0;return(1-l)*((1-i)*f+i*(o&&c?e.get(r+1,s):0))+l*((1-i)*d+i*(o&&u?e.get(r+1,s+1):0))}function r(e,t,n,r){var i=Math.floor(t),a=t-i,o=0<=i&&i<e.shape[0],s=0<=i+1&&i+1<e.shape[0],l=Math.floor(n),c=n-l,u=0<=l&&l<e.shape[1],f=0<=l+1&&l+1<e.shape[1],d=Math.floor(r),h=r-d,p=0<=d&&d<e.shape[2],m=0<=d+1&&d+1<e.shape[2],g=o&&u&&p?e.get(i,l,d):0,v=o&&f&&p?e.get(i,l+1,d):0,y=s&&u&&p?e.get(i+1,l,d):0,b=s&&f&&p?e.get(i+1,l+1,d):0,x=o&&u&&m?e.get(i,l,d+1):0,_=o&&f&&m?e.get(i,l+1,d+1):0;return(1-h)*((1-c)*((1-a)*g+a*y)+c*((1-a)*v+a*b))+h*((1-c)*((1-a)*x+a*(s&&u&&m?e.get(i+1,l,d+1):0))+c*((1-a)*_+a*(s&&f&&m?e.get(i+1,l+1,d+1):0)))}function i(e){var t,n,r=0|e.shape.length,i=new Array(r),a=new Array(r),o=new Array(r),s=new Array(r);for(t=0;t<r;++t)n=+arguments[t+1],i[t]=Math.floor(n),a[t]=n-i[t],o[t]=0<=i[t]&&i[t]<e.shape[t],s[t]=0<=i[t]+1&&i[t]+1<e.shape[t];var l,c,u,f=0;e:for(t=0;t<1<<r;++t){for(c=1,u=e.offset,l=0;l<r;++l)if(t&1<<l){if(!s[l])continue e;c*=a[l],u+=e.stride[l]*(i[l]+1)}else{if(!o[l])continue e;c*=1-a[l],u+=e.stride[l]*i[l]}f+=c*e.data[u]}return f}e.exports=function(e,a,o,s){switch(e.shape.length){case 0:return 0;case 1:return t(e,a);case 2:return n(e,a,o);case 3:return r(e,a,o,s);default:return i.apply(void 0,arguments)}},e.exports.d1=t,e.exports.d2=n,e.exports.d3=r},5298:function(e,t){"use strict";var n={"float64,2,1,0":function(){return function(e,t,n,r,i){var a=e[0],o=e[1],s=e[2],l=n[0],c=n[1],u=n[2];r|=0;var f=0,d=0,h=0,p=u,m=c-s*u,g=l-o*c;for(h=0;h<a;++h){for(d=0;d<o;++d){for(f=0;f<s;++f)t[r]/=i,r+=p;r+=m}r+=g}}},"uint8,2,0,1,float64,2,1,0":function(){return function(e,t,n,r,i,a,o,s){for(var l=e[0],c=e[1],u=e[2],f=n[0],d=n[1],h=n[2],p=a[0],m=a[1],g=a[2],v=r|=0,y=o|=0,b=0|e[0];b>0;){b<64?(l=b,b=0):(l=64,b-=64);for(var x=0|e[1];x>0;){x<64?(c=x,x=0):(c=64,x-=64),r=v+b*f+x*d,o=y+b*p+x*m;var _=0,w=0,A=0,k=h,E=f-u*h,T=d-l*f,M=g,S=p-u*g,C=m-l*p;for(A=0;A<c;++A){for(w=0;w<l;++w){for(_=0;_<u;++_)t[r]=i[o]*s,r+=k,o+=M;r+=E,o+=S}r+=T,o+=C}}}}},"float32,1,0,float32,1,0":function(){return function(e,t,n,r,i,a,o){var s=e[0],l=e[1],c=n[0],u=n[1],f=a[0],d=a[1];r|=0,o|=0;var h=0,p=0,m=u,g=c-l*u,v=d,y=f-l*d;for(p=0;p<s;++p){for(h=0;h<l;++h)t[r]=i[o],r+=m,o+=v;r+=g,o+=y}}},"float32,1,0,float32,0,1":function(){return function(e,t,n,r,i,a,o){for(var s=e[0],l=e[1],c=n[0],u=n[1],f=a[0],d=a[1],h=r|=0,p=o|=0,m=0|e[1];m>0;){m<64?(l=m,m=0):(l=64,m-=64);for(var g=0|e[0];g>0;){g<64?(s=g,g=0):(s=64,g-=64),r=h+m*u+g*c,o=p+m*d+g*f;var v=0,y=0,b=u,x=c-l*u,_=d,w=f-l*d;for(y=0;y<s;++y){for(v=0;v<l;++v)t[r]=i[o],r+=b,o+=_;r+=x,o+=w}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(e,t,n,r,i,a,o){for(var s=e[0],l=e[1],c=e[2],u=n[0],f=n[1],d=n[2],h=a[0],p=a[1],m=a[2],g=r|=0,v=o|=0,y=0|e[2];y>0;){y<64?(c=y,y=0):(c=64,y-=64);for(var b=0|e[0];b>0;){b<64?(s=b,b=0):(s=64,b-=64);for(var x=0|e[1];x>0;){x<64?(l=x,x=0):(l=64,x-=64),r=g+y*d+b*u+x*f,o=v+y*m+b*h+x*p;var _=0,w=0,A=0,k=d,E=u-c*d,T=f-s*u,M=m,S=h-c*m,C=p-s*h;for(A=0;A<l;++A){for(w=0;w<s;++w){for(_=0;_<c;++_)t[r]=i[o],r+=k,o+=M;r+=E,o+=S}r+=T,o+=C}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(e,t,n,r,i,a,o){var s=e[0],l=e[1],c=e[2],u=n[0],f=n[1],d=n[2],h=a[0],p=a[1],m=a[2];r|=0,o|=0;var g=0,v=0,y=0,b=d,x=u-c*d,_=f-s*u,w=m,A=h-c*m,k=p-s*h;for(y=0;y<l;++y){for(v=0;v<s;++v){for(g=0;g<c;++g)t[r]=i[o],r+=b,o+=w;r+=x,o+=A}r+=_,o+=k}}}};var r=function(e,t){var r=t.join(",");return(0,n[r])()},i={mul:function(e){var t={};return function(n,r,i){var a=n.dtype,o=n.order,s=r.dtype,l=r.order,c=i.dtype,u=i.order,f=[a,o.join(),s,l.join(),c,u.join()].join(),d=t[f];return d||(t[f]=d=e([a,o,s,l,c,u])),d(n.shape.slice(0),n.data,n.stride,0|n.offset,r.data,r.stride,0|r.offset,i.data,i.stride,0|i.offset)}},muls:function(e){var t={};return function(n,r,i){var a=n.dtype,o=n.order,s=r.dtype,l=r.order,c=[a,o.join(),s,l.join()].join(),u=t[c];return u||(t[c]=u=e([a,o,s,l])),u(n.shape.slice(0),n.data,n.stride,0|n.offset,r.data,r.stride,0|r.offset,i)}},mulseq:function(e){var t={};return function(n,r){var i=n.dtype,a=n.order,o=[i,a.join()].join(),s=t[o];return s||(t[o]=s=e([i,a])),s(n.shape.slice(0),n.data,n.stride,0|n.offset,r)}},div:function(e){var t={};return function(n,r,i){var a=n.dtype,o=n.order,s=r.dtype,l=r.order,c=i.dtype,u=i.order,f=[a,o.join(),s,l.join(),c,u.join()].join(),d=t[f];return d||(t[f]=d=e([a,o,s,l,c,u])),d(n.shape.slice(0),n.data,n.stride,0|n.offset,r.data,r.stride,0|r.offset,i.data,i.stride,0|i.offset)}},divs:function(e){var t={};return function(n,r,i){var a=n.dtype,o=n.order,s=r.dtype,l=r.order,c=[a,o.join(),s,l.join()].join(),u=t[c];return u||(t[c]=u=e([a,o,s,l])),u(n.shape.slice(0),n.data,n.stride,0|n.offset,r.data,r.stride,0|r.offset,i)}},divseq:function(e){var t={};return function(n,r){var i=n.dtype,a=n.order,o=[i,a.join()].join(),s=t[o];return s||(t[o]=s=e([i,a])),s(n.shape.slice(0),n.data,n.stride,0|n.offset,r)}},assign:function(e){var t={};return function(n,r){var i=n.dtype,a=n.order,o=r.dtype,s=r.order,l=[i,a.join(),o,s.join()].join(),c=t[l];return c||(t[l]=c=e([i,a,o,s])),c(n.shape.slice(0),n.data,n.stride,0|n.offset,r.data,r.stride,0|r.offset)}}};function a(e){return t={funcName:e.funcName},(0,i[t.funcName])(r.bind(void 0,t));var t}var o={mul:"*",div:"/"};!function(){for(var e in o)t[e]=a({funcName:e}),t[e+"s"]=a({funcName:e+"s"}),t[e+"seq"]=a({funcName:e+"seq"})}(),t.assign=a({funcName:"assign"})},9994:function(e,t,n){"use strict";var r=n(9618),i=n(8277);e.exports=function(e,t){for(var n=[],a=e,o=1;Array.isArray(a);)n.push(a.length),o*=a.length,a=a[0];return 0===n.length?r():(t||(t=r(new Float64Array(o),n)),i(t,e),t)}},8277:function(e){"use strict";var t,n=function(){return function(e,t,n,r,i){var a=e[0],o=e[1],s=e[2],l=n[0],c=n[1],u=n[2],f=[0,0,0];r|=0;var d=0,h=0,p=0,m=u,g=c-s*u,v=l-o*c;for(p=0;p<a;++p){for(h=0;h<o;++h){for(d=0;d<s;++d){var y,b=i;for(y=0;y<f.length-1;++y)b=b[f[y]];t[r]=b[f[f.length-1]],r+=m,++f[2]}r+=g,f[2]-=s,++f[1]}r+=v,f[1]-=o,++f[0]}}};e.exports=(t={funcName:{funcName:"convert"}.funcName},function(e){var t={};return function(n,r){var i=n.dtype,a=n.order,o=[i,a.join()].join(),s=t[o];return s||(t[o]=s=e([i,a])),s(n.shape.slice(0),n.data,n.stride,0|n.offset,r)}}(n.bind(void 0,t)))},7640:function(e,t,n){"use strict";var r=n(1888);function i(e){return"uint32"===e?[r.mallocUint32,r.freeUint32]:null}var a={"uint32,1,0":function(e,t){return function(n,r,i,a,o,s,l,c,u,f,d){var h,p,m,g,v,y,b,x,_=n*o+a,w=e(c);for(h=n+1;h<=r;++h){for(p=h,m=_+=o,v=0,y=_,g=0;g<c;++g)w[v++]=i[y],y+=u;e:for(;p-- >n;){v=0,y=m-o;t:for(g=0;g<c;++g){if((b=i[y])<(x=w[v]))break e;if(b>x)break t;y+=f,v+=d}for(v=m,y=m-o,g=0;g<c;++g)i[v]=i[y],v+=u,y+=u;m-=o}for(v=m,y=0,g=0;g<c;++g)i[v]=w[y++],v+=u}t(w)}}};var o={"uint32,1,0":function(e,t,n){return function r(i,a,o,s,l,c,u,f,d,h,p){var m,g,v,y,b,x,_,w,A,k,E,T,M,S,C,O,R,N,L,D,P,I,F,z,j,B=(a-i+1)/6|0,U=i+B,$=a-B,q=i+a>>1,H=q-B,V=q+B,W=U,G=H,Y=q,X=V,K=$,Z=i+1,J=a-1,Q=!0,ee=0,te=0,ne=0,re=f,ie=t(re),ae=t(re);E=l*W,T=l*G,j=s;e:for(k=0;k<f;++k){if(w=T+j,(ne=o[_=E+j]-o[w])>0){g=W,W=G,G=g;break e}if(ne<0)break e;j+=h}E=l*X,T=l*K,j=s;e:for(k=0;k<f;++k){if(w=T+j,(ne=o[_=E+j]-o[w])>0){g=X,X=K,K=g;break e}if(ne<0)break e;j+=h}E=l*W,T=l*Y,j=s;e:for(k=0;k<f;++k){if(w=T+j,(ne=o[_=E+j]-o[w])>0){g=W,W=Y,Y=g;break e}if(ne<0)break e;j+=h}E=l*G,T=l*Y,j=s;e:for(k=0;k<f;++k){if(w=T+j,(ne=o[_=E+j]-o[w])>0){g=G,G=Y,Y=g;break e}if(ne<0)break e;j+=h}E=l*W,T=l*X,j=s;e:for(k=0;k<f;++k){if(w=T+j,(ne=o[_=E+j]-o[w])>0){g=W,W=X,X=g;break e}if(ne<0)break e;j+=h}E=l*Y,T=l*X,j=s;e:for(k=0;k<f;++k){if(w=T+j,(ne=o[_=E+j]-o[w])>0){g=Y,Y=X,X=g;break e}if(ne<0)break e;j+=h}E=l*G,T=l*K,j=s;e:for(k=0;k<f;++k){if(w=T+j,(ne=o[_=E+j]-o[w])>0){g=G,G=K,K=g;break e}if(ne<0)break e;j+=h}E=l*G,T=l*Y,j=s;e:for(k=0;k<f;++k){if(w=T+j,(ne=o[_=E+j]-o[w])>0){g=G,G=Y,Y=g;break e}if(ne<0)break e;j+=h}E=l*X,T=l*K,j=s;e:for(k=0;k<f;++k){if(w=T+j,(ne=o[_=E+j]-o[w])>0){g=X,X=K,K=g;break e}if(ne<0)break e;j+=h}for(E=l*W,T=l*G,M=l*Y,S=l*X,C=l*K,O=l*U,R=l*q,N=l*$,z=0,j=s,k=0;k<f;++k)_=E+j,w=T+j,A=M+j,L=S+j,D=C+j,P=O+j,I=R+j,F=N+j,ie[z]=o[w],ae[z]=o[L],Q=Q&&ie[z]===ae[z],v=o[_],y=o[A],b=o[D],o[P]=v,o[I]=y,o[F]=b,++z,j+=d;for(E=l*H,T=l*i,j=s,k=0;k<f;++k)w=T+j,o[_=E+j]=o[w],j+=d;for(E=l*V,T=l*a,j=s,k=0;k<f;++k)w=T+j,o[_=E+j]=o[w],j+=d;if(Q)for(x=Z;x<=J;++x){_=s+x*l,z=0;e:for(k=0;k<f&&0===(ne=o[_]-ie[z]);++k)z+=p,_+=h;if(0!==ne)if(ne<0){if(x!==Z)for(E=l*x,T=l*Z,j=s,k=0;k<f;++k)w=T+j,m=o[_=E+j],o[_]=o[w],o[w]=m,j+=d;++Z}else for(;;){_=s+J*l,z=0;e:for(k=0;k<f&&0===(ne=o[_]-ie[z]);++k)z+=p,_+=h;if(!(ne>0)){if(ne<0){for(E=l*x,T=l*Z,M=l*J,j=s,k=0;k<f;++k)w=T+j,A=M+j,m=o[_=E+j],o[_]=o[w],o[w]=o[A],o[A]=m,j+=d;++Z,--J;break}for(E=l*x,T=l*J,j=s,k=0;k<f;++k)w=T+j,m=o[_=E+j],o[_]=o[w],o[w]=m,j+=d;--J;break}J--}}else for(x=Z;x<=J;++x){_=s+x*l,z=0;e:for(k=0;k<f&&0===(ee=o[_]-ie[z]);++k)z+=p,_+=h;if(ee<0){if(x!==Z)for(E=l*x,T=l*Z,j=s,k=0;k<f;++k)w=T+j,m=o[_=E+j],o[_]=o[w],o[w]=m,j+=d;++Z}else{_=s+x*l,z=0;e:for(k=0;k<f&&0===(te=o[_]-ae[z]);++k)z+=p,_+=h;if(te>0)for(;;){_=s+J*l,z=0;e:for(k=0;k<f&&0===(ne=o[_]-ae[z]);++k)z+=p,_+=h;if(!(ne>0)){_=s+J*l,z=0;e:for(k=0;k<f&&0===(ne=o[_]-ie[z]);++k)z+=p,_+=h;if(ne<0){for(E=l*x,T=l*Z,M=l*J,j=s,k=0;k<f;++k)w=T+j,A=M+j,m=o[_=E+j],o[_]=o[w],o[w]=o[A],o[A]=m,j+=d;++Z,--J}else{for(E=l*x,T=l*J,j=s,k=0;k<f;++k)w=T+j,m=o[_=E+j],o[_]=o[w],o[w]=m,j+=d;--J}break}if(--J<x)break}}}for(E=l*i,T=l*(Z-1),z=0,j=s,k=0;k<f;++k)w=T+j,o[_=E+j]=o[w],o[w]=ie[z],++z,j+=d;for(E=l*a,T=l*(J+1),z=0,j=s,k=0;k<f;++k)w=T+j,o[_=E+j]=o[w],o[w]=ae[z],++z,j+=d;if(Z-2-i<=32?e(i,Z-2,o,s,l,c,u,f,d,h,p):r(i,Z-2,o,s,l,c,u,f,d,h,p),a-(J+2)<=32?e(J+2,a,o,s,l,c,u,f,d,h,p):r(J+2,a,o,s,l,c,u,f,d,h,p),Q)return n(ie),void n(ae);if(Z<U&&J>$){e:for(;;){for(_=s+Z*l,z=0,j=s,k=0;k<f;++k){if(o[_]!==ie[z])break e;++z,_+=d}++Z}e:for(;;){for(_=s+J*l,z=0,j=s,k=0;k<f;++k){if(o[_]!==ae[z])break e;++z,_+=d}--J}for(x=Z;x<=J;++x){_=s+x*l,z=0;e:for(k=0;k<f&&0===(ee=o[_]-ie[z]);++k)z+=p,_+=h;if(0===ee){if(x!==Z)for(E=l*x,T=l*Z,j=s,k=0;k<f;++k)w=T+j,m=o[_=E+j],o[_]=o[w],o[w]=m,j+=d;++Z}else{_=s+x*l,z=0;e:for(k=0;k<f&&0===(te=o[_]-ae[z]);++k)z+=p,_+=h;if(0===te)for(;;){_=s+J*l,z=0;e:for(k=0;k<f&&0===(ne=o[_]-ae[z]);++k)z+=p,_+=h;if(0!==ne){_=s+J*l,z=0;e:for(k=0;k<f&&0===(ne=o[_]-ie[z]);++k)z+=p,_+=h;if(ne<0){for(E=l*x,T=l*Z,M=l*J,j=s,k=0;k<f;++k)w=T+j,A=M+j,m=o[_=E+j],o[_]=o[w],o[w]=o[A],o[A]=m,j+=d;++Z,--J}else{for(E=l*x,T=l*J,j=s,k=0;k<f;++k)w=T+j,m=o[_=E+j],o[_]=o[w],o[w]=m,j+=d;--J}break}if(--J<x)break}}}}n(ie),n(ae),J-Z<=32?e(Z,J,o,s,l,c,u,f,d,h,p):r(Z,J,o,s,l,c,u,f,d,h,p)}}};var s={"uint32,1,0":function(e,t){return function(n){var r=n.data,i=0|n.offset,a=n.shape,o=n.stride,s=0|o[0],l=0|a[0],c=0|o[1],u=0|a[1],f=c,d=c;l<=32?e(0,l-1,r,i,s,c,l,u,f,d,1):t(0,l-1,r,i,s,c,l,u,f,d,1)}}};e.exports=function(e,t){var n=[t,e].join(","),r=s[n],l=function(e,t){var n=i(t),r=[t,e].join(","),o=a[r];return n?o(n[0],n[1]):o()}(e,t),c=function(e,t,n){var r=i(t),a=[t,e].join(","),s=o[a];return e.length>1&&r?s(n,r[0],r[1]):s(n)}(e,t,l);return r(l,c)}},446:function(e,t,n){"use strict";var r=n(7640),i={};e.exports=function(e){var t=e.order,n=e.dtype,a=[t,n].join(":"),o=i[a];return o||(i[a]=o=r(t,n)),o(e),e}},9618:function(e,t,n){var r=n(7163),i="undefined"!=typeof Float64Array;function a(e,t){return e[0]-t[0]}function o(){var e,t=this.stride,n=new Array(t.length);for(e=0;e<n.length;++e)n[e]=[Math.abs(t[e]),e];n.sort(a);var r=new Array(n.length);for(e=0;e<r.length;++e)r[e]=n[e][1];return r}var s={T:function(e){function t(e){this.data=e}var n=t.prototype;return n.dtype=e,n.index=function(){return-1},n.size=0,n.dimension=-1,n.shape=n.stride=n.order=[],n.lo=n.hi=n.transpose=n.step=function(){return new t(this.data)},n.get=n.set=function(){},n.pick=function(){return null},function(e){return new t(e)}},0:function(e,t){function n(e,t){this.data=e,this.offset=t}var r=n.prototype;return r.dtype=e,r.index=function(){return this.offset},r.dimension=0,r.size=1,r.shape=r.stride=r.order=[],r.lo=r.hi=r.transpose=r.step=function(){return new n(this.data,this.offset)},r.pick=function(){return t(this.data)},r.valueOf=r.get=function(){return"generic"===e?this.data.get(this.offset):this.data[this.offset]},r.set=function(t){return"generic"===e?this.data.set(this.offset,t):this.data[this.offset]=t},function(e,t,r,i){return new n(e,i)}},1:function(e,t,n){function r(e,t,n,r){this.data=e,this.shape=[t],this.stride=[n],this.offset=0|r}var i=r.prototype;return i.dtype=e,i.dimension=1,Object.defineProperty(i,"size",{get:function(){return this.shape[0]}}),i.order=[0],i.set=function(t,n){return"generic"===e?this.data.set(this.offset+this.stride[0]*t,n):this.data[this.offset+this.stride[0]*t]=n},i.get=function(t){return"generic"===e?this.data.get(this.offset+this.stride[0]*t):this.data[this.offset+this.stride[0]*t]},i.index=function(e){return this.offset+this.stride[0]*e},i.hi=function(e){return new r(this.data,"number"!=typeof e||e<0?this.shape[0]:0|e,this.stride[0],this.offset)},i.lo=function(e){var t=this.offset,n=0,i=this.shape[0],a=this.stride[0];return"number"==typeof e&&e>=0&&(t+=a*(n=0|e),i-=n),new r(this.data,i,a,t)},i.step=function(e){var t=this.shape[0],n=this.stride[0],i=this.offset,a=0,o=Math.ceil;return"number"==typeof e&&((a=0|e)<0?(i+=n*(t-1),t=o(-t/a)):t=o(t/a),n*=a),new r(this.data,t,n,i)},i.transpose=function(e){e=void 0===e?0:0|e;var t=this.shape,n=this.stride;return new r(this.data,t[e],n[e],this.offset)},i.pick=function(e){var n=[],r=[],i=this.offset;return"number"==typeof e&&e>=0?i=i+this.stride[0]*e|0:(n.push(this.shape[0]),r.push(this.stride[0])),(0,t[n.length+1])(this.data,n,r,i)},function(e,t,n,i){return new r(e,t[0],n[0],i)}},2:function(e,t,n){function r(e,t,n,r,i,a){this.data=e,this.shape=[t,n],this.stride=[r,i],this.offset=0|a}var i=r.prototype;return i.dtype=e,i.dimension=2,Object.defineProperty(i,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(i,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),i.set=function(t,n,r){return"generic"===e?this.data.set(this.offset+this.stride[0]*t+this.stride[1]*n,r):this.data[this.offset+this.stride[0]*t+this.stride[1]*n]=r},i.get=function(t,n){return"generic"===e?this.data.get(this.offset+this.stride[0]*t+this.stride[1]*n):this.data[this.offset+this.stride[0]*t+this.stride[1]*n]},i.index=function(e,t){return this.offset+this.stride[0]*e+this.stride[1]*t},i.hi=function(e,t){return new r(this.data,"number"!=typeof e||e<0?this.shape[0]:0|e,"number"!=typeof t||t<0?this.shape[1]:0|t,this.stride[0],this.stride[1],this.offset)},i.lo=function(e,t){var n=this.offset,i=0,a=this.shape[0],o=this.shape[1],s=this.stride[0],l=this.stride[1];return"number"==typeof e&&e>=0&&(n+=s*(i=0|e),a-=i),"number"==typeof t&&t>=0&&(n+=l*(i=0|t),o-=i),new r(this.data,a,o,s,l,n)},i.step=function(e,t){var n=this.shape[0],i=this.shape[1],a=this.stride[0],o=this.stride[1],s=this.offset,l=0,c=Math.ceil;return"number"==typeof e&&((l=0|e)<0?(s+=a*(n-1),n=c(-n/l)):n=c(n/l),a*=l),"number"==typeof t&&((l=0|t)<0?(s+=o*(i-1),i=c(-i/l)):i=c(i/l),o*=l),new r(this.data,n,i,a,o,s)},i.transpose=function(e,t){e=void 0===e?0:0|e,t=void 0===t?1:0|t;var n=this.shape,i=this.stride;return new r(this.data,n[e],n[t],i[e],i[t],this.offset)},i.pick=function(e,n){var r=[],i=[],a=this.offset;return"number"==typeof e&&e>=0?a=a+this.stride[0]*e|0:(r.push(this.shape[0]),i.push(this.stride[0])),"number"==typeof n&&n>=0?a=a+this.stride[1]*n|0:(r.push(this.shape[1]),i.push(this.stride[1])),(0,t[r.length+1])(this.data,r,i,a)},function(e,t,n,i){return new r(e,t[0],t[1],n[0],n[1],i)}},3:function(e,t,n){function r(e,t,n,r,i,a,o,s){this.data=e,this.shape=[t,n,r],this.stride=[i,a,o],this.offset=0|s}var i=r.prototype;return i.dtype=e,i.dimension=3,Object.defineProperty(i,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(i,"order",{get:function(){var e=Math.abs(this.stride[0]),t=Math.abs(this.stride[1]),n=Math.abs(this.stride[2]);return e>t?t>n?[2,1,0]:e>n?[1,2,0]:[1,0,2]:e>n?[2,0,1]:n>t?[0,1,2]:[0,2,1]}}),i.set=function(t,n,r,i){return"generic"===e?this.data.set(this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*r,i):this.data[this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*r]=i},i.get=function(t,n,r){return"generic"===e?this.data.get(this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*r):this.data[this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*r]},i.index=function(e,t,n){return this.offset+this.stride[0]*e+this.stride[1]*t+this.stride[2]*n},i.hi=function(e,t,n){return new r(this.data,"number"!=typeof e||e<0?this.shape[0]:0|e,"number"!=typeof t||t<0?this.shape[1]:0|t,"number"!=typeof n||n<0?this.shape[2]:0|n,this.stride[0],this.stride[1],this.stride[2],this.offset)},i.lo=function(e,t,n){var i=this.offset,a=0,o=this.shape[0],s=this.shape[1],l=this.shape[2],c=this.stride[0],u=this.stride[1],f=this.stride[2];return"number"==typeof e&&e>=0&&(i+=c*(a=0|e),o-=a),"number"==typeof t&&t>=0&&(i+=u*(a=0|t),s-=a),"number"==typeof n&&n>=0&&(i+=f*(a=0|n),l-=a),new r(this.data,o,s,l,c,u,f,i)},i.step=function(e,t,n){var i=this.shape[0],a=this.shape[1],o=this.shape[2],s=this.stride[0],l=this.stride[1],c=this.stride[2],u=this.offset,f=0,d=Math.ceil;return"number"==typeof e&&((f=0|e)<0?(u+=s*(i-1),i=d(-i/f)):i=d(i/f),s*=f),"number"==typeof t&&((f=0|t)<0?(u+=l*(a-1),a=d(-a/f)):a=d(a/f),l*=f),"number"==typeof n&&((f=0|n)<0?(u+=c*(o-1),o=d(-o/f)):o=d(o/f),c*=f),new r(this.data,i,a,o,s,l,c,u)},i.transpose=function(e,t,n){e=void 0===e?0:0|e,t=void 0===t?1:0|t,n=void 0===n?2:0|n;var i=this.shape,a=this.stride;return new r(this.data,i[e],i[t],i[n],a[e],a[t],a[n],this.offset)},i.pick=function(e,n,r){var i=[],a=[],o=this.offset;return"number"==typeof e&&e>=0?o=o+this.stride[0]*e|0:(i.push(this.shape[0]),a.push(this.stride[0])),"number"==typeof n&&n>=0?o=o+this.stride[1]*n|0:(i.push(this.shape[1]),a.push(this.stride[1])),"number"==typeof r&&r>=0?o=o+this.stride[2]*r|0:(i.push(this.shape[2]),a.push(this.stride[2])),(0,t[i.length+1])(this.data,i,a,o)},function(e,t,n,i){return new r(e,t[0],t[1],t[2],n[0],n[1],n[2],i)}},4:function(e,t,n){function r(e,t,n,r,i,a,o,s,l,c){this.data=e,this.shape=[t,n,r,i],this.stride=[a,o,s,l],this.offset=0|c}var i=r.prototype;return i.dtype=e,i.dimension=4,Object.defineProperty(i,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(i,"order",{get:n}),i.set=function(t,n,r,i,a){return"generic"===e?this.data.set(this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*r+this.stride[3]*i,a):this.data[this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*r+this.stride[3]*i]=a},i.get=function(t,n,r,i){return"generic"===e?this.data.get(this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*r+this.stride[3]*i):this.data[this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*r+this.stride[3]*i]},i.index=function(e,t,n,r){return this.offset+this.stride[0]*e+this.stride[1]*t+this.stride[2]*n+this.stride[3]*r},i.hi=function(e,t,n,i){return new r(this.data,"number"!=typeof e||e<0?this.shape[0]:0|e,"number"!=typeof t||t<0?this.shape[1]:0|t,"number"!=typeof n||n<0?this.shape[2]:0|n,"number"!=typeof i||i<0?this.shape[3]:0|i,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},i.lo=function(e,t,n,i){var a=this.offset,o=0,s=this.shape[0],l=this.shape[1],c=this.shape[2],u=this.shape[3],f=this.stride[0],d=this.stride[1],h=this.stride[2],p=this.stride[3];return"number"==typeof e&&e>=0&&(a+=f*(o=0|e),s-=o),"number"==typeof t&&t>=0&&(a+=d*(o=0|t),l-=o),"number"==typeof n&&n>=0&&(a+=h*(o=0|n),c-=o),"number"==typeof i&&i>=0&&(a+=p*(o=0|i),u-=o),new r(this.data,s,l,c,u,f,d,h,p,a)},i.step=function(e,t,n,i){var a=this.shape[0],o=this.shape[1],s=this.shape[2],l=this.shape[3],c=this.stride[0],u=this.stride[1],f=this.stride[2],d=this.stride[3],h=this.offset,p=0,m=Math.ceil;return"number"==typeof e&&((p=0|e)<0?(h+=c*(a-1),a=m(-a/p)):a=m(a/p),c*=p),"number"==typeof t&&((p=0|t)<0?(h+=u*(o-1),o=m(-o/p)):o=m(o/p),u*=p),"number"==typeof n&&((p=0|n)<0?(h+=f*(s-1),s=m(-s/p)):s=m(s/p),f*=p),"number"==typeof i&&((p=0|i)<0?(h+=d*(l-1),l=m(-l/p)):l=m(l/p),d*=p),new r(this.data,a,o,s,l,c,u,f,d,h)},i.transpose=function(e,t,n,i){e=void 0===e?0:0|e,t=void 0===t?1:0|t,n=void 0===n?2:0|n,i=void 0===i?3:0|i;var a=this.shape,o=this.stride;return new r(this.data,a[e],a[t],a[n],a[i],o[e],o[t],o[n],o[i],this.offset)},i.pick=function(e,n,r,i){var a=[],o=[],s=this.offset;return"number"==typeof e&&e>=0?s=s+this.stride[0]*e|0:(a.push(this.shape[0]),o.push(this.stride[0])),"number"==typeof n&&n>=0?s=s+this.stride[1]*n|0:(a.push(this.shape[1]),o.push(this.stride[1])),"number"==typeof r&&r>=0?s=s+this.stride[2]*r|0:(a.push(this.shape[2]),o.push(this.stride[2])),"number"==typeof i&&i>=0?s=s+this.stride[3]*i|0:(a.push(this.shape[3]),o.push(this.stride[3])),(0,t[a.length+1])(this.data,a,o,s)},function(e,t,n,i){return new r(e,t[0],t[1],t[2],t[3],n[0],n[1],n[2],n[3],i)}},5:function(e,t,n){function r(e,t,n,r,i,a,o,s,l,c,u,f){this.data=e,this.shape=[t,n,r,i,a],this.stride=[o,s,l,c,u],this.offset=0|f}var i=r.prototype;return i.dtype=e,i.dimension=5,Object.defineProperty(i,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(i,"order",{get:n}),i.set=function(t,n,r,i,a,o){return"generic"===e?this.data.set(this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*r+this.stride[3]*i+this.stride[4]*a,o):this.data[this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*r+this.stride[3]*i+this.stride[4]*a]=o},i.get=function(t,n,r,i,a){return"generic"===e?this.data.get(this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*r+this.stride[3]*i+this.stride[4]*a):this.data[this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*r+this.stride[3]*i+this.stride[4]*a]},i.index=function(e,t,n,r,i){return this.offset+this.stride[0]*e+this.stride[1]*t+this.stride[2]*n+this.stride[3]*r+this.stride[4]*i},i.hi=function(e,t,n,i,a){return new r(this.data,"number"!=typeof e||e<0?this.shape[0]:0|e,"number"!=typeof t||t<0?this.shape[1]:0|t,"number"!=typeof n||n<0?this.shape[2]:0|n,"number"!=typeof i||i<0?this.shape[3]:0|i,"number"!=typeof a||a<0?this.shape[4]:0|a,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},i.lo=function(e,t,n,i,a){var o=this.offset,s=0,l=this.shape[0],c=this.shape[1],u=this.shape[2],f=this.shape[3],d=this.shape[4],h=this.stride[0],p=this.stride[1],m=this.stride[2],g=this.stride[3],v=this.stride[4];return"number"==typeof e&&e>=0&&(o+=h*(s=0|e),l-=s),"number"==typeof t&&t>=0&&(o+=p*(s=0|t),c-=s),"number"==typeof n&&n>=0&&(o+=m*(s=0|n),u-=s),"number"==typeof i&&i>=0&&(o+=g*(s=0|i),f-=s),"number"==typeof a&&a>=0&&(o+=v*(s=0|a),d-=s),new r(this.data,l,c,u,f,d,h,p,m,g,v,o)},i.step=function(e,t,n,i,a){var o=this.shape[0],s=this.shape[1],l=this.shape[2],c=this.shape[3],u=this.shape[4],f=this.stride[0],d=this.stride[1],h=this.stride[2],p=this.stride[3],m=this.stride[4],g=this.offset,v=0,y=Math.ceil;return"number"==typeof e&&((v=0|e)<0?(g+=f*(o-1),o=y(-o/v)):o=y(o/v),f*=v),"number"==typeof t&&((v=0|t)<0?(g+=d*(s-1),s=y(-s/v)):s=y(s/v),d*=v),"number"==typeof n&&((v=0|n)<0?(g+=h*(l-1),l=y(-l/v)):l=y(l/v),h*=v),"number"==typeof i&&((v=0|i)<0?(g+=p*(c-1),c=y(-c/v)):c=y(c/v),p*=v),"number"==typeof a&&((v=0|a)<0?(g+=m*(u-1),u=y(-u/v)):u=y(u/v),m*=v),new r(this.data,o,s,l,c,u,f,d,h,p,m,g)},i.transpose=function(e,t,n,i,a){e=void 0===e?0:0|e,t=void 0===t?1:0|t,n=void 0===n?2:0|n,i=void 0===i?3:0|i,a=void 0===a?4:0|a;var o=this.shape,s=this.stride;return new r(this.data,o[e],o[t],o[n],o[i],o[a],s[e],s[t],s[n],s[i],s[a],this.offset)},i.pick=function(e,n,r,i,a){var o=[],s=[],l=this.offset;return"number"==typeof e&&e>=0?l=l+this.stride[0]*e|0:(o.push(this.shape[0]),s.push(this.stride[0])),"number"==typeof n&&n>=0?l=l+this.stride[1]*n|0:(o.push(this.shape[1]),s.push(this.stride[1])),"number"==typeof r&&r>=0?l=l+this.stride[2]*r|0:(o.push(this.shape[2]),s.push(this.stride[2])),"number"==typeof i&&i>=0?l=l+this.stride[3]*i|0:(o.push(this.shape[3]),s.push(this.stride[3])),"number"==typeof a&&a>=0?l=l+this.stride[4]*a|0:(o.push(this.shape[4]),s.push(this.stride[4])),(0,t[o.length+1])(this.data,o,s,l)},function(e,t,n,i){return new r(e,t[0],t[1],t[2],t[3],t[4],n[0],n[1],n[2],n[3],n[4],i)}}};function l(e,t){var n=-1===t?"T":String(t),r=s[n];return-1===t?r(e):0===t?r(e,c[e][0]):r(e,c[e],o)}var c={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};e.exports=function(e,t,n,a){if(void 0===e)return(0,c.array[0])([]);"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var o=t.length;if(void 0===n){n=new Array(o);for(var s=o-1,u=1;s>=0;--s)n[s]=u,u*=t[s]}if(void 0===a){a=0;for(s=0;s<o;++s)n[s]<0&&(a-=(t[s]-1)*n[s])}for(var f=function(e){if(r(e))return"buffer";if(i)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(e)?"array":"generic"}(e),d=c[f];d.length<=o+1;)d.push(l(f,d.length-1));return(0,d[o+1])(e,t,n,a)}},1278:function(e,t,n){"use strict";var r=n(2361),i=Math.pow(2,-1074),a=-1>>>0;e.exports=function(e,t){if(isNaN(e)||isNaN(t))return NaN;if(e===t)return e;if(0===e)return t<0?-i:i;var n=r.hi(e),o=r.lo(e);t>e==e>0?o===a?(n+=1,o=0):o+=1:0===o?(o=a,n-=1):o-=1;return r.pack(o,n)}},8406:function(e,t){t.vertexNormals=function(e,t,n){for(var r=t.length,i=new Array(r),a=void 0===n?1e-6:n,o=0;o<r;++o)i[o]=[0,0,0];for(o=0;o<e.length;++o)for(var s=e[o],l=0,c=s[s.length-1],u=s[0],f=0;f<s.length;++f){l=c,c=u,u=s[(f+1)%s.length];for(var d=t[l],h=t[c],p=t[u],m=new Array(3),g=0,v=new Array(3),y=0,b=0;b<3;++b)m[b]=d[b]-h[b],g+=m[b]*m[b],v[b]=p[b]-h[b],y+=v[b]*v[b];if(g*y>a){var x=i[c],_=1/Math.sqrt(g*y);for(b=0;b<3;++b){var w=(b+1)%3,A=(b+2)%3;x[b]+=_*(v[w]*m[A]-v[A]*m[w])}}}for(o=0;o<r;++o){x=i[o];var k=0;for(b=0;b<3;++b)k+=x[b]*x[b];if(k>a)for(_=1/Math.sqrt(k),b=0;b<3;++b)x[b]*=_;else for(b=0;b<3;++b)x[b]=0}return i},t.faceNormals=function(e,t,n){for(var r=e.length,i=new Array(r),a=void 0===n?1e-6:n,o=0;o<r;++o){for(var s=e[o],l=new Array(3),c=0;c<3;++c)l[c]=t[s[c]];var u=new Array(3),f=new Array(3);for(c=0;c<3;++c)u[c]=l[1][c]-l[0][c],f[c]=l[2][c]-l[0][c];var d=new Array(3),h=0;for(c=0;c<3;++c){var p=(c+1)%3,m=(c+2)%3;d[c]=u[p]*f[m]-u[m]*f[p],h+=d[c]*d[c]}h=h>a?1/Math.sqrt(h):0;for(c=0;c<3;++c)d[c]*=h;i[o]=d}return i}},4081:function(e){"use strict";e.exports=function(e,t,n,r,i,a,o,s,l,c){var u=t+a+c;if(f>0){var f=Math.sqrt(u+1);e[0]=.5*(o-l)/f,e[1]=.5*(s-r)/f,e[2]=.5*(n-a)/f,e[3]=.5*f}else{var d=Math.max(t,a,c);f=Math.sqrt(2*d-u+1);t>=d?(e[0]=.5*f,e[1]=.5*(i+n)/f,e[2]=.5*(s+r)/f,e[3]=.5*(o-l)/f):a>=d?(e[0]=.5*(n+i)/f,e[1]=.5*f,e[2]=.5*(l+o)/f,e[3]=.5*(s-r)/f):(e[0]=.5*(r+s)/f,e[1]=.5*(o+l)/f,e[2]=.5*f,e[3]=.5*(n-i)/f)}return e}},9977:function(e,t,n){"use strict";e.exports=function(e){var t=(e=e||{}).center||[0,0,0],n=e.rotation||[0,0,0,1],r=e.radius||1;t=[].slice.call(t,0,3),u(n=[].slice.call(n,0,4),n);var i=new f(n,t,Math.log(r));i.setDistanceLimits(e.zoomMin,e.zoomMax),("eye"in e||"up"in e)&&i.lookAt(0,e.eye,e.center,e.up);return i};var r=n(9215),i=n(6582),a=n(7399),o=n(7608),s=n(4081);function l(e,t,n){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(n,2))}function c(e,t,n,r){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(n,2)+Math.pow(r,2))}function u(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=c(n,r,i,a);o>1e-6?(e[0]=n/o,e[1]=r/o,e[2]=i/o,e[3]=a/o):(e[0]=e[1]=e[2]=0,e[3]=1)}function f(e,t,n){this.radius=r([n]),this.center=r(t),this.rotation=r(e),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var d=f.prototype;d.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},d.recalcMatrix=function(e){this.radius.curve(e),this.center.curve(e),this.rotation.curve(e);var t=this.computedRotation;u(t,t);var n=this.computedMatrix;a(n,t);var r=this.computedCenter,i=this.computedEye,o=this.computedUp,s=Math.exp(this.computedRadius[0]);i[0]=r[0]+s*n[2],i[1]=r[1]+s*n[6],i[2]=r[2]+s*n[10],o[0]=n[1],o[1]=n[5],o[2]=n[9];for(var l=0;l<3;++l){for(var c=0,f=0;f<3;++f)c+=n[l+4*f]*i[f];n[12+l]=-c}},d.getMatrix=function(e,t){this.recalcMatrix(e);var n=this.computedMatrix;if(t){for(var r=0;r<16;++r)t[r]=n[r];return t}return n},d.idle=function(e){this.center.idle(e),this.radius.idle(e),this.rotation.idle(e)},d.flush=function(e){this.center.flush(e),this.radius.flush(e),this.rotation.flush(e)},d.pan=function(e,t,n,r){t=t||0,n=n||0,r=r||0,this.recalcMatrix(e);var i=this.computedMatrix,a=i[1],o=i[5],s=i[9],c=l(a,o,s);a/=c,o/=c,s/=c;var u=i[0],f=i[4],d=i[8],h=u*a+f*o+d*s,p=l(u-=a*h,f-=o*h,d-=s*h);u/=p,f/=p,d/=p;var m=i[2],g=i[6],v=i[10],y=m*a+g*o+v*s,b=m*u+g*f+v*d,x=l(m-=y*a+b*u,g-=y*o+b*f,v-=y*s+b*d);m/=x,g/=x,v/=x;var _=u*t+a*n,w=f*t+o*n,A=d*t+s*n;this.center.move(e,_,w,A);var k=Math.exp(this.computedRadius[0]);k=Math.max(1e-4,k+r),this.radius.set(e,Math.log(k))},d.rotate=function(e,t,n,r){this.recalcMatrix(e),t=t||0,n=n||0;var i=this.computedMatrix,a=i[0],o=i[4],s=i[8],u=i[1],f=i[5],d=i[9],h=i[2],p=i[6],m=i[10],g=t*a+n*u,v=t*o+n*f,y=t*s+n*d,b=-(p*y-m*v),x=-(m*g-h*y),_=-(h*v-p*g),w=Math.sqrt(Math.max(0,1-Math.pow(b,2)-Math.pow(x,2)-Math.pow(_,2))),A=c(b,x,_,w);A>1e-6?(b/=A,x/=A,_/=A,w/=A):(b=x=_=0,w=1);var k=this.computedRotation,E=k[0],T=k[1],M=k[2],S=k[3],C=E*w+S*b+T*_-M*x,O=T*w+S*x+M*b-E*_,R=M*w+S*_+E*x-T*b,N=S*w-E*b-T*x-M*_;if(r){b=h,x=p,_=m;var L=Math.sin(r)/l(b,x,_);b*=L,x*=L,_*=L,N=N*(w=Math.cos(t))-(C=C*w+N*b+O*_-R*x)*b-(O=O*w+N*x+R*b-C*_)*x-(R=R*w+N*_+C*x-O*b)*_}var D=c(C,O,R,N);D>1e-6?(C/=D,O/=D,R/=D,N/=D):(C=O=R=0,N=1),this.rotation.set(e,C,O,R,N)},d.lookAt=function(e,t,n,r){this.recalcMatrix(e),n=n||this.computedCenter,t=t||this.computedEye,r=r||this.computedUp;var a=this.computedMatrix;i(a,t,n,r);var o=this.computedRotation;s(o,a[0],a[1],a[2],a[4],a[5],a[6],a[8],a[9],a[10]),u(o,o),this.rotation.set(e,o[0],o[1],o[2],o[3]);for(var l=0,c=0;c<3;++c)l+=Math.pow(n[c]-t[c],2);this.radius.set(e,.5*Math.log(Math.max(l,1e-6))),this.center.set(e,n[0],n[1],n[2])},d.translate=function(e,t,n,r){this.center.move(e,t||0,n||0,r||0)},d.setMatrix=function(e,t){var n=this.computedRotation;s(n,t[0],t[1],t[2],t[4],t[5],t[6],t[8],t[9],t[10]),u(n,n),this.rotation.set(e,n[0],n[1],n[2],n[3]);var r=this.computedMatrix;o(r,t);var i=r[15];if(Math.abs(i)>1e-6){var a=r[12]/i,l=r[13]/i,c=r[14]/i;this.recalcMatrix(e);var f=Math.exp(this.computedRadius[0]);this.center.set(e,a-r[2]*f,l-r[6]*f,c-r[10]*f),this.radius.idle(e)}else this.center.idle(e),this.radius.idle(e)},d.setDistance=function(e,t){t>0&&this.radius.set(e,Math.log(t))},d.setDistanceLimits=function(e,t){e=e>0?Math.log(e):-1/0,t=t>0?Math.log(t):1/0,t=Math.max(t,e),this.radius.bounds[0][0]=e,this.radius.bounds[1][0]=t},d.getDistanceLimits=function(e){var t=this.radius.bounds;return e?(e[0]=Math.exp(t[0][0]),e[1]=Math.exp(t[1][0]),e):[Math.exp(t[0][0]),Math.exp(t[1][0])]},d.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},d.fromJSON=function(e){var t=this.lastT(),n=e.center;n&&this.center.set(t,n[0],n[1],n[2]);var r=e.rotation;r&&this.rotation.set(t,r[0],r[1],r[2],r[3]);var i=e.distance;i&&i>0&&this.radius.set(t,Math.log(i)),this.setDistanceLimits(e.zoomMin,e.zoomMax)}},1371:function(e,t,n){"use strict";var r=n(3233);e.exports=function(e,t,n){return r(n=void 0!==n?n+"":" ",t)+e}},3202:function(e){e.exports=function(e,t){t||(t=[0,""]),e=String(e);var n=parseFloat(e,10);return t[0]=n,t[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},3088:function(e,t,n){"use strict";e.exports=function(e,t){for(var n=0|t.length,i=e.length,a=[new Array(n),new Array(n)],o=0;o<n;++o)a[0][o]=[],a[1][o]=[];for(o=0;o<i;++o){var s=e[o];a[0][s[0]].push(s),a[1][s[1]].push(s)}var l=[];for(o=0;o<n;++o)a[0][o].length+a[1][o].length===0&&l.push([o]);function c(e,t){var n=a[t][e[t]];n.splice(n.indexOf(e),1)}function u(e,n,i){for(var o,s,l,u=0;u<2;++u)if(a[u][n].length>0){o=a[u][n][0],l=u;break}s=o[1^l];for(var f=0;f<2;++f)for(var d=a[f][n],h=0;h<d.length;++h){var p=d[h],m=p[1^f];r(t[e],t[n],t[s],t[m])>0&&(o=p,s=m,l=f)}return i||o&&c(o,l),s}function f(e,n){var i=a[n][e][0],o=[e];c(i,n);for(var s=i[1^n];;){for(;s!==e;)o.push(s),s=u(o[o.length-2],s,!1);if(a[0][e].length+a[1][e].length===0)break;var l=o[o.length-1],f=e,d=o[1],h=u(l,f,!0);if(r(t[l],t[f],t[d],t[h])<0)break;o.push(e),s=u(l,f)}return o}function d(e,t){return t[1]===t[t.length-1]}for(o=0;o<n;++o)for(var h=0;h<2;++h){for(var p=[];a[h][o].length>0;){a[0][o].length;var m=f(o,h);d(0,m)?p.push.apply(p,m):(p.length>0&&l.push(p),p=m)}p.length>0&&l.push(p)}return l};var r=n(3140)},5609:function(e,t,n){"use strict";e.exports=function(e,t){for(var n=r(e,t.length),i=new Array(t.length),a=new Array(t.length),o=[],s=0;s<t.length;++s){var l=n[s].length;a[s]=l,i[s]=!0,l<=1&&o.push(s)}for(;o.length>0;){i[h=o.pop()]=!1;var c=n[h];for(s=0;s<c.length;++s){var u=c[s];0==--a[u]&&o.push(u)}}var f=new Array(t.length),d=[];for(s=0;s<t.length;++s)if(i[s]){var h=d.length;f[s]=h,d.push(t[s])}else f[s]=-1;var p=[];for(s=0;s<e.length;++s){var m=e[s];i[m[0]]&&i[m[1]]&&p.push([f[m[0]],f[m[1]]])}return[p,d]};var r=n(3134)},2095:function(e,t,n){"use strict";e.exports=function(e,t){var n=c(e,t);e=n[0];for(var f=(t=n[1]).length,d=(e.length,r(e,t.length)),h=0;h<f;++h)if(d[h].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var p=i(e,t);var m=(p=p.filter((function(e){for(var n=e.length,r=[0],i=0;i<n;++i){var a=t[e[i]],l=t[e[(i+1)%n]],c=o(-a[0],a[1]),u=o(-a[0],l[1]),f=o(l[0],a[1]),d=o(l[0],l[1]);r=s(r,s(s(c,u),s(f,d)))}return r[r.length-1]>0}))).length,g=new Array(m),v=new Array(m);for(h=0;h<m;++h){g[h]=h;var y=new Array(m),b=p[h].map((function(e){return t[e]})),x=a([b]),_=0;e:for(var w=0;w<m;++w)if(y[w]=0,h!==w){for(var A=(q=p[w]).length,k=0;k<A;++k){var E=x(t[q[k]]);if(0!==E){E<0&&(y[w]=1,_+=1);continue e}}y[w]=1,_+=1}v[h]=[_,h,y]}v.sort((function(e,t){return t[0]-e[0]}));for(h=0;h<m;++h){var T=(y=v[h])[1],M=y[2];for(w=0;w<m;++w)M[w]&&(g[w]=T)}var S=function(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=[];return t}(m);for(h=0;h<m;++h)S[h].push(g[h]),S[g[h]].push(h);var C={},O=u(f,!1);for(h=0;h<m;++h)for(A=(q=p[h]).length,w=0;w<A;++w){var R=q[w],N=q[(w+1)%A],L=Math.min(R,N)+":"+Math.max(R,N);if(L in C){var D=C[L];S[D].push(h),S[h].push(D),O[R]=O[N]=!0}else C[L]=h}function P(e){for(var t=e.length,n=0;n<t;++n)if(!O[e[n]])return!1;return!0}var I=[],F=u(m,-1);for(h=0;h<m;++h)g[h]!==h||P(p[h])?F[h]=-1:(I.push(h),F[h]=0);n=[];for(;I.length>0;){var z=I.pop(),j=S[z];l(j,(function(e,t){return e-t}));var B,U=j.length,$=F[z];if(0===$)B=[q=p[z]];for(h=0;h<U;++h){var q,H=j[h];if(!(F[H]>=0))if(F[H]=1^$,I.push(H),0===$)P(q=p[H])||(q.reverse(),B.push(q))}0===$&&n.push(B)}return n};var r=n(3134),i=n(3088),a=n(5085),o=n(5250),s=n(8210),l=n(1682),c=n(5609);function u(e,t){for(var n=new Array(e),r=0;r<e;++r)n[r]=t;return n}},5085:function(e,t,n){e.exports=function(e){for(var t=e.length,n=[],a=[],s=0;s<t;++s)for(var u=e[s],f=u.length,d=f-1,h=0;h<f;d=h++){var p=u[d],m=u[h];p[0]===m[0]?a.push([p,m]):n.push([p,m])}if(0===n.length)return 0===a.length?c:(g=l(a),function(e){return g(e[0],e[1])?0:1});var g;var v=i(n),y=function(e,t){return function(n){var i=o.le(t,n[0]);if(i<0)return 1;var a=e[i];if(!a){if(!(i>0&&t[i]===n[0]))return 1;a=e[i-1]}for(var s=1;a;){var l=a.key,c=r(n,l[0],l[1]);if(l[0][0]<l[1][0])if(c<0)a=a.left;else{if(!(c>0))return 0;s=-1,a=a.right}else if(c>0)a=a.left;else{if(!(c<0))return 0;s=1,a=a.right}}return s}}(v.slabs,v.coordinates);return 0===a.length?y:function(e,t){return function(n){return e(n[0],n[1])?0:t(n)}}(l(a),y)};var r=n(3250)[3],i=n(4209),a=n(3352),o=n(2478);function s(){return!0}function l(e){for(var t={},n=0;n<e.length;++n){var r=e[n],i=r[0][0],o=r[0][1],l=r[1][1],c=[Math.min(o,l),Math.max(o,l)];i in t?t[i].push(c):t[i]=[c]}var u={},f=Object.keys(t);for(n=0;n<f.length;++n){var d=t[f[n]];u[f[n]]=a(d)}return function(e){return function(t,n){var r=e[t];return!!r&&!!r.queryPoint(n,s)}}(u)}function c(e){return 1}},9346:function(e){"use strict";var t=new Float64Array(4),n=new Float64Array(4),r=new Float64Array(4);e.exports=function(e,i,a,o,s){t.length<o.length&&(t=new Float64Array(o.length),n=new Float64Array(o.length),r=new Float64Array(o.length));for(var l=0;l<o.length;++l)t[l]=e[l]-o[l],n[l]=i[l]-e[l],r[l]=a[l]-e[l];var c=0,u=0,f=0,d=0,h=0,p=0;for(l=0;l<o.length;++l){var m=n[l],g=r[l],v=t[l];c+=m*m,u+=m*g,f+=g*g,d+=v*m,h+=v*g,p+=v*v}var y,b,x,_,w,A=Math.abs(c*f-u*u),k=u*h-f*d,E=u*d-c*h;if(k+E<=A)if(k<0)E<0&&d<0?(E=0,-d>=c?(k=1,y=c+2*d+p):y=d*(k=-d/c)+p):(k=0,h>=0?(E=0,y=p):-h>=f?(E=1,y=f+2*h+p):y=h*(E=-h/f)+p);else if(E<0)E=0,d>=0?(k=0,y=p):-d>=c?(k=1,y=c+2*d+p):y=d*(k=-d/c)+p;else{var T=1/A;y=(k*=T)*(c*k+u*(E*=T)+2*d)+E*(u*k+f*E+2*h)+p}else k<0?(x=f+h)>(b=u+d)?(_=x-b)>=(w=c-2*u+f)?(k=1,E=0,y=c+2*d+p):y=(k=_/w)*(c*k+u*(E=1-k)+2*d)+E*(u*k+f*E+2*h)+p:(k=0,x<=0?(E=1,y=f+2*h+p):h>=0?(E=0,y=p):y=h*(E=-h/f)+p):E<0?(x=c+d)>(b=u+h)?(_=x-b)>=(w=c-2*u+f)?(E=1,k=0,y=f+2*h+p):y=(k=1-(E=_/w))*(c*k+u*E+2*d)+E*(u*k+f*E+2*h)+p:(E=0,x<=0?(k=1,y=c+2*d+p):d>=0?(k=0,y=p):y=d*(k=-d/c)+p):(_=f+h-u-d)<=0?(k=0,E=1,y=f+2*h+p):_>=(w=c-2*u+f)?(k=1,E=0,y=c+2*d+p):y=(k=_/w)*(c*k+u*(E=1-k)+2*d)+E*(u*k+f*E+2*h)+p;var M=1-k-E;for(l=0;l<o.length;++l)s[l]=M*e[l]+k*i[l]+E*a[l];return y<0?0:y}},8648:function(e,t,n){e.exports=n(783)},2653:function(e,t,n){"use strict";var r=n(3865);e.exports=function(e,t){for(var n=e.length,i=new Array(n),a=0;a<n;++a)i[a]=r(e[a],t[a]);return i}},5838:function(e,t,n){"use strict";e.exports=function(e){for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=r(e[n]);return t};var r=n(7842)},8987:function(e,t,n){"use strict";var r=n(7842),i=n(6504);e.exports=function(e,t){for(var n=r(t),a=e.length,o=new Array(a),s=0;s<a;++s)o[s]=i(e[s],n);return o}},544:function(e,t,n){"use strict";var r=n(5572);e.exports=function(e,t){for(var n=e.length,i=new Array(n),a=0;a<n;++a)i[a]=r(e[a],t[a]);return i}},5771:function(e,t,n){"use strict";var r=n(8507),i=n(3788),a=n(2419);e.exports=function(e){e.sort(i);for(var t=e.length,n=0,o=0;o<t;++o){var s=e[o],l=a(s);if(0!==l){if(n>0){var c=e[n-1];if(0===r(s,c)&&a(c)!==l){n-=1;continue}}e[n++]=s}}return e.length=n,e}},3233:function(e){"use strict";var t,n="";e.exports=function(e,r){if("string"!=typeof e)throw new TypeError("expected a string");if(1===r)return e;if(2===r)return e+e;var i=e.length*r;if(t!==e||void 0===t)t=e,n="";else if(n.length>=i)return n.substr(0,i);for(;i>n.length&&r>1;)1&r&&(n+=e),r>>=1,e+=e;return n=(n+=e).substr(0,i)}},3025:function(e,t,n){e.exports=n.g.performance&&n.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},7004:function(e){"use strict";e.exports=function(e){for(var t=e.length,n=e[e.length-1],r=t,i=t-2;i>=0;--i){var a=n;(l=(s=e[i])-((n=a+s)-a))&&(e[--r]=n,n=l)}var o=0;for(i=r;i<t;++i){var s,l;(l=(s=n)-((n=(a=e[i])+s)-a))&&(e[o++]=l)}return e[o++]=n,e.length=o,e}},2962:function(e,t,n){"use strict";var r=n(5250),i=n(8210),a=n(3012),o=n(7004);function s(e,t,n,r){return function(t){return r(e(n(t[0][0],t[1][1]),n(-t[0][1],t[1][0])))}}function l(e,t,n,r){return function(i){return r(e(t(e(n(i[1][1],i[2][2]),n(-i[1][2],i[2][1])),i[0][0]),e(t(e(n(i[1][0],i[2][2]),n(-i[1][2],i[2][0])),-i[0][1]),t(e(n(i[1][0],i[2][1]),n(-i[1][1],i[2][0])),i[0][2]))))}}function c(e,t,n,r){return function(i){return r(e(e(t(e(t(e(n(i[2][2],i[3][3]),n(-i[2][3],i[3][2])),i[1][1]),e(t(e(n(i[2][1],i[3][3]),n(-i[2][3],i[3][1])),-i[1][2]),t(e(n(i[2][1],i[3][2]),n(-i[2][2],i[3][1])),i[1][3]))),i[0][0]),t(e(t(e(n(i[2][2],i[3][3]),n(-i[2][3],i[3][2])),i[1][0]),e(t(e(n(i[2][0],i[3][3]),n(-i[2][3],i[3][0])),-i[1][2]),t(e(n(i[2][0],i[3][2]),n(-i[2][2],i[3][0])),i[1][3]))),-i[0][1])),e(t(e(t(e(n(i[2][1],i[3][3]),n(-i[2][3],i[3][1])),i[1][0]),e(t(e(n(i[2][0],i[3][3]),n(-i[2][3],i[3][0])),-i[1][1]),t(e(n(i[2][0],i[3][1]),n(-i[2][1],i[3][0])),i[1][3]))),i[0][2]),t(e(t(e(n(i[2][1],i[3][2]),n(-i[2][2],i[3][1])),i[1][0]),e(t(e(n(i[2][0],i[3][2]),n(-i[2][2],i[3][0])),-i[1][1]),t(e(n(i[2][0],i[3][1]),n(-i[2][1],i[3][0])),i[1][2]))),-i[0][3]))))}}function u(e,t,n,r){return function(i){return r(e(e(t(e(e(t(e(t(e(n(i[3][3],i[4][4]),n(-i[3][4],i[4][3])),i[2][2]),e(t(e(n(i[3][2],i[4][4]),n(-i[3][4],i[4][2])),-i[2][3]),t(e(n(i[3][2],i[4][3]),n(-i[3][3],i[4][2])),i[2][4]))),i[1][1]),t(e(t(e(n(i[3][3],i[4][4]),n(-i[3][4],i[4][3])),i[2][1]),e(t(e(n(i[3][1],i[4][4]),n(-i[3][4],i[4][1])),-i[2][3]),t(e(n(i[3][1],i[4][3]),n(-i[3][3],i[4][1])),i[2][4]))),-i[1][2])),e(t(e(t(e(n(i[3][2],i[4][4]),n(-i[3][4],i[4][2])),i[2][1]),e(t(e(n(i[3][1],i[4][4]),n(-i[3][4],i[4][1])),-i[2][2]),t(e(n(i[3][1],i[4][2]),n(-i[3][2],i[4][1])),i[2][4]))),i[1][3]),t(e(t(e(n(i[3][2],i[4][3]),n(-i[3][3],i[4][2])),i[2][1]),e(t(e(n(i[3][1],i[4][3]),n(-i[3][3],i[4][1])),-i[2][2]),t(e(n(i[3][1],i[4][2]),n(-i[3][2],i[4][1])),i[2][3]))),-i[1][4]))),i[0][0]),t(e(e(t(e(t(e(n(i[3][3],i[4][4]),n(-i[3][4],i[4][3])),i[2][2]),e(t(e(n(i[3][2],i[4][4]),n(-i[3][4],i[4][2])),-i[2][3]),t(e(n(i[3][2],i[4][3]),n(-i[3][3],i[4][2])),i[2][4]))),i[1][0]),t(e(t(e(n(i[3][3],i[4][4]),n(-i[3][4],i[4][3])),i[2][0]),e(t(e(n(i[3][0],i[4][4]),n(-i[3][4],i[4][0])),-i[2][3]),t(e(n(i[3][0],i[4][3]),n(-i[3][3],i[4][0])),i[2][4]))),-i[1][2])),e(t(e(t(e(n(i[3][2],i[4][4]),n(-i[3][4],i[4][2])),i[2][0]),e(t(e(n(i[3][0],i[4][4]),n(-i[3][4],i[4][0])),-i[2][2]),t(e(n(i[3][0],i[4][2]),n(-i[3][2],i[4][0])),i[2][4]))),i[1][3]),t(e(t(e(n(i[3][2],i[4][3]),n(-i[3][3],i[4][2])),i[2][0]),e(t(e(n(i[3][0],i[4][3]),n(-i[3][3],i[4][0])),-i[2][2]),t(e(n(i[3][0],i[4][2]),n(-i[3][2],i[4][0])),i[2][3]))),-i[1][4]))),-i[0][1])),e(t(e(e(t(e(t(e(n(i[3][3],i[4][4]),n(-i[3][4],i[4][3])),i[2][1]),e(t(e(n(i[3][1],i[4][4]),n(-i[3][4],i[4][1])),-i[2][3]),t(e(n(i[3][1],i[4][3]),n(-i[3][3],i[4][1])),i[2][4]))),i[1][0]),t(e(t(e(n(i[3][3],i[4][4]),n(-i[3][4],i[4][3])),i[2][0]),e(t(e(n(i[3][0],i[4][4]),n(-i[3][4],i[4][0])),-i[2][3]),t(e(n(i[3][0],i[4][3]),n(-i[3][3],i[4][0])),i[2][4]))),-i[1][1])),e(t(e(t(e(n(i[3][1],i[4][4]),n(-i[3][4],i[4][1])),i[2][0]),e(t(e(n(i[3][0],i[4][4]),n(-i[3][4],i[4][0])),-i[2][1]),t(e(n(i[3][0],i[4][1]),n(-i[3][1],i[4][0])),i[2][4]))),i[1][3]),t(e(t(e(n(i[3][1],i[4][3]),n(-i[3][3],i[4][1])),i[2][0]),e(t(e(n(i[3][0],i[4][3]),n(-i[3][3],i[4][0])),-i[2][1]),t(e(n(i[3][0],i[4][1]),n(-i[3][1],i[4][0])),i[2][3]))),-i[1][4]))),i[0][2]),e(t(e(e(t(e(t(e(n(i[3][2],i[4][4]),n(-i[3][4],i[4][2])),i[2][1]),e(t(e(n(i[3][1],i[4][4]),n(-i[3][4],i[4][1])),-i[2][2]),t(e(n(i[3][1],i[4][2]),n(-i[3][2],i[4][1])),i[2][4]))),i[1][0]),t(e(t(e(n(i[3][2],i[4][4]),n(-i[3][4],i[4][2])),i[2][0]),e(t(e(n(i[3][0],i[4][4]),n(-i[3][4],i[4][0])),-i[2][2]),t(e(n(i[3][0],i[4][2]),n(-i[3][2],i[4][0])),i[2][4]))),-i[1][1])),e(t(e(t(e(n(i[3][1],i[4][4]),n(-i[3][4],i[4][1])),i[2][0]),e(t(e(n(i[3][0],i[4][4]),n(-i[3][4],i[4][0])),-i[2][1]),t(e(n(i[3][0],i[4][1]),n(-i[3][1],i[4][0])),i[2][4]))),i[1][2]),t(e(t(e(n(i[3][1],i[4][2]),n(-i[3][2],i[4][1])),i[2][0]),e(t(e(n(i[3][0],i[4][2]),n(-i[3][2],i[4][0])),-i[2][1]),t(e(n(i[3][0],i[4][1]),n(-i[3][1],i[4][0])),i[2][2]))),-i[1][4]))),-i[0][3]),t(e(e(t(e(t(e(n(i[3][2],i[4][3]),n(-i[3][3],i[4][2])),i[2][1]),e(t(e(n(i[3][1],i[4][3]),n(-i[3][3],i[4][1])),-i[2][2]),t(e(n(i[3][1],i[4][2]),n(-i[3][2],i[4][1])),i[2][3]))),i[1][0]),t(e(t(e(n(i[3][2],i[4][3]),n(-i[3][3],i[4][2])),i[2][0]),e(t(e(n(i[3][0],i[4][3]),n(-i[3][3],i[4][0])),-i[2][2]),t(e(n(i[3][0],i[4][2]),n(-i[3][2],i[4][0])),i[2][3]))),-i[1][1])),e(t(e(t(e(n(i[3][1],i[4][3]),n(-i[3][3],i[4][1])),i[2][0]),e(t(e(n(i[3][0],i[4][3]),n(-i[3][3],i[4][0])),-i[2][1]),t(e(n(i[3][0],i[4][1]),n(-i[3][1],i[4][0])),i[2][3]))),i[1][2]),t(e(t(e(n(i[3][1],i[4][2]),n(-i[3][2],i[4][1])),i[2][0]),e(t(e(n(i[3][0],i[4][2]),n(-i[3][2],i[4][0])),-i[2][1]),t(e(n(i[3][0],i[4][1]),n(-i[3][1],i[4][0])),i[2][2]))),-i[1][3]))),i[0][4])))))}}function f(e){return(2===e?s:3===e?l:4===e?c:5===e?u:void 0)(i,a,r,o)}var d=[function(){return[0]},function(e){return[e[0][0]]}];function h(e,t,n,r,i,a,o,s){return function(l){switch(l.length){case 0:return e(l);case 1:return t(l);case 2:return n(l);case 3:return r(l);case 4:return i(l);case 5:return a(l)}var c=o[l.length];return c||(c=o[l.length]=s(l.length)),c(l)}}!function(){for(;d.length<6;)d.push(f(d.length));e.exports=h.apply(void 0,d.concat([d,f]));for(var t=0;t<d.length;++t)e.exports[t]=d[t]}()},1944:function(e,t,n){"use strict";var r=n(5250),i=n(8210);e.exports=function(e,t){for(var n=r(e[0],t[0]),a=1;a<e.length;++a)n=i(n,r(e[a],t[a]));return n}},2646:function(e,t,n){"use strict";var r=n(5250),i=n(8210),a=n(8545),o=n(3012);function s(e){return(3===e?l:4===e?c:5===e?u:f)(i,a,r,o)}function l(e,t,n,r){return function(i,a,o){var s=n(i[0],i[0]),l=r(s,a[0]),c=r(s,o[0]),u=n(a[0],a[0]),f=r(u,i[0]),d=r(u,o[0]),h=n(o[0],o[0]),p=r(h,i[0]),m=r(h,a[0]),g=e(t(m,d),t(f,l)),v=t(p,c),y=t(g,v);return y[y.length-1]}}function c(e,t,n,r){return function(i,a,o,s){var l=e(n(i[0],i[0]),n(i[1],i[1])),c=r(l,a[0]),u=r(l,o[0]),f=r(l,s[0]),d=e(n(a[0],a[0]),n(a[1],a[1])),h=r(d,i[0]),p=r(d,o[0]),m=r(d,s[0]),g=e(n(o[0],o[0]),n(o[1],o[1])),v=r(g,i[0]),y=r(g,a[0]),b=r(g,s[0]),x=e(n(s[0],s[0]),n(s[1],s[1])),_=r(x,i[0]),w=r(x,a[0]),A=r(x,o[0]),k=e(e(r(t(A,b),a[1]),e(r(t(w,m),-o[1]),r(t(y,p),s[1]))),e(r(t(w,m),i[1]),e(r(t(_,f),-a[1]),r(t(h,c),s[1])))),E=e(e(r(t(A,b),i[1]),e(r(t(_,f),-o[1]),r(t(v,u),s[1]))),e(r(t(y,p),i[1]),e(r(t(v,u),-a[1]),r(t(h,c),o[1])))),T=t(k,E);return T[T.length-1]}}function u(e,t,n,r){return function(i,a,o,s,l){var c=e(n(i[0],i[0]),e(n(i[1],i[1]),n(i[2],i[2]))),u=r(c,a[0]),f=r(c,o[0]),d=r(c,s[0]),h=r(c,l[0]),p=e(n(a[0],a[0]),e(n(a[1],a[1]),n(a[2],a[2]))),m=r(p,i[0]),g=r(p,o[0]),v=r(p,s[0]),y=r(p,l[0]),b=e(n(o[0],o[0]),e(n(o[1],o[1]),n(o[2],o[2]))),x=r(b,i[0]),_=r(b,a[0]),w=r(b,s[0]),A=r(b,l[0]),k=e(n(s[0],s[0]),e(n(s[1],s[1]),n(s[2],s[2]))),E=r(k,i[0]),T=r(k,a[0]),M=r(k,o[0]),S=r(k,l[0]),C=e(n(l[0],l[0]),e(n(l[1],l[1]),n(l[2],l[2]))),O=r(C,i[0]),R=r(C,a[0]),N=r(C,o[0]),L=r(C,s[0]),D=e(e(e(r(e(r(t(L,S),o[1]),e(r(t(N,A),-s[1]),r(t(M,w),l[1]))),a[2]),e(r(e(r(t(L,S),a[1]),e(r(t(R,y),-s[1]),r(t(T,v),l[1]))),-o[2]),r(e(r(t(N,A),a[1]),e(r(t(R,y),-o[1]),r(t(_,g),l[1]))),s[2]))),e(r(e(r(t(M,w),a[1]),e(r(t(T,v),-o[1]),r(t(_,g),s[1]))),-l[2]),e(r(e(r(t(L,S),a[1]),e(r(t(R,y),-s[1]),r(t(T,v),l[1]))),i[2]),r(e(r(t(L,S),i[1]),e(r(t(O,h),-s[1]),r(t(E,d),l[1]))),-a[2])))),e(e(r(e(r(t(R,y),i[1]),e(r(t(O,h),-a[1]),r(t(m,u),l[1]))),s[2]),e(r(e(r(t(T,v),i[1]),e(r(t(E,d),-a[1]),r(t(m,u),s[1]))),-l[2]),r(e(r(t(M,w),a[1]),e(r(t(T,v),-o[1]),r(t(_,g),s[1]))),i[2]))),e(r(e(r(t(M,w),i[1]),e(r(t(E,d),-o[1]),r(t(x,f),s[1]))),-a[2]),e(r(e(r(t(T,v),i[1]),e(r(t(E,d),-a[1]),r(t(m,u),s[1]))),o[2]),r(e(r(t(_,g),i[1]),e(r(t(x,f),-a[1]),r(t(m,u),o[1]))),-s[2]))))),P=e(e(e(r(e(r(t(L,S),o[1]),e(r(t(N,A),-s[1]),r(t(M,w),l[1]))),i[2]),r(e(r(t(L,S),i[1]),e(r(t(O,h),-s[1]),r(t(E,d),l[1]))),-o[2])),e(r(e(r(t(N,A),i[1]),e(r(t(O,h),-o[1]),r(t(x,f),l[1]))),s[2]),r(e(r(t(M,w),i[1]),e(r(t(E,d),-o[1]),r(t(x,f),s[1]))),-l[2]))),e(e(r(e(r(t(N,A),a[1]),e(r(t(R,y),-o[1]),r(t(_,g),l[1]))),i[2]),r(e(r(t(N,A),i[1]),e(r(t(O,h),-o[1]),r(t(x,f),l[1]))),-a[2])),e(r(e(r(t(R,y),i[1]),e(r(t(O,h),-a[1]),r(t(m,u),l[1]))),o[2]),r(e(r(t(_,g),i[1]),e(r(t(x,f),-a[1]),r(t(m,u),o[1]))),-l[2])))),I=t(D,P);return I[I.length-1]}}function f(e,t,n,r){return function(i,a,o,s,l,c){var u=e(e(n(i[0],i[0]),n(i[1],i[1])),e(n(i[2],i[2]),n(i[3],i[3]))),f=r(u,a[0]),d=r(u,o[0]),h=r(u,s[0]),p=r(u,l[0]),m=r(u,c[0]),g=e(e(n(a[0],a[0]),n(a[1],a[1])),e(n(a[2],a[2]),n(a[3],a[3]))),v=r(g,i[0]),y=r(g,o[0]),b=r(g,s[0]),x=r(g,l[0]),_=r(g,c[0]),w=e(e(n(o[0],o[0]),n(o[1],o[1])),e(n(o[2],o[2]),n(o[3],o[3]))),A=r(w,i[0]),k=r(w,a[0]),E=r(w,s[0]),T=r(w,l[0]),M=r(w,c[0]),S=e(e(n(s[0],s[0]),n(s[1],s[1])),e(n(s[2],s[2]),n(s[3],s[3]))),C=r(S,i[0]),O=r(S,a[0]),R=r(S,o[0]),N=r(S,l[0]),L=r(S,c[0]),D=e(e(n(l[0],l[0]),n(l[1],l[1])),e(n(l[2],l[2]),n(l[3],l[3]))),P=r(D,i[0]),I=r(D,a[0]),F=r(D,o[0]),z=r(D,s[0]),j=r(D,c[0]),B=e(e(n(c[0],c[0]),n(c[1],c[1])),e(n(c[2],c[2]),n(c[3],c[3]))),U=r(B,i[0]),$=r(B,a[0]),q=r(B,o[0]),H=r(B,s[0]),V=r(B,l[0]),W=e(e(e(r(e(e(r(e(r(t(V,j),s[1]),e(r(t(H,L),-l[1]),r(t(z,N),c[1]))),o[2]),r(e(r(t(V,j),o[1]),e(r(t(q,M),-l[1]),r(t(F,T),c[1]))),-s[2])),e(r(e(r(t(H,L),o[1]),e(r(t(q,M),-s[1]),r(t(R,E),c[1]))),l[2]),r(e(r(t(z,N),o[1]),e(r(t(F,T),-s[1]),r(t(R,E),l[1]))),-c[2]))),a[3]),e(r(e(e(r(e(r(t(V,j),s[1]),e(r(t(H,L),-l[1]),r(t(z,N),c[1]))),a[2]),r(e(r(t(V,j),a[1]),e(r(t($,_),-l[1]),r(t(I,x),c[1]))),-s[2])),e(r(e(r(t(H,L),a[1]),e(r(t($,_),-s[1]),r(t(O,b),c[1]))),l[2]),r(e(r(t(z,N),a[1]),e(r(t(I,x),-s[1]),r(t(O,b),l[1]))),-c[2]))),-o[3]),r(e(e(r(e(r(t(V,j),o[1]),e(r(t(q,M),-l[1]),r(t(F,T),c[1]))),a[2]),r(e(r(t(V,j),a[1]),e(r(t($,_),-l[1]),r(t(I,x),c[1]))),-o[2])),e(r(e(r(t(q,M),a[1]),e(r(t($,_),-o[1]),r(t(k,y),c[1]))),l[2]),r(e(r(t(F,T),a[1]),e(r(t(I,x),-o[1]),r(t(k,y),l[1]))),-c[2]))),s[3]))),e(e(r(e(e(r(e(r(t(H,L),o[1]),e(r(t(q,M),-s[1]),r(t(R,E),c[1]))),a[2]),r(e(r(t(H,L),a[1]),e(r(t($,_),-s[1]),r(t(O,b),c[1]))),-o[2])),e(r(e(r(t(q,M),a[1]),e(r(t($,_),-o[1]),r(t(k,y),c[1]))),s[2]),r(e(r(t(R,E),a[1]),e(r(t(O,b),-o[1]),r(t(k,y),s[1]))),-c[2]))),-l[3]),r(e(e(r(e(r(t(z,N),o[1]),e(r(t(F,T),-s[1]),r(t(R,E),l[1]))),a[2]),r(e(r(t(z,N),a[1]),e(r(t(I,x),-s[1]),r(t(O,b),l[1]))),-o[2])),e(r(e(r(t(F,T),a[1]),e(r(t(I,x),-o[1]),r(t(k,y),l[1]))),s[2]),r(e(r(t(R,E),a[1]),e(r(t(O,b),-o[1]),r(t(k,y),s[1]))),-l[2]))),c[3])),e(r(e(e(r(e(r(t(V,j),s[1]),e(r(t(H,L),-l[1]),r(t(z,N),c[1]))),a[2]),r(e(r(t(V,j),a[1]),e(r(t($,_),-l[1]),r(t(I,x),c[1]))),-s[2])),e(r(e(r(t(H,L),a[1]),e(r(t($,_),-s[1]),r(t(O,b),c[1]))),l[2]),r(e(r(t(z,N),a[1]),e(r(t(I,x),-s[1]),r(t(O,b),l[1]))),-c[2]))),i[3]),r(e(e(r(e(r(t(V,j),s[1]),e(r(t(H,L),-l[1]),r(t(z,N),c[1]))),i[2]),r(e(r(t(V,j),i[1]),e(r(t(U,m),-l[1]),r(t(P,p),c[1]))),-s[2])),e(r(e(r(t(H,L),i[1]),e(r(t(U,m),-s[1]),r(t(C,h),c[1]))),l[2]),r(e(r(t(z,N),i[1]),e(r(t(P,p),-s[1]),r(t(C,h),l[1]))),-c[2]))),-a[3])))),e(e(e(r(e(e(r(e(r(t(V,j),a[1]),e(r(t($,_),-l[1]),r(t(I,x),c[1]))),i[2]),r(e(r(t(V,j),i[1]),e(r(t(U,m),-l[1]),r(t(P,p),c[1]))),-a[2])),e(r(e(r(t($,_),i[1]),e(r(t(U,m),-a[1]),r(t(v,f),c[1]))),l[2]),r(e(r(t(I,x),i[1]),e(r(t(P,p),-a[1]),r(t(v,f),l[1]))),-c[2]))),s[3]),r(e(e(r(e(r(t(H,L),a[1]),e(r(t($,_),-s[1]),r(t(O,b),c[1]))),i[2]),r(e(r(t(H,L),i[1]),e(r(t(U,m),-s[1]),r(t(C,h),c[1]))),-a[2])),e(r(e(r(t($,_),i[1]),e(r(t(U,m),-a[1]),r(t(v,f),c[1]))),s[2]),r(e(r(t(O,b),i[1]),e(r(t(C,h),-a[1]),r(t(v,f),s[1]))),-c[2]))),-l[3])),e(r(e(e(r(e(r(t(z,N),a[1]),e(r(t(I,x),-s[1]),r(t(O,b),l[1]))),i[2]),r(e(r(t(z,N),i[1]),e(r(t(P,p),-s[1]),r(t(C,h),l[1]))),-a[2])),e(r(e(r(t(I,x),i[1]),e(r(t(P,p),-a[1]),r(t(v,f),l[1]))),s[2]),r(e(r(t(O,b),i[1]),e(r(t(C,h),-a[1]),r(t(v,f),s[1]))),-l[2]))),c[3]),r(e(e(r(e(r(t(H,L),o[1]),e(r(t(q,M),-s[1]),r(t(R,E),c[1]))),a[2]),r(e(r(t(H,L),a[1]),e(r(t($,_),-s[1]),r(t(O,b),c[1]))),-o[2])),e(r(e(r(t(q,M),a[1]),e(r(t($,_),-o[1]),r(t(k,y),c[1]))),s[2]),r(e(r(t(R,E),a[1]),e(r(t(O,b),-o[1]),r(t(k,y),s[1]))),-c[2]))),i[3]))),e(e(r(e(e(r(e(r(t(H,L),o[1]),e(r(t(q,M),-s[1]),r(t(R,E),c[1]))),i[2]),r(e(r(t(H,L),i[1]),e(r(t(U,m),-s[1]),r(t(C,h),c[1]))),-o[2])),e(r(e(r(t(q,M),i[1]),e(r(t(U,m),-o[1]),r(t(A,d),c[1]))),s[2]),r(e(r(t(R,E),i[1]),e(r(t(C,h),-o[1]),r(t(A,d),s[1]))),-c[2]))),-a[3]),r(e(e(r(e(r(t(H,L),a[1]),e(r(t($,_),-s[1]),r(t(O,b),c[1]))),i[2]),r(e(r(t(H,L),i[1]),e(r(t(U,m),-s[1]),r(t(C,h),c[1]))),-a[2])),e(r(e(r(t($,_),i[1]),e(r(t(U,m),-a[1]),r(t(v,f),c[1]))),s[2]),r(e(r(t(O,b),i[1]),e(r(t(C,h),-a[1]),r(t(v,f),s[1]))),-c[2]))),o[3])),e(r(e(e(r(e(r(t(q,M),a[1]),e(r(t($,_),-o[1]),r(t(k,y),c[1]))),i[2]),r(e(r(t(q,M),i[1]),e(r(t(U,m),-o[1]),r(t(A,d),c[1]))),-a[2])),e(r(e(r(t($,_),i[1]),e(r(t(U,m),-a[1]),r(t(v,f),c[1]))),o[2]),r(e(r(t(k,y),i[1]),e(r(t(A,d),-a[1]),r(t(v,f),o[1]))),-c[2]))),-s[3]),r(e(e(r(e(r(t(R,E),a[1]),e(r(t(O,b),-o[1]),r(t(k,y),s[1]))),i[2]),r(e(r(t(R,E),i[1]),e(r(t(C,h),-o[1]),r(t(A,d),s[1]))),-a[2])),e(r(e(r(t(O,b),i[1]),e(r(t(C,h),-a[1]),r(t(v,f),s[1]))),o[2]),r(e(r(t(k,y),i[1]),e(r(t(A,d),-a[1]),r(t(v,f),o[1]))),-s[2]))),c[3]))))),G=e(e(e(r(e(e(r(e(r(t(V,j),s[1]),e(r(t(H,L),-l[1]),r(t(z,N),c[1]))),o[2]),r(e(r(t(V,j),o[1]),e(r(t(q,M),-l[1]),r(t(F,T),c[1]))),-s[2])),e(r(e(r(t(H,L),o[1]),e(r(t(q,M),-s[1]),r(t(R,E),c[1]))),l[2]),r(e(r(t(z,N),o[1]),e(r(t(F,T),-s[1]),r(t(R,E),l[1]))),-c[2]))),i[3]),e(r(e(e(r(e(r(t(V,j),s[1]),e(r(t(H,L),-l[1]),r(t(z,N),c[1]))),i[2]),r(e(r(t(V,j),i[1]),e(r(t(U,m),-l[1]),r(t(P,p),c[1]))),-s[2])),e(r(e(r(t(H,L),i[1]),e(r(t(U,m),-s[1]),r(t(C,h),c[1]))),l[2]),r(e(r(t(z,N),i[1]),e(r(t(P,p),-s[1]),r(t(C,h),l[1]))),-c[2]))),-o[3]),r(e(e(r(e(r(t(V,j),o[1]),e(r(t(q,M),-l[1]),r(t(F,T),c[1]))),i[2]),r(e(r(t(V,j),i[1]),e(r(t(U,m),-l[1]),r(t(P,p),c[1]))),-o[2])),e(r(e(r(t(q,M),i[1]),e(r(t(U,m),-o[1]),r(t(A,d),c[1]))),l[2]),r(e(r(t(F,T),i[1]),e(r(t(P,p),-o[1]),r(t(A,d),l[1]))),-c[2]))),s[3]))),e(e(r(e(e(r(e(r(t(H,L),o[1]),e(r(t(q,M),-s[1]),r(t(R,E),c[1]))),i[2]),r(e(r(t(H,L),i[1]),e(r(t(U,m),-s[1]),r(t(C,h),c[1]))),-o[2])),e(r(e(r(t(q,M),i[1]),e(r(t(U,m),-o[1]),r(t(A,d),c[1]))),s[2]),r(e(r(t(R,E),i[1]),e(r(t(C,h),-o[1]),r(t(A,d),s[1]))),-c[2]))),-l[3]),r(e(e(r(e(r(t(z,N),o[1]),e(r(t(F,T),-s[1]),r(t(R,E),l[1]))),i[2]),r(e(r(t(z,N),i[1]),e(r(t(P,p),-s[1]),r(t(C,h),l[1]))),-o[2])),e(r(e(r(t(F,T),i[1]),e(r(t(P,p),-o[1]),r(t(A,d),l[1]))),s[2]),r(e(r(t(R,E),i[1]),e(r(t(C,h),-o[1]),r(t(A,d),s[1]))),-l[2]))),c[3])),e(r(e(e(r(e(r(t(V,j),o[1]),e(r(t(q,M),-l[1]),r(t(F,T),c[1]))),a[2]),r(e(r(t(V,j),a[1]),e(r(t($,_),-l[1]),r(t(I,x),c[1]))),-o[2])),e(r(e(r(t(q,M),a[1]),e(r(t($,_),-o[1]),r(t(k,y),c[1]))),l[2]),r(e(r(t(F,T),a[1]),e(r(t(I,x),-o[1]),r(t(k,y),l[1]))),-c[2]))),i[3]),r(e(e(r(e(r(t(V,j),o[1]),e(r(t(q,M),-l[1]),r(t(F,T),c[1]))),i[2]),r(e(r(t(V,j),i[1]),e(r(t(U,m),-l[1]),r(t(P,p),c[1]))),-o[2])),e(r(e(r(t(q,M),i[1]),e(r(t(U,m),-o[1]),r(t(A,d),c[1]))),l[2]),r(e(r(t(F,T),i[1]),e(r(t(P,p),-o[1]),r(t(A,d),l[1]))),-c[2]))),-a[3])))),e(e(e(r(e(e(r(e(r(t(V,j),a[1]),e(r(t($,_),-l[1]),r(t(I,x),c[1]))),i[2]),r(e(r(t(V,j),i[1]),e(r(t(U,m),-l[1]),r(t(P,p),c[1]))),-a[2])),e(r(e(r(t($,_),i[1]),e(r(t(U,m),-a[1]),r(t(v,f),c[1]))),l[2]),r(e(r(t(I,x),i[1]),e(r(t(P,p),-a[1]),r(t(v,f),l[1]))),-c[2]))),o[3]),r(e(e(r(e(r(t(q,M),a[1]),e(r(t($,_),-o[1]),r(t(k,y),c[1]))),i[2]),r(e(r(t(q,M),i[1]),e(r(t(U,m),-o[1]),r(t(A,d),c[1]))),-a[2])),e(r(e(r(t($,_),i[1]),e(r(t(U,m),-a[1]),r(t(v,f),c[1]))),o[2]),r(e(r(t(k,y),i[1]),e(r(t(A,d),-a[1]),r(t(v,f),o[1]))),-c[2]))),-l[3])),e(r(e(e(r(e(r(t(F,T),a[1]),e(r(t(I,x),-o[1]),r(t(k,y),l[1]))),i[2]),r(e(r(t(F,T),i[1]),e(r(t(P,p),-o[1]),r(t(A,d),l[1]))),-a[2])),e(r(e(r(t(I,x),i[1]),e(r(t(P,p),-a[1]),r(t(v,f),l[1]))),o[2]),r(e(r(t(k,y),i[1]),e(r(t(A,d),-a[1]),r(t(v,f),o[1]))),-l[2]))),c[3]),r(e(e(r(e(r(t(z,N),o[1]),e(r(t(F,T),-s[1]),r(t(R,E),l[1]))),a[2]),r(e(r(t(z,N),a[1]),e(r(t(I,x),-s[1]),r(t(O,b),l[1]))),-o[2])),e(r(e(r(t(F,T),a[1]),e(r(t(I,x),-o[1]),r(t(k,y),l[1]))),s[2]),r(e(r(t(R,E),a[1]),e(r(t(O,b),-o[1]),r(t(k,y),s[1]))),-l[2]))),i[3]))),e(e(r(e(e(r(e(r(t(z,N),o[1]),e(r(t(F,T),-s[1]),r(t(R,E),l[1]))),i[2]),r(e(r(t(z,N),i[1]),e(r(t(P,p),-s[1]),r(t(C,h),l[1]))),-o[2])),e(r(e(r(t(F,T),i[1]),e(r(t(P,p),-o[1]),r(t(A,d),l[1]))),s[2]),r(e(r(t(R,E),i[1]),e(r(t(C,h),-o[1]),r(t(A,d),s[1]))),-l[2]))),-a[3]),r(e(e(r(e(r(t(z,N),a[1]),e(r(t(I,x),-s[1]),r(t(O,b),l[1]))),i[2]),r(e(r(t(z,N),i[1]),e(r(t(P,p),-s[1]),r(t(C,h),l[1]))),-a[2])),e(r(e(r(t(I,x),i[1]),e(r(t(P,p),-a[1]),r(t(v,f),l[1]))),s[2]),r(e(r(t(O,b),i[1]),e(r(t(C,h),-a[1]),r(t(v,f),s[1]))),-l[2]))),o[3])),e(r(e(e(r(e(r(t(F,T),a[1]),e(r(t(I,x),-o[1]),r(t(k,y),l[1]))),i[2]),r(e(r(t(F,T),i[1]),e(r(t(P,p),-o[1]),r(t(A,d),l[1]))),-a[2])),e(r(e(r(t(I,x),i[1]),e(r(t(P,p),-a[1]),r(t(v,f),l[1]))),o[2]),r(e(r(t(k,y),i[1]),e(r(t(A,d),-a[1]),r(t(v,f),o[1]))),-l[2]))),-s[3]),r(e(e(r(e(r(t(R,E),a[1]),e(r(t(O,b),-o[1]),r(t(k,y),s[1]))),i[2]),r(e(r(t(R,E),i[1]),e(r(t(C,h),-o[1]),r(t(A,d),s[1]))),-a[2])),e(r(e(r(t(O,b),i[1]),e(r(t(C,h),-a[1]),r(t(v,f),s[1]))),o[2]),r(e(r(t(k,y),i[1]),e(r(t(A,d),-a[1]),r(t(v,f),o[1]))),-s[2]))),l[3]))))),Y=t(W,G);return Y[Y.length-1]}}var d=[function(){return 0},function(){return 0},function(){return 0}];function h(e){var t=d[e.length];return t||(t=d[e.length]=s(e.length)),t.apply(void 0,e)}function p(e,t,n,r,i,a,o,s){return function(t,n,l,c,u,f){switch(arguments.length){case 0:case 1:return 0;case 2:return r(t,n);case 3:return i(t,n,l);case 4:return a(t,n,l,c);case 5:return o(t,n,l,c,u);case 6:return s(t,n,l,c,u,f)}for(var d=new Array(arguments.length),h=0;h<arguments.length;++h)d[h]=arguments[h];return e(d)}}!function(){for(;d.length<=6;)d.push(s(d.length));e.exports=p.apply(void 0,[h].concat(d));for(var t=0;t<=6;++t)e.exports[t]=d[t]}()},727:function(e,t,n){"use strict";var r=n(2962);function i(e){var t=2===e?a:3===e?o:4===e?s:5===e?l:c;return t(e<6?r[e]:r)}function a(e){return function(t,n){return[e([[+n[0],+t[0][1]],[+n[1],+t[1][1]]]),e([[+t[0][0],+n[0]],[+t[1][0],+n[1]]]),e(t)]}}function o(e){return function(t,n){return[e([[+n[0],+t[0][1],+t[0][2]],[+n[1],+t[1][1],+t[1][2]],[+n[2],+t[2][1],+t[2][2]]]),e([[+t[0][0],+n[0],+t[0][2]],[+t[1][0],+n[1],+t[1][2]],[+t[2][0],+n[2],+t[2][2]]]),e([[+t[0][0],+t[0][1],+n[0]],[+t[1][0],+t[1][1],+n[1]],[+t[2][0],+t[2][1],+n[2]]]),e(t)]}}function s(e){return function(t,n){return[e([[+n[0],+t[0][1],+t[0][2],+t[0][3]],[+n[1],+t[1][1],+t[1][2],+t[1][3]],[+n[2],+t[2][1],+t[2][2],+t[2][3]],[+n[3],+t[3][1],+t[3][2],+t[3][3]]]),e([[+t[0][0],+n[0],+t[0][2],+t[0][3]],[+t[1][0],+n[1],+t[1][2],+t[1][3]],[+t[2][0],+n[2],+t[2][2],+t[2][3]],[+t[3][0],+n[3],+t[3][2],+t[3][3]]]),e([[+t[0][0],+t[0][1],+n[0],+t[0][3]],[+t[1][0],+t[1][1],+n[1],+t[1][3]],[+t[2][0],+t[2][1],+n[2],+t[2][3]],[+t[3][0],+t[3][1],+n[3],+t[3][3]]]),e([[+t[0][0],+t[0][1],+t[0][2],+n[0]],[+t[1][0],+t[1][1],+t[1][2],+n[1]],[+t[2][0],+t[2][1],+t[2][2],+n[2]],[+t[3][0],+t[3][1],+t[3][2],+n[3]]]),e(t)]}}function l(e){return function(t,n){return[e([[+n[0],+t[0][1],+t[0][2],+t[0][3],+t[0][4]],[+n[1],+t[1][1],+t[1][2],+t[1][3],+t[1][4]],[+n[2],+t[2][1],+t[2][2],+t[2][3],+t[2][4]],[+n[3],+t[3][1],+t[3][2],+t[3][3],+t[3][4]],[+n[4],+t[4][1],+t[4][2],+t[4][3],+t[4][4]]]),e([[+t[0][0],+n[0],+t[0][2],+t[0][3],+t[0][4]],[+t[1][0],+n[1],+t[1][2],+t[1][3],+t[1][4]],[+t[2][0],+n[2],+t[2][2],+t[2][3],+t[2][4]],[+t[3][0],+n[3],+t[3][2],+t[3][3],+t[3][4]],[+t[4][0],+n[4],+t[4][2],+t[4][3],+t[4][4]]]),e([[+t[0][0],+t[0][1],+n[0],+t[0][3],+t[0][4]],[+t[1][0],+t[1][1],+n[1],+t[1][3],+t[1][4]],[+t[2][0],+t[2][1],+n[2],+t[2][3],+t[2][4]],[+t[3][0],+t[3][1],+n[3],+t[3][3],+t[3][4]],[+t[4][0],+t[4][1],+n[4],+t[4][3],+t[4][4]]]),e([[+t[0][0],+t[0][1],+t[0][2],+n[0],+t[0][4]],[+t[1][0],+t[1][1],+t[1][2],+n[1],+t[1][4]],[+t[2][0],+t[2][1],+t[2][2],+n[2],+t[2][4]],[+t[3][0],+t[3][1],+t[3][2],+n[3],+t[3][4]],[+t[4][0],+t[4][1],+t[4][2],+n[4],+t[4][4]]]),e([[+t[0][0],+t[0][1],+t[0][2],+t[0][3],+n[0]],[+t[1][0],+t[1][1],+t[1][2],+t[1][3],+n[1]],[+t[2][0],+t[2][1],+t[2][2],+t[2][3],+n[2]],[+t[3][0],+t[3][1],+t[3][2],+t[3][3],+n[3]],[+t[4][0],+t[4][1],+t[4][2],+t[4][3],+n[4]]]),e(t)]}}function c(e){return function(t,n){return[e([[+n[0],+t[0][1],+t[0][2],+t[0][3],+t[0][4],+t[0][5]],[+n[1],+t[1][1],+t[1][2],+t[1][3],+t[1][4],+t[1][5]],[+n[2],+t[2][1],+t[2][2],+t[2][3],+t[2][4],+t[2][5]],[+n[3],+t[3][1],+t[3][2],+t[3][3],+t[3][4],+t[3][5]],[+n[4],+t[4][1],+t[4][2],+t[4][3],+t[4][4],+t[4][5]],[+n[5],+t[5][1],+t[5][2],+t[5][3],+t[5][4],+t[5][5]]]),e([[+t[0][0],+n[0],+t[0][2],+t[0][3],+t[0][4],+t[0][5]],[+t[1][0],+n[1],+t[1][2],+t[1][3],+t[1][4],+t[1][5]],[+t[2][0],+n[2],+t[2][2],+t[2][3],+t[2][4],+t[2][5]],[+t[3][0],+n[3],+t[3][2],+t[3][3],+t[3][4],+t[3][5]],[+t[4][0],+n[4],+t[4][2],+t[4][3],+t[4][4],+t[4][5]],[+t[5][0],+n[5],+t[5][2],+t[5][3],+t[5][4],+t[5][5]]]),e([[+t[0][0],+t[0][1],+n[0],+t[0][3],+t[0][4],+t[0][5]],[+t[1][0],+t[1][1],+n[1],+t[1][3],+t[1][4],+t[1][5]],[+t[2][0],+t[2][1],+n[2],+t[2][3],+t[2][4],+t[2][5]],[+t[3][0],+t[3][1],+n[3],+t[3][3],+t[3][4],+t[3][5]],[+t[4][0],+t[4][1],+n[4],+t[4][3],+t[4][4],+t[4][5]],[+t[5][0],+t[5][1],+n[5],+t[5][3],+t[5][4],+t[5][5]]]),e([[+t[0][0],+t[0][1],+t[0][2],+n[0],+t[0][4],+t[0][5]],[+t[1][0],+t[1][1],+t[1][2],+n[1],+t[1][4],+t[1][5]],[+t[2][0],+t[2][1],+t[2][2],+n[2],+t[2][4],+t[2][5]],[+t[3][0],+t[3][1],+t[3][2],+n[3],+t[3][4],+t[3][5]],[+t[4][0],+t[4][1],+t[4][2],+n[4],+t[4][4],+t[4][5]],[+t[5][0],+t[5][1],+t[5][2],+n[5],+t[5][4],+t[5][5]]]),e([[+t[0][0],+t[0][1],+t[0][2],+t[0][3],+n[0],+t[0][5]],[+t[1][0],+t[1][1],+t[1][2],+t[1][3],+n[1],+t[1][5]],[+t[2][0],+t[2][1],+t[2][2],+t[2][3],+n[2],+t[2][5]],[+t[3][0],+t[3][1],+t[3][2],+t[3][3],+n[3],+t[3][5]],[+t[4][0],+t[4][1],+t[4][2],+t[4][3],+n[4],+t[4][5]],[+t[5][0],+t[5][1],+t[5][2],+t[5][3],+n[5],+t[5][5]]]),e([[+t[0][0],+t[0][1],+t[0][2],+t[0][3],+t[0][4],+n[0]],[+t[1][0],+t[1][1],+t[1][2],+t[1][3],+t[1][4],+n[1]],[+t[2][0],+t[2][1],+t[2][2],+t[2][3],+t[2][4],+n[2]],[+t[3][0],+t[3][1],+t[3][2],+t[3][3],+t[3][4],+n[3]],[+t[4][0],+t[4][1],+t[4][2],+t[4][3],+t[4][4],+n[4]],[+t[5][0],+t[5][1],+t[5][2],+t[5][3],+t[5][4],+n[5]]]),e(t)]}}var u=[function(){return[[0]]},function(e,t){return[[t[0]],[e[0][0]]]}];function f(e,t,n,r,i,a,o,s){return function(l,c){switch(l.length){case 0:return e(l,c);case 1:return t(l,c);case 2:return n(l,c);case 3:return r(l,c);case 4:return i(l,c);case 5:return a(l,c)}var u=o[l.length];return u||(u=o[l.length]=s(l.length)),u(l,c)}}!function(){for(;u.length<6;)u.push(i(u.length));e.exports=f.apply(void 0,u.concat([u,i]));for(var t=0;t<6;++t)e.exports[t]=u[t]}()},3250:function(e,t,n){"use strict";var r=n(5250),i=n(8210),a=n(3012),o=n(8545);function s(e,t,n,r){return function(n,i,a){var o=e(e(t(i[1],a[0]),t(-a[1],i[0])),e(t(n[1],i[0]),t(-i[1],n[0]))),s=e(t(n[1],a[0]),t(-a[1],n[0])),l=r(o,s);return l[l.length-1]}}function l(e,t,n,r){return function(i,a,o,s){var l=e(e(n(e(t(o[1],s[0]),t(-s[1],o[0])),a[2]),e(n(e(t(a[1],s[0]),t(-s[1],a[0])),-o[2]),n(e(t(a[1],o[0]),t(-o[1],a[0])),s[2]))),e(n(e(t(a[1],s[0]),t(-s[1],a[0])),i[2]),e(n(e(t(i[1],s[0]),t(-s[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),s[2])))),c=e(e(n(e(t(o[1],s[0]),t(-s[1],o[0])),i[2]),e(n(e(t(i[1],s[0]),t(-s[1],i[0])),-o[2]),n(e(t(i[1],o[0]),t(-o[1],i[0])),s[2]))),e(n(e(t(a[1],o[0]),t(-o[1],a[0])),i[2]),e(n(e(t(i[1],o[0]),t(-o[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),o[2])))),u=r(l,c);return u[u.length-1]}}function c(e,t,n,r){return function(i,a,o,s,l){var c=e(e(e(n(e(n(e(t(s[1],l[0]),t(-l[1],s[0])),o[2]),e(n(e(t(o[1],l[0]),t(-l[1],o[0])),-s[2]),n(e(t(o[1],s[0]),t(-s[1],o[0])),l[2]))),a[3]),e(n(e(n(e(t(s[1],l[0]),t(-l[1],s[0])),a[2]),e(n(e(t(a[1],l[0]),t(-l[1],a[0])),-s[2]),n(e(t(a[1],s[0]),t(-s[1],a[0])),l[2]))),-o[3]),n(e(n(e(t(o[1],l[0]),t(-l[1],o[0])),a[2]),e(n(e(t(a[1],l[0]),t(-l[1],a[0])),-o[2]),n(e(t(a[1],o[0]),t(-o[1],a[0])),l[2]))),s[3]))),e(n(e(n(e(t(o[1],s[0]),t(-s[1],o[0])),a[2]),e(n(e(t(a[1],s[0]),t(-s[1],a[0])),-o[2]),n(e(t(a[1],o[0]),t(-o[1],a[0])),s[2]))),-l[3]),e(n(e(n(e(t(s[1],l[0]),t(-l[1],s[0])),a[2]),e(n(e(t(a[1],l[0]),t(-l[1],a[0])),-s[2]),n(e(t(a[1],s[0]),t(-s[1],a[0])),l[2]))),i[3]),n(e(n(e(t(s[1],l[0]),t(-l[1],s[0])),i[2]),e(n(e(t(i[1],l[0]),t(-l[1],i[0])),-s[2]),n(e(t(i[1],s[0]),t(-s[1],i[0])),l[2]))),-a[3])))),e(e(n(e(n(e(t(a[1],l[0]),t(-l[1],a[0])),i[2]),e(n(e(t(i[1],l[0]),t(-l[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),l[2]))),s[3]),e(n(e(n(e(t(a[1],s[0]),t(-s[1],a[0])),i[2]),e(n(e(t(i[1],s[0]),t(-s[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),s[2]))),-l[3]),n(e(n(e(t(o[1],s[0]),t(-s[1],o[0])),a[2]),e(n(e(t(a[1],s[0]),t(-s[1],a[0])),-o[2]),n(e(t(a[1],o[0]),t(-o[1],a[0])),s[2]))),i[3]))),e(n(e(n(e(t(o[1],s[0]),t(-s[1],o[0])),i[2]),e(n(e(t(i[1],s[0]),t(-s[1],i[0])),-o[2]),n(e(t(i[1],o[0]),t(-o[1],i[0])),s[2]))),-a[3]),e(n(e(n(e(t(a[1],s[0]),t(-s[1],a[0])),i[2]),e(n(e(t(i[1],s[0]),t(-s[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),s[2]))),o[3]),n(e(n(e(t(a[1],o[0]),t(-o[1],a[0])),i[2]),e(n(e(t(i[1],o[0]),t(-o[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),o[2]))),-s[3]))))),u=e(e(e(n(e(n(e(t(s[1],l[0]),t(-l[1],s[0])),o[2]),e(n(e(t(o[1],l[0]),t(-l[1],o[0])),-s[2]),n(e(t(o[1],s[0]),t(-s[1],o[0])),l[2]))),i[3]),n(e(n(e(t(s[1],l[0]),t(-l[1],s[0])),i[2]),e(n(e(t(i[1],l[0]),t(-l[1],i[0])),-s[2]),n(e(t(i[1],s[0]),t(-s[1],i[0])),l[2]))),-o[3])),e(n(e(n(e(t(o[1],l[0]),t(-l[1],o[0])),i[2]),e(n(e(t(i[1],l[0]),t(-l[1],i[0])),-o[2]),n(e(t(i[1],o[0]),t(-o[1],i[0])),l[2]))),s[3]),n(e(n(e(t(o[1],s[0]),t(-s[1],o[0])),i[2]),e(n(e(t(i[1],s[0]),t(-s[1],i[0])),-o[2]),n(e(t(i[1],o[0]),t(-o[1],i[0])),s[2]))),-l[3]))),e(e(n(e(n(e(t(o[1],l[0]),t(-l[1],o[0])),a[2]),e(n(e(t(a[1],l[0]),t(-l[1],a[0])),-o[2]),n(e(t(a[1],o[0]),t(-o[1],a[0])),l[2]))),i[3]),n(e(n(e(t(o[1],l[0]),t(-l[1],o[0])),i[2]),e(n(e(t(i[1],l[0]),t(-l[1],i[0])),-o[2]),n(e(t(i[1],o[0]),t(-o[1],i[0])),l[2]))),-a[3])),e(n(e(n(e(t(a[1],l[0]),t(-l[1],a[0])),i[2]),e(n(e(t(i[1],l[0]),t(-l[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),l[2]))),o[3]),n(e(n(e(t(a[1],o[0]),t(-o[1],a[0])),i[2]),e(n(e(t(i[1],o[0]),t(-o[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),o[2]))),-l[3])))),f=r(c,u);return f[f.length-1]}}function u(e){return(3===e?s:4===e?l:c)(i,r,a,o)}var f=u(3),d=u(4),h=[function(){return 0},function(){return 0},function(e,t){return t[0]-e[0]},function(e,t,n){var r,i=(e[1]-n[1])*(t[0]-n[0]),a=(e[0]-n[0])*(t[1]-n[1]),o=i-a;if(i>0){if(a<=0)return o;r=i+a}else{if(!(i<0))return o;if(a>=0)return o;r=-(i+a)}var s=33306690738754716e-32*r;return o>=s||o<=-s?o:f(e,t,n)},function(e,t,n,r){var i=e[0]-r[0],a=t[0]-r[0],o=n[0]-r[0],s=e[1]-r[1],l=t[1]-r[1],c=n[1]-r[1],u=e[2]-r[2],f=t[2]-r[2],h=n[2]-r[2],p=a*c,m=o*l,g=o*s,v=i*c,y=i*l,b=a*s,x=u*(p-m)+f*(g-v)+h*(y-b),_=7771561172376103e-31*((Math.abs(p)+Math.abs(m))*Math.abs(u)+(Math.abs(g)+Math.abs(v))*Math.abs(f)+(Math.abs(y)+Math.abs(b))*Math.abs(h));return x>_||-x>_?x:d(e,t,n,r)}];function p(e){var t=h[e.length];return t||(t=h[e.length]=u(e.length)),t.apply(void 0,e)}function m(e,t,n,r,i,a,o){return function(t,n,s,l,c){switch(arguments.length){case 0:case 1:return 0;case 2:return r(t,n);case 3:return i(t,n,s);case 4:return a(t,n,s,l);case 5:return o(t,n,s,l,c)}for(var u=new Array(arguments.length),f=0;f<arguments.length;++f)u[f]=arguments[f];return e(u)}}!function(){for(;h.length<=5;)h.push(u(h.length));e.exports=m.apply(void 0,[p].concat(h));for(var t=0;t<=5;++t)e.exports[t]=h[t]}()},5382:function(e,t,n){"use strict";var r=n(8210),i=n(3012);e.exports=function(e,t){if(1===e.length)return i(t,e[0]);if(1===t.length)return i(e,t[0]);if(0===e.length||0===t.length)return[0];var n=[0];if(e.length<t.length)for(var a=0;a<e.length;++a)n=r(n,i(t,e[a]));else for(a=0;a<t.length;++a)n=r(n,i(e,t[a]));return n}},3012:function(e,t,n){"use strict";var r=n(5250),i=n(9362);e.exports=function(e,t){var n=e.length;if(1===n){var a=r(e[0],t);return a[0]?a:[a[1]]}var o=new Array(2*n),s=[.1,.1],l=[.1,.1],c=0;r(e[0],t,s),s[0]&&(o[c++]=s[0]);for(var u=1;u<n;++u){r(e[u],t,l);var f=s[1];i(f,l[0],s),s[0]&&(o[c++]=s[0]);var d=l[1],h=s[1],p=d+h,m=h-(p-d);s[1]=p,m&&(o[c++]=m)}s[1]&&(o[c++]=s[1]);0===c&&(o[c++]=0);return o.length=c,o}},1125:function(e,t,n){"use strict";e.exports=function(e,t,n,i){var a=r(e,n,i),o=r(t,n,i);if(a>0&&o>0||a<0&&o<0)return!1;var s=r(n,e,t),l=r(i,e,t);if(s>0&&l>0||s<0&&l<0)return!1;if(0===a&&0===o&&0===s&&0===l)return function(e,t,n,r){for(var i=0;i<2;++i){var a=e[i],o=t[i],s=Math.min(a,o),l=Math.max(a,o),c=n[i],u=r[i],f=Math.min(c,u);if(Math.max(c,u)<s||l<f)return!1}return!0}(e,t,n,i);return!0};var r=n(3250)[3]},8545:function(e){"use strict";e.exports=function(e,t){var n=0|e.length,r=0|t.length;if(1===n&&1===r)return function(e,t){var n=e+t,r=n-e,i=n-r,a=t-r,o=e-i,s=o+a;if(s)return[s,n];return[n]}(e[0],-t[0]);var i,a,o=new Array(n+r),s=0,l=0,c=0,u=Math.abs,f=e[l],d=u(f),h=-t[c],p=u(h);d<p?(a=f,(l+=1)<n&&(d=u(f=e[l]))):(a=h,(c+=1)<r&&(p=u(h=-t[c])));l<n&&d<p||c>=r?(i=f,(l+=1)<n&&(d=u(f=e[l]))):(i=h,(c+=1)<r&&(p=u(h=-t[c])));var m,g,v=i+a,y=v-i,b=a-y,x=b,_=v;for(;l<n&&c<r;)d<p?(i=f,(l+=1)<n&&(d=u(f=e[l]))):(i=h,(c+=1)<r&&(p=u(h=-t[c]))),(b=(a=x)-(y=(v=i+a)-i))&&(o[s++]=b),x=_-((m=_+v)-(g=m-_))+(v-g),_=m;for(;l<n;)(b=(a=x)-(y=(v=(i=f)+a)-i))&&(o[s++]=b),x=_-((m=_+v)-(g=m-_))+(v-g),_=m,(l+=1)<n&&(f=e[l]);for(;c<r;)(b=(a=x)-(y=(v=(i=h)+a)-i))&&(o[s++]=b),x=_-((m=_+v)-(g=m-_))+(v-g),_=m,(c+=1)<r&&(h=-t[c]);x&&(o[s++]=x);_&&(o[s++]=_);s||(o[s++]=0);return o.length=s,o}},8210:function(e){"use strict";e.exports=function(e,t){var n=0|e.length,r=0|t.length;if(1===n&&1===r)return function(e,t){var n=e+t,r=n-e,i=n-r,a=t-r,o=e-i,s=o+a;if(s)return[s,n];return[n]}(e[0],t[0]);var i,a,o=new Array(n+r),s=0,l=0,c=0,u=Math.abs,f=e[l],d=u(f),h=t[c],p=u(h);d<p?(a=f,(l+=1)<n&&(d=u(f=e[l]))):(a=h,(c+=1)<r&&(p=u(h=t[c])));l<n&&d<p||c>=r?(i=f,(l+=1)<n&&(d=u(f=e[l]))):(i=h,(c+=1)<r&&(p=u(h=t[c])));var m,g,v=i+a,y=v-i,b=a-y,x=b,_=v;for(;l<n&&c<r;)d<p?(i=f,(l+=1)<n&&(d=u(f=e[l]))):(i=h,(c+=1)<r&&(p=u(h=t[c]))),(b=(a=x)-(y=(v=i+a)-i))&&(o[s++]=b),x=_-((m=_+v)-(g=m-_))+(v-g),_=m;for(;l<n;)(b=(a=x)-(y=(v=(i=f)+a)-i))&&(o[s++]=b),x=_-((m=_+v)-(g=m-_))+(v-g),_=m,(l+=1)<n&&(f=e[l]);for(;c<r;)(b=(a=x)-(y=(v=(i=h)+a)-i))&&(o[s++]=b),x=_-((m=_+v)-(g=m-_))+(v-g),_=m,(c+=1)<r&&(h=t[c]);x&&(o[s++]=x);_&&(o[s++]=_);s||(o[s++]=0);return o.length=s,o}},9127:function(e,t,n){"use strict";e.exports=function(e){return i(r(e))};var r=n(6204),i=n(5771)},7765:function(e,t,n){"use strict";e.exports=function(e,t,n,s){n=n||0,void 0===s&&(s=function(e){for(var t=e.length,n=0,r=0;r<t;++r)n=0|Math.max(n,e[r].length);return n-1}(e));if(0===e.length||s<1)return{cells:[],vertexIds:[],vertexWeights:[]};var l=function(e,t){for(var n=e.length,r=i.mallocUint8(n),a=0;a<n;++a)r[a]=e[a]<t|0;return r}(t,+n),c=function(e,t){for(var n=e.length,o=t*(t+1)/2*n|0,s=i.mallocUint32(2*o),l=0,c=0;c<n;++c)for(var u=e[c],f=(t=u.length,0);f<t;++f)for(var d=0;d<f;++d){var h=u[d],p=u[f];s[l++]=0|Math.min(h,p),s[l++]=0|Math.max(h,p)}a(r(s,[l/2|0,2]));var m=2;for(c=2;c<l;c+=2)s[c-2]===s[c]&&s[c-1]===s[c+1]||(s[m++]=s[c],s[m++]=s[c+1]);return r(s,[m/2|0,2])}(e,s),u=function(e,t,n,a){for(var o=e.data,s=e.shape[0],l=i.mallocDouble(s),c=0,u=0;u<s;++u){var f=o[2*u],d=o[2*u+1];if(n[f]!==n[d]){var h=t[f],p=t[d];o[2*c]=f,o[2*c+1]=d,l[c++]=(p-a)/(p-h)}}return e.shape[0]=c,r(l,[c])}(c,t,l,+n),f=function(e,t){var n=i.mallocInt32(2*t),r=e.shape[0],a=e.data;n[0]=0;for(var o=0,s=0;s<r;++s){var l=a[2*s];if(l!==o){for(n[2*o+1]=s;++o<l;)n[2*o]=s,n[2*o+1]=s;n[2*o]=s}}n[2*o+1]=r;for(;++o<t;)n[2*o]=n[2*o+1]=r;return n}(c,0|t.length),d=o(s)(e,c.data,f,l),h=function(e){for(var t=0|e.shape[0],n=e.data,r=new Array(t),i=0;i<t;++i)r[i]=[n[2*i],n[2*i+1]];return r}(c),p=[].slice.call(u.data,0,u.shape[0]);return i.free(l),i.free(c.data),i.free(u.data),i.free(f),{cells:d,vertexIds:h,vertexWeights:p}};var r=n(9618),i=n(1888),a=n(446),o=n(1570)},1570:function(e){"use strict";e.exports=function(e){return t[e]()};var t=[function(){return function(e,t,n,r){for(var i=e.length,a=0;a<i;++a)e[a].length;return[]}},function(){function e(e,t,n,r){for(var i=0|Math.min(n,r),a=0|Math.max(n,r),o=e[2*i],s=e[2*i+1];o<s;){var l=o+s>>1,c=t[2*l+1];if(c===a)return l;a<c?s=l:o=l+1}return o}return function(t,n,r,i){for(var a=t.length,o=[],s=0;s<a;++s){var l=t[s];if(2===l.length){var c=(i[l[0]]|0)+(i[l[1]]<<1);if(0===c||3===c)continue;switch(c){case 0:case 3:break;case 1:o.push([e(r,n,l[0],l[1])]);break;case 2:o.push([e(r,n,l[1],l[0])])}}}return o}},function(){function e(e,t,n,r){for(var i=0|Math.min(n,r),a=0|Math.max(n,r),o=e[2*i],s=e[2*i+1];o<s;){var l=o+s>>1,c=t[2*l+1];if(c===a)return l;a<c?s=l:o=l+1}return o}return function(t,n,r,i){for(var a=t.length,o=[],s=0;s<a;++s){var l=t[s],c=l.length;if(3===c){if(0===(u=(i[l[0]]|0)+(i[l[1]]<<1)+(i[l[2]]<<2))||7===u)continue;switch(u){case 0:case 7:break;case 1:o.push([e(r,n,l[0],l[2]),e(r,n,l[0],l[1])]);break;case 2:o.push([e(r,n,l[1],l[0]),e(r,n,l[1],l[2])]);break;case 3:o.push([e(r,n,l[0],l[2]),e(r,n,l[1],l[2])]);break;case 4:o.push([e(r,n,l[2],l[1]),e(r,n,l[2],l[0])]);break;case 5:o.push([e(r,n,l[2],l[1]),e(r,n,l[0],l[1])]);break;case 6:o.push([e(r,n,l[1],l[0]),e(r,n,l[2],l[0])])}}else if(2===c){var u;if(0===(u=(i[l[0]]|0)+(i[l[1]]<<1))||3===u)continue;switch(u){case 0:case 3:break;case 1:o.push([e(r,n,l[0],l[1])]);break;case 2:o.push([e(r,n,l[1],l[0])])}}}return o}},function(){function e(e,t,n,r){for(var i=0|Math.min(n,r),a=0|Math.max(n,r),o=e[2*i],s=e[2*i+1];o<s;){var l=o+s>>1,c=t[2*l+1];if(c===a)return l;a<c?s=l:o=l+1}return o}return function(t,n,r,i){for(var a=t.length,o=[],s=0;s<a;++s){var l=t[s],c=l.length;if(4===c){if(0===(u=(i[l[0]]|0)+(i[l[1]]<<1)+(i[l[2]]<<2)+(i[l[3]]<<3))||15===u)continue;switch(u){case 0:case 15:break;case 1:o.push([e(r,n,l[0],l[1]),e(r,n,l[0],l[2]),e(r,n,l[0],l[3])]);break;case 2:o.push([e(r,n,l[1],l[2]),e(r,n,l[1],l[0]),e(r,n,l[1],l[3])]);break;case 3:o.push([e(r,n,l[1],l[2]),e(r,n,l[0],l[2]),e(r,n,l[0],l[3])],[e(r,n,l[1],l[3]),e(r,n,l[1],l[2]),e(r,n,l[0],l[3])]);break;case 4:o.push([e(r,n,l[2],l[0]),e(r,n,l[2],l[1]),e(r,n,l[2],l[3])]);break;case 5:o.push([e(r,n,l[0],l[1]),e(r,n,l[2],l[1]),e(r,n,l[0],l[3])],[e(r,n,l[2],l[1]),e(r,n,l[2],l[3]),e(r,n,l[0],l[3])]);break;case 6:o.push([e(r,n,l[2],l[0]),e(r,n,l[1],l[0]),e(r,n,l[1],l[3])],[e(r,n,l[2],l[3]),e(r,n,l[2],l[0]),e(r,n,l[1],l[3])]);break;case 7:o.push([e(r,n,l[0],l[3]),e(r,n,l[1],l[3]),e(r,n,l[2],l[3])]);break;case 8:o.push([e(r,n,l[3],l[1]),e(r,n,l[3],l[0]),e(r,n,l[3],l[2])]);break;case 9:o.push([e(r,n,l[3],l[1]),e(r,n,l[0],l[1]),e(r,n,l[0],l[2])],[e(r,n,l[3],l[2]),e(r,n,l[3],l[1]),e(r,n,l[0],l[2])]);break;case 10:o.push([e(r,n,l[1],l[0]),e(r,n,l[3],l[0]),e(r,n,l[1],l[2])],[e(r,n,l[3],l[0]),e(r,n,l[3],l[2]),e(r,n,l[1],l[2])]);break;case 11:o.push([e(r,n,l[1],l[2]),e(r,n,l[0],l[2]),e(r,n,l[3],l[2])]);break;case 12:o.push([e(r,n,l[3],l[0]),e(r,n,l[2],l[0]),e(r,n,l[2],l[1])],[e(r,n,l[3],l[1]),e(r,n,l[3],l[0]),e(r,n,l[2],l[1])]);break;case 13:o.push([e(r,n,l[0],l[1]),e(r,n,l[2],l[1]),e(r,n,l[3],l[1])]);break;case 14:o.push([e(r,n,l[2],l[0]),e(r,n,l[1],l[0]),e(r,n,l[3],l[0])])}}else if(3===c){if(0===(u=(i[l[0]]|0)+(i[l[1]]<<1)+(i[l[2]]<<2))||7===u)continue;switch(u){case 0:case 7:break;case 1:o.push([e(r,n,l[0],l[2]),e(r,n,l[0],l[1])]);break;case 2:o.push([e(r,n,l[1],l[0]),e(r,n,l[1],l[2])]);break;case 3:o.push([e(r,n,l[0],l[2]),e(r,n,l[1],l[2])]);break;case 4:o.push([e(r,n,l[2],l[1]),e(r,n,l[2],l[0])]);break;case 5:o.push([e(r,n,l[2],l[1]),e(r,n,l[0],l[1])]);break;case 6:o.push([e(r,n,l[1],l[0]),e(r,n,l[2],l[0])])}}else if(2===c){var u;if(0===(u=(i[l[0]]|0)+(i[l[1]]<<1))||3===u)continue;switch(u){case 0:case 3:break;case 1:o.push([e(r,n,l[0],l[1])]);break;case 2:o.push([e(r,n,l[1],l[0])])}}}return o}}]},6803:function(e,t,n){"use strict";var r=n(8828),i=n(1755);function a(e,t){var n=e.length,r=e.length-t.length,i=Math.min;if(r)return r;switch(n){case 0:return 0;case 1:return e[0]-t[0];case 2:return(s=e[0]+e[1]-t[0]-t[1])||i(e[0],e[1])-i(t[0],t[1]);case 3:var a=e[0]+e[1],o=t[0]+t[1];if(s=a+e[2]-(o+t[2]))return s;var s,l=i(e[0],e[1]),c=i(t[0],t[1]);return(s=i(l,e[2])-i(c,t[2]))||i(l+e[2],a)-i(c+t[2],o);default:var u=e.slice(0);u.sort();var f=t.slice(0);f.sort();for(var d=0;d<n;++d)if(r=u[d]-f[d])return r;return 0}}function o(e,t){return a(e[0],t[0])}function s(e,t){if(t){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r[i]=[e[i],t[i]];r.sort(o);for(0;i<n;++i)e[i]=r[i][0],t[i]=r[i][1];return e}return e.sort(a),e}function l(e){if(0===e.length)return[];for(var t=1,n=e.length,r=1;r<n;++r){var i=e[r];if(a(i,e[r-1])){if(r===t){0;continue}e[t++]=i}}return e.length=t,e}function c(e,t){for(var n=0,r=e.length-1,i=-1;n<=r;){var o=n+r>>1,s=a(e[o],t);s<=0?(0===s&&o,o+1):s>0&&o-1}return i}function u(e,t){for(var n=new Array(e.length),i=0,o=n.length;i<o;++i)n[i]=[];for(var s=[],l=t.length;i<l;++i)for(var u=t[i],f=u.length,d=1,h=1<<f;d<h;++d){s.length=r.popCount(d);for(var p=0,m=0;m<f;++m)d&1<<m&&(s[p++]=u[m]);var g=c(e,s);if(!(g<0))for(;n[g++].push(i),!(g>=e.length||0!==a(e[g],s)););}return n}function f(e,t){if(t<0)return[];for(var n=[],i=(1<<t+1)-1,a=0;a<e.length;++a)for(var o=e[a],l=i;l<1<<o.length;r.nextCombination(l)){for(var c=new Array(t+1),u=0,f=0;f<o.length;++f)l&1<<f&&(c[u++]=o[f]);n.push(c)}return s(n)}t.Fw=a},3105:function(e,t){"use strict";function n(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}t.INT_BITS=32,t.INT_MAX=2147483647,t.INT_MIN=-1<<31,t.sign=function(e){return(e>0)-(e<0)},t.abs=function(e){var t=e>>31;return(e^t)-t},t.min=function(e,t){return t^(e^t)&-(e<t)},t.max=function(e,t){return e^(e^t)&-(e<t)},t.isPow2=function(e){return!(e&e-1||!e)},t.log2=function(e){var t,n;return t=(e>65535)<<4,t|=n=((e>>>=t)>255)<<3,t|=n=((e>>>=n)>15)<<2,(t|=n=((e>>>=n)>3)<<1)|(e>>>=n)>>1},t.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},t.popCount=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},t.countTrailingZeros=n,t.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1},t.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},t.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var r=new Array(256);!function(e){for(var t=0;t<256;++t){var n=t,r=t,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;e[t]=r<<i&255}}(r),t.reverse=function(e){return r[255&e]<<24|r[e>>>8&255]<<16|r[e>>>16&255]<<8|r[e>>>24&255]},t.interleave2=function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},t.deinterleave2=function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},t.interleave3=function(e,t,n){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},t.deinterleave3=function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},t.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>n(e)+1}},2014:function(e,t,n){"use strict";var r=n(3105),i=n(4623);function a(e,t){var n=e.length,r=e.length-t.length,i=Math.min;if(r)return r;switch(n){case 0:return 0;case 1:return e[0]-t[0];case 2:return(s=e[0]+e[1]-t[0]-t[1])||i(e[0],e[1])-i(t[0],t[1]);case 3:var a=e[0]+e[1],o=t[0]+t[1];if(s=a+e[2]-(o+t[2]))return s;var s,l=i(e[0],e[1]),c=i(t[0],t[1]);return(s=i(l,e[2])-i(c,t[2]))||i(l+e[2],a)-i(c+t[2],o);default:var u=e.slice(0);u.sort();var f=t.slice(0);f.sort();for(var d=0;d<n;++d)if(r=u[d]-f[d])return r;return 0}}function o(e,t){return a(e[0],t[0])}function s(e,t){if(t){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r[i]=[e[i],t[i]];r.sort(o);for(i=0;i<n;++i)e[i]=r[i][0],t[i]=r[i][1];return e}return e.sort(a),e}function l(e){if(0===e.length)return[];for(var t=1,n=e.length,r=1;r<n;++r){var i=e[r];if(a(i,e[r-1])){if(r===t){t++;continue}e[t++]=i}}return e.length=t,e}function c(e,t){for(var n=0,r=e.length-1,i=-1;n<=r;){var o=n+r>>1,s=a(e[o],t);s<=0?(0===s&&(i=o),n=o+1):s>0&&(r=o-1)}return i}function u(e,t){for(var n=new Array(e.length),i=0,o=n.length;i<o;++i)n[i]=[];for(var s=[],l=(i=0,t.length);i<l;++i)for(var u=t[i],f=u.length,d=1,h=1<<f;d<h;++d){s.length=r.popCount(d);for(var p=0,m=0;m<f;++m)d&1<<m&&(s[p++]=u[m]);var g=c(e,s);if(!(g<0))for(;n[g++].push(i),!(g>=e.length||0!==a(e[g],s)););}return n}function f(e,t){if(t<0)return[];for(var n=[],i=(1<<t+1)-1,a=0;a<e.length;++a)for(var o=e[a],l=i;l<1<<o.length;l=r.nextCombination(l)){for(var c=new Array(t+1),u=0,f=0;f<o.length;++f)l&1<<f&&(c[u++]=o[f]);n.push(c)}return s(n)}t.dimension=function(e){for(var t=0,n=Math.max,r=0,i=e.length;r<i;++r)t=n(t,e[r].length);return t-1},t.countVertices=function(e){for(var t=-1,n=Math.max,r=0,i=e.length;r<i;++r)for(var a=e[r],o=0,s=a.length;o<s;++o)t=n(t,a[o]);return t+1},t.cloneCells=function(e){for(var t=new Array(e.length),n=0,r=e.length;n<r;++n)t[n]=e[n].slice(0);return t},t.compareCells=a,t.normalize=s,t.unique=l,t.findCell=c,t.incidence=u,t.dual=function(e,t){if(!t)return u(l(f(e,0)),e);for(var n=new Array(t),r=0;r<t;++r)n[r]=[];r=0;for(var i=e.length;r<i;++r)for(var a=e[r],o=0,s=a.length;o<s;++o)n[a[o]].push(r);return n},t.explode=function(e){for(var t=[],n=0,r=e.length;n<r;++n)for(var i=e[n],a=0|i.length,o=1,l=1<<a;o<l;++o){for(var c=[],u=0;u<a;++u)o>>>u&1&&c.push(i[u]);t.push(c)}return s(t)},t.skeleton=f,t.boundary=function(e){for(var t=[],n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length;a<o;++a){for(var l=new Array(i.length-1),c=0,u=0;c<o;++c)c!==a&&(l[u++]=i[c]);t.push(l)}return s(t)},t.connectedComponents=function(e,t){return t?function(e,t){for(var n=new i(t),r=0;r<e.length;++r)for(var a=e[r],o=0;o<a.length;++o)for(var s=o+1;s<a.length;++s)n.link(a[o],a[s]);var l=[],c=n.ranks;for(r=0;r<c.length;++r)c[r]=-1;for(r=0;r<e.length;++r){var u=n.find(e[r][0]);c[u]<0?(c[u]=l.length,l.push([e[r].slice(0)])):l[c[u]].push(e[r].slice(0))}return l}(e,t):function(e){for(var t=l(s(f(e,0))),n=new i(t.length),r=0;r<e.length;++r)for(var a=e[r],o=0;o<a.length;++o)for(var u=c(t,[a[o]]),d=o+1;d<a.length;++d)n.link(u,c(t,[a[d]]));var h=[],p=n.ranks;for(r=0;r<p.length;++r)p[r]=-1;for(r=0;r<e.length;++r){var m=n.find(c(t,[e[r][0]]));p[m]<0?(p[m]=h.length,h.push([e[r].slice(0)])):h[p[m]].push(e[r].slice(0))}return h}(e)}},4623:function(e){"use strict";function t(e){this.roots=new Array(e),this.ranks=new Array(e);for(var t=0;t<e;++t)this.roots[t]=t,this.ranks[t]=0}e.exports=t,t.prototype.length=function(){return this.roots.length},t.prototype.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},t.prototype.find=function(e){for(var t=this.roots;t[e]!==e;){var n=t[e];t[e]=t[n],e=n}return e},t.prototype.link=function(e,t){var n=this.find(e),r=this.find(t);if(n!==r){var i=this.ranks,a=this.roots,o=i[n],s=i[r];o<s?a[n]=r:s<o?a[r]=n:(a[r]=n,++i[n])}}},5878:function(e,t,n){"use strict";e.exports=function(e,t,n){for(var a=t.length,o=e.length,s=new Array(a),l=new Array(a),c=new Array(a),u=new Array(a),f=0;f<a;++f)s[f]=l[f]=-1,c[f]=1/0,u[f]=!1;for(f=0;f<o;++f){var d=e[f];if(2!==d.length)throw new Error("Input must be a graph");var h=d[1],p=d[0];-1!==l[p]?l[p]=-2:l[p]=h,-1!==s[h]?s[h]=-2:s[h]=p}function m(e){if(u[e])return 1/0;var n,i,a,o,c,f=s[e],d=l[e];return f<0||d<0?1/0:(n=t[e],i=t[f],a=t[d],o=Math.abs(r(n,i,a)),c=Math.sqrt(Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2)),o/c)}function g(e,t){var n=k[e],r=k[t];k[e]=r,k[t]=n,E[n]=t,E[r]=e}function v(e){return c[k[e]]}function y(e){return 1&e?e-1>>1:(e>>1)-1}function b(e){for(var t=v(e);;){var n=t,r=2*e+1,i=2*(e+1),a=e;if(r<T){var o=v(r);o<n&&(a=r,n=o)}if(i<T)v(i)<n&&(a=i);if(a===e)return e;g(e,a),e=a}}function x(e){for(var t=v(e);e>0;){var n=y(e);if(n>=0)if(t<v(n)){g(e,n),e=n;continue}return e}}function _(){if(T>0){var e=k[0];return g(0,T-1),T-=1,b(0),e}return-1}function w(e,t){var n=k[e];return c[n]===t?e:(c[n]=-1/0,x(e),_(),c[n]=t,x((T+=1)-1))}function A(e){if(!u[e]){u[e]=!0;var t=s[e],n=l[e];s[n]>=0&&(s[n]=t),l[t]>=0&&(l[t]=n),E[t]>=0&&w(E[t],m(t)),E[n]>=0&&w(E[n],m(n))}}var k=[],E=new Array(a);for(f=0;f<a;++f){(c[f]=m(f))<1/0?(E[f]=k.length,k.push(f)):E[f]=-1}var T=k.length;for(f=T>>1;f>=0;--f)b(f);for(;;){var M=_();if(M<0||c[M]>n)break;A(M)}var S=[];for(f=0;f<a;++f)u[f]||(E[f]=S.length,S.push(t[f].slice()));S.length;function C(e,t){if(e[t]<0)return t;var n=t,r=t;do{var i=e[r];if(!u[r]||i<0||i===r)break;if(i=e[r=i],!u[r]||i<0||i===r)break;r=i,n=e[n]}while(n!==r);for(var a=t;a!==r;a=e[a])e[a]=r;return r}var O=[];return e.forEach((function(e){var t=C(s,e[0]),n=C(l,e[1]);if(t>=0&&n>=0&&t!==n){var r=E[t],i=E[n];r!==i&&O.push([r,i])}})),i.unique(i.normalize(O)),{positions:S,edges:O}};var r=n(3250),i=n(2014)},1303:function(e,t,n){"use strict";e.exports=function(e,t){var n,a,o,s;if(t[0][0]<t[1][0])n=t[0],a=t[1];else{if(!(t[0][0]>t[1][0]))return i(t,e);n=t[1],a=t[0]}if(e[0][0]<e[1][0])o=e[0],s=e[1];else{if(!(e[0][0]>e[1][0]))return-i(e,t);o=e[1],s=e[0]}var l=r(n,a,s),c=r(n,a,o);if(l<0){if(c<=0)return l}else if(l>0){if(c>=0)return l}else if(c)return c;if(l=r(s,o,a),c=r(s,o,n),l<0){if(c<=0)return l}else if(l>0){if(c>=0)return l}else if(c)return c;return a[0]-s[0]};var r=n(3250);function i(e,t){var n,i,a,o;if(t[0][0]<t[1][0])n=t[0],i=t[1];else{if(!(t[0][0]>t[1][0])){var s=Math.min(e[0][1],e[1][1]),l=Math.max(e[0][1],e[1][1]),c=Math.min(t[0][1],t[1][1]),u=Math.max(t[0][1],t[1][1]);return l<c?l-c:s>u?s-u:l-u}n=t[1],i=t[0]}e[0][1]<e[1][1]?(a=e[0],o=e[1]):(a=e[1],o=e[0]);var f=r(i,n,a);return f||((f=r(i,n,o))||o-i)}},4209:function(e,t,n){"use strict";e.exports=function(e){for(var t=e.length,n=2*t,r=new Array(n),a=0;a<t;++a){var l=e[a],c=l[0][0]<l[1][0];r[2*a]=new f(l[0][0],l,c,a),r[2*a+1]=new f(l[1][0],l,!c,a)}r.sort((function(e,t){var n=e.x-t.x;return n||((n=e.create-t.create)||Math.min(e.segment[0][1],e.segment[1][1])-Math.min(t.segment[0][1],t.segment[1][1]))}));var d=i(o),h=[],p=[],m=[];for(a=0;a<n;){for(var g=r[a].x,v=[];a<n;){var y=r[a];if(y.x!==g)break;a+=1,y.segment[0][0]===y.x&&y.segment[1][0]===y.x?y.create&&(y.segment[0][1]<y.segment[1][1]?(v.push(new u(y.segment[0][1],y.index,!0,!0)),v.push(new u(y.segment[1][1],y.index,!1,!1))):(v.push(new u(y.segment[1][1],y.index,!0,!1)),v.push(new u(y.segment[0][1],y.index,!1,!0)))):d=y.create?d.insert(y.segment,y.index):d.remove(y.segment)}h.push(d.root),p.push(g),m.push(v)}return new s(h,p,m)};var r=n(2478),i=n(3840),a=n(3250),o=n(1303);function s(e,t,n){this.slabs=e,this.coordinates=t,this.horizontal=n}function l(e,t){return e.y-t}function c(e,t){for(var n=null;e;){var r,i,o=e.key;o[0][0]<o[1][0]?(r=o[0],i=o[1]):(r=o[1],i=o[0]);var s=a(r,i,t);if(s<0)e=e.left;else if(s>0)if(t[0]!==o[1][0])n=e,e=e.right;else{if(l=c(e.right,t))return l;e=e.left}else{if(t[0]!==o[1][0])return e;var l;if(l=c(e.right,t))return l;e=e.left}}return n}function u(e,t,n,r){this.y=e,this.index=t,this.start=n,this.closed=r}function f(e,t,n,r){this.x=e,this.segment=t,this.create=n,this.index=r}s.prototype.castUp=function(e){var t=r.le(this.coordinates,e[0]);if(t<0)return-1;this.slabs[t];var n=c(this.slabs[t],e),i=-1;if(n&&(i=n.value),this.coordinates[t]===e[0]){var s=null;if(n&&(s=n.key),t>0){var u=c(this.slabs[t-1],e);u&&(s?o(u.key,s)>0&&(s=u.key,i=u.value):(i=u.value,s=u.key))}var f=this.horizontal[t];if(f.length>0){var d=r.ge(f,e[1],l);if(d<f.length){var h=f[d];if(e[1]===h.y){if(h.closed)return h.index;for(;d<f.length-1&&f[d+1].y===e[1];)if((h=f[d+=1]).closed)return h.index;if(h.y===e[1]&&!h.start){if((d+=1)>=f.length)return i;h=f[d]}}if(h.start)if(s){var p=a(s[0],s[1],[e[0],h.y]);s[0][0]>s[1][0]&&(p=-p),p>0&&(i=h.index)}else i=h.index;else h.y!==e[1]&&(i=h.index)}}}return i}},5202:function(e,t,n){"use strict";var r=n(1944),i=n(8210);function a(e,t){var n=i(r(e,t),[t[t.length-1]]);return n[n.length-1]}function o(e,t,n,r){var i=-t/(r-t);i<0?i=0:i>1&&(i=1);for(var a=1-i,o=e.length,s=new Array(o),l=0;l<o;++l)s[l]=i*e[l]+a*n[l];return s}e.exports=function(e,t){for(var n=[],r=[],i=a(e[e.length-1],t),s=e[e.length-1],l=e[0],c=0;c<e.length;++c,s=l){var u=a(l=e[c],t);if(i<0&&u>0||i>0&&u<0){var f=o(s,u,l,i);n.push(f),r.push(f.slice())}u<0?r.push(l.slice()):u>0?n.push(l.slice()):(n.push(l.slice()),r.push(l.slice())),i=u}return{positive:n,negative:r}},e.exports.positive=function(e,t){for(var n=[],r=a(e[e.length-1],t),i=e[e.length-1],s=e[0],l=0;l<e.length;++l,i=s){var c=a(s=e[l],t);(r<0&&c>0||r>0&&c<0)&&n.push(o(i,c,s,r)),c>=0&&n.push(s.slice()),r=c}return n},e.exports.negative=function(e,t){for(var n=[],r=a(e[e.length-1],t),i=e[e.length-1],s=e[0],l=0;l<e.length;++l,i=s){var c=a(s=e[l],t);(r<0&&c>0||r>0&&c<0)&&n.push(o(i,c,s,r)),c<=0&&n.push(s.slice()),r=c}return n}},3387:function(e,t,n){var r;!function(){"use strict";var i={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function a(e){return function(e,t){var n,r,o,s,l,c,u,f,d,h=1,p=e.length,m="";for(r=0;r<p;r++)if("string"==typeof e[r])m+=e[r];else if("object"==typeof e[r]){if((s=e[r]).keys)for(n=t[h],o=0;o<s.keys.length;o++){if(null==n)throw new Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',s.keys[o],s.keys[o-1]));n=n[s.keys[o]]}else n=s.param_no?t[s.param_no]:t[h++];if(i.not_type.test(s.type)&&i.not_primitive.test(s.type)&&n instanceof Function&&(n=n()),i.numeric_arg.test(s.type)&&"number"!=typeof n&&isNaN(n))throw new TypeError(a("[sprintf] expecting number but found %T",n));switch(i.number.test(s.type)&&(f=n>=0),s.type){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,s.width?parseInt(s.width):0);break;case"e":n=s.precision?parseFloat(n).toExponential(s.precision):parseFloat(n).toExponential();break;case"f":n=s.precision?parseFloat(n).toFixed(s.precision):parseFloat(n);break;case"g":n=s.precision?String(Number(n.toPrecision(s.precision))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=s.precision?n.substring(0,s.precision):n;break;case"t":n=String(!!n),n=s.precision?n.substring(0,s.precision):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=s.precision?n.substring(0,s.precision):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=s.precision?n.substring(0,s.precision):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}i.json.test(s.type)?m+=n:(!i.number.test(s.type)||f&&!s.sign?d="":(d=f?"+":"-",n=n.toString().replace(i.sign,"")),c=s.pad_char?"0"===s.pad_char?"0":s.pad_char.charAt(1):" ",u=s.width-(d+n).length,l=s.width&&u>0?c.repeat(u):"",m+=s.align?d+n+l:"0"===c?d+l+n:l+d+n)}return m}(function(e){if(s[e])return s[e];var t,n=e,r=[],a=0;for(;n;){if(null!==(t=i.text.exec(n)))r.push(t[0]);else if(null!==(t=i.modulo.exec(n)))r.push("%");else{if(null===(t=i.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){a|=1;var o=[],l=t[2],c=[];if(null===(c=i.key.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(o.push(c[1]);""!==(l=l.substring(c[0].length));)if(null!==(c=i.key_access.exec(l)))o.push(c[1]);else{if(null===(c=i.index_access.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");o.push(c[1])}t[2]=o}else a|=2;if(3===a)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}n=n.substring(t[0].length)}return s[e]=r}(e),arguments)}function o(e,t){return a.apply(null,[e].concat(t||[]))}var s=Object.create(null);t.sprintf=a,t.vsprintf=o,"undefined"!=typeof window&&(window.sprintf=a,window.vsprintf=o,void 0===(r=function(){return{sprintf:a,vsprintf:o}}.call(t,n,t,e))||(e.exports=r))}()},3711:function(e,t,n){"use strict";e.exports=function(e,t){if(e.dimension<=0)return{positions:[],cells:[]};if(1===e.dimension)return function(e,t){for(var n=i(e,t),r=n.length,a=new Array(r),o=new Array(r),s=0;s<r;++s)a[s]=[n[s]],o[s]=[s];return{positions:a,cells:o}}(e,t);var n=e.order.join()+"-"+e.dtype,s=o[n];t=+t||0;s||(s=o[n]=function(e,t){var n=e.length+"d",i=a[n];if(i)return i(r,e,t)}(e.order,e.dtype));return s(e,t)};var r=n(2640),i=n(781),a={"2d":function(e,t,n){var r=e({order:t,scalarArguments:3,getters:"generic"===n?[0]:void 0,phase:function(e,t,n,r){return e>r|0},vertex:function(e,t,n,r,i,a,o,s,l,c,u,f,d){var h=(o|0)+(s<<1)+(l<<2)+(c<<3)|0;if(0!==h&&15!==h)switch(h){case 0:case 15:u.push([e-.5,t-.5]);break;case 1:u.push([e-.25-.25*(r+n-2*d)/(n-r),t-.25-.25*(i+n-2*d)/(n-i)]);break;case 2:u.push([e-.75-.25*(-r-n+2*d)/(r-n),t-.25-.25*(a+r-2*d)/(r-a)]);break;case 3:u.push([e-.5,t-.5-.5*(i+n+a+r-4*d)/(n-i+r-a)]);break;case 4:u.push([e-.25-.25*(a+i-2*d)/(i-a),t-.75-.25*(-i-n+2*d)/(i-n)]);break;case 5:u.push([e-.5-.5*(r+n+a+i-4*d)/(n-r+i-a),t-.5]);break;case 6:u.push([e-.5-.25*(-r-n+a+i)/(r-n+i-a),t-.5-.25*(-i-n+a+r)/(i-n+r-a)]);break;case 7:u.push([e-.75-.25*(a+i-2*d)/(i-a),t-.75-.25*(a+r-2*d)/(r-a)]);break;case 8:u.push([e-.75-.25*(-a-i+2*d)/(a-i),t-.75-.25*(-a-r+2*d)/(a-r)]);break;case 9:u.push([e-.5-.25*(r+n+-a-i)/(n-r+a-i),t-.5-.25*(i+n+-a-r)/(n-i+a-r)]);break;case 10:u.push([e-.5-.5*(-r-n-a-i+4*d)/(r-n+a-i),t-.5]);break;case 11:u.push([e-.25-.25*(-a-i+2*d)/(a-i),t-.75-.25*(i+n-2*d)/(n-i)]);break;case 12:u.push([e-.5,t-.5-.5*(-i-n-a-r+4*d)/(i-n+a-r)]);break;case 13:u.push([e-.75-.25*(r+n-2*d)/(n-r),t-.25-.25*(-a-r+2*d)/(a-r)]);break;case 14:u.push([e-.25-.25*(-r-n+2*d)/(r-n),t-.25-.25*(-i-n+2*d)/(i-n)])}},cell:function(e,t,n,r,i,a,o,s,l){i?s.push([e,t]):s.push([t,e])}});return function(e,t){var n=[],i=[];return r(e,n,i,t),{positions:n,cells:i}}}};var o={}},529:function(e,t,n){"use strict";e.exports=function e(t,n,i){var o=(i=i||{}).fontStyle||"normal",s=i.fontWeight||"normal",l=i.fontVariant||"normal",c=[o,s,l,t].join("_"),u=a[c];u||(u=a[c]={" ":{data:new Float32Array(0),shape:.2}});var f=u[n];if(!f)if(n.length<=1||!/\d/.test(n))f=u[n]=function(e){for(var t=e.cells,n=e.positions,r=new Float32Array(6*t.length),i=0,a=0,o=0;o<t.length;++o)for(var s=t[o],l=0;l<3;++l){var c=n[s[l]];r[i++]=c[0],r[i++]=c[1]+1.4,a=Math.max(c[0],a)}return{data:r,shape:a}}(r(n,{triangles:!0,font:t,fontStyle:o,fontWeight:s,fontVariant:l,textAlign:i.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var d=n.split(/(\d|\s)/),h=new Array(d.length),p=0,m=0,g=0;g<d.length;++g)h[g]=e(t,d[g]),p+=h[g].data.length,m+=h[g].shape,g>0&&(m+=.02);var v=new Float32Array(p),y=0,b=-.5*m;for(g=0;g<h.length;++g){for(var x=h[g].data,_=0;_<x.length;_+=2)v[y++]=x[_]+b,v[y++]=x[_+1];b+=h[g].shape+.02}f=u[n]={data:v,shape:m}}return f};var r=n(4359),i=window||process.global||{},a=i.__TEXT_CACHE||{};i.__TEXT_CACHE={}},665:function(e,t,n){"use strict";var r=n(3202);e.exports=o;var i=96;function a(e,t){var n=r(getComputedStyle(e).getPropertyValue(t));return n[0]*o(n[1],e)}function o(e,t){switch(t=t||document.body,e=(e||"px").trim().toLowerCase(),t!==window&&t!==document||(t=document.body),e){case"%":return t.clientHeight/100;case"ch":case"ex":return function(e,t){var n=document.createElement("div");n.style["font-size"]="128"+e,t.appendChild(n);var r=a(n,"font-size")/128;return t.removeChild(n),r}(e,t);case"em":return a(t,"font-size");case"rem":return a(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return i;case"cm":return i/2.54;case"mm":return i/25.4;case"pt":return i/72;case"pc":return i/6}return 1}},7261:function(e,t,n){"use strict";e.exports=function(e){var t=(e=e||{}).center||[0,0,0],n=e.up||[0,1,0],r=e.right||f(n),i=e.radius||1,a=e.theta||0,u=e.phi||0;if(t=[].slice.call(t,0,3),n=[].slice.call(n,0,3),s(n,n),r=[].slice.call(r,0,3),s(r,r),"eye"in e){var h=e.eye,p=[h[0]-t[0],h[1]-t[1],h[2]-t[2]];o(r,p,n),c(r[0],r[1],r[2])<1e-6?r=f(n):s(r,r),i=c(p[0],p[1],p[2]);var m=l(n,p)/i,g=l(r,p)/i;u=Math.acos(m),a=Math.acos(g)}return i=Math.log(i),new d(e.zoomMin,e.zoomMax,t,n,r,i,a,u)};var r=n(9215),i=n(7608),a=n(6079),o=n(5911),s=n(3536),l=n(244);function c(e,t,n){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(n,2))}function u(e){return Math.min(1,Math.max(-1,e))}function f(e){var t=Math.abs(e[0]),n=Math.abs(e[1]),r=Math.abs(e[2]),i=[0,0,0];t>Math.max(n,r)?i[2]=1:n>Math.max(t,r)?i[0]=1:i[1]=1;for(var a=0,o=0,l=0;l<3;++l)a+=e[l]*e[l],o+=i[l]*e[l];for(l=0;l<3;++l)i[l]-=o/a*e[l];return s(i,i),i}function d(e,t,n,i,a,o,s,l){this.center=r(n),this.up=r(i),this.right=r(a),this.radius=r([o]),this.angle=r([s,l]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(e,t),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var c=0;c<16;++c)this.computedMatrix[c]=.5;this.recalcMatrix(0)}var h=d.prototype;h.setDistanceLimits=function(e,t){e=e>0?Math.log(e):-1/0,t=t>0?Math.log(t):1/0,t=Math.max(t,e),this.radius.bounds[0][0]=e,this.radius.bounds[1][0]=t},h.getDistanceLimits=function(e){var t=this.radius.bounds[0];return e?(e[0]=Math.exp(t[0][0]),e[1]=Math.exp(t[1][0]),e):[Math.exp(t[0][0]),Math.exp(t[1][0])]},h.recalcMatrix=function(e){this.center.curve(e),this.up.curve(e),this.right.curve(e),this.radius.curve(e),this.angle.curve(e);for(var t=this.computedUp,n=this.computedRight,r=0,i=0,a=0;a<3;++a)i+=t[a]*n[a],r+=t[a]*t[a];var l=Math.sqrt(r),u=0;for(a=0;a<3;++a)n[a]-=t[a]*i/r,u+=n[a]*n[a],t[a]/=l;var f=Math.sqrt(u);for(a=0;a<3;++a)n[a]/=f;var d=this.computedToward;o(d,t,n),s(d,d);var h=Math.exp(this.computedRadius[0]),p=this.computedAngle[0],m=this.computedAngle[1],g=Math.cos(p),v=Math.sin(p),y=Math.cos(m),b=Math.sin(m),x=this.computedCenter,_=g*y,w=v*y,A=b,k=-g*b,E=-v*b,T=y,M=this.computedEye,S=this.computedMatrix;for(a=0;a<3;++a){var C=_*n[a]+w*d[a]+A*t[a];S[4*a+1]=k*n[a]+E*d[a]+T*t[a],S[4*a+2]=C,S[4*a+3]=0}var O=S[1],R=S[5],N=S[9],L=S[2],D=S[6],P=S[10],I=R*P-N*D,F=N*L-O*P,z=O*D-R*L,j=c(I,F,z);I/=j,F/=j,z/=j,S[0]=I,S[4]=F,S[8]=z;for(a=0;a<3;++a)M[a]=x[a]+S[2+4*a]*h;for(a=0;a<3;++a){u=0;for(var B=0;B<3;++B)u+=S[a+4*B]*M[B];S[12+a]=-u}S[15]=1},h.getMatrix=function(e,t){this.recalcMatrix(e);var n=this.computedMatrix;if(t){for(var r=0;r<16;++r)t[r]=n[r];return t}return n};var p=[0,0,0];h.rotate=function(e,t,n,r){if(this.angle.move(e,t,n),r){this.recalcMatrix(e);var i=this.computedMatrix;p[0]=i[2],p[1]=i[6],p[2]=i[10];for(var o=this.computedUp,s=this.computedRight,l=this.computedToward,c=0;c<3;++c)i[4*c]=o[c],i[4*c+1]=s[c],i[4*c+2]=l[c];a(i,i,r,p);for(c=0;c<3;++c)o[c]=i[4*c],s[c]=i[4*c+1];this.up.set(e,o[0],o[1],o[2]),this.right.set(e,s[0],s[1],s[2])}},h.pan=function(e,t,n,r){t=t||0,n=n||0,r=r||0,this.recalcMatrix(e);var i=this.computedMatrix,a=(Math.exp(this.computedRadius[0]),i[1]),o=i[5],s=i[9],l=c(a,o,s);a/=l,o/=l,s/=l;var u=i[0],f=i[4],d=i[8],h=u*a+f*o+d*s,p=c(u-=a*h,f-=o*h,d-=s*h),m=(u/=p)*t+a*n,g=(f/=p)*t+o*n,v=(d/=p)*t+s*n;this.center.move(e,m,g,v);var y=Math.exp(this.computedRadius[0]);y=Math.max(1e-4,y+r),this.radius.set(e,Math.log(y))},h.translate=function(e,t,n,r){this.center.move(e,t||0,n||0,r||0)},h.setMatrix=function(e,t,n,r){var a=1;"number"==typeof n&&(a=0|n),(a<0||a>3)&&(a=1);var o=(a+2)%3;t||(this.recalcMatrix(e),t=this.computedMatrix);var s=t[a],l=t[a+4],f=t[a+8];if(r){var d=Math.abs(s),h=Math.abs(l),p=Math.abs(f),m=Math.max(d,h,p);d===m?(s=s<0?-1:1,l=f=0):p===m?(f=f<0?-1:1,s=l=0):(l=l<0?-1:1,s=f=0)}else{var g=c(s,l,f);s/=g,l/=g,f/=g}var v,y,b=t[o],x=t[o+4],_=t[o+8],w=b*s+x*l+_*f,A=c(b-=s*w,x-=l*w,_-=f*w),k=l*(_/=A)-f*(x/=A),E=f*(b/=A)-s*_,T=s*x-l*b,M=c(k,E,T);if(k/=M,E/=M,T/=M,this.center.jump(e,H,V,W),this.radius.idle(e),this.up.jump(e,s,l,f),this.right.jump(e,b,x,_),2===a){var S=t[1],C=t[5],O=t[9],R=S*b+C*x+O*_,N=S*k+C*E+O*T;v=I<0?-Math.PI/2:Math.PI/2,y=Math.atan2(N,R)}else{var L=t[2],D=t[6],P=t[10],I=L*s+D*l+P*f,F=L*b+D*x+P*_,z=L*k+D*E+P*T;v=Math.asin(u(I)),y=Math.atan2(z,F)}this.angle.jump(e,y,v),this.recalcMatrix(e);var j=t[2],B=t[6],U=t[10],$=this.computedMatrix;i($,t);var q=$[15],H=$[12]/q,V=$[13]/q,W=$[14]/q,G=Math.exp(this.computedRadius[0]);this.center.jump(e,H-j*G,V-B*G,W-U*G)},h.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},h.idle=function(e){this.center.idle(e),this.up.idle(e),this.right.idle(e),this.radius.idle(e),this.angle.idle(e)},h.flush=function(e){this.center.flush(e),this.up.flush(e),this.right.flush(e),this.radius.flush(e),this.angle.flush(e)},h.setDistance=function(e,t){t>0&&this.radius.set(e,Math.log(t))},h.lookAt=function(e,t,n,r){this.recalcMatrix(e),t=t||this.computedEye,n=n||this.computedCenter;var i=(r=r||this.computedUp)[0],a=r[1],o=r[2],s=c(i,a,o);if(!(s<1e-6)){i/=s,a/=s,o/=s;var l=t[0]-n[0],f=t[1]-n[1],d=t[2]-n[2],h=c(l,f,d);if(!(h<1e-6)){l/=h,f/=h,d/=h;var p=this.computedRight,m=p[0],g=p[1],v=p[2],y=i*m+a*g+o*v,b=c(m-=y*i,g-=y*a,v-=y*o);if(!(b<.01&&(b=c(m=a*d-o*f,g=o*l-i*d,v=i*f-a*l))<1e-6)){m/=b,g/=b,v/=b,this.up.set(e,i,a,o),this.right.set(e,m,g,v),this.center.set(e,n[0],n[1],n[2]),this.radius.set(e,Math.log(h));var x=a*v-o*g,_=o*m-i*v,w=i*g-a*m,A=c(x,_,w),k=i*l+a*f+o*d,E=m*l+g*f+v*d,T=(x/=A)*l+(_/=A)*f+(w/=A)*d,M=Math.asin(u(k)),S=Math.atan2(T,E),C=this.angle._state,O=C[C.length-1],R=C[C.length-2];O%=2*Math.PI;var N=Math.abs(O+2*Math.PI-S),L=Math.abs(O-S),D=Math.abs(O-2*Math.PI-S);N<L&&(O+=2*Math.PI),D<L&&(O-=2*Math.PI),this.angle.jump(this.angle.lastT(),O,R),this.angle.set(e,S,M)}}}}},5250:function(e){"use strict";e.exports=function(e,n,r){var i=e*n,a=t*e,o=a-(a-e),s=e-o,l=t*n,c=l-(l-n),u=n-c,f=s*u-(i-o*c-s*c-o*u);if(r)return r[0]=f,r[1]=i,r;return[f,i]};var t=+(Math.pow(2,27)+1)},9362:function(e){"use strict";e.exports=function(e,t,n){var r=e+t,i=r-e,a=t-i,o=e-(r-i);if(n)return n[0]=o+a,n[1]=r,n;return[o+a,r]}},1888:function(e,t,n){"use strict";var r=n(8828),i=n(1338),a=n(4793).hp;n.g.__TYPEDARRAY_POOL||(n.g.__TYPEDARRAY_POOL={UINT8:i([32,0]),UINT16:i([32,0]),UINT32:i([32,0]),BIGUINT64:i([32,0]),INT8:i([32,0]),INT16:i([32,0]),INT32:i([32,0]),BIGINT64:i([32,0]),FLOAT:i([32,0]),DOUBLE:i([32,0]),DATA:i([32,0]),UINT8C:i([32,0]),BUFFER:i([32,0])});var o="undefined"!=typeof Uint8ClampedArray,s="undefined"!=typeof BigUint64Array,l="undefined"!=typeof BigInt64Array,c=n.g.__TYPEDARRAY_POOL;c.UINT8C||(c.UINT8C=i([32,0])),c.BIGUINT64||(c.BIGUINT64=i([32,0])),c.BIGINT64||(c.BIGINT64=i([32,0])),c.BUFFER||(c.BUFFER=i([32,0]));var u=c.DATA,f=c.BUFFER;function d(e){if(e){var t=e.length||e.byteLength,n=r.log2(t);u[n].push(e)}}function h(e){e=r.nextPow2(e);var t=r.log2(e),n=u[t];return n.length>0?n.pop():new ArrayBuffer(e)}function p(e){return new Uint8Array(h(e),0,e)}function m(e){return new Uint16Array(h(2*e),0,e)}function g(e){return new Uint32Array(h(4*e),0,e)}function v(e){return new Int8Array(h(e),0,e)}function y(e){return new Int16Array(h(2*e),0,e)}function b(e){return new Int32Array(h(4*e),0,e)}function x(e){return new Float32Array(h(4*e),0,e)}function _(e){return new Float64Array(h(8*e),0,e)}function w(e){return o?new Uint8ClampedArray(h(e),0,e):p(e)}function A(e){return s?new BigUint64Array(h(8*e),0,e):null}function k(e){return l?new BigInt64Array(h(8*e),0,e):null}function E(e){return new DataView(h(e),0,e)}function T(e){e=r.nextPow2(e);var t=r.log2(e),n=f[t];return n.length>0?n.pop():new a(e)}t.free=function(e){if(a.isBuffer(e))f[r.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,n=0|r.log2(t);u[n].push(e)}},t.freeUint8=t.freeUint16=t.freeUint32=t.freeBigUint64=t.freeInt8=t.freeInt16=t.freeInt32=t.freeBigInt64=t.freeFloat32=t.freeFloat=t.freeFloat64=t.freeDouble=t.freeUint8Clamped=t.freeDataView=function(e){d(e.buffer)},t.freeArrayBuffer=d,t.freeBuffer=function(e){f[r.log2(e.length)].push(e)},t.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return h(e);switch(t){case"uint8":return p(e);case"uint16":return m(e);case"uint32":return g(e);case"int8":return v(e);case"int16":return y(e);case"int32":return b(e);case"float":case"float32":return x(e);case"double":case"float64":return _(e);case"uint8_clamped":return w(e);case"bigint64":return k(e);case"biguint64":return A(e);case"buffer":return T(e);case"data":case"dataview":return E(e);default:return null}return null},t.mallocArrayBuffer=h,t.mallocUint8=p,t.mallocUint16=m,t.mallocUint32=g,t.mallocInt8=v,t.mallocInt16=y,t.mallocInt32=b,t.mallocFloat32=t.mallocFloat=x,t.mallocFloat64=t.mallocDouble=_,t.mallocUint8Clamped=w,t.mallocBigUint64=A,t.mallocBigInt64=k,t.mallocDataView=E,t.mallocBuffer=T,t.clearCache=function(){for(var e=0;e<32;++e)c.UINT8[e].length=0,c.UINT16[e].length=0,c.UINT32[e].length=0,c.INT8[e].length=0,c.INT16[e].length=0,c.INT32[e].length=0,c.FLOAT[e].length=0,c.DOUBLE[e].length=0,c.BIGUINT64[e].length=0,c.BIGINT64[e].length=0,c.UINT8C[e].length=0,u[e].length=0,f[e].length=0}},1755:function(e){"use strict";function t(e){this.roots=new Array(e),this.ranks=new Array(e);for(var t=0;t<e;++t)this.roots[t]=t,this.ranks[t]=0}e.exports=t;var n=t.prototype;Object.defineProperty(n,"length",{get:function(){return this.roots.length}}),n.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},n.find=function(e){for(var t=e,n=this.roots;n[e]!==e;)e=n[e];for(;n[t]!==e;){var r=n[t];n[t]=e,t=r}return e},n.link=function(e,t){var n=this.find(e),r=this.find(t);if(n!==r){var i=this.ranks,a=this.roots,o=i[n],s=i[r];o<s?a[n]=r:s<o?a[r]=n:(a[r]=n,++i[n])}}},1682:function(e){"use strict";e.exports=function(e,t,n){return 0===e.length?e:t?(n||e.sort(t),function(e,t){for(var n=1,r=e.length,i=e[0],a=e[0],o=1;o<r;++o)if(a=i,t(i=e[o],a)){if(o===n){n++;continue}e[n++]=i}return e.length=n,e}(e,t)):(n||e.sort(),function(e){for(var t=1,n=e.length,r=e[0],i=e[0],a=1;a<n;++a,i=r)if(i=r,(r=e[a])!==i){if(a===t){t++;continue}e[t++]=r}return e.length=t,e}(e))}},4359:function(e,t,n){"use strict";e.exports=function(e,t){"object"==typeof t&&null!==t||(t={});return r(e,t.canvas||i,t.context||a,t)};var r=n(7718),i=null,a=null;"undefined"!=typeof document&&((i=document.createElement("canvas")).width=8192,i.height=1024,a=i.getContext("2d"))},7718:function(e,t,n){e.exports=function(e,t,n,r){var a=64,o=1.25,s={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};r&&(r.size&&r.size>0&&(a=r.size),r.lineSpacing&&r.lineSpacing>0&&(o=r.lineSpacing),r.styletags&&r.styletags.breaklines&&(s.breaklines=!!r.styletags.breaklines),r.styletags&&r.styletags.bolds&&(s.bolds=!!r.styletags.bolds),r.styletags&&r.styletags.italics&&(s.italics=!!r.styletags.italics),r.styletags&&r.styletags.subscripts&&(s.subscripts=!!r.styletags.subscripts),r.styletags&&r.styletags.superscripts&&(s.superscripts=!!r.styletags.superscripts));return n.font=[r.fontStyle,r.fontVariant,r.fontWeight,a+"px",r.font].filter((function(e){return e})).join(" "),n.textAlign="start",n.textBaseline="alphabetic",n.direction="ltr",w(function(e,t,n,r,a,o){n=n.replace(/\n/g,""),n=!0===o.breaklines?n.replace(/\<br\>/g,"\n"):n.replace(/\<br\>/g," ");var s="",l=[];for(A=0;A<n.length;++A)l[A]=s;!0===o.bolds&&(l=b(c,u,n,l));!0===o.italics&&(l=b(f,d,n,l));!0===o.superscripts&&(l=b(h,m,n,l));!0===o.subscripts&&(l=b(g,y,n,l));var x=[],_="";for(A=0;A<n.length;++A)null!==l[A]&&(_+=n[A],x.push(l[A]));var w,A,k,E,T,M=_.split("\n"),S=M.length,C=Math.round(a*r),O=r,R=2*r,N=0,L=S*C+R;e.height<L&&(e.height=L);t.fillStyle="#000",t.fillRect(0,0,e.width,e.height),t.fillStyle="#fff";var D=0,P="";function I(){if(""!==P){var e=t.measureText(P).width;t.fillText(P,O+k,R+E),k+=e}}function F(){return Math.round(T)+"px "}function z(e,n){var r=""+t.font;if(!0===o.subscripts){var i=e.indexOf(v),a=n.indexOf(v),s=i>-1?parseInt(e[1+i]):0,l=a>-1?parseInt(n[1+a]):0;s!==l&&(r=r.replace(F(),"?px "),T*=Math.pow(.75,l-s),r=r.replace("?px ",F())),E+=.25*C*(l-s)}if(!0===o.superscripts){var c=e.indexOf(p),f=n.indexOf(p),h=c>-1?parseInt(e[1+c]):0,m=f>-1?parseInt(n[1+f]):0;h!==m&&(r=r.replace(F(),"?px "),T*=Math.pow(.75,m-h),r=r.replace("?px ",F())),E-=.25*C*(m-h)}if(!0===o.bolds){var g=e.indexOf(u)>-1,y=n.indexOf(u)>-1;!g&&y&&(r=b?r.replace("italic ","italic bold "):"bold "+r),g&&!y&&(r=r.replace("bold ",""))}if(!0===o.italics){var b=e.indexOf(d)>-1,x=n.indexOf(d)>-1;!b&&x&&(r="italic "+r),b&&!x&&(r=r.replace("italic ",""))}t.font=r}for(w=0;w<S;++w){var j=M[w]+"\n";for(k=0,E=w*C,T=r,P="",A=0;A<j.length;++A){var B=A+D<x.length?x[A+D]:x[x.length-1];s===B?P+=j[A]:(I(),P=j[A],void 0!==B&&(z(s,B),s=B))}I(),D+=j.length;var U=0|Math.round(k+2*O);N<U&&(N=U)}var $=N,q=R+C*S;return i(t.getImageData(0,0,$,q).data,[q,$,4]).pick(-1,-1,0).transpose(1,0)}(t,n,e,a,o,s),r,a)},e.exports.processPixels=w;var r=n(3711),i=n(9618),a=n(5878),o=n(332),s=n(2538),l=n(2095),c="b",u="b|",f="i",d="i|",h="sup",p="+",m="+1",g="sub",v="-",y="-1";function b(e,t,n,r){for(var i="<"+e+">",a="</"+e+">",o=i.length,s=a.length,l=t[0]===p||t[0]===v,c=0,u=-s;c>-1&&-1!==(c=n.indexOf(i,c))&&-1!==(u=n.indexOf(a,c+o))&&!(u<=c);){for(var f=c;f<u+s;++f)if(f<c+o||f>=u)r[f]=null,n=n.substr(0,f)+" "+n.substr(f+1);else if(null!==r[f]){var d=r[f].indexOf(t[0]);-1===d?r[f]+=t:l&&(r[f]=r[f].substr(0,d+1)+(1+parseInt(r[f][d+1]))+r[f].substr(d+2))}var h=c+o,m=n.substr(h,u-h).indexOf(i);c=-1!==m?m:u+s}return r}function x(e,t){var n=r(e,128);return t?a(n.cells,n.positions,.25):{edges:n.cells,positions:n.positions}}function _(e,t,n,r){var i=x(e,r),a=function(e,t,n){for(var r=t.textAlign||"start",i=t.textBaseline||"alphabetic",a=[1<<30,1<<30],o=[0,0],s=e.length,l=0;l<s;++l)for(var c=e[l],u=0;u<2;++u)a[u]=0|Math.min(a[u],c[u]),o[u]=0|Math.max(o[u],c[u]);var f=0;switch(r){case"center":f=-.5*(a[0]+o[0]);break;case"right":case"end":f=-o[0];break;case"left":case"start":f=-a[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+r+"'")}var d=0;switch(i){case"hanging":case"top":d=-a[1];break;case"middle":d=-.5*(a[1]+o[1]);break;case"alphabetic":case"ideographic":d=-3*n;break;case"bottom":d=-o[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+i+"'")}var h=1/n;return"lineHeight"in t?h*=+t.lineHeight:"width"in t?h=t.width/(o[0]-a[0]):"height"in t&&(h=t.height/(o[1]-a[1])),e.map((function(e){return[h*(e[0]+f),h*(e[1]+d)]}))}(i.positions,t,n),c=i.edges,u="ccw"===t.orientation;if(o(a,c),t.polygons||t.polygon||t.polyline){for(var f=l(c,a),d=new Array(f.length),h=0;h<f.length;++h){for(var p=f[h],m=new Array(p.length),g=0;g<p.length;++g){for(var v=p[g],y=new Array(v.length),b=0;b<v.length;++b)y[b]=a[v[b]].slice();u&&y.reverse(),m[g]=y}d[h]=m}return d}return t.triangles||t.triangulate||t.triangle?{cells:s(a,c,{delaunay:!1,exterior:!1,interior:!0}),positions:a}:{edges:c,positions:a}}function w(e,t,n){try{return _(e,t,n,!0)}catch(e){}try{return _(e,t,n,!1)}catch(e){}return t.polygons||t.polyline||t.polygon?[]:t.triangles||t.triangulate||t.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},1538:function(e){!function(){"use strict";if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=g);var t=!1;if("function"==typeof WeakMap){var n=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var r=new n,i=Object.freeze({});if(r.set(i,1),1===r.get(i))return void(e.exports=WeakMap);t=!0}}Object.prototype.hasOwnProperty;var a=Object.getOwnPropertyNames,o=Object.defineProperty,s=Object.isExtensible,l="weakmap:",c=l+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var u=new ArrayBuffer(25),f=new Uint8Array(u);crypto.getRandomValues(f),c=l+"rand:"+Array.prototype.map.call(f,(function(e){return(e%36).toString(36)})).join("")+"___"}if(o(Object,"getOwnPropertyNames",{value:function(e){return a(e).filter(v)}}),"getPropertyNames"in Object){var d=Object.getPropertyNames;o(Object,"getPropertyNames",{value:function(e){return d(e).filter(v)}})}!function(){var e=Object.freeze;o(Object,"freeze",{value:function(t){return y(t),e(t)}});var t=Object.seal;o(Object,"seal",{value:function(e){return y(e),t(e)}});var n=Object.preventExtensions;o(Object,"preventExtensions",{value:function(e){return y(e),n(e)}})}();var h=!1,p=0,m=function(){this instanceof m||x();var e=[],t=[],n=p++;return Object.create(m.prototype,{get___:{value:b((function(r,i){var a,o=y(r);return o?n in o?o[n]:i:(a=e.indexOf(r))>=0?t[a]:i}))},has___:{value:b((function(t){var r=y(t);return r?n in r:e.indexOf(t)>=0}))},set___:{value:b((function(r,i){var a,o=y(r);return o?o[n]=i:(a=e.indexOf(r))>=0?t[a]=i:(a=e.length,t[a]=i,e[a]=r),this}))},delete___:{value:b((function(r){var i,a,o=y(r);return o?n in o&&delete o[n]:!((i=e.indexOf(r))<0)&&(a=e.length-1,e[i]=void 0,t[i]=t[a],e[i]=e[a],e.length=a,t.length=a,!0)}))}})};m.prototype=Object.create(Object.prototype,{get:{value:function(e,t){return this.get___(e,t)},writable:!0,configurable:!0},has:{value:function(e){return this.has___(e)},writable:!0,configurable:!0},set:{value:function(e,t){return this.set___(e,t)},writable:!0,configurable:!0},delete:{value:function(e){return this.delete___(e)},writable:!0,configurable:!0}}),"function"==typeof n?function(){function r(){this instanceof m||x();var e,r=new n,i=void 0,a=!1;return e=t?function(e,t){return r.set(e,t),r.has(e)||(i||(i=new m),i.set(e,t)),this}:function(e,t){if(a)try{r.set(e,t)}catch(n){i||(i=new m),i.set___(e,t)}else r.set(e,t);return this},Object.create(m.prototype,{get___:{value:b((function(e,t){return i?r.has(e)?r.get(e):i.get___(e,t):r.get(e,t)}))},has___:{value:b((function(e){return r.has(e)||!!i&&i.has___(e)}))},set___:{value:b(e)},delete___:{value:b((function(e){var t=!!r.delete(e);return i&&i.delete___(e)||t}))},permitHostObjects___:{value:b((function(e){if(e!==g)throw new Error("bogus call to permitHostObjects___");a=!0}))}})}t&&"undefined"!=typeof Proxy&&(Proxy=void 0),r.prototype=m.prototype,e.exports=r,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),e.exports=m)}function g(e){e.permitHostObjects___&&e.permitHostObjects___(g)}function v(e){return!(e.substr(0,8)==l&&"___"===e.substr(e.length-3))}function y(e){if(e!==Object(e))throw new TypeError("Not an object: "+e);var t=e[c];if(t&&t.key===e)return t;if(s(e)){t={key:e};try{return o(e,c,{value:t,writable:!1,enumerable:!1,configurable:!1}),t}catch(e){return}}}function b(e){return e.prototype=null,Object.freeze(e)}function x(){h||"undefined"==typeof console||(h=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},236:function(e,t,n){var r=n(8284);e.exports=function(){var e={};return function(t){if(("object"!=typeof t||null===t)&&"function"!=typeof t)throw new Error("Weakmap-shim: Key must be object");var n=t.valueOf(e);return n&&n.identity===e?n:r(t,e)}}},8284:function(e){e.exports=function(e,t){var n={identity:t},r=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(e){return e!==t?r.apply(this,arguments):n},writable:!0}),n}},606:function(e,t,n){var r=n(236);e.exports=function(){var e=r();return{get:function(t,n){var r=e(t);return r.hasOwnProperty("value")?r.value:n},set:function(t,n){return e(t).value=n,this},has:function(t){return"value"in e(t)},delete:function(t){return delete e(t).value}}}},3349:function(e){"use strict";var t,n=function(){return function(e,t,n,r,i,a){var o=e[0],s=n[0],l=[0],c=s;r|=0;var u=0,f=s;for(u=0;u<o;++u){var d=t[r]-a,h=t[r+c]-a;d>=0!=h>=0&&i.push(l[0]+.5+.5*(d+h)/(d-h)),r+=f,++l[0]}}};e.exports=(t={funcName:{funcName:"zeroCrossings"}.funcName},function(e){var t={};return function(n,r,i){var a=n.dtype,o=n.order,s=[a,o.join()].join(),l=t[s];return l||(t[s]=l=e([a,o])),l(n.shape.slice(0),n.data,n.stride,0|n.offset,r,i)}}(n.bind(void 0,t)))},781:function(e,t,n){"use strict";e.exports=function(e,t){var n=[];return t=+t||0,r(e.hi(e.shape[0]-1),n,t),n};var r=n(3349)},7790:function(){}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var a=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e};var i=r(1964);e.exports=i}()},97889:e=>{e.exports=function(e,t,n,r){var i=e[0],a=e[1],o=!1;void 0===n&&(n=0),void 0===r&&(r=t.length);for(var s=r-n,l=0,c=s-1;l<s;c=l++){var u=t[l+n][0],f=t[l+n][1],d=t[c+n][0],h=t[c+n][1];f>a!=h>a&&i<(d-u)*(a-f)/(h-f)+u&&(o=!o)}return o}},14336:(e,t,n)=>{var r,i=n(15099),a=n(75402),o=n(67702),s=n(46146),l=n(95707),c=n(61263),u=!1,f=a();function d(e,t,n){var i=r.segments(e),a=r.segments(t),o=n(r.combine(i,a));return r.polygon(o)}r={buildLog:function(e){return!0===e?u=i():!1===e&&(u=!1),!1!==u&&u.list},epsilon:function(e){return f.epsilon(e)},segments:function(e){var t=o(!0,f,u);return e.regions.forEach(t.addRegion),{segments:t.calculate(e.inverted),inverted:e.inverted}},combine:function(e,t){return{combined:o(!1,f,u).calculate(e.segments,e.inverted,t.segments,t.inverted),inverted1:e.inverted,inverted2:t.inverted}},selectUnion:function(e){return{segments:l.union(e.combined,u),inverted:e.inverted1||e.inverted2}},selectIntersect:function(e){return{segments:l.intersect(e.combined,u),inverted:e.inverted1&&e.inverted2}},selectDifference:function(e){return{segments:l.difference(e.combined,u),inverted:e.inverted1&&!e.inverted2}},selectDifferenceRev:function(e){return{segments:l.differenceRev(e.combined,u),inverted:!e.inverted1&&e.inverted2}},selectXor:function(e){return{segments:l.xor(e.combined,u),inverted:e.inverted1!==e.inverted2}},polygon:function(e){return{regions:s(e.segments,f,u),inverted:e.inverted}},polygonFromGeoJSON:function(e){return c.toPolygon(r,e)},polygonToGeoJSON:function(e){return c.fromPolygon(r,f,e)},union:function(e,t){return d(e,t,r.selectUnion)},intersect:function(e,t){return d(e,t,r.selectIntersect)},difference:function(e,t){return d(e,t,r.selectDifference)},differenceRev:function(e,t){return d(e,t,r.selectDifferenceRev)},xor:function(e,t){return d(e,t,r.selectXor)}},"object"==typeof window&&(window.PolyBool=r),e.exports=r},15099:e=>{e.exports=function(){var e,t=0,n=!1;function r(t,n){return e.list.push({type:t,data:n?JSON.parse(JSON.stringify(n)):void 0}),e}return e={list:[],segmentId:function(){return t++},checkIntersection:function(e,t){return r("check",{seg1:e,seg2:t})},segmentChop:function(e,t){return r("div_seg",{seg:e,pt:t}),r("chop",{seg:e,pt:t})},statusRemove:function(e){return r("pop_seg",{seg:e})},segmentUpdate:function(e){return r("seg_update",{seg:e})},segmentNew:function(e,t){return r("new_seg",{seg:e,primary:t})},segmentRemove:function(e){return r("rem_seg",{seg:e})},tempStatus:function(e,t,n){return r("temp_status",{seg:e,above:t,below:n})},rewind:function(e){return r("rewind",{seg:e})},status:function(e,t,n){return r("status",{seg:e,above:t,below:n})},vert:function(t){return t===n?e:(n=t,r("vert",{x:t}))},log:function(e){return"string"!=typeof e&&(e=JSON.stringify(e,!1,"  ")),r("log",{txt:e})},reset:function(){return r("reset")},selected:function(e){return r("selected",{segs:e})},chainStart:function(e){return r("chain_start",{seg:e})},chainRemoveHead:function(e,t){return r("chain_rem_head",{index:e,pt:t})},chainRemoveTail:function(e,t){return r("chain_rem_tail",{index:e,pt:t})},chainNew:function(e,t){return r("chain_new",{pt1:e,pt2:t})},chainMatch:function(e){return r("chain_match",{index:e})},chainClose:function(e){return r("chain_close",{index:e})},chainAddHead:function(e,t){return r("chain_add_head",{index:e,pt:t})},chainAddTail:function(e,t){return r("chain_add_tail",{index:e,pt:t})},chainConnect:function(e,t){return r("chain_con",{index1:e,index2:t})},chainReverse:function(e){return r("chain_rev",{index:e})},chainJoin:function(e,t){return r("chain_join",{index1:e,index2:t})},done:function(){return r("done")}}}},75402:e=>{e.exports=function(e){"number"!=typeof e&&(e=1e-10);var t={epsilon:function(t){return"number"==typeof t&&(e=t),e},pointAboveOrOnLine:function(t,n,r){var i=n[0],a=n[1],o=r[0],s=r[1],l=t[0];return(o-i)*(t[1]-a)-(s-a)*(l-i)>=-e},pointBetween:function(t,n,r){var i=t[1]-n[1],a=r[0]-n[0],o=t[0]-n[0],s=r[1]-n[1],l=o*a+i*s;return!(l<e)&&!(l-(a*a+s*s)>-e)},pointsSameX:function(t,n){return Math.abs(t[0]-n[0])<e},pointsSameY:function(t,n){return Math.abs(t[1]-n[1])<e},pointsSame:function(e,n){return t.pointsSameX(e,n)&&t.pointsSameY(e,n)},pointsCompare:function(e,n){return t.pointsSameX(e,n)?t.pointsSameY(e,n)?0:e[1]<n[1]?-1:1:e[0]<n[0]?-1:1},pointsCollinear:function(t,n,r){var i=t[0]-n[0],a=t[1]-n[1],o=n[0]-r[0],s=n[1]-r[1];return Math.abs(i*s-o*a)<e},linesIntersect:function(t,n,r,i){var a=n[0]-t[0],o=n[1]-t[1],s=i[0]-r[0],l=i[1]-r[1],c=a*l-o*s;if(Math.abs(c)<e)return!1;var u=t[0]-r[0],f=t[1]-r[1],d=(s*f-l*u)/c,h=(a*f-o*u)/c,p={alongA:0,alongB:0,pt:[t[0]+d*a,t[1]+d*o]};return p.alongA=d<=-e?-2:d<e?-1:d-1<=-e?0:d-1<e?1:2,p.alongB=h<=-e?-2:h<e?-1:h-1<=-e?0:h-1<e?1:2,p},pointInsideRegion:function(t,n){for(var r=t[0],i=t[1],a=n[n.length-1][0],o=n[n.length-1][1],s=!1,l=0;l<n.length;l++){var c=n[l][0],u=n[l][1];u-i>e!=o-i>e&&(a-c)*(i-u)/(o-u)+c-r>e&&(s=!s),a=c,o=u}return s}};return t}},61263:e=>{var t={toPolygon:function(e,t){function n(t){if(t.length<=0)return e.segments({inverted:!1,regions:[]});function n(t){var n=t.slice(0,t.length-1);return e.segments({inverted:!1,regions:[n]})}for(var r=n(t[0]),i=1;i<t.length;i++)r=e.selectDifference(e.combine(r,n(t[i])));return r}if("Polygon"===t.type)return e.polygon(n(t.coordinates));if("MultiPolygon"===t.type){for(var r=e.segments({inverted:!1,regions:[]}),i=0;i<t.coordinates.length;i++)r=e.selectUnion(e.combine(r,n(t.coordinates[i])));return e.polygon(r)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,t,n){function r(e,n){return t.pointInsideRegion([.5*(e[0][0]+e[1][0]),.5*(e[0][1]+e[1][1])],n)}function i(e){return{region:e,children:[]}}n=e.polygon(e.segments(n));var a=i(null);function o(e,t){for(var n=0;n<e.children.length;n++){if(r(t,(s=e.children[n]).region))return void o(s,t)}var a=i(t);for(n=0;n<e.children.length;n++){var s;r((s=e.children[n]).region,t)&&(a.children.push(s),e.children.splice(n,1),n--)}e.children.push(a)}for(var s=0;s<n.regions.length;s++){var l=n.regions[s];l.length<3||o(a,l)}function c(e,t){for(var n=0,r=e[e.length-1][0],i=e[e.length-1][1],a=[],o=0;o<e.length;o++){var s=e[o][0],l=e[o][1];a.push([s,l]),n+=l*r-s*i,r=s,i=l}return n<0!==t&&a.reverse(),a.push([a[0][0],a[0][1]]),a}var u=[];function f(e){var t=[c(e.region,!1)];u.push(t);for(var n=0;n<e.children.length;n++)t.push(d(e.children[n]))}function d(e){for(var t=0;t<e.children.length;t++)f(e.children[t]);return c(e.region,!0)}for(s=0;s<a.children.length;s++)f(a.children[s]);return u.length<=0?{type:"Polygon",coordinates:[]}:1==u.length?{type:"Polygon",coordinates:u[0]}:{type:"MultiPolygon",coordinates:u}}};e.exports=t},67702:(e,t,n)=>{var r=n(11336);e.exports=function(e,t,n){function i(e,t,r){return{id:n?n.segmentId():-1,start:e,end:t,myFill:{above:r.myFill.above,below:r.myFill.below},otherFill:null}}var a=r.create();function o(e,n){a.insertBefore(e,(function(r){return function(e,n,r,i,a,o){var s=t.pointsCompare(n,a);return 0!==s?s:t.pointsSame(r,o)?0:e!==i?e?1:-1:t.pointAboveOrOnLine(r,i?a:o,i?o:a)?1:-1}(e.isStart,e.pt,n,r.isStart,r.pt,r.other.pt)<0}))}function s(e,t){var n=function(e,t){var n=r.node({isStart:!0,pt:e.start,seg:e,primary:t,other:null,status:null});return o(n,e.end),n}(e,t);return function(e,t,n){var i=r.node({isStart:!1,pt:t.end,seg:t,primary:n,other:e,status:null});e.other=i,o(i,e.pt)}(n,e,t),n}function l(e,t){var r=i(t,e.seg.end,e.seg);return function(e,t){n&&n.segmentChop(e.seg,t),e.other.remove(),e.seg.end=t,e.other.pt=t,o(e.other,e.pt)}(e,t),s(r,e.primary)}function c(i,o){var s=r.create();function c(e){return s.findTransition((function(n){var r,i,a,o,s,l;return(r=e,i=n.ev,a=r.seg.start,o=r.seg.end,s=i.seg.start,l=i.seg.end,t.pointsCollinear(a,s,l)?t.pointsCollinear(o,s,l)||t.pointAboveOrOnLine(o,s,l)?1:-1:t.pointAboveOrOnLine(a,s,l)?1:-1)>0}))}function u(e,r){var i=e.seg,a=r.seg,o=i.start,s=i.end,c=a.start,u=a.end;n&&n.checkIntersection(i,a);var f=t.linesIntersect(o,s,c,u);if(!1===f){if(!t.pointsCollinear(o,s,c))return!1;if(t.pointsSame(o,u)||t.pointsSame(s,c))return!1;var d=t.pointsSame(o,c),h=t.pointsSame(s,u);if(d&&h)return r;var p=!d&&t.pointBetween(o,c,u),m=!h&&t.pointBetween(s,c,u);if(d)return m?l(r,s):l(e,u),r;p&&(h||(m?l(r,s):l(e,u)),l(r,o))}else 0===f.alongA&&(-1===f.alongB?l(e,c):0===f.alongB?l(e,f.pt):1===f.alongB&&l(e,u)),0===f.alongB&&(-1===f.alongA?l(r,o):0===f.alongA?l(r,f.pt):1===f.alongA&&l(r,s));return!1}for(var f=[];!a.isEmpty();){var d=a.getHead();if(n&&n.vert(d.pt[0]),d.isStart){n&&n.segmentNew(d.seg,d.primary);var h=c(d),p=h.before?h.before.ev:null,m=h.after?h.after.ev:null;function g(){if(p){var e=u(d,p);if(e)return e}return!!m&&u(d,m)}n&&n.tempStatus(d.seg,!!p&&p.seg,!!m&&m.seg);var v,y=g();if(y){var b;if(e)(b=null===d.seg.myFill.below||d.seg.myFill.above!==d.seg.myFill.below)&&(y.seg.myFill.above=!y.seg.myFill.above);else y.seg.otherFill=d.seg.myFill;n&&n.segmentUpdate(y.seg),d.other.remove(),d.remove()}if(a.getHead()!==d){n&&n.rewind(d.seg);continue}if(e)b=null===d.seg.myFill.below||d.seg.myFill.above!==d.seg.myFill.below,d.seg.myFill.below=m?m.seg.myFill.above:i,d.seg.myFill.above=b?!d.seg.myFill.below:d.seg.myFill.below;else if(null===d.seg.otherFill)v=m?d.primary===m.primary?m.seg.otherFill.above:m.seg.myFill.above:d.primary?o:i,d.seg.otherFill={above:v,below:v};n&&n.status(d.seg,!!p&&p.seg,!!m&&m.seg),d.other.status=h.insert(r.node({ev:d}))}else{var x=d.status;if(null===x)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(s.exists(x.prev)&&s.exists(x.next)&&u(x.prev.ev,x.next.ev),n&&n.statusRemove(x.ev.seg),x.remove(),!d.primary){var _=d.seg.myFill;d.seg.myFill=d.seg.otherFill,d.seg.otherFill=_}f.push(d.seg)}a.getHead().remove()}return n&&n.done(),f}return e?{addRegion:function(e){for(var r,i,a,o=e[e.length-1],l=0;l<e.length;l++){r=o,o=e[l];var c=t.pointsCompare(r,o);0!==c&&s((i=c<0?r:o,a=c<0?o:r,{id:n?n.segmentId():-1,start:i,end:a,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(e){return c(e,!1)}}:{calculate:function(e,t,n,r){return e.forEach((function(e){s(i(e.start,e.end,e),!0)})),n.forEach((function(e){s(i(e.start,e.end,e),!1)})),c(t,r)}}}},11336:e=>{e.exports={create:function(){var e={root:{root:!0,next:null},exists:function(t){return null!==t&&t!==e.root},isEmpty:function(){return null===e.root.next},getHead:function(){return e.root.next},insertBefore:function(t,n){for(var r=e.root,i=e.root.next;null!==i;){if(n(i))return t.prev=i.prev,t.next=i,i.prev.next=t,void(i.prev=t);r=i,i=i.next}r.next=t,t.prev=r,t.next=null},findTransition:function(t){for(var n=e.root,r=e.root.next;null!==r&&!t(r);)n=r,r=r.next;return{before:n===e.root?null:n,after:r,insert:function(e){return e.prev=n,e.next=r,n.next=e,null!==r&&(r.prev=e),e}}}};return e},node:function(e){return e.prev=null,e.next=null,e.remove=function(){e.prev.next=e.next,e.next&&(e.next.prev=e.prev),e.prev=null,e.next=null},e}}},46146:e=>{e.exports=function(e,t,n){var r=[],i=[];return e.forEach((function(e){var a=e.start,o=e.end;if(t.pointsSame(a,o))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{n&&n.chainStart(e);for(var s={index:0,matches_head:!1,matches_pt1:!1},l={index:0,matches_head:!1,matches_pt1:!1},c=s,u=0;u<r.length;u++){var f=(g=r[u])[0],d=(g[1],g[g.length-1]);g[g.length-2];if(t.pointsSame(f,a)){if(k(u,!0,!0))break}else if(t.pointsSame(f,o)){if(k(u,!0,!1))break}else if(t.pointsSame(d,a)){if(k(u,!1,!0))break}else if(t.pointsSame(d,o)&&k(u,!1,!1))break}if(c===s)return r.push([a,o]),void(n&&n.chainNew(a,o));if(c===l){n&&n.chainMatch(s.index);var h=s.index,p=s.matches_pt1?o:a,m=s.matches_head,g=r[h],v=m?g[0]:g[g.length-1],y=m?g[1]:g[g.length-2],b=m?g[g.length-1]:g[0],x=m?g[g.length-2]:g[1];return t.pointsCollinear(y,v,p)&&(m?(n&&n.chainRemoveHead(s.index,p),g.shift()):(n&&n.chainRemoveTail(s.index,p),g.pop()),v=y),t.pointsSame(b,p)?(r.splice(h,1),t.pointsCollinear(x,b,v)&&(m?(n&&n.chainRemoveTail(s.index,v),g.pop()):(n&&n.chainRemoveHead(s.index,v),g.shift())),n&&n.chainClose(s.index),void i.push(g)):void(m?(n&&n.chainAddHead(s.index,p),g.unshift(p)):(n&&n.chainAddTail(s.index,p),g.push(p)))}var _=s.index,w=l.index;n&&n.chainConnect(_,w);var A=r[_].length<r[w].length;s.matches_head?l.matches_head?A?(E(_),T(_,w)):(E(w),T(w,_)):T(w,_):l.matches_head?T(_,w):A?(E(_),T(w,_)):(E(w),T(_,w))}function k(e,t,n){return c.index=e,c.matches_head=t,c.matches_pt1=n,c===s?(c=l,!1):(c=null,!0)}function E(e){n&&n.chainReverse(e),r[e].reverse()}function T(e,i){var a=r[e],o=r[i],s=a[a.length-1],l=a[a.length-2],c=o[0],u=o[1];t.pointsCollinear(l,s,c)&&(n&&n.chainRemoveTail(e,s),a.pop(),s=l),t.pointsCollinear(s,c,u)&&(n&&n.chainRemoveHead(i,c),o.shift()),n&&n.chainJoin(e,i),r[e]=a.concat(o),r.splice(i,1)}})),i}},95707:e=>{function t(e,t,n){var r=[];return e.forEach((function(e){var i=(e.myFill.above?8:0)+(e.myFill.below?4:0)+(e.otherFill&&e.otherFill.above?2:0)+(e.otherFill&&e.otherFill.below?1:0);0!==t[i]&&r.push({id:n?n.segmentId():-1,start:e.start,end:e.end,myFill:{above:1===t[i],below:2===t[i]},otherFill:null})})),n&&n.selected(r),r}var n={union:function(e,n){return t(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],n)},intersect:function(e,n){return t(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],n)},difference:function(e,n){return t(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],n)},differenceRev:function(e,n){return t(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],n)},xor:function(e,n){return t(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],n)}};e.exports=n},31408:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.default)((function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=null;return t.forEach((function(e){if(null==i){var t=e.apply(void 0,n);null!=t&&(i=t)}})),i}))};var r,i=n(641),a=(r=i)&&r.__esModule?r:{default:r};e.exports=t.default},641:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n,r,i,a,o){var s=i||"<<anonymous>>",l=o||r;if(null==n[r])return t?new Error("Required "+a+" `"+l+"` was not specified in `"+s+"`."):null;for(var c=arguments.length,u=Array(c>6?c-6:0),f=6;f<c;f++)u[f-6]=arguments[f];return e.apply(void 0,[n,r,s,a,l].concat(u))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n},e.exports=t.default},48182:(e,t,n)=>{"use strict";var r=n(73789);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},31844:(e,t,n)=>{e.exports=n(48182)()},73789:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},15968:(e,t,n)=>{"use strict";var r=n(57004),i=n(31844),a=n(78306);function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var s=o(r),l=o(i),c=o(a),u=function(){return u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},u.apply(this,arguments)};function f(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}var d=s.default.forwardRef((function(e,t){var n=e.classes,r=e.value,i=e.min,a=e.max,o=e.onChange,l=e.onMouseUpOrTouchEnd,c=e.onMouseUp,d=e.onTouchEnd,h=f(e,["classes","value","min","max","onChange","onMouseUpOrTouchEnd","onMouseUp","onTouchEnd"]);return s.default.createElement("input",u({ref:t,type:"range",value:r,min:i,max:a,onChange:function(e){return o(e,e.target.valueAsNumber)},onMouseUp:function(e){l(e),c&&c(e)},onTouchEnd:function(e){l(e),d&&d(e)},className:n,"aria-valuenow":Number(r),"aria-valuemin":Number(i),"aria-valuemax":Number(a)},h))})),h=s.default.memo(d),p=s.default.forwardRef((function(e,t){var n=e.value,i=e.onChange,a=void 0===i?function(){}:i,o=e.onAfterChange,l=void 0===o?function(){}:o,d=e.disabled,p=void 0!==d&&d,m=e.size,g=e.min,v=void 0===g?0:g,y=e.max,b=void 0===y?100:y,x=e.step,_=e.variant,w=void 0===_?"primary":_,A=e.inputProps,k=void 0===A?{}:A,E=e.tooltip,T=void 0===E?"auto":E,M=e.tooltipPlacement,S=void 0===M?"bottom":M,C=e.tooltipLabel,O=e.tooltipStyle,R=void 0===O?{}:O,N=e.tooltipProps,L=void 0===N?{}:N,D=e.bsPrefix,P=e.className,I=f(e,["value","onChange","onAfterChange","disabled","size","min","max","step","variant","inputProps","tooltip","tooltipPlacement","tooltipLabel","tooltipStyle","tooltipProps","bsPrefix","className"]),F=r.useState(),z=F[0],j=F[1],B=D||"range-slider",U="auto"===T||"on"===T,$=c.default(P,B,m&&B+"--"+m,p&&"disabled",w&&B+"--"+w),q=u(u({},k),I),H=q.onMouseUp,V=q.onTouchEnd,W=f(q,["onMouseUp","onTouchEnd"]),G=r.useCallback((function(e){z!==e.target.value&&l(e,e.target.valueAsNumber),j(e.target.value)}),[z,l]),Y=s.default.createElement(h,u({},u({disabled:p,value:n,min:v,max:b,ref:t,step:x,classes:$,onMouseUpOrTouchEnd:G,onTouchEnd:V,onMouseUp:H,onChange:a},W))),X=c.default(B+"__wrap",m&&B+"__wrap--"+m),K=c.default(B+"__tooltip",U&&B+"__tooltip--"+T,S&&B+"__tooltip--"+S,p&&B+"__tooltip--disabled"),Z="sm"===m?8:"lg"===m?12:10,J=(Number(n)-v)/(b-v),Q=100*J,ee=2*(J-.5)*-Z;return s.default.createElement("span",{className:X},Y,U&&s.default.createElement("div",u({className:K,style:u(u({},R||{}),{left:"calc("+Q+"% + "+ee+"px)"})},L),s.default.createElement("div",{className:B+"__tooltip__label"},C?C(Number(n)):n),s.default.createElement("div",{className:B+"__tooltip__caret"})))}));p.propTypes={value:l.default.oneOfType([l.default.number,l.default.string]).isRequired,onChange:l.default.func,onAfterChange:l.default.func,min:l.default.number,max:l.default.number,step:l.default.number,disabled:l.default.bool,size:l.default.oneOf(["sm","lg"]),variant:l.default.oneOf(["primary","secondary","success","danger","warning","info","dark","light"]),inputProps:l.default.object,tooltip:l.default.oneOf(["auto","on","off"]),tooltipPlacement:l.default.oneOf(["top","bottom"]),tooltipLabel:l.default.func,tooltipStyle:l.default.object,tooltipProps:l.default.object,className:l.default.string,bsPrefix:l.default.string};var m=s.default.memo(p);e.exports=m},46599:(e,t,n)=>{"use strict";var r=n(57004),i=n(34204),a=n(53966);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));function s(e,t,n,r,i,a,o,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var l=!1,c=null,u=!1,f=null,d={onError:function(e){l=!0,c=e}};function h(e,t,n,r,i,a,o,u,f){l=!1,c=null,s.apply(d,arguments)}var p=null,m=null,g=null;function v(e,t,n){var r=e.type||"unknown-event";e.currentTarget=g(n),function(e,t,n,r,i,a,s,d,p){if(h.apply(this,arguments),l){if(!l)throw Error(o(198));var m=c;l=!1,c=null,u||(u=!0,f=m)}}(r,t,void 0,e),e.currentTarget=null}var y=null,b={};function x(){if(y)for(var e in b){var t=b[e],n=y.indexOf(e);if(!(-1<n))throw Error(o(96,e));if(!w[n]){if(!t.extractEvents)throw Error(o(97,e));for(var r in w[n]=t,n=t.eventTypes){var i=void 0,a=n[r],s=t,l=r;if(A.hasOwnProperty(l))throw Error(o(99,l));A[l]=a;var c=a.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&_(c[i],s,l);i=!0}else a.registrationName?(_(a.registrationName,s,l),i=!0):i=!1;if(!i)throw Error(o(98,r,e))}}}}function _(e,t,n){if(k[e])throw Error(o(100,e));k[e]=t,E[e]=t.eventTypes[n].dependencies}var w=[],A={},k={},E={};function T(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!b.hasOwnProperty(t)||b[t]!==r){if(b[t])throw Error(o(102,t));b[t]=r,n=!0}}n&&x()}var M=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),S=null,C=null,O=null;function R(e){if(e=m(e)){if("function"!=typeof S)throw Error(o(280));var t=e.stateNode;t&&(t=p(t),S(e.stateNode,e.type,t))}}function N(e){C?O?O.push(e):O=[e]:C=e}function L(){if(C){var e=C,t=O;if(O=C=null,R(e),t)for(e=0;e<t.length;e++)R(t[e])}}function D(e,t){return e(t)}function P(e,t,n,r,i){return e(t,n,r,i)}function I(){}var F=D,z=!1,j=!1;function B(){null===C&&null===O||(I(),L())}function U(e,t,n){if(j)return e(t,n);j=!0;try{return F(e,t,n)}finally{j=!1,B()}}var $=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,q=Object.prototype.hasOwnProperty,H={},V={};function W(e,t,n,r,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a}var G={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){G[e]=new W(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];G[t]=new W(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){G[e]=new W(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){G[e]=new W(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){G[e]=new W(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){G[e]=new W(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){G[e]=new W(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){G[e]=new W(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){G[e]=new W(e,5,!1,e.toLowerCase(),null,!1)}));var Y=/[\-:]([a-z])/g;function X(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(Y,X);G[t]=new W(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(Y,X);G[t]=new W(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(Y,X);G[t]=new W(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){G[e]=new W(e,1,!1,e.toLowerCase(),null,!1)})),G.xlinkHref=new W("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){G[e]=new W(e,1,!1,e.toLowerCase(),null,!0)}));var K=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Z(e,t,n,r){var i=G.hasOwnProperty(t)?G[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!q.call(V,e)||!q.call(H,e)&&($.test(e)?V[e]=!0:(H[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}K.hasOwnProperty("ReactCurrentDispatcher")||(K.ReactCurrentDispatcher={current:null}),K.hasOwnProperty("ReactCurrentBatchConfig")||(K.ReactCurrentBatchConfig={suspense:null});var J=/^(.*)[\\\/]/,Q="function"==typeof Symbol&&Symbol.for,ee=Q?Symbol.for("react.element"):60103,te=Q?Symbol.for("react.portal"):60106,ne=Q?Symbol.for("react.fragment"):60107,re=Q?Symbol.for("react.strict_mode"):60108,ie=Q?Symbol.for("react.profiler"):60114,ae=Q?Symbol.for("react.provider"):60109,oe=Q?Symbol.for("react.context"):60110,se=Q?Symbol.for("react.concurrent_mode"):60111,le=Q?Symbol.for("react.forward_ref"):60112,ce=Q?Symbol.for("react.suspense"):60113,ue=Q?Symbol.for("react.suspense_list"):60120,fe=Q?Symbol.for("react.memo"):60115,de=Q?Symbol.for("react.lazy"):60116,he=Q?Symbol.for("react.block"):60121,pe="function"==typeof Symbol&&Symbol.iterator;function me(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=pe&&e[pe]||e["@@iterator"])?e:null}function ge(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case ne:return"Fragment";case te:return"Portal";case ie:return"Profiler";case re:return"StrictMode";case ce:return"Suspense";case ue:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case oe:return"Context.Consumer";case ae:return"Context.Provider";case le:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case fe:return ge(e.type);case he:return ge(e.render);case de:if(e=1===e._status?e._result:null)return ge(e)}return null}function ve(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,a=ge(e.type);n=null,r&&(n=ge(r.type)),r=a,a="",i?a=" (at "+i.fileName.replace(J,"")+":"+i.lineNumber+")":n&&(a=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+a}t+=n,e=e.return}while(e);return t}function ye(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function be(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function xe(e){e._valueTracker||(e._valueTracker=function(e){var t=be(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function _e(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=be(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function we(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Ae(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ye(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function ke(e,t){null!=(t=t.checked)&&Z(e,"checked",t,!1)}function Ee(e,t){ke(e,t);var n=ye(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Me(e,t.type,n):t.hasOwnProperty("defaultValue")&&Me(e,t.type,ye(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Te(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Me(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Se(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Ce(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ye(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Oe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ye(n)}}function Ne(e,t){var n=ye(t.value),r=ye(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var De="http://www.w3.org/1999/xhtml",Pe="http://www.w3.org/2000/svg";function Ie(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Ie(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ze,je,Be=(je=function(e,t){if(e.namespaceURI!==Pe||"innerHTML"in e)e.innerHTML=t;else{for((ze=ze||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ze.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return je(e,t)}))}:je);function Ue(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function $e(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var qe={animationend:$e("Animation","AnimationEnd"),animationiteration:$e("Animation","AnimationIteration"),animationstart:$e("Animation","AnimationStart"),transitionend:$e("Transition","TransitionEnd")},He={},Ve={};function We(e){if(He[e])return He[e];if(!qe[e])return e;var t,n=qe[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ve)return He[e]=n[t];return e}M&&(Ve=document.createElement("div").style,"AnimationEvent"in window||(delete qe.animationend.animation,delete qe.animationiteration.animation,delete qe.animationstart.animation),"TransitionEvent"in window||delete qe.transitionend.transition);var Ge=We("animationend"),Ye=We("animationiteration"),Xe=We("animationstart"),Ke=We("transitionend"),Ze="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Je=new("function"==typeof WeakMap?WeakMap:Map);function Qe(e){var t=Je.get(e);return void 0===t&&(t=new Map,Je.set(e,t)),t}function et(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function tt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function nt(e){if(et(e)!==e)throw Error(o(188))}function rt(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=et(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return nt(i),e;if(a===r)return nt(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function it(e,t){if(null==t)throw Error(o(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function at(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var ot=null;function st(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)v(e,t[r],n[r]);else t&&v(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function lt(e){if(null!==e&&(ot=it(ot,e)),e=ot,ot=null,e){if(at(e,st),ot)throw Error(o(95));if(u)throw e=f,u=!1,f=null,e}}function ct(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ut(e){if(!M)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}var ft=[];function dt(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>ft.length&&ft.push(e)}function ht(e,t,n,r){if(ft.length){var i=ft.pop();return i.topLevelType=e,i.eventSystemFlags=r,i.nativeEvent=t,i.targetInst=n,i}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function pt(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=Ln(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=ct(e.nativeEvent);r=e.topLevelType;var a=e.nativeEvent,o=e.eventSystemFlags;0===n&&(o|=64);for(var s=null,l=0;l<w.length;l++){var c=w[l];c&&(c=c.extractEvents(r,t,a,i,o))&&(s=it(s,c))}lt(s)}}function mt(e,t,n){if(!n.has(e)){switch(e){case"scroll":Xt(t,"scroll",!0);break;case"focus":case"blur":Xt(t,"focus",!0),Xt(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ut(e)&&Xt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Ze.indexOf(e)&&Yt(e,t)}n.set(e,null)}}var gt,vt,yt,bt=!1,xt=[],_t=null,wt=null,At=null,kt=new Map,Et=new Map,Tt=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),St="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Ct(e,t,n,r,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:i,container:r}}function Ot(e,t){switch(e){case"focus":case"blur":_t=null;break;case"dragenter":case"dragleave":wt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":kt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Et.delete(t.pointerId)}}function Rt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=Ct(t,n,r,i,a),null!==t&&(null!==(t=Dn(t))&&vt(t)),e):(e.eventSystemFlags|=r,e)}function Nt(e){var t=Ln(e.target);if(null!==t){var n=et(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=tt(n)))return e.blockedOn=t,void a.unstable_runWithPriority(e.priority,(function(){yt(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Lt(e){if(null!==e.blockedOn)return!1;var t=Qt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=Dn(t);return null!==n&&vt(n),e.blockedOn=t,!1}return!0}function Dt(e,t,n){Lt(e)&&n.delete(t)}function Pt(){for(bt=!1;0<xt.length;){var e=xt[0];if(null!==e.blockedOn){null!==(e=Dn(e.blockedOn))&&gt(e);break}var t=Qt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:xt.shift()}null!==_t&&Lt(_t)&&(_t=null),null!==wt&&Lt(wt)&&(wt=null),null!==At&&Lt(At)&&(At=null),kt.forEach(Dt),Et.forEach(Dt)}function It(e,t){e.blockedOn===t&&(e.blockedOn=null,bt||(bt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Pt)))}function Ft(e){function t(t){return It(t,e)}if(0<xt.length){It(xt[0],e);for(var n=1;n<xt.length;n++){var r=xt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==_t&&It(_t,e),null!==wt&&It(wt,e),null!==At&&It(At,e),kt.forEach(t),Et.forEach(t),n=0;n<Tt.length;n++)(r=Tt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Tt.length&&null===(n=Tt[0]).blockedOn;)Nt(n),null===n.blockedOn&&Tt.shift()}var zt={},jt=new Map,Bt=new Map,Ut=["abort","abort",Ge,"animationEnd",Ye,"animationIteration",Xe,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ke,"transitionEnd","waiting","waiting"];function $t(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1],a="on"+(i[0].toUpperCase()+i.slice(1));a={phasedRegistrationNames:{bubbled:a,captured:a+"Capture"},dependencies:[r],eventPriority:t},Bt.set(r,t),jt.set(r,a),zt[i]=a}}$t("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),$t("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),$t(Ut,2);for(var qt="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Ht=0;Ht<qt.length;Ht++)Bt.set(qt[Ht],0);var Vt=a.unstable_UserBlockingPriority,Wt=a.unstable_runWithPriority,Gt=!0;function Yt(e,t){Xt(t,e,!1)}function Xt(e,t,n){var r=Bt.get(t);switch(void 0===r?2:r){case 0:r=Kt.bind(null,t,1,e);break;case 1:r=Zt.bind(null,t,1,e);break;default:r=Jt.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Kt(e,t,n,r){z||I();var i=Jt,a=z;z=!0;try{P(i,e,t,n,r)}finally{(z=a)||B()}}function Zt(e,t,n,r){Wt(Vt,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){if(Gt)if(0<xt.length&&-1<Mt.indexOf(e))e=Ct(null,e,t,n,r),xt.push(e);else{var i=Qt(e,t,n,r);if(null===i)Ot(e,r);else if(-1<Mt.indexOf(e))e=Ct(i,e,t,n,r),xt.push(e);else if(!function(e,t,n,r,i){switch(t){case"focus":return _t=Rt(_t,e,t,n,r,i),!0;case"dragenter":return wt=Rt(wt,e,t,n,r,i),!0;case"mouseover":return At=Rt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return kt.set(a,Rt(kt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Et.set(a,Rt(Et.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r)){Ot(e,r),e=ht(e,r,null,t);try{U(pt,e)}finally{dt(e)}}}}function Qt(e,t,n,r){if(null!==(n=Ln(n=ct(r)))){var i=et(n);if(null===i)n=null;else{var a=i.tag;if(13===a){if(null!==(n=tt(i)))return n;n=null}else if(3===a){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}e=ht(e,r,n,t);try{U(pt,e)}finally{dt(e)}return null}var en={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tn=["Webkit","ms","Moz","O"];function nn(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||en.hasOwnProperty(e)&&en[e]?(""+t).trim():t+"px"}function rn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=nn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(en).forEach((function(e){tn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),en[t]=en[e]}))}));var an=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function on(e,t){if(t){if(an[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(o(62,""))}}function sn(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ln=De;function cn(e,t){var n=Qe(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=E[t];for(var r=0;r<t.length;r++)mt(t[r],e,n)}function un(){}function fn(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function dn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hn(e,t){var n,r=dn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dn(r)}}function pn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mn(){for(var e=window,t=fn();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=fn((e=t.contentWindow).document)}return t}function gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var vn="$",yn="/$",bn="$?",xn="$!",_n=null,wn=null;function An(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function kn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var En="function"==typeof setTimeout?setTimeout:void 0,Tn="function"==typeof clearTimeout?clearTimeout:void 0;function Mn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Sn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if(n===vn||n===xn||n===bn){if(0===t)return e;t--}else n===yn&&t++}e=e.previousSibling}return null}var Cn=Math.random().toString(36).slice(2),On="__reactInternalInstance$"+Cn,Rn="__reactEventHandlers$"+Cn,Nn="__reactContainere$"+Cn;function Ln(e){var t=e[On];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Nn]||n[On]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Sn(e);null!==e;){if(n=e[On])return n;e=Sn(e)}return t}n=(e=n).parentNode}return null}function Dn(e){return!(e=e[On]||e[Nn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Pn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function In(e){return e[Rn]||null}function Fn(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function zn(e,t){var n=e.stateNode;if(!n)return null;var r=p(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(o(231,t,typeof n));return n}function jn(e,t,n){(t=zn(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function Bn(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Fn(t);for(t=n.length;0<t--;)jn(n[t],"captured",e);for(t=0;t<n.length;t++)jn(n[t],"bubbled",e)}}function Un(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=zn(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function $n(e){e&&e.dispatchConfig.registrationName&&Un(e._targetInst,null,e)}function qn(e){at(e,Bn)}var Hn=null,Vn=null,Wn=null;function Gn(){if(Wn)return Wn;var e,t,n=Vn,r=n.length,i="value"in Hn?Hn.value:Hn.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Wn=i.slice(e,1<t?1-t:void 0)}function Yn(){return!0}function Xn(){return!1}function Kn(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Yn:Xn,this.isPropagationStopped=Xn,this}function Zn(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Jn(e){if(!(e instanceof this))throw Error(o(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Qn(e){e.eventPool=[],e.getPooled=Zn,e.release=Jn}i(Kn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Yn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Yn)},persist:function(){this.isPersistent=Yn},isPersistent:Xn,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Xn,this._dispatchInstances=this._dispatchListeners=null}}),Kn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Kn.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var a=new t;return i(a,n.prototype),n.prototype=a,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,Qn(n),n},Qn(Kn);var er=Kn.extend({data:null}),tr=Kn.extend({data:null}),nr=[9,13,27,32],rr=M&&"CompositionEvent"in window,ir=null;M&&"documentMode"in document&&(ir=document.documentMode);var ar=M&&"TextEvent"in window&&!ir,or=M&&(!rr||ir&&8<ir&&11>=ir),sr=String.fromCharCode(32),lr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},cr=!1;function ur(e,t){switch(e){case"keyup":return-1!==nr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function fr(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var dr=!1;var hr={eventTypes:lr,extractEvents:function(e,t,n,r){var i;if(rr)e:{switch(e){case"compositionstart":var a=lr.compositionStart;break e;case"compositionend":a=lr.compositionEnd;break e;case"compositionupdate":a=lr.compositionUpdate;break e}a=void 0}else dr?ur(e,n)&&(a=lr.compositionEnd):"keydown"===e&&229===n.keyCode&&(a=lr.compositionStart);return a?(or&&"ko"!==n.locale&&(dr||a!==lr.compositionStart?a===lr.compositionEnd&&dr&&(i=Gn()):(Vn="value"in(Hn=r)?Hn.value:Hn.textContent,dr=!0)),a=er.getPooled(a,t,n,r),i?a.data=i:null!==(i=fr(n))&&(a.data=i),qn(a),i=a):i=null,(e=ar?function(e,t){switch(e){case"compositionend":return fr(t);case"keypress":return 32!==t.which?null:(cr=!0,sr);case"textInput":return(e=t.data)===sr&&cr?null:e;default:return null}}(e,n):function(e,t){if(dr)return"compositionend"===e||!rr&&ur(e,t)?(e=Gn(),Wn=Vn=Hn=null,dr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return or&&"ko"!==t.locale?null:t.data}}(e,n))?((t=tr.getPooled(lr.beforeInput,t,n,r)).data=e,qn(t)):t=null,null===i?t:null===t?i:[i,t]}},pr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!pr[e.type]:"textarea"===t}var gr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function vr(e,t,n){return(e=Kn.getPooled(gr.change,e,t,n)).type="change",N(n),qn(e),e}var yr=null,br=null;function xr(e){lt(e)}function _r(e){if(_e(Pn(e)))return e}function wr(e,t){if("change"===e)return t}var Ar=!1;function kr(){yr&&(yr.detachEvent("onpropertychange",Er),br=yr=null)}function Er(e){if("value"===e.propertyName&&_r(br))if(e=vr(br,e,ct(e)),z)lt(e);else{z=!0;try{D(xr,e)}finally{z=!1,B()}}}function Tr(e,t,n){"focus"===e?(kr(),br=n,(yr=t).attachEvent("onpropertychange",Er)):"blur"===e&&kr()}function Mr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return _r(br)}function Sr(e,t){if("click"===e)return _r(t)}function Cr(e,t){if("input"===e||"change"===e)return _r(t)}M&&(Ar=ut("input")&&(!document.documentMode||9<document.documentMode));var Or={eventTypes:gr,_isInputEventSupported:Ar,extractEvents:function(e,t,n,r){var i=t?Pn(t):window,a=i.nodeName&&i.nodeName.toLowerCase();if("select"===a||"input"===a&&"file"===i.type)var o=wr;else if(mr(i))if(Ar)o=Cr;else{o=Mr;var s=Tr}else(a=i.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=Sr);if(o&&(o=o(e,t)))return vr(o,n,r);s&&s(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Me(i,"number",i.value)}},Rr=Kn.extend({view:null,detail:null}),Nr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Nr[e])&&!!t[e]}function Dr(){return Lr}var Pr=0,Ir=0,Fr=!1,zr=!1,jr=Rr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Dr,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Pr;return Pr=e.screenX,Fr?"mousemove"===e.type?e.screenX-t:0:(Fr=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Ir;return Ir=e.screenY,zr?"mousemove"===e.type?e.screenY-t:0:(zr=!0,0)}}),Br=jr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Ur={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},$r={eventTypes:Ur,extractEvents:function(e,t,n,r,i){var a="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(a&&!(32&i)&&(n.relatedTarget||n.fromElement)||!o&&!a)return null;(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,o)?(o=t,null!==(t=(t=n.relatedTarget||n.toElement)?Ln(t):null)&&(t!==et(t)||5!==t.tag&&6!==t.tag)&&(t=null)):o=null;if(o===t)return null;if("mouseout"===e||"mouseover"===e)var s=jr,l=Ur.mouseLeave,c=Ur.mouseEnter,u="mouse";else"pointerout"!==e&&"pointerover"!==e||(s=Br,l=Ur.pointerLeave,c=Ur.pointerEnter,u="pointer");if(e=null==o?a:Pn(o),a=null==t?a:Pn(t),(l=s.getPooled(l,o,n,r)).type=u+"leave",l.target=e,l.relatedTarget=a,(n=s.getPooled(c,t,n,r)).type=u+"enter",n.target=a,n.relatedTarget=e,u=t,(r=o)&&u)e:{for(c=u,o=0,e=s=r;e;e=Fn(e))o++;for(e=0,t=c;t;t=Fn(t))e++;for(;0<o-e;)s=Fn(s),o--;for(;0<e-o;)c=Fn(c),e--;for(;o--;){if(s===c||s===c.alternate)break e;s=Fn(s),c=Fn(c)}s=null}else s=null;for(c=s,s=[];r&&r!==c&&(null===(o=r.alternate)||o!==c);)s.push(r),r=Fn(r);for(r=[];u&&u!==c&&(null===(o=u.alternate)||o!==c);)r.push(u),u=Fn(u);for(u=0;u<s.length;u++)Un(s[u],"bubbled",l);for(u=r.length;0<u--;)Un(r[u],"captured",n);return 64&i?[l,n]:[l]}};var qr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Hr=Object.prototype.hasOwnProperty;function Vr(e,t){if(qr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Hr.call(t,n[r])||!qr(e[n[r]],t[n[r]]))return!1;return!0}var Wr=M&&"documentMode"in document&&11>=document.documentMode,Gr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Yr=null,Xr=null,Kr=null,Zr=!1;function Jr(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Zr||null==Yr||Yr!==fn(n)?null:("selectionStart"in(n=Yr)&&gn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Kr&&Vr(Kr,n)?null:(Kr=n,(e=Kn.getPooled(Gr.select,Xr,e,t)).type="select",e.target=Yr,qn(e),e))}var Qr={eventTypes:Gr,extractEvents:function(e,t,n,r,i,a){if(!(a=!(i=a||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{i=Qe(i),a=E.onSelect;for(var o=0;o<a.length;o++)if(!i.has(a[o])){i=!1;break e}i=!0}a=!i}if(a)return null;switch(i=t?Pn(t):window,e){case"focus":(mr(i)||"true"===i.contentEditable)&&(Yr=i,Xr=t,Kr=null);break;case"blur":Kr=Xr=Yr=null;break;case"mousedown":Zr=!0;break;case"contextmenu":case"mouseup":case"dragend":return Zr=!1,Jr(n,r);case"selectionchange":if(Wr)break;case"keydown":case"keyup":return Jr(n,r)}return null}},ei=Kn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ti=Kn.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ni=Rr.extend({relatedTarget:null});function ri(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var ii={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ai={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oi=Rr.extend({key:function(e){if(e.key){var t=ii[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ri(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ai[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Dr,charCode:function(e){return"keypress"===e.type?ri(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ri(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),si=jr.extend({dataTransfer:null}),li=Rr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Dr}),ci=Kn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ui=jr.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),fi={eventTypes:zt,extractEvents:function(e,t,n,r){var i=jt.get(e);if(!i)return null;switch(e){case"keypress":if(0===ri(n))return null;case"keydown":case"keyup":e=oi;break;case"blur":case"focus":e=ni;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=jr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=si;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=li;break;case Ge:case Ye:case Xe:e=ei;break;case Ke:e=ci;break;case"scroll":e=Rr;break;case"wheel":e=ui;break;case"copy":case"cut":case"paste":e=ti;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Br;break;default:e=Kn}return qn(t=e.getPooled(i,t,n,r)),t}};if(y)throw Error(o(101));y=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),x(),p=In,m=Dn,g=Pn,T({SimpleEventPlugin:fi,EnterLeaveEventPlugin:$r,ChangeEventPlugin:Or,SelectEventPlugin:Qr,BeforeInputEventPlugin:hr});var di=[],hi=-1;function pi(e){0>hi||(e.current=di[hi],di[hi]=null,hi--)}function mi(e,t){hi++,di[hi]=e.current,e.current=t}var gi={},vi={current:gi},yi={current:!1},bi=gi;function xi(e,t){var n=e.type.contextTypes;if(!n)return gi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function _i(e){return null!=(e=e.childContextTypes)}function wi(){pi(yi),pi(vi)}function Ai(e,t,n){if(vi.current!==gi)throw Error(o(168));mi(vi,t),mi(yi,n)}function ki(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,ge(t)||"Unknown",a));return i({},n,{},r)}function Ei(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||gi,bi=vi.current,mi(vi,e),mi(yi,yi.current),!0}function Ti(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=ki(e,t,bi),r.__reactInternalMemoizedMergedChildContext=e,pi(yi),pi(vi),mi(vi,e)):pi(yi),mi(yi,n)}var Mi=a.unstable_runWithPriority,Si=a.unstable_scheduleCallback,Ci=a.unstable_cancelCallback,Oi=a.unstable_requestPaint,Ri=a.unstable_now,Ni=a.unstable_getCurrentPriorityLevel,Li=a.unstable_ImmediatePriority,Di=a.unstable_UserBlockingPriority,Pi=a.unstable_NormalPriority,Ii=a.unstable_LowPriority,Fi=a.unstable_IdlePriority,zi={},ji=a.unstable_shouldYield,Bi=void 0!==Oi?Oi:function(){},Ui=null,$i=null,qi=!1,Hi=Ri(),Vi=1e4>Hi?Ri:function(){return Ri()-Hi};function Wi(){switch(Ni()){case Li:return 99;case Di:return 98;case Pi:return 97;case Ii:return 96;case Fi:return 95;default:throw Error(o(332))}}function Gi(e){switch(e){case 99:return Li;case 98:return Di;case 97:return Pi;case 96:return Ii;case 95:return Fi;default:throw Error(o(332))}}function Yi(e,t){return e=Gi(e),Mi(e,t)}function Xi(e,t,n){return e=Gi(e),Si(e,t,n)}function Ki(e){return null===Ui?(Ui=[e],$i=Si(Li,Ji)):Ui.push(e),zi}function Zi(){if(null!==$i){var e=$i;$i=null,Ci(e)}Ji()}function Ji(){if(!qi&&null!==Ui){qi=!0;var e=0;try{var t=Ui;Yi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ui=null}catch(t){throw null!==Ui&&(Ui=Ui.slice(e+1)),Si(Li,Zi),t}finally{qi=!1}}}function Qi(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function ea(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var ta={current:null},na=null,ra=null,ia=null;function aa(){ia=ra=na=null}function oa(e){var t=ta.current;pi(ta),e.type._context._currentValue=t}function sa(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function la(e,t){na=e,ia=ra=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Io=!0),e.firstContext=null)}function ca(e,t){if(ia!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(ia=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ra){if(null===na)throw Error(o(308));ra=t,na.dependencies={expirationTime:0,firstContext:t,responders:null}}else ra=ra.next=t;return e._currentValue}var ua=!1;function fa(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function da(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function ha(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function pa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ma(e,t){var n=e.alternate;null!==n&&da(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function ga(e,t,n,r){var a=e.updateQueue;ua=!1;var o=a.baseQueue,s=a.shared.pending;if(null!==s){if(null!==o){var l=o.next;o.next=s.next,s.next=l}o=s,a.shared.pending=null,null!==(l=e.alternate)&&(null!==(l=l.updateQueue)&&(l.baseQueue=s))}if(null!==o){l=o.next;var c=a.baseState,u=0,f=null,d=null,h=null;if(null!==l)for(var p=l;;){if((s=p.expirationTime)<r){var m={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===h?(d=h=m,f=c):h=h.next=m,s>u&&(u=s)}else{null!==h&&(h=h.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null}),wl(s,p.suspenseConfig);e:{var g=e,v=p;switch(s=t,m=n,v.tag){case 1:if("function"==typeof(g=v.payload)){c=g.call(m,c,s);break e}c=g;break e;case 3:g.effectTag=-4097&g.effectTag|64;case 0:if(null==(s="function"==typeof(g=v.payload)?g.call(m,c,s):g))break e;c=i({},c,s);break e;case 2:ua=!0}}null!==p.callback&&(e.effectTag|=32,null===(s=a.effects)?a.effects=[p]:s.push(p))}if(null===(p=p.next)||p===l){if(null===(s=a.shared.pending))break;p=o.next=s.next,s.next=l,a.baseQueue=o=s,a.shared.pending=null}}null===h?f=c:h.next=d,a.baseState=f,a.baseQueue=h,Al(u),e.expirationTime=u,e.memoizedState=c}}function va(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!=typeof r)throw Error(o(191,r));r.call(i)}}}var ya=K.ReactCurrentBatchConfig,ba=(new r.Component).refs;function xa(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:i({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var _a={isMounted:function(e){return!!(e=e._reactInternalFiber)&&et(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=cl(),i=ya.suspense;(i=ha(r=ul(r,e,i),i)).payload=t,null!=n&&(i.callback=n),pa(e,i),fl(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=cl(),i=ya.suspense;(i=ha(r=ul(r,e,i),i)).tag=1,i.payload=t,null!=n&&(i.callback=n),pa(e,i),fl(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=cl(),r=ya.suspense;(r=ha(n=ul(n,e,r),r)).tag=2,null!=t&&(r.callback=t),pa(e,r),fl(e,n)}};function wa(e,t,n,r,i,a,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!Vr(n,r)||!Vr(i,a))}function Aa(e,t,n){var r=!1,i=gi,a=t.contextType;return"object"==typeof a&&null!==a?a=ca(a):(i=_i(t)?bi:vi.current,a=(r=null!=(r=t.contextTypes))?xi(e,i):gi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=_a,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ka(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&_a.enqueueReplaceState(t,t.state,null)}function Ea(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ba,fa(e);var a=t.contextType;"object"==typeof a&&null!==a?i.context=ca(a):(a=_i(t)?bi:vi.current,i.context=xi(e,a)),ga(e,n,i,r),i.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(xa(e,t,a,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&_a.enqueueReplaceState(i,i.state,null),ga(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}var Ta=Array.isArray;function Ma(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===ba&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!=typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Sa(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Ca(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=ql(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Wl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Ma(e,t,n),r.return=e,r):((r=Hl(n.type,n.key,n.props,null,e.mode,r)).ref=Ma(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Gl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Vl(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Wl(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case ee:return(n=Hl(t.type,t.key,t.props,null,e.mode,n)).ref=Ma(e,null,t),n.return=e,n;case te:return(t=Gl(t,e.mode,n)).return=e,t}if(Ta(t)||me(t))return(t=Vl(t,e.mode,n,null)).return=e,t;Sa(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case ee:return n.key===i?n.type===ne?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case te:return n.key===i?u(e,t,n,r):null}if(Ta(n)||me(n))return null!==i?null:f(e,t,n,r,null);Sa(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case ee:return e=e.get(null===r.key?n:r.key)||null,r.type===ne?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case te:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Ta(r)||me(r))return f(t,e=e.get(n)||null,r,i,null);Sa(t,r)}return null}function m(i,o,s,l){for(var c=null,u=null,f=o,m=o=0,g=null;null!==f&&m<s.length;m++){f.index>m?(g=f,f=null):g=f.sibling;var v=h(i,f,s[m],l);if(null===v){null===f&&(f=g);break}e&&f&&null===v.alternate&&t(i,f),o=a(v,o,m),null===u?c=v:u.sibling=v,u=v,f=g}if(m===s.length)return n(i,f),c;if(null===f){for(;m<s.length;m++)null!==(f=d(i,s[m],l))&&(o=a(f,o,m),null===u?c=f:u.sibling=f,u=f);return c}for(f=r(i,f);m<s.length;m++)null!==(g=p(f,i,m,s[m],l))&&(e&&null!==g.alternate&&f.delete(null===g.key?m:g.key),o=a(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&f.forEach((function(e){return t(i,e)})),c}function g(i,s,l,c){var u=me(l);if("function"!=typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var f=u=null,m=s,g=s=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=h(i,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),s=a(b,s,g),null===f?u=b:f.sibling=b,f=b,m=v}if(y.done)return n(i,m),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(i,y.value,c))&&(s=a(y,s,g),null===f?u=y:f.sibling=y,f=y);return u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=a(y,s,g),null===f?u=y:f.sibling=y,f=y);return e&&m.forEach((function(e){return t(i,e)})),u}return function(e,r,a,l){var c="object"==typeof a&&null!==a&&a.type===ne&&null===a.key;c&&(a=a.props.children);var u="object"==typeof a&&null!==a;if(u)switch(a.$$typeof){case ee:e:{for(u=a.key,c=r;null!==c;){if(c.key===u){if(7===c.tag){if(a.type===ne){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=Ma(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===ne?((r=Vl(a.props.children,e.mode,l,a.key)).return=e,e=r):((l=Hl(a.type,a.key,a.props,null,e.mode,l)).ref=Ma(e,r,a),l.return=e,e=l)}return s(e);case te:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Gl(a,e.mode,l)).return=e,e=r}return s(e)}if("string"==typeof a||"number"==typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Wl(a,e.mode,l)).return=e,e=r),s(e);if(Ta(a))return m(e,r,a,l);if(me(a))return g(e,r,a,l);if(u&&Sa(e,a),void 0===a&&!c)switch(e.tag){case 1:case 0:throw e=e.type,Error(o(152,e.displayName||e.name||"Component"))}return n(e,r)}}var Oa=Ca(!0),Ra=Ca(!1),Na={},La={current:Na},Da={current:Na},Pa={current:Na};function Ia(e){if(e===Na)throw Error(o(174));return e}function Fa(e,t){switch(mi(Pa,t),mi(Da,e),mi(La,Na),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Fe(null,"");break;default:t=Fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}pi(La),mi(La,t)}function za(){pi(La),pi(Da),pi(Pa)}function ja(e){Ia(Pa.current);var t=Ia(La.current),n=Fe(t,e.type);t!==n&&(mi(Da,e),mi(La,n))}function Ba(e){Da.current===e&&(pi(La),pi(Da))}var Ua={current:0};function $a(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===bn||n.data===xn))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(64&t.effectTag)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function qa(e,t){return{responder:e,props:t}}var Ha=K.ReactCurrentDispatcher,Va=K.ReactCurrentBatchConfig,Wa=0,Ga=null,Ya=null,Xa=null,Ka=!1;function Za(){throw Error(o(321))}function Ja(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!qr(e[n],t[n]))return!1;return!0}function Qa(e,t,n,r,i,a){if(Wa=a,Ga=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,Ha.current=null===e||null===e.memoizedState?Ao:ko,e=n(r,i),t.expirationTime===Wa){a=0;do{if(t.expirationTime=0,!(25>a))throw Error(o(301));a+=1,Xa=Ya=null,t.updateQueue=null,Ha.current=Eo,e=n(r,i)}while(t.expirationTime===Wa)}if(Ha.current=wo,t=null!==Ya&&null!==Ya.next,Wa=0,Xa=Ya=Ga=null,Ka=!1,t)throw Error(o(300));return e}function eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Xa?Ga.memoizedState=Xa=e:Xa=Xa.next=e,Xa}function to(){if(null===Ya){var e=Ga.alternate;e=null!==e?e.memoizedState:null}else e=Ya.next;var t=null===Xa?Ga.memoizedState:Xa.next;if(null!==t)Xa=t,Ya=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Ya=e).memoizedState,baseState:Ya.baseState,baseQueue:Ya.baseQueue,queue:Ya.queue,next:null},null===Xa?Ga.memoizedState=Xa=e:Xa=Xa.next=e}return Xa}function no(e,t){return"function"==typeof t?t(e):t}function ro(e){var t=to(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Ya,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var l=s=a=null,c=i;do{var u=c.expirationTime;if(u<Wa){var f={expirationTime:c.expirationTime,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===l?(s=l=f,a=r):l=l.next=f,u>Ga.expirationTime&&(Ga.expirationTime=u,Al(u))}else null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),wl(u,c.suspenseConfig),r=c.eagerReducer===e?c.eagerState:e(r,c.action);c=c.next}while(null!==c&&c!==i);null===l?a=r:l.next=s,qr(r,t.memoizedState)||(Io=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function io(e){var t=to(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);qr(a,t.memoizedState)||(Io=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ao(e){var t=eo();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:no,lastRenderedState:e}).dispatch=_o.bind(null,Ga,e),[t.memoizedState,e]}function oo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Ga.updateQueue)?(t={lastEffect:null},Ga.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function so(){return to().memoizedState}function lo(e,t,n,r){var i=eo();Ga.effectTag|=e,i.memoizedState=oo(1|t,n,void 0,void 0===r?null:r)}function co(e,t,n,r){var i=to();r=void 0===r?null:r;var a=void 0;if(null!==Ya){var o=Ya.memoizedState;if(a=o.destroy,null!==r&&Ja(r,o.deps))return void oo(t,n,a,r)}Ga.effectTag|=e,i.memoizedState=oo(1|t,n,a,r)}function uo(e,t){return lo(516,4,e,t)}function fo(e,t){return co(516,4,e,t)}function ho(e,t){return co(4,2,e,t)}function po(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function mo(e,t,n){return n=null!=n?n.concat([e]):null,co(4,2,po.bind(null,t,e),n)}function go(){}function vo(e,t){return eo().memoizedState=[e,void 0===t?null:t],e}function yo(e,t){var n=to();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ja(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function bo(e,t){var n=to();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ja(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function xo(e,t,n){var r=Wi();Yi(98>r?98:r,(function(){e(!0)})),Yi(97<r?97:r,(function(){var r=Va.suspense;Va.suspense=void 0===t?null:t;try{e(!1),n()}finally{Va.suspense=r}}))}function _o(e,t,n){var r=cl(),i=ya.suspense;i={expirationTime:r=ul(r,e,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var a=t.pending;if(null===a?i.next=i:(i.next=a.next,a.next=i),t.pending=i,a=e.alternate,e===Ga||null!==a&&a===Ga)Ka=!0,i.expirationTime=Wa,Ga.expirationTime=Wa;else{if(0===e.expirationTime&&(null===a||0===a.expirationTime)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.eagerReducer=a,i.eagerState=s,qr(s,o))return}catch(e){}fl(e,r)}}var wo={readContext:ca,useCallback:Za,useContext:Za,useEffect:Za,useImperativeHandle:Za,useLayoutEffect:Za,useMemo:Za,useReducer:Za,useRef:Za,useState:Za,useDebugValue:Za,useResponder:Za,useDeferredValue:Za,useTransition:Za},Ao={readContext:ca,useCallback:vo,useContext:ca,useEffect:uo,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,lo(4,2,po.bind(null,t,e),n)},useLayoutEffect:function(e,t){return lo(4,2,e,t)},useMemo:function(e,t){var n=eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=_o.bind(null,Ga,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},eo().memoizedState=e},useState:ao,useDebugValue:go,useResponder:qa,useDeferredValue:function(e,t){var n=ao(e),r=n[0],i=n[1];return uo((function(){var n=Va.suspense;Va.suspense=void 0===t?null:t;try{i(e)}finally{Va.suspense=n}}),[e,t]),r},useTransition:function(e){var t=ao(!1),n=t[0];return t=t[1],[vo(xo.bind(null,t,e),[t,e]),n]}},ko={readContext:ca,useCallback:yo,useContext:ca,useEffect:fo,useImperativeHandle:mo,useLayoutEffect:ho,useMemo:bo,useReducer:ro,useRef:so,useState:function(){return ro(no)},useDebugValue:go,useResponder:qa,useDeferredValue:function(e,t){var n=ro(no),r=n[0],i=n[1];return fo((function(){var n=Va.suspense;Va.suspense=void 0===t?null:t;try{i(e)}finally{Va.suspense=n}}),[e,t]),r},useTransition:function(e){var t=ro(no),n=t[0];return t=t[1],[yo(xo.bind(null,t,e),[t,e]),n]}},Eo={readContext:ca,useCallback:yo,useContext:ca,useEffect:fo,useImperativeHandle:mo,useLayoutEffect:ho,useMemo:bo,useReducer:io,useRef:so,useState:function(){return io(no)},useDebugValue:go,useResponder:qa,useDeferredValue:function(e,t){var n=io(no),r=n[0],i=n[1];return fo((function(){var n=Va.suspense;Va.suspense=void 0===t?null:t;try{i(e)}finally{Va.suspense=n}}),[e,t]),r},useTransition:function(e){var t=io(no),n=t[0];return t=t[1],[yo(xo.bind(null,t,e),[t,e]),n]}},To=null,Mo=null,So=!1;function Co(e,t){var n=Ul(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Oo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ro(e){if(So){var t=Mo;if(t){var n=t;if(!Oo(e,t)){if(!(t=Mn(n.nextSibling))||!Oo(e,t))return e.effectTag=-1025&e.effectTag|2,So=!1,void(To=e);Co(To,n)}To=e,Mo=Mn(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,So=!1,To=e}}function No(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;To=e}function Lo(e){if(e!==To)return!1;if(!So)return No(e),So=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!kn(t,e.memoizedProps))for(t=Mo;t;)Co(e,t),t=Mn(t.nextSibling);if(No(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if(n===yn){if(0===t){Mo=Mn(e.nextSibling);break e}t--}else n!==vn&&n!==xn&&n!==bn||t++}e=e.nextSibling}Mo=null}}else Mo=To?Mn(e.stateNode.nextSibling):null;return!0}function Do(){Mo=To=null,So=!1}var Po=K.ReactCurrentOwner,Io=!1;function Fo(e,t,n,r){t.child=null===e?Ra(t,null,n,r):Oa(t,e.child,n,r)}function zo(e,t,n,r,i){n=n.render;var a=t.ref;return la(t,i),r=Qa(e,t,n,r,a,i),null===e||Io?(t.effectTag|=1,Fo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),ts(e,t,i))}function jo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!=typeof o||$l(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Hl(n.type,null,r,null,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Bo(e,t,o,r,i,a))}return o=e.child,i<a&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:Vr)(i,r)&&e.ref===t.ref)?ts(e,t,a):(t.effectTag|=1,(e=ql(o,r)).ref=t.ref,e.return=t,t.child=e)}function Bo(e,t,n,r,i,a){return null!==e&&Vr(e.memoizedProps,r)&&e.ref===t.ref&&(Io=!1,i<a)?(t.expirationTime=e.expirationTime,ts(e,t,a)):$o(e,t,n,r,a)}function Uo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function $o(e,t,n,r,i){var a=_i(n)?bi:vi.current;return a=xi(t,a),la(t,i),n=Qa(e,t,n,r,a,i),null===e||Io?(t.effectTag|=1,Fo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),ts(e,t,i))}function qo(e,t,n,r,i){if(_i(n)){var a=!0;Ei(t)}else a=!1;if(la(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Aa(t,n,r),Ea(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,c=n.contextType;"object"==typeof c&&null!==c?c=ca(c):c=xi(t,c=_i(n)?bi:vi.current);var u=n.getDerivedStateFromProps,f="function"==typeof u||"function"==typeof o.getSnapshotBeforeUpdate;f||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==r||l!==c)&&ka(t,o,r,c),ua=!1;var d=t.memoizedState;o.state=d,ga(t,r,o,i),l=t.memoizedState,s!==r||d!==l||yi.current||ua?("function"==typeof u&&(xa(t,n,u,r),l=t.memoizedState),(s=ua||wa(t,n,s,r,d,l,c))?(f||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.effectTag|=4)):("function"==typeof o.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=s):("function"==typeof o.componentDidMount&&(t.effectTag|=4),r=!1)}else o=t.stateNode,da(e,t),s=t.memoizedProps,o.props=t.type===t.elementType?s:ea(t.type,s),l=o.context,"object"==typeof(c=n.contextType)&&null!==c?c=ca(c):c=xi(t,c=_i(n)?bi:vi.current),(f="function"==typeof(u=n.getDerivedStateFromProps)||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==r||l!==c)&&ka(t,o,r,c),ua=!1,l=t.memoizedState,o.state=l,ga(t,r,o,i),d=t.memoizedState,s!==r||l!==d||yi.current||ua?("function"==typeof u&&(xa(t,n,u,r),d=t.memoizedState),(u=ua||wa(t,n,s,r,l,d,c))?(f||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,d,c),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,d,c)),"function"==typeof o.componentDidUpdate&&(t.effectTag|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=d),o.props=r,o.state=d,o.context=c,r=u):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),r=!1);return Ho(e,t,n,r,a,i)}function Ho(e,t,n,r,i,a){Uo(e,t);var o=!!(64&t.effectTag);if(!r&&!o)return i&&Ti(t,n,!1),ts(e,t,a);r=t.stateNode,Po.current=t;var s=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&o?(t.child=Oa(t,e.child,null,a),t.child=Oa(t,null,s,a)):Fo(e,t,s,a),t.memoizedState=r.state,i&&Ti(t,n,!0),t.child}function Vo(e){var t=e.stateNode;t.pendingContext?Ai(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ai(0,t.context,!1),Fa(e,t.containerInfo)}var Wo,Go,Yo,Xo,Ko={dehydrated:null,retryTime:0};function Zo(e,t,n){var r,i=t.mode,a=t.pendingProps,o=Ua.current,s=!1;if((r=!!(64&t.effectTag))||(r=!!(2&o)&&(null===e||null!==e.memoizedState)),r?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(o|=1),mi(Ua,1&o),null===e){if(void 0!==a.fallback&&Ro(t),s){if(s=a.fallback,(a=Vl(null,i,0,null)).return=t,!(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,a.child=e;null!==e;)e.return=a,e=e.sibling;return(n=Vl(s,i,n,null)).return=t,a.sibling=n,t.memoizedState=Ko,t.child=a,n}return i=a.children,t.memoizedState=null,t.child=Ra(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,s){if(a=a.fallback,(n=ql(e,e.pendingProps)).return=t,!(2&t.mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(i=ql(i,a)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=Ko,t.child=n,i}return n=Oa(t,e.child,a.children,n),t.memoizedState=null,t.child=n}if(e=e.child,s){if(s=a.fallback,(a=Vl(null,i,0,null)).return=t,a.child=e,null!==e&&(e.return=a),!(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,a.child=e;null!==e;)e.return=a,e=e.sibling;return(n=Vl(s,i,n,null)).return=t,a.sibling=n,n.effectTag|=2,a.childExpirationTime=0,t.memoizedState=Ko,t.child=a,n}return t.memoizedState=null,t.child=Oa(t,e,a.children,n)}function Jo(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),sa(e.return,t)}function Qo(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailExpiration=0,o.tailMode=i,o.lastEffect=a)}function es(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Fo(e,t,r.children,n),2&(r=Ua.current))r=1&r|2,t.effectTag|=64;else{if(null!==e&&64&e.effectTag)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Jo(e,n);else if(19===e.tag)Jo(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(mi(Ua,r),2&t.mode)switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===$a(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Qo(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===$a(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Qo(t,!0,n,null,a,t.lastEffect);break;case"together":Qo(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function ts(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&Al(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=ql(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=ql(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ns(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function rs(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return _i(t.type)&&wi(),null;case 3:return za(),pi(yi),pi(vi),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!Lo(t)||(t.effectTag|=4),Go(t),null;case 5:Ba(t),n=Ia(Pa.current);var a=t.type;if(null!==e&&null!=t.stateNode)Yo(e,t,a,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ia(La.current),Lo(t)){r=t.stateNode,a=t.type;var s=t.memoizedProps;switch(r[On]=t,r[Rn]=s,a){case"iframe":case"object":case"embed":Yt("load",r);break;case"video":case"audio":for(e=0;e<Ze.length;e++)Yt(Ze[e],r);break;case"source":Yt("error",r);break;case"img":case"image":case"link":Yt("error",r),Yt("load",r);break;case"form":Yt("reset",r),Yt("submit",r);break;case"details":Yt("toggle",r);break;case"input":Ae(r,s),Yt("invalid",r),cn(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Yt("invalid",r),cn(n,"onChange");break;case"textarea":Re(r,s),Yt("invalid",r),cn(n,"onChange")}for(var l in on(a,s),e=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"==typeof c?r.textContent!==c&&(e=["children",c]):"number"==typeof c&&r.textContent!==""+c&&(e=["children",""+c]):k.hasOwnProperty(l)&&null!=c&&cn(n,l)}switch(a){case"input":xe(r),Te(r,s,!0);break;case"textarea":xe(r),Le(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=un)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(l=9===n.nodeType?n:n.ownerDocument,e===ln&&(e=Ie(a)),e===ln?"script"===a?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=l.createElement(a,{is:r.is}):(e=l.createElement(a),"select"===a&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,a),e[On]=t,e[Rn]=r,Wo(e,t,!1,!1),t.stateNode=e,l=sn(a,r),a){case"iframe":case"object":case"embed":Yt("load",e),c=r;break;case"video":case"audio":for(c=0;c<Ze.length;c++)Yt(Ze[c],e);c=r;break;case"source":Yt("error",e),c=r;break;case"img":case"image":case"link":Yt("error",e),Yt("load",e),c=r;break;case"form":Yt("reset",e),Yt("submit",e),c=r;break;case"details":Yt("toggle",e),c=r;break;case"input":Ae(e,r),c=we(e,r),Yt("invalid",e),cn(n,"onChange");break;case"option":c=Se(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},c=i({},r,{value:void 0}),Yt("invalid",e),cn(n,"onChange");break;case"textarea":Re(e,r),c=Oe(e,r),Yt("invalid",e),cn(n,"onChange");break;default:c=r}on(a,c);var u=c;for(s in u)if(u.hasOwnProperty(s)){var f=u[s];"style"===s?rn(e,f):"dangerouslySetInnerHTML"===s?null!=(f=f?f.__html:void 0)&&Be(e,f):"children"===s?"string"==typeof f?("textarea"!==a||""!==f)&&Ue(e,f):"number"==typeof f&&Ue(e,""+f):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(k.hasOwnProperty(s)?null!=f&&cn(n,s):null!=f&&Z(e,s,f,l))}switch(a){case"input":xe(e),Te(e,r,!1);break;case"textarea":xe(e),Le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+ye(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?Ce(e,!!r.multiple,n,!1):null!=r.defaultValue&&Ce(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof c.onClick&&(e.onclick=un)}An(a,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Xo(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(o(166));n=Ia(Pa.current),Ia(La.current),Lo(t)?(n=t.stateNode,r=t.memoizedProps,n[On]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[On]=t,t.stateNode=n)}return null;case 13:return pi(Ua),r=t.memoizedState,64&t.effectTag?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&Lo(t):(r=null!==(a=e.memoizedState),n||null===a||null!==(a=e.child.sibling)&&(null!==(s=t.firstEffect)?(t.firstEffect=a,a.nextEffect=s):(t.firstEffect=t.lastEffect=a,a.nextEffect=null),a.effectTag=8)),n&&!r&&2&t.mode&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||1&Ua.current?qs===Ls&&(qs=Is):(qs!==Ls&&qs!==Is||(qs=Fs),0!==Ys&&null!==Bs&&(Kl(Bs,$s),Zl(Bs,Ys)))),(n||r)&&(t.effectTag|=4),null);case 4:return za(),Go(t),null;case 10:return oa(t),null;case 19:if(pi(Ua),null===(r=t.memoizedState))return null;if(a=!!(64&t.effectTag),null===(s=r.rendering)){if(a)ns(r,!1);else if(qs!==Ls||null!==e&&64&e.effectTag)for(s=t.child;null!==s;){if(null!==(e=$a(s))){for(t.effectTag|=64,ns(r,!1),null!==(a=e.updateQueue)&&(t.updateQueue=a,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)s=n,(a=r).effectTag&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(e=a.alternate)?(a.childExpirationTime=0,a.expirationTime=s,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null):(a.childExpirationTime=e.childExpirationTime,a.expirationTime=e.expirationTime,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,s=e.dependencies,a.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),r=r.sibling;return mi(Ua,1&Ua.current|2),t.child}s=s.sibling}}else{if(!a)if(null!==(e=$a(s))){if(t.effectTag|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),ns(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Vi()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,a=!0,ns(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=r.last)?n.sibling=s:t.child=s,r.last=s)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=Vi()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Vi(),n.sibling=null,t=Ua.current,mi(Ua,a?1&t|2:1&t),n):null}throw Error(o(156,t.tag))}function is(e){switch(e.tag){case 1:_i(e.type)&&wi();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(za(),pi(yi),pi(vi),64&(t=e.effectTag))throw Error(o(285));return e.effectTag=-4097&t|64,e;case 5:return Ba(e),null;case 13:return pi(Ua),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return pi(Ua),null;case 4:return za(),null;case 10:return oa(e),null;default:return null}}function as(e,t){return{value:e,source:t,stack:ve(t)}}Wo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Go=function(){},Yo=function(e,t,n,r,a){var o=e.memoizedProps;if(o!==r){var s,l,c=t.stateNode;switch(Ia(La.current),e=null,n){case"input":o=we(c,o),r=we(c,r),e=[];break;case"option":o=Se(c,o),r=Se(c,r),e=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":o=Oe(c,o),r=Oe(c,r),e=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(c.onclick=un)}for(s in on(n,r),n=null,o)if(!r.hasOwnProperty(s)&&o.hasOwnProperty(s)&&null!=o[s])if("style"===s)for(l in c=o[s])c.hasOwnProperty(l)&&(n||(n={}),n[l]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(k.hasOwnProperty(s)?e||(e=[]):(e=e||[]).push(s,null));for(s in r){var u=r[s];if(c=null!=o?o[s]:void 0,r.hasOwnProperty(s)&&u!==c&&(null!=u||null!=c))if("style"===s)if(c){for(l in c)!c.hasOwnProperty(l)||u&&u.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in u)u.hasOwnProperty(l)&&c[l]!==u[l]&&(n||(n={}),n[l]=u[l])}else n||(e||(e=[]),e.push(s,n)),n=u;else"dangerouslySetInnerHTML"===s?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(e=e||[]).push(s,u)):"children"===s?c===u||"string"!=typeof u&&"number"!=typeof u||(e=e||[]).push(s,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(k.hasOwnProperty(s)?(null!=u&&cn(a,s),e||c===u||(e=[])):(e=e||[]).push(s,u))}n&&(e=e||[]).push("style",n),a=e,(t.updateQueue=a)&&(t.effectTag|=4)}},Xo=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var os="function"==typeof WeakSet?WeakSet:Set;function ss(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=ve(n)),null!==n&&ge(n.type),t=t.value,null!==e&&1===e.tag&&ge(e.type);try{console.error(t)}catch(e){setTimeout((function(){throw e}))}}function ls(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Pl(e,t)}else t.current=null}function cs(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 3:case 5:case 6:case 4:case 17:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:ea(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return}throw Error(o(163))}function us(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function fs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ds(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void fs(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:ea(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&va(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}va(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&An(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Ft(n)))))}throw Error(o(163))}function hs(e,t,n){switch("function"==typeof jl&&jl(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;Yi(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(e){Pl(i,e)}}e=e.next}while(e!==r)}))}break;case 1:ls(t),"function"==typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Pl(e,t)}}(t,n);break;case 5:ls(t);break;case 4:bs(e,t,n)}}function ps(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&ps(t)}function ms(e){return 5===e.tag||3===e.tag||4===e.tag}function gs(e){e:{for(var t=e.return;null!==t;){if(ms(t)){var n=t;break e}t=t.return}throw Error(o(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.effectTag&&(Ue(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ms(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?vs(e,n,t):ys(e,n,t)}function vs(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=un));else if(4!==r&&null!==(e=e.child))for(vs(e,t,n),e=e.sibling;null!==e;)vs(e,t,n),e=e.sibling}function ys(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ys(e,t,n),e=e.sibling;null!==e;)ys(e,t,n),e=e.sibling}function bs(e,t,n){for(var r,i,a=t,s=!1;;){if(!s){s=a.return;e:for(;;){if(null===s)throw Error(o(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}s=s.return}s=!0}if(5===a.tag||6===a.tag){e:for(var l=e,c=a,u=n,f=c;;)if(hs(l,f,u),null!==f.child&&4!==f.tag)f.child.return=f,f=f.child;else{if(f===c)break e;for(;null===f.sibling;){if(null===f.return||f.return===c)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i?(l=r,c=a.stateNode,8===l.nodeType?l.parentNode.removeChild(c):l.removeChild(c)):r.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){r=a.stateNode.containerInfo,i=!0,a.child.return=a,a=a.child;continue}}else if(hs(e,a,n),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(s=!1)}a.sibling.return=a.return,a=a.sibling}}function xs(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void us(3,t);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Rn]=r,"input"===e&&"radio"===r.type&&null!=r.name&&ke(n,r),sn(e,i),t=sn(e,r),i=0;i<a.length;i+=2){var s=a[i],l=a[i+1];"style"===s?rn(n,l):"dangerouslySetInnerHTML"===s?Be(n,l):"children"===s?Ue(n,l):Z(n,s,l,t)}switch(e){case"input":Ee(n,r);break;case"textarea":Ne(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?Ce(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?Ce(n,!!r.multiple,r.defaultValue,!0):Ce(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Ft(t.containerInfo)));case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,Ks=Vi()),null!==n)e:for(e=n;;){if(5===e.tag)a=e.stateNode,r?"function"==typeof(a=a.style).setProperty?a.setProperty("display","none","important"):a.display="none":(a=e.stateNode,i=null!=(i=e.memoizedProps.style)&&i.hasOwnProperty("display")?i.display:null,a.style.display=nn("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(a=e.child.sibling).return=e,e=a;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void _s(t);case 19:return void _s(t)}throw Error(o(163))}function _s(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new os),t.forEach((function(t){var r=Fl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var ws="function"==typeof WeakMap?WeakMap:Map;function As(e,t,n){(n=ha(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Qs||(Qs=!0,el=r),ss(e,t)},n}function ks(e,t,n){(n=ha(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return ss(e,t),r(i)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===tl?tl=new Set([this]):tl.add(this),ss(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var Es,Ts=Math.ceil,Ms=K.ReactCurrentDispatcher,Ss=K.ReactCurrentOwner,Cs=0,Os=8,Rs=16,Ns=32,Ls=0,Ds=1,Ps=2,Is=3,Fs=4,zs=5,js=Cs,Bs=null,Us=null,$s=0,qs=Ls,Hs=null,Vs=1073741823,Ws=1073741823,Gs=null,Ys=0,Xs=!1,Ks=0,Zs=500,Js=null,Qs=!1,el=null,tl=null,nl=!1,rl=null,il=90,al=null,ol=0,sl=null,ll=0;function cl(){return(js&(Rs|Ns))!==Cs?1073741821-(Vi()/10|0):0!==ll?ll:ll=1073741821-(Vi()/10|0)}function ul(e,t,n){if(!(2&(t=t.mode)))return 1073741823;var r=Wi();if(!(4&t))return 99===r?1073741823:1073741822;if((js&Rs)!==Cs)return $s;if(null!==n)e=Qi(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=Qi(e,150,100);break;case 97:case 96:e=Qi(e,5e3,250);break;case 95:e=2;break;default:throw Error(o(326))}return null!==Bs&&e===$s&&--e,e}function fl(e,t){if(50<ol)throw ol=0,sl=null,Error(o(185));if(null!==(e=dl(e,t))){var n=Wi();1073741823===t?(js&Os)!==Cs&&(js&(Rs|Ns))===Cs?gl(e):(pl(e),js===Cs&&Zi()):pl(e),(4&js)===Cs||98!==n&&99!==n||(null===al?al=new Map([[e,t]]):(void 0===(n=al.get(e))||n>t)&&al.set(e,t))}}function dl(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Bs===i&&(Al(t),qs===Fs&&Kl(i,$s)),Zl(i,t)),i}function hl(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Xl(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function pl(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Ki(gl.bind(null,e));else{var t=hl(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=cl();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==zi&&Ci(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?Ki(gl.bind(null,e)):Xi(r,ml.bind(null,e),{timeout:10*(1073741821-t)-Vi()}),e.callbackNode=t}}}function ml(e,t){if(ll=0,t)return Jl(e,t=cl()),pl(e),null;var n=hl(e);if(0!==n){if(t=e.callbackNode,(js&(Rs|Ns))!==Cs)throw Error(o(327));if(Nl(),e===Bs&&n===$s||bl(e,n),null!==Us){var r=js;js|=Rs;for(var i=_l();;)try{El();break}catch(t){xl(e,t)}if(aa(),js=r,Ms.current=i,qs===Ds)throw t=Hs,bl(e,n),Kl(e,n),pl(e),t;if(null===Us)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=qs,Bs=null,r){case Ls:case Ds:throw Error(o(345));case Ps:Jl(e,2<n?2:n);break;case Is:if(Kl(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Sl(i)),1073741823===Vs&&10<(i=Ks+Zs-Vi())){if(Xs){var a=e.lastPingedTime;if(0===a||a>=n){e.lastPingedTime=n,bl(e,n);break}}if(0!==(a=hl(e))&&a!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=En(Cl.bind(null,e),i);break}Cl(e);break;case Fs:if(Kl(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Sl(i)),Xs&&(0===(i=e.lastPingedTime)||i>=n)){e.lastPingedTime=n,bl(e,n);break}if(0!==(i=hl(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==Ws?r=10*(1073741821-Ws)-Vi():1073741823===Vs?r=0:(r=10*(1073741821-Vs)-5e3,0>(r=(i=Vi())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ts(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=En(Cl.bind(null,e),r);break}Cl(e);break;case zs:if(1073741823!==Vs&&null!==Gs){a=Vs;var s=Gs;if(0>=(r=0|s.busyMinDurationMs)?r=0:(i=0|s.busyDelayMs,r=(a=Vi()-(10*(1073741821-a)-(0|s.timeoutMs||5e3)))<=i?0:i+r-a),10<r){Kl(e,n),e.timeoutHandle=En(Cl.bind(null,e),r);break}}Cl(e);break;default:throw Error(o(329))}if(pl(e),e.callbackNode===t)return ml.bind(null,e)}}return null}function gl(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,(js&(Rs|Ns))!==Cs)throw Error(o(327));if(Nl(),e===Bs&&t===$s||bl(e,t),null!==Us){var n=js;js|=Rs;for(var r=_l();;)try{kl();break}catch(t){xl(e,t)}if(aa(),js=n,Ms.current=r,qs===Ds)throw n=Hs,bl(e,t),Kl(e,t),pl(e),n;if(null!==Us)throw Error(o(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Bs=null,Cl(e),pl(e)}return null}function vl(e,t){var n=js;js|=1;try{return e(t)}finally{(js=n)===Cs&&Zi()}}function yl(e,t){var n=js;js&=-2,js|=Os;try{return e(t)}finally{(js=n)===Cs&&Zi()}}function bl(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Tn(n)),null!==Us)for(n=Us.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&wi();break;case 3:za(),pi(yi),pi(vi);break;case 5:Ba(r);break;case 4:za();break;case 13:case 19:pi(Ua);break;case 10:oa(r)}n=n.return}Bs=e,Us=ql(e.current,null),$s=t,qs=Ls,Hs=null,Ws=Vs=1073741823,Gs=null,Ys=0,Xs=!1}function xl(e,t){for(;;){try{if(aa(),Ha.current=wo,Ka)for(var n=Ga.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(Wa=0,Xa=Ya=Ga=null,Ka=!1,null===Us||null===Us.return)return qs=Ds,Hs=t,Us=null;e:{var i=e,a=Us.return,o=Us,s=t;if(t=$s,o.effectTag|=2048,o.firstEffect=o.lastEffect=null,null!==s&&"object"==typeof s&&"function"==typeof s.then){var l=s;if(!(2&o.mode)){var c=o.alternate;c?(o.updateQueue=c.updateQueue,o.memoizedState=c.memoizedState,o.expirationTime=c.expirationTime):(o.updateQueue=null,o.memoizedState=null)}var u=!!(1&Ua.current),f=a;do{var d;if(d=13===f.tag){var h=f.memoizedState;if(null!==h)d=null!==h.dehydrated;else{var p=f.memoizedProps;d=void 0!==p.fallback&&(!0!==p.unstable_avoidThisFallback||!u)}}if(d){var m=f.updateQueue;if(null===m){var g=new Set;g.add(l),f.updateQueue=g}else m.add(l);if(!(2&f.mode)){if(f.effectTag|=64,o.effectTag&=-2981,1===o.tag)if(null===o.alternate)o.tag=17;else{var v=ha(1073741823,null);v.tag=2,pa(o,v)}o.expirationTime=1073741823;break e}s=void 0,o=t;var y=i.pingCache;if(null===y?(y=i.pingCache=new ws,s=new Set,y.set(l,s)):void 0===(s=y.get(l))&&(s=new Set,y.set(l,s)),!s.has(o)){s.add(o);var b=Il.bind(null,i,l,o);l.then(b,b)}f.effectTag|=4096,f.expirationTime=t;break e}f=f.return}while(null!==f);s=Error((ge(o.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ve(o))}qs!==zs&&(qs=Ps),s=as(s,o),f=a;do{switch(f.tag){case 3:l=s,f.effectTag|=4096,f.expirationTime=t,ma(f,As(f,l,t));break e;case 1:l=s;var x=f.type,_=f.stateNode;if(!(64&f.effectTag||"function"!=typeof x.getDerivedStateFromError&&(null===_||"function"!=typeof _.componentDidCatch||null!==tl&&tl.has(_)))){f.effectTag|=4096,f.expirationTime=t,ma(f,ks(f,l,t));break e}}f=f.return}while(null!==f)}Us=Ml(Us)}catch(e){t=e;continue}break}}function _l(){var e=Ms.current;return Ms.current=wo,null===e?wo:e}function wl(e,t){e<Vs&&2<e&&(Vs=e),null!==t&&e<Ws&&2<e&&(Ws=e,Gs=t)}function Al(e){e>Ys&&(Ys=e)}function kl(){for(;null!==Us;)Us=Tl(Us)}function El(){for(;null!==Us&&!ji();)Us=Tl(Us)}function Tl(e){var t=Es(e.alternate,e,$s);return e.memoizedProps=e.pendingProps,null===t&&(t=Ml(e)),Ss.current=null,t}function Ml(e){Us=e;do{var t=Us.alternate;if(e=Us.return,2048&Us.effectTag){if(null!==(t=is(Us)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}else{if(t=rs(t,Us,$s),1===$s||1!==Us.childExpirationTime){for(var n=0,r=Us.child;null!==r;){var i=r.expirationTime,a=r.childExpirationTime;i>n&&(n=i),a>n&&(n=a),r=r.sibling}Us.childExpirationTime=n}if(null!==t)return t;null!==e&&!(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Us.firstEffect),null!==Us.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Us.firstEffect),e.lastEffect=Us.lastEffect),1<Us.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Us:e.firstEffect=Us,e.lastEffect=Us))}if(null!==(t=Us.sibling))return t;Us=e}while(null!==Us);return qs===Ls&&(qs=zs),null}function Sl(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function Cl(e){var t=Wi();return Yi(99,Ol.bind(null,e,t)),null}function Ol(e,t){do{Nl()}while(null!==rl);if((js&(Rs|Ns))!==Cs)throw Error(o(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=Sl(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Bs&&(Us=Bs=null,$s=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var a=js;js|=Ns,Ss.current=null,_n=Gt;var s=mn();if(gn(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{var c=(l=(l=s.ownerDocument)&&l.defaultView||window).getSelection&&l.getSelection();if(c&&0!==c.rangeCount){l=c.anchorNode;var u=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{l.nodeType,f.nodeType}catch(e){l=null;break e}var d=0,h=-1,p=-1,m=0,g=0,v=s,y=null;t:for(;;){for(var b;v!==l||0!==u&&3!==v.nodeType||(h=d+u),v!==f||0!==c&&3!==v.nodeType||(p=d+c),3===v.nodeType&&(d+=v.nodeValue.length),null!==(b=v.firstChild);)y=v,v=b;for(;;){if(v===s)break t;if(y===l&&++m===u&&(h=d),y===f&&++g===c&&(p=d),null!==(b=v.nextSibling))break;y=(v=y).parentNode}v=b}l=-1===h||-1===p?null:{start:h,end:p}}else l=null}l=l||{start:0,end:0}}else l=null;wn={activeElementDetached:null,focusedElem:s,selectionRange:l},Gt=!1,Js=i;do{try{Rl()}catch(e){if(null===Js)throw Error(o(330));Pl(Js,e),Js=Js.nextEffect}}while(null!==Js);Js=i;do{try{for(s=e,l=t;null!==Js;){var x=Js.effectTag;if(16&x&&Ue(Js.stateNode,""),128&x){var _=Js.alternate;if(null!==_){var w=_.ref;null!==w&&("function"==typeof w?w(null):w.current=null)}}switch(1038&x){case 2:gs(Js),Js.effectTag&=-3;break;case 6:gs(Js),Js.effectTag&=-3,xs(Js.alternate,Js);break;case 1024:Js.effectTag&=-1025;break;case 1028:Js.effectTag&=-1025,xs(Js.alternate,Js);break;case 4:xs(Js.alternate,Js);break;case 8:bs(s,u=Js,l),ps(u)}Js=Js.nextEffect}}catch(e){if(null===Js)throw Error(o(330));Pl(Js,e),Js=Js.nextEffect}}while(null!==Js);if(w=wn,_=mn(),x=w.focusedElem,l=w.selectionRange,_!==x&&x&&x.ownerDocument&&pn(x.ownerDocument.documentElement,x)){null!==l&&gn(x)&&(_=l.start,void 0===(w=l.end)&&(w=_),"selectionStart"in x?(x.selectionStart=_,x.selectionEnd=Math.min(w,x.value.length)):(w=(_=x.ownerDocument||document)&&_.defaultView||window).getSelection&&(w=w.getSelection(),u=x.textContent.length,s=Math.min(l.start,u),l=void 0===l.end?s:Math.min(l.end,u),!w.extend&&s>l&&(u=l,l=s,s=u),u=hn(x,s),f=hn(x,l),u&&f&&(1!==w.rangeCount||w.anchorNode!==u.node||w.anchorOffset!==u.offset||w.focusNode!==f.node||w.focusOffset!==f.offset)&&((_=_.createRange()).setStart(u.node,u.offset),w.removeAllRanges(),s>l?(w.addRange(_),w.extend(f.node,f.offset)):(_.setEnd(f.node,f.offset),w.addRange(_))))),_=[];for(w=x;w=w.parentNode;)1===w.nodeType&&_.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"==typeof x.focus&&x.focus(),x=0;x<_.length;x++)(w=_[x]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Gt=!!_n,wn=_n=null,e.current=n,Js=i;do{try{for(x=e;null!==Js;){var A=Js.effectTag;if(36&A&&ds(x,Js.alternate,Js),128&A){_=void 0;var k=Js.ref;if(null!==k){var E=Js.stateNode;Js.tag,_=E,"function"==typeof k?k(_):k.current=_}}Js=Js.nextEffect}}catch(e){if(null===Js)throw Error(o(330));Pl(Js,e),Js=Js.nextEffect}}while(null!==Js);Js=null,Bi(),js=a}else e.current=n;if(nl)nl=!1,rl=e,il=t;else for(Js=i;null!==Js;)t=Js.nextEffect,Js.nextEffect=null,Js=t;if(0===(t=e.firstPendingTime)&&(tl=null),1073741823===t?e===sl?ol++:(ol=0,sl=e):ol=0,"function"==typeof zl&&zl(n.stateNode,r),pl(e),Qs)throw Qs=!1,e=el,el=null,e;return(js&Os)!==Cs||Zi(),null}function Rl(){for(;null!==Js;){var e=Js.effectTag;256&e&&cs(Js.alternate,Js),!(512&e)||nl||(nl=!0,Xi(97,(function(){return Nl(),null}))),Js=Js.nextEffect}}function Nl(){if(90!==il){var e=97<il?97:il;return il=90,Yi(e,Ll)}}function Ll(){if(null===rl)return!1;var e=rl;if(rl=null,(js&(Rs|Ns))!==Cs)throw Error(o(331));var t=js;for(js|=Ns,e=e.current.firstEffect;null!==e;){try{var n=e;if(512&n.effectTag)switch(n.tag){case 0:case 11:case 15:case 22:us(5,n),fs(5,n)}}catch(t){if(null===e)throw Error(o(330));Pl(e,t)}n=e.nextEffect,e.nextEffect=null,e=n}return js=t,Zi(),!0}function Dl(e,t,n){pa(e,t=As(e,t=as(n,t),1073741823)),null!==(e=dl(e,1073741823))&&pl(e)}function Pl(e,t){if(3===e.tag)Dl(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Dl(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===tl||!tl.has(r))){pa(n,e=ks(n,e=as(t,e),1073741823)),null!==(n=dl(n,1073741823))&&pl(n);break}}n=n.return}}function Il(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Bs===e&&$s===n?qs===Fs||qs===Is&&1073741823===Vs&&Vi()-Ks<Zs?bl(e,$s):Xs=!0:Xl(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,pl(e)))}function Fl(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=ul(t=cl(),e,null)),null!==(e=dl(e,t))&&pl(e)}Es=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||yi.current)Io=!0;else{if(r<n){switch(Io=!1,t.tag){case 3:Vo(t),Do();break;case 5:if(ja(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:_i(t.type)&&Ei(t);break;case 4:Fa(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,i=t.type._context,mi(ta,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Zo(e,t,n):(mi(Ua,1&Ua.current),null!==(t=ts(e,t,n))?t.sibling:null);mi(Ua,1&Ua.current);break;case 19:if(r=t.childExpirationTime>=n,64&e.effectTag){if(r)return es(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),mi(Ua,Ua.current),!r)return null}return ts(e,t,n)}Io=!1}}else Io=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=xi(t,vi.current),la(t,n),i=Qa(null,t,r,e,i,n),t.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,_i(r)){var a=!0;Ei(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,fa(t);var s=r.getDerivedStateFromProps;"function"==typeof s&&xa(t,r,s,e),i.updater=_a,t.stateNode=i,i._reactInternalFiber=t,Ea(t,r,e,n),t=Ho(null,t,r,!0,a,n)}else t.tag=0,Fo(null,t,i,n),t=t.child;return t;case 16:e:{if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,a=t.tag=function(e){if("function"==typeof e)return $l(e)?1:0;if(null!=e){if((e=e.$$typeof)===le)return 11;if(e===fe)return 14}return 2}(i),e=ea(i,e),a){case 0:t=$o(null,t,i,e,n);break e;case 1:t=qo(null,t,i,e,n);break e;case 11:t=zo(null,t,i,e,n);break e;case 14:t=jo(null,t,i,ea(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,$o(e,t,r,i=t.elementType===r?i:ea(r,i),n);case 1:return r=t.type,i=t.pendingProps,qo(e,t,r,i=t.elementType===r?i:ea(r,i),n);case 3:if(Vo(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,da(e,t),ga(t,r,null,n),(r=t.memoizedState.element)===i)Do(),t=ts(e,t,n);else{if((i=t.stateNode.hydrate)&&(Mo=Mn(t.stateNode.containerInfo.firstChild),To=t,i=So=!0),i)for(n=Ra(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Fo(e,t,r,n),Do();t=t.child}return t;case 5:return ja(t),null===e&&Ro(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,kn(r,i)?s=null:null!==a&&kn(r,a)&&(t.effectTag|=16),Uo(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Fo(e,t,s,n),t=t.child),t;case 6:return null===e&&Ro(t),null;case 13:return Zo(e,t,n);case 4:return Fa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Oa(t,null,r,n):Fo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,zo(e,t,r,i=t.elementType===r?i:ea(r,i),n);case 7:return Fo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value;var l=t.type._context;if(mi(ta,l._currentValue),l._currentValue=a,null!==s)if(l=s.value,0===(a=qr(l,a)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,a):1073741823))){if(s.children===i.children&&!yi.current){t=ts(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var c=l.dependencies;if(null!==c){s=l.child;for(var u=c.firstContext;null!==u;){if(u.context===r&&u.observedBits&a){1===l.tag&&((u=ha(n,null)).tag=2,pa(l,u)),l.expirationTime<n&&(l.expirationTime=n),null!==(u=l.alternate)&&u.expirationTime<n&&(u.expirationTime=n),sa(l.return,n),c.expirationTime<n&&(c.expirationTime=n);break}u=u.next}}else s=10===l.tag&&l.type===t.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}Fo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,la(t,n),r=r(i=ca(i,a.unstable_observedBits)),t.effectTag|=1,Fo(e,t,r,n),t.child;case 14:return a=ea(i=t.type,t.pendingProps),jo(e,t,i,a=ea(i.type,a),r,n);case 15:return Bo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ea(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,_i(r)?(e=!0,Ei(t)):e=!1,la(t,n),Aa(t,r,i),Ea(t,r,i,n),Ho(null,t,r,!0,e,n);case 19:return es(e,t,n)}throw Error(o(156,t.tag))};var zl=null,jl=null;function Bl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Ul(e,t,n,r){return new Bl(e,t,n,r)}function $l(e){return!(!(e=e.prototype)||!e.isReactComponent)}function ql(e,t){var n=e.alternate;return null===n?((n=Ul(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Hl(e,t,n,r,i,a){var s=2;if(r=e,"function"==typeof e)$l(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case ne:return Vl(n.children,i,a,t);case se:s=8,i|=7;break;case re:s=8,i|=1;break;case ie:return(e=Ul(12,n,t,8|i)).elementType=ie,e.type=ie,e.expirationTime=a,e;case ce:return(e=Ul(13,n,t,i)).type=ce,e.elementType=ce,e.expirationTime=a,e;case ue:return(e=Ul(19,n,t,i)).elementType=ue,e.expirationTime=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case ae:s=10;break e;case oe:s=9;break e;case le:s=11;break e;case fe:s=14;break e;case de:s=16,r=null;break e;case he:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ul(s,n,t,i)).elementType=e,t.type=r,t.expirationTime=a,t}function Vl(e,t,n,r){return(e=Ul(7,e,r,t)).expirationTime=n,e}function Wl(e,t,n){return(e=Ul(6,e,null,t)).expirationTime=n,e}function Gl(e,t,n){return(t=Ul(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Yl(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Xl(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function Kl(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Zl(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Jl(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function Ql(e,t,n,r){var i=t.current,a=cl(),s=ya.suspense;a=ul(a,i,s);e:if(n){t:{if(et(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(o(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(_i(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(o(171))}if(1===n.tag){var c=n.type;if(_i(c)){n=ki(n,c,l);break e}}n=l}else n=gi;return null===t.context?t.context=n:t.pendingContext=n,(t=ha(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),pa(i,t),fl(i,a),a}function ec(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function tc(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function nc(e,t){tc(e,t),(e=e.alternate)&&tc(e,t)}function rc(e,t,n){var r=new Yl(e,t,n=null!=n&&!0===n.hydrate),i=Ul(3,null,null,2===t?7:1===t?3:0);r.current=i,i.stateNode=r,fa(i),e[Nn]=r.current,n&&0!==t&&function(e,t){var n=Qe(t);Mt.forEach((function(e){mt(e,t,n)})),St.forEach((function(e){mt(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function ic(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ac(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"==typeof i){var s=i;i=function(){var e=ec(o);s.call(e)}}Ql(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new rc(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"==typeof i){var l=i;i=function(){var e=ec(o);l.call(e)}}yl((function(){Ql(t,o,e,i)}))}return ec(o)}function oc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ic(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}rc.prototype.render=function(e){Ql(e,this._internalRoot,null,null)},rc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Ql(null,e,null,(function(){t[Nn]=null}))},gt=function(e){if(13===e.tag){var t=Qi(cl(),150,100);fl(e,t),nc(e,t)}},vt=function(e){13===e.tag&&(fl(e,3),nc(e,3))},yt=function(e){if(13===e.tag){var t=cl();fl(e,t=ul(t,e,null)),nc(e,t)}},S=function(e,t,n){switch(t){case"input":if(Ee(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=In(r);if(!i)throw Error(o(90));_e(r),Ee(r,i)}}}break;case"textarea":Ne(e,n);break;case"select":null!=(t=n.value)&&Ce(e,!!n.multiple,t,!1)}},D=vl,P=function(e,t,n,r,i){var a=js;js|=4;try{return Yi(98,e.bind(null,t,n,r,i))}finally{(js=a)===Cs&&Zi()}},I=function(){(js&(1|Rs|Ns))===Cs&&(function(){if(null!==al){var e=al;al=null,e.forEach((function(e,t){Jl(t,e),pl(t)})),Zi()}}(),Nl())},F=function(e,t){var n=js;js|=2;try{return e(t)}finally{(js=n)===Cs&&Zi()}};var sc={Events:[Dn,Pn,In,T,A,qn,function(e){at(e,$n)},N,L,Jt,lt,Nl,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);zl=function(e){try{t.onCommitFiberRoot(n,e,void 0,!(64&~e.current.effectTag))}catch(e){}},jl=function(e){try{t.onCommitFiberUnmount(n,e)}catch(e){}}}catch(e){}})(i({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:K.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:Ln,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sc,t.createPortal=oc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"==typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=rt(t))?null:e.stateNode},t.flushSync=function(e,t){if((js&(Rs|Ns))!==Cs)throw Error(o(187));var n=js;js|=1;try{return Yi(99,e.bind(null,t))}finally{js=n,Zi()}},t.hydrate=function(e,t,n){if(!ic(t))throw Error(o(200));return ac(null,e,t,!0,n)},t.render=function(e,t,n){if(!ic(t))throw Error(o(200));return ac(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ic(e))throw Error(o(40));return!!e._reactRootContainer&&(yl((function(){ac(null,null,e,!1,(function(){e._reactRootContainer=null,e[Nn]=null}))})),!0)},t.unstable_batchedUpdates=vl,t.unstable_createPortal=function(e,t){return oc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ic(n))throw Error(o(200));if(null==e||void 0===e._reactInternalFiber)throw Error(o(38));return ac(e,t,n,!1,r)},t.version="16.14.0"},53713:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(46599)},52831:(e,t)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function _(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case f:case a:case s:case o:case h:return e;default:switch(e=e&&e.$$typeof){case c:case d:case g:case m:case l:return e;default:return t}}case i:return t}}}function w(e){return _(e)===f}t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===f||e===s||e===o||e===h||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===d||e.$$typeof===y||e.$$typeof===b||e.$$typeof===x||e.$$typeof===v)}},11259:(e,t,n)=>{"use strict";e.exports=n(52831)},94093:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=u(n(78306)),a=n(57004),o=u(a),s=u(n(31844)),l=u(n(42935)),c=n(10344);function u(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d={orientation:{horizontal:{dimension:"width",direction:"left",reverseDirection:"right",coordinate:"x"},vertical:{dimension:"height",direction:"top",reverseDirection:"bottom",coordinate:"y"}}},h=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.handleFormat=function(e){var t=r.props.format;return t?t(e):e},r.handleUpdate=function(){if(r.slider){var e=r.props.orientation,t=(0,c.capitalize)(d.orientation[e].dimension),n=r.slider["offset"+t],i=r.handle["offset"+t];r.setState({limit:n-i,grab:i/2})}},r.handleStart=function(e){var t=r.props.onChangeStart;document.addEventListener("mousemove",r.handleDrag),document.addEventListener("mouseup",r.handleEnd),r.setState({active:!0},(function(){t&&t(e)}))},r.handleDrag=function(e){e.stopPropagation();var t=r.props.onChange,n=e.target,i=n.className,a=n.classList,o=n.dataset;if(t&&"rangeslider__labels"!==i){var s=r.position(e);a&&a.contains("rangeslider__label-item")&&o.value&&(s=parseFloat(o.value)),t&&t(s,e)}},r.handleEnd=function(e){var t=r.props.onChangeComplete;r.setState({active:!1},(function(){t&&t(e)})),document.removeEventListener("mousemove",r.handleDrag),document.removeEventListener("mouseup",r.handleEnd)},r.handleKeyDown=function(e){e.preventDefault();var t=e.keyCode,n=r.props,i=n.value,a=n.min,o=n.max,s=n.step,l=n.onChange,c=void 0;switch(t){case 38:case 39:c=i+s>o?o:i+s,l&&l(c,e);break;case 37:case 40:c=i-s<a?a:i-s,l&&l(c,e)}},r.getPositionFromValue=function(e){var t=r.state.limit,n=r.props,i=n.min,a=(e-i)/(n.max-i);return Math.round(a*t)},r.getValueFromPosition=function(e){var t=r.state.limit,n=r.props,i=n.orientation,a=n.min,o=n.max,s=n.step,l=(0,c.clamp)(e,0,t)/(t||1),u=s*Math.round(l*(o-a)/s),f="horizontal"===i?u+a:o-u;return(0,c.clamp)(f,a,o)},r.position=function(e){var t=r.state.grab,n=r.props,i=n.orientation,a=n.reverse,o=r.slider,s=d.orientation[i].coordinate,l=a?d.orientation[i].reverseDirection:d.orientation[i].direction,u="client"+(0,c.capitalize)(s),f=e.touches?e.touches[0][u]:e[u],h=o.getBoundingClientRect()[l],p=a?h-f-t:f-h-t;return r.getValueFromPosition(p)},r.coordinates=function(e){var t=r.state,n=t.limit,i=t.grab,a=r.props.orientation,o=r.getValueFromPosition(e),s=r.getPositionFromValue(o),l="horizontal"===a?s+i:s;return{fill:"horizontal"===a?l:n-l,handle:l,label:l}},r.renderLabels=function(e){return o.default.createElement("ul",{ref:function(e){r.labels=e},className:(0,i.default)("rangeslider__labels")},e)},r.state={active:!1,limit:0,grab:0},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){this.handleUpdate(),new l.default(this.handleUpdate).observe(this.slider)}},{key:"render",value:function(){var e=this,t=this.props,n=t.value,r=t.orientation,a=t.className,s=t.tooltip,l=t.reverse,c=t.labels,u=t.min,h=t.max,p=t.handleLabel,m=this.state.active,g=d.orientation[r].dimension,v=l?d.orientation[r].reverseDirection:d.orientation[r].direction,y=this.getPositionFromValue(n),b=this.coordinates(y),x=f({},g,b.fill+"px"),_=f({},v,b.handle+"px"),w=s&&m,A=[],k=Object.keys(c);if(k.length>0){k=k.sort((function(e,t){return l?e-t:t-e}));var E=!0,T=!1,M=void 0;try{for(var S,C=k[Symbol.iterator]();!(E=(S=C.next()).done);E=!0){var O=S.value,R=this.getPositionFromValue(O),N=f({},v,this.coordinates(R).label+"px");A.push(o.default.createElement("li",{key:O,className:(0,i.default)("rangeslider__label-item"),"data-value":O,onMouseDown:this.handleDrag,onTouchStart:this.handleStart,onTouchEnd:this.handleEnd,style:N},this.props.labels[O]))}}catch(e){T=!0,M=e}finally{try{!E&&C.return&&C.return()}finally{if(T)throw M}}}return o.default.createElement("div",{ref:function(t){e.slider=t},className:(0,i.default)("rangeslider","rangeslider-"+r,{"rangeslider-reverse":l},a),onMouseDown:this.handleDrag,onMouseUp:this.handleEnd,onTouchStart:this.handleStart,onTouchEnd:this.handleEnd,"aria-valuemin":u,"aria-valuemax":h,"aria-valuenow":n,"aria-orientation":r},o.default.createElement("div",{className:"rangeslider__fill",style:x}),o.default.createElement("div",{ref:function(t){e.handle=t},className:"rangeslider__handle",onMouseDown:this.handleStart,onTouchMove:this.handleDrag,onTouchEnd:this.handleEnd,onKeyDown:this.handleKeyDown,style:_,tabIndex:0},w?o.default.createElement("div",{ref:function(t){e.tooltip=t},className:"rangeslider__handle-tooltip"},o.default.createElement("span",null,this.handleFormat(n))):null,o.default.createElement("div",{className:"rangeslider__handle-label"},p)),c?this.renderLabels(A):null)}}]),t}(a.Component);h.propTypes={min:s.default.number,max:s.default.number,step:s.default.number,value:s.default.number,orientation:s.default.string,tooltip:s.default.bool,reverse:s.default.bool,labels:s.default.object,handleLabel:s.default.string,format:s.default.func,onChangeStart:s.default.func,onChange:s.default.func,onChangeComplete:s.default.func},h.defaultProps={min:0,max:100,step:1,value:0,orientation:"horizontal",tooltip:!0,reverse:!1,labels:{},handleLabel:""},t.default=h},85757:(e,t,n)=>{"use strict";var r,i=n(94093),a=(r=i)&&r.__esModule?r:{default:r};t.A=a.default},10344:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.capitalize=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},t.clamp=function(e,t,n){return Math.min(Math.max(e,t),n)}},89414:e=>{e.exports=function(e,t){return function(n){return(t(n)?e.isRequired:e).apply(this,arguments)}}},60816:(e,t,n)=>{"use strict";var r=n(57004),i=n(53713),a=n(47655),o=n(31891),s=n(57966),l=n(34657);function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=c(r),f=c(i),d=c(a),h=c(s),p=c(l);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(){return _=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_.apply(this,arguments)}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}function k(e,t){return k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},k(e,t)}function E(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var i=A(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}(this,n)}}var S={};var C=["explicitRef","className","style","size","disablePlaceholder","onSize"],O={monitorWidth:!0,monitorHeight:!1,refreshRate:16,refreshMode:"throttle",noPlaceholder:!1,resizeDetectorStrategy:"scroll"};function R(e){return e.displayName||e.name||"Component"}var N=function(e){w(n,e);var t=M(n);function n(){return v(this,n),t.apply(this,arguments)}return b(n,[{key:"render",value:function(){return r.Children.only(this.props.children)}}]),n}(r.Component);function L(e){var t=e.className,n=e.style,r={};return t||n?(t&&(r.className=t),n&&(r.style=n)):r.style={width:"100%",height:"100%"},u.default.createElement("div",r)}x(N,"displayName","SizeMeReferenceWrapper"),L.displayName="SizeMePlaceholder";function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=e.monitorWidth,n=void 0===t?O.monitorWidth:t,r=e.monitorHeight,i=void 0===r?O.monitorHeight:r,a=e.refreshRate,s=void 0===a?O.refreshRate:a,l=e.refreshMode,c=void 0===l?O.refreshMode:l,p=e.noPlaceholder,m=void 0===p?O.noPlaceholder:p,y=e.resizeDetectorStrategy,A=void 0===y?O.resizeDetectorStrategy:y;d.default(n||i,'You have to monitor at least one of the width or height when using "sizeMe"'),d.default(s>=16,"It is highly recommended that you don't put your refreshRate lower than 16 as this may cause layout thrashing."),d.default("throttle"===c||"debounce"===c,'The refreshMode should have a value of "throttle" or "debounce"');var k="throttle"===c?o.throttle:o.debounce;return function(e){var t=function(e){function t(t){var n=t.explicitRef,r=t.className,i=t.style,a=t.size,o=t.disablePlaceholder;t.onSize;var s=E(t,C),l=(null==a||null==a.width&&null==a.height)&&!o,c={className:r,style:i};null!=a&&(c.size=a);var f=l?u.default.createElement(L,{className:r,style:i}):u.default.createElement(e,_({},c,s));return u.default.createElement(N,{ref:n},f)}return t.displayName="SizeMeRenderer(".concat(R(e),")"),t}(e),r=function(e){w(a,e);var r=M(a);function a(){var e;v(this,a);for(var t=arguments.length,o=new Array(t),l=0;l<t;l++)o[l]=arguments[l];return x(T(e=r.call.apply(r,[this].concat(o))),"domEl",null),x(T(e),"state",{width:void 0,height:void 0}),x(T(e),"uninstall",(function(){if(e.domEl){try{e.detector.uninstall(e.domEl)}catch(e){console.warn("react-sizeme: an error occurred whilst stopping to listen to node size changes")}e.domEl=null}})),x(T(e),"determineStrategy",(function(t){t.onSize?(e.callbackState||(e.callbackState=g({},e.state)),e.strategy="callback"):e.strategy="render"})),x(T(e),"strategisedSetState",(function(t){"callback"===e.strategy&&(e.callbackState=t,e.props.onSize(t)),e.setState(t)})),x(T(e),"strategisedGetState",(function(){return"callback"===e.strategy?e.callbackState:e.state})),x(T(e),"refCallback",(function(t){e.element=t})),x(T(e),"hasSizeChanged",(function(e,t){var r=e,a=t;return n&&r.width!==a.width||i&&r.height!==a.height})),x(T(e),"checkIfSizeChanged",k(s,(function(t){var r=t.getBoundingClientRect(),a=r.width,o=r.height,s={width:n?a:null,height:i?o:null};e.hasSizeChanged(e.strategisedGetState(),s)&&e.strategisedSetState(s)}))),e}return b(a,[{key:"componentDidMount",value:function(){this.detector=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"scroll";return S[e]||(S[e]=h.default({strategy:e})),S[e]}(A),this.determineStrategy(this.props),this.handleDOMNode()}},{key:"componentDidUpdate",value:function(){this.determineStrategy(this.props),this.handleDOMNode()}},{key:"componentWillUnmount",value:function(){this.hasSizeChanged=function(){},this.checkIfSizeChanged=function(){},this.uninstall()}},{key:"handleDOMNode",value:function(){var e=this.element&&f.default.findDOMNode(this.element);e?this.domEl?(this.domEl.isSameNode&&!this.domEl.isSameNode(e)||this.domEl!==e)&&(this.uninstall(),this.domEl=e,this.detector.listenTo(this.domEl,this.checkIfSizeChanged)):(this.domEl=e,this.detector.listenTo(this.domEl,this.checkIfSizeChanged)):this.uninstall()}},{key:"render",value:function(){var e=D.enableSSRBehaviour||D.noPlaceholders||m||"callback"===this.strategy,n=g({},this.state);return u.default.createElement(t,_({explicitRef:this.refCallback,size:"callback"===this.strategy?null:n,disablePlaceholder:e},this.props))}}]),a}(u.default.Component);return x(r,"displayName","SizeMe(".concat(R(e),")")),r.WrappedComponent=e,r}}D.enableSSRBehaviour=!1,D.noPlaceholders=!1;var P=["children","render"],I=["children","render"],F=["children","render"],z=function(e){w(n,e);var t=M(n);function n(e){var r;v(this,n),x(T(r=t.call(this,e)),"createComponent",(function(e){r.SizeAware=D(e)((function(e){return e.children}))})),x(T(r),"onSize",(function(e){return r.setState({size:e})})),e.children,e.render;var i=E(e,P);return r.createComponent(i),r.state={size:{width:void 0,height:void 0}},r}return b(n,[{key:"componentDidUpdate",value:function(e){var t=this.props;t.children,t.render;var n=E(t,I);e.children,e.render;var r=E(e,F);p.default(n,r)||this.createComponent(n)}},{key:"render",value:function(){var e=this.SizeAware,t=this.props.children||this.props.render;return u.default.createElement(e,{onSize:this.onSize},t({size:this.state.size}))}}]),n}(r.Component);x(z,"defaultProps",{children:void 0,render:void 0}),D.SizeMe=z,D.withSize=D,e.exports=D},4682:(e,t)=>{"use strict";function n(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}Object.defineProperty(t,"__esModule",{value:!0}),t.memoize=t.findPrevColumnNotHidden=t.findNextColumnNotHidden=t.checkErrors=t.enableStickyPosition=t.sortColumns=t.isNotFixed=t.isRightFixed=t.isLeftFixed=t.getColumnId=void 0;t.getColumnId=function(e){return e.id?e.id:"string"==typeof e.accessor?e.accessor:null};var r=function(e){return[!0,"left"].includes(e.fixed)};t.isLeftFixed=r;var i=function(e){return"right"===e.fixed};t.isRightFixed=i;var a=function(e){return!e.fixed};t.isNotFixed=a;t.sortColumns=function(e){return n(e.filter(r)).concat(n(e.filter(a)),n(e.filter(i)))};t.enableStickyPosition=function(){if("undefined"==typeof window)return!0;var e=document.createElement("a").style;return e.cssText="position:sticky;position:-webkit-sticky;position:-ms-sticky;",-1!==e.position.indexOf("sticky")};t.checkErrors=function(e){var t=!!e.find((function(e){return e.columns})),n=e.filter((function(e){return e.fixed&&!e.columns})).map((function(e){var t=e.Header;return"'".concat(t,"'")}));if(t&&n.length)throw new Error("WARNING react-table-hoc-fixed-column:\n          \nYour ReactTable has group and fixed columns outside groups, and that will break UI.\n          \nYou must place ".concat(n.join(" and ")," columns into a group (even a group with an empty Header label)\n"));var r=e.find((function(e){return!e.fixed&&e.columns&&e.columns.find((function(e){return e.fixed}))}));if(r){var i=r.columns.find((function(e){return e.fixed}));throw new Error("WARNING react-table-hoc-fixed-column:\n          \nYour ReactTable contain columns group with at least one child columns fixed.\n          \nWhen ReactTable has columns groups, only columns groups can be fixed\n          \nYou must set fixed: 'left' | 'right' for the '".concat(r.Header,"' column, or remove the fixed property of '").concat(i.Header,"' column."))}};t.findNextColumnNotHidden=function(e,t){for(var n=t+1;n<e.length;n+=1){var r=e[n];if(!1!==r.show)return r}};t.findPrevColumnNotHidden=function(e,t){for(var n=t-1;n>=0;n-=1){var r=e[n];if(!1!==r.show)return r}};t.memoize=function(e){var t,n;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return function(e,t){if(!e||!t)return!1;if(e.length!==t.length)return!1;for(var n=e.length,r=0;r<n;r+=1)if(e[r]!==t[r])return!1;return!0}(t,i)||(n=e.apply(void 0,i)),t=i,n}}},96155:(e,t,n)=>{"use strict";t.Ay=void 0;var r=n(4682),i=o(n(81744)),a=o(n(52391));function o(e){return e&&e.__esModule?e:{default:e}}var s=(0,r.enableStickyPosition)()?i.default:a.default;t.Ay=s},52391:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(57004)),i=l(n(31844)),a=l(n(85237)),o=l(n(78306)),s=n(4682);function l(e){return e&&e.__esModule?e:{default:e}}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){d(e,t,n[t])}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}t.default=function(e){var t=function(t){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=p(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))).onScrollX=function(e){e.currentTarget===e.target&&t.calculatePos(e.nativeEvent.target)},t.onChangeProperty=function(e){return function(){var n=t.props[e];n&&n.apply(void 0,arguments),t.calculatePos()}},t.getColumnsWithFixedFeature=function(e,n,r,i,a){return e.map((function(l,c){var u=n,d=l.fixed||r||!1,h=(0,s.findNextColumnNotHidden)(e,c),p=d&&void 0===r&&h&&!h.fixed,m=d&&(!r||[!0,"left"].includes(r)&&i)&&(r&&!h||!r&&h&&!h.fixed),g=(0,s.findPrevColumnNotHidden)(e,c),v=d&&void 0===r&&g&&!g.fixed,y=d&&(!r||"right"===r&&a)&&(r&&!g||!r&&g&&!g.fixed),b=f({},l,{fixed:d,className:(0,o.default)(u.className,l.className,d&&"rthfc-td-fixed",(0,s.isLeftFixed)({fixed:d})&&"rthfc-td-fixed-left",(0,s.isRightFixed)({fixed:d})&&"rthfc-td-fixed-right",m&&"rthfc-td-fixed-left-last",y&&"rthfc-td-fixed-right-first"),headerClassName:(0,o.default)(u.headerClassName,l.headerClassName,d&&"rthfc-th-fixed",(0,s.isLeftFixed)({fixed:d})&&"rthfc-th-fixed-left",(0,s.isRightFixed)({fixed:d})&&"rthfc-th-fixed-right",(p||i&&m)&&"rthfc-th-fixed-left-last",(v||a&&y)&&"rthfc-th-fixed-right-first")});return l.columns&&(b.columns=t.getColumnsWithFixedFeature(l.columns,n,d,p,v)),b}))},t.getColumns=(0,s.memoize)((function(e,n){var r=(0,s.sortColumns)(e);return t.getColumnsWithFixedFeature(r,n)})),t.getTableProps=function(){var e=t.props.getTableProps;return f({},e&&e.apply(void 0,arguments),{onScroll:t.onScrollX})},(0,s.checkErrors)(t.props.columns),t.uniqClassName=t.props.uniqClassName||(0,a.default)("rthfc-"),t.onChangePropertyList={onResizedChange:t.onChangeProperty("onResizedChange"),onFilteredChange:t.onChangeProperty("onFilteredChange"),onPageChange:t.onChangeProperty("onPageChange"),onPageSizeChange:t.onChangeProperty("onPageSizeChange"),onExpandedChange:t.onChangeProperty("onExpandedChange")},t}var i,l,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),i=n,l=[{key:"componentDidMount",value:function(){this.tableRef=document.querySelector(".".concat(this.uniqClassName," .rt-table")),this.calculatePos(),this.leftFixedCells=this.tableRef.querySelectorAll(".".concat(this.uniqClassName," .rthfc-fixed-left")),this.rightFixedCells=this.tableRef.querySelectorAll(".".concat(this.uniqClassName," .rthfc-fixed-left"))}},{key:"componentDidUpdate",value:function(){this.updatePos()}},{key:"calculatePos",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tableRef,t=e.scrollLeft,n=e.scrollWidth,r=e.offsetWidth;this.nextTranslateLeftX=t,this.nextTranslateRightX=n-t-r,this.updatePos(e)}},{key:"updatePos",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tableRef;Array.from(t.querySelectorAll(".rthfc-th-fixed-left, .rthfc-td-fixed-left")).forEach((function(t){t.style.transform="translate3d(".concat(e.nextTranslateLeftX,"px, 0, 0)")})),Array.from(t.querySelectorAll(".rthfc-th-fixed-right, .rthfc-td-fixed-right")).forEach((function(t){t.style.transform="translate3d(".concat(-e.nextTranslateRightX,"px, 0, 0)")}))}},{key:"render",value:function(){var t=this.props,n=t.className,i=t.innerRef,a=t.columns,s=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(t,["className","innerRef","columns"]);return r.default.createElement(e,u({},s,{ref:i,className:(0,o.default)(n,"rthfc","-se",this.uniqClassName),columns:this.getColumns(a,this.props.column),getTableProps:this.getTableProps},this.onChangePropertyList))}}],l&&h(i.prototype,l),c&&h(i,c),n}(r.default.Component);return t.propTypes={columns:i.default.array.isRequired,getTableProps:i.default.func,innerRef:i.default.oneOfType([i.default.func,i.default.object]),className:i.default.string,uniqClassName:i.default.string,column:i.default.object},t.defaultProps={getTableProps:null,innerRef:null,className:null,uniqClassName:null,column:e.defaultProps.column},t}},81744:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(57004)),i=l(n(31844)),a=l(n(85237)),o=l(n(78306)),s=n(4682);function l(e){return e&&e.__esModule?e:{default:e}}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){d(e,t,n[t])}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}t.default=function(e){var t=function(t){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))).onResizedChange=function(){for(var e=t.props.onResizedChange,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e&&e.apply(void 0,r),r[0].forEach((function(e){var n=e.id,r=e.value;t.setState((function(e){return{columnsWidth:f({},e.columnsWidth,d({},n,r))}}))}))},t.getColumns=(0,s.memoize)((function(e,n,r){var i=(0,s.sortColumns)(e);return t.getColumnsWithFixedFeature(i,n,r)})),(0,s.checkErrors)(t.props.columns),t.uniqClassName=t.props.uniqClassName||(0,a.default)("rthfc-"),t.state={columnsWidth:{}},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),m(n,null,[{key:"getLeftOffsetColumns",value:function(e,t,n){for(var r=0,i=0;i<t;i+=1){var a=e[i];if(!1!==a.show)r+=n[(0,s.getColumnId)(a)]||a.width||a.minWidth||100}return r}},{key:"getRightOffsetColumns",value:function(e,t,n){for(var r=0,i=t+1;i<e.length;i+=1){var a=e[i];if(!1!==a.show)r+=n[(0,s.getColumnId)(a)]||a.width||a.minWidth||100}return r}}]),m(n,[{key:"componentDidMount",value:function(){this.updateRowsPosition()}},{key:"componentDidUpdate",value:function(){this.updateRowsPosition()}},{key:"updateRowsPosition",value:function(){var e=document.querySelectorAll(".".concat(this.uniqClassName," .rt-thead")),t=0;Array.from(e).forEach((function(e){e.style.top="".concat(t,"px"),t+=e.offsetHeight}))}},{key:"getColumnsWithFixedFeature",value:function(e,t,r,i,a,l){var c=this,u=t;return e.map((function(d,h){var p=d.fixed||i||!1,m=(0,s.findNextColumnNotHidden)(e,h),g=p&&void 0===i&&m&&!m.fixed,v=p&&(!i||[!0,"left"].includes(i)&&a)&&(i&&!m||!i&&m&&!m.fixed),y=(0,s.findPrevColumnNotHidden)(e,h),b=p&&void 0===i&&y&&!y.fixed,x=p&&(!i||"right"===i&&l)&&(i&&!y||!i&&y&&!y.fixed),_=(0,s.isLeftFixed)({fixed:p}),w=(0,s.isRightFixed)({fixed:p}),A=_&&n.getLeftOffsetColumns(e,h,r),k=w&&n.getRightOffsetColumns(e,h,r),E=f({},d,{fixed:p,className:(0,o.default)(u.className,d.className,p&&"rthfc-td-fixed",_&&"rthfc-td-fixed-left",w&&"rthfc-td-fixed-right",v&&"rthfc-td-fixed-left-last",x&&"rthfc-td-fixed-right-first"),style:f({},u.style,d.style,{left:A,right:k}),headerClassName:(0,o.default)(u.headerClassName,d.headerClassName,p&&"rthfc-th-fixed",_&&"rthfc-th-fixed-left",w&&"rthfc-th-fixed-right",(g||a&&v)&&"rthfc-th-fixed-left-last",(b||l&&x)&&"rthfc-th-fixed-right-first"),headerStyle:f({},u.headerStyle,d.headerStyle,{left:A,right:k})});return d.columns&&(E.columns=c.getColumnsWithFixedFeature(d.columns,t,r,p,g,b)),E}))}},{key:"render",value:function(){var t=this.props,n=t.className,i=t.innerRef,a=t.columns,s=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(t,["className","innerRef","columns"]);return r.default.createElement(e,u({},s,{ref:i,className:(0,o.default)(n,this.uniqClassName,"rthfc","-sp"),columns:this.getColumns(a,this.props.column,this.state.columnsWidth),onResizedChange:this.onResizedChange}))}}]),n}(r.default.Component);return t.propTypes={columns:i.default.array.isRequired,innerRef:i.default.oneOfType([i.default.func,i.default.object]),className:i.default.string,onResizedChange:i.default.func,uniqClassName:i.default.string,column:i.default.object},t.defaultProps={innerRef:null,className:null,onResizedChange:null,uniqClassName:null,column:e.defaultProps.column},t}},88172:(e,t,n)=>{"use strict";var r=n(57004),i=60103;if(t.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},44903:(e,t,n)=>{"use strict";var r=n(34204),i="function"==typeof Symbol&&Symbol.for,a=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,l=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,u=i?Symbol.for("react.provider"):60109,f=i?Symbol.for("react.context"):60110,d=i?Symbol.for("react.forward_ref"):60112,h=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,g="function"==typeof Symbol&&Symbol.iterator;function v(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function x(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||y}function _(){}function w(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||y}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(v(85));this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=x.prototype;var A=w.prototype=new _;A.constructor=w,r(A,x.prototype),A.isPureReactComponent=!0;var k={current:null},E=Object.prototype.hasOwnProperty,T={key:!0,ref:!0,__self:!0,__source:!0};function M(e,t,n){var r,i={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,r)&&!T.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:a,type:e,key:o,ref:s,props:i,_owner:k.current}}function S(e){return"object"==typeof e&&null!==e&&e.$$typeof===a}var C=/\/+/g,O=[];function R(e,t,n,r){if(O.length){var i=O.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function N(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>O.length&&O.push(e)}function L(e,t,n,r){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var s=!1;if(null===e)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case a:case o:s=!0}}if(s)return n(r,e,""===t?"."+P(e,0):t),1;if(s=0,t=""===t?".":t+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=t+P(i=e[l],l);s+=L(i,c,n,r)}else if(null===e||"object"!=typeof e?c=null:c="function"==typeof(c=g&&e[g]||e["@@iterator"])?c:null,"function"==typeof c)for(e=c.call(e),l=0;!(i=e.next()).done;)s+=L(i=i.value,c=t+P(i,l++),n,r);else if("object"===i)throw n=""+e,Error(v(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return s}function D(e,t,n){return null==e?0:L(e,"",t,n)}function P(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function I(e,t){e.func.call(e.context,t,e.count++)}function F(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?z(e,r,n,(function(e){return e})):null!=e&&(S(e)&&(e=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(C,"$&/")+"/")+n)),r.push(e))}function z(e,t,n,r,i){var a="";null!=n&&(a=(""+n).replace(C,"$&/")+"/"),D(e,F,t=R(t,a,r,i)),N(t)}var j={current:null};function B(){var e=j.current;if(null===e)throw Error(v(321));return e}var U={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:k,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return z(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;D(e,I,t=R(null,null,t,n)),N(t)},count:function(e){return D(e,(function(){return null}),null)},toArray:function(e){var t=[];return z(e,t,null,(function(e){return e})),t},only:function(e){if(!S(e))throw Error(v(143));return e}},t.Component=x,t.Fragment=s,t.Profiler=c,t.PureComponent=w,t.StrictMode=l,t.Suspense=h,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,t.cloneElement=function(e,t,n){if(null==e)throw Error(v(267,e));var i=r({},e.props),o=e.key,s=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,l=k.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)E.call(t,u)&&!T.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){c=Array(u);for(var f=0;f<u;f++)c[f]=arguments[f+2];i.children=c}return{$$typeof:a,type:e.type,key:o,ref:s,props:i,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:f,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=M,t.createFactory=function(e){var t=M.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:d,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return B().useCallback(e,t)},t.useContext=function(e,t){return B().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return B().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return B().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return B().useLayoutEffect(e,t)},t.useMemo=function(e,t){return B().useMemo(e,t)},t.useReducer=function(e,t,n){return B().useReducer(e,t,n)},t.useRef=function(e){return B().useRef(e)},t.useState=function(e){return B().useState(e)},t.version="16.14.0"},57004:(e,t,n)=>{"use strict";e.exports=n(44903)},50608:(e,t,n)=>{"use strict";e.exports=n(88172)},28187:function(e,t){var n,r,i;"undefined"!=typeof self&&self,r=[],void 0===(i="function"==typeof(n=function(){function e(){}e.prototype.saveState=function(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}},e.prototype.restoreState=function(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx},e.prototype.pattern=function(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");var t=this.disjunction();this.consumeChar("/");for(var n={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};this.isRegExpFlag();)switch(this.popChar()){case"g":s(n,"global");break;case"i":s(n,"ignoreCase");break;case"m":s(n,"multiLine");break;case"u":s(n,"unicode");break;case"y":s(n,"sticky")}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:n,value:t,loc:this.loc(0)}},e.prototype.disjunction=function(){var e=[],t=this.idx;for(e.push(this.alternative());"|"===this.peekChar();)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(t)}},e.prototype.alternative=function(){for(var e=[],t=this.idx;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(t)}},e.prototype.term=function(){return this.isAssertion()?this.assertion():this.atom()},e.prototype.assertion=function(){var e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":var t;switch(this.consumeChar("?"),this.popChar()){case"=":t="Lookahead";break;case"!":t="NegativeLookahead"}l(t);var n=this.disjunction();return this.consumeChar(")"),{type:t,value:n,loc:this.loc(e)}}c()},e.prototype.quantifier=function(e){var t,n=this.idx;switch(this.popChar()){case"*":t={atLeast:0,atMost:1/0};break;case"+":t={atLeast:1,atMost:1/0};break;case"?":t={atLeast:0,atMost:1};break;case"{":var r=this.integerIncludingZero();switch(this.popChar()){case"}":t={atLeast:r,atMost:r};break;case",":t=this.isDigit()?{atLeast:r,atMost:this.integerIncludingZero()}:{atLeast:r,atMost:1/0},this.consumeChar("}")}if(!0===e&&void 0===t)return;l(t)}if(!0!==e||void 0!==t)return l(t),"?"===this.peekChar(0)?(this.consumeChar("?"),t.greedy=!1):t.greedy=!0,t.type="Quantifier",t.loc=this.loc(n),t},e.prototype.atom=function(){var e,t=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group()}return void 0===e&&this.isPatternCharacter()&&(e=this.patternCharacter()),l(e),e.loc=this.loc(t),this.isQuantifier()&&(e.quantifier=this.quantifier()),e},e.prototype.dotAll=function(){return this.consumeChar("."),{type:"Set",complement:!0,value:[a("\n"),a("\r"),a("\u2028"),a("\u2029")]}},e.prototype.atomEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},e.prototype.decimalEscapeAtom=function(){return{type:"GroupBackReference",value:this.positiveInteger()}},e.prototype.characterClassEscape=function(){var e,t=!1;switch(this.popChar()){case"d":e=u;break;case"D":e=u,t=!0;break;case"s":e=d;break;case"S":e=d,t=!0;break;case"w":e=f;break;case"W":e=f,t=!0}return l(e),{type:"Set",value:e,complement:t}},e.prototype.controlEscapeAtom=function(){var e;switch(this.popChar()){case"f":e=a("\f");break;case"n":e=a("\n");break;case"r":e=a("\r");break;case"t":e=a("\t");break;case"v":e=a("\v")}return l(e),{type:"Character",value:e}},e.prototype.controlLetterEscapeAtom=function(){this.consumeChar("c");var e=this.popChar();if(!1===/[a-zA-Z]/.test(e))throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}},e.prototype.nulCharacterAtom=function(){return this.consumeChar("0"),{type:"Character",value:a("\0")}},e.prototype.hexEscapeSequenceAtom=function(){return this.consumeChar("x"),this.parseHexDigits(2)},e.prototype.regExpUnicodeEscapeSequenceAtom=function(){return this.consumeChar("u"),this.parseHexDigits(4)},e.prototype.identityEscapeAtom=function(){return{type:"Character",value:a(this.popChar())}},e.prototype.classPatternCharacterAtom=function(){switch(this.peekChar()){case"\n":case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:return{type:"Character",value:a(this.popChar())}}},e.prototype.characterClass=function(){var e=[],t=!1;for(this.consumeChar("["),"^"===this.peekChar(0)&&(this.consumeChar("^"),t=!0);this.isClassAtom();){var n=this.classAtom();if("Character"===n.type&&this.isRangeDash()){this.consumeChar("-");var r=this.classAtom();if("Character"===r.type){if(r.value<n.value)throw Error("Range out of order in character class");e.push({from:n.value,to:r.value})}else o(n.value,e),e.push(a("-")),o(r.value,e)}else o(n.value,e)}return this.consumeChar("]"),{type:"Set",complement:t,value:e}},e.prototype.classAtom=function(){switch(this.peekChar()){case"]":case"\n":case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}},e.prototype.classEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:a("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},e.prototype.group=function(){var e=!0;this.consumeChar("("),"?"===this.peekChar(0)?(this.consumeChar("?"),this.consumeChar(":"),e=!1):this.groupIdx++;var t=this.disjunction();this.consumeChar(")");var n={type:"Group",capturing:e,value:t};return e&&(n.idx=this.groupIdx),n},e.prototype.positiveInteger=function(){var e=this.popChar();if(!1===i.test(e))throw Error("Expecting a positive integer");for(;r.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)},e.prototype.integerIncludingZero=function(){var e=this.popChar();if(!1===r.test(e))throw Error("Expecting an integer");for(;r.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)},e.prototype.patternCharacter=function(){var e=this.popChar();switch(e){case"\n":case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:a(e)}}},e.prototype.isRegExpFlag=function(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}},e.prototype.isRangeDash=function(){return"-"===this.peekChar()&&this.isClassAtom(1)},e.prototype.isDigit=function(){return r.test(this.peekChar(0))},e.prototype.isClassAtom=function(e){switch(void 0===e&&(e=0),this.peekChar(e)){case"]":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},e.prototype.isTerm=function(){return this.isAtom()||this.isAssertion()},e.prototype.isAtom=function(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}},e.prototype.isAssertion=function(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return"?"===this.peekChar(1)&&("="===this.peekChar(2)||"!"===this.peekChar(2));default:return!1}},e.prototype.isQuantifier=function(){var e=this.saveState();try{return void 0!==this.quantifier(!0)}catch(e){return!1}finally{this.restoreState(e)}},e.prototype.isPatternCharacter=function(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},e.prototype.parseHexDigits=function(e){for(var t="",r=0;r<e;r++){var i=this.popChar();if(!1===n.test(i))throw Error("Expecting a HexDecimal digits");t+=i}return{type:"Character",value:parseInt(t,16)}},e.prototype.peekChar=function(e){return void 0===e&&(e=0),this.input[this.idx+e]},e.prototype.popChar=function(){var e=this.peekChar(0);return this.consumeChar(),e},e.prototype.consumeChar=function(e){if(void 0!==e&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++},e.prototype.loc=function(e){return{begin:e,end:this.idx}};var t,n=/[0-9a-fA-F]/,r=/[0-9]/,i=/[1-9]/;function a(e){return e.charCodeAt(0)}function o(e,t){void 0!==e.length?e.forEach((function(e){t.push(e)})):t.push(e)}function s(e,t){if(!0===e[t])throw"duplicate flag "+t;e[t]=!0}function l(e){if(void 0===e)throw Error("Internal Error - Should never get here!")}function c(){throw Error("Internal Error - Should never get here!")}var u=[];for(t=a("0");t<=a("9");t++)u.push(t);var f=[a("_")].concat(u);for(t=a("a");t<=a("z");t++)f.push(t);for(t=a("A");t<=a("Z");t++)f.push(t);var d=[a(" "),a("\f"),a("\n"),a("\r"),a("\t"),a("\v"),a("\t"),a(""),a(""),a(""),a(""),a(""),a(""),a(""),a(""),a(""),a(""),a(""),a(""),a(""),a("\u2028"),a("\u2029"),a(""),a(""),a(""),a("\ufeff")];function h(){}return h.prototype.visitChildren=function(e){for(var t in e){var n=e[t];e.hasOwnProperty(t)&&(void 0!==n.type?this.visit(n):Array.isArray(n)&&n.forEach((function(e){this.visit(e)}),this))}},h.prototype.visit=function(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e)}this.visitChildren(e)},h.prototype.visitPattern=function(e){},h.prototype.visitFlags=function(e){},h.prototype.visitDisjunction=function(e){},h.prototype.visitAlternative=function(e){},h.prototype.visitStartAnchor=function(e){},h.prototype.visitEndAnchor=function(e){},h.prototype.visitWordBoundary=function(e){},h.prototype.visitNonWordBoundary=function(e){},h.prototype.visitLookahead=function(e){},h.prototype.visitNegativeLookahead=function(e){},h.prototype.visitCharacter=function(e){},h.prototype.visitSet=function(e){},h.prototype.visitGroup=function(e){},h.prototype.visitGroupBackReference=function(e){},h.prototype.visitQuantifier=function(e){},{RegExpParser:e,BaseRegExpVisitor:h,VERSION:"0.5.0"}})?n.apply(t,r):n)||(e.exports=i)},26382:(e,t,n)=>{"use strict";var r=n(18116),i=n(76302),a=n(1648),o=n(19795),s=n(34204),l=n(37221),c=n(68750),u=c.float32,f=c.fract32;e.exports=function(e,t){"function"==typeof e?(t||(t={}),t.regl=e):t=e;t.length&&(t.positions=t);if(!(e=t.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var n,c,h,p,m,g,v=e._gl,y={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},b=[];return p=e.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),c=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),h=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),m=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),g=e.buffer({usage:"static",type:"float",data:d}),A(t),n=e({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor = color / 255.;\n\n\t\t\tvec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position = position + dxy;\n\n\t\t\tvec2 pos = (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos += pixelOffset / viewport.zw;\n\n\t\t\tgl_Position = vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = fragColor;\n\t\t\tgl_FragColor.a *= opacity;\n\t\t}\n\t\t",uniforms:{range:e.prop("range"),lineWidth:e.prop("lineWidth"),capSize:e.prop("capSize"),opacity:e.prop("opacity"),scale:e.prop("scale"),translate:e.prop("translate"),scaleFract:e.prop("scaleFract"),translateFract:e.prop("translateFract"),viewport:function(e,t){return[t.viewport.x,t.viewport.y,e.viewportWidth,e.viewportHeight]}},attributes:{color:{buffer:p,offset:function(e,t){return 4*t.offset},divisor:1},position:{buffer:c,offset:function(e,t){return 8*t.offset},divisor:1},positionFract:{buffer:h,offset:function(e,t){return 8*t.offset},divisor:1},error:{buffer:m,offset:function(e,t){return 16*t.offset},divisor:1},direction:{buffer:g,stride:24,offset:0},lineOffset:{buffer:g,stride:24,offset:8},capOffset:{buffer:g,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:e.prop("viewport")},viewport:e.prop("viewport"),stencil:!1,instances:e.prop("count"),count:d.length}),s(x,{update:A,draw:_,destroy:k,regl:e,gl:v,canvas:v.canvas,groups:b}),x;function x(e){e?A(e):null===e&&k(),_()}function _(t){if("number"==typeof t)return w(t);t&&!Array.isArray(t)&&(t=[t]),e._refresh(),b.forEach((function(e,n){e&&(t&&(t[n]?e.draw=!0:e.draw=!1),e.draw?w(n):e.draw=!0)}))}function w(e){"number"==typeof e&&(e=b[e]),null!=e&&e&&e.count&&e.color&&e.opacity&&e.positions&&e.positions.length>1&&(e.scaleRatio=[e.scale[0]*e.viewport.width,e.scale[1]*e.viewport.height],n(e),e.after&&e.after(e))}function A(e){if(e){null!=e.length?"number"==typeof e[0]&&(e=[{positions:e}]):Array.isArray(e)||(e=[e]);var t=0,n=0;if(x.groups=b=e.map((function(e,c){var u=b[c];return e?("function"==typeof e?e={after:e}:"number"==typeof e[0]&&(e={positions:e}),e=o(e,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),u||(b[c]=u={id:c,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},e=s({},y,e)),a(u,e,[{lineWidth:function(e){return.5*+e},capSize:function(e){return.5*+e},opacity:parseFloat,errors:function(e){return e=l(e),n+=e.length,e},positions:function(e,n){return e=l(e,"float64"),n.count=Math.floor(e.length/2),n.bounds=r(e,2),n.offset=t,t+=n.count,e}},{color:function(e,t){var n=t.count;if(e||(e="transparent"),!Array.isArray(e)||"number"==typeof e[0]){var r=e;e=Array(n);for(var a=0;a<n;a++)e[a]=r}if(e.length<n)throw Error("Not enough colors");for(var o=new Uint8Array(4*n),s=0;s<n;s++){var l=i(e[s],"uint8");o.set(l,4*s)}return o},range:function(e,t,n){var r=t.bounds;return e||(e=r),t.scale=[1/(e[2]-e[0]),1/(e[3]-e[1])],t.translate=[-e[0],-e[1]],t.scaleFract=f(t.scale),t.translateFract=f(t.translate),e},viewport:function(e){var t;return Array.isArray(e)?t={x:e[0],y:e[1],width:e[2]-e[0],height:e[3]-e[1]}:e?(t={x:e.x||e.left||0,y:e.y||e.top||0},e.right?t.width=e.right-t.x:t.width=e.w||e.width||0,e.bottom?t.height=e.bottom-t.y:t.height=e.h||e.height||0):t={x:0,y:0,width:v.drawingBufferWidth,height:v.drawingBufferHeight},t}}]),u):u})),t||n){var d=b.reduce((function(e,t,n){return e+(t?t.count:0)}),0),g=new Float64Array(2*d),_=new Uint8Array(4*d),w=new Float32Array(4*d);b.forEach((function(e,t){if(e){var n=e.positions,r=e.count,i=e.offset,a=e.color,o=e.errors;r&&(_.set(a,4*i),w.set(o,4*i),g.set(n,2*i))}}));var A=u(g);c(A);var k=f(g,A);h(k),p(_),m(w)}}}function k(){c.destroy(),h.destroy(),p.destroy(),m.destroy(),g.destroy()}};var d=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},55386:(e,t,n)=>{"use strict";var r=n(76302),i=n(18116),a=n(34204),o=n(19795),s=n(37221),l=n(31610),c=n(52704),u=n(68750),f=u.float32,d=u.fract32,h=n(28355),p=n(84125),m=n(31627);function g(e,t){if(!(this instanceof g))return new g(e,t);if("function"==typeof e?(t||(t={}),t.regl=e):t=e,t.length&&(t.positions=t),!(e=t.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=e._gl,this.regl=e,this.passes=[],this.shaders=g.shaders.has(e)?g.shaders.get(e):g.shaders.set(e,g.createShaders(e)).get(e),this.update(t)}e.exports=g,g.dashMult=2,g.maxPatternLength=256,g.precisionThreshold=3e6,g.maxPoints=1e4,g.maxLines=2048,g.shaders=new h,g.createShaders=function(e){var t,n=e.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),r={primitive:"triangle strip",instances:e.prop("count"),count:4,offset:0,uniforms:{miterMode:function(e,t){return"round"===t.join?2:1},miterLimit:e.prop("miterLimit"),scale:e.prop("scale"),scaleFract:e.prop("scaleFract"),translateFract:e.prop("translateFract"),translate:e.prop("translate"),thickness:e.prop("thickness"),dashTexture:e.prop("dashTexture"),opacity:e.prop("opacity"),pixelRatio:e.context("pixelRatio"),id:e.prop("id"),dashLength:e.prop("dashLength"),viewport:function(e,t){return[t.viewport.x,t.viewport.y,e.viewportWidth,e.viewportHeight]},depth:e.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(e,t){return!t.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:e.prop("viewport")},viewport:e.prop("viewport")},i=e(a({vert:"\nprecision highp float;\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineOffset = lineTop * 2. - 1.;\n\n\tvec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent = normalize(diff * scale * viewport.zw);\n\tvec2 normal = vec2(-tangent.y, tangent.x);\n\n\tvec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n",frag:"\nprecision highp float;\n\nuniform float dashLength, pixelRatio, thickness, opacity, id;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha = 1.;\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n",attributes:{lineEnd:{buffer:n,divisor:0,stride:8,offset:0},lineTop:{buffer:n,divisor:0,stride:8,offset:4},aCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:e.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:e.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:e.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},r));try{t=e(a({cull:{enable:!0,face:"back"},vert:"\nprecision highp float;\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIFF = 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio = adjustedScale * viewport.zw;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineBot = 1. - lineTop;\n\n\tfragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n\tif (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\n\tvec2 prevDiff = aCoord - prevCoord;\n\tvec2 currDiff = bCoord - aCoord;\n\tvec2 nextDiff = nextCoord - bCoord;\n\n\tvec2 prevTangent = normalize(prevDiff * scaleRatio);\n\tvec2 currTangent = normalize(currDiff * scaleRatio);\n\tvec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal = vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection = normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff = abs(prevTangent - currTangent);\n\tvec2 nextTanDiff = abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {\n\t\tstartJoinDirection = currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {\n\t\tendJoinDirection = currNormal;\n\t}\n\tif (aCoord == bCoord) {\n\t\tendJoinDirection = startJoinDirection;\n\t\tcurrNormal = prevNormal;\n\t\tcurrTangent = prevTangent;\n\t}\n\n\ttangent = currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift = dot(currNormal, startJoinDirection);\n\tfloat endJoinShift = dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio = abs(1. / startJoinShift);\n\tfloat endMiterRatio = abs(1. / endJoinShift);\n\n\tvec2 startJoin = startJoinDirection * startMiterRatio;\n\tvec2 endJoin = endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin = sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin = -startTopJoin;\n\n\tendTopJoin = sign(endJoinShift) * endJoin * .5;\n\tendBotJoin = -endTopJoin;\n\n\tvec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\tbool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -= normalWidth * endTopJoin;\n\t\tbTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -= normalWidth * startBotJoin;\n\t\taBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition = (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition = (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition = (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition = (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter = step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n",frag:"\nprecision highp float;\n\nuniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha = 1., distToStart, distToEnd;\n\tfloat cutoff = thickness * .5;\n\n\t//bevel miter\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n",attributes:{lineEnd:{buffer:n,divisor:0,stride:8,offset:0},lineTop:{buffer:n,divisor:0,stride:8,offset:4},aColor:{buffer:e.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:e.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},r))}catch(e){t=i}return{fill:e({primitive:"triangle",elements:function(e,t){return t.triangles},offset:0,vert:"\nprecision highp float;\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n\tfloat depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n\tfragColor.a *= opacity;\n}\n",frag:"\nprecision highp float;\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor = fragColor;\n}\n",uniforms:{scale:e.prop("scale"),color:e.prop("fill"),scaleFract:e.prop("scaleFract"),translateFract:e.prop("translateFract"),translate:e.prop("translate"),opacity:e.prop("opacity"),pixelRatio:e.context("pixelRatio"),id:e.prop("id"),viewport:function(e,t){return[t.viewport.x,t.viewport.y,e.viewportWidth,e.viewportHeight]}},attributes:{position:{buffer:e.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:e.prop("positionFractBuffer"),stride:8,offset:8}},blend:r.blend,depth:{enable:!1},scissor:r.scissor,stencil:r.stencil,viewport:r.viewport}),rect:i,miter:t}},g.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},g.prototype.render=function(){for(var e,t=[],n=arguments.length;n--;)t[n]=arguments[n];t.length&&(e=this).update.apply(e,t),this.draw()},g.prototype.draw=function(){for(var e=this,t=[],n=arguments.length;n--;)t[n]=arguments[n];return(t.length?t:this.passes).forEach((function(t,n){var r;if(t&&Array.isArray(t))return(r=e).draw.apply(r,t);"number"==typeof t&&(t=e.passes[t]),t&&t.count>1&&t.opacity&&(e.regl._refresh(),t.fill&&t.triangles&&t.triangles.length>2&&e.shaders.fill(t),t.thickness&&(t.scale[0]*t.viewport.width>g.precisionThreshold||t.scale[1]*t.viewport.height>g.precisionThreshold||"rect"===t.join||!t.join&&(t.thickness<=2||t.count>=g.maxPoints)?e.shaders.rect(t):e.shaders.miter(t)))})),this},g.prototype.update=function(e){var t=this;if(e){null!=e.length?"number"==typeof e[0]&&(e=[{positions:e}]):Array.isArray(e)||(e=[e]);var n=this.regl,u=this.gl;if(e.forEach((function(e,h){var v=t.passes[h];if(void 0!==e)if(null!==e){if("number"==typeof e[0]&&(e={positions:e}),e=o(e,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),v||(t.passes[h]=v={id:h,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:n.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:n.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:n.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:n.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},e=a({},g.defaults,e)),null!=e.thickness&&(v.thickness=parseFloat(e.thickness)),null!=e.opacity&&(v.opacity=parseFloat(e.opacity)),null!=e.miterLimit&&(v.miterLimit=parseFloat(e.miterLimit)),null!=e.overlay&&(v.overlay=!!e.overlay,h<g.maxLines&&(v.depth=2*(g.maxLines-1-h%g.maxLines)/g.maxLines-1)),null!=e.join&&(v.join=e.join),null!=e.hole&&(v.hole=e.hole),null!=e.fill&&(v.fill=e.fill?r(e.fill,"uint8"):null),null!=e.viewport&&(v.viewport=p(e.viewport)),v.viewport||(v.viewport=p([u.drawingBufferWidth,u.drawingBufferHeight])),null!=e.close&&(v.close=e.close),null===e.positions&&(e.positions=[]),e.positions){var y,b;if(e.positions.x&&e.positions.y){var x=e.positions.x,_=e.positions.y;b=v.count=Math.max(x.length,_.length),y=new Float64Array(2*b);for(var w=0;w<b;w++)y[2*w]=x[w],y[2*w+1]=_[w]}else y=s(e.positions,"float64"),b=v.count=Math.floor(y.length/2);var A=v.bounds=i(y,2);if(v.fill){for(var k=[],E={},T=0,M=0,S=0,C=v.count;M<C;M++){var O=y[2*M],R=y[2*M+1];isNaN(O)||isNaN(R)||null==O||null==R?(O=y[2*T],R=y[2*T+1],E[M]=T):T=M,k[S++]=O,k[S++]=R}if(e.splitNull){v.count-1 in E||(E[v.count]=v.count-1);var N=Object.keys(E).map(Number).sort((function(e,t){return e-t})),L=[],D=0,P=null!=v.hole?v.hole[0]:null;if(null!=P){var I=m(N,(function(e){return e>=P}));(N=N.slice(0,I)).push(P)}for(var F=function(e){var t=k.slice(2*D,2*N[e]).concat(P?k.slice(2*P):[]),n=(v.hole||[]).map((function(t){return t-P+(N[e]-D)})),r=l(t,n);r=r.map((function(t){return t+D+(t+D<N[e]?0:P-N[e])})),L.push.apply(L,r),D=N[e]+1},z=0;z<N.length;z++)F(z);for(var j=0,B=L.length;j<B;j++)null!=E[L[j]]&&(L[j]=E[L[j]]);v.triangles=L}else{for(var U=l(k,v.hole||[]),$=0,q=U.length;$<q;$++)null!=E[U[$]]&&(U[$]=E[U[$]]);v.triangles=U}}var H=new Float64Array(y);c(H,2,A);var V=new Float64Array(2*b+6);v.close?y[0]===y[2*b-2]&&y[1]===y[2*b-1]?(V[0]=H[2*b-4],V[1]=H[2*b-3]):(V[0]=H[2*b-2],V[1]=H[2*b-1]):(V[0]=H[0],V[1]=H[1]),V.set(H,2),v.close?y[0]===y[2*b-2]&&y[1]===y[2*b-1]?(V[2*b+2]=H[2],V[2*b+3]=H[3],v.count-=1):(V[2*b+2]=H[0],V[2*b+3]=H[1],V[2*b+4]=H[2],V[2*b+5]=H[3]):(V[2*b+2]=H[2*b-2],V[2*b+3]=H[2*b-1],V[2*b+4]=H[2*b-2],V[2*b+5]=H[2*b-1]);var W=f(V);v.positionBuffer(W);var G=d(V,W);v.positionFractBuffer(G)}if(e.range?v.range=e.range:v.range||(v.range=v.bounds),(e.range||e.positions)&&v.count){var Y=v.bounds,X=Y[2]-Y[0],K=Y[3]-Y[1],Z=v.range[2]-v.range[0],J=v.range[3]-v.range[1];v.scale=[X/Z,K/J],v.translate=[-v.range[0]/Z+Y[0]/Z||0,-v.range[1]/J+Y[1]/J||0],v.scaleFract=d(v.scale),v.translateFract=d(v.translate)}if(e.dashes){var Q,ee=0;if(!e.dashes||e.dashes.length<2)ee=1,Q=new Uint8Array([255,255,255,255,255,255,255,255]);else{ee=0;for(var te=0;te<e.dashes.length;++te)ee+=e.dashes[te];Q=new Uint8Array(ee*g.dashMult);for(var ne=0,re=255,ie=0;ie<2;ie++)for(var ae=0;ae<e.dashes.length;++ae){for(var oe=0,se=e.dashes[ae]*g.dashMult*.5;oe<se;++oe)Q[ne++]=re;re^=255}}v.dashLength=ee,v.dashTexture({channels:1,data:Q,width:Q.length,height:1,mag:"linear",min:"linear"},0,0)}if(e.color){var le=v.count,ce=e.color;ce||(ce="transparent");var ue=new Uint8Array(4*le+4);if(Array.isArray(ce)&&"number"!=typeof ce[0]){for(var fe=0;fe<le;fe++){var de=r(ce[fe],"uint8");ue.set(de,4*fe)}ue.set(r(ce[0],"uint8"),4*le)}else for(var he=r(ce,"uint8"),pe=0;pe<le+1;pe++)ue.set(he,4*pe);v.colorBuffer({usage:"dynamic",type:"uint8",data:ue})}}else t.passes[h]=null})),e.length<this.passes.length){for(var h=e.length;h<this.passes.length;h++){var v=this.passes[h];v&&(v.colorBuffer.destroy(),v.positionBuffer.destroy(),v.dashTexture.destroy())}this.passes.length=e.length}for(var y=[],b=0;b<this.passes.length;b++)null!==this.passes[b]&&y.push(this.passes[b]);return this.passes=y,this}},g.prototype.destroy=function(){return this.passes.forEach((function(e){e.colorBuffer.destroy(),e.positionBuffer.destroy(),e.dashTexture.destroy()})),this.passes.length=0,this}},6720:(e,t,n)=>{"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s=n(76302),l=n(18116),c=n(26734),u=n(96377),f=n(34204),d=n(54257),h=n(19795),p=n(1648),m=n(37221),g=n(25540),v=n(68750),y=n(84125),b=x;function x(e,t){var n=this;if(!(this instanceof x))return new x(e,t);"function"==typeof e?(t||(t={}),t.regl=e):(t=e,e=null),t&&t.length&&(t.positions=t);var r,i=(e=t.regl)._gl,a=[],o=255;this.tooManyColors=g,r=e.texture({data:new Uint8Array(1020),width:o,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),f(this,{regl:e,gl:i,groups:[],markerCache:[null],markerTextures:[null],palette:a,paletteIds:{},paletteTexture:r,maxColors:o,maxSize:100,canvas:i.canvas}),this.update(t);var s={uniforms:{constPointSize:!!t.constPointSize,opacity:e.prop("opacity"),paletteSize:function(e,t){return[n.tooManyColors?0:o,r.height]},pixelRatio:e.context("pixelRatio"),scale:e.prop("scale"),scaleFract:e.prop("scaleFract"),translate:e.prop("translate"),translateFract:e.prop("translateFract"),markerTexture:e.prop("markerTexture"),paletteTexture:r},attributes:{x:function(e,t){return t.xAttr||{buffer:t.positionBuffer,stride:8,offset:0}},y:function(e,t){return t.yAttr||{buffer:t.positionBuffer,stride:8,offset:4}},xFract:function(e,t){return t.xAttr?{constant:[0,0]}:{buffer:t.positionFractBuffer,stride:8,offset:0}},yFract:function(e,t){return t.yAttr?{constant:[0,0]}:{buffer:t.positionFractBuffer,stride:8,offset:4}},size:function(e,t){return t.size.length?{buffer:t.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*t.size/n.maxSize)]}},borderSize:function(e,t){return t.borderSize.length?{buffer:t.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*t.borderSize/n.maxSize)]}},colorId:function(e,t){return t.color.length?{buffer:t.colorBuffer,stride:n.tooManyColors?8:4,offset:0}:{constant:n.tooManyColors?a.slice(4*t.color,4*t.color+4):[t.color]}},borderColorId:function(e,t){return t.borderColor.length?{buffer:t.colorBuffer,stride:n.tooManyColors?8:4,offset:n.tooManyColors?4:2}:{constant:n.tooManyColors?a.slice(4*t.borderColor,4*t.borderColor+4):[t.borderColor]}},isActive:function(e,t){return!0===t.activation?{constant:[1]}:t.activation?t.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:e.prop("viewport")},viewport:e.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:e.prop("elements"),count:e.prop("count"),offset:e.prop("offset"),primitive:"points"},l=f({},s);l.frag=d(["precision highp float;\n#define GLSLIFY 1\n\nuniform float opacity;\nuniform sampler2D markerTexture;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]),l.vert=d(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\n// `invariant` effectively turns off optimizations for the position.\n// We need this because -fast-math on M1 Macs is re-ordering\n// floating point operations in a way that causes floating point\n// precision limits to put points in the wrong locations.\ninvariant gl_Position;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pointSizeScale;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}\n"]),this.drawMarker=e(l);var c=f({},s);c.frag=d(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nuniform float opacity;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius > 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]),c.vert=d(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\n// `invariant` effectively turns off optimizations for the position.\n// We need this because -fast-math on M1 Macs is re-ordering\n// floating point operations in a way that causes floating point\n// precision limits to put points in the wrong locations.\ninvariant gl_Position;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 paletteSize, scale, scaleFract, translate, translateFract;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pointSizeScale;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),g&&(c.frag=c.frag.replace("smoothstep","smoothStep"),l.frag=l.frag.replace("smoothstep","smoothStep")),this.drawCircle=e(c)}x.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},x.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},x.prototype.draw=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=this.groups;if(1===n.length&&Array.isArray(n[0])&&(null===n[0][0]||Array.isArray(n[0][0]))&&(n=n[0]),this.regl._refresh(),n.length)for(var a=0;a<n.length;a++)this.drawItem(a,n[a]);else i.forEach((function(t,n){e.drawItem(n)}));return this},x.prototype.drawItem=function(e,t){var n=this.groups,r=n[e];if("number"==typeof t&&(e=t,r=n[t],t=null),r&&r.count&&r.opacity){r.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,r,t));for(var a=[],o=1;o<r.activation.length;o++)r.activation[o]&&(!0===r.activation[o]||r.activation[o].data.length)&&a.push.apply(a,i(this.getMarkerDrawOptions(o,r,t)));a.length&&this.drawMarker(a)}},x.prototype.getMarkerDrawOptions=function(e,t,n){var i=t.range,a=t.tree,o=t.viewport,s=t.activation,l=t.selectionBuffer,c=t.count;this.regl;if(!a)return n?[f({},t,{markerTexture:this.markerTextures[e],activation:s[e],count:n.length,elements:n,offset:0})]:[f({},t,{markerTexture:this.markerTextures[e],activation:s[e],offset:0})];var u=[],d=a.range(i,{lod:!0,px:[(i[2]-i[0])/o.width,(i[3]-i[1])/o.height]});if(n){for(var h=s[e].data,p=new Uint8Array(c),m=0;m<n.length;m++){var g=n[m];p[g]=h?h[g]:1}l.subdata(p)}for(var v=d.length;v--;){var y=r(d[v],2),b=y[0],x=y[1];u.push(f({},t,{markerTexture:this.markerTextures[e],activation:n?l:s[e],offset:b,count:x-b}))}return u},x.prototype.update=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(n.length){1===n.length&&Array.isArray(n[0])&&(n=n[0]);var i=this.groups,a=this.gl,o=this.regl,s=this.maxSize,c=this.maxColors,d=this.palette;this.groups=i=n.map((function(t,n){var r=i[n];if(void 0===t)return r;null===t?t={positions:null}:"function"==typeof t?t={ondraw:t}:"number"==typeof t[0]&&(t={positions:t}),null===(t=h(t,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions&&(t.positions=[]),null!=t.tooManyColors&&(e.tooManyColors=t.tooManyColors),r||(i[n]=r={id:n,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:o.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:o.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:o.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:o.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:o.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},t=f({},x.defaults,t)),t.positions&&!("marker"in t)&&(t.marker=r.marker,delete r.marker),t.marker&&!("positions"in t)&&(t.positions=r.positions,delete r.positions);var g=0,b=0;if(p(r,t,[{snap:!0,size:function(e,t){return null==e&&(e=x.defaults.size),g+=e&&e.length?1:0,e},borderSize:function(e,t){return null==e&&(e=x.defaults.borderSize),g+=e&&e.length?1:0,e},opacity:parseFloat,color:function(t,n){return null==t&&(t=x.defaults.color),t=e.updateColor(t),b++,t},borderColor:function(t,n){return null==t&&(t=x.defaults.borderColor),t=e.updateColor(t),b++,t},bounds:function(e,t,n){return"range"in n||(n.range=null),e},positions:function(e,t,n){var r=t.snap,i=t.positionBuffer,a=t.positionFractBuffer,s=t.selectionBuffer;if(e.x||e.y)return e.x.length?t.xAttr={buffer:o.buffer(e.x),offset:0,stride:4,count:e.x.length}:t.xAttr={buffer:e.x.buffer,offset:4*e.x.offset||0,stride:4*(e.x.stride||1),count:e.x.count},e.y.length?t.yAttr={buffer:o.buffer(e.y),offset:0,stride:4,count:e.y.length}:t.yAttr={buffer:e.y.buffer,offset:4*e.y.offset||0,stride:4*(e.y.stride||1),count:e.y.count},t.count=Math.max(t.xAttr.count,t.yAttr.count),e;e=m(e,"float64");var c=t.count=Math.floor(e.length/2),f=t.bounds=c?l(e,2):null;if(n.range||t.range||(delete t.range,n.range=f),n.marker||t.marker||(delete t.marker,n.marker=null),r&&(!0===r||c>r)?t.tree=u(e,{bounds:f}):r&&r.length&&(t.tree=r),t.tree){var d={primitive:"points",usage:"static",data:t.tree,type:"uint32"};t.elements?t.elements(d):t.elements=o.elements(d)}var h=v.float32(e);return i({data:h,usage:"dynamic"}),a({data:v.fract32(e,h),usage:"dynamic"}),s({data:new Uint8Array(c),type:"uint8",usage:"stream"}),e}},{marker:function(t,n,r){var i=n.activation;if(i.forEach((function(e){return e&&e.destroy&&e.destroy()})),i.length=0,t&&"number"!=typeof t[0]){for(var a=[],s=0,l=Math.min(t.length,n.count);s<l;s++){var c=e.addMarker(t[s]);a[c]||(a[c]=new Uint8Array(n.count)),a[c][s]=1}for(var u=0;u<a.length;u++)if(a[u]){var f={data:a[u],type:"uint8",usage:"static"};i[u]?i[u](f):i[u]=o.buffer(f),i[u].data=a[u]}}else{i[e.addMarker(t)]=!0}return t},range:function(e,t,n){var r=t.bounds;if(r)return e||(e=r),t.scale=[1/(e[2]-e[0]),1/(e[3]-e[1])],t.translate=[-e[0],-e[1]],t.scaleFract=v.fract(t.scale),t.translateFract=v.fract(t.translate),e},viewport:function(e){return y(e||[a.drawingBufferWidth,a.drawingBufferHeight])}}]),g){var _=r,w=_.count,A=_.size,k=_.borderSize,E=_.sizeBuffer,T=new Uint8Array(2*w);if(A.length||k.length)for(var M=0;M<w;M++)T[2*M]=Math.round(255*(null==A[M]?A:A[M])/s),T[2*M+1]=Math.round(255*(null==k[M]?k:k[M])/s);E({data:T,usage:"dynamic"})}if(b){var S,C=r,O=C.count,R=C.color,N=C.borderColor,L=C.colorBuffer;if(e.tooManyColors){if(R.length||N.length){S=new Uint8Array(8*O);for(var D=0;D<O;D++){var P=R[D];S[8*D]=d[4*P],S[8*D+1]=d[4*P+1],S[8*D+2]=d[4*P+2],S[8*D+3]=d[4*P+3];var I=N[D];S[8*D+4]=d[4*I],S[8*D+5]=d[4*I+1],S[8*D+6]=d[4*I+2],S[8*D+7]=d[4*I+3]}}}else if(R.length||N.length){S=new Uint8Array(4*O+2);for(var F=0;F<O;F++)null!=R[F]&&(S[4*F]=R[F]%c,S[4*F+1]=Math.floor(R[F]/c)),null!=N[F]&&(S[4*F+2]=N[F]%c,S[4*F+3]=Math.floor(N[F]/c))}L({data:S||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return r}))}},x.prototype.addMarker=function(e){var t,n=this.markerTextures,r=this.regl,i=this.markerCache,a=null==e?0:i.indexOf(e);if(a>=0)return a;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)t=e;else{t=new Uint8Array(e.length);for(var o=0,s=e.length;o<s;o++)t[o]=255*e[o]}var l=Math.floor(Math.sqrt(t.length));return a=n.length,i.push(e),n.push(r.texture({channels:1,data:t,radius:l,mag:"linear",min:"linear"})),a},x.prototype.updateColor=function(e){var t=this.paletteIds,n=this.palette,r=this.maxColors;Array.isArray(e)||(e=[e]);var i=[];if("number"==typeof e[0]){var a=[];if(Array.isArray(e))for(var o=0;o<e.length;o+=4)a.push(e.slice(o,o+4));else for(var l=0;l<e.length;l+=4)a.push(e.subarray(l,l+4));e=a}for(var u=0;u<e.length;u++){var f=e[u];f=s(f,"uint8");var d=c(f,!1);if(null==t[d]){var h=n.length;t[d]=Math.floor(h/4),n[h]=f[0],n[h+1]=f[1],n[h+2]=f[2],n[h+3]=f[3]}i[u]=t[d]}return!this.tooManyColors&&n.length>4*r&&(this.tooManyColors=!0),this.updatePalette(n),1===i.length?i[0]:i},x.prototype.updatePalette=function(e){if(!this.tooManyColors){var t=this.maxColors,n=this.paletteTexture,r=Math.ceil(.25*e.length/t);if(r>1)for(var i=.25*(e=e.slice()).length%t;i<r*t;i++)e.push(0,0,0,0);n.height<r&&n.resize(t,r),n.subimage({width:Math.min(.25*e.length,t),height:r,data:e},0,0)}},x.prototype.destroy=function(){return this.groups.forEach((function(e){e.sizeBuffer.destroy(),e.positionBuffer.destroy(),e.positionFractBuffer.destroy(),e.colorBuffer.destroy(),e.activation.forEach((function(e){return e&&e.destroy&&e.destroy()})),e.selectionBuffer.destroy(),e.elements&&e.elements.destroy()})),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach((function(e){return e&&e.destroy&&e.destroy()})),this};var _=n(34204);e.exports=function(e,t){var n=new b(e,t),r=n.render.bind(n);return _(r,{render:r,update:n.update.bind(n),draw:n.draw.bind(n),destroy:n.destroy.bind(n),regl:n.regl,gl:n.gl,canvas:n.gl.canvas,groups:n.groups,markers:n.markerCache,palette:n.palette}),r}},24049:function(e){e.exports=function(){"use strict";var e=function(e,t){for(var n=Object.keys(t),r=0;r<n.length;++r)e[n[r]]=t[n[r]];return e},t=0,n=0,r=5,i=6;function a(e,n){this.id=t++,this.type=e,this.data=n}function o(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function s(e){if(0===e.length)return[];var t=e.charAt(0),n=e.charAt(e.length-1);if(e.length>1&&t===n&&('"'===t||"'"===t))return['"'+o(e.substr(1,e.length-2))+'"'];var r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(e);if(r)return s(e.substr(0,r.index)).concat(s(r[1])).concat(s(e.substr(r.index+r[0].length)));var i=e.split(".");if(1===i.length)return['"'+o(e)+'"'];for(var a=[],l=0;l<i.length;++l)a=a.concat(s(i[l]));return a}function l(e){return"["+s(e).join("][")+"]"}function c(e,t){return new a(e,l(t+""))}function u(e){return"function"==typeof e&&!e._reglType||e instanceof a}function f(e,t){return"function"==typeof e?new a(n,e):"number"==typeof e||"boolean"==typeof e?new a(r,e):Array.isArray(e)?new a(i,e.map((function(e,n){return f(e,t+"["+n+"]")}))):e instanceof a?e:void 0}var d={DynamicVariable:a,define:c,isDynamic:u,unbox:f,accessor:l},h={next:"function"==typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"==typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout},p="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function m(){var e={"":0},t=[""];return{id:function(n){var r=e[n];return r||(r=e[n]=t.length,t.push(n),r)},str:function(e){return t[e]}}}function g(t,n,r){var i,a=document.createElement("canvas");function o(){var e=window.innerWidth,n=window.innerHeight;if(t!==document.body){var i=a.getBoundingClientRect();e=i.right-i.left,n=i.bottom-i.top}a.width=r*e,a.height=r*n}function s(){i?i.disconnect():window.removeEventListener("resize",o),t.removeChild(a)}return e(a.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),t.appendChild(a),t===document.body&&(a.style.position="absolute",e(t.style,{margin:0,padding:0})),t!==document.body&&"function"==typeof ResizeObserver?(i=new ResizeObserver((function(){setTimeout(o)}))).observe(t):window.addEventListener("resize",o,!1),o(),{canvas:a,onDestroy:s}}function v(e,t){function n(n){try{return e.getContext(n,t)}catch(e){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}function y(e){return"string"==typeof e.nodeName&&"function"==typeof e.appendChild&&"function"==typeof e.getBoundingClientRect}function b(e){return"function"==typeof e.drawArrays||"function"==typeof e.drawElements}function x(e){return"string"==typeof e?e.split():e}function _(e){return"string"==typeof e?document.querySelector(e):e}function w(e){var t,n,r,i,a=e||{},o={},s=[],l=[],c="undefined"==typeof window?1:window.devicePixelRatio,u=!1,f={},d=function(e){},h=function(){};if("string"==typeof a?t=document.querySelector(a):"object"==typeof a&&(y(a)?t=a:b(a)?r=(i=a).canvas:("gl"in a?i=a.gl:"canvas"in a?r=_(a.canvas):"container"in a&&(n=_(a.container)),"attributes"in a&&(o=a.attributes),"extensions"in a&&(s=x(a.extensions)),"optionalExtensions"in a&&(l=x(a.optionalExtensions)),"onDone"in a&&(d=a.onDone),"profile"in a&&(u=!!a.profile),"pixelRatio"in a&&(c=+a.pixelRatio),"cachedCode"in a&&(f=a.cachedCode))),t&&("canvas"===t.nodeName.toLowerCase()?r=t:n=t),!i){if(!r){var p=g(n||document.body,d,c);if(!p)return null;r=p.canvas,h=p.onDestroy}void 0===o.premultipliedAlpha&&(o.premultipliedAlpha=!0),i=v(r,o)}return i?{gl:i,canvas:r,container:n,extensions:s,optionalExtensions:l,pixelRatio:c,profile:u,cachedCode:f,onDone:d,onDestroy:h}:(h(),d("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function A(e,t){var n={};function r(t){var r,i=t.toLowerCase();try{r=n[i]=e.getExtension(i)}catch(e){}return!!r}for(var i=0;i<t.extensions.length;++i){var a=t.extensions[i];if(!r(a))return t.onDestroy(),t.onDone('"'+a+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return t.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach((function(e){if(n[e]&&!r(e))throw new Error("(regl): error restoring extension "+e)}))}}}function k(e,t){for(var n=Array(e),r=0;r<e;++r)n[r]=t(r);return n}var E=5120,T=5121,M=5122,S=5123,C=5124,O=5125,R=5126;function N(e){for(var t=16;t<=1<<28;t*=16)if(e<=t)return t;return 0}function L(e){var t,n;return t=(e>65535)<<4,t|=n=((e>>>=t)>255)<<3,t|=n=((e>>>=n)>15)<<2,(t|=n=((e>>>=n)>3)<<1)|(e>>>=n)>>1}function D(){var e=k(8,(function(){return[]}));function t(t){var n=N(t),r=e[L(n)>>2];return r.length>0?r.pop():new ArrayBuffer(n)}function n(t){e[L(t.byteLength)>>2].push(t)}function r(e,n){var r=null;switch(e){case E:r=new Int8Array(t(n),0,n);break;case T:r=new Uint8Array(t(n),0,n);break;case M:r=new Int16Array(t(2*n),0,n);break;case S:r=new Uint16Array(t(2*n),0,n);break;case C:r=new Int32Array(t(4*n),0,n);break;case O:r=new Uint32Array(t(4*n),0,n);break;case R:r=new Float32Array(t(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r}function i(e){n(e.buffer)}return{alloc:t,free:n,allocType:r,freeType:i}}var P=D();P.zero=D();var I=3408,F=3410,z=3411,j=3412,B=3413,U=3414,$=3415,q=33901,H=33902,V=3379,W=3386,G=34921,Y=36347,X=36348,K=35661,Z=35660,J=34930,Q=36349,ee=34076,te=34024,ne=7936,re=7937,ie=7938,ae=35724,oe=34047,se=36063,le=34852,ce=3553,ue=34067,fe=34069,de=33984,he=6408,pe=5126,me=5121,ge=36160,ve=36053,ye=36064,be=16384,xe=function(e,t){var n=1;t.ext_texture_filter_anisotropic&&(n=e.getParameter(oe));var r=1,i=1;t.webgl_draw_buffers&&(r=e.getParameter(le),i=e.getParameter(se));var a=!!t.oes_texture_float;if(a){var o=e.createTexture();e.bindTexture(ce,o),e.texImage2D(ce,0,he,1,1,0,he,pe,null);var s=e.createFramebuffer();if(e.bindFramebuffer(ge,s),e.framebufferTexture2D(ge,ye,ce,o,0),e.bindTexture(ce,null),e.checkFramebufferStatus(ge)!==ve)a=!1;else{e.viewport(0,0,1,1),e.clearColor(1,0,0,1),e.clear(be);var l=P.allocType(pe,4);e.readPixels(0,0,1,1,he,pe,l),e.getError()?a=!1:(e.deleteFramebuffer(s),e.deleteTexture(o),a=1===l[0]),P.freeType(l)}}var c=!0;if("undefined"==typeof navigator||!(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))){var u=e.createTexture(),f=P.allocType(me,36);e.activeTexture(de),e.bindTexture(ue,u),e.texImage2D(fe,0,he,3,3,0,he,me,f),P.freeType(f),e.bindTexture(ue,null),e.deleteTexture(u),c=!e.getError()}return{colorBits:[e.getParameter(F),e.getParameter(z),e.getParameter(j),e.getParameter(B)],depthBits:e.getParameter(U),stencilBits:e.getParameter($),subpixelBits:e.getParameter(I),extensions:Object.keys(t).filter((function(e){return!!t[e]})),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:i,pointSizeDims:e.getParameter(q),lineWidthDims:e.getParameter(H),maxViewportDims:e.getParameter(W),maxCombinedTextureUnits:e.getParameter(K),maxCubeMapSize:e.getParameter(ee),maxRenderbufferSize:e.getParameter(te),maxTextureUnits:e.getParameter(J),maxTextureSize:e.getParameter(V),maxAttributes:e.getParameter(G),maxVertexUniforms:e.getParameter(Y),maxVertexTextureUnits:e.getParameter(Z),maxVaryingVectors:e.getParameter(X),maxFragmentUniforms:e.getParameter(Q),glsl:e.getParameter(ae),renderer:e.getParameter(re),vendor:e.getParameter(ne),version:e.getParameter(ie),readFloat:a,npotTextureCube:c}},_e=function(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array||e instanceof Uint8ClampedArray};function we(e){return!!e&&"object"==typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"==typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||_e(e.data))}var Ae=function(e){return Object.keys(e).map((function(t){return e[t]}))},ke={shape:Oe,flatten:Ce};function Ee(e,t,n){for(var r=0;r<t;++r)n[r]=e[r]}function Te(e,t,n,r){for(var i=0,a=0;a<t;++a)for(var o=e[a],s=0;s<n;++s)r[i++]=o[s]}function Me(e,t,n,r,i,a){for(var o=a,s=0;s<t;++s)for(var l=e[s],c=0;c<n;++c)for(var u=l[c],f=0;f<r;++f)i[o++]=u[f]}function Se(e,t,n,r,i){for(var a=1,o=n+1;o<t.length;++o)a*=t[o];var s=t[n];if(t.length-n==4){var l=t[n+1],c=t[n+2],u=t[n+3];for(o=0;o<s;++o)Me(e[o],l,c,u,r,i),i+=a}else for(o=0;o<s;++o)Se(e[o],t,n+1,r,i),i+=a}function Ce(e,t,n,r){var i=1;if(t.length)for(var a=0;a<t.length;++a)i*=t[a];else i=0;var o=r||P.allocType(n,i);switch(t.length){case 0:break;case 1:Ee(e,t[0],o);break;case 2:Te(e,t[0],t[1],o);break;case 3:Me(e,t[0],t[1],t[2],o,0);break;default:Se(e,t,0,o,0)}return o}function Oe(e){for(var t=[],n=e;n.length;n=n[0])t.push(n.length);return t}var Re={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ne={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Le={dynamic:35048,stream:35040,static:35044},De=ke.flatten,Pe=ke.shape,Ie=35044,Fe=35040,ze=5121,je=5126,Be=[];function Ue(e){return 0|Re[Object.prototype.toString.call(e)]}function $e(e,t){for(var n=0;n<t.length;++n)e[n]=t[n]}function qe(e,t,n,r,i,a,o){for(var s=0,l=0;l<n;++l)for(var c=0;c<r;++c)e[s++]=t[i*l+a*c+o]}function He(e,t,n,r){var i=0,a={};function o(t){this.id=i++,this.buffer=e.createBuffer(),this.type=t,this.usage=Ie,this.byteLength=0,this.dimension=1,this.dtype=ze,this.persistentData=null,n.profile&&(this.stats={size:0})}o.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},o.prototype.destroy=function(){d(this)};var s=[];function l(e,t){var n=s.pop();return n||(n=new o(e)),n.bind(),f(n,t,Fe,0,1,!1),n}function c(e){s.push(e)}function u(t,n,r){t.byteLength=n.byteLength,e.bufferData(t.type,n,r)}function f(e,t,n,r,i,a){var o,s;if(e.usage=n,Array.isArray(t)){if(e.dtype=r||je,t.length>0)if(Array.isArray(t[0])){o=Pe(t);for(var l=1,c=1;c<o.length;++c)l*=o[c];e.dimension=l,u(e,s=De(t,o,e.dtype),n),a?e.persistentData=s:P.freeType(s)}else if("number"==typeof t[0]){e.dimension=i;var f=P.allocType(e.dtype,t.length);$e(f,t),u(e,f,n),a?e.persistentData=f:P.freeType(f)}else _e(t[0])&&(e.dimension=t[0].length,e.dtype=r||Ue(t[0])||je,u(e,s=De(t,[t.length,t[0].length],e.dtype),n),a?e.persistentData=s:P.freeType(s))}else if(_e(t))e.dtype=r||Ue(t),e.dimension=i,u(e,t,n),a&&(e.persistentData=new Uint8Array(new Uint8Array(t.buffer)));else if(we(t)){o=t.shape;var d=t.stride,h=t.offset,p=0,m=0,g=0,v=0;1===o.length?(p=o[0],m=1,g=d[0],v=0):2===o.length&&(p=o[0],m=o[1],g=d[0],v=d[1]),e.dtype=r||Ue(t.data)||je,e.dimension=m;var y=P.allocType(e.dtype,p*m);qe(y,t.data,p,m,g,v,h),u(e,y,n),a?e.persistentData=y:P.freeType(y)}else t instanceof ArrayBuffer&&(e.dtype=ze,e.dimension=i,u(e,t,n),a&&(e.persistentData=new Uint8Array(new Uint8Array(t))))}function d(n){t.bufferCount--,r(n);var i=n.buffer;e.deleteBuffer(i),n.buffer=null,delete a[n.id]}function h(r,i,s,l){t.bufferCount++;var c=new o(i);function u(t){var r=Ie,i=null,a=0,o=0,s=1;return Array.isArray(t)||_e(t)||we(t)||t instanceof ArrayBuffer?i=t:"number"==typeof t?a=0|t:t&&("data"in t&&(i=t.data),"usage"in t&&(r=Le[t.usage]),"type"in t&&(o=Ne[t.type]),"dimension"in t&&(s=0|t.dimension),"length"in t&&(a=0|t.length)),c.bind(),i?f(c,i,r,o,s,l):(a&&e.bufferData(c.type,a,r),c.dtype=o||ze,c.usage=r,c.dimension=s,c.byteLength=a),n.profile&&(c.stats.size=c.byteLength*Be[c.dtype]),u}function h(t,n){e.bufferSubData(c.type,n,t)}function p(e,t){var n,r=0|(t||0);if(c.bind(),_e(e)||e instanceof ArrayBuffer)h(e,r);else if(Array.isArray(e)){if(e.length>0)if("number"==typeof e[0]){var i=P.allocType(c.dtype,e.length);$e(i,e),h(i,r),P.freeType(i)}else if(Array.isArray(e[0])||_e(e[0])){n=Pe(e);var a=De(e,n,c.dtype);h(a,r),P.freeType(a)}}else if(we(e)){n=e.shape;var o=e.stride,s=0,l=0,f=0,d=0;1===n.length?(s=n[0],l=1,f=o[0],d=0):2===n.length&&(s=n[0],l=n[1],f=o[0],d=o[1]);var p=Array.isArray(e.data)?c.dtype:Ue(e.data),m=P.allocType(p,s*l);qe(m,e.data,s,l,f,d,e.offset),h(m,r),P.freeType(m)}return u}return a[c.id]=c,s||u(r),u._reglType="buffer",u._buffer=c,u.subdata=p,n.profile&&(u.stats=c.stats),u.destroy=function(){d(c)},u}function p(){Ae(a).forEach((function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)}))}return n.profile&&(t.getTotalBufferSize=function(){var e=0;return Object.keys(a).forEach((function(t){e+=a[t].stats.size})),e}),{create:h,createStream:l,destroyStream:c,clear:function(){Ae(a).forEach(d),s.forEach(d)},getBuffer:function(e){return e&&e._buffer instanceof o?e._buffer:null},restore:p,_initBuffer:f}}Be[5120]=1,Be[5122]=2,Be[5124]=4,Be[5121]=1,Be[5123]=2,Be[5125]=4,Be[5126]=4;var Ve={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},We=0,Ge=1,Ye=4,Xe=5120,Ke=5121,Ze=5122,Je=5123,Qe=5124,et=5125,tt=34963,nt=35040,rt=35044;function it(e,t,n,r){var i={},a=0,o={uint8:Ke,uint16:Je};function s(e){this.id=a++,i[this.id]=this,this.buffer=e,this.primType=Ye,this.vertCount=0,this.type=0}t.oes_element_index_uint&&(o.uint32=et),s.prototype.bind=function(){this.buffer.bind()};var l=[];function c(e){var t=l.pop();return t||(t=new s(n.create(null,tt,!0,!1)._buffer)),f(t,e,nt,-1,-1,0,0),t}function u(e){l.push(e)}function f(r,i,a,o,s,l,c){var u;if(r.buffer.bind(),i){var f=c;c||_e(i)&&(!we(i)||_e(i.data))||(f=t.oes_element_index_uint?et:Je),n._initBuffer(r.buffer,i,a,f,3)}else e.bufferData(tt,l,a),r.buffer.dtype=u||Ke,r.buffer.usage=a,r.buffer.dimension=3,r.buffer.byteLength=l;if(u=c,!c){switch(r.buffer.dtype){case Ke:case Xe:u=Ke;break;case Je:case Ze:u=Je;break;case et:case Qe:u=et}r.buffer.dtype=u}r.type=u;var d=s;d<0&&(d=r.buffer.byteLength,u===Je?d>>=1:u===et&&(d>>=2)),r.vertCount=d;var h=o;if(o<0){h=Ye;var p=r.buffer.dimension;1===p&&(h=We),2===p&&(h=Ge),3===p&&(h=Ye)}r.primType=h}function d(e){r.elementsCount--,delete i[e.id],e.buffer.destroy(),e.buffer=null}function h(e,t){var i=n.create(null,tt,!0),a=new s(i._buffer);function l(e){if(e)if("number"==typeof e)i(e),a.primType=Ye,a.vertCount=0|e,a.type=Ke;else{var t=null,n=rt,r=-1,s=-1,c=0,u=0;Array.isArray(e)||_e(e)||we(e)?t=e:("data"in e&&(t=e.data),"usage"in e&&(n=Le[e.usage]),"primitive"in e&&(r=Ve[e.primitive]),"count"in e&&(s=0|e.count),"type"in e&&(u=o[e.type]),"length"in e?c=0|e.length:(c=s,u===Je||u===Ze?c*=2:u!==et&&u!==Qe||(c*=4))),f(a,t,n,r,s,c,u)}else i(),a.primType=Ye,a.vertCount=0,a.type=Ke;return l}return r.elementsCount++,l(e),l._reglType="elements",l._elements=a,l.subdata=function(e,t){return i.subdata(e,t),l},l.destroy=function(){d(a)},l}return{create:h,createStream:c,destroyStream:u,getElements:function(e){return"function"==typeof e&&e._elements instanceof s?e._elements:null},clear:function(){Ae(i).forEach(d)}}}var at=new Float32Array(1),ot=new Uint32Array(at.buffer),st=5123;function lt(e){for(var t=P.allocType(st,e.length),n=0;n<e.length;++n)if(isNaN(e[n]))t[n]=65535;else if(e[n]===1/0)t[n]=31744;else if(e[n]===-1/0)t[n]=64512;else{at[0]=e[n];var r=ot[0],i=r>>>31<<15,a=(r<<1>>>24)-127,o=r>>13&1023;if(a<-24)t[n]=i;else if(a<-14){var s=-14-a;t[n]=i+(o+1024>>s)}else t[n]=a>15?i+31744:i+(a+15<<10)+o}return t}function ct(e){return Array.isArray(e)||_e(e)}var ut=34467,ft=3553,dt=34067,ht=34069,pt=6408,mt=6406,gt=6407,vt=6409,yt=6410,bt=32854,xt=32855,_t=36194,wt=32819,At=32820,kt=33635,Et=34042,Tt=6402,Mt=34041,St=35904,Ct=35906,Ot=36193,Rt=33776,Nt=33777,Lt=33778,Dt=33779,Pt=35986,It=35987,Ft=34798,zt=35840,jt=35841,Bt=35842,Ut=35843,$t=36196,qt=5121,Ht=5123,Vt=5125,Wt=5126,Gt=10242,Yt=10243,Xt=10497,Kt=33071,Zt=33648,Jt=10240,Qt=10241,en=9728,tn=9729,nn=9984,rn=9985,an=9986,on=9987,sn=33170,ln=4352,cn=4353,un=4354,fn=34046,dn=3317,hn=37440,pn=37441,mn=37443,gn=37444,vn=33984,yn=[nn,an,rn,on],bn=[0,vt,yt,gt,pt],xn={};function _n(e){return"[object "+e+"]"}xn[vt]=xn[mt]=xn[Tt]=1,xn[Mt]=xn[yt]=2,xn[gt]=xn[St]=3,xn[pt]=xn[Ct]=4;var wn=_n("HTMLCanvasElement"),An=_n("OffscreenCanvas"),kn=_n("CanvasRenderingContext2D"),En=_n("ImageBitmap"),Tn=_n("HTMLImageElement"),Mn=_n("HTMLVideoElement"),Sn=Object.keys(Re).concat([wn,An,kn,En,Tn,Mn]),Cn=[];Cn[qt]=1,Cn[Wt]=4,Cn[Ot]=2,Cn[Ht]=2,Cn[Vt]=4;var On=[];function Rn(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])}function Nn(e){return!!Array.isArray(e)&&!(0===e.length||!ct(e[0]))}function Ln(e){return Object.prototype.toString.call(e)}function Dn(e){return Ln(e)===wn}function Pn(e){return Ln(e)===An}function In(e){return Ln(e)===kn}function Fn(e){return Ln(e)===En}function zn(e){return Ln(e)===Tn}function jn(e){return Ln(e)===Mn}function Bn(e){if(!e)return!1;var t=Ln(e);return Sn.indexOf(t)>=0||Rn(e)||Nn(e)||we(e)}function Un(e){return 0|Re[Object.prototype.toString.call(e)]}function $n(e,t){var n=t.length;switch(e.type){case qt:case Ht:case Vt:case Wt:var r=P.allocType(e.type,n);r.set(t),e.data=r;break;case Ot:e.data=lt(t)}}function qn(e,t){return P.allocType(e.type===Ot?Wt:e.type,t)}function Hn(e,t){e.type===Ot?(e.data=lt(t),P.freeType(t)):e.data=t}function Vn(e,t,n,r,i,a){for(var o=e.width,s=e.height,l=e.channels,c=qn(e,o*s*l),u=0,f=0;f<s;++f)for(var d=0;d<o;++d)for(var h=0;h<l;++h)c[u++]=t[n*d+r*f+i*h+a];Hn(e,c)}function Wn(e,t,n,r,i,a){var o;if(o=void 0!==On[e]?On[e]:xn[e]*Cn[t],a&&(o*=6),i){for(var s=0,l=n;l>=1;)s+=o*l*l,l/=2;return s}return o*n*r}function Gn(t,n,r,i,a,o,s){var l={"don't care":ln,"dont care":ln,nice:un,fast:cn},c={repeat:Xt,clamp:Kt,mirror:Zt},u={nearest:en,linear:tn},f=e({mipmap:on,"nearest mipmap nearest":nn,"linear mipmap nearest":rn,"nearest mipmap linear":an,"linear mipmap linear":on},u),d={none:0,browser:gn},h={uint8:qt,rgba4:wt,rgb565:kt,"rgb5 a1":At},p={alpha:mt,luminance:vt,"luminance alpha":yt,rgb:gt,rgba:pt,rgba4:bt,"rgb5 a1":xt,rgb565:_t},m={};n.ext_srgb&&(p.srgb=St,p.srgba=Ct),n.oes_texture_float&&(h.float32=h.float=Wt),n.oes_texture_half_float&&(h.float16=h["half float"]=Ot),n.webgl_depth_texture&&(e(p,{depth:Tt,"depth stencil":Mt}),e(h,{uint16:Ht,uint32:Vt,"depth stencil":Et})),n.webgl_compressed_texture_s3tc&&e(m,{"rgb s3tc dxt1":Rt,"rgba s3tc dxt1":Nt,"rgba s3tc dxt3":Lt,"rgba s3tc dxt5":Dt}),n.webgl_compressed_texture_atc&&e(m,{"rgb atc":Pt,"rgba atc explicit alpha":It,"rgba atc interpolated alpha":Ft}),n.webgl_compressed_texture_pvrtc&&e(m,{"rgb pvrtc 4bppv1":zt,"rgb pvrtc 2bppv1":jt,"rgba pvrtc 4bppv1":Bt,"rgba pvrtc 2bppv1":Ut}),n.webgl_compressed_texture_etc1&&(m["rgb etc1"]=$t);var g=Array.prototype.slice.call(t.getParameter(ut));Object.keys(m).forEach((function(e){var t=m[e];g.indexOf(t)>=0&&(p[e]=t)}));var v=Object.keys(p);r.textureFormats=v;var y=[];Object.keys(p).forEach((function(e){var t=p[e];y[t]=e}));var b=[];Object.keys(h).forEach((function(e){var t=h[e];b[t]=e}));var x=[];Object.keys(u).forEach((function(e){var t=u[e];x[t]=e}));var _=[];Object.keys(f).forEach((function(e){var t=f[e];_[t]=e}));var w=[];Object.keys(c).forEach((function(e){var t=c[e];w[t]=e}));var A=v.reduce((function(e,t){var r=p[t];return r===vt||r===mt||r===vt||r===yt||r===Tt||r===Mt||n.ext_srgb&&(r===St||r===Ct)?e[r]=r:r===xt||t.indexOf("rgba")>=0?e[r]=pt:e[r]=gt,e}),{});function k(){this.internalformat=pt,this.format=pt,this.type=qt,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=gn,this.width=0,this.height=0,this.channels=0}function E(e,t){e.internalformat=t.internalformat,e.format=t.format,e.type=t.type,e.compressed=t.compressed,e.premultiplyAlpha=t.premultiplyAlpha,e.flipY=t.flipY,e.unpackAlignment=t.unpackAlignment,e.colorSpace=t.colorSpace,e.width=t.width,e.height=t.height,e.channels=t.channels}function T(e,t){if("object"==typeof t&&t){if("premultiplyAlpha"in t&&(e.premultiplyAlpha=t.premultiplyAlpha),"flipY"in t&&(e.flipY=t.flipY),"alignment"in t&&(e.unpackAlignment=t.alignment),"colorSpace"in t&&(e.colorSpace=d[t.colorSpace]),"type"in t){var n=t.type;e.type=h[n]}var r=e.width,i=e.height,a=e.channels,o=!1;"shape"in t?(r=t.shape[0],i=t.shape[1],3===t.shape.length&&(a=t.shape[2],o=!0)):("radius"in t&&(r=i=t.radius),"width"in t&&(r=t.width),"height"in t&&(i=t.height),"channels"in t&&(a=t.channels,o=!0)),e.width=0|r,e.height=0|i,e.channels=0|a;var s=!1;if("format"in t){var l=t.format,c=e.internalformat=p[l];e.format=A[c],l in h&&("type"in t||(e.type=h[l])),l in m&&(e.compressed=!0),s=!0}!o&&s?e.channels=xn[e.format]:o&&!s&&e.channels!==bn[e.format]&&(e.format=e.internalformat=bn[e.channels])}}function M(e){t.pixelStorei(hn,e.flipY),t.pixelStorei(pn,e.premultiplyAlpha),t.pixelStorei(mn,e.colorSpace),t.pixelStorei(dn,e.unpackAlignment)}function S(){k.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function C(e,t){var n=null;if(Bn(t)?n=t:t&&(T(e,t),"x"in t&&(e.xOffset=0|t.x),"y"in t&&(e.yOffset=0|t.y),Bn(t.data)&&(n=t.data)),t.copy){var r=a.viewportWidth,i=a.viewportHeight;e.width=e.width||r-e.xOffset,e.height=e.height||i-e.yOffset,e.needsCopy=!0}else if(n){if(_e(n))e.channels=e.channels||4,e.data=n,"type"in t||e.type!==qt||(e.type=Un(n));else if(Rn(n))e.channels=e.channels||4,$n(e,n),e.alignment=1,e.needsFree=!0;else if(we(n)){var o=n.data;Array.isArray(o)||e.type!==qt||(e.type=Un(o));var s,l,c,u,f,d,h=n.shape,p=n.stride;3===h.length?(c=h[2],d=p[2]):(c=1,d=1),s=h[0],l=h[1],u=p[0],f=p[1],e.alignment=1,e.width=s,e.height=l,e.channels=c,e.format=e.internalformat=bn[c],e.needsFree=!0,Vn(e,o,u,f,d,n.offset)}else if(Dn(n)||Pn(n)||In(n))Dn(n)||Pn(n)?e.element=n:e.element=n.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(Fn(n))e.element=n,e.width=n.width,e.height=n.height,e.channels=4;else if(zn(n))e.element=n,e.width=n.naturalWidth,e.height=n.naturalHeight,e.channels=4;else if(jn(n))e.element=n,e.width=n.videoWidth,e.height=n.videoHeight,e.channels=4;else if(Nn(n)){var m=e.width||n[0].length,g=e.height||n.length,v=e.channels;v=ct(n[0][0])?v||n[0][0].length:v||1;for(var y=ke.shape(n),b=1,x=0;x<y.length;++x)b*=y[x];var _=qn(e,b);ke.flatten(n,y,"",_),Hn(e,_),e.alignment=1,e.width=m,e.height=g,e.channels=v,e.format=e.internalformat=bn[v],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;e.type===Wt||e.type}function O(e,n,r){var a=e.element,o=e.data,s=e.internalformat,l=e.format,c=e.type,u=e.width,f=e.height;M(e),a?t.texImage2D(n,r,l,l,c,a):e.compressed?t.compressedTexImage2D(n,r,s,u,f,0,o):e.needsCopy?(i(),t.copyTexImage2D(n,r,l,e.xOffset,e.yOffset,u,f,0)):t.texImage2D(n,r,l,u,f,0,l,c,o||null)}function R(e,n,r,a,o){var s=e.element,l=e.data,c=e.internalformat,u=e.format,f=e.type,d=e.width,h=e.height;M(e),s?t.texSubImage2D(n,o,r,a,u,f,s):e.compressed?t.compressedTexSubImage2D(n,o,r,a,c,d,h,l):e.needsCopy?(i(),t.copyTexSubImage2D(n,o,r,a,e.xOffset,e.yOffset,d,h)):t.texSubImage2D(n,o,r,a,d,h,u,f,l)}var N=[];function L(){return N.pop()||new S}function D(e){e.needsFree&&P.freeType(e.data),S.call(e),N.push(e)}function I(){k.call(this),this.genMipmaps=!1,this.mipmapHint=ln,this.mipmask=0,this.images=Array(16)}function F(e,t,n){var r=e.images[0]=L();e.mipmask=1,r.width=e.width=t,r.height=e.height=n,r.channels=e.channels=4}function z(e,t){var n=null;if(Bn(t))E(n=e.images[0]=L(),e),C(n,t),e.mipmask=1;else if(T(e,t),Array.isArray(t.mipmap))for(var r=t.mipmap,i=0;i<r.length;++i)E(n=e.images[i]=L(),e),n.width>>=i,n.height>>=i,C(n,r[i]),e.mipmask|=1<<i;else E(n=e.images[0]=L(),e),C(n,t),e.mipmask=1;E(e,e.images[0]),e.compressed&&(e.internalformat===Rt||e.internalformat===Nt||e.internalformat===Lt||e.internalformat)}function j(e,t){for(var n=e.images,r=0;r<n.length;++r){if(!n[r])return;O(n[r],t,r)}}var B=[];function U(){var e=B.pop()||new I;k.call(e),e.mipmask=0;for(var t=0;t<16;++t)e.images[t]=null;return e}function $(e){for(var t=e.images,n=0;n<t.length;++n)t[n]&&D(t[n]),t[n]=null;B.push(e)}function q(){this.minFilter=en,this.magFilter=en,this.wrapS=Kt,this.wrapT=Kt,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=ln}function H(e,t){if("min"in t){var n=t.min;e.minFilter=f[n],yn.indexOf(e.minFilter)>=0&&!("faces"in t)&&(e.genMipmaps=!0)}if("mag"in t){var r=t.mag;e.magFilter=u[r]}var i=e.wrapS,a=e.wrapT;if("wrap"in t){var o=t.wrap;"string"==typeof o?i=a=c[o]:Array.isArray(o)&&(i=c[o[0]],a=c[o[1]])}else{if("wrapS"in t){var s=t.wrapS;i=c[s]}if("wrapT"in t){var d=t.wrapT;a=c[d]}}if(e.wrapS=i,e.wrapT=a,"anisotropic"in t&&(t.anisotropic,e.anisotropic=t.anisotropic),"mipmap"in t){var h=!1;switch(typeof t.mipmap){case"string":e.mipmapHint=l[t.mipmap],e.genMipmaps=!0,h=!0;break;case"boolean":h=e.genMipmaps=t.mipmap;break;case"object":e.genMipmaps=!1,h=!0}h&&!("min"in t)&&(e.minFilter=nn)}}function V(e,r){t.texParameteri(r,Qt,e.minFilter),t.texParameteri(r,Jt,e.magFilter),t.texParameteri(r,Gt,e.wrapS),t.texParameteri(r,Yt,e.wrapT),n.ext_texture_filter_anisotropic&&t.texParameteri(r,fn,e.anisotropic),e.genMipmaps&&(t.hint(sn,e.mipmapHint),t.generateMipmap(r))}var W=0,G={},Y=r.maxTextureUnits,X=Array(Y).map((function(){return null}));function K(e){k.call(this),this.mipmask=0,this.internalformat=pt,this.id=W++,this.refCount=1,this.target=e,this.texture=t.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new q,s.profile&&(this.stats={size:0})}function Z(e){t.activeTexture(vn),t.bindTexture(e.target,e.texture)}function J(){var e=X[0];e?t.bindTexture(e.target,e.texture):t.bindTexture(ft,null)}function Q(e){var n=e.texture,r=e.unit,i=e.target;r>=0&&(t.activeTexture(vn+r),t.bindTexture(i,null),X[r]=null),t.deleteTexture(n),e.texture=null,e.params=null,e.pixels=null,e.refCount=0,delete G[e.id],o.textureCount--}function ee(e,n){var r=new K(ft);function i(e,t){var n=r.texInfo;q.call(n);var a=U();return"number"==typeof e?F(a,0|e,"number"==typeof t?0|t:0|e):e?(H(n,e),z(a,e)):F(a,1,1),n.genMipmaps&&(a.mipmask=(a.width<<1)-1),r.mipmask=a.mipmask,E(r,a),r.internalformat=a.internalformat,i.width=a.width,i.height=a.height,Z(r),j(a,ft),V(n,ft),J(),$(a),s.profile&&(r.stats.size=Wn(r.internalformat,r.type,a.width,a.height,n.genMipmaps,!1)),i.format=y[r.internalformat],i.type=b[r.type],i.mag=x[n.magFilter],i.min=_[n.minFilter],i.wrapS=w[n.wrapS],i.wrapT=w[n.wrapT],i}function a(e,t,n,a){var o=0|t,s=0|n,l=0|a,c=L();return E(c,r),c.width=0,c.height=0,C(c,e),c.width=c.width||(r.width>>l)-o,c.height=c.height||(r.height>>l)-s,Z(r),R(c,ft,o,s,l),J(),D(c),i}function l(e,n){var a=0|e,o=0|n||a;if(a===r.width&&o===r.height)return i;i.width=r.width=a,i.height=r.height=o,Z(r);for(var l=0;r.mipmask>>l;++l){var c=a>>l,u=o>>l;if(!c||!u)break;t.texImage2D(ft,l,r.format,c,u,0,r.format,r.type,null)}return J(),s.profile&&(r.stats.size=Wn(r.internalformat,r.type,a,o,!1,!1)),i}return G[r.id]=r,o.textureCount++,i(e,n),i.subimage=a,i.resize=l,i._reglType="texture2d",i._texture=r,s.profile&&(i.stats=r.stats),i.destroy=function(){r.decRef()},i}function te(e,n,r,i,a,l){var c=new K(dt);G[c.id]=c,o.cubeCount++;var u=new Array(6);function f(e,t,n,r,i,a){var o,l=c.texInfo;for(q.call(l),o=0;o<6;++o)u[o]=U();if("number"!=typeof e&&e){if("object"==typeof e)if(t)z(u[0],e),z(u[1],t),z(u[2],n),z(u[3],r),z(u[4],i),z(u[5],a);else if(H(l,e),T(c,e),"faces"in e){var d=e.faces;for(o=0;o<6;++o)E(u[o],c),z(u[o],d[o])}else for(o=0;o<6;++o)z(u[o],e)}else{var h=0|e||1;for(o=0;o<6;++o)F(u[o],h,h)}for(E(c,u[0]),l.genMipmaps?c.mipmask=(u[0].width<<1)-1:c.mipmask=u[0].mipmask,c.internalformat=u[0].internalformat,f.width=u[0].width,f.height=u[0].height,Z(c),o=0;o<6;++o)j(u[o],ht+o);for(V(l,dt),J(),s.profile&&(c.stats.size=Wn(c.internalformat,c.type,f.width,f.height,l.genMipmaps,!0)),f.format=y[c.internalformat],f.type=b[c.type],f.mag=x[l.magFilter],f.min=_[l.minFilter],f.wrapS=w[l.wrapS],f.wrapT=w[l.wrapT],o=0;o<6;++o)$(u[o]);return f}function d(e,t,n,r,i){var a=0|n,o=0|r,s=0|i,l=L();return E(l,c),l.width=0,l.height=0,C(l,t),l.width=l.width||(c.width>>s)-a,l.height=l.height||(c.height>>s)-o,Z(c),R(l,ht+e,a,o,s),J(),D(l),f}function h(e){var n=0|e;if(n!==c.width){f.width=c.width=n,f.height=c.height=n,Z(c);for(var r=0;r<6;++r)for(var i=0;c.mipmask>>i;++i)t.texImage2D(ht+r,i,c.format,n>>i,n>>i,0,c.format,c.type,null);return J(),s.profile&&(c.stats.size=Wn(c.internalformat,c.type,f.width,f.height,!1,!0)),f}}return f(e,n,r,i,a,l),f.subimage=d,f.resize=h,f._reglType="textureCube",f._texture=c,s.profile&&(f.stats=c.stats),f.destroy=function(){c.decRef()},f}function ne(){for(var e=0;e<Y;++e)t.activeTexture(vn+e),t.bindTexture(ft,null),X[e]=null;Ae(G).forEach(Q),o.cubeCount=0,o.textureCount=0}function re(){for(var e=0;e<Y;++e){var n=X[e];n&&(n.bindCount=0,n.unit=-1,X[e]=null)}Ae(G).forEach((function(e){e.texture=t.createTexture(),t.bindTexture(e.target,e.texture);for(var n=0;n<32;++n)if(e.mipmask&1<<n)if(e.target===ft)t.texImage2D(ft,n,e.internalformat,e.width>>n,e.height>>n,0,e.internalformat,e.type,null);else for(var r=0;r<6;++r)t.texImage2D(ht+r,n,e.internalformat,e.width>>n,e.height>>n,0,e.internalformat,e.type,null);V(e.texInfo,e.target)}))}function ie(){for(var e=0;e<Y;++e){var n=X[e];n&&(n.bindCount=0,n.unit=-1,X[e]=null),t.activeTexture(vn+e),t.bindTexture(ft,null),t.bindTexture(dt,null)}}return e(K.prototype,{bind:function(){var e=this;e.bindCount+=1;var n=e.unit;if(n<0){for(var r=0;r<Y;++r){var i=X[r];if(i){if(i.bindCount>0)continue;i.unit=-1}X[r]=e,n=r;break}s.profile&&o.maxTextureUnits<n+1&&(o.maxTextureUnits=n+1),e.unit=n,t.activeTexture(vn+n),t.bindTexture(e.target,e.texture)}return n},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Q(this)}}),s.profile&&(o.getTotalTextureSize=function(){var e=0;return Object.keys(G).forEach((function(t){e+=G[t].stats.size})),e}),{create2D:ee,createCube:te,clear:ne,getTexture:function(e){return null},restore:re,refresh:ie}}On[bt]=2,On[xt]=2,On[_t]=2,On[Mt]=4,On[Rt]=.5,On[Nt]=.5,On[Lt]=1,On[Dt]=1,On[Pt]=.5,On[It]=1,On[Ft]=1,On[zt]=.5,On[jt]=.25,On[Bt]=.5,On[Ut]=.25,On[$t]=.5;var Yn=36161,Xn=32854,Kn=32855,Zn=36194,Jn=33189,Qn=36168,er=34041,tr=35907,nr=34836,rr=34842,ir=34843,ar=[];function or(e,t,n){return ar[e]*t*n}ar[Xn]=2,ar[Kn]=2,ar[Zn]=2,ar[Jn]=2,ar[Qn]=1,ar[er]=4,ar[tr]=4,ar[nr]=16,ar[rr]=8,ar[ir]=6;var sr=function(e,t,n,r,i){var a={rgba4:Xn,rgb565:Zn,"rgb5 a1":Kn,depth:Jn,stencil:Qn,"depth stencil":er};t.ext_srgb&&(a.srgba=tr),t.ext_color_buffer_half_float&&(a.rgba16f=rr,a.rgb16f=ir),t.webgl_color_buffer_float&&(a.rgba32f=nr);var o=[];Object.keys(a).forEach((function(e){var t=a[e];o[t]=e}));var s=0,l={};function c(e){this.id=s++,this.refCount=1,this.renderbuffer=e,this.format=Xn,this.width=0,this.height=0,i.profile&&(this.stats={size:0})}function u(t){var n=t.renderbuffer;e.bindRenderbuffer(Yn,null),e.deleteRenderbuffer(n),t.renderbuffer=null,t.refCount=0,delete l[t.id],r.renderbufferCount--}function f(t,n){var s=new c(e.createRenderbuffer());function u(t,n){var r=0,l=0,c=Xn;if("object"==typeof t&&t){var f=t;if("shape"in f){var d=f.shape;r=0|d[0],l=0|d[1]}else"radius"in f&&(r=l=0|f.radius),"width"in f&&(r=0|f.width),"height"in f&&(l=0|f.height);"format"in f&&(c=a[f.format])}else"number"==typeof t?(r=0|t,l="number"==typeof n?0|n:r):t||(r=l=1);if(r!==s.width||l!==s.height||c!==s.format)return u.width=s.width=r,u.height=s.height=l,s.format=c,e.bindRenderbuffer(Yn,s.renderbuffer),e.renderbufferStorage(Yn,c,r,l),i.profile&&(s.stats.size=or(s.format,s.width,s.height)),u.format=o[s.format],u}function f(t,n){var r=0|t,a=0|n||r;return r===s.width&&a===s.height||(u.width=s.width=r,u.height=s.height=a,e.bindRenderbuffer(Yn,s.renderbuffer),e.renderbufferStorage(Yn,s.format,r,a),i.profile&&(s.stats.size=or(s.format,s.width,s.height))),u}return l[s.id]=s,r.renderbufferCount++,u(t,n),u.resize=f,u._reglType="renderbuffer",u._renderbuffer=s,i.profile&&(u.stats=s.stats),u.destroy=function(){s.decRef()},u}function d(){Ae(l).forEach((function(t){t.renderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(Yn,t.renderbuffer),e.renderbufferStorage(Yn,t.format,t.width,t.height)})),e.bindRenderbuffer(Yn,null)}return c.prototype.decRef=function(){--this.refCount<=0&&u(this)},i.profile&&(r.getTotalRenderbufferSize=function(){var e=0;return Object.keys(l).forEach((function(t){e+=l[t].stats.size})),e}),{create:f,clear:function(){Ae(l).forEach(u)},restore:d}},lr=36160,cr=36161,ur=3553,fr=34069,dr=36064,hr=36096,pr=36128,mr=33306,gr=36193,vr=5121,yr=5126,br=6407,xr=[];xr[6408]=4,xr[br]=3;var _r=[];function wr(t,n,r,i,a,o){var s={cur:null,next:null,dirty:!1,setFBO:null},l=["rgba"],c=["rgba4","rgb565","rgb5 a1"];n.ext_srgb&&c.push("srgba"),n.ext_color_buffer_half_float&&c.push("rgba16f","rgb16f"),n.webgl_color_buffer_float&&c.push("rgba32f");var u=["uint8"];function f(e,t,n){this.target=e,this.texture=t,this.renderbuffer=n;var r=0,i=0;t?(r=t.width,i=t.height):n&&(r=n.width,i=n.height),this.width=r,this.height=i}function d(e){e&&(e.texture&&e.texture._texture.decRef(),e.renderbuffer&&e.renderbuffer._renderbuffer.decRef())}function h(e,t,n){if(e)if(e.texture){var r=e.texture._texture;Math.max(1,r.width),Math.max(1,r.height),r.refCount+=1}else e.renderbuffer._renderbuffer.refCount+=1}function p(e,n){n&&(n.texture?t.framebufferTexture2D(lr,e,n.target,n.texture._texture.texture,0):t.framebufferRenderbuffer(lr,e,cr,n.renderbuffer._renderbuffer.renderbuffer))}function m(e){var t=ur,n=null,r=null,i=e;"object"==typeof e&&(i=e.data,"target"in e&&(t=0|e.target));var a=i._reglType;return"texture2d"===a||"textureCube"===a?n=i:"renderbuffer"===a&&(r=i,t=cr),new f(t,n,r)}function g(e,t,n,r,o){if(n){var s=i.create2D({width:e,height:t,format:r,type:o});return s._texture.refCount=0,new f(ur,s,null)}var l=a.create({width:e,height:t,format:r});return l._renderbuffer.refCount=0,new f(cr,null,l)}function v(e){return e&&(e.texture||e.renderbuffer)}function y(e,t,n){e&&(e.texture?e.texture.resize(t,n):e.renderbuffer&&e.renderbuffer.resize(t,n),e.width=t,e.height=n)}n.oes_texture_half_float&&u.push("half float","float16"),n.oes_texture_float&&u.push("float","float32");var b=0,x={};function _(){this.id=b++,x[this.id]=this,this.framebuffer=t.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function w(e){e.colorAttachments.forEach(d),d(e.depthAttachment),d(e.stencilAttachment),d(e.depthStencilAttachment)}function A(e){var n=e.framebuffer;t.deleteFramebuffer(n),e.framebuffer=null,o.framebufferCount--,delete x[e.id]}function k(e){var n;t.bindFramebuffer(lr,e.framebuffer);var i=e.colorAttachments;for(n=0;n<i.length;++n)p(dr+n,i[n]);for(n=i.length;n<r.maxColorAttachments;++n)t.framebufferTexture2D(lr,dr+n,ur,null,0);t.framebufferTexture2D(lr,mr,ur,null,0),t.framebufferTexture2D(lr,hr,ur,null,0),t.framebufferTexture2D(lr,pr,ur,null,0),p(hr,e.depthAttachment),p(pr,e.stencilAttachment),p(mr,e.depthStencilAttachment),t.checkFramebufferStatus(lr),t.isContextLost(),t.bindFramebuffer(lr,s.next?s.next.framebuffer:null),s.cur=s.next,t.getError()}function E(t,n){var r=new _;function i(e,t){var n,a=0,o=0,s=!0,u=!0,f=null,d=!0,p="rgba",y="uint8",b=1,x=null,_=null,A=null,E=!1;if("number"==typeof e)a=0|e,o=0|t||a;else if(e){var T=e;if("shape"in T){var M=T.shape;a=M[0],o=M[1]}else"radius"in T&&(a=o=T.radius),"width"in T&&(a=T.width),"height"in T&&(o=T.height);("color"in T||"colors"in T)&&(f=T.color||T.colors,Array.isArray(f)),f||("colorCount"in T&&(b=0|T.colorCount),"colorTexture"in T&&(d=!!T.colorTexture,p="rgba4"),"colorType"in T&&(y=T.colorType,d||("half float"===y||"float16"===y?p="rgba16f":"float"!==y&&"float32"!==y||(p="rgba32f"))),"colorFormat"in T&&(p=T.colorFormat,l.indexOf(p)>=0?d=!0:c.indexOf(p)>=0&&(d=!1))),("depthTexture"in T||"depthStencilTexture"in T)&&(E=!(!T.depthTexture&&!T.depthStencilTexture)),"depth"in T&&("boolean"==typeof T.depth?s=T.depth:(x=T.depth,u=!1)),"stencil"in T&&("boolean"==typeof T.stencil?u=T.stencil:(_=T.stencil,s=!1)),"depthStencil"in T&&("boolean"==typeof T.depthStencil?s=u=T.depthStencil:(A=T.depthStencil,s=!1,u=!1))}else a=o=1;var S=null,C=null,O=null,R=null;if(Array.isArray(f))S=f.map(m);else if(f)S=[m(f)];else for(S=new Array(b),n=0;n<b;++n)S[n]=g(a,o,d,p,y);a=a||S[0].width,o=o||S[0].height,x?C=m(x):s&&!u&&(C=g(a,o,E,"depth","uint32")),_?O=m(_):u&&!s&&(O=g(a,o,!1,"stencil","uint8")),A?R=m(A):!x&&!_&&u&&s&&(R=g(a,o,E,"depth stencil","depth stencil"));var N=null;for(n=0;n<S.length;++n)if(h(S[n],a,o),S[n]&&S[n].texture){var L=xr[S[n].texture._texture.format]*_r[S[n].texture._texture.type];null===N&&(N=L)}return h(C,a,o),h(O,a,o),h(R,a,o),w(r),r.width=a,r.height=o,r.colorAttachments=S,r.depthAttachment=C,r.stencilAttachment=O,r.depthStencilAttachment=R,i.color=S.map(v),i.depth=v(C),i.stencil=v(O),i.depthStencil=v(R),i.width=r.width,i.height=r.height,k(r),i}function a(e,t){var n=Math.max(0|e,1),a=Math.max(0|t||n,1);if(n===r.width&&a===r.height)return i;for(var o=r.colorAttachments,s=0;s<o.length;++s)y(o[s],n,a);return y(r.depthAttachment,n,a),y(r.stencilAttachment,n,a),y(r.depthStencilAttachment,n,a),r.width=i.width=n,r.height=i.height=a,k(r),i}return o.framebufferCount++,i(t,n),e(i,{resize:a,_reglType:"framebuffer",_framebuffer:r,destroy:function(){A(r),w(r)},use:function(e){s.setFBO({framebuffer:i},e)}})}function T(t){var n=Array(6);function r(t){var a,o,s={color:null},l=0,c=null,u="rgba",f="uint8",d=1;if("number"==typeof t)l=0|t;else if(t){var h=t;"shape"in h?l=h.shape[0]:("radius"in h&&(l=0|h.radius),"width"in h?l=0|h.width:"height"in h&&(l=0|h.height)),("color"in h||"colors"in h)&&(c=h.color||h.colors,Array.isArray(c)),c||("colorCount"in h&&(d=0|h.colorCount),"colorType"in h&&(f=h.colorType),"colorFormat"in h&&(u=h.colorFormat)),"depth"in h&&(s.depth=h.depth),"stencil"in h&&(s.stencil=h.stencil),"depthStencil"in h&&(s.depthStencil=h.depthStencil)}else l=1;if(c)if(Array.isArray(c))for(o=[],a=0;a<c.length;++a)o[a]=c[a];else o=[c];else{o=Array(d);var p={radius:l,format:u,type:f};for(a=0;a<d;++a)o[a]=i.createCube(p)}for(s.color=Array(o.length),a=0;a<o.length;++a){var m=o[a];l=l||m.width,s.color[a]={target:fr,data:o[a]}}for(a=0;a<6;++a){for(var g=0;g<o.length;++g)s.color[g].target=fr+a;a>0&&(s.depth=n[0].depth,s.stencil=n[0].stencil,s.depthStencil=n[0].depthStencil),n[a]?n[a](s):n[a]=E(s)}return e(r,{width:l,height:l,color:o})}function a(e){var t,i=0|e;if(i===r.width)return r;var a=r.color;for(t=0;t<a.length;++t)a[t].resize(i);for(t=0;t<6;++t)n[t].resize(i);return r.width=r.height=i,r}return r(t),e(r,{faces:n,resize:a,_reglType:"framebufferCube",destroy:function(){n.forEach((function(e){e.destroy()}))}})}function M(){s.cur=null,s.next=null,s.dirty=!0,Ae(x).forEach((function(e){e.framebuffer=t.createFramebuffer(),k(e)}))}return e(s,{getFramebuffer:function(e){if("function"==typeof e&&"framebuffer"===e._reglType){var t=e._framebuffer;if(t instanceof _)return t}return null},create:E,createCube:T,clear:function(){Ae(x).forEach(A)},restore:M})}_r[vr]=1,_r[yr]=4,_r[gr]=2;var Ar=5126,kr=34962,Er=34963;function Tr(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Ar,this.offset=0,this.stride=0,this.divisor=0}function Mr(e,t,n,r,i,a,o){for(var s=n.maxAttributes,l=new Array(s),c=0;c<s;++c)l[c]=new Tr;var u=0,f={},d={Record:Tr,scope:{},state:l,currentVAO:null,targetVAO:null,restore:p()?_:function(){},createVAO:w,getVAO:g,destroyBuffer:h,setVAO:p()?v:y,clear:p()?b:function(){}};function h(t){for(var n=0;n<l.length;++n){var r=l[n];r.buffer===t&&(e.disableVertexAttribArray(n),r.buffer=null)}}function p(){return t.oes_vertex_array_object}function m(){return t.angle_instanced_arrays}function g(e){return"function"==typeof e&&e._vao?e._vao:null}function v(e){if(e!==d.currentVAO){var t=p();e?t.bindVertexArrayOES(e.vao):t.bindVertexArrayOES(null),d.currentVAO=e}}function y(t){if(t!==d.currentVAO){if(t)t.bindAttrs();else{for(var n=m(),r=0;r<l.length;++r){var i=l[r];i.buffer?(e.enableVertexAttribArray(r),i.buffer.bind(),e.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offfset),n&&i.divisor&&n.vertexAttribDivisorANGLE(r,i.divisor)):(e.disableVertexAttribArray(r),e.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}o.elements?e.bindBuffer(Er,o.elements.buffer.buffer):e.bindBuffer(Er,null)}d.currentVAO=t}}function b(){Ae(f).forEach((function(e){e.destroy()}))}function x(){this.id=++u,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var e=p();this.vao=e?e.createVertexArrayOES():null,f[this.id]=this,this.buffers=[]}function _(){p()&&Ae(f).forEach((function(e){e.refresh()}))}function w(e){var t=new x;function n(e){var r;if(Array.isArray(e))r=e,t.elements&&t.ownsElements&&t.elements.destroy(),t.elements=null,t.ownsElements=!1,t.offset=0,t.count=0,t.instances=-1,t.primitive=4;else{if(e.elements){var o=e.elements;t.ownsElements?"function"==typeof o&&"elements"===o._reglType?(t.elements.destroy(),t.ownsElements=!1):(t.elements(o),t.ownsElements=!1):a.getElements(e.elements)?(t.elements=e.elements,t.ownsElements=!1):(t.elements=a.create(e.elements),t.ownsElements=!0)}else t.elements=null,t.ownsElements=!1;r=e.attributes,t.offset=0,t.count=-1,t.instances=-1,t.primitive=4,t.elements&&(t.count=t.elements._elements.vertCount,t.primitive=t.elements._elements.primType),"offset"in e&&(t.offset=0|e.offset),"count"in e&&(t.count=0|e.count),"instances"in e&&(t.instances=0|e.instances),"primitive"in e&&(t.primitive=Ve[e.primitive])}var s={},l=t.attributes;l.length=r.length;for(var c=0;c<r.length;++c){var u,f=r[c],d=l[c]=new Tr,h=f.data||f;Array.isArray(h)||_e(h)||we(h)?(t.buffers[c]&&(u=t.buffers[c],_e(h)&&u._buffer.byteLength>=h.byteLength?u.subdata(h):(u.destroy(),t.buffers[c]=null)),t.buffers[c]||(u=t.buffers[c]=i.create(f,kr,!1,!0)),d.buffer=i.getBuffer(u),d.size=0|d.buffer.dimension,d.normalized=!1,d.type=d.buffer.dtype,d.offset=0,d.stride=0,d.divisor=0,d.state=1,s[c]=1):i.getBuffer(f)?(d.buffer=i.getBuffer(f),d.size=0|d.buffer.dimension,d.normalized=!1,d.type=d.buffer.dtype,d.offset=0,d.stride=0,d.divisor=0,d.state=1):i.getBuffer(f.buffer)?(d.buffer=i.getBuffer(f.buffer),d.size=0|(+f.size||d.buffer.dimension),d.normalized=!!f.normalized||!1,d.type="type"in f?Ne[f.type]:d.buffer.dtype,d.offset=0|(f.offset||0),d.stride=0|(f.stride||0),d.divisor=0|(f.divisor||0),d.state=1):"x"in f&&(d.x=+f.x||0,d.y=+f.y||0,d.z=+f.z||0,d.w=+f.w||0,d.state=2)}for(var p=0;p<t.buffers.length;++p)!s[p]&&t.buffers[p]&&(t.buffers[p].destroy(),t.buffers[p]=null);return t.refresh(),n}return r.vaoCount+=1,n.destroy=function(){for(var e=0;e<t.buffers.length;++e)t.buffers[e]&&t.buffers[e].destroy();t.buffers.length=0,t.ownsElements&&(t.elements.destroy(),t.elements=null,t.ownsElements=!1),t.destroy()},n._vao=t,n._reglType="vao",n(e)}return x.prototype.bindAttrs=function(){for(var t=m(),n=this.attributes,r=0;r<n.length;++r){var i=n[r];i.buffer?(e.enableVertexAttribArray(r),e.bindBuffer(kr,i.buffer.buffer),e.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offset),t&&i.divisor&&t.vertexAttribDivisorANGLE(r,i.divisor)):(e.disableVertexAttribArray(r),e.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}for(var o=n.length;o<s;++o)e.disableVertexAttribArray(o);var l=a.getElements(this.elements);l?e.bindBuffer(Er,l.buffer.buffer):e.bindBuffer(Er,null)},x.prototype.refresh=function(){var e=p();e&&(e.bindVertexArrayOES(this.vao),this.bindAttrs(),d.currentVAO=null,e.bindVertexArrayOES(null))},x.prototype.destroy=function(){if(this.vao){var e=p();this===d.currentVAO&&(d.currentVAO=null,e.bindVertexArrayOES(null)),e.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),f[this.id]&&(delete f[this.id],r.vaoCount-=1)},d}var Sr=35632,Cr=35633,Or=35718,Rr=35721;function Nr(t,n,r,i){var a={},o={};function s(e,t,n,r){this.name=e,this.id=t,this.location=n,this.info=r}function l(e,t){for(var n=0;n<e.length;++n)if(e[n].id===t.id)return void(e[n].location=t.location);e.push(t)}function c(e,r,i){var s=e===Sr?a:o,l=s[r];if(!l){var c=n.str(r);l=t.createShader(e),t.shaderSource(l,c),t.compileShader(l),s[r]=l}return l}var u={},f=[],d=0;function h(e,t){this.id=d++,this.fragId=e,this.vertId=t,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,i.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function p(e,r,a){var o,u,f=c(Sr,e.fragId),d=c(Cr,e.vertId),h=e.program=t.createProgram();if(t.attachShader(h,f),t.attachShader(h,d),a)for(o=0;o<a.length;++o){var p=a[o];t.bindAttribLocation(h,p[0],p[1])}t.linkProgram(h);var m=t.getProgramParameter(h,Or);i.profile&&(e.stats.uniformsCount=m);var g=e.uniforms;for(o=0;o<m;++o)if(u=t.getActiveUniform(h,o))if(u.size>1)for(var v=0;v<u.size;++v){var y=u.name.replace("[0]","["+v+"]");l(g,new s(y,n.id(y),t.getUniformLocation(h,y),u))}else l(g,new s(u.name,n.id(u.name),t.getUniformLocation(h,u.name),u));var b=t.getProgramParameter(h,Rr);i.profile&&(e.stats.attributesCount=b);var x=e.attributes;for(o=0;o<b;++o)(u=t.getActiveAttrib(h,o))&&l(x,new s(u.name,n.id(u.name),t.getAttribLocation(h,u.name),u))}function m(){a={},o={};for(var e=0;e<f.length;++e)p(f[e],null,f[e].attributes.map((function(e){return[e.location,e.name]})))}return i.profile&&(r.getMaxUniformsCount=function(){var e=0;return f.forEach((function(t){t.stats.uniformsCount>e&&(e=t.stats.uniformsCount)})),e},r.getMaxAttributesCount=function(){var e=0;return f.forEach((function(t){t.stats.attributesCount>e&&(e=t.stats.attributesCount)})),e}),{clear:function(){var e=t.deleteShader.bind(t);Ae(a).forEach(e),a={},Ae(o).forEach(e),o={},f.forEach((function(e){t.deleteProgram(e.program)})),f.length=0,u={},r.shaderCount=0},program:function(n,i,s,l){var c=u[i];c||(c=u[i]={});var d=c[n];if(d&&(d.refCount++,!l))return d;var m=new h(i,n);return r.shaderCount++,p(m,s,l),d||(c[n]=m),f.push(m),e(m,{destroy:function(){if(m.refCount--,m.refCount<=0){t.deleteProgram(m.program);var e=f.indexOf(m);f.splice(e,1),r.shaderCount--}c[m.vertId].refCount<=0&&(t.deleteShader(o[m.vertId]),delete o[m.vertId],delete u[m.fragId][m.vertId]),Object.keys(u[m.fragId]).length||(t.deleteShader(a[m.fragId]),delete a[m.fragId],delete u[m.fragId])}})},restore:m,shader:c,frag:-1,vert:-1}}var Lr=6408,Dr=5121,Pr=3333,Ir=5126;function Fr(e,t,n,r,i,a,o){function s(i){var a;a=null===t.next?Dr:t.next.colorAttachments[0].texture._texture.type;var o=0,s=0,l=r.framebufferWidth,c=r.framebufferHeight,u=null;_e(i)?u=i:i&&(o=0|i.x,s=0|i.y,l=0|(i.width||r.framebufferWidth-o),c=0|(i.height||r.framebufferHeight-s),u=i.data||null),n();var f=l*c*4;return u||(a===Dr?u=new Uint8Array(f):a===Ir&&(u=u||new Float32Array(f))),e.pixelStorei(Pr,4),e.readPixels(o,s,l,c,Lr,a,u),u}function l(e){var n;return t.setFBO({framebuffer:e.framebuffer},(function(){n=s(e)})),n}function c(e){return e&&"framebuffer"in e?l(e):s(e)}return c}var zr=0;function jr(e){return Ur(Br($r(e)))}function Br(e){return Hr(ei(qr(e),8*e.length))}function Ur(e){for(var t,n=zr?"0123456789ABCDEF":"0123456789abcdef",r="",i=0;i<e.length;i++)t=e.charCodeAt(i),r+=n.charAt(t>>>4&15)+n.charAt(15&t);return r}function $r(e){for(var t,n,r="",i=-1;++i<e.length;)t=e.charCodeAt(i),n=i+1<e.length?e.charCodeAt(i+1):0,55296<=t&&t<=56319&&56320<=n&&n<=57343&&(t=65536+((1023&t)<<10)+(1023&n),i++),t<=127?r+=String.fromCharCode(t):t<=2047?r+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?r+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(r+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return r}function qr(e){for(var t=Array(e.length>>2),n=0;n<t.length;n++)t[n]=0;for(n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<24-n%32;return t}function Hr(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>24-n%32&255);return t}function Vr(e,t){return e>>>t|e<<32-t}function Wr(e,t){return e>>>t}function Gr(e,t,n){return e&t^~e&n}function Yr(e,t,n){return e&t^e&n^t&n}function Xr(e){return Vr(e,2)^Vr(e,13)^Vr(e,22)}function Kr(e){return Vr(e,6)^Vr(e,11)^Vr(e,25)}function Zr(e){return Vr(e,7)^Vr(e,18)^Wr(e,3)}function Jr(e){return Vr(e,17)^Vr(e,19)^Wr(e,10)}var Qr=new Array(1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998);function ei(e,t){var n,r,i,a,o,s,l,c,u,f,d,h,p=new Array(1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225),m=new Array(64);for(e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t,u=0;u<e.length;u+=16){for(n=p[0],r=p[1],i=p[2],a=p[3],o=p[4],s=p[5],l=p[6],c=p[7],f=0;f<64;f++)m[f]=f<16?e[f+u]:ti(ti(ti(Jr(m[f-2]),m[f-7]),Zr(m[f-15])),m[f-16]),d=ti(ti(ti(ti(c,Kr(o)),Gr(o,s,l)),Qr[f]),m[f]),h=ti(Xr(n),Yr(n,r,i)),c=l,l=s,s=o,o=ti(a,d),a=i,i=r,r=n,n=ti(d,h);p[0]=ti(n,p[0]),p[1]=ti(r,p[1]),p[2]=ti(i,p[2]),p[3]=ti(a,p[3]),p[4]=ti(o,p[4]),p[5]=ti(s,p[5]),p[6]=ti(l,p[6]),p[7]=ti(c,p[7])}return p}function ti(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function ni(e){return Array.prototype.slice.call(e)}function ri(e){return ni(e).join("")}function ii(t){var n=t&&t.cache,r=0,i=[],a=[],o=[];function s(e,t){var n=t&&t.stable;if(!n)for(var s=0;s<a.length;++s)if(a[s]===e&&!o[s])return i[s];var l="g"+r++;return i.push(l),a.push(e),o.push(n),l}function l(){var t=[];function n(){t.push.apply(t,ni(arguments))}var i=[];function a(){var e="v"+r++;return i.push(e),arguments.length>0&&(t.push(e,"="),t.push.apply(t,ni(arguments)),t.push(";")),e}return e(n,{def:a,toString:function(){return ri([i.length>0?"var "+i.join(",")+";":"",ri(t)])}})}function c(){var t=l(),n=l(),r=t.toString,i=n.toString;function a(e,r){n(e,r,"=",t.def(e,r),";")}return e((function(){t.apply(t,ni(arguments))}),{def:t.def,entry:t,exit:n,save:a,set:function(e,n,r){a(e,n),t(e,n,"=",r,";")},toString:function(){return r()+i()}})}function u(){var t=ri(arguments),n=c(),r=c(),i=n.toString,a=r.toString;return e(n,{then:function(){return n.apply(n,ni(arguments)),this},else:function(){return r.apply(r,ni(arguments)),this},toString:function(){var e=a();return e&&(e="else{"+e+"}"),ri(["if(",t,"){",i(),"}",e])}})}var f=l(),d={};function h(t,n){var r=[];function i(){var e="a"+r.length;return r.push(e),e}n=n||0;for(var a=0;a<n;++a)i();var o=c(),s=o.toString;return d[t]=e(o,{arg:i,toString:function(){return ri(["function(",r.join(),"){",s(),"}"])}})}function p(){var e=['"use strict";',f,"return {"];Object.keys(d).forEach((function(t){e.push('"',t,'":',d[t].toString(),",")})),e.push("}");var t,r=ri(e).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");if(n&&(t=jr(r),n[t]))return n[t].apply(null,a);var o=Function.apply(null,i.concat(r));return n&&(n[t]=o),o.apply(null,a)}return{global:f,link:s,block:l,proc:h,scope:c,cond:u,compile:p}}var ai="xyzw".split(""),oi=5121,si=1,li=2,ci=0,ui=1,fi=2,di=3,hi=4,pi=5,mi=6,gi="dither",vi="blend.enable",yi="blend.color",bi="blend.equation",xi="blend.func",_i="depth.enable",wi="depth.func",Ai="depth.range",ki="depth.mask",Ei="colorMask",Ti="cull.enable",Mi="cull.face",Si="frontFace",Ci="lineWidth",Oi="polygonOffset.enable",Ri="polygonOffset.offset",Ni="sample.alpha",Li="sample.enable",Di="sample.coverage",Pi="stencil.enable",Ii="stencil.mask",Fi="stencil.func",zi="stencil.opFront",ji="stencil.opBack",Bi="scissor.enable",Ui="scissor.box",$i="viewport",qi="profile",Hi="framebuffer",Vi="vert",Wi="frag",Gi="elements",Yi="primitive",Xi="count",Ki="offset",Zi="instances",Ji="vao",Qi="Width",ea="Height",ta=Hi+Qi,na=Hi+ea,ra=$i+Qi,ia=$i+ea,aa="drawingBuffer",oa=aa+Qi,sa=aa+ea,la=[xi,bi,Fi,zi,ji,Di,$i,Ui,Ri],ca=34962,ua=34963,fa=2884,da=3042,ha=3024,pa=2960,ma=2929,ga=3089,va=32823,ya=32926,ba=32928,xa=5126,_a=35664,wa=35665,Aa=35666,ka=5124,Ea=35667,Ta=35668,Ma=35669,Sa=35670,Ca=35671,Oa=35672,Ra=35673,Na=35674,La=35675,Da=35676,Pa=35678,Ia=35680,Fa=4,za=1028,ja=1029,Ba=2304,Ua=2305,$a=32775,qa=32776,Ha=519,Va=7680,Wa=0,Ga=1,Ya=32774,Xa=513,Ka=36160,Za=36064,Ja={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Qa={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},eo={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},to={cw:Ba,ccw:Ua};function no(e){return Array.isArray(e)||_e(e)||we(e)}function ro(e){return e.sort((function(e,t){return e===$i?-1:t===$i?1:e<t?-1:1}))}function io(e,t,n,r){this.thisDep=e,this.contextDep=t,this.propDep=n,this.append=r}function ao(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function oo(e){return new io(!1,!1,!1,e)}function so(e,t){var n=e.type;if(n===ci){var r=e.data.length;return new io(!0,r>=1,r>=2,t)}if(n===hi){var i=e.data;return new io(i.thisDep,i.contextDep,i.propDep,t)}if(n===pi)return new io(!1,!1,!1,t);if(n===mi){for(var a=!1,o=!1,s=!1,l=0;l<e.data.length;++l){var c=e.data[l];if(c.type===ui)s=!0;else if(c.type===fi)o=!0;else if(c.type===di)a=!0;else if(c.type===ci){a=!0;var u=c.data;u>=1&&(o=!0),u>=2&&(s=!0)}else c.type===hi&&(a=a||c.data.thisDep,o=o||c.data.contextDep,s=s||c.data.propDep)}return new io(a,o,s,t)}return new io(n===di,n===fi,n===ui,t)}var lo=new io(!1,!1,!1,(function(){}));function co(t,n,r,i,a,o,s,l,c,u,f,h,p,m,g,v){var y=u.Record,b={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(b.min=$a,b.max=qa);var x=r.angle_instanced_arrays,_=r.webgl_draw_buffers,w=r.oes_vertex_array_object,A={dirty:!0,profile:v.profile},E={},T=[],M={},S={};function C(e){return e.replace(".","_")}function O(e,t,n){var r=C(e);T.push(e),E[r]=A[r]=!!n,M[r]=t}function R(e,t,n){var r=C(e);T.push(e),Array.isArray(n)?(A[r]=n.slice(),E[r]=n.slice()):A[r]=E[r]=n,S[r]=t}function N(e){return!!isNaN(e)}O(gi,ha),O(vi,da),R(yi,"blendColor",[0,0,0,0]),R(bi,"blendEquationSeparate",[Ya,Ya]),R(xi,"blendFuncSeparate",[Ga,Wa,Ga,Wa]),O(_i,ma,!0),R(wi,"depthFunc",Xa),R(Ai,"depthRange",[0,1]),R(ki,"depthMask",!0),R(Ei,Ei,[!0,!0,!0,!0]),O(Ti,fa),R(Mi,"cullFace",ja),R(Si,Si,Ua),R(Ci,Ci,1),O(Oi,va),R(Ri,"polygonOffset",[0,0]),O(Ni,ya),O(Li,ba),R(Di,"sampleCoverage",[1,!1]),O(Pi,pa),R(Ii,"stencilMask",-1),R(Fi,"stencilFunc",[Ha,0,-1]),R(zi,"stencilOpSeparate",[za,Va,Va,Va]),R(ji,"stencilOpSeparate",[ja,Va,Va,Va]),O(Bi,ga),R(Ui,"scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),R($i,$i,[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var L={gl:t,context:p,strings:n,next:E,current:A,draw:h,elements:o,buffer:a,shader:f,attributes:u.state,vao:u,uniforms:c,framebuffer:l,extensions:r,timer:m,isBufferArgs:no},D={primTypes:Ve,compareFuncs:Qa,blendFuncs:Ja,blendEquations:b,stencilOps:eo,glTypes:Ne,orientationType:to};_&&(D.backBuffer=[ja],D.drawBuffer=k(i.maxDrawbuffers,(function(e){return 0===e?[0]:k(e,(function(e){return Za+e}))})));var P=0;function I(){var e=ii({cache:g}),t=e.link,r=e.global;e.id=P++,e.batchId="0";var i=t(L),a=e.shared={props:"a0"};Object.keys(L).forEach((function(e){a[e]=r.def(i,".",e)}));var o=e.next={},s=e.current={};Object.keys(S).forEach((function(e){Array.isArray(A[e])&&(o[e]=r.def(a.next,".",e),s[e]=r.def(a.current,".",e))}));var l=e.constants={};Object.keys(D).forEach((function(e){l[e]=r.def(JSON.stringify(D[e]))})),e.invoke=function(n,r){switch(r.type){case ci:var i=["this",a.context,a.props,e.batchId];return n.def(t(r.data),".call(",i.slice(0,Math.max(r.data.length+1,4)),")");case ui:return n.def(a.props,r.data);case fi:return n.def(a.context,r.data);case di:return n.def("this",r.data);case hi:return r.data.append(e,n),r.data.ref;case pi:return r.data.toString();case mi:return r.data.map((function(t){return e.invoke(n,t)}))}},e.attribCache={};var c={};return e.scopeAttrib=function(e){var r=n.id(e);if(r in c)return c[r];var i=u.scope[r];return i||(i=u.scope[r]=new y),c[r]=t(i)},e}function F(e){var t,n=e.static,r=e.dynamic;if(qi in n){var i=!!n[qi];(t=oo((function(e,t){return i}))).enable=i}else if(qi in r){var a=r[qi];t=so(a,(function(e,t){return e.invoke(t,a)}))}return t}function z(e,t){var n=e.static,r=e.dynamic;if(Hi in n){var i=n[Hi];return i?(i=l.getFramebuffer(i),oo((function(e,t){var n=e.link(i),r=e.shared;t.set(r.framebuffer,".next",n);var a=r.context;return t.set(a,"."+ta,n+".width"),t.set(a,"."+na,n+".height"),n}))):oo((function(e,t){var n=e.shared;t.set(n.framebuffer,".next","null");var r=n.context;return t.set(r,"."+ta,r+"."+oa),t.set(r,"."+na,r+"."+sa),"null"}))}if(Hi in r){var a=r[Hi];return so(a,(function(e,t){var n=e.invoke(t,a),r=e.shared,i=r.framebuffer,o=t.def(i,".getFramebuffer(",n,")");t.set(i,".next",o);var s=r.context;return t.set(s,"."+ta,o+"?"+o+".width:"+s+"."+oa),t.set(s,"."+na,o+"?"+o+".height:"+s+"."+sa),o}))}return null}function j(e,t,n){var r=e.static,i=e.dynamic;function a(e){if(e in r){var n,a,o=r[e],s=!0,l=0|o.x,c=0|o.y;return"width"in o?n=0|o.width:s=!1,"height"in o?a=0|o.height:s=!1,new io(!s&&t&&t.thisDep,!s&&t&&t.contextDep,!s&&t&&t.propDep,(function(e,t){var r=e.shared.context,i=n;"width"in o||(i=t.def(r,".",ta,"-",l));var s=a;return"height"in o||(s=t.def(r,".",na,"-",c)),[l,c,i,s]}))}if(e in i){var u=i[e],f=so(u,(function(e,t){var n=e.invoke(t,u),r=e.shared.context,i=t.def(n,".x|0"),a=t.def(n,".y|0");return[i,a,t.def('"width" in ',n,"?",n,".width|0:","(",r,".",ta,"-",i,")"),t.def('"height" in ',n,"?",n,".height|0:","(",r,".",na,"-",a,")")]}));return t&&(f.thisDep=f.thisDep||t.thisDep,f.contextDep=f.contextDep||t.contextDep,f.propDep=f.propDep||t.propDep),f}return t?new io(t.thisDep,t.contextDep,t.propDep,(function(e,t){var n=e.shared.context;return[0,0,t.def(n,".",ta),t.def(n,".",na)]})):null}var o=a($i);if(o){var s=o;o=new io(o.thisDep,o.contextDep,o.propDep,(function(e,t){var n=s.append(e,t),r=e.shared.context;return t.set(r,"."+ra,n[2]),t.set(r,"."+ia,n[3]),n}))}return{viewport:o,scissor_box:a(Ui)}}function B(e,t){var n=e.static;if("string"==typeof n[Wi]&&"string"==typeof n[Vi]){if(Object.keys(t.dynamic).length>0)return null;var r=t.static,i=Object.keys(r);if(i.length>0&&"number"==typeof r[i[0]]){for(var a=[],o=0;o<i.length;++o)a.push([0|r[i[o]],i[o]]);return a}}return null}function U(e,t,r){var i=e.static,a=e.dynamic;function o(e){if(e in i){var t=n.id(i[e]),r=oo((function(){return t}));return r.id=t,r}if(e in a){var o=a[e];return so(o,(function(e,t){var n=e.invoke(t,o);return t.def(e.shared.strings,".id(",n,")")}))}return null}var s,l=o(Wi),c=o(Vi),u=null;return ao(l)&&ao(c)?(u=f.program(c.id,l.id,null,r),s=oo((function(e,t){return e.link(u)}))):s=new io(l&&l.thisDep||c&&c.thisDep,l&&l.contextDep||c&&c.contextDep,l&&l.propDep||c&&c.propDep,(function(e,t){var n,r=e.shared.shader;n=l?l.append(e,t):t.def(r,".",Wi);var i=r+".program("+(c?c.append(e,t):t.def(r,".",Vi))+","+n;return t.def(i+")")})),{frag:l,vert:c,progVar:s,program:u}}function $(e,t){var n=e.static,r=e.dynamic,i={},a=!1;function s(){if(Ji in n){var e=n[Ji];return null!==e&&null===u.getVAO(e)&&(e=u.createVAO(e)),a=!0,i.vao=e,oo((function(t){var n=u.getVAO(e);return n?t.link(n):"null"}))}if(Ji in r){a=!0;var t=r[Ji];return so(t,(function(e,n){var r=e.invoke(n,t);return n.def(e.shared.vao+".getVAO("+r+")")}))}return null}var l=s(),c=!1;function f(){if(Gi in n){var e=n[Gi];if(i.elements=e,no(e)){var t=i.elements=o.create(e,!0);e=o.getElements(t),c=!0}else e&&(e=o.getElements(e),c=!0);var s=oo((function(t,n){if(e){var r=t.link(e);return t.ELEMENTS=r,r}return t.ELEMENTS=null,null}));return s.value=e,s}if(Gi in r){c=!0;var u=r[Gi];return so(u,(function(e,t){var n=e.shared,r=n.isBufferArgs,i=n.elements,a=e.invoke(t,u),o=t.def("null"),s=t.def(r,"(",a,")"),l=e.cond(s).then(o,"=",i,".createStream(",a,");").else(o,"=",i,".getElements(",a,");");return t.entry(l),t.exit(e.cond(s).then(i,".destroyStream(",o,");")),e.ELEMENTS=o,o}))}return a?new io(l.thisDep,l.contextDep,l.propDep,(function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.elements+".getElements("+e.shared.vao+".currentVAO.elements):null")})):null}var d=f();function h(){if(Yi in n){var e=n[Yi];return i.primitive=e,oo((function(t,n){return Ve[e]}))}if(Yi in r){var t=r[Yi];return so(t,(function(e,n){var r=e.constants.primTypes,i=e.invoke(n,t);return n.def(r,"[",i,"]")}))}return c?ao(d)?d.value?oo((function(e,t){return t.def(e.ELEMENTS,".primType")})):oo((function(){return Fa})):new io(d.thisDep,d.contextDep,d.propDep,(function(e,t){var n=e.ELEMENTS;return t.def(n,"?",n,".primType:",Fa)})):a?new io(l.thisDep,l.contextDep,l.propDep,(function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.primitive:"+Fa)})):null}function p(e,t){if(e in n){var o=0|n[e];return t?i.offset=o:i.instances=o,oo((function(e,n){return t&&(e.OFFSET=o),o}))}if(e in r){var s=r[e];return so(s,(function(e,n){var r=e.invoke(n,s);return t&&(e.OFFSET=r),r}))}if(t){if(c)return oo((function(e,t){return e.OFFSET=0,0}));if(a)return new io(l.thisDep,l.contextDep,l.propDep,(function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.offset:0")}))}else if(a)return new io(l.thisDep,l.contextDep,l.propDep,(function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.instances:-1")}));return null}var m=p(Ki,!0);function g(){if(Xi in n){var e=0|n[Xi];return i.count=e,oo((function(){return e}))}if(Xi in r){var t=r[Xi];return so(t,(function(e,n){return e.invoke(n,t)}))}if(c){if(ao(d))return d?m?new io(m.thisDep,m.contextDep,m.propDep,(function(e,t){return t.def(e.ELEMENTS,".vertCount-",e.OFFSET)})):oo((function(e,t){return t.def(e.ELEMENTS,".vertCount")})):oo((function(){return-1}));var o=new io(d.thisDep||m.thisDep,d.contextDep||m.contextDep,d.propDep||m.propDep,(function(e,t){var n=e.ELEMENTS;return e.OFFSET?t.def(n,"?",n,".vertCount-",e.OFFSET,":-1"):t.def(n,"?",n,".vertCount:-1")}));return o}if(a){var s=new io(l.thisDep,l.contextDep,l.propDep,(function(e,t){return t.def(e.shared.vao,".currentVAO?",e.shared.vao,".currentVAO.count:-1")}));return s}return null}var v=h(),y=g(),b=p(Zi,!1);return{elements:d,primitive:v,count:y,instances:b,offset:m,vao:l,vaoActive:a,elementsActive:c,static:i}}function q(e,t){var n=e.static,r=e.dynamic,i={};return T.forEach((function(e){var t=C(e);function a(a,o){if(e in n){var s=a(n[e]);i[t]=oo((function(){return s}))}else if(e in r){var l=r[e];i[t]=so(l,(function(e,t){return o(e,t,e.invoke(t,l))}))}}switch(e){case Ti:case vi:case gi:case Pi:case _i:case Bi:case Oi:case Ni:case Li:case ki:return a((function(e){return e}),(function(e,t,n){return n}));case wi:return a((function(e){return Qa[e]}),(function(e,t,n){var r=e.constants.compareFuncs;return t.def(r,"[",n,"]")}));case Ai:return a((function(e){return e}),(function(e,t,n){return[t.def("+",n,"[0]"),t.def("+",n,"[1]")]}));case xi:return a((function(e){var t="srcRGB"in e?e.srcRGB:e.src,n="srcAlpha"in e?e.srcAlpha:e.src,r="dstRGB"in e?e.dstRGB:e.dst,i="dstAlpha"in e?e.dstAlpha:e.dst;return[Ja[t],Ja[r],Ja[n],Ja[i]]}),(function(e,t,n){var r=e.constants.blendFuncs;function i(e,r){return t.def('"',e,r,'" in ',n,"?",n,".",e,r,":",n,".",e)}var a=i("src","RGB"),o=i("dst","RGB"),s=t.def(r,"[",a,"]"),l=t.def(r,"[",i("src","Alpha"),"]");return[s,t.def(r,"[",o,"]"),l,t.def(r,"[",i("dst","Alpha"),"]")]}));case bi:return a((function(e){return"string"==typeof e?[b[e],b[e]]:"object"==typeof e?[b[e.rgb],b[e.alpha]]:void 0}),(function(e,t,n){var r=e.constants.blendEquations,i=t.def(),a=t.def(),o=e.cond("typeof ",n,'==="string"');return o.then(i,"=",a,"=",r,"[",n,"];"),o.else(i,"=",r,"[",n,".rgb];",a,"=",r,"[",n,".alpha];"),t(o),[i,a]}));case yi:return a((function(e){return k(4,(function(t){return+e[t]}))}),(function(e,t,n){return k(4,(function(e){return t.def("+",n,"[",e,"]")}))}));case Ii:return a((function(e){return 0|e}),(function(e,t,n){return t.def(n,"|0")}));case Fi:return a((function(e){var t=e.cmp||"keep",n=e.ref||0,r="mask"in e?e.mask:-1;return[Qa[t],n,r]}),(function(e,t,n){var r=e.constants.compareFuncs;return[t.def('"cmp" in ',n,"?",r,"[",n,".cmp]",":",Va),t.def(n,".ref|0"),t.def('"mask" in ',n,"?",n,".mask|0:-1")]}));case zi:case ji:return a((function(t){var n=t.fail||"keep",r=t.zfail||"keep",i=t.zpass||"keep";return[e===ji?ja:za,eo[n],eo[r],eo[i]]}),(function(t,n,r){var i=t.constants.stencilOps;function a(e){return n.def('"',e,'" in ',r,"?",i,"[",r,".",e,"]:",Va)}return[e===ji?ja:za,a("fail"),a("zfail"),a("zpass")]}));case Ri:return a((function(e){return[0|e.factor,0|e.units]}),(function(e,t,n){return[t.def(n,".factor|0"),t.def(n,".units|0")]}));case Mi:return a((function(e){var t=0;return"front"===e?t=za:"back"===e&&(t=ja),t}),(function(e,t,n){return t.def(n,'==="front"?',za,":",ja)}));case Ci:return a((function(e){return e}),(function(e,t,n){return n}));case Si:return a((function(e){return to[e]}),(function(e,t,n){return t.def(n+'==="cw"?'+Ba+":"+Ua)}));case Ei:return a((function(e){return e.map((function(e){return!!e}))}),(function(e,t,n){return k(4,(function(e){return"!!"+n+"["+e+"]"}))}));case Di:return a((function(e){return["value"in e?e.value:1,!!e.invert]}),(function(e,t,n){return[t.def('"value" in ',n,"?+",n,".value:1"),t.def("!!",n,".invert")]}))}})),i}function H(e,t){var n=e.static,r=e.dynamic,i={};return Object.keys(n).forEach((function(e){var t,r=n[e];if("number"==typeof r||"boolean"==typeof r)t=oo((function(){return r}));else if("function"==typeof r){var a=r._reglType;"texture2d"===a||"textureCube"===a?t=oo((function(e){return e.link(r)})):"framebuffer"!==a&&"framebufferCube"!==a||(t=oo((function(e){return e.link(r.color[0])})))}else ct(r)&&(t=oo((function(e){return e.global.def("[",k(r.length,(function(e){return r[e]})),"]")})));t.value=r,i[e]=t})),Object.keys(r).forEach((function(e){var t=r[e];i[e]=so(t,(function(e,n){return e.invoke(n,t)}))})),i}function V(e,t){var r=e.static,i=e.dynamic,o={};return Object.keys(r).forEach((function(e){var t=r[e],i=n.id(e),s=new y;if(no(t))s.state=si,s.buffer=a.getBuffer(a.create(t,ca,!1,!0)),s.type=0;else{var l=a.getBuffer(t);if(l)s.state=si,s.buffer=l,s.type=0;else if("constant"in t){var c=t.constant;s.buffer="null",s.state=li,"number"==typeof c?s.x=c:ai.forEach((function(e,t){t<c.length&&(s[e]=c[t])}))}else{l=no(t.buffer)?a.getBuffer(a.create(t.buffer,ca,!1,!0)):a.getBuffer(t.buffer);var u=0|t.offset,f=0|t.stride,d=0|t.size,h=!!t.normalized,p=0;"type"in t&&(p=Ne[t.type]);var m=0|t.divisor;s.buffer=l,s.state=si,s.size=d,s.normalized=h,s.type=p||l.dtype,s.offset=u,s.stride=f,s.divisor=m}}o[e]=oo((function(e,t){var n=e.attribCache;if(i in n)return n[i];var r={isStream:!1};return Object.keys(s).forEach((function(e){r[e]=s[e]})),s.buffer&&(r.buffer=e.link(s.buffer),r.type=r.type||r.buffer+".dtype"),n[i]=r,r}))})),Object.keys(i).forEach((function(e){var t=i[e];function n(e,n){var r=e.invoke(n,t),i=e.shared,a=e.constants,o=i.isBufferArgs,s=i.buffer,l={isStream:n.def(!1)},c=new y;c.state=si,Object.keys(c).forEach((function(e){l[e]=n.def(""+c[e])}));var u=l.buffer,f=l.type;function d(e){n(l[e],"=",r,".",e,"|0;")}return n("if(",o,"(",r,")){",l.isStream,"=true;",u,"=",s,".createStream(",ca,",",r,");",f,"=",u,".dtype;","}else{",u,"=",s,".getBuffer(",r,");","if(",u,"){",f,"=",u,".dtype;",'}else if("constant" in ',r,"){",l.state,"=",li,";","if(typeof "+r+'.constant === "number"){',l[ai[0]],"=",r,".constant;",ai.slice(1).map((function(e){return l[e]})).join("="),"=0;","}else{",ai.map((function(e,t){return l[e]+"="+r+".constant.length>"+t+"?"+r+".constant["+t+"]:0;"})).join(""),"}}else{","if(",o,"(",r,".buffer)){",u,"=",s,".createStream(",ca,",",r,".buffer);","}else{",u,"=",s,".getBuffer(",r,".buffer);","}",f,'="type" in ',r,"?",a.glTypes,"[",r,".type]:",u,".dtype;",l.normalized,"=!!",r,".normalized;"),d("size"),d("offset"),d("stride"),d("divisor"),n("}}"),n.exit("if(",l.isStream,"){",s,".destroyStream(",u,");","}"),l}o[e]=so(t,n)})),o}function W(e){var t=e.static,n=e.dynamic,r={};return Object.keys(t).forEach((function(e){var n=t[e];r[e]=oo((function(e,t){return"number"==typeof n||"boolean"==typeof n?""+n:e.link(n)}))})),Object.keys(n).forEach((function(e){var t=n[e];r[e]=so(t,(function(e,n){return e.invoke(n,t)}))})),r}function G(e,t,n,i,a){e.static,e.dynamic;var o=B(e,t),s=z(e,a),l=j(e,s,a),c=$(e,a),f=q(e,a),d=U(e,a,o);function h(e){var t=l[e];t&&(f[e]=t)}h($i),h(C(Ui));var p=Object.keys(f).length>0,m={framebuffer:s,draw:c,shader:d,state:f,dirty:p,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(m.profile=F(e,a),m.uniforms=H(n,a),m.drawVAO=m.scopeVAO=c.vao,!m.drawVAO&&d.program&&!o&&r.angle_instanced_arrays&&c.static.elements){var g=!0,v=d.program.attributes.map((function(e){var n=t.static[e];return g=g&&!!n,n}));if(g&&v.length>0){var y=u.getVAO(u.createVAO({attributes:v,elements:c.static.elements}));m.drawVAO=new io(null,null,null,(function(e,t){return e.link(y)})),m.useVAO=!0}}return o?m.useVAO=!0:m.attributes=V(t,a),m.context=W(i,a),m}function Y(e,t,n){var r=e.shared.context,i=e.scope();Object.keys(n).forEach((function(a){t.save(r,"."+a);var o=n[a].append(e,t);Array.isArray(o)?i(r,".",a,"=[",o.join(),"];"):i(r,".",a,"=",o,";")})),t(i)}function X(e,t,n,r){var i,a=e.shared,o=a.gl,s=a.framebuffer;_&&(i=t.def(a.extensions,".webgl_draw_buffers"));var l,c=e.constants,u=c.drawBuffer,f=c.backBuffer;l=n?n.append(e,t):t.def(s,".next"),r||t("if(",l,"!==",s,".cur){"),t("if(",l,"){",o,".bindFramebuffer(",Ka,",",l,".framebuffer);"),_&&t(i,".drawBuffersWEBGL(",u,"[",l,".colorAttachments.length]);"),t("}else{",o,".bindFramebuffer(",Ka,",null);"),_&&t(i,".drawBuffersWEBGL(",f,");"),t("}",s,".cur=",l,";"),r||t("}")}function K(e,t,n){var r=e.shared,i=r.gl,a=e.current,o=e.next,s=r.current,l=r.next,c=e.cond(s,".dirty");T.forEach((function(t){var r,u,f=C(t);if(!(f in n.state))if(f in o){r=o[f],u=a[f];var d=k(A[f].length,(function(e){return c.def(r,"[",e,"]")}));c(e.cond(d.map((function(e,t){return e+"!=="+u+"["+t+"]"})).join("||")).then(i,".",S[f],"(",d,");",d.map((function(e,t){return u+"["+t+"]="+e})).join(";"),";"))}else{r=c.def(l,".",f);var h=e.cond(r,"!==",s,".",f);c(h),f in M?h(e.cond(r).then(i,".enable(",M[f],");").else(i,".disable(",M[f],");"),s,".",f,"=",r,";"):h(i,".",S[f],"(",r,");",s,".",f,"=",r,";")}})),0===Object.keys(n.state).length&&c(s,".dirty=false;"),t(c)}function Z(e,t,n,r){var i,a=e.shared,o=e.current,s=a.current,l=a.gl;ro(Object.keys(n)).forEach((function(a){var c=n[a];if(!r||r(c)){var u=c.append(e,t);if(M[a]){var f=M[a];ao(c)?(i=e.link(u,{stable:!0}),t(e.cond(i).then(l,".enable(",f,");").else(l,".disable(",f,");")),t(s,".",a,"=",i,";")):(t(e.cond(u).then(l,".enable(",f,");").else(l,".disable(",f,");")),t(s,".",a,"=",u,";"))}else if(ct(u)){var d=o[a];t(l,".",S[a],"(",u,");",u.map((function(e,t){return d+"["+t+"]="+e})).join(";"),";")}else ao(c)?(i=e.link(u,{stable:!0}),t(l,".",S[a],"(",i,");",s,".",a,"=",i,";")):t(l,".",S[a],"(",u,");",s,".",a,"=",u,";")}}))}function J(e,t){x&&(e.instancing=t.def(e.shared.extensions,".angle_instanced_arrays"))}function Q(e,t,n,r,i){var a,o,s,l=e.shared,c=e.stats,u=l.current,f=l.timer,d=n.profile;function h(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function p(e){e(a=t.def(),"=",h(),";"),"string"==typeof i?e(c,".count+=",i,";"):e(c,".count++;"),m&&(r?e(o=t.def(),"=",f,".getNumPendingQueries();"):e(f,".beginQuery(",c,");"))}function g(e){e(c,".cpuTime+=",h(),"-",a,";"),m&&(r?e(f,".pushScopeStats(",o,",",f,".getNumPendingQueries(),",c,");"):e(f,".endQuery();"))}function v(e){var n=t.def(u,".profile");t(u,".profile=",e,";"),t.exit(u,".profile=",n,";")}if(d){if(ao(d))return void(d.enable?(p(t),g(t.exit),v("true")):v("false"));v(s=d.append(e,t))}else s=t.def(u,".profile");var y=e.block();p(y),t("if(",s,"){",y,"}");var b=e.block();g(b),t.exit("if(",s,"){",b,"}")}function ee(e,t,n,r,i){var a=e.shared;function o(e){switch(e){case _a:case Ea:case Ca:return 2;case wa:case Ta:case Oa:return 3;case Aa:case Ma:case Ra:return 4;default:return 1}}function s(n,r,i){var o=a.gl,s=t.def(n,".location"),l=t.def(a.attributes,"[",s,"]"),c=i.state,u=i.buffer,f=[i.x,i.y,i.z,i.w],d=["buffer","normalized","offset","stride"];function h(){t("if(!",l,".buffer){",o,".enableVertexAttribArray(",s,");}");var n,a=i.type;if(n=i.size?t.def(i.size,"||",r):r,t("if(",l,".type!==",a,"||",l,".size!==",n,"||",d.map((function(e){return l+"."+e+"!=="+i[e]})).join("||"),"){",o,".bindBuffer(",ca,",",u,".buffer);",o,".vertexAttribPointer(",[s,n,a,i.normalized,i.stride,i.offset],");",l,".type=",a,";",l,".size=",n,";",d.map((function(e){return l+"."+e+"="+i[e]+";"})).join(""),"}"),x){var c=i.divisor;t("if(",l,".divisor!==",c,"){",e.instancing,".vertexAttribDivisorANGLE(",[s,c],");",l,".divisor=",c,";}")}}function p(){t("if(",l,".buffer){",o,".disableVertexAttribArray(",s,");",l,".buffer=null;","}if(",ai.map((function(e,t){return l+"."+e+"!=="+f[t]})).join("||"),"){",o,".vertexAttrib4f(",s,",",f,");",ai.map((function(e,t){return l+"."+e+"="+f[t]+";"})).join(""),"}")}c===si?h():c===li?p():(t("if(",c,"===",si,"){"),h(),t("}else{"),p(),t("}"))}r.forEach((function(r){var a,l=r.name,c=n.attributes[l];if(c){if(!i(c))return;a=c.append(e,t)}else{if(!i(lo))return;var u=e.scopeAttrib(l);a={},Object.keys(new y).forEach((function(e){a[e]=t.def(u,".",e)}))}s(e.link(r),o(r.info.type),a)}))}function te(e,t,r,i,a,o){for(var s,l=e.shared,c=l.gl,u=0;u<i.length;++u){var f,d=i[u],h=d.name,p=d.info.type,m=r.uniforms[h],g=e.link(d)+".location";if(m){if(!a(m))continue;if(ao(m)){var v=m.value;if(p===Pa||p===Ia){var y=e.link(v._texture||v.color[0]._texture);t(c,".uniform1i(",g,",",y+".bind());"),t.exit(y,".unbind();")}else if(p===Na||p===La||p===Da){var b=e.global.def("new Float32Array(["+Array.prototype.slice.call(v)+"])"),x=2;p===La?x=3:p===Da&&(x=4),t(c,".uniformMatrix",x,"fv(",g,",false,",b,");")}else{switch(p){case xa:s="1f";break;case _a:s="2f";break;case wa:s="3f";break;case Aa:s="4f";break;case Sa:case ka:s="1i";break;case Ca:case Ea:s="2i";break;case Oa:case Ta:s="3i";break;case Ra:case Ma:s="4i"}t(c,".uniform",s,"(",g,",",ct(v)?Array.prototype.slice.call(v):v,");")}continue}f=m.append(e,t)}else{if(!a(lo))continue;f=t.def(l.uniforms,"[",n.id(h),"]")}p===Pa?t("if(",f,"&&",f,'._reglType==="framebuffer"){',f,"=",f,".color[0];","}"):p===Ia&&t("if(",f,"&&",f,'._reglType==="framebufferCube"){',f,"=",f,".color[0];","}");var _=1;switch(p){case Pa:case Ia:var w=t.def(f,"._texture");t(c,".uniform1i(",g,",",w,".bind());"),t.exit(w,".unbind();");continue;case ka:case Sa:s="1i";break;case Ea:case Ca:s="2i",_=2;break;case Ta:case Oa:s="3i",_=3;break;case Ma:case Ra:s="4i",_=4;break;case xa:s="1f";break;case _a:s="2f",_=2;break;case wa:s="3f",_=3;break;case Aa:s="4f",_=4;break;case Na:s="Matrix2fv";break;case La:s="Matrix3fv";break;case Da:s="Matrix4fv"}if("M"===s.charAt(0)){t(c,".uniform",s,"(",g,",");var A=Math.pow(p-Na+2,2),E=e.global.def("new Float32Array(",A,")");Array.isArray(f)?t("false,(",k(A,(function(e){return E+"["+e+"]="+f[e]})),",",E,")"):t("false,(Array.isArray(",f,")||",f," instanceof Float32Array)?",f,":(",k(A,(function(e){return E+"["+e+"]="+f+"["+e+"]"})),",",E,")"),t(");")}else if(_>1){for(var T=[],M=[],S=0;S<_;++S)Array.isArray(f)?M.push(f[S]):M.push(t.def(f+"["+S+"]")),o&&T.push(t.def());o&&t("if(!",e.batchId,"||",T.map((function(e,t){return e+"!=="+M[t]})).join("||"),"){",T.map((function(e,t){return e+"="+M[t]+";"})).join("")),t(c,".uniform",s,"(",g,",",M.join(","),");"),o&&t("}")}else{if(o){var C=t.def();t("if(!",e.batchId,"||",C,"!==",f,"){",C,"=",f,";")}t(c,".uniform",s,"(",g,",",f,");"),o&&t("}")}}}function ne(e,t,n,r){var i=e.shared,a=i.gl,o=i.draw,s=r.draw;function l(){var l,c=s.elements,u=t;return c?((c.contextDep&&r.contextDynamic||c.propDep)&&(u=n),l=c.append(e,u),s.elementsActive&&u("if("+l+")"+a+".bindBuffer("+ua+","+l+".buffer.buffer);")):(l=u.def(),u(l,"=",o,".",Gi,";","if(",l,"){",a,".bindBuffer(",ua,",",l,".buffer.buffer);}","else if(",i.vao,".currentVAO){",l,"=",e.shared.elements+".getElements("+i.vao,".currentVAO.elements);",w?"":"if("+l+")"+a+".bindBuffer("+ua+","+l+".buffer.buffer);","}")),l}function c(){var i,a=s.count,l=t;return a?((a.contextDep&&r.contextDynamic||a.propDep)&&(l=n),i=a.append(e,l)):i=l.def(o,".",Xi),i}var u=l();function f(i){var a=s[i];return a?a.contextDep&&r.contextDynamic||a.propDep?a.append(e,n):a.append(e,t):t.def(o,".",i)}var d,h,p=f(Yi),m=f(Ki),g=c();if("number"==typeof g){if(0===g)return}else n("if(",g,"){"),n.exit("}");x&&(d=f(Zi),h=e.instancing);var v=u+".type",y=s.elements&&ao(s.elements)&&!s.vaoActive;function b(){function e(){n(h,".drawElementsInstancedANGLE(",[p,g,v,m+"<<(("+v+"-"+oi+")>>1)",d],");")}function t(){n(h,".drawArraysInstancedANGLE(",[p,m,g,d],");")}u&&"null"!==u?y?e():(n("if(",u,"){"),e(),n("}else{"),t(),n("}")):t()}function _(){function e(){n(a+".drawElements("+[p,g,v,m+"<<(("+v+"-"+oi+")>>1)"]+");")}function t(){n(a+".drawArrays("+[p,m,g]+");")}u&&"null"!==u?y?e():(n("if(",u,"){"),e(),n("}else{"),t(),n("}")):t()}x&&("number"!=typeof d||d>=0)?"string"==typeof d?(n("if(",d,">0){"),b(),n("}else if(",d,"<0){"),_(),n("}")):b():_()}function re(e,t,n,r,i){var a=I(),o=a.proc("body",i);return x&&(a.instancing=o.def(a.shared.extensions,".angle_instanced_arrays")),e(a,o,n,r),a.compile().body}function ie(e,t,n,r){J(e,t),n.useVAO?n.drawVAO?t(e.shared.vao,".setVAO(",n.drawVAO.append(e,t),");"):t(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(t(e.shared.vao,".setVAO(null);"),ee(e,t,n,r.attributes,(function(){return!0}))),te(e,t,n,r.uniforms,(function(){return!0}),!1),ne(e,t,t,n)}function ae(e,t){var n=e.proc("draw",1);J(e,n),Y(e,n,t.context),X(e,n,t.framebuffer),K(e,n,t),Z(e,n,t.state),Q(e,n,t,!1,!0);var r=t.shader.progVar.append(e,n);if(n(e.shared.gl,".useProgram(",r,".program);"),t.shader.program)ie(e,n,t,t.shader.program);else{n(e.shared.vao,".setVAO(null);");var i=e.global.def("{}"),a=n.def(r,".id"),o=n.def(i,"[",a,"]");n(e.cond(o).then(o,".call(this,a0);").else(o,"=",i,"[",a,"]=",e.link((function(n){return re(ie,e,t,n,1)})),"(",r,");",o,".call(this,a0);"))}Object.keys(t.state).length>0&&n(e.shared.current,".dirty=true;"),e.shared.vao&&n(e.shared.vao,".setVAO(null);")}function oe(e,t,n,r){function i(){return!0}e.batchId="a1",J(e,t),ee(e,t,n,r.attributes,i),te(e,t,n,r.uniforms,i,!1),ne(e,t,t,n)}function se(e,t,n,r){J(e,t);var i=n.contextDep,a=t.def(),o="a0",s="a1",l=t.def();e.shared.props=l,e.batchId=a;var c=e.scope(),u=e.scope();function f(e){return e.contextDep&&i||e.propDep}function d(e){return!f(e)}if(t(c.entry,"for(",a,"=0;",a,"<",s,";++",a,"){",l,"=",o,"[",a,"];",u,"}",c.exit),n.needsContext&&Y(e,u,n.context),n.needsFramebuffer&&X(e,u,n.framebuffer),Z(e,u,n.state,f),n.profile&&f(n.profile)&&Q(e,u,n,!1,!0),r)n.useVAO?n.drawVAO?f(n.drawVAO)?u(e.shared.vao,".setVAO(",n.drawVAO.append(e,u),");"):c(e.shared.vao,".setVAO(",n.drawVAO.append(e,c),");"):c(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(c(e.shared.vao,".setVAO(null);"),ee(e,c,n,r.attributes,d),ee(e,u,n,r.attributes,f)),te(e,c,n,r.uniforms,d,!1),te(e,u,n,r.uniforms,f,!0),ne(e,c,u,n);else{var h=e.global.def("{}"),p=n.shader.progVar.append(e,u),m=u.def(p,".id"),g=u.def(h,"[",m,"]");u(e.shared.gl,".useProgram(",p,".program);","if(!",g,"){",g,"=",h,"[",m,"]=",e.link((function(t){return re(oe,e,n,t,2)})),"(",p,");}",g,".call(this,a0[",a,"],",a,");")}}function le(e,t){var n=e.proc("batch",2);e.batchId="0",J(e,n);var r=!1,i=!0;Object.keys(t.context).forEach((function(e){r=r||t.context[e].propDep})),r||(Y(e,n,t.context),i=!1);var a=t.framebuffer,o=!1;function s(e){return e.contextDep&&r||e.propDep}a?(a.propDep?r=o=!0:a.contextDep&&r&&(o=!0),o||X(e,n,a)):X(e,n,null),t.state.viewport&&t.state.viewport.propDep&&(r=!0),K(e,n,t),Z(e,n,t.state,(function(e){return!s(e)})),t.profile&&s(t.profile)||Q(e,n,t,!1,"a1"),t.contextDep=r,t.needsContext=i,t.needsFramebuffer=o;var l=t.shader.progVar;if(l.contextDep&&r||l.propDep)se(e,n,t,null);else{var c=l.append(e,n);if(n(e.shared.gl,".useProgram(",c,".program);"),t.shader.program)se(e,n,t,t.shader.program);else{n(e.shared.vao,".setVAO(null);");var u=e.global.def("{}"),f=n.def(c,".id"),d=n.def(u,"[",f,"]");n(e.cond(d).then(d,".call(this,a0,a1);").else(d,"=",u,"[",f,"]=",e.link((function(n){return re(se,e,t,n,2)})),"(",c,");",d,".call(this,a0,a1);"))}}Object.keys(t.state).length>0&&n(e.shared.current,".dirty=true;"),e.shared.vao&&n(e.shared.vao,".setVAO(null);")}function ce(e,t){var r=e.proc("scope",3);e.batchId="a2";var i=e.shared,a=i.current;if(Y(e,r,t.context),t.framebuffer&&t.framebuffer.append(e,r),ro(Object.keys(t.state)).forEach((function(n){var a=t.state[n],o=a.append(e,r);ct(o)?o.forEach((function(t,i){N(t)?r.set(e.next[n],"["+i+"]",t):r.set(e.next[n],"["+i+"]",e.link(t,{stable:!0}))})):ao(a)?r.set(i.next,"."+n,e.link(o,{stable:!0})):r.set(i.next,"."+n,o)})),Q(e,r,t,!0,!0),[Gi,Ki,Xi,Zi,Yi].forEach((function(n){var a=t.draw[n];if(a){var o=a.append(e,r);N(o)?r.set(i.draw,"."+n,o):r.set(i.draw,"."+n,e.link(o),{stable:!0})}})),Object.keys(t.uniforms).forEach((function(a){var o=t.uniforms[a].append(e,r);Array.isArray(o)&&(o="["+o.map((function(t){return N(t)?t:e.link(t,{stable:!0})}))+"]"),r.set(i.uniforms,"["+e.link(n.id(a),{stable:!0})+"]",o)})),Object.keys(t.attributes).forEach((function(n){var i=t.attributes[n].append(e,r),a=e.scopeAttrib(n);Object.keys(new y).forEach((function(e){r.set(a,"."+e,i[e])}))})),t.scopeVAO){var o=t.scopeVAO.append(e,r);N(o)?r.set(i.vao,".targetVAO",o):r.set(i.vao,".targetVAO",e.link(o,{stable:!0}))}function s(n){var a=t.shader[n];if(a){var o=a.append(e,r);N(o)?r.set(i.shader,"."+n,o):r.set(i.shader,"."+n,e.link(o,{stable:!0}))}}s(Vi),s(Wi),Object.keys(t.state).length>0&&(r(a,".dirty=true;"),r.exit(a,".dirty=true;")),r("a1(",e.shared.context,",a0,",e.batchId,");")}function ue(e){if("object"==typeof e&&!ct(e)){for(var t=Object.keys(e),n=0;n<t.length;++n)if(d.isDynamic(e[t[n]]))return!0;return!1}}function fe(e,t,n){var r=t.static[n];if(r&&ue(r)){var i=e.global,a=Object.keys(r),o=!1,s=!1,l=!1,c=e.global.def("{}");a.forEach((function(t){var n=r[t];if(d.isDynamic(n)){"function"==typeof n&&(n=r[t]=d.unbox(n));var a=so(n,null);o=o||a.thisDep,l=l||a.propDep,s=s||a.contextDep}else{switch(i(c,".",t,"="),typeof n){case"number":i(n);break;case"string":i('"',n,'"');break;case"object":Array.isArray(n)&&i("[",n.join(),"]");break;default:i(e.link(n))}i(";")}})),t.dynamic[n]=new d.DynamicVariable(hi,{thisDep:o,contextDep:s,propDep:l,ref:c,append:u}),delete t.static[n]}function u(e,t){a.forEach((function(n){var i=r[n];if(d.isDynamic(i)){var a=e.invoke(t,i);t(c,".",n,"=",a,";")}}))}}function de(t,n,r,i,a){var o=I();o.stats=o.link(a),Object.keys(n.static).forEach((function(e){fe(o,n,e)})),la.forEach((function(e){fe(o,t,e)}));var s=G(t,n,r,i,o);return s.shader.program&&(s.shader.program.attributes.sort((function(e,t){return e.name<t.name?-1:1})),s.shader.program.uniforms.sort((function(e,t){return e.name<t.name?-1:1}))),ae(o,s),ce(o,s),le(o,s),e(o.compile(),{destroy:function(){s.shader.program.destroy()}})}return{next:E,current:A,procs:function(){var e=I(),t=e.proc("poll"),n=e.proc("refresh"),a=e.block();t(a),n(a);var o,s=e.shared,l=s.gl,c=s.next,u=s.current;a(u,".dirty=false;"),X(e,t),X(e,n,null,!0),x&&(o=e.link(x)),r.oes_vertex_array_object&&n(e.link(r.oes_vertex_array_object),".bindVertexArrayOES(null);");var f=n.def(s.attributes),d=n.def(0),h=e.cond(d,".buffer");h.then(l,".enableVertexAttribArray(i);",l,".bindBuffer(",ca,",",d,".buffer.buffer);",l,".vertexAttribPointer(i,",d,".size,",d,".type,",d,".normalized,",d,".stride,",d,".offset);").else(l,".disableVertexAttribArray(i);",l,".vertexAttrib4f(i,",d,".x,",d,".y,",d,".z,",d,".w);",d,".buffer=null;");var p=e.link(i.maxAttributes,{stable:!0});return n("for(var i=0;i<",p,";++i){",d,"=",f,"[i];",h,"}"),x&&n("for(var i=0;i<",p,";++i){",o,".vertexAttribDivisorANGLE(i,",f,"[i].divisor);","}"),n(e.shared.vao,".currentVAO=null;",e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"),Object.keys(M).forEach((function(r){var i=M[r],o=a.def(c,".",r),s=e.block();s("if(",o,"){",l,".enable(",i,")}else{",l,".disable(",i,")}",u,".",r,"=",o,";"),n(s),t("if(",o,"!==",u,".",r,"){",s,"}")})),Object.keys(S).forEach((function(r){var i,o,s=S[r],f=A[r],d=e.block();if(d(l,".",s,"("),ct(f)){var h=f.length;i=e.global.def(c,".",r),o=e.global.def(u,".",r),d(k(h,(function(e){return i+"["+e+"]"})),");",k(h,(function(e){return o+"["+e+"]="+i+"["+e+"];"})).join("")),t("if(",k(h,(function(e){return i+"["+e+"]!=="+o+"["+e+"]"})).join("||"),"){",d,"}")}else i=a.def(c,".",r),o=a.def(u,".",r),d(i,");",u,".",r,"=",i,";"),t("if(",i,"!==",o,"){",d,"}");n(d)})),e.compile()}(),compile:de}}function uo(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var fo=34918,ho=34919,po=35007,mo=function(e,t){if(!t.ext_disjoint_timer_query)return null;var n=[];function r(){return n.pop()||t.ext_disjoint_timer_query.createQueryEXT()}function i(e){n.push(e)}var a=[];function o(e){var n=r();t.ext_disjoint_timer_query.beginQueryEXT(po,n),a.push(n),h(a.length-1,a.length,e)}function s(){t.ext_disjoint_timer_query.endQueryEXT(po)}function l(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var c=[];function u(){return c.pop()||new l}function f(e){c.push(e)}var d=[];function h(e,t,n){var r=u();r.startQueryIndex=e,r.endQueryIndex=t,r.sum=0,r.stats=n,d.push(r)}var p=[],m=[];function g(){var e,n,r=a.length;if(0!==r){m.length=Math.max(m.length,r+1),p.length=Math.max(p.length,r+1),p[0]=0,m[0]=0;var o=0;for(e=0,n=0;n<a.length;++n){var s=a[n];t.ext_disjoint_timer_query.getQueryObjectEXT(s,ho)?(o+=t.ext_disjoint_timer_query.getQueryObjectEXT(s,fo),i(s)):a[e++]=s,p[n+1]=o,m[n+1]=e}for(a.length=e,e=0,n=0;n<d.length;++n){var l=d[n],c=l.startQueryIndex,u=l.endQueryIndex;l.sum+=p[u]-p[c];var h=m[c],g=m[u];g===h?(l.stats.gpuTime+=l.sum/1e6,f(l)):(l.startQueryIndex=h,l.endQueryIndex=g,d[e++]=l)}d.length=e}}return{beginQuery:o,endQuery:s,pushScopeStats:h,update:g,getNumPendingQueries:function(){return a.length},clear:function(){n.push.apply(n,a);for(var e=0;e<n.length;e++)t.ext_disjoint_timer_query.deleteQueryEXT(n[e]);a.length=0,n.length=0},restore:function(){a.length=0,n.length=0}}},go=16384,vo=256,yo=1024,bo=34962,xo="webglcontextlost",_o="webglcontextrestored",wo=1,Ao=2,ko=3;function Eo(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}function To(t){var n=w(t);if(!n)return null;var r=n.gl,i=r.getContextAttributes(),a=(r.isContextLost(),A(r,n));if(!a)return null;var o=m(),s=uo(),l=n.cachedCode||{},c=a.extensions,u=mo(r,c),f=p(),g=r.drawingBufferWidth,v=r.drawingBufferHeight,y={tick:0,time:0,viewportWidth:g,viewportHeight:v,framebufferWidth:g,framebufferHeight:v,drawingBufferWidth:g,drawingBufferHeight:v,pixelRatio:n.pixelRatio},b={},x={elements:null,primitive:4,count:-1,offset:0,instances:-1},_=xe(r,c),k=He(r,s,n,M),E=it(r,c,k,s),T=Mr(r,c,_,s,k,E,x);function M(e){return T.destroyBuffer(e)}var S=Nr(r,o,s,n),C=Gn(r,c,_,(function(){N.procs.poll()}),y,s,n),O=sr(r,c,_,s,n),R=wr(r,c,_,C,O,s),N=co(r,o,c,_,k,E,C,R,b,T,S,x,y,u,l,n),L=Fr(r,R,N.procs.poll,y,i,c,_),D=N.next,P=r.canvas,I=[],F=[],z=[],j=[n.onDestroy],B=null;function U(){if(0===I.length)return u&&u.update(),void(B=null);B=h.next(U),Q();for(var e=I.length-1;e>=0;--e){var t=I[e];t&&t(y,null,0)}r.flush(),u&&u.update()}function $(){!B&&I.length>0&&(B=h.next(U))}function q(){B&&(h.cancel(U),B=null)}function H(e){e.preventDefault(),q(),F.forEach((function(e){e()}))}function V(e){r.getError(),a.restore(),S.restore(),k.restore(),C.restore(),O.restore(),R.restore(),T.restore(),u&&u.restore(),N.procs.refresh(),$(),z.forEach((function(e){e()}))}function W(){I.length=0,q(),P&&(P.removeEventListener(xo,H),P.removeEventListener(_o,V)),S.clear(),R.clear(),O.clear(),T.clear(),C.clear(),E.clear(),k.clear(),u&&u.clear(),j.forEach((function(e){e()}))}function G(t){function n(t){var n=e({},t);function r(e){if(e in n){var t=n[e];delete n[e],Object.keys(t).forEach((function(r){n[e+"."+r]=t[r]}))}}return delete n.uniforms,delete n.attributes,delete n.context,delete n.vao,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),r("blend"),r("depth"),r("cull"),r("stencil"),r("polygonOffset"),r("scissor"),r("sample"),"vao"in t&&(n.vao=t.vao),n}function r(e,t){var n={},r={};return Object.keys(e).forEach((function(i){var a=e[i];if(d.isDynamic(a))r[i]=d.unbox(a,i);else{if(t&&Array.isArray(a))for(var o=0;o<a.length;++o)if(d.isDynamic(a[o]))return void(r[i]=d.unbox(a,i));n[i]=a}})),{dynamic:r,static:n}}var i=r(t.context||{},!0),a=r(t.uniforms||{},!0),o=r(t.attributes||{},!1),s=r(n(t),!1),l={gpuTime:0,cpuTime:0,count:0},c=N.compile(s,o,a,i,l),u=c.draw,f=c.batch,h=c.scope,p=[];function m(e){for(;p.length<e;)p.push(null);return p}function g(e,t){var n;if("function"==typeof e)return h.call(this,null,e,0);if("function"==typeof t)if("number"==typeof e)for(n=0;n<e;++n)h.call(this,null,t,n);else{if(!Array.isArray(e))return h.call(this,e,t,0);for(n=0;n<e.length;++n)h.call(this,e[n],t,n)}else if("number"==typeof e){if(e>0)return f.call(this,m(0|e),0|e)}else{if(!Array.isArray(e))return u.call(this,e);if(e.length)return f.call(this,e,e.length)}}return e(g,{stats:l,destroy:function(){c.destroy()}})}P&&(P.addEventListener(xo,H,!1),P.addEventListener(_o,V,!1));var Y=R.setFBO=G({framebuffer:d.define.call(null,wo,"framebuffer")});function X(e,t){var n=0;N.procs.poll();var i=t.color;i&&(r.clearColor(+i[0]||0,+i[1]||0,+i[2]||0,+i[3]||0),n|=go),"depth"in t&&(r.clearDepth(+t.depth),n|=vo),"stencil"in t&&(r.clearStencil(0|t.stencil),n|=yo),r.clear(n)}function K(t){if("framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var n=0;n<6;++n)Y(e({framebuffer:t.framebuffer.faces[n]},t),X);else Y(t,X);else X(null,t)}function Z(e){function t(){var t=Eo(I,e);function n(){var e=Eo(I,n);I[e]=I[I.length-1],I.length-=1,I.length<=0&&q()}I[t]=n}return I.push(e),$(),{cancel:t}}function J(){var e=D.viewport,t=D.scissor_box;e[0]=e[1]=t[0]=t[1]=0,y.viewportWidth=y.framebufferWidth=y.drawingBufferWidth=e[2]=t[2]=r.drawingBufferWidth,y.viewportHeight=y.framebufferHeight=y.drawingBufferHeight=e[3]=t[3]=r.drawingBufferHeight}function Q(){y.tick+=1,y.time=te(),J(),N.procs.poll()}function ee(){C.refresh(),J(),N.procs.refresh(),u&&u.update()}function te(){return(p()-f)/1e3}function ne(e,t){var n;switch(e){case"frame":return Z(t);case"lost":n=F;break;case"restore":n=z;break;case"destroy":n=j}return n.push(t),{cancel:function(){for(var e=0;e<n.length;++e)if(n[e]===t)return n[e]=n[n.length-1],void n.pop()}}}function re(){return l}function ie(e){Object.entries(e).forEach((function(e){l[e[0]]=e[1]}))}ee();var ae=e(G,{clear:K,prop:d.define.bind(null,wo),context:d.define.bind(null,Ao),this:d.define.bind(null,ko),draw:G({}),buffer:function(e){return k.create(e,bo,!1,!1)},elements:function(e){return E.create(e,!1)},texture:C.create2D,cube:C.createCube,renderbuffer:O.create,framebuffer:R.create,framebufferCube:R.createCube,vao:T.createVAO,attributes:i,frame:Z,on:ne,limits:_,hasExtension:function(e){return _.extensions.indexOf(e.toLowerCase())>=0},read:L,destroy:W,_gl:r,_refresh:ee,poll:function(){Q(),u&&u.update()},now:te,stats:s,getCachedCode:re,preloadCachedCode:ie});return n.onDone(null,ae),ae}return To}()},42935:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>k});var r=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),i="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,a=void 0!==n.g&&n.g.Math===Math?n.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),o="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(a):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var s=["top","right","bottom","left","width","height","size","weight"],l="undefined"!=typeof MutationObserver,c=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,i=0;function a(){n&&(n=!1,e()),r&&l()}function s(){o(a)}function l(){var e=Date.now();if(n){if(e-i<2)return;r=!0}else n=!0,r=!1,setTimeout(s,t);i=e}return l}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){i&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),l?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){i&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;s.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),u=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},f=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||a},d=y(0,0,0,0);function h(e){return parseFloat(e)||0}function p(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+h(e["border-"+n+"-width"])}),0)}function m(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return d;var r=f(e).getComputedStyle(e),i=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],a=e["padding-"+i];t[i]=h(a)}return t}(r),a=i.left+i.right,o=i.top+i.bottom,s=h(r.width),l=h(r.height);if("border-box"===r.boxSizing&&(Math.round(s+a)!==t&&(s-=p(r,"left","right")+a),Math.round(l+o)!==n&&(l-=p(r,"top","bottom")+o)),!function(e){return e===f(e).document.documentElement}(e)){var c=Math.round(s+a)-t,u=Math.round(l+o)-n;1!==Math.abs(c)&&(s-=c),1!==Math.abs(u)&&(l-=u)}return y(i.left,i.top,s,l)}var g="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof f(e).SVGGraphicsElement}:function(e){return e instanceof f(e).SVGElement&&"function"==typeof e.getBBox};function v(e){return i?g(e)?function(e){var t=e.getBBox();return y(0,0,t.width,t.height)}(e):m(e):d}function y(e,t,n,r){return{x:e,y:t,width:n,height:r}}var b=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=y(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=v(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),x=function(e,t){var n=function(e){var t=e.x,n=e.y,r=e.width,i=e.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,o=Object.create(a.prototype);return u(o,{x:t,y:n,width:r,height:i,top:n,right:t+r,bottom:i+n,left:t}),o}(t);u(this,{target:e,contentRect:n})},_=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new r,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof f(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new b(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof f(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new x(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),w="undefined"!=typeof WeakMap?new WeakMap:new r,A=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=c.getInstance(),r=new _(t,n,this);w.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){A.prototype[e]=function(){var t;return(t=w.get(this))[e].apply(t,arguments)}}));const k=void 0!==a.ResizeObserver?a.ResizeObserver:A},92343:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>a(l,n))c<i&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<i&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],f=1,d=null,h=3,p=!1,m=!1,g=!1,v="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,L(w);else{var t=r(u);null!==t&&D(_,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,y(T),T=-1),p=!0;var a=h;try{for(x(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!C());){var o=d.callback;if("function"==typeof o){d.callback=null,h=d.priorityLevel;var s=o(d.expirationTime<=n);n=t.unstable_now(),"function"==typeof s?d.callback=s:d===r(c)&&i(c),x(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var f=r(u);null!==f&&D(_,f.startTime-n),l=!1}return l}finally{d=null,h=a,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var A,k=!1,E=null,T=-1,M=5,S=-1;function C(){return!(t.unstable_now()-S<M)}function O(){if(null!==E){var e=t.unstable_now();S=e;var n=!0;try{n=E(!0,e)}finally{n?A():(k=!1,E=null)}}else k=!1}if("function"==typeof b)A=function(){b(O)};else if("undefined"!=typeof MessageChannel){var R=new MessageChannel,N=R.port2;R.port1.onmessage=O,A=function(){N.postMessage(null)}}else A=function(){v(O,0)};function L(e){E=e,k||(k=!0,A())}function D(e,n){T=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,L(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"==typeof a&&null!==a?a="number"==typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(g?(y(T),T=-1):g=!0,D(_,a-o))):(e.sortIndex=s,n(c,e),m||p||(m=!0,L(w))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},53966:(e,t,n)=>{"use strict";e.exports=n(92343)},34657:e=>{e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),l=0;l<a.length;l++){var c=a[l];if(!s(c))return!1;var u=e[c],f=t[c];if(!1===(i=n?n.call(r,u,f,c):void 0)||void 0===i&&u!==f)return!1}return!0}},20869:(e,t,n)=>{"use strict";var r=n(599);e.exports=function(e,t,n){if(null==e)throw Error("First argument should be a string");if(null==t)throw Error("Separator should be a string or a RegExp");n?("string"==typeof n||Array.isArray(n))&&(n={ignore:n}):n={},null==n.escape&&(n.escape=!0),null==n.ignore?n.ignore=["[]","()","{}","<>",'""',"''","``","",""]:("string"==typeof n.ignore&&(n.ignore=[n.ignore]),n.ignore=n.ignore.map((function(e){return 1===e.length&&(e+=e),e})));var i=r.parse(e,{flat:!0,brackets:n.ignore}),a=i[0].split(t);if(n.escape){for(var o=[],s=0;s<a.length;s++){var l=a[s],c=a[s+1];"\\"===l[l.length-1]&&"\\"!==l[l.length-2]?(o.push(l+t+c),s++):o.push(l)}a=o}for(s=0;s<a.length;s++)i[0]=a[s],a[s]=r.stringify(i,{flat:!0});return a}},29777:e=>{"use strict";e.exports=function(e){for(var t=e.length,n=new Array(t),r=new Array(t),i=new Array(t),a=new Array(t),o=new Array(t),s=new Array(t),l=0;l<t;++l)n[l]=-1,r[l]=0,i[l]=!1,a[l]=0,o[l]=-1,s[l]=[];var c,u=0,f=[],d=[];function h(t){var l=[t],c=[t];for(n[t]=r[t]=u,i[t]=!0,u+=1;c.length>0;){t=c[c.length-1];var h=e[t];if(a[t]<h.length){for(var p=a[t];p<h.length;++p){var m=h[p];if(n[m]<0){n[m]=r[m]=u,i[m]=!0,u+=1,l.push(m),c.push(m);break}i[m]&&(r[t]=0|Math.min(r[t],r[m])),o[m]>=0&&s[t].push(o[m])}a[t]=p}else{if(r[t]===n[t]){var g=[],v=[],y=0;for(p=l.length-1;p>=0;--p){var b=l[p];if(i[b]=!1,g.push(b),v.push(s[b]),y+=s[b].length,o[b]=f.length,b===t){l.length=p;break}}f.push(g);var x=new Array(y);for(p=0;p<v.length;p++)for(var _=0;_<v[p].length;_++)x[--y]=v[p][_];d.push(x)}c.pop()}}}for(l=0;l<t;++l)n[l]<0&&h(l);for(l=0;l<d.length;l++){var p=d[l];if(0!==p.length){p.sort((function(e,t){return e-t})),c=[p[0]];for(var m=1;m<p.length;m++)p[m]!==p[m-1]&&c.push(p[m]);d[l]=c}}return{components:f,adjacencyList:d}}},5901:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=2*Math.PI,a=function(e,t,n,r,i,a,o){var s=e.x,l=e.y;return{x:r*(s*=t)-i*(l*=n)+a,y:i*s+r*l+o}},o=function(e,t){var n=1.5707963267948966===t?.551915024494:-1.5707963267948966===t?-.551915024494:4/3*Math.tan(t/4),r=Math.cos(e),i=Math.sin(e),a=Math.cos(e+t),o=Math.sin(e+t);return[{x:r-i*n,y:i+r*n},{x:a+o*n,y:o-a*n},{x:a,y:o}]},s=function(e,t,n,r){var i=e*n+t*r;return i>1&&(i=1),i<-1&&(i=-1),(e*r-t*n<0?-1:1)*Math.acos(i)};const l=function(e){var t=e.px,n=e.py,l=e.cx,c=e.cy,u=e.rx,f=e.ry,d=e.xAxisRotation,h=void 0===d?0:d,p=e.largeArcFlag,m=void 0===p?0:p,g=e.sweepFlag,v=void 0===g?0:g,y=[];if(0===u||0===f)return[];var b=Math.sin(h*i/360),x=Math.cos(h*i/360),_=x*(t-l)/2+b*(n-c)/2,w=-b*(t-l)/2+x*(n-c)/2;if(0===_&&0===w)return[];u=Math.abs(u),f=Math.abs(f);var A=Math.pow(_,2)/Math.pow(u,2)+Math.pow(w,2)/Math.pow(f,2);A>1&&(u*=Math.sqrt(A),f*=Math.sqrt(A));var k=function(e,t,n,r,a,o,l,c,u,f,d,h){var p=Math.pow(a,2),m=Math.pow(o,2),g=Math.pow(d,2),v=Math.pow(h,2),y=p*m-p*v-m*g;y<0&&(y=0),y/=p*v+m*g;var b=(y=Math.sqrt(y)*(l===c?-1:1))*a/o*h,x=y*-o/a*d,_=f*b-u*x+(e+n)/2,w=u*b+f*x+(t+r)/2,A=(d-b)/a,k=(h-x)/o,E=(-d-b)/a,T=(-h-x)/o,M=s(1,0,A,k),S=s(A,k,E,T);return 0===c&&S>0&&(S-=i),1===c&&S<0&&(S+=i),[_,w,M,S]}(t,n,l,c,u,f,m,v,b,x,_,w),E=r(k,4),T=E[0],M=E[1],S=E[2],C=E[3],O=Math.abs(C)/(i/4);Math.abs(1-O)<1e-7&&(O=1);var R=Math.max(Math.ceil(O),1);C/=R;for(var N=0;N<R;N++)y.push(o(S,C)),S+=C;return y.map((function(e){var t=a(e[0],u,f,x,b,T,M),n=t.x,r=t.y,i=a(e[1],u,f,x,b,T,M),o=i.x,s=i.y,l=a(e[2],u,f,x,b,T,M);return{x1:n,y1:r,x2:o,y2:s,x:l.x,y:l.y}}))}},80351:(e,t,n)=>{"use strict";var r=n(99061),i=n(480),a=n(87269),o=n(40702);e.exports=function(e){Array.isArray(e)&&1===e.length&&"string"==typeof e[0]&&(e=e[0]);if("string"==typeof e){if(!o(e))throw Error("String is not an SVG path.");e=r(e)}if(!Array.isArray(e))throw Error("Argument should be a string or an array of path segments.");if(e=i(e),!(e=a(e)).length)return[0,0,0,0];for(var t=[1/0,1/0,-1/0,-1/0],n=0,s=e.length;n<s;n++)for(var l=e[n].slice(1),c=0;c<l.length;c+=2)l[c+0]<t[0]&&(t[0]=l[c+0]),l[c+1]<t[1]&&(t[1]=l[c+1]),l[c+0]>t[2]&&(t[2]=l[c+0]),l[c+1]>t[3]&&(t[3]=l[c+1]);return t}},66313:(e,t,n)=>{"use strict";var r,i=n(80351),a=n(99061),o=n(70096),s=n(40702),l=n(97800),c=document.createElement("canvas"),u=c.getContext("2d");e.exports=function(e,t){if(!s(e))throw Error("Argument should be valid svg path string");t||(t={});var n,f;t.shape?(n=t.shape[0],f=t.shape[1]):(n=c.width=t.w||t.width||200,f=c.height=t.h||t.height||200);var d=Math.min(n,f),h=t.stroke||0,p=t.viewbox||t.viewBox||i(e),m=[n/(p[2]-p[0]),f/(p[3]-p[1])],g=Math.min(m[0]||0,m[1]||0)/2;u.fillStyle="black",u.fillRect(0,0,n,f),u.fillStyle="white",h&&("number"!=typeof h&&(h=1),u.strokeStyle=h>0?"white":"black",u.lineWidth=Math.abs(h));if(u.translate(.5*n,.5*f),u.scale(g,g),function(){if(null!=r)return r;var e=document.createElement("canvas").getContext("2d");if(e.canvas.width=e.canvas.height=1,!window.Path2D)return r=!1;var t=new Path2D("M0,0h1v1h-1v-1Z");e.fillStyle="black",e.fill(t);var n=e.getImageData(0,0,1,1);return r=n&&n.data&&255===n.data[3]}()){var v=new Path2D(e);u.fill(v),h&&u.stroke(v)}else{var y=a(e);o(u,y),u.fill(),h&&u.stroke()}return u.setTransform(1,0,0,1,0,0),l(u,{cutoff:null!=t.cutoff?t.cutoff:.5,radius:null!=t.radius?t.radius:.5*d})}},68750:e=>{"use strict";e.exports=n,e.exports.float32=e.exports.float=n,e.exports.fract32=e.exports.fract=function(e,t){if(e.length){if(e instanceof Float32Array)return new Float32Array(e.length);t instanceof Float32Array||(t=n(e));for(var r=0,i=t.length;r<i;r++)t[r]=e[r]-t[r];return t}return n(e-n(e))};var t=new Float32Array(1);function n(e){return e.length?e instanceof Float32Array?e:new Float32Array(e):(t[0]=e,t[0])}},26547:(e,t,n)=>{"use strict";var r=n(7857);e.exports=s;var i=o("in",document.body);function a(e,t){var n=r(getComputedStyle(e).getPropertyValue(t));return n[0]*s(n[1],e)}function o(e,t){var n=document.createElement("div");n.style.height="128"+e,t.appendChild(n);var r=a(n,"height")/128;return t.removeChild(n),r}function s(e,t){if(!e)return null;switch(t=t||document.body,e=(e+""||"px").trim().toLowerCase(),t!==window&&t!==document||(t=document.body),e){case"%":return t.clientHeight/100;case"ch":case"ex":return o(e,t);case"em":return a(t,"font-size");case"rem":return a(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return i;case"cm":return i/2.54;case"mm":return i/25.4;case"pt":return i/72;case"pc":return i/6;case"px":return 1}var n=r(e);if(!isNaN(n[0])&&n[1]){var l=s(n[1],t);return"number"==typeof l?n[0]*l:null}return null}},60048:(e,t,n)=>{"use strict";var r=n(52210);e.exports=function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!r(e)}},19324:(e,t,n)=>{"use strict";var r=n(33750),i=n(94089);e.exports=function(e,t,n){n&&n.errorMessage&&(e=r(n.errorMessage));var a=e.indexOf("%v"),o=a>-1?i(t):null;if(n&&n.name){var s,l,c,u,f=e.indexOf("%n");if(f>-1)return a>-1?(f>a?(s=o,c=a,l=n.name,u=f):(s=n.name,c=f,l=o,u=a),e.slice(0,c)+s+e.slice(c+2,u)+l+e.slice(u+2)):e.slice(0,f)+n.name+e.slice(f+2)}return a>-1?e.slice(0,a)+o+e.slice(a+2):e}},67589:(e,t,n)=>{"use strict";var r=n(26463),i=n(19324);e.exports=function(e,t,n){if(n&&!r(e)){if("default"in n)return n.default;if(n.isOptional)return null}var a=new(n&&n.Error||TypeError)(i(t,e,n));throw n&&n.errorCode&&(a.code=n.errorCode),a}},90172:e=>{"use strict";e.exports=function(e){try{return e.toString()}catch(t){try{return String(e)}catch(e){return null}}}},94089:(e,t,n)=>{"use strict";var r=n(90172),i=/[\n\r\u2028\u2029]/g;e.exports=function(e){var t=r(e);return null===t?"<Non-coercible to string value>":(t.length>100&&(t=t.slice(0,99)+""),t=t.replace(i,(function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}})))}},97221:(e,t,n)=>{"use strict";var r=n(26463),i={object:!0,function:!0,undefined:!0};e.exports=function(e){return!!r(e)&&hasOwnProperty.call(i,typeof e)}},25499:(e,t,n)=>{"use strict";var r=n(67589),i=n(78537);e.exports=function(e){if(i(e))return e;var t=arguments[1],n=t&&t.name?"Expected a plain function for %n, received %v":"%v is not a plain function";return r(e,n,t)}},78537:(e,t,n)=>{"use strict";var r=n(60048),i=/^\s*class[\s{/}]/,a=Function.prototype.toString;e.exports=function(e){return!!r(e)&&!i.test(a.call(e))}},52210:(e,t,n)=>{"use strict";var r=n(97221);e.exports=function(e){if(!r(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}}},33750:(e,t,n)=>{"use strict";var r=n(26463),i=n(97221),a=Object.prototype.toString;e.exports=function(e){if(!r(e))return null;if(i(e)){var t=e.toString;if("function"!=typeof t)return null;if(t===a)return null}try{return""+e}catch(e){return null}}},42601:(e,t,n)=>{"use strict";var r=n(67589),i=n(26463);e.exports=function(e){if(i(e))return e;var t=arguments[1],n=t&&t.name?"Expected a value for %n, received %v":"Cannot use %v";return r(e,n,t)}},26463:e=>{"use strict";e.exports=function(e){return null!=e}},30307:(e,t,n)=>{"use strict";var r=n(66717),i=n(21775),a=n(87503).hp;n.g.__TYPEDARRAY_POOL||(n.g.__TYPEDARRAY_POOL={UINT8:i([32,0]),UINT16:i([32,0]),UINT32:i([32,0]),BIGUINT64:i([32,0]),INT8:i([32,0]),INT16:i([32,0]),INT32:i([32,0]),BIGINT64:i([32,0]),FLOAT:i([32,0]),DOUBLE:i([32,0]),DATA:i([32,0]),UINT8C:i([32,0]),BUFFER:i([32,0])});var o="undefined"!=typeof Uint8ClampedArray,s="undefined"!=typeof BigUint64Array,l="undefined"!=typeof BigInt64Array,c=n.g.__TYPEDARRAY_POOL;c.UINT8C||(c.UINT8C=i([32,0])),c.BIGUINT64||(c.BIGUINT64=i([32,0])),c.BIGINT64||(c.BIGINT64=i([32,0])),c.BUFFER||(c.BUFFER=i([32,0]));var u=c.DATA,f=c.BUFFER;function d(e){if(e){var t=e.length||e.byteLength,n=r.log2(t);u[n].push(e)}}function h(e){e=r.nextPow2(e);var t=r.log2(e),n=u[t];return n.length>0?n.pop():new ArrayBuffer(e)}function p(e){return new Uint8Array(h(e),0,e)}function m(e){return new Uint16Array(h(2*e),0,e)}function g(e){return new Uint32Array(h(4*e),0,e)}function v(e){return new Int8Array(h(e),0,e)}function y(e){return new Int16Array(h(2*e),0,e)}function b(e){return new Int32Array(h(4*e),0,e)}function x(e){return new Float32Array(h(4*e),0,e)}function _(e){return new Float64Array(h(8*e),0,e)}function w(e){return o?new Uint8ClampedArray(h(e),0,e):p(e)}function A(e){return s?new BigUint64Array(h(8*e),0,e):null}function k(e){return l?new BigInt64Array(h(8*e),0,e):null}function E(e){return new DataView(h(e),0,e)}function T(e){e=r.nextPow2(e);var t=r.log2(e),n=f[t];return n.length>0?n.pop():new a(e)}t.free=function(e){if(a.isBuffer(e))f[r.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,n=0|r.log2(t);u[n].push(e)}},t.freeUint8=t.freeUint16=t.freeUint32=t.freeBigUint64=t.freeInt8=t.freeInt16=t.freeInt32=t.freeBigInt64=t.freeFloat32=t.freeFloat=t.freeFloat64=t.freeDouble=t.freeUint8Clamped=t.freeDataView=function(e){d(e.buffer)},t.freeArrayBuffer=d,t.freeBuffer=function(e){f[r.log2(e.length)].push(e)},t.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return h(e);switch(t){case"uint8":return p(e);case"uint16":return m(e);case"uint32":return g(e);case"int8":return v(e);case"int16":return y(e);case"int32":return b(e);case"float":case"float32":return x(e);case"double":case"float64":return _(e);case"uint8_clamped":return w(e);case"bigint64":return k(e);case"biguint64":return A(e);case"buffer":return T(e);case"data":case"dataview":return E(e);default:return null}return null},t.mallocArrayBuffer=h,t.mallocUint8=p,t.mallocUint16=m,t.mallocUint32=g,t.mallocInt8=v,t.mallocInt16=y,t.mallocInt32=b,t.mallocFloat32=t.mallocFloat=x,t.mallocFloat64=t.mallocDouble=_,t.mallocUint8Clamped=w,t.mallocBigUint64=A,t.mallocBigInt64=k,t.mallocDataView=E,t.mallocBuffer=T,t.clearCache=function(){for(var e=0;e<32;++e)c.UINT8[e].length=0,c.UINT16[e].length=0,c.UINT32[e].length=0,c.INT8[e].length=0,c.INT16[e].length=0,c.INT32[e].length=0,c.FLOAT[e].length=0,c.DOUBLE[e].length=0,c.BIGUINT64[e].length=0,c.BIGINT64[e].length=0,c.UINT8C[e].length=0,u[e].length=0,f[e].length=0}},85237:e=>{var t="undefined"!=typeof process&&process.pid?process.pid.toString(36):"";function n(){var e=Date.now(),t=n.last||e;return n.last=e>t?e:t+1}e.exports=e.exports.default=function(e,r){return(e||"")+""+t+n().toString(36)+(r||"")},e.exports.process=function(e,r){return(e||"")+t+n().toString(36)+(r||"")},e.exports.time=function(e,t){return(e||"")+n().toString(36)+(t||"")}},91818:e=>{var t=/[\'\"]/;e.exports=function(e){return e?(t.test(e.charAt(0))&&(e=e.substr(1)),t.test(e.charAt(e.length-1))&&(e=e.substr(0,e.length-1)),e):""}},1648:e=>{"use strict";e.exports=function(e,t,n){Array.isArray(n)||(n=[].slice.call(arguments,2));for(var r=0,i=n.length;r<i;r++){var a=n[r];for(var o in a)if((void 0===t[o]||Array.isArray(t[o])||e[o]!==t[o])&&o in t){var s;if(!0===a[o])s=t[o];else{if(!1===a[o])continue;if("function"==typeof a[o]&&void 0===(s=a[o](t[o],e,t)))continue}e[o]=s}}return e}},88827:e=>{"use strict";var t=function(){};e.exports=t},99436:(e,t,n)=>{var r=n(10220);e.exports=function(e){return r("webgl",e)}},94624:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>v});var r=n(90153),i=n.n(r),a=n(23166),o=n.n(a),s=n(32390),l=n.n(s),c=n(62089),u=n.n(c),f=n(26549),d=n.n(f),h=n(31554),p=n.n(h),m=n(21080),g={};g.styleTagTransform=p(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=d();i()(m.A,g);const v=m.A&&m.A.locals?m.A.locals:void 0},90153:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var a={},o=[],s=0;s<e.length;s++){var l=e[s],c=r.base?l[0]+r.base:l[0],u=a[c]||0,f="".concat(c," ").concat(u);a[c]=u+1;var d=n(f),h={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)t[d].references++,t[d].updater(h);else{var p=i(h,r);r.byIndex=s,t.splice(s,0,{identifier:f,updater:p,references:1})}o.push(f)}return o}function i(e,t){var n=t.domAPI(t);n.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var a=r(e=e||[],i=i||{});return function(e){e=e||[];for(var o=0;o<a.length;o++){var s=n(a[o]);t[s].references--}for(var l=r(e,i),c=0;c<a.length;c++){var u=n(a[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}a=l}}},32390:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},26549:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},62089:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},23166:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},31554:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},25446:e=>{"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2722%27 height=%2722%27 fill=%27%23333%27 viewBox=%270 0 22 22%27%3E%3Cpath d=%27m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0%27/%3E%3C/svg%3E"},56694:e=>{"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2722%27 height=%2722%27 fill=%27%2333b5e5%27 viewBox=%270 0 22 22%27%3E%3Cpath d=%27m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0%27/%3E%3C/svg%3E"},26117:e=>{"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2724%27 height=%2724%27 fill-rule=%27evenodd%27 viewBox=%270 0 20 20%27%3E%3Cpath d=%27M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0%27/%3E%3C/svg%3E"},66311:e=>{"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2724%27 height=%2724%27 fill=%27%23fff%27 fill-rule=%27evenodd%27 viewBox=%270 0 20 20%27%3E%3Cpath d=%27M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0%27/%3E%3C/svg%3E"},24420:e=>{"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%23333%27 viewBox=%270 0 20 20%27%3E%3Cpath d=%27M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7%27/%3E%3Ccircle cx=%2710%27 cy=%2710%27 r=%272%27/%3E%3C/svg%3E"},77035:e=>{"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%23333%27 viewBox=%270 0 29 29%27%3E%3Cpath d=%27M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z%27/%3E%3C/svg%3E"},43470:e=>{"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%23333%27 viewBox=%270 0 29 29%27%3E%3Cpath d=%27M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5%27/%3E%3C/svg%3E"},13490:e=>{"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%23333%27 viewBox=%270 0 29 29%27%3E%3Cpath d=%27M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z%27/%3E%3C/svg%3E"},80216:e=>{"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%23333%27 viewBox=%270 0 29 29%27%3E%3Cpath d=%27m10.5 14 4-8 4 8z%27/%3E%3Cpath fill=%27%23ccc%27 d=%27m10.5 16 4 8 4-8z%27/%3E%3C/svg%3E"},47695:e=>{"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%2333b5e5%27 viewBox=%270 0 20 20%27%3E%3Cpath d=%27M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7%27/%3E%3C/svg%3E"},92228:e=>{"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%2333b5e5%27 viewBox=%270 0 20 20%27%3E%3Cpath d=%27M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7%27/%3E%3Ccircle cx=%2710%27 cy=%2710%27 r=%272%27/%3E%3C/svg%3E"},43737:e=>{"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%23666%27 viewBox=%270 0 20 20%27%3E%3Cpath d=%27M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7%27/%3E%3Ccircle cx=%2710%27 cy=%2710%27 r=%272%27/%3E%3Cpath fill=%27red%27 d=%27m14 5 1 1-9 9-1-1z%27/%3E%3C/svg%3E"},48460:e=>{"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%23999%27 viewBox=%270 0 20 20%27%3E%3Cpath d=%27M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7%27/%3E%3Ccircle cx=%2710%27 cy=%2710%27 r=%272%27/%3E%3Cpath fill=%27red%27 d=%27m14 5 1 1-9 9-1-1z%27/%3E%3C/svg%3E"},75796:e=>{"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%23aaa%27 viewBox=%270 0 20 20%27%3E%3Cpath d=%27M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7%27/%3E%3Ccircle cx=%2710%27 cy=%2710%27 r=%272%27/%3E%3Cpath fill=%27red%27 d=%27m14 5 1 1-9 9-1-1z%27/%3E%3C/svg%3E"},28869:e=>{"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%23e54e33%27 viewBox=%270 0 20 20%27%3E%3Cpath d=%27M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7%27/%3E%3C/svg%3E"},9819:e=>{"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%23e58978%27 viewBox=%270 0 20 20%27%3E%3Cpath d=%27M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7%27/%3E%3Ccircle cx=%2710%27 cy=%2710%27 r=%272%27/%3E%3C/svg%3E"},30557:e=>{"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%23fff%27 viewBox=%270 0 20 20%27%3E%3Cpath d=%27M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7%27/%3E%3Ccircle cx=%2710%27 cy=%2710%27 r=%272%27/%3E%3C/svg%3E"},68164:e=>{"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%23fff%27 viewBox=%270 0 29 29%27%3E%3Cpath d=%27M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z%27/%3E%3C/svg%3E"},64665:e=>{"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%23fff%27 viewBox=%270 0 29 29%27%3E%3Cpath d=%27M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5%27/%3E%3C/svg%3E"},91413:e=>{"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%23fff%27 viewBox=%270 0 29 29%27%3E%3Cpath d=%27M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z%27/%3E%3C/svg%3E"},13913:e=>{"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%23fff%27 viewBox=%270 0 29 29%27%3E%3Cpath d=%27M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z%27/%3E%3C/svg%3E"},61907:e=>{"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%23fff%27 viewBox=%270 0 29 29%27%3E%3Cpath d=%27m10.5 14 4-8 4 8z%27/%3E%3Cpath fill=%27%23ccc%27 d=%27m10.5 16 4 8 4-8z%27/%3E%3C/svg%3E"},56539:e=>{"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 viewBox=%270 0 20 20%27%3E%3Cpath d=%27M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7%27/%3E%3Ccircle cx=%2710%27 cy=%2710%27 r=%272%27/%3E%3C/svg%3E"},4890:e=>{"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 viewBox=%270 0 29 29%27%3E%3Cpath d=%27M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z%27/%3E%3C/svg%3E"},13363:e=>{"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 viewBox=%270 0 29 29%27%3E%3Cpath d=%27M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5%27/%3E%3C/svg%3E"},47603:e=>{"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 viewBox=%270 0 29 29%27%3E%3Cpath d=%27M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z%27/%3E%3C/svg%3E"},64643:e=>{"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 viewBox=%270 0 29 29%27%3E%3Cpath d=%27M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z%27/%3E%3C/svg%3E"},68605:e=>{"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 viewBox=%270 0 29 29%27%3E%3Cpath d=%27m10.5 14 4-8 4 8z%27/%3E%3Cpath fill=%27%23ccc%27 d=%27m10.5 16 4 8 4-8z%27/%3E%3C/svg%3E"},47914:e=>{"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2788%27 height=%2723%27 fill=%27none%27%3E%3Cpath fill=%27%23000%27 fill-opacity=%27.4%27 fill-rule=%27evenodd%27 d=%27M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z%27/%3E%3Cpath fill=%27%23fff%27 d=%27m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z%27/%3E%3Cpath fill=%27%23e1e3e9%27 d=%27M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z%27/%3E%3Cpath d=%27M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z%27 style=%27fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001%27/%3E%3Cg style=%27stroke-width:1.12603545%27%3E%3Cpath d=%27M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668%27 style=%27color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto%27 transform=%27translate%2815.553 2.85%29scale%28.88807%29%27/%3E%3Cpath d=%27M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3%27 style=%27clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4%27 transform=%27translate%2815.553 2.85%29scale%28.88807%29%27/%3E%3Cpath d=%27M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z%27 style=%27clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4%27 transform=%27translate%2815.553 2.85%29scale%28.88807%29%27/%3E%3C/g%3E%3C/svg%3E"},78306:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=o(e,a(n)))}return e}function a(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=o(t,n));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},3739:e=>{"use strict";var t=/("(?:[^\\"]|\\.)*")|[:,]/g;e.exports=function(e,n){var r,i,a;return n=n||{},r=JSON.stringify([1],void 0,void 0===n.indent?2:n.indent).slice(2,-3),i=""===r?1/0:void 0===n.maxLength?80:n.maxLength,a=n.replacer,function e(n,o,s){var l,c,u,f,d,h,p,m,g,v,y,b;if(n&&"function"==typeof n.toJSON&&(n=n.toJSON()),void 0===(y=JSON.stringify(n,a)))return y;if(p=i-o.length-s,y.length<=p&&(g=y.replace(t,(function(e,t){return t||e+" "}))).length<=p)return g;if(null!=a&&(n=JSON.parse(y),a=void 0),"object"==typeof n&&null!==n){if(m=o+r,u=[],c=0,Array.isArray(n))for(v="[",l="]",p=n.length;c<p;c++)u.push(e(n[c],m,c===p-1?0:1)||"null");else for(v="{",l="}",p=(h=Object.keys(n)).length;c<p;c++)f=h[c],d=JSON.stringify(f)+": ",void 0!==(b=e(n[f],m,d.length+(c===p-1?0:1)))&&u.push(d+b);if(u.length>0)return[v,r+u.join(",\n"+m),l].join("\n"+o)}return y}(e,"",0)}},31891:(e,t)=>{"use strict";function n(e,t,n,r){var i,a=!1,o=0;function s(){i&&clearTimeout(i)}function l(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var f=this,d=Date.now()-o;function h(){o=Date.now(),n.apply(f,c)}a||(r&&!i&&h(),s(),void 0===r&&d>e?h():!0!==t&&(i=setTimeout(r?function(){i=void 0}:h,void 0===r?e-d:e)))}return"boolean"!=typeof t&&(r=n,n=t,t=void 0),l.cancel=function(){s(),a=!0},l}Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=function(e,t,r){return void 0===r?n(e,t,!1):n(e,r,!1!==t)},t.throttle=n},3707:function(e){e.exports=function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}var t=/^\s+/,n=/\s+$/;function r(e,t){if(t=t||{},(e=e||"")instanceof r)return e;if(!(this instanceof r))return new r(e,t);var n=i(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function i(t){var n={r:0,g:0,b:0},r=1,i=null,o=null,l=null,u=!1,f=!1;return"string"==typeof t&&(t=q(t)),"object"==e(t)&&($(t.r)&&$(t.g)&&$(t.b)?(n=a(t.r,t.g,t.b),u=!0,f="%"===String(t.r).substr(-1)?"prgb":"rgb"):$(t.h)&&$(t.s)&&$(t.v)?(i=P(t.s),o=P(t.v),n=c(t.h,i,o),u=!0,f="hsv"):$(t.h)&&$(t.s)&&$(t.l)&&(i=P(t.s),l=P(t.l),n=s(t.h,i,l),u=!0,f="hsl"),t.hasOwnProperty("a")&&(r=t.a)),r=S(r),{ok:u,format:t.format||f,r:Math.min(255,Math.max(n.r,0)),g:Math.min(255,Math.max(n.g,0)),b:Math.min(255,Math.max(n.b,0)),a:r}}function a(e,t,n){return{r:255*C(e,255),g:255*C(t,255),b:255*C(n,255)}}function o(e,t,n){e=C(e,255),t=C(t,255),n=C(n,255);var r,i,a=Math.max(e,t,n),o=Math.min(e,t,n),s=(a+o)/2;if(a==o)r=i=0;else{var l=a-o;switch(i=s>.5?l/(2-a-o):l/(a+o),a){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,l:s}}function s(e,t,n){var r,i,a;function o(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=C(e,360),t=C(t,100),n=C(n,100),0===t)r=i=a=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;r=o(l,s,e+1/3),i=o(l,s,e),a=o(l,s,e-1/3)}return{r:255*r,g:255*i,b:255*a}}function l(e,t,n){e=C(e,255),t=C(t,255),n=C(n,255);var r,i,a=Math.max(e,t,n),o=Math.min(e,t,n),s=a,l=a-o;if(i=0===a?0:l/a,a==o)r=0;else{switch(a){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,v:s}}function c(e,t,n){e=6*C(e,360),t=C(t,100),n=C(n,100);var r=Math.floor(e),i=e-r,a=n*(1-t),o=n*(1-i*t),s=n*(1-(1-i)*t),l=r%6;return{r:255*[n,o,a,a,s,n][l],g:255*[s,n,n,o,a,a][l],b:255*[a,a,s,n,n,o][l]}}function u(e,t,n,r){var i=[D(Math.round(e).toString(16)),D(Math.round(t).toString(16)),D(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function f(e,t,n,r,i){var a=[D(Math.round(e).toString(16)),D(Math.round(t).toString(16)),D(Math.round(n).toString(16)),D(I(r))];return i&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function d(e,t,n,r){return[D(I(r)),D(Math.round(e).toString(16)),D(Math.round(t).toString(16)),D(Math.round(n).toString(16))].join("")}function h(e,t){t=0===t?0:t||10;var n=r(e).toHsl();return n.s-=t/100,n.s=O(n.s),r(n)}function p(e,t){t=0===t?0:t||10;var n=r(e).toHsl();return n.s+=t/100,n.s=O(n.s),r(n)}function m(e){return r(e).desaturate(100)}function g(e,t){t=0===t?0:t||10;var n=r(e).toHsl();return n.l+=t/100,n.l=O(n.l),r(n)}function v(e,t){t=0===t?0:t||10;var n=r(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),r(n)}function y(e,t){t=0===t?0:t||10;var n=r(e).toHsl();return n.l-=t/100,n.l=O(n.l),r(n)}function b(e,t){var n=r(e).toHsl(),i=(n.h+t)%360;return n.h=i<0?360+i:i,r(n)}function x(e){var t=r(e).toHsl();return t.h=(t.h+180)%360,r(t)}function _(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=r(e).toHsl(),i=[r(e)],a=360/t,o=1;o<t;o++)i.push(r({h:(n.h+o*a)%360,s:n.s,l:n.l}));return i}function w(e){var t=r(e).toHsl(),n=t.h;return[r(e),r({h:(n+72)%360,s:t.s,l:t.l}),r({h:(n+216)%360,s:t.s,l:t.l})]}function A(e,t,n){t=t||6,n=n||30;var i=r(e).toHsl(),a=360/n,o=[r(e)];for(i.h=(i.h-(a*t>>1)+720)%360;--t;)i.h=(i.h+a)%360,o.push(r(i));return o}function k(e,t){t=t||6;for(var n=r(e).toHsv(),i=n.h,a=n.s,o=n.v,s=[],l=1/t;t--;)s.push(r({h:i,s:a,v:o})),o=(o+l)%1;return s}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=S(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=l(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=l(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=o(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=o(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return u(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return f(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*C(this._r,255))+"%",g:Math.round(100*C(this._g,255))+"%",b:Math.round(100*C(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*C(this._r,255))+"%, "+Math.round(100*C(this._g,255))+"%, "+Math.round(100*C(this._b,255))+"%)":"rgba("+Math.round(100*C(this._r,255))+"%, "+Math.round(100*C(this._g,255))+"%, "+Math.round(100*C(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(T[u(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+d(this._r,this._g,this._b,this._a),n=t,i=this._gradientType?"GradientType = 1, ":"";if(e){var a=r(e);n="#"+d(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return r(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(g,arguments)},brighten:function(){return this._applyModification(v,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(h,arguments)},saturate:function(){return this._applyModification(p,arguments)},greyscale:function(){return this._applyModification(m,arguments)},spin:function(){return this._applyModification(b,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(A,arguments)},complement:function(){return this._applyCombination(x,arguments)},monochromatic:function(){return this._applyCombination(k,arguments)},splitcomplement:function(){return this._applyCombination(w,arguments)},triad:function(){return this._applyCombination(_,[3])},tetrad:function(){return this._applyCombination(_,[4])}},r.fromRatio=function(t,n){if("object"==e(t)){var i={};for(var a in t)t.hasOwnProperty(a)&&(i[a]="a"===a?t[a]:P(t[a]));t=i}return r(t,n)},r.equals=function(e,t){return!(!e||!t)&&r(e).toRgbString()==r(t).toRgbString()},r.random=function(){return r.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},r.mix=function(e,t,n){n=0===n?0:n||50;var i=r(e).toRgb(),a=r(t).toRgb(),o=n/100;return r({r:(a.r-i.r)*o+i.r,g:(a.g-i.g)*o+i.g,b:(a.b-i.b)*o+i.b,a:(a.a-i.a)*o+i.a})},r.readability=function(e,t){var n=r(e),i=r(t);return(Math.max(n.getLuminance(),i.getLuminance())+.05)/(Math.min(n.getLuminance(),i.getLuminance())+.05)},r.isReadable=function(e,t,n){var i,a,o=r.readability(e,t);switch(a=!1,(i=H(n)).level+i.size){case"AAsmall":case"AAAlarge":a=o>=4.5;break;case"AAlarge":a=o>=3;break;case"AAAsmall":a=o>=7}return a},r.mostReadable=function(e,t,n){var i,a,o,s,l=null,c=0;a=(n=n||{}).includeFallbackColors,o=n.level,s=n.size;for(var u=0;u<t.length;u++)(i=r.readability(e,t[u]))>c&&(c=i,l=r(t[u]));return r.isReadable(e,l,{level:o,size:s})||!a?l:(n.includeFallbackColors=!1,r.mostReadable(e,["#fff","#000"],n))};var E=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},T=r.hexNames=M(E);function M(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function S(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function C(e,t){N(e)&&(e="100%");var n=L(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function O(e){return Math.min(1,Math.max(0,e))}function R(e){return parseInt(e,16)}function N(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)}function L(e){return"string"==typeof e&&-1!=e.indexOf("%")}function D(e){return 1==e.length?"0"+e:""+e}function P(e){return e<=1&&(e=100*e+"%"),e}function I(e){return Math.round(255*parseFloat(e)).toString(16)}function F(e){return R(e)/255}var z,j,B,U=(j="[\\s|\\(]+("+(z="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+z+")[,|\\s]+("+z+")\\s*\\)?",B="[\\s|\\(]+("+z+")[,|\\s]+("+z+")[,|\\s]+("+z+")[,|\\s]+("+z+")\\s*\\)?",{CSS_UNIT:new RegExp(z),rgb:new RegExp("rgb"+j),rgba:new RegExp("rgba"+B),hsl:new RegExp("hsl"+j),hsla:new RegExp("hsla"+B),hsv:new RegExp("hsv"+j),hsva:new RegExp("hsva"+B),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function $(e){return!!U.CSS_UNIT.exec(e)}function q(e){e=e.replace(t,"").replace(n,"").toLowerCase();var r,i=!1;if(E[e])e=E[e],i=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(r=U.rgb.exec(e))?{r:r[1],g:r[2],b:r[3]}:(r=U.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=U.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=U.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=U.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=U.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=U.hex8.exec(e))?{r:R(r[1]),g:R(r[2]),b:R(r[3]),a:F(r[4]),format:i?"name":"hex8"}:(r=U.hex6.exec(e))?{r:R(r[1]),g:R(r[2]),b:R(r[3]),format:i?"name":"hex"}:(r=U.hex4.exec(e))?{r:R(r[1]+""+r[1]),g:R(r[2]+""+r[2]),b:R(r[3]+""+r[3]),a:F(r[4]+""+r[4]),format:i?"name":"hex8"}:!!(r=U.hex3.exec(e))&&{r:R(r[1]+""+r[1]),g:R(r[2]+""+r[2]),b:R(r[3]+""+r[3]),format:i?"name":"hex"}}function H(e){var t,n;return"AA"!==(t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==t&&(t="AA"),"small"!==(n=(e.size||"small").toLowerCase())&&"large"!==n&&(n="small"),{level:t,size:n}}return r}()},27046:(e,t,n)=>{"use strict";function r(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}n.d(t,{A:()=>r})},97672:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(27046);function i(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function a(e){let t,n,a;function s(e,r,i=0,a=e.length){if(i<a){if(0!==t(r,r))return a;do{const t=i+a>>>1;n(e[t],r)<0?i=t+1:a=t}while(i<a)}return i}return 2!==e.length?(t=r.A,n=(t,n)=>(0,r.A)(e(t),n),a=(t,n)=>e(t)-n):(t=e===r.A||e===i?e:o,n=e,a=e),{left:s,center:function(e,t,n=0,r=e.length){const i=s(e,t,n,r-1);return i>n&&a(e[i-1],t)>-a(e[i],t)?i-1:i},right:function(e,r,i=0,a=e.length){if(i<a){if(0!==t(r,r))return a;do{const t=i+a>>>1;n(e[t],r)<=0?i=t+1:a=t}while(i<a)}return i}}}function o(){return 0}},92766:(e,t,n)=>{"use strict";function r(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n<t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}n.d(t,{A:()=>r})},60583:(e,t,n)=>{"use strict";function r(e,t){let n=0,r=0;if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(++n,r+=t);else{let i=-1;for(let a of e)null!=(a=t(a,++i,e))&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}n.d(t,{A:()=>r})},11136:(e,t,n)=>{"use strict";function r(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n>t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}n.d(t,{A:()=>r})},53827:(e,t,n)=>{"use strict";function r(e,t){let n=0;if(void 0===t)for(let t of e)(t=+t)&&(n+=t);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}n.d(t,{A:()=>r})},41314:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>s,lq:()=>l,sG:()=>c});const r=Math.sqrt(50),i=Math.sqrt(10),a=Math.sqrt(2);function o(e,t,n){const s=(t-e)/Math.max(0,n),l=Math.floor(Math.log10(s)),c=s/Math.pow(10,l),u=c>=r?10:c>=i?5:c>=a?2:1;let f,d,h;return l<0?(h=Math.pow(10,-l)/u,f=Math.round(e*h),d=Math.round(t*h),f/h<e&&++f,d/h>t&&--d,h=-h):(h=Math.pow(10,l)*u,f=Math.round(e/h),d=Math.round(t/h),f*h<e&&++f,d*h>t&&--d),d<f&&.5<=n&&n<2?o(e,t,2*n):[f,d,h]}function s(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];const r=t<e,[i,a,s]=r?o(t,e,n):o(e,t,n);if(!(a>=i))return[];const l=a-i+1,c=new Array(l);if(r)if(s<0)for(let e=0;e<l;++e)c[e]=(a-e)/-s;else for(let e=0;e<l;++e)c[e]=(a-e)*s;else if(s<0)for(let e=0;e<l;++e)c[e]=(i+e)/-s;else for(let e=0;e<l;++e)c[e]=(i+e)*s;return c}function l(e,t,n){return o(e=+e,t=+t,n=+n)[2]}function c(e,t,n){n=+n;const r=(t=+t)<(e=+e),i=r?l(t,e,n):l(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}},81325:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>x,Gw:()=>E,KI:()=>L,Q1:()=>i,Qh:()=>k,Uw:()=>o,b:()=>A,ef:()=>a});var r=n(79239);function i(){}var a=.7,o=1/a,s="\\s*([+-]?\\d+)\\s*",l="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",c="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",u=/^#([0-9a-f]{3,8})$/,f=new RegExp(`^rgb\\(${s},${s},${s}\\)$`),d=new RegExp(`^rgb\\(${c},${c},${c}\\)$`),h=new RegExp(`^rgba\\(${s},${s},${s},${l}\\)$`),p=new RegExp(`^rgba\\(${c},${c},${c},${l}\\)$`),m=new RegExp(`^hsl\\(${l},${c},${c}\\)$`),g=new RegExp(`^hsla\\(${l},${c},${c},${l}\\)$`),v={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function y(){return this.rgb().formatHex()}function b(){return this.rgb().formatRgb()}function x(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=u.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?_(t):3===n?new E(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?w(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?w(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=f.exec(e))?new E(t[1],t[2],t[3],1):(t=d.exec(e))?new E(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=h.exec(e))?w(t[1],t[2],t[3],t[4]):(t=p.exec(e))?w(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=m.exec(e))?R(t[1],t[2]/100,t[3]/100,1):(t=g.exec(e))?R(t[1],t[2]/100,t[3]/100,t[4]):v.hasOwnProperty(e)?_(v[e]):"transparent"===e?new E(NaN,NaN,NaN,0):null}function _(e){return new E(e>>16&255,e>>8&255,255&e,1)}function w(e,t,n,r){return r<=0&&(e=t=n=NaN),new E(e,t,n,r)}function A(e){return e instanceof i||(e=x(e)),e?new E((e=e.rgb()).r,e.g,e.b,e.opacity):new E}function k(e,t,n,r){return 1===arguments.length?A(e):new E(e,t,n,null==r?1:r)}function E(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function T(){return`#${O(this.r)}${O(this.g)}${O(this.b)}`}function M(){const e=S(this.opacity);return`${1===e?"rgb(":"rgba("}${C(this.r)}, ${C(this.g)}, ${C(this.b)}${1===e?")":`, ${e})`}`}function S(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function C(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function O(e){return((e=C(e))<16?"0":"")+e.toString(16)}function R(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new D(e,t,n,r)}function N(e){if(e instanceof D)return new D(e.h,e.s,e.l,e.opacity);if(e instanceof i||(e=x(e)),!e)return new D;if(e instanceof D)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,l=o-a,c=(o+a)/2;return l?(s=t===o?(n-r)/l+6*(n<r):n===o?(r-t)/l+2:(t-n)/l+4,l/=c<.5?o+a:2-o-a,s*=60):l=c>0&&c<1?0:s,new D(s,l,c,e.opacity)}function L(e,t,n,r){return 1===arguments.length?N(e):new D(e,t,n,null==r?1:r)}function D(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function P(e){return(e=(e||0)%360)<0?e+360:e}function I(e){return Math.max(0,Math.min(1,e||0))}function F(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}(0,r.A)(i,x,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:y,formatHex:y,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return N(this).formatHsl()},formatRgb:b,toString:b}),(0,r.A)(E,k,(0,r.X)(i,{brighter(e){return e=null==e?o:Math.pow(o,e),new E(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?a:Math.pow(a,e),new E(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new E(C(this.r),C(this.g),C(this.b),S(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:T,formatHex:T,formatHex8:function(){return`#${O(this.r)}${O(this.g)}${O(this.b)}${O(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:M,toString:M})),(0,r.A)(D,L,(0,r.X)(i,{brighter(e){return e=null==e?o:Math.pow(o,e),new D(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?a:Math.pow(a,e),new D(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new E(F(e>=240?e-240:e+120,i,r),F(e,i,r),F(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new D(P(this.h),I(this.s),I(this.l),S(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=S(this.opacity);return`${1===e?"hsl(":"hsla("}${P(this.h)}, ${100*I(this.s)}%, ${100*I(this.l)}%${1===e?")":`, ${e})`}`}}))},79239:(e,t,n)=>{"use strict";function r(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function i(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}n.d(t,{A:()=>r,X:()=>i})},81773:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>p,aq:()=>_});var r=n(79239),i=n(81325),a=n(95918);const o=.96422,s=1,l=.82521,c=4/29,u=6/29,f=3*u*u,d=u*u*u;function h(e){if(e instanceof m)return new m(e.l,e.a,e.b,e.opacity);if(e instanceof w)return A(e);e instanceof i.Gw||(e=(0,i.b)(e));var t,n,r=b(e.r),a=b(e.g),c=b(e.b),u=g((.2225045*r+.7168786*a+.0606169*c)/s);return r===a&&a===c?t=n=u:(t=g((.4360747*r+.3850649*a+.1430804*c)/o),n=g((.0139322*r+.0971045*a+.7141733*c)/l)),new m(116*u-16,500*(t-u),200*(u-n),e.opacity)}function p(e,t,n,r){return 1===arguments.length?h(e):new m(e,t,n,null==r?1:r)}function m(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function g(e){return e>d?Math.pow(e,1/3):e/f+c}function v(e){return e>u?e*e*e:f*(e-c)}function y(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function b(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function x(e){if(e instanceof w)return new w(e.h,e.c,e.l,e.opacity);if(e instanceof m||(e=h(e)),0===e.a&&0===e.b)return new w(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*a.u;return new w(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function _(e,t,n,r){return 1===arguments.length?x(e):new w(e,t,n,null==r?1:r)}function w(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function A(e){if(isNaN(e.h))return new m(e.l,0,0,e.opacity);var t=e.h*a.F;return new m(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}(0,r.A)(m,p,(0,r.X)(i.Q1,{brighter(e){return new m(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker(e){return new m(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=o*v(t),e=s*v(e),n=l*v(n),new i.Gw(y(3.1338561*t-1.6168667*e-.4906146*n),y(-.9787684*t+1.9161415*e+.033454*n),y(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),(0,r.A)(w,_,(0,r.X)(i.Q1,{brighter(e){return new w(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker(e){return new w(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb(){return A(this).rgb()}}))},95918:(e,t,n)=>{"use strict";n.d(t,{F:()=>r,u:()=>i});const r=Math.PI/180,i=180/Math.PI},37885:(e,t,n)=>{"use strict";n.d(t,{GP:()=>i,s:()=>a});var r,i,a,o,s=n(90938);o={thousands:",",grouping:[3],currency:["$",""]},r=(0,s.A)(o),i=r.format,a=r.formatPrefix},61379:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(84388);function i(e){return(e=(0,r.f)(Math.abs(e)))?e[1]:NaN}},84388:(e,t,n)=>{"use strict";function r(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function i(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}n.d(t,{A:()=>r,f:()=>i})},90687:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function i(e){if(!(t=r.exec(e)))throw new Error("invalid format: "+e);var t;return new a({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function a(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}i.prototype=a.prototype,a.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}},43078:(e,t,n)=>{"use strict";n.d(t,{GP:()=>r.GP,OE:()=>i.A});var r=n(37885),i=n(90938)},90938:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(61379);var i=n(90687);var a,o=n(84388);function s(e,t){var n=(0,o.f)(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const l={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:o.A,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>s(100*e,t),r:s,s:function(e,t){var n=(0,o.f)(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(a=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,l=r.length;return s===l?r:s>l?r+new Array(s-l+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+(0,o.f)(e,Math.max(0,t+s-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function c(e){return e}var u=Array.prototype.map,f=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function d(e){var t,n,o=void 0===e.grouping||void 0===e.thousands?c:(t=u.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,a=[],o=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(e.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(n)}),s=void 0===e.currency?"":e.currency[0]+"",d=void 0===e.currency?"":e.currency[1]+"",h=void 0===e.decimal?".":e.decimal+"",p=void 0===e.numerals?c:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(u.call(e.numerals,String)),m=void 0===e.percent?"%":e.percent+"",g=void 0===e.minus?"":e.minus+"",v=void 0===e.nan?"NaN":e.nan+"";function y(e){var t=(e=(0,i.A)(e)).fill,n=e.align,r=e.sign,c=e.symbol,u=e.zero,y=e.width,b=e.comma,x=e.precision,_=e.trim,w=e.type;"n"===w?(b=!0,w="g"):l[w]||(void 0===x&&(x=12),_=!0,w="g"),(u||"0"===t&&"="===n)&&(u=!0,t="0",n="=");var A="$"===c?s:"#"===c&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",k="$"===c?d:/[%p]/.test(w)?m:"",E=l[w],T=/[defgprs%]/.test(w);function M(e){var i,s,l,c=A,d=k;if("c"===w)d=E(e)+d,e="";else{var m=(e=+e)<0||1/e<0;if(e=isNaN(e)?v:E(Math.abs(e),x),_&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),m&&0==+e&&"+"!==r&&(m=!1),c=(m?"("===r?r:g:"-"===r||"("===r?"":r)+c,d=("s"===w?f[8+a/3]:"")+d+(m&&"("===r?")":""),T)for(i=-1,s=e.length;++i<s;)if(48>(l=e.charCodeAt(i))||l>57){d=(46===l?h+e.slice(i+1):e.slice(i))+d,e=e.slice(0,i);break}}b&&!u&&(e=o(e,1/0));var M=c.length+e.length+d.length,S=M<y?new Array(y-M+1).join(t):"";switch(b&&u&&(e=o(S+e,S.length?y-d.length:1/0),S=""),n){case"<":e=c+e+d+S;break;case"=":e=c+S+e+d;break;case"^":e=S.slice(0,M=S.length>>1)+c+e+d+S.slice(M);break;default:e=S+c+e+d}return p(e)}return x=void 0===x?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x)),M.toString=function(){return e+""},M}return{format:y,formatPrefix:function(e,t){var n=y(((e=(0,i.A)(e)).type="f",e)),a=3*Math.max(-8,Math.min(8,Math.floor((0,r.A)(t)/3))),o=Math.pow(10,-a),s=f[8+a/3];return function(e){return n(o*e)+s}}}}},26095:(e,t,n)=>{"use strict";n.d(t,{$:()=>o,A:()=>a});var r=n(167),i=n(31792);function a(e,t){return((0,i.p)(t)?i.A:o)(e,t)}function o(e,t){var n,i=t?t.length:0,a=e?Math.min(i,e.length):0,o=new Array(a),s=new Array(i);for(n=0;n<a;++n)o[n]=(0,r.A)(e[n],t[n]);for(;n<i;++n)s[n]=t[n];return function(e){for(n=0;n<a;++n)s[n]=o[n](e);return s}}},27824:(e,t,n)=>{"use strict";function r(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}function i(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[i],o=e[i+1],s=i>0?e[i-1]:2*a-o,l=i<t-1?e[i+2]:2*o-a;return r((n-i/t)*t,s,a,o,l)}}n.d(t,{A:()=>i,H:()=>r})},41468:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(27824);function i(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),a=e[(i+t-1)%t],o=e[i%t],s=e[(i+1)%t],l=e[(i+2)%t];return(0,r.H)((n-i/t)*t,a,o,s,l)}}},26373:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>s,lG:()=>a,uN:()=>o});var r=n(92300);function i(e,t){return function(n){return e+n*t}}function a(e,t){var n=t-e;return n?i(e,n>180||n<-180?n-360*Math.round(n/360):n):(0,r.A)(isNaN(e)?t:e)}function o(e){return 1==(e=+e)?s:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):(0,r.A)(isNaN(t)?n:t)}}function s(e,t){var n=t-e;return n?i(e,n):(0,r.A)(isNaN(e)?t:e)}},92300:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=e=>()=>e},83996:(e,t,n)=>{"use strict";function r(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}n.d(t,{A:()=>r})},72767:(e,t,n)=>{"use strict";n.r(t),n.d(t,{interpolate:()=>r.A,interpolateArray:()=>i.A,interpolateBasis:()=>a.A,interpolateBasisClosed:()=>o.A,interpolateCubehelix:()=>Y,interpolateCubehelixLong:()=>X,interpolateDate:()=>s.A,interpolateDiscrete:()=>l,interpolateHcl:()=>L,interpolateHclLong:()=>D,interpolateHsl:()=>S,interpolateHslLong:()=>C,interpolateHue:()=>u,interpolateLab:()=>R,interpolateNumber:()=>d.A,interpolateNumberArray:()=>h.A,interpolateObject:()=>p.A,interpolateRgb:()=>E.Ay,interpolateRgbBasis:()=>E.Ik,interpolateRgbBasisClosed:()=>E.uL,interpolateRound:()=>m.A,interpolateString:()=>g.A,interpolateTransformCss:()=>_,interpolateTransformSvg:()=>w,interpolateZoom:()=>k,piecewise:()=>K.A,quantize:()=>Z});var r=n(167),i=n(26095),a=n(27824),o=n(41468),s=n(83996);function l(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}var c=n(26373);function u(e,t){var n=(0,c.lG)(+e,+t);return function(e){var t=n(e);return t-360*Math.floor(t/360)}}var f,d=n(93909),h=n(31792),p=n(35567),m=n(91434),g=n(52665),v=180/Math.PI,y={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function b(e,t,n,r,i,a){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*v,skewX:Math.atan(l)*v,scaleX:o,scaleY:s}}function x(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(a,o){var s=[],l=[];return a=e(a),o=e(o),function(e,r,i,a,o,s){if(e!==i||r!==a){var l=o.push("translate(",null,t,null,n);s.push({i:l-4,x:(0,d.A)(e,i)},{i:l-2,x:(0,d.A)(r,a)})}else(i||a)&&o.push("translate("+i+t+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,s,l),function(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:(0,d.A)(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(a.rotate,o.rotate,s,l),function(e,t,n,a){e!==t?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:(0,d.A)(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(a.skewX,o.skewX,s,l),function(e,t,n,r,a,o){if(e!==n||t!==r){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:(0,d.A)(e,n)},{i:s-2,x:(0,d.A)(t,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,l),a=o=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var _=x((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?y:b(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),w=x((function(e){return null==e?y:(f||(f=document.createElementNS("http://www.w3.org/2000/svg","g")),f.setAttribute("transform",e),(e=f.transform.baseVal.consolidate())?b((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):y)}),", ",")",")");function A(e){return((e=Math.exp(e))+1/e)/2}const k=function e(t,n,r){function i(e,i){var a,o,s=e[0],l=e[1],c=e[2],u=i[0],f=i[1],d=i[2],h=u-s,p=f-l,m=h*h+p*p;if(m<1e-12)o=Math.log(d/c)/t,a=function(e){return[s+e*h,l+e*p,c*Math.exp(t*e*o)]};else{var g=Math.sqrt(m),v=(d*d-c*c+r*m)/(2*c*n*g),y=(d*d-c*c-r*m)/(2*d*n*g),b=Math.log(Math.sqrt(v*v+1)-v),x=Math.log(Math.sqrt(y*y+1)-y);o=(x-b)/t,a=function(e){var r,i=e*o,a=A(b),u=c/(n*g)*(a*(r=t*i+b,((r=Math.exp(2*r))-1)/(r+1))-function(e){return((e=Math.exp(e))-1/e)/2}(b));return[s+u*h,l+u*p,c*a/A(t*i+b)]}}return a.duration=1e3*o*t/Math.SQRT2,a}return i.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},i}(Math.SQRT2,2,4);var E=n(35341),T=n(81325);function M(e){return function(t,n){var r=e((t=(0,T.KI)(t)).h,(n=(0,T.KI)(n)).h),i=(0,c.Ay)(t.s,n.s),a=(0,c.Ay)(t.l,n.l),o=(0,c.Ay)(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=i(e),t.l=a(e),t.opacity=o(e),t+""}}}const S=M(c.lG);var C=M(c.Ay),O=n(81773);function R(e,t){var n=(0,c.Ay)((e=(0,O.Ay)(e)).l,(t=(0,O.Ay)(t)).l),r=(0,c.Ay)(e.a,t.a),i=(0,c.Ay)(e.b,t.b),a=(0,c.Ay)(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=i(t),e.opacity=a(t),e+""}}function N(e){return function(t,n){var r=e((t=(0,O.aq)(t)).h,(n=(0,O.aq)(n)).h),i=(0,c.Ay)(t.c,n.c),a=(0,c.Ay)(t.l,n.l),o=(0,c.Ay)(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=i(e),t.l=a(e),t.opacity=o(e),t+""}}}const L=N(c.lG);var D=N(c.Ay),P=n(79239),I=n(95918),F=-.14861,z=1.78277,j=-.29227,B=-.90649,U=1.97294,$=U*B,q=U*z,H=z*j-B*F;function V(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof W)return new W(e.h,e.s,e.l,e.opacity);e instanceof T.Gw||(e=(0,T.b)(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(H*r+$*t-q*n)/(H+$-q),a=r-i,o=(U*(n-i)-j*a)/B,s=Math.sqrt(o*o+a*a)/(U*i*(1-i)),l=s?Math.atan2(o,a)*I.u-120:NaN;return new W(l<0?l+360:l,s,i,e.opacity)}(e):new W(e,t,n,null==r?1:r)}function W(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function G(e){return function t(n){function r(t,r){var i=e((t=V(t)).h,(r=V(r)).h),a=(0,c.Ay)(t.s,r.s),o=(0,c.Ay)(t.l,r.l),s=(0,c.Ay)(t.opacity,r.opacity);return function(e){return t.h=i(e),t.s=a(e),t.l=o(Math.pow(e,n)),t.opacity=s(e),t+""}}return n=+n,r.gamma=t,r}(1)}(0,P.A)(W,V,(0,P.X)(T.Q1,{brighter(e){return e=null==e?T.Uw:Math.pow(T.Uw,e),new W(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?T.ef:Math.pow(T.ef,e),new W(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*I.F,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new T.Gw(255*(t+n*(F*r+z*i)),255*(t+n*(j*r+B*i)),255*(t+n*(U*r)),this.opacity)}}));const Y=G(c.lG);var X=G(c.Ay),K=n(16480);function Z(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}},93909:(e,t,n)=>{"use strict";function r(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}n.d(t,{A:()=>r})},31792:(e,t,n)=>{"use strict";function r(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(n=0;n<r;++n)i[n]=e[n]*(1-a)+t[n]*a;return i}}function i(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}n.d(t,{A:()=>r,p:()=>i})},35567:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(167);function i(e,t){var n,i={},a={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?i[n]=(0,r.A)(e[n],t[n]):a[n]=t[n];return function(e){for(n in i)a[n]=i[n](e);return a}}},16480:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(167);function i(e,t){void 0===t&&(t=e,e=r.A);for(var n=0,i=t.length-1,a=t[0],o=new Array(i<0?0:i);n<i;)o[n]=e(a,a=t[++n]);return function(e){var t=Math.max(0,Math.min(i-1,Math.floor(e*=i)));return o[t](e-t)}}},35341:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>s,Ik:()=>c,uL:()=>u});var r=n(81325),i=n(27824),a=n(41468),o=n(26373);const s=function e(t){var n=(0,o.uN)(t);function i(e,t){var i=n((e=(0,r.Qh)(e)).r,(t=(0,r.Qh)(t)).r),a=n(e.g,t.g),s=n(e.b,t.b),l=(0,o.Ay)(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=a(t),e.b=s(t),e.opacity=l(t),e+""}}return i.gamma=e,i}(1);function l(e){return function(t){var n,i,a=t.length,o=new Array(a),s=new Array(a),l=new Array(a);for(n=0;n<a;++n)i=(0,r.Qh)(t[n]),o[n]=i.r||0,s[n]=i.g||0,l[n]=i.b||0;return o=e(o),s=e(s),l=e(l),i.opacity=1,function(e){return i.r=o(e),i.g=s(e),i.b=l(e),i+""}}}var c=l(i.A),u=l(a.A)},91434:(e,t,n)=>{"use strict";function r(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}n.d(t,{A:()=>r})},52665:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(93909),i=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,a=new RegExp(i.source,"g");function o(e,t){var n,o,s,l=i.lastIndex=a.lastIndex=0,c=-1,u=[],f=[];for(e+="",t+="";(n=i.exec(e))&&(o=a.exec(t));)(s=o.index)>l&&(s=t.slice(l,s),u[c]?u[c]+=s:u[++c]=s),(n=n[0])===(o=o[0])?u[c]?u[c]+=o:u[++c]=o:(u[++c]=null,f.push({i:c,x:(0,r.A)(n,o)})),l=a.lastIndex;return l<t.length&&(s=t.slice(l),u[c]?u[c]+=s:u[++c]=s),u.length<2?f[0]?function(e){return function(t){return e(t)+""}}(f[0].x):function(e){return function(){return e}}(t):(t=f.length,function(e){for(var n,r=0;r<t;++r)u[(n=f[r]).i]=n.x(e);return u.join("")})}},167:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(81325),i=n(35341),a=n(26095),o=n(83996),s=n(93909),l=n(35567),c=n(52665),u=n(92300),f=n(31792);function d(e,t){var n,d=typeof t;return null==t||"boolean"===d?(0,u.A)(t):("number"===d?s.A:"string"===d?(n=(0,r.Ay)(t))?(t=n,i.Ay):c.A:t instanceof r.Ay?i.Ay:t instanceof Date?o.A:(0,f.p)(t)?f.A:Array.isArray(t)?a.$:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?l.A:s.A)(e,t)}},76003:(e,t,n)=>{"use strict";n.d(t,{Ae:()=>c});const r=Math.PI,i=2*r,a=1e-6,o=i-a;function s(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class l{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?s:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return s;const n=10**t;return function(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,r){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(e,t,n,r,i,a){this._append`C${+e},${+t},${+n},${+r},${this._x1=+i},${this._y1=+a}`}arcTo(e,t,n,i,o){if(e=+e,t=+t,n=+n,i=+i,(o=+o)<0)throw new Error(`negative radius: ${o}`);let s=this._x1,l=this._y1,c=n-e,u=i-t,f=s-e,d=l-t,h=f*f+d*d;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(h>a)if(Math.abs(d*c-u*f)>a&&o){let p=n-s,m=i-l,g=c*c+u*u,v=p*p+m*m,y=Math.sqrt(g),b=Math.sqrt(h),x=o*Math.tan((r-Math.acos((g+h-v)/(2*y*b)))/2),_=x/b,w=x/y;Math.abs(_-1)>a&&this._append`L${e+_*f},${t+_*d}`,this._append`A${o},${o},0,0,${+(d*p>f*m)},${this._x1=e+w*c},${this._y1=t+w*u}`}else this._append`L${this._x1=e},${this._y1=t}`;else;}arc(e,t,n,s,l,c){if(e=+e,t=+t,c=!!c,(n=+n)<0)throw new Error(`negative radius: ${n}`);let u=n*Math.cos(s),f=n*Math.sin(s),d=e+u,h=t+f,p=1^c,m=c?s-l:l-s;null===this._x1?this._append`M${d},${h}`:(Math.abs(this._x1-d)>a||Math.abs(this._y1-h)>a)&&this._append`L${d},${h}`,n&&(m<0&&(m=m%i+i),m>o?this._append`A${n},${n},0,1,${p},${e-u},${t-f}A${n},${n},0,1,${p},${this._x1=d},${this._y1=h}`:m>a&&this._append`A${n},${n},0,${+(m>=r)},${p},${this._x1=e+n*Math.cos(l)},${this._y1=t+n*Math.sin(l)}`)}rect(e,t,n,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function c(){return new l}c.prototype=l.prototype},39913:(e,t,n)=>{"use strict";n.d(t,{DC:()=>i,GY:()=>s,T6:()=>a,aL:()=>o});var r,i,a,o,s,l,c=n(49326);l={dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},r=(0,c.A)(l),i=r.format,a=r.parse,o=r.utcFormat,s=r.utcParse},39754:(e,t,n)=>{"use strict";n.d(t,{DC:()=>r.DC,aL:()=>r.aL,de:()=>i.A});var r=n(39913),i=n(49326)},49326:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(40846),i=n(68678),a=n(86275);function o(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function s(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function l(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function c(e){var t=e.dateTime,n=e.date,a=e.time,c=e.periods,f=e.days,d=e.shortDays,h=e.months,p=e.shortMonths,m=g(c),X=v(c),me=g(f),Me=v(f),Se=g(d),Ce=v(d),Oe=g(h),Re=v(h),Ne=g(p),Le=v(p),De={a:function(e){return d[e.getDay()]},A:function(e){return f[e.getDay()]},b:function(e){return p[e.getMonth()]},B:function(e){return h[e.getMonth()]},c:null,d:z,e:z,f:q,g:ee,G:ne,H:j,I:B,j:U,L:$,m:H,M:V,p:function(e){return c[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Ee,s:Te,S:W,u:G,U:Y,V:K,w:Z,W:J,x:null,X:null,y:Q,Y:te,Z:re,"%":ke},Pe={a:function(e){return d[e.getUTCDay()]},A:function(e){return f[e.getUTCDay()]},b:function(e){return p[e.getUTCMonth()]},B:function(e){return h[e.getUTCMonth()]},c:null,d:ie,e:ie,f:ce,g:xe,G:we,H:ae,I:oe,j:se,L:le,m:ue,M:fe,p:function(e){return c[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Ee,s:Te,S:de,u:he,U:pe,V:ge,w:ve,W:ye,x:null,X:null,y:be,Y:_e,Z:Ae,"%":ke},Ie={a:function(e,t,n){var r=Se.exec(t.slice(n));return r?(e.w=Ce.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=me.exec(t.slice(n));return r?(e.w=Me.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=Ne.exec(t.slice(n));return r?(e.m=Le.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=Oe.exec(t.slice(n));return r?(e.m=Re.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return je(e,t,n,r)},d:S,e:S,f:D,g:k,G:A,H:O,I:O,j:C,L,m:M,M:R,p:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.p=X.get(r[0].toLowerCase()),n+r[0].length):-1},q:T,Q:I,s:F,S:N,u:b,U:x,V:_,w:y,W:w,x:function(e,t,r){return je(e,n,t,r)},X:function(e,t,n){return je(e,a,t,n)},y:k,Y:A,Z:E,"%":P};function Fe(e,t){return function(n){var r,i,a,o=[],s=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===e.charCodeAt(s)&&(o.push(e.slice(l,s)),null!=(i=u[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(a=t[r])&&(r=a(n,i)),o.push(r),l=s+1);return o.push(e.slice(l,s)),o.join("")}}function ze(e,t){return function(n){var a,c,u=l(1900,void 0,1);if(je(u,e,n+="",0)!=n.length)return null;if("Q"in u)return new Date(u.Q);if("s"in u)return new Date(1e3*u.s+("L"in u?u.L:0));if(t&&!("Z"in u)&&(u.Z=0),"p"in u&&(u.H=u.H%12+12*u.p),void 0===u.m&&(u.m="q"in u?u.q:0),"V"in u){if(u.V<1||u.V>53)return null;"w"in u||(u.w=1),"Z"in u?(c=(a=s(l(u.y,0,1))).getUTCDay(),a=c>4||0===c?r.rt.ceil(a):(0,r.rt)(a),a=i.dA.offset(a,7*(u.V-1)),u.y=a.getUTCFullYear(),u.m=a.getUTCMonth(),u.d=a.getUTCDate()+(u.w+6)%7):(c=(a=o(l(u.y,0,1))).getDay(),a=c>4||0===c?r.AB.ceil(a):(0,r.AB)(a),a=i.UA.offset(a,7*(u.V-1)),u.y=a.getFullYear(),u.m=a.getMonth(),u.d=a.getDate()+(u.w+6)%7)}else("W"in u||"U"in u)&&("w"in u||(u.w="u"in u?u.u%7:"W"in u?1:0),c="Z"in u?s(l(u.y,0,1)).getUTCDay():o(l(u.y,0,1)).getDay(),u.m=0,u.d="W"in u?(u.w+6)%7+7*u.W-(c+5)%7:u.w+7*u.U-(c+6)%7);return"Z"in u?(u.H+=u.Z/100|0,u.M+=u.Z%100,s(u)):o(u)}}function je(e,t,n,r){for(var i,a,o=0,s=t.length,l=n.length;o<s;){if(r>=l)return-1;if(37===(i=t.charCodeAt(o++))){if(i=t.charAt(o++),!(a=Ie[i in u?t.charAt(o++):i])||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return De.x=Fe(n,De),De.X=Fe(a,De),De.c=Fe(t,De),Pe.x=Fe(n,Pe),Pe.X=Fe(a,Pe),Pe.c=Fe(t,Pe),{format:function(e){var t=Fe(e+="",De);return t.toString=function(){return e},t},parse:function(e){var t=ze(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=Fe(e+="",Pe);return t.toString=function(){return e},t},utcParse:function(e){var t=ze(e+="",!0);return t.toString=function(){return e},t}}}var u={"-":"",_:" ",0:"0"},f=/^\s*\d+/,d=/^%/,h=/[\\^$*+?|[\]().{}]/g;function p(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function m(e){return e.replace(h,"\\$&")}function g(e){return new RegExp("^(?:"+e.map(m).join("|")+")","i")}function v(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function y(e,t,n){var r=f.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function b(e,t,n){var r=f.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function x(e,t,n){var r=f.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function _(e,t,n){var r=f.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function w(e,t,n){var r=f.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function A(e,t,n){var r=f.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function k(e,t,n){var r=f.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function E(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function T(e,t,n){var r=f.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function M(e,t,n){var r=f.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function S(e,t,n){var r=f.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function C(e,t,n){var r=f.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function O(e,t,n){var r=f.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function R(e,t,n){var r=f.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function N(e,t,n){var r=f.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function L(e,t,n){var r=f.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function D(e,t,n){var r=f.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function P(e,t,n){var r=d.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function I(e,t,n){var r=f.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function F(e,t,n){var r=f.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function z(e,t){return p(e.getDate(),t,2)}function j(e,t){return p(e.getHours(),t,2)}function B(e,t){return p(e.getHours()%12||12,t,2)}function U(e,t){return p(1+i.UA.count((0,a.he)(e),e),t,3)}function $(e,t){return p(e.getMilliseconds(),t,3)}function q(e,t){return $(e,t)+"000"}function H(e,t){return p(e.getMonth()+1,t,2)}function V(e,t){return p(e.getMinutes(),t,2)}function W(e,t){return p(e.getSeconds(),t,2)}function G(e){var t=e.getDay();return 0===t?7:t}function Y(e,t){return p(r.YP.count((0,a.he)(e)-1,e),t,2)}function X(e){var t=e.getDay();return t>=4||0===t?(0,r.Mo)(e):r.Mo.ceil(e)}function K(e,t){return e=X(e),p(r.Mo.count((0,a.he)(e),e)+(4===(0,a.he)(e).getDay()),t,2)}function Z(e){return e.getDay()}function J(e,t){return p(r.AB.count((0,a.he)(e)-1,e),t,2)}function Q(e,t){return p(e.getFullYear()%100,t,2)}function ee(e,t){return p((e=X(e)).getFullYear()%100,t,2)}function te(e,t){return p(e.getFullYear()%1e4,t,4)}function ne(e,t){var n=e.getDay();return p((e=n>=4||0===n?(0,r.Mo)(e):r.Mo.ceil(e)).getFullYear()%1e4,t,4)}function re(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+p(t/60|0,"0",2)+p(t%60,"0",2)}function ie(e,t){return p(e.getUTCDate(),t,2)}function ae(e,t){return p(e.getUTCHours(),t,2)}function oe(e,t){return p(e.getUTCHours()%12||12,t,2)}function se(e,t){return p(1+i.dA.count((0,a.Mb)(e),e),t,3)}function le(e,t){return p(e.getUTCMilliseconds(),t,3)}function ce(e,t){return le(e,t)+"000"}function ue(e,t){return p(e.getUTCMonth()+1,t,2)}function fe(e,t){return p(e.getUTCMinutes(),t,2)}function de(e,t){return p(e.getUTCSeconds(),t,2)}function he(e){var t=e.getUTCDay();return 0===t?7:t}function pe(e,t){return p(r.Hl.count((0,a.Mb)(e)-1,e),t,2)}function me(e){var t=e.getUTCDay();return t>=4||0===t?(0,r.pT)(e):r.pT.ceil(e)}function ge(e,t){return e=me(e),p(r.pT.count((0,a.Mb)(e),e)+(4===(0,a.Mb)(e).getUTCDay()),t,2)}function ve(e){return e.getUTCDay()}function ye(e,t){return p(r.rt.count((0,a.Mb)(e)-1,e),t,2)}function be(e,t){return p(e.getUTCFullYear()%100,t,2)}function xe(e,t){return p((e=me(e)).getUTCFullYear()%100,t,2)}function _e(e,t){return p(e.getUTCFullYear()%1e4,t,4)}function we(e,t){var n=e.getUTCDay();return p((e=n>=4||0===n?(0,r.pT)(e):r.pT.ceil(e)).getUTCFullYear()%1e4,t,4)}function Ae(){return"+0000"}function ke(){return"%"}function Ee(e){return+e}function Te(e){return Math.floor(+e/1e3)}},68678:(e,t,n)=>{"use strict";n.d(t,{NT:()=>o,TW:()=>c,UA:()=>a,dA:()=>s,ou:()=>l,yE:()=>u});var r=n(19383),i=n(79278);const a=(0,r.f)((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*i.rR)/i.Nm),(e=>e.getDate()-1)),o=a.range,s=(0,r.f)((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/i.Nm),(e=>e.getUTCDate()-1)),l=s.range,c=(0,r.f)((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/i.Nm),(e=>Math.floor(e/i.Nm))),u=c.range},79278:(e,t,n)=>{"use strict";n.d(t,{Fq:()=>s,JJ:()=>a,MP:()=>c,Nm:()=>o,Pv:()=>l,Tt:()=>r,rR:()=>i});const r=1e3,i=60*r,a=60*i,o=24*a,s=7*o,l=30*o,c=365*o},16532:(e,t,n)=>{"use strict";n.d(t,{Ag:()=>a,L6:()=>o,iA:()=>l,pz:()=>s});var r=n(19383),i=n(79278);const a=(0,r.f)((e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*i.Tt-e.getMinutes()*i.rR)}),((e,t)=>{e.setTime(+e+t*i.JJ)}),((e,t)=>(t-e)/i.JJ),(e=>e.getHours())),o=a.range,s=(0,r.f)((e=>{e.setUTCMinutes(0,0,0)}),((e,t)=>{e.setTime(+e+t*i.JJ)}),((e,t)=>(t-e)/i.JJ),(e=>e.getUTCHours())),l=s.range},5032:(e,t,n)=>{"use strict";n.r(t),n.d(t,{timeDay:()=>l.UA,timeDays:()=>l.NT,timeFriday:()=>c.TU,timeFridays:()=>c.SQ,timeHour:()=>s.Ag,timeHours:()=>s.L6,timeInterval:()=>r.f,timeMillisecond:()=>i.y,timeMilliseconds:()=>i.R,timeMinute:()=>o.wX,timeMinutes:()=>o.rn,timeMonday:()=>c.AB,timeMondays:()=>c.h8,timeMonth:()=>u.Ui,timeMonths:()=>u.Bz,timeSaturday:()=>c.rG,timeSaturdays:()=>c._M,timeSecond:()=>a.R,timeSeconds:()=>a.Y,timeSunday:()=>c.YP,timeSundays:()=>c.vD,timeThursday:()=>c.Mo,timeThursdays:()=>c.HU,timeTickInterval:()=>d.yE,timeTicks:()=>d.Cf,timeTuesday:()=>c.PG,timeTuesdays:()=>c.OK,timeWednesday:()=>c.Gu,timeWednesdays:()=>c.Dr,timeWeek:()=>c.YP,timeWeeks:()=>c.vD,timeYear:()=>f.he,timeYears:()=>f.Yo,unixDay:()=>l.TW,unixDays:()=>l.yE,utcDay:()=>l.dA,utcDays:()=>l.ou,utcFriday:()=>c.a1,utcFridays:()=>c.Zn,utcHour:()=>s.pz,utcHours:()=>s.iA,utcMillisecond:()=>i.y,utcMilliseconds:()=>i.R,utcMinute:()=>o.vD,utcMinutes:()=>o.Y4,utcMonday:()=>c.rt,utcMondays:()=>c.ON,utcMonth:()=>u.R6,utcMonths:()=>u.oi,utcSaturday:()=>c.c8,utcSaturdays:()=>c.Xo,utcSecond:()=>a.R,utcSeconds:()=>a.Y,utcSunday:()=>c.Hl,utcSundays:()=>c.aZ,utcThursday:()=>c.pT,utcThursdays:()=>c.wr,utcTickInterval:()=>d.lk,utcTicks:()=>d.$Z,utcTuesday:()=>c.sr,utcTuesdays:()=>c.jN,utcWednesday:()=>c.z2,utcWednesdays:()=>c.G6,utcWeek:()=>c.Hl,utcWeeks:()=>c.aZ,utcYear:()=>f.Mb,utcYears:()=>f.jH});var r=n(19383),i=n(58437),a=n(89398),o=n(47666),s=n(16532),l=n(68678),c=n(40846),u=n(22086),f=n(86275),d=n(46734)},19383:(e,t,n)=>{"use strict";n.d(t,{f:()=>a});const r=new Date,i=new Date;function a(e,t,n,o){function s(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return s.floor=t=>(e(t=new Date(+t)),t),s.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),s.round=e=>{const t=s(e),n=s.ceil(e);return e-t<n-e?t:n},s.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),s.range=(n,r,i)=>{const a=[];if(n=s.ceil(n),i=null==i?1:Math.floor(i),!(n<r&&i>0))return a;let o;do{a.push(o=new Date(+n)),t(n,i),e(n)}while(o<n&&n<r);return a},s.filter=n=>a((t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),((e,r)=>{if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););})),n&&(s.count=(t,a)=>(r.setTime(+t),i.setTime(+a),e(r),e(i),Math.floor(n(r,i))),s.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?s.filter(o?t=>o(t)%e==0:t=>s.count(0,t)%e==0):s:null)),s}},58437:(e,t,n)=>{"use strict";n.d(t,{R:()=>a,y:()=>i});var r=n(19383);const i=(0,r.f)((()=>{}),((e,t)=>{e.setTime(+e+t)}),((e,t)=>t-e));i.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?(0,r.f)((t=>{t.setTime(Math.floor(t/e)*e)}),((t,n)=>{t.setTime(+t+n*e)}),((t,n)=>(n-t)/e)):i:null);const a=i.range},47666:(e,t,n)=>{"use strict";n.d(t,{Y4:()=>l,rn:()=>o,vD:()=>s,wX:()=>a});var r=n(19383),i=n(79278);const a=(0,r.f)((e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*i.Tt)}),((e,t)=>{e.setTime(+e+t*i.rR)}),((e,t)=>(t-e)/i.rR),(e=>e.getMinutes())),o=a.range,s=(0,r.f)((e=>{e.setUTCSeconds(0,0)}),((e,t)=>{e.setTime(+e+t*i.rR)}),((e,t)=>(t-e)/i.rR),(e=>e.getUTCMinutes())),l=s.range},22086:(e,t,n)=>{"use strict";n.d(t,{Bz:()=>a,R6:()=>o,Ui:()=>i,oi:()=>s});var r=n(19383);const i=(0,r.f)((e=>{e.setDate(1),e.setHours(0,0,0,0)}),((e,t)=>{e.setMonth(e.getMonth()+t)}),((e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())),(e=>e.getMonth())),a=i.range,o=(0,r.f)((e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)}),((e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())),(e=>e.getUTCMonth())),s=o.range},89398:(e,t,n)=>{"use strict";n.d(t,{R:()=>a,Y:()=>o});var r=n(19383),i=n(79278);const a=(0,r.f)((e=>{e.setTime(e-e.getMilliseconds())}),((e,t)=>{e.setTime(+e+t*i.Tt)}),((e,t)=>(t-e)/i.Tt),(e=>e.getUTCSeconds())),o=a.range},46734:(e,t,n)=>{"use strict";n.d(t,{$Z:()=>m,Cf:()=>v,lk:()=>g,yE:()=>y});var r=n(97672),i=n(41314),a=n(79278),o=n(58437),s=n(89398),l=n(47666),c=n(16532),u=n(68678),f=n(40846),d=n(22086),h=n(86275);function p(e,t,n,l,c,u){const f=[[s.R,1,a.Tt],[s.R,5,5*a.Tt],[s.R,15,15*a.Tt],[s.R,30,30*a.Tt],[u,1,a.rR],[u,5,5*a.rR],[u,15,15*a.rR],[u,30,30*a.rR],[c,1,a.JJ],[c,3,3*a.JJ],[c,6,6*a.JJ],[c,12,12*a.JJ],[l,1,a.Nm],[l,2,2*a.Nm],[n,1,a.Fq],[t,1,a.Pv],[t,3,3*a.Pv],[e,1,a.MP]];function d(t,n,s){const l=Math.abs(n-t)/s,c=(0,r.A)((([,,e])=>e)).right(f,l);if(c===f.length)return e.every((0,i.sG)(t/a.MP,n/a.MP,s));if(0===c)return o.y.every(Math.max((0,i.sG)(t,n,s),1));const[u,d]=f[l/f[c-1][2]<f[c][2]/l?c-1:c];return u.every(d)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const i=n&&"function"==typeof n.range?n:d(e,t,n),a=i?i.range(e,+t+1):[];return r?a.reverse():a},d]}const[m,g]=p(h.Mb,d.R6,f.Hl,u.TW,c.pz,l.vD),[v,y]=p(h.he,d.Ui,f.YP,u.UA,c.Ag,l.wX)},40846:(e,t,n)=>{"use strict";n.d(t,{AB:()=>s,Dr:()=>g,G6:()=>R,Gu:()=>c,HU:()=>v,Hl:()=>_,Mo:()=>u,OK:()=>m,ON:()=>C,PG:()=>l,SQ:()=>y,TU:()=>f,Xo:()=>D,YP:()=>o,Zn:()=>L,_M:()=>b,a1:()=>T,aZ:()=>S,c8:()=>M,h8:()=>p,jN:()=>O,pT:()=>E,rG:()=>d,rt:()=>w,sr:()=>A,vD:()=>h,wr:()=>N,z2:()=>k});var r=n(19383),i=n(79278);function a(e){return(0,r.f)((t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),((e,t)=>{e.setDate(e.getDate()+7*t)}),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*i.rR)/i.Fq))}const o=a(0),s=a(1),l=a(2),c=a(3),u=a(4),f=a(5),d=a(6),h=o.range,p=s.range,m=l.range,g=c.range,v=u.range,y=f.range,b=d.range;function x(e){return(0,r.f)((t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)}),((e,t)=>(t-e)/i.Fq))}const _=x(0),w=x(1),A=x(2),k=x(3),E=x(4),T=x(5),M=x(6),S=_.range,C=w.range,O=A.range,R=k.range,N=E.range,L=T.range,D=M.range},86275:(e,t,n)=>{"use strict";n.d(t,{Mb:()=>o,Yo:()=>a,he:()=>i,jH:()=>s});var r=n(19383);const i=(0,r.f)((e=>{e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,t)=>{e.setFullYear(e.getFullYear()+t)}),((e,t)=>t.getFullYear()-e.getFullYear()),(e=>e.getFullYear()));i.every=e=>isFinite(e=Math.floor(e))&&e>0?(0,r.f)((t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,n)=>{t.setFullYear(t.getFullYear()+n*e)})):null;const a=i.range,o=(0,r.f)((e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)}),((e,t)=>t.getUTCFullYear()-e.getUTCFullYear()),(e=>e.getUTCFullYear()));o.every=e=>isFinite(e=Math.floor(e))&&e>0?(0,r.f)((t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null;const s=o.range},4397:(e,t,n)=>{"use strict";n.d(t,{M4:()=>m,O1:()=>g,tB:()=>h});var r,i,a=0,o=0,s=0,l=0,c=0,u=0,f="object"==typeof performance&&performance.now?performance:Date,d="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function h(){return c||(d(p),c=f.now()+u)}function p(){c=0}function m(){this._call=this._time=this._next=null}function g(e,t,n){var r=new m;return r.restart(e,t,n),r}function v(){c=(l=f.now())+u,a=o=0;try{!function(){h(),++a;for(var e,t=r;t;)(e=c-t._time)>=0&&t._call.call(void 0,e),t=t._next;--a}()}finally{a=0,function(){var e,t,n=r,a=1/0;for(;n;)n._call?(a>n._time&&(a=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:r=t);i=e,b(a)}(),c=0}}function y(){var e=f.now(),t=e-l;t>1e3&&(u-=t,l=e)}function b(e){a||(o&&(o=clearTimeout(o)),e-c>24?(e<1/0&&(o=setTimeout(v,e-f.now()-u)),s&&(s=clearInterval(s))):(s||(l=f.now(),s=setInterval(y,1e3)),a=1,d(v)))}m.prototype=g.prototype={constructor:m,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?h():+n)+(null==t?0:+t),this._next||i===this||(i?i._next=this:r=this,i=this),this._call=e,this._time=n,b()},stop:function(){this._call&&(this._call=null,this._time=1/0,b())}}},23648:e=>{"use strict";e.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},2362:e=>{"use strict";e.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},87486:e=>{"use strict";e.exports=JSON.parse('["normal","italic","oblique"]')},99803:e=>{"use strict";e.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},54324:e=>{"use strict";e.exports=JSON.parse('["inherit","initial","unset"]')},94316:e=>{"use strict";e.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.b=document.baseURI||self.location.href,n.nc=void 0;var r={};(()=>{"use strict";var e={};n.r(e),n.d(e,{JsonPatchError:()=>Fo,_areEquals:()=>Go,applyOperation:()=>$o,applyPatch:()=>qo,applyReducer:()=>Ho,deepClone:()=>zo,getValueByPointer:()=>Uo,validate:()=>Wo,validator:()=>Vo});var t={};n.r(t),n.d(t,{compare:()=>ts,generate:()=>Qo,observe:()=>Jo,unobserve:()=>Zo});var r={};n.r(r),n.d(r,{aggregate:()=>Rh,bin:()=>Nh,collect:()=>Dh,compare:()=>Ph,countpattern:()=>Fh,cross:()=>zh,density:()=>$h,dotbin:()=>Gh,expression:()=>Yh,extent:()=>Kh,facet:()=>Jh,field:()=>Qh,filter:()=>tp,flatten:()=>np,fold:()=>rp,formula:()=>ip,generate:()=>ap,impute:()=>lp,joinaggregate:()=>cp,kde:()=>up,key:()=>fp,load:()=>hp,lookup:()=>mp,multiextent:()=>gp,multivalues:()=>yp,params:()=>xp,pivot:()=>_p,prefacet:()=>wp,project:()=>Ap,proxy:()=>kp,quantile:()=>Ep,relay:()=>Tp,sample:()=>Mp,sequence:()=>Sp,sieve:()=>Cp,subflow:()=>Zh,timeunit:()=>Op,tupleindex:()=>Np,values:()=>Lp,window:()=>zp});var i={};n.r(i),n.d(i,{bound:()=>XA,identifier:()=>JA,mark:()=>QA,overlap:()=>ek,render:()=>sk,viewlayout:()=>Ck});var a={};n.r(a),n.d(a,{axisticks:()=>Rk,datajoin:()=>Nk,encode:()=>Dk,legendentries:()=>Pk,linkpath:()=>Bk,pie:()=>Vk,scale:()=>Yk,sortitems:()=>Jk,stack:()=>rE});var o={};n.r(o),n.d(o,{contour:()=>BS,geojson:()=>qS,geopath:()=>HS,geopoint:()=>VS,geoshape:()=>WS,graticule:()=>GS,heatmap:()=>YS,isocontour:()=>OS,kde2d:()=>FS,projection:()=>KS});var s={};n.r(s),n.d(s,{force:()=>iC});var l={};n.r(l),n.d(l,{nest:()=>AC,pack:()=>CC,partition:()=>RC,stratify:()=>NC,tree:()=>PC,treelinks:()=>IC,treemap:()=>jC});var c={};n.r(c),n.d(c,{label:()=>oO});var u={};n.r(u),n.d(u,{loess:()=>lO,regression:()=>uO});var f={};n.r(f),n.d(f,{voronoi:()=>BO});var d={};n.r(d),n.d(d,{wordcloud:()=>nR});var h={};n.r(h),n.d(h,{crossfilter:()=>cR,resolvefilter:()=>uR});var p={};n.r(p),n.d(p,{Bounds:()=>Ab,CanvasHandler:()=>aw,CanvasRenderer:()=>dw,DATE:()=>_c,DAY:()=>wc,DAYOFYEAR:()=>Ac,Dataflow:()=>ed,Debug:()=>ks,Error:()=>_s,EventStream:()=>jf,Gradient:()=>My,GroupItem:()=>Eb,HOURS:()=>kc,Handler:()=>I_,HybridHandler:()=>rA,HybridRenderer:()=>nA,Info:()=>As,Item:()=>kb,MILLISECONDS:()=>Mc,MINUTES:()=>Ec,MONTH:()=>bc,Marks:()=>x_,MultiPulse:()=>Xf,None:()=>xs,Operator:()=>If,Parameters:()=>Lf,Pulse:()=>Vf,QUARTER:()=>yc,RenderType:()=>sA,Renderer:()=>z_,ResourceLoader:()=>Tb,SECONDS:()=>Tc,SVGHandler:()=>pw,SVGRenderer:()=>Bw,SVGStringRenderer:()=>Qw,Scenegraph:()=>S_,TIME_UNITS:()=>Sc,Transform:()=>nd,View:()=>fI,WEEK:()=>xc,Warn:()=>ws,YEAR:()=>vc,accessor:()=>is,accessorFields:()=>os,accessorName:()=>as,array:()=>Zs,ascending:()=>nl,bandwidthNRD:()=>xd,bin:()=>_d,bootstrapCI:()=>kd,boundClip:()=>mA,boundContext:()=>Gb,boundItem:()=>__,boundMark:()=>A_,boundStroke:()=>Cb,changeset:()=>Rf,clampRange:()=>Js,codegenExpression:()=>eL,compare:()=>tl,constant:()=>ol,cumulativeLogNormal:()=>jd,cumulativeNormal:()=>Ld,cumulativeUniform:()=>Vd,dayofyear:()=>Pc,debounce:()=>sl,defaultLocale:()=>$u,definition:()=>id,densityLogNormal:()=>zd,densityNormal:()=>Nd,densityUniform:()=>Hd,domChild:()=>N_,domClear:()=>L_,domCreate:()=>O_,domFind:()=>R_,dotbin:()=>Ed,error:()=>us,expressionFunction:()=>cP,extend:()=>ll,extent:()=>cl,extentIndex:()=>ul,falsy:()=>ys,fastmap:()=>pl,field:()=>ds,flush:()=>ml,font:()=>d_,fontFamily:()=>f_,fontSize:()=>o_,format:()=>hf,formatLocale:()=>Du,formats:()=>pf,hasOwnProperty:()=>dl,id:()=>hs,identity:()=>ps,inferType:()=>of,inferTypes:()=>sf,ingest:()=>Ef,inherits:()=>gl,inrange:()=>vl,interpolate:()=>Zv,interpolateColors:()=>Yv,interpolateRange:()=>Gv,intersect:()=>uA,intersectBoxLine:()=>ix,intersectPath:()=>ex,intersectPoint:()=>tx,intersectRule:()=>rx,isArray:()=>Ts,isBoolean:()=>yl,isDate:()=>bl,isFunction:()=>Qs,isIterable:()=>xl,isNumber:()=>_l,isObject:()=>Ms,isRegExp:()=>wl,isString:()=>Al,isTuple:()=>wf,key:()=>kl,lerp:()=>El,lineHeight:()=>s_,loader:()=>vf,locale:()=>Uu,logger:()=>Es,lruCache:()=>Ml,markup:()=>Nw,merge:()=>Sl,mergeConfig:()=>Cs,multiLineOffset:()=>c_,one:()=>gs,pad:()=>Ol,panLinear:()=>Bs,panLog:()=>Us,panPow:()=>$s,panSymlog:()=>qs,parse:()=>GB,parseExpression:()=>ZN,parseSelector:()=>CI,path:()=>Dm.Ae,pathCurves:()=>Cy,pathEqual:()=>yA,pathParse:()=>Py,pathRectangle:()=>ab,pathRender:()=>Wy,pathSymbols:()=>Ky,pathTrail:()=>ob,peek:()=>Ns,point:()=>P_,projection:()=>gS,quantileLogNormal:()=>Bd,quantileNormal:()=>Dd,quantileUniform:()=>Wd,quantiles:()=>yd,quantizeInterpolator:()=>Xv,quarter:()=>Xs,quartiles:()=>bd,random:()=>wd,randomInteger:()=>Md,randomKDE:()=>Id,randomLCG:()=>Td,randomLogNormal:()=>Ud,randomMixture:()=>$d,randomNormal:()=>Pd,randomUniform:()=>Gd,read:()=>gf,regressionConstant:()=>Yd,regressionExp:()=>th,regressionLinear:()=>Qd,regressionLoess:()=>lh,regressionLog:()=>eh,regressionPoly:()=>ih,regressionPow:()=>nh,regressionQuad:()=>rh,renderModule:()=>cA,repeat:()=>Cl,resetDefaultLocale:()=>qu,resetSVGClipId:()=>_b,resetSVGDefIds:()=>bA,responseType:()=>mf,runtimeContext:()=>bP,sampleCurve:()=>dh,sampleLogNormal:()=>Fd,sampleNormal:()=>Rd,sampleUniform:()=>qd,scale:()=>Fv,sceneEqual:()=>vA,sceneFromJSON:()=>T_,scenePickVisit:()=>mx,sceneToJSON:()=>E_,sceneVisit:()=>px,sceneZOrder:()=>hx,scheme:()=>ty,serializeXML:()=>Lw,setHybridRendererOptions:()=>tA,setRandom:()=>Ad,span:()=>Rl,splitAccessPath:()=>fs,stringValue:()=>Nl,textMetrics:()=>e_,timeBin:()=>Eu,timeFloor:()=>Zc,timeFormatLocale:()=>ju,timeInterval:()=>ru,timeOffset:()=>ou,timeSequence:()=>cu,timeUnitSpecifier:()=>Nc,timeUnits:()=>Oc,toBoolean:()=>Ll,toDate:()=>Pl,toNumber:()=>Ls,toSet:()=>Fl,toString:()=>Il,transform:()=>ad,transforms:()=>rd,truncate:()=>zl,truthy:()=>vs,tupleid:()=>Af,typeParsers:()=>nf,utcFloor:()=>eu,utcInterval:()=>iu,utcOffset:()=>su,utcSequence:()=>uu,utcdayofyear:()=>Uc,utcquarter:()=>Ks,utcweek:()=>$c,version:()=>YB,visitArray:()=>jl,week:()=>Ic,writeConfig:()=>Os,zero:()=>ms,zoomLinear:()=>Vs,zoomLog:()=>Ws,zoomPow:()=>Gs,zoomSymlog:()=>Ys});var m={};n.r(m),n.d(m,{accessPathDepth:()=>qU,accessPathWithDatum:()=>FU,compile:()=>J2,contains:()=>vU,deepEqual:()=>QU,deleteNestedProperty:()=>PU,duplicate:()=>fU,entries:()=>RU,every:()=>bU,fieldIntersection:()=>MU,flatAccessWithDatum:()=>zU,getFirstDefined:()=>HU,hasIntersection:()=>EU,hasProperty:()=>t$,hash:()=>mU,internalField:()=>YU,isBoolean:()=>NU,isEmpty:()=>SU,isEqual:()=>AU,isInternalField:()=>XU,isNullOrFalse:()=>gU,isNumeric:()=>ZU,keys:()=>CU,logicalExpr:()=>DU,mergeDeep:()=>xU,never:()=>dU,normalize:()=>lZ,normalizeAngle:()=>KU,omit:()=>pU,pick:()=>hU,prefixGenerator:()=>TU,removePathFromField:()=>$U,replaceAll:()=>UU,replacePathInField:()=>BU,resetIdCounter:()=>GU,setEqual:()=>kU,some:()=>yU,stringify:()=>e$,titleCase:()=>IU,unique:()=>wU,uniqueId:()=>WU,vals:()=>OU,varName:()=>LU,version:()=>Q2});var g={};n.r(g),n.d(g,{carbong10:()=>e5,carbong100:()=>n5,carbong90:()=>t5,carbonwhite:()=>Q3,dark:()=>i3,excel:()=>o3,fivethirtyeight:()=>f3,ggplot2:()=>h3,googlecharts:()=>D3,latimes:()=>b3,powerbi:()=>G3,quartz:()=>w3,urbaninstitute:()=>O3,version:()=>r5,vox:()=>k3});var v=n(57004);function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(null,arguments)}const b=e=>v.createElement("svg",y({viewBox:"0 0 75 96",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"alert-errorShield"},e),v.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M74.2999 44.7891V44.7888V44.7884C74.3063 43.1815 74.3128 41.5747 74.3128 39.9681C74.3128 38.1827 74.3096 36.3972 74.3064 34.6118C74.2986 30.1478 74.2907 25.6838 74.3321 21.2199C74.3514 19.1753 73.5563 17.8778 71.7215 16.957C60.9155 11.535 50.1384 6.06473 39.3678 0.575149C37.8452 -0.200798 36.4514 -0.184699 34.9385 0.58159C24.0842 6.08405 13.217 11.5608 2.3434 17.0214C0.753235 17.8199 0 19.0369 0 20.8013C0.00482848 26.7288 0.00482843 32.6571 0.00482838 38.5855C0.00482833 44.5137 0.00482828 50.4419 0.00965647 56.3693C0.0160944 62.1744 1.57407 67.5256 4.68679 72.4356C8.27915 78.1023 13.2041 82.3973 18.6925 86.0968C24.0005 89.6771 29.7399 92.4653 35.5952 95.0153C36.6961 95.4951 37.7744 95.4371 38.8624 94.9606C43.4559 92.9483 47.9721 90.7814 52.2854 88.2089C57.3778 85.1727 62.0936 81.6536 66.0465 77.1975C71.5123 71.035 74.4608 63.913 74.3288 55.5805C74.271 51.9844 74.2854 48.3869 74.2999 44.7899V44.7891ZM37 61C40.848 61 43.9785 64.1187 43.9998 67.9742C44.0255 71.8811 40.8693 75.0255 36.9488 74.9998C33.0794 74.9741 29.9745 71.8383 30.0002 67.9742C30.0215 64.1187 33.152 61 37 61ZM44.7289 28.0004C44.8192 27.1555 44.9095 26.3108 45 25.4664C44.9563 22.8716 43.6391 21.0038 41.6269 19.5066C39.0947 17.6291 35.6973 17.4799 32.8394 19.2081C30.3849 20.6957 28.4942 23.3771 29.1212 26.694C29.2444 27.3493 29.3027 28.0154 29.3611 28.6821C29.3902 29.0145 29.4194 29.3471 29.4565 29.6787C29.6522 31.4618 29.8464 33.245 30.0406 35.0281C30.58 39.9795 31.1193 44.9303 31.6875 49.8784C32.0228 52.8005 34.1565 54.8946 36.7568 54.9957C39.673 55.1113 41.9574 52.8727 42.3511 49.4788C42.8274 45.3821 43.2843 41.2757 43.7363 37.1741C44.0752 34.1155 44.4022 31.0568 44.7289 28.0004Z"}));function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x.apply(null,arguments)}const _=e=>v.createElement("svg",x({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",key:"warning-icon",className:"alert-warningIcon"},e),v.createElement("path",{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"}));function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w.apply(null,arguments)}const A=e=>v.createElement("svg",w({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",className:"alert-infoCircle"},e),v.createElement("path",{d:"M8 4.167c-.667 0-1.167.527-1.167 1.166C6.833 6 7.333 6.5 8 6.5c.639 0 1.167-.5 1.167-1.167 0-.639-.528-1.166-1.167-1.166zm1.556 7.055v-.666a.359.359 0 00-.334-.334H8.89V7.444a.358.358 0 00-.333-.333H6.778a.338.338 0 00-.334.333v.667a.32.32 0 00.334.333h.333v1.778h-.333a.338.338 0 00-.334.334v.666c0 .195.14.334.334.334h2.444a.338.338 0 00.334-.334z"}),v.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.222A6.222 6.222 0 108 1.778a6.222 6.222 0 000 12.444zM8 16A8 8 0 108 0a8 8 0 000 16z"}));var k=n(98082),E=n.n(k);class T extends v.PureComponent{render(){const{alarms:e,alarm_options:t={}}=this.props;if(0===e.length)return null;const n=e.filter((e=>"WARN"===e.level)),r=e.filter((e=>"ERROR"===e.level)),i=e.filter((e=>"INFO"===e.level)),a=e.filter((e=>null!==e.formatted_value&&""!==e.formatted_value&&void 0!==e.formatted_value)).length>0,o=[];if(r.length>0){let e="";e=r.length>1?`${r.length} errors`:"1 error",o.push(v.createElement(b,{key:"danger-icon"})),o.push(v.createElement("span",{key:"danger",className:"text-brand-red"},e))}if(n.length>0&&r.length>0&&(0===i.length?o.push(" and "):o.push(", ")),n.length>0){let e="";e=n.length>1?`${n.length} warnings`:"1 warning",o.push(v.createElement(_,{key:"warning-icon"})),o.push(v.createElement("span",{key:"warning",className:"text-brand-yellow"},e))}if(o.length>0&&i.length>0&&o.push(" and "),i.length>0){let e="";e=i.length>1?`${i.length} informational notices`:"1 informational notice",o.push(v.createElement(A,{key:"info-icon"})),o.push(v.createElement("span",{key:"info",className:"text-brand-darkblue"},e))}return v.createElement("div",{className:"container alert-container","data-test":"alerts-table"},v.createElement("div",null,v.createElement("h2",{className:"alert-header"},"Alerts"),t.hide_hide_alert_analysis?null:v.createElement("div",{className:"alert-analysis"},"The analysis detected ",o,"."),v.createElement("table",{className:"table table-hover table-sm"},v.createElement("thead",null,v.createElement("tr",null,v.createElement("td",null),v.createElement("td",null,"Alert"),a&&v.createElement("td",null,"Value"),v.createElement("td",null,"Detail"))),v.createElement("tbody",null,E()(r,((e,n)=>{let{title:r,formatted_value:i,message:o}=e;return v.createElement("tr",{key:n,className:"error"},v.createElement("td",null,t.use_triangle_icon_for_errors?v.createElement(_,{className:"alert-errorIcon"}):v.createElement(b,null)),v.createElement("td",null,r),a&&v.createElement("td",null,i),v.createElement("td",null,v.createElement("div",{dangerouslySetInnerHTML:{__html:o}})))})),E()(n,((e,t)=>{let{title:n,formatted_value:r,message:i}=e;return v.createElement("tr",{key:t,className:"warn"},v.createElement("td",null,v.createElement(_,null)),v.createElement("td",null,n),a&&v.createElement("td",null,r),v.createElement("td",null,v.createElement("div",{dangerouslySetInnerHTML:{__html:i}})))})),E()(i,((e,t)=>{let{title:n,formatted_value:r,message:i}=e;return v.createElement("tr",{key:t,className:"info"},v.createElement("td",null,v.createElement(A,null)),v.createElement("td",null,n),a&&v.createElement("td",null,r),v.createElement("td",null,v.createElement("div",{dangerouslySetInnerHTML:{__html:i}})))}))))))}}var M=n(36148),S=n.n(M),C=n(26535),O=n.n(C),R=n(47430),N=n.n(R),L=n(85757),D=n(90153),P=n.n(D),I=n(23166),F=n.n(I),z=n(32390),j=n.n(z),B=n(62089),U=n.n(B),$=n(26549),q=n.n($),H=n(31554),V=n.n(H),W=n(85003),G={};G.styleTagTransform=V(),G.setAttributes=U(),G.insert=j().bind(null,"head"),G.domAPI=F(),G.insertStyleElement=q();P()(W.A,G);W.A&&W.A.locals&&W.A.locals;var Y=n(99527),X=n.n(Y);X().register([n(61931),n(51892),n(9087),n(79513),n(88203),n(75126),n(55936),n(421),n(34091),n(6628),n(74480)]);const K=X();var Z=n(70012),J=n.n(Z);let Q;function ee(e){if(!function(){if(void 0===Q)try{const e=document.createElement("canvas");(e.getContext("webgl")||e.getContext("experimental-webgl")).getSupportedExtensions(),Q=!0}catch(e){Q=!1}return Q}()&&J()(e,"length"))for(let t=0;t<e.length;t++)"scattergl"===e[t].type&&(e[t].type="scatter")}var te=n(60816);class ne extends v.Component{renderPlot(){const{data:e,layout:t={},config:n={},size:r}=this.props;if(!r.width&&!t.width)return;ee(e);const i=t.width?{}:{...r,autosize:!1},a=S()({},{xaxis:{fixedrange:!0},yaxis:{fixedrange:!0},font:{family:"Overpass"},margin:{t:24}},t,i),o=S()({},{displaylogo:!1,displayModeBar:!1,showLink:!1},n);K.react(this.plot,{data:e,layout:a,config:o})}resizePlot(e){K.relayout(this.plot,e)}restylePlotly(e){K.restyle(this.plot,e)}componentDidMount(){this.renderPlot()}componentDidUpdate(e){const{config:t,data:n,layout:r,size:i,style:a}=e,{config:o,data:s,layout:l,size:c,style:u}=this.props;o===t&&s===n&&l===r||this.renderPlot(),u!==a&&this.restylePlotly(u),c===i||null!=l&&l.width||(this.plot.data?this.resizePlot(c):this.renderPlot())}render(){const{height:e="380px"}=this.props;return v.createElement("div",{className:"plot-wrapper",ref:e=>{this.plot=e},style:{height:e}})}}const re=(0,te.withSize)({monitorHeight:!0})(ne);var ie=n(21898),ae=n.n(ie);const oe=e=>{let{name:t,metric:n,threshold:r}=e;return v.createElement("div",{className:"metric-wrapper"},v.createElement("div",{className:`metric-number metric-threshold-${r}`,"data-test":ae()(t+"Value")},n),v.createElement("div",{className:"metric-name","data-test":ae()(t+"Text")},t))};var se=n(31844),le=n.n(se);const ce={assignment_colors:le().objectOf(le().string).isRequired,assignments:le().arrayOf(le().string).isRequired,excluded_categories:le().arrayOf(le().string),filtered_name:le().string,percent_filtered_name:le().string,show_thresholding_slider:le().bool,show_transparency_slider:le().bool,threshold_slider_title:le().string,threshold_slider_values:le().arrayOf(le().number),threshold_values:le().arrayOf(le().number),unfiltered_name:le().string,vector_names:le().arrayOf(le().string).isRequired,vectors:le().arrayOf(le().arrayOf(le().number)).isRequired};function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ue.apply(null,arguments)}function fe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class de extends v.Component{constructor(e){super(e),fe(this,"handleOnChange",(e=>{Number.isNaN(e)||this.setState({threshold:e})})),fe(this,"handleTransparencyChange",N()((e=>{this.changeablePlot&&this.changeablePlot.restylePlotly({opacity:e})}),100,{leading:!0}));const{assignment_colors:t,assignments:n}=e,r={};Object.keys(t).forEach((e=>r[e]=[]));for(const[e,t]of n.entries())r[t].push(e);this.state={threshold:0,category_indices:r}}render(){const{threshold:e,category_indices:t}=this.state,{vectors:n,vector_names:r,assignment_colors:i,show_thresholding_slider:a,threshold_values:o,threshold_slider_title:s,threshold_slider_values:l,excluded_categories:c}=this.props,{unfiltered_name:u,filtered_name:f,percent_filtered_name:d}=this.props,{plot:h,filtered:p,total:m}=function(e,t,n,r,i,a,o){const s=Object.keys(n),l=e.length;let c=0;const u=Math.ceil(l/4);let f=2;2===l&&(f=1);const d=[],h={};let p,m,g={grid:{rows:u,columns:f,pattern:"independent"},tracetoggle:!1,font:{family:"Overpass"},hovermode:"closest"};for(c=0;c<l;c+=2){let u=c+1;u>l-1&&(u=0);let f=1+c/2;1===f&&(f="");let g="xaxis",v="yaxis",y=!0;c>0&&(g+=f,v+=f,y=!1),h[g]={title:e[c],anchor:"x"+f},h[v]={title:e[u],anchor:"y"+f},p=0,m=0,s.forEach((e=>{const s=!a.includes(e);if(0===r||s){let a=o[e];const l=a.length;a=a.filter((e=>i[e]>=r)),s&&(p=p+l-a.length,m+=l);const h={x:O()(t[c],a),y:O()(t[u],a),type:"scattergl",mode:"markers",marker:{color:n[e]},xaxis:"x"+f,yaxis:"y"+f,name:e,showlegend:y,opacity:.7};d.push(h)}}))}return g=S()(g,h),{plot:{data:d,config:{staticPlot:!1},layout:g},filtered:p,total:m}}(r,n,i,e,o,c,t),g={metric:m-p,threshold:"pass",name:u},y=p>0?"error":"pass",b={metric:p,threshold:y,name:f},x={metric:parseFloat(100*p/m).toFixed(2)+"%",threshold:y,name:d};return v.createElement(v.Fragment,null,v.createElement("div",{className:"row"},v.createElement("div",{className:"col"},v.createElement("div",{className:"row"},v.createElement("div",{className:"col"},v.createElement(oe,g)),a&&v.createElement("div",{className:"col"},v.createElement(oe,b)),a&&v.createElement("div",{className:"col"},v.createElement(oe,x))),a&&v.createElement(v.Fragment,null,v.createElement("h3",null,s),v.createElement(L.A,{value:e,onChange:this.handleOnChange,min:l[0],max:l[1],step:l[2]})))),v.createElement("div",{className:"row col plot-container",style:{marginLeft:"100px"}},v.createElement(re,ue({ref:e=>this.changeablePlot=e},h))))}}de.propTypes={...ce},de.defaultProps={show_thresholding_slider:!0};const he=de;function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pe.apply(null,arguments)}function me(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}n(47655);function ge(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function ve(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function ye(e,t,n){var r=(0,v.useRef)(void 0!==e),i=(0,v.useState)(t),a=i[0],o=i[1],s=void 0!==e,l=r.current;return r.current=s,!s&&l&&a!==t&&o(t),[s?e:a,(0,v.useCallback)((function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];n&&n.apply(void 0,[e].concat(r)),o(e)}),[n])]}function be(e,t){return Object.keys(t).reduce((function(n,r){var i,a=n,o=a[ge(r)],s=a[r],l=me(a,[ge(r),r].map(ve)),c=t[r],u=ye(s,o,e[c]),f=u[0],d=u[1];return pe({},l,((i={})[r]=f,i[c]=d,i))}),e)}function xe(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function _e(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!=n?n:null}.bind(this))}function we(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}xe.__suppressDeprecationWarning=!0,_e.__suppressDeprecationWarning=!0,we.__suppressDeprecationWarning=!0;const Ae={prefix:String(Math.round(1e10*Math.random())),current:0},ke=v.createContext(Ae),Ee=v.createContext(!1);let Te=Boolean("undefined"!=typeof window&&window.document&&window.document.createElement),Me=new WeakMap;function Se(e=!1){let t=(0,v.useContext)(ke),n=(0,v.useRef)(null);if(null===n.current&&!e){var r,i;let e=null===(i=v.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)||void 0===i||null===(r=i.ReactCurrentOwner)||void 0===r?void 0:r.current;if(e){let n=Me.get(e);null==n?Me.set(e,{id:t.current,state:e.memoizedState}):e.memoizedState!==n.state&&(t.current=n.id,Me.delete(e))}n.current=++t.current}return n.current}const Ce="function"==typeof v.useId?function(e){let t=v.useId(),[n]=(0,v.useState)("function"==typeof v.useSyncExternalStore?v.useSyncExternalStore(Ne,Oe,Re):(0,v.useContext)(Ee));return e||`${n?"react-aria":`react-aria${Ae.prefix}`}-${t}`}:function(e){let t=(0,v.useContext)(ke);t!==Ae||Te||console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let n=Se(!!e),r=`react-aria${t.prefix}`;return e||`${r}-${n}`};function Oe(){return!1}function Re(){return!0}function Ne(e){return()=>{}}const Le=v.createContext(null),De=(e,t=null)=>null!=e?String(e):t||null,Pe=v.createContext(null);const Ie=function(e){const t=(0,v.useRef)(e);return(0,v.useEffect)((()=>{t.current=e}),[e]),t};function Fe(e){const t=Ie(e);return(0,v.useCallback)((function(...e){return t.current&&t.current(...e)}),[t])}const ze=e=>e&&"function"!=typeof e?t=>{e.current=t}:e;const je=function(e,t){return(0,v.useMemo)((()=>function(e,t){const n=ze(e),r=ze(t);return e=>{n&&n(e),r&&r(e)}}(e,t)),[e,t])};const Be=function({children:e,in:t,onExited:n,mountOnEnter:r,unmountOnExit:i}){const a=(0,v.useRef)(null),o=(0,v.useRef)(t),s=Fe(n);(0,v.useEffect)((()=>{t?o.current=!0:s(a.current)}),[t,s]);const l=je(a,e.ref),c=(0,v.cloneElement)(e,{ref:l});return t?c:i||!o.current&&r?null:c};var Ue=n(50608);const $e=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],qe=["activeKey","getControlledId","getControllerId"],He=["as"];function Ve(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function We(e){let{active:t,eventKey:n,mountOnEnter:r,transition:i,unmountOnExit:a,role:o="tabpanel",onEnter:s,onEntering:l,onEntered:c,onExit:u,onExiting:f,onExited:d}=e,h=Ve(e,$e);const p=(0,v.useContext)(Le);if(!p)return[Object.assign({},h,{role:o}),{eventKey:n,isActive:t,mountOnEnter:r,transition:i,unmountOnExit:a,onEnter:s,onEntering:l,onEntered:c,onExit:u,onExiting:f,onExited:d}];const{activeKey:m,getControlledId:g,getControllerId:y}=p,b=Ve(p,qe),x=De(n);return[Object.assign({},h,{role:o,id:g(n),"aria-labelledby":y(n)}),{eventKey:n,isActive:null==t&&null!=x?De(m)===x:t,transition:i||b.transition,mountOnEnter:null!=r?r:b.mountOnEnter,unmountOnExit:null!=a?a:b.unmountOnExit,onEnter:s,onEntering:l,onEntered:c,onExit:u,onExiting:f,onExited:d}]}const Ge=v.forwardRef(((e,t)=>{let{as:n="div"}=e,r=Ve(e,He);const[i,{isActive:a,onEnter:o,onEntering:s,onEntered:l,onExit:c,onExiting:u,onExited:f,mountOnEnter:d,unmountOnExit:h,transition:p=Be}]=We(r);return(0,Ue.jsx)(Le.Provider,{value:null,children:(0,Ue.jsx)(Pe.Provider,{value:null,children:(0,Ue.jsx)(p,{in:a,onEnter:o,onEntering:s,onEntered:l,onExit:c,onExiting:u,onExited:f,mountOnEnter:d,unmountOnExit:h,children:(0,Ue.jsx)(n,Object.assign({},i,{ref:t,hidden:!a,"aria-hidden":!a}))})})})}));Ge.displayName="TabPanel";const Ye=e=>{const{id:t,generateChildId:n,onSelect:r,activeKey:i,defaultActiveKey:a,transition:o,mountOnEnter:s,unmountOnExit:l,children:c}=e,[u,f]=ye(i,a,r),d=Ce(t),h=(0,v.useMemo)((()=>n||((e,t)=>d?`${d}-${t}-${e}`:null)),[d,n]),p=(0,v.useMemo)((()=>({onSelect:f,activeKey:u,transition:o,mountOnEnter:s||!1,unmountOnExit:l||!1,getControlledId:e=>h(e,"tabpane"),getControllerId:e=>h(e,"tab")})),[f,u,o,s,l,h]);return(0,Ue.jsx)(Le.Provider,{value:p,children:(0,Ue.jsx)(Pe.Provider,{value:f||null,children:c})})};Ye.Panel=Ge;const Xe=Ye;var Ke=n(78306),Ze=n.n(Ke);function Je(e,t){return Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Je(e,t)}var Qe=n(53713);const et=!1,tt=v.createContext(null);var nt="unmounted",rt="exited",it="entering",at="entered",ot="exiting",st=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i=rt,r.appearStatus=it):i=at:i=t.unmountOnExit||t.mountOnEnter?nt:rt,r.state={status:i},r.nextCallback=null,r}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Je(e,t)}(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===nt?{status:rt}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==it&&n!==at&&(t=it):n!==it&&n!==at||(t=ot)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===it){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:Qe.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===rt&&this.setState({status:nt})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[Qe.findDOMNode(this),r],a=i[0],o=i[1],s=this.getTimeouts(),l=r?s.appear:s.enter;!e&&!n||et?this.safeSetState({status:at},(function(){t.props.onEntered(a)})):(this.props.onEnter(a,o),this.safeSetState({status:it},(function(){t.props.onEntering(a,o),t.onTransitionEnd(l,(function(){t.safeSetState({status:at},(function(){t.props.onEntered(a,o)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:Qe.findDOMNode(this);t&&!et?(this.props.onExit(r),this.safeSetState({status:ot},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:rt},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:rt},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:Qe.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=i[0],o=i[1];this.props.addEndListener(a,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===nt)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,me(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return v.createElement(tt.Provider,{value:null},"function"==typeof n?n(e,r):v.cloneElement(v.Children.only(n),r))},t}(v.Component);function lt(){}st.contextType=tt,st.propTypes={},st.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:lt,onEntering:lt,onEntered:lt,onExit:lt,onExiting:lt,onExited:lt},st.UNMOUNTED=nt,st.EXITED=rt,st.ENTERING=it,st.ENTERED=at,st.EXITING=ot;const ct=st;function ut(e){return e&&e.ownerDocument||document}function ft(e,t){return function(e){var t=ut(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var dt=/([A-Z])/g;var ht=/^ms-/;function pt(e){return function(e){return e.replace(dt,"-$1").toLowerCase()}(e).replace(ht,"-ms-")}var mt=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const gt=function(e,t){var n="",r="";if("string"==typeof t)return e.style.getPropertyValue(pt(t))||ft(e).getPropertyValue(pt(t));Object.keys(t).forEach((function(i){var a=t[i];a||0===a?!function(e){return!(!e||!mt.test(e))}(i)?n+=pt(i)+": "+a+";":r+=i+"("+a+") ":e.style.removeProperty(pt(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n},vt=!("undefined"==typeof window||!window.document||!window.document.createElement);var yt=!1,bt=!1;try{var xt={get passive(){return yt=!0},get once(){return bt=yt=!0}};vt&&(window.addEventListener("test",xt,xt),window.removeEventListener("test",xt,!0))}catch(e){}const _t=function(e,t,n,r){if(r&&"boolean"!=typeof r&&!bt){var i=r.once,a=r.capture,o=n;!bt&&i&&(o=n.__once||function e(r){this.removeEventListener(t,e,a),n.call(this,r)},n.__once=o),e.addEventListener(t,o,yt?r:a)}e.addEventListener(t,n,r)};const wt=function(e,t,n,r){var i=r&&"boolean"!=typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};const At=function(e,t,n,r){return _t(e,t,n,r),function(){wt(e,t,n,r)}};function kt(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),a=At(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),a()}}function Et(e,t,n,r){null==n&&(n=function(e){var t=gt(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=kt(e,n,r),a=At(e,"transitionend",t);return function(){i(),a()}}function Tt(e,t){const n=gt(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function Mt(e,t){const n=Tt(e,"transitionDuration"),r=Tt(e,"transitionDelay"),i=Et(e,(n=>{n.target===e&&(i(),t(n))}),n+r)}const St=v.forwardRef((({onEnter:e,onEntering:t,onEntered:n,onExit:r,onExiting:i,onExited:a,addEndListener:o,children:s,childRef:l,...c},u)=>{const f=(0,v.useRef)(null),d=je(f,l),h=e=>{var t;d((t=e)&&"setState"in t?Qe.findDOMNode(t):null!=t?t:null)},p=e=>t=>{e&&f.current&&e(f.current,t)},m=(0,v.useCallback)(p(e),[e]),g=(0,v.useCallback)(p(t),[t]),y=(0,v.useCallback)(p(n),[n]),b=(0,v.useCallback)(p(r),[r]),x=(0,v.useCallback)(p(i),[i]),_=(0,v.useCallback)(p(a),[a]),w=(0,v.useCallback)(p(o),[o]);return(0,Ue.jsx)(ct,{ref:u,...c,onEnter:m,onEntered:y,onEntering:g,onExit:b,onExited:_,onExiting:x,addEndListener:w,nodeRef:f,children:"function"==typeof s?(e,t)=>s(e,{...t,ref:h}):v.cloneElement(s,{ref:h})})})),Ct=St,Ot={[it]:"show",[at]:"show"},Rt=v.forwardRef((({className:e,children:t,transitionClasses:n={},onEnter:r,...i},a)=>{const o={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...i},s=(0,v.useCallback)(((e,t)=>{!function(e){e.offsetHeight}(e),null==r||r(e,t)}),[r]),{major:l}=function(){const e=v.version.split(".");return{major:+e[0],minor:+e[1],patch:+e[2]}}(),c=l>=19?t.props.ref:t.ref;return(0,Ue.jsx)(Ct,{ref:a,addEndListener:Mt,...o,onEnter:s,childRef:c,children:(r,i)=>v.cloneElement(t,{...i,className:Ze()("fade",e,t.props.className,Ot[r],n[r])})})}));Rt.displayName="Fade";const Nt=Rt;function Lt(e){return"boolean"==typeof e?e?Nt:Be:e}const Dt=({transition:e,...t})=>(0,Ue.jsx)(Xe,{...t,transition:Lt(e)});Dt.displayName="TabContainer";const Pt=Dt,It=["xxl","xl","lg","md","sm","xs"],Ft=v.createContext({prefixes:{},breakpoints:It,minBreakpoint:"xs"}),{Consumer:zt,Provider:jt}=Ft;function Bt(e,t){const{prefixes:n}=(0,v.useContext)(Ft);return e||n[t]||t}function Ut(){const{breakpoints:e}=(0,v.useContext)(Ft);return e}function $t(){const{minBreakpoint:e}=(0,v.useContext)(Ft);return e}const qt=v.forwardRef((({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=Bt(t,"tab-content"),(0,Ue.jsx)(n,{ref:i,className:Ze()(e,t),...r}))));qt.displayName="TabContent";const Ht=qt,Vt=v.forwardRef((({bsPrefix:e,transition:t,...n},r)=>{const[{className:i,as:a="div",...o},{isActive:s,onEnter:l,onEntering:c,onEntered:u,onExit:f,onExiting:d,onExited:h,mountOnEnter:p,unmountOnExit:m,transition:g=Nt}]=We({...n,transition:Lt(t)}),v=Bt(e,"tab-pane");return(0,Ue.jsx)(Le.Provider,{value:null,children:(0,Ue.jsx)(Pe.Provider,{value:null,children:(0,Ue.jsx)(g,{in:s,onEnter:l,onEntering:c,onEntered:u,onExit:f,onExiting:d,onExited:h,mountOnEnter:p,unmountOnExit:m,children:(0,Ue.jsx)(a,{...o,ref:r,className:Ze()(i,v,s&&"active")})})})})}));Vt.displayName="TabPane";const Wt=Vt,Gt={eventKey:le().oneOfType([le().string,le().number]),title:le().node.isRequired,disabled:le().bool,tabClassName:le().string,tabAttrs:le().object},Yt=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};Yt.propTypes=Gt;const Xt=Object.assign(Yt,{Container:Pt,Content:Ht,Pane:Wt});n(31408);var Kt=Function.prototype.bind.call(Function.prototype.call,[].slice);function Zt(e,t){return Kt(e.querySelectorAll(t))}function Jt(){const[,e]=(0,v.useReducer)((e=>!e),!1);return e}const Qt=v.createContext(null);Qt.displayName="NavContext";const en=Qt;function tn(e){return`data-rr-ui-${e}`}const nn=["as","disabled"];function rn({tagName:e,disabled:t,href:n,target:r,rel:i,role:a,onClick:o,tabIndex:s=0,type:l}){e||(e=null!=n||null!=r||null!=i?"a":"button");const c={tagName:e};if("button"===e)return[{type:l||"button",disabled:t},c];const u=r=>{(t||"a"===e&&function(e){return!e||"#"===e.trim()}(n))&&r.preventDefault(),t?r.stopPropagation():null==o||o(r)};return"a"===e&&(n||(n="#"),t&&(n=void 0)),[{role:null!=a?a:"button",disabled:void 0,tabIndex:t?void 0:s,href:n,target:"a"===e?r:void 0,"aria-disabled":t||void 0,rel:"a"===e?i:void 0,onClick:u,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),u(e))}},c]}const an=v.forwardRef(((e,t)=>{let{as:n,disabled:r}=e,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,nn);const[a,{tagName:o}]=rn(Object.assign({tagName:n,disabled:r},i));return(0,Ue.jsx)(o,Object.assign({},i,a,{ref:t}))}));an.displayName="Button";const on=an,sn=["as","active","eventKey"];function ln({key:e,onClick:t,active:n,id:r,role:i,disabled:a}){const o=(0,v.useContext)(Pe),s=(0,v.useContext)(en),l=(0,v.useContext)(Le);let c=n;const u={role:i};if(s){i||"tablist"!==s.role||(u.role="tab");const t=s.getControllerId(null!=e?e:null),a=s.getControlledId(null!=e?e:null);u[tn("event-key")]=e,u.id=t||r,c=null==n&&null!=e?s.activeKey===e:n,!c&&(null!=l&&l.unmountOnExit||null!=l&&l.mountOnEnter)||(u["aria-controls"]=a)}return"tab"===u.role&&(u["aria-selected"]=c,c||(u.tabIndex=-1),a&&(u.tabIndex=-1,u["aria-disabled"]=!0)),u.onClick=Fe((n=>{a||(null==t||t(n),null!=e&&o&&!n.isPropagationStopped()&&o(e,n))})),[u,{isActive:c}]}const cn=v.forwardRef(((e,t)=>{let{as:n=on,active:r,eventKey:i}=e,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,sn);const[o,s]=ln(Object.assign({key:De(i,a.href),active:r},a));return o[tn("active")]=s.isActive,(0,Ue.jsx)(n,Object.assign({},a,o,{ref:t}))}));cn.displayName="NavItem";const un=cn,fn=["as","onSelect","activeKey","role","onKeyDown"];const dn=()=>{},hn=tn("event-key"),pn=v.forwardRef(((e,t)=>{let{as:n="div",onSelect:r,activeKey:i,role:a,onKeyDown:o}=e,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,fn);const l=Jt(),c=(0,v.useRef)(!1),u=(0,v.useContext)(Pe),f=(0,v.useContext)(Le);let d,h;f&&(a=a||"tablist",i=f.activeKey,d=f.getControlledId,h=f.getControllerId);const p=(0,v.useRef)(null),m=e=>{const t=p.current;if(!t)return null;const n=Zt(t,`[${hn}]:not([aria-disabled=true])`),r=t.querySelector("[aria-selected=true]");if(!r||r!==document.activeElement)return null;const i=n.indexOf(r);if(-1===i)return null;let a=i+e;return a>=n.length&&(a=0),a<0&&(a=n.length-1),n[a]},g=(e,t)=>{null!=e&&(null==r||r(e,t),null==u||u(e,t))};(0,v.useEffect)((()=>{if(p.current&&c.current){const e=p.current.querySelector(`[${hn}][aria-selected=true]`);null==e||e.focus()}c.current=!1}));const y=je(t,p);return(0,Ue.jsx)(Pe.Provider,{value:g,children:(0,Ue.jsx)(en.Provider,{value:{role:a,activeKey:De(i),getControlledId:d||dn,getControllerId:h||dn},children:(0,Ue.jsx)(n,Object.assign({},s,{onKeyDown:e=>{if(null==o||o(e),!f)return;let t;switch(e.key){case"ArrowLeft":case"ArrowUp":t=m(-1);break;case"ArrowRight":case"ArrowDown":t=m(1);break;default:return}t&&(e.preventDefault(),g(t.dataset[function(e){return`rrUi${e}`}("EventKey")]||null,e),c.current=!0,l())},ref:y,role:a}))})})}));pn.displayName="Nav";const mn=Object.assign(pn,{Item:un}),gn=v.createContext(null);gn.displayName="NavbarContext";const vn=gn,yn=v.createContext(null);yn.displayName="CardHeaderContext";const bn=yn,xn=v.forwardRef((({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=Bt(t,"nav-item"),(0,Ue.jsx)(n,{ref:i,className:Ze()(e,t),...r}))));xn.displayName="NavItem";const _n=xn;const wn=void 0!==n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,An="undefined"!=typeof document||wn?v.useLayoutEffect:v.useEffect;new WeakMap;const kn=["onKeyDown"];const En=v.forwardRef(((e,t)=>{let{onKeyDown:n}=e,r=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,kn);const[i]=rn(Object.assign({tagName:"a"},r)),a=Fe((e=>{i.onKeyDown(e),null==n||n(e)}));return function(e){return!e||"#"===e.trim()}(r.href)||"button"===r.role?(0,Ue.jsx)("a",Object.assign({ref:t},r,i,{onKeyDown:a})):(0,Ue.jsx)("a",Object.assign({ref:t},r,{onKeyDown:n}))}));En.displayName="Anchor";const Tn=En,Mn=v.forwardRef((({bsPrefix:e,className:t,as:n=Tn,active:r,eventKey:i,disabled:a=!1,...o},s)=>{e=Bt(e,"nav-link");const[l,c]=ln({key:De(i,o.href),active:r,disabled:a,...o});return(0,Ue.jsx)(n,{...o,...l,ref:s,disabled:a,className:Ze()(t,e,a&&"disabled",c.isActive&&"active")})}));Mn.displayName="NavLink";const Sn=Mn,Cn=v.forwardRef(((e,t)=>{const{as:n="div",bsPrefix:r,variant:i,fill:a=!1,justify:o=!1,navbar:s,navbarScroll:l,className:c,activeKey:u,...f}=be(e,{activeKey:"onSelect"}),d=Bt(r,"nav");let h,p,m=!1;const g=(0,v.useContext)(vn),y=(0,v.useContext)(bn);return g?(h=g.bsPrefix,m=null==s||s):y&&({cardHeaderBsPrefix:p}=y),(0,Ue.jsx)(mn,{as:n,ref:t,activeKey:u,className:Ze()(c,{[d]:!m,[`${h}-nav`]:m,[`${h}-nav-scroll`]:m&&l,[`${p}-${i}`]:!!p,[`${d}-${i}`]:!!i,[`${d}-fill`]:a,[`${d}-justified`]:o}),...f})}));Cn.displayName="Nav";const On=Object.assign(Cn,{Item:_n,Link:Sn});function Rn(e,t){let n=0;return v.Children.map(e,(e=>v.isValidElement(e)?t(e,n++):e))}function Nn(e){let t;return function(e,t){let n=0;v.Children.forEach(e,(e=>{v.isValidElement(e)&&t(e,n++)}))}(e,(e=>{null==t&&(t=e.props.eventKey)})),t}function Ln(e){const{title:t,eventKey:n,disabled:r,tabClassName:i,tabAttrs:a,id:o}=e.props;return null==t?null:(0,Ue.jsx)(_n,{as:"li",role:"presentation",children:(0,Ue.jsx)(Sn,{as:"button",type:"button",eventKey:n,disabled:r,id:o,className:i,...a,children:t})})}const Dn=e=>{const{id:t,onSelect:n,transition:r,mountOnEnter:i=!1,unmountOnExit:a=!1,variant:o="tabs",children:s,activeKey:l=Nn(s),...c}=be(e,{activeKey:"onSelect"});return(0,Ue.jsxs)(Xe,{id:t,activeKey:l,onSelect:n,transition:Lt(r),mountOnEnter:i,unmountOnExit:a,children:[(0,Ue.jsx)(On,{id:t,...c,role:"tablist",as:"ul",variant:o,children:Rn(s,Ln)}),(0,Ue.jsx)(Ht,{children:Rn(s,(e=>{const t={...e.props};return delete t.title,delete t.disabled,delete t.tabClassName,delete t.tabAttrs,(0,Ue.jsx)(Wt,{...t})}))})]})};Dn.displayName="Tabs";const Pn=Dn;var In=n(84152),Fn=n.n(In);function zn(){return zn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zn.apply(null,arguments)}const jn=e=>v.createElement("svg",zn({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},e),v.createElement("path",{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"})),Bn=v.forwardRef((({as:e,bsPrefix:t,variant:n="primary",size:r,active:i=!1,disabled:a=!1,className:o,...s},l)=>{const c=Bt(t,"btn"),[u,{tagName:f}]=rn({tagName:e,disabled:a,...s}),d=f;return(0,Ue.jsx)(d,{...u,...s,ref:l,disabled:a,className:Ze()(o,c,i&&"active",n&&`${c}-${n}`,r&&`${c}-${r}`,s.href&&a&&"disabled")})}));Bn.displayName="Button";const Un=Bn;function $n(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class qn extends v.PureComponent{constructor(){super(...arguments),$n(this,"state",{helpShown:!1})}helpTextSection(e,t){return v.createElement(v.Fragment,{key:e},v.createElement("dt",{"data-test":ae()("help"+e+"Text"),key:e},e),E()(t,(t=>v.createElement("dd",{"data-test":ae()("help"+e+"Desc"),key:t},v.createElement("div",{dangerouslySetInnerHTML:{__html:t}})))))}toggleHelp(){const{helpShown:e}=this.state;this.setState({helpShown:!e})}render(){const{title:e,data:t,showDarkButtonIcon:n}=this.props,{helpShown:r}=this.state,i=r?"block":"none",a=n?v.createElement(Un,{variant:"outline-dark",onClick:()=>this.toggleHelp(),className:"custom-dark-button","data-test":ae()(e+"DarkButton")},r?"Hide":"Show"):v.createElement(jn,{onClick:()=>this.toggleHelp(),className:"header-questionMark","data-test":ae()(e+"QuestionMark")});return v.createElement(v.Fragment,null,v.createElement("div",{className:"header-wrapper"},v.createElement("div",{"data-test":ae()(e+"TitleSummaryCard")},e&&v.createElement("h2",{id:e},e)),v.createElement("div",null,e&&a)),v.createElement("div",{className:"title-help-text-container",style:{display:i},"data-test":ae()(e+"HelpTable")},E()(t,(e=>this.helpTextSection(e[0],e[1])))))}}function Hn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}$n(qn,"defaultProps",{showDarkButtonIcon:!1});class Vn extends v.PureComponent{render(){const{rows:e,dataTest:t}=this.props;return v.createElement("table",{className:"table table-hover table-sm","data-test":t},v.createElement("tbody",null,E()(e,((e,n)=>{2!==e.length&&console.log(`TableMetric: Row ${n} does not have two elements`);const[r,i]=e,a=r.toLowerCase().includes("path"),o=i.length>14;return v.createElement("tr",{key:n},v.createElement("td",{className:"tableMetric-key","data-test":ae()(t+r+"Text")},r),!a&&!o&&v.createElement("td",{className:"tableMetric-value","data-test":ae()(t+r+"Value")},i),!a&&o&&v.createElement("td",{className:"tableMetric-value-chopped","data-test":ae()(t+r+"Value")},i),a&&v.createElement(Wn,{text:i,dataTest:ae()(t+r+"Value")}))}))))}}class Wn extends v.PureComponent{constructor(){super(...arguments),Hn(this,"state",{truncated:!0})}render(){const{text:e,dataTest:t}=this.props,{truncated:n}=this.state;return v.createElement("td",{className:"tableMetric-value",onMouseDown:()=>this.setState({truncated:!1}),"data-test":t},n?v.createElement("div",{className:"tableMetric-truncate"},"",`${e}`,""):v.createElement("div",{className:"tableMetric-fixedWidth"},e))}}class Gn extends v.Component{renderPlot(){var e,t;const{data:n,layout:r={},config:i={},size:a}=this.props;if(!a.width&&!r.width)return;ee(n);const o=r.width?{}:{...a,autosize:!1},s=S()({},{xaxis:{fixedrange:!0},yaxis:{fixedrange:!0},font:{family:"Overpass"},margin:{t:24}},r,o),l=S()({},{displaylogo:!1,displayModeBar:!1,showLink:!1},i);if(null==n&&(s.xaxis.visible=!1,s.yaxis.visible=!1),K.react(this.plot,{data:n,layout:s,config:l}),null!=n&&null!==(e=n[0])&&void 0!==e&&null!==(t=e.marker)&&void 0!==t&&t.colorbar){const e=function(e){var t,n,r,i,a;if(null==e||null===(t=e._initialAutoSize)||void 0===t||!t.width||null==e||null===(n=e._fullLayout)||void 0===n||!n.margin||null==e||null===(r=e._fullData)||void 0===r||null===(i=r[0])||void 0===i||null===(a=i.marker)||void 0===a||!a.colorbar)return{};const o=e._initialAutoSize.width-e._fullLayout.margin.l-e._fullLayout.margin.r;return{data:{scattergl:[{marker:{colorbar:{x:1,xpad:Math.round(o*(e._fullData[0].marker.colorbar.x-1))+e._fullData[0].marker.colorbar.xpad}}}]}}}(this.plot),t=S()(this.plot.layout.template,e);K.relayout(this.plot,{template:t})}}resizePlot(e){K.relayout(this.plot,e)}componentDidMount(){this.renderPlot()}componentDidUpdate(e){let{size:t}=e;const{size:n,layout:r}=this.props;n===t||null!=r&&r.width||(this.plot.data?this.resizePlot(n):this.renderPlot())}render(){const{style:e}=this.props;return v.createElement("div",{className:"plot-wrapper",style:e,ref:e=>{this.plot=e}})}}const Yn=(0,te.withSize)({monitorHeight:!0,noPlaceholder:!0})(Gn);function Xn(){return Xn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xn.apply(null,arguments)}const Kn=e=>{const{style:t}=e,n=S()({},{height:"380px"},t);return v.createElement(Yn,Xn({},e,{style:n}))},Zn=e=>{const t=e.plot;return t.layout.width=460,v.createElement("div",{className:"summary_row"},v.createElement("div",{className:"row"},v.createElement("div",{className:"col"},v.createElement(qn,e.gems.help))),v.createElement("div",{className:"row"},v.createElement("div",{className:"col summary_column"},v.createElement(Vn,e.gems.table)),v.createElement("div",{className:"col summary_column"},v.createElement(Kn,t))))};class Jn{constructor(e,t){if((!e||!e.length)&&t)throw new Error("Expected rows when aligner is enabled.");this.rows=e,this.enabled=t,t&&(this.columnAlignments=this.generateColumnAlignments())}generateColumnAlignments(){const e=[];return this.rows.forEach((t=>t.forEach(((t,n)=>{const r=(e=>!isNaN(parseFloat(e)))(t)?"right-aligned":"",i=e[n];i?i!==r&&(e[n]=""):e[n]=r})))),e}getAlignment(e){if(!this.enabled)return null;if(!this.columnAlignments)throw new Error("Expected column alignments when enabled.");return this.columnAlignments[e]}}const Qn=e=>{let{header:t,rows:n,useAlignmentHeuristic:r}=e;const i=new Jn(n,r),a=(e,t)=>v.createElement("td",{key:`${e}-${t}`,dangerouslySetInnerHTML:{__html:e},className:i.getAlignment(t)});return v.createElement("table",{className:"table table-hover"},t&&v.createElement("thead",null,v.createElement("tr",null,E()(t,a))),v.createElement("tbody",null,E()(n,((e,t)=>v.createElement("tr",{key:t},E()(e,a))))))};Qn.propTypes={header:le().arrayOf(le().string),rows:le().arrayOf(le().arrayOf(le().oneOfType([le().string,le().number]))).isRequired,useAlignmentHeuristic:le().bool},Qn.defaultProps={useAlignmentHeuristic:!1};const er=Qn,tr=e=>{let{table:t}=e;return v.createElement("div",null,v.createElement("div",{className:"targeted_table"},v.createElement(er,t)))},nr=e=>{const t=e.plot;return t.layout.width=460,v.createElement("div",{className:"summary_border targeted"},v.createElement("div",{className:"row"},v.createElement("div",{className:"col"},v.createElement(qn,e.gene_targeting_table.help))),v.createElement("div",{className:"row"},v.createElement("div",{className:"col summary_column","data-test":"targeted-gene-targeting-table"},v.createElement(tr,e.gene_targeting_table)),v.createElement("div",{className:"col summary_column","data-test":"targeted-plot"},v.createElement(Kn,t))))},rr=v.createContext(null);var ir=Object.prototype.hasOwnProperty;function ar(e,t,n){for(n of e.keys())if(or(n,t))return n}function or(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&or(e[r],t[r]););return-1===r}if(n===Set){if(e.size!==t.size)return!1;for(r of e){if((i=r)&&"object"==typeof i&&!(i=ar(t,i)))return!1;if(!t.has(i))return!1}return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e){if((i=r[0])&&"object"==typeof i&&!(i=ar(t,i)))return!1;if(!or(r[1],t.get(i)))return!1}return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return-1===r}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return-1===r}if(!n||"object"==typeof e){for(n in r=0,e){if(ir.call(e,n)&&++r&&!ir.call(t,n))return!1;if(!(n in t)||!or(e[n],t[n]))return!1}return Object.keys(t).length===r}}return e!=e&&t!=t}const sr=function(e){const t=function(){const e=(0,v.useRef)(!0),t=(0,v.useRef)((()=>e.current));return(0,v.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),t.current}();return[e[0],(0,v.useCallback)((n=>{if(t())return e[1](n)}),[t,e[1]])]};function lr(e){return e.split("-")[0]}function cr(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ur(e){return e instanceof cr(e).Element||e instanceof Element}function fr(e){return e instanceof cr(e).HTMLElement||e instanceof HTMLElement}function dr(e){return"undefined"!=typeof ShadowRoot&&(e instanceof cr(e).ShadowRoot||e instanceof ShadowRoot)}var hr=Math.max,pr=Math.min,mr=Math.round;function gr(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function vr(){return!/^((?!chrome|android).)*safari/i.test(gr())}function yr(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,a=1;t&&fr(e)&&(i=e.offsetWidth>0&&mr(r.width)/e.offsetWidth||1,a=e.offsetHeight>0&&mr(r.height)/e.offsetHeight||1);var o=(ur(e)?cr(e):window).visualViewport,s=!vr()&&n,l=(r.left+(s&&o?o.offsetLeft:0))/i,c=(r.top+(s&&o?o.offsetTop:0))/a,u=r.width/i,f=r.height/a;return{width:u,height:f,top:c,right:l+u,bottom:c+f,left:l,x:l,y:c}}function br(e){var t=yr(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function xr(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&dr(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function _r(e){return e?(e.nodeName||"").toLowerCase():null}function wr(e){return cr(e).getComputedStyle(e)}function Ar(e){return["table","td","th"].indexOf(_r(e))>=0}function kr(e){return((ur(e)?e.ownerDocument:e.document)||window.document).documentElement}function Er(e){return"html"===_r(e)?e:e.assignedSlot||e.parentNode||(dr(e)?e.host:null)||kr(e)}function Tr(e){return fr(e)&&"fixed"!==wr(e).position?e.offsetParent:null}function Mr(e){for(var t=cr(e),n=Tr(e);n&&Ar(n)&&"static"===wr(n).position;)n=Tr(n);return n&&("html"===_r(n)||"body"===_r(n)&&"static"===wr(n).position)?t:n||function(e){var t=/firefox/i.test(gr());if(/Trident/i.test(gr())&&fr(e)&&"fixed"===wr(e).position)return null;var n=Er(e);for(dr(n)&&(n=n.host);fr(n)&&["html","body"].indexOf(_r(n))<0;){var r=wr(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}function Sr(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Cr(e,t,n){return hr(e,pr(t,n))}function Or(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Rr(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}var Nr="top",Lr="bottom",Dr="right",Pr="left",Ir="auto",Fr=[Nr,Lr,Dr,Pr],zr="start",jr="end",Br="viewport",Ur="popper",$r=Fr.reduce((function(e,t){return e.concat([t+"-"+zr,t+"-"+jr])}),[]),qr=[].concat(Fr,[Ir]).reduce((function(e,t){return e.concat([t,t+"-"+zr,t+"-"+jr])}),[]),Hr=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];const Vr={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,a=n.elements.arrow,o=n.modifiersData.popperOffsets,s=lr(n.placement),l=Sr(s),c=[Pr,Dr].indexOf(s)>=0?"height":"width";if(a&&o){var u=function(e,t){return Or("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:Rr(e,Fr))}(i.padding,n),f=br(a),d="y"===l?Nr:Pr,h="y"===l?Lr:Dr,p=n.rects.reference[c]+n.rects.reference[l]-o[l]-n.rects.popper[c],m=o[l]-n.rects.reference[l],g=Mr(a),v=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,y=p/2-m/2,b=u[d],x=v-f[c]-u[h],_=v/2-f[c]/2+y,w=Cr(b,_,x),A=l;n.modifiersData[r]=((t={})[A]=w,t.centerOffset=w-_,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&xr(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Wr(e){return e.split("-")[1]}var Gr={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Yr(e){var t,n=e.popper,r=e.popperRect,i=e.placement,a=e.variation,o=e.offsets,s=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,f=e.isFixed,d=o.x,h=void 0===d?0:d,p=o.y,m=void 0===p?0:p,g="function"==typeof u?u({x:h,y:m}):{x:h,y:m};h=g.x,m=g.y;var v=o.hasOwnProperty("x"),y=o.hasOwnProperty("y"),b=Pr,x=Nr,_=window;if(c){var w=Mr(n),A="clientHeight",k="clientWidth";if(w===cr(n)&&"static"!==wr(w=kr(n)).position&&"absolute"===s&&(A="scrollHeight",k="scrollWidth"),i===Nr||(i===Pr||i===Dr)&&a===jr)x=Lr,m-=(f&&w===_&&_.visualViewport?_.visualViewport.height:w[A])-r.height,m*=l?1:-1;if(i===Pr||(i===Nr||i===Lr)&&a===jr)b=Dr,h-=(f&&w===_&&_.visualViewport?_.visualViewport.width:w[k])-r.width,h*=l?1:-1}var E,T=Object.assign({position:s},c&&Gr),M=!0===u?function(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:mr(n*i)/i||0,y:mr(r*i)/i||0}}({x:h,y:m},cr(n)):{x:h,y:m};return h=M.x,m=M.y,l?Object.assign({},T,((E={})[x]=y?"0":"",E[b]=v?"0":"",E.transform=(_.devicePixelRatio||1)<=1?"translate("+h+"px, "+m+"px)":"translate3d("+h+"px, "+m+"px, 0)",E)):Object.assign({},T,((t={})[x]=y?m+"px":"",t[b]=v?h+"px":"",t.transform="",t))}const Xr={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,a=n.adaptive,o=void 0===a||a,s=n.roundOffsets,l=void 0===s||s,c={placement:lr(t.placement),variation:Wr(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Yr(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Yr(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var Kr={passive:!0};const Zr={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,a=void 0===i||i,o=r.resize,s=void 0===o||o,l=cr(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&c.forEach((function(e){e.addEventListener("scroll",n.update,Kr)})),s&&l.addEventListener("resize",n.update,Kr),function(){a&&c.forEach((function(e){e.removeEventListener("scroll",n.update,Kr)})),s&&l.removeEventListener("resize",n.update,Kr)}},data:{}};var Jr={left:"right",right:"left",bottom:"top",top:"bottom"};function Qr(e){return e.replace(/left|right|bottom|top/g,(function(e){return Jr[e]}))}var ei={start:"end",end:"start"};function ti(e){return e.replace(/start|end/g,(function(e){return ei[e]}))}function ni(e){var t=cr(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function ri(e){return yr(kr(e)).left+ni(e).scrollLeft}function ii(e){var t=wr(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function ai(e){return["html","body","#document"].indexOf(_r(e))>=0?e.ownerDocument.body:fr(e)&&ii(e)?e:ai(Er(e))}function oi(e,t){var n;void 0===t&&(t=[]);var r=ai(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),a=cr(r),o=i?[a].concat(a.visualViewport||[],ii(r)?r:[]):r,s=t.concat(o);return i?s:s.concat(oi(Er(o)))}function si(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function li(e,t,n){return t===Br?si(function(e,t){var n=cr(e),r=kr(e),i=n.visualViewport,a=r.clientWidth,o=r.clientHeight,s=0,l=0;if(i){a=i.width,o=i.height;var c=vr();(c||!c&&"fixed"===t)&&(s=i.offsetLeft,l=i.offsetTop)}return{width:a,height:o,x:s+ri(e),y:l}}(e,n)):ur(t)?function(e,t){var n=yr(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):si(function(e){var t,n=kr(e),r=ni(e),i=null==(t=e.ownerDocument)?void 0:t.body,a=hr(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=hr(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+ri(e),l=-r.scrollTop;return"rtl"===wr(i||n).direction&&(s+=hr(n.clientWidth,i?i.clientWidth:0)-a),{width:a,height:o,x:s,y:l}}(kr(e)))}function ci(e,t,n,r){var i="clippingParents"===t?function(e){var t=oi(Er(e)),n=["absolute","fixed"].indexOf(wr(e).position)>=0&&fr(e)?Mr(e):e;return ur(n)?t.filter((function(e){return ur(e)&&xr(e,n)&&"body"!==_r(e)})):[]}(e):[].concat(t),a=[].concat(i,[n]),o=a[0],s=a.reduce((function(t,n){var i=li(e,n,r);return t.top=hr(i.top,t.top),t.right=pr(i.right,t.right),t.bottom=pr(i.bottom,t.bottom),t.left=hr(i.left,t.left),t}),li(e,o,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function ui(e){var t,n=e.reference,r=e.element,i=e.placement,a=i?lr(i):null,o=i?Wr(i):null,s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(a){case Nr:t={x:s,y:n.y-r.height};break;case Lr:t={x:s,y:n.y+n.height};break;case Dr:t={x:n.x+n.width,y:l};break;case Pr:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=a?Sr(a):null;if(null!=c){var u="y"===c?"height":"width";switch(o){case zr:t[c]=t[c]-(n[u]/2-r[u]/2);break;case jr:t[c]=t[c]+(n[u]/2-r[u]/2)}}return t}function fi(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,a=n.strategy,o=void 0===a?e.strategy:a,s=n.boundary,l=void 0===s?"clippingParents":s,c=n.rootBoundary,u=void 0===c?Br:c,f=n.elementContext,d=void 0===f?Ur:f,h=n.altBoundary,p=void 0!==h&&h,m=n.padding,g=void 0===m?0:m,v=Or("number"!=typeof g?g:Rr(g,Fr)),y=d===Ur?"reference":Ur,b=e.rects.popper,x=e.elements[p?y:d],_=ci(ur(x)?x:x.contextElement||kr(e.elements.popper),l,u,o),w=yr(e.elements.reference),A=ui({reference:w,element:b,strategy:"absolute",placement:i}),k=si(Object.assign({},b,A)),E=d===Ur?k:w,T={top:_.top-E.top+v.top,bottom:E.bottom-_.bottom+v.bottom,left:_.left-E.left+v.left,right:E.right-_.right+v.right},M=e.modifiersData.offset;if(d===Ur&&M){var S=M[i];Object.keys(T).forEach((function(e){var t=[Dr,Lr].indexOf(e)>=0?1:-1,n=[Nr,Lr].indexOf(e)>=0?"y":"x";T[e]+=S[n]*t}))}return T}const di={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,a=void 0===i||i,o=n.altAxis,s=void 0===o||o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,f=n.rootBoundary,d=n.altBoundary,h=n.flipVariations,p=void 0===h||h,m=n.allowedAutoPlacements,g=t.options.placement,v=lr(g),y=l||(v===g||!p?[Qr(g)]:function(e){if(lr(e)===Ir)return[];var t=Qr(e);return[ti(e),t,ti(t)]}(g)),b=[g].concat(y).reduce((function(e,n){return e.concat(lr(n)===Ir?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,a=n.rootBoundary,o=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?qr:l,u=Wr(r),f=u?s?$r:$r.filter((function(e){return Wr(e)===u})):Fr,d=f.filter((function(e){return c.indexOf(e)>=0}));0===d.length&&(d=f);var h=d.reduce((function(t,n){return t[n]=fi(e,{placement:n,boundary:i,rootBoundary:a,padding:o})[lr(n)],t}),{});return Object.keys(h).sort((function(e,t){return h[e]-h[t]}))}(t,{placement:n,boundary:u,rootBoundary:f,padding:c,flipVariations:p,allowedAutoPlacements:m}):n)}),[]),x=t.rects.reference,_=t.rects.popper,w=new Map,A=!0,k=b[0],E=0;E<b.length;E++){var T=b[E],M=lr(T),S=Wr(T)===zr,C=[Nr,Lr].indexOf(M)>=0,O=C?"width":"height",R=fi(t,{placement:T,boundary:u,rootBoundary:f,altBoundary:d,padding:c}),N=C?S?Dr:Pr:S?Lr:Nr;x[O]>_[O]&&(N=Qr(N));var L=Qr(N),D=[];if(a&&D.push(R[M]<=0),s&&D.push(R[N]<=0,R[L]<=0),D.every((function(e){return e}))){k=T,A=!1;break}w.set(T,D)}if(A)for(var P=function(e){var t=b.find((function(t){var n=w.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return k=t,"break"},I=p?3:1;I>0;I--){if("break"===P(I))break}t.placement!==k&&(t.modifiersData[r]._skip=!0,t.placement=k,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function hi(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function pi(e){return[Nr,Dr,Lr,Pr].some((function(t){return e[t]>=0}))}const mi={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,a=void 0===i?[0,0]:i,o=qr.reduce((function(e,n){return e[n]=function(e,t,n){var r=lr(e),i=[Pr,Nr].indexOf(r)>=0?-1:1,a="function"==typeof n?n(Object.assign({},t,{placement:e})):n,o=a[0],s=a[1];return o=o||0,s=(s||0)*i,[Pr,Dr].indexOf(r)>=0?{x:s,y:o}:{x:o,y:s}}(n,t.rects,a),e}),{}),s=o[t.placement],l=s.x,c=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=o}};const gi={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,a=void 0===i||i,o=n.altAxis,s=void 0!==o&&o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,f=n.padding,d=n.tether,h=void 0===d||d,p=n.tetherOffset,m=void 0===p?0:p,g=fi(t,{boundary:l,rootBoundary:c,padding:f,altBoundary:u}),v=lr(t.placement),y=Wr(t.placement),b=!y,x=Sr(v),_="x"===x?"y":"x",w=t.modifiersData.popperOffsets,A=t.rects.reference,k=t.rects.popper,E="function"==typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,T="number"==typeof E?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),M=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,S={x:0,y:0};if(w){if(a){var C,O="y"===x?Nr:Pr,R="y"===x?Lr:Dr,N="y"===x?"height":"width",L=w[x],D=L+g[O],P=L-g[R],I=h?-k[N]/2:0,F=y===zr?A[N]:k[N],z=y===zr?-k[N]:-A[N],j=t.elements.arrow,B=h&&j?br(j):{width:0,height:0},U=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},$=U[O],q=U[R],H=Cr(0,A[N],B[N]),V=b?A[N]/2-I-H-$-T.mainAxis:F-H-$-T.mainAxis,W=b?-A[N]/2+I+H+q+T.mainAxis:z+H+q+T.mainAxis,G=t.elements.arrow&&Mr(t.elements.arrow),Y=G?"y"===x?G.clientTop||0:G.clientLeft||0:0,X=null!=(C=null==M?void 0:M[x])?C:0,K=L+W-X,Z=Cr(h?pr(D,L+V-X-Y):D,L,h?hr(P,K):P);w[x]=Z,S[x]=Z-L}if(s){var J,Q="x"===x?Nr:Pr,ee="x"===x?Lr:Dr,te=w[_],ne="y"===_?"height":"width",re=te+g[Q],ie=te-g[ee],ae=-1!==[Nr,Pr].indexOf(v),oe=null!=(J=null==M?void 0:M[_])?J:0,se=ae?re:te-A[ne]-k[ne]-oe+T.altAxis,le=ae?te+A[ne]+k[ne]-oe-T.altAxis:ie,ce=h&&ae?function(e,t,n){var r=Cr(e,t,n);return r>n?n:r}(se,te,le):Cr(h?se:re,te,h?le:ie);w[_]=ce,S[_]=ce-te}t.modifiersData[r]=S}},requiresIfExists:["offset"]};function vi(e,t,n){void 0===n&&(n=!1);var r,i,a=fr(t),o=fr(t)&&function(e){var t=e.getBoundingClientRect(),n=mr(t.width)/e.offsetWidth||1,r=mr(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),s=kr(t),l=yr(e,o,n),c={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(a||!a&&!n)&&(("body"!==_r(t)||ii(s))&&(c=(r=t)!==cr(r)&&fr(r)?{scrollLeft:(i=r).scrollLeft,scrollTop:i.scrollTop}:ni(r)),fr(t)?((u=yr(t,!0)).x+=t.clientLeft,u.y+=t.clientTop):s&&(u.x=ri(s))),{x:l.left+c.scrollLeft-u.x,y:l.top+c.scrollTop-u.y,width:l.width,height:l.height}}function yi(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}var bi={placement:"bottom",modifiers:[],strategy:"absolute"};function xi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function _i(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,a=void 0===i?bi:i;return function(e,t,n){void 0===n&&(n=a);var i,o,s={placement:"bottom",orderedModifiers:[],options:Object.assign({},bi,a),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],c=!1,u={state:s,setOptions:function(n){var i="function"==typeof n?n(s.options):n;f(),s.options=Object.assign({},a,s.options,i),s.scrollParents={reference:ur(e)?oi(e):e.contextElement?oi(e.contextElement):[],popper:oi(t)};var o,c,d=function(e){var t=yi(e);return Hr.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}((o=[].concat(r,s.options.modifiers),c=o.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{}),Object.keys(c).map((function(e){return c[e]}))));return s.orderedModifiers=d.filter((function(e){return e.enabled})),s.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,i=e.effect;if("function"==typeof i){var a=i({state:s,name:t,instance:u,options:r}),o=function(){};l.push(a||o)}})),u.update()},forceUpdate:function(){if(!c){var e=s.elements,t=e.reference,n=e.popper;if(xi(t,n)){s.rects={reference:vi(t,Mr(n),"fixed"===s.options.strategy),popper:br(n)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach((function(e){return s.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<s.orderedModifiers.length;r++)if(!0!==s.reset){var i=s.orderedModifiers[r],a=i.fn,o=i.options,l=void 0===o?{}:o,f=i.name;"function"==typeof a&&(s=a({state:s,options:l,name:f,instance:u})||s)}else s.reset=!1,r=-1}}},update:(i=function(){return new Promise((function(e){u.forceUpdate(),e(s)}))},function(){return o||(o=new Promise((function(e){Promise.resolve().then((function(){o=void 0,e(i())}))}))),o}),destroy:function(){f(),c=!0}};if(!xi(e,t))return u;function f(){l.forEach((function(e){return e()})),l=[]}return u.setOptions(n).then((function(e){!c&&n.onFirstUpdate&&n.onFirstUpdate(e)})),u}}const wi=_i({defaultModifiers:[{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,a=t.modifiersData.preventOverflow,o=fi(t,{elementContext:"reference"}),s=fi(t,{altBoundary:!0}),l=hi(o,r),c=hi(s,i,a),u=pi(l),f=pi(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":f})}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=ui({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},Xr,Zr,mi,di,gi,Vr]}),Ai=["enabled","placement","strategy","modifiers"];const ki={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},Ei={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:e})=>()=>{const{reference:t,popper:n}=e.elements;if("removeAttribute"in t){const e=(t.getAttribute("aria-describedby")||"").split(",").filter((e=>e.trim()!==n.id));e.length?t.setAttribute("aria-describedby",e.join(",")):t.removeAttribute("aria-describedby")}},fn:({state:e})=>{var t;const{popper:n,reference:r}=e.elements,i=null==(t=n.getAttribute("role"))?void 0:t.toLowerCase();if(n.id&&"tooltip"===i&&"setAttribute"in r){const e=r.getAttribute("aria-describedby");if(e&&-1!==e.split(",").indexOf(n.id))return;r.setAttribute("aria-describedby",e?`${e},${n.id}`:n.id)}}},Ti=[];const Mi=function(e,t,n={}){let{enabled:r=!0,placement:i="bottom",strategy:a="absolute",modifiers:o=Ti}=n,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(n,Ai);const l=(0,v.useRef)(o),c=(0,v.useRef)(),u=(0,v.useCallback)((()=>{var e;null==(e=c.current)||e.update()}),[]),f=(0,v.useCallback)((()=>{var e;null==(e=c.current)||e.forceUpdate()}),[]),[d,h]=sr((0,v.useState)({placement:i,update:u,forceUpdate:f,attributes:{},styles:{popper:{},arrow:{}}})),p=(0,v.useMemo)((()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:e})=>{const t={},n={};Object.keys(e.elements).forEach((r=>{t[r]=e.styles[r],n[r]=e.attributes[r]})),h({state:e,styles:t,attributes:n,update:u,forceUpdate:f,placement:e.placement})}})),[u,f,h]),m=(0,v.useMemo)((()=>(or(l.current,o)||(l.current=o),l.current)),[o]);return(0,v.useEffect)((()=>{c.current&&r&&c.current.setOptions({placement:i,strategy:a,modifiers:[...m,p,ki]})}),[a,i,p,r,m]),(0,v.useEffect)((()=>{if(r&&null!=e&&null!=t)return c.current=wi(e,t,Object.assign({},s,{placement:i,strategy:a,modifiers:[...m,Ei,p]})),()=>{null!=c.current&&(c.current.destroy(),c.current=void 0,h((e=>Object.assign({},e,{attributes:{},styles:{popper:{}}}))))}}),[r,e,t]),d};function Si(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}var Ci=n(88827),Oi=n.n(Ci);const Ri=()=>{};const Ni=e=>e&&("current"in e?e.current:e),Li={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};const Di=function(e,t=Ri,{disabled:n,clickTrigger:r="click"}={}){const i=(0,v.useRef)(!1),a=(0,v.useRef)(!1),o=(0,v.useCallback)((t=>{const n=Ni(e);var r;Oi()(!!n,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),i.current=!n||!!((r=t).metaKey||r.altKey||r.ctrlKey||r.shiftKey)||!function(e){return 0===e.button}(t)||!!Si(n,t.target)||a.current,a.current=!1}),[e]),s=Fe((t=>{const n=Ni(e);n&&Si(n,t.target)&&(a.current=!0)})),l=Fe((e=>{i.current||t(e)}));(0,v.useEffect)((()=>{var t,i;if(n||null==e)return;const a=ut(Ni(e)),c=a.defaultView||window;let u=null!=(t=c.event)?t:null==(i=c.parent)?void 0:i.event,f=null;Li[r]&&(f=At(a,Li[r],s,!0));const d=At(a,r,o,!0),h=At(a,r,(e=>{e!==u?l(e):u=void 0}));let p=[];return"ontouchstart"in a.documentElement&&(p=[].slice.call(a.body.children).map((e=>At(e,"mousemove",Ri)))),()=>{null==f||f(),d(),h(),p.forEach((e=>e()))}}),[e,n,r,o,s,l])};function Pi(e={}){return Array.isArray(e)?e:Object.keys(e).map((t=>(e[t].name=t,e[t])))}function Ii({enabled:e,enableEvents:t,placement:n,flip:r,offset:i,fixed:a,containerPadding:o,arrowElement:s,popperConfig:l={}}){var c,u,f,d,h;const p=function(e){const t={};return Array.isArray(e)?(null==e||e.forEach((e=>{t[e.name]=e})),t):e||t}(l.modifiers);return Object.assign({},l,{placement:n,enabled:e,strategy:a?"fixed":l.strategy,modifiers:Pi(Object.assign({},p,{eventListeners:{enabled:t,options:null==(c=p.eventListeners)?void 0:c.options},preventOverflow:Object.assign({},p.preventOverflow,{options:o?Object.assign({padding:o},null==(u=p.preventOverflow)?void 0:u.options):null==(f=p.preventOverflow)?void 0:f.options}),offset:{options:Object.assign({offset:i},null==(d=p.offset)?void 0:d.options)},arrow:Object.assign({},p.arrow,{enabled:!!s,options:Object.assign({},null==(h=p.arrow)?void 0:h.options,{element:s})}),flip:Object.assign({enabled:!!r},p.flip)}))})}const Fi=["children","usePopper"];const zi=()=>{};function ji(e={}){const t=(0,v.useContext)(rr),[n,r]=(0,v.useState)(null),i=(0,v.useRef)(!1),{flip:a,offset:o,rootCloseEvent:s,fixed:l=!1,placement:c,popperConfig:u={},enableEventListeners:f=!0,usePopper:d=!!t}=e,h=null==(null==t?void 0:t.show)?!!e.show:t.show;h&&!i.current&&(i.current=!0);const{placement:p,setMenu:m,menuElement:g,toggleElement:y}=t||{},b=Mi(y,g,Ii({placement:c||p||"bottom-start",enabled:d,enableEvents:null==f?h:f,offset:o,flip:a,fixed:l,arrowElement:n,popperConfig:u})),x=Object.assign({ref:m||zi,"aria-labelledby":null==y?void 0:y.id},b.attributes.popper,{style:b.styles.popper}),_={show:h,placement:p,hasShown:i.current,toggle:null==t?void 0:t.toggle,popper:d?b:null,arrowProps:d?Object.assign({ref:r},b.attributes.arrow,{style:b.styles.arrow}):{}};return Di(g,(e=>{null==t||t.toggle(!1,e)}),{clickTrigger:s,disabled:!h}),[x,_]}function Bi(e){let{children:t,usePopper:n=!0}=e,r=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,Fi);const[i,a]=ji(Object.assign({},r,{usePopper:n}));return(0,Ue.jsx)(Ue.Fragment,{children:t(i,a)})}Bi.displayName="DropdownMenu";const Ui=Bi,$i=e=>{var t;return"menu"===(null==(t=e.getAttribute("role"))?void 0:t.toLowerCase())},qi=()=>{};function Hi(){const e=Ce(),{show:t=!1,toggle:n=qi,setToggle:r,menuElement:i}=(0,v.useContext)(rr)||{},a=(0,v.useCallback)((e=>{n(!t,e)}),[t,n]),o={id:e,ref:r||qi,onClick:a,"aria-expanded":!!t};return i&&$i(i)&&(o["aria-haspopup"]=!0),[o,{show:t,toggle:n}]}function Vi({children:e}){const[t,n]=Hi();return(0,Ue.jsx)(Ue.Fragment,{children:e(t,n)})}Vi.displayName="DropdownToggle";const Wi=Vi,Gi=["eventKey","disabled","onClick","active","as"];function Yi({key:e,href:t,active:n,disabled:r,onClick:i}){const a=(0,v.useContext)(Pe),o=(0,v.useContext)(en),{activeKey:s}=o||{},l=De(e,t),c=null==n&&null!=e?De(s)===l:n;return[{onClick:Fe((e=>{r||(null==i||i(e),a&&!e.isPropagationStopped()&&a(l,e))})),"aria-disabled":r||void 0,"aria-selected":c,[tn("dropdown-item")]:""},{isActive:c}]}const Xi=v.forwardRef(((e,t)=>{let{eventKey:n,disabled:r,onClick:i,active:a,as:o=on}=e,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,Gi);const[l]=Yi({key:n,href:s.href,disabled:r,onClick:i,active:a});return(0,Ue.jsx)(o,Object.assign({},s,{ref:t},l))}));Xi.displayName="DropdownItem";const Ki=Xi,Zi=(0,v.createContext)(vt?window:void 0);Zi.Provider;function Ji(){const e=Jt(),t=(0,v.useRef)(null),n=(0,v.useCallback)((n=>{t.current=n,e()}),[e]);return[t,n]}function Qi({defaultShow:e,show:t,onSelect:n,onToggle:r,itemSelector:i=`* [${tn("dropdown-item")}]`,focusFirstItemOnShow:a,placement:o="bottom-start",children:s}){const l=(0,v.useContext)(Zi),[c,u]=ye(t,e,r),[f,d]=Ji(),h=f.current,[p,m]=Ji(),g=p.current,y=function(e){const t=(0,v.useRef)(null);return(0,v.useEffect)((()=>{t.current=e})),t.current}(c),b=(0,v.useRef)(null),x=(0,v.useRef)(!1),_=(0,v.useContext)(Pe),w=(0,v.useCallback)(((e,t,n=(null==t?void 0:t.type))=>{u(e,{originalEvent:t,source:n})}),[u]),A=Fe(((e,t)=>{null==n||n(e,t),w(!1,t,"select"),t.isPropagationStopped()||null==_||_(e,t)})),k=(0,v.useMemo)((()=>({toggle:w,placement:o,show:c,menuElement:h,toggleElement:g,setMenu:d,setToggle:m})),[w,o,c,h,g,d,m]);h&&y&&!c&&(x.current=h.contains(h.ownerDocument.activeElement));const E=Fe((()=>{g&&g.focus&&g.focus()})),T=Fe((()=>{const e=b.current;let t=a;if(null==t&&(t=!(!f.current||!$i(f.current))&&"keyboard"),!1===t||"keyboard"===t&&!/^key.+$/.test(e))return;const n=Zt(f.current,i)[0];n&&n.focus&&n.focus()}));(0,v.useEffect)((()=>{c?T():x.current&&(x.current=!1,E())}),[c,x,E,T]),(0,v.useEffect)((()=>{b.current=null}));const M=(e,t)=>{if(!f.current)return null;const n=Zt(f.current,i);let r=n.indexOf(e)+t;return r=Math.max(0,Math.min(r,n.length)),n[r]};return function(e,t,n,r=!1){const i=Fe(n);(0,v.useEffect)((()=>{const n="function"==typeof e?e():e;return n.addEventListener(t,i,r),()=>n.removeEventListener(t,i,r)}),[e])}((0,v.useCallback)((()=>l.document),[l]),"keydown",(e=>{var t,n;const{key:r}=e,i=e.target,a=null==(t=f.current)?void 0:t.contains(i),o=null==(n=p.current)?void 0:n.contains(i);if(/input|textarea/i.test(i.tagName)&&(" "===r||"Escape"!==r&&a||"Escape"===r&&"search"===i.type))return;if(!a&&!o)return;if(!("Tab"!==r||f.current&&c))return;b.current=e.type;const s={originalEvent:e,source:e.type};switch(r){case"ArrowUp":{const t=M(i,-1);return t&&t.focus&&t.focus(),void e.preventDefault()}case"ArrowDown":if(e.preventDefault(),c){const e=M(i,1);e&&e.focus&&e.focus()}else u(!0,s);return;case"Tab":_t(i.ownerDocument,"keyup",(e=>{var t;("Tab"!==e.key||e.target)&&null!=(t=f.current)&&t.contains(e.target)||u(!1,s)}),{once:!0});break;case"Escape":"Escape"===r&&(e.preventDefault(),e.stopPropagation()),u(!1,s)}})),(0,Ue.jsx)(Pe.Provider,{value:A,children:(0,Ue.jsx)(rr.Provider,{value:k,children:s})})}Qi.displayName="Dropdown",Qi.Menu=Ui,Qi.Toggle=Wi,Qi.Item=Ki;const ea=Qi,ta=v.createContext({});ta.displayName="DropdownContext";const na=ta,ra=v.forwardRef((({className:e,bsPrefix:t,as:n="hr",role:r="separator",...i},a)=>(t=Bt(t,"dropdown-divider"),(0,Ue.jsx)(n,{ref:a,className:Ze()(e,t),role:r,...i}))));ra.displayName="DropdownDivider";const ia=ra,aa=v.forwardRef((({className:e,bsPrefix:t,as:n="div",role:r="heading",...i},a)=>(t=Bt(t,"dropdown-header"),(0,Ue.jsx)(n,{ref:a,className:Ze()(e,t),role:r,...i}))));aa.displayName="DropdownHeader";const oa=aa,sa=v.forwardRef((({bsPrefix:e,className:t,eventKey:n,disabled:r=!1,onClick:i,active:a,as:o=Tn,...s},l)=>{const c=Bt(e,"dropdown-item"),[u,f]=Yi({key:n,href:s.href,disabled:r,onClick:i,active:a});return(0,Ue.jsx)(o,{...s,...u,ref:l,className:Ze()(t,c,f.isActive&&"active",r&&"disabled")})}));sa.displayName="DropdownItem";const la=sa,ca=v.forwardRef((({className:e,bsPrefix:t,as:n="span",...r},i)=>(t=Bt(t,"dropdown-item-text"),(0,Ue.jsx)(n,{ref:i,className:Ze()(e,t),...r}))));ca.displayName="DropdownItemText";const ua=ca,fa=v.createContext(null);fa.displayName="InputGroupContext";const da=fa;function ha(e,t){return e}function pa(e,t,n){let r=e?n?"bottom-start":"bottom-end":n?"bottom-end":"bottom-start";return"up"===t?r=e?n?"top-start":"top-end":n?"top-end":"top-start":"end"===t?r=e?n?"left-end":"right-end":n?"left-start":"right-start":"start"===t?r=e?n?"right-end":"left-end":n?"right-start":"left-start":"down-centered"===t?r="bottom":"up-centered"===t&&(r="top"),r}const ma=v.forwardRef((({bsPrefix:e,className:t,align:n,rootCloseEvent:r,flip:i=!0,show:a,renderOnMount:o,as:s="div",popperConfig:l,variant:c,...u},f)=>{let d=!1;const h=(0,v.useContext)(vn),p=Bt(e,"dropdown-menu"),{align:m,drop:g,isRTL:y}=(0,v.useContext)(na);n=n||m;const b=(0,v.useContext)(da),x=[];if(n)if("object"==typeof n){const e=Object.keys(n);if(e.length){const t=e[0],r=n[t];d="start"===r,x.push(`${p}-${t}-${r}`)}}else"end"===n&&(d=!0);const _=pa(d,g,y),[w,{hasShown:A,popper:k,show:E,toggle:T}]=ji({flip:i,rootCloseEvent:r,show:a,usePopper:!h&&0===x.length,offset:[0,2],popperConfig:l,placement:_});if(w.ref=je(ha(f),w.ref),An((()=>{E&&(null==k||k.update())}),[E]),!A&&!o&&!b)return null;"string"!=typeof s&&(w.show=E,w.close=()=>null==T?void 0:T(!1),w.align=n);let M=u.style;return null!=k&&k.placement&&(M={...u.style,...w.style},u["x-placement"]=k.placement),(0,Ue.jsx)(s,{...u,...w,style:M,...(x.length||h)&&{"data-bs-popper":"static"},className:Ze()(t,p,E&&"show",d&&`${p}-end`,c&&`${p}-${c}`,...x)})}));ma.displayName="DropdownMenu";const ga=ma,va=v.forwardRef((({bsPrefix:e,split:t,className:n,childBsPrefix:r,as:i=Un,...a},o)=>{const s=Bt(e,"dropdown-toggle"),l=(0,v.useContext)(rr);void 0!==r&&(a.bsPrefix=r);const[c]=Hi();return c.ref=je(c.ref,ha(o)),(0,Ue.jsx)(i,{className:Ze()(n,s,t&&`${s}-split`,(null==l?void 0:l.show)&&"show"),...c,...a})}));va.displayName="DropdownToggle";const ya=va,ba=v.forwardRef(((e,t)=>{const{bsPrefix:n,drop:r="down",show:i,className:a,align:o="start",onSelect:s,onToggle:l,focusFirstItemOnShow:c,as:u="div",navbar:f,autoClose:d=!0,...h}=be(e,{show:"onToggle"}),p=(0,v.useContext)(da),m=Bt(n,"dropdown"),g=function(){const{dir:e}=(0,v.useContext)(Ft);return"rtl"===e}(),y=Fe(((e,t)=>{var n;(null==(n=t.originalEvent)||null==(n=n.target)?void 0:n.classList.contains("dropdown-toggle"))&&"mousedown"===t.source||(t.originalEvent.currentTarget!==document||"keydown"===t.source&&"Escape"!==t.originalEvent.key||(t.source="rootClose"),(e=>!1===d?"click"===e:"inside"===d?"rootClose"!==e:"outside"!==d||"select"!==e)(t.source)&&(null==l||l(e,t)))})),b=pa("end"===o,r,g),x=(0,v.useMemo)((()=>({align:o,drop:r,isRTL:g})),[o,r,g]),_={down:m,"down-centered":`${m}-center`,up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return(0,Ue.jsx)(na.Provider,{value:x,children:(0,Ue.jsx)(ea,{placement:b,show:i,onSelect:s,onToggle:y,focusFirstItemOnShow:c,itemSelector:`.${m}-item:not(.disabled):not(:disabled)`,children:p?h.children:(0,Ue.jsx)(u,{...h,ref:t,className:Ze()(a,i&&"show",_[r])})})})}));ba.displayName="Dropdown";const xa=Object.assign(ba,{Toggle:ya,Menu:ga,Item:la,ItemText:ua,Divider:ia,Header:oa}),_a=le().oneOf(["start","end"]),wa=le().oneOfType([_a,le().shape({sm:_a}),le().shape({md:_a}),le().shape({lg:_a}),le().shape({xl:_a}),le().shape({xxl:_a}),le().object]),Aa={id:le().string,href:le().string,onClick:le().func,title:le().node.isRequired,disabled:le().bool,align:wa,menuRole:le().string,renderMenuOnMount:le().bool,rootCloseEvent:le().string,menuVariant:le().oneOf(["dark"]),flip:le().bool,bsPrefix:le().string,variant:le().string,size:le().string},ka=v.forwardRef((({title:e,children:t,bsPrefix:n,rootCloseEvent:r,variant:i,size:a,menuRole:o,renderMenuOnMount:s,disabled:l,href:c,id:u,menuVariant:f,flip:d,...h},p)=>(0,Ue.jsxs)(xa,{ref:p,...h,children:[(0,Ue.jsx)(ya,{id:u,href:c,size:a,variant:i,disabled:l,childBsPrefix:n,children:e}),(0,Ue.jsx)(ga,{role:o,renderOnMount:s,rootCloseEvent:r,variant:f,flip:d,children:t})]})));ka.displayName="DropdownButton",ka.propTypes=Aa;const Ea=ka;function Ta(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ma extends v.PureComponent{constructor(){super(...arguments),Ta(this,"state",{helpShown:!1})}toggleHelp(){const{helpShown:e}=this.state;this.setState({helpShown:!e})}render(){const{title:e,helpText:t}=this.props,{helpShown:n}=this.state,r=n?"block":"none";return v.createElement(v.Fragment,null,v.createElement("div",{className:"header-wrapper"},v.createElement("div",{"data-test":ae()(e+"TitleSummaryCard")},e&&v.createElement("h2",{id:e},e)),t&&v.createElement("div",null,v.createElement(jn,{onClick:()=>this.toggleHelp(),className:"header-questionMark","data-test":ae()(e+"QuestionMark")}))),v.createElement("div",{className:"title-help-text-container",style:{display:r},dangerouslySetInnerHTML:{__html:t}}))}}function Sa(){return Sa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sa.apply(this,arguments)}var Ca=v.createElement("svg",{viewBox:"-2 -5 14 20",height:"100%",width:"100%",style:{position:"absolute",top:0}},v.createElement("path",{d:"M9.9 2.12L7.78 0 4.95 2.828 2.12 0 0 2.12l2.83 2.83L0 7.776 2.123 9.9 4.95 7.07 7.78 9.9 9.9 7.776 7.072 4.95 9.9 2.12",fill:"#fff",fillRule:"evenodd"})),Oa=v.createElement("svg",{height:"100%",width:"100%",viewBox:"-2 -5 17 21",style:{position:"absolute",top:0}},v.createElement("path",{d:"M11.264 0L5.26 6.004 2.103 2.847 0 4.95l5.26 5.26 8.108-8.107L11.264 0",fill:"#fff",fillRule:"evenodd"}));function Ra(e){if(7===e.length)return e;for(var t="#",n=1;n<4;n+=1)t+=e[n]+e[n];return t}function Na(e,t,n,r,i){return function(e,t,n,r,i){var a=(e-n)/(t-n);if(0===a)return r;if(1===a)return i;for(var o="#",s=1;s<6;s+=2){var l=parseInt(r.substr(s,2),16),c=parseInt(i.substr(s,2),16),u=Math.round((1-a)*l+a*c).toString(16);1===u.length&&(u="0"+u),o+=u}return o}(e,t,n,Ra(r),Ra(i))}var La=function(e){function t(t){e.call(this,t);var n=t.height,r=t.width,i=t.checked;this.t=t.handleDiameter||n-2,this.i=Math.max(r-n,r-(n+this.t)/2),this.o=Math.max(0,(n-this.t)/2),this.state={h:i?this.i:this.o},this.l=0,this.u=0,this.p=this.p.bind(this),this.v=this.v.bind(this),this.g=this.g.bind(this),this.k=this.k.bind(this),this.m=this.m.bind(this),this.M=this.M.bind(this),this.T=this.T.bind(this),this.$=this.$.bind(this),this.C=this.C.bind(this),this.D=this.D.bind(this),this.O=this.O.bind(this),this.S=this.S.bind(this)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.componentDidMount=function(){this.W=!0},t.prototype.componentDidUpdate=function(e){e.checked!==this.props.checked&&this.setState({h:this.props.checked?this.i:this.o})},t.prototype.componentWillUnmount=function(){this.W=!1},t.prototype.I=function(e){this.H.focus(),this.setState({R:e,j:!0,B:Date.now()})},t.prototype.L=function(e){var t=this.state,n=t.R,r=t.h,i=(this.props.checked?this.i:this.o)+e-n;t.N||e===n||this.setState({N:!0});var a=Math.min(this.i,Math.max(this.o,i));a!==r&&this.setState({h:a})},t.prototype.U=function(e){var t=this.state,n=t.h,r=t.N,i=t.B,a=this.props.checked,o=(this.i+this.o)/2;this.setState({h:this.props.checked?this.i:this.o});var s=Date.now()-i;(!r||s<250||a&&n<=o||!a&&n>=o)&&this.A(e),this.W&&this.setState({N:!1,j:!1}),this.l=Date.now()},t.prototype.p=function(e){e.preventDefault(),"number"==typeof e.button&&0!==e.button||(this.I(e.clientX),window.addEventListener("mousemove",this.v),window.addEventListener("mouseup",this.g))},t.prototype.v=function(e){e.preventDefault(),this.L(e.clientX)},t.prototype.g=function(e){this.U(e),window.removeEventListener("mousemove",this.v),window.removeEventListener("mouseup",this.g)},t.prototype.k=function(e){this.X=null,this.I(e.touches[0].clientX)},t.prototype.m=function(e){this.L(e.touches[0].clientX)},t.prototype.M=function(e){e.preventDefault(),this.U(e)},t.prototype.$=function(e){Date.now()-this.l>50&&(this.A(e),Date.now()-this.u>50&&this.W&&this.setState({j:!1}))},t.prototype.C=function(){this.u=Date.now()},t.prototype.D=function(){this.setState({j:!0})},t.prototype.O=function(){this.setState({j:!1})},t.prototype.S=function(e){this.H=e},t.prototype.T=function(e){e.preventDefault(),this.H.focus(),this.A(e),this.W&&this.setState({j:!1})},t.prototype.A=function(e){var t=this.props;(0,t.onChange)(!t.checked,e,t.id)},t.prototype.render=function(){var e=this.props,t=e.checked,n=e.disabled,r=e.className,i=e.offColor,a=e.onColor,o=e.offHandleColor,s=e.onHandleColor,l=e.checkedIcon,c=e.uncheckedIcon,u=e.checkedHandleIcon,f=e.uncheckedHandleIcon,d=e.boxShadow,h=e.activeBoxShadow,p=e.height,m=e.width,g=e.borderRadius,y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}(e,["checked","disabled","className","offColor","onColor","offHandleColor","onHandleColor","checkedIcon","uncheckedIcon","checkedHandleIcon","uncheckedHandleIcon","boxShadow","activeBoxShadow","height","width","borderRadius","handleDiameter"]),b=this.state,x=b.h,_=b.N,w=b.j,A={position:"relative",display:"inline-block",textAlign:"left",opacity:n?.5:1,direction:"ltr",borderRadius:p/2,WebkitTransition:"opacity 0.25s",MozTransition:"opacity 0.25s",transition:"opacity 0.25s",touchAction:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none"},k={height:p,width:m,margin:Math.max(0,(this.t-p)/2),position:"relative",background:Na(x,this.i,this.o,i,a),borderRadius:"number"==typeof g?g:p/2,cursor:n?"default":"pointer",WebkitTransition:_?null:"background 0.25s",MozTransition:_?null:"background 0.25s",transition:_?null:"background 0.25s"},E={height:p,width:Math.min(1.5*p,m-(this.t+p)/2+1),position:"relative",opacity:(x-this.o)/(this.i-this.o),pointerEvents:"none",WebkitTransition:_?null:"opacity 0.25s",MozTransition:_?null:"opacity 0.25s",transition:_?null:"opacity 0.25s"},T={height:p,width:Math.min(1.5*p,m-(this.t+p)/2+1),position:"absolute",opacity:1-(x-this.o)/(this.i-this.o),right:0,top:0,pointerEvents:"none",WebkitTransition:_?null:"opacity 0.25s",MozTransition:_?null:"opacity 0.25s",transition:_?null:"opacity 0.25s"},M={height:this.t,width:this.t,background:Na(x,this.i,this.o,o,s),display:"inline-block",cursor:n?"default":"pointer",borderRadius:"number"==typeof g?g-1:"50%",position:"absolute",transform:"translateX("+x+"px)",top:Math.max(0,(p-this.t)/2),outline:0,boxShadow:w?h:d,border:0,WebkitTransition:_?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s",MozTransition:_?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s",transition:_?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s"},S={height:this.t,width:this.t,opacity:Math.max(2*(1-(x-this.o)/(this.i-this.o)-.5),0),position:"absolute",left:0,top:0,pointerEvents:"none",WebkitTransition:_?null:"opacity 0.25s",MozTransition:_?null:"opacity 0.25s",transition:_?null:"opacity 0.25s"},C={height:this.t,width:this.t,opacity:Math.max(2*((x-this.o)/(this.i-this.o)-.5),0),position:"absolute",left:0,top:0,pointerEvents:"none",WebkitTransition:_?null:"opacity 0.25s",MozTransition:_?null:"opacity 0.25s",transition:_?null:"opacity 0.25s"};return v.createElement("div",{className:r,style:A},v.createElement("div",{className:"react-switch-bg",style:k,onClick:n?null:this.T,onMouseDown:function(e){return e.preventDefault()}},l&&v.createElement("div",{style:E},l),c&&v.createElement("div",{style:T},c)),v.createElement("div",{className:"react-switch-handle",style:M,onClick:function(e){return e.preventDefault()},onMouseDown:n?null:this.p,onTouchStart:n?null:this.k,onTouchMove:n?null:this.m,onTouchEnd:n?null:this.M,onTouchCancel:n?null:this.O},f&&v.createElement("div",{style:S},f),u&&v.createElement("div",{style:C},u)),v.createElement("input",Sa({},{type:"checkbox",role:"switch","aria-checked":t,checked:t,disabled:n,style:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",width:1}},y,{ref:this.S,onFocus:this.D,onBlur:this.O,onKeyUp:this.C,onChange:this.$})))},t}(v.Component);function Da(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}La.defaultProps={disabled:!1,offColor:"#888",onColor:"#080",offHandleColor:"#fff",onHandleColor:"#fff",uncheckedIcon:Ca,checkedIcon:Oa,boxShadow:null,activeBoxShadow:"0 0 2px 3px #3bf",height:28,width:56};class Pa extends v.Component{constructor(e){super(e),Da(this,"toggleGrayscale",(()=>{this.setState({grayscale:!this.state.grayscale})})),this.state={grayscale:!1}}renderPlot(){const{data:e,layout:t={},config:n={},size:r}=this.props;if(!r.width&&!t.width)return;ee(e);const i=e[0].marker.size,a=t.width?{}:{...r,autosize:!1},o=S()({},{xaxis:{fixedrange:!0},yaxis:{fixedrange:!0},font:{family:"Overpass"},margin:{t:24}},t,a),s=S()({},{displaylogo:!1,displayModeBar:!1,showLink:!1,toImageButtonOptions:{filename:"image"}},n),l=void 0!==window.navigator.msSaveBlob?"svg":"png",c=s.toImageButtonOptions.filename,u=[{name:"Download plot",icon:K.Icons.camera,click(e){const t=e.layout,n=t.sliders;delete t.sliders;const r=e._fullLayout._size.w,a={"marker.size":531*i/r};K.restyle(e,a),K.downloadImage(e,{filename:c,format:l,width:730,height:610}),a["marker.size"]=i,t.sliders=n,K.restyle(e,a)}}];for(let e=0;e<s.modeBarButtons[0].length;e++){const t=s.modeBarButtons[0][e];"toImage"!==t&&u.push(t)}s.modeBarButtons[0]=u,K.react(this.plot,{data:e,layout:o,config:s})}resizePlot(e){K.relayout(this.plot,e)}componentDidMount(){this.renderPlot()}componentDidUpdate(e){const{config:t,data:n,layout:r,size:i}=e,{config:a,data:o,layout:s,size:l}=this.props;l===i||null!=s&&s.width||(this.plot.data?this.resizePlot(l):this.renderPlot()),a===t&&o===n&&s===r||this.renderPlot()}render(){return v.createElement("div",{className:"plot-wrapper "+(this.state.grayscale?"gray-images":""),style:{textAlign:"left",marginBottom:"40px"}},v.createElement("div",{ref:e=>{this.plot=e},style:{height:"380px"}}),v.createElement("div",{style:{position:"relative",top:"40px"}},v.createElement("label",{style:{marginLeft:"50px"}},v.createElement(La,{checked:this.state.grayscale,onChange:this.toggleGrayscale,checkedIcon:!0,uncheckedIcon:!1,onColor:"#153057",height:20,width:40})),v.createElement("span",{style:{position:"relative",top:"-5px"}}," Grayscale Background Image")))}}const Ia=(0,te.withSize)({monitorHeight:!0})(Pa);var Fa=n(35519),za=n(11259),ja=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function Ba(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}const Ua={get:function(e,t,n){if(!t)return e;var r=qa(t),i=void 0;try{i=r.reduce((function(e,t){return e[t]}),e)}catch(e){}return void 0!==i?i:n},set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=arguments[2],r=qa(t),i=void 0,a=e;for(;(i=r.shift())&&r.length;)a[i]||(a[i]={}),a=a[i];return a[i]=n,e},takeRight:function(e,t){var n=t>e.length?0:e.length-t;return e.slice(n)},last:function(e){return e[e.length-1]},orderBy:function(e,t,n,r){return e.sort((function(e,i){for(var a=0;a<t.length;a+=1){var o=t[a],s=!1===n[a]||"desc"===n[a],l=o(e,i);if(l)return s?-l:l}return n[0]?e[r]-i[r]:i[r]-e[r]}))},range:function(e){for(var t=[],n=0;n<e;n+=1)t.push(e);return t},remove:function(e,t){return e.filter((function(n,r){return!!t(n)&&(e.splice(r,1),!0)}))},clone:function(e){try{return JSON.parse(JSON.stringify(e,(function(e,t){return"function"==typeof t?t.toString():t})))}catch(t){return e}},getFirstDefined:function(){for(var e=0;e<arguments.length;e+=1)if(void 0!==(arguments.length<=e?void 0:arguments[e]))return arguments.length<=e?void 0:arguments[e]},sum:function(e){return e.reduce((function(e,t){return e+t}),0)},makeTemplateComponent:function(e,t){if(!t)throw new Error("No displayName found for template component:",e);var n=function(t){var n=t.children,r=t.className,i=Ba(t,["children","className"]);return v.createElement("div",ja({className:Ze()(e,r)},i),n)};return n.displayName=t,n},groupBy:function(e,t){return e.reduce((function(e,n,r){var i="function"==typeof t?t(n,r):n[t];return e[i]=$a(e[i])?e[i]:[],e[i].push(n),e}),{})},isArray:$a,splitProps:function(e){var t=e.className,n=e.style,r=Ba(e,["className","style"]);return{className:t,style:n,rest:r||{}}},compactObject:function(e){var t={};e&&Object.keys(e).map((function(n){return Object.prototype.hasOwnProperty.call(e,n)&&void 0!==e[n]&&void 0!==e[n]&&(t[n]=e[n]),!0}));return t},isSortingDesc:function(e){return!("desc"!==e.sort&&!0!==e.desc&&!1!==e.asc)},normalizeComponent:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;if(za.isElement(e)||"string"==typeof e)return e;if(za.isValidElementType(e))return v.createElement(e,t);return n},asPx:function(e){return e=Number(e),Number.isNaN(e)?null:e+"px"}};function $a(e){return Array.isArray(e)}function qa(e){return Ha(e).join(".").replace(/\[/g,".").replace(/\]/g,"").split(".")}function Ha(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if($a(e))for(var n=0;n<e.length;n+=1)Ha(e[n],t);else t.push(e);return t}var Va=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Wa=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},Ga=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ya=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Xa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ka(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var Za=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ja=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var Qa=function(e){return v.createElement("button",Ja({type:"button"},e,{className:"-btn"}),e.children)},eo=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getSafePage=n.getSafePage.bind(n),n.changePage=n.changePage.bind(n),n.applyPage=n.applyPage.bind(n),n.state={page:e.page},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Za(t,[{key:"componentDidUpdate",value:function(e,t){e.page!==this.props.page&&t.page!==this.state.page&&this.setState({page:this.props.page})}},{key:"getSafePage",value:function(e){return Number.isNaN(e)&&(e=this.props.page),Math.min(Math.max(e,0),this.props.pages-1)}},{key:"changePage",value:function(e){e=this.getSafePage(e),this.setState({page:e}),this.props.page!==e&&this.props.onPageChange(e)}},{key:"applyPage",value:function(e){e&&e.preventDefault();var t=this.state.page;this.changePage(""===t?this.props.page:t)}},{key:"getPageJumpProperties",value:function(){var e=this;return{onKeyPress:function(t){13!==t.which&&13!==t.keyCode||e.applyPage()},onBlur:this.applyPage,value:""===this.state.page?"":this.state.page+1,onChange:function(t){var n=t.target.value,r=n-1;if(""===n)return e.setState({page:n});e.setState({page:e.getSafePage(r)})},inputType:""===this.state.page?"text":"number",pageJumpText:this.props.pageJumpText}}},{key:"render",value:function(){var e=this,t=this.props,n=t.pages,r=t.page,i=t.showPageSizeOptions,a=t.pageSizeOptions,o=t.pageSize,s=t.showPageJump,l=t.canPrevious,c=t.canNext,u=t.onPageSizeChange,f=t.className,d=t.PreviousComponent,h=t.NextComponent,p=t.renderPageJump,m=t.renderCurrentPage,g=t.renderTotalPagesCount,y=t.renderPageSizeOptions;return v.createElement("div",{className:Ze()(f,"-pagination"),style:this.props.style},v.createElement("div",{className:"-previous"},v.createElement(d,{onClick:function(){l&&e.changePage(r-1)},disabled:!l},this.props.previousText)),v.createElement("div",{className:"-center"},v.createElement("span",{className:"-pageInfo"},this.props.pageText," ",s?p(this.getPageJumpProperties()):m(r)," ",this.props.ofText," ",g(n)),i&&y({pageSize:o,rowsSelectorText:this.props.rowsSelectorText,pageSizeOptions:a,onPageSizeChange:u,rowsText:this.props.rowsText})),v.createElement("div",{className:"-next"},v.createElement(h,{onClick:function(){c&&e.changePage(r+1)},disabled:!c},this.props.nextText)))}}]),t}(v.Component);eo.defaultProps={PreviousComponent:Qa,NextComponent:Qa,renderPageJump:function(e){var t=e.onChange,n=e.value,r=e.onBlur,i=e.onKeyPress,a=e.inputType,o=e.pageJumpText;return v.createElement("div",{className:"-pageJump"},v.createElement("input",{"aria-label":o,type:a,onChange:t,value:n,onBlur:r,onKeyPress:i}))},renderCurrentPage:function(e){return v.createElement("span",{className:"-currentPage"},e+1)},renderTotalPagesCount:function(e){return v.createElement("span",{className:"-totalPages"},e||1)},renderPageSizeOptions:function(e){var t=e.pageSize,n=e.pageSizeOptions,r=e.rowsSelectorText,i=e.onPageSizeChange,a=e.rowsText;return v.createElement("span",{className:"select-wrap -pageSizeOptions"},v.createElement("select",{"aria-label":r,onChange:function(e){return i(Number(e.target.value))},value:t},n.map((function(e,t){return v.createElement("option",{key:t,value:e},e+" "+a)}))))}};const to=eo;var no=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function ro(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var io=function(){return{}};const ao={data:[],resolveData:function(e){return e},loading:!1,showPagination:!0,showPaginationTop:!1,showPaginationBottom:!0,showPageSizeOptions:!0,pageSizeOptions:[5,10,20,25,50,100],defaultPage:0,defaultPageSize:20,showPageJump:!0,collapseOnSortingChange:!0,collapseOnPageChange:!0,collapseOnDataChange:!0,freezeWhenExpanded:!1,sortable:!0,multiSort:!0,resizable:!0,filterable:!1,defaultSortDesc:!1,defaultSorted:[],defaultFiltered:[],defaultResized:[],defaultExpanded:{},defaultFilterMethod:function(e,t,n){var r=e.pivotId||e.id;return void 0===t[r]||String(t[r]).startsWith(e.value)},defaultSortMethod:function(e,t,n){return t=null==t?"":t,(e="string"==typeof(e=null==e?"":e)?e.toLowerCase():e)>(t="string"==typeof t?t.toLowerCase():t)?1:e<t?-1:0},onPageChange:void 0,onPageSizeChange:void 0,onSortedChange:void 0,onFilteredChange:void 0,onResizedChange:void 0,onExpandedChange:void 0,pivotBy:void 0,pivotValKey:"_pivotVal",pivotIDKey:"_pivotID",subRowsKey:"_subRows",aggregatedKey:"_aggregated",nestingLevelKey:"_nestingLevel",originalKey:"_original",indexKey:"_index",groupedByPivotKey:"_groupedByPivot",onFetchData:function(){return null},className:"",style:{},getProps:io,getTableProps:io,getTheadGroupProps:io,getTheadGroupTrProps:io,getTheadGroupThProps:io,getTheadProps:io,getTheadTrProps:io,getTheadThProps:io,getTheadFilterProps:io,getTheadFilterTrProps:io,getTheadFilterThProps:io,getTbodyProps:io,getTrGroupProps:io,getTrProps:io,getTdProps:io,getTfootProps:io,getTfootTrProps:io,getTfootTdProps:io,getPaginationProps:io,getLoadingProps:io,getNoDataProps:io,getResizerProps:io,column:{Cell:void 0,Header:void 0,Footer:void 0,Aggregated:void 0,Pivot:void 0,PivotValue:void 0,Expander:void 0,Filter:void 0,Placeholder:void 0,sortable:void 0,resizable:void 0,filterable:void 0,show:!0,minWidth:100,minResizeWidth:11,className:"",style:{},getProps:io,aggregate:void 0,headerClassName:"",headerStyle:{},getHeaderProps:io,footerClassName:"",footerStyle:{},getFooterProps:io,filterMethod:void 0,filterAll:!1,sortMethod:void 0},expanderDefaults:{sortable:!1,resizable:!1,filterable:!1,width:35},pivotDefaults:{},previousText:"Previous",nextText:"Next",loadingText:"Loading...",noDataText:"No rows found",pageText:"Page",ofText:"of",rowsText:"rows",pageJumpText:"jump to page",rowsSelectorText:"rows per page",TableComponent:function(e){var t=e.children,n=e.className,r=ro(e,["children","className"]);return v.createElement("div",no({className:Ze()("rt-table",n),role:"grid"},r),t)},TheadComponent:Ua.makeTemplateComponent("rt-thead","Thead"),TbodyComponent:Ua.makeTemplateComponent("rt-tbody","Tbody"),TrGroupComponent:function(e){var t=e.children,n=e.className,r=ro(e,["children","className"]);return v.createElement("div",no({className:Ze()("rt-tr-group",n),role:"rowgroup"},r),t)},TrComponent:function(e){var t=e.children,n=e.className,r=ro(e,["children","className"]);return v.createElement("div",no({className:Ze()("rt-tr",n),role:"row"},r),t)},ThComponent:function(e){var t=e.toggleSort,n=e.className,r=e.children,i=ro(e,["toggleSort","className","children"]);return v.createElement("div",no({className:Ze()("rt-th",n),onClick:function(e){return t&&t(e)},role:"columnheader",tabIndex:"-1"},i),r)},TdComponent:function(e){e.toggleSort;var t=e.className,n=e.children,r=ro(e,["toggleSort","className","children"]);return v.createElement("div",no({className:Ze()("rt-td",t),role:"gridcell"},r),n)},TfootComponent:Ua.makeTemplateComponent("rt-tfoot","Tfoot"),FilterComponent:function(e){var t=e.filter,n=e.onChange,r=e.column;return v.createElement("input",{type:"text",style:{width:"100%"},placeholder:r.Placeholder,value:t?t.value:"",onChange:function(e){return n(e.target.value)}})},ExpanderComponent:function(e){var t=e.isExpanded;return v.createElement("div",{className:Ze()("rt-expander",t&&"-open")},"")},PivotValueComponent:function(e){var t=e.subRows,n=e.value;return v.createElement("span",null,n," ",t&&"("+t.length+")")},AggregatedComponent:function(e){var t=e.subRows,n=e.column,r=t.filter((function(e){return void 0!==e[n.id]})).map((function(e,r){return v.createElement("span",{key:r},e[n.id],r<t.length-1?", ":"")}));return v.createElement("span",null,r)},PivotComponent:void 0,PaginationComponent:to,PreviousComponent:void 0,NextComponent:void 0,LoadingComponent:function(e){var t=e.className,n=e.loading,r=e.loadingText,i=ro(e,["className","loading","loadingText"]);return v.createElement("div",no({className:Ze()("-loading",{"-active":n},t)},i),v.createElement("div",{className:"-loading-inner"},r))},NoDataComponent:Ua.makeTemplateComponent("rt-noData","NoData"),ResizerComponent:Ua.makeTemplateComponent("rt-resizer","Resizer"),PadRowComponent:function(){return v.createElement("span",null,"")}},oo={data:le().any,loading:le().bool,showPagination:le().bool,showPaginationTop:le().bool,showPaginationBottom:le().bool,showPageSizeOptions:le().bool,pageSizeOptions:le().array,defaultPageSize:le().number,showPageJump:le().bool,collapseOnSortingChange:le().bool,collapseOnPageChange:le().bool,collapseOnDataChange:le().bool,freezeWhenExpanded:le().bool,sortable:le().bool,resizable:le().bool,filterable:le().bool,defaultSortDesc:le().bool,defaultSorted:le().array,defaultFiltered:le().array,defaultResized:le().array,defaultExpanded:le().object,defaultFilterMethod:le().func,defaultSortMethod:le().func,onPageChange:le().func,onPageSizeChange:le().func,onSortedChange:le().func,onFilteredChange:le().func,onResizedChange:le().func,onExpandedChange:le().func,pivotBy:le().array,pivotValKey:le().string,pivotIDKey:le().string,subRowsKey:le().string,aggregatedKey:le().string,nestingLevelKey:le().string,originalKey:le().string,indexKey:le().string,groupedByPivotKey:le().string,onFetchData:le().func,className:le().string,style:le().object,getProps:le().func,getTableProps:le().func,getTheadGroupProps:le().func,getTheadGroupTrProps:le().func,getTheadGroupThProps:le().func,getTheadProps:le().func,getTheadTrProps:le().func,getTheadThProps:le().func,getTheadFilterProps:le().func,getTheadFilterTrProps:le().func,getTheadFilterThProps:le().func,getTbodyProps:le().func,getTrGroupProps:le().func,getTrProps:le().func,getTdProps:le().func,getTfootProps:le().func,getTfootTrProps:le().func,getTfootTdProps:le().func,getPaginationProps:le().func,getLoadingProps:le().func,getNoDataProps:le().func,getResizerProps:le().func,columns:le().arrayOf(le().shape({Cell:le().oneOfType([le().element,le().string,le().elementType]),Header:le().oneOfType([le().element,le().string,le().elementType]),Footer:le().oneOfType([le().element,le().string,le().elementType]),Aggregated:le().oneOfType([le().element,le().string,le().elementType]),Pivot:le().oneOfType([le().element,le().string,le().elementType]),PivotValue:le().oneOfType([le().element,le().string,le().elementType]),Expander:le().oneOfType([le().element,le().string,le().elementType]),Filter:le().oneOfType([le().element,le().elementType]),sortable:le().bool,resizable:le().bool,filterable:le().bool,show:le().bool,minWidth:le().number,minResizeWidth:le().number,className:le().string,style:le().object,getProps:le().func,aggregate:le().func,headerClassName:le().string,headerStyle:le().object,getHeaderProps:le().func,footerClassName:le().string,footerStyle:le().object,getFooterProps:le().func,filterMethod:le().func,filterAll:le().bool,sortMethod:le().func})),expanderDefaults:le().shape({sortable:le().bool,resizable:le().bool,filterable:le().bool,width:le().number}),pivotDefaults:le().object,previousText:le().node,nextText:le().node,loadingText:le().node,noDataText:le().node,pageText:le().node,ofText:le().node,rowsText:le().node,pageJumpText:le().node,rowsSelectorText:le().node,TableComponent:le().elementType,TheadComponent:le().elementType,TbodyComponent:le().elementType,TrGroupComponent:le().elementType,TrComponent:le().elementType,ThComponent:le().elementType,TdComponent:le().elementType,TfootComponent:le().elementType,FilterComponent:le().elementType,ExpanderComponent:le().elementType,PivotValueComponent:le().elementType,AggregatedComponent:le().elementType,PivotComponent:le().elementType,PaginationComponent:le().elementType,PreviousComponent:le().elementType,NextComponent:le().elementType,LoadingComponent:le().elementType,NoDataComponent:le().elementType,ResizerComponent:le().elementType,PadRowComponent:le().elementType};var so=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},lo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},co=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var uo=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getResolvedState=n.getResolvedState.bind(n),n.getDataModel=n.getDataModel.bind(n),n.getSortedData=n.getSortedData.bind(n),n.fireFetchData=n.fireFetchData.bind(n),n.getPropOrState=n.getPropOrState.bind(n),n.getStateOrProp=n.getStateOrProp.bind(n),n.filterData=n.filterData.bind(n),n.sortData=n.sortData.bind(n),n.getMinRows=n.getMinRows.bind(n),n.onPageChange=n.onPageChange.bind(n),n.onPageSizeChange=n.onPageSizeChange.bind(n),n.sortColumn=n.sortColumn.bind(n),n.filterColumn=n.filterColumn.bind(n),n.resizeColumnStart=n.resizeColumnStart.bind(n),n.resizeColumnEnd=n.resizeColumnEnd.bind(n),n.resizeColumnMoving=n.resizeColumnMoving.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),co(t,[{key:"render",value:function(){var e=this,t=this.getResolvedState(),n=t.children,r=t.className,i=t.style,a=t.getProps,o=t.getTableProps,s=t.getTheadGroupProps,l=t.getTheadGroupTrProps,c=t.getTheadGroupThProps,u=t.getTheadProps,f=t.getTheadTrProps,d=t.getTheadThProps,h=t.getTheadFilterProps,p=t.getTheadFilterTrProps,m=t.getTheadFilterThProps,g=t.getTbodyProps,y=t.getTrGroupProps,b=t.getTrProps,x=t.getTdProps,_=t.getTfootProps,w=t.getTfootTrProps,A=t.getTfootTdProps,k=t.getPaginationProps,E=t.getLoadingProps,T=t.getNoDataProps,M=t.getResizerProps,S=t.showPagination,C=t.showPaginationTop,O=t.showPaginationBottom,R=t.manual,N=t.loadingText,L=t.noDataText,D=t.sortable,P=t.multiSort,I=t.resizable,F=t.filterable,z=t.pivotIDKey,j=t.pivotValKey,B=t.pivotBy,U=t.subRowsKey,$=t.aggregatedKey,q=t.originalKey,H=t.indexKey,V=t.groupedByPivotKey,W=t.loading,G=t.pageSize,Y=t.page,X=t.sorted,K=t.filtered,Z=t.resized,J=t.expanded,Q=t.pages,ee=t.onExpandedChange,te=t.TableComponent,ne=t.TheadComponent,re=t.TbodyComponent,ie=t.TrGroupComponent,ae=t.TrComponent,oe=t.ThComponent,se=t.TdComponent,le=t.TfootComponent,ce=t.PaginationComponent,ue=t.LoadingComponent,fe=t.SubComponent,de=t.NoDataComponent,he=t.ResizerComponent,pe=t.ExpanderComponent,me=t.PivotValueComponent,ge=t.PivotComponent,ve=t.AggregatedComponent,ye=t.FilterComponent,be=t.PadRowComponent,xe=t.resolvedData,_e=t.allVisibleColumns,we=t.headerGroups,Ae=t.hasHeaderGroups,ke=t.sortedData,Ee=t.currentlyResizing,Te=G*Y,Me=Te+G,Se=R?xe:ke.slice(Te,Me),Ce=this.getMinRows(),Oe=Ua.range(Math.max(Ce-Se.length,0)),Re=_e.some((function(e){return e.Footer})),Ne=F||_e.some((function(e){return e.filterable})),Le=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return[t.map((function(t,i){var a=lo({},t,{_viewIndex:r+=1}),o=n.concat([i]);if(a[U]&&Ua.get(J,o)){var s=e(a[U],o,r),l=so(s,2);a[U]=l[0],r=l[1]}return a})),r]}(Se),De=so(Le,1);Se=De[0];var Pe=Y>0,Ie=Y+1<Q,Fe=Ua.sum(_e.map((function(e){var t=Z.find((function(t){return t.id===e.id}))||{};return Ua.getFirstDefined(t.value,e.width,e.minWidth)}))),ze=-1,je=lo({},t,{startRow:Te,endRow:Me,pageRows:Se,minRows:Ce,padRows:Oe,hasColumnFooter:Re,canPrevious:Pe,canNext:Ie,rowMinWidth:Fe}),Be=Ua.splitProps(a(je,void 0,void 0,this)),Ue=Ua.splitProps(o(je,void 0,void 0,this)),$e=Ua.splitProps(g(je,void 0,void 0,this)),qe=E(je,void 0,void 0,this),He=T(je,void 0,void 0,this),Ve=function(t,n){var r=function(e){return(Z.find((function(t){return t.id===e.id}))||{}).value},i=Ua.sum(t.columns.map((function(e){return e.width||r(e)?0:e.minWidth}))),a=Ua.sum(t.columns.map((function(e){return Ua.getFirstDefined(r(e),e.width,e.minWidth)}))),o=Ua.sum(t.columns.map((function(e){return Ua.getFirstDefined(r(e),e.width,e.maxWidth)}))),s=Ua.splitProps(c(je,void 0,t,e)),l=Ua.splitProps(t.getHeaderProps(je,void 0,t,e)),u=[t.headerClassName,s.className,l.className],f=lo({},t.headerStyle,s.style,l.style),d=lo({},s.rest,l.rest),h={flex:i+" 0 auto",width:Ua.asPx(a),maxWidth:Ua.asPx(o)};return v.createElement(oe,lo({key:n+"-"+t.id,className:Ze()(u),style:lo({},f,h)},d),Ua.normalizeComponent(t.Header,{data:ke,column:t}))},We=function(t,n){var r=Z.find((function(e){return e.id===t.id}))||{},i=X.find((function(e){return e.id===t.id})),a="function"==typeof t.show?t.show():t.show,o=Ua.getFirstDefined(r.value,t.width,t.minWidth),s=Ua.getFirstDefined(r.value,t.width,t.maxWidth),l=Ua.splitProps(d(je,void 0,t,e)),c=Ua.splitProps(t.getHeaderProps(je,void 0,t,e)),u=[t.headerClassName,l.className,c.className],f=lo({},t.headerStyle,l.style,c.style),h=lo({},l.rest,c.rest),p=Ua.getFirstDefined(t.resizable,I,!1),m=p?v.createElement(he,lo({onMouseDown:function(n){return e.resizeColumnStart(n,t,!1)},onTouchStart:function(n){return e.resizeColumnStart(n,t,!0)}},M("finalState",void 0,t,e))):null,g=Ua.getFirstDefined(t.sortable,D,!1);return v.createElement(oe,lo({key:n+"-"+t.id,className:Ze()(u,p&&"rt-resizable-header",i?i.desc?"-sort-desc":"-sort-asc":"",g&&"-cursor-pointer",!a&&"-hidden",B&&B.slice(0,-1).includes(t.id)&&"rt-header-pivot"),style:lo({},f,{flex:o+" 0 auto",width:Ua.asPx(o),maxWidth:Ua.asPx(s)}),toggleSort:function(n){g&&e.sortColumn(t,!!P&&n.shiftKey)}},h),v.createElement("div",{className:Ze()(p&&"rt-resizable-header-content")},Ua.normalizeComponent(t.Header,{data:ke,column:t})),m)},Ge=function(t,n){var r=Z.find((function(e){return e.id===t.id}))||{},i=Ua.getFirstDefined(r.value,t.width,t.minWidth),a=Ua.getFirstDefined(r.value,t.width,t.maxWidth),o=Ua.splitProps(m(je,void 0,t,e)),s=Ua.splitProps(t.getHeaderProps(je,void 0,t,e)),l=[t.headerClassName,o.className,s.className],c=lo({},t.headerStyle,o.style,s.style),u=lo({},o.rest,s.rest),f=K.find((function(e){return e.id===t.id})),d=t.Filter||ye,h=Ua.getFirstDefined(t.filterable,F,!1);return v.createElement(oe,lo({key:n+"-"+t.id,className:Ze()(l),style:lo({},c,{flex:i+" 0 auto",width:Ua.asPx(i),maxWidth:Ua.asPx(a)})},u),h?Ua.normalizeComponent(d,{column:t,filter:f,onChange:function(n){return e.filterColumn(t,n)}},ao.column.Filter):null)},Ye=function t(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a={original:n[q],row:n,index:n[H],viewIndex:ze+=1,pageSize:G,page:Y,level:i.length,nestingPath:i.concat([r]),aggregated:n[$],groupedByPivot:n[V],subRows:n[U]},o=Ua.get(J,a.nestingPath),s=y(je,a,void 0,e),l=Ua.splitProps(b(je,a,void 0,e));return v.createElement(ie,lo({key:a.nestingPath.join("_")},s),v.createElement(ae,lo({className:Ze()(l.className,n._viewIndex%2?"-even":"-odd"),style:l.style},l.rest),_e.map((function(t,r){var i=Z.find((function(e){return e.id===t.id}))||{},s="function"==typeof t.show?t.show():t.show,l=Ua.getFirstDefined(i.value,t.width,t.minWidth),c=Ua.getFirstDefined(i.value,t.width,t.maxWidth),u=Ua.splitProps(x(je,a,t,e)),f=Ua.splitProps(t.getProps(je,a,t,e)),d=[u.className,t.className,f.className],h=lo({},u.style,t.style,f.style),p=lo({},a,{isExpanded:o,column:lo({},t),value:a.row[t.id],pivoted:t.pivoted,expander:t.expander,resized:Z,show:s,width:l,maxWidth:c,tdProps:u,columnProps:f,classes:d,styles:h}),m=p.value,g=void 0,y=void 0,b=void 0,_=Ua.normalizeComponent(t.Cell,p,m),w=t.Aggregated||(t.aggregate?t.Cell:ve),A=t.Expander||pe,k=t.PivotValue||me,E=ge||function(e){return v.createElement("div",null,v.createElement(A,e),v.createElement(k,e))},T=t.Pivot||E;(p.pivoted||p.expander)&&(p.expandable=!0,g=!0,!p.pivoted||p.subRows||fe||(p.expandable=!1)),p.pivoted?(y=a.row[z]===t.id&&p.subRows,b=B.indexOf(t.id)>B.indexOf(a.row[z])&&p.subRows,_=y?Ua.normalizeComponent(T,lo({},p,{value:n[j]}),n[j]):b?Ua.normalizeComponent(w,p,m):null):p.aggregated&&(_=Ua.normalizeComponent(w,p,m)),p.expander&&(_=Ua.normalizeComponent(A,p,n[j]),B&&(p.groupedByPivot&&(_=null),p.subRows||fe||(_=null)));var M=g?function(t){var n=Ua.clone(J);return n=o?Ua.set(n,p.nestingPath,!1):Ua.set(n,p.nestingPath,{}),e.setStateWithData({expanded:n},(function(){return ee&&ee(n,p.nestingPath,t,p)}))}:function(){},S={onClick:M};return u.rest.onClick&&(S.onClick=function(e){u.rest.onClick(e,(function(){return M(e)}))}),f.rest.onClick&&(S.onClick=function(e){f.rest.onClick(e,(function(){return M(e)}))}),v.createElement(se,lo({key:r+"-"+t.id,className:Ze()(d,!p.expandable&&!s&&"hidden",p.expandable&&"rt-expandable",(y||b)&&"rt-pivot"),style:lo({},h,{flex:l+" 0 auto",width:Ua.asPx(l),maxWidth:Ua.asPx(c)})},u.rest,f.rest,S),_)}))),a.subRows&&o&&a.subRows.map((function(e,n){return t(e,n,a.nestingPath)})),fe&&!a.subRows&&o&&fe(a,(function(){var e=Ua.clone(J);Ua.set(e,a.nestingPath,!1)})))},Xe=function(t,n){var r=Z.find((function(e){return e.id===t.id}))||{},i="function"==typeof t.show?t.show():t.show,a=Ua.getFirstDefined(r.value,t.width,t.minWidth),o=a,s=Ua.getFirstDefined(r.value,t.width,t.maxWidth),l=Ua.splitProps(x(je,void 0,t,e)),c=Ua.splitProps(t.getProps(je,void 0,t,e)),u=[l.className,t.className,c.className],f=lo({},l.style,t.style,c.style);return v.createElement(se,lo({key:n+"-"+t.id,className:Ze()(u,!i&&"hidden"),style:lo({},f,{flex:o+" 0 auto",width:Ua.asPx(a),maxWidth:Ua.asPx(s)})},l.rest),Ua.normalizeComponent(be))},Ke=function(t,n){var r=y(je,void 0,void 0,e),i=Ua.splitProps(b(je,void 0,void 0,e));return v.createElement(ie,lo({key:"pad-"+n},r),v.createElement(ae,{className:Ze()("-padRow",(Se.length+n)%2?"-even":"-odd",i.className),style:i.style||{}},_e.map(Xe)))},Je=function(t,n){var r=Z.find((function(e){return e.id===t.id}))||{},i="function"==typeof t.show?t.show():t.show,a=Ua.getFirstDefined(r.value,t.width,t.minWidth),o=Ua.getFirstDefined(r.value,t.width,t.maxWidth),s=Ua.splitProps(A(je,void 0,t,e)),l=Ua.splitProps(t.getProps(je,void 0,t,e)),c=Ua.splitProps(t.getFooterProps(je,void 0,t,e)),u=[s.className,t.className,l.className,c.className],f=lo({},s.style,t.style,l.style,c.style);return v.createElement(se,lo({key:n+"-"+t.id,className:Ze()(u,!i&&"hidden"),style:lo({},f,{flex:a+" 0 auto",width:Ua.asPx(a),maxWidth:Ua.asPx(o)})},l.rest,s.rest,c.rest),Ua.normalizeComponent(t.Footer,{data:ke,column:t}))},Qe=function(n){var r=Ua.splitProps(k(je,void 0,void 0,e));return v.createElement(ce,lo({},t,{pages:Q,canPrevious:Pe,canNext:Ie,onPageChange:e.onPageChange,onPageSizeChange:e.onPageSizeChange,className:r.className,style:r.style,isTop:n},r.rest))},et=function(){return v.createElement("div",lo({className:Ze()("ReactTable",r,Be.className),style:lo({},i,Be.style)},Be.rest),S&&C?v.createElement("div",{className:"pagination-top"},Qe(!0)):null,v.createElement(te,lo({className:Ze()(Ue.className,Ee?"rt-resizing":""),style:Ue.style},Ue.rest),Ae?(m=Ua.splitProps(s(je,void 0,void 0,e)),g=Ua.splitProps(l(je,void 0,void 0,e)),v.createElement(ne,lo({className:Ze()("-headerGroups",m.className),style:lo({},m.style,{minWidth:Fe+"px"})},m.rest),v.createElement(ae,lo({className:g.className,style:g.style},g.rest),we.map(Ve)))):null,(c=Ua.splitProps(u(je,void 0,void 0,e)),d=Ua.splitProps(f(je,void 0,void 0,e)),v.createElement(ne,lo({className:Ze()("-header",c.className),style:lo({},c.style,{minWidth:Fe+"px"})},c.rest),v.createElement(ae,lo({className:d.className,style:d.style},d.rest),_e.map(We)))),Ne?(a=Ua.splitProps(h(je,void 0,void 0,e)),o=Ua.splitProps(p(je,void 0,void 0,e)),v.createElement(ne,lo({className:Ze()("-filters",a.className),style:lo({},a.style,{minWidth:Fe+"px"})},a.rest),v.createElement(ae,lo({className:o.className,style:o.style},o.rest),_e.map(Ge)))):null,v.createElement(re,lo({className:Ze()($e.className),style:lo({},$e.style,{minWidth:Fe+"px"})},$e.rest),Se.map((function(e,t){return Ye(e,t)})),Oe.map(Ke)),Re?(t=Ua.splitProps(_(je,void 0,void 0,e)),n=Ua.splitProps(w(je,void 0,void 0,e)),v.createElement(le,lo({className:t.className,style:lo({},t.style,{minWidth:Fe+"px"})},t.rest),v.createElement(ae,lo({className:Ze()(n.className),style:n.style},n.rest),_e.map(Je)))):null),S&&O?v.createElement("div",{className:"pagination-bottom"},Qe(!1)):null,!Se.length&&v.createElement(de,He,Ua.normalizeComponent(L)),v.createElement(ue,lo({loading:W,loadingText:N},qe)));var t,n,a,o,c,d,m,g};return n?n(je,et,this):et()}}]),t}(function(e){return function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Ya(t,[{key:"getResolvedState",value:function(e,t){return Ga({},Ua.compactObject(this.state),Ua.compactObject(this.props),Ua.compactObject(t),Ua.compactObject(e))}},{key:"getDataModel",value:function(e,t){var n=this,r=e.columns,i=e.pivotBy,a=void 0===i?[]:i,o=e.data,s=e.resolveData,l=e.pivotIDKey,c=e.pivotValKey,u=e.subRowsKey,f=e.aggregatedKey,d=e.nestingLevelKey,h=e.originalKey,p=e.indexKey,m=e.groupedByPivotKey,g=e.SubComponent,y=!1;r.forEach((function(e){e.columns&&(y=!0)}));var b=[].concat(Ka(r)),x=r.find((function(e){return e.expander||e.columns&&e.columns.some((function(e){return e.expander}))}));x&&!x.expander&&(x=x.columns.find((function(e){return e.expander}))),g&&!x&&(b=[x={expander:!0}].concat(Ka(b)));var _=[],w=function(e,t){var r=function(e,t){var r=void 0;if((r=e.expander?Ga({},n.props.column,n.props.expanderDefaults,e):Ga({},n.props.column,e)).maxWidth<r.minWidth&&(r.minWidth=r.maxWidth),t&&(r.parentColumn=t),"string"==typeof r.accessor){r.id=r.id||r.accessor;var i=r.accessor;return r.accessor=function(e){return Ua.get(e,i)},r}if(r.accessor&&!r.id)throw console.warn(r),new Error("A column id is required if using a non-string accessor for column above.");return r.accessor||(r.accessor=function(){}),r}(e,t);return _.push(r),r},A=b.map((function(e){return e.columns?Ga({},e,{columns:e.columns.map((function(t){return w(t,e)}))}):w(e)})).slice(),k=[],E=(A=(A=A.map((function(e){if(e.columns){var t=e.columns.filter((function(e){return!(a.indexOf(e.id)>-1)&&Ua.getFirstDefined(e.show,!0)}));return Ga({},e,{columns:t})}return e}))).filter((function(e){return e.columns?e.columns.length:!(a.indexOf(e.id)>-1)&&Ua.getFirstDefined(e.show,!0)}))).findIndex((function(e){return e.pivot}));if(a.length){var T=[];a.forEach((function(e){var t=_.find((function(t){return t.id===e}));t&&T.push(t)}));var M=T.reduce((function(e,t){return e&&e===t.parentColumn&&t.parentColumn}),T[0].parentColumn),S=y&&M.Header,C={Header:S=S||function(){return v.createElement("strong",null,"Pivoted")},columns:T.map((function(e){return Ga({},n.props.pivotDefaults,e,{pivoted:!0})}))};E>=0?(C=Ga({},A[E],C),A.splice(E,1,C)):A.unshift(C)}var O=[],R=[],N=function(e,t){O.push(Ga({},n.props.column,t,{columns:e})),R=[]};A.forEach((function(e){if(e.columns)return k=k.concat(e.columns),R.length>0&&N(R),void N(e.columns,e);k.push(e),R.push(e)})),y&&R.length>0&&N(R);var L=function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=(Xa(r={},h,t),Xa(r,p,n),Xa(r,u,t[u]),Xa(r,d,i),r);return _.forEach((function(e){e.expander||(a[e.id]=e.accessor(t))})),a[u]&&(a[u]=a[u].map((function(t,n){return e(t,n,i+1)}))),a},D=this.resolvedData;this.resolvedData&&!t||(D=s(o),this.resolvedData=D),D=D.map((function(e,t){return L(e,t)}));var P=k.filter((function(e){return!e.expander&&e.aggregate}));if(a.length){D=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(r===n.length)return t;var i=Object.entries(Ua.groupBy(t,n[r])).map((function(e){var t,i=Wa(e,2),a=i[0],o=i[1];return Xa(t={},l,n[r]),Xa(t,c,a),Xa(t,n[r],a),Xa(t,u,o),Xa(t,d,r),Xa(t,m,!0),t}));return i=i.map((function(t){var i,a=e(t[u],n,r+1);return Ga({},t,(Xa(i={},u,a),Xa(i,f,!0),i),function(e){var t={};return P.forEach((function(n){var r=e.map((function(e){return e[n.id]}));t[n.id]=n.aggregate(r,e)})),t}(a))})),i}(D,a)}return Ga({},e,{resolvedData:D,allVisibleColumns:k,headerGroups:O,allDecoratedColumns:_,hasHeaderGroups:y})}},{key:"getSortedData",value:function(e){var t=e.manual,n=e.sorted,r=e.filtered,i=e.defaultFilterMethod,a=e.resolvedData,o=e.allDecoratedColumns,s={};return o.filter((function(e){return e.sortMethod})).forEach((function(e){s[e.id]=e.sortMethod})),{sortedData:t?a:this.sortData(this.filterData(a,r,i,o),n,s)}}},{key:"fireFetchData",value:function(){var e=Ga({},this.getResolvedState(),{page:this.getStateOrProp("page"),pageSize:this.getStateOrProp("pageSize"),filtered:this.getStateOrProp("filtered")});this.props.onFetchData(e,this)}},{key:"getPropOrState",value:function(e){return Ua.getFirstDefined(this.props[e],this.state[e])}},{key:"getStateOrProp",value:function(e){return Ua.getFirstDefined(this.state[e],this.props[e])}},{key:"filterData",value:function(e,t,n,r){var i=this,a=e;return t.length&&(a=t.reduce((function(e,t){var i=r.find((function(e){return e.id===t.id}));if(!i||!1===i.filterable)return e;var a=i.filterMethod||n;return i.filterAll?a(t,e,i):e.filter((function(e){return a(t,e,i)}))}),a),a=a.map((function(e){return e[i.props.subRowsKey]?Ga({},e,Xa({},i.props.subRowsKey,i.filterData(e[i.props.subRowsKey],t,n,r))):e})).filter((function(e){return!e[i.props.subRowsKey]||e[i.props.subRowsKey].length>0}))),a}},{key:"sortData",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.length)return e;var i=(this.props.orderByMethod||Ua.orderBy)(e,t.map((function(e){return r[e.id]?function(t,n){return r[e.id](t[e.id],n[e.id],e.desc)}:function(t,r){return n.props.defaultSortMethod(t[e.id],r[e.id],e.desc)}})),t.map((function(e){return!e.desc})),this.props.indexKey);return i.forEach((function(e){e[n.props.subRowsKey]&&(e[n.props.subRowsKey]=n.sortData(e[n.props.subRowsKey],t,r))})),i}},{key:"getMinRows",value:function(){return Ua.getFirstDefined(this.props.minRows,this.getStateOrProp("pageSize"))}},{key:"onPageChange",value:function(e){var t=this.props,n=t.onPageChange,r=t.collapseOnPageChange,i={page:e};r&&(i.expanded={}),this.setStateWithData(i,(function(){return n&&n(e)}))}},{key:"onPageSizeChange",value:function(e){var t=this.props.onPageSizeChange,n=this.getResolvedState(),r=n.pageSize*n.page,i=Math.floor(r/e);this.setStateWithData({pageSize:e,page:i},(function(){return t&&t(e,i)}))}},{key:"sortColumn",value:function(e,t){var n=this.getResolvedState(),r=n.sorted,i=n.skipNextSort,a=n.defaultSortDesc,o=Object.prototype.hasOwnProperty.call(e,"defaultSortDesc")?e.defaultSortDesc:a,s=!o;if(i)this.setStateWithData({skipNextSort:!1});else{var l=this.props.onSortedChange,c=Ua.clone(r||[]).map((function(e){return e.desc=Ua.isSortingDesc(e),e}));if(Ua.isArray(e)){var u=c.findIndex((function(t){return t.id===e[0].id}));if(u>-1)c[u].desc===s?t?c.splice(u,e.length):e.forEach((function(e,t){c[u+t].desc=o})):e.forEach((function(e,t){c[u+t].desc=s})),t||(c=c.slice(u,e.length));else c=t?c.concat(e.map((function(e){return{id:e.id,desc:o}}))):e.map((function(e){return{id:e.id,desc:o}}))}else{var f=c.findIndex((function(t){return t.id===e.id}));if(f>-1){var d=c[f];d.desc===s?t?c.splice(f,1):(d.desc=o,c=[d]):(d.desc=s,t||(c=[d]))}else t?c.push({id:e.id,desc:o}):c=[{id:e.id,desc:o}]}this.setStateWithData({page:!r.length&&c.length||!t?0:this.state.page,sorted:c},(function(){return l&&l(c,e,t)}))}}},{key:"filterColumn",value:function(e,t){var n=this.getResolvedState().filtered,r=this.props.onFilteredChange,i=(n||[]).filter((function(t){return t.id!==e.id}));""!==t&&i.push({id:e.id,value:t}),this.setStateWithData({filtered:i},(function(){return r&&r(i,e,t)}))}},{key:"resizeColumnStart",value:function(e,t,n){var r=this;e.stopPropagation();var i=e.target.parentElement.getBoundingClientRect().width,a=void 0;a=n?e.changedTouches[0].pageX:e.pageX,this.trapEvents=!0,this.setStateWithData({currentlyResizing:{id:t.id,startX:a,parentWidth:i}},(function(){n?(document.addEventListener("touchmove",r.resizeColumnMoving),document.addEventListener("touchcancel",r.resizeColumnEnd),document.addEventListener("touchend",r.resizeColumnEnd)):(document.addEventListener("mousemove",r.resizeColumnMoving),document.addEventListener("mouseup",r.resizeColumnEnd),document.addEventListener("mouseleave",r.resizeColumnEnd))}))}},{key:"resizeColumnMoving",value:function(e){e.stopPropagation();var t=this.props,n=t.onResizedChange,r=t.column,i=this.getResolvedState(),a=i.resized,o=i.currentlyResizing,s=i.columns.find((function(e){return e.accessor===o.id||e.id===o.id})),l=s&&null!=s.minResizeWidth?s.minResizeWidth:r.minResizeWidth,c=a.filter((function(e){return e.id!==o.id})),u=void 0;"touchmove"===e.type?u=e.changedTouches[0].pageX:"mousemove"===e.type&&(u=e.pageX);var f=Math.max(o.parentWidth+u-o.startX,l);c.push({id:o.id,value:f}),this.setStateWithData({resized:c},(function(){return n&&n(c,e)}))}},{key:"resizeColumnEnd",value:function(e){e.stopPropagation();var t="touchend"===e.type||"touchcancel"===e.type;t&&(document.removeEventListener("touchmove",this.resizeColumnMoving),document.removeEventListener("touchcancel",this.resizeColumnEnd),document.removeEventListener("touchend",this.resizeColumnEnd)),document.removeEventListener("mousemove",this.resizeColumnMoving),document.removeEventListener("mouseup",this.resizeColumnEnd),document.removeEventListener("mouseleave",this.resizeColumnEnd),t||this.setStateWithData({skipNextSort:!0,currentlyResizing:!1})}}]),t}(e)}(function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r={page:e.defaultPage,pageSize:e.defaultPageSize,sorted:e.defaultSorted,expanded:e.defaultExpanded,filtered:e.defaultFiltered,resized:e.defaultResized,currentlyResizing:!1,skipNextSort:!1},i=n.getResolvedState(e,r),a=n.getDataModel(i,!0);return n.state=n.calculateNewResolvedState(a),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Va(t,[{key:"componentDidMount",value:function(){this.fireFetchData()}},{key:"componentDidUpdate",value:function(e,t){var n=this.getResolvedState(e,t),r=this.getResolvedState(this.props,this.state);["sorted","filtered","resized","expanded"].forEach((function(e){var t="default"+(e.charAt(0).toUpperCase()+e.slice(1));JSON.stringify(n[t])!==JSON.stringify(r[t])&&(r[e]=r[t])})),["sortable","filterable","resizable"].forEach((function(e){if(n[e]!==r[e]){var t=e.replace("able","")+"ed",i="default"+(t.charAt(0).toUpperCase()+t.slice(1));r[t]=r[i]}})),n.data===r.data&&n.columns===r.columns&&n.pivotBy===r.pivotBy&&n.sorted===r.sorted&&n.filtered===r.filtered||this.setStateWithData(this.getDataModel(r,n.data!==r.data))}},{key:"calculateNewResolvedState",value:function(e){var t=this.getResolvedState(),n=this.getResolvedState({},e),r=n.freezeWhenExpanded;if(n.frozen=!1,r)for(var i=Object.keys(n.expanded),a=0;a<i.length;a+=1)if(n.expanded[i[a]]){n.frozen=!0;break}return(t.frozen&&!n.frozen||t.sorted!==n.sorted||t.filtered!==n.filtered||t.showFilters!==n.showFilters||!n.frozen&&t.resolvedData!==n.resolvedData)&&((t.sorted!==n.sorted&&this.props.collapseOnSortingChange||t.filtered!==n.filtered||t.showFilters!==n.showFilters||t.sortedData&&!n.frozen&&t.resolvedData!==n.resolvedData&&this.props.collapseOnDataChange)&&(n.expanded={}),Object.assign(n,this.getSortedData(n))),t.filtered!==n.filtered&&(n.page=0),n.sortedData&&(n.pages=n.manual?n.pages:Math.ceil(n.sortedData.length/n.pageSize),n.page=n.manual?n.page:Math.max(n.page>=n.pages?n.pages-1:n.page,0)),n}},{key:"setStateWithData",value:function(e,t){var n=this,r=this.getResolvedState(),i=this.calculateNewResolvedState(e);return this.setState(i,(function(){t&&t(),r.page===i.page&&r.pageSize===i.pageSize&&r.sorted===i.sorted&&r.filtered===i.filtered||n.fireFetchData()}))}}]),t}(v.Component)));uo.propTypes=oo,uo.defaultProps=ao;const fo=uo;var ho=n(96155),po=n(87351),mo={};mo.styleTagTransform=V(),mo.setAttributes=U(),mo.insert=j().bind(null,"head"),mo.domAPI=F(),mo.insertStyleElement=q();P()(po.A,mo);po.A&&po.A.locals&&po.A.locals;class go extends v.Component{constructor(e){super(e)}render(){const{columns:e,default_page_size:t=10,allowFixedColumns:n,tableWidth:r}=this.props,i=e=>{const{column:t}=e,n="#000";let r=e.value;const i=(0,Fa.get)(t,"Header");if("L2FC"===i?r=r.toFixed(2):"p-value"===i&&(r=r.toExponential(0)),(0,Fa.get)(t,"greyedout")){const i=t.greyedout,a=(0,Fa.get)(e.original,i)?"#DDD":n;return v.createElement("span",{style:{color:a}},r)}return v.createElement("span",{style:{color:n}},r)},a=e.map((e=>{const t=e.columns.map((e=>({...e,Cell:i})));return{...e,columns:t}})),o=n?(0,ho.Ay)(fo):fo;return v.createElement("div",{style:{width:r,marginBottom:"1rem"}},v.createElement(o,{data:this.props.data,columns:a,defaultPageSize:t,showPageJump:!1,className:"-striped -highlight"}))}}function vo(){return vo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vo.apply(null,arguments)}go.defaultProps={};const yo=function(e){const{table:t,default_page_size:n,allow_fixed_columns:r}=e;t.columns[0].columns[0].minWidth=145,t.columns[0].columns[1].minWidth=75,r&&(t.columns[0].fixed="left");const i={textAlign:"right"};for(let e=1;e<t.columns.length;e++)t.columns[e].columns[0].minWidth=60,t.columns[e].columns[1].minWidth=60,t.columns[e].columns[0].style=i,t.columns[e].columns[1].style=i;return v.createElement("div",{className:"row"},v.createElement("div",{className:"col",id:"sortabletable_diffexp","data-test":"sortabletable-diffexp"},v.createElement(go,vo({},t,{allowFixedColumns:r,default_page_size:n,className:"summary_padding"}))))};function bo(){return bo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bo.apply(null,arguments)}class xo extends v.Component{constructor(e){super(e),this.state={active_cluster:0}}setLayout(){}render(){if(!Fn()(this.props,"left_plots")&&!Fn()(this.props,"right_plots"))return v.createElement("div",null);const e=this.props.dataTest,t=this.state.active_cluster,n=this.props.right_plots.clusterings[t].plot;let r;if(Fn()(this.props.left_plots,"clusterings"))if(Fn()(this.props.left_plots,"layout.images")){const e=this.props.left_plots.clusterings[t].plot;r=v.createElement(Ia,e)}else{const e=this.props.left_plots.clusterings[t].plot;r=v.createElement(re,e)}else r=v.createElement(Kn,this.props.left_plots);const i=this.props.tables.clusterings[t].data,a=this.props.right_plots.clusterings,o=a[t].name;return v.createElement("div",{className:"summary_border clustering-selector","data-test":e},v.createElement("div",{className:"row h2_header"},v.createElement("div",{className:"col"},v.createElement(qn,bo({},this.props.plot_help,{style:{marginBottom:0}})))),v.createElement("div",{className:"row",style:{marginBottom:"1rem"}},v.createElement("div",{className:"col",style:{textAlign:"right"}},a.length>1&&v.createElement("div",{style:{marginTop:"-1.5rem",float:"right"}},v.createElement("span",null,"Clustering Type: "),v.createElement(Ea,{id:"dropdown-item-button",style:{display:"inline-block"},title:o},a.map(((e,t)=>v.createElement(xa.Item,{as:"button",key:t,onClick:()=>this.setState({active_cluster:t})},e.name))))))),v.createElement("div",{className:"row"},v.createElement("div",{className:"col summary_column",id:"umi_projection_plot","data-test":"umi-projection-plot"},r),v.createElement("div",{className:"col summary_column",id:"cluster_projection_plot","data-test":"cluster-projection-plot"},v.createElement(re,n))),v.createElement(Ma,this.props.table_help),v.createElement(yo,{table:i,allow_fixed_columns:this.props.allow_fixed_columns,default_page_size:this.props.tables.default_page_size}))}}const _o=(e,t,n)=>t?(n&&(t={...t,id:n,dataTest:ae()(n)}),v.createElement(e,t)):null;function wo(){return wo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wo.apply(null,arguments)}class Ao extends v.Component{constructor(e){super(e),this.state={active_color:0},this.colors=["Default","Cividis","Greys","Jet","Reds","Viridis"],this.pubu=[[0,"rgb(208,209,230)"],[.25,"rgb(141,179,213)"],[.5,"rgb(54,144,192)"],[.75,"rgb(5,101,159)"],[1,"rgb(2,56,88)"]]}render(){const e=this.state.active_color,t=this.props.umi_spatial_plot,n=this.props.umi_tsne_plot,r=this.colors[e];let i=r;return"Default"===r&&(i=this.pubu),t.data[0].marker.colorscale=i,n.data[0].marker.colorscale=i,v.createElement("div",{className:"summary_border"},v.createElement("div",{className:"row h2_header"},v.createElement("div",{className:"col"},v.createElement(qn,wo({},this.props.help_txt,{style:{marginBottom:0}})))),v.createElement("div",{className:"row",style:{marginBottom:"1rem",marginTop:"-1.5rem"}},v.createElement("div",{className:"col",style:{textAlign:"right"}},v.createElement("span",null,v.createElement("span",null,"Color Scale: "),v.createElement(Ea,{id:"dropdown-item-button",title:r,as:"span",style:{zIndex:1004}},this.colors.map(((e,t)=>v.createElement(xa.Item,{as:"button",key:t,onClick:()=>this.setState({active_color:t})},e))))))),v.createElement("div",{className:"row"},v.createElement("div",{className:"col summary_column"},v.createElement(Ia,t)),v.createElement("div",{className:"col summary_column"},v.createElement(re,n))))}}const ko={};function Eo(e,t){void 0===e&&(e=ko),void 0===t&&(t=ko);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every((n=>e[n]===t[n]))}var To=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mo=Object.prototype.hasOwnProperty;function So(e,t){return Mo.call(e,t)}function Co(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)So(e,i)&&r.push(i);return r}function Oo(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Ro(e){for(var t,n=0,r=e.length;n<r;){if(!((t=e.charCodeAt(n))>=48&&t<=57))return!1;n++}return!0}function No(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function Lo(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Do(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Do(e[t]))return!0}else if("object"==typeof e)for(var r=Co(e),i=r.length,a=0;a<i;a++)if(Do(e[r[a]]))return!0;return!1}function Po(e,t){var n=[e];for(var r in t){var i="object"==typeof t[r]?JSON.stringify(t[r],null,2):t[r];void 0!==i&&n.push(r+": "+i)}return n.join("\n")}var Io=function(e){function t(t,n,r,i,a){var o=this.constructor,s=e.call(this,Po(t,{name:n,index:r,operation:i,tree:a}))||this;return s.name=n,s.index=r,s.operation=i,s.tree=a,Object.setPrototypeOf(s,o.prototype),s.message=Po(t,{name:n,index:r,operation:i,tree:a}),s}return To(t,e),t}(Error),Fo=Io,zo=Oo,jo={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=Uo(n,this.path);r&&(r=Oo(r));var i=$o(n,{op:"remove",path:this.from}).removed;return $o(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=Uo(n,this.from);return $o(n,{op:"add",path:this.path,value:Oo(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Go(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},Bo={add:function(e,t,n){return Ro(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:jo.move,copy:jo.copy,test:jo.test,_get:jo._get};function Uo(e,t){if(""==t)return e;var n={op:"_get",path:t};return $o(e,n),n.value}function $o(e,t,n,r,i,a){if(void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===i&&(i=!0),void 0===a&&(a=0),n&&("function"==typeof n?n(t,0,e,t.path):Vo(t,0)),""===t.path){var o={newDocument:e};if("add"===t.op)return o.newDocument=t.value,o;if("replace"===t.op)return o.newDocument=t.value,o.removed=e,o;if("move"===t.op||"copy"===t.op)return o.newDocument=Uo(e,t.from),"move"===t.op&&(o.removed=e),o;if("test"===t.op){if(o.test=Go(e,t.value),!1===o.test)throw new Fo("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return o.newDocument=e,o}if("remove"===t.op)return o.removed=e,o.newDocument=null,o;if("_get"===t.op)return t.value=e,o;if(n)throw new Fo("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,t,e);return o}r||(e=Oo(e));var s=(t.path||"").split("/"),l=e,c=1,u=s.length,f=void 0,d=void 0,h=void 0;for(h="function"==typeof n?n:Vo;;){if((d=s[c])&&-1!=d.indexOf("~")&&(d=Lo(d)),i&&("__proto__"==d||"prototype"==d&&c>0&&"constructor"==s[c-1]))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===f&&(void 0===l[d]?f=s.slice(0,c).join("/"):c==u-1&&(f=t.path),void 0!==f&&h(t,0,e,f)),c++,Array.isArray(l)){if("-"===d)d=l.length;else{if(n&&!Ro(d))throw new Fo("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,t,e);Ro(d)&&(d=~~d)}if(c>=u){if(n&&"add"===t.op&&d>l.length)throw new Fo("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,t,e);if(!1===(o=Bo[t.op].call(t,l,d,e)).test)throw new Fo("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return o}}else if(c>=u){if(!1===(o=jo[t.op].call(t,l,d,e)).test)throw new Fo("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return o}if(l=l[d],n&&c<u&&(!l||"object"!=typeof l))throw new Fo("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,t,e)}}function qo(e,t,n,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=!0),n&&!Array.isArray(t))throw new Fo("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Oo(e));for(var a=new Array(t.length),o=0,s=t.length;o<s;o++)a[o]=$o(e,t[o],n,!0,i,o),e=a[o].newDocument;return a.newDocument=e,a}function Ho(e,t,n){var r=$o(e,t);if(!1===r.test)throw new Fo("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function Vo(e,t,n,r){if("object"!=typeof e||null===e||Array.isArray(e))throw new Fo("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(!jo[e.op])throw new Fo("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n);if("string"!=typeof e.path)throw new Fo("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new Fo('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new Fo("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new Fo("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&Do(e.value))throw new Fo("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n)if("add"==e.op){var i=e.path.split("/").length,a=r.split("/").length;if(i!==a+1&&i!==a)throw new Fo("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==r)throw new Fo("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if("move"===e.op||"copy"===e.op){var o=Wo([{op:"_get",path:e.from,value:void 0}],n);if(o&&"OPERATION_PATH_UNRESOLVABLE"===o.name)throw new Fo("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}function Wo(e,t,n){try{if(!Array.isArray(e))throw new Fo("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)qo(Oo(t),Oo(e),n||!0);else{n=n||Vo;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(e){if(e instanceof Fo)return e;throw e}}function Go(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var n,r,i,a=Array.isArray(e),o=Array.isArray(t);if(a&&o){if((r=e.length)!=t.length)return!1;for(n=r;0!=n--;)if(!Go(e[n],t[n]))return!1;return!0}if(a!=o)return!1;var s=Object.keys(e);if((r=s.length)!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!t.hasOwnProperty(s[n]))return!1;for(n=r;0!=n--;)if(!Go(e[i=s[n]],t[i]))return!1;return!0}return e!=e&&t!=t}var Yo=new WeakMap,Xo=function(e){this.observers=new Map,this.obj=e},Ko=function(e,t){this.callback=e,this.observer=t};function Zo(e,t){t.unobserve()}function Jo(e,t){var n,r=function(e){return Yo.get(e)}(e);if(r){var i=function(e,t){return e.observers.get(t)}(r,t);n=i&&i.observer}else r=new Xo(e),Yo.set(e,r);if(n)return n;if(n={},r.value=Oo(e),t){n.callback=t,n.next=null;var a=function(){Qo(n)},o=function(){clearTimeout(n.next),n.next=setTimeout(a)};"undefined"!=typeof window&&(window.addEventListener("mouseup",o),window.addEventListener("keyup",o),window.addEventListener("mousedown",o),window.addEventListener("keydown",o),window.addEventListener("change",o))}return n.patches=[],n.object=e,n.unobserve=function(){Qo(n),clearTimeout(n.next),function(e,t){e.observers.delete(t.callback)}(r,n),"undefined"!=typeof window&&(window.removeEventListener("mouseup",o),window.removeEventListener("keyup",o),window.removeEventListener("mousedown",o),window.removeEventListener("keydown",o),window.removeEventListener("change",o))},r.observers.set(t,new Ko(t,n)),n}function Qo(e,t){void 0===t&&(t=!1);var n=Yo.get(e.object);es(n.value,e.object,e.patches,"",t),e.patches.length&&qo(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function es(e,t,n,r,i){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var a=Co(t),o=Co(e),s=!1,l=o.length-1;l>=0;l--){var c=e[f=o[l]];if(!So(t,f)||void 0===t[f]&&void 0!==c&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+No(f),value:Oo(c)}),n.push({op:"remove",path:r+"/"+No(f)}),s=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}),!0);else{var u=t[f];"object"==typeof c&&null!=c&&"object"==typeof u&&null!=u&&Array.isArray(c)===Array.isArray(u)?es(c,u,n,r+"/"+No(f),i):c!==u&&(i&&n.push({op:"test",path:r+"/"+No(f),value:Oo(c)}),n.push({op:"replace",path:r+"/"+No(f),value:Oo(u)}))}}if(s||a.length!=o.length)for(l=0;l<a.length;l++){var f;So(e,f=a[l])||void 0===t[f]||n.push({op:"add",path:r+"/"+No(f),value:Oo(t[f])})}}}function ts(e,t,n){void 0===n&&(n=!1);var r=[];return es(e,t,r,"",n),r}Object.assign({},e,t,{JsonPatchError:Io,deepClone:Oo,escapePathComponent:No,unescapePathComponent:Lo});var ns=n(3739),rs=n.n(ns);function is(e,t,n){return e.fields=t||[],e.fname=n,e}function as(e){return null==e?null:e.fname}function os(e){return null==e?null:e.fields}function ss(e){return 1===e.length?ls(e[0]):cs(e)}const ls=e=>function(t){return t[e]},cs=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function us(e){throw Error(e)}function fs(e){const t=[],n=e.length;let r,i,a,o=null,s=0,l="";function c(){t.push(l+e.substring(r,i)),l="",r=i+1}for(e+="",r=i=0;i<n;++i)if(a=e[i],"\\"===a)l+=e.substring(r,i++),r=i;else if(a===o)c(),o=null,s=-1;else{if(o)continue;r===s&&'"'===a||r===s&&"'"===a?(r=i+1,o=a):"."!==a||s?"["===a?(i>r&&c(),s=r=i+1):"]"===a&&(s||us("Access path missing open bracket: "+e),s>0&&c(),s=0,r=i+1):i>r?c():r=i+1}return s&&us("Access path missing closing bracket: "+e),o&&us("Access path missing closing quote: "+e),i>r&&(i++,c()),t}function ds(e,t,n){const r=fs(e);return e=1===r.length?r[0]:e,is((n&&n.get||ss)(r),[e],t||e)}const hs=ds("id"),ps=is((e=>e),[],"identity"),ms=is((()=>0),[],"zero"),gs=is((()=>1),[],"one"),vs=is((()=>!0),[],"true"),ys=is((()=>!1),[],"false");function bs(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const xs=0,_s=1,ws=2,As=3,ks=4;function Es(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bs,r=e||xs;return{level(e){return arguments.length?(r=+e,this):r},error(){return r>=_s&&n(t||"error","ERROR",arguments),this},warn(){return r>=ws&&n(t||"warn","WARN",arguments),this},info(){return r>=As&&n(t||"log","INFO",arguments),this},debug(){return r>=ks&&n(t||"log","DEBUG",arguments),this}}}var Ts=Array.isArray;function Ms(e){return e===Object(e)}const Ss=e=>"__proto__"!==e;function Cs(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>{for(const n in t)if("signals"===n)e.signals=Rs(e.signals,t.signals);else{const r="legend"===n?{layout:1}:"style"===n||null;Os(e,n,t[n],r)}return e}),{})}function Os(e,t,n,r){if(!Ss(t))return;let i,a;if(Ms(n)&&!Ts(n))for(i in a=Ms(e[t])?e[t]:e[t]={},n)r&&(!0===r||r[i])?Os(a,i,n[i]):Ss(i)&&(a[i]=n[i]);else e[t]=n}function Rs(e,t){if(null==e)return t;const n={},r=[];function i(e){n[e.name]||(n[e.name]=1,r.push(e))}return t.forEach(i),e.forEach(i),r}function Ns(e){return e[e.length-1]}function Ls(e){return null==e||""===e?null:+e}const Ds=e=>t=>e*Math.exp(t),Ps=e=>t=>Math.log(e*t),Is=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),Fs=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,zs=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function js(e,t,n,r){const i=n(e[0]),a=n(Ns(e)),o=(a-i)*t;return[r(i-o),r(a-o)]}function Bs(e,t){return js(e,t,Ls,ps)}function Us(e,t){var n=Math.sign(e[0]);return js(e,t,Ps(n),Ds(n))}function $s(e,t,n){return js(e,t,zs(n),zs(1/n))}function qs(e,t,n){return js(e,t,Is(n),Fs(n))}function Hs(e,t,n,r,i){const a=r(e[0]),o=r(Ns(e)),s=null!=t?r(t):(a+o)/2;return[i(s+(a-s)*n),i(s+(o-s)*n)]}function Vs(e,t,n){return Hs(e,t,n,Ls,ps)}function Ws(e,t,n){const r=Math.sign(e[0]);return Hs(e,t,n,Ps(r),Ds(r))}function Gs(e,t,n,r){return Hs(e,t,n,zs(r),zs(1/r))}function Ys(e,t,n,r){return Hs(e,t,n,Is(r),Fs(r))}function Xs(e){return 1+~~(new Date(e).getMonth()/3)}function Ks(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Zs(e){return null!=e?Ts(e)?e:[e]:[]}function Js(e,t,n){let r,i=e[0],a=e[1];return a<i&&(r=a,a=i,i=r),r=a-i,r>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-r),i+r]}function Qs(e){return"function"==typeof e}const el="descending";function tl(e,t,n){n=n||{},t=Zs(t)||[];const r=[],i=[],a={},o=n.comparator||rl;return Zs(e).forEach(((e,o)=>{null!=e&&(r.push(t[o]===el?-1:1),i.push(e=Qs(e)?e:ds(e,null,n)),(os(e)||[]).forEach((e=>a[e]=1)))})),0===i.length?null:is(o(i,r),Object.keys(a))}const nl=(e,t)=>(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t==t?-1:t!=t&&e==e?1:0),rl=(e,t)=>1===e.length?il(e[0],t[0]):al(e,t,e.length),il=(e,t)=>function(n,r){return nl(e(n),e(r))*t},al=(e,t,n)=>(t.push(0),function(r,i){let a,o=0,s=-1;for(;0===o&&++s<n;)a=e[s],o=nl(a(r),a(i));return o*t[s]});function ol(e){return Qs(e)?e:()=>e}function sl(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout((()=>(t(r),n=null)),e)}}function ll(e){for(let t,n,r=1,i=arguments.length;r<i;++r)for(n in t=arguments[r],t)e[n]=t[n];return e}function cl(e,t){let n,r,i,a,o=0;if(e&&(n=e.length))if(null==t){for(r=e[o];o<n&&(null==r||r!=r);r=e[++o]);for(i=a=r;o<n;++o)r=e[o],null!=r&&(r<i&&(i=r),r>a&&(a=r))}else{for(r=t(e[o]);o<n&&(null==r||r!=r);r=t(e[++o]));for(i=a=r;o<n;++o)r=t(e[o]),null!=r&&(r<i&&(i=r),r>a&&(a=r))}return[i,a]}function ul(e,t){const n=e.length;let r,i,a,o,s,l=-1;if(null==t){for(;++l<n;)if(i=e[l],null!=i&&i>=i){r=a=i;break}if(l===n)return[-1,-1];for(o=s=l;++l<n;)i=e[l],null!=i&&(r>i&&(r=i,o=l),a<i&&(a=i,s=l))}else{for(;++l<n;)if(i=t(e[l],l,e),null!=i&&i>=i){r=a=i;break}if(l===n)return[-1,-1];for(o=s=l;++l<n;)i=t(e[l],l,e),null!=i&&(r>i&&(r=i,o=l),a<i&&(a=i,s=l))}return[o,s]}const fl=Object.prototype.hasOwnProperty;function dl(e,t){return fl.call(e,t)}const hl={};function pl(e){let t,n={};function r(e){return dl(n,e)&&n[e]!==hl}const i={size:0,empty:0,object:n,has:r,get:e=>r(e)?n[e]:void 0,set(e,t){return r(e)||(++i.size,n[e]===hl&&--i.empty),n[e]=t,this},delete(e){return r(e)&&(--i.size,++i.empty,n[e]=hl),this},clear(){i.size=i.empty=0,i.object=n={}},test(e){return arguments.length?(t=e,i):t},clean(){const e={};let r=0;for(const i in n){const a=n[i];a===hl||t&&t(a)||(e[i]=a,++r)}i.size=r,i.empty=0,i.object=n=e}};return e&&Object.keys(e).forEach((t=>{i.set(t,e[t])})),i}function ml(e,t,n,r,i,a){if(!n&&0!==n)return a;const o=+n;let s,l=e[0],c=Ns(e);c<l&&(s=l,l=c,c=s),s=Math.abs(t-l);const u=Math.abs(c-t);return s<u&&s<=o?r:u<=o?i:a}function gl(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),ll(r,n)}function vl(e,t,n,r){let i,a=t[0],o=t[t.length-1];return a>o&&(i=a,a=o,o=i),r=void 0===r||r,((n=void 0===n||n)?a<=e:a<e)&&(r?e<=o:e<o)}function yl(e){return"boolean"==typeof e}function bl(e){return"[object Date]"===Object.prototype.toString.call(e)}function xl(e){return e&&Qs(e[Symbol.iterator])}function _l(e){return"number"==typeof e}function wl(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function Al(e){return"string"==typeof e}function kl(e,t,n){e&&(e=t?Zs(e).map((e=>e.replace(/\\(.)/g,"$1"))):Zs(e));const r=e&&e.length,i=n&&n.get||ss,a=e=>i(t?[e]:fs(e));let o;if(r)if(1===r){const t=a(e[0]);o=function(e){return""+t(e)}}else{const t=e.map(a);o=function(e){let n=""+t[0](e),i=0;for(;++i<r;)n+="|"+t[i](e);return n}}else o=function(){return""};return is(o,e,"key")}function El(e,t){const n=e[0],r=Ns(e),i=+t;return i?1===i?r:n+i*(r-n):n}const Tl=1e4;function Ml(e){let t,n,r;e=+e||Tl;const i=()=>{t={},n={},r=0},a=(i,a)=>(++r>e&&(n=t,t={},r=1),t[i]=a);return i(),{clear:i,has:e=>dl(t,e)||dl(n,e),get:e=>dl(t,e)?t[e]:dl(n,e)?a(e,n[e]):void 0,set:(e,n)=>dl(t,e)?t[e]=n:a(e,n)}}function Sl(e,t,n,r){const i=t.length,a=n.length;if(!a)return t;if(!i)return n;const o=r||new t.constructor(i+a);let s=0,l=0,c=0;for(;s<i&&l<a;++c)o[c]=e(t[s],n[l])>0?n[l++]:t[s++];for(;s<i;++s,++c)o[c]=t[s];for(;l<a;++l,++c)o[c]=n[l];return o}function Cl(e,t){let n="";for(;--t>=0;)n+=e;return n}function Ol(e,t,n,r){const i=n||" ",a=e+"",o=t-a.length;return o<=0?a:"left"===r?Cl(i,o)+a:"center"===r?Cl(i,~~(o/2))+a+Cl(i,Math.ceil(o/2)):a+Cl(i,o)}function Rl(e){return e&&Ns(e)-e[0]||0}function Nl(e){return Ts(e)?"["+e.map(Nl)+"]":Ms(e)||Al(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function Ll(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e)&&!!e}const Dl=e=>_l(e)||bl(e)?e:Date.parse(e);function Pl(e,t){return t=t||Dl,null==e||""===e?null:t(e)}function Il(e){return null==e||""===e?null:e+""}function Fl(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function zl(e,t,n,r){const i=null!=r?r:"",a=e+"",o=a.length,s=Math.max(0,t-i.length);return o<=t?a:"left"===n?i+a.slice(o-s):"center"===n?a.slice(0,Math.ceil(s/2))+i+a.slice(o-~~(s/2)):a.slice(0,s)+i}function jl(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const r=t(e[i]);r&&n(r,i,e)}}else e.forEach(n)}var Bl={},Ul={};function $l(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function ql(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}function Hl(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Vl(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":function(e){return e<0?"-"+Hl(-e,6):e>9999?"+"+Hl(e,6):Hl(e,4)}(e.getUTCFullYear())+"-"+Hl(e.getUTCMonth()+1,2)+"-"+Hl(e.getUTCDate(),2)+(i?"T"+Hl(t,2)+":"+Hl(n,2)+":"+Hl(r,2)+"."+Hl(i,3)+"Z":r?"T"+Hl(t,2)+":"+Hl(n,2)+":"+Hl(r,2)+"Z":n||t?"T"+Hl(t,2)+":"+Hl(n,2)+"Z":"")}function Wl(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,i=[],a=e.length,o=0,s=0,l=a<=0,c=!1;function u(){if(l)return Ul;if(c)return c=!1,Bl;var t,r,i=o;if(34===e.charCodeAt(i)){for(;o++<a&&34!==e.charCodeAt(o)||34===e.charCodeAt(++o););return(t=o)>=a?l=!0:10===(r=e.charCodeAt(o++))?c=!0:13===r&&(c=!0,10===e.charCodeAt(o)&&++o),e.slice(i+1,t-1).replace(/""/g,'"')}for(;o<a;){if(10===(r=e.charCodeAt(t=o++)))c=!0;else if(13===r)c=!0,10===e.charCodeAt(o)&&++o;else if(r!==n)continue;return e.slice(i,t)}return l=!0,e.slice(i,a)}for(10===e.charCodeAt(a-1)&&--a,13===e.charCodeAt(a-1)&&--a;(r=u())!==Ul;){for(var f=[];r!==Bl&&r!==Ul;)f.push(r),r=u();t&&null==(f=t(f,s++))||i.push(f)}return i}function i(t,n){return t.map((function(t){return n.map((function(e){return o(t[e])})).join(e)}))}function a(t){return t.map(o).join(e)}function o(e){return null==e?"":e instanceof Date?Vl(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,i,a=r(e,(function(e,r){if(n)return n(e,r-1);i=e,n=t?function(e,t){var n=$l(e);return function(r,i){return t(n(r),i,e)}}(e,t):$l(e)}));return a.columns=i||[],a},parseRows:r,format:function(t,n){return null==n&&(n=ql(t)),[n.map(o).join(e)].concat(i(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=ql(e)),i(e,t).join("\n")},formatRows:function(e){return e.map(a).join("\n")},formatRow:a,formatValue:o}}function Gl(e){return e}function Yl(e,t){return"string"==typeof t&&(t=e.objects[t]),"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map((function(t){return Xl(e,t)}))}:Xl(e,t)}function Xl(e,t){var n=t.id,r=t.bbox,i=null==t.properties?{}:t.properties,a=Kl(e,t);return null==n&&null==r?{type:"Feature",properties:i,geometry:a}:null==r?{type:"Feature",id:n,properties:i,geometry:a}:{type:"Feature",id:n,bbox:r,properties:i,geometry:a}}function Kl(e,t){var n=function(e){if(null==e)return Gl;var t,n,r=e.scale[0],i=e.scale[1],a=e.translate[0],o=e.translate[1];return function(e,s){s||(t=n=0);var l=2,c=e.length,u=new Array(c);for(u[0]=(t+=e[0])*r+a,u[1]=(n+=e[1])*i+o;l<c;)u[l]=e[l],++l;return u}}(e.transform),r=e.arcs;function i(e,t){t.length&&t.pop();for(var i=r[e<0?~e:e],a=0,o=i.length;a<o;++a)t.push(n(i[a],a));e<0&&function(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}(t,o)}function a(e){return n(e)}function o(e){for(var t=[],n=0,r=e.length;n<r;++n)i(e[n],t);return t.length<2&&t.push(t[0]),t}function s(e){for(var t=o(e);t.length<4;)t.push(t[0]);return t}function l(e){return e.map(s)}return function e(t){var n,r=t.type;switch(r){case"GeometryCollection":return{type:r,geometries:t.geometries.map(e)};case"Point":n=a(t.coordinates);break;case"MultiPoint":n=t.coordinates.map(a);break;case"LineString":n=o(t.arcs);break;case"MultiLineString":n=t.arcs.map(o);break;case"Polygon":n=l(t.arcs);break;case"MultiPolygon":n=t.arcs.map(l);break;default:return null}return{type:r,coordinates:n}}(t)}function Zl(e,t){var n={},r={},i={},a=[],o=-1;function s(e,t){for(var r in e){var i=e[r];delete t[i.start],delete i.start,delete i.end,i.forEach((function(e){n[e<0?~e:e]=1})),a.push(i)}}return t.forEach((function(n,r){var i,a=e.arcs[n<0?~n:n];a.length<3&&!a[1][0]&&!a[1][1]&&(i=t[++o],t[o]=n,t[r]=i)})),t.forEach((function(t){var n,a,o=function(t){var n,r=e.arcs[t<0?~t:t],i=r[0];e.transform?(n=[0,0],r.forEach((function(e){n[0]+=e[0],n[1]+=e[1]}))):n=r[r.length-1];return t<0?[n,i]:[i,n]}(t),s=o[0],l=o[1];if(n=i[s])if(delete i[n.end],n.push(t),n.end=l,a=r[l]){delete r[a.start];var c=a===n?n:n.concat(a);r[c.start=n.start]=i[c.end=a.end]=c}else r[n.start]=i[n.end]=n;else if(n=r[l])if(delete r[n.start],n.unshift(t),n.start=s,a=i[s]){delete i[a.end];var u=a===n?n:a.concat(n);r[u.start=a.start]=i[u.end=n.end]=u}else r[n.start]=i[n.end]=n;else r[(n=[t]).start=s]=i[n.end=l]=n})),s(i,r),s(r,i),t.forEach((function(e){n[e<0?~e:e]||a.push([e])})),a}function Jl(e){return Kl(e,Ql.apply(this,arguments))}function Ql(e,t,n){var r,i,a;if(arguments.length>1)r=function(e,t,n){var r,i=[],a=[];function o(e){var t=e<0?~e:e;(a[t]||(a[t]=[])).push({i:e,g:r})}function s(e){e.forEach(o)}function l(e){e.forEach(s)}function c(e){e.forEach(l)}function u(e){switch(r=e,e.type){case"GeometryCollection":e.geometries.forEach(u);break;case"LineString":s(e.arcs);break;case"MultiLineString":case"Polygon":l(e.arcs);break;case"MultiPolygon":c(e.arcs)}}return u(t),a.forEach(null==n?function(e){i.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&i.push(e[0].i)}),i}(0,t,n);else for(i=0,r=new Array(a=e.arcs.length);i<a;++i)r[i]=i;return{type:"MultiLineString",arcs:Zl(e,r)}}var ec=n(41314),tc=n(90687),nc=n(61379);function rc(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor((0,nc.A)(t)/3)))-(0,nc.A)(Math.abs(e)))}function ic(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,(0,nc.A)(t)-(0,nc.A)(e))+1}function ac(e){return Math.max(0,-(0,nc.A)(Math.abs(e)))}var oc=n(37885),sc=n(90938),lc=n(68678),cc=n(40846),uc=n(86275),fc=n(22086),dc=n(16532),hc=n(47666),pc=n(89398),mc=n(58437),gc=n(97672);const vc="year",yc="quarter",bc="month",xc="week",_c="date",wc="day",Ac="dayofyear",kc="hours",Ec="minutes",Tc="seconds",Mc="milliseconds",Sc=[vc,yc,bc,xc,_c,wc,Ac,kc,Ec,Tc,Mc],Cc=Sc.reduce(((e,t,n)=>(e[t]=1+n,e)),{});function Oc(e){const t=Zs(e).slice(),n={};t.length||us("Missing time unit."),t.forEach((e=>{dl(Cc,e)?n[e]=1:us(`Invalid time unit: ${e}.`)}));return(n[xc]||n[wc]?1:0)+(n[yc]||n[bc]||n[_c]?1:0)+(n[Ac]?1:0)>1&&us(`Incompatible time units: ${e}`),t.sort(((e,t)=>Cc[e]-Cc[t])),t}const Rc={[vc]:"%Y ",[yc]:"Q%q ",[bc]:"%b ",[_c]:"%d ",[xc]:"W%U ",[wc]:"%a ",[Ac]:"%j ",[kc]:"%H:00",[Ec]:"00:%M",[Tc]:":%S",[Mc]:".%L",[`${vc}-${bc}`]:"%Y-%m ",[`${vc}-${bc}-${_c}`]:"%Y-%m-%d ",[`${kc}-${Ec}`]:"%H:%M"};function Nc(e,t){const n=ll({},Rc,t),r=Oc(e),i=r.length;let a,o,s="",l=0;for(l=0;l<i;)for(a=r.length;a>l;--a)if(o=r.slice(l,a).join("-"),null!=n[o]){s+=n[o],l=a;break}return s.trim()}const Lc=new Date;function Dc(e){return Lc.setFullYear(e),Lc.setMonth(0),Lc.setDate(1),Lc.setHours(0,0,0,0),Lc}function Pc(e){return Fc(new Date(e))}function Ic(e){return zc(new Date(e))}function Fc(e){return lc.UA.count(Dc(e.getFullYear())-1,e)}function zc(e){return cc.YP.count(Dc(e.getFullYear())-1,e)}function jc(e){return Dc(e).getDay()}function Bc(e,t,n,r,i,a,o){if(0<=e&&e<100){const s=new Date(-1,t,n,r,i,a,o);return s.setFullYear(e),s}return new Date(e,t,n,r,i,a,o)}function Uc(e){return qc(new Date(e))}function $c(e){return Hc(new Date(e))}function qc(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return lc.dA.count(t-1,e)}function Hc(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return cc.Hl.count(t-1,e)}function Vc(e){return Lc.setTime(Date.UTC(e,0,1)),Lc.getUTCDay()}function Wc(e,t,n,r,i,a,o){if(0<=e&&e<100){const e=new Date(Date.UTC(-1,t,n,r,i,a,o));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(e,t,n,r,i,a,o))}function Gc(e,t,n,r,i){const a=t||1,o=Ns(e),s=(e,t,i)=>function(e,t,n,r){const i=n<=1?e:r?(t,i)=>r+n*Math.floor((e(t,i)-r)/n):(t,r)=>n*Math.floor(e(t,r)/n);return t?(e,n)=>t(i(e,n),n):i}(n[i=i||e],r[i],e===o&&a,t),l=new Date,c=Fl(e),u=c[vc]?s(vc):ol(2012),f=c[bc]?s(bc):c[yc]?s(yc):ms,d=c[xc]&&c[wc]?s(wc,1,xc+wc):c[xc]?s(xc,1):c[wc]?s(wc,1):c[_c]?s(_c,1):c[Ac]?s(Ac,1):gs,h=c[kc]?s(kc):ms,p=c[Ec]?s(Ec):ms,m=c[Tc]?s(Tc):ms,g=c[Mc]?s(Mc):ms;return function(e){l.setTime(+e);const t=u(l);return i(t,f(l),d(l,t),h(l),p(l),m(l),g(l))}}function Yc(e,t,n){return t+7*e-(n+6)%7}const Xc={[vc]:e=>e.getFullYear(),[yc]:e=>Math.floor(e.getMonth()/3),[bc]:e=>e.getMonth(),[_c]:e=>e.getDate(),[kc]:e=>e.getHours(),[Ec]:e=>e.getMinutes(),[Tc]:e=>e.getSeconds(),[Mc]:e=>e.getMilliseconds(),[Ac]:e=>Fc(e),[xc]:e=>zc(e),[xc+wc]:(e,t)=>Yc(zc(e),e.getDay(),jc(t)),[wc]:(e,t)=>Yc(1,e.getDay(),jc(t))},Kc={[yc]:e=>3*e,[xc]:(e,t)=>Yc(e,0,jc(t))};function Zc(e,t){return Gc(e,t||1,Xc,Kc,Bc)}const Jc={[vc]:e=>e.getUTCFullYear(),[yc]:e=>Math.floor(e.getUTCMonth()/3),[bc]:e=>e.getUTCMonth(),[_c]:e=>e.getUTCDate(),[kc]:e=>e.getUTCHours(),[Ec]:e=>e.getUTCMinutes(),[Tc]:e=>e.getUTCSeconds(),[Mc]:e=>e.getUTCMilliseconds(),[Ac]:e=>qc(e),[xc]:e=>Hc(e),[wc]:(e,t)=>Yc(1,e.getUTCDay(),Vc(t)),[xc+wc]:(e,t)=>Yc(Hc(e),e.getUTCDay(),Vc(t))},Qc={[yc]:e=>3*e,[xc]:(e,t)=>Yc(e,0,Vc(t))};function eu(e,t){return Gc(e,t||1,Jc,Qc,Wc)}const tu={[vc]:uc.he,[yc]:fc.Ui.every(3),[bc]:fc.Ui,[xc]:cc.YP,[_c]:lc.UA,[wc]:lc.UA,[Ac]:lc.UA,[kc]:dc.Ag,[Ec]:hc.wX,[Tc]:pc.R,[Mc]:mc.y},nu={[vc]:uc.Mb,[yc]:fc.R6.every(3),[bc]:fc.R6,[xc]:cc.Hl,[_c]:lc.dA,[wc]:lc.dA,[Ac]:lc.dA,[kc]:dc.pz,[Ec]:hc.vD,[Tc]:pc.R,[Mc]:mc.y};function ru(e){return tu[e]}function iu(e){return nu[e]}function au(e,t,n){return e?e.offset(t,n):void 0}function ou(e,t,n){return au(ru(e),t,n)}function su(e,t,n){return au(iu(e),t,n)}function lu(e,t,n,r){return e?e.range(t,n,r):void 0}function cu(e,t,n,r){return lu(ru(e),t,n,r)}function uu(e,t,n,r){return lu(iu(e),t,n,r)}const fu=1e3,du=6e4,hu=36e5,pu=864e5,mu=2592e6,gu=31536e6,vu=[vc,bc,_c,kc,Ec,Tc,Mc],yu=vu.slice(0,-1),bu=yu.slice(0,-1),xu=bu.slice(0,-1),_u=xu.slice(0,-1),wu=[vc,bc],Au=[vc],ku=[[yu,1,fu],[yu,5,5e3],[yu,15,15e3],[yu,30,3e4],[bu,1,du],[bu,5,3e5],[bu,15,9e5],[bu,30,18e5],[xu,1,hu],[xu,3,108e5],[xu,6,216e5],[xu,12,432e5],[_u,1,pu],[[vc,xc],1,6048e5],[wu,1,mu],[wu,3,7776e6],[Au,1,gu]];function Eu(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(Rl(t))/n;let i,a,o=(0,gc.A)((e=>e[2])).right(ku,r);return o===ku.length?(i=Au,a=(0,ec.sG)(t[0]/gu,t[1]/gu,n)):o?(o=ku[r/ku[o-1][2]<ku[o][2]/r?o-1:o],i=o[0],a=o[1]):(i=vu,a=Math.max((0,ec.sG)(t[0],t[1],n),1)),{units:i,step:a}}var Tu=n(39913),Mu=n(49326);function Su(e){const t={};return n=>t[n]||(t[n]=e(n))}function Cu(e){const t=Su(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(e){const n=(0,tc.A)(e||",");if(null==n.precision){switch(n.precision=12,n.type){case"%":n.precision-=2;break;case"e":n.precision-=1}return function(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let a=function(e,t){let n,r=e.lastIndexOf("e");if(r>0)return r;for(r=e.length;--r>t;)if(n=e.charCodeAt(r),n>=48&&n<=57)return r+1}(r,i);const o=a<r.length?r.slice(a):"";for(;--a>i;)if("0"!==r[a]){++a;break}return r.slice(0,a)+o}}(t(n),t(".1f")(1)[1])}return t(n)},formatSpan(e,r,i,a){a=(0,tc.A)(null==a?",f":a);const o=(0,ec.sG)(e,r,i),s=Math.max(Math.abs(e),Math.abs(r));let l;if(null==a.precision)switch(a.type){case"s":return isNaN(l=rc(o,s))||(a.precision=l),n(a,s);case"":case"e":case"g":case"p":case"r":isNaN(l=ic(o,s))||(a.precision=l-("e"===a.type));break;case"f":case"%":isNaN(l=ac(o))||(a.precision=l-2*("%"===a.type))}return t(a)}}}let Ou,Ru;function Nu(){return Ou=Cu({format:oc.GP,formatPrefix:oc.s})}function Lu(e){return Cu((0,sc.A)(e))}function Du(e){return arguments.length?Ou=Lu(e):Ou}function Pu(e,t,n){Ms(n=n||{})||us(`Invalid time multi-format specifier: ${n}`);const r=t(Tc),i=t(Ec),a=t(kc),o=t(_c),s=t(xc),l=t(bc),c=t(yc),u=t(vc),f=e(n[Mc]||".%L"),d=e(n[Tc]||":%S"),h=e(n[Ec]||"%I:%M"),p=e(n[kc]||"%I %p"),m=e(n[_c]||n[wc]||"%a %d"),g=e(n[xc]||"%b %d"),v=e(n[bc]||"%B"),y=e(n[yc]||"%B"),b=e(n[vc]||"%Y");return e=>(r(e)<e?f:i(e)<e?d:a(e)<e?h:o(e)<e?p:l(e)<e?s(e)<e?m:g:u(e)<e?c(e)<e?v:y:b)(e)}function Iu(e){const t=Su(e.format),n=Su(e.utcFormat);return{timeFormat:e=>Al(e)?t(e):Pu(t,ru,e),utcFormat:e=>Al(e)?n(e):Pu(n,iu,e),timeParse:Su(e.parse),utcParse:Su(e.utcParse)}}function Fu(){return Ru=Iu({format:Tu.DC,parse:Tu.T6,utcFormat:Tu.aL,utcParse:Tu.GY})}function zu(e){return Iu((0,Mu.A)(e))}function ju(e){return arguments.length?Ru=zu(e):Ru}Nu(),Fu();const Bu=(e,t)=>ll({},e,t);function Uu(e,t){const n=e?Lu(e):Du(),r=t?zu(t):ju();return Bu(n,r)}function $u(e,t){const n=arguments.length;return n&&2!==n&&us("defaultLocale expects either zero or two arguments."),n?Bu(Du(e),ju(t)):Bu(Du(),ju())}function qu(){return Nu(),Fu(),$u()}const Hu=/^(data:|([A-Za-z]+:)?\/\/)/,Vu=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Wu=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Gu="file://";async function Yu(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function Xu(e,t){t=ll({},this.options,t);const n=this.fileAccess,r={href:null};let i,a,o;const s=Vu.test(e.replace(Wu,""));null!=e&&"string"==typeof e&&s||us("Sanitize failure, invalid URI: "+Nl(e));const l=Hu.test(e);return(o=t.baseURL)&&!l&&(e.startsWith("/")||o.endsWith("/")||(e="/"+e),e=o+e),a=(i=e.startsWith(Gu))||"file"===t.mode||"http"!==t.mode&&!l&&n,i?e=e.slice(7):e.startsWith("//")&&("file"===t.defaultProtocol?(e=e.slice(2),a=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!a}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),"image"===t.context&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function Ku(e){return e?t=>new Promise(((n,r)=>{e.readFile(t,((e,t)=>{e?r(e):n(t)}))})):Zu}async function Zu(){us("No file system access.")}function Ju(e){return e?async function(t,n){const r=ll({},this.options.http,n),i=n&&n.response,a=await e(t,r);return a.ok?Qs(a[i])?a[i]():a.text():us(a.status+""+a.statusText)}:Qu}async function Qu(){us("No HTTP fetch method available.")}const ef=e=>null!=e&&e==e,tf=e=>!(Number.isNaN(+e)||e instanceof Date),nf={boolean:Ll,integer:Ls,number:Ls,date:Pl,string:Il,unknown:ps},rf=[e=>"true"===e||"false"===e||!0===e||!1===e,e=>tf(e)&&Number.isInteger(+e),tf,e=>!Number.isNaN(Date.parse(e))],af=["boolean","integer","number","date"];function of(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=rf.length,i=rf.map(((e,t)=>t+1));for(let a,o,s=0,l=0;s<n;++s)for(o=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&ef(o)&&!rf[a](o)&&(i[a]=0,++l,l===rf.length))return"string";return af[i.reduce(((e,t)=>0===e?t:e),0)-1]}function sf(e,t){return t.reduce(((t,n)=>(t[n]=of(e,n),t)),{})}function lf(e){const t=function(t,n){const r={delimiter:e};return cf(t,n?ll(n,r):r)};return t.responseType="text",t}function cf(e,t){return t.header&&(e=t.header.map(Nl).join(t.delimiter)+"\n"+e),Wl(t.delimiter).parse(e+"")}function uf(e,t){const n=t&&t.property?ds(t.property):ps;return Ms(e)&&!function(e){return!("function"!=typeof Buffer||!Qs(Buffer.isBuffer))&&Buffer.isBuffer(e)}(e)?function(e,t){!Ts(e)&&xl(e)&&(e=[...e]);return t&&t.copy?JSON.parse(JSON.stringify(e)):e}(n(e),t):n(JSON.parse(e))}cf.responseType="text",uf.responseType="json";const ff={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function df(e,t){let n,r,i,a;return e=uf(e,t),t&&t.feature?(n=Yl,i=t.feature):t&&t.mesh?(n=Jl,i=t.mesh,a=ff[t.filter]):us("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,a):us("Invalid TopoJSON object: "+i),r&&r.features||[r]}df.responseType="json";const hf={dsv:cf,csv:lf(","),tsv:lf("\t"),json:uf,topojson:df};function pf(e,t){return arguments.length>1?(hf[e]=t,this):dl(hf,e)?hf[e]:null}function mf(e){const t=pf(e);return t&&t.responseType||"text"}function gf(e,t,n,r){const i=pf((t=t||{}).type||"json");return i||us("Unknown data format type: "+t.type),e=i(e,t),t.parse&&function(e,t,n,r){if(!e.length)return;const i=ju();n=n||i.timeParse,r=r||i.utcParse;let a,o,s,l,c,u,f=e.columns||Object.keys(e[0]);"auto"===t&&(t=sf(e,f));f=Object.keys(t);const d=f.map((e=>{const i=t[e];let a,o;if(i&&(i.startsWith("date:")||i.startsWith("utc:"))){a=i.split(/:(.+)?/,2),o=a[1],("'"===o[0]&&"'"===o[o.length-1]||'"'===o[0]&&'"'===o[o.length-1])&&(o=o.slice(1,-1));return("utc"===a[0]?r:n)(o)}if(!nf[i])throw Error("Illegal format pattern: "+e+":"+i);return nf[i]}));for(s=0,c=e.length,u=f.length;s<c;++s)for(a=e[s],l=0;l<u;++l)o=f[l],a[o]=d[l](a[o])}(e,t.parse,n,r),dl(e,"columns")&&delete e.columns,e}const vf=function(e,t){return n=>({options:n||{},sanitize:Xu,load:Yu,fileAccess:!!t,file:Ku(t),http:Ju(e)})}("undefined"!=typeof fetch&&fetch,null);function yf(e){const t=e||ps,n=[],r={};return n.add=e=>{const i=t(e);return r[i]||(r[i]=1,n.push(e)),n},n.remove=e=>{const i=t(e);if(r[i]){r[i]=0;const t=n.indexOf(e);t>=0&&n.splice(t,1)}return n},n}async function bf(e,t){try{await t(e)}catch(t){e.error(t)}}const xf=Symbol("vega_id");let _f=1;function wf(e){return!(!e||!Af(e))}function Af(e){return e[xf]}function kf(e,t){return e[xf]=t,e}function Ef(e){const t=e===Object(e)?e:{data:e};return Af(t)?t:kf(t,_f++)}function Tf(e){return Mf(e,Ef({}))}function Mf(e,t){for(const n in e)t[n]=e[n];return t}function Sf(e,t){return kf(t,Af(e))}function Cf(e,t){return e?t?(n,r)=>e(n,r)||Af(t(n))-Af(t(r)):(t,n)=>e(t,n)||Af(t)-Af(n):null}function Of(e){return e&&e.constructor===Rf}function Rf(){const e=[],t=[],n=[],r=[],i=[];let a=null,o=!1;return{constructor:Rf,insert(t){const n=Zs(t),r=n.length;for(let t=0;t<r;++t)e.push(n[t]);return this},remove(e){const n=Qs(e)?r:t,i=Zs(e),a=i.length;for(let e=0;e<a;++e)n.push(i[e]);return this},modify(e,t,r){const a={field:t,value:ol(r)};return Qs(e)?(a.filter=e,i.push(a)):(a.tuple=e,n.push(a)),this},encode(e,t){return Qs(e)?i.push({filter:e,field:t}):n.push({tuple:e,field:t}),this},clean(e){return a=e,this},reflow(){return o=!0,this},pulse(s,l){const c={},u={};let f,d,h,p,m,g;for(f=0,d=l.length;f<d;++f)c[Af(l[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],c[Af(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],l.forEach((e=>{p(e)&&(c[Af(e)]=-1)}));for(f=0,d=e.length;f<d;++f)m=e[f],g=Af(m),c[g]?c[g]=1:s.add.push(Ef(e[f]));for(f=0,d=l.length;f<d;++f)m=l[f],c[Af(m)]<0&&s.rem.push(m);function v(e,t,n){n?e[t]=n(e):s.encode=t,o||(u[Af(e)]=e)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=c[Af(m)],g>0&&(v(m,p,h.value),s.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,l.forEach((e=>{p(e)&&c[Af(e)]>0&&v(e,h.field,h.value)})),s.modifies(h.field);if(o)s.mod=t.length||r.length?l.filter((e=>c[Af(e)]>0)):l.slice();else for(g in u)s.mod.push(u[g]);return(a||null==a&&(t.length||r.length))&&s.clean(!0),s}}}const Nf="_:mod:_";function Lf(){Object.defineProperty(this,Nf,{writable:!0,value:{}})}Lf.prototype={set(e,t,n,r){const i=this,a=i[e],o=i[Nf];return null!=t&&t>=0?(a[t]!==n||r)&&(a[t]=n,o[t+":"+e]=-1,o[e]=-1):(a!==n||r)&&(i[e]=n,o[e]=Ts(n)?1+n.length:-1),i},modified(e,t){const n=this[Nf];if(!arguments.length){for(const e in n)if(n[e])return!0;return!1}if(Ts(e)){for(let t=0;t<e.length;++t)if(n[e[t]])return!0;return!1}return null!=t&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[Nf]={},this}};let Df=0;const Pf=new Lf;function If(e,t,n,r){this.id=++Df,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Ff(e){return function(t){const n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}If.prototype={targets(){return this._targets||(this._targets=yf(hs))},set(e){return this.value!==e?(this.value=e,1):0},skip:Ff(1),modified:Ff(2),parameters(e,t,n){t=!1!==t;const r=this._argval=this._argval||new Lf,i=this._argops=this._argops||[],a=[];let o,s,l,c;const u=(e,n,o)=>{o instanceof If?(o!==this&&(t&&o.targets().add(this),a.push(o)),i.push({op:o,name:e,index:n})):r.set(e,n,o)};for(o in e)if(s=e[o],"pulse"===o)Zs(s).forEach((e=>{e instanceof If?e!==this&&(e.targets().add(this),a.push(e)):us("Pulse parameters must be operator instances.")})),this.source=s;else if(Ts(s))for(r.set(o,-1,Array(l=s.length)),c=0;c<l;++c)u(o,c,s[c]);else u(o,-1,s);return this.marshall().clear(),n&&(i.initonly=!0),a},marshall(e){const t=this._argval||Pf,n=this._argops;let r,i,a,o;if(n){const s=n.length;for(i=0;i<s;++i)r=n[i],a=r.op,o=a.modified()&&a.stamp===e,t.set(r.name,r.index,a.value,o);if(n.initonly){for(i=0;i<s;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};let zf=0;function jf(e,t,n){this.id=++zf,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Bf(e,t,n){return new jf(e,t,n)}jf.prototype={_filter:vs,_apply:ps,targets(){return this._targets||(this._targets=yf(hs))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let e=0;e<r;++e)n[e].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Bf(e);return this.targets().add(t),t},apply(e){const t=Bf(null,e);return this.targets().add(t),t},merge(){const e=Bf();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter((()=>{const n=Date.now();return n-t>e?(t=n,1):0}))},debounce(e){const t=Bf();return this.targets().add(Bf(null,null,sl(e,(e=>{const n=e.dataflow;t.receive(e),n&&n.run&&n.run()})))),t},between(e,t){let n=!1;return e.targets().add(Bf(null,null,(()=>n=!0))),t.targets().add(Bf(null,null,(()=>n=!1))),this.filter((()=>n))},detach(){this._filter=vs,this._targets=null}};const Uf={skip:!0};function $f(e,t,n,r,i,a){const o=ll({},a,Uf);let s,l;Qs(n)||(n=ol(n)),void 0===r?s=t=>e.touch(n(t)):Qs(r)?(l=new If(null,r,i,!1),s=t=>{l.evaluate(t);const r=n(t),i=l.value;Of(i)?e.pulse(r,i,a):e.update(r,i,o)}):s=t=>e.update(n(t),r,o),t.apply(s)}function qf(e,t,n,r,i,a){if(void 0===r)t.targets().add(n);else{const o=a||{},s=new If(null,function(e,t){return t=Qs(t)?t:ol(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}(n,r),i,!1);s.modified(o.force),s.rank=t.rank,t.targets().add(s),n&&(s.skip(!0),s.value=n.value,s.targets().add(n),e.connect(n,[s]))}}const Hf={};function Vf(e,t,n){this.dataflow=e,this.stamp=null==t?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function Wf(e,t){const n=[];return jl(e,t,(e=>n.push(e))),n}function Gf(e,t){const n={};return e.visit(t,(e=>{n[Af(e)]=1})),e=>n[Af(e)]?null:e}function Yf(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}function Xf(e,t,n,r){const i=this;let a=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const e of n)if(e.stamp===t){if(e.fields){const t=i.fields||(i.fields={});for(const n in e.fields)t[n]=1}e.changed(i.ADD)&&(a|=i.ADD),e.changed(i.REM)&&(a|=i.REM),e.changed(i.MOD)&&(a|=i.MOD)}this.changes=a}function Kf(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}Vf.prototype={StopPropagation:Hf,ADD:1,REM:2,MOD:4,ADD_REM:3,ADD_MOD:5,ALL:7,REFLOW:8,SOURCE:16,NO_SOURCE:32,NO_FIELDS:64,fork(e){return new Vf(this.dataflow).init(this,e)},clone(){const e=this.fork(7);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(23)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new Vf(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,!e.fields||64&t||(n.fields=e.fields),1&t?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),2&t?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),4&t?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),32&t?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||7;return 1&t&&this.add.length||2&t&&this.rem.length||4&t&&this.mod.length},reflow(e){if(e)return this.fork(7).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(4,Gf(this,1))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Ts(e)?e.forEach((e=>t[e]=!0)):t[e]=!0,this},modified(e,t){const n=this.fields;return!(!t&&!this.mod.length||!n)&&(arguments.length?Ts(e)?e.some((e=>n[e])):n[e]:!!n)},filter(e,t){const n=this;return 1&e&&(n.addF=Yf(n.addF,t)),2&e&&(n.remF=Yf(n.remF,t)),4&e&&(n.modF=Yf(n.modF,t)),16&e&&(n.srcF=Yf(n.srcF,t)),n},materialize(e){const t=this;return 1&(e=e||7)&&t.addF&&(t.add=Wf(t.add,t.addF),t.addF=null),2&e&&t.remF&&(t.rem=Wf(t.rem,t.remF),t.remF=null),4&e&&t.modF&&(t.mod=Wf(t.mod,t.modF),t.modF=null),16&e&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(16&e)return jl(n.source,n.srcF,r),n;1&e&&jl(n.add,n.addF,r),2&e&&jl(n.rem,n.remF,r),4&e&&jl(n.mod,n.modF,r);const i=n.source;if(8&e&&i){const e=n.add.length+n.mod.length;e===i.length||jl(i,e?Gf(n,5):n.srcF,r)}return n}},gl(Xf,Vf,{fork(e){const t=new Vf(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&t.ADD&&this.visit(t.ADD,(e=>t.add.push(e))),e&t.REM&&this.visit(t.REM,(e=>t.rem.push(e))),e&t.MOD&&this.visit(t.MOD,(e=>t.mod.push(e)))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Ts(e)?e.some((e=>n[e])):n[e]:0},filter(){us("MultiPulse does not support filtering.")},materialize(){us("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let a=0;if(e&n.SOURCE)for(;a<i;++a)r[a].visit(e,t);else for(;a<i;++a)r[a].stamp===n.stamp&&r[a].visit(e,t);return n}});const Zf={skip:!1,force:!1};function Jf(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),Qf(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,function(e,t,n){const r=t,i=e.length,a=e[t];let o,s=1+(t<<1);for(;s<i;)o=s+1,o<i&&n(e[s],e[o])>=0&&(s=o),e[t]=e[s],s=1+((t=s)<<1);e[t]=a,Qf(e,r,t,n)}(t,0,e)):r=n,r}}}function Qf(e,t,n,r){let i,a;const o=e[n];for(;n>t&&(a=n-1>>1,i=e[a],r(o,i)<0);)e[n]=i,n=a;return e[n]=o}function ed(){this.logger(Es()),this.logLevel(_s),this._clock=0,this._rank=0,this._locale=$u();try{this._loader=vf()}catch(e){}this._touched=yf(hs),this._input={},this._pulse=null,this._heap=Jf(((e,t)=>e.qrank-t.qrank)),this._postrun=[]}function td(e){return function(){return this._log[e].apply(this,arguments)}}function nd(e,t){If.call(this,e,null,t)}ed.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:td("error"),warn:td("warn"),info:td("info"),debug:td("debug"),logLevel:td("level"),cleanThreshold:1e4,add:function(e,t,n,r){let i,a=1;return e instanceof If?i=e:e&&e.prototype instanceof If?i=new e:Qs(e)?i=new If(null,e):(a=0,i=new If(e,t)),this.rank(i),a&&(r=n,n=t),n&&this.connect(i,i.parameters(n,r)),this.touch(i),i},connect:function(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank)return void this.rerank(e)},rank:function(e){e.rank=++this._rank},rerank:function(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&us("Cycle detected in dataflow graph.")},pulse:function(e,t,n){this.touch(e,n||Zf);const r=new Vf(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this},touch:function(e,t){const n=t||Zf;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this},update:function(e,t,n){const r=n||Zf;return(e.set(t)||r.force)&&this.touch(e,r),this},changeset:Rf,ingest:function(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))},parse:function(e,t){const n=this.locale();return gf(e,t,n.timeParse,n.utcParse)},preload:async function(e,t,n){const r=this,i=r._pending||function(e){let t;const n=new Promise((e=>t=e));return n.requests=0,n.done=()=>{0==--n.requests&&(e._pending=null,t(e))},e._pending=n}(r);i.requests+=1;const a=await r.request(t,n);return r.pulse(e,r.changeset().remove(vs).insert(a.data||[])),i.done(),a},request:async function(e,t){const n=this;let r,i=0;try{r=await n.loader().load(e,{context:"dataflow",response:mf(t&&t.type)});try{r=n.parse(r,t)}catch(t){i=-2,n.warn("Data ingestion failed",e,t)}}catch(t){i=-1,n.warn("Loading failed",e,t)}return{data:r,status:i}},events:function(e,t,n,r){const i=this,a=Bf(n,r),o=function(e){e.dataflow=i;try{a.receive(e)}catch(e){i.error(e)}finally{i.run()}};let s;s="string"==typeof e&&"undefined"!=typeof document?document.querySelectorAll(e):Zs(e);const l=s.length;for(let e=0;e<l;++e)s[e].addEventListener(t,o);return a},on:function(e,t,n,r,i){return(e instanceof If?qf:$f)(this,e,t,n,r,i),this},evaluate:async function(e,t,n){const r=this,i=[];if(r._pulse)return Kf(r);if(r._pending&&await r._pending,t&&await bf(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const a=++r._clock;r._pulse=new Vf(r,a,e),r._touched.forEach((e=>r._enqueue(e,!0))),r._touched=yf(hs);let o,s,l,c=0;try{for(;r._heap.size()>0;)o=r._heap.pop(),o.rank===o.qrank?(s=o.run(r._getPulse(o,e)),s.then?s=await s:s.async&&(i.push(s.async),s=Hf),s!==Hf&&o._targets&&o._targets.forEach((e=>r._enqueue(e))),++c):r._enqueue(o,!0)}catch(e){r._heap.clear(),l=e}if(r._input={},r._pulse=null,r.debug(`Pulse ${a}: ${c} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const e=r._postrun.sort(((e,t)=>t.priority-e.priority));r._postrun=[];for(let t=0;t<e.length;++t)await bf(r,e[t].callback)}return n&&await bf(r,n),i.length&&Promise.all(i).then((e=>r.runAsync(null,(()=>{e.forEach((e=>{try{e(r)}catch(e){r.error(e)}}))})))),r},run:function(e,t,n){return this._pulse?Kf(this):(this.evaluate(e,t,n),this)},runAsync:async function(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running},runAfter:function(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(e){this.error(e)}},_enqueue:function(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))},_getPulse:function(e,t){const n=e.source,r=this._clock;return n&&Ts(n)?new Xf(this,r,n.map((e=>e.pulse)),t):this._input[e.id]||function(e,t){if(t&&t.stamp===e.stamp)return t;e=e.fork(),t&&t!==Hf&&(e.source=t.source);return e}(this._pulse,n&&n.pulse)}},gl(nd,If,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then((e=>this.pulse=e)):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const rd={};function id(e){const t=ad(e);return t&&t.Definition||null}function ad(e){return e=e&&e.toLowerCase(),dl(rd,e)?rd[e]:null}var od=n(27046),sd=n(92766),ld=n(11136);function cd(e=od.A){if(e===od.A)return ud;if("function"!=typeof e)throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||0===r?r:(0===e(n,n))-(0===e(t,t))}}function ud(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function fd(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=void 0===i?ud:cd(i);r>n;){if(r-n>600){const a=r-n+1,o=t-n+1,s=Math.log(a),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(a-l)/a)*(o-a/2<0?-1:1);fd(e,t,Math.max(n,Math.floor(t-o*l/a+c)),Math.min(r,Math.floor(t+(a-o)*l/a+c)),i)}const a=e[t];let o=n,s=r;for(dd(e,n,t),i(e[r],a)>0&&dd(e,n,r);o<s;){for(dd(e,o,s),++o,--s;i(e[o],a)<0;)++o;for(;i(e[s],a)>0;)--s}0===i(e[n],a)?dd(e,n,s):(++s,dd(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function dd(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function hd(e){return null===e?NaN:+e}function pd(e,t,n){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(yield t);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}}(e,n)),(r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return(0,ld.A)(e);if(t>=1)return(0,sd.A)(e);var r,i=(r-1)*t,a=Math.floor(i),o=(0,sd.A)(fd(e,a).subarray(0,a+1));return o+((0,ld.A)(e.subarray(a+1))-o)*(i-a)}}function md(e,t,n=hd){if((r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e);return o+(+n(e[a+1],a+1,e)-o)*(i-a)}}function gd(e,t){return pd(e,.5,t)}function*vd(e,t){if(null==t)for(let t of e)null!=t&&""!==t&&(t=+t)>=t&&(yield t);else{let n=-1;for(let r of e)r=t(r,++n,e),null!=r&&""!==r&&(r=+r)>=r&&(yield r)}}function yd(e,t,n){const r=Float64Array.from(vd(e,n));return r.sort(od.A),t.map((e=>md(r,e)))}function bd(e,t){return yd(e,[.25,.5,.75],t)}function xd(e,t){const n=e.length,r=function(e,t){const n=function(e,t){let n,r=0,i=0,a=0;if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(n=t-i,i+=n/++r,a+=n*(t-i));else{let o=-1;for(let s of e)null!=(s=t(s,++o,e))&&(s=+s)>=s&&(n=s-i,i+=n/++r,a+=n*(s-i))}if(r>1)return a/(r-1)}(e,t);return n?Math.sqrt(n):n}(e,t),i=bd(e,t),a=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,a)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function _d(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let a,o,s,l,c,u,f=e.extent[0],d=e.extent[1];const h=e.span||d-f||Math.abs(f)||1;if(e.step)a=e.step;else if(e.steps){for(l=h/t,c=0,u=e.steps.length;c<u&&e.steps[c]<l;++c);a=e.steps[Math.max(0,c-1)]}else{for(o=Math.ceil(Math.log(t)/r),s=e.minstep||0,a=Math.max(s,Math.pow(n,Math.round(Math.log(h)/r)-o));Math.ceil(h/a)>t;)a*=n;for(c=0,u=i.length;c<u;++c)l=a/i[c],l>=s&&h/l<=t&&(a=l)}l=Math.log(a);const p=l>=0?0:1+~~(-l/r),m=Math.pow(n,-p-1);return(e.nice||void 0===e.nice)&&(l=Math.floor(f/a+m)*a,f=f<l?l-a:l,d=Math.ceil(d/a)*a),{start:f,stop:d===f?f+a:d,step:a}}var wd=Math.random;function Ad(e){wd=e}function kd(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(vd(e,r)),a=i.length,o=t;let s,l,c,u;for(c=0,u=Array(o);c<o;++c){for(s=0,l=0;l<a;++l)s+=i[~~(wd()*a)];u[c]=s/a}return u.sort(od.A),[pd(u,n/2),pd(u,1-n/2)]}function Ed(e,t,n,r){r=r||(e=>e);const i=e.length,a=new Float64Array(i);let o,s=0,l=1,c=r(e[0]),u=c,f=c+t;for(;l<i;++l){if(o=r(e[l]),o>=f){for(u=(c+u)/2;s<l;++s)a[s]=u;f=o+t,c=o}u=o}for(u=(c+u)/2;s<l;++s)a[s]=u;return n?function(e,t){const n=e.length;let r,i,a=0,o=1;for(;e[a]===e[o];)++o;for(;o<n;){for(r=o+1;e[o]===e[r];)++r;if(e[o]-e[o-1]<t){for(i=o+(a+r-o-o>>1);i<o;)e[i++]=e[o];for(;i>o;)e[i--]=e[a]}a=o,o=r}return e}(a,t+t/4):a}function Td(e){return function(){return(e=(1103515245*e+12345)%2147483647)/2147483647}}function Md(e,t){let n,r,i;null==t&&(t=e,e=0);const a={min(e){return arguments.length?(n=e||0,i=r-n,a):n},max(e){return arguments.length?(r=e||0,i=r-n,a):r},sample:()=>n+Math.floor(i*wd()),pdf:e=>e===Math.floor(e)&&e>=n&&e<r?1/i:0,cdf(e){const t=Math.floor(e);return t<n?0:t>=r?1:(t-n+1)/i},icdf:e=>e>=0&&e<=1?n-1+Math.floor(e*i):NaN};return a.min(e).max(t)}const Sd=Math.sqrt(2*Math.PI),Cd=Math.SQRT2;let Od=NaN;function Rd(e,t){e=e||0,t=null==t?1:t;let n,r,i=0,a=0;if(Od==Od)i=Od,Od=NaN;else{do{i=2*wd()-1,a=2*wd()-1,n=i*i+a*a}while(0===n||n>1);r=Math.sqrt(-2*Math.log(n)/n),i*=r,Od=a*r}return e+i*t}function Nd(e,t,n){const r=(e-(t||0))/(n=null==n?1:n);return Math.exp(-.5*r*r)/(n*Sd)}function Ld(e,t,n){const r=(e-(t=t||0))/(n=null==n?1:n),i=Math.abs(r);let a;if(i>37)a=0;else{const e=Math.exp(-i*i/2);let t;i<7.07106781186547?(t=.0352624965998911*i+.700383064443688,t=t*i+6.37396220353165,t=t*i+33.912866078383,t=t*i+112.079291497871,t=t*i+221.213596169931,t=t*i+220.206867912376,a=e*t,t=.0883883476483184*i+1.75566716318264,t=t*i+16.064177579207,t=t*i+86.7807322029461,t=t*i+296.564248779674,t=t*i+637.333633378831,t=t*i+793.826512519948,t=t*i+440.413735824752,a/=t):(t=i+.65,t=i+4/t,t=i+3/t,t=i+2/t,t=i+1/t,a=e/t/2.506628274631)}return r>0?1-a:a}function Dd(e,t,n){return e<0||e>1?NaN:(t||0)+(null==n?1:n)*Cd*function(e){let t,n=-Math.log((1-e)*(1+e));n<6.25?(n-=3.125,t=-364441206401782e-35,t=t*n-16850591381820166e-35,t=128584807152564e-32+t*n,t=11157877678025181e-33+t*n,t=t*n-1333171662854621e-31,t=20972767875968562e-33+t*n,t=6637638134358324e-30+t*n,t=t*n-4054566272975207e-29,t=t*n-8151934197605472e-29,t=26335093153082323e-28+t*n,t=t*n-12975133253453532e-27,t=t*n-5415412054294628e-26,t=1.0512122733215323e-9+t*n,t=t*n-4.112633980346984e-9,t=t*n-2.9070369957882005e-8,t=4.2347877827932404e-7+t*n,t=t*n-13654692000834679e-22,t=t*n-13882523362786469e-21,t=.00018673420803405714+t*n,t=t*n-.000740702534166267,t=t*n-.006033670871430149,t=.24015818242558962+t*n,t=1.6536545626831027+t*n):n<16?(n=Math.sqrt(n)-3.25,t=2.2137376921775787e-9,t=9.075656193888539e-8+t*n,t=t*n-2.7517406297064545e-7,t=1.8239629214389228e-8+t*n,t=15027403968909828e-22+t*n,t=t*n-4013867526981546e-21,t=29234449089955446e-22+t*n,t=12475304481671779e-21+t*n,t=t*n-47318229009055734e-21,t=6828485145957318e-20+t*n,t=24031110387097894e-21+t*n,t=t*n-.0003550375203628475,t=.0009532893797373805+t*n,t=t*n-.0016882755560235047,t=.002491442096107851+t*n,t=t*n-.003751208507569241,t=.005370914553590064+t*n,t=1.0052589676941592+t*n,t=3.0838856104922208+t*n):Number.isFinite(n)?(n=Math.sqrt(n)-5,t=-27109920616438573e-27,t=t*n-2.555641816996525e-10,t=1.5076572693500548e-9+t*n,t=t*n-3.789465440126737e-9,t=7.61570120807834e-9+t*n,t=t*n-1.496002662714924e-8,t=2.914795345090108e-8+t*n,t=t*n-6.771199775845234e-8,t=2.2900482228026655e-7+t*n,t=t*n-9.9298272942317e-7,t=4526062597223154e-21+t*n,t=t*n-1968177810553167e-20,t=7599527703001776e-20+t*n,t=t*n-.00021503011930044477,t=t*n-.00013871931833623122,t=1.0103004648645344+t*n,t=4.849906401408584+t*n):t=1/0;return t*e}(2*e-1)}function Pd(e,t){let n,r;const i={mean(e){return arguments.length?(n=e||0,i):n},stdev(e){return arguments.length?(r=null==e?1:e,i):r},sample:()=>Rd(n,r),pdf:e=>Nd(e,n,r),cdf:e=>Ld(e,n,r),icdf:e=>Dd(e,n,r)};return i.mean(e).stdev(t)}function Id(e,t){const n=Pd();let r=0;const i={data(n){return arguments.length?(e=n,r=n?n.length:0,i.bandwidth(t)):e},bandwidth(n){return arguments.length?(!(t=n)&&e&&(t=xd(e)),i):t},sample:()=>e[~~(wd()*r)]+t*n.sample(),pdf(i){let a=0,o=0;for(;o<r;++o)a+=n.pdf((i-e[o])/t);return a/t/r},cdf(i){let a=0,o=0;for(;o<r;++o)a+=n.cdf((i-e[o])/t);return a/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function Fd(e,t){return e=e||0,t=null==t?1:t,Math.exp(e+Rd()*t)}function zd(e,t,n){if(e<=0)return 0;t=t||0,n=null==n?1:n;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*Sd*e)}function jd(e,t,n){return Ld(Math.log(e),t,n)}function Bd(e,t,n){return Math.exp(Dd(e,t,n))}function Ud(e,t){let n,r;const i={mean(e){return arguments.length?(n=e||0,i):n},stdev(e){return arguments.length?(r=null==e?1:e,i):r},sample:()=>Fd(n,r),pdf:e=>zd(e,n,r),cdf:e=>jd(e,n,r),icdf:e=>Bd(e,n,r)};return i.mean(e).stdev(t)}function $d(e,t){let n,r=0;const i={weights(e){return arguments.length?(n=function(e){const t=[];let n,i=0;for(n=0;n<r;++n)i+=t[n]=null==e[n]?1:+e[n];for(n=0;n<r;++n)t[n]/=i;return t}(t=e||[]),i):t},distributions(n){return arguments.length?(n?(r=n.length,e=n):(r=0,e=[]),i.weights(t)):e},sample(){const t=wd();let i=e[r-1],a=n[0],o=0;for(;o<r-1;a+=n[++o])if(t<a){i=e[o];break}return i.sample()},pdf(t){let i=0,a=0;for(;a<r;++a)i+=n[a]*e[a].pdf(t);return i},cdf(t){let i=0,a=0;for(;a<r;++a)i+=n[a]*e[a].cdf(t);return i},icdf(){throw Error("Mixture icdf not supported.")}};return i.distributions(e).weights(t)}function qd(e,t){return null==t&&(t=null==e?1:e,e=0),e+(t-e)*wd()}function Hd(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=t&&e<=n?1/(n-t):0}function Vd(e,t,n){return null==n&&(n=null==t?1:t,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function Wd(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function Gd(e,t){let n,r;const i={min(e){return arguments.length?(n=e||0,i):n},max(e){return arguments.length?(r=null==e?1:e,i):r},sample:()=>qd(n,r),pdf:e=>Hd(e,n,r),cdf:e=>Vd(e,n,r),icdf:e=>Wd(e,n,r)};return null==t&&(t=null==e?1:e,e=0),i.min(e).max(t)}function Yd(e,t,n){let r=0,i=0;for(const a of e){const e=n(a);null==t(a)||null==e||isNaN(e)||(r+=(e-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function Xd(e,t,n,r){const i=r-e*e,a=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-a*e,a]}function Kd(e,t,n,r){e=e.filter((e=>{let r=t(e),i=n(e);return null!=r&&(r=+r)>=r&&null!=i&&(i=+i)>=i})),r&&e.sort(((e,n)=>t(e)-t(n)));const i=e.length,a=new Float64Array(i),o=new Float64Array(i);let s,l,c,u=0,f=0,d=0;for(c of e)a[u]=s=+t(c),o[u]=l=+n(c),++u,f+=(s-f)/u,d+=(l-d)/u;for(u=0;u<i;++u)a[u]-=f,o[u]-=d;return[a,o,f,d]}function Zd(e,t,n,r){let i,a,o=-1;for(const s of e)i=t(s),a=n(s),null!=i&&(i=+i)>=i&&null!=a&&(a=+a)>=a&&r(i,a,++o)}function Jd(e,t,n,r,i){let a=0,o=0;return Zd(e,t,n,((e,t)=>{const n=t-i(e),s=t-r;a+=n*n,o+=s*s})),1-a/o}function Qd(e,t,n){let r=0,i=0,a=0,o=0,s=0;Zd(e,t,n,((e,t)=>{++s,r+=(e-r)/s,i+=(t-i)/s,a+=(e*t-a)/s,o+=(e*e-o)/s}));const l=Xd(r,i,a,o),c=e=>l[0]+l[1]*e;return{coef:l,predict:c,rSquared:Jd(e,t,n,i,c)}}function eh(e,t,n){let r=0,i=0,a=0,o=0,s=0;Zd(e,t,n,((e,t)=>{++s,e=Math.log(e),r+=(e-r)/s,i+=(t-i)/s,a+=(e*t-a)/s,o+=(e*e-o)/s}));const l=Xd(r,i,a,o),c=e=>l[0]+l[1]*Math.log(e);return{coef:l,predict:c,rSquared:Jd(e,t,n,i,c)}}function th(e,t,n){const[r,i,a,o]=Kd(e,t,n);let s,l,c,u=0,f=0,d=0,h=0,p=0;Zd(e,t,n,((e,t)=>{s=r[p++],l=Math.log(t),c=s*t,u+=(t*l-u)/p,f+=(c-f)/p,d+=(c*l-d)/p,h+=(s*c-h)/p}));const[m,g]=Xd(f/o,u/o,d/o,h/o),v=e=>Math.exp(m+g*(e-a));return{coef:[Math.exp(m-g*a),g],predict:v,rSquared:Jd(e,t,n,o,v)}}function nh(e,t,n){let r=0,i=0,a=0,o=0,s=0,l=0;Zd(e,t,n,((e,t)=>{const n=Math.log(e),c=Math.log(t);++l,r+=(n-r)/l,i+=(c-i)/l,a+=(n*c-a)/l,o+=(n*n-o)/l,s+=(t-s)/l}));const c=Xd(r,i,a,o),u=e=>c[0]*Math.pow(e,c[1]);return c[0]=Math.exp(c[0]),{coef:c,predict:u,rSquared:Jd(e,t,n,s,u)}}function rh(e,t,n){const[r,i,a,o]=Kd(e,t,n),s=r.length;let l,c,u,f,d=0,h=0,p=0,m=0,g=0;for(l=0;l<s;)c=r[l],u=i[l++],f=c*c,d+=(f-d)/l,h+=(f*c-h)/l,p+=(f*f-p)/l,m+=(c*u-m)/l,g+=(f*u-g)/l;const v=p-d*d,y=d*v-h*h,b=(g*d-m*h)/y,x=(m*v-g*h)/y,_=-b*d,w=e=>b*(e-=a)*e+x*e+_+o;return{coef:[_-x*a+b*a*a+o,x-2*b*a,b],predict:w,rSquared:Jd(e,t,n,o,w)}}function ih(e,t,n,r){if(0===r)return Yd(e,t,n);if(1===r)return Qd(e,t,n);if(2===r)return rh(e,t,n);const[i,a,o,s]=Kd(e,t,n),l=i.length,c=[],u=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<l;++p)m+=Math.pow(i[p],d)*a[p];for(c.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<l;++p)m+=Math.pow(i[p],d+h);g[h]=m}u.push(g)}u.push(c);const v=function(e){const t=e.length-1,n=[];let r,i,a,o,s;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(a=r;a<t+1;++a)s=e[a][r],e[a][r]=e[a][o],e[a][o]=s;for(i=r+1;i<t;++i)for(a=t;a>=r;a--)e[a][i]-=e[a][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(s=0,a=i+1;a<t;++a)s+=e[a][i]*n[a];n[i]=(e[t][i]-s)/e[i][i]}return n}(u),y=e=>{e-=o;let t=s+v[0]+v[1]*e+v[2]*e*e;for(d=3;d<f;++d)t+=v[d]*Math.pow(e,d);return t};return{coef:ah(f,v,-o,s),predict:y,rSquared:Jd(e,t,n,s,y)}}function ah(e,t,n,r){const i=Array(e);let a,o,s,l;for(a=0;a<e;++a)i[a]=0;for(a=e-1;a>=0;--a)for(s=t[a],l=1,i[a]+=s,o=1;o<=a;++o)l*=(a+1-o)/o,i[a-o]+=s*Math.pow(n,o)*l;return i[0]+=r,i}const oh=2,sh=1e-12;function lh(e,t,n,r){const[i,a,o,s]=Kd(e,t,n,!0),l=i.length,c=Math.max(2,~~(r*l)),u=new Float64Array(l),f=new Float64Array(l),d=new Float64Array(l).fill(1);for(let e=-1;++e<=oh;){const t=[0,c-1];for(let e=0;e<l;++e){const n=i[e],r=t[0],o=t[1],s=n-i[r]>i[o]-n?r:o;let l=0,c=0,h=0,p=0,m=0;const g=1/Math.abs(i[s]-n||1);for(let e=r;e<=o;++e){const t=i[e],r=a[e],o=ch(Math.abs(n-t)*g)*d[e],s=t*o;l+=o,c+=s,h+=r*o,p+=r*s,m+=t*s}const[v,y]=Xd(c/l,h/l,p/l,m/l);u[e]=v+y*n,f[e]=Math.abs(a[e]-u[e]),uh(i,e+1,t)}if(e===oh)break;const n=gd(f);if(Math.abs(n)<sh)break;for(let e,t,r=0;r<l;++r)e=f[r]/(6*n),d[r]=e>=1?sh:(t=1-e*e)*t}return function(e,t,n,r){const i=e.length,a=[];let o,s=0,l=0,c=[];for(;s<i;++s)o=e[s]+n,c[0]===o?c[1]+=(t[s]-c[1])/++l:(l=0,c[1]+=r,c=[o,t[s]],a.push(c));return c[1]+=r,a}(i,u,o,s)}function ch(e){return(e=1-e*e*e)*e*e}function uh(e,t,n){const r=e[t];let i=n[0],a=n[1]+1;if(!(a>=e.length))for(;t>i&&e[a]-r<=r-e[i];)n[0]=++i,n[1]=a,++a}const fh=.5*Math.PI/180;function dh(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=t=>[t,e(t)],a=t[0],o=t[1],s=o-a,l=s/r,c=[i(a)],u=[];if(n===r){for(let e=1;e<r;++e)c.push(i(a+e/n*s));return c.push(i(o)),c}u.push(i(o));for(let e=n;--e>0;)u.push(i(a+e/n*s));let f=c[0],d=u[u.length-1];const h=1/s,p=function(e,t){let n=e,r=e;const i=t.length;for(let e=0;e<i;++e){const i=t[e][1];i<n&&(n=i),i>r&&(r=i)}return 1/(r-n)}(f[1],u);for(;d;){const e=i((f[0]+d[0])/2);e[0]-f[0]>=l&&hh(f,e,d,h,p)>fh?u.push(e):(f=d,c.push(d),u.pop()),d=u[u.length-1]}return c}function hh(e,t,n,r,i){const a=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(a-o)}var ph=n(60583);function mh(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(i);++r<i;)a[r]=e+r*n;return a}function gh(e){return e&&e.length?1===e.length?e[0]:(t=e,e=>{const n=t.length;let r=1,i=String(t[0](e));for(;r<n;++r)i+="|"+t[r](e);return i}):function(){return""};var t}function vh(e,t,n){return n||e+(t?"_"+t:"")}const yh=()=>{},bh={init:yh,add:yh,rem:yh,idx:0},xh={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||void 0===e.min)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||void 0===e.max)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},_h=Object.keys(xh).filter((e=>"__count__"!==e));function wh(e,t,n){return xh[e](n,t)}function Ah(e,t){return e.idx-t.idx}function kh(){this.valid=0,this.missing=0,this._ops.forEach((e=>null==e.aggregate_param?e.init(this):e.init(this,e.aggregate_param)))}function Eh(e,t){null!=e&&""!==e?e==e&&(++this.valid,this._ops.forEach((n=>n.add(this,e,t)))):++this.missing}function Th(e,t){null!=e&&""!==e?e==e&&(--this.valid,this._ops.forEach((n=>n.rem(this,e,t)))):--this.missing}function Mh(e){return this._out.forEach((t=>e[t.out]=t.value(this))),e}function Sh(e,t){const n=t||ps,r=function(e){const t={};e.forEach((e=>t[e.name]=e));const n=e=>{e.req&&e.req.forEach((e=>{t[e]||n(t[e]=xh[e]())}))};return e.forEach(n),Object.values(t).sort(Ah)}(e),i=e.slice().sort(Ah);function a(e){this._ops=r,this._out=i,this.cell=e,this.init()}return a.prototype.init=kh,a.prototype.add=Eh,a.prototype.rem=Th,a.prototype.set=Mh,a.prototype.get=n,a.fields=e.map((e=>e.out)),a}function Ch(e){this._key=e?ds(e):Af,this.reset()}[..._h,"__count__"].forEach((e=>{xh[e]=function(e,t){return(n,r)=>ll({name:e,aggregate_param:r,out:n||e},bh,t)}(e,xh[e])}));const Oh=Ch.prototype;function Rh(e){nd.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Oh.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},Oh.add=function(e){this._add.push(e)},Oh.rem=function(e){this._rem.push(e)},Oh.values=function(){if(this._get=null,0===this._rem.length)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,a=Array(r-i),o={};let s,l,c;for(s=0;s<i;++s)o[n(t[s])]=1;for(s=0,l=0;s<r;++s)o[n(c=e[s])]?o[n(c)]=0:a[l++]=c;return this._rem=[],this._add=a},Oh.distinct=function(e){const t=this.values(),n={};let r,i=t.length,a=0;for(;--i>=0;)r=e(t[i])+"",dl(n,r)||(n[r]=1,++a);return a},Oh.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=ul(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},Oh.argmin=function(e){return this.extent(e)[0]||{}},Oh.argmax=function(e){return this.extent(e)[1]||{}},Oh.min=function(e){const t=this.extent(e)[0];return null!=t?e(t):void 0},Oh.max=function(e){const t=this.extent(e)[1];return null!=t?e(t):void 0},Oh.quartile=function(e){return this._get===e&&this._q||(this._q=bd(this.values(),e),this._get=e),this._q},Oh.q1=function(e){return this.quartile(e)[0]},Oh.q2=function(e){return this.quartile(e)[1]},Oh.q3=function(e){return this.quartile(e)[2]},Oh.ci=function(e){return this._get===e&&this._ci||(this._ci=kd(this.values(),1e3,.05,e),this._get=e),this._ci},Oh.ci0=function(e){return this.ci(e)[0]},Oh.ci1=function(e){return this.ci(e)[1]},Rh.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:_h},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]},gl(Rh,nd,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,(e=>n.add(e)))):(n.value=n.value||n.init(e),t.visit(t.REM,(e=>n.rem(e))),t.visit(t.ADD,(e=>n.add(e)))),r.modifies(n._outputs),n._drop=!1!==e.drop,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter((()=>this.clean())),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map((()=>({}))),i=n.length;function a(e){let t,a,o,s;for(t in e)for(o=e[t].tuple,a=0;a<i;++a)r[a][s=o[n[a]]]=s}a(e._prev),a(t),function a(o,s,l){const c=n[l],u=r[l++];for(const n in u){const r=o?o+"|"+n:n;s[c]=u[n],l<i?a(r,s,l):t[r]||e.cell(r,s)}}("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(e){const n=Zs(os(e)),i=n.length;let a,o=0;for(;o<i;++o)r[a=n[o]]||(r[a]=1,t.push(a))}this._dims=Zs(e.groupby),this._dnames=this._dims.map((e=>{const t=as(e);return i(e),n.push(t),t})),this.cellkey=e.key?e.key:gh(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const a=e.fields||[null],o=e.ops||["count"],s=e.aggregate_params||[null],l=e.as||[],c=a.length,u={};let f,d,h,p,m,g,v;for(c!==o.length&&us("Unmatched number of fields and aggregate ops."),v=0;v<c;++v)f=a[v],d=o[v],h=s[v]||null,null==f&&"count"!==d&&us("Null aggregate field specified."),m=as(f),g=vh(d,m,l[v]),n.push(g),"count"!==d?(p=u[m],p||(i(f),p=u[m]=[],p.field=f,this._measures.push(p)),"count"!==d&&(this._countOnly=!1),p.push(wh(d,h,g))):this._counts.push(g);return this._measures=this._measures.map((e=>Sh(e,e.field))),Object.create(null)},cellkey:gh(),cell(e,t){let n=this.value[e];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const e=this._measures,t=e.length;n.agg=Array(t);for(let r=0;r<t;++r)n.agg[r]=new e[r](n)}return n.store&&(n.data=new Ch),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,a={};for(let t=0;t<i;++t)a[n[t]]=r[t](e);return t?Sf(t.tuple,a):Ef(a)},clean(){const e=this.value;for(const t in e)0===e[t].num&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let t=0,n=r.length;t<n;++t)r[t].add(r[t].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let t=0,n=r.length;t<n;++t)r[t].rem(r[t].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const n=e.agg;for(let e=0,r=n.length;e<r;++e)n[e].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,a=e.add,o=e.rem,s=e.mod;let l,c,u,f;if(r)for(c in r)l=r[c],i&&!l.num||o.push(l.tuple);for(u=0,f=this._alen;u<f;++u)a.push(this.celltuple(t[u])),t[u]=null;for(u=0,f=this._mlen;u<f;++u)l=n[u],(0===l.num&&i?o:s).push(this.celltuple(l)),n[u]=null;return this._alen=this._mlen=0,this._prev=null,e}});function Nh(e){nd.call(this,null,e)}function Lh(e,t,n){const r=e;let i=t||[],a=n||[],o={},s=0;return{add:e=>a.push(e),remove:e=>o[r(e)]=++s,size:()=>i.length,data:(e,t)=>(s&&(i=i.filter((e=>!o[r(e)])),o={},s=0),t&&e&&i.sort(e),a.length&&(i=e?Sl(e,i,a.sort(e)):i.concat(a),a=[]),i)}}function Dh(e){nd.call(this,[],e)}function Ph(e){If.call(this,null,Ih,e)}function Ih(e){return this.value&&!e.modified()?this.value:tl(e.fields,e.orders)}function Fh(e){nd.call(this,null,e)}function zh(e){nd.call(this,null,e)}Nh.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]},gl(Nh,nd,{transform(e,t){const n=!1!==e.interval,r=this._bins(e),i=r.start,a=r.step,o=e.as||["bin0","bin1"],s=o[0],l=o[1];let c;return c=e.modified()?(t=t.reflow(!0)).SOURCE:t.modified(os(e.field))?t.ADD_MOD:t.ADD,t.visit(c,n?e=>{const t=r(e);e[s]=t,e[l]=null==t?null:i+a*(1+(t-i)/a)}:e=>e[s]=r(e)),t.modifies(n?o:s)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=_d(e),r=n.step;let i,a,o=n.start,s=o+Math.ceil((n.stop-o)/r)*r;null!=(i=e.anchor)&&(a=i-(o+r*Math.floor((i-o)/r)),o+=a,s+=a);const l=function(e){let n=Ls(t(e));return null==n?null:n<o?-1/0:n>s?1/0:(n=Math.max(o,Math.min(n,s-r)),o+r*Math.floor(1e-14+(n-o)/r))};return l.start=o,l.stop=n.stop,l.step=r,this.value=is(l,os(t),e.name||"bin_"+as(t))}}),Dh.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},gl(Dh,nd,{transform(e,t){const n=t.fork(t.ALL),r=Lh(Af,this.value,n.materialize(n.ADD).add),i=e.sort,a=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(a),this.value=n.source=r.data(Cf(i),a),t.source&&t.source.root&&(this.value.root=t.source.root),n}}),gl(Ph,If),Fh.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]},gl(Fh,nd,{transform(e,t){const n=t=>n=>{for(var r,i=function(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(n)}(s(n),e.case,a)||[],l=0,c=i.length;l<c;++l)o.test(r=i[l])||t(r)},r=this._parameterCheck(e,t),i=this._counts,a=this._match,o=this._stop,s=e.field,l=e.as||["text","count"],c=n((e=>i[e]=1+(i[e]||0))),u=n((e=>i[e]-=1));return r?t.visit(t.SOURCE,c):(t.visit(t.ADD,c),t.visit(t.REM,u)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return!e.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),!e.modified("pattern")&&this._match||(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],a=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let s,l,c;for(s in n)l=r[s],c=n[s]||0,!l&&c?(r[s]=l=Ef({}),l[i]=s,l[a]=c,o.add.push(l)):0===c?(l&&o.rem.push(l),n[s]=null,r[s]=null):l[a]!==c&&(l[a]=c,o.mod.push(l));return o.modifies(t)}}),zh.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},gl(zh,nd,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],a=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let s=this.value;return o?(s&&(n.rem=s),s=t.materialize(t.SOURCE).source,n.add=this.value=function(e,t,n,r){for(var i,a,o=[],s={},l=e.length,c=0;c<l;++c)for(s[t]=a=e[c],i=0;i<l;++i)s[n]=e[i],r(s)&&(o.push(Ef(s)),(s={})[t]=a);return o}(s,i,a,e.filter||vs)):n.mod=s,n.source=this.value,n.modifies(r)}});const jh={kde:Id,mixture:$d,normal:Pd,lognormal:Ud,uniform:Gd},Bh="function";function Uh(e,t){const n=e[Bh];dl(jh,n)||us("Unknown distribution function: "+n);const r=jh[n]();for(const n in e)"field"===n?r.data((e.from||t()).map(e[n])):"distributions"===n?r[n](e[n].map((e=>Uh(e,t)))):typeof r[n]===Bh&&r[n](e[n]);return r}function $h(e){nd.call(this,null,e)}const qh=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Hh={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:qh},{name:"weights",type:"number",array:!0}]};function Vh(e,t){return e?e.map(((e,n)=>t[n]||as(e))):null}function Wh(e,t,n){const r=[],i=e=>e(l);let a,o,s,l,c,u;if(null==t)r.push(e.map(n));else for(a={},o=0,s=e.length;o<s;++o)l=e[o],c=t.map(i),u=a[c],u||(a[c]=u=[],u.dims=c,r.push(u)),u.push(n(l));return r}$h.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:qh.concat(Hh)},{name:"as",type:"string",array:!0,default:["value","density"]}]},gl($h,nd,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=Uh(e.distribution,function(e){return()=>e.materialize(e.SOURCE).source}(t)),i=e.steps||e.minsteps||25,a=e.steps||e.maxsteps||200;let o=e.method||"pdf";"pdf"!==o&&"cdf"!==o&&us("Invalid density method: "+o),e.extent||r.data||us("Missing density extent parameter."),o=r[o];const s=e.as||["value","density"],l=dh(o,e.extent||cl(r.data()),i,a).map((e=>{const t={};return t[s[0]]=e[0],t[s[1]]=e[1],Ef(t)}));this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function Gh(e){nd.call(this,null,e)}Gh.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:"bin"}]};function Yh(e){If.call(this,null,Xh,e),this.modified(!0)}function Xh(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:is((n=>t(n,e)),os(t),as(t))}function Kh(e){nd.call(this,[void 0,void 0],e)}function Zh(e,t){If.call(this,e),this.parent=t,this.count=0}function Jh(e){nd.call(this,{},e),this._keys=pl();const t=this._targets=[];t.active=0,t.forEach=e=>{for(let n=0,r=t.active;n<r;++n)e(t[n],n,t)}}function Qh(e){If.call(this,null,ep,e)}function ep(e){return this.value&&!e.modified()?this.value:Ts(e.name)?Zs(e.name).map((e=>ds(e))):ds(e.name,e.as)}function tp(e){nd.call(this,pl(),e)}function np(e){nd.call(this,[],e)}function rp(e){nd.call(this,[],e)}function ip(e){nd.call(this,null,e)}function ap(e){nd.call(this,[],e)}gl(Gh,nd,{transform(e,t){if(this.value&&!e.modified()&&!t.changed())return t;const n=t.materialize(t.SOURCE).source,r=Wh(t.source,e.groupby,ps),i=e.smooth||!1,a=e.field,o=e.step||((e,t)=>Rl(cl(e,t))/30)(n,a),s=Cf(((e,t)=>a(e)-a(t))),l=e.as||"bin",c=r.length;let u,f=1/0,d=-1/0,h=0;for(;h<c;++h){const e=r[h].sort(s);u=-1;for(const t of Ed(e,o,i,a))t<f&&(f=t),t>d&&(d=t),e[++u][l]=t}return this.value={start:f,stop:d,step:o},t.reflow(!0).modifies(l)}}),gl(Yh,If),Kh.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},gl(Kh,nd,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let a=n[0],o=n[1];if((i||null==a)&&(a=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,(e=>{const t=Ls(r(e));null!=t&&(t<a&&(a=t),t>o&&(o=t))})),!Number.isFinite(a)||!Number.isFinite(o)){let e=as(r);e&&(e=` for field "${e}"`),t.dataflow.warn(`Infinite extent${e}: [${a}, ${o}]`),a=o=void 0}this.value=[a,o]}}),gl(Zh,If,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}}),gl(Jh,nd,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let a,o,s=dl(i,e)&&i[e];return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(o=r||(o=this._group[e])&&o.tuple,a=n.dataflow,s=new Zh(n.fork(n.NO_SOURCE),this),a.add(s).connect(t(a,e,o)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(0===e[n].count){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const e=this._targets.filter((e=>e&&e.count>0));this.initTargets(e)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&null!=t[i];++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,a=this._keys,o=e.modified("key"),s=e=>this.subflow(e,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,(e=>{const t=Af(e),n=a.get(t);void 0!==n&&(a.delete(t),s(n).rem(e))})),t.visit(t.ADD,(e=>{const t=r(e);a.set(Af(e),t),s(t).add(e)})),o||t.modified(r.fields)?t.visit(t.MOD,(e=>{const t=Af(e),n=a.get(t),i=r(e);n===i?s(i).mod(e):(a.set(t,i),s(n).rem(e),s(i).add(e))})):t.changed(t.MOD)&&t.visit(t.MOD,(e=>{s(a.get(Af(e))).mod(e)})),o&&t.visit(t.REFLOW,(e=>{const t=Af(e),n=a.get(t),i=r(e);n!==i&&(a.set(t,i),s(n).rem(e),s(i).add(e))})),t.clean()?n.runAfter((()=>{this.clean(),a.clean()})):a.empty>n.cleanThreshold&&n.runAfter(a.clean),t}}),gl(Qh,If),tp.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},gl(tp,nd,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),a=i.add,o=i.rem,s=i.mod,l=e.expr;let c=!0;function u(t){const n=Af(t),i=l(t,e),u=r.get(n);i&&u?(r.delete(n),a.push(t)):i||u?c&&i&&!u&&s.push(t):(r.set(n,1),o.push(t))}return t.visit(t.REM,(e=>{const t=Af(e);r.has(t)?r.delete(t):o.push(e)})),t.visit(t.ADD,(t=>{l(t,e)?a.push(t):r.set(Af(t),1)})),t.visit(t.MOD,u),e.modified()&&(c=!1,t.visit(t.REFLOW,u)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}}),np.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},gl(np,nd,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=Vh(r,e.as||[]),a=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,(e=>{const t=r.map((t=>t(e))),s=t.reduce(((e,t)=>Math.max(e,t.length)),0);let l,c,u,f=0;for(;f<s;++f){for(c=Tf(e),l=0;l<o;++l)c[i[l]]=null==(u=t[l][f])?null:u;a&&(c[a]=f),n.add.push(c)}})),this.value=n.source=n.add,a&&n.modifies(a),n.modifies(i)}}),rp.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},gl(rp,nd,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(as),a=e.as||["key","value"],o=a[0],s=a[1],l=r.length;return n.rem=this.value,t.visit(t.SOURCE,(e=>{for(let t,a=0;a<l;++a)t=Tf(e),t[o]=i[a],t[s]=r[a](e),n.add.push(t)})),this.value=n.source=n.add,n.modifies(a)}}),ip.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},gl(ip,nd,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),a=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(a,(t=>t[r]=n(t,e)))}}),gl(ap,nd,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i,a,o,s=this.value,l=e.size-s.length;if(l>0){for(i=[];--l>=0;)i.push(o=Ef(r(e))),s.push(o);n.add=n.add.length?n.materialize(n.ADD).add.concat(i):i}else a=s.slice(0,-l),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,s=s.slice(-l);return n.source=this.value=s,n}});const op={value:"value",median:gd,mean:ph.A,min:ld.A,max:sd.A},sp=[];function lp(e){nd.call(this,[],e)}function cp(e){Rh.call(this,e)}function up(e){nd.call(this,null,e)}function fp(e){If.call(this,null,dp,e)}function dp(e){return this.value&&!e.modified()?this.value:kl(e.fields,e.flat)}function hp(e){nd.call(this,[],e),this._pending=null}function pp(e,t,n){n.forEach(Ef);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function mp(e){nd.call(this,{},e)}function gp(e){If.call(this,null,vp,e)}function vp(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r,i,a=1/0,o=-1/0;for(r=0;r<n;++r)i=t[r],i[0]<a&&(a=i[0]),i[1]>o&&(o=i[1]);return[a,o]}function yp(e){If.call(this,null,bp,e)}function bp(e){return this.value&&!e.modified()?this.value:e.values.reduce(((e,t)=>e.concat(t)),[])}function xp(e){nd.call(this,null,e)}function _p(e){Rh.call(this,e)}function wp(e){Jh.call(this,e)}function Ap(e){nd.call(this,null,e)}function kp(e){nd.call(this,null,e)}function Ep(e){nd.call(this,null,e)}lp.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},gl(lp,nd,{transform(e,t){var n,r,i,a,o,s,l,c,u,f,d=t.fork(t.ALL),h=function(e){var t,n=e.method||op.value;if(null!=op[n])return n===op.value?(t=void 0!==e.value?e.value:0,()=>t):op[n];us("Unrecognized imputation method: "+n)}(e),p=function(e){const t=e.field;return e=>e?t(e):NaN}(e),m=as(e.field),g=as(e.key),v=(e.groupby||[]).map(as),y=function(e,t,n,r){var i,a,o,s,l,c,u,f,d=e=>e(f),h=[],p=r?r.slice():[],m={},g={};for(p.forEach(((e,t)=>m[e]=t+1)),s=0,u=e.length;s<u;++s)c=n(f=e[s]),l=m[c]||(m[c]=p.push(c)),(o=g[a=(i=t?t.map(d):sp)+""])||(o=g[a]=[],h.push(o),o.values=i),o[l-1]=f;return h.domain=p,h}(t.source,e.groupby,e.key,e.keyvals),b=[],x=this.value,_=y.domain.length;for(o=0,c=y.length;o<c;++o)for(i=(n=y[o]).values,r=NaN,l=0;l<_;++l)if(null==n[l]){for(a=y.domain[l],f={_impute:!0},s=0,u=i.length;s<u;++s)f[v[s]]=i[s];f[g]=a,f[m]=Number.isNaN(r)?r=h(n,p):r,b.push(Ef(f))}return b.length&&(d.add=d.materialize(d.ADD).add.concat(b)),x.length&&(d.rem=d.materialize(d.REM).rem.concat(x)),this.value=b,d}}),cp.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:_h},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]},gl(cp,Rh,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,(e=>n.add(e)))):(i=n.value=n.value||this.init(e),t.visit(t.REM,(e=>n.rem(e))),t.visit(t.ADD,(e=>n.add(e)))),n.changes(),t.visit(t.SOURCE,(e=>{ll(e,i[n.cellkey(e)].tuple)})),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}}),up.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},gl(up,nd,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Wh(r,e.groupby,e.field),a=(e.groupby||[]).map(as),o=e.bandwidth,s=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],c=[];let u=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;"pdf"!==s&&"cdf"!==s&&us("Invalid density method: "+s),"shared"===e.resolve&&(u||(u=cl(r,e.field)),f=d=e.steps||d),i.forEach((t=>{const n=Id(t,o)[s],r=e.counts?t.length:1;dh(n,u||cl(t),f,d).forEach((e=>{const n={};for(let e=0;e<a.length;++e)n[a[e]]=t.dims[e];n[l[0]]=e[0],n[l[1]]=e[1]*r,c.push(Ef(n))}))})),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}}),gl(fp,If),gl(hp,nd,{transform(e,t){const n=t.dataflow;if(this._pending)return pp(this,t,this._pending);if(function(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}(e))return t.StopPropagation;if(e.values)return pp(this,t,n.parse(e.values,e.format));if(e.async){const t=n.request(e.url,e.format).then((e=>(this._pending=Zs(e.data),e=>e.touch(this))));return{async:t}}return n.request(e.url,e.format).then((e=>pp(this,t,Zs(e.data))))}}),mp.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},gl(mp,nd,{transform(e,t){const n=e.fields,r=e.index,i=e.values,a=null==e.default?null:e.default,o=e.modified(),s=n.length;let l,c,u,f=o?t.SOURCE:t.ADD,d=t,h=e.as;return i?(c=i.length,s>1&&!h&&us('Multi-field lookup requires explicit "as" parameter.'),h&&h.length!==s*c&&us('The "as" parameter has too few output field names.'),h=h||i.map(as),l=function(e){for(var t,o,l=0,u=0;l<s;++l)if(null==(o=r.get(n[l](e))))for(t=0;t<c;++t,++u)e[h[u]]=a;else for(t=0;t<c;++t,++u)e[h[u]]=i[t](o)}):(h||us("Missing output field names."),l=function(e){for(var t,i=0;i<s;++i)t=r.get(n[i](e)),e[h[i]]=null==t?a:t}),o?d=t.reflow(!0):(u=n.some((e=>t.modified(e.fields))),f|=u?t.MOD:0),t.visit(f,l),d.modifies(h)}}),gl(gp,If),gl(yp,If),gl(xp,nd,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),_p.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:_h,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]},gl(_p,Rh,{_transform:Rh.prototype.transform,transform(e,t){return this._transform(function(e,t){const n=e.field,r=e.value,i=("count"===e.op?"__count__":e.op)||"sum",a=os(n).concat(os(r)),o=function(e,t,n){const r={},i=[];return n.visit(n.SOURCE,(t=>{const n=e(t);r[n]||(r[n]=1,i.push(n))})),i.sort(nl),t?i.slice(0,t):i}(n,e.limit||0,t);t.changed()&&e.set("__pivot__",null,null,!0);return{key:e.key,groupby:e.groupby,ops:o.map((()=>i)),fields:o.map((e=>function(e,t,n,r){return is((r=>t(r)===e?n(r):NaN),r,e+"")}(e,n,r,a))),as:o.map((e=>e+"")),modified:e.modified.bind(e)}}(e,t),t)}}),gl(wp,Jh,{transform(e,t){const n=e.subflow,r=e.field,i=e=>this.subflow(Af(e),n,t,e);return(e.modified("field")||r&&t.modified(os(r)))&&us("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,(e=>{const t=i(e);r(e).forEach((e=>t.mod(e)))})),t.visit(t.ADD,(e=>{const t=i(e);r(e).forEach((e=>t.add(Ef(e))))})),t.visit(t.REM,(e=>{const t=i(e);r(e).forEach((e=>t.rem(e)))}))):(t.visit(t.MOD,(e=>i(e).mod(e))),t.visit(t.ADD,(e=>i(e).add(e))),t.visit(t.REM,(e=>i(e).rem(e)))),t.clean()&&t.runAfter((()=>this.clean())),t}}),Ap.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},gl(Ap,nd,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=Vh(e.fields,e.as||[]),a=r?(e,t)=>function(e,t,n,r){for(let i=0,a=n.length;i<a;++i)t[r[i]]=n[i](e);return t}(e,t,r,i):Mf;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,(e=>{const t=Af(e);n.rem.push(o[t]),o[t]=null})),t.visit(t.ADD,(e=>{const t=a(e,Ef({}));o[Af(e)]=t,n.add.push(t)})),t.visit(t.MOD,(e=>{n.mod.push(a(e,o[Af(e)]))})),n}}),gl(kp,nd,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}}),Ep.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};function Tp(e){nd.call(this,null,e)}function Mp(e){nd.call(this,[],e),this.count=0}function Sp(e){nd.call(this,null,e)}function Cp(e){nd.call(this,null,e),this.modified(!0)}function Op(e){nd.call(this,null,e)}gl(Ep,nd,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=Wh(t.materialize(t.SOURCE).source,e.groupby,e.field),a=(e.groupby||[]).map(as),o=[],s=e.step||.01,l=e.probs||mh(s/2,1-1e-14,s),c=l.length;return i.forEach((e=>{const t=yd(e,l);for(let n=0;n<c;++n){const i={};for(let t=0;t<a.length;++t)i[a[t]]=e.dims[t];i[r[0]]=l[n],i[r[1]]=t[n],o.push(Ef(i))}})),this.value&&(n.rem=this.value),this.value=n.add=n.source=o,n}}),gl(Tp,nd,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,(e=>{const t=Af(e);n.rem.push(r[t]),r[t]=null})),t.visit(t.ADD,(e=>{const t=Tf(e);r[Af(e)]=t,n.add.push(t)})),t.visit(t.MOD,(e=>{const t=r[Af(e)];for(const r in e)t[r]=e[r],n.modifies(r);n.mod.push(t)}))),n}}),Mp.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},gl(Mp,nd,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,a=this.value.reduce(((e,t)=>(e[Af(t)]=1,e)),{});let o=this.value,s=this.count,l=0;function c(e){let t,r;o.length<i?o.push(e):(r=~~((s+1)*wd()),r<o.length&&r>=l&&(t=o[r],a[Af(t)]&&n.rem.push(t),o[r]=e)),++s}if(t.rem.length&&(t.visit(t.REM,(e=>{const t=Af(e);a[t]&&(a[t]=-1,n.rem.push(e)),--s})),o=o.filter((e=>-1!==a[Af(e)]))),(t.rem.length||r)&&o.length<i&&t.source&&(l=s=o.length,t.visit(t.SOURCE,(e=>{a[Af(e)]||c(e)})),l=-1),r&&o.length>i){const e=o.length-i;for(let t=0;t<e;++t)a[Af(o[t])]=-1,n.rem.push(o[t]);o=o.slice(e)}return t.mod.length&&t.visit(t.MOD,(e=>{a[Af(e)]&&n.mod.push(e)})),t.add.length&&t.visit(t.ADD,c),(t.add.length||l<0)&&(n.add=o.filter((e=>!a[Af(e)]))),this.count=s,this.value=n.source=o,n}}),Sp.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},gl(Sp,nd,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=mh(e.start,e.stop,e.step||1).map((e=>{const t={};return t[r]=e,Ef(t)})),n.add=t.add.concat(this.value),n}}),gl(Cp,nd,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});const Rp=["unit0","unit1"];function Np(e){nd.call(this,pl(),e)}function Lp(e){nd.call(this,null,e)}Op.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:Sc,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:Rp}]},gl(Op,nd,{transform(e,t){const n=e.field,r=!1!==e.interval,i="utc"===e.timezone,a=this._floor(e,t),o=(i?iu:ru)(a.unit).offset,s=e.as||Rp,l=s[0],c=s[1],u=a.step;let f=a.start||1/0,d=a.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(os(n)))&&(h=(t=t.reflow(!0)).SOURCE,f=1/0,d=-1/0),t.visit(h,(e=>{const t=n(e);let i,s;null==t?(e[l]=null,r&&(e[c]=null)):(e[l]=i=s=a(t),r&&(e[c]=s=o(i,u)),i<f&&(f=i),s>d&&(d=s))})),a.start=f,a.stop=d,t.modifies(r?s:l)},_floor(e,t){const n="utc"===e.timezone,{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:Eu({extent:e.extent||cl(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),a=Oc(r),o=this.value||{},s=(n?eu:Zc)(a,i);return s.unit=Ns(a),s.units=a,s.step=i,s.start=o.start,s.stop=o.stop,this.value=s}}),gl(Np,nd,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,a=e=>i.set(r(e),e);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,a)):t.changed()?(t.visit(t.REM,(e=>i.delete(r(e)))),t.visit(t.ADD,a)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}}),gl(Lp,nd,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Cf(e.sort)):t.source).map(e.field))}});const Dp={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=Dp.rank(),t=e.next;return{init:e.init,next:e=>(t(e)-1)/(e.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){(t=+t)>0||us("ntile num must be greater than zero.");const n=Dp.cume_dist(),r=n.next;return{init:n.init,next:e=>Math.ceil(t*r(e))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return(t=+t)>0||us("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return null!=r?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=function(e,t,n){for(let r=t.length;n<r;++n){if(null!=e(t[n]))return n}return-1}(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};const Pp=Object.keys(Dp);function Ip(e){const t=Zs(e.ops),n=Zs(e.fields),r=Zs(e.params),i=Zs(e.aggregate_params),a=Zs(e.as),o=this.outputs=[],s=this.windows=[],l={},c={},u=[],f=[];let d=!0;function h(e){Zs(os(e)).forEach((e=>l[e]=1))}h(e.sort),t.forEach(((e,t)=>{const l=n[t],p=r[t],m=i[t]||null,g=as(l),v=vh(e,g,a[t]);if(h(l),o.push(v),dl(Dp,e))s.push(function(e,t,n,r){const i=Dp[e](t,n);return{init:i.init||ms,update:function(e,t){t[r]=i.next(e)}}}(e,l,p,v));else{if(null==l&&"count"!==e&&us("Null aggregate field specified."),"count"===e)return void u.push(v);d=!1;let t=c[g];t||(t=c[g]=[],t.field=l,f.push(t)),t.push(wh(e,m,v))}})),(u.length||f.length)&&(this.cell=function(e,t,n){e=e.map((e=>Sh(e,e.field)));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,a=r.agg=Array(i),o=0;o<i;++o)a[o]=new e[o](r);if(r.store)var s=r.data=new Ch;return r.add=function(e){if(r.num+=1,!n){s&&s.add(e);for(let t=0;t<i;++t)a[t].add(a[t].get(e),e)}},r.rem=function(e){if(r.num-=1,!n){s&&s.rem(e);for(let t=0;t<i;++t)a[t].rem(a[t].get(e),e)}},r.set=function(e){let i,o;for(s&&s.values(),i=0,o=t.length;i<o;++i)e[t[i]]=r.num;if(!n)for(i=0,o=a.length;i<o;++i)a[i].set(e)},r.init=function(){r.num=0,s&&s.reset();for(let e=0;e<i;++e)a[e].init()},r}(f,u,d)),this.inputs=Object.keys(l)}const Fp=Ip.prototype;function zp(e){nd.call(this,{},e),this._mlen=0,this._mods=[]}function jp(e,t,n,r){const i=r.sort,a=i&&!r.ignorePeers,o=r.frame||[null,0],s=e.data(n),l=s.length,c=a?(0,gc.A)(i):null,u={i0:0,i1:0,p0:0,p1:0,index:0,data:s,compare:i||ol(-1)};t.init();for(let e=0;e<l;++e)Bp(u,o,e,l),a&&Up(u,c),t.update(u,s[e])}function Bp(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=null==t[0]?0:Math.max(0,n-Math.abs(t[0])),e.i1=null==t[1]?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function Up(e,t){const n=e.i0,r=e.i1-1,i=e.compare,a=e.data,o=a.length-1;n>0&&!i(a[n],a[n-1])&&(e.i0=t.left(a,a[n])),r<o&&!i(a[r],a[r+1])&&(e.i1=t.right(a,a[r]))}function $p(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function qp(e){this._context=e}function Hp(){}function Vp(e){this._context=e}function Wp(e){this._context=e}function Gp(e,t){this._basis=new qp(e),this._beta=t}Fp.init=function(){this.windows.forEach((e=>e.init())),this.cell&&this.cell.init()},Fp.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,a=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<a;++o)r[o].update(e,t)},zp.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Pp.concat(_h)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]},gl(zp,nd,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=Cf(e.sort),i=gh(e.groupby),a=e=>this.group(i(e));let o=this.state;o&&!n||(o=this.state=new Ip(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,(e=>a(e).add(e)))):(t.visit(t.REM,(e=>a(e).remove(e))),t.visit(t.ADD,(e=>a(e).add(e))));for(let t=0,n=this._mlen;t<n;++t)jp(this._mods[t],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=Lh(Af),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}}),qp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$p(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$p(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Vp.prototype={areaStart:Hp,areaEnd:Hp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:$p(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Wp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:$p(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Gp.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,i=e[0],a=t[0],o=e[n]-i,s=t[n]-a,l=-1;++l<=n;)r=l/n,this._basis.point(this._beta*e[l]+(1-this._beta)*(i+r*o),this._beta*t[l]+(1-this._beta)*(a+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Yp=function e(t){function n(e){return 1===t?new qp(e):new Gp(e,t)}return n.beta=function(t){return e(+t)},n}(.85);function Xp(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Kp(e,t){this._context=e,this._k=(1-t)/6}Kp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Xp(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Xp(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Zp=function e(t){function n(e){return new Kp(e,t)}return n.tension=function(t){return e(+t)},n}(0);function Jp(e,t){this._context=e,this._k=(1-t)/6}Jp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Xp(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Qp=function e(t){function n(e){return new Jp(e,t)}return n.tension=function(t){return e(+t)},n}(0);function em(e,t){this._context=e,this._k=(1-t)/6}em.prototype={areaStart:Hp,areaEnd:Hp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Xp(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const tm=function e(t){function n(e){return new em(e,t)}return n.tension=function(t){return e(+t)},n}(0);var nm=Math.abs,rm=Math.atan2,im=Math.cos,am=Math.max,om=Math.min,sm=Math.sin,lm=Math.sqrt,cm=1e-12,um=Math.PI,fm=um/2,dm=2*um;function hm(e){return e>=1?fm:e<=-1?-fm:Math.asin(e)}function pm(e,t,n){var r=e._x1,i=e._y1,a=e._x2,o=e._y2;if(e._l01_a>cm){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>cm){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*c+e._x1*e._l23_2a-t*e._l12_2a)/u,o=(o*c+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(r,i,a,o,e._x2,e._y2)}function mm(e,t){this._context=e,this._alpha=t}mm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:pm(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const gm=function e(t){function n(e){return t?new mm(e,t):new Kp(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function vm(e,t){this._context=e,this._alpha=t}vm.prototype={areaStart:Hp,areaEnd:Hp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:pm(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ym=function e(t){function n(e){return t?new vm(e,t):new em(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function bm(e,t){this._context=e,this._alpha=t}bm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:pm(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const xm=function e(t){function n(e){return t?new bm(e,t):new Jp(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function _m(e){this._context=e}function wm(e){return new _m(e)}function Am(e){this._context=e}function km(e){return e<0?-1:1}function Em(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(km(a)+km(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function Tm(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Mm(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,s=(a-r)/3;e._context.bezierCurveTo(r+s,i+s*t,a-s,o-s*n,a,o)}function Sm(e){this._context=e}function Cm(e){this._context=new Om(e)}function Om(e){this._context=e}function Rm(e){this._context=e}function Nm(e){var t,n,r=e.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/a[t-1],a[t]-=n,o[t]-=n*o[t-1];for(i[r-1]=o[r-1]/a[r-1],t=r-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function Lm(e,t){this._context=e,this._t=t}_m.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},Am.prototype={areaStart:Hp,areaEnd:Hp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},Sm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Mm(this,this._t0,Tm(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Mm(this,Tm(this,n=Em(this,e,t)),n);break;default:Mm(this,this._t0,n=Em(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(Cm.prototype=Object.create(Sm.prototype)).point=function(e,t){Sm.prototype.point.call(this,t,e)},Om.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}},Rm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=Nm(e),i=Nm(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},Lm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var Dm=n(76003),Pm=n(23837);function Im(e){return e.innerRadius}function Fm(e){return e.outerRadius}function zm(e){return e.startAngle}function jm(e){return e.endAngle}function Bm(e){return e&&e.padAngle}function Um(e,t,n,r,i,a,o){var s=e-n,l=t-r,c=(o?a:-a)/lm(s*s+l*l),u=c*l,f=-c*s,d=e+u,h=t+f,p=n+u,m=r+f,g=(d+p)/2,v=(h+m)/2,y=p-d,b=m-h,x=y*y+b*b,_=i-a,w=d*m-p*h,A=(b<0?-1:1)*lm(am(0,_*_*x-w*w)),k=(w*b-y*A)/x,E=(-w*y-b*A)/x,T=(w*b+y*A)/x,M=(-w*y+b*A)/x,S=k-g,C=E-v,O=T-g,R=M-v;return S*S+C*C>O*O+R*R&&(k=T,E=M),{cx:k,cy:E,x01:-u,y01:-f,x11:k*(i/_-1),y11:E*(i/_-1)}}var $m=n(95659);function qm(){var e=$m.x,t=$m.y,n=(0,Pm.A)(!0),r=null,i=wm,a=null;function o(o){var s,l,c,u=o.length,f=!1;for(null==r&&(a=i(c=(0,Dm.Ae)())),s=0;s<=u;++s)!(s<u&&n(l=o[s],s,o))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+e(l,s,o),+t(l,s,o));if(c)return a=null,c+""||null}return o.x=function(t){return arguments.length?(e="function"==typeof t?t:(0,Pm.A)(+t),o):e},o.y=function(e){return arguments.length?(t="function"==typeof e?e:(0,Pm.A)(+e),o):t},o.defined=function(e){return arguments.length?(n="function"==typeof e?e:(0,Pm.A)(!!e),o):n},o.curve=function(e){return arguments.length?(i=e,null!=r&&(a=i(r)),o):i},o.context=function(e){return arguments.length?(null==e?r=a=null:a=i(r=e),o):r},o}function Hm(){var e=$m.x,t=null,n=(0,Pm.A)(0),r=$m.y,i=(0,Pm.A)(!0),a=null,o=wm,s=null;function l(l){var c,u,f,d,h,p=l.length,m=!1,g=new Array(p),v=new Array(p);for(null==a&&(s=o(h=(0,Dm.Ae)())),c=0;c<=p;++c){if(!(c<p&&i(d=l[c],c,l))===m)if(m=!m)u=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=c-1;f>=u;--f)s.point(g[f],v[f]);s.lineEnd(),s.areaEnd()}m&&(g[c]=+e(d,c,l),v[c]=+n(d,c,l),s.point(t?+t(d,c,l):g[c],r?+r(d,c,l):v[c]))}if(h)return s=null,h+""||null}function c(){return qm().defined(i).curve(o).context(a)}return l.x=function(n){return arguments.length?(e="function"==typeof n?n:(0,Pm.A)(+n),t=null,l):e},l.x0=function(t){return arguments.length?(e="function"==typeof t?t:(0,Pm.A)(+t),l):e},l.x1=function(e){return arguments.length?(t=null==e?null:"function"==typeof e?e:(0,Pm.A)(+e),l):t},l.y=function(e){return arguments.length?(n="function"==typeof e?e:(0,Pm.A)(+e),r=null,l):n},l.y0=function(e){return arguments.length?(n="function"==typeof e?e:(0,Pm.A)(+e),l):n},l.y1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:(0,Pm.A)(+e),l):r},l.lineX0=l.lineY0=function(){return c().x(e).y(n)},l.lineY1=function(){return c().x(e).y(r)},l.lineX1=function(){return c().x(t).y(n)},l.defined=function(e){return arguments.length?(i="function"==typeof e?e:(0,Pm.A)(!!e),l):i},l.curve=function(e){return arguments.length?(o=e,null!=a&&(s=o(a)),l):o},l.context=function(e){return arguments.length?(null==e?a=s=null:s=o(a=e),l):a},l}const Vm={draw:function(e,t){var n=Math.sqrt(t/um);e.moveTo(n,0),e.arc(0,0,n,0,dm)}};Math.sqrt(1/3);var Wm=Math.sin(um/10)/Math.sin(7*um/10);Math.sin(dm/10),Math.cos(dm/10);Math.sqrt(3);Math.sqrt(3),Math.sqrt(12);function Gm(e,t){if("undefined"!=typeof document&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const Ym=()=>"undefined"!=typeof Image?Image:null,Xm=(0,gc.A)(od.A),Km=Xm.right,Zm=Xm.left,Jm=((0,gc.A)(hd).center,Km);var Qm=n(167),eg=n(93909),tg=n(91434);function ng(e){return+e}var rg=[0,1];function ig(e){return e}function ag(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function og(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=ag(i,r),a=n(o,a)):(r=ag(r,i),a=n(a,o)),function(e){return a(r(e))}}function sg(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=ag(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(t){var n=Jm(e,t,1,r)-1;return a[n](i[n](t))}}function lg(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function cg(){var e,t,n,r,i,a,o=rg,s=rg,l=Qm.A,c=ig;function u(){var e=Math.min(o.length,s.length);return c!==ig&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(o[0],o[e-1])),r=e>2?sg:og,i=a=null,f}function f(t){return null==t||isNaN(t=+t)?n:(i||(i=r(o.map(e),s,l)))(e(c(t)))}return f.invert=function(n){return c(t((a||(a=r(s,o.map(e),eg.A)))(n)))},f.domain=function(e){return arguments.length?(o=Array.from(e,ng),u()):o.slice()},f.range=function(e){return arguments.length?(s=Array.from(e),u()):s.slice()},f.rangeRound=function(e){return s=Array.from(e),l=tg.A,u()},f.clamp=function(e){return arguments.length?(c=!!e||ig,u()):c!==ig},f.interpolate=function(e){return arguments.length?(l=e,u()):l},f.unknown=function(e){return arguments.length?(n=e,f):n},function(n,r){return e=n,t=r,u()}}function ug(){return cg()(ig,ig)}function fg(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function dg(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}function hg(e,t,n,r){var i,a=(0,ec.sG)(e,t,n);switch((r=(0,tc.A)(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=rc(a,o))||(r.precision=i),(0,oc.s)(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=ic(a,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=ac(a))||(r.precision=i-2*("%"===r.type))}return(0,oc.GP)(r)}function pg(e){var t=e.domain;return e.ticks=function(e){var n=t();return(0,ec.Ay)(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return hg(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,a=t(),o=0,s=a.length-1,l=a[o],c=a[s],u=10;for(c<l&&(i=l,l=c,c=i,i=o,o=s,s=i);u-- >0;){if((i=(0,ec.lq)(l,c,n))===r)return a[o]=l,a[s]=c,t(a);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}r=i}return e},e}function mg(e,t){var n,r=0,i=(e=e.slice()).length-1,a=e[r],o=e[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),e[r]=t.floor(a),e[i]=t.ceil(o),e}function gg(e){return Math.log(e)}function vg(e){return Math.exp(e)}function yg(e){return-Math.log(-e)}function bg(e){return-Math.exp(-e)}function xg(e){return isFinite(e)?+("1e"+e):e<0?0:e}function _g(e){return(t,n)=>-e(-t,n)}function wg(e){const t=e(gg,vg),n=t.domain;let r,i,a=10;function o(){return r=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(a),i=function(e){return 10===e?xg:e===Math.E?Math.exp:t=>Math.pow(e,t)}(a),n()[0]<0?(r=_g(r),i=_g(i),e(yg,bg)):e(gg,vg),t}return t.base=function(e){return arguments.length?(a=+e,o()):a},t.domain=function(e){return arguments.length?(n(e),o()):n()},t.ticks=e=>{const t=n();let o=t[0],s=t[t.length-1];const l=s<o;l&&([o,s]=[s,o]);let c,u,f=r(o),d=r(s);const h=null==e?10:+e;let p=[];if(!(a%1)&&d-f<h){if(f=Math.floor(f),d=Math.ceil(d),o>0){for(;f<=d;++f)for(c=1;c<a;++c)if(u=f<0?c/i(-f):c*i(f),!(u<o)){if(u>s)break;p.push(u)}}else for(;f<=d;++f)for(c=a-1;c>=1;--c)if(u=f>0?c/i(-f):c*i(f),!(u<o)){if(u>s)break;p.push(u)}2*p.length<h&&(p=(0,ec.Ay)(o,s,h))}else p=(0,ec.Ay)(f,d,Math.min(d-f,h)).map(i);return l?p.reverse():p},t.tickFormat=(e,n)=>{if(null==e&&(e=10),null==n&&(n=10===a?"s":","),"function"!=typeof n&&(a%1||null!=(n=(0,tc.A)(n)).precision||(n.trim=!0),n=(0,oc.GP)(n)),e===1/0)return n;const o=Math.max(1,a*e/t.ticks().length);return e=>{let t=e/i(Math.round(r(e)));return t*a<a-.5&&(t*=a),t<=o?n(e):""}},t.nice=()=>n(mg(n(),{floor:e=>i(Math.floor(r(e))),ceil:e=>i(Math.ceil(r(e)))})),t}function Ag(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function kg(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Eg(e){return e<0?-e*e:e*e}function Tg(e){var t=e(ig,ig),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(ig,ig):.5===n?e(kg,Eg):e(Ag(n),Ag(1/n)):n},pg(t)}function Mg(){var e=Tg(cg());return e.copy=function(){return lg(e,Mg()).exponent(e.exponent())},fg.apply(e,arguments),e}function Sg(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Cg(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Og(e){var t=1,n=e(Sg(t),Cg(t));return n.constant=function(n){return arguments.length?e(Sg(t=+n),Cg(t)):t},pg(n)}var Rg=n(46734);function Ng(e){return new Date(e)}function Lg(e){return e instanceof Date?+e:+new Date(+e)}function Dg(e,t,n,r,i,a,o,s,l,c){var u=ug(),f=u.invert,d=u.domain,h=c(".%L"),p=c(":%S"),m=c("%I:%M"),g=c("%I %p"),v=c("%a %d"),y=c("%b %d"),b=c("%B"),x=c("%Y");function _(e){return(l(e)<e?h:s(e)<e?p:o(e)<e?m:a(e)<e?g:r(e)<e?i(e)<e?v:y:n(e)<e?b:x)(e)}return u.invert=function(e){return new Date(f(e))},u.domain=function(e){return arguments.length?d(Array.from(e,Lg)):d().map(Ng)},u.ticks=function(t){var n=d();return e(n[0],n[n.length-1],null==t?10:t)},u.tickFormat=function(e,t){return null==t?_:c(t)},u.nice=function(e){var n=d();return e&&"function"==typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?d(mg(n,e)):u},u.copy=function(){return lg(u,Dg(e,t,n,r,i,a,o,s,l,c))},u}function Pg(){var e,t,n,r,i,a=0,o=1,s=ig,l=!1;function c(t){return null==t||isNaN(t=+t)?i:s(0===n?.5:(t=(r(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function u(e){return function(t){var n,r;return arguments.length?([n,r]=t,s=e(n,r),c):[s(0),s(1)]}}return c.domain=function(i){return arguments.length?([a,o]=i,e=r(a=+a),t=r(o=+o),n=e===t?0:1/(t-e),c):[a,o]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(s=e,c):s},c.range=u(Qm.A),c.rangeRound=u(tg.A),c.unknown=function(e){return arguments.length?(i=e,c):i},function(i){return r=i,e=i(a),t=i(o),n=e===t?0:1/(t-e),c}}function Ig(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Fg(){var e=pg(Pg()(ig));return e.copy=function(){return Ig(e,Fg())},dg.apply(e,arguments)}function zg(){var e=Tg(Pg());return e.copy=function(){return Ig(e,zg()).exponent(e.exponent())},dg.apply(e,arguments)}var jg=n(16480);function Bg(){var e,t,n,r,i,a,o,s=0,l=.5,c=1,u=1,f=ig,d=!1;function h(e){return isNaN(e=+e)?o:(e=.5+((e=+a(e))-t)*(u*e<u*t?r:i),f(d?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var n,r,i;return arguments.length?([n,r,i]=t,f=(0,jg.A)(e,[n,r,i]),h):[f(0),f(.5),f(1)]}}return h.domain=function(o){return arguments.length?([s,l,c]=o,e=a(s=+s),t=a(l=+l),n=a(c=+c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),u=t<e?-1:1,h):[s,l,c]},h.clamp=function(e){return arguments.length?(d=!!e,h):d},h.interpolator=function(e){return arguments.length?(f=e,h):f},h.range=p(Qm.A),h.rangeRound=p(tg.A),h.unknown=function(e){return arguments.length?(o=e,h):o},function(o){return a=o,e=o(s),t=o(l),n=o(c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),u=t<e?-1:1,h}}function Ug(){var e=Tg(Bg());return e.copy=function(){return Ig(e,Ug()).exponent(e.exponent())},dg.apply(e,arguments)}class $g extends Map{constructor(e,t=Gg){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[t,n]of e)this.set(t,n)}get(e){return super.get(Hg(this,e))}has(e){return super.has(Hg(this,e))}set(e,t){return super.set(Vg(this,e),t)}delete(e){return super.delete(Wg(this,e))}}class qg extends Set{constructor(e,t=Gg){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const t of e)this.add(t)}has(e){return super.has(Hg(this,e))}add(e){return super.add(Vg(this,e))}delete(e){return super.delete(Wg(this,e))}}function Hg({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Vg({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Wg({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Gg(e){return null!==e&&"object"==typeof e?e.valueOf():e}const Yg=Symbol("implicit");function Xg(){var e=new $g,t=[],n=[],r=Yg;function i(i){let a=e.get(i);if(void 0===a){if(r!==Yg)return r;e.set(i,a=t.push(i)-1)}return n[a%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new $g;for(const r of n)e.has(r)||e.set(r,t.push(r)-1);return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return Xg(t,n).unknown(r)},fg.apply(i,arguments),i}var Kg=n(72767);function Zg(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}const Jg=Zg("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Qg=Zg("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),ev=Zg("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),tv=Zg("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),nv=Zg("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),rv=Zg("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),iv=Zg("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),av=Zg("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),ov=Zg("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),sv=Zg("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function lv(e,t,n){const r=e-t+2*n;return e?r>0?r:1:0}const cv="linear",uv="log",fv="pow",dv="sqrt",hv="symlog",pv="time",mv="utc",gv="sequential",vv="diverging",yv="quantile",bv="quantize",xv="threshold",_v="ordinal",wv="point",Av="band",kv="bin-ordinal",Ev="continuous",Tv="discrete",Mv="discretizing",Sv="interpolating",Cv="temporal";function Ov(){const e=Xg().unknown(void 0),t=e.domain,n=e.range;let r,i,a=[0,1],o=!1,s=0,l=0,c=.5;function u(){const e=t().length,u=a[1]<a[0],f=a[1-u],d=lv(e,s,l);let h=a[u-0];r=(f-h)/(d||1),o&&(r=Math.floor(r)),h+=(f-h-r*(e-s))*c,i=r*(1-s),o&&(h=Math.round(h),i=Math.round(i));const p=mh(e).map((e=>h+r*e));return n(u?p.reverse():p)}return delete e.unknown,e.domain=function(e){return arguments.length?(t(e),u()):t()},e.range=function(e){return arguments.length?(a=[+e[0],+e[1]],u()):a.slice()},e.rangeRound=function(e){return a=[+e[0],+e[1]],o=!0,u()},e.bandwidth=function(){return i},e.step=function(){return r},e.round=function(e){return arguments.length?(o=!!e,u()):o},e.padding=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),s=l,u()):s},e.paddingInner=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),u()):s},e.paddingOuter=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),u()):l},e.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),u()):c},e.invertRange=function(e){if(null==e[0]||null==e[1])return;const r=a[1]<a[0],o=r?n().reverse():n(),s=o.length-1;let l,c,u,f=+e[0],d=+e[1];return f!=f||d!=d||(d<f&&(u=f,f=d,d=u),d<o[0]||f>a[1-r])?void 0:(l=Math.max(0,Km(o,f)-1),c=f===d?l:Km(o,d)-1,f-o[l]>i+1e-10&&++l,r&&(u=l,l=s-c,c=s-u),l>c?void 0:t().slice(l,c+1))},e.invert=function(t){const n=e.invertRange([t,t]);return n?n[0]:n},e.copy=function(){return Ov().domain(t()).range(a).round(o).paddingInner(s).paddingOuter(l).align(c)},u()}function Rv(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return Rv(t())},e}var Nv=Array.prototype.map;const Lv=Array.prototype.slice;const Dv=new Map,Pv=Symbol("vega_scale");function Iv(e){return e[Pv]=!0,e}function Fv(e,t,n){return arguments.length>1?(Dv.set(e,function(e,t,n){const r=function(){const n=t();return n.invertRange||(n.invertRange=n.invert?function(e){return function(t){let n,r=t[0],i=t[1];return i<r&&(n=r,r=i,i=n),[e.invert(r),e.invert(i)]}}(n):n.invertExtent?function(e){return function(t){const n=e.range();let r,i,a,o,s=t[0],l=t[1],c=-1;for(l<s&&(i=s,s=l,l=i),a=0,o=n.length;a<o;++a)n[a]>=s&&n[a]<=l&&(c<0&&(c=a),r=a);if(!(c<0))return s=e.invertExtent(n[c]),l=e.invertExtent(n[r]),[void 0===s[0]?s[1]:s[0],void 0===l[1]?l[0]:l[1]]}}(n):void 0),n.type=e,Iv(n)};return r.metadata=Fl(Zs(n)),r}(e,t,n)),this):zv(e)?Dv.get(e):void 0}function zv(e){return Dv.has(e)}function jv(e,t){const n=Dv.get(e);return n&&n.metadata[t]}function Bv(e){return jv(e,Ev)}function Uv(e){return jv(e,Tv)}function $v(e){return jv(e,Mv)}function qv(e){return jv(e,uv)}function Hv(e){return jv(e,Sv)}function Vv(e){return jv(e,yv)}Fv("identity",(function e(t){var n;function r(e){return null==e||isNaN(e=+e)?n:e}return r.invert=r,r.domain=r.range=function(e){return arguments.length?(t=Array.from(e,ng),r):t.slice()},r.unknown=function(e){return arguments.length?(n=e,r):n},r.copy=function(){return e(t).unknown(n)},t=arguments.length?Array.from(t,ng):[0,1],pg(r)})),Fv(cv,(function e(){var t=ug();return t.copy=function(){return lg(t,e())},fg.apply(t,arguments),pg(t)}),Ev),Fv(uv,(function e(){const t=wg(cg()).domain([1,10]);return t.copy=()=>lg(t,e()).base(t.base()),fg.apply(t,arguments),t}),[Ev,uv]),Fv(fv,Mg,Ev),Fv(dv,(function(){return Mg.apply(null,arguments).exponent(.5)}),Ev),Fv(hv,(function e(){var t=Og(cg());return t.copy=function(){return lg(t,e()).constant(t.constant())},fg.apply(t,arguments)}),Ev),Fv(pv,(function(){return fg.apply(Dg(Rg.Cf,Rg.yE,uc.he,fc.Ui,cc.YP,lc.UA,dc.Ag,hc.wX,pc.R,Tu.DC).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}),[Ev,Cv]),Fv(mv,(function(){return fg.apply(Dg(Rg.$Z,Rg.lk,uc.Mb,fc.R6,cc.Hl,lc.dA,dc.pz,hc.vD,pc.R,Tu.aL).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}),[Ev,Cv]),Fv(gv,Fg,[Ev,Sv]),Fv(`${gv}-${cv}`,Fg,[Ev,Sv]),Fv(`${gv}-${uv}`,(function e(){var t=wg(Pg()).domain([1,10]);return t.copy=function(){return Ig(t,e()).base(t.base())},dg.apply(t,arguments)}),[Ev,Sv,uv]),Fv(`${gv}-${fv}`,zg,[Ev,Sv]),Fv(`${gv}-${dv}`,(function(){return zg.apply(null,arguments).exponent(.5)}),[Ev,Sv]),Fv(`${gv}-${hv}`,(function e(){var t=Og(Pg());return t.copy=function(){return Ig(t,e()).constant(t.constant())},dg.apply(t,arguments)}),[Ev,Sv]),Fv(`${vv}-${cv}`,(function e(){var t=pg(Bg()(ig));return t.copy=function(){return Ig(t,e())},dg.apply(t,arguments)}),[Ev,Sv]),Fv(`${vv}-${uv}`,(function e(){var t=wg(Bg()).domain([.1,1,10]);return t.copy=function(){return Ig(t,e()).base(t.base())},dg.apply(t,arguments)}),[Ev,Sv,uv]),Fv(`${vv}-${fv}`,Ug,[Ev,Sv]),Fv(`${vv}-${dv}`,(function(){return Ug.apply(null,arguments).exponent(.5)}),[Ev,Sv]),Fv(`${vv}-${hv}`,(function e(){var t=Og(Bg());return t.copy=function(){return Ig(t,e()).constant(t.constant())},dg.apply(t,arguments)}),[Ev,Sv]),Fv(yv,(function e(){var t,n=[],r=[],i=[];function a(){var e=0,t=Math.max(1,r.length);for(i=new Array(t-1);++e<t;)i[e-1]=md(n,e/t);return o}function o(e){return null==e||isNaN(e=+e)?t:r[Jm(i,e)]}return o.invertExtent=function(e){var t=r.indexOf(e);return t<0?[NaN,NaN]:[t>0?i[t-1]:n[0],t<i.length?i[t]:n[n.length-1]]},o.domain=function(e){if(!arguments.length)return n.slice();n=[];for(let t of e)null==t||isNaN(t=+t)||n.push(t);return n.sort(od.A),a()},o.range=function(e){return arguments.length?(r=Array.from(e),a()):r.slice()},o.unknown=function(e){return arguments.length?(t=e,o):t},o.quantiles=function(){return i.slice()},o.copy=function(){return e().domain(n).range(r).unknown(t)},fg.apply(o,arguments)}),[Mv,yv]),Fv(bv,(function e(){var t,n=0,r=1,i=1,a=[.5],o=[0,1];function s(e){return null!=e&&e<=e?o[Jm(a,e,0,i)]:t}function l(){var e=-1;for(a=new Array(i);++e<i;)a[e]=((e+1)*r-(e-i)*n)/(i+1);return s}return s.domain=function(e){return arguments.length?([n,r]=e,n=+n,r=+r,l()):[n,r]},s.range=function(e){return arguments.length?(i=(o=Array.from(e)).length-1,l()):o.slice()},s.invertExtent=function(e){var t=o.indexOf(e);return t<0?[NaN,NaN]:t<1?[n,a[0]]:t>=i?[a[i-1],r]:[a[t-1],a[t]]},s.unknown=function(e){return arguments.length?(t=e,s):s},s.thresholds=function(){return a.slice()},s.copy=function(){return e().domain([n,r]).range(o).unknown(t)},fg.apply(pg(s),arguments)}),Mv),Fv(xv,(function e(){var t,n=[.5],r=[0,1],i=1;function a(e){return null!=e&&e<=e?r[Jm(n,e,0,i)]:t}return a.domain=function(e){return arguments.length?(n=Array.from(e),i=Math.min(n.length,r.length-1),a):n.slice()},a.range=function(e){return arguments.length?(r=Array.from(e),i=Math.min(n.length,r.length-1),a):r.slice()},a.invertExtent=function(e){var t=r.indexOf(e);return[n[t-1],n[t]]},a.unknown=function(e){return arguments.length?(t=e,a):t},a.copy=function(){return e().domain(n).range(r).unknown(t)},fg.apply(a,arguments)}),Mv),Fv(kv,(function e(){let t=[],n=[];function r(e){return null==e||e!=e?void 0:n[(Jm(t,e)-1)%n.length]}return r.domain=function(e){return arguments.length?(t=function(e){return Nv.call(e,Ls)}(e),r):t.slice()},r.range=function(e){return arguments.length?(n=Lv.call(e),r):n.slice()},r.tickFormat=function(e,n){return hg(t[0],Ns(t),null==e?10:e,n)},r.copy=function(){return e().domain(r.domain()).range(r.range())},r}),[Tv,Mv]),Fv(_v,Xg,Tv),Fv(Av,Ov,Tv),Fv(wv,(function(){return Rv(Ov().paddingInner(1))}),Tv);const Wv=["clamp","base","constant","exponent"];function Gv(e,t){const n=t[0],r=Ns(t)-n;return function(t){return e(n+t*r)}}function Yv(e,t,n){return jg.A(Zv(t||"rgb",n),e)}function Xv(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function Kv(e,t,n){const r=n-t;let i,a,o;return r&&Number.isFinite(r)?(i=(a=e.type).indexOf("-"),a=i<0?a:a.slice(i+1),o=Fv(a)().domain([t,n]).range([0,1]),Wv.forEach((t=>e[t]?o[t](e[t]()):0)),o):ol(.5)}function Zv(e,t){const n=Kg[function(e){return"interpolate"+e.toLowerCase().split("-").map((e=>e[0].toUpperCase()+e.slice(1))).join("")}(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}function Jv(e){if(Ts(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function Qv(e,t){for(const n in e)ty(n,t(e[n]))}const ey={};function ty(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(ey[e]=t,this):ey[e]}Qv({accent:Jg,category10:Qg,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:ev,observable10:tv,paired:nv,pastel1:rv,pastel2:iv,set1:av,set2:ov,set3:sv,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"},Jv),Qv({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},(e=>Yv(Jv(e))));const ny="symbol",ry=e=>Ts(e)?e.map((e=>String(e))):String(e),iy=(e,t)=>e[1]-t[1],ay=(e,t)=>t[1]-e[1];function oy(e,t,n){let r;return _l(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),null!=n&&(t=Math.min(t,Math.floor(Rl(e.domain())/n||1)+1))),Ms(t)&&(r=t.step,t=t.interval),Al(t)&&(t=e.type===pv?ru(t):e.type==mv?iu(t):us("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function sy(e,t,n){let r=e.range(),i=r[0],a=Ns(r),o=iy;if(i>a&&(r=a,a=i,i=r,o=ay),i=Math.floor(i),a=Math.ceil(a),t=t.map((t=>[t,e(t)])).filter((e=>i<=e[1]&&e[1]<=a)).sort(o).map((e=>e[0])),n>0&&t.length>1){const e=[t[0],Ns(t)];for(;t.length>n&&t.length>=3;)t=t.filter(((e,t)=>!(t%2)));t.length<3&&(t=e)}return t}function ly(e,t){return e.bins?sy(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function cy(e,t,n,r,i,a){const o=t.type;let s=ry;if(o===pv||i===pv)s=e.timeFormat(r);else if(o===mv||i===mv)s=e.utcFormat(r);else if(qv(o)){const i=e.formatFloat(r);if(a||t.bins)s=i;else{const e=uy(t,n,!1);s=t=>e(t)?i(t):""}}else if(t.tickFormat){const i=t.domain();s=e.formatSpan(i[0],i[i.length-1],n,r)}else r&&(s=e.format(r));return s}function uy(e,t,n){const r=ly(e,t),i=e.base(),a=Math.log(i),o=Math.max(1,i*t/r.length),s=e=>{let t=e/Math.pow(i,Math.round(Math.log(e)/a));return t*i<i-.5&&(t*=i),t<=o};return n?r.filter(s):s}const fy={[yv]:"quantiles",[bv]:"thresholds",[xv]:"domain"},dy={[yv]:"quantiles",[bv]:"domain"};function hy(e,t){return e.bins?function(e){const t=e.slice(0,-1);return t.max=Ns(e),t}(e.bins):e.type===uv?uy(e,t,!0):fy[e.type]?function(e){const t=[-1/0].concat(e);return t.max=1/0,t}(e[fy[e.type]]()):ly(e,t)}function py(e,t,n,r,i,a,o){const s=dy[t.type]&&a!==pv&&a!==mv?function(e,t,n){const r=t[dy[t.type]](),i=r.length;let a,o=i>1?r[1]-r[0]:r[0];for(a=1;a<i;++a)o=Math.min(o,r[a]-r[a-1]);return e.formatSpan(0,o,30,n)}(e,t,i):cy(e,t,n,i,a,o);return r===ny&&(e=>fy[e.type]||e.bins)(t)?my(s):"discrete"===r?vy(s):yy(s)}const my=e=>(t,n,r)=>{const i=gy(r[n+1],gy(r.max,1/0)),a=by(t,e),o=by(i,e);return a&&o?a+"  "+o:o?"< "+o:" "+a},gy=(e,t)=>null!=e?e:t,vy=e=>(t,n)=>n?e(t):null,yy=e=>t=>e(t),by=(e,t)=>Number.isFinite(e)?t(e):null;function xy(e,t,n,r){const i=r||t.type;return Al(n)&&function(e){return jv(e,Cv)}(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),n||i!==pv?n||i!==mv?py(e,t,5,null,n,r,!0):e.utcFormat("%A, %d %B %Y, %X UTC"):e.timeFormat("%A, %d %B %Y, %X")}function _y(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=xy(e,t,n.format,n.formatType);if($v(t.type)){const e=hy(t).slice(1).map(i),n=e.length;return`${n} boundar${1===n?"y":"ies"}: ${e.join(", ")}`}if(Uv(t.type)){const e=t.domain(),n=e.length;return`${n} value${1===n?"":"s"}: ${n>r?e.slice(0,r-2).map(i).join(", ")+", ending with "+e.slice(-1).map(i):e.map(i).join(", ")}`}{const e=t.domain();return`values from ${i(e[0])} to ${i(Ns(e))}`}}let wy=0;const Ay="p_";function ky(e){return e&&e.gradient}function Ey(e,t,n){const r=e.gradient;let i=e.id,a="radial"===r?Ay:"";return i||(i=e.id="gradient_"+wy++,"radial"===r?(e.x1=Ty(e.x1,.5),e.y1=Ty(e.y1,.5),e.r1=Ty(e.r1,0),e.x2=Ty(e.x2,.5),e.y2=Ty(e.y2,.5),e.r2=Ty(e.r2,.5),a=Ay):(e.x1=Ty(e.x1,0),e.y1=Ty(e.y1,0),e.x2=Ty(e.x2,1),e.y2=Ty(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+a+i+")"}function Ty(e,t){return null!=e?e:t}function My(e,t){var n,r=[];return n={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:r,stop:function(e,t){return r.push({offset:e,color:t}),n}}}const Sy={basis:{curve:function(e){return new qp(e)}},"basis-closed":{curve:function(e){return new Vp(e)}},"basis-open":{curve:function(e){return new Wp(e)}},bundle:{curve:Yp,tension:"beta",value:.85},cardinal:{curve:Zp,tension:"tension",value:0},"cardinal-open":{curve:Qp,tension:"tension",value:0},"cardinal-closed":{curve:tm,tension:"tension",value:0},"catmull-rom":{curve:gm,tension:"alpha",value:.5},"catmull-rom-closed":{curve:ym,tension:"alpha",value:.5},"catmull-rom-open":{curve:xm,tension:"alpha",value:.5},linear:{curve:wm},"linear-closed":{curve:function(e){return new Am(e)}},monotone:{horizontal:function(e){return new Cm(e)},vertical:function(e){return new Sm(e)}},natural:{curve:function(e){return new Rm(e)}},step:{curve:function(e){return new Lm(e,.5)}},"step-after":{curve:function(e){return new Lm(e,1)}},"step-before":{curve:function(e){return new Lm(e,0)}}};function Cy(e,t,n){var r=dl(Sy,e)&&Sy[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}const Oy={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Ry=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Ny=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Ly=/^((\s+,?\s*)|(,\s*))/,Dy=/^[01]/;function Py(e){const t=[];return(e.match(Ry)||[]).forEach((e=>{let n=e[0];const r=n.toLowerCase(),i=Oy[r],a=function(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let a=0;a<t;++a){const t="a"!==e||3!==a&&4!==a?Ny:Dy,o=n.slice(i).match(t);if(null===o)throw Error("Invalid SVG path, incorrect parameter type");i+=o[0].length,r.push(+o[0]);const s=n.slice(i).match(Ly);null!==s&&(i+=s[0].length)}return r}(r,i,e.slice(1).trim()),o=a.length;if(o<i||o&&o%i!=0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([n,...a.slice(0,i)]),o!==i){"m"===r&&(n="M"===n?"L":"l");for(let e=i;e<o;e+=i)t.push([n,...a.slice(e,e+i)])}})),t}const Iy=Math.PI/180,Fy=Math.PI/2,zy=2*Math.PI,jy=Math.sqrt(3)/2;var By={},Uy={},$y=[].join;function qy(e){const t=$y.call(e);if(Uy[t])return Uy[t];var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7];const u=c*o,f=-l*s,d=l*o,h=c*s,p=Math.cos(i),m=Math.sin(i),g=Math.cos(a),v=Math.sin(a),y=.5*(a-i),b=Math.sin(.5*y),x=8/3*b*b/Math.sin(y),_=n+p-x*m,w=r+m+x*p,A=n+g,k=r+v,E=A+x*v,T=k-x*g;return Uy[t]=[u*_+f*w,d*_+h*w,u*E+f*T,d*E+h*T,u*A+f*k,d*A+h*k]}const Hy=["l",0,0,0,0,0,0,0];function Vy(e,t,n){const r=Hy[0]=e[0];if("a"===r||"A"===r)Hy[1]=t*e[1],Hy[2]=n*e[2],Hy[3]=e[3],Hy[4]=e[4],Hy[5]=e[5],Hy[6]=t*e[6],Hy[7]=n*e[7];else if("h"===r||"H"===r)Hy[1]=t*e[1];else if("v"===r||"V"===r)Hy[1]=n*e[1];else for(var i=1,a=e.length;i<a;++i)Hy[i]=(i%2==1?t:n)*e[i];return Hy}function Wy(e,t,n,r,i,a){var o,s,l,c,u,f=null,d=0,h=0,p=0,m=0,g=0,v=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),null==a&&(a=i),e.beginPath&&e.beginPath();for(var y=0,b=t.length;y<b;++y){switch(o=t[y],1===i&&1===a||(o=Vy(o,i,a)),o[0]){case"l":d+=o[1],h+=o[2],e.lineTo(d+n,h+r);break;case"L":d=o[1],h=o[2],e.lineTo(d+n,h+r);break;case"h":d+=o[1],e.lineTo(d+n,h+r);break;case"H":d=o[1],e.lineTo(d+n,h+r);break;case"v":h+=o[1],e.lineTo(d+n,h+r);break;case"V":h=o[1],e.lineTo(d+n,h+r);break;case"m":g=d+=o[1],v=h+=o[2],e.moveTo(d+n,h+r);break;case"M":g=d=o[1],v=h=o[2],e.moveTo(d+n,h+r);break;case"c":s=d+o[5],l=h+o[6],p=d+o[3],m=h+o[4],e.bezierCurveTo(d+o[1]+n,h+o[2]+r,p+n,m+r,s+n,l+r),d=s,h=l;break;case"C":d=o[5],h=o[6],p=o[3],m=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,p+n,m+r,d+n,h+r);break;case"s":s=d+o[3],l=h+o[4],p=2*d-p,m=2*h-m,e.bezierCurveTo(p+n,m+r,d+o[1]+n,h+o[2]+r,s+n,l+r),p=d+o[1],m=h+o[2],d=s,h=l;break;case"S":s=o[3],l=o[4],p=2*d-p,m=2*h-m,e.bezierCurveTo(p+n,m+r,o[1]+n,o[2]+r,s+n,l+r),d=s,h=l,p=o[1],m=o[2];break;case"q":s=d+o[3],l=h+o[4],p=d+o[1],m=h+o[2],e.quadraticCurveTo(p+n,m+r,s+n,l+r),d=s,h=l;break;case"Q":s=o[3],l=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,s+n,l+r),d=s,h=l,p=o[1],m=o[2];break;case"t":s=d+o[1],l=h+o[2],null===f[0].match(/[QqTt]/)?(p=d,m=h):"t"===f[0]?(p=2*d-c,m=2*h-u):"q"===f[0]&&(p=2*d-p,m=2*h-m),c=p,u=m,e.quadraticCurveTo(p+n,m+r,s+n,l+r),h=l,p=(d=s)+o[1],m=h+o[2];break;case"T":s=o[1],l=o[2],p=2*d-p,m=2*h-m,e.quadraticCurveTo(p+n,m+r,s+n,l+r),d=s,h=l;break;case"a":Gy(e,d+n,h+r,[o[1],o[2],o[3],o[4],o[5],o[6]+d+n,o[7]+h+r]),d+=o[6],h+=o[7];break;case"A":Gy(e,d+n,h+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),d=o[6],h=o[7];break;case"z":case"Z":d=g,h=v,e.closePath()}f=o}}function Gy(e,t,n,r){const i=function(e,t,n,r,i,a,o,s,l){const c=$y.call(arguments);if(By[c])return By[c];const u=o*Iy,f=Math.sin(u),d=Math.cos(u),h=d*(s-e)*.5+f*(l-t)*.5,p=d*(l-t)*.5-f*(s-e)*.5;let m=h*h/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,v=f/n,y=-f/r,b=d/r,x=g*s+v*l,_=y*s+b*l,w=g*e+v*t,A=y*e+b*t;let k=1/((w-x)*(w-x)+(A-_)*(A-_))-.25;k<0&&(k=0);let E=Math.sqrt(k);a==i&&(E=-E);const T=.5*(x+w)-E*(A-_),M=.5*(_+A)+E*(w-x),S=Math.atan2(_-M,x-T);let C=Math.atan2(A-M,w-T)-S;C<0&&1===a?C+=zy:C>0&&0===a&&(C-=zy);const O=Math.ceil(Math.abs(C/(Fy+.001))),R=[];for(let e=0;e<O;++e){const t=S+e*C/O,i=S+(e+1)*C/O;R[e]=[T,M,t,i,n,r,f,d]}return By[c]=R}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let t=0;t<i.length;++t){const n=qy(i[t]);e.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5])}}const Yy=.5773502691896257,Xy={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,zy)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,a=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-a),e.lineTo(i,-a),e.lineTo(0,-n),e.lineTo(-i,-a),e.lineTo(-r,-a),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=jy*n,i=r-n*Yy,a=n/4;e.moveTo(0,-r-i),e.lineTo(-a,r-i),e.lineTo(a,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=jy*n,i=r-n*Yy;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=jy*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=jy*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=jy*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=jy*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function Ky(e){return dl(Xy,e)?Xy[e]:function(e){if(!dl(Zy,e)){const t=Py(e);Zy[e]={draw:function(e,n){Wy(e,t,0,0,Math.sqrt(n)/2)}}}return Zy[e]}(e)}var Zy={};const Jy=.448084975506;function Qy(e){return e.x}function eb(e){return e.y}function tb(e){return e.width}function nb(e){return e.height}function rb(e){return"function"==typeof e?e:()=>+e}function ib(e,t,n){return Math.max(t,Math.min(e,n))}function ab(){var e=Qy,t=eb,n=tb,r=nb,i=rb(0),a=i,o=i,s=i,l=null;function c(c,u,f){var d,h=null!=u?u:+e.call(this,c),p=null!=f?f:+t.call(this,c),m=+n.call(this,c),g=+r.call(this,c),v=Math.min(m,g)/2,y=ib(+i.call(this,c),0,v),b=ib(+a.call(this,c),0,v),x=ib(+o.call(this,c),0,v),_=ib(+s.call(this,c),0,v);if(l||(l=d=(0,Dm.Ae)()),y<=0&&b<=0&&x<=0&&_<=0)l.rect(h,p,m,g);else{var w=h+m,A=p+g;l.moveTo(h+y,p),l.lineTo(w-b,p),l.bezierCurveTo(w-Jy*b,p,w,p+Jy*b,w,p+b),l.lineTo(w,A-_),l.bezierCurveTo(w,A-Jy*_,w-Jy*_,A,w-_,A),l.lineTo(h+x,A),l.bezierCurveTo(h+Jy*x,A,h,A-Jy*x,h,A-x),l.lineTo(h,p+y),l.bezierCurveTo(h,p+Jy*y,h+Jy*y,p,h+y,p),l.closePath()}if(d)return l=null,d+""||null}return c.x=function(t){return arguments.length?(e=rb(t),c):e},c.y=function(e){return arguments.length?(t=rb(e),c):t},c.width=function(e){return arguments.length?(n=rb(e),c):n},c.height=function(e){return arguments.length?(r=rb(e),c):r},c.cornerRadius=function(e,t,n,r){return arguments.length?(i=rb(e),a=null!=t?rb(t):i,s=null!=n?rb(n):i,o=null!=r?rb(r):a,c):i},c.context=function(e){return arguments.length?(l=null==e?null:e,c):l},c}function ob(){var e,t,n,r,i,a,o,s,l=null;function c(e,t,n){const r=n/2;if(i){var c=o-t,u=e-a;if(c||u){var f=Math.hypot(c,u),d=(c/=f)*s,h=(u/=f)*s,p=Math.atan2(u,c);l.moveTo(a-d,o-h),l.lineTo(e-c*r,t-u*r),l.arc(e,t,r,p-Math.PI,p),l.lineTo(a+d,o+h),l.arc(a,o,s,p,p+Math.PI)}else l.arc(e,t,r,0,zy);l.closePath()}else i=1;a=e,o=t,s=r}function u(a){var o,s,u,f=a.length,d=!1;for(null==l&&(l=u=(0,Dm.Ae)()),o=0;o<=f;++o)!(o<f&&r(s=a[o],o,a))===d&&(d=!d)&&(i=0),d&&c(+e(s,o,a),+t(s,o,a),+n(s,o,a));if(u)return l=null,u+""||null}return u.x=function(t){return arguments.length?(e=t,u):e},u.y=function(e){return arguments.length?(t=e,u):t},u.size=function(e){return arguments.length?(n=e,u):n},u.defined=function(e){return arguments.length?(r=e,u):r},u.context=function(e){return arguments.length?(l=null==e?null:e,u):l},u}function sb(e,t){return null!=e?e:t}const lb=e=>e.x||0,cb=e=>e.y||0,ub=e=>!(!1===e.defined),fb=function(){var e=Im,t=Fm,n=(0,Pm.A)(0),r=null,i=zm,a=jm,o=Bm,s=null;function l(){var l,c,u=+e.apply(this,arguments),f=+t.apply(this,arguments),d=i.apply(this,arguments)-fm,h=a.apply(this,arguments)-fm,p=nm(h-d),m=h>d;if(s||(s=l=(0,Dm.Ae)()),f<u&&(c=f,f=u,u=c),f>cm)if(p>dm-cm)s.moveTo(f*im(d),f*sm(d)),s.arc(0,0,f,d,h,!m),u>cm&&(s.moveTo(u*im(h),u*sm(h)),s.arc(0,0,u,h,d,m));else{var g,v,y=d,b=h,x=d,_=h,w=p,A=p,k=o.apply(this,arguments)/2,E=k>cm&&(r?+r.apply(this,arguments):lm(u*u+f*f)),T=om(nm(f-u)/2,+n.apply(this,arguments)),M=T,S=T;if(E>cm){var C=hm(E/u*sm(k)),O=hm(E/f*sm(k));(w-=2*C)>cm?(x+=C*=m?1:-1,_-=C):(w=0,x=_=(d+h)/2),(A-=2*O)>cm?(y+=O*=m?1:-1,b-=O):(A=0,y=b=(d+h)/2)}var R=f*im(y),N=f*sm(y),L=u*im(_),D=u*sm(_);if(T>cm){var P,I=f*im(b),F=f*sm(b),z=u*im(x),j=u*sm(x);if(p<um&&(P=function(e,t,n,r,i,a,o,s){var l=n-e,c=r-t,u=o-i,f=s-a,d=f*l-u*c;if(!(d*d<cm))return[e+(d=(u*(t-a)-f*(e-i))/d)*l,t+d*c]}(R,N,z,j,I,F,L,D))){var B=R-P[0],U=N-P[1],$=I-P[0],q=F-P[1],H=1/sm(function(e){return e>1?0:e<-1?um:Math.acos(e)}((B*$+U*q)/(lm(B*B+U*U)*lm($*$+q*q)))/2),V=lm(P[0]*P[0]+P[1]*P[1]);M=om(T,(u-V)/(H-1)),S=om(T,(f-V)/(H+1))}}A>cm?S>cm?(g=Um(z,j,R,N,f,S,m),v=Um(I,F,L,D,f,S,m),s.moveTo(g.cx+g.x01,g.cy+g.y01),S<T?s.arc(g.cx,g.cy,S,rm(g.y01,g.x01),rm(v.y01,v.x01),!m):(s.arc(g.cx,g.cy,S,rm(g.y01,g.x01),rm(g.y11,g.x11),!m),s.arc(0,0,f,rm(g.cy+g.y11,g.cx+g.x11),rm(v.cy+v.y11,v.cx+v.x11),!m),s.arc(v.cx,v.cy,S,rm(v.y11,v.x11),rm(v.y01,v.x01),!m))):(s.moveTo(R,N),s.arc(0,0,f,y,b,!m)):s.moveTo(R,N),u>cm&&w>cm?M>cm?(g=Um(L,D,I,F,u,-M,m),v=Um(R,N,z,j,u,-M,m),s.lineTo(g.cx+g.x01,g.cy+g.y01),M<T?s.arc(g.cx,g.cy,M,rm(g.y01,g.x01),rm(v.y01,v.x01),!m):(s.arc(g.cx,g.cy,M,rm(g.y01,g.x01),rm(g.y11,g.x11),!m),s.arc(0,0,u,rm(g.cy+g.y11,g.cx+g.x11),rm(v.cy+v.y11,v.cx+v.x11),m),s.arc(v.cx,v.cy,M,rm(v.y11,v.x11),rm(v.y01,v.x01),!m))):s.arc(0,0,u,_,x,m):s.lineTo(L,D)}else s.moveTo(0,0);if(s.closePath(),l)return s=null,l+""||null}return l.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-um/2;return[im(r)*n,sm(r)*n]},l.innerRadius=function(t){return arguments.length?(e="function"==typeof t?t:(0,Pm.A)(+t),l):e},l.outerRadius=function(e){return arguments.length?(t="function"==typeof e?e:(0,Pm.A)(+e),l):t},l.cornerRadius=function(e){return arguments.length?(n="function"==typeof e?e:(0,Pm.A)(+e),l):n},l.padRadius=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:(0,Pm.A)(+e),l):r},l.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:(0,Pm.A)(+e),l):i},l.endAngle=function(e){return arguments.length?(a="function"==typeof e?e:(0,Pm.A)(+e),l):a},l.padAngle=function(e){return arguments.length?(o="function"==typeof e?e:(0,Pm.A)(+e),l):o},l.context=function(e){return arguments.length?(s=null==e?null:e,l):s},l}().startAngle((e=>e.startAngle||0)).endAngle((e=>e.endAngle||0)).padAngle((e=>e.padAngle||0)).innerRadius((e=>e.innerRadius||0)).outerRadius((e=>e.outerRadius||0)).cornerRadius((e=>e.cornerRadius||0)),db=Hm().x(lb).y1(cb).y0((e=>(e.y||0)+(e.height||0))).defined(ub),hb=Hm().y(cb).x1(lb).x0((e=>(e.x||0)+(e.width||0))).defined(ub),pb=qm().x(lb).y(cb).defined(ub),mb=ab().x(lb).y(cb).width((e=>e.width||0)).height((e=>e.height||0)).cornerRadius((e=>sb(e.cornerRadiusTopLeft,e.cornerRadius)||0),(e=>sb(e.cornerRadiusTopRight,e.cornerRadius)||0),(e=>sb(e.cornerRadiusBottomRight,e.cornerRadius)||0),(e=>sb(e.cornerRadiusBottomLeft,e.cornerRadius)||0)),gb=function(){var e=(0,Pm.A)(Vm),t=(0,Pm.A)(64),n=null;function r(){var r;if(n||(n=r=(0,Dm.Ae)()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),r)return n=null,r+""||null}return r.type=function(t){return arguments.length?(e="function"==typeof t?t:(0,Pm.A)(t),r):e},r.size=function(e){return arguments.length?(t="function"==typeof e?e:(0,Pm.A)(+e),r):t},r.context=function(e){return arguments.length?(n=null==e?null:e,r):n},r}().type((e=>Ky(e.shape||"circle"))).size((e=>sb(e.size,64))),vb=ob().x(lb).y(cb).defined(ub).size((e=>e.size||1));function yb(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function bb(e,t,n,r){return mb.context(e)(t,n,r)}var xb=1;function _b(){xb=1}function wb(e,t,n){var r=t.clip,i=e._defs,a=t.clip_id||(t.clip_id="clip"+xb++),o=i.clipping[a]||(i.clipping[a]={id:a});return Qs(r)?o.path=r(null):yb(n)?o.path=bb(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+a+")"}function Ab(e){this.clear(),e&&this.union(e)}function kb(e){this.mark=e,this.bounds=this.bounds||new Ab}function Eb(e){kb.call(this,e),this.items=this.items||[]}Ab.prototype={clone(){return new Ab(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:a,y2:o}=this,s=Math.cos(e),l=Math.sin(e),c=t-t*s+n*l,u=n-t*l-n*s;return[s*r-l*i+c,l*r+s*i+u,s*r-l*o+c,l*r+s*o+u,s*a-l*i+c,l*a+s*i+u,s*a-l*o+c,l*a+s*o+u]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}},gl(Eb,kb);class Tb{constructor(e){this._pending=0,this._loader=e||vf()}pending(){return this._pending}sanitizeURL(e){const t=this;return Mb(t),t._loader.sanitize(e,{context:"href"}).then((e=>(Sb(t),e))).catch((()=>(Sb(t),null)))}loadImage(e){const t=this,n=Ym();return Mb(t),t._loader.sanitize(e,{context:"image"}).then((e=>{const r=e.href;if(!r||!n)throw{url:r};const i=new n,a=dl(e,"crossOrigin")?e.crossOrigin:"anonymous";return null!=a&&(i.crossOrigin=a),i.onload=()=>Sb(t),i.onerror=()=>Sb(t),i.src=r,i})).catch((e=>(Sb(t),{complete:!1,width:0,height:0,src:e&&e.url||""})))}ready(){const e=this;return new Promise((t=>{!function n(r){e.pending()?setTimeout((()=>{n(!0)}),10):t(r)}(!1)}))}}function Mb(e){e._pending+=1}function Sb(e){e._pending-=1}function Cb(e,t,n){if(t.stroke&&0!==t.opacity&&0!==t.strokeOpacity){const r=null!=t.strokeWidth?+t.strokeWidth:1;e.expand(r+(n?function(e,t){return e.strokeJoin&&"miter"!==e.strokeJoin?0:t}(t,r):0))}return e}const Ob=zy-1e-8;let Rb,Nb,Lb,Db,Pb,Ib,Fb,zb;const jb=(e,t)=>Rb.add(e,t),Bb=(e,t)=>jb(Nb=e,Lb=t),Ub=e=>jb(e,Rb.y1),$b=e=>jb(Rb.x1,e),qb=(e,t)=>Pb*e+Fb*t,Hb=(e,t)=>Ib*e+zb*t,Vb=(e,t)=>jb(qb(e,t),Hb(e,t)),Wb=(e,t)=>Bb(qb(e,t),Hb(e,t));function Gb(e,t){return Rb=e,t?(Db=t*Iy,Pb=zb=Math.cos(Db),Ib=Math.sin(Db),Fb=-Ib):(Pb=zb=1,Db=Ib=Fb=0),Yb}const Yb={beginPath(){},closePath(){},moveTo:Wb,lineTo:Wb,rect(e,t,n,r){Db?(Vb(e+n,t),Vb(e+n,t+r),Vb(e,t+r),Wb(e,t)):(jb(e+n,t+r),Bb(e,t))},quadraticCurveTo(e,t,n,r){const i=qb(e,t),a=Hb(e,t),o=qb(n,r),s=Hb(n,r);Xb(Nb,i,o,Ub),Xb(Lb,a,s,$b),Bb(o,s)},bezierCurveTo(e,t,n,r,i,a){const o=qb(e,t),s=Hb(e,t),l=qb(n,r),c=Hb(n,r),u=qb(i,a),f=Hb(i,a);Kb(Nb,o,l,u,Ub),Kb(Lb,s,c,f,$b),Bb(u,f)},arc(e,t,n,r,i,a){if(r+=Db,i+=Db,Nb=n*Math.cos(i)+e,Lb=n*Math.sin(i)+t,Math.abs(i-r)>Ob)jb(e-n,t-n),jb(e+n,t+n);else{const o=r=>jb(n*Math.cos(r)+e,n*Math.sin(r)+t);let s,l;if(o(r),o(i),i!==r)if((r%=zy)<0&&(r+=zy),(i%=zy)<0&&(i+=zy),i<r&&(a=!a,s=r,r=i,i=s),a)for(i-=zy,s=r-r%Fy,l=0;l<4&&s>i;++l,s-=Fy)o(s);else for(s=r-r%Fy+Fy,l=0;l<4&&s<i;++l,s+=Fy)o(s)}}};function Xb(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function Kb(e,t,n,r,i){const a=r-e+3*t-3*n,o=e+n-2*t,s=e-t;let l,c=0,u=0;Math.abs(a)>1e-14?(l=o*o+s*a,l>=0&&(l=Math.sqrt(l),c=(-o+l)/a,u=(-o-l)/a)):c=.5*s/o,0<c&&c<1&&i(Zb(c,e,t,n,r)),0<u&&u<1&&i(Zb(u,e,t,n,r))}function Zb(e,t,n,r,i){const a=1-e,o=a*a,s=e*e;return o*a*t+3*o*e*n+3*a*s*r+s*e*i}var Jb=(Jb=Gm(1,1))?Jb.getContext("2d"):null;const Qb=new Ab;function ex(e){return function(t,n){if(!Jb)return!0;e(Jb,t),Qb.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:a,y2:o}=Qb;for(let e=i;e<=o;++e)for(let t=r;t<=a;++t)if(Jb.isPointInPath(t,e))return!0;return!1}}function tx(e,t){return t.contains(e.x||0,e.y||0)}function nx(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,a=e.height||0;return t.intersects(Qb.set(n,r,n+i,r+a))}function rx(e,t){const n=e.x||0,r=e.y||0;return ix(t,n,r,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r)}function ix(e,t,n,r,i){const{x1:a,y1:o,x2:s,y2:l}=e,c=r-t,u=i-n;let f,d,h,p,m=0,g=1;for(p=0;p<4;++p){if(0===p&&(f=-c,d=-(a-t)),1===p&&(f=c,d=s-t),2===p&&(f=-u,d=-(o-n)),3===p&&(f=u,d=l-n),Math.abs(f)<1e-10&&d<0)return!1;if(h=d/f,f<0){if(h>g)return!1;h>m&&(m=h)}else if(f>0){if(h<m)return!1;h<g&&(g=h)}}return!0}function ax(e,t){e.globalCompositeOperation=t.blend||"source-over"}function ox(e,t){return null==e?t:e}function sx(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function lx(e,t,n){return ky(n)?function(e,t,n){const r=n.width(),i=n.height();let a;if("radial"===t.gradient)a=e.createRadialGradient(n.x1+ox(t.x1,.5)*r,n.y1+ox(t.y1,.5)*i,Math.max(r,i)*ox(t.r1,0),n.x1+ox(t.x2,.5)*r,n.y1+ox(t.y2,.5)*i,Math.max(r,i)*ox(t.r2,.5));else{const o=ox(t.x1,0),s=ox(t.y1,0),l=ox(t.x2,1),c=ox(t.y2,0);if(o!==l&&s!==c&&r!==i){const n=Gm(Math.ceil(r),Math.ceil(i)),a=n.getContext("2d");return a.scale(r,i),a.fillStyle=sx(a.createLinearGradient(o,s,l,c),t.stops),a.fillRect(0,0,r,i),e.createPattern(n,"no-repeat")}a=e.createLinearGradient(n.x1+o*r,n.y1+s*i,n.x1+l*r,n.y1+c*i)}return sx(a,t.stops)}(e,n,t.bounds):n}function cx(e,t,n){return(n*=null==t.fillOpacity?1:t.fillOpacity)>0&&(e.globalAlpha=n,e.fillStyle=lx(e,t,t.fill),!0)}var ux=[];function fx(e,t,n){var r=null!=(r=t.strokeWidth)?r:1;return!(r<=0)&&((n*=null==t.strokeOpacity?1:t.strokeOpacity)>0&&(e.globalAlpha=n,e.strokeStyle=lx(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||ux),e.lineDashOffset=t.strokeDashOffset||0),!0))}function dx(e,t){return e.zindex-t.zindex||e.index-t.index}function hx(e){if(!e.zdirty)return e.zitems;var t,n,r,i=e.items,a=[];for(n=0,r=i.length;n<r;++n)(t=i[n]).index=n,t.zindex&&a.push(t);return e.zdirty=!1,e.zitems=a.sort(dx)}function px(e,t){var n,r,i=e.items;if(!i||!i.length)return;const a=hx(e);if(a&&a.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||t(i[n]);i=a}for(n=0,r=i.length;n<r;++n)t(i[n])}function mx(e,t){var n,r,i=e.items;if(!i||!i.length)return null;const a=hx(e);for(a&&a.length&&(i=a),r=i.length;--r>=0;)if(n=t(i[r]))return n;if(i===a)for(r=(i=e.items).length;--r>=0;)if(!i[r].zindex&&(n=t(i[r])))return n;return null}function gx(e){return function(t,n,r){px(n,(n=>{r&&!r.intersects(n.bounds)||yx(e,t,n,n)}))}}function vx(e){return function(t,n,r){!n.items.length||r&&!r.intersects(n.bounds)||yx(e,t,n.items[0],n.items)}}function yx(e,t,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(e(t,r)||(ax(t,n),n.fill&&cx(t,n,i)&&t.fill(),n.stroke&&fx(t,n,i)&&t.stroke()))}function bx(e){return e=e||vs,function(t,n,r,i,a,o){return r*=t.pixelRatio,i*=t.pixelRatio,mx(n,(n=>{const s=n.bounds;if((!s||s.contains(a,o))&&s)return e(t,n,r,i,a,o)?n:void 0}))}}function xx(e,t){return function(n,r,i,a){var o,s,l=Array.isArray(r)?r[0]:r,c=null==t?l.fill:t,u=l.stroke&&n.isPointInStroke;return u&&(o=l.strokeWidth,s=l.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=s?s:"butt"),!e(n,r)&&(c&&n.isPointInPath(i,a)||u&&n.isPointInStroke(i,a))}}function _x(e){return bx(xx(e))}function wx(e,t){return"translate("+e+","+t+")"}function Ax(e){return"rotate("+e+")"}function kx(e){return wx(e.x||0,e.y||0)}function Ex(e,t,n){function r(e,n){var r=n.x||0,i=n.y||0,a=n.angle||0;e.translate(r,i),a&&e.rotate(a*=Iy),e.beginPath(),t(e,n),a&&e.rotate(-a),e.translate(-r,-i)}return{type:e,tag:"path",nested:!1,attr:function(e,n){e("transform",function(e){return wx(e.x||0,e.y||0)+(e.angle?" "+Ax(e.angle):"")}(n)),e("d",t(null,n))},bound:function(e,n){return t(Gb(e,n.angle),n),Cb(e,n).translate(n.x||0,n.y||0)},draw:gx(r),pick:_x(r),isect:n||ex(r)}}var Tx=Ex("arc",(function(e,t){return fb.context(e)(t)}));function Mx(e,t,n){function r(e,n){e.beginPath(),t(e,n)}const i=xx(r);return{type:e,tag:"path",nested:!0,attr:function(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))},bound:function(e,n){var r=n.items;return 0===r.length?e:(t(Gb(e),r),Cb(e,r[0]))},draw:vx(r),pick:function(e,t,n,r,a,o){var s=t.items,l=t.bounds;return!s||!s.length||l&&!l.contains(a,o)?null:(n*=e.pixelRatio,r*=e.pixelRatio,i(e,s,n,r)?s[0]:null)},isect:tx,tip:n}}var Sx=Mx("area",(function(e,t){const n=t[0],r=n.interpolate||"linear";return("horizontal"===n.orient?hb:db).curve(Cy(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,i="horizontal"===e[0].orient?t[1]:t[0],a="horizontal"===e[0].orient?"y":"x",o=e.length,s=1/0;--o>=0;)!1!==e[o].defined&&(r=Math.abs(e[o][a]-i))<s&&(s=r,n=e[o]);return n}));function Cx(e,t){e.beginPath(),yb(t)?bb(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function Ox(e){const t=ox(e.strokeWidth,1);return null!=e.strokeOffset?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Rx(e,t){const n=Ox(t);e("d",bb(null,t,n,n))}function Nx(e,t,n,r){const i=Ox(t);e.beginPath(),bb(e,t,(n||0)+i,(r||0)+i)}const Lx=xx(Nx),Dx=xx(Nx,!1),Px=xx(Nx,!0);var Ix={type:"group",tag:"g",nested:!1,attr:function(e,t){e("transform",kx(t))},bound:function(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let t=0;t<r;++t)e.union(n[t].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Cb(e,t),e.translate(t.x||0,t.y||0)},draw:function(e,t,n,r){px(t,(t=>{const i=t.x||0,a=t.y||0,o=t.strokeForeground,s=null==t.opacity?1:t.opacity;(t.stroke||t.fill)&&s&&(Nx(e,t,i,a),ax(e,t),t.fill&&cx(e,t,s)&&e.fill(),t.stroke&&!o&&fx(e,t,s)&&e.stroke()),e.save(),e.translate(i,a),t.clip&&Cx(e,t),n&&n.translate(-i,-a),px(t,(t=>{("group"===t.marktype||null==r||r.includes(t.marktype))&&this.draw(e,t,n,r)})),n&&n.translate(i,a),e.restore(),o&&t.stroke&&s&&(Nx(e,t,i,a),ax(e,t),fx(e,t,s)&&e.stroke())}))},pick:function(e,t,n,r,i,a){if(t.bounds&&!t.bounds.contains(i,a)||!t.items)return null;const o=n*e.pixelRatio,s=r*e.pixelRatio;return mx(t,(l=>{let c,u,f;const d=l.bounds;if(d&&!d.contains(i,a))return;u=l.x||0,f=l.y||0;const h=u+(l.width||0),p=f+(l.height||0),m=l.clip;if(m&&(i<u||i>h||a<f||a>p))return;if(e.save(),e.translate(u,f),u=i-u,f=a-f,m&&yb(l)&&!Px(e,l,o,s))return e.restore(),null;const g=l.strokeForeground,v=!1!==t.interactive;return v&&g&&l.stroke&&Dx(e,l,o,s)?(e.restore(),l):(c=mx(l,(e=>function(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}(e,u,f)?this.pick(e,n,r,u,f):null)),!c&&v&&(l.fill||!g&&l.stroke)&&Lx(e,l,o,s)&&(c=l),e.restore(),c||null)}))},isect:nx,content:function(e,t,n){e("clip-path",t.clip?wb(n,t,t):null)},background:function(e,t){e("class","background"),e("aria-hidden",!0),Rx(e,t)},foreground:function(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?Rx(e,t):e("d","")}},Fx={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function zx(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then((t=>{e.image=t,e.image.url=e.url}))),n}function jx(e,t){return null!=e.width?e.width:t&&t.width?!1!==e.aspect&&e.height?e.height*t.width/t.height:t.width:0}function Bx(e,t){return null!=e.height?e.height:t&&t.height?!1!==e.aspect&&e.width?e.width*t.height/t.width:t.height:0}function Ux(e,t){return"center"===e?t/2:"right"===e?t:0}function $x(e,t){return"middle"===e?t/2:"bottom"===e?t:0}var qx={type:"image",tag:"image",nested:!1,attr:function(e,t,n){const r=zx(t,n),i=jx(t,r),a=Bx(t,r),o=(t.x||0)-Ux(t.align,i),s=(t.y||0)-$x(t.baseline,a);e("href",!r.src&&r.toDataURL?r.toDataURL():r.src||"",Fx["xmlns:xlink"],"xlink:href"),e("transform",wx(o,s)),e("width",i),e("height",a),e("preserveAspectRatio",!1===t.aspect?"none":"xMidYMid")},bound:function(e,t){const n=t.image,r=jx(t,n),i=Bx(t,n),a=(t.x||0)-Ux(t.align,r),o=(t.y||0)-$x(t.baseline,i);return e.set(a,o,a+r,o+i)},draw:function(e,t,n){px(t,(t=>{if(n&&!n.intersects(t.bounds))return;const r=zx(t,this);let i=jx(t,r),a=Bx(t,r);if(0===i||0===a)return;let o,s,l,c,u=(t.x||0)-Ux(t.align,i),f=(t.y||0)-$x(t.baseline,a);!1!==t.aspect&&(s=r.width/r.height,l=t.width/t.height,s==s&&l==l&&s!==l&&(l<s?(c=i/s,f+=(a-c)/2,a=c):(c=a*s,u+=(i-c)/2,i=c))),(r.complete||r.toDataURL)&&(ax(e,t),e.globalAlpha=null!=(o=t.opacity)?o:1,e.imageSmoothingEnabled=!1!==t.smooth,e.drawImage(r,u,f,i,a))}))},pick:bx(),isect:vs,get:zx,xOffset:Ux,yOffset:$x},Hx=Mx("line",(function(e,t){const n=t[0],r=n.interpolate||"linear";return pb.curve(Cy(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,i=Math.pow(e[0].strokeWidth||1,2),a=e.length;--a>=0;)if(!1!==e[a].defined&&(n=e[a].x-t[0])*n+(r=e[a].y-t[1])*r<i)return e[a];return null}));function Vx(e,t){var n=t.path;if(null==n)return!0;var r=t.x||0,i=t.y||0,a=t.scaleX||1,o=t.scaleY||1,s=(t.angle||0)*Iy,l=t.pathCache;l&&l.path===n||((t.pathCache=l=Py(n)).path=n),s&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(s),Wy(e,l,0,0,a,o),e.rotate(-s),e.translate(-r,-i)):Wy(e,l,r,i,a,o)}var Wx={type:"path",tag:"path",nested:!1,attr:function(e,t){var n=t.scaleX||1,r=t.scaleY||1;1===n&&1===r||e("vector-effect","non-scaling-stroke"),e("transform",function(e){return wx(e.x||0,e.y||0)+(e.angle?" "+Ax(e.angle):"")+(e.scaleX||e.scaleY?" "+function(e,t){return"scale("+e+","+t+")"}(e.scaleX||1,e.scaleY||1):"")}(t)),e("d",t.path)},bound:function(e,t){return Vx(Gb(e,t.angle),t)?e.set(0,0,0,0):Cb(e,t,!0)},draw:gx(Vx),pick:_x(Vx),isect:ex(Vx)};function Gx(e,t){e.beginPath(),bb(e,t)}var Yx={type:"rect",tag:"path",nested:!1,attr:function(e,t){e("d",bb(null,t))},bound:function(e,t){var n,r;return Cb(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)},draw:gx(Gx),pick:_x(Gx),isect:nx};function Xx(e,t,n){var r,i,a,o;return!(!t.stroke||!fx(e,t,n))&&(r=t.x||0,i=t.y||0,a=null!=t.x2?t.x2:r,o=null!=t.y2?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(a,o),!0)}var Kx={type:"rule",tag:"line",nested:!1,attr:function(e,t){e("transform",kx(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)},bound:function(e,t){var n,r;return Cb(e.set(n=t.x||0,r=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r),t)},draw:function(e,t,n){px(t,(t=>{if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&Xx(e,t,r)&&(ax(e,t),e.stroke())}}))},pick:bx((function(e,t,n,r){return!!e.isPointInStroke&&(Xx(e,t,1)&&e.isPointInStroke(n,r))})),isect:rx},Zx=Ex("shape",(function(e,t){return(t.mark.shape||t.shape).context(e)(t)})),Jx=Ex("symbol",(function(e,t){return gb.context(e)(t)}),tx);const Qx=Ml();var e_={height:o_,measureWidth:i_,estimateWidth:n_,width:n_,canvas:t_};function t_(e){e_.width=e&&Jb?i_:n_}function n_(e,t){return r_(u_(e,t),o_(e))}function r_(e,t){return~~(.8*e.length*t)}function i_(e,t){return o_(e)<=0||!(t=u_(e,t))?0:a_(t,d_(e))}function a_(e,t){const n=`(${t}) ${e}`;let r=Qx.get(n);return void 0===r&&(Jb.font=t,r=Jb.measureText(e).width,Qx.set(n,r)),r}function o_(e){return null!=e.fontSize?+e.fontSize||0:11}function s_(e){return null!=e.lineHeight?e.lineHeight:o_(e)+2}function l_(e){return function(e){return Ts(e)?e.length>1?e:e[0]:e}(e.lineBreak&&e.text&&!Ts(e.text)?e.text.split(e.lineBreak):e.text)}function c_(e){const t=l_(e);return(Ts(t)?t.length-1:0)*s_(e)}function u_(e,t){const n=null==t?"":(t+"").trim();return e.limit>0&&n.length?function(e,t){var n=+e.limit,r=function(e){if(e_.width===i_){const t=d_(e);return e=>a_(e,t)}if(e_.width===n_){const t=o_(e);return e=>r_(e,t)}return t=>e_.width(e,t)}(e);if(r(t)<n)return t;var i,a=e.ellipsis||"",o="rtl"===e.dir,s=0,l=t.length;if(n-=r(a),o){for(;s<l;)i=s+l>>>1,r(t.slice(i))>n?s=i+1:l=i;return a+t.slice(s)}for(;s<l;)i=1+(s+l>>>1),r(t.slice(0,i))<n?s=i:l=i-1;return t.slice(0,s)+a}(e,n):n}function f_(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function d_(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+o_(e)+"px "+f_(e,t)}function h_(e){var t=e.baseline,n=o_(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:"line-top"===t?.29*n+.5*s_(e):"line-bottom"===t?.29*n-.5*s_(e):0)}t_(!0);const p_={left:"start",center:"middle",right:"end"},m_=new Ab;function g_(e){var t,n=e.x||0,r=e.y||0,i=e.radius||0;return i&&(t=(e.theta||0)-Fy,n+=i*Math.cos(t),r+=i*Math.sin(t)),m_.x1=n,m_.y1=r,m_}function v_(e,t,n){var r,i=e_.height(t),a=t.align,o=g_(t),s=o.x1,l=o.y1,c=t.dx||0,u=(t.dy||0)+h_(t)-Math.round(.8*i),f=l_(t);if(Ts(f)?(i+=s_(t)*(f.length-1),r=f.reduce(((e,n)=>Math.max(e,e_.width(t,n))),0)):r=e_.width(t,f),"center"===a?c-=r/2:"right"===a&&(c-=r),e.set(c+=s,u+=l,c+r,u+i),t.angle&&!n)e.rotate(t.angle*Iy,s,l);else if(2===n)return e.rotatedPoints(t.angle*Iy,s,l);return e}var y_={type:"text",tag:"text",nested:!1,attr:function(e,t){var n,r=t.dx||0,i=(t.dy||0)+h_(t),a=g_(t),o=a.x1,s=a.y1,l=t.angle||0;e("text-anchor",p_[t.align]||"start"),l?(n=wx(o,s)+" "+Ax(l),(r||i)&&(n+=" "+wx(r,i))):n=wx(o+r,s+i),e("transform",n)},bound:v_,draw:function(e,t,n){px(t,(t=>{var r,i,a,o,s,l,c,u=null==t.opacity?1:t.opacity;if(!(n&&!n.intersects(t.bounds)||0===u||t.fontSize<=0||null==t.text||0===t.text.length)){if(e.font=d_(t),e.textAlign=t.align||"left",i=(r=g_(t)).x1,a=r.y1,t.angle&&(e.save(),e.translate(i,a),e.rotate(t.angle*Iy),i=a=0),i+=t.dx||0,a+=(t.dy||0)+h_(t),l=l_(t),ax(e,t),Ts(l))for(s=s_(t),o=0;o<l.length;++o)c=u_(t,l[o]),t.fill&&cx(e,t,u)&&e.fillText(c,i,a),t.stroke&&fx(e,t,u)&&e.strokeText(c,i,a),a+=s;else c=u_(t,l),t.fill&&cx(e,t,u)&&e.fillText(c,i,a),t.stroke&&fx(e,t,u)&&e.strokeText(c,i,a);t.angle&&e.restore()}}))},pick:bx((function(e,t,n,r,i,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=g_(t),s=o.x1,l=o.y1,c=v_(m_,t,1),u=-t.angle*Iy,f=Math.cos(u),d=Math.sin(u),h=f*i-d*a+(s-f*s+d*l),p=d*i+f*a+(l-d*s-f*l);return c.contains(h,p)})),isect:function(e,t){const n=v_(m_,e,2);return ix(t,n[0],n[1],n[2],n[3])||ix(t,n[0],n[1],n[4],n[5])||ix(t,n[4],n[5],n[6],n[7])||ix(t,n[2],n[3],n[6],n[7])}},b_=Mx("trail",(function(e,t){return vb.context(e)(t)}),(function(e,t){for(var n,r,i=e.length;--i>=0;)if(!1!==e[i].defined&&(n=e[i].x-t[0])*n+(r=e[i].y-t[1])*r<(n=e[i].size||1)*n)return e[i];return null})),x_={arc:Tx,area:Sx,group:Ix,image:qx,line:Hx,path:Wx,rect:Yx,rule:Kx,shape:Zx,symbol:Jx,text:y_,trail:b_};function __(e,t,n){var r=x_[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Ab),e,n)}var w_={mark:null};function A_(e,t,n){var r,i,a,o,s=x_[e.marktype],l=s.bound,c=e.items,u=c&&c.length;if(s.nested)return u?a=c[0]:(w_.mark=e,a=w_),o=__(a,l,n),t=t&&t.union(o)||o;if(t=t||e.bounds&&e.bounds.clear()||new Ab,u)for(r=0,i=c.length;r<i;++r)t.union(__(c[r],l,n));return e.bounds=t}const k_=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function E_(e,t){return JSON.stringify(e,k_,t)}function T_(e){return M_("string"==typeof e?JSON.parse(e):e)}function M_(e){var t,n,r,i=e.marktype,a=e.items;if(a)for(n=0,r=a.length;n<r;++n)t=i?"mark":"group",a[n][t]=e,a[n].zindex&&(a[n][t].zdirty=!0),"group"===(i||t)&&M_(a[n]);return i&&A_(e),e}class S_{constructor(e){arguments.length?this.root=T_(e):(this.root=C_({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Eb(this.root)])}toJSON(e){return E_(this.root,e||0)}mark(e,t,n){const r=C_(e,t=t||this.root.items[0]);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}}function C_(e,t){const n={bounds:new Ab,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return null!=e.aria&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function O_(e,t,n){return!e&&"undefined"!=typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function R_(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function N_(e,t,n,r){var i,a=e.childNodes[t];return a&&a.tagName.toLowerCase()===n.toLowerCase()||(i=a||null,a=O_(e.ownerDocument,n,r),e.insertBefore(a,i)),a}function L_(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function D_(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function P_(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}class I_{constructor(e,t){this._active=null,this._handlers={},this._loader=e||vf(),this._tooltip=t||F_}initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()}scene(e){return arguments.length?(this._scene=e,this):this._scene}on(){}off(){}_handlerIndex(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1}handlers(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const e in t)n.push(...t[e]);return n}eventName(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)}handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then((t=>{const n=new MouseEvent(e.type,e),r=O_(null,"a");for(const e in t)r.setAttribute(e,t[e]);r.dispatchEvent(n)})).catch((()=>{}))}handleTooltip(e,t,n){if(t&&null!=t.tooltip){t=function(e,t,n,r){var i,a,o=e&&e.mark;if(o&&(i=x_[o.marktype]).tip){for((a=P_(t,n))[0]-=r[0],a[1]-=r[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=i.tip(o.items,a)}return e}(t,e,this.canvas(),this._origin);const r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}}getItemBoundingClientRect(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,a=i.width(),o=i.height();let s=i.x1+r[0]+n.left,l=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)s+=e.x||0,l+=e.y||0;return{x:s,y:l,width:a,height:o,left:s,top:l,right:s+a,bottom:l+o}}}function F_(e,t,n,r){e.element().setAttribute("title",r||"")}class z_{constructor(e){this._el=null,this._bgcolor=null,this._loader=new Tb(e)}initialize(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)}resize(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this}dirty(){}render(e,t){const n=this;return n._call=function(){n._render(e,t)},n._call(),n._call=null,n}_render(){}renderAsync(e,t){const n=this.render(e,t);return this._ready?this._ready.then((()=>n)):Promise.resolve(n)}_load(e,t){var n=this,r=n._loader[e](t);if(!n._ready){const e=n._call;n._ready=n._loader.ready().then((t=>{t&&e(),n._ready=null}))}return r}sanitizeURL(e){return this._load("sanitizeURL",e)}loadImage(e){return this._load("loadImage",e)}}const j_="dragenter",B_="dragleave",U_="dragover",$_="pointerdown",q_="pointermove",H_="pointerout",V_="pointerover",W_="mousedown",G_="mousemove",Y_="mouseout",X_="mouseover",K_="click",Z_="mousewheel",J_="touchstart",Q_="touchmove",ew="touchend",tw=["keydown","keypress","keyup",j_,B_,U_,$_,"pointerup",q_,H_,V_,W_,"mouseup",G_,Y_,X_,K_,"dblclick","wheel",Z_,J_,Q_,ew],nw=q_,rw=Y_,iw=K_;class aw extends I_{constructor(e,t){super(e,t),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=tw,this.pointermove=cw([q_,G_],[V_,X_],[H_,Y_]),this.dragover=cw([U_],[j_],[B_]),this.pointerout=uw([H_,Y_]),this.dragleave=uw([B_])}initialize(e,t,n){return this._canvas=e&&R_(e,"canvas"),[K_,W_,$_,q_,H_,B_].forEach((e=>sw(this,e))),super.initialize(e,t,n)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(e){this.fire(Z_,e)}pointerdown(e){this._down=this._active,this.fire($_,e)}mousedown(e){this._down=this._active,this.fire(W_,e)}click(e){this._down===this._active&&(this.fire(K_,e),this._down=null)}touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(J_,e,!0)}touchmove(e){this.fire(Q_,e,!0)}touchend(e){this.fire(ew,e,!0),this._touch=null}fire(e,t,n){const r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===iw&&r&&r.href?this.handleHref(t,r,r.href):e!==nw&&e!==rw||this.handleTooltip(t,r,e!==rw),i)for(let e=0,n=i.length;e<n;++e)i[e].handler.call(this._obj,t,r)}on(e,t){const n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(sw(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this}off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this}pickEvent(e){const t=P_(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])}pick(e,t,n,r,i){const a=this.context();return x_[e.marktype].pick.call(this,a,e,t,n,r,i)}}const ow=e=>e===J_||e===Q_||e===ew?[J_,Q_,ew]:[e];function sw(e,t){ow(t).forEach((t=>function(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?n=>e[t](n):n=>e.fire(t,n)))}(e,t)))}function lw(e,t,n){t.forEach((t=>e.fire(t,n)))}function cw(e,t,n){return function(r){const i=this._active,a=this.pickEvent(r);a===i||(i&&i.exit||lw(this,n,r),this._active=a,lw(this,t,r)),lw(this,e,r)}}function uw(e){return function(t){lw(this,e,t),this._active=null}}function fw(e,t,n,r,i,a){const o="undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,s=e.getContext("2d"),l=o?"undefined"!=typeof window&&window.devicePixelRatio||1:i;e.width=t*l,e.height=n*l;for(const e in a)s[e]=a[e];return o&&1!==l&&(e.style.width=t+"px",e.style.height=n+"px"),s.pixelRatio=l,s.setTransform(l,0,0,l,l*r[0],l*r[1]),e}class dw extends z_{constructor(e){super(e),this._options={},this._redraw=!1,this._dirty=new Ab,this._tempb=new Ab}initialize(e,t,n,r,i,a){return this._options=a||{},this._canvas=this._options.externalContext?null:Gm(1,1,this._options.type),e&&this._canvas&&(L_(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(e,t,n,r,i)}resize(e,t,n,r){if(super.resize(e,t,n,r),this._canvas)fw(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const e=this._options.externalContext;e||us("CanvasRenderer is missing a valid canvas or context"),e.scale(this._scale,this._scale),e.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)}_render(e,t){const n=this.context(),r=this._origin,i=this._width,a=this._height,o=this._dirty,s=hw(r,i,a);n.save();const l=this._redraw||o.empty()?(this._redraw=!1,s.expand(1)):function(e,t,n){t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio);return t.translate(-n[0]%1,-n[1]%1),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}(n,s.intersect(o),r);return this.clear(-r[0],-r[1],i,a),this.draw(n,e,l,t),n.restore(),o.clear(),this}draw(e,t,n,r){if("group"!==t.marktype&&null!=r&&!r.includes(t.marktype))return;const i=x_[t.marktype];t.clip&&function(e,t){var n=t.clip;e.save(),Qs(n)?(e.beginPath(),n(e),e.clip()):Cx(e,t.group)}(e,t),i.draw.call(this,e,t,n,r),t.clip&&e.restore()}clear(e,t,n,r){const i=this._options,a=this.context();"pdf"===i.type||i.externalContext||a.clearRect(e,t,n,r),null!=this._bgcolor&&(a.fillStyle=this._bgcolor,a.fillRect(e,t,n,r))}}const hw=(e,t,n)=>(new Ab).set(0,0,t,n).translate(-e[0],-e[1]);class pw extends I_{constructor(e,t){super(e,t);const n=this;n._hrefHandler=mw(n,((e,t)=>{t&&t.href&&n.handleHref(e,t,t.href)})),n._tooltipHandler=mw(n,((e,t)=>{n.handleTooltip(e,t,e.type!==rw)}))}initialize(e,t,n){let r=this._svg;return r&&(r.removeEventListener(iw,this._hrefHandler),r.removeEventListener(nw,this._tooltipHandler),r.removeEventListener(rw,this._tooltipHandler)),this._svg=r=e&&R_(e,"svg"),r&&(r.addEventListener(iw,this._hrefHandler),r.addEventListener(nw,this._tooltipHandler),r.addEventListener(rw,this._tooltipHandler)),super.initialize(e,t,n)}canvas(){return this._svg}on(e,t){const n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){const i={type:e,handler:t,listener:mw(this,t)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this}off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}}const mw=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},gw="aria-hidden",vw="aria-label",yw="role",bw="aria-roledescription",xw="graphics-object",_w="graphics-symbol",ww=(e,t,n)=>({[yw]:e,[bw]:t,[vw]:n||void 0}),Aw=Fl(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),kw={axis:{desc:"axis",caption:function(e){const t=e.datum,n=e.orient,r=t.title?Cw(e):null,i=e.context,a=i.scales[t.scale].value,o=i.dataflow.locale(),s=a.type,l="left"===n||"right"===n?"Y":"X";return`${l}-axis`+(r?` titled '${r}'`:"")+` for a ${Uv(s)?"discrete":s} scale`+` with ${_y(o,a,e)}`}},legend:{desc:"legend",caption:function(e){const t=e.datum,n=t.title?Cw(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,a=Object.keys(i),o=e.context,s=o.scales[i[a[0]]].value,l=o.dataflow.locale();return function(e){return e.length?e[0].toUpperCase()+e.slice(1):e}(r)+(n?` titled '${n}'`:"")+` for ${function(e){return e=e.map((e=>e+("fill"===e||"stroke"===e?" color":""))),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Ns(e)}(a)}`+` with ${_y(l,s,e)}`}},"title-text":{desc:"title",caption:e=>`Title text '${Sw(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${Sw(e)}'`}},Ew={ariaRole:yw,ariaRoleDescription:bw,description:vw};function Tw(e,t){const n=!1===t.aria;if(e(gw,n||void 0),n||null==t.description)for(const t in Ew)e(Ew[t],void 0);else{const n=t.mark.marktype;e(vw,t.description),e(yw,t.ariaRole||("group"===n?xw:_w)),e(bw,t.ariaRoleDescription||`${n} mark`)}}function Mw(e){return!1===e.aria?{[gw]:!0}:Aw[e.role]?null:kw[e.role]?function(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return ww(t.role||_w,t.desc,n.description||r(n))}catch(e){return null}}(e,kw[e.role]):function(e){const t=e.marktype,n="group"===t||"text"===t||e.items.some((e=>null!=e.description&&!1!==e.aria));return ww(n?xw:_w,`${t} mark container`,e.description)}(e)}function Sw(e){return Zs(e.text).join(" ")}function Cw(e){try{return Zs(Ns(e.items).items[0].text).join(" ")}catch(e){return null}}const Ow=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Rw=e=>Ow(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function Nw(){let e="",t="",n="";const r=[],i=()=>t=n="",a=(e,n)=>(null!=n&&(t+=` ${e}="${Rw(n)}"`),o),o={open(s){(a=>{t&&(e+=`${t}>${n}`,i()),r.push(a)})(s),t="<"+s;for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];for(const e of c)for(const t in e)a(t,e[t]);return o},close(){const a=r.pop();return e+=t?t+(n?`>${n}</${a}>`:"/>"):`</${a}>`,i(),o},attr:a,text:e=>(n+=Ow(e),o),toString:()=>e};return o}const Lw=e=>Dw(Nw(),e)+"";function Dw(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let t=0;t<r;++t)e.attr(n[t].name,n[t].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const t of n)3===t.nodeType?e.text(t.nodeValue):Dw(e,t)}return e.close()}const Pw={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Iw={blend:"mix-blend-mode"},Fw={fill:"none","stroke-miterlimit":10},zw="http://www.w3.org/2000/xmlns/",jw=Fx.xmlns;class Bw extends z_{constructor(e){super(e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=N_(e,0,"svg",jw),this._svg.setAttributeNS(zw,"xmlns",jw),this._svg.setAttributeNS(zw,"xmlns:xlink",Fx["xmlns:xlink"]),this._svg.setAttribute("version",Fx.version),this._svg.setAttribute("class","marks"),L_(e,1),this._root=N_(this._svg,0,"g",jw),Kw(this._root,Fw),L_(this._svg,1)),this.background(this._bgcolor),super.initialize(e,t,n,r,i)}background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),super.background(...arguments)}resize(e,t,n,r){return super.resize(e,t,n,r),this._svg&&(Kw(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=N_(e,0,"rect",jw),Kw(n,{width:this._width,height:this._height,fill:t}));const r=Lw(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r}_render(e,t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e,void 0,t),L_(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))}isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,r,i,a,o,s,l;for(o=0,s=e.length;o<s;++o)n=e[o],r=n.mark,r.marktype!==i&&(i=r.marktype,a=x_[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,Uw(n,t),r.items.forEach((e=>{e.dirty=t}))),r.zdirty||(n.exit?(a.nested&&r.items.length?(l=r.items[0],l._svg&&this._update(a,l._svg,l)):n._svg&&(l=n._svg.parentNode,l&&l.removeChild(n._svg)),n._svg=null):(n=a.nested?r.items[0]:n,n._update!==t&&(n._svg&&n._svg.ownerSVGElement?this._update(a,n._svg,n):(this._dirtyAll=!1,Uw(n,t)),n._update=t)));return!this._dirtyAll}mark(e,t,n,r){if(!this.isDirty(t))return t._svg;const i=this._svg,a=t.marktype,o=x_[a],s=!1===t.interactive?"none":null,l="g"===o.tag,c=Hw(t,e,n,"g",i);if("group"!==a&&null!=r&&!r.includes(a))return L_(c,0),t._svg;c.setAttribute("class",D_(t));const u=Mw(t);for(const e in u)Zw(c,e,u[e]);l||Zw(c,"pointer-events",s),Zw(c,"clip-path",t.clip?wb(this,t,t.group):null);let f=null,d=0;const h=e=>{const t=this.isDirty(e),n=Hw(e,c,f,o.tag,i);t&&(this._update(o,n,e),l&&function(e,t,n,r){t=t.lastChild.previousSibling;let i,a=0;px(n,(n=>{i=e.mark(t,n,i,r),++a})),L_(t,1+a)}(this,n,e,r)),f=n,++d};return o.nested?t.items.length&&h(t.items[0]):px(t,h),L_(c,d),c}_update(e,t,n){Vw=t,Ww=t.__values__,Tw(Yw,n),e.attr(Yw,n,this);const r=Gw[e.type];r&&r.call(this,e,t,n),Vw&&this.style(Vw,n)}style(e,t){if(null!=t){for(const n in Pw){let r="font"===n?f_(t):t[n];if(r===Ww[n])continue;const i=Pw[n];null==r?e.removeAttribute(i):(ky(r)&&(r=Ey(r,this._defs.gradient,Jw())),e.setAttribute(i,r+"")),Ww[n]=r}for(const n in Iw)Xw(e,Iw[n],t[n])}}defs(){const e=this._svg,t=this._defs;let n=t.el,r=0;for(const i in t.gradient)n||(t.el=n=N_(e,1,"defs",jw)),r=$w(n,t.gradient[i],r);for(const i in t.clipping)n||(t.el=n=N_(e,1,"defs",jw)),r=qw(n,t.clipping[i],r);n&&(0===r?(e.removeChild(n),t.el=null):L_(n,r))}_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}}function Uw(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function $w(e,t,n){let r,i,a;if("radial"===t.gradient){let r=N_(e,n++,"pattern",jw);Kw(r,{id:Ay+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),r=N_(r,0,"rect",jw),Kw(r,{width:1,height:1,fill:`url(${Jw()}#${t.id})`}),Kw(e=N_(e,n++,"radialGradient",jw),{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else Kw(e=N_(e,n++,"linearGradient",jw),{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)a=N_(e,r,"stop",jw),a.setAttribute("offset",t.stops[r].offset),a.setAttribute("stop-color",t.stops[r].color);return L_(e,r),n}function qw(e,t,n){let r;return(e=N_(e,n,"clipPath",jw)).setAttribute("id",t.id),t.path?(r=N_(e,0,"path",jw),r.setAttribute("d",t.path)):(r=N_(e,0,"rect",jw),Kw(r,{x:0,y:0,width:t.width,height:t.height})),L_(e,1),n+1}function Hw(e,t,n,r,i){let a,o=e._svg;if(!o&&(a=t.ownerDocument,o=O_(a,r,jw),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},"g"===r))){const t=O_(a,"path",jw);o.appendChild(t),t.__data__=e;const n=O_(a,"g",jw);o.appendChild(n),n.__data__=e;const r=O_(a,"path",jw);o.appendChild(r),r.__data__=e,r.__values__={fill:"default"}}return(o.ownerSVGElement!==i||function(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}let Vw=null,Ww=null;const Gw={group(e,t,n){const r=Vw=t.childNodes[2];Ww=r.__values__,e.foreground(Yw,n,this),Ww=t.__values__,Vw=t.childNodes[1],e.content(Yw,n,this);const i=Vw=t.childNodes[0];e.background(Yw,n,this);const a=!1===n.mark.interactive?"none":null;if(a!==Ww.events&&(Zw(r,"pointer-events",a),Zw(i,"pointer-events",a),Ww.events=a),n.strokeForeground&&n.stroke){const e=n.fill;Zw(r,"display",null),this.style(i,n),Zw(i,"stroke",null),e&&(n.fill=null),Ww=r.__values__,this.style(r,n),e&&(n.fill=e),Vw=null}else Zw(r,"display","none")},image(e,t,n){!1===n.smooth?(Xw(t,"image-rendering","optimizeSpeed"),Xw(t,"image-rendering","pixelated")):Xw(t,"image-rendering",null)},text(e,t,n){const r=l_(n);let i,a,o,s;Ts(r)?(a=r.map((e=>u_(n,e))),i=a.join("\n"),i!==Ww.text&&(L_(t,0),o=t.ownerDocument,s=s_(n),a.forEach(((e,r)=>{const i=O_(o,"tspan",jw);i.__data__=n,i.textContent=e,r&&(i.setAttribute("x",0),i.setAttribute("dy",s)),t.appendChild(i)})),Ww.text=i)):(a=u_(n,r),a!==Ww.text&&(t.textContent=a,Ww.text=a)),Zw(t,"font-family",f_(n)),Zw(t,"font-size",o_(n)+"px"),Zw(t,"font-style",n.fontStyle),Zw(t,"font-variant",n.fontVariant),Zw(t,"font-weight",n.fontWeight)}};function Yw(e,t,n){t!==Ww[e]&&(n?function(e,t,n,r){null!=n?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}(Vw,e,t,n):Zw(Vw,e,t),Ww[e]=t)}function Xw(e,t,n){n!==Ww[t]&&(null==n?e.style.removeProperty(t):e.style.setProperty(t,n+""),Ww[t]=n)}function Kw(e,t){for(const n in t)Zw(e,n,t[n])}function Zw(e,t,n){null!=n?e.setAttribute(t,n):e.removeAttribute(t)}function Jw(){let e;return"undefined"==typeof window?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class Qw extends z_{constructor(e){super(e),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(e){const t=Nw();t.open("svg",ll({},Fx,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&"transparent"!==n&&"none"!==n&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",Fw,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this}mark(e,t){const n=x_[t.marktype],r=n.tag,i=[Tw,n.attr];e.open("g",{class:D_(t),"clip-path":t.clip?wb(this,t,t.group):null},Mw(t),{"pointer-events":"g"!==r&&!1===t.interactive?"none":null});const a=a=>{const o=this.href(a);if(o&&e.open("a",o),e.open(r,this.attr(t,a,i,"g"!==r?r:null)),"text"===r){const t=l_(a);if(Ts(t)){const n={x:0,dy:s_(a)};for(let r=0;r<t.length;++r)e.open("tspan",r?n:null).text(u_(a,t[r])).close()}else e.text(u_(a,t))}else if("g"===r){const r=a.strokeForeground,i=a.fill,o=a.stroke;r&&o&&(a.stroke=null),e.open("path",this.attr(t,a,n.background,"bgrect")).close(),e.open("g",this.attr(t,a,n.content)),px(a,(t=>this.mark(e,t))),e.close(),r&&o?(i&&(a.fill=null),a.stroke=o,e.open("path",this.attr(t,a,n.foreground,"bgrect")).close(),i&&(a.fill=i)):e.open("path",this.attr(t,a,n.foreground,"bgfore")).close()}e.close(),o&&e.close()};return n.nested?t.items&&t.items.length&&a(t.items[0]):px(t,a),e.close()}href(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then((e=>{e["xlink:href"]=e.href,e.href=null,(this._hrefs||(this._hrefs={}))[t]=e}))}return null}attr(e,t,n,r){const i={},a=(e,t,n,r)=>{i[r||e]=t};return Array.isArray(n)?n.forEach((e=>e(a,t,this))):n(a,t,this),r&&function(e,t,n,r,i){let a;if(null==t)return e;"bgrect"===r&&!1===n.interactive&&(e["pointer-events"]="none");if("bgfore"===r&&(!1===n.interactive&&(e["pointer-events"]="none"),e.display="none",null!==t.fill))return e;"image"===r&&!1===t.smooth&&(a=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]);"text"===r&&(e["font-family"]=f_(t),e["font-size"]=o_(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const n in Pw){let r=t[n];const a=Pw[n];("transparent"!==r||"fill"!==a&&"stroke"!==a)&&null!=r&&(ky(r)&&(r=Ey(r,i.gradient,"")),e[a]=r)}for(const e in Iw){const n=t[e];null!=n&&(a=a||[],a.push(`${Iw[e]}: ${n};`))}a&&(e.style=a.join(" "))}(i,t,e,r,this._defs),i}defs(e){const t=this._defs.gradient,n=this._defs.clipping;if(0!==Object.keys(t).length+Object.keys(n).length){e.open("defs");for(const n in t){const r=t[n],i=r.stops;"radial"===r.gradient?(e.open("pattern",{id:Ay+n,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+n+")"}).close(),e.close(),e.open("radialGradient",{id:n,fx:r.x1,fy:r.y1,fr:r.r1,cx:r.x2,cy:r.y2,r:r.r2})):e.open("linearGradient",{id:n,x1:r.x1,x2:r.x2,y1:r.y1,y2:r.y2});for(let t=0;t<i.length;++t)e.open("stop",{offset:i[t].offset,"stop-color":i[t].color}).close();e.close()}for(const t in n){const r=n[t];e.open("clipPath",{id:t}),r.path?e.open("path",{d:r.path}).close():e.open("rect",{x:0,y:0,width:r.width,height:r.height}).close(),e.close()}e.close()}}}const eA={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function tA(e){eA.svgMarkTypes=e.svgMarkTypes??["text"],eA.svgOnTop=e.svgOnTop??!0,eA.debug=e.debug??!1}class nA extends z_{constructor(e){super(e),this._svgRenderer=new Bw(e),this._canvasRenderer=new dw(e)}initialize(e,t,n,r,i){this._root_el=N_(e,0,"div");const a=N_(this._root_el,0,"div"),o=N_(this._root_el,1,"div");return this._root_el.style.position="relative",eA.debug||(a.style.height="100%",o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.height="100%",o.style.width="100%"),this._svgEl=eA.svgOnTop?o:a,this._canvasEl=eA.svgOnTop?a:o,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,t,n,r,i),this._svgRenderer.initialize(this._svgEl,t,n,r,i),super.initialize(e,t,n,r,i)}dirty(e){return eA.svgMarkTypes.includes(e.mark.marktype)?this._svgRenderer.dirty(e):this._canvasRenderer.dirty(e),this}_render(e,t){const n=(t??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter((e=>!eA.svgMarkTypes.includes(e)));this._svgRenderer.render(e,eA.svgMarkTypes),this._canvasRenderer.render(e,n)}resize(e,t,n,r){return super.resize(e,t,n,r),this._svgRenderer.resize(e,t,n,r),this._canvasRenderer.resize(e,t,n,r),this}background(e){return eA.svgOnTop?this._canvasRenderer.background(e):this._svgRenderer.background(e),this}}class rA extends aw{constructor(e,t){super(e,t)}initialize(e,t,n){const r=N_(N_(e,0,"div"),eA.svgOnTop?0:1,"div");return super.initialize(r,t,n)}}const iA="canvas",aA="hybrid",oA="none",sA={Canvas:iA,PNG:"png",SVG:"svg",Hybrid:aA,None:oA},lA={};function cA(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(lA[e]=t,this):lA[e]}function uA(e,t,n){const r=[],i=(new Ab).union(t),a=e.marktype;return a?fA(e,i,n,r):"group"===a?dA(e,i,n,r):us("Intersect scene must be mark node or group item.")}function fA(e,t,n,r){if(function(e,t,n){return e.bounds&&t.intersects(e.bounds)&&("group"===e.marktype||!1!==e.interactive&&(!n||n(e)))}(e,t,n)){const i=e.items,a=e.marktype,o=i.length;let s=0;if("group"===a)for(;s<o;++s)dA(i[s],t,n,r);else for(const e=x_[a].isect;s<o;++s){const n=i[s];hA(n,t,e)&&r.push(n)}}return r}function dA(e,t,n,r){n&&n(e.mark)&&hA(e,t,x_.group.isect)&&r.push(e);const i=e.items,a=i&&i.length;if(a){const o=e.x||0,s=e.y||0;t.translate(-o,-s);for(let e=0;e<a;++e)fA(i[e],t,n,r);t.translate(o,s)}return r}function hA(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}lA[iA]=lA.png={renderer:dw,headless:dw,handler:aw},lA.svg={renderer:Bw,headless:Qw,handler:pw},lA[aA]={renderer:nA,headless:nA,handler:rA},lA[oA]={};const pA=new Ab;function mA(e){const t=e.clip;if(Qs(t))t(Gb(pA.clear()));else{if(!t)return;pA.set(0,0,e.group.width,e.group.height)}e.bounds.intersect(pA)}const gA=1e-9;function vA(e,t,n){return e===t||("path"===n?yA(e,t):e instanceof Date&&t instanceof Date?+e==+t:_l(e)&&_l(t)?Math.abs(e-t)<=gA:e&&t&&(Ms(e)||Ms(t))?function(e,t){var n,r,i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(i.sort(),a.sort(),r=i.length-1;r>=0;r--)if(i[r]!=a[r])return!1;for(r=i.length-1;r>=0;r--)if(!vA(e[n=i[r]],t[n],n))return!1;return typeof e==typeof t}(e,t):e==t)}function yA(e,t){return vA(Py(e),Py(t))}function bA(){_b(),wy=0}const xA="top",_A="left",wA="right",AA="bottom",kA="start",EA="middle",TA="end",MA="group",SA="axis",CA="title",OA="frame",RA="scope",NA="legend",LA="row-header",DA="row-footer",PA="row-title",IA="column-header",FA="column-footer",zA="column-title",jA="padding",BA="fit",UA="fit-x",$A="fit-y",qA="none",HA="all",VA="each",WA="flush",GA="column",YA="row";function XA(e){nd.call(this,null,e)}function KA(e,t,n){return t(e.bounds.clear(),e,n)}gl(XA,nd,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,a=x_[i],o=a.bound;let s,l=r.bounds;if(a.nested)r.items.length&&n.dirty(r.items[0]),l=KA(r,o),r.items.forEach((e=>{e.bounds.clear().union(l)}));else if(i===MA||e.modified())switch(t.visit(t.MOD,(e=>n.dirty(e))),l.clear(),r.items.forEach((e=>l.union(KA(e,o)))),r.role){case SA:case NA:case CA:t.reflow()}else s=t.changed(t.REM),t.visit(t.ADD,(e=>{l.union(KA(e,o))})),t.visit(t.MOD,(e=>{s=s||l.alignsWith(e.bounds),n.dirty(e),l.union(KA(e,o))})),s&&(l.clear(),r.items.forEach((e=>l.union(e.bounds))));return mA(r),t.modifies("bounds")}});const ZA=":vega_identifier:";function JA(e){nd.call(this,0,e)}function QA(e){nd.call(this,null,e)}function ek(e){nd.call(this,null,e)}JA.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},gl(JA,nd,{transform(e,t){const n=function(e){return e._signals[ZA]||(e._signals[ZA]=e.add(0))}(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,(e=>e[r]=e[r]||++i)),n.set(this.value=i),t}}),gl(QA,nd,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,function(e){const t=e.groups,n=e.parent;return t&&1===t.size?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===MA?Eb:kb;return t.visit(t.ADD,(e=>r.call(e,n))),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});const tk={parity:e=>e.filter(((e,t)=>t%2?e.opacity=0:1)),greedy:(e,t)=>{let n;return e.filter(((e,r)=>r&&nk(n.bounds,e.bounds,t)?e.opacity=0:(n=e,1)))}},nk=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),rk=(e,t)=>{for(var n,r=1,i=e.length,a=e[0].bounds;r<i;a=n,++r)if(nk(a,n=e[r].bounds,t))return!0},ik=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},ak=e=>(e.forEach((e=>e.opacity=1)),e),ok=(e,t)=>e.reflow(t.modified()).modifies("opacity");function sk(e){nd.call(this,null,e)}gl(ek,nd,{transform(e,t){const n=tk[e.method]||tk.parity,r=e.separation||0;let i,a,o=t.materialize(t.SOURCE).source;if(!o||!o.length)return;if(!e.method)return e.modified("method")&&(ak(o),t=ok(t,e)),t;if(o=o.filter(ik),!o.length)return;if(e.sort&&(o=o.slice().sort(e.sort)),i=ak(o),t=ok(t,e),i.length>=3&&rk(i,r)){do{i=n(i,r)}while(i.length>=3&&rk(i,r));i.length<3&&!Ns(o).opacity&&(i.length>1&&(Ns(i).opacity=0),Ns(o).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(a=((e,t,n)=>{var r=e.range(),i=new Ab;return t===xA||t===AA?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),e=>i.encloses(e.bounds)})(e.boundScale,e.boundOrient,+e.boundTolerance),o.forEach((e=>{a(e)||(e.opacity=0)})));const s=i[0].mark.bounds.clear();return o.forEach((e=>{e.opacity&&s.union(e.bounds)})),t}}),gl(sk,nd,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,(e=>n.dirty(e))),t.fields&&t.fields.zindex){const e=t.source&&t.source[0];e&&(e.mark.zdirty=!0)}}});const lk=new Ab;function ck(e,t,n){return e[t]===n?0:(e[t]=n,1)}function uk(e){var t=e.items[0].orient;return t===_A||t===wA}function fk(e,t,n,r){var i,a,o=t.items[0],s=o.datum,l=null!=o.translate?o.translate:.5,c=o.orient,u=function(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}(s),f=o.range,d=o.offset,h=o.position,p=o.minExtent,m=o.maxExtent,g=s.title&&o.items[u[2]].items[0],v=o.titlePadding,y=o.bounds,b=g&&c_(g),x=0,_=0;switch(lk.clear().union(y),y.clear(),(i=u[0])>-1&&y.union(o.items[i].bounds),(i=u[1])>-1&&y.union(o.items[i].bounds),c){case xA:x=h||0,_=-d,a=Math.max(p,Math.min(m,-y.y1)),y.add(0,-a).add(f,0),g&&dk(e,g,a,v,b,0,-1,y);break;case _A:x=-d,_=h||0,a=Math.max(p,Math.min(m,-y.x1)),y.add(-a,0).add(0,f),g&&dk(e,g,a,v,b,1,-1,y);break;case wA:x=n+d,_=h||0,a=Math.max(p,Math.min(m,y.x2)),y.add(0,0).add(a,f),g&&dk(e,g,a,v,b,1,1,y);break;case AA:x=h||0,_=r+d,a=Math.max(p,Math.min(m,y.y2)),y.add(0,0).add(f,a),g&&dk(e,g,a,v,0,0,1,y);break;default:x=o.x,_=o.y}return Cb(y.translate(x,_),o),ck(o,"x",x+l)|ck(o,"y",_+l)&&(o.bounds=lk,e.dirty(o),o.bounds=y,e.dirty(o)),o.mark.bounds.clear().union(y)}function dk(e,t,n,r,i,a,o,s){const l=t.bounds;if(t.auto){const s=o*(n+i+r);let c=0,u=0;e.dirty(t),a?c=(t.x||0)-(t.x=s):u=(t.y||0)-(t.y=s),t.mark.bounds.clear().union(l.translate(-c,-u)),e.dirty(t)}s.union(l)}const hk=(e,t)=>Math.floor(Math.min(e,t)),pk=(e,t)=>Math.ceil(Math.max(e,t));function mk(e){return(new Ab).set(0,0,e.width||0,e.height||0)}function gk(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function vk(e,t,n){const r=Ms(e)?e[t]:e;return null!=r?r:void 0!==n?n:0}function yk(e){return e<0?Math.ceil(-e):0}function bk(e,t,n){var r,i,a,o,s,l,c,u,f,d,h,p=!n.nodirty,m=n.bounds===WA?mk:gk,g=lk.set(0,0,0,0),v=vk(n.align,GA),y=vk(n.align,YA),b=vk(n.padding,GA),x=vk(n.padding,YA),_=n.columns||t.length,w=_<=0?1:Math.ceil(t.length/_),A=t.length,k=Array(A),E=Array(_),T=0,M=Array(A),S=Array(w),C=0,O=Array(A),R=Array(A),N=Array(A);for(i=0;i<_;++i)E[i]=0;for(i=0;i<w;++i)S[i]=0;for(i=0;i<A;++i)l=t[i],s=N[i]=m(l),l.x=l.x||0,O[i]=0,l.y=l.y||0,R[i]=0,a=i%_,o=~~(i/_),T=Math.max(T,c=Math.ceil(s.x2)),C=Math.max(C,u=Math.ceil(s.y2)),E[a]=Math.max(E[a],c),S[o]=Math.max(S[o],u),k[i]=b+yk(s.x1),M[i]=x+yk(s.y1),p&&e.dirty(t[i]);for(i=0;i<A;++i)i%_==0&&(k[i]=0),i<_&&(M[i]=0);if(v===VA)for(a=1;a<_;++a){for(h=0,i=a;i<A;i+=_)h<k[i]&&(h=k[i]);for(i=a;i<A;i+=_)k[i]=h+E[a-1]}else if(v===HA){for(h=0,i=0;i<A;++i)i%_&&h<k[i]&&(h=k[i]);for(i=0;i<A;++i)i%_&&(k[i]=h+T)}else for(v=!1,a=1;a<_;++a)for(i=a;i<A;i+=_)k[i]+=E[a-1];if(y===VA)for(o=1;o<w;++o){for(h=0,r=(i=o*_)+_;i<r;++i)h<M[i]&&(h=M[i]);for(i=o*_;i<r;++i)M[i]=h+S[o-1]}else if(y===HA){for(h=0,i=_;i<A;++i)h<M[i]&&(h=M[i]);for(i=_;i<A;++i)M[i]=h+C}else for(y=!1,o=1;o<w;++o)for(r=(i=o*_)+_;i<r;++i)M[i]+=S[o-1];for(f=0,i=0;i<A;++i)f=k[i]+(i%_?f:0),O[i]+=f-t[i].x;for(a=0;a<_;++a)for(d=0,i=a;i<A;i+=_)d+=M[i],R[i]+=d-t[i].y;if(v&&vk(n.center,GA)&&w>1)for(i=0;i<A;++i)(f=(s=v===HA?T:E[i%_])-N[i].x2-t[i].x-O[i])>0&&(O[i]+=f/2);if(y&&vk(n.center,YA)&&1!==_)for(i=0;i<A;++i)(d=(s=y===HA?C:S[~~(i/_)])-N[i].y2-t[i].y-R[i])>0&&(R[i]+=d/2);for(i=0;i<A;++i)g.union(N[i].translate(O[i],R[i]));switch(f=vk(n.anchor,"x"),d=vk(n.anchor,"y"),vk(n.anchor,GA)){case TA:f-=g.width();break;case EA:f-=g.width()/2}switch(vk(n.anchor,YA)){case TA:d-=g.height();break;case EA:d-=g.height()/2}for(f=Math.round(f),d=Math.round(d),g.clear(),i=0;i<A;++i)t[i].mark.bounds.clear();for(i=0;i<A;++i)(l=t[i]).x+=O[i]+=f,l.y+=R[i]+=d,g.union(l.mark.bounds.union(l.bounds.translate(O[i],R[i]))),p&&e.dirty(l);return g}function xk(e,t,n){var r,i,a,o,s,l,c,u=function(e){var t,n,r=e.items,i=r.length,a=0;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;a<i;++a)if(n=(t=r[a]).items,t.marktype===MA)switch(t.role){case SA:case NA:case CA:break;case LA:o.rowheaders.push(...n);break;case DA:o.rowfooters.push(...n);break;case IA:o.colheaders.push(...n);break;case FA:o.colfooters.push(...n);break;case PA:o.rowtitle=n[0];break;case zA:o.coltitle=n[0];break;default:o.marks.push(...n)}return o}(t),f=u.marks,d=n.bounds===WA?_k:wk,h=n.offset,p=n.columns||f.length,m=p<=0?1:Math.ceil(f.length/p),g=m*p;const v=bk(e,f,n);v.empty()&&v.set(0,0,0,0),u.rowheaders&&(l=vk(n.headerBand,YA,null),r=Ak(e,u.rowheaders,f,p,m,-vk(h,"rowHeader"),hk,0,d,"x1",0,p,1,l)),u.colheaders&&(l=vk(n.headerBand,GA,null),i=Ak(e,u.colheaders,f,p,p,-vk(h,"columnHeader"),hk,1,d,"y1",0,1,p,l)),u.rowfooters&&(l=vk(n.footerBand,YA,null),a=Ak(e,u.rowfooters,f,p,m,vk(h,"rowFooter"),pk,0,d,"x2",p-1,p,1,l)),u.colfooters&&(l=vk(n.footerBand,GA,null),o=Ak(e,u.colfooters,f,p,p,vk(h,"columnFooter"),pk,1,d,"y2",g-p,1,p,l)),u.rowtitle&&(s=vk(n.titleAnchor,YA),c=vk(h,"rowTitle"),c=s===TA?a+c:r-c,l=vk(n.titleBand,YA,.5),kk(e,u.rowtitle,c,0,v,l)),u.coltitle&&(s=vk(n.titleAnchor,GA),c=vk(h,"columnTitle"),c=s===TA?o+c:i-c,l=vk(n.titleBand,GA,.5),kk(e,u.coltitle,c,1,v,l))}function _k(e,t){return"x1"===t?e.x||0:"y1"===t?e.y||0:"x2"===t?(e.x||0)+(e.width||0):"y2"===t?(e.y||0)+(e.height||0):void 0}function wk(e,t){return e.bounds[t]}function Ak(e,t,n,r,i,a,o,s,l,c,u,f,d,h){var p,m,g,v,y,b,x,_,w,A=n.length,k=0,E=0;if(!A)return k;for(p=u;p<A;p+=f)n[p]&&(k=o(k,l(n[p],c)));if(!t.length)return k;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),k+=a,m=0,v=t.length;m<v;++m)e.dirty(t[m]),t[m].mark.bounds.clear();for(p=u,m=0,v=t.length;m<v;++m,p+=f){for(y=(b=t[m]).mark.bounds,g=p;g>=0&&null==(x=n[g]);g-=d);s?(_=null==h?x.x:Math.round(x.bounds.x1+h*x.bounds.width()),w=k):(_=k,w=null==h?x.y:Math.round(x.bounds.y1+h*x.bounds.height())),y.union(b.bounds.translate(_-(b.x||0),w-(b.y||0))),b.x=_,b.y=w,e.dirty(b),E=o(E,y[c])}return E}function kk(e,t,n,r,i,a){if(t){e.dirty(t);var o=n,s=n;r?o=Math.round(i.x1+a*i.width()):s=Math.round(i.y1+a*i.height()),t.bounds.translate(o-(t.x||0),s-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=s,e.dirty(t)}}function Ek(e,t,n,r,i,a,o){const s=function(e,t){const n=e[t]||{};return(t,r)=>null!=n[t]?n[t]:null!=e[t]?e[t]:r}(n,t),l=function(e,t){let n=-1/0;return e.forEach((e=>{null!=e.offset&&(n=Math.max(n,e.offset))})),n>-1/0?n:t}(e,s("offset",0)),c=s("anchor",kA),u=c===TA?1:c===EA?.5:0,f={align:VA,bounds:s("bounds",WA),columns:"vertical"===s("direction")?1:e.length,padding:s("margin",8),center:s("center"),nodirty:!0};switch(t){case _A:f.anchor={x:Math.floor(r.x1)-l,column:TA,y:u*(o||r.height()+2*r.y1),row:c};break;case wA:f.anchor={x:Math.ceil(r.x2)+l,y:u*(o||r.height()+2*r.y1),row:c};break;case xA:f.anchor={y:Math.floor(i.y1)-l,row:TA,x:u*(a||i.width()+2*i.x1),column:c};break;case AA:f.anchor={y:Math.ceil(i.y2)+l,x:u*(a||i.width()+2*i.x1),column:c};break;case"top-left":f.anchor={x:l,y:l};break;case"top-right":f.anchor={x:a-l,y:l,column:TA};break;case"bottom-left":f.anchor={x:l,y:o-l,row:TA};break;case"bottom-right":f.anchor={x:a-l,y:o-l,column:TA,row:TA}}return f}function Tk(e,t){var n,r,i=t.items[0],a=i.datum,o=i.orient,s=i.bounds,l=i.x,c=i.y;return i._bounds?i._bounds.clear().union(s):i._bounds=s.clone(),s.clear(),function(e,t,n){var r=t.padding,i=r-n.x,a=r-n.y;if(t.datum.title){var o=t.items[1].items[0],s=o.anchor,l=t.titlePadding||0,c=r-o.x,u=r-o.y;switch(o.orient){case _A:i+=Math.ceil(o.bounds.width())+l;break;case wA:case AA:break;default:a+=o.bounds.height()+l}switch((i||a)&&Sk(e,n,i,a),o.orient){case _A:u+=Mk(t,n,o,s,1,1);break;case wA:c+=Mk(t,n,o,TA,0,0)+l,u+=Mk(t,n,o,s,1,1);break;case AA:c+=Mk(t,n,o,s,0,0),u+=Mk(t,n,o,TA,-1,0,1)+l;break;default:c+=Mk(t,n,o,s,0,0)}(c||u)&&Sk(e,o,c,u),(c=Math.round(o.bounds.x1-r))<0&&(Sk(e,n,-c,0),Sk(e,o,-c,0))}else(i||a)&&Sk(e,n,i,a)}(e,i,i.items[0].items[0]),s=function(e,t){return e.items.forEach((e=>t.union(e.bounds))),t.x1=e.padding,t.y1=e.padding,t}(i,s),n=2*i.padding,r=2*i.padding,s.empty()||(n=Math.ceil(s.width()+n),r=Math.ceil(s.height()+r)),"symbol"===a.type&&function(e){const t=e.reduce(((e,t)=>(e[t.column]=Math.max(t.bounds.x2-t.x,e[t.column]||0),e)),{});e.forEach((e=>{e.width=t[e.column],e.height=e.bounds.y2-e.y}))}(i.items[0].items[0].items[0].items),o!==qA&&(i.x=l=0,i.y=c=0),i.width=n,i.height=r,Cb(s.set(l,c,l+n,c+r),i),i.mark.bounds.clear().union(s),i}function Mk(e,t,n,r,i,a,o){const s="symbol"!==e.datum.type,l=n.datum.vgrad,c=(!s||!a&&l||o?t:t.items[0]).bounds[i?"y2":"x2"]-e.padding,u=l&&a?c:0,f=l&&a?0:c,d=i<=0?0:c_(n);return Math.round(r===kA?u:r===TA?f-d:.5*(c-d))}function Sk(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function Ck(e){nd.call(this,null,e)}gl(Ck,nd,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach((t=>{e.layout&&xk(n,t,e.layout),function(e,t,n){var r,i,a,o,s,l=t.items,c=Math.max(0,t.width||0),u=Math.max(0,t.height||0),f=(new Ab).set(0,0,c,u),d=f.clone(),h=f.clone(),p=[];for(o=0,s=l.length;o<s;++o)switch((i=l[o]).role){case SA:(uk(i)?d:h).union(fk(e,i,c,u));break;case CA:r=i;break;case NA:p.push(Tk(e,i));break;case OA:case RA:case LA:case DA:case PA:case IA:case FA:case zA:d.union(i.bounds),h.union(i.bounds);break;default:f.union(i.bounds)}if(p.length){const t={};p.forEach((e=>{(a=e.orient||wA)!==qA&&(t[a]||(t[a]=[])).push(e)}));for(const r in t){const i=t[r];bk(e,i,Ek(i,r,n.legends,d,h,c,u))}p.forEach((t=>{const r=t.bounds;if(r.equals(t._bounds)||(t.bounds=t._bounds,e.dirty(t),t.bounds=r,e.dirty(t)),!n.autosize||n.autosize.type!==BA&&n.autosize.type!==UA&&n.autosize.type!==$A)f.union(r);else switch(t.orient){case _A:case wA:f.add(r.x1,0).add(r.x2,0);break;case xA:case AA:f.add(0,r.y1).add(0,r.y2)}}))}f.union(d).union(h),r&&f.union(function(e,t,n,r,i){var a,o=t.items[0],s=o.frame,l=o.orient,c=o.anchor,u=o.offset,f=o.padding,d=o.items[0].items[0],h=o.items[1]&&o.items[1].items[0],p=l===_A||l===wA?r:n,m=0,g=0,v=0,y=0,b=0;if(s!==MA?l===_A?(m=i.y2,p=i.y1):l===wA?(m=i.y1,p=i.y2):(m=i.x1,p=i.x2):l===_A&&(m=r,p=0),a=c===kA?m:c===TA?p:(m+p)/2,h&&h.text){switch(l){case xA:case AA:b=d.bounds.height()+f;break;case _A:y=d.bounds.width()+f;break;case wA:y=-d.bounds.width()-f}lk.clear().union(h.bounds),lk.translate(y-(h.x||0),b-(h.y||0)),ck(h,"x",y)|ck(h,"y",b)&&(e.dirty(h),h.bounds.clear().union(lk),h.mark.bounds.clear().union(lk),e.dirty(h)),lk.clear().union(h.bounds)}else lk.clear();switch(lk.union(d.bounds),l){case xA:g=a,v=i.y1-lk.height()-u;break;case _A:g=i.x1-lk.width()-u,v=a;break;case wA:g=i.x2+lk.width()+u,v=a;break;case AA:g=a,v=i.y2+u;break;default:g=o.x,v=o.y}return ck(o,"x",g)|ck(o,"y",v)&&(lk.translate(g,v),e.dirty(o),o.bounds.clear().union(lk),t.bounds.clear().union(lk),e.dirty(o)),o.bounds}(e,r,c,u,f));t.clip&&f.set(0,0,t.width||0,t.height||0);!function(e,t,n,r){const i=r.autosize||{},a=i.type;if(e._autosize<1||!a)return;let o=e._width,s=e._height,l=Math.max(0,t.width||0),c=Math.max(0,Math.ceil(-n.x1)),u=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-l)),h=Math.max(0,Math.ceil(n.y2-u));if(i.contains===jA){const t=e.padding();o-=t.left+t.right,s-=t.top+t.bottom}a===qA?(c=0,f=0,l=o,u=s):a===BA?(l=Math.max(0,o-c-d),u=Math.max(0,s-f-h)):a===UA?(l=Math.max(0,o-c-d),s=u+f+h):a===$A?(o=l+c+d,u=Math.max(0,s-f-h)):"pad"===a&&(o=l+c+d,s=u+f+h);e._resizeView(o,s,l,u,[c,f],i.resize)}(e,t,f,n)}(n,t,e)})),function(e){return e&&"legend-entry"!==e.mark.role}(e.mark.group)?t.reflow():t}});var Ok=n(53827);function Rk(e){nd.call(this,null,e)}function Nk(e){nd.call(this,null,e)}function Lk(){return Ef({})}function Dk(e){nd.call(this,null,e)}function Pk(e){nd.call(this,[],e)}gl(Rk,nd,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,a=e.scale,o=oy(a,null==e.count?e.values?e.values.length:10:e.count,e.minstep),s=e.format||cy(n,a,o,e.formatSpecifier,e.formatType,!!e.values),l=e.values?sy(a,e.values,o):ly(a,o);return i&&(r.rem=i),i=l.map(((e,t)=>Ef({index:t/(l.length-1||1),value:e,label:s(e)}))),e.extra&&i.length&&i.push(Ef({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}}),gl(Nk,nd,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||Lk,a=e.key||Af,o=this.value;return Ts(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(a))&&us("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=function(e){const t=pl().test((e=>e.exit));return t.lookup=n=>t.get(e(n)),t}(a)),t.visit(t.ADD,(e=>{const t=a(e);let n=o.get(t);n?n.exit?(o.empty--,r.add.push(n)):r.mod.push(n):(n=i(e),o.set(t,n),r.add.push(n)),n.datum=e,n.exit=!1})),t.visit(t.MOD,(e=>{const t=a(e),n=o.get(t);n&&(n.datum=e,r.mod.push(n))})),t.visit(t.REM,(e=>{const t=a(e),n=o.get(t);e!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++o.empty)})),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}}),gl(Dk,nd,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,a=t.encode;if(Ts(a)){if(!n.changed()&&!a.every((e=>i[e])))return t.StopPropagation;a=a[0],n.encode=null}var o="enter"===a,s=i.update||ys,l=i.enter||ys,c=i.exit||ys,u=(a&&!o?i[a]:s)||ys;if(t.changed(t.ADD)&&(t.visit(t.ADD,(t=>{l(t,e),s(t,e)})),n.modifies(l.output),n.modifies(s.output),u!==ys&&u!==s&&(t.visit(t.ADD,(t=>{u(t,e)})),n.modifies(u.output))),t.changed(t.REM)&&c!==ys&&(t.visit(t.REM,(t=>{c(t,e)})),n.modifies(c.output)),o||u!==ys){const i=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(i,(t=>{const i=l(t,e)||r;(u(t,e)||i)&&n.mod.push(t)})),n.mod.length&&n.modifies(l.output)):t.visit(i,(t=>{(u(t,e)||r)&&n.mod.push(t)})),n.mod.length&&n.modifies(u.output)}return n.changed()?n:t.StopPropagation}}),gl(Pk,nd,{transform(e,t){if(null!=this.value&&!e.modified())return t.StopPropagation;var n,r,i,a,o,s=t.dataflow.locale(),l=t.fork(t.NO_SOURCE|t.NO_FIELDS),c=this.value,u=e.type||ny,f=e.scale,d=+e.limit,h=oy(f,null==e.count?5:e.count,e.minstep),p=!!e.values||u===ny,m=e.format||py(s,f,h,u,e.formatSpecifier,e.formatType,p),g=e.values||hy(f,h);return c&&(l.rem=c),u===ny?(d&&g.length>d?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),c=g.slice(0,d-1),o=!0):c=g,Qs(i=e.size)?(e.values||0!==f(c[0])||(c=c.slice(1)),a=c.reduce(((t,n)=>Math.max(t,i(n,e))),0)):i=ol(a=i||8),c=c.map(((t,n)=>Ef({index:n,label:m(t,n,c),value:t,offset:a,size:i(t,e)}))),o&&(o=g[c.length],c.push(Ef({index:c.length,label:`${g.length-c.length} entries`,value:o,offset:a,size:i(o,e)})))):"gradient"===u?(n=f.domain(),r=Kv(f,n[0],Ns(n)),g.length<3&&!e.values&&n[0]!==Ns(n)&&(g=[n[0],Ns(n)]),c=g.map(((e,t)=>Ef({index:t,label:m(e,t,g),value:e,perc:r(e)})))):(i=g.length-1,r=function(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Ns(t),a=i-r;if(e.type===xv){const e=n?a/n:.1;r-=e,i+=e,a=i-r}return e=>(e-r)/a}(f),c=g.map(((e,t)=>Ef({index:t,label:m(e,t,g),value:e,perc:t?r(e):0,perc2:t===i?1:r(g[t+1])})))),l.source=c,l.add=c,this.value=c,l}});const Ik=e=>e.source.x,Fk=e=>e.source.y,zk=e=>e.target.x,jk=e=>e.target.y;function Bk(e){nd.call(this,{},e)}Bk.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},gl(Bk,nd,{transform(e,t){var n=e.sourceX||Ik,r=e.sourceY||Fk,i=e.targetX||zk,a=e.targetY||jk,o=e.as||"path",s=e.orient||"vertical",l=e.shape||"line",c=Hk.get(l+"-"+s)||Hk.get(l);return c||us("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,(e=>{e[o]=c(n(e),r(e),i(e),a(e))})),t.reflow(e.modified()).modifies(o)}});const Uk=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,$k=(e,t,n,r)=>{var i=n-e,a=r-t,o=Math.hypot(i,a)/2;return"M"+e+","+t+"A"+o+","+o+" "+180*Math.atan2(a,i)/Math.PI+" 0 1 "+n+","+r},qk=(e,t,n,r)=>{const i=n-e,a=r-t,o=.2*(i+a),s=.2*(a-i);return"M"+e+","+t+"C"+(e+o)+","+(t+s)+" "+(n+s)+","+(r-o)+" "+n+","+r},Hk=pl({line:Uk,"line-radial":(e,t,n,r)=>Uk(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),arc:$k,"arc-radial":(e,t,n,r)=>$k(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),curve:qk,"curve-radial":(e,t,n,r)=>qk(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),"orthogonal-horizontal":(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,"orthogonal-vertical":(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,"orthogonal-radial":(e,t,n,r)=>{const i=Math.cos(e),a=Math.sin(e),o=Math.cos(n),s=Math.sin(n);return"M"+t*i+","+t*a+"A"+t+","+t+" 0 0,"+((Math.abs(n-e)>Math.PI?n<=e:n>e)?1:0)+" "+t*o+","+t*s+"L"+r*o+","+r*s},"diagonal-horizontal":(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},"diagonal-vertical":(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},"diagonal-radial":(e,t,n,r)=>{const i=Math.cos(e),a=Math.sin(e),o=Math.cos(n),s=Math.sin(n),l=(t+r)/2;return"M"+t*i+","+t*a+"C"+l*i+","+l*a+" "+l*o+","+l*s+" "+r*o+","+r*s}});function Vk(e){nd.call(this,null,e)}Vk.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},gl(Vk,nd,{transform(e,t){var n,r,i,a=e.as||["startAngle","endAngle"],o=a[0],s=a[1],l=e.field||gs,c=e.startAngle||0,u=null!=e.endAngle?e.endAngle:2*Math.PI,f=t.source,d=f.map(l),h=d.length,p=c,m=(u-c)/(0,Ok.A)(d),g=mh(h);for(e.sort&&g.sort(((e,t)=>d[e]-d[t])),n=0;n<h;++n)i=d[g[n]],(r=f[g[n]])[o]=p,r[s]=p+=i*m;return this.value=d,t.reflow(e.modified()).modifies(a)}});function Wk(e){return Bv(e)&&e!==gv}const Gk=Fl(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function Yk(e){nd.call(this,null,e),this.modified(!0)}function Xk(e,t,n){if(qv(e)){var r=Math.abs(t.reduce(((e,t)=>e+(t<0?-1:t>0?1:0)),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Nl(t))}return t}function Kk(e,t,n){return Qs(e)&&(t||n)?Gv(e,Zk(t||[0,1],n)):e}function Zk(e,t){return t?e.slice().reverse():e}function Jk(e){nd.call(this,null,e)}gl(Yk,nd,{transform(e,t){var n=t.dataflow,r=this.value,i=function(e){var t,n=e.type,r="";if(n===gv)return gv+"-"+cv;(function(e){const t=e.type;return Bv(t)&&t!==pv&&t!==mv&&(e.scheme||e.range&&e.range.length&&e.range.every(Al))})(e)&&(r=2===(t=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(null!=e.domainMid):0)?gv+"-":3===t?vv+"-":"");return(r+n||cv).toLowerCase()}(e);for(i in r&&i===r.type||(this.value=r=Fv(i)()),e)if(!Gk[i]){if("padding"===i&&Wk(r.type))continue;Qs(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return function(e,t,n){var r=e.type,i=t.round||!1,a=t.range;if(null!=t.rangeStep)a=function(e,t,n){e!==Av&&e!==wv&&us("Only band and point scales support rangeStep.");var r=(null!=t.paddingOuter?t.paddingOuter:t.padding)||0,i=e===wv?1:(null!=t.paddingInner?t.paddingInner:t.padding)||0;return[0,t.rangeStep*lv(n,i,r)]}(r,t,n);else if(t.scheme&&(a=function(e,t,n){var r,i=t.schemeExtent;Ts(t.scheme)?r=Yv(t.scheme,t.interpolate,t.interpolateGamma):(r=ty(t.scheme.toLowerCase()))||us(`Unrecognized scheme name: ${t.scheme}`);return n=e===xv?n+1:e===kv?n-1:e===yv||e===bv?+t.schemeCount||5:n,Hv(e)?Kk(r,i,t.reverse):Qs(r)?Xv(Kk(r,i),n):e===_v?r:r.slice(0,n)}(r,t,n),Qs(a))){if(e.interpolator)return e.interpolator(a);us(`Scale type ${r} does not support interpolating color schemes.`)}if(a&&Hv(r))return e.interpolator(Yv(Zk(a,t.reverse),t.interpolate,t.interpolateGamma));a&&t.interpolate&&e.interpolate?e.interpolate(Zv(t.interpolate,t.interpolateGamma)):Qs(e.round)?e.round(i):Qs(e.rangeRound)&&e.interpolate(i?tg.A:Qm.A);a&&e.range(Zk(a,t.reverse))}(r,e,function(e,t,n){let r=t.bins;if(r&&!Ts(r)){const t=e.domain(),n=t[0],i=Ns(t),a=r.step;let o=null==r.start?n:r.start,s=null==r.stop?i:r.stop;a||us("Scale bins parameter missing step property."),o<n&&(o=a*Math.ceil(n/a)),s>i&&(s=a*Math.floor(i/a)),r=mh(o,s+a/2,a)}r?e.bins=r:e.bins&&delete e.bins;e.type===kv&&(r?t.domain||t.domainRaw||(e.domain(r),n=r.length):e.bins=e.domain());return n}(r,e,function(e,t,n){const r=function(e,t,n){return t?(e.domain(Xk(e.type,t,n)),t.length):-1}(e,t.domainRaw,n);if(r>-1)return r;var i,a,o=t.domain,s=e.type,l=t.zero||void 0===t.zero&&function(e){const t=e.type;return!e.bins&&(t===cv||t===fv||t===dv)}(e);if(!o)return 0;if((l||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)&&(i=(o=o.slice()).length-1||1,l&&(o[0]>0&&(o[0]=0),o[i]<0&&(o[i]=0)),null!=t.domainMin&&(o[0]=t.domainMin),null!=t.domainMax&&(o[i]=t.domainMax),null!=t.domainMid)){const e=(a=t.domainMid)>o[i]?i+1:a<o[0]?0:i;e!==i&&n.warn("Scale domainMid exceeds domain min or max.",a),o.splice(e,0,a)}Wk(s)&&t.padding&&o[0]!==Ns(o)&&(o=function(e,t,n,r,i,a){var o=Math.abs(Ns(n)-n[0]),s=o/(o-2*r),l=e===uv?Ws(t,null,s):e===dv?Gs(t,null,s,.5):e===fv?Gs(t,null,s,i||1):e===hv?Ys(t,null,s,a||1):Vs(t,null,s);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}(s,o,t.range,t.padding,t.exponent,t.constant));e.domain(Xk(s,o,n)),s===_v&&e.unknown(t.domainImplicit?Yg:void 0);t.nice&&e.nice&&e.nice(!0!==t.nice&&oy(e,t.nice)||null);return o.length}(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),gl(Jk,nd,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Cf(e.sort)),this.modified(n),t}});const Qk="zero",eE="center",tE="normalize",nE=["y0","y1"];function rE(e){nd.call(this,null,e)}function iE(e,t,n,r,i){for(var a,o=(t-e.sum)/2,s=e.length,l=0;l<s;++l)(a=e[l])[r]=o,a[i]=o+=Math.abs(n(a))}function aE(e,t,n,r,i){for(var a,o=1/e.sum,s=0,l=e.length,c=0,u=0;c<l;++c)(a=e[c])[r]=s,a[i]=s=o*(u+=Math.abs(n(a)))}function oE(e,t,n,r,i){for(var a,o,s=0,l=0,c=e.length,u=0;u<c;++u)(a=+n(o=e[u]))<0?(o[r]=l,o[i]=l+=a):(o[r]=s,o[i]=s+=a)}rE.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Qk,values:[Qk,eE,tE]},{name:"as",type:"string",array:!0,length:2,default:nE}]},gl(rE,nd,{transform(e,t){var n,r,i,a,o=e.as||nE,s=o[0],l=o[1],c=Cf(e.sort),u=e.field||gs,f=e.offset===eE?iE:e.offset===tE?aE:oE;for(n=function(e,t,n,r){var i,a,o,s,l,c,u,f,d,h=[],p=e=>e(l);if(null==t)h.push(e.slice());else for(i={},a=0,o=e.length;a<o;++a)l=e[a],(u=i[c=t.map(p)])||(i[c]=u=[],h.push(u)),u.push(l);for(c=0,d=0,s=h.length;c<s;++c){for(a=0,f=0,o=(u=h[c]).length;a<o;++a)f+=Math.abs(r(u[a]));u.sum=f,f>d&&(d=f),n&&u.sort(n)}return h.max=d,h}(t.source,e.groupby,c,u),r=0,i=n.length,a=n.max;r<i;++r)f(n[r],a,u,s,l);return t.reflow(e.modified()).modifies(o)}});const sE=e=>e;function lE(e,t){e&&uE.hasOwnProperty(e.type)&&uE[e.type](e,t)}var cE={Feature:function(e,t){lE(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)lE(n[r].geometry,t)}},uE={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){fE(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)fE(n[r],t,0)},Polygon:function(e,t){dE(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)dE(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)lE(n[r],t)}};function fE(e,t,n){var r,i=-1,a=e.length-n;for(t.lineStart();++i<a;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function dE(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)fE(e[n],t,1);t.polygonEnd()}function hE(e,t){e&&cE.hasOwnProperty(e.type)?cE[e.type](e,t):lE(e,t)}class pE{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=t[r],a=e+i,o=Math.abs(e)<Math.abs(i)?e-(a-i):i-(a-e);o&&(t[n++]=o),e=a}return t[n]=e,this._n=n+1,this}valueOf(){const e=this._partials;let t,n,r,i=this._n,a=0;if(i>0){for(a=e[--i];i>0&&(t=a,n=e[--i],a=t+n,r=n-(a-t),!r););i>0&&(r<0&&e[i-1]<0||r>0&&e[i-1]>0)&&(n=2*r,t=a+n,n==t-a&&(a=t))}return a}}var mE=1e-6,gE=1e-12,vE=Math.PI,yE=vE/2,bE=vE/4,xE=2*vE,_E=180/vE,wE=vE/180,AE=Math.abs,kE=Math.atan,EE=Math.atan2,TE=Math.cos,ME=Math.ceil,SE=Math.exp,CE=(Math.floor,Math.hypot),OE=Math.log,RE=Math.pow,NE=Math.sin,LE=Math.sign||function(e){return e>0?1:e<0?-1:0},DE=Math.sqrt,PE=Math.tan;function IE(e){return e>1?0:e<-1?vE:Math.acos(e)}function FE(e){return e>1?yE:e<-1?-yE:Math.asin(e)}function zE(){}var jE,BE,UE,$E,qE=new pE,HE=new pE,VE={point:zE,lineStart:zE,lineEnd:zE,polygonStart:function(){VE.lineStart=WE,VE.lineEnd=XE},polygonEnd:function(){VE.lineStart=VE.lineEnd=VE.point=zE,qE.add(AE(HE)),HE=new pE},result:function(){var e=qE/2;return qE=new pE,e}};function WE(){VE.point=GE}function GE(e,t){VE.point=YE,jE=UE=e,BE=$E=t}function YE(e,t){HE.add($E*e-UE*t),UE=e,$E=t}function XE(){YE(jE,BE)}const KE=VE;var ZE=1/0,JE=ZE,QE=-ZE,eT=QE,tT={point:function(e,t){e<ZE&&(ZE=e);e>QE&&(QE=e);t<JE&&(JE=t);t>eT&&(eT=t)},lineStart:zE,lineEnd:zE,polygonStart:zE,polygonEnd:zE,result:function(){var e=[[ZE,JE],[QE,eT]];return QE=eT=-(JE=ZE=1/0),e}};const nT=tT;var rT,iT,aT,oT,sT=0,lT=0,cT=0,uT=0,fT=0,dT=0,hT=0,pT=0,mT=0,gT={point:vT,lineStart:yT,lineEnd:_T,polygonStart:function(){gT.lineStart=wT,gT.lineEnd=AT},polygonEnd:function(){gT.point=vT,gT.lineStart=yT,gT.lineEnd=_T},result:function(){var e=mT?[hT/mT,pT/mT]:dT?[uT/dT,fT/dT]:cT?[sT/cT,lT/cT]:[NaN,NaN];return sT=lT=cT=uT=fT=dT=hT=pT=mT=0,e}};function vT(e,t){sT+=e,lT+=t,++cT}function yT(){gT.point=bT}function bT(e,t){gT.point=xT,vT(aT=e,oT=t)}function xT(e,t){var n=e-aT,r=t-oT,i=DE(n*n+r*r);uT+=i*(aT+e)/2,fT+=i*(oT+t)/2,dT+=i,vT(aT=e,oT=t)}function _T(){gT.point=vT}function wT(){gT.point=kT}function AT(){ET(rT,iT)}function kT(e,t){gT.point=ET,vT(rT=aT=e,iT=oT=t)}function ET(e,t){var n=e-aT,r=t-oT,i=DE(n*n+r*r);uT+=i*(aT+e)/2,fT+=i*(oT+t)/2,dT+=i,hT+=(i=oT*e-aT*t)*(aT+e),pT+=i*(oT+t),mT+=3*i,vT(aT=e,oT=t)}const TT=gT;function MT(e){this._context=e}MT.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,xE)}},result:zE};var ST,CT,OT,RT,NT,LT=new pE,DT={point:zE,lineStart:function(){DT.point=PT},lineEnd:function(){ST&&IT(CT,OT),DT.point=zE},polygonStart:function(){ST=!0},polygonEnd:function(){ST=null},result:function(){var e=+LT;return LT=new pE,e}};function PT(e,t){DT.point=IT,CT=RT=e,OT=NT=t}function IT(e,t){RT-=e,NT-=t,LT.add(DE(RT*RT+NT*NT)),RT=e,NT=t}const FT=DT;let zT,jT,BT,UT;class $T{constructor(e){this._append=null==e?qT:function(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return qT;if(t!==zT){const e=10**t;zT=t,jT=function(t){let n=1;this._+=t[0];for(const r=t.length;n<r;++n)this._+=Math.round(arguments[n]*e)/e+t[n]}}return jT}(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(e,t){switch(this._point){case 0:this._append`M${e},${t}`,this._point=1;break;case 1:this._append`L${e},${t}`;break;default:if(this._append`M${e},${t}`,this._radius!==BT||this._append!==jT){const e=this._radius,t=this._;this._="",this._append`m0,${e}a${e},${e} 0 1,1 0,${-2*e}a${e},${e} 0 1,1 0,${2*e}z`,BT=e,jT=this._append,UT=this._,this._=t}this._+=UT}}result(){const e=this._;return this._="",e.length?e:null}}function qT(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function HT(e,t){let n,r,i=3,a=4.5;function o(e){return e&&("function"==typeof a&&r.pointRadius(+a.apply(this,arguments)),hE(e,n(r))),r.result()}return o.area=function(e){return hE(e,n(KE)),KE.result()},o.measure=function(e){return hE(e,n(FT)),FT.result()},o.bounds=function(e){return hE(e,n(nT)),nT.result()},o.centroid=function(e){return hE(e,n(TT)),TT.result()},o.projection=function(t){return arguments.length?(n=null==t?(e=null,sE):(e=t).stream,o):e},o.context=function(e){return arguments.length?(r=null==e?(t=null,new $T(i)):new MT(t=e),"function"!=typeof a&&r.pointRadius(a),o):t},o.pointRadius=function(e){return arguments.length?(a="function"==typeof e?e:(r.pointRadius(+e),+e),o):a},o.digits=function(e){if(!arguments.length)return i;if(null==e)i=null;else{const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);i=t}return null===t&&(r=new $T(i)),o},o.projection(e).digits(i).context(t)}function VT(){var e,t=[];return{point:function(t,n,r){e.push([t,n,r])},lineStart:function(){t.push(e=[])},lineEnd:zE,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function WT(e,t){return AE(e[0]-t[0])<mE&&AE(e[1]-t[1])<mE}function GT(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function YT(e,t,n,r,i){var a,o,s=[],l=[];if(e.forEach((function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],o=e[t];if(WT(r,o)){if(!r[2]&&!o[2]){for(i.lineStart(),a=0;a<t;++a)i.point((r=e[a])[0],r[1]);return void i.lineEnd()}o[0]+=2*mE}s.push(n=new GT(r,e,null,!0)),l.push(n.o=new GT(r,null,n,!1)),s.push(n=new GT(o,e,null,!1)),l.push(n.o=new GT(o,null,n,!0))}})),s.length){for(l.sort(t),XT(s),XT(l),a=0,o=l.length;a<o;++a)l[a].e=n=!n;for(var c,u,f=s[0];;){for(var d=f,h=!0;d.v;)if((d=d.n)===f)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,o=c.length;a<o;++a)i.point((u=c[a])[0],u[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((u=c[a])[0],u[1]);else r(d.x,d.p.x,-1,i);d=d.p}c=(d=d.o).z,h=!h}while(!d.v);i.lineEnd()}}}function XT(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function KT(e){return[EE(e[1],e[0]),FE(e[2])]}function ZT(e){var t=e[0],n=e[1],r=TE(n);return[r*TE(t),r*NE(t),NE(n)]}function JT(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function QT(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function eM(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function tM(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function nM(e){var t=DE(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function rM(e){return AE(e[0])<=vE?e[0]:LE(e[0])*((AE(e[0])+vE)%xE-vE)}function iM(e){return Array.from(function*(e){for(const t of e)yield*t}(e))}function aM(e,t,n,r){return function(i){var a,o,s,l=t(i),c=VT(),u=t(c),f=!1,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=v,d.lineStart=y,d.lineEnd=b,o=[],a=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,o=iM(o);var e=function(e,t){var n=rM(t),r=t[1],i=NE(r),a=[NE(n),-TE(n),0],o=0,s=0,l=new pE;1===i?r=yE+mE:-1===i&&(r=-yE-mE);for(var c=0,u=e.length;c<u;++c)if(d=(f=e[c]).length)for(var f,d,h=f[d-1],p=rM(h),m=h[1]/2+bE,g=NE(m),v=TE(m),y=0;y<d;++y,p=x,g=w,v=A,h=b){var b=f[y],x=rM(b),_=b[1]/2+bE,w=NE(_),A=TE(_),k=x-p,E=k>=0?1:-1,T=E*k,M=T>vE,S=g*w;if(l.add(EE(S*E*NE(T),v*A+S*TE(T))),o+=M?k+E*xE:k,M^p>=n^x>=n){var C=QT(ZT(h),ZT(b));nM(C);var O=QT(a,C);nM(O);var R=(M^k>=0?-1:1)*FE(O[2]);(r>R||r===R&&(C[0]||C[1]))&&(s+=M^k>=0?1:-1)}}return(o<-mE||o<mE&&l<-1e-12)^1&s}(a,r);o.length?(f||(i.polygonStart(),f=!0),YT(o,sM,e,n,i)):e&&(f||(i.polygonStart(),f=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),o=a=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(t,n){e(t,n)&&i.point(t,n)}function p(e,t){l.point(e,t)}function m(){d.point=p,l.lineStart()}function g(){d.point=h,l.lineEnd()}function v(e,t){s.push([e,t]),u.point(e,t)}function y(){u.lineStart(),s=[]}function b(){v(s[0][0],s[0][1]),u.lineEnd();var e,t,n,r,l=u.clean(),d=c.result(),h=d.length;if(s.pop(),a.push(s),s=null,h)if(1&l){if((t=(n=d[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),e=0;e<t;++e)i.point((r=n[e])[0],r[1]);i.lineEnd()}}else h>1&&2&l&&d.push(d.pop().concat(d.shift())),o.push(d.filter(oM))}return d}}function oM(e){return e.length>1}function sM(e,t){return((e=e.x)[0]<0?e[1]-yE-mE:yE-e[1])-((t=t.x)[0]<0?t[1]-yE-mE:yE-t[1])}const lM=aM((function(){return!0}),(function(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(a,o){var s=a>0?vE:-vE,l=AE(a-n);AE(l-vE)<mE?(e.point(n,r=(r+o)/2>0?yE:-yE),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(a,r),t=0):i!==s&&l>=vE&&(AE(n-i)<mE&&(n-=i*mE),AE(a-s)<mE&&(a-=s*mE),r=function(e,t,n,r){var i,a,o=NE(e-n);return AE(o)>mE?kE((NE(t)*(a=TE(r))*NE(n)-NE(r)*(i=TE(t))*NE(e))/(i*a*o)):(t+r)/2}(n,r,a,o),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=a,r=o),i=s},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}),(function(e,t,n,r){var i;if(null==e)i=n*yE,r.point(-vE,i),r.point(0,i),r.point(vE,i),r.point(vE,0),r.point(vE,-i),r.point(0,-i),r.point(-vE,-i),r.point(-vE,0),r.point(-vE,i);else if(AE(e[0]-t[0])>mE){var a=e[0]<t[0]?vE:-vE;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}),[-vE,-yE]);function cM(e,t,n,r,i,a){if(n){var o=TE(t),s=NE(t),l=r*n;null==i?(i=t+r*xE,a=t-l/2):(i=uM(o,i),a=uM(o,a),(r>0?i<a:i>a)&&(i+=r*xE));for(var c,u=i;r>0?u>a:u<a;u-=l)c=KT([o,-s*TE(u),-s*NE(u)]),e.point(c[0],c[1])}}function uM(e,t){(t=ZT(t))[0]-=e,nM(t);var n=IE(-t[1]);return((-t[2]<0?-n:n)+xE-mE)%xE}var fM=1e9,dM=-fM;function hM(e,t,n,r){function i(i,a){return e<=i&&i<=n&&t<=a&&a<=r}function a(i,a,s,c){var u=0,f=0;if(null==i||(u=o(i,s))!==(f=o(a,s))||l(i,a)<0^s>0)do{c.point(0===u||3===u?e:n,u>1?r:t)}while((u=(u+s+4)%4)!==f);else c.point(a[0],a[1])}function o(r,i){return AE(r[0]-e)<mE?i>0?0:3:AE(r[0]-n)<mE?i>0?2:1:AE(r[1]-t)<mE?i>0?1:0:i>0?3:2}function s(e,t){return l(e.x,t.x)}function l(e,t){var n=o(e,1),r=o(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(o){var l,c,u,f,d,h,p,m,g,v,y,b=o,x=VT(),_={point:w,lineStart:function(){_.point=A,c&&c.push(u=[]);v=!0,g=!1,p=m=NaN},lineEnd:function(){l&&(A(f,d),h&&g&&x.rejoin(),l.push(x.result()));_.point=w,g&&b.lineEnd()},polygonStart:function(){b=x,l=[],c=[],y=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,i=c.length;n<i;++n)for(var a,o,s=c[n],l=1,u=s.length,f=s[0],d=f[0],h=f[1];l<u;++l)a=d,o=h,d=(f=s[l])[0],h=f[1],o<=r?h>r&&(d-a)*(r-o)>(h-o)*(e-a)&&++t:h<=r&&(d-a)*(r-o)<(h-o)*(e-a)&&--t;return t}(),n=y&&t,i=(l=iM(l)).length;(n||i)&&(o.polygonStart(),n&&(o.lineStart(),a(null,null,1,o),o.lineEnd()),i&&YT(l,s,t,a,o),o.polygonEnd());b=o,l=c=u=null}};function w(e,t){i(e,t)&&b.point(e,t)}function A(a,o){var s=i(a,o);if(c&&u.push([a,o]),v)f=a,d=o,h=s,v=!1,s&&(b.lineStart(),b.point(a,o));else if(s&&g)b.point(a,o);else{var l=[p=Math.max(dM,Math.min(fM,p)),m=Math.max(dM,Math.min(fM,m))],x=[a=Math.max(dM,Math.min(fM,a)),o=Math.max(dM,Math.min(fM,o))];!function(e,t,n,r,i,a){var o,s=e[0],l=e[1],c=0,u=1,f=t[0]-s,d=t[1]-l;if(o=n-s,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<u&&(u=o)}else if(f>0){if(o>u)return;o>c&&(c=o)}if(o=i-s,f||!(o<0)){if(o/=f,f<0){if(o>u)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<u&&(u=o)}if(o=r-l,d||!(o>0)){if(o/=d,d<0){if(o<c)return;o<u&&(u=o)}else if(d>0){if(o>u)return;o>c&&(c=o)}if(o=a-l,d||!(o<0)){if(o/=d,d<0){if(o>u)return;o>c&&(c=o)}else if(d>0){if(o<c)return;o<u&&(u=o)}return c>0&&(e[0]=s+c*f,e[1]=l+c*d),u<1&&(t[0]=s+u*f,t[1]=l+u*d),!0}}}}}(l,x,e,t,n,r)?s&&(b.lineStart(),b.point(a,o),y=!1):(g||(b.lineStart(),b.point(l[0],l[1])),b.point(x[0],x[1]),s||b.lineEnd(),y=!1)}p=a,m=o,g=s}return _}}function pM(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n}function mM(e,t){return AE(e)>vE&&(e-=Math.round(e/xE)*xE),[e,t]}function gM(e,t,n){return(e%=xE)?t||n?pM(yM(e),bM(t,n)):yM(e):t||n?bM(t,n):mM}function vM(e){return function(t,n){return AE(t+=e)>vE&&(t-=Math.round(t/xE)*xE),[t,n]}}function yM(e){var t=vM(e);return t.invert=vM(-e),t}function bM(e,t){var n=TE(e),r=NE(e),i=TE(t),a=NE(t);function o(e,t){var o=TE(t),s=TE(e)*o,l=NE(e)*o,c=NE(t),u=c*n+s*r;return[EE(l*i-u*a,s*n-c*r),FE(u*i+l*a)]}return o.invert=function(e,t){var o=TE(t),s=TE(e)*o,l=NE(e)*o,c=NE(t),u=c*i-l*a;return[EE(l*i+c*a,s*n+u*r),FE(u*n-s*r)]},o}function xM(e){return function(t){var n=new _M;for(var r in e)n[r]=e[r];return n.stream=t,n}}function _M(){}function wM(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),hE(n,e.stream(nT)),t(nT.result()),null!=r&&e.clipExtent(r),e}function AM(e,t,n){return wM(e,(function(n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],a=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),o=+t[0][0]+(r-a*(n[1][0]+n[0][0]))/2,s=+t[0][1]+(i-a*(n[1][1]+n[0][1]))/2;e.scale(150*a).translate([o,s])}),n)}function kM(e,t,n){return AM(e,[[0,0],t],n)}function EM(e,t,n){return wM(e,(function(n){var r=+t,i=r/(n[1][0]-n[0][0]),a=(r-i*(n[1][0]+n[0][0]))/2,o=-i*n[0][1];e.scale(150*i).translate([a,o])}),n)}function TM(e,t,n){return wM(e,(function(n){var r=+t,i=r/(n[1][1]-n[0][1]),a=-i*n[0][0],o=(r-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([a,o])}),n)}mM.invert=mM,_M.prototype={constructor:_M,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var MM=TE(30*wE);function SM(e,t){return+t?function(e,t){function n(r,i,a,o,s,l,c,u,f,d,h,p,m,g){var v=c-r,y=u-i,b=v*v+y*y;if(b>4*t&&m--){var x=o+d,_=s+h,w=l+p,A=DE(x*x+_*_+w*w),k=FE(w/=A),E=AE(AE(w)-1)<mE||AE(a-f)<mE?(a+f)/2:EE(_,x),T=e(E,k),M=T[0],S=T[1],C=M-r,O=S-i,R=y*C-v*O;(R*R/b>t||AE((v*C+y*O)/b-.5)>.3||o*d+s*h+l*p<MM)&&(n(r,i,a,o,s,l,M,S,E,x/=A,_/=A,w,m,g),g.point(M,S),n(M,S,E,x,_,w,c,u,f,d,h,p,m,g))}}return function(t){var r,i,a,o,s,l,c,u,f,d,h,p,m={point:g,lineStart:v,lineEnd:b,polygonStart:function(){t.polygonStart(),m.lineStart=x},polygonEnd:function(){t.polygonEnd(),m.lineStart=v}};function g(n,r){n=e(n,r),t.point(n[0],n[1])}function v(){u=NaN,m.point=y,t.lineStart()}function y(r,i){var a=ZT([r,i]),o=e(r,i);n(u,f,c,d,h,p,u=o[0],f=o[1],c=r,d=a[0],h=a[1],p=a[2],16,t),t.point(u,f)}function b(){m.point=g,t.lineEnd()}function x(){v(),m.point=_,m.lineEnd=w}function _(e,t){y(r=e,t),i=u,a=f,o=d,s=h,l=p,m.point=y}function w(){n(u,f,c,d,h,p,i,a,r,o,s,l,16,t),m.lineEnd=b,b()}return m}}(e,t):function(e){return xM({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)}var CM=xM({point:function(e,t){this.stream.point(e*wE,t*wE)}});function OM(e,t,n,r,i,a){if(!a)return function(e,t,n,r,i){function a(a,o){return[t+e*(a*=r),n-e*(o*=i)]}return a.invert=function(a,o){return[(a-t)/e*r,(n-o)/e*i]},a}(e,t,n,r,i);var o=TE(a),s=NE(a),l=o*e,c=s*e,u=o/e,f=s/e,d=(s*n-o*t)/e,h=(s*t+o*n)/e;function p(e,a){return[l*(e*=r)-c*(a*=i)+t,n-c*e-l*a]}return p.invert=function(e,t){return[r*(u*e-f*t+d),i*(h-f*e-u*t)]},p}function RM(e){return NM((function(){return e}))()}function NM(e){var t,n,r,i,a,o,s,l,c,u,f=150,d=480,h=250,p=0,m=0,g=0,v=0,y=0,b=0,x=1,_=1,w=null,A=lM,k=null,E=sE,T=.5;function M(e){return l(e[0]*wE,e[1]*wE)}function S(e){return(e=l.invert(e[0],e[1]))&&[e[0]*_E,e[1]*_E]}function C(){var e=OM(f,0,0,x,_,b).apply(null,t(p,m)),r=OM(f,d-e[0],h-e[1],x,_,b);return n=gM(g,v,y),s=pM(t,r),l=pM(n,s),o=SM(s,T),O()}function O(){return c=u=null,M}return M.stream=function(e){return c&&u===e?c:c=CM(function(e){return xM({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}(n)(A(o(E(u=e)))))},M.preclip=function(e){return arguments.length?(A=e,w=void 0,O()):A},M.postclip=function(e){return arguments.length?(E=e,k=r=i=a=null,O()):E},M.clipAngle=function(e){return arguments.length?(A=+e?function(e){var t=TE(e),n=2*wE,r=t>0,i=AE(t)>mE;function a(e,n){return TE(e)*TE(n)>t}function o(e,n,r){var i=[1,0,0],a=QT(ZT(e),ZT(n)),o=JT(a,a),s=a[0],l=o-s*s;if(!l)return!r&&e;var c=t*o/l,u=-t*s/l,f=QT(i,a),d=tM(i,c);eM(d,tM(a,u));var h=f,p=JT(d,h),m=JT(h,h),g=p*p-m*(JT(d,d)-1);if(!(g<0)){var v=DE(g),y=tM(h,(-p-v)/m);if(eM(y,d),y=KT(y),!r)return y;var b,x=e[0],_=n[0],w=e[1],A=n[1];_<x&&(b=x,x=_,_=b);var k=_-x,E=AE(k-vE)<mE;if(!E&&A<w&&(b=w,w=A,A=b),E||k<mE?E?w+A>0^y[1]<(AE(y[0]-x)<mE?w:A):w<=y[1]&&y[1]<=A:k>vE^(x<=y[0]&&y[0]<=_)){var T=tM(h,(-p+v)/m);return eM(T,d),[y,KT(T)]}}}function s(t,n){var i=r?e:vE-e,a=0;return t<-i?a|=1:t>i&&(a|=2),n<-i?a|=4:n>i&&(a|=8),a}return aM(a,(function(e){var t,n,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(f,d){var h,p=[f,d],m=a(f,d),g=r?m?0:s(f,d):m?s(f+(f<0?vE:-vE),d):0;if(!t&&(c=l=m)&&e.lineStart(),m!==l&&(!(h=o(t,p))||WT(t,h)||WT(p,h))&&(p[2]=1),m!==l)u=0,m?(e.lineStart(),h=o(p,t),e.point(h[0],h[1])):(h=o(t,p),e.point(h[0],h[1],2),e.lineEnd()),t=h;else if(i&&t&&r^m){var v;g&n||!(v=o(p,t,!0))||(u=0,r?(e.lineStart(),e.point(v[0][0],v[0][1]),e.point(v[1][0],v[1][1]),e.lineEnd()):(e.point(v[1][0],v[1][1]),e.lineEnd(),e.lineStart(),e.point(v[0][0],v[0][1],3)))}!m||t&&WT(t,p)||e.point(p[0],p[1]),t=p,l=m,n=g},lineEnd:function(){l&&e.lineEnd(),t=null},clean:function(){return u|(c&&l)<<1}}}),(function(t,r,i,a){cM(a,e,n,i,t,r)}),r?[0,-e]:[-vE,e-vE])}(w=e*wE):(w=null,lM),O()):w*_E},M.clipExtent=function(e){return arguments.length?(E=null==e?(k=r=i=a=null,sE):hM(k=+e[0][0],r=+e[0][1],i=+e[1][0],a=+e[1][1]),O()):null==k?null:[[k,r],[i,a]]},M.scale=function(e){return arguments.length?(f=+e,C()):f},M.translate=function(e){return arguments.length?(d=+e[0],h=+e[1],C()):[d,h]},M.center=function(e){return arguments.length?(p=e[0]%360*wE,m=e[1]%360*wE,C()):[p*_E,m*_E]},M.rotate=function(e){return arguments.length?(g=e[0]%360*wE,v=e[1]%360*wE,y=e.length>2?e[2]%360*wE:0,C()):[g*_E,v*_E,y*_E]},M.angle=function(e){return arguments.length?(b=e%360*wE,C()):b*_E},M.reflectX=function(e){return arguments.length?(x=e?-1:1,C()):x<0},M.reflectY=function(e){return arguments.length?(_=e?-1:1,C()):_<0},M.precision=function(e){return arguments.length?(o=SM(s,T=e*e),O()):DE(T)},M.fitExtent=function(e,t){return AM(M,e,t)},M.fitSize=function(e,t){return kM(M,e,t)},M.fitWidth=function(e,t){return EM(M,e,t)},M.fitHeight=function(e,t){return TM(M,e,t)},function(){return t=e.apply(this,arguments),M.invert=t.invert&&S,C()}}function LM(e){var t=0,n=vE/3,r=NM(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*wE,n=e[1]*wE):[t*_E,n*_E]},i}function DM(e,t){var n=NE(e),r=(n+NE(t))/2;if(AE(r)<mE)return function(e){var t=TE(e);function n(e,n){return[e*t,NE(n)/t]}return n.invert=function(e,n){return[e/t,FE(n*t)]},n}(e);var i=1+n*(2*r-n),a=DE(i)/r;function o(e,t){var n=DE(i-2*r*NE(t))/r;return[n*NE(e*=r),a-n*TE(e)]}return o.invert=function(e,t){var n=a-t,o=EE(e,AE(n))*LE(n);return n*r<0&&(o-=vE*LE(e)*LE(n)),[o/r,FE((i-(e*e+n*n)*r*r)/(2*r))]},o}function PM(){return LM(DM).scale(155.424).center([0,33.6442])}function IM(){return PM().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function FM(e){return function(t,n){var r=TE(t),i=TE(n),a=e(r*i);return a===1/0?[2,0]:[a*i*NE(t),a*NE(n)]}}function zM(e){return function(t,n){var r=DE(t*t+n*n),i=e(r),a=NE(i),o=TE(i);return[EE(t*a,r*o),FE(r&&n*a/r)]}}var jM=FM((function(e){return DE(2/(1+e))}));jM.invert=zM((function(e){return 2*FE(e/2)}));var BM=FM((function(e){return(e=IE(e))&&e/NE(e)}));function UM(e,t){return[e,OE(PE((yE+t)/2))]}function $M(e){var t,n,r,i=RM(e),a=i.center,o=i.scale,s=i.translate,l=i.clipExtent,c=null;function u(){var a=vE*o(),s=i(function(e){function t(t){return(t=e(t[0]*wE,t[1]*wE))[0]*=_E,t[1]*=_E,t}return e=gM(e[0]*wE,e[1]*wE,e.length>2?e[2]*wE:0),t.invert=function(t){return(t=e.invert(t[0]*wE,t[1]*wE))[0]*=_E,t[1]*=_E,t},t}(i.rotate()).invert([0,0]));return l(null==c?[[s[0]-a,s[1]-a],[s[0]+a,s[1]+a]]:e===UM?[[Math.max(s[0]-a,c),t],[Math.min(s[0]+a,n),r]]:[[c,Math.max(s[1]-a,t)],[n,Math.min(s[1]+a,r)]])}return i.scale=function(e){return arguments.length?(o(e),u()):o()},i.translate=function(e){return arguments.length?(s(e),u()):s()},i.center=function(e){return arguments.length?(a(e),u()):a()},i.clipExtent=function(e){return arguments.length?(null==e?c=t=n=r=null:(c=+e[0][0],t=+e[0][1],n=+e[1][0],r=+e[1][1]),u()):null==c?null:[[c,t],[n,r]]},u()}function qM(e){return PE((yE+e)/2)}function HM(e,t){var n=TE(e),r=e===t?NE(e):OE(n/TE(t))/OE(qM(t)/qM(e)),i=n*RE(qM(e),r)/r;if(!r)return UM;function a(e,t){i>0?t<-yE+mE&&(t=-yE+mE):t>yE-mE&&(t=yE-mE);var n=i/RE(qM(t),r);return[n*NE(r*e),i-n*TE(r*e)]}return a.invert=function(e,t){var n=i-t,a=LE(r)*DE(e*e+n*n),o=EE(e,AE(n))*LE(n);return n*r<0&&(o-=vE*LE(e)*LE(n)),[o/r,2*kE(RE(i/a,1/r))-yE]},a}function VM(e,t){return[e,t]}function WM(e,t){var n=TE(e),r=e===t?NE(e):(n-TE(t))/(t-e),i=n/r+e;if(AE(r)<mE)return VM;function a(e,t){var n=i-t,a=r*e;return[n*NE(a),i-n*TE(a)]}return a.invert=function(e,t){var n=i-t,a=EE(e,AE(n))*LE(n);return n*r<0&&(a-=vE*LE(e)*LE(n)),[a/r,i-LE(r)*DE(e*e+n*n)]},a}BM.invert=zM((function(e){return e})),UM.invert=function(e,t){return[e,2*kE(SE(t))-yE]},VM.invert=VM;var GM=1.340264,YM=-.081106,XM=893e-6,KM=.003796,ZM=DE(3)/2;function JM(e,t){var n=FE(ZM*NE(t)),r=n*n,i=r*r*r;return[e*TE(n)/(ZM*(GM+3*YM*r+i*(7*XM+9*KM*r))),n*(GM+YM*r+i*(XM+KM*r))]}function QM(e,t){var n=TE(t),r=TE(e)*n;return[n*NE(e)/r,NE(t)/r]}function eS(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function tS(e,t){return[TE(t)*NE(e),NE(t)]}function nS(e,t){var n=TE(t),r=1+TE(e)*n;return[n*NE(e)/r,NE(t)/r]}function rS(e,t){return[OE(PE((yE+t)/2)),-e]}JM.invert=function(e,t){for(var n,r=t,i=r*r,a=i*i*i,o=0;o<12&&(a=(i=(r-=n=(r*(GM+YM*i+a*(XM+KM*i))-t)/(GM+3*YM*i+a*(7*XM+9*KM*i)))*r)*i*i,!(AE(n)<gE));++o);return[ZM*e*(GM+3*YM*i+a*(7*XM+9*KM*i))/TE(r),FE(NE(r)/ZM)]},QM.invert=zM(kE),eS.invert=function(e,t){var n,r=t,i=25;do{var a=r*r,o=a*a;r-=n=(r*(1.007226+a*(.015085+o*(.028874*a-.044475-.005916*o)))-t)/(1.007226+a*(.045255+o*(.259866*a-.311325-.005916*11*o)))}while(AE(n)>mE&&--i>0);return[e/(.8707+(a=r*r)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),r]},tS.invert=zM(FE),nS.invert=zM((function(e){return 2*kE(e)})),rS.invert=function(e,t){return[-t,2*kE(SE(e))-yE]};var iS=Math.abs,aS=(Math.atan,Math.atan2,Math.ceil,Math.cos),oS=(Math.exp,Math.floor,Math.log,Math.max,Math.min,Math.pow,Math.round,Math.sign,Math.sin),sS=(Math.tan,Math.PI),lS=sS/2,cS=(Math.SQRT1_2,fS(2));fS(sS);function uS(e){return e>1?lS:e<-1?-lS:Math.asin(e)}function fS(e){return e>0?Math.sqrt(e):0}function dS(e,t){var n,r=e*oS(t),i=30;do{t-=n=(t+oS(t)-r)/(1+aS(t))}while(iS(n)>1e-6&&--i>0);return t/2}var hS=function(e,t,n){function r(r,i){return[e*r*aS(i=dS(n,i)),t*oS(i)]}return r.invert=function(r,i){return i=uS(i/t),[r/(e*aS(i)),uS((2*i+oS(2*i))/n)]},r}(cS/lS,cS,sS);const pS=HT(),mS=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function gS(e,t){if(!e||"string"!=typeof e)throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(yS[e]=function(e,t){return function n(){const r=t();return r.type=e,r.path=HT().projection(r),r.copy=r.copy||function(){const e=n();return mS.forEach((t=>{r[t]&&e[t](r[t]())})),e.path.pointRadius(r.path.pointRadius()),e},Iv(r)}}(e,t),this):yS[e]||null}function vS(e){return e&&e.path||pS}const yS={albers:IM,albersusa:function(){var e,t,n,r,i,a,o=IM(),s=PM().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=PM().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(e,t){a=[e,t]}};function u(e){var t=e[0],o=e[1];return a=null,n.point(t,o),a||(r.point(t,o),a)||(i.point(t,o),a)}function f(){return e=t=null,u}return u.invert=function(e){var t=o.scale(),n=o.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?l:o).invert(e)},u.stream=function(n){return e&&t===n?e:e=function(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}([o.stream(t=n),s.stream(n),l.stream(n)])},u.precision=function(e){return arguments.length?(o.precision(e),s.precision(e),l.precision(e),f()):o.precision()},u.scale=function(e){return arguments.length?(o.scale(e),s.scale(.35*e),l.scale(e),u.translate(o.translate())):o.scale()},u.translate=function(e){if(!arguments.length)return o.translate();var t=o.scale(),a=+e[0],u=+e[1];return n=o.translate(e).clipExtent([[a-.455*t,u-.238*t],[a+.455*t,u+.238*t]]).stream(c),r=s.translate([a-.307*t,u+.201*t]).clipExtent([[a-.425*t+mE,u+.12*t+mE],[a-.214*t-mE,u+.234*t-mE]]).stream(c),i=l.translate([a-.205*t,u+.212*t]).clipExtent([[a-.214*t+mE,u+.166*t+mE],[a-.115*t-mE,u+.234*t-mE]]).stream(c),f()},u.fitExtent=function(e,t){return AM(u,e,t)},u.fitSize=function(e,t){return kM(u,e,t)},u.fitWidth=function(e,t){return EM(u,e,t)},u.fitHeight=function(e,t){return TM(u,e,t)},u.scale(1070)},azimuthalequalarea:function(){return RM(jM).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return RM(BM).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return LM(HM).scale(109.5).parallels([30,30])},conicequalarea:PM,conicequidistant:function(){return LM(WM).scale(131.154).center([0,13.9389])},equalEarth:function(){return RM(JM).scale(177.158)},equirectangular:function(){return RM(VM).scale(152.63)},gnomonic:function(){return RM(QM).scale(144.049).clipAngle(60)},identity:function(){var e,t,n,r,i,a,o,s=1,l=0,c=0,u=1,f=1,d=0,h=null,p=1,m=1,g=xM({point:function(e,t){var n=b([e,t]);this.stream.point(n[0],n[1])}}),v=sE;function y(){return p=s*u,m=s*f,a=o=null,b}function b(n){var r=n[0]*p,i=n[1]*m;if(d){var a=i*e-r*t;r=r*e+i*t,i=a}return[r+l,i+c]}return b.invert=function(n){var r=n[0]-l,i=n[1]-c;if(d){var a=i*e+r*t;r=r*e-i*t,i=a}return[r/p,i/m]},b.stream=function(e){return a&&o===e?a:a=g(v(o=e))},b.postclip=function(e){return arguments.length?(v=e,h=n=r=i=null,y()):v},b.clipExtent=function(e){return arguments.length?(v=null==e?(h=n=r=i=null,sE):hM(h=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),y()):null==h?null:[[h,n],[r,i]]},b.scale=function(e){return arguments.length?(s=+e,y()):s},b.translate=function(e){return arguments.length?(l=+e[0],c=+e[1],y()):[l,c]},b.angle=function(n){return arguments.length?(t=NE(d=n%360*wE),e=TE(d),y()):d*_E},b.reflectX=function(e){return arguments.length?(u=e?-1:1,y()):u<0},b.reflectY=function(e){return arguments.length?(f=e?-1:1,y()):f<0},b.fitExtent=function(e,t){return AM(b,e,t)},b.fitSize=function(e,t){return kM(b,e,t)},b.fitWidth=function(e,t){return EM(b,e,t)},b.fitHeight=function(e,t){return TM(b,e,t)},b},mercator:function(){return $M(UM).scale(961/xE)},mollweide:function(){return RM(hS).scale(169.529)},naturalEarth1:function(){return RM(eS).scale(175.295)},orthographic:function(){return RM(tS).scale(249.5).clipAngle(90+mE)},stereographic:function(){return RM(nS).scale(250).clipAngle(142)},transversemercator:function(){var e=$M(rS),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)}};for(const e in yS)gS(e,yS[e]);function bS(e,t,n){var r=mh(e,t-mE,n).concat(t);return function(e){return r.map((function(t){return[e,t]}))}}function xS(e,t,n){var r=mh(e,t-mE,n).concat(t);return function(e){return r.map((function(t){return[t,e]}))}}function _S(){var e,t,n,r,i,a,o,s,l,c,u,f,d=10,h=d,p=90,m=360,g=2.5;function v(){return{type:"MultiLineString",coordinates:y()}}function y(){return mh(ME(r/p)*p,n,p).map(u).concat(mh(ME(s/m)*m,o,m).map(f)).concat(mh(ME(t/d)*d,e,d).filter((function(e){return AE(e%p)>mE})).map(l)).concat(mh(ME(a/h)*h,i,h).filter((function(e){return AE(e%m)>mE})).map(c))}return v.lines=function(){return y().map((function(e){return{type:"LineString",coordinates:e}}))},v.outline=function(){return{type:"Polygon",coordinates:[u(r).concat(f(o).slice(1),u(n).reverse().slice(1),f(s).reverse().slice(1))]}},v.extent=function(e){return arguments.length?v.extentMajor(e).extentMinor(e):v.extentMinor()},v.extentMajor=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],s=+e[0][1],o=+e[1][1],r>n&&(e=r,r=n,n=e),s>o&&(e=s,s=o,o=e),v.precision(g)):[[r,s],[n,o]]},v.extentMinor=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],a=+n[0][1],i=+n[1][1],t>e&&(n=t,t=e,e=n),a>i&&(n=a,a=i,i=n),v.precision(g)):[[t,a],[e,i]]},v.step=function(e){return arguments.length?v.stepMajor(e).stepMinor(e):v.stepMinor()},v.stepMajor=function(e){return arguments.length?(p=+e[0],m=+e[1],v):[p,m]},v.stepMinor=function(e){return arguments.length?(d=+e[0],h=+e[1],v):[d,h]},v.precision=function(d){return arguments.length?(g=+d,l=bS(a,i,90),c=xS(t,e,g),u=bS(s,o,90),f=xS(r,n,g),v):g},v.extentMajor([[-180,-90+mE],[180,90-mE]]).extentMinor([[-180,-80-mE],[180,80+mE]])}var wS=n(81325);function AS(){}const kS=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function ES(){var e=1,t=1,n=o;function r(e,t){return t.map((t=>i(e,t)))}function i(r,i){var o=[],s=[];return function(n,r,i){var o,s,l,c,u,f,d=[],h=[];o=s=-1,c=n[0]>=r,kS[c<<1].forEach(p);for(;++o<e-1;)l=c,c=n[o+1]>=r,kS[l|c<<1].forEach(p);kS[c|0].forEach(p);for(;++s<t-1;){for(o=-1,c=n[s*e+e]>=r,u=n[s*e]>=r,kS[c<<1|u<<2].forEach(p);++o<e-1;)l=c,c=n[s*e+e+o+1]>=r,f=u,u=n[s*e+o+1]>=r,kS[l|c<<1|u<<2|f<<3].forEach(p);kS[c|u<<3].forEach(p)}o=-1,u=n[s*e]>=r,kS[u<<2].forEach(p);for(;++o<e-1;)f=u,u=n[s*e+o+1]>=r,kS[u<<2|f<<3].forEach(p);function p(e){var t,n,r=[e[0][0]+o,e[0][1]+s],l=[e[1][0]+o,e[1][1]+s],c=a(r),u=a(l);(t=h[c])?(n=d[u])?(delete h[t.end],delete d[n.start],t===n?(t.ring.push(l),i(t.ring)):d[t.start]=h[n.end]={start:t.start,end:n.end,ring:t.ring.concat(n.ring)}):(delete h[t.end],t.ring.push(l),h[t.end=u]=t):(t=d[u])?(n=h[c])?(delete d[t.start],delete h[n.end],t===n?(t.ring.push(l),i(t.ring)):d[n.start]=h[t.end]={start:n.start,end:t.end,ring:n.ring.concat(t.ring)}):(delete d[t.start],t.ring.unshift(r),d[t.start=c]=t):d[c]=h[u]={start:c,end:u,ring:[r,l]}}kS[u<<3].forEach(p)}(r,i,(e=>{n(e,r,i),function(e){var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];for(;++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}(e)>0?o.push([e]):s.push(e)})),s.forEach((e=>{for(var t,n=0,r=o.length;n<r;++n)if(-1!==TS((t=o[n])[0],e))return void t.push(e)})),{type:"MultiPolygon",value:i,coordinates:o}}function a(t){return 2*t[0]+t[1]*(e+1)*4}function o(n,r,i){n.forEach((n=>{var a,o=n[0],s=n[1],l=0|o,c=0|s,u=r[c*e+l];o>0&&o<e&&l===o&&(a=r[c*e+l-1],n[0]=o+(i-a)/(u-a)-.5),s>0&&s<t&&c===s&&(a=r[(c-1)*e+l],n[1]=s+(i-a)/(u-a)-.5)}))}return r.contour=i,r.size=function(n){if(!arguments.length)return[e,t];var i=Math.floor(n[0]),a=Math.floor(n[1]);return i>=0&&a>=0||us("invalid size"),e=i,t=a,r},r.smooth=function(e){return arguments.length?(n=e?o:AS,r):n===o},r}function TS(e,t){for(var n,r=-1,i=t.length;++r<i;)if(n=MS(e,t[r]))return n;return 0}function MS(e,t){for(var n=t[0],r=t[1],i=-1,a=0,o=e.length,s=o-1;a<o;s=a++){var l=e[a],c=l[0],u=l[1],f=e[s],d=f[0],h=f[1];if(SS(l,f,t))return 0;u>r!=h>r&&n<(d-c)*(r-u)/(h-u)+c&&(i=-i)}return i}function SS(e,t,n){var r;return function(e,t,n){return(t[0]-e[0])*(n[1]-e[1])==(n[0]-e[0])*(t[1]-e[1])}(e,t,n)&&function(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}(e[r=+(e[0]===t[0])],n[r],t[r])}function CS(e,t,n){return function(r){var i=cl(r),a=n?Math.min(i[0],0):i[0],o=i[1],s=o-a,l=t?(0,ec.sG)(a,o,e):s/(e+1);return mh(a+l,o,l)}}function OS(e){nd.call(this,null,e)}function RS(e,t,n,r,i){const a=e.x1||0,o=e.y1||0,s=t*n<0;function l(e){e.forEach(c)}function c(e){s&&e.reverse(),e.forEach(u)}function u(e){e[0]=(e[0]-a)*t+r,e[1]=(e[1]-o)*n+i}return function(e){return e.coordinates.forEach(l),e}}function NS(e,t,n){const r=e>=0?e:xd(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function LS(e){return Qs(e)?e:ol(+e)}function DS(){var e=e=>e[0],t=e=>e[1],n=gs,r=[-1,-1],i=960,a=500,o=2;function s(s,l){const c=NS(r[0],s,e)>>o,u=NS(r[1],s,t)>>o,f=c?c+2:0,d=u?u+2:0,h=2*f+(i>>o),p=2*d+(a>>o),m=new Float32Array(h*p),g=new Float32Array(h*p);let v=m;s.forEach((r=>{const i=f+(+e(r)>>o),a=d+(+t(r)>>o);i>=0&&i<h&&a>=0&&a<p&&(m[i+a*h]+=+n(r))})),c>0&&u>0?(PS(h,p,m,g,c),IS(h,p,g,m,u),PS(h,p,m,g,c),IS(h,p,g,m,u),PS(h,p,m,g,c),IS(h,p,g,m,u)):c>0?(PS(h,p,m,g,c),PS(h,p,g,m,c),PS(h,p,m,g,c),v=g):u>0&&(IS(h,p,m,g,u),IS(h,p,g,m,u),IS(h,p,m,g,u),v=g);const y=l?Math.pow(2,-2*o):1/(0,Ok.A)(v);for(let e=0,t=h*p;e<t;++e)v[e]*=y;return{values:v,scale:1<<o,width:h,height:p,x1:f,y1:d,x2:f+(i>>o),y2:d+(a>>o)}}return s.x=function(t){return arguments.length?(e=LS(t),s):e},s.y=function(e){return arguments.length?(t=LS(e),s):t},s.weight=function(e){return arguments.length?(n=LS(e),s):n},s.size=function(e){if(!arguments.length)return[i,a];var t=+e[0],n=+e[1];return t>=0&&n>=0||us("invalid size"),i=t,a=n,s},s.cellSize=function(e){return arguments.length?((e=+e)>=1||us("invalid cell size"),o=Math.floor(Math.log(e)/Math.LN2),s):1<<o},s.bandwidth=function(e){return arguments.length?(1===(e=Zs(e)).length&&(e=[+e[0],+e[0]]),2!==e.length&&us("invalid bandwidth"),r=e,s):r},s}function PS(e,t,n,r,i){const a=1+(i<<1);for(let o=0;o<t;++o)for(let t=0,s=0;t<e+i;++t)t<e&&(s+=n[t+o*e]),t>=i&&(t>=a&&(s-=n[t-a+o*e]),r[t-i+o*e]=s/Math.min(t+1,e-1+a-t,a))}function IS(e,t,n,r,i){const a=1+(i<<1);for(let o=0;o<e;++o)for(let s=0,l=0;s<t+i;++s)s<t&&(l+=n[o+s*e]),s>=i&&(s>=a&&(l-=n[o+(s-a)*e]),r[o+(s-i)*e]=l/Math.min(s+1,t-1+a-s,a))}function FS(e){nd.call(this,null,e)}OS.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},gl(OS,nd,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||ps,a=ES().smooth(!1!==e.smooth),o=e.thresholds||function(e,t,n){const r=CS(n.levels||10,n.nice,!1!==n.zero);return"shared"!==n.resolve?r:r(e.map((e=>(0,sd.A)(t(e).values))))}(r,i,e),s=null===e.as?null:e.as||"contour",l=[];return r.forEach((t=>{const n=i(t),r=a.size([n.width,n.height])(n.values,Ts(o)?o:o(n.values));!function(e,t,n,r){let i=r.scale||t.scale,a=r.translate||t.translate;Qs(i)&&(i=i(n,r));Qs(a)&&(a=a(n,r));if((1===i||null==i)&&!a)return;const o=(_l(i)?i:i[0])||1,s=(_l(i)?i:i[1])||1,l=a&&a[0]||0,c=a&&a[1]||0;e.forEach(RS(t,o,s,l,c))}(r,n,t,e),r.forEach((e=>{l.push(Mf(t,Ef(null!=s?{[s]:e}:e)))}))})),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}}),FS.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const zS=["x","y","weight","size","cellSize","bandwidth"];function jS(e,t){return zS.forEach((n=>null!=t[n]?e[n](t[n]):0)),e}function BS(e){nd.call(this,null,e)}gl(FS,nd,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=function(e,t){var n,r,i,a,o,s,l=[],c=e=>e(a);if(null==t)l.push(e);else for(n={},r=0,i=e.length;r<i;++r)a=e[r],(s=n[o=t.map(c)])||(n[o]=s=[],s.dims=o,l.push(s)),s.push(a);return l}(t.materialize(t.SOURCE).source,e.groupby),a=(e.groupby||[]).map(as),o=jS(DS(),e),s=e.as||"grid";return n=i.map((t=>Ef(function(e,t){for(let n=0;n<a.length;++n)e[a[n]]=t[n];return e}({[s]:o(t,e.counts)},t.dims)))),this.value&&(r.rem=this.value),this.value=r.source=r.add=n,r}}),BS.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},gl(BS,nd,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),a=ES().smooth(!1!==e.smooth),o=e.values,s=e.thresholds||CS(e.count||10,e.nice,!!o),l=e.size;return o||(o=t.materialize(t.SOURCE).source,r=RS(n=jS(DS(),e)(o,!0),n.scale||1,n.scale||1,0,0),l=[n.width,n.height],o=n.values),s=Ts(s)?s:s(o),o=a.size(l)(o,s),r&&o.forEach(r),this.value&&(i.rem=this.value),this.value=i.source=i.add=(o||[]).map(Ef),i}});const US="Feature",$S="FeatureCollection";function qS(e){nd.call(this,null,e)}function HS(e){nd.call(this,null,e)}function VS(e){nd.call(this,null,e)}function WS(e){nd.call(this,null,e)}function GS(e){nd.call(this,[],e),this.generator=_S()}function YS(e){nd.call(this,null,e)}function XS(e){if(!Qs(e))return!1;const t=Fl(os(e));return t.$x||t.$y||t.$value||t.$max}function KS(e){nd.call(this,null,e),this.modified(!0)}function ZS(e,t,n){Qs(e[t])&&e[t](n)}qS.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},gl(qS,nd,{transform(e,t){var n,r=this._features,i=this._points,a=e.fields,o=a&&a[0],s=a&&a[1],l=e.geojson||!a&&ps,c=t.ADD;n=e.modified()||t.changed(t.REM)||t.modified(os(l))||o&&t.modified(os(o))||s&&t.modified(os(s)),this.value&&!n||(c=t.SOURCE,this._features=r=[],this._points=i=[]),l&&t.visit(c,(e=>r.push(l(e)))),o&&s&&(t.visit(c,(e=>{var t=o(e),n=s(e);null!=t&&null!=n&&(t=+t)===t&&(n=+n)===n&&i.push([t,n])})),r=r.concat({type:US,geometry:{type:"MultiPoint",coordinates:i}})),this.value={type:$S,features:r}}}),HS.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},gl(HS,nd,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||ps,a=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=vS(e.projection),n.materialize().reflow()):o=i===ps||t.modified(i.fields)?n.ADD_MOD:n.ADD;const s=function(e,t){const n=e.pointRadius();e.context(null),null!=t&&e.pointRadius(t);return n}(r,e.pointRadius);return n.visit(o,(e=>e[a]=r(i(e)))),r.pointRadius(s),n.modifies(a)}}),VS.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},gl(VS,nd,{transform(e,t){var n,r=e.projection,i=e.fields[0],a=e.fields[1],o=e.as||["x","y"],s=o[0],l=o[1];function c(e){const t=r([i(e),a(e)]);t?(e[s]=t[0],e[l]=t[1]):(e[s]=void 0,e[l]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,c):(n=t.modified(i.fields)||t.modified(a.fields),t.visit(n?t.ADD_MOD:t.ADD,c)),t.modifies(o)}}),WS.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},gl(WS,nd,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",a=n.ADD;return r&&!e.modified()||(this.value=r=function(e,t,n){const r=null==n?n=>e(t(n)):r=>{var i=e.pointRadius(),a=e.pointRadius(n)(t(r));return e.pointRadius(i),a};return r.context=t=>(e.context(t),r),r}(vS(e.projection),e.field||ds("datum"),e.pointRadius),n.materialize().reflow(),a=n.SOURCE),n.visit(a,(e=>e[i]=r)),n.modifies(i)}}),GS.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},gl(GS,nd,{transform(e,t){var n,r=this.value,i=this.generator;if(!r.length||e.modified())for(const t in e)Qs(i[t])&&i[t](e[t]);return n=i(),r.length?t.mod.push(Sf(r[0],n)):t.add.push(Ef(n)),r[0]=n,t}}),YS.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},gl(YS,nd,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r="shared"===e.resolve,i=e.field||ps,a=function(e,t){let n;Qs(e)?(n=n=>e(n,t),n.dep=XS(e)):e?n=ol(e):(n=e=>e.$value/e.$max||0,n.dep=!0);return n}(e.opacity,e),o=function(e,t){let n;Qs(e)?(n=n=>(0,wS.Qh)(e(n,t)),n.dep=XS(e)):n=ol((0,wS.Qh)(e||"#888"));return n}(e.color,e),s=e.as||"image",l={$x:0,$y:0,$value:0,$max:r?(0,sd.A)(n.map((e=>(0,sd.A)(i(e).values)))):0};return n.forEach((e=>{const t=i(e),n=ll({},e,l);r||(n.$max=(0,sd.A)(t.values||[])),e[s]=function(e,t,n,r){const i=e.width,a=e.height,o=e.x1||0,s=e.y1||0,l=e.x2||i,c=e.y2||a,u=e.values,f=u?e=>u[e]:ms,d=Gm(l-o,c-s),h=d.getContext("2d"),p=h.getImageData(0,0,l-o,c-s),m=p.data;for(let e=s,a=0;e<c;++e){t.$y=e-s;for(let s=o,c=e*i;s<l;++s,a+=4){t.$x=s-o,t.$value=f(s+c);const e=n(t);m[a+0]=e.r,m[a+1]=e.g,m[a+2]=e.b,m[a+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}(t,n,o.dep?o:ol(o(n)),a.dep?a:ol(a(n)))})),t.reflow(!0).modifies(s)}}),gl(KS,nd,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=function(e){const t=gS((e||"mercator").toLowerCase());t||us("Unrecognized projection type: "+e);return t()}(e.type),mS.forEach((t=>{null!=e[t]&&ZS(n,t,e[t])}))):mS.forEach((t=>{e.modified(t)&&ZS(n,t,e[t])})),null!=e.pointRadius&&n.path.pointRadius(e.pointRadius),e.fit&&function(e,t){const n=function(e){return e=Zs(e),1===e.length?e[0]:{type:$S,features:e.reduce(((e,t)=>e.concat(function(e){return e.type===$S?e.features:Zs(e).filter((e=>null!=e)).map((e=>e.type===US?e:{type:US,geometry:e}))}(t))),[])}}(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});var JS=n(3457);const QS={center:JS.forceCenter,collide:JS.forceCollide,nbody:JS.forceManyBody,link:JS.forceLink,x:JS.forceX,y:JS.forceY},eC="forces",tC=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],nC=["static","iterations"],rC=["x","y","vx","vy"];function iC(e){nd.call(this,null,e)}function aC(e,t,n,r){var i,a,o,s,l=Zs(t.forces);for(i=0,a=tC.length;i<a;++i)(o=tC[i])!==eC&&t.modified(o)&&e[o](t[o]);for(i=0,a=l.length;i<a;++i)s=eC+i,(o=n||t.modified(eC,i)?sC(l[i]):r&&oC(l[i],r)?e.force(s):null)&&e.force(s,o);for(a=e.numForces||0;i<a;++i)e.force(eC+i,null);return e.numForces=l.length,e}function oC(e,t){var n,r;for(n in e)if(Qs(r=e[n])&&t.modified(os(r)))return 1;return 0}function sC(e){var t,n;for(n in dl(QS,e.force)||us("Unrecognized force: "+e.force),t=QS[e.force](),e)Qs(t[n])&&lC(t[n],e[n],e);return t}function lC(e,t,n){e(Qs(t)?e=>t(e,n):t)}iC.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:rC}]},gl(iC,nd,{transform(e,t){var n,r,i=this.value,a=t.changed(t.ADD_REM),o=e.modified(tC),s=e.iterations||300;if(i?(a&&(t.modifies("index"),i.nodes(t.source)),(o||t.changed(t.MOD))&&aC(i,e,0,t)):(this.value=i=function(e,t){const n=(0,JS.forceSimulation)(e),r=n.stop,i=n.restart;let a=!1;return n.stopped=()=>a,n.restart=()=>(a=!1,i()),n.stop=()=>(a=!0,r()),aC(n,t,!0).on("end",(()=>a=!0))}(t.source,e),i.on("tick",(n=t.dataflow,r=this,()=>n.touch(r).run())),e.static||(a=!0,i.tick()),t.modifies("index")),o||a||e.modified(nC)||t.changed()&&e.restart)if(i.alpha(Math.max(i.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(i.alphaMin(),1/s)),e.static)for(i.stop();--s>=0;)i.tick();else if(i.stopped()&&i.restart(),!a)return t.StopPropagation;return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let e,t=this._argops,s=0,l=t.length;s<l;++s)if(e=t[s],e.name===eC&&"link"===e.op._argval.force)for(var r,i=e.op._argops,a=0,o=i.length;a<o;++a)if("links"===i[a].name&&(r=i[a].op.source)){n.pulse(r,n.changeset().reflow());break}return t.reflow(e.modified()).modifies(rC)}});var cC=n(67601),uC=n(7789),fC=n(45445),dC=n(98519),hC=n(16219),pC=n(40105),mC=n(72285),gC=n(33059),vC=n(28308),yC=n(47979),bC=n(11318),xC=n(74371),_C=n(29526);function wC(e,t,n){const r={};return e.each((e=>{const i=e.data;n(i)&&(r[t(i)]=e)})),e.lookup=r,e}function AC(e){nd.call(this,null,e)}AC.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const kC=e=>e.values;function EC(){const e=[],t={entries:e=>r(n(e,0),0),key:n=>(e.push(n),t)};function n(t,r){if(r>=e.length)return t;const i=t.length,a=e[r++],o={},s={};let l,c,u,f=-1;for(;++f<i;)l=a(c=t[f])+"",(u=o[l])?u.push(c):o[l]=[c];for(l in o)s[l]=n(o[l],r);return s}function r(t,n){if(++n>e.length)return t;const i=[];for(const e in t)i.push({key:e,values:r(t[e],n)});return i}return t}function TC(e){nd.call(this,null,e)}gl(AC,nd,{transform(e,t){t.source||us("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),a=this.value;return(!a||r||t.changed())&&(a&&a.each((e=>{e.children&&wf(e.data)&&i.rem.push(e.data)})),this.value=a=(0,cC.Ay)({values:Zs(e.keys).reduce(((e,t)=>(e.key(t),e)),EC()).entries(i.source)},kC),n&&a.each((e=>{e.children&&(e=Ef(e.data),i.add.push(e),i.source.push(e))})),wC(a,Af,Af)),i.source.root=a,i}});const MC=(e,t)=>e.parent===t.parent?1:2;gl(TC,nd,{transform(e,t){t.source&&t.source.root||us(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,a=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Cf(e.sort,(e=>e.data))),function(e,t,n){for(let r,i=0,a=t.length;i<a;++i)r=t[i],r in n&&e[r](n[r])}(n,this.params,e),n.separation&&n.separation(!1!==e.separation?MC:gs);try{this.value=n(i)}catch(e){us(e)}return i.each((e=>function(e,t,n){const r=e.data,i=t.length-1;for(let a=0;a<i;++a)r[n[a]]=e[t[a]];r[n[i]]=e.children?e.children.length:0}(e,r,a))),t.reflow(e.modified()).modifies(a).modifies("leaf")}});const SC=["x","y","r","depth","children"];function CC(e){TC.call(this,e)}CC.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:SC.length,default:SC}]},gl(CC,TC,{layout:uC.A,params:["radius","size","padding"],fields:SC});const OC=["x0","y0","x1","y1","depth","children"];function RC(e){TC.call(this,e)}function NC(e){nd.call(this,null,e)}RC.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:OC.length,default:OC}]},gl(RC,TC,{layout:fC.A,params:["size","round","padding"],fields:OC}),NC.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},gl(NC,nd,{transform(e,t){t.source||us("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),a=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),a&&(n=i.source.length?wC((0,dC.A)().id(e.key).parentId(e.parentKey)(i.source),e.key,vs):wC((0,dC.A)()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const LC={tidy:hC.A,cluster:pC.A},DC=["x","y","depth","children"];function PC(e){TC.call(this,e)}function IC(e){nd.call(this,[],e)}PC.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:DC.length,default:DC}]},gl(PC,TC,{layout(e){const t=e||"tidy";if(dl(LC,t))return LC[t]();us("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:DC}),IC.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},gl(IC,nd,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),a={};return r||us("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,(e=>a[Af(e)]=1)),r.each((e=>{const t=e.data,n=e.parent&&e.parent.data;n&&a[Af(t)]&&a[Af(n)]&&i.add.push(Ef({source:n,target:t}))})),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,(e=>a[Af(e)]=1)),n.forEach((e=>{(a[Af(e.source)]||a[Af(e.target)])&&i.mod.push(e)}))),i}});const FC={binary:mC.A,dice:gC.A,slice:vC.A,slicedice:yC.A,squarify:bC.Ay,resquarify:xC.A},zC=["x0","y0","x1","y1","depth","children"];function jC(e){TC.call(this,e)}jC.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:zC.length,default:zC}]},gl(jC,TC,{layout(){const e=(0,_C.A)();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{dl(FC,t)?e.tile(FC[t]):us("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:zC});const BC=4278190080;function UC(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function $C(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;"group"===r?t.forEach((t=>{t.items.forEach((t=>$C(e,t.items,n)))})):x_[r].draw(e,{items:n?t.map(qC):t})}function qC(e){const t=Mf(e,{});return t.stroke&&0!==t.strokeOpacity||t.fill&&0!==t.fillOpacity?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const HC=31,VC=new Uint32Array(33),WC=new Uint32Array(33);WC[0]=0,VC[0]=~WC[0];for(let e=1;e<=32;++e)WC[e]=WC[e-1]<<1|1,VC[e]=~WC[e];function GC(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),a=~~((t+2*n+r)/r),o=e=>~~((e+n)/r);return o.invert=e=>e*r-n,o.bitmap=()=>function(e,t){const n=new Uint32Array(~~((e*t+32)/32));function r(e,t){n[e]|=t}function i(e,t){n[e]&=t}return{array:n,get:(t,r)=>{const i=r*e+t;return n[i>>>5]&1<<(i&HC)},set:(t,n)=>{const i=n*e+t;r(i>>>5,1<<(i&HC))},clear:(t,n)=>{const r=n*e+t;i(r>>>5,~(1<<(r&HC)))},getRange:(t,r,i,a)=>{let o,s,l,c,u=a;for(;u>=r;--u)if(o=u*e+t,s=u*e+i,l=o>>>5,c=s>>>5,l===c){if(n[l]&VC[o&HC]&WC[1+(s&HC)])return!0}else{if(n[l]&VC[o&HC])return!0;if(n[c]&WC[1+(s&HC)])return!0;for(let e=l+1;e<c;++e)if(n[e])return!0}return!1},setRange:(t,n,i,a)=>{let o,s,l,c,u;for(;n<=a;++n)if(o=n*e+t,s=n*e+i,l=o>>>5,c=s>>>5,l===c)r(l,VC[o&HC]&WC[1+(s&HC)]);else for(r(l,VC[o&HC]),r(c,WC[1+(s&HC)]),u=l+1;u<c;++u)r(u,4294967295)},clearRange:(t,n,r,a)=>{let o,s,l,c,u;for(;n<=a;++n)if(o=n*e+t,s=n*e+r,l=o>>>5,c=s>>>5,l===c)i(l,WC[o&HC]|VC[1+(s&HC)]);else for(i(l,WC[o&HC]),i(c,VC[1+(s&HC)]),u=l+1;u<c;++u)i(u,0)},outOfBounds:(n,r,i,a)=>n<0||r<0||a>=t||i>=e}}(i,a),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function YC(e,t,n,r,i,a){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>a}function XC(e,t,n,r,i,a,o,s){const l=i*a/(2*r),c=e(t-l),u=e(t+l),f=e(n-(a/=2)),d=e(n+a);return o.outOfBounds(c,f,u,d)||o.getRange(c,f,u,d)||s&&s.getRange(c,f,u,d)}const KC=[-1,-1,1,1],ZC=[-1,1,-1,1];const JC=["right","center","left"],QC=["bottom","middle","top"];function eO(e,t,n,r,i,a,o,s,l,c,u,f){return!(i.outOfBounds(e,n,t,r)||(f&&a||i).getRange(e,n,t,r))}const tO={"top-left":0,top:1,"top-right":2,left:4,middle:5,right:6,"bottom-left":8,bottom:9,"bottom-right":10},nO={naive:function(e,t,n,r){const i=e.width,a=e.height;return function(e){const t=e.datum.datum.items[r].items,n=t.length,o=e.datum.fontSize,s=e_.width(e.datum,e.datum.text);let l,c,u,f,d,h,p,m=0;for(let r=0;r<n;++r)l=t[r].x,u=t[r].y,c=void 0===t[r].x2?l:t[r].x2,f=void 0===t[r].y2?u:t[r].y2,d=(l+c)/2,h=(u+f)/2,p=Math.abs(c-l+f-u),p>=m&&(m=p,e.x=d,e.y=h);return d=s/2,h=o/2,l=e.x-d,c=e.x+d,u=e.y-h,f=e.y+h,e.align="center",l<0&&c<=i?e.align="left":0<=l&&i<c&&(e.align="right"),e.baseline="middle",u<0&&f<=a?e.baseline="top":0<=u&&a<f&&(e.baseline="bottom"),!0}},"reduced-search":function(e,t,n,r){const i=e.width,a=e.height,o=t[0],s=t[1];function l(t,n,r,l,c){const u=e.invert(t),f=e.invert(n);let d,h=r,p=a;if(!YC(u,f,l,c,i,a)&&!XC(e,u,f,c,l,h,o,s)&&!XC(e,u,f,c,l,c,o,null)){for(;p-h>=1;)d=(h+p)/2,XC(e,u,f,c,l,d,o,s)?p=d:h=d;if(h>r)return[u,f,h,!0]}}return function(t){const s=t.datum.datum.items[r].items,c=s.length,u=t.datum.fontSize,f=e_.width(t.datum,t.datum.text);let d,h,p,m,g,v,y,b,x,_,w,A,k,E,T,M,S,C=n?u:0,O=!1,R=!1,N=0;for(let r=0;r<c;++r){for(d=s[r].x,p=s[r].y,h=void 0===s[r].x2?d:s[r].x2,m=void 0===s[r].y2?p:s[r].y2,d>h&&(S=d,d=h,h=S),p>m&&(S=p,p=m,m=S),x=e(d),w=e(h),_=~~((x+w)/2),A=e(p),E=e(m),k=~~((A+E)/2),y=_;y>=x;--y)for(b=k;b>=A;--b)M=l(y,b,C,f,u),M&&([t.x,t.y,C,O]=M);for(y=_;y<=w;++y)for(b=k;b<=E;++b)M=l(y,b,C,f,u),M&&([t.x,t.y,C,O]=M);O||n||(T=Math.abs(h-d+m-p),g=(d+h)/2,v=(p+m)/2,T>=N&&!YC(g,v,f,u,i,a)&&!XC(e,g,v,u,f,u,o,null)&&(N=T,t.x=g,t.y=v,R=!0))}return!(!O&&!R)&&(g=f/2,v=u/2,o.setRange(e(t.x-g),e(t.y-v),e(t.x+g),e(t.y+v)),t.align="center",t.baseline="middle",!0)}},floodfill:function(e,t,n,r){const i=e.width,a=e.height,o=t[0],s=t[1],l=e.bitmap();return function(t){const c=t.datum.datum.items[r].items,u=c.length,f=t.datum.fontSize,d=e_.width(t.datum,t.datum.text),h=[];let p,m,g,v,y,b,x,_,w,A,k,E,T=n?f:0,M=!1,S=!1,C=0;for(let r=0;r<u;++r){for(p=c[r].x,g=c[r].y,m=void 0===c[r].x2?p:c[r].x2,v=void 0===c[r].y2?g:c[r].y2,h.push([e((p+m)/2),e((g+v)/2)]);h.length;)if([x,_]=h.pop(),!(o.get(x,_)||s.get(x,_)||l.get(x,_))){l.set(x,_);for(let e=0;e<4;++e)y=x+KC[e],b=_+ZC[e],l.outOfBounds(y,b,y,b)||h.push([y,b]);if(y=e.invert(x),b=e.invert(_),w=T,A=a,!YC(y,b,d,f,i,a)&&!XC(e,y,b,f,d,w,o,s)&&!XC(e,y,b,f,d,f,o,null)){for(;A-w>=1;)k=(w+A)/2,XC(e,y,b,f,d,k,o,s)?A=k:w=k;w>T&&(t.x=y,t.y=b,T=w,M=!0)}}M||n||(E=Math.abs(m-p+v-g),y=(p+m)/2,b=(g+v)/2,E>=C&&!YC(y,b,d,f,i,a)&&!XC(e,y,b,f,d,f,o,null)&&(C=E,t.x=y,t.y=b,S=!0))}return!(!M&&!S)&&(y=d/2,b=f/2,o.setRange(e(t.x-y),e(t.y-b),e(t.x+y),e(t.y+b)),t.align="center",t.baseline="middle",!0)}}};function rO(e,t,n,r,i,a,o,s,l,c,u){if(!e.length)return e;const f=Math.max(r.length,i.length),d=function(e,t){const n=new Float64Array(t),r=e.length;for(let t=0;t<r;++t)n[t]=e[t]||0;for(let e=r;e<t;++e)n[e]=n[r-1];return n}(r,f),h=function(e,t){const n=new Int8Array(t),r=e.length;for(let t=0;t<r;++t)n[t]|=tO[e[t]];for(let e=r;e<t;++e)n[e]=n[r-1];return n}(i,f),p=(x=e[0].datum)&&x.mark&&x.mark.marktype,m="group"===p&&e[0].datum.items[l].marktype,g="area"===m,v=function(e,t,n,r){const i=e=>[e.x,e.x,e.x,e.y,e.y,e.y];return e?"line"===e||"area"===e?e=>i(e.datum):"line"===t?e=>{const t=e.datum.items[r].items;return i(t.length?t["start"===n?0:t.length-1]:{x:NaN,y:NaN})}:e=>{const t=e.datum.bounds;return[t.x1,(t.x1+t.x2)/2,t.x2,t.y1,(t.y1+t.y2)/2,t.y2]}:i}(p,m,s,l),y=null===c||c===1/0,b=g&&"naive"===u;var x;let _=-1,w=-1;const A=e.map((e=>{const t=y?e_.width(e,e.text):void 0;return _=Math.max(_,t),w=Math.max(w,e.fontSize),{datum:e,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:v(e),textWidth:t}}));c=null===c||c===1/0?Math.max(_,w)+Math.max(...r):c;const k=GC(t[0],t[1],c);let E;if(!b){n&&A.sort(((e,t)=>n(e.datum,t.datum)));let t=!1;for(let e=0;e<h.length&&!t;++e)t=5===h[e]||d[e]<0;const r=(p&&o||g)&&e.map((e=>e.datum));E=a.length||r?function(e,t,n,r,i){const a=e.width,o=e.height,s=r||i,l=Gm(a,o).getContext("2d"),c=Gm(a,o).getContext("2d"),u=s&&Gm(a,o).getContext("2d");n.forEach((e=>$C(l,e,!1))),$C(c,t,!1),s&&$C(u,t,!0);const f=UC(l,a,o),d=UC(c,a,o),h=s&&UC(u,a,o),p=e.bitmap(),m=s&&e.bitmap();let g,v,y,b,x,_,w,A;for(v=0;v<o;++v)for(g=0;g<a;++g)x=v*a+g,_=f[x]&BC,A=d[x]&BC,w=s&&h[x]&BC,(_||w||A)&&(y=e(g),b=e(v),i||!_&&!A||p.set(y,b),s&&(_||w)&&m.set(y,b));return[p,m]}(k,r||[],a,t,g):function(e,t){const n=e.bitmap();return(t||[]).forEach((t=>n.set(e(t.boundary[0]),e(t.boundary[3])))),[n,void 0]}(k,o&&A)}const T=g?nO[u](k,E,o,l):function(e,t,n,r){const i=e.width,a=e.height,o=t[0],s=t[1],l=r.length;return function(t){const c=t.boundary,u=t.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>a)return!1;let f,d,h,p,m,g,v,y,b,x,_,w,A,k,E,T=t.textWidth??0;for(let i=0;i<l;++i){if(f=(3&n[i])-1,d=(n[i]>>>2&3)-1,h=0===f&&0===d||r[i]<0,p=f&&d?Math.SQRT1_2:1,m=r[i]<0?-1:1,g=c[1+f]+r[i]*f*p,_=c[4+d]+m*u*d/2+r[i]*d*p,y=_-u/2,b=_+u/2,w=e(g),k=e(y),E=e(b),!T){if(!eO(w,w,k,E,o,s,0,0,0,0,0,h))continue;T=e_.width(t.datum,t.datum.text)}if(x=g+m*T*f/2,g=x-T/2,v=x+T/2,w=e(g),A=e(v),eO(w,A,k,E,o,s,0,0,0,0,0,h))return t.x=f?f*m<0?v:g:x,t.y=d?d*m<0?b:y:_,t.align=JC[f*m+1],t.baseline=QC[d*m+1],o.setRange(w,k,A,E),!0}return!1}}(k,E,h,d);return A.forEach((e=>e.opacity=+T(e))),A}const iO=["x","y","opacity","align","baseline"],aO=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function oO(e){nd.call(this,null,e)}function sO(e,t){var n,r,i,a,o,s,l=[],c=function(e){return e(a)};if(null==t)l.push(e);else for(n={},r=0,i=e.length;r<i;++r)a=e[r],(s=n[o=t.map(c)])||(n[o]=s=[],s.dims=o,l.push(s)),s.push(a);return l}function lO(e){nd.call(this,null,e)}oO.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:aO},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:iO.length,default:iO}]},gl(oO,nd,{transform(e,t){const n=e.modified();if(!(n||t.changed(t.ADD_REM)||function(n){const r=e[n];return Qs(r)&&t.modified(r.fields)}("sort")))return;e.size&&2===e.size.length||us("Size parameter should be specified as a [width, height] array.");const r=e.as||iO;return rO(t.materialize(t.SOURCE).source||[],e.size,e.sort,Zs(null==e.offset?1:e.offset),Zs(e.anchor||aO),e.avoidMarks||[],!1!==e.avoidBaseMark,e.lineAnchor||"end",e.markIndex||0,void 0===e.padding?0:e.padding,e.method||"naive").forEach((e=>{const t=e.datum;t[r[0]]=e.x,t[r[1]]=e.y,t[r[2]]=e.opacity,t[r[3]]=e.align,t[r[4]]=e.baseline})),t.reflow(n).modifies(r)}}),lO.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},gl(lO,nd,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=sO(t.materialize(t.SOURCE).source,e.groupby),i=(e.groupby||[]).map(as),a=i.length,o=e.as||[as(e.x),as(e.y)],s=[];r.forEach((t=>{lh(t,e.x,e.y,e.bandwidth||.3).forEach((e=>{const n={};for(let e=0;e<a;++e)n[i[e]]=t.dims[e];n[o[0]]=e[0],n[o[1]]=e[1],s.push(Ef(n))}))})),this.value&&(n.rem=this.value),this.value=n.add=n.source=s}return n}});const cO={constant:Yd,linear:Qd,log:eh,exp:th,pow:nh,quad:rh,poly:ih};function uO(e){nd.call(this,null,e)}uO.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(cO)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},gl(uO,nd,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=sO(t.materialize(t.SOURCE).source,e.groupby),i=(e.groupby||[]).map(as),a=e.method||"linear",o=null==e.order?3:e.order,s=((e,t)=>"poly"===e?t:"quad"===e?2:1)(a,o),l=e.as||[as(e.x),as(e.y)],c=cO[a],u=[];let f=e.extent;dl(cO,a)||us("Invalid regression method: "+a),null!=f&&"log"===a&&f[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),f=null),r.forEach((n=>{if(n.length<=s)return void t.dataflow.warn("Skipping regression with more parameters than data points.");const r=c(n,e.x,e.y,o);if(e.params)return void u.push(Ef({keys:n.dims,coef:r.coef,rSquared:r.rSquared}));const d=f||cl(n,e.x),h=e=>{const t={};for(let e=0;e<i.length;++e)t[i[e]]=n.dims[e];t[l[0]]=e[0],t[l[1]]=e[1],u.push(Ef(t))};"linear"===a||"constant"===a?d.forEach((e=>h([e,r.predict(e)]))):dh(r.predict,d,25,200).forEach(h)})),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const fO=134217729;function dO(e,t,n,r,i){let a,o,s,l,c=t[0],u=r[0],f=0,d=0;u>c==u>-c?(a=c,c=t[++f]):(a=u,u=r[++d]);let h=0;if(f<e&&d<n)for(u>c==u>-c?(o=c+a,s=a-(o-c),c=t[++f]):(o=u+a,s=a-(o-u),u=r[++d]),a=o,0!==s&&(i[h++]=s);f<e&&d<n;)u>c==u>-c?(o=a+c,l=o-a,s=a-(o-l)+(c-l),c=t[++f]):(o=a+u,l=o-a,s=a-(o-l)+(u-l),u=r[++d]),a=o,0!==s&&(i[h++]=s);for(;f<e;)o=a+c,l=o-a,s=a-(o-l)+(c-l),c=t[++f],a=o,0!==s&&(i[h++]=s);for(;d<n;)o=a+u,l=o-a,s=a-(o-l)+(u-l),u=r[++d],a=o,0!==s&&(i[h++]=s);return 0===a&&0!==h||(i[h++]=a),h}function hO(e){return new Float64Array(e)}const pO=hO(4),mO=hO(8),gO=hO(12),vO=hO(16),yO=hO(4);function bO(e,t,n,r,i,a){const o=(t-a)*(n-i),s=(e-i)*(r-a),l=o-s,c=Math.abs(o+s);return Math.abs(l)>=33306690738754716e-32*c?l:-function(e,t,n,r,i,a,o){let s,l,c,u,f,d,h,p,m,g,v,y,b,x,_,w,A,k;const E=e-i,T=n-i,M=t-a,S=r-a;x=E*S,d=fO*E,h=d-(d-E),p=E-h,d=fO*S,m=d-(d-S),g=S-m,_=p*g-(x-h*m-p*m-h*g),w=M*T,d=fO*M,h=d-(d-M),p=M-h,d=fO*T,m=d-(d-T),g=T-m,A=p*g-(w-h*m-p*m-h*g),v=_-A,f=_-v,pO[0]=_-(v+f)+(f-A),y=x+v,f=y-x,b=x-(y-f)+(v-f),v=b-w,f=b-v,pO[1]=b-(v+f)+(f-w),k=y+v,f=k-y,pO[2]=y-(k-f)+(v-f),pO[3]=k;let C=function(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}(4,pO),O=22204460492503146e-32*o;if(C>=O||-C>=O)return C;if(f=e-E,s=e-(E+f)+(f-i),f=n-T,c=n-(T+f)+(f-i),f=t-M,l=t-(M+f)+(f-a),f=r-S,u=r-(S+f)+(f-a),0===s&&0===l&&0===c&&0===u)return C;if(O=11093356479670487e-47*o+33306690738754706e-32*Math.abs(C),C+=E*u+S*s-(M*c+T*l),C>=O||-C>=O)return C;x=s*S,d=fO*s,h=d-(d-s),p=s-h,d=fO*S,m=d-(d-S),g=S-m,_=p*g-(x-h*m-p*m-h*g),w=l*T,d=fO*l,h=d-(d-l),p=l-h,d=fO*T,m=d-(d-T),g=T-m,A=p*g-(w-h*m-p*m-h*g),v=_-A,f=_-v,yO[0]=_-(v+f)+(f-A),y=x+v,f=y-x,b=x-(y-f)+(v-f),v=b-w,f=b-v,yO[1]=b-(v+f)+(f-w),k=y+v,f=k-y,yO[2]=y-(k-f)+(v-f),yO[3]=k;const R=dO(4,pO,4,yO,mO);x=E*u,d=fO*E,h=d-(d-E),p=E-h,d=fO*u,m=d-(d-u),g=u-m,_=p*g-(x-h*m-p*m-h*g),w=M*c,d=fO*M,h=d-(d-M),p=M-h,d=fO*c,m=d-(d-c),g=c-m,A=p*g-(w-h*m-p*m-h*g),v=_-A,f=_-v,yO[0]=_-(v+f)+(f-A),y=x+v,f=y-x,b=x-(y-f)+(v-f),v=b-w,f=b-v,yO[1]=b-(v+f)+(f-w),k=y+v,f=k-y,yO[2]=y-(k-f)+(v-f),yO[3]=k;const N=dO(R,mO,4,yO,gO);x=s*u,d=fO*s,h=d-(d-s),p=s-h,d=fO*u,m=d-(d-u),g=u-m,_=p*g-(x-h*m-p*m-h*g),w=l*c,d=fO*l,h=d-(d-l),p=l-h,d=fO*c,m=d-(d-c),g=c-m,A=p*g-(w-h*m-p*m-h*g),v=_-A,f=_-v,yO[0]=_-(v+f)+(f-A),y=x+v,f=y-x,b=x-(y-f)+(v-f),v=b-w,f=b-v,yO[1]=b-(v+f)+(f-w),k=y+v,f=k-y,yO[2]=y-(k-f)+(v-f),yO[3]=k;const L=dO(N,gO,4,yO,vO);return vO[L-1]}(e,t,n,r,i,a,c)}hO(4),hO(4),hO(4),hO(4),hO(4),hO(4),hO(4),hO(4),hO(4),hO(8),hO(8),hO(8),hO(4),hO(8),hO(8),hO(8),hO(12);hO(192),hO(192);hO(4),hO(4),hO(4),hO(4),hO(4),hO(4),hO(4),hO(4),hO(8),hO(8),hO(8),hO(8),hO(8),hO(8),hO(8),hO(8),hO(8),hO(4),hO(4),hO(4),hO(8),hO(16),hO(16),hO(16),hO(32),hO(32),hO(48),hO(64);hO(1152),hO(1152);hO(4),hO(4),hO(4),hO(4),hO(4),hO(4),hO(4),hO(4),hO(4),hO(4),hO(24),hO(24),hO(24),hO(24),hO(24),hO(24),hO(24),hO(24),hO(24),hO(24),hO(1152),hO(1152),hO(1152),hO(1152),hO(1152),hO(2304),hO(2304),hO(3456),hO(5760),hO(8),hO(8),hO(8),hO(16),hO(24),hO(48),hO(48),hO(96),hO(192),hO(384),hO(384),hO(384),hO(768);hO(96),hO(96),hO(96),hO(1152);const xO=Math.pow(2,-52),_O=new Uint32Array(512);class wO{static from(e,t=SO,n=CO){const r=e.length,i=new Float64Array(2*r);for(let a=0;a<r;a++){const r=e[a];i[2*a]=t(r),i[2*a+1]=n(r)}return new wO(i)}constructor(e){const t=e.length>>1;if(t>0&&"number"!=typeof e[0])throw new Error("Expected coords to contain numbers.");this.coords=e;const n=Math.max(2*t-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){const{coords:e,_hullPrev:t,_hullNext:n,_hullTri:r,_hullHash:i}=this,a=e.length>>1;let o=1/0,s=1/0,l=-1/0,c=-1/0;for(let t=0;t<a;t++){const n=e[2*t],r=e[2*t+1];n<o&&(o=n),r<s&&(s=r),n>l&&(l=n),r>c&&(c=r),this._ids[t]=t}const u=(o+l)/2,f=(s+c)/2;let d,h,p;for(let t=0,n=1/0;t<a;t++){const r=AO(u,f,e[2*t],e[2*t+1]);r<n&&(d=t,n=r)}const m=e[2*d],g=e[2*d+1];for(let t=0,n=1/0;t<a;t++){if(t===d)continue;const r=AO(m,g,e[2*t],e[2*t+1]);r<n&&r>0&&(h=t,n=r)}let v=e[2*h],y=e[2*h+1],b=1/0;for(let t=0;t<a;t++){if(t===d||t===h)continue;const n=EO(m,g,v,y,e[2*t],e[2*t+1]);n<b&&(p=t,b=n)}let x=e[2*p],_=e[2*p+1];if(b===1/0){for(let t=0;t<a;t++)this._dists[t]=e[2*t]-e[0]||e[2*t+1]-e[1];TO(this._ids,this._dists,0,a-1);const t=new Uint32Array(a);let n=0;for(let e=0,r=-1/0;e<a;e++){const i=this._ids[e],a=this._dists[i];a>r&&(t[n++]=i,r=a)}return this.hull=t.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(bO(m,g,v,y,x,_)<0){const e=h,t=v,n=y;h=p,v=x,y=_,p=e,x=t,_=n}const w=function(e,t,n,r,i,a){const o=n-e,s=r-t,l=i-e,c=a-t,u=o*o+s*s,f=l*l+c*c,d=.5/(o*c-s*l),h=e+(c*u-s*f)*d,p=t+(o*f-l*u)*d;return{x:h,y:p}}(m,g,v,y,x,_);this._cx=w.x,this._cy=w.y;for(let t=0;t<a;t++)this._dists[t]=AO(e[2*t],e[2*t+1],w.x,w.y);TO(this._ids,this._dists,0,a-1),this._hullStart=d;let A=3;n[d]=t[p]=h,n[h]=t[d]=p,n[p]=t[h]=d,r[d]=0,r[h]=1,r[p]=2,i.fill(-1),i[this._hashKey(m,g)]=d,i[this._hashKey(v,y)]=h,i[this._hashKey(x,_)]=p,this.trianglesLen=0,this._addTriangle(d,h,p,-1,-1,-1);for(let a,o,s=0;s<this._ids.length;s++){const l=this._ids[s],c=e[2*l],u=e[2*l+1];if(s>0&&Math.abs(c-a)<=xO&&Math.abs(u-o)<=xO)continue;if(a=c,o=u,l===d||l===h||l===p)continue;let f=0;for(let e=0,t=this._hashKey(c,u);e<this._hashSize&&(f=i[(t+e)%this._hashSize],-1===f||f===n[f]);e++);f=t[f];let m,g=f;for(;m=n[g],bO(c,u,e[2*g],e[2*g+1],e[2*m],e[2*m+1])>=0;)if(g=m,g===f){g=-1;break}if(-1===g)continue;let v=this._addTriangle(g,l,n[g],-1,-1,r[g]);r[l]=this._legalize(v+2),r[g]=v,A++;let y=n[g];for(;m=n[y],bO(c,u,e[2*y],e[2*y+1],e[2*m],e[2*m+1])<0;)v=this._addTriangle(y,l,m,r[l],-1,r[y]),r[l]=this._legalize(v+2),n[y]=y,A--,y=m;if(g===f)for(;m=t[g],bO(c,u,e[2*m],e[2*m+1],e[2*g],e[2*g+1])<0;)v=this._addTriangle(m,l,g,-1,r[g],r[m]),this._legalize(v+2),r[m]=v,n[g]=g,A--,g=m;this._hullStart=t[l]=g,n[g]=t[y]=l,n[l]=y,i[this._hashKey(c,u)]=l,i[this._hashKey(e[2*g],e[2*g+1])]=g}this.hull=new Uint32Array(A);for(let e=0,t=this._hullStart;e<A;e++)this.hull[e]=t,t=n[t];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,t){return Math.floor(function(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:t,_halfedges:n,coords:r}=this;let i=0,a=0;for(;;){const o=n[e],s=e-e%3;if(a=s+(e+2)%3,-1===o){if(0===i)break;e=_O[--i];continue}const l=o-o%3,c=s+(e+1)%3,u=l+(o+2)%3,f=t[a],d=t[e],h=t[c],p=t[u];if(kO(r[2*f],r[2*f+1],r[2*d],r[2*d+1],r[2*h],r[2*h+1],r[2*p],r[2*p+1])){t[e]=p,t[o]=f;const r=n[u];if(-1===r){let t=this._hullStart;do{if(this._hullTri[t]===u){this._hullTri[t]=e;break}t=this._hullPrev[t]}while(t!==this._hullStart)}this._link(e,r),this._link(o,n[a]),this._link(a,u);const s=l+(o+1)%3;i<_O.length&&(_O[i++]=s)}else{if(0===i)break;e=_O[--i]}}return a}_link(e,t){this._halfedges[e]=t,-1!==t&&(this._halfedges[t]=e)}_addTriangle(e,t,n,r,i,a){const o=this.trianglesLen;return this._triangles[o]=e,this._triangles[o+1]=t,this._triangles[o+2]=n,this._link(o,r),this._link(o+1,i),this._link(o+2,a),this.trianglesLen+=3,o}}function AO(e,t,n,r){const i=e-n,a=t-r;return i*i+a*a}function kO(e,t,n,r,i,a,o,s){const l=e-o,c=t-s,u=n-o,f=r-s,d=i-o,h=a-s,p=u*u+f*f,m=d*d+h*h;return l*(f*m-p*h)-c*(u*m-p*d)+(l*l+c*c)*(u*h-f*d)<0}function EO(e,t,n,r,i,a){const o=n-e,s=r-t,l=i-e,c=a-t,u=o*o+s*s,f=l*l+c*c,d=.5/(o*c-s*l),h=(c*u-s*f)*d,p=(o*f-l*u)*d;return h*h+p*p}function TO(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const r=e[i],a=t[r];let o=i-1;for(;o>=n&&t[e[o]]>a;)e[o+1]=e[o--];e[o+1]=r}else{let i=n+1,a=r;MO(e,n+r>>1,i),t[e[n]]>t[e[r]]&&MO(e,n,r),t[e[i]]>t[e[r]]&&MO(e,i,r),t[e[n]]>t[e[i]]&&MO(e,n,i);const o=e[i],s=t[o];for(;;){do{i++}while(t[e[i]]<s);do{a--}while(t[e[a]]>s);if(a<i)break;MO(e,i,a)}e[n+1]=e[a],e[a]=o,r-i+1>=a-n?(TO(e,t,i,r),TO(e,t,n,a-1)):(TO(e,t,n,a-1),TO(e,t,i,r))}}function MO(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function SO(e){return e[0]}function CO(e){return e[1]}const OO=1e-6;class RO{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,t){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,t){this._+=`L${this._x1=+e},${this._y1=+t}`}arc(e,t,n){const r=(e=+e)+(n=+n),i=t=+t;if(n<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${i}`:(Math.abs(this._x1-r)>OO||Math.abs(this._y1-i)>OO)&&(this._+="L"+r+","+i),n&&(this._+=`A${n},${n},0,1,1,${e-n},${t}A${n},${n},0,1,1,${this._x1=r},${this._y1=i}`)}rect(e,t,n,r){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${+n}v${+r}h${-n}Z`}value(){return this._||null}}class NO{constructor(){this._=[]}moveTo(e,t){this._.push([e,t])}closePath(){this._.push(this._[0].slice())}lineTo(e,t){this._.push([e,t])}value(){return this._.length?this._:null}}class LO{constructor(e,[t,n,r,i]=[0,0,960,500]){if(!((r=+r)>=(t=+t)&&(i=+i)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(2*e.points.length),this.vectors=new Float64Array(2*e.points.length),this.xmax=r,this.xmin=t,this.ymax=i,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:t,triangles:n},vectors:r}=this;let i,a;const o=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let r,s,l=0,c=0,u=n.length;l<u;l+=3,c+=2){const u=2*n[l],f=2*n[l+1],d=2*n[l+2],h=e[u],p=e[u+1],m=e[f],g=e[f+1],v=e[d],y=e[d+1],b=m-h,x=g-p,_=v-h,w=y-p,A=2*(b*w-x*_);if(Math.abs(A)<1e-9){if(void 0===i){i=a=0;for(const n of t)i+=e[2*n],a+=e[2*n+1];i/=t.length,a/=t.length}const n=1e9*Math.sign((i-h)*w-(a-p)*_);r=(h+v)/2-n*w,s=(p+y)/2+n*_}else{const e=1/A,t=b*b+x*x,n=_*_+w*w;r=h+(w*t-x*n)*e,s=p+(b*n-_*t)*e}o[c]=r,o[c+1]=s}let s,l,c,u=t[t.length-1],f=4*u,d=e[2*u],h=e[2*u+1];r.fill(0);for(let n=0;n<t.length;++n)u=t[n],s=f,l=d,c=h,f=4*u,d=e[2*u],h=e[2*u+1],r[s+2]=r[f]=c-h,r[s+3]=r[f+1]=d-l}render(e){const t=null==e?e=new RO:void 0,{delaunay:{halfedges:n,inedges:r,hull:i},circumcenters:a,vectors:o}=this;if(i.length<=1)return null;for(let t=0,r=n.length;t<r;++t){const r=n[t];if(r<t)continue;const i=2*Math.floor(t/3),o=2*Math.floor(r/3),s=a[i],l=a[i+1],c=a[o],u=a[o+1];this._renderSegment(s,l,c,u,e)}let s,l=i[i.length-1];for(let t=0;t<i.length;++t){s=l,l=i[t];const n=2*Math.floor(r[l]/3),c=a[n],u=a[n+1],f=4*s,d=this._project(c,u,o[f+2],o[f+3]);d&&this._renderSegment(c,u,d[0],d[1],e)}return t&&t.value()}renderBounds(e){const t=null==e?e=new RO:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}renderCell(e,t){const n=null==t?t=new RO:void 0,r=this._clip(e);if(null===r||!r.length)return;t.moveTo(r[0],r[1]);let i=r.length;for(;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(let e=2;e<i;e+=2)r[e]===r[e-2]&&r[e+1]===r[e-1]||t.lineTo(r[e],r[e+1]);return t.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let t=0,n=e.length/2;t<n;++t){const e=this.cellPolygon(t);e&&(e.index=t,yield e)}}cellPolygon(e){const t=new NO;return this.renderCell(e,t),t.value()}_renderSegment(e,t,n,r,i){let a;const o=this._regioncode(e,t),s=this._regioncode(n,r);0===o&&0===s?(i.moveTo(e,t),i.lineTo(n,r)):(a=this._clipSegment(e,t,n,r,o,s))&&(i.moveTo(a[0],a[1]),i.lineTo(a[2],a[3]))}contains(e,t,n){return(t=+t)==t&&(n=+n)==n&&this.delaunay._step(e,t,n)===e}*neighbors(e){const t=this._clip(e);if(t)for(const n of this.delaunay.neighbors(e)){const e=this._clip(n);if(e)e:for(let r=0,i=t.length;r<i;r+=2)for(let a=0,o=e.length;a<o;a+=2)if(t[r]===e[a]&&t[r+1]===e[a+1]&&t[(r+2)%i]===e[(a+o-2)%o]&&t[(r+3)%i]===e[(a+o-1)%o]){yield n;break e}}}_cell(e){const{circumcenters:t,delaunay:{inedges:n,halfedges:r,triangles:i}}=this,a=n[e];if(-1===a)return null;const o=[];let s=a;do{const n=Math.floor(s/3);if(o.push(t[2*n],t[2*n+1]),s=s%3==2?s-2:s+1,i[s]!==e)break;s=r[s]}while(s!==a&&-1!==s);return o}_clip(e){if(0===e&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const t=this._cell(e);if(null===t)return null;const{vectors:n}=this,r=4*e;return this._simplify(n[r]||n[r+1]?this._clipInfinite(e,t,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(e,t))}_clipFinite(e,t){const n=t.length;let r,i,a,o,s=null,l=t[n-2],c=t[n-1],u=this._regioncode(l,c),f=0;for(let d=0;d<n;d+=2)if(r=l,i=c,l=t[d],c=t[d+1],a=u,u=this._regioncode(l,c),0===a&&0===u)o=f,f=0,s?s.push(l,c):s=[l,c];else{let t,n,d,h,p;if(0===a){if(null===(t=this._clipSegment(r,i,l,c,a,u)))continue;[n,d,h,p]=t}else{if(null===(t=this._clipSegment(l,c,r,i,u,a)))continue;[h,p,n,d]=t,o=f,f=this._edgecode(n,d),o&&f&&this._edge(e,o,f,s,s.length),s?s.push(n,d):s=[n,d]}o=f,f=this._edgecode(h,p),o&&f&&this._edge(e,o,f,s,s.length),s?s.push(h,p):s=[h,p]}if(s)o=f,f=this._edgecode(s[0],s[1]),o&&f&&this._edge(e,o,f,s,s.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return s}_clipSegment(e,t,n,r,i,a){const o=i<a;for(o&&([e,t,n,r,i,a]=[n,r,e,t,a,i]);;){if(0===i&&0===a)return o?[n,r,e,t]:[e,t,n,r];if(i&a)return null;let s,l,c=i||a;8&c?(s=e+(n-e)*(this.ymax-t)/(r-t),l=this.ymax):4&c?(s=e+(n-e)*(this.ymin-t)/(r-t),l=this.ymin):2&c?(l=t+(r-t)*(this.xmax-e)/(n-e),s=this.xmax):(l=t+(r-t)*(this.xmin-e)/(n-e),s=this.xmin),i?(e=s,t=l,i=this._regioncode(e,t)):(n=s,r=l,a=this._regioncode(n,r))}}_clipInfinite(e,t,n,r,i,a){let o,s=Array.from(t);if((o=this._project(s[0],s[1],n,r))&&s.unshift(o[0],o[1]),(o=this._project(s[s.length-2],s[s.length-1],i,a))&&s.push(o[0],o[1]),s=this._clipFinite(e,s))for(let t,n=0,r=s.length,i=this._edgecode(s[r-2],s[r-1]);n<r;n+=2)t=i,i=this._edgecode(s[n],s[n+1]),t&&i&&(n=this._edge(e,t,i,s,n),r=s.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(e,t,n,r,i){for(;t!==n;){let n,a;switch(t){case 5:t=4;continue;case 4:t=6,n=this.xmax,a=this.ymin;break;case 6:t=2;continue;case 2:t=10,n=this.xmax,a=this.ymax;break;case 10:t=8;continue;case 8:t=9,n=this.xmin,a=this.ymax;break;case 9:t=1;continue;case 1:t=5,n=this.xmin,a=this.ymin}r[i]===n&&r[i+1]===a||!this.contains(e,n,a)||(r.splice(i,0,n,a),i+=2)}return i}_project(e,t,n,r){let i,a,o,s=1/0;if(r<0){if(t<=this.ymin)return null;(i=(this.ymin-t)/r)<s&&(o=this.ymin,a=e+(s=i)*n)}else if(r>0){if(t>=this.ymax)return null;(i=(this.ymax-t)/r)<s&&(o=this.ymax,a=e+(s=i)*n)}if(n>0){if(e>=this.xmax)return null;(i=(this.xmax-e)/n)<s&&(a=this.xmax,o=t+(s=i)*r)}else if(n<0){if(e<=this.xmin)return null;(i=(this.xmin-e)/n)<s&&(a=this.xmin,o=t+(s=i)*r)}return[a,o]}_edgecode(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}_regioncode(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}_simplify(e){if(e&&e.length>4){for(let t=0;t<e.length;t+=2){const n=(t+2)%e.length,r=(t+4)%e.length;(e[t]===e[n]&&e[n]===e[r]||e[t+1]===e[n+1]&&e[n+1]===e[r+1])&&(e.splice(n,2),t-=2)}e.length||(e=null)}return e}}const DO=2*Math.PI,PO=Math.pow;function IO(e){return e[0]}function FO(e){return e[1]}function zO(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class jO{static from(e,t=IO,n=FO,r){return new jO("length"in e?function(e,t,n,r){const i=e.length,a=new Float64Array(2*i);for(let o=0;o<i;++o){const i=e[o];a[2*o]=t.call(r,i,o,e),a[2*o+1]=n.call(r,i,o,e)}return a}(e,t,n,r):Float64Array.from(function*(e,t,n,r){let i=0;for(const a of e)yield t.call(r,a,i,e),yield n.call(r,a,i,e),++i}(e,t,n,r)))}constructor(e){this._delaunator=new wO(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&function(e){const{triangles:t,coords:n}=e;for(let e=0;e<t.length;e+=3){const r=2*t[e],i=2*t[e+1],a=2*t[e+2];if((n[a]-n[r])*(n[i+1]-n[r+1])-(n[i]-n[r])*(n[a+1]-n[r+1])>1e-10)return!1}return!0}(e)){this.collinear=Int32Array.from({length:t.length/2},((e,t)=>t)).sort(((e,n)=>t[2*e]-t[2*n]||t[2*e+1]-t[2*n+1]));const e=this.collinear[0],n=this.collinear[this.collinear.length-1],r=[t[2*e],t[2*e+1],t[2*n],t[2*n+1]],i=1e-8*Math.hypot(r[3]-r[1],r[2]-r[0]);for(let e=0,n=t.length/2;e<n;++e){const n=zO(t[2*e],t[2*e+1],i);t[2*e]=n[0],t[2*e+1]=n[1]}this._delaunator=new wO(t)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,i=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let e=0,t=n.length;e<t;++e){const t=i[e%3==2?e-2:e+1];-1!==n[e]&&-1!==a[t]||(a[t]=e)}for(let e=0,t=r.length;e<t;++e)o[r[e]]=e;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],a[r[0]]=1,2===r.length&&(a[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(e){return new LO(this,e)}*neighbors(e){const{inedges:t,hull:n,_hullIndex:r,halfedges:i,triangles:a,collinear:o}=this;if(o){const t=o.indexOf(e);return t>0&&(yield o[t-1]),void(t<o.length-1&&(yield o[t+1]))}const s=t[e];if(-1===s)return;let l=s,c=-1;do{if(yield c=a[l],l=l%3==2?l-2:l+1,a[l]!==e)return;if(l=i[l],-1===l){const t=n[(r[e]+1)%n.length];return void(t!==c&&(yield t))}}while(l!==s)}find(e,t,n=0){if((e=+e)!=e||(t=+t)!=t)return-1;const r=n;let i;for(;(i=this._step(n,e,t))>=0&&i!==n&&i!==r;)n=i;return i}_step(e,t,n){const{inedges:r,hull:i,_hullIndex:a,halfedges:o,triangles:s,points:l}=this;if(-1===r[e]||!l.length)return(e+1)%(l.length>>1);let c=e,u=PO(t-l[2*e],2)+PO(n-l[2*e+1],2);const f=r[e];let d=f;do{let r=s[d];const f=PO(t-l[2*r],2)+PO(n-l[2*r+1],2);if(f<u&&(u=f,c=r),d=d%3==2?d-2:d+1,s[d]!==e)break;if(d=o[d],-1===d){if(d=i[(a[e]+1)%i.length],d!==r&&PO(t-l[2*d],2)+PO(n-l[2*d+1],2)<u)return d;break}}while(d!==f);return c}render(e){const t=null==e?e=new RO:void 0,{points:n,halfedges:r,triangles:i}=this;for(let t=0,a=r.length;t<a;++t){const a=r[t];if(a<t)continue;const o=2*i[t],s=2*i[a];e.moveTo(n[o],n[o+1]),e.lineTo(n[s],n[s+1])}return this.renderHull(e),t&&t.value()}renderPoints(e,t){void 0!==t||e&&"function"==typeof e.moveTo||(t=e,e=null),t=null==t?2:+t;const n=null==e?e=new RO:void 0,{points:r}=this;for(let n=0,i=r.length;n<i;n+=2){const i=r[n],a=r[n+1];e.moveTo(i+t,a),e.arc(i,a,t,0,DO)}return n&&n.value()}renderHull(e){const t=null==e?e=new RO:void 0,{hull:n,points:r}=this,i=2*n[0],a=n.length;e.moveTo(r[i],r[i+1]);for(let t=1;t<a;++t){const i=2*n[t];e.lineTo(r[i],r[i+1])}return e.closePath(),t&&t.value()}hullPolygon(){const e=new NO;return this.renderHull(e),e.value()}renderTriangle(e,t){const n=null==t?t=new RO:void 0,{points:r,triangles:i}=this,a=2*i[e*=3],o=2*i[e+1],s=2*i[e+2];return t.moveTo(r[a],r[a+1]),t.lineTo(r[o],r[o+1]),t.lineTo(r[s],r[s+1]),t.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:e}=this;for(let t=0,n=e.length/3;t<n;++t)yield this.trianglePolygon(t)}trianglePolygon(e){const t=new NO;return this.renderTriangle(e,t),t.value()}}function BO(e){nd.call(this,null,e)}BO.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const UO=[-1e5,-1e5,1e5,1e5];function $O(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}gl(BO,nd,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:UO;const a=this.value=jO.from(r,e.x,e.y).voronoi(i);for(let e=0,t=r.length;e<t;++e){const t=a.cellPolygon(e);r[e][n]=t&&(2!==(o=t).length||o[0][0]!==o[1][0]||o[0][1]!==o[1][1])?$O(t):null}var o;return t.reflow(e.modified()).modifies(n)}});var qO=Math.PI/180,HO=64,VO=2048;function WO(){var e,t,n,r,i,a,o,s=[256,256],l=ZO,c=[],u=Math.random,f={};function d(e,t,n){for(var r,i,a,o=t.x,c=t.y,f=Math.hypot(s[0],s[1]),d=l(s),h=u()<.5?1:-1,p=-h;(r=d(p+=h))&&(i=~~r[0],a=~~r[1],!(Math.min(Math.abs(i),Math.abs(a))>=f));)if(t.x=o+i,t.y=c+a,!(t.x+t.x0<0||t.y+t.y0<0||t.x+t.x1>s[0]||t.y+t.y1>s[1])&&(!n||!YO(t,e,s[0]))&&(!n||KO(t,n))){for(var m,g=t.sprite,v=t.width>>5,y=s[0]>>5,b=t.x-(v<<4),x=127&b,_=32-x,w=t.y1-t.y0,A=(t.y+t.y0)*y+(b>>5),k=0;k<w;k++){m=0;for(var E=0;E<=v;E++)e[A+E]|=m<<_|(E<v?(m=g[k*v+E])>>>x:0);A+=y}return t.sprite=null,!0}return!1}return f.layout=function(){for(var l=function(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=(HO<<5)/t,e.height=VO/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}(Gm()),f=function(e){var t=[],n=-1;for(;++n<e;)t[n]=0;return t}((s[0]>>5)*s[1]),h=null,p=c.length,m=-1,g=[],v=c.map((s=>({text:e(s),font:t(s),style:r(s),weight:i(s),rotate:a(s),size:~~(n(s)+1e-14),padding:o(s),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:s}))).sort(((e,t)=>t.size-e.size));++m<p;){var y=v[m];y.x=s[0]*(u()+.5)>>1,y.y=s[1]*(u()+.5)>>1,GO(l,y,v,m),y.hasText&&d(f,y,h)&&(g.push(y),h?XO(h,y):h=[{x:y.x+y.x0,y:y.y+y.y0},{x:y.x+y.x1,y:y.y+y.y1}],y.x-=s[0]>>1,y.y-=s[1]>>1)}return g},f.words=function(e){return arguments.length?(c=e,f):c},f.size=function(e){return arguments.length?(s=[+e[0],+e[1]],f):s},f.font=function(e){return arguments.length?(t=JO(e),f):t},f.fontStyle=function(e){return arguments.length?(r=JO(e),f):r},f.fontWeight=function(e){return arguments.length?(i=JO(e),f):i},f.rotate=function(e){return arguments.length?(a=JO(e),f):a},f.text=function(t){return arguments.length?(e=JO(t),f):e},f.spiral=function(e){return arguments.length?(l=QO[e]||e,f):l},f.fontSize=function(e){return arguments.length?(n=JO(e),f):n},f.padding=function(e){return arguments.length?(o=JO(e),f):o},f.random=function(e){return arguments.length?(u=e,f):u},f}function GO(e,t,n,r){if(!t.sprite){var i=e.context,a=e.ratio;i.clearRect(0,0,(HO<<5)/a,VO/a);var o,s,l,c,u,f=0,d=0,h=0,p=n.length;for(--r;++r<p;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font,o=i.measureText(t.text+"m").width*a,l=t.size<<1,t.rotate){var m=Math.sin(t.rotate*qO),g=Math.cos(t.rotate*qO),v=o*g,y=o*m,b=l*g,x=l*m;o=Math.max(Math.abs(v+x),Math.abs(v-x))+31>>5<<5,l=~~Math.max(Math.abs(y+b),Math.abs(y-b))}else o=o+31>>5<<5;if(l>h&&(h=l),f+o>=HO<<5&&(f=0,d+=h,h=0),d+l>=VO)break;i.translate((f+(o>>1))/a,(d+(l>>1))/a),t.rotate&&i.rotate(t.rotate*qO),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=o,t.height=l,t.xoff=f,t.yoff=d,t.x1=o>>1,t.y1=l>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,f+=o}for(var _=i.getImageData(0,0,(HO<<5)/a,VO/a).data,w=[];--r>=0;)if((t=n[r]).hasText){for(s=(o=t.width)>>5,l=t.y1-t.y0,c=0;c<l*s;c++)w[c]=0;if(null==(f=t.xoff))return;d=t.yoff;var A=0,k=-1;for(u=0;u<l;u++){for(c=0;c<o;c++){var E=s*u+(c>>5),T=_[(d+u)*(HO<<5)+(f+c)<<2]?1<<31-c%32:0;w[E]|=T,A|=T}A?k=u:(t.y0++,l--,u--,d++)}t.y1=t.y0+k,t.sprite=w.slice(0,(t.y1-t.y0)*s)}}}function YO(e,t,n){n>>=5;for(var r,i=e.sprite,a=e.width>>5,o=e.x-(a<<4),s=127&o,l=32-s,c=e.y1-e.y0,u=(e.y+e.y0)*n+(o>>5),f=0;f<c;f++){r=0;for(var d=0;d<=a;d++)if((r<<l|(d<a?(r=i[f*a+d])>>>s:0))&t[u+d])return!0;u+=n}return!1}function XO(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function KO(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function ZO(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function JO(e){return"function"==typeof e?e:function(){return e}}var QO={archimedean:ZO,rectangular:function(e){var t=4*e[0]/e[1],n=0,r=0;return function(e){var i=e<0?-1:1;switch(Math.sqrt(1+4*i*e)-i&3){case 0:n+=t;break;case 1:r+=4;break;case 2:n-=t;break;default:r-=4}return[n,r]}}};const eR=["x","y","font","fontSize","fontStyle","fontWeight","angle"],tR=["text","font","rotate","fontSize","fontStyle","fontWeight"];function nR(e){nd.call(this,WO(),e)}nR.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:eR}]},gl(nR,nd,{transform(e,t){!e.size||e.size[0]&&e.size[1]||us("Wordcloud size dimensions must be non-zero.");const n=e.modified();if(!(n||t.changed(t.ADD_REM)||tR.some((function(n){const r=e[n];return Qs(r)&&t.modified(r.fields)}))))return;const r=t.materialize(t.SOURCE).source,i=this.value,a=e.as||eR;let o,s=e.fontSize||14;if(Qs(s)?o=e.fontSizeRange:s=ol(s),o){const e=s,t=Fv("sqrt")().domain(cl(r,e)).range(o);s=n=>t(e(n))}r.forEach((e=>{e[a[0]]=NaN,e[a[1]]=NaN,e[a[3]]=0}));const l=i.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(s).random(wd).layout(),c=i.size(),u=c[0]>>1,f=c[1]>>1,d=l.length;for(let e,t,n=0;n<d;++n)e=l[n],t=e.datum,t[a[0]]=e.x+u,t[a[1]]=e.y+f,t[a[2]]=e.font,t[a[3]]=e.size,t[a[4]]=e.style,t[a[5]]=e.weight,t[a[6]]=e.rotate;return t.reflow(n).modifies(a)}});const rR=e=>new Uint8Array(e),iR=e=>new Uint16Array(e),aR=e=>new Uint32Array(e);function oR(e,t,n){const r=(t<257?rR:t<65537?iR:aR)(e);return n&&r.set(n),r}function sR(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(e,t){const n=this,i=n.bisect(n.range,e.value),a=e.index,o=i[0],s=i[1],l=a.length;let c;for(c=0;c<o;++c)t[a[c]]|=r;for(c=s;c<l;++c)t[a[c]]|=r;return n}}}function lR(){let e=aR(0),t=[],n=0;return{insert:function(r,i,a){if(!i.length)return[];const o=n,s=i.length,l=aR(s);let c,u,f,d=Array(s);for(f=0;f<s;++f)d[f]=r(i[f]),l[f]=f;if(d=function(e,t){return e.sort.call(t,((t,n)=>{const r=e[t],i=e[n];return r<i?-1:r>i?1:0})),function(e,t){return Array.from(t,(t=>e[t]))}(e,t)}(d,l),o)c=t,u=e,t=Array(o+s),e=aR(o+s),function(e,t,n,r,i,a,o,s,l){let c,u=0,f=0;for(c=0;u<r&&f<o;++c)t[u]<i[f]?(s[c]=t[u],l[c]=n[u++]):(s[c]=i[f],l[c]=a[f++]+e);for(;u<r;++u,++c)s[c]=t[u],l[c]=n[u];for(;f<o;++f,++c)s[c]=i[f],l[c]=a[f]+e}(a,c,u,o,d,l,s,t,e);else{if(a>0)for(f=0;f<s;++f)l[f]+=a;t=d,e=l}return n=o+s,{index:l,value:d}},remove:function(r,i){const a=n;let o,s,l;for(s=0;!i[e[s]]&&s<a;++s);for(l=s;s<a;++s)i[o=e[s]]||(e[l]=o,t[l]=t[s],++l);n=a-r},bisect:function(e,r){let i;return r?i=r.length:(r=t,i=n),[Zm(r,e[0],0,i),Km(r,e[1],0,i)]},reindex:function(t){for(let r=0,i=n;r<i;++r)e[r]=t[e[r]]},index:()=>e,size:()=>n}}function cR(e){nd.call(this,function(){let e=8,t=[],n=aR(0),r=oR(0,e),i=oR(0,e);return{data:()=>t,seen:()=>n=function(e,t,n){return e.length>=t?e:((n=n||new e.constructor(t)).set(e),n)}(n,t.length),add(e){for(let n,r=0,i=t.length,a=e.length;r<a;++r)n=e[r],n._index=i++,t.push(n)},remove(e,n){const a=t.length,o=Array(a-e),s=t;let l,c,u;for(c=0;!n[c]&&c<a;++c)o[c]=t[c],s[c]=c;for(u=c;c<a;++c)l=t[c],n[c]?s[c]=-1:(s[c]=u,r[u]=r[c],i[u]=i[c],o[u]=l,l._index=u++),r[c]=0;return t=o,s},size:()=>t.length,curr:()=>r,prev:()=>i,reset:e=>i[e]=r[e],all:()=>e<257?255:e<65537?65535:4294967295,set(e,t){r[e]|=t},clear(e,t){r[e]&=~t},resize(t,n){(t>r.length||n>e)&&(e=Math.max(n,e),r=oR(t,e,r),i=oR(t,e))}}}(),e),this._indices=null,this._dims=null}function uR(e){nd.call(this,null,e)}cR.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]},gl(cR,nd,{transform(e,t){return this._dims?e.modified("fields")||e.fields.some((e=>t.modified(e.fields)))?this.reinit(e,t):this.eval(e,t):this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},a=this._dims=[],o=r.length;let s,l,c=0;for(;c<o;++c)s=n[c].fname,l=i[s]||(i[s]=lR()),a.push(sR(l,c,r[c]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,a=this._indices,o=this._dims,s=this.value,l=s.curr(),c=s.prev(),u=s.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,v,y,b,x,_,w,A;if(c.set(l),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&s.add(t.add),t.mod.length)for(x={},y=t.mod,_=0,w=y.length;_<w;++_)x[y[_]._index]=1;for(_=0;_<h;++_)A=r[_],(!o[_]||e.modified("fields",_)||t.modified(A.fields))&&(v=A.fname,(m=p[v])||(a[v]=g=lR(),p[v]=m=g.insert(A,t.source,0)),o[_]=sR(g,_,i[_]).onAdd(m,l));for(_=0,w=s.data().length;_<w;++_)b[_]||(c[_]!==l[_]?f.push(_):x[_]&&l[_]!==u&&d.push(_));return s.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,a=this._dims,o=this._indices,s=e.fields,l={},c=n.add,u=i.size()+r.length,f=a.length;let d,h,p,m=i.size();i.resize(u,f),i.add(r);const g=i.curr(),v=i.prev(),y=i.all();for(d=0;d<f;++d)h=s[d].fname,p=l[h]||(l[h]=o[h].insert(s[d],r,m)),a[d].onAdd(p,g);for(;m<u;++m)v[m]=y,g[m]!==y&&c.push(m)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),a=r.all(),o=e.mod;let s,l,c;for(s=0,l=o.length;s<l;++s)c=o[s]._index,i[c]!==a&&n.push(c)},remove(e,t,n){const r=this._indices,i=this.value,a=i.curr(),o=i.prev(),s=i.all(),l={},c=n.rem,u=t.rem;let f,d,h,p;for(f=0,d=u.length;f<d;++f)h=u[f]._index,l[h]=1,o[h]=p=a[h],a[h]=s,p!==s&&c.push(h);for(h in r)r[h].remove(d,l);return this.reindex(t,d,l),l},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter((()=>{const e=i.remove(t,n);for(const t in r)r[t].reindex(e)}))},update(e,t,n){const r=this._dims,i=e.query,a=t.stamp,o=r.length;let s,l,c=0;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(s=l,++c);if(1===c)c=r[s].one,this.incrementOne(r[s],i[s],n.add,n.rem);else for(l=0,c=0;l<o;++l)e.modified("query",l)&&(c|=r[l].one,this.incrementAll(r[l],i[l],a,n.add),n.rem=n.add);return c},incrementAll(e,t,n,r){const i=this.value,a=i.seen(),o=i.curr(),s=i.prev(),l=e.index(),c=e.bisect(e.range),u=e.bisect(t),f=u[0],d=u[1],h=c[0],p=c[1],m=e.one;let g,v,y;if(f<h)for(g=f,v=Math.min(h,d);g<v;++g)y=l[g],a[y]!==n&&(s[y]=o[y],a[y]=n,r.push(y)),o[y]^=m;else if(f>h)for(g=h,v=Math.min(f,p);g<v;++g)y=l[g],a[y]!==n&&(s[y]=o[y],a[y]=n,r.push(y)),o[y]^=m;if(d>p)for(g=Math.max(f,p),v=d;g<v;++g)y=l[g],a[y]!==n&&(s[y]=o[y],a[y]=n,r.push(y)),o[y]^=m;else if(d<p)for(g=Math.max(h,d),v=p;g<v;++g)y=l[g],a[y]!==n&&(s[y]=o[y],a[y]=n,r.push(y)),o[y]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value.curr(),a=e.index(),o=e.bisect(e.range),s=e.bisect(t),l=s[0],c=s[1],u=o[0],f=o[1],d=e.one;let h,p,m;if(l<u)for(h=l,p=Math.min(u,c);h<p;++h)m=a[h],i[m]^=d,n.push(m);else if(l>u)for(h=u,p=Math.min(l,f);h<p;++h)m=a[h],i[m]^=d,r.push(m);if(c>f)for(h=Math.max(l,f),p=c;h<p;++h)m=a[h],i[m]^=d,n.push(m);else if(c<f)for(h=Math.max(u,c),p=f;h<p;++h)m=a[h],i[m]^=d,r.push(m);e.range=t.slice()}}),uR.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},gl(uR,nd,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const a=t.fork(t.ALL),o=r.data(),s=r.curr(),l=r.prev(),c=e=>s[e]&n?null:o[e];return a.filter(a.MOD,c),i&i-1?(a.filter(a.ADD,(e=>{const t=s[e]&n;return!t&&t^l[e]&n?o[e]:null})),a.filter(a.REM,(e=>{const t=s[e]&n;return t&&!(0^l[e]&n)?o[e]:null}))):(a.filter(a.ADD,c),a.filter(a.REM,(e=>(s[e]&n)===i?o[e]:null))),a.filter(a.SOURCE,(e=>c(e._index)))}});const fR="Literal",dR="Property",hR="ArrayExpression",pR="BinaryExpression",mR="CallExpression",gR="ConditionalExpression",vR="LogicalExpression",yR="MemberExpression",bR="ObjectExpression",xR="UnaryExpression";function _R(e){this.type=e}var wR,AR,kR,ER,TR;_R.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=function(e){switch(e.type){case hR:return e.elements;case pR:case vR:return[e.left,e.right];case mR:return[e.callee].concat(e.arguments);case gR:return[e.test,e.consequent,e.alternate];case yR:return[e.object,e.property];case bR:return e.properties;case dR:return[e.key,e.value];case xR:return[e.argument];default:return[]}}(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};var MR=1,SR=2,CR=3,OR=4,RR=5,NR=6,LR=7,DR=8;(wR={})[MR]="Boolean",wR[SR]="<end>",wR[CR]="Identifier",wR[OR]="Keyword",wR[RR]="Null",wR[NR]="Numeric",wR[LR]="Punctuator",wR[DR]="String",wR[9]="RegularExpression";var PR="ArrayExpression",IR="BinaryExpression",FR="CallExpression",zR="ConditionalExpression",jR="Identifier",BR="Literal",UR="LogicalExpression",$R="MemberExpression",qR="ObjectExpression",HR="Property",VR="UnaryExpression",WR="Unexpected token %0",GR="Unexpected number",YR="Unexpected string",XR="Unexpected identifier",KR="Unexpected reserved word",ZR="Unexpected end of input",JR="Invalid regular expression",QR="Invalid regular expression: missing /",eN="Octal literals are not allowed in strict mode.",tN="Duplicate data property in object literal not allowed in strict mode",nN="ILLEGAL",rN="Disabled.",iN=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),aN=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function oN(e,t){if(!e)throw new Error("ASSERT: "+t)}function sN(e){return e>=48&&e<=57}function lN(e){return"0123456789abcdefABCDEF".includes(e)}function cN(e){return"01234567".includes(e)}function uN(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function fN(e){return 10===e||13===e||8232===e||8233===e}function dN(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&iN.test(String.fromCharCode(e))}function hN(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&aN.test(String.fromCharCode(e))}const pN={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function mN(){for(;kR<ER;){const e=AR.charCodeAt(kR);if(!uN(e)&&!fN(e))break;++kR}}function gN(e){var t,n,r,i=0;for(n="u"===e?4:2,t=0;t<n;++t)kR<ER&&lN(AR[kR])?(r=AR[kR++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())):NN({},WR,nN);return String.fromCharCode(i)}function vN(){var e,t,n,r;for(t=0,"}"===(e=AR[kR])&&NN({},WR,nN);kR<ER&&lN(e=AR[kR++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&NN({},WR,nN),t<=65535?String.fromCharCode(t):(n=55296+(t-65536>>10),r=56320+(t-65536&1023),String.fromCharCode(n,r))}function yN(){var e,t;for(e=AR.charCodeAt(kR++),t=String.fromCharCode(e),92===e&&(117!==AR.charCodeAt(kR)&&NN({},WR,nN),++kR,(e=gN("u"))&&"\\"!==e&&dN(e.charCodeAt(0))||NN({},WR,nN),t=e);kR<ER&&hN(e=AR.charCodeAt(kR));)++kR,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==AR.charCodeAt(kR)&&NN({},WR,nN),++kR,(e=gN("u"))&&"\\"!==e&&hN(e.charCodeAt(0))||NN({},WR,nN),t+=e);return t}function bN(){var e,t;return e=kR,t=92===AR.charCodeAt(kR)?yN():function(){var e,t;for(e=kR++;kR<ER;){if(92===(t=AR.charCodeAt(kR)))return kR=e,yN();if(!hN(t))break;++kR}return AR.slice(e,kR)}(),{type:1===t.length?CR:pN.hasOwnProperty(t)?OR:"null"===t?RR:"true"===t||"false"===t?MR:CR,value:t,start:e,end:kR}}function xN(){var e,t,n,r,i=kR,a=AR.charCodeAt(kR),o=AR[kR];switch(a){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++kR,{type:LR,value:String.fromCharCode(a),start:i,end:kR};default:if(61===(e=AR.charCodeAt(kR+1)))switch(a){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return kR+=2,{type:LR,value:String.fromCharCode(a)+String.fromCharCode(e),start:i,end:kR};case 33:case 61:return kR+=2,61===AR.charCodeAt(kR)&&++kR,{type:LR,value:AR.slice(i,kR),start:i,end:kR}}}return">>>="===(r=AR.substr(kR,4))?{type:LR,value:r,start:i,end:kR+=4}:">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?{type:LR,value:n,start:i,end:kR+=3}:o===(t=n.substr(0,2))[1]&&"+-<>&|".includes(o)||"=>"===t?{type:LR,value:t,start:i,end:kR+=2}:("//"===t&&NN({},WR,nN),"<>=!+-*%&|^/".includes(o)?(++kR,{type:LR,value:o,start:i,end:kR}):void NN({},WR,nN))}function _N(){var e,t,n;if(oN(sN((n=AR[kR]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=kR,e="","."!==n){if(e=AR[kR++],n=AR[kR],"0"===e){if("x"===n||"X"===n)return++kR,function(e){let t="";for(;kR<ER&&lN(AR[kR]);)t+=AR[kR++];return 0===t.length&&NN({},WR,nN),dN(AR.charCodeAt(kR))&&NN({},WR,nN),{type:NR,value:parseInt("0x"+t,16),start:e,end:kR}}(t);if(cN(n))return function(e){let t="0"+AR[kR++];for(;kR<ER&&cN(AR[kR]);)t+=AR[kR++];return(dN(AR.charCodeAt(kR))||sN(AR.charCodeAt(kR)))&&NN({},WR,nN),{type:NR,value:parseInt(t,8),octal:!0,start:e,end:kR}}(t);n&&sN(n.charCodeAt(0))&&NN({},WR,nN)}for(;sN(AR.charCodeAt(kR));)e+=AR[kR++];n=AR[kR]}if("."===n){for(e+=AR[kR++];sN(AR.charCodeAt(kR));)e+=AR[kR++];n=AR[kR]}if("e"===n||"E"===n)if(e+=AR[kR++],"+"!==(n=AR[kR])&&"-"!==n||(e+=AR[kR++]),sN(AR.charCodeAt(kR)))for(;sN(AR.charCodeAt(kR));)e+=AR[kR++];else NN({},WR,nN);return dN(AR.charCodeAt(kR))&&NN({},WR,nN),{type:NR,value:parseFloat(e),start:t,end:kR}}function wN(){var e,t,n,r;return TR=null,mN(),e=kR,t=function(){var e,t,n,r;for(oN("/"===(e=AR[kR]),"Regular expression literal must start with a slash"),t=AR[kR++],n=!1,r=!1;kR<ER;)if(t+=e=AR[kR++],"\\"===e)fN((e=AR[kR++]).charCodeAt(0))&&NN({},QR),t+=e;else if(fN(e.charCodeAt(0)))NN({},QR);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||NN({},QR),{value:t.substr(1,t.length-2),literal:t}}(),n=function(){var e,t,n;for(t="",n="";kR<ER&&hN((e=AR[kR]).charCodeAt(0));)++kR,"\\"===e&&kR<ER?NN({},WR,nN):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&NN({},JR,n),{value:n,literal:t}}(),r=function(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,((e,t)=>{if(parseInt(t,16)<=1114111)return"x";NN({},JR)})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(e){NN({},JR)}try{return new RegExp(e,t)}catch(e){return null}}(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:kR}}function AN(){if(mN(),kR>=ER)return{type:SR,start:kR,end:kR};const e=AR.charCodeAt(kR);return dN(e)?bN():40===e||41===e||59===e?xN():39===e||34===e?function(){var e,t,n,r,i="",a=!1;for(oN("'"===(e=AR[kR])||'"'===e,"String literal must starts with a quote"),t=kR,++kR;kR<ER;){if((n=AR[kR++])===e){e="";break}if("\\"===n)if((n=AR[kR++])&&fN(n.charCodeAt(0)))"\r"===n&&"\n"===AR[kR]&&++kR;else switch(n){case"u":case"x":"{"===AR[kR]?(++kR,i+=vN()):i+=gN(n);break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:cN(n)?(0!==(r="01234567".indexOf(n))&&(a=!0),kR<ER&&cN(AR[kR])&&(a=!0,r=8*r+"01234567".indexOf(AR[kR++]),"0123".includes(n)&&kR<ER&&cN(AR[kR])&&(r=8*r+"01234567".indexOf(AR[kR++]))),i+=String.fromCharCode(r)):i+=n}else{if(fN(n.charCodeAt(0)))break;i+=n}}return""!==e&&NN({},WR,nN),{type:DR,value:i,octal:a,start:t,end:kR}}():46===e?sN(AR.charCodeAt(kR+1))?_N():xN():sN(e)?_N():xN()}function kN(){const e=TR;return kR=e.end,TR=AN(),kR=e.end,e}function EN(){const e=kR;TR=AN(),kR=e}function TN(e,t,n){const r=new _R("||"===e||"&&"===e?UR:IR);return r.operator=e,r.left=t,r.right=n,r}function MN(e,t){const n=new _R(FR);return n.callee=e,n.arguments=t,n}function SN(e){const t=new _R(jR);return t.name=e,t}function CN(e){const t=new _R(BR);return t.value=e.value,t.raw=AR.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function ON(e,t,n){const r=new _R($R);return r.computed="["===e,r.object=t,r.property=n,r.computed||(n.member=!0),r}function RN(e,t,n){const r=new _R(HR);return r.key=t,r.value=n,r.kind=e,r}function NN(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,((e,t)=>(oN(t<r.length,"Message reference must be in range"),r[t])));throw(n=new Error(i)).index=kR,n.description=i,n}function LN(e){e.type===SR&&NN(e,ZR),e.type===NR&&NN(e,GR),e.type===DR&&NN(e,YR),e.type===CR&&NN(e,XR),e.type===OR&&NN(e,KR),NN(e,WR,e.value)}function DN(e){const t=kN();t.type===LR&&t.value===e||LN(t)}function PN(e){return TR.type===LR&&TR.value===e}function IN(e){return TR.type===OR&&TR.value===e}function FN(){const e=[];for(kR=TR.start,DN("[");!PN("]");)PN(",")?(kN(),e.push(null)):(e.push(XN()),PN("]")||DN(","));return kN(),function(e){const t=new _R(PR);return t.elements=e,t}(e)}function zN(){kR=TR.start;const e=kN();return e.type===DR||e.type===NR?(e.octal&&NN(e,eN),CN(e)):SN(e.value)}function jN(){var e,t,n;return kR=TR.start,(e=TR).type===CR?(n=zN(),DN(":"),RN("init",n,XN())):e.type!==SR&&e.type!==LR?(t=zN(),DN(":"),RN("init",t,XN())):void LN(e)}function BN(){var e,t,n=[],r={},i=String;for(kR=TR.start,DN("{");!PN("}");)t="$"+((e=jN()).key.type===jR?e.key.name:i(e.key.value)),Object.prototype.hasOwnProperty.call(r,t)?NN({},tN):r[t]=!0,n.push(e),PN("}")||DN(",");return DN("}"),function(e){const t=new _R(qR);return t.properties=e,t}(n)}const UN={if:1};function $N(){var e,t,n;if(PN("("))return function(){DN("(");const e=KN();return DN(")"),e}();if(PN("["))return FN();if(PN("{"))return BN();if(e=TR.type,kR=TR.start,e===CR||UN[TR.value])n=SN(kN().value);else if(e===DR||e===NR)TR.octal&&NN(TR,eN),n=CN(kN());else{if(e===OR)throw new Error(rN);e===MR?((t=kN()).value="true"===t.value,n=CN(t)):e===RR?((t=kN()).value=null,n=CN(t)):PN("/")||PN("/=")?(n=CN(wN()),EN()):LN(kN())}return n}function qN(){const e=[];if(DN("("),!PN(")"))for(;kR<ER&&(e.push(XN()),!PN(")"));)DN(",");return DN(")"),e}function HN(){kR=TR.start;const e=kN();return function(e){return e.type===CR||e.type===OR||e.type===MR||e.type===RR}(e)||LN(e),SN(e.value)}function VN(){DN("[");const e=KN();return DN("]"),e}function WN(){const e=function(){var e;for(e=$N();;)if(PN("."))DN("."),e=ON(".",e,HN());else if(PN("("))e=MN(e,qN());else{if(!PN("["))break;e=ON("[",e,VN())}return e}();if(TR.type===LR&&(PN("++")||PN("--")))throw new Error(rN);return e}function GN(){var e,t;if(TR.type!==LR&&TR.type!==OR)t=WN();else{if(PN("++")||PN("--"))throw new Error(rN);if(PN("+")||PN("-")||PN("~")||PN("!"))e=kN(),t=GN(),t=function(e,t){const n=new _R(VR);return n.operator=e,n.argument=t,n.prefix=!0,n}(e.value,t);else{if(IN("delete")||IN("void")||IN("typeof"))throw new Error(rN);t=WN()}}return t}function YN(e){let t=0;if(e.type!==LR&&e.type!==OR)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function XN(){var e,t;return e=function(){var e,t,n,r,i,a,o,s,l,c;if(e=TR,l=GN(),0===(i=YN(r=TR)))return l;for(r.prec=i,kN(),t=[e,TR],a=[l,r,o=GN()];(i=YN(TR))>0;){for(;a.length>2&&i<=a[a.length-2].prec;)o=a.pop(),s=a.pop().value,l=a.pop(),t.pop(),n=TN(s,l,o),a.push(n);(r=kN()).prec=i,a.push(r),t.push(TR),n=GN(),a.push(n)}for(n=a[c=a.length-1],t.pop();c>1;)t.pop(),n=TN(a[c-1].value,a[c-2],n),c-=2;return n}(),PN("?")&&(kN(),t=XN(),DN(":"),e=function(e,t,n){const r=new _R(zR);return r.test=e,r.consequent=t,r.alternate=n,r}(e,t,XN())),e}function KN(){const e=XN();if(PN(","))throw new Error(rN);return e}function ZN(e){kR=0,ER=(AR=e).length,TR=null,EN();const t=KN();if(TR.type!==SR)throw new Error("Unexpect token after expression.");return t}var JN={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function QN(e){function t(t,n,r){return i=>function(t,n,r,i){let a=e(n[0]);return r&&(a=r+"("+a+")",0===r.lastIndexOf("new ",0)&&(a="("+a+")")),a+"."+t+(i<0?"":0===i?"()":"("+n.slice(1).map(e).join(",")+")")}(t,i,n,r)}const n="new Date",r="String",i="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){t.length<3&&us("Missing arguments to clamp function."),t.length>3&&us("Too many arguments to clamp function.");const n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:t("getDate",n,0),day:t("getDay",n,0),year:t("getFullYear",n,0),month:t("getMonth",n,0),hours:t("getHours",n,0),minutes:t("getMinutes",n,0),seconds:t("getSeconds",n,0),milliseconds:t("getMilliseconds",n,0),time:t("getTime",n,0),timezoneoffset:t("getTimezoneOffset",n,0),utcdate:t("getUTCDate",n,0),utcday:t("getUTCDay",n,0),utcyear:t("getUTCFullYear",n,0),utcmonth:t("getUTCMonth",n,0),utchours:t("getUTCHours",n,0),utcminutes:t("getUTCMinutes",n,0),utcseconds:t("getUTCSeconds",n,0),utcmilliseconds:t("getUTCMilliseconds",n,0),length:t("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:t("toUpperCase",r,0),lower:t("toLowerCase",r,0),substring:t("substring",r),split:t("split",r),trim:t("trim",r,0),regexp:i,test:t("test",i),if:function(t){t.length<3&&us("Missing arguments to if function."),t.length>3&&us("Too many arguments to if function.");const n=t.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}}function eL(e){const t=(e=e||{}).allowed?Fl(e.allowed):{},n=e.forbidden?Fl(e.forbidden):{},r=e.constants||JN,i=(e.functions||QN)(f),a=e.globalvar,o=e.fieldvar,s=Qs(a)?a:e=>`${a}["${e}"]`;let l={},c={},u=0;function f(e){if(Al(e))return e;const t=d[e.type];return null==t&&us("Unsupported type: "+e.type),t(e)}const d={Literal:e=>e.raw,Identifier:e=>{const i=e.name;return u>0?i:dl(n,i)?us("Illegal identifier: "+i):dl(r,i)?r[i]:dl(t,i)?i:(l[i]=1,s(i))},MemberExpression:e=>{const t=!e.computed,n=f(e.object);t&&(u+=1);const r=f(e.property);return n===o&&(c[function(e){const t=e&&e.length-1;return t&&('"'===e[0]&&'"'===e[t]||"'"===e[0]&&"'"===e[t])?e.slice(1,-1):e}(r)]=1),t&&(u-=1),n+(t?"."+r:"["+r+"]")},CallExpression:e=>{"Identifier"!==e.callee.type&&us("Illegal callee type: "+e.callee.type);const t=e.callee.name,n=e.arguments,r=dl(i,t)&&i[t];return r||us("Unrecognized function: "+t),Qs(r)?r(n):r+"("+n.map(f).join(",")+")"},ArrayExpression:e=>"["+e.elements.map(f).join(",")+"]",BinaryExpression:e=>"("+f(e.left)+" "+e.operator+" "+f(e.right)+")",UnaryExpression:e=>"("+e.operator+f(e.argument)+")",ConditionalExpression:e=>"("+f(e.test)+"?"+f(e.consequent)+":"+f(e.alternate)+")",LogicalExpression:e=>"("+f(e.left)+e.operator+f(e.right)+")",ObjectExpression:e=>"{"+e.properties.map(f).join(",")+"}",Property:e=>{u+=1;const t=f(e.key);return u-=1,t+":"+f(e.value)}};function h(e){const t={code:f(e),globals:Object.keys(l),fields:Object.keys(c)};return l={},c={},t}return h.functions=i,h.constants=r,h}var tL,nL,rL,iL,aL,oL,sL,lL,cL,uL,fL,dL,hL,pL,mL,gL,vL=new pE,yL=new pE,bL={point:zE,lineStart:zE,lineEnd:zE,polygonStart:function(){vL=new pE,bL.lineStart=xL,bL.lineEnd=_L},polygonEnd:function(){var e=+vL;yL.add(e<0?xE+e:e),this.lineStart=this.lineEnd=this.point=zE},sphere:function(){yL.add(xE)}};function xL(){bL.point=wL}function _L(){AL(tL,nL)}function wL(e,t){bL.point=AL,tL=e,nL=t,rL=e*=wE,iL=TE(t=(t*=wE)/2+bE),aL=NE(t)}function AL(e,t){var n=(e*=wE)-rL,r=n>=0?1:-1,i=r*n,a=TE(t=(t*=wE)/2+bE),o=NE(t),s=aL*o,l=iL*a+s*TE(i),c=s*r*NE(i);vL.add(EE(c,l)),rL=e,iL=a,aL=o}var kL,EL,TL,ML,SL,CL,OL,RL,NL,LL,DL,PL,IL,FL,zL,jL,BL={point:UL,lineStart:qL,lineEnd:HL,polygonStart:function(){BL.point=VL,BL.lineStart=WL,BL.lineEnd=GL,pL=new pE,bL.polygonStart()},polygonEnd:function(){bL.polygonEnd(),BL.point=UL,BL.lineStart=qL,BL.lineEnd=HL,vL<0?(oL=-(lL=180),sL=-(cL=90)):pL>mE?cL=90:pL<-mE&&(sL=-90),gL[0]=oL,gL[1]=lL},sphere:function(){oL=-(lL=180),sL=-(cL=90)}};function UL(e,t){mL.push(gL=[oL=e,lL=e]),t<sL&&(sL=t),t>cL&&(cL=t)}function $L(e,t){var n=ZT([e*wE,t*wE]);if(hL){var r=QT(hL,n),i=QT([r[1],-r[0],0],r);nM(i),i=KT(i);var a,o=e-uL,s=o>0?1:-1,l=i[0]*_E*s,c=AE(o)>180;c^(s*uL<l&&l<s*e)?(a=i[1]*_E)>cL&&(cL=a):c^(s*uL<(l=(l+360)%360-180)&&l<s*e)?(a=-i[1]*_E)<sL&&(sL=a):(t<sL&&(sL=t),t>cL&&(cL=t)),c?e<uL?YL(oL,e)>YL(oL,lL)&&(lL=e):YL(e,lL)>YL(oL,lL)&&(oL=e):lL>=oL?(e<oL&&(oL=e),e>lL&&(lL=e)):e>uL?YL(oL,e)>YL(oL,lL)&&(lL=e):YL(e,lL)>YL(oL,lL)&&(oL=e)}else mL.push(gL=[oL=e,lL=e]);t<sL&&(sL=t),t>cL&&(cL=t),hL=n,uL=e}function qL(){BL.point=$L}function HL(){gL[0]=oL,gL[1]=lL,BL.point=UL,hL=null}function VL(e,t){if(hL){var n=e-uL;pL.add(AE(n)>180?n+(n>0?360:-360):n)}else fL=e,dL=t;bL.point(e,t),$L(e,t)}function WL(){bL.lineStart()}function GL(){VL(fL,dL),bL.lineEnd(),AE(pL)>mE&&(oL=-(lL=180)),gL[0]=oL,gL[1]=lL,hL=null}function YL(e,t){return(t-=e)<0?t+360:t}function XL(e,t){return e[0]-t[0]}function KL(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var ZL={sphere:zE,point:JL,lineStart:eD,lineEnd:rD,polygonStart:function(){ZL.lineStart=iD,ZL.lineEnd=aD},polygonEnd:function(){ZL.lineStart=eD,ZL.lineEnd=rD}};function JL(e,t){e*=wE;var n=TE(t*=wE);QL(n*TE(e),n*NE(e),NE(t))}function QL(e,t,n){++kL,TL+=(e-TL)/kL,ML+=(t-ML)/kL,SL+=(n-SL)/kL}function eD(){ZL.point=tD}function tD(e,t){e*=wE;var n=TE(t*=wE);FL=n*TE(e),zL=n*NE(e),jL=NE(t),ZL.point=nD,QL(FL,zL,jL)}function nD(e,t){e*=wE;var n=TE(t*=wE),r=n*TE(e),i=n*NE(e),a=NE(t),o=EE(DE((o=zL*a-jL*i)*o+(o=jL*r-FL*a)*o+(o=FL*i-zL*r)*o),FL*r+zL*i+jL*a);EL+=o,CL+=o*(FL+(FL=r)),OL+=o*(zL+(zL=i)),RL+=o*(jL+(jL=a)),QL(FL,zL,jL)}function rD(){ZL.point=JL}function iD(){ZL.point=oD}function aD(){sD(PL,IL),ZL.point=JL}function oD(e,t){PL=e,IL=t,e*=wE,t*=wE,ZL.point=sD;var n=TE(t);FL=n*TE(e),zL=n*NE(e),jL=NE(t),QL(FL,zL,jL)}function sD(e,t){e*=wE;var n=TE(t*=wE),r=n*TE(e),i=n*NE(e),a=NE(t),o=zL*a-jL*i,s=jL*r-FL*a,l=FL*i-zL*r,c=CE(o,s,l),u=FE(c),f=c&&-u/c;NL.add(f*o),LL.add(f*s),DL.add(f*l),EL+=u,CL+=u*(FL+(FL=r)),OL+=u*(zL+(zL=i)),RL+=u*(jL+(jL=a)),QL(FL,zL,jL)}var lD=n(81773);function cD(e){return e instanceof qg?e:new qg(e)}const uD=Symbol("vega_selection_getter");function fD(e){return e.getter&&e.getter[uD]||(e.getter=ds(e.field),e.getter[uD]=!0),e.getter}const dD="intersect",hD="union",pD="or",mD="and",gD="_vgsid_",vD=ds(gD),yD="index:unit";function bD(e,t){for(var n,r,i=t.fields,a=t.values,o=i.length,s=0;s<o;++s)if(bl(n=fD(r=i[s])(e))&&(n=Ls(n)),bl(a[s])&&(a[s]=Ls(a[s])),Ts(a[s])&&bl(a[s][0])&&(a[s]=a[s].map(Ls)),"E"===r.type){if(Ts(a[s])?a[s].indexOf(n)<0:n!==a[s])return!1}else if("R"===r.type){if(!vl(n,a[s]))return!1}else if("R-RE"===r.type){if(!vl(n,a[s],!0,!1))return!1}else if("R-E"===r.type){if(!vl(n,a[s],!1,!1))return!1}else if("R-LE"===r.type&&!vl(n,a[s],!1,!0))return!1;return!0}const xD=(0,gc.A)(vD),_D=xD.left,wD=xD.right;var AD={[`${gD}_union`]:function(...e){const t=new qg;for(const n of e)for(const e of n)t.add(e);return t},[`${gD}_intersect`]:function(e,...t){e=new qg(e),t=t.map(cD);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e},E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter((e=>t.indexOf(e)>=0)):t},R_union:function(e,t){var n=Ls(t[0]),r=Ls(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Ls(t[0]),r=Ls(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};function kD(e,t,n,r){t[0].type!==fR&&us("First argument to selection functions must be a string literal.");const i=t[0].value,a="unit",o="@"+a,s=":"+i;(t.length>=2&&Ns(t).value)!==dD||dl(r,o)||(r[o]=n.getData(i).indataRef(n,a)),dl(r,s)||(r[s]=n.getData(i).tuplesRef())}function ED(e){const t=this.context.data[e];return t?t.values.value:[]}const TD=e=>function(t,n){const r=this.context.dataflow.locale();return null===t?"null":r[e](n)(t)},MD=TD("format"),SD=TD("timeFormat"),CD=TD("utcFormat"),OD=TD("timeParse"),RD=TD("utcParse"),ND=new Date(2e3,0,1);function LD(e,t,n){return Number.isInteger(e)&&Number.isInteger(t)?(ND.setYear(2e3),ND.setMonth(e),ND.setDate(t),SD.call(this,ND,n)):""}const DD="$";function PD(e,t,n,r){t[0].type!==fR&&us("First argument to data functions must be a string literal.");const i=t[0].value,a=":"+i;if(!dl(a,r))try{r[a]=n.getData(i).tuplesRef()}catch(e){}}function ID(e,t,n,r){if(t[0].type===fR)FD(n,r,t[0].value);else for(e in n.scales)FD(n,r,e)}function FD(e,t,n){const r="%"+n;if(!dl(t,r))try{t[r]=e.scaleRef(n)}catch(e){}}function zD(e,t){if(Qs(e))return e;if(Al(e)){const n=t.scales[e];return n&&function(e){return e&&!0===e[Pv]}(n.value)?n.value:void 0}}function jD(e,t,n){t.__bandwidth=e=>e&&e.bandwidth?e.bandwidth():0,n._bandwidth=ID,n._range=ID,n._scale=ID;const r=t=>"_["+(t.type===fR?Nl("%"+t.value):Nl("%")+"+"+e(t))+"]";return{_bandwidth:e=>`this.__bandwidth(${r(e[0])})`,_range:e=>`${r(e[0])}.range()`,_scale:t=>`${r(t[0])}(${e(t[1])})`}}function BD(e,t){return function(n,r,i){if(n){const t=zD(n,(i||this).context);return t&&t.path[e](r)}return t(r)}}const UD=BD("area",(function(e){return yL=new pE,hE(e,bL),2*yL})),$D=BD("bounds",(function(e){var t,n,r,i,a,o,s;if(cL=lL=-(oL=sL=1/0),mL=[],hE(e,BL),n=mL.length){for(mL.sort(XL),t=1,a=[r=mL[0]];t<n;++t)KL(r,(i=mL[t])[0])||KL(r,i[1])?(YL(r[0],i[1])>YL(r[0],r[1])&&(r[1]=i[1]),YL(i[0],r[1])>YL(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(o=-1/0,t=0,r=a[n=a.length-1];t<=n;r=i,++t)i=a[t],(s=YL(r[1],i[0]))>o&&(o=s,oL=i[0],lL=r[1])}return mL=gL=null,oL===1/0||sL===1/0?[[NaN,NaN],[NaN,NaN]]:[[oL,sL],[lL,cL]]})),qD=BD("centroid",(function(e){kL=EL=TL=ML=SL=CL=OL=RL=0,NL=new pE,LL=new pE,DL=new pE,hE(e,ZL);var t=+NL,n=+LL,r=+DL,i=CE(t,n,r);return i<gE&&(t=CL,n=OL,r=RL,EL<mE&&(t=TL,n=ML,r=SL),(i=CE(t,n,r))<gE)?[NaN,NaN]:[EE(n,t)*_E,FE(r/i)*_E]}));function HD(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(t){e.warn(t)}return n[n.length-1]}function VD(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function WD(e){const t=(0,wS.Qh)(e);return.2126*VD(t.r)+.7152*VD(t.g)+.0722*VD(t.b)}function GD(e,t){return e===t||e!=e&&t!=t||(Ts(e)?!(!Ts(t)||e.length!==t.length)&&function(e,t){for(let n=0,r=e.length;n<r;++n)if(!GD(e[n],t[n]))return!1;return!0}(e,t):!(!Ms(e)||!Ms(t))&&YD(e,t))}function YD(e,t){for(const n in e)if(!GD(e[n],t[n]))return!1;return!0}function XD(e){return t=>YD(e,t)}const KD={};function ZD(e){return Ts(e)||ArrayBuffer.isView(e)?e:null}function JD(e){return ZD(e)||(Al(e)?e:null)}const QD=e=>e.data;function eP(e,t){const n=ED.call(t,e);return n.root&&n.root.lookup||{}}const tP=()=>"undefined"!=typeof window&&window||null;function nP(e,t,n){if(!e)return[];const[r,i]=e,a=(new Ab).set(r[0],r[1],i[0],i[1]);return uA(n||this.context.dataflow.scenegraph().root,a,function(e){let t=null;if(e){const n=Zs(e.marktype),r=Zs(e.markname);t=e=>(!n.length||n.some((t=>e.marktype===t)))&&(!r.length||r.some((t=>e.name===t)))}return t}(t))}const rP={random:()=>wd(),cumulativeNormal:Ld,cumulativeLogNormal:jd,cumulativeUniform:Vd,densityNormal:Nd,densityLogNormal:zd,densityUniform:Hd,quantileNormal:Dd,quantileLogNormal:Bd,quantileUniform:Wd,sampleNormal:Rd,sampleLogNormal:Fd,sampleUniform:qd,isArray:Ts,isBoolean:yl,isDate:bl,isDefined:e=>void 0!==e,isNumber:_l,isObject:Ms,isRegExp:wl,isString:Al,isTuple:wf,isValid:e=>null!=e&&e==e,toBoolean:Ll,toDate:e=>Pl(e),toNumber:Ls,toString:Il,indexof:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return JD(e).indexOf(...n)},join:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ZD(e).join(...n)},lastindexof:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return JD(e).lastIndexOf(...n)},replace:function(e,t,n){return Qs(n)&&us("Function argument passed to replace."),String(e).replace(t,n)},reverse:function(e){return ZD(e).slice().reverse()},slice:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return JD(e).slice(...n)},flush:ml,lerp:El,merge:function(){const e=[].slice.call(arguments);return e.unshift({}),ll(...e)},pad:Ol,peek:Ns,pluck:function(e,t){const n=KD[t]||(KD[t]=ds(t));return Ts(e)?e.map(n):n(e)},span:Rl,inrange:vl,truncate:zl,rgb:wS.Qh,lab:lD.Ay,hcl:lD.aq,hsl:wS.KI,luminance:WD,contrast:function(e,t){const n=WD(e),r=WD(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},sequence:mh,format:MD,utcFormat:CD,utcParse:RD,utcOffset:su,utcSequence:uu,timeFormat:SD,timeParse:OD,timeOffset:ou,timeSequence:cu,timeUnitSpecifier:Nc,monthFormat:function(e){return LD.call(this,e,1,"%B")},monthAbbrevFormat:function(e){return LD.call(this,e,1,"%b")},dayFormat:function(e){return LD.call(this,0,2+e,"%A")},dayAbbrevFormat:function(e){return LD.call(this,0,2+e,"%a")},quarter:Xs,utcquarter:Ks,week:Ic,utcweek:$c,dayofyear:Pc,utcdayofyear:Uc,warn:function(){return HD(this.context.dataflow,"warn",arguments)},info:function(){return HD(this.context.dataflow,"info",arguments)},debug:function(){return HD(this.context.dataflow,"debug",arguments)},extent:e=>cl(e),inScope:function(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n},intersect:nP,clampRange:Js,pinchDistance:function(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)},pinchAngle:function(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)},screen:function(){const e=tP();return e?e.screen:{}},containerSize:function(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]},windowSize:function(){const e=tP();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]},bandspace:function(e,t,n){return lv(e||0,t||0,n||0)},setdata:function(e,t){const n=this.context.dataflow,r=this.context.data[e].input;return n.pulse(r,n.changeset().remove(vs).insert(t)),1},pathShape:function(e){let t=null;return function(n){return n?Wy(n,t=t||Py(e)):e}},panLinear:Bs,panLog:Us,panPow:$s,panSymlog:qs,zoomLinear:Vs,zoomLog:Ws,zoomPow:Gs,zoomSymlog:Ys,encode:function(e,t,n){if(e){const n=this.context.dataflow,r=e.mark.source;n.pulse(r,n.changeset().encode(e,t))}return void 0!==n?n:e},modify:function(e,t,n,r,i,a){const o=this.context.dataflow,s=this.context.data[e],l=s.input,c=o.stamp();let u,f,d=s.changes;if(!1===o._trigger||!(l.value.length||t||r))return 0;if((!d||d.stamp<c)&&(s.changes=d=o.changeset(),d.stamp=c,o.runAfter((()=>{s.modified=!0,o.pulse(l,d).run()}),!0,1)),n&&(u=!0===n?vs:Ts(n)||wf(n)?n:XD(n),d.remove(u)),t&&d.insert(t),r&&(u=XD(r),l.value.some(u)?d.remove(u):d.insert(r)),i)for(f in a)d.modify(i,f,a[f]);return 1},lassoAppend:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;const i=(e=Zs(e))[e.length-1];return void 0===i||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e},lassoPath:function(e){return Zs(e).reduce(((t,n,r)=>{let[i,a]=n;return t+(0==r?`M ${i},${a} `:r===e.length-1?" Z":`L ${i},${a} `)}),"")},intersectLasso:function(e,t,n){const{x:r,y:i,mark:a}=n,o=(new Ab).set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[e,n]of t)e<o.x1&&(o.x1=e),e>o.x2&&(o.x2=e),n<o.y1&&(o.y1=n),n>o.y2&&(o.y2=n);return o.translate(r,i),nP([[o.x1,o.y1],[o.x2,o.y2]],e,a).filter((e=>function(e,t,n){let r=0;for(let i=0,a=n.length-1;i<n.length;a=i++){const[o,s]=n[a],[l,c]=n[i];c>t!=s>t&&e<(o-l)*(t-c)/(s-c)+l&&r++}return 1&r}(e.x,e.y,t)))}},iP=["view","item","group","xy","x","y"],aP="this.",oP={},sP={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Nl(DD+e)}]`,functions:function(e){const t=QN(e);iP.forEach((e=>t[e]="event.vega."+e));for(const e in rP)t[e]=aP+e;return ll(t,jD(e,rP,oP)),t},constants:JN,visitors:oP},lP=eL(sP);function cP(e,t,n){return 1===arguments.length?rP[e]:(rP[e]=t,n&&(oP[e]=n),lP&&(lP.functions[e]=aP+e),this)}function uP(e,t){const n={};let r;try{r=ZN(e=Al(e)?e:Nl(e)+"")}catch(t){us("Expression parse error: "+e)}r.visit((e=>{if(e.type!==mR)return;const r=e.callee.name,i=sP.visitors[r];i&&i(r,e.arguments,t,n)}));const i=lP(r);return i.globals.forEach((e=>{const r=DD+e;!dl(n,r)&&t.getSignal(e)&&(n[r]=t.signalRef(e))})),{$expr:ll({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}cP("bandwidth",(function(e,t){const n=zD(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}),ID),cP("copy",(function(e,t){const n=zD(e,(t||this).context);return n?n.copy():void 0}),ID),cP("domain",(function(e,t){const n=zD(e,(t||this).context);return n?n.domain():[]}),ID),cP("range",(function(e,t){const n=zD(e,(t||this).context);return n&&n.range?n.range():[]}),ID),cP("invert",(function(e,t,n){const r=zD(e,(n||this).context);return r?Ts(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}),ID),cP("scale",(function(e,t,n){const r=zD(e,(n||this).context);return r?r(t):void 0}),ID),cP("gradient",(function(e,t,n,r,i){e=zD(e,(i||this).context);const a=My(t,n);let o=e.domain(),s=o[0],l=Ns(o),c=ps;return l-s?c=Kv(e,s,l):e=(e.interpolator?Fv("sequential")().interpolator(e.interpolator()):Fv("linear")().interpolate(e.interpolate()).range(e.range())).domain([s=0,l=1]),e.ticks&&(o=e.ticks(+r||15),s!==o[0]&&o.unshift(s),l!==Ns(o)&&o.push(l)),o.forEach((t=>a.stop(c(t),e(t)))),a}),ID),cP("geoArea",UD,ID),cP("geoBounds",$D,ID),cP("geoCentroid",qD,ID),cP("geoShape",(function(e,t,n){const r=zD(e,(n||this).context);return function(e){return r?r.path.context(e)(t):""}}),ID),cP("geoScale",(function(e,t){const n=zD(e,(t||this).context);return n&&n.scale()}),ID),cP("indata",(function(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i?i.count:i}),(function(e,t,n,r){t[0].type!==fR&&us("First argument to indata must be a string literal."),t[1].type!==fR&&us("Second argument to indata must be a string literal.");const i=t[0].value,a=t[1].value,o="@"+a;dl(o,r)||(r[o]=n.getData(i).indataRef(n,a))})),cP("data",ED,PD),cP("treePath",(function(e,t,n){const r=eP(e,this),i=r[t],a=r[n];return i&&a?i.path(a).map(QD):void 0}),PD),cP("treeAncestors",(function(e,t){const n=eP(e,this)[t];return n?n.ancestors().map(QD):void 0}),PD),cP("vlSelectionTest",(function(e,t,n){for(var r,i,a,o,s,l=this.context.data[e],c=l?l.values.value:[],u=l?l[yD]&&l[yD].value:void 0,f=n===dD,d=c.length,h=0;h<d;++h)if(r=c[h],u&&f){if(-1===(a=(i=i||{})[o=r.unit]||0))continue;if(s=bD(t,r),i[o]=s?-1:++a,s&&1===u.size)return!0;if(!s&&a===u.get(o).count)return!1}else if(f^(s=bD(t,r)))return s;return d&&f}),kD),cP("vlSelectionIdTest",(function(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],a=r?r[yD]&&r[yD].value:void 0,o=n===dD,s=vD(t),l=_D(i,s);if(l===i.length)return!1;if(vD(i[l])!==s)return!1;if(a&&o){if(1===a.size)return!0;if(wD(i,s)-l<a.size)return!1}return!0}),kD),cP("vlSelectionResolve",(function(e,t,n,r){for(var i,a,o,s,l,c,u,f,d,h,p,m,g=this.context.data[e],v=g?g.values.value:[],y={},b={},x={},_=v.length,w=0;w<_;++w)if(s=(i=v[w]).unit,a=i.fields,o=i.values,a&&o){for(p=0,m=a.length;p<m;++p)l=a[p],f=(u=y[l.field]||(y[l.field]={}))[s]||(u[s]=[]),x[l.field]=d=l.type.charAt(0),h=AD[`${d}_union`],u[s]=h(f,Zs(o[p]));n&&(f=b[s]||(b[s]=[])).push(Zs(o).reduce(((e,t,n)=>(e[a[n].field]=t,e)),{}))}else l=gD,c=vD(i),(f=(u=y[l]||(y[l]={}))[s]||(u[s]=[])).push(c),n&&(f=b[s]||(b[s]=[])).push({[gD]:c});if(t=t||hD,y[gD]?y[gD]=AD[`${gD}_${t}`](...Object.values(y[gD])):Object.keys(y).forEach((e=>{y[e]=Object.keys(y[e]).map((t=>y[e][t])).reduce(((n,r)=>void 0===n?r:AD[`${x[e]}_${t}`](n,r)))})),v=Object.keys(b),n&&v.length){y[r?"vlPoint":"vlMulti"]=t===hD?{[pD]:v.reduce(((e,t)=>(e.push(...b[t]),e)),[])}:{[mD]:v.map((e=>({[pD]:b[e]})))}}return y}),kD),cP("vlSelectionTuples",(function(e,t){return e.map((e=>ll(t.fields?{values:t.fields.map((t=>fD(t)(e.datum)))}:{[gD]:vD(e.datum)},t)))}));const fP=Fl(["rule"]),dP=Fl(["group","image","rect"]);function hP(e){return(e+"").toLowerCase()}function pP(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}var mP={operator:(e,t)=>pP(e,["_"],t.code),parameter:(e,t)=>pP(e,["datum","_"],t.code),event:(e,t)=>pP(e,["event"],t.code),handler:(e,t)=>pP(e,["_","event"],`var datum=event.item&&event.item.datum;return ${t.code};`),encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const e in r){const t="o["+Nl(e)+"]";i+=`$=${r[e].code};if(${t}!==$)${t}=$,m=1;`}return i+=function(e,t){let n="";return fP[t]||(e.x2&&(e.x?(dP[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(dP[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}(r,n),i+="return m;",pP(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(Nl).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=Function("a","b","var u, v; return "+e.map(((e,r)=>{const i=t[r];let a,o;return e.path?(a=`a${e.path}`,o=`b${e.path}`):((n=n||{})["f"+r]=e,a=`this.f${r}(a)`,o=`this.f${r}(b)`),function(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}\n  : (u > v || v == null) && u != null ? ${r}\n  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}\n  : v !== v && u === u ? ${r} : `}(a,o,-i,i)})).join("")+"0;");return n?r.bind(n):r}}};function gP(e,t,n){if(!e||!Ms(e))return e;for(let r,i=0,a=vP.length;i<a;++i)if(r=vP[i],dl(e,r.key))return r.parse(e,t,n);return e}var vP=[{key:"$ref",parse:function(e,t){return t.get(e.$ref)||us("Operator not defined: "+e.$ref)}},{key:"$key",parse:function(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=kl(e.$key,e.$flat,t.expr.codegen))}},{key:"$expr",parse:function(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=is(t.parameterExpression(e.$expr),e.$fields))}},{key:"$field",parse:function(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=ds(e.$field,e.$name,t.expr.codegen))}},{key:"$encode",parse:function(e,t){const n=e.$encode,r={};for(const e in n){const i=n[e];r[e]=is(t.encodeExpression(i.$expr),i.$fields),r[e].output=i.$output}return r}},{key:"$compare",parse:function(e,t){const n="c:"+e.$compare+"_"+e.$order,r=Zs(e.$compare).map((e=>e&&e.$tupleid?Af:e));return t.fn[n]||(t.fn[n]=tl(r,e.$order,t.expr.codegen))}},{key:"$context",parse:function(e,t){return t}},{key:"$subflow",parse:function(e,t){const n=e.$subflow;return function(e,r,i){const a=t.fork().parse(n),o=a.get(n.operators[0].id),s=a.signals.parent;return s&&s.set(i),o.detachSubflow=()=>t.detach(a),o}}},{key:"$tupleid",parse:function(){return Af}}];const yP={skip:!0};function bP(e,t,n,r){return new xP(e,t,n,r)}function xP(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||mP,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function _P(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}xP.prototype=_P.prototype={fork(){const e=new _P(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter((t=>t!==e));const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),function(e){return"collect"===hP(e)}(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let i=n.get(e.parent.$ref);i?(r.connect(i,[t]),t.targets().add(i)):(n.unresolved=n.unresolved||[]).push((()=>{i=n.get(e.parent.$ref),r.connect(i,[t]),t.targets().add(i)}))}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const r in e.data){const i=n.data[r]||(n.data[r]={});e.data[r].forEach((e=>i[e]=t))}},resolve(){return(this.unresolved||[]).forEach((e=>e())),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[hP(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:function(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach((e=>t.parseOperator(e))),n.forEach((e=>t.parseOperatorParameters(e))),(e.streams||[]).forEach((e=>t.parseStream(e))),(e.updates||[]).forEach((e=>t.parseUpdate(e))),t.resolve()},parseOperator:function(e){const t=this;!function(e){return"operator"===hP(e)}(e.type)&&e.type?t.transform(e,e.type):t.operator(e,e.update?t.operatorExpression(e.update):null)},parseOperatorParameters:function(e){const t=this;if(e.params){const n=t.get(e.id);n||us("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}},parseParameters:function(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Ts(i)?i.map((e=>gP(e,n,t))):gP(i,n,t)}return t},parseStream:function(e){var t,n=this,r=null!=e.filter?n.eventExpression(e.filter):void 0,i=null!=e.stream?n.get(e.stream):void 0;e.source?i=n.events(e.source,e.type,r):e.merge&&(t=e.merge.map((e=>n.get(e))),i=t[0].merge.apply(t[0],t.slice(1))),e.between&&(t=e.between.map((e=>n.get(e))),i=i.between(t[0],t[1])),e.filter&&(i=i.filter(r)),null!=e.throttle&&(i=i.throttle(+e.throttle)),null!=e.debounce&&(i=i.debounce(+e.debounce)),null==i&&us("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),n.stream(e,i)},parseUpdate:function(e){var t,n=this,r=Ms(r=e.source)?r.$ref:r,i=n.get(r),a=e.update,o=void 0;i||us("Source not defined: "+e.source),t=e.target&&e.target.$expr?n.eventExpression(e.target.$expr):n.get(e.target),a&&a.$expr&&(a.$params&&(o=n.parseParameters(a.$params)),a=n.handlerExpression(a.$expr)),n.update(e,i,t,a,o)},getState:function(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach((n=>{const i=t.signals[n];e.signals(n,i)&&(r[n]=i.value)}))}if(e.data){var i=n.data={};Object.keys(t.data).forEach((n=>{const r=t.data[n];e.data(n,r)&&(i[n]=r.input.value)}))}return t.subcontext&&!1!==e.recurse&&(n.subcontext=t.subcontext.map((t=>t.getState(e)))),n},setState:function(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach((e=>{n.update(t.signals[e],i[e],yP)})),Object.keys(r||{}).forEach((e=>{n.pulse(t.data[e].input,n.changeset().remove(vs).insert(r[e]))})),(e.subcontext||[]).forEach(((e,n)=>{const r=t.subcontext[n];r&&r.setState(e)}))}};var wP=n(4397);function AP(e,t){e&&(null==t?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}const kP="default";function EP(e,t){const n=e.globalCursor()?"undefined"!=typeof document&&document.body:e.container();if(n)return null==t?n.style.removeProperty("cursor"):n.style.cursor=t}function TP(e,t){var n=e._runtime.data;return dl(n,t)||us("Unrecognized data set: "+t),n[t]}function MP(e,t){Of(t)||us("Second argument to changes must be a changeset.");const n=TP(this,e);return n.modified=!0,this.pulse(n.input,t)}function SP(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function CP(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function OP(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function RP(e,t,n){var r,i,a=e._renderer,o=a&&a.canvas();return o&&(i=OP(e),(r=P_(t.changedTouches?t.changedTouches[0]:t,o))[0]-=i[0],r[1]-=i[1]),t.dataflow=e,t.item=n,t.vega=function(e,t,n){const r=t?"group"===t.mark.marktype?t:t.mark.group:null;function i(e){var n,i=r;if(e)for(n=t;n;n=n.mark.group)if(n.mark.name===e){i=n;break}return i&&i.mark&&i.mark.interactive?i:{}}function a(e){if(!e)return n;Al(e)&&(e=i(e));const t=n.slice();for(;e;)t[0]-=e.x||0,t[1]-=e.y||0,e=e.mark&&e.mark.group;return t}return{view:ol(e),item:ol(t||{}),group:i,xy:a,x:e=>a(e)[0],y:e=>a(e)[1]}}(e,n,r),t}const NP="view",LP={trap:!1};function DP(e,t,n,r){e._eventListeners.push({type:n,sources:Zs(t),handler:r})}function PP(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return!(!1===r||Ms(r)&&!r[n])||(e.warn(`Blocked ${t} ${n} event listener.`),!1)}function IP(e){return e.item}function FP(e){return e.item.mark.source}function zP(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function jP(e,t,n){const r=document.createElement(e);for(const e in t)r.setAttribute(e,t[e]);return null!=n&&(r.textContent=n),r}function BP(e,t,n,r){const i=n.event||"input",a=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,a),DP(r,t,i,a),e.set=e=>{t.value=e,t.dispatchEvent(function(e){return"undefined"!=typeof Event?new Event(e):{type:e}}(i))}}function UP(e,t,n,r){const i=r.signal(n.signal),a=jP("div",{class:"vega-bind"}),o="radio"===n.input?a:a.appendChild(jP("label"));o.appendChild(jP("span",{class:"vega-bind-name"},n.name||n.signal)),t.appendChild(a);let s=$P;switch(n.input){case"checkbox":s=qP;break;case"select":s=HP;break;case"radio":s=VP;break;case"range":s=WP}s(e,o,n,i)}function $P(e,t,n,r){const i=jP("input");for(const e in n)"signal"!==e&&"element"!==e&&i.setAttribute("input"===e?"type":e,n[e]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",(()=>e.update(i.value))),e.elements=[i],e.set=e=>i.value=e}function qP(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const a=jP("input",i);t.appendChild(a),a.addEventListener("change",(()=>e.update(a.checked))),e.elements=[a],e.set=e=>a.checked=!!e||null}function HP(e,t,n,r){const i=jP("select",{name:n.signal}),a=n.labels||[];n.options.forEach(((e,t)=>{const n={value:e};GP(e,r)&&(n.selected=!0),i.appendChild(jP("option",n,(a[t]||e)+""))})),t.appendChild(i),i.addEventListener("change",(()=>{e.update(n.options[i.selectedIndex])})),e.elements=[i],e.set=e=>{for(let t=0,r=n.options.length;t<r;++t)if(GP(n.options[t],e))return void(i.selectedIndex=t)}}function VP(e,t,n,r){const i=jP("span",{class:"vega-bind-radio"}),a=n.labels||[];t.appendChild(i),e.elements=n.options.map(((t,o)=>{const s={type:"radio",name:n.signal,value:t};GP(t,r)&&(s.checked=!0);const l=jP("input",s);l.addEventListener("change",(()=>e.update(t)));const c=jP("label",{},(a[o]||t)+"");return c.prepend(l),i.appendChild(c),l})),e.set=t=>{const n=e.elements,r=n.length;for(let e=0;e<r;++e)GP(n[e].value,t)&&(n[e].checked=!0)}}function WP(e,t,n,r){r=void 0!==r?r:(+n.max+ +n.min)/2;const i=null!=n.max?n.max:Math.max(100,+r)||100,a=n.min||Math.min(0,i,+r)||0,o=n.step||(0,ec.sG)(a,i,100),s=jP("input",{type:"range",name:n.signal,min:a,max:i,step:o});s.value=r;const l=jP("span",{},+r);t.appendChild(s),t.appendChild(l);const c=()=>{l.textContent=s.value,e.update(+s.value)};s.addEventListener("input",c),s.addEventListener("change",c),e.elements=[s],e.set=e=>{s.value=e,l.textContent=e}}function GP(e,t){return e===t||e+""==t+""}function YP(e,t,n,r,i,a){return(t=t||new r(e.loader())).initialize(n,SP(e),CP(e),OP(e),i,a).background(e.background())}function XP(e,t){return t?function(){try{t.apply(this,arguments)}catch(t){e.error(t)}}:null}function KP(e,t,n){if("string"==typeof t){if("undefined"==typeof document)return e.error("DOM document instance not found."),null;if(!(t=document.querySelector(t)))return e.error("Signal bind element not found: "+t),null}if(t&&n)try{t.textContent=""}catch(n){t=null,e.error(n)}return t}const ZP=e=>+e||0;function JP(e){return Ms(e)?{top:ZP(e.top),bottom:ZP(e.bottom),left:ZP(e.left),right:ZP(e.right)}:(e=>({top:e,bottom:e,left:e,right:e}))(ZP(e))}async function QP(e,t,n,r){const i=cA(t),a=i&&i.headless;return a||us("Unrecognized renderer type: "+t),await e.runAsync(),YP(e,null,null,a,n,r).renderAsync(e._scenegraph.root)}var eI="width",tI="height",nI="padding",rI={skip:!0};function iI(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===nI?r.left+r.right:0)}function aI(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===nI?r.top+r.bottom:0)}function oI(e,t){return t.modified&&Ts(t.input.value)&&!e.startsWith("_:vega:_")}function sI(e,t){return!("parent"===e||t instanceof rd.proxy)}function lI(e,t,n,r){const i=e.element();i&&i.setAttribute("title",function(e){return null==e?"":Ts(e)?cI(e):Ms(e)&&!bl(e)?(t=e,Object.keys(t).map((e=>{const n=t[e];return e+": "+(Ts(n)?cI(n):uI(n))})).join("\n")):e+"";var t}(r))}function cI(e){return"["+e.map(uI).join(", ")+"]"}function uI(e){return Ts(e)?"[]":Ms(e)&&!bl(e)?"{}":e}function fI(e,t){const n=this;if(t=t||{},ed.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),null!=t.logLevel&&n.logLevel(t.logLevel),t.locale||e.locale){const r=ll({},e.locale,t.locale);n.locale(Uu(r.number,r.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||sA.Canvas,n._scenegraph=new S_;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||lI,n._redraw=!0,n._handler=(new aw).scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=function(e){const t=ll({defaults:{}},e),n=(e,t)=>{t.forEach((t=>{Ts(e[t])&&(e[t]=Fl(e[t]))}))};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=function(e,t,n){return bP(e,rd,rP,n).parse(t)}(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map((e=>({state:null,param:ll({},e)}))),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=iI(n,n._width),n._viewHeight=aI(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,function(e){var t=e._signals,n=t[eI],r=t[tI],i=t[nI];function a(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,(t=>{e._width=t.size,e._viewWidth=iI(e,t.size),a()}),{size:n}),e._resizeHeight=e.add(null,(t=>{e._height=t.size,e._viewHeight=aI(e,t.size),a()}),{size:r});const o=e.add(null,a,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}(n),function(e){e.add(null,(t=>(e._background=t.bg,e._resize=1,t.bg)),{bg:e._signals.background})}(n),function(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:kP,item:null}));e.on(e.events("view","pointermove"),t,((e,n)=>{const r=t.value,i=r?Al(r)?r:r.user:kP,a=n.item&&n.item.cursor||null;return r&&i===r.user&&a==r.item?r:{user:i,item:a}})),e.add(null,(function(t){let n=t.cursor,r=this.value;return Al(n)||(r=n.item,n=n.user),EP(e,n&&n!==kP?n:r||n),r}),{cursor:t})}(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function dI(e,t){return dl(e._signals,t)?e._signals[t]:us("Unrecognized signal name: "+Nl(t))}function hI(e,t){const n=(e._targets||[]).filter((e=>e._update&&e._update.handler===t));return n.length?n[0]:null}function pI(e,t,n,r){let i=hI(n,r);return i||(i=XP(e,(()=>r(t,n.value))),i.handler=r,e.on(n,null,i)),e}function mI(e,t,n){const r=hI(t,n);return r&&t._targets.remove(r),e}gl(fI,ed,{async evaluate(e,t,n){if(await ed.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,function(e){var t=OP(e),n=SP(e),r=CP(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach((t=>{try{t(n,r)}catch(t){e.error(t)}}))}(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(e){this.error(e)}return n&&bf(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=null!=e?e+"":null;return t!==this._desc&&AP(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=dI(this,e);return 1===arguments.length?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",JP(e)):JP(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(cA(e)||us("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(ed.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(dI(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:function(e,t,n,r,i,a){this.runAfter((o=>{let s=0;o._autosize=0,o.width()!==n&&(s=1,o.signal(eI,n,rI),o._resizeWidth.skip(!0)),o.height()!==r&&(s=1,o.signal(tI,r,rI),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),o._origin[0]===i[0]&&o._origin[1]===i[1]||(o._resize=1,o._origin=i),s&&o.run("enter"),a&&o.runAfter((e=>e.resize()))}),!1,1)},addEventListener(e,t,n){let r=t;return n&&!1===n.trap||(r=XP(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n,r,i=this._handler.handlers(e),a=i.length;--a>=0;)if(r=i[a].type,n=i[a].handler,e===r&&(t===n||t===n.raw)){this._handler.off(r,n);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return pI(this,e,dI(this,e),t)},removeSignalListener(e,t){return mI(this,dI(this,e),t)},addDataListener(e,t){return pI(this,e,TP(this,e).values,t)},removeDataListener(e,t){return mI(this,TP(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=EP(this,null);this._globalCursor=!!e,t&&EP(this,t)}return this}return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:function(e,t){this._timers.push(function(e,t,n){var r=new wP.M4,i=t;return null==t?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(e,t,n){t=+t,n=null==n?(0,wP.tB)():+n,r._restart((function a(o){o+=i,r._restart(a,i+=t,n),e(o)}),t,n)},r.restart(e,t,n),r)}((function(t){e({timestamp:Date.now(),elapsed:t})}),t))},events:function(e,t,n){var r,i=this,a=new jf(n),o=function(n,r){i.runAsync(null,(()=>{e===NP&&function(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return!1!==r&&!0!==i&&(!0===r||!1===i||(r?r[t]:i?!i[t]:e.preventDefault()))}(i,t)&&n.preventDefault(),a.receive(RP(i,n,r))}))};if("timer"===e)PP(i,"timer",t)&&i.timer(o,t);else if(e===NP)PP(i,"view",t)&&i.addEventListener(t,o,LP);else if("window"===e?PP(i,"window",t)&&"undefined"!=typeof window&&(r=[window]):"undefined"!=typeof document&&PP(i,"selector",t)&&(r=Array.from(document.querySelectorAll(e))),r){for(var s=0,l=r.length;s<l;++s)r[s].addEventListener(t,o);DP(i,r,t,o)}else i.warn("Can not resolve event source: "+e);return a},finalize:function(){var e,t,n,r,i,a=this._tooltip,o=this._timers,s=this._handler.handlers(),l=this._eventListeners;for(e=o.length;--e>=0;)o[e].stop();for(e=l.length;--e>=0;)for(t=(n=l[e]).sources.length;--t>=0;)n.sources[t].removeEventListener(n.type,n.handler);for(a&&a.call(this,this._handler,null,null,null),e=s.length;--e>=0;)i=s[e].type,r=s[e].handler,this._handler.off(i,r);return this},hover:function(e,t){return t=[t||"update",(e=[e||"hover"])[0]],this.on(this.events("view","pointerover",IP),FP,zP(e)),this.on(this.events("view","pointerout",IP),FP,zP(t)),this},data:function(e,t){return arguments.length<2?TP(this,e).values.value:MP.call(this,e,Rf().remove(vs).insert(t))},change:MP,insert:function(e,t){return MP.call(this,e,Rf().insert(t))},remove:function(e,t){return MP.call(this,e,Rf().remove(t))},scale:function(e){var t=this._runtime.scales;return dl(t,e)||us("Unrecognized scale or projection: "+e),t[e].value},initialize:function(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,a=cA(r);e=n._el=e?KP(n,e,!0):null,function(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),AP(t,e.description()))}(n),a||n.error("Unrecognized renderer type: "+r);const o=a.handler||aw,s=e?a.renderer:a.headless;return n._renderer=s?YP(n,n._renderer,e,s):null,n._handler=function(e,t,n,r){const i=new r(e.loader(),XP(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,OP(e),e);return t&&t.handlers().forEach((e=>{i.on(e.type,e.handler)})),i}(n,n._handler,e,o),n._redraw=!0,e&&"none"!==i&&(t=t?n._elBind=KP(n,t,!0):e.appendChild(jP("form",{class:"vega-bindings"})),n._bind.forEach((e=>{e.param.element&&"container"!==i&&(e.element=KP(n,e.param.element,!!e.param.input))})),n._bind.forEach((e=>{!function(e,t,n){if(!t)return;const r=n.param;let i=n.state;i||(i=n.state={elements:null,active:!1,set:null,update:t=>{t!=e.signal(r.signal)&&e.runAsync(null,(()=>{i.source=!0,e.signal(r.signal,t)}))}},r.debounce&&(i.update=sl(r.debounce,i.update))),(null==r.input&&r.element?BP:UP)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,(()=>{i.source?i.source=!1:i.set(e.signal(r.signal))})),i.active=!0)}(n,e.element||t,e)}))),n},toImageURL:async function(e,t){e!==sA.Canvas&&e!==sA.SVG&&e!==sA.PNG&&us("Unrecognized image type: "+e);const n=await QP(this,e,t);return e===sA.SVG?function(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")},toCanvas:async function(e,t){return(await QP(this,sA.Canvas,e,t)).canvas()},toSVG:async function(e){return(await QP(this,sA.SVG,e)).svg()},getState:function(e){return this._runtime.getState(e||{data:oI,signals:sI,recurse:!0})},setState:function(e){return this.runAsync(null,(t=>{t._trigger=!1,t._runtime.setState(e)}),(e=>{e._trigger=!0})),this},_watchPixelRatio:function(){if("canvas"===this.renderer()&&this._renderer._canvas){let e=null;const t=()=>{null!=e&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}});const gI="view",vI="[",yI="]",bI="{",xI="}",_I=":",wI=",",AI="@",kI=">",EI=/[[\]{}]/,TI={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let MI,SI;function CI(e,t,n){return MI=t||gI,SI=n||TI,RI(e.trim()).map(NI)}function OI(e,t,n,r,i){const a=e.length;let o,s=0;for(;t<a;++t){if(o=e[t],!s&&o===n)return t;i&&i.indexOf(o)>=0?--s:r&&r.indexOf(o)>=0&&++s}return t}function RI(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=OI(e,i,wI,vI+bI,yI+xI),t.push(e.substring(r,i).trim()),r=++i;if(0===t.length)throw"Empty event selector: "+e;return t}function NI(e){return"["===e[0]?function(e){const t=e.length;let n,r=1;if(r=OI(e,r,yI,vI,yI),r===t)throw"Empty between selector: "+e;if(n=RI(e.substring(1,r)),2!==n.length)throw"Between selector must have two elements: "+e;if(e=e.slice(r+1).trim(),e[0]!==kI)throw"Expected '>' after between selector: "+e;n=n.map(NI);const i=NI(e.slice(1).trim());if(i.between)return{between:n,stream:i};i.between=n;return i}(e):function(e){const t={source:MI},n=[];let r,i,a=[0,0],o=0,s=0,l=e.length,c=0;if(e[l-1]===xI){if(c=e.lastIndexOf(bI),!(c>=0))throw"Unmatched right brace: "+e;try{a=function(e){const t=e.split(wI);if(!e.length||t.length>2)throw e;return t.map((t=>{const n=+t;if(n!=n)throw e;return n}))}(e.substring(c+1,l-1))}catch(t){throw"Invalid throttle specification: "+e}l=(e=e.slice(0,c).trim()).length,c=0}if(!l)throw e;e[0]===AI&&(o=++c);r=OI(e,c,_I),r<l&&(n.push(e.substring(s,r).trim()),s=c=++r);if(c=OI(e,c,vI),c===l)n.push(e.substring(s,l).trim());else if(n.push(e.substring(s,c).trim()),i=[],s=++c,s===l)throw"Unmatched left bracket: "+e;for(;c<l;){if(c=OI(e,c,yI),c===l)throw"Unmatched left bracket: "+e;if(i.push(e.substring(s,c).trim()),c<l-1&&e[++c]!==vI)throw"Expected left bracket: "+e;s=++c}if(!(l=n.length)||EI.test(n[l-1]))throw"Invalid event selector: "+e;l>1?(t.type=n[1],o?t.markname=n[0].slice(1):!function(e){return SI[e]}(n[0])?t.source=n[0]:t.marktype=n[0]):t.type=n[0];"!"===t.type.slice(-1)&&(t.consume=!0,t.type=t.type.slice(0,-1));null!=i&&(t.filter=i);a[0]&&(t.throttle=a[0]);a[1]&&(t.debounce=a[1]);return t}(e)}function LI(e){return Ms(e)?e:{type:e||"pad"}}const DI=e=>+e||0,PI=e=>({top:e,bottom:e,left:e,right:e});function II(e){return Ms(e)?e.signal?e:{top:DI(e.top),bottom:DI(e.bottom),left:DI(e.left),right:DI(e.right)}:PI(DI(e))}const FI=e=>Ms(e)&&!Ts(e)?ll({},e):{value:e};function zI(e,t,n,r){if(null!=n){return Ms(n)&&!Ts(n)||Ts(n)&&n.length&&Ms(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1}return 0}function jI(e,t,n){for(const n in t)zI(e,n,t[n]);for(const t in n)zI(e,t,n[t],"update")}function BI(e,t,n){for(const r in t)n&&dl(n,r)||(e[r]=ll(e[r]||{},t[r]));return e}function UI(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const $I="mark",qI="frame",HI="scope",VI="axis",WI="axis-domain",GI="axis-grid",YI="axis-label",XI="axis-tick",KI="axis-title",ZI="legend",JI="legend-band",QI="legend-entry",eF="legend-gradient",tF="legend-label",nF="legend-symbol",rF="legend-title",iF="title",aF="title-text",oF="title-subtitle";function sF(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const lF=e=>Al(e)?Nl(e):e.signal?`(${e.signal})`:dF(e);function cF(e){if(null!=e.gradient)return function(e){const t=[e.start,e.stop,e.count].map((e=>null==e?null:Nl(e)));for(;t.length&&null==Ns(t);)t.pop();return t.unshift(lF(e.gradient)),`gradient(${t.join(",")})`}(e);let t=e.signal?`(${e.signal})`:e.color?function(e){return e.c?uF("hcl",e.h,e.c,e.l):e.h||e.s?uF("hsl",e.h,e.s,e.l):e.l||e.a?uF("lab",e.l,e.a,e.b):e.r||e.g||e.b?uF("rgb",e.r,e.g,e.b):null}(e.color):null!=e.field?dF(e.field):void 0!==e.value?Nl(e.value):void 0;return null!=e.scale&&(t=function(e,t){const n=lF(e.scale);null!=e.range?t=`lerp(_range(${n}), ${+e.range})`:(void 0!==t&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(1==+e.band?"":"*"+fF(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),null==t&&(t="0"));return t}(e,t)),void 0===t&&(t=null),null!=e.exponent&&(t=`pow(${t},${fF(e.exponent)})`),null!=e.mult&&(t+=`*${fF(e.mult)}`),null!=e.offset&&(t+=`+${fF(e.offset)}`),e.round&&(t=`round(${t})`),t}const uF=(e,t,n,r)=>`(${e}(${[t,n,r].map(cF).join(",")})+'')`;function fF(e){return Ms(e)?"("+cF(e)+")":e}function dF(e){return hF(Ms(e)?e:{datum:e})}function hF(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):us("Invalid field reference: "+Nl(e));return e.signal||(r=Al(r)?fs(r).map(Nl).join("]["):hF(r)),t+"["+r+"]"}function pF(e,t,n,r,i,a){const o={};(a=a||{}).encoders={$encode:o},e=function(e,t,n,r,i){const a={},o={};let s,l,c,u;for(l in l="lineBreak","text"!==t||null==i[l]||UI(l,e)||sF(a,l,i[l]),("legend"==n||String(n).startsWith("axis"))&&(n=null),u=n===qI?i.group:n===$I?ll({},i.mark,i[t]):null,u)c=UI(l,e)||("fill"===l||"stroke"===l)&&(UI("fill",e)||UI("stroke",e)),c||sF(a,l,u[l]);for(l in Zs(r).forEach((t=>{const n=i.style&&i.style[t];for(const t in n)UI(t,e)||sF(a,t,n[t])})),e=ll({},e),a)u=a[l],u.signal?(s=s||{})[l]=u:o[l]=u;return e.enter=ll(o,e.enter),s&&(e.update=ll(s,e.update)),e}(e,t,n,r,i.config);for(const n in e)o[n]=mF(e[n],t,a,i);return a}function mF(e,t,n,r){const i={},a={};for(const t in e)null!=e[t]&&(i[t]=gF((o=e[t],Ts(o)?function(e){let t="";return e.forEach((e=>{const n=cF(e);t+=e.test?`(${e.test})?${n}:`:n})),":"===Ns(t)&&(t+="null"),t}(o):cF(o)),r,n,a));var o;return{$expr:{marktype:t,channels:i},$fields:Object.keys(a),$output:Object.keys(e)}}function gF(e,t,n,r){const i=uP(e,t);return i.$fields.forEach((e=>r[e]=1)),ll(n,i.$params),i.$expr}const vF="outer",yF=["value","update","init","react","bind"];function bF(e,t){us(e+' for "outer" push: '+Nl(t))}function xF(e,t){const n=e.name;if(e.push===vF)t.signals[n]||bF("No prior signal definition",n),yF.forEach((t=>{void 0!==e[t]&&bF("Invalid property ",t)}));else{const r=t.addSignal(n,e.value);!1===e.react&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function _F(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function wF(e,t,n,r){return new _F(e,t,n,r)}function AF(e,t){return wF("operator",e,t)}function kF(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function EF(e,t){return t?{$field:e,$name:t}:{$field:e}}const TF=EF("key");function MF(e,t){return{$compare:e,$order:t}}function SF(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const CF="scope",OF="view";function RF(e){return e&&e.signal}function NF(e){if(RF(e))return!0;if(Ms(e))for(const t in e)if(NF(e[t]))return!0;return!1}function LF(e,t){return null!=e?e:t}function DF(e){return e&&e.signal||e}const PF="timer";function IF(e,t){return(e.merge?FF:e.stream?zF:e.type?jF:us("Invalid stream specification: "+Nl(e)))(e,t)}function FF(e,t){const n=BF({merge:e.merge.map((e=>IF(e,t)))},e,t);return t.addStream(n).id}function zF(e,t){const n=BF({stream:IF(e.stream,t)},e,t);return t.addStream(n).id}function jF(e,t){let n;e.type===PF?(n=t.event(PF,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(function(e){return e===CF?OF:e||OF}(e.source),e.type);const r=BF({stream:n},e,t);return 1===Object.keys(r).length?n:t.addStream(r).id}function BF(e,t,n){let r=t.between;return r&&(2!==r.length&&us('Stream "between" parameter must have 2 entries: '+Nl(t)),e.between=[IF(r[0],n),IF(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(function(e,t,n){const r="event.item";return r+(e&&"*"!==e?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}(t.marktype,t.markname,t.markrole)),t.source===CF&&r.push("inScope(event.item)"),r.length&&(e.filter=uP("("+r.join(")&&(")+")",n).$expr),null!=(r=t.throttle)&&(e.throttle=+r),null!=(r=t.debounce)&&(e.debounce=+r),t.consume&&(e.consume=!0),e}const UF={code:"_.$value",ast:{type:"Identifier",value:"value"}};function $F(e,t,n){const r=e.encode,i={target:n};let a=e.events,o=e.update,s=[];a||us("Signal update missing events specification."),Al(a)&&(a=CI(a,t.isSubscope()?CF:OF)),a=Zs(a).filter((e=>e.signal||e.scale?(s.push(e),0):1)),s.length>1&&(s=[qF(s)]),a.length&&s.push(a.length>1?{merge:a}:a[0]),null!=r&&(o&&us("Signal encode and update are mutually exclusive."),o="encode(item(),"+Nl(r)+")"),i.update=Al(o)?uP(o,t):null!=o.expr?uP(o.expr,t):null!=o.value?o.value:null!=o.signal?{$expr:UF,$params:{$value:t.signalRef(o.signal)}}:us("Invalid signal update specification."),e.force&&(i.options={force:!0}),s.forEach((e=>t.addUpdate(ll(function(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):IF(e,t)}}(e,t),i))))}function qF(e){return{signal:"["+e.map((e=>e.scale?'scale("'+e.scale+'")':e.signal))+"]"}}const HF=e=>(t,n,r)=>wF(e,n,t||void 0,r),VF=HF("aggregate"),WF=HF("axisticks"),GF=HF("bound"),YF=HF("collect"),XF=HF("compare"),KF=HF("datajoin"),ZF=HF("encode"),JF=HF("expression"),QF=HF("facet"),ez=HF("field"),tz=HF("key"),nz=HF("legendentries"),rz=HF("load"),iz=HF("mark"),az=HF("multiextent"),oz=HF("multivalues"),sz=HF("overlap"),lz=HF("params"),cz=HF("prefacet"),uz=HF("projection"),fz=HF("proxy"),dz=HF("relay"),hz=HF("render"),pz=HF("scale"),mz=HF("sieve"),gz=HF("sortitems"),vz=HF("viewlayout"),yz=HF("values");let bz=0;const xz={min:"min",max:"max",count:"sum"};function _z(e,t){const n=t.getScale(e.name).params;let r;for(r in n.domain=Ez(e.domain,e,t),null!=e.range&&(n.range=Lz(e,t,n)),null!=e.interpolate&&function(e,t){t.interpolate=wz(e.type||e),null!=e.gamma&&(t.interpolateGamma=wz(e.gamma))}(e.interpolate,n),null!=e.nice&&(n.nice=function(e,t){return e.signal?t.signalRef(e.signal):Ms(e)?{interval:wz(e.interval),step:wz(e.step)}:wz(e)}(e.nice,t)),null!=e.bins&&(n.bins=function(e,t){return e.signal||Ts(e)?Az(e,t):t.objectProperty(e)}(e.bins,t)),e)dl(n,r)||"name"===r||(n[r]=wz(e[r],t))}function wz(e,t){return Ms(e)?e.signal?t.signalRef(e.signal):us("Unsupported object: "+Nl(e)):e}function Az(e,t){return e.signal?t.signalRef(e.signal):e.map((e=>wz(e,t)))}function kz(e){us("Can not find data set: "+Nl(e))}function Ez(e,t,n){if(e)return e.signal?n.signalRef(e.signal):(Ts(e)?Tz:e.fields?Sz:Mz)(e,t,n);null==t.domainMin&&null==t.domainMax||us("No scale domain defined for domainMin/domainMax to override.")}function Tz(e,t,n){return e.map((e=>wz(e,n)))}function Mz(e,t,n){const r=n.getData(e.data);return r||kz(e.data),Uv(t.type)?r.valuesRef(n,e.field,Oz(e.sort,!1)):Vv(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function Sz(e,t,n){const r=e.data,i=e.fields.reduce(((e,t)=>(t=Al(t)?{data:r,field:t}:Ts(t)||t.signal?function(e,t){const n="_:vega:_"+bz++,r=YF({});if(Ts(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+Nl(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,mz({})]),{data:n,field:"data"}}(t,n):t,e.push(t),e)),[]);return(Uv(t.type)?Cz:Vv(t.type)?Rz:Nz)(e,n,i)}function Cz(e,t,n){const r=Oz(e.sort,!0);let i,a;const o=n.map((e=>{const n=t.getData(e.data);return n||kz(e.data),n.countsRef(t,e.field,r)})),s={groupby:TF,pulse:o};r&&(i=r.op||"count",a=r.field?SF(i,r.field):"count",s.ops=[xz[i]],s.fields=[t.fieldRef(a)],s.as=[a]),i=t.add(VF(s));const l=t.add(YF({pulse:kF(i)}));return a=t.add(yz({field:TF,sort:t.sortRef(r),pulse:kF(l)})),kF(a)}function Oz(e,t){return e&&(e.field||e.op?e.field||"count"===e.op?t&&e.field&&e.op&&!xz[e.op]&&us("Multiple domain scales can not be sorted using "+e.op):us("No field provided for sort aggregate op: "+e.op):Ms(e)?e.field="key":e={field:"key"}),e}function Rz(e,t,n){const r=n.map((e=>{const n=t.getData(e.data);return n||kz(e.data),n.domainRef(t,e.field)}));return kF(t.add(oz({values:r})))}function Nz(e,t,n){const r=n.map((e=>{const n=t.getData(e.data);return n||kz(e.data),n.extentRef(t,e.field)}));return kF(t.add(az({extents:r})))}function Lz(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(Al(i)){if(r&&dl(r,i))return Lz(e=ll({},e,{range:r[i]}),t,n);"width"===i?i=[0,{signal:"width"}]:"height"===i?i=Uv(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:us("Unrecognized scale range value: "+Nl(i))}else{if(i.scheme)return n.scheme=Ts(i.scheme)?Az(i.scheme,t):wz(i.scheme,t),i.extent&&(n.schemeExtent=Az(i.extent,t)),void(i.count&&(n.schemeCount=wz(i.count,t)));if(i.step)return void(n.rangeStep=wz(i.step,t));if(Uv(e.type)&&!Ts(i))return Ez(i,e,t);Ts(i)||us("Unsupported range type: "+Nl(i))}return i.map((e=>(Ts(e)?Az:wz)(e,t)))}function Dz(e,t,n){return Ts(e)?e.map((e=>Dz(e,t,n))):Ms(e)?e.signal?n.signalRef(e.signal):"fit"===t?e:us("Unsupported parameter object: "+Nl(e)):e}const Pz="top",Iz="left",Fz="right",zz="bottom",jz="center",Bz="vertical",Uz="start",$z="end",qz="index",Hz="label",Vz="offset",Wz="perc",Gz="perc2",Yz="value",Xz="guide-label",Kz="guide-title",Zz="group-title",Jz="group-subtitle",Qz="symbol",ej="gradient",tj="discrete",nj="size",rj=[nj,"shape","fill","stroke","strokeWidth","strokeDash","opacity"],ij={name:1,style:1,interactive:1},aj={value:0},oj={value:1},sj="group",lj="rect",cj="rule",uj="symbol",fj="text";function dj(e){return e.type=sj,e.interactive=e.interactive||!1,e}function hj(e,t){const n=(n,r)=>LF(e[n],LF(t[n],r));return n.isVertical=n=>Bz===LF(e.direction,t.direction||(n?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>LF(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>LF(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>LF(e.columns,LF(t.columns,+n.isVertical(!0))),n}function pj(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function mj(e,t,n){return`item.anchor === '${Uz}' ? ${e} : item.anchor === '${$z}' ? ${t} : ${n}`}const gj=mj(Nl(Iz),Nl(Fz),Nl(jz));function vj(e,t){return t?e?Ms(e)?Object.assign({},e,{offset:vj(e.offset,t)}):{value:e,offset:t}:t:e}function yj(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=BI(e.encode,t,ij)):e.interactive=!1,e}function bj(e,t,n,r){const i=hj(e,n),a=i.isVertical(),o=i.gradientThickness(),s=i.gradientLength();let l,c,u,f,d;a?(c=[0,1],u=[0,0],f=o,d=s):(c=[0,0],u=[1,0],f=s,d=o);const h={enter:l={opacity:aj,x:aj,y:aj,width:FI(f),height:FI(d)},update:ll({},l,{opacity:oj,fill:{gradient:t,start:c,stop:u}}),exit:{opacity:aj}};return jI(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),yj({type:lj,role:eF,encode:h},r)}function xj(e,t,n,r,i){const a=hj(e,n),o=a.isVertical(),s=a.gradientThickness(),l=a.gradientLength();let c,u,f,d,h="";o?(c="y",f="y2",u="x",d="width",h="1-"):(c="x",f="x2",u="y",d="height");const p={opacity:aj,fill:{scale:t,field:Yz}};p[c]={signal:h+"datum."+Wz,mult:l},p[u]=aj,p[f]={signal:h+"datum."+Gz,mult:l},p[d]=FI(s);const m={enter:p,update:ll({},p,{opacity:oj}),exit:{opacity:aj}};return jI(m,{stroke:a("gradientStrokeColor"),strokeWidth:a("gradientStrokeWidth")},{opacity:a("gradientOpacity")}),yj({type:lj,role:JI,key:Yz,from:i,encode:m},r)}const _j=`datum.${Wz}<=0?"${Iz}":datum.${Wz}>=1?"${Fz}":"${jz}"`,wj=`datum.${Wz}<=0?"${zz}":datum.${Wz}>=1?"${Pz}":"middle"`;function Aj(e,t,n,r){const i=hj(e,t),a=i.isVertical(),o=FI(i.gradientThickness()),s=i.gradientLength();let l,c,u,f,d=i("labelOverlap"),h="";const p={enter:l={opacity:aj},update:c={opacity:oj,text:{field:Hz}},exit:{opacity:aj}};return jI(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:LF(e.labelLimit,t.gradientLabelLimit)}),a?(l.align={value:"left"},l.baseline=c.baseline={signal:wj},u="y",f="x",h="1-"):(l.align=c.align={signal:_j},l.baseline={value:"top"},u="x",f="y"),l[u]=c[u]={signal:h+"datum."+Wz,mult:s},l[f]=c[f]=o,o.offset=LF(e.labelOffset,t.gradientLabelOffset)||0,d=d?{separation:i("labelSeparation"),method:d,order:"datum."+qz}:void 0,yj({type:fj,role:tF,style:Xz,key:Yz,from:r,encode:p,overlap:d},n)}function kj(e,t,n,r,i){const a=hj(e,t),o=n.entries,s=!(!o||!o.interactive),l=o?o.name:void 0,c=a("clipHeight"),u=a("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${Vz} : datum.${nj}`,h=c?FI(c):{field:nj},p=`datum.${qz}`,m=`max(1, ${i})`;let g,v,y,b,x;h.mult=.5,g={enter:v={opacity:aj,x:{signal:d,mult:.5,offset:u},y:h},update:y={opacity:oj,x:v.x,y:v.y},exit:{opacity:aj}};let _=null,w=null;e.fill||(_=t.symbolBaseFillColor,w=t.symbolBaseStrokeColor),jI(g,{fill:a("symbolFillColor",_),shape:a("symbolType"),size:a("symbolSize"),stroke:a("symbolStrokeColor",w),strokeDash:a("symbolDash"),strokeDashOffset:a("symbolDashOffset"),strokeWidth:a("symbolStrokeWidth")},{opacity:a("symbolOpacity")}),rj.forEach((t=>{e[t]&&(y[t]=v[t]={scale:e[t],field:Yz})}));const A=yj({type:uj,role:nF,key:Yz,from:f,clip:!!c||void 0,encode:g},n.symbols),k=FI(u);k.offset=a("labelOffset"),g={enter:v={opacity:aj,x:{signal:d,offset:k},y:h},update:y={opacity:oj,text:{field:Hz},x:v.x,y:v.y},exit:{opacity:aj}},jI(g,{align:a("labelAlign"),baseline:a("labelBaseline"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontStyle:a("labelFontStyle"),fontWeight:a("labelFontWeight"),limit:a("labelLimit")});const E=yj({type:fj,role:tF,style:Xz,key:Yz,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!c},width:aj,height:c?FI(c):aj,opacity:aj},exit:{opacity:aj},update:y={opacity:oj,row:{signal:null},column:{signal:null}}},a.isVertical(!0)?(b=`ceil(item.mark.items.length / ${m})`,y.row.signal=`${p}%${b}`,y.column.signal=`floor(${p} / ${b})`,x={field:["row",p]}):(y.row.signal=`floor(${p} / ${m})`,y.column.signal=`${p} % ${m}`,x={field:p}),y.column.signal=`(${i})?${y.column.signal}:${p}`,dj({role:HI,from:r={facet:{data:r,name:"value",groupby:qz}},encode:BI(g,o,ij),marks:[A,E],name:l,interactive:s,sort:x})}const Ej='item.orient === "left"',Tj='item.orient === "right"',Mj=`(${Ej} || ${Tj})`,Sj=`datum.vgrad && ${Mj}`,Cj=mj('"top"','"bottom"','"middle"'),Oj=`datum.vgrad && ${Tj} ? (${mj('"right"','"left"','"center"')}) : (${Mj} && !(datum.vgrad && ${Ej})) ? "left" : ${gj}`,Rj=`item._anchor || (${Mj} ? "middle" : "start")`,Nj=`${Sj} ? (${Ej} ? -90 : 90) : 0`,Lj=`${Mj} ? (datum.vgrad ? (${Tj} ? "bottom" : "top") : ${Cj}) : "top"`;function Dj(e,t){let n;return Ms(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Pj(e.path)+")":e.sphere&&(n="geoShape("+Pj(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Pj(e){return Ms(e)&&e.signal?e.signal:Nl(e)}function Ij(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===sj?HI:t||$I}function Fj(e){return{marktype:e.type,name:e.name||void 0,role:e.role||Ij(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function zj(e,t){return e&&e.signal?t.signalRef(e.signal):!1!==e}function jj(e,t){const n=id(e.type);n||us("Unrecognized transform type: "+Nl(e.type));const r=wF(n.type.toLowerCase(),null,Bj(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function Bj(e,t,n){const r={},i=e.params.length;for(let a=0;a<i;++a){const i=e.params[a];r[i.name]=Uj(i,t,n)}return r}function Uj(e,t,n){const r=e.type,i=t[e.name];return"index"===r?function(e,t,n){Al(t.from)||us('Lookup "from" parameter must be a string literal.');return n.getData(t.from).lookupRef(n,t.key)}(0,t,n):void 0!==i?"param"===r?function(e,t,n){const r=t[e.name];return e.array?(Ts(r)||us("Expected an array of sub-parameters. Instead: "+Nl(r)),r.map((t=>qj(e,t,n)))):qj(e,r,n)}(e,t,n):"projection"===r?n.projectionRef(t[e.name]):e.array&&!RF(i)?i.map((t=>$j(e,t,n))):$j(e,i,n):void(e.required&&us("Missing required "+Nl(t.type)+" parameter: "+Nl(e.name)))}function $j(e,t,n){const r=e.type;if(RF(t))return Gj(r)?us("Expression references can not be signals."):Yj(r)?n.fieldRef(t):Xj(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||Yj(r);return i&&Hj(t)?n.exprRef(t.expr,t.as):i&&Vj(t)?EF(t.field,t.as):Gj(r)?uP(t,n):Wj(r)?kF(n.getData(t).values):Yj(r)?EF(t):Xj(r)?n.compareRef(t):t}}function qj(e,t,n){const r=e.params.length;let i;for(let n=0;n<r;++n){i=e.params[n];for(const e in i.key)if(i.key[e]!==t[e]){i=null;break}if(i)break}i||us("Unsupported parameter: "+Nl(t));const a=ll(Bj(i,t,n),i.key);return kF(n.add(lz(a)))}const Hj=e=>e&&e.expr,Vj=e=>e&&e.field,Wj=e=>"data"===e,Gj=e=>"expr"===e,Yj=e=>"field"===e,Xj=e=>"compare"===e;function Kj(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:kF(t.getData(e.data).output)}function Zj(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}function Jj(e){return Al(e)?e:null}function Qj(e,t,n){const r=SF(n.op,n.field);let i;if(t.ops){for(let e=0,n=t.as.length;e<n;++e)if(t.as[e]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function eB(e,t,n,r,i,a,o){const s=t[n]||(t[n]={}),l=function(e){return Ms(e)?("descending"===e.order?"-":"+")+SF(e.op,e.field):""}(a);let c,u,f=Jj(i);if(null!=f&&(e=t.scope,f+=l?"|"+l:"",c=s[f]),!c){const n=a?{field:TF,pulse:t.countsRef(e,i,a)}:{field:e.fieldRef(i),pulse:kF(t.output)};l&&(n.sort=e.sortRef(a)),u=e.add(wF(r,void 0,n)),o&&(t.index[i]=u),c=kF(u),null!=f&&(s[f]=c)}return c}function tB(e,t,n){const r=e.remove,i=e.insert,a=e.toggle,o=e.modify,s=e.values,l=t.add(AF()),c="if("+e.trigger+',modify("'+n+'",'+[i,r,a,o,s].map((e=>null==e?"null":e)).join(",")+"),0)",u=uP(c,t);l.update=u.$expr,l.params=u.$params}function nB(e,t){const n=Ij(e),r=e.type===sj,i=e.from&&e.from.facet,a=e.overlap;let o,s,l,c,u,f,d,h=e.layout||n===HI||n===qI;const p=n===$I||h||i,m=function(e,t,n){let r,i,a,o,s;return e?(r=e.facet)&&(t||us("Only group marks can be faceted."),null!=r.field?o=s=Kj(r,n):(e.data?s=kF(n.getData(e.data).aggregate):(a=jj(ll({type:"aggregate",groupby:Zs(r.groupby)},r.aggregate),n),a.params.key=n.keyRef(r.groupby),a.params.pulse=Kj(r,n),o=s=kF(n.add(a))),i=n.keyRef(r.groupby,!0))):o=kF(n.add(YF(null,[{}]))),o||(o=Kj(e,n)),{key:i,pulse:o,parent:s}}(e.from,r,t);s=t.add(KF({key:m.key||(e.key?EF(e.key):void 0),pulse:m.pulse,clean:!r}));const g=kF(s);s=l=t.add(YF({pulse:g})),s=t.add(iz({markdef:Fj(e),interactive:zj(e.interactive,t),clip:Dj(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:kF(s)}));const v=kF(s);s=c=t.add(ZF(pF(e.encode,e.type,n,e.style,t,{mod:!1,pulse:v}))),s.params.parent=t.encode(),e.transform&&e.transform.forEach((e=>{const n=jj(e,t),r=n.metadata;(r.generates||r.changes)&&us("Mark transforms should not generate new data."),r.nomod||(c.params.mod=!0),n.params.pulse=kF(s),t.add(s=n)})),e.sort&&(s=t.add(gz({sort:t.compareRef(e.sort),pulse:kF(s)})));const y=kF(s);(i||h)&&(h=t.add(vz({layout:t.objectProperty(e.layout),legends:t.legends,mark:v,pulse:y})),f=kF(h));const b=t.add(GF({mark:v,pulse:f||y}));d=kF(b),r&&(p&&(o=t.operators,o.pop(),h&&o.pop()),t.pushState(y,f||d,g),i?function(e,t,n){const r=e.from.facet,i=r.name,a=Kj(r,t);let o;r.name||us("Facet must have a name: "+Nl(r)),r.data||us("Facet must reference a data set: "+Nl(r)),r.field?o=t.add(cz({field:t.fieldRef(r.field),pulse:a})):r.groupby?o=t.add(QF({key:t.keyRef(r.groupby),group:kF(t.proxy(n.parent)),pulse:a})):us("Facet must specify groupby or field: "+Nl(r));const s=t.fork(),l=s.add(YF()),c=s.add(mz({pulse:kF(l)}));s.addData(i,new Zj(s,l,l,c)),s.addSignal("parent",null),o.params.subflow={$subflow:s.parse(e).toRuntime()}}(e,t,m):p?function(e,t,n){const r=t.add(cz({pulse:n.pulse})),i=t.fork();i.add(mz()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}(e,t,m):t.parse(e),t.popState(),p&&(h&&o.push(h),o.push(b))),a&&(d=function(e,t,n){const r=e.method,i=e.bound,a=e.separation,o={separation:RF(a)?n.signalRef(a.signal):a,method:RF(r)?n.signalRef(r.signal):r,pulse:t};e.order&&(o.sort=n.compareRef({field:e.order}));if(i){const e=i.tolerance;o.boundTolerance=RF(e)?n.signalRef(e.signal):+e,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return kF(n.add(sz(o)))}(a,d,t));const x=t.add(hz({pulse:d})),_=t.add(mz({pulse:kF(x)},void 0,t.parent()));null!=e.name&&(u=e.name,t.addData(u,new Zj(t,l,x,_)),e.on&&e.on.forEach((e=>{(e.insert||e.remove||e.toggle)&&us("Marks only support modify triggers."),tB(e,t,u)})))}function rB(e,t){const n=t.config.legend,r=e.encode||{},i=hj(e,n),a=r.legend||{},o=a.name||void 0,s=a.interactive,l=a.style,c={};let u,f,d,h=0;rj.forEach((t=>e[t]?(c[t]=e[t],h=h||e[t]):0)),h||us("Missing valid scale for legend.");const p=function(e,t){let n=e.type||Qz;e.type||1!==function(e){return rj.reduce(((t,n)=>t+(e[n]?1:0)),0)}(e)||!e.fill&&!e.stroke||(n=Bv(t)?ej:$v(t)?tj:Qz);return n!==ej?n:$v(t)?tj:ej}(e,t.scaleType(h)),m={title:null!=e.title,scales:c,type:p,vgrad:"symbol"!==p&&i.isVertical()},g=kF(t.add(YF(null,[m]))),v=kF(t.add(nz(f={type:p,scale:t.scaleRef(h),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===ej?(d=[bj(e,h,n,r.gradient),Aj(e,n,r.labels,v)],f.count=f.count||t.signalRef(`max(2,2*floor((${DF(i.gradientLength())})/100))`)):p===tj?d=[xj(e,h,n,r.gradient,v),Aj(e,n,r.labels,v)]:(u=function(e,t){const n=hj(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}(e,n),d=[kj(e,n,r,v,DF(u.columns))],f.size=function(e,t,n){const r=DF(aB("size",e,n)),i=DF(aB("strokeWidth",e,n)),a=DF(function(e,t,n){return pj("fontSize",e)||function(e,t,n){const r=t.config.style[n];return r&&r[e]}("fontSize",t,n)}(n[1].encode,t,Xz));return uP(`max(ceil(sqrt(${r})+${i}),${a})`,t)}(e,t,d[0].marks)),d=[dj({role:QI,from:g,encode:{enter:{x:{value:0},y:{value:0}}},marks:d,layout:u,interactive:s})],m.title&&d.push(function(e,t,n,r){const i=hj(e,t),a={enter:{opacity:aj},update:{opacity:oj,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:aj}};return jI(a,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:Rj},angle:{signal:Nj},align:{signal:Oj},baseline:{signal:Lj},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),yj({type:fj,role:rF,style:Kz,from:r,encode:a},n)}(e,n,r.title,g)),nB(dj({role:ZI,from:g,encode:BI(iB(i,e,n),a,ij),marks:d,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:s,style:l}),t)}function iB(e,t,n){const r={enter:{},update:{}};return jI(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function aB(e,t,n){return t[e]?`scale("${t[e]}",datum)`:pj(e,n[0].encode)}Zj.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let a=t[0],o=null,s=1;for(a&&"load"===a.type&&(a=t[1]),e.add(t[0]);s<n;++s)t[s].params.pulse=kF(t[s-1]),e.add(t[s]),"aggregate"===t[s].type&&(o=t[s]);return new Zj(e,a,i,r,o)},Zj.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),a=Jj(t);let o,s,l;return null!=a&&(e=r.scope,o=i[a]),o?n&&n.field&&Qj(e,o.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:kF(r.output)},n&&n.field&&Qj(e,l,n),s=e.add(VF(l)),o=e.add(YF({pulse:kF(s)})),o={agg:s,ref:kF(o)},null!=a&&(i[a]=o)),o.ref},tuplesRef(){return kF(this.values)},extentRef(e,t){return eB(e,this,"extent","extent",t,!1)},domainRef(e,t){return eB(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return eB(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return eB(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return eB(e,this,"indata","tupleindex",t,!0,!0)}};const oB=`item.orient==="${Iz}"?-90:item.orient==="${Fz}"?90:0`;function sB(e,t){const n=hj(e=Al(e)?{text:e}:e,t.config.title),r=e.encode||{},i=r.group||{},a=i.name||void 0,o=i.interactive,s=i.style,l=[],c=kF(t.add(YF(null,[{}])));return l.push(function(e,t,n,r){const i={value:0},a=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return jI(o,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),yj({type:fj,role:aF,style:Zz,from:r,encode:o},n)}(e,n,function(e){const t=e.encode;return t&&t.title||ll({name:e.name,interactive:e.interactive,style:e.style},t)}(e),c)),e.subtitle&&l.push(function(e,t,n,r){const i={value:0},a=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return jI(o,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),yj({type:fj,role:oF,style:Jz,from:r,encode:o},n)}(e,n,r.subtitle,c)),nB(dj({role:iF,from:c,encode:lB(n,i),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:a,interactive:o,style:s}),t)}function lB(e,t){const n={enter:{},update:{}};return jI(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:gj},angle:{signal:oB},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),BI(n,t,ij)}function cB(e,t){const n=[];e.transform&&e.transform.forEach((e=>{n.push(jj(e,t))})),e.on&&e.on.forEach((n=>{tB(n,t,e.name)})),t.addDataPipeline(e.name,function(e,t,n){const r=[];let i,a,o,s,l,c=null,u=!1,f=!1;e.values?RF(e.values)||NF(e.format)?(r.push(fB(t,e)),r.push(c=uB())):r.push(c=uB({$ingest:e.values,$format:e.format})):e.url?NF(e.url)||NF(e.format)?(r.push(fB(t,e)),r.push(c=uB())):r.push(c=uB({$request:e.url,$format:e.format})):e.source&&(c=i=Zs(e.source).map((e=>kF(t.getData(e).output))),r.push(null));for(a=0,o=n.length;a<o;++a)s=n[a],l=s.metadata,c||l.source||r.push(c=uB()),r.push(s),l.generates&&(f=!0),l.modifies&&!f&&(u=!0),l.source?c=s:l.changes&&(c=null);i&&(o=i.length-1,r[0]=dz({derive:u,pulse:o?i:i[0]}),(u||o)&&r.splice(1,0,uB()));c||r.push(uB());return r.push(mz({})),r}(e,t,n))}function uB(e){const t=YF({},e);return t.metadata={source:!0},t}function fB(e,t){return rz({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const dB=e=>e===zz||e===Pz,hB=(e,t,n)=>RF(e)?xB(e.signal,t,n):e===Iz||e===Pz?t:n,pB=(e,t,n)=>RF(e)?yB(e.signal,t,n):dB(e)?t:n,mB=(e,t,n)=>RF(e)?bB(e.signal,t,n):dB(e)?n:t,gB=(e,t,n)=>RF(e)?_B(e.signal,t,n):e===Pz?{value:t}:{value:n},vB=(e,t,n)=>RF(e)?wB(e.signal,t,n):e===Fz?{value:t}:{value:n},yB=(e,t,n)=>AB(`${e} === '${Pz}' || ${e} === '${zz}'`,t,n),bB=(e,t,n)=>AB(`${e} !== '${Pz}' && ${e} !== '${zz}'`,t,n),xB=(e,t,n)=>EB(`${e} === '${Iz}' || ${e} === '${Pz}'`,t,n),_B=(e,t,n)=>EB(`${e} === '${Pz}'`,t,n),wB=(e,t,n)=>EB(`${e} === '${Fz}'`,t,n),AB=(e,t,n)=>(t=null!=t?FI(t):t,n=null!=n?FI(n):n,kB(t)&&kB(n)?{signal:`${e} ? (${t=t?t.signal||Nl(t.value):null}) : (${n=n?n.signal||Nl(n.value):null})`}:[ll({test:e},t)].concat(n||[])),kB=e=>null==e||1===Object.keys(e).length,EB=(e,t,n)=>({signal:`${e} ? (${MB(t)}) : (${MB(n)})`}),TB=(e,t,n,r,i)=>({signal:(null!=r?`${e} === '${Iz}' ? (${MB(r)}) : `:"")+(null!=n?`${e} === '${zz}' ? (${MB(n)}) : `:"")+(null!=i?`${e} === '${Fz}' ? (${MB(i)}) : `:"")+(null!=t?`${e} === '${Pz}' ? (${MB(t)}) : `:"")+"(null)"}),MB=e=>RF(e)?e.signal:null==e?null:Nl(e),SB=(e,t)=>0===t?0:RF(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},CB=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function OB(e,t,n,r){let i;if(t&&dl(t,e))return t[e];if(dl(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[Kz][i]}if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[Xz][i]}return null}function RB(e){const t={};for(const n of e)if(n)for(const e in n)t[e]=1;return Object.keys(t)}function NB(e,t){return{scale:e.scale,range:t}}function LB(e,t,n,r,i){const a=hj(e,t),o=e.orient,s=e.gridScale,l=hB(o,1,-1),c=function(e,t){if(1===t);else if(Ms(e)){let n=e=ll({},e);for(;null!=n.mult;){if(!Ms(n.mult))return n.mult=RF(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n=n.mult=ll({},n.mult)}n.mult=t}else e=RF(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);return e}(e.offset,l);let u,f,d;const h={enter:u={opacity:aj},update:d={opacity:oj},exit:f={opacity:aj}};jI(h,{stroke:a("gridColor"),strokeCap:a("gridCap"),strokeDash:a("gridDash"),strokeDashOffset:a("gridDashOffset"),strokeOpacity:a("gridOpacity"),strokeWidth:a("gridWidth")});const p={scale:e.scale,field:Yz,band:i.band,extra:i.extra,offset:i.offset,round:a("tickRound")},m=pB(o,{signal:"height"},{signal:"width"}),g=s?{scale:s,range:0,mult:l,offset:c}:{value:0,offset:c},v=s?{scale:s,range:1,mult:l,offset:c}:ll(m,{mult:l,offset:c});return u.x=d.x=pB(o,p,g),u.y=d.y=mB(o,p,g),u.x2=d.x2=mB(o,v),u.y2=d.y2=pB(o,v),f.x=pB(o,p),f.y=mB(o,p),yj({type:cj,role:GI,key:Yz,from:r,encode:h},n)}function DB(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function PB(e,t,n,r){const i=hj(e,t),a=e.orient,o=hB(a,-1,1);let s,l;const c={enter:s={opacity:aj,anchor:FI(i("titleAnchor",null)),align:{signal:gj}},update:l=ll({},s,{opacity:oj,text:FI(e.title)}),exit:{opacity:aj}},u={signal:`lerp(range("${e.scale}"), ${mj(0,1,.5)})`};return l.x=pB(a,u),l.y=mB(a,u),s.angle=pB(a,aj,SB(o,90)),s.baseline=pB(a,gB(a,zz,Pz),{value:zz}),l.angle=s.angle,l.baseline=s.baseline,jI(c,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),function(e,t,n,r){const i=(e,t)=>null!=e?(n.update[t]=CB(FI(e),n.update[t]),!1):!UI(t,r),a=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===a?FI(o):pB(t,FI(o),FI(a))}(i,a,c,n),c.update.align=CB(c.update.align,s.align),c.update.angle=CB(c.update.angle,s.angle),c.update.baseline=CB(c.update.baseline,s.baseline),yj({type:fj,role:KI,style:Kz,from:r,encode:c},n)}function IB(e,t){const n=function(e,t){var n,r,i,a=t.config,o=a.style,s=a.axis,l="band"===t.scaleType(e.scale)&&a.axisBand,c=e.orient;if(RF(c)){const e=RB([a.axisX,a.axisY]),t=RB([a.axisTop,a.axisBottom,a.axisLeft,a.axisRight]);for(i of(n={},e))n[i]=pB(c,OB(i,a.axisX,s,o),OB(i,a.axisY,s,o));for(i of(r={},t))r[i]=TB(c.signal,OB(i,a.axisTop,s,o),OB(i,a.axisBottom,s,o),OB(i,a.axisLeft,s,o),OB(i,a.axisRight,s,o))}else n=c===Pz||c===zz?a.axisX:a.axisY,r=a["axis"+c[0].toUpperCase()+c.slice(1)];return n||r||l?ll({},s,n,r,l):s}(e,t),r=e.encode||{},i=r.axis||{},a=i.name||void 0,o=i.interactive,s=i.style,l=hj(e,n),c=function(e){const t=e("tickBand");let n,r,i=e("tickOffset");return t?t.signal?(n={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},r={signal:`(${t.signal}) === 'extent'`},Ms(i)||(i={signal:`(${t.signal}) === 'extent' ? 0 : ${i}`})):"extent"===t?(n=1,r=!0,i=0):(n=.5,r=!1):(n=e("bandPosition"),r=e("tickExtra")),{extra:r,band:n,offset:i}}(l),u={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:null!=e.title},f=kF(t.add(YF({},[u]))),d=kF(t.add(WF({scale:t.scaleRef(e.scale),extra:t.property(c.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return u.grid&&h.push(LB(e,n,r.grid,d,c)),u.ticks&&(p=l("tickSize"),h.push(function(e,t,n,r,i,a){const o=hj(e,t),s=e.orient,l=hB(s,-1,1);let c,u,f;const d={enter:c={opacity:aj},update:f={opacity:oj},exit:u={opacity:aj}};jI(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=FI(i);h.mult=l;const p={scale:e.scale,field:Yz,band:a.band,extra:a.extra,offset:a.offset,round:o("tickRound")};return f.y=c.y=pB(s,aj,p),f.y2=c.y2=pB(s,h),u.x=pB(s,p),f.x=c.x=mB(s,aj,p),f.x2=c.x2=mB(s,h),u.y=mB(s,p),yj({type:cj,role:XI,key:Yz,from:r,encode:d},n)}(e,n,r.ticks,d,p,c))),u.labels&&(p=u.ticks?p:0,h.push(function(e,t,n,r,i,a){const o=hj(e,t),s=e.orient,l=e.scale,c=hB(s,-1,1),u=DF(o("labelFlush")),f=DF(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p,m=0===u||!!u;const g=FI(i);g.mult=c,g.offset=FI(o("labelPadding")||0),g.offset.mult=c;const v={scale:l,field:Yz,band:.5,offset:vj(a.offset,o("labelOffset"))},y=pB(s,m?DB(l,u,'"left"','"right"','"center"'):{value:"center"},vB(s,"left","right")),b=pB(s,gB(s,"bottom","top"),m?DB(l,u,'"top"','"bottom"','"middle"'):{value:"middle"}),x=DB(l,u,`-(${f})`,f,0);m=m&&f;const _={opacity:aj,x:pB(s,v,g),y:mB(s,v,g)},w={enter:_,update:p={opacity:oj,text:{field:Hz},x:_.x,y:_.y,align:y,baseline:b},exit:{opacity:aj,x:_.x,y:_.y}};jI(w,{dx:!d&&m?pB(s,x):null,dy:!h&&m?mB(s,x):null}),jI(w,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const A=o("labelBound");let k=o("labelOverlap");return k=k||A?{separation:o("labelSeparation"),method:k,order:"datum.index",bound:A?{scale:l,orient:s,tolerance:A}:null}:void 0,p.align!==y&&(p.align=CB(p.align,y)),p.baseline!==b&&(p.baseline=CB(p.baseline,b)),yj({type:fj,role:YI,style:Xz,key:Yz,from:r,encode:w,overlap:k},n)}(e,n,r.labels,d,p,c))),u.domain&&h.push(function(e,t,n,r){const i=hj(e,t),a=e.orient;let o,s;const l={enter:o={opacity:aj},update:s={opacity:oj},exit:{opacity:aj}};jI(l,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const c=NB(e,0),u=NB(e,1);return o.x=s.x=pB(a,c,aj),o.x2=s.x2=pB(a,u),o.y=s.y=mB(a,c,aj),o.y2=s.y2=mB(a,u),yj({type:cj,role:WI,from:r,encode:l},n)}(e,n,r.domain,f)),u.title&&h.push(PB(e,n,r.title,f)),nB(dj({role:VI,from:f,encode:BI(FB(l,e),i,ij),marks:h,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:a,interactive:o,style:s}),t)}function FB(e,t){const n={enter:{},update:{}};return jI(n,{orient:e("orient"),offset:e("offset")||0,position:LF(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function zB(e,t,n){const r=Zs(e.signals),i=Zs(e.scales);return n||r.forEach((e=>xF(e,t))),Zs(e.projections).forEach((e=>function(e,t){const n=t.config.projection||{},r={};for(const n in e)"name"!==n&&(r[n]=Dz(e[n],n,t));for(const e in n)null==r[e]&&(r[e]=Dz(n[e],e,t));t.addProjection(e.name,r)}(e,t))),i.forEach((e=>function(e,t){const n=e.type||"linear";zv(n)||us("Unrecognized scale type: "+Nl(n)),t.addScale(e.name,{type:n,domain:void 0})}(e,t))),Zs(e.data).forEach((e=>cB(e,t))),i.forEach((e=>_z(e,t))),(n||r).forEach((e=>function(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?us("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=uP(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach((e=>$F(e,t,n.id)))}(e,t))),Zs(e.axes).forEach((e=>IB(e,t))),Zs(e.marks).forEach((e=>nB(e,t))),Zs(e.legends).forEach((e=>rB(e,t))),e.title&&sB(e.title,t),t.parseLambdas(),t}const jB=e=>BI({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function BB(e,t){const n=t.config,r=kF(t.root=t.add(AF())),i=function(e,t){const n=n=>LF(e[n],t[n]),r=[UB("background",n("background")),UB("autosize",LI(n("autosize"))),UB("padding",II(n("padding"))),UB("width",n("width")||0),UB("height",n("height")||0)],i=r.reduce(((e,t)=>(e[t.name]=t,e)),{}),a={};return Zs(e.signals).forEach((e=>{dl(i,e.name)?e=ll(i[e.name],e):r.push(e),a[e.name]=e})),Zs(t.signals).forEach((e=>{dl(a,e.name)||dl(i,e.name)||r.push(e)})),r}(e,n);i.forEach((e=>xF(e,t))),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const a=t.add(YF()),o=t.add(ZF(pF(jB(e.encode),sj,qI,e.style,t,{pulse:kF(a)}))),s=t.add(vz({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:kF(o)}));t.operators.pop(),t.pushState(kF(o),kF(s),null),zB(e,t,i),t.operators.push(s);let l=t.add(GF({mark:r,pulse:kF(s)}));return l=t.add(hz({pulse:kF(l)})),l=t.add(mz({pulse:kF(l)})),t.addData("root",new Zj(t,a,a,l)),t}function UB(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function $B(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function qB(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}function HB(e){return(Ts(e)?VB:WB)(e)}function VB(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const t=e[r];n+=(r>0?",":"")+(Ms(t)?t.signal||HB(t):Nl(t))}return n+"]"}function WB(e){let t,n,r="{",i=0;for(t in e)n=e[t],r+=(++i>1?",":"")+Nl(t)+":"+(Ms(n)?n.signal||HB(n):Nl(n));return r+"}"}function GB(e,t,n){return Ms(e)||us("Input Vega specification must be an object."),t=Cs(function(){const e="sans-serif",t="#4c78a8",n="#000",r="#888",i="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:t},area:{fill:t},image:null,line:{stroke:t,strokeWidth:2},path:{stroke:t},rect:{fill:t},rule:{stroke:n},shape:{stroke:t},symbol:{fill:t,size:64},text:{fill:n,font:e,fontSize:11},trail:{fill:t,size:2},style:{"guide-label":{fill:n,font:e,fontSize:10},"guide-title":{fill:n,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:n,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:n,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:i},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:r,grid:!1,gridWidth:1,gridColor:i,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:r,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:i,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:r,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}(),t,e.config),BB(e,new $B(t,n)).toRuntime()}$B.prototype=qB.prototype={parse(e){return zB(e,this)},fork(){return new qB(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach((t=>{t.$ref=e.id})),e.refs=null),e},proxy(e){const t=e instanceof _F?kF(e):e;return this.add(fz({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;for(e in this.root&&(this.root.root=!0),this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(e,t,n){let r,i;e&&(r=e.data||(e.data={}),i=r[t]||(r[t]=[]),i.push(n))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(kF(this.add(mz({pulse:e})))),this._parent.push(t),this._lookup.push(n?kF(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Ns(this._parent)},encode(){return Ns(this._encode)},lookup(){return Ns(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Al(e))return EF(e,t);e.signal||us("Unsupported field reference: "+Nl(e));const n=e.signal;let r=this.field[n];if(!r){const e={name:this.signalRef(n)};t&&(e.as=t),this.field[n]=r=kF(this.add(ez(e)))}return r},compareRef(e){let t=!1;const n=e=>RF(e)?(t=!0,this.signalRef(e.signal)):function(e){return e&&e.expr}(e)?(t=!0,this.exprRef(e.expr)):e,r=Zs(e.field).map(n),i=Zs(e.order).map(n);return t?kF(this.add(XF({fields:r,orders:i}))):MF(r,i)},keyRef(e,t){let n=!1;const r=this.signals;return e=Zs(e).map((e=>RF(e)?(n=!0,kF(r[e.signal])):e)),n?kF(this.add(tz({fields:e,flat:t}))):function(e,t){const n={$key:e};return t&&(n.$flat=!0),n}(e,t)},sortRef(e){if(!e)return e;const t=SF(e.op,e.field),n=e.order||"ascending";return n.signal?kF(this.add(XF({fields:t,orders:this.signalRef(n.signal)}))):MF(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return dl(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&us("Duplicate signal name: "+Nl(e));const n=t instanceof _F?t:this.add(AF(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||us("Unrecognized signal name: "+Nl(e)),this.signals[e]},signalRef(e){return this.signals[e]?kF(this.signals[e]):(dl(this.lambdas,e)||(this.lambdas[e]=this.add(AF(null))),kF(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const n=e[t],r=uP(n,this),i=this.lambdas[n];i.params=r.$params,i.update=r.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return e&&Ms(e)?this.signalRef(e.signal||HB(e)):e},exprRef(e,t){const n={expr:uP(e,this)};return t&&(n.expr.$name=t),kF(this.add(JF(n)))},addBinding(e,t){this.bindings||us("Nested signals do not support binding: "+Nl(e)),this.bindings.push(ll({signal:e},t))},addScaleProj(e,t){dl(this.scales,e)&&us("Duplicate scale or projection name: "+Nl(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,pz(t))},addProjection(e,t){this.addScaleProj(e,uz(t))},getScale(e){return this.scales[e]||us("Unrecognized scale name: "+Nl(e)),this.scales[e]},scaleRef(e){return kF(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return dl(this.data,e)&&us("Duplicate data set name: "+Nl(e)),this.data[e]=t},getData(e){return this.data[e]||us("Undefined data set name: "+Nl(e)),this.data[e]},addDataPipeline(e,t){return dl(this.data,e)&&us("Duplicate data set name: "+Nl(e)),this.addData(e,Zj.fromEntries(this,t))}};var YB="5.30.0";ll(rd,r,i,a,o,s,c,l,u,f,d,h);var XB={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},KB={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},ZB={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const JB=Array.prototype.slice,QB=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,JB.call(t,1))};var eU={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:(e,t,n,r,i,a,o)=>new Date(e,t||0,null!=n?n:1,r||0,i||0,a||0,o||0),date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return QB("join",arguments)},indexof:function(){return QB("indexOf",arguments)},lastindexof:function(){return QB("lastIndexOf",arguments)},slice:function(){return QB("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return QB("substring",arguments,String)},split:function(){return QB("split",arguments,String)},replace:function(){return QB("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const tU=["view","item","group","xy","x","y"],nU=new Set([Function,eval,setTimeout,setInterval]);"function"==typeof setImmediate&&nU.add(setImmediate);const rU={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:"datum"===n?e.datum:"event"===n?e.event:"item"===n?e.item:XB[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),!nU.has(r[i]))return r[i];console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`)},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),"if"===r?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||eU[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>KB[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>ZB[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>"&&"===t.operator?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce(((t,n)=>{e.memberDepth+=1;const r=e(n.key);return e.memberDepth-=1,nU.has(e(n.value))?console.error(`Prevented interpretation of property "${r}" which could lead to insecure code execution`):t[r]=e(n.value),t}),{})};function iU(e,t,n,r,i,a){const o=e=>rU[e.type](o,e);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=a,tU.forEach((e=>o.fn[e]=function(){return i.vega[e](...arguments)})),o(e)}var aU={operator(e,t){const n=t.ast,r=e.functions;return e=>iU(n,r,e)},parameter(e,t){const n=t.ast,r=e.functions;return(e,t)=>iU(n,r,t,e)},event(e,t){const n=t.ast,r=e.functions;return e=>iU(n,r,void 0,void 0,e)},handler(e,t){const n=t.ast,r=e.functions;return(e,t)=>{const i=t.item&&t.item.datum;return iU(n,r,e,i,t)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,a="group"===n||"image"===n||"rect"===n;return(e,t)=>{const o=e.datum;let s,l=0;for(const n in r)s=iU(r[n].ast,i,t,o,void 0,e),e[n]!==s&&(e[n]=s,l=1);return"rule"!==n&&function(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}(e,r,a),l}}};function oU(e){return t$(e,"or")}function sU(e){return t$(e,"and")}function lU(e){return t$(e,"not")}function cU(e,t){if(lU(e))cU(e.not,t);else if(sU(e))for(const n of e.and)cU(n,t);else if(oU(e))for(const n of e.or)cU(n,t);else t(e)}function uU(e,t){return lU(e)?{not:uU(e.not,t)}:sU(e)?{and:e.and.map((e=>uU(e,t)))}:oU(e)?{or:e.or.map((e=>uU(e,t)))}:t(e)}const fU=structuredClone;function dU(e){throw new Error(e)}function hU(e,t){const n={};for(const r of t)dl(e,r)&&(n[r]=e[r]);return n}function pU(e,t){const n={...e};for(const e of t)delete n[e];return n}function mU(e){if(_l(e))return e;const t=Al(e)?e:e$(e);if(t.length<250)return t;let n=0;for(let e=0;e<t.length;e++){n=(n<<5)-n+t.charCodeAt(e),n|=0}return n}function gU(e){return!1===e||null===e}function vU(e,t){return e.includes(t)}function yU(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function bU(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function xU(e,...t){for(const n of t)_U(e,n??{});return e}function _U(e,t){for(const n of CU(t))Os(e,n,t[n],!0)}function wU(e,t){const n=[],r={};let i;for(const a of e)i=t(a),i in r||(r[i]=1,n.push(a));return n}function AU(e,t){const n=CU(e),r=CU(t);if(n.length!==r.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function kU(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function EU(e,t){for(const n of e)if(t.has(n))return!0;return!1}function TU(e){const t=new Set;for(const n of e){const e=fs(n).map(((e,t)=>0===t?e:`[${e}]`)),r=e.map(((t,n)=>e.slice(0,n+1).join("")));for(const e of r)t.add(e)}return t}function MU(e,t){return void 0===e||void 0===t||EU(TU(e),TU(t))}function SU(e){return 0===CU(e).length}Set.prototype.toJSON=function(){return`Set(${[...this].map((e=>e$(e))).join(",")})`};const CU=Object.keys,OU=Object.values,RU=Object.entries;function NU(e){return!0===e||!1===e}function LU(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function DU(e,t){return lU(e)?`!(${DU(e.not,t)})`:sU(e)?`(${e.and.map((e=>DU(e,t))).join(") && (")})`:oU(e)?`(${e.or.map((e=>DU(e,t))).join(") || (")})`:t(e)}function PU(e,t){if(0===t.length)return!0;const n=t.shift();return n in e&&PU(e[n],t)&&delete e[n],SU(e)}function IU(e){return e.charAt(0).toUpperCase()+e.substr(1)}function FU(e,t="datum"){const n=fs(e),r=[];for(let e=1;e<=n.length;e++){const i=`[${n.slice(0,e).map(Nl).join("][")}]`;r.push(`${t}${i}`)}return r.join(" && ")}function zU(e,t="datum"){return`${t}[${Nl(fs(e).join("."))}]`}function jU(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function BU(e){return`${fs(e).map(jU).join("\\.")}`}function UU(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function $U(e){return`${fs(e).join(".")}`}function qU(e){return e?fs(e).length:0}function HU(...e){return e.find((e=>void 0!==e))}let VU=42;function WU(e){const t=++VU;return e?String(e)+t:t}function GU(){VU=42}function YU(e){return XU(e)?e:`__${e}`}function XU(e){return e.startsWith("__")}function KU(e){if(void 0!==e)return(e%360+360)%360}function ZU(e){return!!_l(e)||!isNaN(e)&&!isNaN(parseFloat(e))}const JU=Object.getPrototypeOf(structuredClone({}));function QU(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;0!=r--;)if(!QU(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const n of e.entries())if(!t.has(n[0]))return!1;for(const n of e.entries())if(!QU(n[1],t.get(n[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e.entries())if(!t.has(n[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;0!=r--;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==JU.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==JU.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!=r--;){const n=i[r];if(!QU(e[n],t[n]))return!1}return!0}return e!=e&&t!=t}function e$(e){const t=[];return function e(n){if(n&&n.toJSON&&"function"==typeof n.toJSON&&(n=n.toJSON()),void 0===n)return;if("number"==typeof n)return isFinite(n)?""+n:"null";if("object"!=typeof n)return JSON.stringify(n);let r,i;if(Array.isArray(n)){for(i="[",r=0;r<n.length;r++)r&&(i+=","),i+=e(n[r])||"null";return i+"]"}if(null===n)return"null";if(t.includes(n))throw new TypeError("Converting circular structure to JSON");const a=t.push(n)-1,o=Object.keys(n).sort();for(i="",r=0;r<o.length;r++){const t=o[r],a=e(n[t]);a&&(i&&(i+=","),i+=JSON.stringify(t)+":"+a)}return t.splice(a,1),`{${i}}`}(e)}function t$(e,t){return Ms(e)&&dl(e,t)&&void 0!==e[t]}const n$="row",r$="column",i$="facet",a$="x",o$="y",s$="x2",l$="y2",c$="xOffset",u$="yOffset",f$="radius",d$="radius2",h$="theta",p$="theta2",m$="latitude",g$="longitude",v$="latitude2",y$="longitude2",b$="color",x$="fill",_$="stroke",w$="shape",A$="size",k$="angle",E$="opacity",T$="fillOpacity",M$="strokeOpacity",S$="strokeWidth",C$="strokeDash",O$="text",R$="order",N$="detail",L$="key",D$="tooltip",P$="href",I$="url",F$="description",z$={theta:1,theta2:1,radius:1,radius2:1};function j$(e){return dl(z$,e)}const B$={longitude:1,longitude2:1,latitude:1,latitude2:1};function U$(e){switch(e){case m$:return"y";case v$:return"y2";case g$:return"x";case y$:return"x2"}}function $$(e){return dl(B$,e)}const q$=CU(B$),H$={x:1,y:1,x2:1,y2:1,...z$,...B$,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function V$(e){return e===b$||e===x$||e===_$}const W$={row:1,column:1,facet:1},G$=CU(W$),Y$={...H$,...W$},X$=CU(Y$),{order:K$,detail:Z$,tooltip:J$,...Q$}=Y$,{row:eq,column:tq,facet:nq,...rq}=Q$;CU(Q$),CU(rq);function iq(e){return dl(Y$,e)}const aq=[s$,l$,v$,y$,p$,d$];function oq(e){return sq(e)!==e}function sq(e){switch(e){case s$:return a$;case l$:return o$;case v$:return m$;case y$:return g$;case p$:return h$;case d$:return f$}return e}function lq(e){if(j$(e))switch(e){case h$:return"startAngle";case p$:return"endAngle";case f$:return"outerRadius";case d$:return"innerRadius"}return e}function cq(e){switch(e){case a$:return s$;case o$:return l$;case m$:return v$;case g$:return y$;case h$:return p$;case f$:return d$}}function uq(e){switch(e){case a$:case s$:return"width";case o$:case l$:return"height"}}function fq(e){switch(e){case a$:return"xOffset";case o$:return"yOffset";case s$:return"x2Offset";case l$:return"y2Offset";case h$:return"thetaOffset";case f$:return"radiusOffset";case p$:return"theta2Offset";case d$:return"radius2Offset"}}function dq(e){switch(e){case a$:return"xOffset";case o$:return"yOffset"}}function hq(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const pq=CU(H$),{x:mq,y:gq,x2:vq,y2:yq,xOffset:bq,yOffset:xq,latitude:_q,longitude:wq,latitude2:Aq,longitude2:kq,theta:Eq,theta2:Tq,radius:Mq,radius2:Sq,...Cq}=H$,Oq=CU(Cq),Rq={x:1,y:1},Nq=CU(Rq);function Lq(e){return dl(Rq,e)}const Dq={theta:1,radius:1},Pq=CU(Dq);function Iq(e){return"width"===e?a$:o$}const Fq={xOffset:1,yOffset:1};CU(Fq);function zq(e){return dl(Fq,e)}const{text:jq,tooltip:Bq,href:Uq,url:$q,description:qq,detail:Hq,key:Vq,order:Wq,...Gq}=Cq,Yq=CU(Gq);const Xq={...Rq,...Dq,...Fq,...Gq},Kq=CU(Xq);function Zq(e){return dl(Xq,e)}function Jq(e,t){return function(e){switch(e){case b$:case x$:case _$:case F$:case N$:case L$:case D$:case P$:case R$:case E$:case T$:case M$:case S$:case i$:case n$:case r$:return Qq;case a$:case o$:case c$:case u$:case m$:case g$:return tH;case s$:case l$:case v$:case y$:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case A$:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case C$:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case w$:return{point:"always",geoshape:"always"};case O$:return{text:"always"};case k$:return{point:"always",square:"always",text:"always"};case I$:return{image:"always"};case h$:case f$:return{text:"always",arc:"always"};case p$:case d$:return{arc:"always"}}}(e)[t]}const Qq={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:eH,...tH}=Qq;function nH(e){switch(e){case a$:case o$:case h$:case f$:case c$:case u$:case A$:case k$:case S$:case E$:case T$:case M$:case s$:case l$:case p$:case d$:return;case i$:case n$:case r$:case w$:case C$:case O$:case D$:case P$:case I$:case F$:return"discrete";case b$:case x$:case _$:return"flexible";case m$:case g$:case v$:case y$:case N$:case L$:case R$:return}}const rH={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},iH={count:1,min:1,max:1};function aH(e){return t$(e,"argmin")}function oH(e){return t$(e,"argmax")}function sH(e){return Al(e)&&dl(rH,e)}const lH=new Set(["count","valid","missing","distinct"]);function cH(e){return Al(e)&&lH.has(e)}const uH=new Set(["count","sum","distinct","valid","missing"]),fH=new Set(["mean","average","median","q1","q3","min","max"]);function dH(e){return yl(e)&&(e=PY(e,void 0)),"bin"+CU(e).map((t=>gH(e[t])?LU(`_${t}_${RU(e[t])}`):LU(`_${t}_${e[t]}`))).join("")}function hH(e){return!0===e||mH(e)&&!e.binned}function pH(e){return"binned"===e||mH(e)&&!0===e.binned}function mH(e){return Ms(e)}function gH(e){return t$(e,"param")}function vH(e){switch(e){case n$:case r$:case A$:case b$:case x$:case _$:case S$:case E$:case T$:case M$:case w$:return 6;case C$:return 4;default:return 10}}function yH(e){return t$(e,"expr")}function bH(e,{level:t}={level:0}){const n=CU(e||{}),r={};for(const i of n)r[i]=0===t?CH(e[i]):bH(e[i],{level:t-1});return r}function xH(e){const{anchor:t,frame:n,offset:r,orient:i,angle:a,limit:o,color:s,subtitleColor:l,subtitleFont:c,subtitleFontSize:u,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...void 0!==a?{angle:a}:{},...void 0!==o?{limit:o}:{}},v={...l?{subtitleColor:l}:{},...c?{subtitleFont:c}:{},...u?{subtitleFontSize:u}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}};return{titleMarkConfig:{...m,...s?{fill:s}:{}},subtitleMarkConfig:hU(e,["align","baseline","dx","dy","limit"]),nonMarkTitleProperties:g,subtitle:v}}function _H(e){return Al(e)||Ts(e)&&Al(e[0])}function wH(e){return t$(e,"signal")}function AH(e){return t$(e,"step")}function kH(e){return!Ts(e)&&(t$(e,"field")&&t$(e,"data"))}const EH=CU({aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1}),TH={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},MH=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function SH(e){const t=Ts(e.condition)?e.condition.map(OH):OH(e.condition);return{...CH(e),condition:t}}function CH(e){if(yH(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function OH(e){if(yH(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function RH(e){if(yH(e)){const{expr:t,...n}=e;return{signal:t,...n}}return wH(e)?e:void 0!==e?{value:e}:void 0}function NH(e){return wH(e)?e.signal:Nl(e)}function LH(e){return wH(e)?e.signal:Nl(e.value)}function DH(e){return wH(e)?e.signal:null==e?null:Nl(e)}function PH(e,t,n){for(const r of n){const n=zH(r,t.markDef,t.config);void 0!==n&&(e[r]=RH(n))}return e}function IH(e){return[].concat(e.type,e.style??[])}function FH(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:a}=r;return i&&t$(t,i)?t[i]:void 0!==t[e]?t[e]:!a||i&&i!==e?zH(e,t,n,r):void 0}function zH(e,t,n,{vgChannel:r}={}){const i=jH(e,t,n.style);return HU(r?i:void 0,i,r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function jH(e,t,n){return BH(e,IH(t),n)}function BH(e,t,n){let r;t=Zs(t);for(const i of t){const t=n[i];t$(t,e)&&(r=t[e])}return r}function UH(e,t){return Zs(e).reduce(((e,n)=>(e.field.push(_Y(n,t)),e.order.push(n.sort??"ascending"),e)),{field:[],order:[]})}function $H(e,t){const n=[...e];return t.forEach((e=>{for(const t of n)if(QU(t,e))return;n.push(e)})),n}function qH(e,t){return QU(e,t)||!t?e:e?[...Zs(e),...Zs(t)].join(", "):t}function HH(e,t){const n=e.value,r=t.value;if(null==n||null===r)return{explicit:e.explicit,value:null};if((_H(n)||wH(n))&&(_H(r)||wH(r)))return{explicit:e.explicit,value:qH(n,r)};if(_H(n)||wH(n))return{explicit:e.explicit,value:n};if(_H(r)||wH(r))return{explicit:e.explicit,value:r};if(!(_H(n)||wH(n)||_H(r)||wH(r)))return{explicit:e.explicit,value:$H(n,r)};throw new Error("It should never reach here")}function VH(e){return`Invalid specification ${e$(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const WH='Autosize "fit" only works for single views and layered views.';function GH(e){return`${"width"==e?"Width":"Height"} "container" only works for single views and layered views.`}function YH(e){return`${"width"==e?"Width":"Height"} "container" only works well with autosize "fit" or "fit-${"width"==e?"x":"y"}".`}function XH(e){return e?`Dropping "fit-${e}" because spec has discrete ${uq(e)}.`:'Dropping "fit" because spec has discrete size.'}function KH(e){return`Unknown field for ${e}. Cannot calculate view size.`}function ZH(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function JH(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function QH(e){return`Selection not supported for ${e} yet.`}const eV="The same selection must be used to override scale domains in a layered view.";function tV(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}function nV(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}function rV(e){return`Ignoring an invalid transform: ${e$(e)}.`}function iV(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function aV(e){return`${e}Offset dropped because ${e} is continuous`}function oV(e){return`Invalid field type "${e}".`}function sV(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function lV(e,t){return`Dropping ${e$(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}function cV(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function uV(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function fV(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function dV(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${"ordinal"===t?"order":"magnitude"}.`}function hV(e){return`Using unaggregated domain with raw field has no effect (${e$(e)}).`}function pV(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function mV(e){return`Unaggregated domain is currently unsupported for log scale (${e$(e)}).`}function gV(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function vV(e){return`The step for "${e}" is dropped because the ${"width"===e?"x":"y"} is continuous.`}const yV="Domains that should be unioned has conflicting sort properties. Sort will be set to true.";function bV(e,t){return`Invalid ${e}: ${e$(t)}.`}function xV(e){return`1D error band does not support ${e}.`}function _V(e){return`Channel ${e} is required for "binned" bin.`}const wV=Es(ws);let AV=wV;function kV(){return AV=wV,AV}function EV(...e){AV.warn(...e)}function TV(e){if(e&&Ms(e))for(const t of DV)if(t$(e,t))return!0;return!1}new WeakMap;const MV=["january","february","march","april","may","june","july","august","september","october","november","december"],SV=MV.map((e=>e.substr(0,3))),CV=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],OV=CV.map((e=>e.substr(0,3)));function RV(e,t){const n=[];if(t&&void 0!==e.day&&CU(e).length>1&&(EV(function(e){return`Dropping day from datetime ${e$(e)} as day cannot be combined with other units.`}(e)),delete(e=fU(e)).day),void 0!==e.year?n.push(e.year):n.push(2012),void 0!==e.month){const r=t?function(e){if(ZU(e)&&(e=+e),_l(e))return e-1;{const t=e.toLowerCase(),n=MV.indexOf(t);if(-1!==n)return n;const r=t.substr(0,3),i=SV.indexOf(r);if(-1!==i)return i;throw new Error(bV("month",e))}}(e.month):e.month;n.push(r)}else if(void 0!==e.quarter){const r=t?function(e){if(ZU(e)&&(e=+e),_l(e))return e>4&&EV(bV("quarter",e)),e-1;throw new Error(bV("quarter",e))}(e.quarter):e.quarter;n.push(_l(r)?3*r:`${r}*3`)}else n.push(0);if(void 0!==e.date)n.push(e.date);else if(void 0!==e.day){const r=t?function(e){if(ZU(e)&&(e=+e),_l(e))return e%7;{const t=e.toLowerCase(),n=CV.indexOf(t);if(-1!==n)return n;const r=t.substr(0,3),i=OV.indexOf(r);if(-1!==i)return i;throw new Error(bV("day",e))}}(e.day):e.day;n.push(_l(r)?r+1:`${r}+1`)}else n.push(1);for(const t of["hours","minutes","seconds","milliseconds"]){const r=e[t];n.push(void 0===r?0:r)}return n}function NV(e){const t=RV(e,!0).join(", ");return e.utc?`utc(${t})`:`datetime(${t})`}const LV={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},DV=CU(LV);function PV(e){return Ms(e)?e.binned:IV(e)}function IV(e){return e&&e.startsWith("binned")}function FV(e){return e.startsWith("utc")}const zV={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function jV(e){return DV.filter((t=>UV(e,t)))}function BV(e){const t=jV(e);return t[t.length-1]}function UV(e,t){const n=e.indexOf(t);return!(n<0)&&(!(n>0&&"seconds"===t&&"i"===e.charAt(n-1))&&(!(e.length>n+3&&"day"===t&&"o"===e.charAt(n+3))&&!(n>0&&"year"===t&&"f"===e.charAt(n-1))))}function $V(e,t,{end:n}={end:!1}){const r=FU(t),i=FV(e)?"utc":"";let a;const o={};for(const t of DV)UV(e,t)&&(o[t]="quarter"===(s=t)?`(${i}quarter(${r})-1)`:`${i}${s}(${r})`,a=t);var s;return n&&(o[a]+="+1"),function(e){const t=RV(e,!1).join(", ");return e.utc?`utc(${t})`:`datetime(${t})`}(o)}function qV(e){if(!e)return;return`timeUnitSpecifier(${e$(jV(e))}, ${e$(zV)})`}function HV(e){if(!e)return;let t;return Al(e)?t=IV(e)?{unit:e.substring(6),binned:!0}:{unit:e}:Ms(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),FV(t.unit)&&(t.utc=!0,t.unit=function(e){return e.substring(3)}(t.unit)),t}function VV(e,t=e=>e){const n=HV(e),r=BV(n.unit);if(r&&"day"!==r){const e={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:i,part:a}=GV(r,n.step);return`${t(NV({...e,[a]:+e[a]+i}))} - ${t(NV(e))}`}}const WV={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function GV(e,t=1){if(function(e){return dl(WV,e)}(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:3*t};case"week":return{part:"date",step:7*t}}}function YV(e){return!!e?.field&&void 0!==e.equal}function XV(e){return!!e?.field&&void 0!==e.lt}function KV(e){return!!e?.field&&void 0!==e.lte}function ZV(e){return!!e?.field&&void 0!==e.gt}function JV(e){return!!e?.field&&void 0!==e.gte}function QV(e){if(e?.field){if(Ts(e.range)&&2===e.range.length)return!0;if(wH(e.range))return!0}return!1}function eW(e){return!!e?.field&&(Ts(e.oneOf)||Ts(e.in))}function tW(e){return eW(e)||YV(e)||QV(e)||XV(e)||ZV(e)||KV(e)||JV(e)}function nW(e,t){return zY(e,{timeUnit:t,wrapTime:!0})}function rW(e,t=!0){const{field:n}=e,r=HV(e.timeUnit),{unit:i,binned:a}=r||{},o=_Y(e,{expr:"datum"}),s=i?`time(${a?o:$V(i,n)})`:o;if(YV(e))return`${s}===${nW(e.equal,i)}`;if(XV(e)){return`${s}<${nW(e.lt,i)}`}if(ZV(e)){return`${s}>${nW(e.gt,i)}`}if(KV(e)){return`${s}<=${nW(e.lte,i)}`}if(JV(e)){return`${s}>=${nW(e.gte,i)}`}if(eW(e))return`indexof([${function(e,t){return e.map((e=>nW(e,t)))}(e.oneOf,i).join(",")}], ${s}) !== -1`;if(function(e){return!!e?.field&&void 0!==e.valid}(e))return iW(s,e.valid);if(QV(e)){const{range:n}=bH(e),r=wH(n)?{signal:`${n.signal}[0]`}:n[0],a=wH(n)?{signal:`${n.signal}[1]`}:n[1];if(null!==r&&null!==a&&t)return"inrange("+s+", ["+nW(r,i)+", "+nW(a,i)+"])";const o=[];return null!==r&&o.push(`${s} >= ${nW(r,i)}`),null!==a&&o.push(`${s} <= ${nW(a,i)}`),o.length>0?o.join(" && "):"true"}throw new Error(`Invalid field predicate: ${e$(e)}`)}function iW(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function aW(e){return tW(e)&&e.timeUnit?{...e,timeUnit:HV(e.timeUnit)}:e}const oW={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function sW(e){return"quantitative"===e||"temporal"===e}function lW(e){return"ordinal"===e||"nominal"===e}const cW=oW.quantitative,uW=oW.ordinal,fW=oW.temporal,dW=oW.nominal,hW=oW.geojson;CU(oW);const pW="linear",mW="log",gW="pow",vW="sqrt",yW="time",bW="utc",xW="point",_W="band",wW={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};CU(wW);function AW(e,t){const n=wW[e],r=wW[t];return n===r||"ordinal-position"===n&&"time"===r||"ordinal-position"===r&&"time"===n}const kW={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function EW(e){return kW[e]}const TW=new Set(["linear","log","pow","sqrt","symlog"]),MW=new Set([...TW,"time","utc"]);function SW(e){return TW.has(e)}const CW=new Set(["quantile","quantize","threshold"]),OW=new Set([...MW,...CW,"sequential","identity"]),RW=new Set(["ordinal","bin-ordinal","point","band"]);new Set(["time","utc"]);function NW(e){return RW.has(e)}function LW(e){return OW.has(e)}function DW(e){return MW.has(e)}function PW(e){return CW.has(e)}function IW(e){return t$(e,"param")}const FW={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:zW,domain:jW,range:BW,rangeMax:UW,rangeMin:$W,scheme:qW,...HW}=(CU(FW),FW),VW=CU(HW);function WW(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return DW(e)||"band"===e||"point"===e;case"padding":case"rangeMin":case"rangeMax":return DW(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return"band"===e;case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return DW(e);case"nice":return DW(e)||"quantize"===e||"threshold"===e;case"exponent":return"pow"===e;case"base":return"log"===e;case"constant":return"symlog"===e;case"zero":return LW(e)&&!vU(["log","time","utc","threshold","quantile"],e)}}function GW(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return V$(e)?void 0:`Cannot use the scale property "${t}" with non-color channel.`;case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}const YW={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},XW=YW.arc,KW=YW.area,ZW=YW.bar,JW=YW.image,QW=YW.line,eG=YW.point,tG=YW.rect,nG=YW.rule,rG=YW.text,iG=YW.tick,aG=YW.trail,oG=YW.circle,sG=YW.square,lG=YW.geoshape;function cG(e){return["line","area","trail"].includes(e)}function uG(e){return["rect","bar","image","arc","tick"].includes(e)}const fG=new Set(CU(YW));function dG(e){return t$(e,"type")}const hG=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit","fill","fillOpacity"],pG=CU({color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1}),mG=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],gG={area:["line","point"],bar:mG,rect:mG,line:["point"],tick:["bandSize","thickness",...mG]},vG=CU({mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1});function yG(e){return t$(e,"band")}const bG={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},xG={binSpacing:0,continuousBandSize:5,minBandSize:.25,timeUnitBandPosition:.5},_G={...xG,binSpacing:1},wG={...xG,thickness:1};function AG(e,{isPath:t}){return void 0===e||"break-paths-show-path-domains"===e?t?"break-paths-show-domains":"filter":null===e?"show":e}function kG({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){if(!r||!LW(r)||i)return"always-valid";const a=AG(FH("invalid",e,t),{isPath:cG(e.type)}),o=t.scale?.invalid?.[n];return void 0!==o?"show":a}function EG({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,a=`peek(${r})`,o=t.domainHasZero();if("definitely"===o)return{scale:e,value:0};if("maybe"===o){return{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${"zeroOrMin"===n?i:a})`}}return{signal:`scale('${e}', ${"zeroOrMin"===n?i:a})`}}function TG({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:a}){const o=n?.get("type"),s=OY(t),l=kG({scaleChannel:e,markDef:i,config:a,scaleType:o,isCountAggregate:cH(s?.aggregate)});if(s&&"show"===l){const t=a.scale.invalid?.[e]??"zero-or-min";return{test:iW(_Y(s,{expr:"datum"}),!1),...MG(t,n,r)}}}function MG(e,t,n){if(Ms(r=e)&&"value"in r){const{value:t}=e;return wH(t)?{signal:t.signal}:{value:t}}var r;return EG({scale:t,scaleName:n,mode:"zeroOrMin"})}function SG(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:a,config:o}=e,s=sq(t),l=RG(e),c=TG({scaleChannel:s,channelDef:n,scale:i,scaleName:a,markDef:r,config:o});return void 0!==c?[c,l]:l}function CG(e,t,n,r){const i={};if(t&&(i.scale=t),cY(e)){const{datum:t}=e;TV(t)?i.signal=NV(t):wH(t)?i.signal=t.signal:yH(t)?i.signal=t.expr:i.value=t}else i.field=_Y(e,n);if(r){const{offset:e,band:t}=r;e&&(i.offset=e),t&&(i.band=t)}return i}function OG({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:a="end",bandPosition:o=.5}){const s=!wH(o)&&0<o&&o<1?"datum":void 0,l=_Y(t,{expr:s,suffix:i}),c=void 0!==n?_Y(n,{expr:s}):_Y(t,{suffix:a,expr:s}),u={};if(0===o||1===o){u.scale=e;const t=0===o?l:c;u.field=t}else{const t=wH(o)?`(1-${o.signal}) * ${l} + ${o.signal} * ${c}`:`${1-o} * ${l} + ${o} * ${c}`;u.signal=`scale("${e}", ${t})`}return r&&(u.offset=r),u}function RG({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:a,scale:o,stack:s,offset:l,defaultRef:c,bandPosition:u}){if(t){if(hY(t)){const c=o?.get("type");if(pY(t)){u??(u=eY({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:o,timeUnit:f,type:d}=t;if(hH(o)||u&&f&&d===fW)return s?.impute?CG(t,a,{binSuffix:"mid"},{offset:l}):u&&!NW(c)?OG({scaleName:a,fieldOrDatumDef:t,bandPosition:u,offset:l}):CG(t,a,BY(t,e)?{binSuffix:"range"}:{},{offset:l});if(pH(o)){if(sY(n))return OG({scaleName:a,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:u,offset:l});EV(_V(e===a$?s$:l$))}}return CG(t,a,NW(c)?{binSuffix:"range"}:{},{offset:l,band:"band"===c?u??t.bandPosition??.5:void 0})}if(mY(t)){const n=l?{offset:l}:{};return{...NG(e,t.value),...n}}}return Qs(c)&&(c=c()),c?{...c,...l?{offset:l}:{}}:c}function NG(e,t){return vU(["x","x2"],e)&&"width"===t?{field:{group:"width"}}:vU(["y","y2"],e)&&"height"===t?{field:{group:"height"}}:RH(t)}function LG(e){return e&&"number"!==e&&"time"!==e}function DG(e,t,n){return`${e}(${t}${n?`, ${e$(n)}`:""})`}function PG({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:a}){if(LG(n))return FG({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:a});const o=IG(e,r,i),s=lY(e);if(void 0===t&&void 0===n&&a.customFormatTypes){if("quantitative"===s){if(i&&a.normalizedNumberFormatType)return FG({fieldOrDatumDef:e,format:a.normalizedNumberFormat,formatType:a.normalizedNumberFormatType,expr:r,config:a});if(a.numberFormatType)return FG({fieldOrDatumDef:e,format:a.numberFormat,formatType:a.numberFormatType,expr:r,config:a})}if("temporal"===s&&a.timeFormatType&&sY(e)&&void 0===e.timeUnit)return FG({fieldOrDatumDef:e,format:a.timeFormat,formatType:a.timeFormatType,expr:r,config:a})}if(FY(e)){const n=function({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:a}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:`${a?"utc":"time"}Format(${e}, '${n=Al(n)?n:i}')`:function(e,t,n){if(!e)return;const r=qV(e);return`${n||FV(e)?"utc":"time"}Format(${t}, ${r})`}(t,e,a)}({field:o,timeUnit:sY(e)?HV(e.timeUnit)?.unit:void 0,format:t,formatType:a.timeFormatType,rawTimeFormat:a.timeFormat,isUTCScale:gY(e)&&e.scale?.type===bW});return n?{signal:n}:void 0}if(t=BG({type:s,specifiedFormat:t,config:a,normalizeStack:i}),sY(e)&&hH(e.bin)){return{signal:qG(o,_Y(e,{expr:r,binSuffix:"end"}),t,n,a)}}return t||"quantitative"===lY(e)?{signal:`${UG(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function IG(e,t,n){return sY(e)?n?`${_Y(e,{expr:t,suffix:"end"})}-${_Y(e,{expr:t,suffix:"start"})}`:_Y(e,{expr:t}):function(e){const{datum:t}=e;return TV(t)?NV(t):`${e$(t)}`}(e)}function FG({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:a,field:o}){if(o??(o=IG(e,r,i)),"datum.value"!==o&&sY(e)&&hH(e.bin)){return{signal:qG(o,_Y(e,{expr:r,binSuffix:"end"}),t,n,a)}}return{signal:DG(n,o,t)}}function zG(e,t,n,r,i,a){if(!Al(r)||!LG(r)){if(void 0===n&&void 0===r&&i.customFormatTypes&&"quantitative"===lY(e)){if(i.normalizedNumberFormatType&&vY(e)&&"normalize"===e.stack)return;if(i.numberFormatType)return}if(vY(e)&&"normalize"===e.stack&&i.normalizedNumberFormat)return BG({type:"quantitative",config:i,normalizeStack:!0});if(FY(e)){const t=sY(e)?HV(e.timeUnit)?.unit:void 0;if(void 0===t&&i.customFormatTypes&&i.timeFormatType)return;return function({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){if(e)return e;if(t)return{signal:qV(t)};return r?void 0:n.timeFormat}({specifiedFormat:n,timeUnit:t,config:i,omitTimeFormatConfig:a})}return BG({type:t,specifiedFormat:n,config:i})}}function jG(e,t,n){return e&&(wH(e)||"number"===e||"time"===e)?e:FY(t)&&"time"!==n&&"utc"!==n?sY(t)&&HV(t?.timeUnit)?.utc?"utc":"time":void 0}function BG({type:e,specifiedFormat:t,config:n,normalizeStack:r}){return Al(t)?t:e===cW?r?n.normalizedNumberFormat:n.numberFormat:void 0}function UG(e,t){return`format(${e}, "${t||""}")`}function $G(e,t,n,r){return LG(n)?DG(n,e,t):UG(e,(Al(t)?t:void 0)??r.numberFormat)}function qG(e,t,n,r,i){if(void 0===n&&void 0===r&&i.customFormatTypes&&i.numberFormatType)return qG(e,t,i.numberFormat,i.numberFormatType,i);const a=$G(e,n,r,i),o=$G(t,n,r,i);return`${iW(e,!1)} ? "null" : ${a} + "  " + ${o}`}const HG="min",VG={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function WG(e){return dl(VG,e)}function GG(e){return e&&("count"===e.op||t$(e,"field"))}function YG(e){return e&&Ts(e)}function XG(e){return t$(e,"row")||t$(e,"column")}function KG(e){return t$(e,"header")}function ZG(e){return t$(e,"facet")}function JG(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function QG(e){return t$(e,"sort")}function eY({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(hY(e)&&void 0!==e.bandPosition)return e.bandPosition;if(sY(e)){const{timeUnit:i,bin:a}=e;if(i&&!t)return zH("timeUnitBandPosition",n,r);if(hH(a))return.5}}function tY({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:a,useVlSizeChannel:o}){const s=uq(e),l=FH(o?"size":s,r,i,{vgChannel:s});if(void 0!==l)return l;if(sY(t)){const{timeUnit:e,bin:o}=t;if(e&&!n)return{band:zH("timeUnitBandSize",r,i)};if(hH(o)&&!NW(a))return{band:1}}return uG(r.type)?a?NW(a)?i[r.type]?.discreteBandSize||{band:1}:i[r.type]?.continuousBandSize:i[r.type]?.discreteBandSize:void 0}function nY(e,t,n,r){return!!(hH(e.bin)||e.timeUnit&&pY(e)&&"temporal"===e.type)&&void 0!==eY({fieldDef:e,fieldDef2:t,markDef:n,config:r})}function rY(e){return t$(e,"sort")&&!t$(e,"field")}function iY(e){return t$(e,"condition")}function aY(e){const t=e?.condition;return!!t&&!Ts(t)&&sY(t)}function oY(e){const t=e?.condition;return!!t&&!Ts(t)&&hY(t)}function sY(e){return t$(e,"field")||"count"===e?.aggregate}function lY(e){return e?.type}function cY(e){return t$(e,"datum")}function uY(e){return pY(e)&&!wY(e)||dY(e)}function fY(e){return pY(e)&&"quantitative"===e.type&&!e.bin||dY(e)}function dY(e){return cY(e)&&_l(e.datum)}function hY(e){return sY(e)||cY(e)}function pY(e){return e&&(t$(e,"field")||"count"===e.aggregate)&&t$(e,"type")}function mY(e){return t$(e,"value")}function gY(e){return t$(e,"scale")||t$(e,"sort")}function vY(e){return t$(e,"axis")||t$(e,"stack")||t$(e,"impute")}function yY(e){return t$(e,"legend")}function bY(e){return t$(e,"format")||t$(e,"formatType")}function xY(e){return pU(e,["legend","axis","header","scale"])}function _Y(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,a="";if(function(e){return"count"===e.aggregate}(e))n=YU("count");else{let r;if(!t.nofn)if(function(e){return t$(e,"op")}(e))r=e.op;else{const{bin:o,aggregate:s,timeUnit:l}=e;hH(o)?(r=dH(o),i=(t.binSuffix??"")+(t.suffix??"")):s?oH(s)?(a=`["${n}"]`,n=`argmax_${s.argmax}`):aH(s)?(a=`["${n}"]`,n=`argmin_${s.argmin}`):r=String(s):l&&!PV(l)&&(r=function(e){const{utc:t,...n}=HV(e);return n.unit?(t?"utc":"")+CU(n).map((e=>LU(`${"unit"===e?"":`_${e}_`}${n[e]}`))).join(""):(t?"utc":"")+"timeunit"+CU(n).map((e=>LU(`_${e}_${n[e]}`))).join("")}(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}r&&(n=n?`${r}_${n}`:r)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?$U(n):t.expr?zU(n,t.expr)+a:BU(n)+a}function wY(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return sY(e)&&!!e.bin;case"temporal":return!1}throw new Error(oV(e.type))}const AY=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return function(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(oH(t))return`${i} for argmax(${t.argmax})`;if(aH(t))return`${i} for argmin(${t.argmin})`;const a=r&&!PV(r)?HV(r):void 0,o=t||a?.unit||a?.maxbins&&"timeunit"||hH(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}(e);default:return function(e,t){const{field:n,bin:r,timeUnit:i,aggregate:a}=e;if("count"===a)return t.countTitle;if(hH(r))return`${n} (binned)`;if(i&&!PV(i)){const e=HV(i)?.unit;if(e)return`${n} (${jV(e).join("-")})`}else if(a)return oH(a)?`${n} for max ${a.argmax}`:aH(a)?`${n} for min ${a.argmin}`:`${IU(a)} of ${n}`;return n}(e,t)}};let kY=AY;function EY(e){kY=e}function TY(e,t,{allowDisabling:n,includeDefault:r=!0}){const i=MY(e)?.title;if(!sY(e))return i??e.title;const a=e,o=r?SY(a,t):void 0;return n?HU(i,a.title,o):i??a.title??o}function MY(e){return vY(e)&&e.axis?e.axis:yY(e)&&e.legend?e.legend:KG(e)&&e.header?e.header:void 0}function SY(e,t){return kY(e,t)}function CY(e){if(bY(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}{const t=MY(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function OY(e){return sY(e)?e:aY(e)?e.condition:void 0}function RY(e){return hY(e)?e:oY(e)?e.condition:void 0}function NY(e,t,n,r={}){if(Al(e)||_l(e)||yl(e)){return EV(function(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${e$(n)}}.`}(t,Al(e)?"string":_l(e)?"number":"boolean",e)),{value:e}}return hY(e)?LY(e,t,n,r):oY(e)?{...e,condition:LY(e.condition,t,n,r)}:e}function LY(e,t,n,r){if(bY(e)){const{format:i,formatType:a,...o}=e;if(LG(a)&&!n.customFormatTypes)return EV(iV(t)),LY(o,t,n,r)}else{const i=vY(e)?"axis":yY(e)?"legend":KG(e)?"header":null;if(i&&e[i]){const{format:a,formatType:o,...s}=e[i];if(LG(o)&&!n.customFormatTypes)return EV(iV(t)),LY({...e,[i]:s},t,n,r)}}return sY(e)?DY(e,t,r):function(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=_l(n)?"quantitative":Al(n)?"nominal":TV(n)?"temporal":void 0,{...e,type:t}}(e)}function DY(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:a,field:o}=e,s={...e};if(n||!r||sH(r)||oH(r)||aH(r)||(EV(function(e){return`Invalid aggregation operator "${e}".`}(r)),delete s.aggregate),i&&(s.timeUnit=HV(i)),o&&(s.field=`${o}`),hH(a)&&(s.bin=PY(a,t)),pH(a)&&!Lq(t)&&EV(function(e){return`Channel ${e} should not be used with "binned" bin.`}(t)),pY(s)){const{type:e}=s,t=function(e){if(e)switch(e=e.toLowerCase()){case"q":case cW:return"quantitative";case"t":case fW:return"temporal";case"o":case uW:return"ordinal";case"n":case dW:return"nominal";case hW:return"geojson"}}(e);e!==t&&(s.type=t),"quantitative"!==e&&cH(r)&&(EV(function(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}(e,r)),s.type="quantitative")}else if(!oq(t)){const e=function(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(QG(e)&&Ts(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!oH(n)&&!aH(n))return"quantitative";if(gY(e)&&e.scale?.type)switch(wW[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}(s,t);s.type=e}if(pY(s)){const{compatible:e,warning:n}=function(e,t){const n=e.type;if("geojson"===n&&"shape"!==t)return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case n$:case r$:case i$:return wY(e)?IY:{compatible:!1,warning:uV(t)};case a$:case o$:case c$:case u$:case b$:case x$:case _$:case O$:case N$:case L$:case D$:case P$:case I$:case k$:case h$:case f$:case F$:return IY;case g$:case y$:case m$:case v$:return n!==cW?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:IY;case E$:case T$:case M$:case S$:case A$:case p$:case d$:case s$:case l$:return"nominal"!==n||e.sort?IY:{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`};case w$:case C$:return wY(e)||function(e){return gY(e)&&PW(e.scale?.type)}(e)?IY:{compatible:!1,warning:fV(t)};case R$:return"nominal"!==e.type||"sort"in e?IY:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}}(s,t)||{};!1===e&&EV(n)}if(QG(s)&&Al(s.sort)){const{sort:e}=s;if(WG(e))return{...s,sort:{encoding:e}};const t=e.substring(1);if("-"===e.charAt(0)&&WG(t))return{...s,sort:{encoding:t,order:"descending"}}}if(KG(s)){const{header:e}=s;if(e){const{orient:t,...n}=e;if(t)return{...s,header:{...n,labelOrient:e.labelOrient||t,titleOrient:e.titleOrient||t}}}}return s}function PY(e,t){return yl(e)?{maxbins:vH(t)}:"binned"===e?{binned:!0}:e.maxbins||e.step?e:{...e,maxbins:vH(t)}}const IY={compatible:!0};function FY(e){const{formatType:t}=CY(e);return"time"===t||!t&&function(e){return e&&("temporal"===e.type||sY(e)&&!!e.timeUnit)}(e)}function zY(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){const a=t&&HV(t)?.unit;let o,s=a||"temporal"===n;return yH(e)?o=e.expr:wH(e)?o=e.signal:TV(e)?(s=!0,o=NV(e)):(Al(e)||_l(e))&&s&&(o=`datetime(${e$(e)})`,function(e){return dl(LV,e)}(a)&&(_l(e)&&e<1e4||Al(e)&&isNaN(Date.parse(e)))&&(o=NV({[a]:e}))),o?r&&s?`time(${o})`:o:i?void 0:e$(e)}function jY(e,t){const{type:n}=e;return t.map((t=>{const r=zY(t,{timeUnit:sY(e)&&!PV(e.timeUnit)?e.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return void 0!==r?{signal:r}:t}))}function BY(e,t){return hH(e.bin)?Zq(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const UY={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function $Y(e){return e?.condition}const qY=["domain","grid","labels","ticks","title"],HY={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},VY={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},WY={...VY,style:1,labelExpr:1,encoding:1};function GY(e){return dl(WY,e)}CU(WY);const YY=CU({axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1});function XY(e){return t$(e,"mark")}class KY{constructor(e,t){this.name=e,this.run=t}hasMatchingType(e){return!!XY(e)&&(dG(t=e.mark)?t.type:t)===this.name;var t}}function ZY(e,t){const n=e&&e[t];return!!n&&(Ts(n)?yU(n,(e=>!!e.field)):sY(n)||aY(n))}function JY(e,t){const n=e&&e[t];return!!n&&(Ts(n)?yU(n,(e=>!!e.field)):sY(n)||cY(n)||oY(n))}function QY(e,t){if(Lq(t)){const n=e[t];if((sY(n)||cY(n))&&(lW(n.type)||sY(n)&&n.timeUnit)){return JY(e,dq(t))}}return!1}function eX(e){return yU(X$,(t=>{if(ZY(e,t)){const n=e[t];if(Ts(n))return yU(n,(e=>!!e.aggregate));{const e=OY(n);return e&&!!e.aggregate}}return!1}))}function tX(e,t){const n=[],r=[],i=[],a=[],o={};return iX(e,((s,l)=>{if(sY(s)){const{field:c,aggregate:u,bin:f,timeUnit:d,...h}=s;if(u||d||f){const e=MY(s),p=e?.title;let m=_Y(s,{forAs:!0});const g={...p?[]:{title:TY(s,t,{allowDisabling:!0})},...h,field:m};if(u){let e;if(oH(u)?(e="argmax",m=_Y({op:"argmax",field:u.argmax},{forAs:!0}),g.field=`${m}.${c}`):aH(u)?(e="argmin",m=_Y({op:"argmin",field:u.argmin},{forAs:!0}),g.field=`${m}.${c}`):"boxplot"!==u&&"errorbar"!==u&&"errorband"!==u&&(e=u),e){const t={op:e,as:m};c&&(t.field=c),a.push(t)}}else if(n.push(m),pY(s)&&hH(f)){if(r.push({bin:f,field:c,as:m}),n.push(_Y(s,{binSuffix:"end"})),BY(s,l)&&n.push(_Y(s,{binSuffix:"range"})),Lq(l)){const e={field:`${m}_end`};o[`${l}2`]=e}g.bin="binned",oq(l)||(g.type=cW)}else if(d&&!PV(d)){i.push({timeUnit:d,field:c,as:m});const e=pY(s)&&s.type!==fW&&"time";e&&(l===O$||l===D$?g.formatType=e:!function(e){return dl(Cq,e)}(l)?Lq(l)&&(g.axis={formatType:e,...g.axis}):g.legend={formatType:e,...g.legend})}o[l]=g}else n.push(c),o[l]=e[l]}else o[l]=e[l]})),{bins:r,timeUnits:i,aggregate:a,groupby:n,encoding:o}}function nX(e,t,n){const r=Jq(t,n);if(!r)return!1;if("binned"===r){const n=e[t===s$?a$:o$];return!!(sY(n)&&sY(e[t])&&pH(n.bin))}return!0}function rX(e,t){const n={};for(const r of CU(e)){const i=NY(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function iX(e,t,n){if(e)for(const r of CU(e)){const i=e[r];if(Ts(i))for(const e of i)t.call(n,e,r);else t.call(n,i,r)}}function aX(e,t){return CU(t).reduce(((n,r)=>{switch(r){case a$:case o$:case P$:case F$:case I$:case s$:case l$:case c$:case u$:case h$:case p$:case f$:case d$:case m$:case g$:case v$:case y$:case O$:case w$:case k$:case D$:return n;case R$:if("line"===e||"trail"===e)return n;case N$:case L$:{const e=t[r];if(Ts(e)||sY(e))for(const t of Zs(e))t.aggregate||n.push(_Y(t,{}));return n}case A$:if("trail"===e)return n;case b$:case x$:case _$:case E$:case T$:case M$:case C$:case S$:{const e=OY(t[r]);return e&&!e.aggregate&&n.push(_Y(e,{})),n}}}),[])}function oX(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map((({fieldPrefix:e,titlePrefix:n})=>{const i=r?` of ${sX(t)}`:"";return{field:e+t.field,type:t.type,title:wH(n)?{signal:`${n}"${escape(i)}"`}:n+i}})),a=function(e){const t=[];for(const n of CU(e))if(ZY(e,n)){const r=Zs(e[n]);for(const e of r)sY(e)?t.push(e):aY(e)&&t.push(e.condition)}return t}(n).map(xY);return{tooltip:[...i,...wU(a,mU)]}}function sX(e){const{title:t,field:n}=e;return HU(t,n)}function lX(e,t,n,r,i){const{scale:a,axis:o}=n;return({partName:s,mark:l,positionPrefix:c,endPositionPrefix:u,extraEncoding:f={}})=>{const d=sX(n);return cX(e,s,i,{mark:l,encoding:{[t]:{field:`${c}_${n.field}`,type:n.type,...void 0!==d?{title:d}:{},...void 0!==a?{scale:a}:{},...void 0!==o?{axis:o}:{}},...Al(u)?{[`${t}2`]:{field:`${u}_${n.field}`}}:{},...r,...f}})}}function cX(e,t,n,r){const{clip:i,color:a,opacity:o}=e,s=e.type;return e[t]||void 0===e[t]&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...a?{color:a}:{},...o?{opacity:o}:{},...dG(r.mark)?r.mark:{type:r.mark},style:`${s}-${String(t)}`,...yl(e[t])?{}:e[t]}}]:[]}function uX(e,t,n){const{encoding:r}=e,i="vertical"===t?"y":"x",a=r[i],o=r[`${i}2`],s=r[`${i}Error`],l=r[`${i}Error2`];return{continuousAxisChannelDef:fX(a,n),continuousAxisChannelDef2:fX(o,n),continuousAxisChannelDefError:fX(s,n),continuousAxisChannelDefError2:fX(l,n),continuousAxis:i}}function fX(e,t){if(e?.aggregate){const{aggregate:n,...r}=e;return n!==t&&EV(function(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}(n,t)),r}return e}function dX(e,t){const{mark:n,encoding:r}=e,{x:i,y:a}=r;if(dG(n)&&n.orient)return n.orient;if(uY(i)){if(uY(a)){const e=sY(i)&&i.aggregate,n=sY(a)&&a.aggregate;if(e||n!==t){if(n||e!==t){if(e===t&&n===t)throw new Error("Both x and y cannot have aggregate");return FY(a)&&!FY(i)?"horizontal":"vertical"}return"horizontal"}return"vertical"}return"horizontal"}if(uY(a))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}const hX="boxplot",pX=new KY(hX,gX);function mX(e){return _l(e)?"tukey":e}function gX(e,{config:t}){e={...e,encoding:rX(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:a,...o}=e,s=dG(n)?n:{type:n};i&&EV(QH("boxplot"));const l=s.extent??t.boxplot.extent,c=FH("size",s,t),u=s.invalid,f=mX(l),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:v,aggregate:y,encodingWithoutContinuousAxis:b,ticksOrient:x,boxOrient:_,customTooltipWithoutAggregatedField:w}=function(e,t,n){const r=dX(e,hX),{continuousAxisChannelDef:i,continuousAxis:a}=uX(e,r,hX),o=i.field,s=$U(o),l=mX(t),c=[...vX(o),{op:"median",field:o,as:`mid_box_${s}`},{op:"min",field:o,as:("min-max"===l?"lower_whisker_":"min_")+s},{op:"max",field:o,as:("min-max"===l?"upper_whisker_":"max_")+s}],u="min-max"===l||"tukey"===l?[]:[{calculate:`datum["upper_box_${s}"] - datum["lower_box_${s}"]`,as:`iqr_${s}`},{calculate:`min(datum["upper_box_${s}"] + datum["iqr_${s}"] * ${t}, datum["max_${s}"])`,as:`upper_whisker_${s}`},{calculate:`max(datum["lower_box_${s}"] - datum["iqr_${s}"] * ${t}, datum["min_${s}"])`,as:`lower_whisker_${s}`}],{[a]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=function(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Ts(t)){for(const e of t)e.aggregate?(r||(r=[]),r.push(e)):(i||(i=[]),i.push(e));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Ts(i)&&1===i.length&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}(d),{bins:m,timeUnits:g,aggregate:v,groupby:y,encoding:b}=tX(p,n),x="vertical"===r?"horizontal":"vertical",_=r,w=[...m,...g,{aggregate:[...v,...c],groupby:y},...u];return{bins:m,timeUnits:g,transform:w,groupby:y,aggregate:v,continuousAxisChannelDef:i,continuousAxis:a,encodingWithoutContinuousAxis:b,ticksOrient:x,boxOrient:_,customTooltipWithoutAggregatedField:h}}(e,l,t),A=$U(m.field),{color:k,size:E,...T}=b,M=e=>lX(s,g,m,e,t.boxplot),S=M(T),C=M(b),O=(Ms(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",R=M({...T,...E?{size:E}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...k||{value:O}}}}),N=oX([{fieldPrefix:"min-max"===f?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===f?"lower_whisker_":"min_",titlePrefix:"Min"}],m,b),L={type:"tick",color:"black",opacity:1,orient:x,invalid:u,aria:!1},D="min-max"===f?N:oX([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,b),P=[...S({partName:"rule",mark:{type:"rule",invalid:u,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:D}),...S({partName:"rule",mark:{type:"rule",invalid:u,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:D}),...S({partName:"ticks",mark:L,positionPrefix:"lower_whisker",extraEncoding:D}),...S({partName:"ticks",mark:L,positionPrefix:"upper_whisker",extraEncoding:D})],I=[..."tukey"!==f?P:[],...C({partName:"box",mark:{type:"bar",...c?{size:c}:{},orient:_,invalid:u,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:N}),...R({partName:"median",mark:{type:"tick",invalid:u,...Ms(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...c?{size:c}:{},orient:x,aria:!1},positionPrefix:"mid_box",extraEncoding:N})];if("min-max"===f)return{...o,transform:(o.transform??[]).concat(p),layer:I};const F=`datum["lower_box_${m.field}"]`,z=`datum["upper_box_${m.field}"]`,j=`(${z} - ${F})`,B=`${F} - ${l} * ${j}`,U=`${z} + ${l} * ${j}`,$=`datum["${m.field}"]`,q={joinaggregate:vX(m.field),groupby:v},H={transform:[{filter:`(${B} <= ${$}) && (${$} <= ${U})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${A}`},{op:"max",field:m.field,as:`upper_whisker_${A}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${A}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${A}`},...y],groupby:v}],layer:P},{tooltip:V,...W}=T,{scale:G,axis:Y}=m,X=sX(m),K=pU(Y,["title"]),Z=cX(s,"outliers",t.boxplot,{transform:[{filter:`(${$} < ${B}) || (${$} > ${U})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...void 0!==X?{title:X}:{},...void 0!==G?{scale:G}:{},...SU(K)?{}:{axis:K}},...W,...k?{color:k}:{},...w?{tooltip:w}:{}}})[0];let J;const Q=[...d,...h,q];return Z?J={transform:Q,layer:[Z,H]}:(J=H,J.transform.unshift(...Q)),{...o,layer:[J,{transform:p,layer:I}]}}function vX(e){const t=$U(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}const yX="errorbar",bX=new KY(yX,xX);function xX(e,{config:t}){e={...e,encoding:rX(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:a,ticksOrient:o,markDef:s,outerSpec:l,tooltipEncoding:c}=wX(e,yX,t);delete a.size;const u=lX(s,i,r,a,t.errorbar),f=s.thickness,d=s.size,h={type:"tick",orient:o,aria:!1,...void 0!==f?{thickness:f}:{},...void 0!==d?{size:d}:{}},p=[...u({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:c}),...u({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:c}),...u({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...void 0!==f?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c})];return{...l,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function _X(e,t){const{encoding:n}=e;if(function(e){return(hY(e.x)||hY(e.y))&&!hY(e.x2)&&!hY(e.y2)&&!hY(e.xError)&&!hY(e.xError2)&&!hY(e.yError)&&!hY(e.yError2)}(n))return{orient:dX(e,t),inputType:"raw"};const r=function(e){return hY(e.x2)||hY(e.y2)}(n),i=function(e){return hY(e.xError)||hY(e.xError2)||hY(e.yError)||hY(e.yError2)}(n),a=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const e=n.x2,r=n.y2;if(hY(e)&&hY(r))throw new Error(`${t} cannot have both x2 and y2`);if(hY(e)){if(uY(a))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}if(hY(r)){if(uY(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}{const e=n.xError,r=n.xError2,i=n.yError,s=n.yError2;if(hY(r)&&!hY(e))throw new Error(`${t} cannot have xError2 without xError`);if(hY(s)&&!hY(i))throw new Error(`${t} cannot have yError2 without yError`);if(hY(e)&&hY(i))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(hY(e)){if(uY(a))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(hY(i)){if(uY(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function wX(e,t,n){const{mark:r,encoding:i,params:a,projection:o,...s}=e,l=dG(r)?r:{type:r};a&&EV(QH(t));const{orient:c,inputType:u}=_X(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=uX(e,c,t),{errorBarSpecificAggregate:g,postAggregateCalculates:v,tooltipSummary:y,tooltipTitleWithFieldName:b}=function(e,t,n,r,i,a,o,s){let l=[],c=[];const u=t.field;let f,d=!1;if("raw"===a){const t=e.center?e.center:e.extent?"iqr"===e.extent?"median":"mean":s.errorbar.center,n=e.extent?e.extent:"mean"===t?"stderr":"iqr";if("median"===t!=("iqr"===n)&&EV(function(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}(t,n,o)),"stderr"===n||"stdev"===n)l=[{op:n,field:u,as:`extent_${u}`},{op:t,field:u,as:`center_${u}`}],c=[{calculate:`datum["center_${u}"] + datum["extent_${u}"]`,as:`upper_${u}`},{calculate:`datum["center_${u}"] - datum["extent_${u}"]`,as:`lower_${u}`}],f=[{fieldPrefix:"center_",titlePrefix:IU(t)},{fieldPrefix:"upper_",titlePrefix:AX(t,n,"+")},{fieldPrefix:"lower_",titlePrefix:AX(t,n,"-")}],d=!0;else{let e,t,r;"ci"===n?(e="mean",t="ci0",r="ci1"):(e="median",t="q1",r="q3"),l=[{op:t,field:u,as:`lower_${u}`},{op:r,field:u,as:`upper_${u}`},{op:e,field:u,as:`center_${u}`}],f=[{fieldPrefix:"upper_",titlePrefix:TY({field:u,aggregate:r,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:TY({field:u,aggregate:t,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:TY({field:u,aggregate:e,type:"quantitative"},s,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&EV(function(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}(e.center,e.extent)),"aggregated-upper-lower"===a?(f=[],c=[{calculate:`datum["${n.field}"]`,as:`upper_${u}`},{calculate:`datum["${u}"]`,as:`lower_${u}`}]):"aggregated-error"===a&&(f=[{fieldPrefix:"",titlePrefix:u}],c=[{calculate:`datum["${u}"] + datum["${r.field}"]`,as:`upper_${u}`}],i?c.push({calculate:`datum["${u}"] + datum["${i.field}"]`,as:`lower_${u}`}):c.push({calculate:`datum["${u}"] - datum["${r.field}"]`,as:`lower_${u}`}));for(const e of c)f.push({fieldPrefix:e.as.substring(0,6),titlePrefix:UU(UU(e.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:c,errorBarSpecificAggregate:l,tooltipSummary:f,tooltipTitleWithFieldName:d}}(l,f,d,h,p,u,t,n),{[m]:x,["x"===m?"x2":"y2"]:_,["x"===m?"xError":"yError"]:w,["x"===m?"xError2":"yError2"]:A,...k}=i,{bins:E,timeUnits:T,aggregate:M,groupby:S,encoding:C}=tX(k,n),O=[...M,...g],R="raw"!==u?[]:S,N=oX(y,f,C,b);return{transform:[...s.transform??[],...E,...T,...0===O.length?[]:[{aggregate:O,groupby:R}],...v],groupby:R,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:C,ticksOrient:"vertical"===c?"horizontal":"vertical",markDef:l,outerSpec:s,tooltipEncoding:N}}function AX(e,t,n){return`${IU(e)} ${n} ${t}`}const kX="errorband",EX=new KY(kX,TX);function TX(e,{config:t}){e={...e,encoding:rX(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:a,markDef:o,outerSpec:s,tooltipEncoding:l}=wX(e,kX,t),c=o,u=lX(c,i,r,a,t.errorband),f=void 0!==e.encoding.x&&void 0!==e.encoding.y;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...c.interpolate?{interpolate:c.interpolate}:{},...c.tension&&c.interpolate?{tension:c.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):c.interpolate?EV(xV("interpolate")):c.tension&&EV(xV("tension")),{...s,transform:n,layer:[...u({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...u({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:l}),...u({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:l})]}}const MX={};function SX(e,t,n){const r=new KY(e,t);MX[e]={normalizer:r,parts:n}}SX(hX,gX,["box","median","outliers","rule","ticks"]),SX(yX,xX,["ticks","rule"]),SX(kX,TX,["band","borders"]);const CX=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],OX={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},RX={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},NX=CU(OX),LX=CU(RX),DX=CU({header:1,headerRow:1,headerColumn:1,headerFacet:1}),PX=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],IX={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},FX=(CU(IX),"_vgsid_"),zX={point:{on:"click",fields:[FX],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function jX(e){return"legend"===e||!!e?.legend}function BX(e){return jX(e)&&Ms(e)}function UX(e){return!!e?.select}function $X(e){const t=[];for(const n of e||[]){if(UX(n))continue;const{expr:e,bind:r,...i}=n;if(r&&e){const n={...i,bind:r,init:e};t.push(n)}else{const n={...i,...e?{update:e}:{},...r?{bind:r}:{}};t.push(n)}}return t}function qX(e){return t$(e,"concat")}function HX(e){return t$(e,"vconcat")}function VX(e){return t$(e,"hconcat")}function WX({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function GX(e){return t$(e,"step")}function YX(e){return t$(e,"view")||t$(e,"width")||t$(e,"height")}const XX=CU({align:1,bounds:1,center:1,columns:1,spacing:1});function KX(e,t){return e[t]??e["width"===t?"continuousWidth":"continuousHeight"]}function ZX(e,t){const n=JX(e,t);return GX(n)?n.step:QX}function JX(e,t){return HU(e[t]??e["width"===t?"discreteWidth":"discreteHeight"],{step:e.step})}const QX=20;const eK={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:QX},mark:{color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},arc:{},area:{},bar:_G,circle:{},geoshape:{},image:{},line:{},point:{},rect:xG,rule:{color:"black"},square:{},text:{color:"black"},tick:wG,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0},projection:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:zX,style:{},title:{},facet:{spacing:20},concat:{spacing:20},normalizedNumberFormat:".0%"},tK=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],nK={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},rK={blue:tK[0],orange:tK[1],red:tK[2],teal:tK[3],green:tK[4],yellow:tK[5],purple:tK[6],pink:tK[7],brown:tK[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function iK(e){const t=CU(e||{}),n={};for(const r of t){const t=e[r];n[r]=$Y(t)?SH(t):CH(t)}return n}const aK=[...vG,...YY,...DX,"background","padding","legend","lineBreak","scale","style","title","view"];function oK(e={}){const{color:t,font:n,fontSize:r,selection:i,...a}=e,o=Cs({},fU(eK),n?function(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}(n):{},t?function(e={}){return{signals:[{name:"color",value:Ms(e)?{...rK,...e}:rK}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}(t):{},r?function(e){return{signals:[{name:"fontSize",value:Ms(e)?{...nK,...e}:nK}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}(r):{},a||{});i&&Os(o,"selection",i,!0);const s=pU(o,aK);for(const e of["background","lineBreak","padding"])o[e]&&(s[e]=CH(o[e]));for(const e of vG)o[e]&&(s[e]=bH(o[e]));for(const e of YY)o[e]&&(s[e]=iK(o[e]));for(const e of DX)o[e]&&(s[e]=bH(o[e]));if(o.legend&&(s.legend=bH(o.legend)),o.scale){const{invalid:e,...t}=o.scale,n=bH(e,{level:1});s.scale={...bH(t),...CU(n).length>0?{invalid:n}:{}}}return o.style&&(s.style=function(e){const t=CU(e),n={};for(const r of t)n[r]=iK(e[r]);return n}(o.style)),o.title&&(s.title=bH(o.title)),o.view&&(s.view=bH(o.view)),s}const sK=new Set(["view",...fG]),lK=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],cK={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...gG};function uK(e){e=fU(e);for(const t of lK)delete e[t];if(e.axis)for(const t in e.axis)$Y(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of CX)delete e.legend[t];if(e.mark){for(const t of pG)delete e.mark[t];e.mark.tooltip&&Ms(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat($X(e.params)),delete e.params);for(const t of sK){for(const n of pG)delete e[t][n];const n=cK[t];if(n)for(const r of n)delete e[t][r];fK(e,t)}for(const t of CU(MX))delete e[t];!function(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=xH(e.title);SU(t)||(e.style["group-title"]={...e.style["group-title"],...t});SU(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n});SU(r)?delete e.title:e.title=r}(e);for(const t in e)Ms(e[t])&&SU(e[t])&&delete e[t];return SU(e)?void 0:e}function fK(e,t,n,r){"view"===t&&(n="cell");const i={...r?e[t][r]:e[t],...e.style[n??t]};SU(i)||(e.style[n??t]=i),r||delete e[t]}function dK(e){return t$(e,"layer")}class hK{map(e,t){return ZG(e)?this.mapFacet(e,t):function(e){return t$(e,"repeat")}(e)?this.mapRepeat(e,t):VX(e)?this.mapHConcat(e,t):HX(e)?this.mapVConcat(e,t):qX(e)?this.mapConcat(e,t):this.mapLayerOrUnit(e,t)}mapLayerOrUnit(e,t){if(dK(e))return this.mapLayer(e,t);if(XY(e))return this.mapUnit(e,t);throw new Error(VH(e))}mapLayer(e,t){return{...e,layer:e.layer.map((e=>this.mapLayerOrUnit(e,t)))}}mapHConcat(e,t){return{...e,hconcat:e.hconcat.map((e=>this.map(e,t)))}}mapVConcat(e,t){return{...e,vconcat:e.vconcat.map((e=>this.map(e,t)))}}mapConcat(e,t){const{concat:n,...r}=e;return{...r,concat:n.map((e=>this.map(e,t)))}}mapFacet(e,t){return{...e,spec:this.map(e.spec,t)}}mapRepeat(e,t){return{...e,spec:this.map(e.spec,t)}}}const pK={zero:1,center:1,normalize:1};const mK=new Set([XW,ZW,KW,nG,eG,oG,sG,QW,rG,iG]),gK=new Set([ZW,KW,XW]);function vK(e){return sY(e)&&"quantitative"===lY(e)&&!e.bin}function yK(e,t,{orient:n,type:r}){const i="x"===t?"y":"radius",a="x"===t&&["bar","area"].includes(r),o=e[t],s=e[i];if(sY(o)&&sY(s))if(vK(o)&&vK(s)){if(o.stack)return t;if(s.stack)return i;const e=sY(o)&&!!o.aggregate;if(e!==(sY(s)&&!!s.aggregate))return e?t:i;if(a){if("vertical"===n)return i;if("horizontal"===n)return t}}else{if(vK(o))return t;if(vK(s))return i}else{if(vK(o)){if(a&&"vertical"===n)return;return t}if(vK(s)){if(a&&"horizontal"===n)return;return i}}}function bK(e,t){const n=dG(e)?e:{type:e},r=n.type;if(!mK.has(r))return null;const i=yK(t,"x",n)||yK(t,"theta",n);if(!i)return null;const a=t[i],o=sY(a)?_Y(a,{}):void 0,s=function(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}(i),l=[],c=new Set;if(t[s]){const e=t[s],n=sY(e)?_Y(e,{}):void 0;n&&n!==o&&(l.push(s),c.add(n))}const u="x"===s?"xOffset":"yOffset",f=t[u],d=sY(f)?_Y(f,{}):void 0;d&&d!==o&&(l.push(u),c.add(d));const h=Oq.reduce(((e,n)=>{if("tooltip"!==n&&ZY(t,n)){const r=t[n];for(const t of Zs(r)){const r=OY(t);if(r.aggregate)continue;const i=_Y(r,{});i&&c.has(i)||e.push({channel:n,fieldDef:r})}}return e}),[]);let p;return void 0!==a.stack?p=yl(a.stack)?a.stack?"zero":null:a.stack:gK.has(r)&&(p="zero"),p&&function(e){return dl(pK,e)}(p)?eX(t)&&0===h.length?null:(a?.scale?.type&&a?.scale?.type!==pW&&a?.stack&&EV(function(e){return`Stack is applied to a non-linear scale (${e}).`}(a.scale.type)),hY(t[cq(i)])?(void 0!==a.stack&&EV(`Cannot stack "${m=i}" if there is already "${m}2".`),null):(sY(a)&&a.aggregate&&!uH.has(a.aggregate)&&EV(`Stacking is applied even though the aggregate function is non-summative ("${a.aggregate}").`),{groupbyChannels:l,groupbyFields:c,fieldChannel:i,impute:null!==a.impute&&cG(r),stackBy:h,offset:p})):null;var m}function xK(e,t,n){const r=bH(e),i=FH("orient",r,n);if(r.orient=function(e,t,n){switch(e){case eG:case oG:case sG:case rG:case tG:case JW:return}const{x:r,y:i,x2:a,y2:o}=t;switch(e){case ZW:if(sY(r)&&(pH(r.bin)||sY(i)&&i.aggregate&&!r.aggregate))return"vertical";if(sY(i)&&(pH(i.bin)||sY(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||a){if(n)return n;if(!a)return(sY(r)&&r.type===cW&&!hH(r.bin)||dY(r))&&sY(i)&&pH(i.bin)?"horizontal":"vertical";if(!o)return(sY(i)&&i.type===cW&&!hH(i.bin)||dY(i))&&sY(r)&&pH(r.bin)?"vertical":"horizontal"}case nG:if(a&&(!sY(r)||!pH(r.bin))&&o&&(!sY(i)||!pH(i.bin)))return;case KW:if(o)return sY(i)&&pH(i.bin)?"horizontal":"vertical";if(a)return sY(r)&&pH(r.bin)?"vertical":"horizontal";if(e===nG){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case QW:case iG:{const t=fY(r),a=fY(i);if(n)return n;if(t&&!a)return"tick"!==e?"horizontal":"vertical";if(!t&&a)return"tick"!==e?"vertical":"horizontal";if(t&&a)return"vertical";{const e=pY(r)&&r.type===fW,t=pY(i)&&i.type===fW;if(e&&!t)return"vertical";if(!e&&t)return"horizontal"}return}}return"vertical"}(r.type,t,i),void 0!==i&&i!==r.orient&&EV(`Specified orient "${r.orient}" overridden with "${i}".`),"bar"===r.type&&r.orient){const e=FH("cornerRadiusEnd",r,n);if(void 0!==e){const n="horizontal"===r.orient&&t.x2||"vertical"===r.orient&&t.y2?["cornerRadius"]:bG[r.orient];for(const t of n)r[t]=e;void 0!==r.cornerRadiusEnd&&delete r.cornerRadiusEnd}}const a=FH("opacity",r,n),o=FH("fillOpacity",r,n);void 0===a&&void 0===o&&(r.opacity=function(e,t){if(vU([eG,iG,oG,sG],e)&&!eX(t))return.7;return}(r.type,t));return void 0===FH("cursor",r,n)&&(r.cursor=function(e,t,n){if(t.href||e.href||FH("href",e,n))return"pointer";return e.cursor}(r,t,n)),r}function _K(e){const{point:t,line:n,...r}=e;return CU(r).length>1?r:r.type}function wK(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:pU(e[t],["point","line"])});return e}function AK(e,t={},n){return"transparent"===e.point?{opacity:0}:e.point?Ms(e.point)?e.point:{}:void 0!==e.point?null:t.point||n.shape?Ms(t.point)?t.point:{}:void 0}function kK(e,t={}){return e.line?!0===e.line?{}:e.line:void 0!==e.line?null:t.line?!0===t.line?{}:t.line:void 0}class EK{constructor(){this.name="path-overlay"}hasMatchingType(e,t){if(XY(e)){const{mark:n,encoding:r}=e,i=dG(n)?n:{type:n};switch(i.type){case"line":case"rule":case"trail":return!!AK(i,t[i.type],r);case"area":return!!AK(i,t[i.type],r)||!!kK(i,t[i.type])}}return!1}run(e,t,n){const{config:r}=t,{params:i,projection:a,mark:o,name:s,encoding:l,...c}=e,u=rX(l,r),f=dG(o)?o:{type:o},d=AK(f,r[f.type],u),h="area"===f.type&&kK(f,r[f.type]),p=[{name:s,...i?{params:i}:{},mark:_K({..."area"===f.type&&void 0===f.opacity&&void 0===f.fillOpacity?{opacity:.7}:{},...f}),encoding:pU(u,["shape"])}],m=bK(xK(f,u,r),u);let g=u;if(m){const{fieldChannel:e,offset:t}=m;g={...u,[e]:{...u[e],...t?{stack:t}:{}}}}return g=pU(g,["y2","x2"]),h&&p.push({...a?{projection:a}:{},mark:{type:"line",...hU(f,["clip","interpolate","tension","tooltip"]),...h},encoding:g}),d&&p.push({...a?{projection:a}:{},mark:{type:"point",opacity:1,filled:!0,...hU(f,["clip","tooltip"]),...d},encoding:g}),n({...c,layer:p},{...t,config:wK(r)})}}function TK(e,t){return t?XG(e)?NK(e,t):CK(e,t):e}function MK(e,t){return t?NK(e,t):e}function SK(e,t,n){const r=t[e];return function(e){return!Al(e)&&t$(e,"repeat")}(r)?r.repeat in n?{...t,[e]:n[r.repeat]}:void EV(function(e){return`Unknown repeated value "${e}".`}(r.repeat)):t}function CK(e,t){if(void 0!==(e=SK("field",e,t))){if(null===e)return null;if(QG(e)&&GG(e.sort)){const n=SK("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function OK(e,t){if(sY(e))return CK(e,t);{const n=SK("datum",e,t);return n===e||n.type||(n.type="nominal"),n}}function RK(e,t){if(!hY(e)){if(oY(e)){const n=OK(e.condition,t);if(n)return{...e,condition:n};{const{condition:t,...n}=e;return n}}return e}{const n=OK(e,t);if(n)return n;if(iY(e))return{condition:e.condition}}}function NK(e,t){const n={};for(const r in e)if(t$(e,r)){const i=e[r];if(Ts(i))n[r]=i.map((e=>RK(e,t))).filter((e=>e));else{const e=RK(i,t);void 0!==e&&(n[r]=e)}}return n}class LK{constructor(){this.name="RuleForRangedLine"}hasMatchingType(e){if(XY(e)){const{encoding:t,mark:n}=e;if("line"===n||dG(n)&&"line"===n.type)for(const e of aq){const n=t[sq(e)];if(t[e]&&(sY(n)&&!pH(n.bin)||cY(n)))return!0}}return!1}run(e,t,n){const{encoding:r,mark:i}=e;var a,o;return EV((a=!!r.x2,o=!!r.y2,`Line mark is for continuous lines and thus cannot be used with ${a&&o?"x2 and y2":a?"x2":"y2"}. We will use the rule mark (line segments) instead.`)),n({...e,mark:Ms(i)?{...i,type:"rule"}:"rule"},t)}}function DK({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...CU(e),...CU(t)]);for(const a of i){const i=t[a],o=e[a];if(hY(i)){const e={...o,...i};r[a]=e}else oY(i)?r[a]={...i,condition:{...o,...i.condition}}:i||null===i?r[a]=i:(n||mY(o)||wH(o)||hY(o)||Ts(o))&&(r[a]=o)}}else r=t;return!r||SU(r)?void 0:r}function PK(e){const{parentProjection:t,projection:n}=e;return t&&n&&EV(function(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${e$(t)} is overridden by a child projection ${e$(n)}.`}({parentProjection:t,projection:n})),n??t}function IK(e){return t$(e,"filter")}function FK(e){return t$(e,"stop")}function zK(e){return t$(e,"lookup")}function jK(e){return t$(e,"pivot")}function BK(e){return t$(e,"density")}function UK(e){return t$(e,"quantile")}function $K(e){return t$(e,"regression")}function qK(e){return t$(e,"loess")}function HK(e){return t$(e,"sample")}function VK(e){return t$(e,"window")}function WK(e){return t$(e,"joinaggregate")}function GK(e){return t$(e,"flatten")}function YK(e){return t$(e,"calculate")}function XK(e){return t$(e,"bin")}function KK(e){return t$(e,"impute")}function ZK(e){return t$(e,"timeUnit")}function JK(e){return t$(e,"aggregate")}function QK(e){return t$(e,"stack")}function eZ(e){return t$(e,"fold")}function tZ(e){return t$(e,"extent")&&!t$(e,"density")&&!t$(e,"regression")}function nZ(e,t){const{transform:n,...r}=e;if(n){const e=n.map((e=>{if(IK(e))return{filter:aZ(e,t)};if(XK(e)&&mH(e.bin))return{...e,bin:iZ(e.bin)};if(zK(e)){const{selection:t,...n}=e.from;return t?{...e,from:{param:t,...n}}:e}return e}));return{...r,transform:e}}return e}function rZ(e,t){const n=fU(e);if(sY(n)&&mH(n.bin)&&(n.bin=iZ(n.bin)),gY(n)&&n.scale?.domain?.selection){const{selection:e,...t}=n.scale.domain;n.scale.domain={...t,...e?{param:e}:{}}}if(iY(n))if(Ts(n.condition))n.condition=n.condition.map((e=>{const{selection:n,param:r,test:i,...a}=e;return r?e:{...a,test:aZ(e,t)}}));else{const{selection:e,param:r,test:i,...a}=rZ(n.condition,t);n.condition=r?n.condition:{...a,test:aZ(n.condition,t)}}return n}function iZ(e){const t=e.extent;if(t?.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function aZ(e,t){const n=e=>uU(e,(e=>{var n;const r={param:e,empty:t.emptySelections[e]??!0};return(n=t.selectionPredicates)[e]??(n[e]=[]),t.selectionPredicates[e].push(r),r}));return e.selection?n(e.selection):uU(e.test||e.filter,(e=>e.selection?n(e.selection):e))}class oZ extends hK{map(e,t){const n=t.selections??[];if(e.params&&!XY(e)){const t=[];for(const r of e.params)UX(r)?n.push(r):t.push(r);e.params=t}return t.selections=n,super.map(e,t)}mapUnit(e,t){const n=t.selections;if(!n||!n.length)return e;const r=(t.path??[]).concat(e.name),i=[];for(const t of n)if(t.views&&t.views.length)for(const n of t.views)(Al(n)&&(n===e.name||r.includes(n))||Ts(n)&&n.map((e=>r.indexOf(e))).every(((e,t,n)=>-1!==e&&(0===t||e>n[t-1]))))&&i.push(t);else i.push(t);return i.length&&(e.params=i),e}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=oZ.prototype[e];oZ.prototype[e]=function(e,n){return t.call(this,e,sZ(e,n))}}function sZ(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function lZ(e,t){void 0===t&&(t=oK(e.config));const n=function(e,t={}){const n={config:t};return fZ.map(cZ.map(uZ.map(e,n),n),n)}(e,t),{width:r,height:i}=e,a=function(e,t,n){let{width:r,height:i}=t;const a=XY(e)||dK(e),o={};a?"container"==r&&"container"==i?(o.type="fit",o.contains="padding"):"container"==r?(o.type="fit-x",o.contains="padding"):"container"==i&&(o.type="fit-y",o.contains="padding"):("container"==r&&(EV(GH("width")),r=void 0),"container"==i&&(EV(GH("height")),i=void 0));const s={type:"pad",...o,...n?dZ(n.autosize):{},...dZ(e.autosize)};"fit"!==s.type||a||(EV(WH),s.type="pad");"container"==r&&"fit"!=s.type&&"fit-x"!=s.type&&EV(YH("width"));"container"==i&&"fit"!=s.type&&"fit-y"!=s.type&&EV(YH("height"));if(QU(s,{type:"pad"}))return;return s}(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...a?{autosize:a}:{}}}const cZ=new class extends hK{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[pX,bX,EX,new EK,new LK]}map(e,t){if(XY(e)){const n=ZY(e.encoding,n$),r=ZY(e.encoding,r$),i=ZY(e.encoding,i$);if(n||r||i)return this.mapFacetedUnit(e,t)}return super.map(e,t)}mapUnit(e,t){const{parentEncoding:n,parentProjection:r}=t,i=MK(e.encoding,t.repeater),a={...e,...e.name?{name:[t.repeaterPrefix,e.name].filter((e=>e)).join("_")}:{},...i?{encoding:i}:{}};if(n||r)return this.mapUnitWithParentEncodingOrProjection(a,t);const o=this.mapLayerOrUnit.bind(this);for(const e of this.nonFacetUnitNormalizers)if(e.hasMatchingType(a,t.config))return e.run(a,t,o);return a}mapRepeat(e,t){return function(e){return!Ts(e.repeat)&&t$(e.repeat,"layer")}(e)?this.mapLayerRepeat(e,t):this.mapNonLayerRepeat(e,t)}mapLayerRepeat(e,t){const{repeat:n,spec:r,...i}=e,{row:a,column:o,layer:s}=n,{repeater:l={},repeaterPrefix:c=""}=t;return a||o?this.mapRepeat({...e,repeat:{...a?{row:a}:{},...o?{column:o}:{}},spec:{repeat:{layer:s},spec:r}},t):{...i,layer:s.map((e=>{const n={...l,layer:e},i=`${(r.name?`${r.name}_`:"")+c}child__layer_${LU(e)}`,a=this.mapLayerOrUnit(r,{...t,repeater:n,repeaterPrefix:i});return a.name=i,a}))}}mapNonLayerRepeat(e,t){const{repeat:n,spec:r,data:i,...a}=e;!Ts(n)&&e.columns&&(e=pU(e,["columns"]),EV(tV("repeat")));const o=[],{repeater:s={},repeaterPrefix:l=""}=t,c=!Ts(n)&&n.row||[s?s.row:null],u=!Ts(n)&&n.column||[s?s.column:null],f=Ts(n)&&n||[s?s.repeat:null];for(const e of f)for(const i of c)for(const a of u){const c={repeat:e,row:i,column:a,layer:s.layer},u=(r.name?`${r.name}_`:"")+l+"child__"+(Ts(n)?`${LU(e)}`:(n.row?`row_${LU(i)}`:"")+(n.column?`column_${LU(a)}`:"")),f=this.map(r,{...t,repeater:c,repeaterPrefix:u});f.name=u,o.push(pU(f,["data"]))}const d=Ts(n)?e.columns:n.column?n.column.length:1;return{data:r.data??i,align:"all",...a,columns:d,concat:o}}mapFacet(e,t){const{facet:n}=e;return XG(n)&&e.columns&&(e=pU(e,["columns"]),EV(tV("facet"))),super.mapFacet(e,t)}mapUnitWithParentEncodingOrProjection(e,t){const{encoding:n,projection:r}=e,{parentEncoding:i,parentProjection:a,config:o}=t,s=PK({parentProjection:a,projection:r}),l=DK({parentEncoding:i,encoding:MK(n,t.repeater)});return this.mapUnit({...e,...s?{projection:s}:{},...l?{encoding:l}:{}},{config:o})}mapFacetedUnit(e,t){const{row:n,column:r,facet:i,...a}=e.encoding,{mark:o,width:s,projection:l,height:c,view:u,params:f,encoding:d,...h}=e,{facetMapping:p,layout:m}=this.getFacetMappingAndLayout({row:n,column:r,facet:i},t),g=MK(a,t.repeater);return this.mapFacet({...h,...m,facet:p,spec:{...s?{width:s}:{},...c?{height:c}:{},...u?{view:u}:{},...l?{projection:l}:{},mark:o,encoding:g,...f?{params:f}:{}}},t)}getFacetMappingAndLayout(e,t){const{row:n,column:r,facet:i}=e;if(n||r){i&&EV(`Facet encoding dropped as ${(a=[...n?[n$]:[],...r?[r$]:[]]).join(" and ")} ${a.length>1?"are":"is"} also specified.`);const t={},o={};for(const n of[n$,r$]){const r=e[n];if(r){const{align:e,center:i,spacing:a,columns:s,...l}=r;t[n]=l;for(const e of["align","center","spacing"])void 0!==r[e]&&(o[e]??(o[e]={}),o[e][n]=r[e])}}return{facetMapping:t,layout:o}}{const{align:e,center:n,spacing:r,columns:a,...o}=i;return{facetMapping:TK(o,t.repeater),layout:{...e?{align:e}:{},...n?{center:n}:{},...r?{spacing:r}:{},...a?{columns:a}:{}}}}var a}mapLayer(e,{parentEncoding:t,parentProjection:n,...r}){const{encoding:i,projection:a,...o}=e,s={...r,parentEncoding:DK({parentEncoding:t,encoding:i,layer:!0}),parentProjection:PK({parentProjection:n,projection:a})};return super.mapLayer({...o,...e.name?{name:[s.repeaterPrefix,e.name].filter((e=>e)).join("_")}:{}},s)}},uZ=new class extends hK{map(e,t){return t.emptySelections??(t.emptySelections={}),t.selectionPredicates??(t.selectionPredicates={}),e=nZ(e,t),super.map(e,t)}mapLayerOrUnit(e,t){if((e=nZ(e,t)).encoding){const n={};for(const[r,i]of RU(e.encoding))n[r]=rZ(i,t);e={...e,encoding:n}}return super.mapLayerOrUnit(e,t)}mapUnit(e,t){const{selection:n,...r}=e;return n?{...r,params:RU(n).map((([e,n])=>{const{init:r,bind:i,empty:a,...o}=n;"single"===o.type?(o.type="point",o.toggle=!1):"multi"===o.type&&(o.type="point"),t.emptySelections[e]="none"!==a;for(const n of OU(t.selectionPredicates[e]??{}))n.empty="none"!==a;return{name:e,value:r,select:o,bind:i}}))}:e}},fZ=new oZ;function dZ(e){return Al(e)?{type:e}:e??{}}const hZ=["background","padding"];function pZ(e,t){const n={};for(const t of hZ)e&&void 0!==e[t]&&(n[t]=CH(e[t]));return t&&(n.params=e.params),n}class mZ{constructor(e={},t={}){this.explicit=e,this.implicit=t}clone(){return new mZ(fU(this.explicit),fU(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(e){return HU(this.explicit[e],this.implicit[e])}getWithExplicit(e){return void 0!==this.explicit[e]?{explicit:!0,value:this.explicit[e]}:void 0!==this.implicit[e]?{explicit:!1,value:this.implicit[e]}:{explicit:!1,value:void 0}}setWithExplicit(e,{value:t,explicit:n}){void 0!==t&&this.set(e,t,n)}set(e,t,n){return delete this[n?"implicit":"explicit"][e],this[n?"explicit":"implicit"][e]=t,this}copyKeyFromSplit(e,{explicit:t,implicit:n}){void 0!==t[e]?this.set(e,t[e],!0):void 0!==n[e]&&this.set(e,n[e],!1)}copyKeyFromObject(e,t){void 0!==t[e]&&this.set(e,t[e],!0)}copyAll(e){for(const t of CU(e.combine())){const n=e.getWithExplicit(t);this.setWithExplicit(t,n)}}}function gZ(e){return{explicit:!0,value:e}}function vZ(e){return{explicit:!1,value:e}}function yZ(e){return(t,n,r,i)=>{const a=e(t.value,n.value);return a>0?t:a<0?n:bZ(t,n,r,i)}}function bZ(e,t,n,r){return e.explicit&&t.explicit&&EV(function(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${e$(n)} and ${e$(r)}). Using ${e$(n)}.`}(n,r,e.value,t.value)),e}function xZ(e,t,n,r,i=bZ){return void 0===e||void 0===e.value?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:QU(e.value,t.value)?e:i(e,t,n,r)}class _Z extends mZ{constructor(e={},t={},n=!1){super(e,t),this.explicit=e,this.implicit=t,this.parseNothing=n}clone(){const e=super.clone();return e.parseNothing=this.parseNothing,e}}function wZ(e){return t$(e,"url")}function AZ(e){return t$(e,"values")}function kZ(e){return t$(e,"name")&&!wZ(e)&&!AZ(e)&&!EZ(e)}function EZ(e){return e&&(TZ(e)||MZ(e)||SZ(e))}function TZ(e){return t$(e,"sequence")}function MZ(e){return t$(e,"sphere")}function SZ(e){return t$(e,"graticule")}var CZ;function OZ({invalid:e,isPath:t}){switch(AG(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function RZ(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=BU(i.field),i}function NZ(e,t=!0,n=ps){if(Ts(e)){const r=e.map((e=>NZ(e,t,n)));return t?`[${r.join(", ")}]`:r}return TV(e)?n(t?NV(e):function(e){const t=RV(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}(e)):t?n(e$(e)):e}function LZ(e,t){for(const n of OU(e.component.selection??{})){const r=n.name;let i=`${r}${aQ}, ${"global"===n.resolve?"true":`{unit: ${cQ(e)}}`}`;for(const r of lQ)r.defined(n)&&(r.signals&&(t=r.signals(e,n,t)),r.modifyExpr&&(i=r.modifyExpr(e,n,i)));t.push({name:r+oQ,on:[{events:{signal:n.name+aQ},update:`modify(${Nl(n.name+iQ)}, ${i})`}]})}return IZ(t)}function DZ(e,t){if(e.component.selection&&CU(e.component.selection).length){const n=Nl(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:CI("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return IZ(t)}function PZ(e,t){for(const n of OU(e.component.selection??{}))for(const r of lQ)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function IZ(e){return e.map((e=>(e.on&&!e.on.length&&delete e.on,e)))}!function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"}(CZ||(CZ={}));class FZ{constructor(e,t){this.debugName=t,this._children=[],this._parent=null,e&&(this.parent=e)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(e){this._parent=e,e&&e.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(e,t){this._children.includes(e)?EV("Attempt to add the same child twice."):void 0!==t?this._children.splice(t,0,e):this._children.push(e)}removeChild(e){const t=this._children.indexOf(e);return this._children.splice(t,1),t}remove(){let e=this._parent.removeChild(this);for(const t of this._children)t._parent=this._parent,this._parent.addChild(t,e++)}insertAsParentOf(e){const t=e.parent;t.removeChild(this),this.parent=t,e.parent=this}swapWithParent(){const e=this._parent,t=e.parent;for(const t of this._children)t.parent=e;this._children=[],e.removeChild(this);const n=e.parent.removeChild(e);this._parent=t,t.addChild(this,n),e.parent=this}}class zZ extends FZ{clone(){const e=new this.constructor;return e.debugName=`clone_${this.debugName}`,e._source=this._source,e._name=`clone_${this._name}`,e.type=this.type,e.refCounts=this.refCounts,e.refCounts[e._name]=0,e}constructor(e,t,n,r){super(e,t),this.type=n,this.refCounts=r,this._source=this._name=t,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return void 0===this._hash&&(this._hash=`Output ${WU()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(e){this._source=e}}function jZ(e){return void 0!==e.as}function BZ(e){return`${e}_end`}class UZ extends FZ{clone(){return new UZ(null,fU(this.timeUnits))}constructor(e,t){super(e),this.timeUnits=t}static makeFromEncoding(e,t){const n=t.reduceFieldDef(((e,n,r)=>{const{field:i,timeUnit:a}=n;if(a){let o;if(PV(a)){if(X1(t)){const{mark:e,markDef:r,config:s}=t,l=eY({fieldDef:n,markDef:r,config:s});(uG(e)||l)&&(o={timeUnit:HV(a),field:i})}}else o={as:_Y(n,{forAs:!0}),field:i,timeUnit:a};if(X1(t)){const{mark:e,markDef:i,config:a}=t,s=eY({fieldDef:n,markDef:i,config:a});uG(e)&&Lq(r)&&.5!==s&&(o.rectBandPosition=s)}o&&(e[mU(o)]=o)}return e}),{});return SU(n)?null:new UZ(e,n)}static makeFromTransform(e,t){const{timeUnit:n,...r}={...t},i={...r,timeUnit:HV(n)};return new UZ(e,{[mU(i)]:i})}merge(e){this.timeUnits={...this.timeUnits};for(const t in e.timeUnits)this.timeUnits[t]||(this.timeUnits[t]=e.timeUnits[t]);for(const t of e.children)e.removeChild(t),t.parent=this;e.remove()}removeFormulas(e){const t={};for(const[n,r]of RU(this.timeUnits)){const i=jZ(r)?r.as:`${r.field}_end`;e.has(i)||(t[n]=r)}this.timeUnits=t}producedFields(){return new Set(OU(this.timeUnits).map((e=>jZ(e)?e.as:BZ(e.field))))}dependentFields(){return new Set(OU(this.timeUnits).map((e=>e.field)))}hash(){return`TimeUnit ${mU(this.timeUnits)}`}assemble(){const e=[];for(const t of OU(this.timeUnits)){const{rectBandPosition:n}=t,r=HV(t.timeUnit);if(jZ(t)){const{field:i,as:a}=t,{unit:o,utc:s,...l}=r,c=[a,`${a}_end`];e.push({field:BU(i),type:"timeunit",...o?{units:jV(o)}:{},...s?{timezone:"utc"}:{},...l,as:c}),e.push(...VZ(c,n,r))}else if(t){const{field:i}=t,a=i.replaceAll("\\.","."),o=HZ({timeUnit:r,field:a}),s=BZ(a);e.push({type:"formula",expr:o,as:s}),e.push(...VZ([a,s],n,r))}}return e}}const $Z="offsetted_rect_start",qZ="offsetted_rect_end";function HZ({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,a=BV(r),{part:o,step:s}=GV(a,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-s:s})`}function VZ([e,t],n,r){if(void 0!==n&&.5!==n){const i=`datum['${e}']`,a=`datum['${t}']`;return[{type:"formula",expr:WZ([HZ({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${$Z}`},{type:"formula",expr:WZ([i,a],n+.5),as:`${e}_${qZ}`}]}return[]}function WZ([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const GZ="_tuple_fields";class YZ{constructor(...e){this.items=e,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const XZ={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new YZ),a={},o={},s=new Set,l=(e,t)=>{const n="visual"===t?e.channel:e.field;let i=LU(`${r}_${n}`);for(let e=1;s.has(i);e++)i=LU(`${r}_${n}_${e}`);return s.add(i),{[t]:i}},c=t.type,u=e.config.selection[c],f=void 0!==n.value?Zs(n.value):null;let{fields:d,encodings:h}=Ms(n.select)?n.select:{};if(!d&&!h&&f)for(const e of f)if(Ms(e))for(const t of CU(e))dl(rq,t)?(h||(h=[])).push(t):"interval"===c?(EV('Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.'),h=u.encodings):(d??(d=[])).push(t);d||h||(h=u.encodings,"fields"in u&&(d=u.fields));for(const t of h??[]){const n=e.fieldDef(t);if(n){let r=n.field;if(n.aggregate){EV(JH(t,n.aggregate));continue}if(!r){EV(ZH(t));continue}if(n.timeUnit&&!PV(n.timeUnit)){r=e.vgField(t);const i={timeUnit:n.timeUnit,as:r,field:n.field};o[mU(i)]=i}if(!a[r]){const o={field:r,channel:t,type:"interval"===c&&Zq(t)&&LW(e.getScaleComponent(t).get("type"))?"R":n.bin?"R-RE":"E",index:i.items.length};o.signals={...l(o,"data"),...l(o,"visual")},i.items.push(a[r]=o),i.hasField[r]=a[r],i.hasSelectionId=i.hasSelectionId||r===FX,$$(t)?(o.geoChannel=t,o.channel=U$(t),i.hasChannel[o.channel]=a[r]):i.hasChannel[t]=a[r]}}else EV(ZH(t))}for(const e of d??[]){if(i.hasField[e])continue;const t={type:"E",field:e,index:i.items.length};t.signals={...l(t,"data")},i.items.push(t),i.hasField[e]=t,i.hasSelectionId=i.hasSelectionId||e===FX}f&&(t.init=f.map((e=>i.items.map((t=>Ms(e)?void 0!==e[t.geoChannel||t.channel]?e[t.geoChannel||t.channel]:e[t.field]:e))))),SU(o)||(i.timeUnit=new UZ(null,o))},signals:(e,t,n)=>{const r=t.name+GZ;return n.filter((e=>e.name===r)).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(RZ)})}},KZ=XZ,ZZ={defined:e=>"interval"===e.type&&"global"===e.resolve&&e.bind&&"scales"===e.bind,parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!Zq(i))continue;const a=e.getScaleComponent(i),o=a?a.get("type"):void 0;"sequential"==o&&EV("Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc"),a&&LW(o)?(a.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)):EV("Scale bindings are currently only supported for scales with unbinned, continuous domains.")}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter((e=>0===n.filter((t=>t.name===e.signals.data)).length));if(!e.parent||eJ(e)||0===r.length)return n;const i=n.find((e=>e.name===t.name));let a=i.update;if(a.includes(sQ))i.update=`{${r.map((e=>`${Nl(BU(e.field))}: ${e.signals.data}`)).join(", ")}}`;else{for(const e of r){const t=`${Nl(BU(e.field))}: ${e.signals.data}`;a.includes(t)||(a=`${a.substring(0,a.length-1)}, ${t}}`)}i.update=a}return n.concat(r.map((e=>({name:e.signals.data}))))},signals:(e,t,n)=>{if(e.parent&&!eJ(e))for(const e of t.scales){const t=n.find((t=>t.name===e.signals.data));t.push="outer",delete t.value,delete t.update}return n}},JZ=ZZ;function QZ(e,t){return`domain(${Nl(e.scaleName(t))})`}function eJ(e){return e.parent&&J1(e.parent)&&(!e.parent.parent??eJ(e.parent.parent))}const tJ="_brush",nJ="_scale_trigger",rJ="geo_interval_init_tick",iJ="_init",aJ={defined:e=>"interval"===e.type,parse:(e,t,n)=>{var r;if(e.hasProjection){const e={...Ms(n.select)?n.select:{}};e.fields=[FX],e.encodings||(e.encodings=n.value?CU(n.value):[g$,m$]),n.select={type:"interval",...e}}if(t.translate&&!JZ.defined(t)){const e=`!event.item || event.item.mark.name !== ${Nl(t.name+tJ)}`;for(const n of t.events){if(!n.between){EV(`${n} is not an ordered event stream for interval selections.`);continue}const t=Zs((r=n.between[0]).filter??(r.filter=[]));t.includes(e)||t.push(e)}}},signals:(e,t,n)=>{const r=t.name,i=r+aQ,a=OU(t.project.hasChannel).filter((e=>e.channel===a$||e.channel===o$)),o=t.init?t.init[0]:null;if(n.push(...a.reduce(((n,r)=>n.concat(function(e,t,n,r){const i=!e.hasProjection,a=n.channel,o=n.signals.visual,s=Nl(i?e.scaleName(a):e.projectionName()),l=e=>`scale(${s}, ${e})`,c=e.getSizeSignalRef(a===a$?"width":"height").signal,u=`${a}(unit)`,f=t.events.reduce(((e,t)=>[...e,{events:t.between[0],update:`[${u}, ${u}]`},{events:t,update:`[${o}[0], clamp(${u}, 0, ${c})]`}]),[]);if(i){const i=n.signals.data,c=JZ.defined(t),u=e.getScaleComponent(a),d=u?u.get("type"):void 0,h=r?{init:NZ(r,!0,l)}:{value:[]};return f.push({events:{signal:t.name+nJ},update:LW(d)?`[${l(`${i}[0]`)}, ${l(`${i}[1]`)}]`:"[0, 0]"}),c?[{name:i,on:[]}]:[{name:o,...h,on:f},{name:i,...r?{init:NZ(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${s}, ${o})`}]}]}{const e=a===a$?0:1,n=t.name+iJ;return[{name:o,...r?{init:`[${n}[0][${e}], ${n}[1][${e}]]`}:{value:[]},on:f}]}}(e,t,r,o&&o[r.index]))),[])),e.hasProjection){const s=Nl(e.projectionName()),l=e.projectionName()+"_center",{x:c,y:u}=t.project.hasChannel,f=c&&c.signals.visual,d=u&&u.signals.visual,h=c?o&&o[c.index]:`${l}[0]`,p=u?o&&o[u.index]:`${l}[1]`,m=t=>e.getSizeSignalRef(t).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;if(o&&(n.unshift({name:r+iJ,init:`[scale(${s}, [${c?h[0]:h}, ${u?p[0]:p}]), scale(${s}, [${c?h[1]:h}, ${u?p[1]:p}])]`}),!c||!u)){n.find((e=>e.name===l))||n.unshift({name:l,update:`invert(${s}, [${m("width")}/2, ${m("height")}/2])`})}const v=`vlSelectionTuples(${`intersect(${g}, {markname: ${Nl(e.getName("marks"))}}, unit.mark)`}, ${`{unit: ${cQ(e)}}`})`,y=a.map((e=>e.signals.visual));return n.concat({name:i,on:[{events:[...y.length?[{signal:y.join(" || ")}]:[],...o?[{signal:rJ}]:[]],update:v}]})}{if(!JZ.defined(t)){const t=r+nJ,i=a.map((t=>{const n=t.channel,{data:r,visual:i}=t.signals,a=Nl(e.scaleName(n)),o=LW(e.getScaleComponent(n).get("type"))?"+":"";return`(!isArray(${r}) || (${o}invert(${a}, ${i})[0] === ${o}${r}[0] && ${o}invert(${a}, ${i})[1] === ${o}${r}[1]))`}));i.length&&n.push({name:t,value:{},on:[{events:a.map((t=>({scale:e.scaleName(t.channel)}))),update:i.join(" && ")+` ? ${t} : {}`}]})}const s=a.map((e=>e.signals.data)),l=`unit: ${cQ(e)}, fields: ${r+GZ}, values`;return n.concat({name:i,...o?{init:`{${l}: ${NZ(o)}}`}:{},...s.length?{on:[{events:[{signal:s.join(" || ")}],update:`${s.join(" && ")} ? {${l}: [${s}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>{if(X1(e)&&e.hasProjection&&t.init){n.filter((e=>e.name===rJ)).length||n.unshift({name:rJ,value:null,on:[{events:"timer{1}",update:`${rJ} === null ? {} : ${rJ}`}]})}return n},marks:(e,t,n)=>{const r=t.name,{x:i,y:a}=t.project.hasChannel,o=i?.signals.visual,s=a?.signals.visual,l=`data(${Nl(t.name+iQ)})`;if(JZ.defined(t)||!i&&!a)return n;const c={x:void 0!==i?{signal:`${o}[0]`}:{value:0},y:void 0!==a?{signal:`${s}[0]`}:{value:0},x2:void 0!==i?{signal:`${o}[1]`}:{field:{group:"width"}},y2:void 0!==a?{signal:`${s}[1]`}:{field:{group:"height"}}};if("global"===t.resolve)for(const t of CU(c))c[t]=[{test:`${l}.length && ${l}[0].unit === ${cQ(e)}`,...c[t]},{value:0}];const{fill:u,fillOpacity:f,cursor:d,...h}=t.mark,p=CU(h).reduce(((e,t)=>(e[t]=[{test:[void 0!==i&&`${o}[0] !== ${o}[1]`,void 0!==a&&`${s}[0] !== ${s}[1]`].filter((e=>e)).join(" && "),value:h[t]},{value:null}],e)),{}),m=d??(t.translate?"move":null);return[{name:`${r+tJ}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:u},fillOpacity:{value:f}},update:c}},...n,{name:r+tJ,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...c,...p}}}]}},oJ=aJ;const sJ={defined:e=>"point"===e.type,signals:(e,t,n)=>{const r=t.name,i=r+GZ,a=t.project,o="(item().isVoronoi ? datum.datum : datum)",s=OU(e.component.selection??{}).reduce(((e,t)=>"interval"===t.type?e.concat(t.name+tJ):e),[]).map((e=>`indexof(item().mark.name, '${e}') < 0`)).join(" && "),l="datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0"+(s?` && ${s}`:"");let c=`unit: ${cQ(e)}, `;if(t.project.hasSelectionId)c+=`${FX}: ${o}[${Nl(FX)}]`;else{c+=`fields: ${i}, values: [${a.items.map((t=>{const n=e.fieldDef(t.channel);return n?.bin?`[${o}[${Nl(e.vgField(t.channel,{}))}], ${o}[${Nl(e.vgField(t.channel,{binSuffix:"end"}))}]]`:`${o}[${Nl(t.field)}]`})).join(", ")}]`}const u=t.events;return n.concat([{name:r+aQ,on:u?[{events:u,update:`${l} ? {${c}} : null`,force:!0}]:[]}])}},lJ=sJ;function cJ({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const a=iY(t)&&t.condition;let o=[];if(a){o=Zs(a).map((t=>{const n=i(t);if(function(e){return t$(e,"param")}(t)){const{param:r,empty:i}=t;return{test:gQ(e,{param:r,empty:i}),...n}}return{test:yQ(e,t.test),...n}}))}void 0!==r&&o.push(r);const s=i(t);return void 0!==s&&o.push(s),o.length>1||1===o.length&&Boolean(o[0].test)?{[n]:o}:1===o.length?{[n]:o[0]}:{}}function uJ(e,t="text"){const n=e.encoding[t];return cJ({model:e,channelDef:n,vgChannel:t,mainRefFn:t=>fJ(t,e.config),invalidValueRef:void 0})}function fJ(e,t,n="datum"){if(e){if(mY(e))return RH(e.value);if(hY(e)){const{format:r,formatType:i}=CY(e);return PG({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function dJ(e,t={}){const{encoding:n,markDef:r,config:i,stack:a}=e,o=n.tooltip;if(Ts(o))return{tooltip:pJ({tooltip:o},a,i,t)};{const s=t.reactiveGeom?"datum.datum":"datum";return cJ({model:e,channelDef:o,vgChannel:"tooltip",mainRefFn:e=>{const o=fJ(e,i,s);if(o)return o;if(null===e)return;let l=FH("tooltip",r,i);return!0===l&&(l={content:"encoding"}),Al(l)?{value:l}:Ms(l)?wH(l)?l:"encoding"===l.content?pJ(n,a,i,t):{signal:s}:void 0},invalidValueRef:void 0})}}function hJ(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},a=new Set,o=r?"datum.datum":"datum",s=[];function l(n,r){const l=sq(r),c=pY(n)?n:{...n,type:e[l].type},u=Zs(c.title||SY(c,i)).join(", ").replaceAll(/"/g,'\\"');let f;if(Lq(r)){const t="x"===r?"x2":"y2",n=OY(e[t]);if(pH(c.bin)&&n){const e=_Y(c,{expr:o}),r=_Y(n,{expr:o}),{format:s,formatType:l}=CY(c);f=qG(e,r,s,l,i),a.add(t)}}if((Lq(r)||r===h$||r===f$)&&t&&t.fieldChannel===r&&"normalize"===t.offset){const{format:e,formatType:t}=CY(c);f=PG({fieldOrDatumDef:c,format:e,formatType:t,expr:o,config:i,normalizeStack:!0}).signal}f??(f=fJ(c,i,o).signal),s.push({channel:r,key:u,value:f})}iX(e,((e,t)=>{sY(e)?l(e,t):aY(e)&&l(e.condition,t)}));const c={};for(const{channel:e,key:t,value:n}of s)a.has(e)||c[t]||(c[t]=n);return c}function pJ(e,t,n,{reactiveGeom:r}={}){const i=hJ(e,t,n,{reactiveGeom:r}),a=RU(i).map((([e,t])=>`"${e}": ${t}`));return a.length>0?{signal:`{${a.join(", ")}}`}:void 0}function mJ(e){const{markDef:t,config:n}=e,r=FH("aria",t,n);return!1===r?{}:{...r?{aria:r}:{},...gJ(e),...vJ(e)}}function gJ(e){const{mark:t,markDef:n,config:r}=e;if(!1===r.aria)return{};const i=FH("ariaRoleDescription",n,r);return null!=i?{ariaRoleDescription:{value:i}}:dl(TH,t)?{}:{ariaRoleDescription:{value:t}}}function vJ(e){const{encoding:t,markDef:n,config:r,stack:i}=e,a=t.description;if(a)return cJ({model:e,channelDef:a,vgChannel:"description",mainRefFn:t=>fJ(t,e.config),invalidValueRef:void 0});const o=FH("description",n,r);if(null!=o)return{description:RH(o)};if(!1===r.aria)return{};const s=hJ(t,i,r);return SU(s)?void 0:{description:{signal:RU(s).map((([e,t],n)=>`"${n>0?"; ":""}${e}: " + (${t})`)).join(" + ")}}}function yJ(e,t,n={}){const{markDef:r,encoding:i,config:a}=t,{vgChannel:o}=n;let{defaultRef:s,defaultValue:l}=n;const c=i[e];void 0===s&&(l??(l=FH(e,r,a,{vgChannel:o,ignoreVgConfig:!iY(c)})),void 0!==l&&(s=RH(l)));const u={markDef:r,config:a,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},f=TG({...u,scaleChannel:e,channelDef:c});return cJ({model:t,channelDef:c,vgChannel:o??e,invalidValueRef:f,mainRefFn:t=>RG({...u,channel:e,channelDef:t,stack:null,defaultRef:s})})}function bJ(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:a}=n,o=t.filled??FH("filled",n,i),s=vU(["bar","point","circle","square","geoshape"],a)?"transparent":void 0,l=FH(!0===o?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[!0===o&&"color"]??s,c=FH(!1===o?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[!1===o&&"color"],u=o?"fill":"stroke",f={...l?{fill:RH(l)}:{},...c?{stroke:RH(c)}:{}};return n.color&&(o?n.fill:n.stroke)&&EV(sV("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...yJ("color",e,{vgChannel:u,defaultValue:o?l:c}),...yJ("fill",e,{defaultValue:r.fill?l:void 0}),...yJ("stroke",e,{defaultValue:r.stroke?c:void 0})}}function xJ(e){const{encoding:t,mark:n}=e,r=t.order;return!cG(n)&&mY(r)?cJ({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:e=>RH(e.value),invalidValueRef:void 0}):{}}function _J({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const a=`${e}Offset`,o=t[a],s=n[a];if(("xOffset"===a||"yOffset"===a)&&s){return{offsetType:"encoding",offset:RG({channel:a,channelDef:s,markDef:t,config:r?.config,scaleName:r.scaleName(a),scale:r.getScaleComponent(a),stack:null,defaultRef:RH(o),bandPosition:i})}}const l=t[a];return l?{offsetType:"visual",offset:l}:{}}function wJ(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:a,config:o,stack:s}=t,l=i[e],c=i[cq(e)],u=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=_J({channel:e,markDef:a,encoding:i,model:t,bandPosition:.5}),p=AJ({model:t,defaultPos:n,channel:e,scaleName:u,scale:f}),m=!l&&Lq(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:function(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:a,markDef:o}=e;if(hY(n)&&i&&t===i.fieldChannel){if(sY(n)){let e=n.bandPosition;if(void 0!==e||"text"!==o.type||"radius"!==t&&"theta"!==t||(e=.5),void 0!==e)return OG({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:e,offset:a})}return CG(n,r,{suffix:"end"},{offset:a})}return SG(e)}({channel:e,channelDef:l,channel2Def:c,markDef:a,config:o,scaleName:u,scale:f,stack:s,offset:d,defaultRef:p,bandPosition:"encoding"===h?0:void 0});return m?{[r||e]:m}:void 0}function AJ({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:a,config:o}=e;return()=>{const s=sq(n),l=lq(n),c=FH(n,a,o,{vgChannel:l});if(void 0!==c)return NG(n,c);switch(t){case"zeroOrMin":return kJ({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:s,config:o});case"zeroOrMax":return kJ({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:s,config:o});case"mid":return{...e[uq(n)],mult:.5}}}}function kJ({mainChannel:e,config:t,...n}){const r=EG(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if("zeroOrMin"===i)return{value:0};const{widthSignal:e,heightSignal:t}=i.zeroOrMax;return{signal:`min(${e},${t})/2`}}case"theta":return"zeroOrMin"===i?{value:0}:{signal:"2*PI"};case"x":return"zeroOrMin"===i?{value:0}:{field:{group:"width"}};case"y":return"zeroOrMin"===i?{field:{group:"height"}}:{value:0}}}const EJ={left:"x",center:"xc",right:"x2"},TJ={top:"y",middle:"yc",bottom:"y2"};function MJ(e,t,n,r="middle"){if("radius"===e||"theta"===e)return lq(e);const i="x"===e?"align":"baseline",a=FH(i,t,n);let o;return wH(a)?(EV(function(e){return`The ${e} for range marks cannot be an expression`}(i)),o=void 0):o=a,"x"===e?EJ[o||("top"===r?"left":"center")]:TJ[o||r]}function SJ(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?CJ(e,t,{defaultPos:n,defaultPos2:r}):wJ(e,t,{defaultPos:n})}function CJ(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:a}=t,o=cq(e),s=uq(e),l=function(e,t,n){const{encoding:r,mark:i,markDef:a,stack:o,config:s}=e,l=sq(n),c=uq(n),u=lq(n),f=r[l],d=e.scaleName(l),h=e.getScaleComponent(l),{offset:p}=_J(n in r||n in a?{channel:n,markDef:a,encoding:r,model:e}:{channel:l,markDef:a,encoding:r,model:e});if(!f&&("x2"===n||"y2"===n)&&(r.latitude||r.longitude)){const t=uq(n),r=e.markDef[t];return null!=r?{[t]:{value:r}}:{[u]:{field:e.getName(n)}}}const m=function({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:a,scale:o,stack:s,offset:l,defaultRef:c}){if(hY(t)&&s&&e.charAt(0)===s.fieldChannel.charAt(0))return CG(t,a,{suffix:"start"},{offset:l});return SG({channel:e,channelDef:n,scaleName:a,scale:o,stack:s,markDef:r,config:i,offset:l,defaultRef:c})}({channel:n,channelDef:f,channel2Def:r[n],markDef:a,config:s,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});if(void 0!==m)return{[u]:m};return OJ(n,a)||OJ(n,{[n]:jH(n,a,s.style),[c]:jH(c,a,s.style)})||OJ(n,s[i])||OJ(n,s.mark)||{[u]:AJ({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}(t,r,o);return{...wJ(e,t,{defaultPos:n,vgChannel:l[s]?MJ(e,i,a):lq(e)}),...l}}function OJ(e,t){const n=uq(e),r=lq(e);if(void 0!==t[r])return{[r]:NG(e,t[r])};if(void 0!==t[e])return{[r]:NG(e,t[e])};if(t[n]){const r=t[n];if(!yG(r))return{[n]:NG(e,r)};EV(function(e){return`Position range does not support relative band size for ${e}.`}(n))}}function RJ(e,t){const{config:n,encoding:r,markDef:i}=e,a=i.type,o=cq(t),s=uq(t),l=r[t],c=r[o],u=e.getScaleComponent(t),f=u?u.get("type"):void 0,d=i.orient,h=r[s]??r.size??FH("size",i,n,{vgChannel:s}),p=fq(t),m="bar"===a&&("x"===t?"vertical"===d:"horizontal"===d)||"tick"===a&&("y"===t?"vertical"===d:"horizontal"===d);return!sY(l)||!(hH(l.bin)||pH(l.bin)||l.timeUnit&&!c)||h&&!yG(h)||r[p]||NW(f)?(hY(l)&&NW(f)||m)&&!c?function(e,t,n){const{markDef:r,encoding:i,config:a,stack:o}=n,s=r.orient,l=n.scaleName(t),c=n.getScaleComponent(t),u=uq(t),f=cq(t),d=fq(t),h=n.scaleName(d),p=n.getScaleComponent(dq(t)),m="tick"===r.type||"horizontal"===s&&"y"===t||"vertical"===s&&"x"===t;let g;(i.size||r.size)&&(m?g=yJ("size",n,{vgChannel:u,defaultRef:RH(r.size)}):EV(function(e){return`Cannot apply size to non-oriented mark "${e}".`}(r.type)));const v=!!g,y=tY({channel:t,fieldDef:e,markDef:r,config:a,scaleType:(c||p)?.get("type"),useVlSizeChannel:m});g=g||{[u]:NJ(u,h||l,p||c,a,y,!!e,r.type)};const b="band"===(c||p)?.get("type")&&yG(y)&&!v?"top":"middle",x=MJ(t,r,a,b),_="xc"===x||"yc"===x,{offset:w,offsetType:A}=_J({channel:t,markDef:r,encoding:i,model:n,bandPosition:_?.5:0}),k=SG({channel:t,channelDef:e,markDef:r,config:a,scaleName:l,scale:c,stack:o,offset:w,defaultRef:AJ({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:c}),bandPosition:_?"encoding"===A?0:.5:wH(y)?{signal:`(1-${y})/2`}:yG(y)?(1-y.band)/2:0});if(u)return{[x]:k,...g};{const e=lq(f),t=g[u],n=w?{...t,offset:w}:t;return{[x]:k,[e]:Ts(k)?[k[0],{...k[1],offset:n}]:{...k,offset:n}}}}(l,t,e):CJ(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"}):function({fieldDef:e,fieldDef2:t,channel:n,model:r}){const{config:i,markDef:a,encoding:o}=r,s=r.getScaleComponent(n),l=r.scaleName(n),c=s?s.get("type"):void 0,u=s.get("reverse"),f=tY({channel:n,fieldDef:e,markDef:a,config:i,scaleType:c}),d=r.component.axes[n]?.[0],h=d?.get("translate")??.5,p=Lq(n)?FH("binSpacing",a,i)??0:0,m=cq(n),g=lq(n),v=lq(m),y=zH("minBandSize",a,i),{offset:b}=_J({channel:n,markDef:a,encoding:o,model:r,bandPosition:0}),{offset:x}=_J({channel:m,markDef:a,encoding:o,model:r,bandPosition:0}),_=function({scaleName:e,fieldDef:t}){const n=_Y(t,{expr:"datum"});return`abs(scale("${e}", ${_Y(t,{expr:"datum",suffix:"end"})}) - scale("${e}", ${n}))`}({fieldDef:e,scaleName:l}),w=LJ(n,p,u,h,b,y,_),A=LJ(m,p,u,h,x??b,y,_),k=wH(f)?{signal:`(1-${f.signal})/2`}:yG(f)?(1-f.band)/2:.5,E=eY({fieldDef:e,fieldDef2:t,markDef:a,config:i});if(hH(e.bin)||e.timeUnit){const t=e.timeUnit&&.5!==E;return{[v]:DJ({fieldDef:e,scaleName:l,bandPosition:k,offset:A,useRectOffsetField:t}),[g]:DJ({fieldDef:e,scaleName:l,bandPosition:wH(k)?{signal:`1-${k.signal}`}:1-k,offset:w,useRectOffsetField:t})}}if(pH(e.bin)){const n=CG(e,l,{},{offset:A});if(sY(t))return{[v]:n,[g]:CG(t,l,{},{offset:w})};if(mH(e.bin)&&e.bin.step)return{[v]:n,[g]:{signal:`scale("${l}", ${_Y(e,{expr:"datum"})} + ${e.bin.step})`,offset:w}}}return void EV(_V(m))}({fieldDef:l,fieldDef2:c,channel:t,model:e})}function NJ(e,t,n,r,i,a,o){if(yG(i)){if(!n)return{mult:i.band,field:{group:e}};{const e=n.get("type");if("band"===e){let e=`bandwidth('${t}')`;1!==i.band&&(e=`${i.band} * ${e}`);const n=zH("minBandSize",{type:o},r);return{signal:n?`max(${DH(n)}, ${e})`:e}}1!==i.band&&(EV(function(e){return`Cannot use the relative band size with ${e} scale.`}(e)),i=void 0)}}else{if(wH(i))return i;if(i)return{value:i}}if(n){const e=n.get("range");if(AH(e)&&_l(e.step))return{value:e.step-2}}if(!a){const{bandPaddingInner:t,barBandPaddingInner:n,rectBandPaddingInner:i,tickBandPaddingInner:a}=r.scale,s=HU(t,"tick"===o?a:"bar"===o?n:i);if(wH(s))return{signal:`(1 - (${s.signal})) * ${e}`};if(_l(s))return{signal:`${1-s} * ${e}`}}return{value:ZX(r.view,e)-2}}function LJ(e,t,n,r,i,a,o){if(j$(e))return 0;const s="x"===e||"y2"===e,l=s?-t/2:t/2;if(wH(n)||wH(i)||wH(r)||a){const e=DH(n),t=DH(i),c=DH(r),u=DH(a),f=a?`(${o} < ${u} ? ${s?"":"-"}0.5 * (${u} - (${o})) : ${l})`:l;return{signal:(c?`${c} + `:"")+(e?`(${e} ? -1 : 1) * `:"")+(t?`(${t} + ${f})`:f)}}return i=i||0,r+(n?-i-l:+i+l)}function DJ({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return OG({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:$Z,endSuffix:qZ}:{}})}const PJ=new Set(["aria","width","height"]);function IJ(e,t){const{fill:n,stroke:r}="include"===t.color?bJ(e):{};return{...zJ(e.markDef,t),...FJ("fill",n),...FJ("stroke",r),...yJ("opacity",e),...yJ("fillOpacity",e),...yJ("strokeOpacity",e),...yJ("strokeWidth",e),...yJ("strokeDash",e),...xJ(e),...dJ(e),...uJ(e,"href"),...mJ(e)}}function FJ(e,t){return t?{[e]:t}:{}}function zJ(e,t){return EH.reduce(((n,r)=>(!PJ.has(r)&&t$(e,r)&&"ignore"!==t[r]&&(n[r]=RH(e[r])),n)),{})}function jJ(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef(((i,a)=>{let o;if(!Zq(a)||!(o=e.getScaleType(a)))return;const s=cH(i.aggregate),l=kG({scaleChannel:a,markDef:n,config:t,scaleType:o,isCountAggregate:s});if("break-paths-filter-domains"===(c=l)||"break-paths-show-domains"===c){const t=e.vgField(a,{expr:"datum",binSuffix:e.stack?.impute?"mid":void 0});t&&r.add(t)}var c})),r.size>0){const e=[...r].map((e=>iW(e,!0))).join(" && ");return{defined:{signal:e}}}}function BJ(e,t){if(void 0!==t)return{[e]:RH(t)}}const UJ="voronoi",$J={defined:e=>"point"===e.type&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(UJ)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,a=e.mark;if(cG(a))return EV(`The "nearest" transform is not supported for ${a} marks.`),n;const o={name:e.getName(UJ),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...dJ(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let s=0,l=!1;return n.forEach(((t,n)=>{const r=t.name??"";r===e.component.mark[0].name?s=n:r.includes(UJ)&&(l=!0)})),l||n.splice(s+1,0,o),n}},qJ=$J,HJ={defined:e=>"point"===e.type&&"global"===e.resolve&&e.bind&&"scales"!==e.bind&&!jX(e.bind),parse:(e,t,n)=>fQ(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,a=t.bind,o=t.init&&t.init[0],s=qJ.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach(((e,i)=>{const l=LU(`${r}_${e.field}`);n.filter((e=>e.name===l)).length||n.unshift({name:l,...o?{init:NZ(o[i])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${s}[${Nl(e.field)}] : null`}]:[],bind:a[e.field]??a[e.channel]??a})})),n},signals:(e,t,n)=>{const r=t.name,i=t.project,a=n.find((e=>e.name===r+aQ)),o=r+GZ,s=i.items.map((e=>LU(`${r}_${e.field}`))),l=s.map((e=>`${e} !== null`)).join(" && ");return s.length&&(a.update=`${l} ? {fields: ${o}, values: [${s.join(", ")}]} : null`),delete a.value,delete a.on,n}},VJ=HJ,WJ="_toggle",GJ={defined:e=>"point"===e.type&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+WJ,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+aQ,r=t.name+WJ;return`${r} ? null : ${n}, `+("global"===t.resolve?`${r} ? null : true, `:`${r} ? null : {unit: ${cQ(e)}}, `)+`${r} ? ${n} : null`}},YJ={defined:e=>void 0!==e.clear&&!1!==e.clear,parse:(e,t)=>{t.clear&&(t.clear=Al(t.clear)?CI(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(VJ.defined(t))for(const e of t.project.items){const r=n.findIndex((n=>n.name===LU(`${t.name}_${e.field}`)));-1!==r&&n[r].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(e,r){-1!==e&&n[e].on&&n[e].on.push({events:t.clear,update:r})}if("interval"===t.type)for(const e of t.project.items){const t=n.findIndex((t=>t.name===e.signals.visual));if(r(t,"[0, 0]"),-1===t){r(n.findIndex((t=>t.name===e.signals.data)),"null")}}else{let e=n.findIndex((e=>e.name===t.name+aQ));r(e,"null"),GJ.defined(t)&&(e=n.findIndex((e=>e.name===t.name+WJ)),r(e,"false"))}return n}},XJ={defined:e=>{const t="global"===e.resolve&&e.bind&&jX(e.bind),n=1===e.project.items.length&&e.project.items[0].field!==FX;return t&&!n&&EV("Legend bindings are only supported for selections over an individual field or encoding channel."),t&&n},parse:(e,t,n)=>{const r=fU(n);if(r.select=Al(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},fQ(t,r),Ms(n.select)&&(n.select.on||n.select.clear)){const e='event.item && indexof(event.item.mark.role, "legend") < 0';for(const n of t.events)n.filter=Zs(n.filter??[]),n.filter.includes(e)||n.filter.push(e)}const i=BX(t.bind)?t.bind.legend:"click",a=Al(i)?CI(i,"view"):Zs(i);t.bind={legend:{merge:a}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=BX(t.bind)&&t.bind.legend,a=e=>t=>{const n=fU(t);return n.markname=e,n};for(const e of t.project.items){if(!e.hasLegend)continue;const o=`${LU(e.field)}_legend`,s=`${r}_${o}`;if(0===n.filter((e=>e.name===s)).length){const e=i.merge.map(a(`${o}_symbols`)).concat(i.merge.map(a(`${o}_labels`))).concat(i.merge.map(a(`${o}_entries`)));n.unshift({name:s,...t.init?{}:{value:null},on:[{events:e,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${s}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,a=n.find((e=>e.name===r+aQ)),o=r+GZ,s=i.items.filter((e=>e.hasLegend)).map((e=>LU(`${r}_${LU(e.field)}_legend`))),l=s.map((e=>`${e} !== null`)).join(" && "),c=`${l} ? {fields: ${o}, values: [${s.join(", ")}]} : null`;t.events&&s.length>0?a.on.push({events:s.map((e=>({signal:e}))),update:c}):s.length>0&&(a.update=c,delete a.value,delete a.on);const u=n.find((e=>e.name===r+WJ)),f=BX(t.bind)&&t.bind.legend;return u&&(t.events?u.on.push({...u.on[0],events:f}):u.on[0].events=f),n}};const KJ="_translate_anchor",ZJ="_translate_delta",JJ={defined:e=>"interval"===e.type&&e.translate,signals:(e,t,n)=>{const r=t.name,i=JZ.defined(t),a=r+KJ,{x:o,y:s}=t.project.hasChannel;let l=CI(t.translate,"scope");return i||(l=l.map((e=>(e.between[0].markname=r+tJ,e)))),n.push({name:a,value:{},on:[{events:l.map((e=>e.between[0])),update:"{x: x(unit), y: y(unit)"+(void 0!==o?`, extent_x: ${i?QZ(e,a$):`slice(${o.signals.visual})`}`:"")+(void 0!==s?`, extent_y: ${i?QZ(e,o$):`slice(${s.signals.visual})`}`:"")+"}"}]},{name:r+ZJ,value:{},on:[{events:l,update:`{x: ${a}.x - x(unit), y: ${a}.y - y(unit)}`}]}),void 0!==o&&QJ(e,t,o,"width",n),void 0!==s&&QJ(e,t,s,"height",n),n}};function QJ(e,t,n,r,i){const a=t.name,o=a+KJ,s=a+ZJ,l=n.channel,c=JZ.defined(t),u=i.find((e=>e.name===n.signals[c?"data":"visual"])),f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(l),h=d&&d.get("type"),p=d&&d.get("reverse"),m=`${o}.extent_${l}`,g=`${c&&d?"log"===h?"panLog":"symlog"===h?"panSymlog":"pow"===h?"panPow":"panLinear":"panLinear"}(${m}, ${`${c?l===a$?p?"":"-":p?"-":"":""}${s}.${l} / ${c?`${f}`:`span(${m})`}`}${c?"pow"===h?`, ${d.get("exponent")??1}`:"symlog"===h?`, ${d.get("constant")??1}`:"":""})`;u.on.push({events:{signal:s},update:c?g:`clampRange(${g}, 0, ${f})`})}const eQ="_zoom_anchor",tQ="_zoom_delta",nQ={defined:e=>"interval"===e.type&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=JZ.defined(t),a=r+tQ,{x:o,y:s}=t.project.hasChannel,l=Nl(e.scaleName(a$)),c=Nl(e.scaleName(o$));let u=CI(t.zoom,"scope");return i||(u=u.map((e=>(e.markname=r+tJ,e)))),n.push({name:r+eQ,on:[{events:u,update:i?"{"+[l?`x: invert(${l}, x(unit))`:"",c?`y: invert(${c}, y(unit))`:""].filter((e=>e)).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:a,on:[{events:u,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==o&&rQ(e,t,o,"width",n),void 0!==s&&rQ(e,t,s,"height",n),n}};function rQ(e,t,n,r,i){const a=t.name,o=n.channel,s=JZ.defined(t),l=i.find((e=>e.name===n.signals[s?"data":"visual"])),c=e.getSizeSignalRef(r).signal,u=e.getScaleComponent(o),f=u&&u.get("type"),d=s?QZ(e,o):l.name,h=a+tQ,p=`${s&&u?"log"===f?"zoomLog":"symlog"===f?"zoomSymlog":"pow"===f?"zoomPow":"zoomLinear":"zoomLinear"}(${d}, ${`${a}${eQ}.${o}`}, ${h}${s?"pow"===f?`, ${u.get("exponent")??1}`:"symlog"===f?`, ${u.get("constant")??1}`:"":""})`;l.on.push({events:{signal:h},update:s?p:`clampRange(${p}, 0, ${c})`})}const iQ="_store",aQ="_tuple",oQ="_modify",sQ="vlSelectionResolve",lQ=[lJ,oJ,KZ,GJ,VJ,JZ,XJ,YJ,JJ,nQ,qJ];function cQ(e,{escape:t}={escape:!0}){let n=t?Nl(e.name):e.name;const r=function(e){let t=e.parent;for(;t&&!K1(t);)t=t.parent;return t}(e);if(r){const{facet:e}=r;for(const t of G$)e[t]&&(n+=` + '__facet_${t}_' + (facet[${Nl(r.vgField(t))}])`)}return n}function uQ(e){return OU(e.component.selection??{}).reduce(((e,t)=>e||t.project.hasSelectionId),!1)}function fQ(e,t){!Al(t.select)&&t.select.on||delete e.events,!Al(t.select)&&t.select.clear||delete e.clear,!Al(t.select)&&t.select.toggle||delete e.toggle}function dQ(e){const t=[];return"Identifier"===e.type?[e.name]:"Literal"===e.type?[e.value]:("MemberExpression"===e.type&&(t.push(...dQ(e.object)),t.push(...dQ(e.property))),t)}function hQ(e){return"MemberExpression"===e.object.type?hQ(e.object):"datum"===e.object.name}function pQ(e){const t=ZN(e),n=new Set;return t.visit((e=>{"MemberExpression"===e.type&&hQ(e)&&n.add(dQ(e).slice(1).join("."))})),n}class mQ extends FZ{clone(){return new mQ(null,this.model,fU(this.filter))}constructor(e,t,n){super(e),this.model=t,this.filter=n,this.expr=yQ(this.model,this.filter,this),this._dependentFields=pQ(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function gQ(e,t,n,r="datum"){const i=Al(t)?t:t.param,a=LU(i),o=Nl(a+iQ);let s;try{s=e.getSelectionComponent(a,i)}catch(e){return`!!${a}`}if(s.project.timeUnit){const t=n??e.component.data.raw,r=s.project.timeUnit.clone();t.parent?r.insertAsParentOf(t):t.parent=r}const l=`${s.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest("}${o}, ${r}${"global"===s.resolve?")":`, ${Nl(s.resolve)})`}`,c=`length(data(${o}))`;return!1===t.empty?`${c} && ${l}`:`!${c} || ${l}`}function vQ(e,t,n){const r=LU(t),i=n.encoding;let a,o=n.field;try{a=e.getSelectionComponent(r,t)}catch(e){return r}if(i||o){if(i&&!o){const e=a.project.items.filter((e=>e.channel===i));!e.length||e.length>1?(o=a.project.items[0].field,EV((e.length?"Multiple ":"No ")+`matching ${Nl(i)} encoding found for selection ${Nl(n.param)}. `+`Using "field": ${Nl(o)}.`)):o=e[0].field}}else o=a.project.items[0].field,a.project.items.length>1&&EV(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Nl(o)}.`);return`${a.name}[${Nl(BU(o))}]`}function yQ(e,t,n){return DU(t,(t=>Al(t)?t:function(e){return t$(e,"param")}(t)?gQ(e,t,n):rW(t)))}function bQ(e,t,n,r){var i,a;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(a=e.encode[t]).update??(a.update={}),e.encode[t].update[n]=r}function xQ(e,t,n,r={header:!1}){const{disable:i,orient:a,scale:o,labelExpr:s,title:l,zindex:c,...u}=e.combine();if(!i){for(const e in u){const n=e,r=HY[n],i=u[n];if(r&&r!==t&&"both"!==r)delete u[n];else if($Y(i)){const{condition:e,...t}=i,r=Zs(e),a=UY[n];if(a){const{vgProp:e,part:i}=a,o=[...r.map((e=>{const{test:t,...n}=e;return{test:yQ(null,t),...n}})),t];bQ(u,i,e,o),delete u[n]}else if(null===a){const e={signal:r.map((e=>{const{test:t,...n}=e;return`${yQ(null,t)} ? ${LH(n)} : `})).join("")+LH(t)};u[n]=e}}else if(wH(i)){const e=UY[n];if(e){const{vgProp:t,part:r}=e;bQ(u,r,t,i),delete u[n]}}vU(["labelAlign","labelBaseline"],n)&&null===u[n]&&delete u[n]}if("grid"===t){if(!u.grid)return;if(u.encode){const{grid:e}=u.encode;u.encode={...e?{grid:e}:{}},SU(u.encode)&&delete u.encode}return{scale:o,orient:a,...u,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:HU(c,0)}}{if(!r.header&&e.mainExtracted)return;if(void 0!==s){let e=s;u.encode?.labels?.update&&wH(u.encode.labels.update.text)&&(e=UU(s,"datum.label",u.encode.labels.update.text.signal)),bQ(u,"labels","text",{signal:e})}if(null===u.labelAlign&&delete u.labelAlign,u.encode){for(const t of qY)e.hasAxisPart(t)||delete u.encode[t];SU(u.encode)&&delete u.encode}const t=function(e,t){if(e)return Ts(e)&&!_H(e)?e.map((e=>SY(e,t))).join(", "):e}(l,n);return{scale:o,orient:a,grid:!1,...t?{title:t}:{},...u,...!1===n.aria?{aria:!1}:{},zindex:HU(c,0)}}}}function _Q(e){const{axes:t}=e.component,n=[];for(const r of Nq)if(t[r])for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const t="x"===r?"height":"width",i=e.getSizeSignalRef(t).signal;t!==i&&n.push({name:t,update:i})}return n}function wQ(e,t,n,r){return Object.assign.apply(null,[{},...e.map((e=>{if("axisOrient"===e){const e="x"===n?"bottom":"left",i=t["x"===n?"axisBottom":"axisLeft"]||{},a=t["x"===n?"axisTop":"axisRight"]||{},o=new Set([...CU(i),...CU(a)]),s={};for(const t of o.values())s[t]={signal:`${r.signal} === "${e}" ? ${DH(i[t])} : ${DH(a[t])}`};return s}return t[e]}))])}function AQ(e,t){const n=[{}];for(const r of e){let e=t[r]?.style;if(e){e=Zs(e);for(const r of e)n.push(t.style[r])}}return Object.assign.apply(null,n)}function kQ(e,t,n,r={}){const i=BH(e,n,t);if(void 0!==i)return{configFrom:"style",configValue:i};for(const t of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(void 0!==r[t]?.[e])return{configFrom:t,configValue:r[t][e]};return{}}const EQ={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??function(e,t){return!NW(e)&&sY(t)&&!hH(t?.bin)&&!pH(t?.bin)}(n,e),gridScale:({model:e,channel:t})=>function(e,t){const n="x"===t?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n);return}(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||SQ(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||MQ(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??function(e,t){if("x"===t&&vU(["quantitative","temporal"],e))return!0;return}(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??function(e,t,n,r){if(n&&!Ms(r)||"nominal"!==e&&"ordinal"!==e)return"log"!==t&&"symlog"!==t||"greedy";return}(t.type,n,sY(t)&&!!t.timeUnit,sY(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const a="x"===e?"width":"y"===e?"height":void 0,o=a?t.getSizeSignalRef(a):void 0;return n.tickCount??function({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){if(!r&&!NW(t)&&"log"!==t){if(sY(e)){if(hH(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&vU(["month","hours","day","quarter"],HV(e.timeUnit)?.unit))return}return{signal:`ceil(${n.signal}/40)`}}return}({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:function({format:e,fieldOrDatumDef:t}){if("d"===e)return 1;if(sY(t)){const{timeUnit:e}=t;if(e){const t=VV(e);if(t)return{signal:t}}}return},title:({axis:e,model:t,channel:n})=>{if(void 0!==e.title)return e.title;const r=CQ(t,n);if(void 0!==r)return r;const i=t.typedFieldDef(n),a="x"===n?"x2":"y2",o=t.fieldDef(a);return $H(i?[JG(i)]:[],sY(o)?[JG(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>function(e,t){const n=e.values;if(Ts(n))return jY(t,n);if(wH(n))return n;return}(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??function(e,t){if("rect"===e&&wY(t))return 1;return 0}(n,t)};function TQ(e){return`(((${e.signal} % 360) + 360) % 360)`}function MQ(e,t,n,r){if(void 0!==e){if("x"===n){if(wH(e)){const n=TQ(e);return{signal:`(45 < ${n} && ${n} < 135) || (225 < ${n} && ${n} < 315) ? "middle" :(${n} <= 45 || 315 <= ${n}) === ${wH(t)?`(${t.signal} === "top")`:"top"===t} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(wH(t)){const n=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${n} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==("top"===t)?"bottom":"top"}if(wH(e)){const n=TQ(e);return{signal:`${n} <= 45 || 315 <= ${n} || (135 <= ${n} && ${n} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${n} && ${n} <= 135) === ${wH(t)?`(${t.signal} === "left")`:"left"===t} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(wH(t)){const n=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${n} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==("left"===t)?"top":"bottom"}}function SQ(e,t,n){if(void 0===e)return;const r="x"===n,i=r?0:90,a=r?"bottom":"left";if(wH(e)){const n=TQ(e);return{signal:`(${i?`(${n} + 90)`:n} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${n} && ${n} < ${180+i}) === ${wH(t)?`(${t.signal} === "${a}")`:t===a} ? "left" : "right"`}}if((e+i)%180==0)return r?null:"center";if(wH(t)){const n=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${n} "${a}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===a)?"left":"right"}function CQ(e,t){const n="x"===t?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),a=r?r.title:void 0,o=i?i.title:void 0;return a&&o?qH(a,o):a||(o||(void 0!==a?a:void 0!==o?o:void 0))}class OQ extends FZ{clone(){return new OQ(null,fU(this.transform))}constructor(e,t){super(e),this.transform=t,this._dependentFields=pQ(this.transform.calculate)}static parseAllForSortIndex(e,t){return t.forEachFieldDef(((t,n)=>{if(gY(t)&&YG(t.sort)){const{field:r,timeUnit:i}=t,a=t.sort,o=a.map(((e,t)=>`${rW({field:r,timeUnit:i,equal:e})} ? ${t} : `)).join("")+a.length;e=new OQ(e,{calculate:o,as:RQ(t,n,{forAs:!0})})}})),e}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${mU(this.transform)}`}}function RQ(e,t,n){return _Y(e,{prefix:t,suffix:"sort_index",...n})}function NQ(e,t){return vU(["top","bottom"],t)?"column":vU(["left","right"],t)||"row"===e?"row":"column"}function LQ(e,t,n,r){const i="row"===r?n.headerRow:"column"===r?n.headerColumn:n.headerFacet;return HU((t||{})[e],i[e],n.header[e])}function DQ(e,t,n,r){const i={};for(const a of e){const e=LQ(a,t||{},n,r);void 0!==e&&(i[a]=e)}return i}const PQ=["row","column"],IQ=["header","footer"];function FQ(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:a,titleAngle:o,titleOrient:s}=DQ(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),l=NQ(t,s),c=KU(o);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,..."row"===t?{orient:"left"}:{},style:"guide-title",...jQ(c,l),...zQ(l,c,a),...WQ(r,i,t,NX,OX)}}}function zQ(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=SQ(t,"row"===e?"left":"top","row"===e?"y":"x");return r?{align:r}:{}}function jQ(e,t){const n=MQ(e,"row"===t?"left":"top","row"===t?"y":"x",!0);return n?{baseline:n}:{}}function BQ(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of IQ)if(n[i])for(const a of n[i]){const o=qQ(e,t,i,n,a);null!=o&&r.push(o)}return r}function UQ(e,t){const{sort:n}=e;return GG(n)?{field:_Y(n,{expr:"datum"}),order:n.order??"ascending"}:Ts(n)?{field:RQ(e,t,{expr:"datum"}),order:"ascending"}:{field:_Y(e,{expr:"datum"}),order:n??"ascending"}}function $Q(e,t,n){const{format:r,formatType:i,labelAngle:a,labelAnchor:o,labelOrient:s,labelExpr:l}=DQ(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),c=PG({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,u=NQ(t,s);return{text:{signal:l?UU(UU(l,"datum.label",c),"datum.value",_Y(e,{expr:"parent"})):c},..."row"===t?{orient:"left"}:{},style:"guide-label",frame:"group",...jQ(a,u),...zQ(u,a,o),...WQ(n,e,t,LX,RX)}}function qQ(e,t,n,r,i){if(i){let a=null;const{facetFieldDef:o}=r,s=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:e}=DQ(["labelOrient"],o.header,s,t);("row"===t&&!vU(["top","bottom"],e)||"column"===t&&!vU(["left","right"],e))&&(a=$Q(o,t,s))}const l=K1(e)&&!XG(e.facet),c=i.axes,u=c?.length>0;if(a||u){const s="row"===t?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:UQ(o,t)}:{},...u&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...a?{title:a}:{},...i.sizeSignal?{encode:{update:{[s]:i.sizeSignal}}}:{},...u?{axes:c}:{}}}}return null}const HQ={column:{start:0,end:1},row:{start:1,end:0}};function VQ(e,t){return HQ[t][e]}function WQ(e,t,n,r,i){const a={};for(const o of r){if(!i[o])continue;const r=LQ(o,t?.header,e,n);void 0!==r&&(a[i[o]]=r)}return a}function GQ(e){return[...YQ(e,"width"),...YQ(e,"height"),...YQ(e,"childWidth"),...YQ(e,"childHeight")]}function YQ(e,t){const n="width"===t?"x":"y",r=e.component.layoutSize.get(t);if(!r||"merged"===r)return[];const i=e.getSizeSignalRef(t).signal;if("step"===r){const t=e.getScaleComponent(n);if(t){const r=t.get("type"),a=t.get("range");if(NW(r)&&AH(a)){const r=e.scaleName(n);if(K1(e.parent)){if("independent"===e.parent.component.resolve.scale[n])return[XQ(r,a)]}return[XQ(r,a),{name:i,update:KQ(r,t,`domain('${r}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}if("container"==r){const t=i.endsWith("width"),n=t?"containerSize()[0]":"containerSize()[1]",r=`isFinite(${n}) ? ${n} : ${KX(e.config.view,t?"width":"height")}`;return[{name:i,init:r,on:[{update:r,events:"window:resize"}]}]}return[{name:i,value:r}]}function XQ(e,t){const n=`${e}_step`;return wH(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function KQ(e,t,n){const r=t.get("type"),i=t.get("padding"),a=HU(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o="band"===r?void 0!==o?o:i:1,`bandspace(${n}, ${DH(o)}, ${DH(a)}) * ${e}_step`}function ZQ(e){return"childWidth"===e?"width":"childHeight"===e?"height":e}function JQ(e,t){return CU(e).reduce(((n,r)=>({...n,...cJ({model:t,channelDef:e[r],vgChannel:r,mainRefFn:e=>RH(e.value),invalidValueRef:void 0})})),{})}function QQ(e,t){if(K1(t))return"theta"===e?"independent":"shared";if(J1(t))return"shared";if(Z1(t))return Lq(e)||"theta"===e||"radius"===e?"independent":"shared";throw new Error("invalid model type for resolve")}function e0(e,t){const n=e.scale[t],r=Lq(t)?"axis":"legend";return"independent"===n?("shared"===e[r][t]&&EV(function(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}(t)),"independent"):e[r][t]||"shared"}const t0={...IX,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},n0=CU(t0);class r0 extends mZ{}const i0={symbols:function(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:a}){if("symbol"!==a)return;const{markDef:o,encoding:s,config:l,mark:c}=n,u=o.filled&&"trail"!==c;let f={...PH({},n,hG),...bJ(n,{filled:u})};const d=i.get("symbolOpacity")??l.legend.symbolOpacity,h=i.get("symbolFillColor")??l.legend.symbolFillColor,p=i.get("symbolStrokeColor")??l.legend.symbolStrokeColor,m=void 0===d?a0(s.opacity)??o.opacity:void 0;if(f.fill)if("fill"===r||u&&r===b$)delete f.fill;else if(t$(f.fill,"field"))h?delete f.fill:(f.fill=RH(l.legend.symbolBaseFillColor??"black"),f.fillOpacity=RH(m??1));else if(Ts(f.fill)){const e=o0(s.fill??s.color)??o.fill??(u&&o.color);e&&(f.fill=RH(e))}if(f.stroke)if("stroke"===r||!u&&r===b$)delete f.stroke;else if(t$(f.stroke,"field")||p)delete f.stroke;else if(Ts(f.stroke)){const e=HU(o0(s.stroke||s.color),o.stroke,u?o.color:void 0);e&&(f.stroke={value:e})}if(r!==E$){const e=sY(t)&&l0(n,i,t);e?f.opacity=[{test:e,...RH(m??1)},RH(l.legend.unselectedOpacity)]:m&&(f.opacity=RH(m))}return f={...f,...e},SU(f)?void 0:f},gradient:function(e,{model:t,legendType:n,legendCmpt:r}){if("gradient"!==n)return;const{config:i,markDef:a,encoding:o}=t;let s={};const l=r.get("gradientOpacity")??i.legend.gradientOpacity,c=void 0===l?a0(o.opacity)||a.opacity:void 0;c&&(s.opacity=RH(c));return s={...s,...e},SU(s)?void 0:s},labels:function(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const a=n.legend(r)||{},o=n.config,s=sY(t)?l0(n,i,t):void 0,l=s?[{test:s,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:c,formatType:u}=a;let f;LG(u)?f=FG({fieldOrDatumDef:t,field:"datum.value",format:c,formatType:u,config:o}):void 0===c&&void 0===u&&o.customFormatTypes&&("quantitative"===t.type&&o.numberFormatType?f=FG({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):"temporal"===t.type&&o.timeFormatType&&sY(t)&&void 0===t.timeUnit&&(f=FG({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...l?{opacity:l}:{},...f?{text:f}:{},...e};return SU(d)?void 0:d},entries:function(e,{legendCmpt:t}){const n=t.get("selections");return n?.length?{...e,fill:{value:"transparent"}}:e}};function a0(e){return s0(e,((e,t)=>Math.max(e,t.value)))}function o0(e){return s0(e,((e,t)=>HU(e,t.value)))}function s0(e,t){return function(e){const t=e?.condition;return!!t&&(Ts(t)||mY(t))}(e)?Zs(e.condition).reduce(t,e.value):mY(e)?e.value:void 0}function l0(e,t,n){const r=t.get("selections");if(!r?.length)return;const i=Nl(n.field);return r.map((e=>`(!length(data(${Nl(LU(e)+iQ)})) || (${e}[${i}] && indexof(${e}[${i}], datum.value) >= 0))`)).join(" || ")}const c0={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return zG(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return jG(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??function({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:a,gradientHorizontalMinLength:o,gradientVerticalMaxLength:s,gradientVerticalMinLength:l}=e;if(DW(i))return"horizontal"===n?"top"===r||"bottom"===r?d0(t,"width",o,a):o:d0(t,"height",l,s);return}(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??function(e){if(vU(["quantile","threshold","log","symlog"],e))return"greedy";return}(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??function(e,t,n,r){if("shape"!==t){const e=o0(n)??r;if(e)return e}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>TY(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(V$(n)&&DW(t)){if("gradient"===e)return}else if("symbol"===e)return;return e},values:({fieldOrDatumDef:e,legend:t})=>function(e,t){const n=e.values;if(Ts(n))return jY(t,n);if(wH(n))return n;return}(t,e)};function u0(e){const{legend:t}=e;return HU(t.type,function({channel:e,timeUnit:t,scaleType:n}){if(V$(e)){if(vU(["quarter","month","day"],t))return"symbol";if(DW(n))return"gradient"}return"symbol"}(e))}function f0({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??function(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===t?"horizontal":void 0}}(n,t)}function d0(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function h0(e){const t=X1(e)?function(e){const{encoding:t}=e,n={};for(const r of[b$,...PX]){const i=RY(t[r]);i&&e.getScaleComponent(r)&&(r===w$&&sY(i)&&i.type===hW||(n[r]=m0(e,r)))}return n}(e):function(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){h0(r);for(const i of CU(r.component.legends))n.legend[i]=e0(e.component.resolve,i),"shared"===n.legend[i]&&(t[i]=g0(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of CU(t))for(const t of e.children)t.component.legends[r]&&"shared"===n.legend[r]&&delete t.component.legends[r];return t}(e);return e.component.legends=t,t}function p0(e,t,n,r){switch(t){case"disable":return void 0!==n;case"values":return!!n?.values;case"title":if("title"===t&&e===r?.title)return!0}return e===(n||{})[t]}function m0(e,t){let n=e.legend(t);const{markDef:r,encoding:i,config:a}=e,o=a.legend,s=new r0({},function(e,t){const n=e.scaleName(t);if("trail"===e.mark){if("color"===t)return{stroke:n};if("size"===t)return{strokeWidth:n}}return"color"===t?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}(e,t));!function(e,t,n){const r=e.fieldDef(t)?.field;for(const i of OU(e.component.selection??{})){const e=i.project.hasField[r]??i.project.hasChannel[t];if(e&&XJ.defined(i)){const t=n.get("selections")??[];t.push(i.name),n.set("selections",t,!1),e.hasLegend=!0}}}(e,t,s);const l=void 0!==n?!n:o.disable;if(s.set("disable",l,void 0!==n),l)return s;n=n||{};const c=e.getScaleComponent(t).get("type"),u=RY(i[t]),f=sY(u)?HV(u.timeUnit)?.unit:void 0,d=n.orient||a.legend.orient||"right",h=u0({legend:n,channel:t,timeUnit:f,scaleType:c}),p={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:u,legendConfig:o,config:a,scaleType:c,orient:d,legendType:h,direction:f0({legend:n,legendType:h,orient:d,legendConfig:o})};for(const r of n0){if("gradient"===h&&r.startsWith("symbol")||"symbol"===h&&r.startsWith("gradient"))continue;const i=r in c0?c0[r](p):n[r];if(void 0!==i){const o=p0(i,r,n,e.fieldDef(t));(o||void 0===a.legend[r])&&s.set(r,i,o)}}const m=n?.encoding??{},g=s.get("selections"),v={},y={fieldOrDatumDef:u,model:e,channel:t,legendCmpt:s,legendType:h};for(const t of["labels","legend","title","symbols","gradient","entries"]){const n=JQ(m[t]??{},e),r=t in i0?i0[t](n,y):n;void 0===r||SU(r)||(v[t]={...g?.length&&sY(u)?{name:`${LU(u.field)}_legend_${t}`}:{},...g?.length?{interactive:!!g}:{},update:r})}return SU(v)||s.set("encode",v,!!n?.encoding),s}function g0(e,t){if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const n of n0){const r=xZ(e.getWithExplicit(n),t.getWithExplicit(n),n,"legend",((e,t)=>{switch(n){case"symbolType":return v0(e,t);case"title":return HH(e,t);case"type":return i=!0,vZ("symbol")}return bZ(e,t,n,"legend")}));e.setWithExplicit(n,r)}return i&&(e.implicit?.encode?.gradient&&PU(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&PU(e.explicit,["encode","gradient"])),e}function v0(e,t){return"circle"===t.value?t:e}function y0(e){const t=e.component.legends,n={};for(const r of CU(t)){const i=e$(e.getScaleComponent(r).get("domains"));if(n[i])for(const e of n[i]){g0(e,t[r])||n[i].push(t[r])}else n[i]=[t[r].clone()]}const r=OU(n).flat().map((t=>function(e,t){const{disable:n,labelExpr:r,selections:i,...a}=e.combine();if(n)return;!1===t.aria&&null==a.aria&&(a.aria=!1);if(a.encode?.symbols){const e=a.encode.symbols.update;!e.fill||"transparent"===e.fill.value||e.stroke||a.stroke||(e.stroke={value:"transparent"});for(const t of PX)a[t]&&delete e[t]}a.title||delete a.title;if(void 0!==r){let e=r;a.encode?.labels?.update&&wH(a.encode.labels.update.text)&&(e=UU(r,"datum.label",a.encode.labels.update.text.signal)),function(e,t,n,r){var i,a;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(a=e.encode[t]).update??(a.update={}),e.encode[t].update[n]=r}(a,"labels","text",{signal:e})}return a}(t,e.config))).filter((e=>void 0!==e));return r}function b0(e){return J1(e)||Z1(e)?function(e){return e.children.reduce(((e,t)=>e.concat(t.assembleProjections())),x0(e))}(e):x0(e)}function x0(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map((e=>e.signal)).join(", ")}]`},a=t.data.reduce(((t,n)=>{const r=wH(n)?n.signal:`data('${e.lookupDataSource(n)}')`;return vU(t,r)||t.push(r),t}),[]);if(a.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:a.length>1?`[${a.join(", ")}]`:a[0]},...n}]}return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const _0=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class w0 extends mZ{constructor(e,t,n,r){super({...t},{name:e}),this.specifiedProjection=t,this.size=n,this.data=r,this.merged=!1}get isFit(){return!!this.data}}function A0(e){e.component.projection=X1(e)?function(e){if(e.hasProjection){const t=bH(e.specifiedProjection),n=!(t&&(null!=t.scale||null!=t.translate)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?function(e){const t=[],{encoding:n}=e;for(const r of[[g$,m$],[y$,v$]])(RY(n[r[0]])||RY(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});e.channelHasField(w$)&&e.typedFieldDef(w$).type===hW&&t.push({signal:e.getName(`geojson_${t.length}`)});0===t.length&&t.push(e.requestDataName(CZ.Main));return t}(e):void 0,a=new w0(e.projectionName(!0),{...bH(e.config.projection),...t},r,i);return a.get("type")||a.set("type","equalEarth",!1),a}return}(e):function(e){if(0===e.children.length)return;let t;for(const t of e.children)A0(t);const n=bU(e.children,(e=>{const n=e.component.projection;if(n){if(t){const e=function(e,t){const n=bU(_0,(n=>!dl(e.explicit,n)&&!dl(t.explicit,n)||!!(dl(e.explicit,n)&&dl(t.explicit,n)&&QU(e.get(n),t.get(n))))),r=QU(e.size,t.size);if(r){if(n)return e;if(QU(e.explicit,{}))return t;if(QU(t.explicit,{}))return e}return null}(t,n);return e&&(t=e),!!e}return t=n,!0}return!0}));if(t&&n){const n=e.projectionName(!0),r=new w0(n,t.specifiedProjection,t.size,fU(t.data));for(const t of e.children){const e=t.component.projection;e&&(e.isFit&&r.data.push(...t.component.projection.data),t.renameProjection(e.get("name"),n),e.merged=!0)}return r}return}(e)}function k0(e,t,n,r){if(BY(t,n)){const i=X1(e)?e.axis(n)??e.legend(n)??{}:{},a=_Y(t,{expr:"datum"}),o=_Y(t,{expr:"datum",binSuffix:"end"});return{formulaAs:_Y(t,{binSuffix:"range",forAs:!0}),formula:qG(a,o,i.format,i.formatType,r)}}return{}}function E0(e,t){return`${dH(e)}_${t}`}function T0(e,t,n){const r=E0(PY(n,void 0)??{},t);return e.getName(`${r}_bins`)}function M0(e,t,n){let r,i;r=function(e){return"as"in e}(e)?Al(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:[_Y(e,{forAs:!0}),_Y(e,{binSuffix:"end",forAs:!0})];const a={...PY(t,void 0)},o=E0(a,e.field),{signal:s,extentSignal:l}=function(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}(n,o);if(gH(a.extent)){const e=a.extent;i=vQ(n,e.param,e),delete a.extent}return{key:o,binComponent:{bin:a,field:e.field,as:[r],...s?{signal:s}:{},...l?{extentSignal:l}:{},...i?{span:i}:{}}}}class S0 extends FZ{clone(){return new S0(null,fU(this.bins))}constructor(e,t){super(e),this.bins=t}static makeFromEncoding(e,t){const n=t.reduceFieldDef(((e,n,r)=>{if(pY(n)&&hH(n.bin)){const{key:i,binComponent:a}=M0(n,n.bin,t);e[i]={...a,...e[i],...k0(t,n,r,t.config)}}return e}),{});return SU(n)?null:new S0(e,n)}static makeFromTransform(e,t,n){const{key:r,binComponent:i}=M0(t,t.bin,n);return new S0(e,{[r]:i})}merge(e,t){for(const n of CU(e.bins))n in this.bins?(t(e.bins[n].signal,this.bins[n].signal),this.bins[n].as=wU([...this.bins[n].as,...e.bins[n].as],mU)):this.bins[n]=e.bins[n];for(const t of e.children)e.removeChild(t),t.parent=this;e.remove()}producedFields(){return new Set(OU(this.bins).map((e=>e.as)).flat(2))}dependentFields(){return new Set(OU(this.bins).map((e=>e.field)))}hash(){return`Bin ${mU(this.bins)}`}assemble(){return OU(this.bins).flatMap((e=>{const t=[],[n,...r]=e.as,{extent:i,...a}=e.bin,o={type:"bin",field:BU(e.field),as:n,signal:e.signal,...gH(i)?{extent:null}:{extent:i},...e.span?{span:{signal:`span(${e.span})`}}:{},...a};!i&&e.extentSignal&&(t.push({type:"extent",field:BU(e.field),signal:e.extentSignal}),o.extent={signal:e.extentSignal}),t.push(o);for(const e of r)for(let r=0;r<2;r++)t.push({type:"formula",expr:_Y({field:n[r]},{expr:"datum"}),as:e[r]});return e.formula&&t.push({type:"formula",expr:e.formula,as:e.formulaAs}),t}))}}function C0(e,t,n,r){const i=X1(r)?r.encoding[cq(t)]:void 0;if(pY(n)&&X1(r)&&nY(n,i,r.markDef,r.config)){e.add(_Y(n,{})),e.add(_Y(n,{suffix:"end"}));const{mark:i,markDef:a,config:o}=r,s=eY({fieldDef:n,markDef:a,config:o});uG(i)&&.5!==s&&Lq(t)&&(e.add(_Y(n,{suffix:$Z})),e.add(_Y(n,{suffix:qZ}))),n.bin&&BY(n,t)&&e.add(_Y(n,{binSuffix:"range"}))}else if($$(t)){const n=U$(t);e.add(r.getName(n))}else e.add(_Y(n));return gY(n)&&function(e){return Ms(e)&&"field"in e}(n.scale?.range)&&e.add(n.scale.range.field),e}class O0 extends FZ{clone(){return new O0(null,new Set(this.dimensions),fU(this.measures))}constructor(e,t,n){super(e),this.dimensions=t,this.measures=n}get groupBy(){return this.dimensions}static makeFromEncoding(e,t){let n=!1;t.forEachFieldDef((e=>{e.aggregate&&(n=!0)}));const r={},i=new Set;return n?(t.forEachFieldDef(((e,n)=>{const{aggregate:a,field:o}=e;if(a)if("count"===a)r["*"]??(r["*"]={}),r["*"].count=new Set([_Y(e,{forAs:!0})]);else{if(aH(a)||oH(a)){const e=aH(a)?"argmin":"argmax",t=a[e];r[t]??(r[t]={}),r[t][e]=new Set([_Y({op:e,field:t},{forAs:!0})])}else r[o]??(r[o]={}),r[o][a]=new Set([_Y(e,{forAs:!0})]);Zq(n)&&"unaggregated"===t.scaleDomain(n)&&(r[o]??(r[o]={}),r[o].min=new Set([_Y({field:o,aggregate:"min"},{forAs:!0})]),r[o].max=new Set([_Y({field:o,aggregate:"max"},{forAs:!0})]))}else C0(i,n,e,t)})),i.size+CU(r).length===0?null:new O0(e,i,r)):null}static makeFromTransform(e,t){var n;const r=new Set,i={};for(const e of t.aggregate){const{op:t,field:r,as:a}=e;t&&("count"===t?(i["*"]??(i["*"]={}),i["*"].count=new Set([a||_Y(e,{forAs:!0})])):(i[r]??(i[r]={}),(n=i[r])[t]??(n[t]=new Set),i[r][t].add(a||_Y(e,{forAs:!0}))))}for(const e of t.groupby??[])r.add(e);return r.size+CU(i).length===0?null:new O0(e,r,i)}merge(e){return kU(this.dimensions,e.dimensions)?(function(e,t){for(const n of CU(t)){const r=t[n];for(const t of CU(r))n in e?e[n][t]=new Set([...e[n][t]??[],...r[t]]):e[n]={[t]:r[t]}}}(this.measures,e.measures),!0):(function(...e){AV.debug(...e)}("different dimensions, cannot merge"),!1)}addDimensions(e){e.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...CU(this.measures)])}producedFields(){const e=new Set;for(const t of CU(this.measures))for(const n of CU(this.measures[t])){const r=this.measures[t][n];0===r.size?e.add(`${n}_${t}`):r.forEach(e.add,e)}return e}hash(){return`Aggregate ${mU({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const e=[],t=[],n=[];for(const r of CU(this.measures))for(const i of CU(this.measures[r]))for(const a of this.measures[r][i])n.push(a),e.push(i),t.push("*"===r?null:BU(r));return{type:"aggregate",groupby:[...this.dimensions].map(BU),ops:e,fields:t,as:n}}}class R0 extends FZ{constructor(e,t,n,r){super(e),this.model=t,this.name=n,this.data=r;for(const e of G$){const n=t.facet[e];if(n){const{bin:r,sort:i}=n;this[e]={name:t.getName(`${e}_domain`),fields:[_Y(n),...hH(r)?[_Y(n,{binSuffix:"end"})]:[]],...GG(i)?{sortField:i}:Ts(i)?{sortIndexField:RQ(n,e)}:{}}}}this.childModel=t.child}hash(){let e="Facet";for(const t of G$)this[t]&&(e+=` ${t.charAt(0)}:${mU(this[t])}`);return e}get fields(){const e=[];for(const t of G$)this[t]?.fields&&e.push(...this[t].fields);return e}dependentFields(){const e=new Set(this.fields);for(const t of G$)this[t]&&(this[t].sortField&&e.add(this[t].sortField.field),this[t].sortIndexField&&e.add(this[t].sortIndexField));return e}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const e={};for(const t of Nq){const n=this.childModel.component.scales[t];if(n&&!n.merged){const r=n.get("type"),i=n.get("range");if(NW(r)&&AH(i)){const n=T1(M1(this.childModel,t));n?e[t]=n:EV(KH(t))}}}return e}assembleRowColumnHeaderData(e,t,n){const r={row:"y",column:"x",facet:void 0}[e],i=[],a=[],o=[];r&&n&&n[r]&&(t?(i.push(`distinct_${n[r]}`),a.push("max")):(i.push(n[r]),a.push("distinct")),o.push(`distinct_${n[r]}`));const{sortField:s,sortIndexField:l}=this[e];if(s){const{op:e=HG,field:t}=s;i.push(t),a.push(e),o.push(_Y(s,{forAs:!0}))}else l&&(i.push(l),a.push("max"),o.push(l));return{name:this[e].name,source:t??this.data,transform:[{type:"aggregate",groupby:this[e].fields,...i.length?{fields:i,ops:a,as:o}:{}}]}}assembleFacetHeaderData(e){const{columns:t}=this.model.layout,{layoutHeaders:n}=this.model.component,r=[],i={};for(const e of PQ){for(const t of IQ){const r=(n[e]&&n[e][t])??[];for(const t of r)if(t.axes?.length>0){i[e]=!0;break}}if(i[e]){const n=`length(data("${this.facet.name}"))`,i="row"===e?t?{signal:`ceil(${n} / ${t})`}:1:t?{signal:`min(${n}, ${t})`}:{signal:n};r.push({name:`${this.facet.name}_${e}`,transform:[{type:"sequence",start:0,stop:i}]})}}const{row:a,column:o}=i;return(a||o)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,e)),r}assemble(){const e=[];let t=null;const n=this.getChildIndependentFieldsWithStep(),{column:r,row:i,facet:a}=this;if(r&&i&&(n.x||n.y)){t=`cross_${this.column.name}_${this.row.name}`;const r=[].concat(n.x??[],n.y??[]),i=r.map((()=>"distinct"));e.push({name:t,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:r,ops:i}]})}for(const r of[r$,n$])this[r]&&e.push(this.assembleRowColumnHeaderData(r,t,n));if(a){const t=this.assembleFacetHeaderData(n);t&&e.push(...t)}return e}}function N0(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function L0(e){const t={};return cU(e.filter,(e=>{if(tW(e)){let n=null;YV(e)?n=CH(e.equal):KV(e)?n=CH(e.lte):XV(e)?n=CH(e.lt):ZV(e)?n=CH(e.gt):JV(e)?n=CH(e.gte):QV(e)?n=e.range[0]:eW(e)&&(n=(e.oneOf??e.in)[0]),n&&(TV(n)?t[e.field]="date":_l(n)?t[e.field]="number":Al(n)&&(t[e.field]="string")),e.timeUnit&&(t[e.field]="date")}})),t}function D0(e){const t={};function n(e){var n;FY(e)?t[e.field]="date":"quantitative"===e.type&&(Al(n=e.aggregate)&&vU(["min","max"],n))?t[e.field]="number":qU(e.field)>1?e.field in t||(t[e.field]="flatten"):gY(e)&&GG(e.sort)&&qU(e.sort.field)>1&&(e.sort.field in t||(t[e.sort.field]="flatten"))}if((X1(e)||K1(e))&&e.forEachFieldDef(((t,r)=>{if(pY(t))n(t);else{const i=sq(r),a=e.fieldDef(i);n({...t,type:a.type})}})),X1(e)){const{mark:n,markDef:r,encoding:i}=e;if(cG(n)&&!e.encoding.order){const e=i["horizontal"===r.orient?"y":"x"];sY(e)&&"quantitative"===e.type&&!(e.field in t)&&(t[e.field]="number")}}return t}class P0 extends FZ{clone(){return new P0(null,fU(this._parse))}constructor(e,t){super(e),this._parse=t}hash(){return`Parse ${mU(this._parse)}`}static makeExplicit(e,t,n){let r={};const i=t.data;return!EZ(i)&&i?.format?.parse&&(r=i.format.parse),this.makeWithAncestors(e,r,{},n)}static makeWithAncestors(e,t,n,r){for(const e of CU(n)){const t=r.getWithExplicit(e);void 0!==t.value&&(t.explicit||t.value===n[e]||"derived"===t.value||"flatten"===n[e]?delete n[e]:EV(nV(e,n[e],t.value)))}for(const e of CU(t)){const n=r.get(e);void 0!==n&&(n===t[e]?delete t[e]:EV(nV(e,t[e],n)))}const i=new mZ(t,n);r.copyAll(i);const a={};for(const e of CU(i.combine())){const t=i.get(e);null!==t&&(a[e]=t)}return 0===CU(a).length||r.parseNothing?null:new P0(e,a)}get parse(){return this._parse}merge(e){this._parse={...this._parse,...e.parse},e.remove()}assembleFormatParse(){const e={};for(const t of CU(this._parse)){const n=this._parse[t];1===qU(t)&&(e[t]=n)}return e}producedFields(){return new Set(CU(this._parse))}dependentFields(){return new Set(CU(this._parse))}assembleTransforms(e=!1){return CU(this._parse).filter((t=>!e||qU(t)>1)).map((e=>{const t=function(e,t){const n=FU(e);if("number"===t)return`toNumber(${n})`;if("boolean"===t)return`toBoolean(${n})`;if("string"===t)return`toString(${n})`;if("date"===t)return`toDate(${n})`;if("flatten"===t)return n;if(t.startsWith("date:"))return`timeParse(${n},'${N0(t.slice(5,t.length))}')`;if(t.startsWith("utc:"))return`utcParse(${n},'${N0(t.slice(4,t.length))}')`;return EV(`Unrecognized parse "${t}".`),null}(e,this._parse[e]);if(!t)return null;return{type:"formula",expr:t,as:$U(e)}})).filter((e=>null!==e))}}class I0 extends FZ{clone(){return new I0(null)}constructor(e){super(e)}dependentFields(){return new Set}producedFields(){return new Set([FX])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:FX}}}class F0 extends FZ{clone(){return new F0(null,this.params)}constructor(e,t){super(e),this.params=t}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${mU(this.params)}`}assemble(){return{type:"graticule",...!0===this.params?{}:this.params}}}class z0 extends FZ{clone(){return new z0(null,this.params)}constructor(e,t){super(e),this.params=t}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${mU(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class j0 extends FZ{constructor(e){let t;if(super(null),e??(e={name:"source"}),EZ(e)||(t=e.format?{...pU(e.format,["parse"])}:{}),AZ(e))this._data={values:e.values};else if(wZ(e)){if(this._data={url:e.url},!t.type){let n=/(?:\.([^.]+))?$/.exec(e.url)[1];vU(["json","csv","tsv","dsv","topojson"],n)||(n="json"),t.type=n}}else MZ(e)?this._data={values:[{type:"Sphere"}]}:(kZ(e)||EZ(e))&&(this._data={});this._generator=EZ(e),e.name&&(this._name=e.name),t&&!SU(t)&&(this._data.format=t)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(e){this._name=e}set parent(e){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var B0,U0=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},$0=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};function q0(e){return e instanceof j0||e instanceof F0||e instanceof z0}class H0{constructor(){B0.set(this,void 0),U0(this,B0,!1,"f")}setModified(){U0(this,B0,!0,"f")}get modifiedFlag(){return $0(this,B0,"f")}}B0=new WeakMap;class V0 extends H0{getNodeDepths(e,t,n){n.set(e,t);for(const r of e.children)this.getNodeDepths(r,t+1,n);return n}optimize(e){const t=[...this.getNodeDepths(e,0,new Map).entries()].sort(((e,t)=>t[1]-e[1]));for(const e of t)this.run(e[0]);return this.modifiedFlag}}class W0 extends H0{optimize(e){this.run(e);for(const t of e.children)this.optimize(t);return this.modifiedFlag}}class G0 extends W0{mergeNodes(e,t){const n=t.shift();for(const r of t)e.removeChild(r),r.parent=n,r.remove()}run(e){const t=e.children.map((e=>e.hash())),n={};for(let r=0;r<t.length;r++)void 0===n[t[r]]?n[t[r]]=[e.children[r]]:n[t[r]].push(e.children[r]);for(const t of CU(n))n[t].length>1&&(this.setModified(),this.mergeNodes(e,n[t]))}}class Y0 extends W0{constructor(e){super(),this.requiresSelectionId=e&&uQ(e)}run(e){e instanceof I0&&(this.requiresSelectionId&&(q0(e.parent)||e.parent instanceof O0||e.parent instanceof P0)||(this.setModified(),e.remove()))}}class X0 extends H0{optimize(e){return this.run(e,new Set),this.modifiedFlag}run(e,t){let n=new Set;e instanceof UZ&&(n=e.producedFields(),EU(n,t)&&(this.setModified(),e.removeFormulas(t),0===e.producedFields.length&&e.remove()));for(const r of e.children)this.run(r,new Set([...t,...n]))}}class K0 extends W0{constructor(){super()}run(e){e instanceof zZ&&!e.isRequired()&&(this.setModified(),e.remove())}}class Z0 extends V0{run(e){if(!(q0(e)||e.numChildren()>1))for(const t of e.children)if(t instanceof P0)if(e instanceof P0)this.setModified(),e.merge(t);else{if(MU(e.producedFields(),t.dependentFields()))continue;this.setModified(),t.swapWithParent()}}}class J0 extends V0{run(e){const t=[...e.children],n=e.children.filter((e=>e instanceof P0));if(e.numChildren()>1&&n.length>=1){const r={},i=new Set;for(const e of n){const t=e.parse;for(const e of CU(t))e in r?r[e]!==t[e]&&i.add(e):r[e]=t[e]}for(const e of i)delete r[e];if(!SU(r)){this.setModified();const n=new P0(e,r);for(const i of t){if(i instanceof P0)for(const e of CU(r))delete i.parse[e];e.removeChild(i),i.parent=n,i instanceof P0&&0===CU(i.parse).length&&i.remove()}}}}}class Q0 extends V0{run(e){e instanceof zZ||e.numChildren()>0||e instanceof R0||e instanceof j0||(this.setModified(),e.remove())}}class e1 extends V0{run(e){const t=e.children.filter((e=>e instanceof UZ)),n=t.pop();for(const e of t)this.setModified(),n.merge(e)}}class t1 extends V0{run(e){const t=e.children.filter((e=>e instanceof O0)),n={};for(const e of t){const t=mU(e.groupBy);t in n||(n[t]=[]),n[t].push(e)}for(const t of CU(n)){const r=n[t];if(r.length>1){const t=r.pop();for(const n of r)t.merge(n)&&(e.removeChild(n),n.parent=t,n.remove(),this.setModified())}}}}class n1 extends V0{constructor(e){super(),this.model=e}run(e){const t=!(q0(e)||e instanceof mQ||e instanceof P0||e instanceof I0),n=[],r=[];for(const i of e.children)i instanceof S0&&(t&&!MU(e.producedFields(),i.dependentFields())?n.push(i):r.push(i));if(n.length>0){const t=n.pop();for(const e of n)t.merge(e,this.model.renameSignal.bind(this.model));this.setModified(),e instanceof S0?e.merge(t,this.model.renameSignal.bind(this.model)):t.swapWithParent()}if(r.length>1){const e=r.pop();for(const t of r)e.merge(t,this.model.renameSignal.bind(this.model));this.setModified()}}}class r1 extends V0{run(e){const t=[...e.children];if(!yU(t,(e=>e instanceof zZ))||e.numChildren()<=1)return;const n=[];let r;for(const i of t)if(i instanceof zZ){let t=i;for(;1===t.numChildren();){const[e]=t.children;if(!(e instanceof zZ))break;t=e}n.push(...t.children),r?(e.removeChild(i),i.parent=r.parent,r.parent.removeChild(r),r.parent=t,this.setModified()):r=t}else n.push(i);if(n.length){this.setModified();for(const e of n)e.parent.removeChild(e),e.parent=r}}}class i1 extends FZ{clone(){return new i1(null,fU(this.transform))}constructor(e,t){super(e),this.transform=t}addDimensions(e){this.transform.groupby=wU(this.transform.groupby.concat(e),(e=>e))}dependentFields(){const e=new Set;return this.transform.groupby&&this.transform.groupby.forEach(e.add,e),this.transform.joinaggregate.map((e=>e.field)).filter((e=>void 0!==e)).forEach(e.add,e),e}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(e){return e.as??_Y(e)}hash(){return`JoinAggregateTransform ${mU(this.transform)}`}assemble(){const e=[],t=[],n=[];for(const r of this.transform.joinaggregate)t.push(r.op),n.push(this.getDefaultName(r)),e.push(void 0===r.field?null:r.field);const r=this.transform.groupby;return{type:"joinaggregate",as:n,ops:t,fields:e,...void 0!==r?{groupby:r}:{}}}}class a1 extends FZ{clone(){return new a1(null,{...this.filter})}constructor(e,t){super(e),this.filter=t}static make(e,t,n){const{config:r,markDef:i}=t,{marks:a,scales:o}=n;if("include-invalid-values"===a&&"include-invalid-values"===o)return null;const s=t.reduceFieldDef(((e,n,a)=>{const o=Zq(a)&&t.getScaleComponent(a);if(o){const t=o.get("type"),{aggregate:s}=n,l=kG({scaleChannel:a,markDef:i,config:r,scaleType:t,isCountAggregate:cH(s)});"show"!==l&&"always-valid"!==l&&(e[n.field]=n)}return e}),{});return CU(s).length?new a1(e,s):null}dependentFields(){return new Set(CU(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${mU(this.filter)}`}assemble(){const e=CU(this.filter).reduce(((e,t)=>{const n=this.filter[t],r=_Y(n,{expr:"datum"});return null!==n&&("temporal"===n.type?e.push(`(isDate(${r}) || (${o1(r)}))`):"quantitative"===n.type&&e.push(o1(r))),e}),[]);return e.length>0?{type:"filter",expr:e.join(" && ")}:null}}function o1(e){return`isValid(${e}) && isFinite(+${e})`}class s1 extends FZ{clone(){return new s1(null,fU(this._stack))}constructor(e,t){super(e),this._stack=t}static makeFromTransform(e,t){const{stack:n,groupby:r,as:i,offset:a="zero"}=t,o=[],s=[];if(void 0!==t.sort)for(const e of t.sort)o.push(e.field),s.push(HU(e.order,"ascending"));const l={field:o,order:s};let c;return c=function(e){return Ts(e)&&e.every((e=>Al(e)))&&e.length>1}(i)?i:Al(i)?[i,`${i}_end`]:[`${t.stack}_start`,`${t.stack}_end`],new s1(e,{dimensionFieldDefs:[],stackField:n,groupby:r,offset:a,sort:l,facetby:[],as:c})}static makeFromEncoding(e,t){const n=t.stack,{encoding:r}=t;if(!n)return null;const{groupbyChannels:i,fieldChannel:a,offset:o,impute:s}=n,l=i.map((e=>OY(r[e]))).filter((e=>!!e)),c=function(e){return e.stack.stackBy.reduce(((e,t)=>{const n=_Y(t.fieldDef);return n&&e.push(n),e}),[])}(t),u=t.encoding.order;let f;if(Ts(u)||sY(u))f=UH(u);else{const e=rY(u)?u.sort:"y"===a?"descending":"ascending";f=c.reduce(((t,n)=>(t.field.includes(n)||(t.field.push(n),t.order.push(e)),t)),{field:[],order:[]})}return new s1(e,{dimensionFieldDefs:l,stackField:t.vgField(a),facetby:[],stackby:c,sort:f,offset:o,impute:s,as:[t.vgField(a,{suffix:"start",forAs:!0}),t.vgField(a,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(e){this._stack.facetby.push(...e)}dependentFields(){const e=new Set;return e.add(this._stack.stackField),this.getGroupbyFields().forEach(e.add,e),this._stack.facetby.forEach(e.add,e),this._stack.sort.field.forEach(e.add,e),e}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${mU(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:e,impute:t,groupby:n}=this._stack;return e.length>0?e.map((e=>e.bin?t?[_Y(e,{binSuffix:"mid"})]:[_Y(e,{}),_Y(e,{binSuffix:"end"})]:[_Y(e)])).flat():n??[]}assemble(){const e=[],{facetby:t,dimensionFieldDefs:n,stackField:r,stackby:i,sort:a,offset:o,impute:s,as:l}=this._stack;if(s)for(const a of n){const{bandPosition:n=.5,bin:o}=a;if(o){const t=_Y(a,{expr:"datum"}),r=_Y(a,{expr:"datum",binSuffix:"end"});e.push({type:"formula",expr:`${o1(t)} ? ${n}*${t}+${1-n}*${r} : ${t}`,as:_Y(a,{binSuffix:"mid",forAs:!0})})}e.push({type:"impute",field:r,groupby:[...i,...t],key:_Y(a,{binSuffix:"mid"}),method:"value",value:0})}return e.push({type:"stack",groupby:[...this.getGroupbyFields(),...t],field:r,sort:a,as:l,offset:o}),e}}class l1 extends FZ{clone(){return new l1(null,fU(this.transform))}constructor(e,t){super(e),this.transform=t}addDimensions(e){this.transform.groupby=wU(this.transform.groupby.concat(e),(e=>e))}dependentFields(){const e=new Set;return(this.transform.groupby??[]).forEach(e.add,e),(this.transform.sort??[]).forEach((t=>e.add(t.field))),this.transform.window.map((e=>e.field)).filter((e=>void 0!==e)).forEach(e.add,e),e}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(e){return e.as??_Y(e)}hash(){return`WindowTransform ${mU(this.transform)}`}assemble(){const e=[],t=[],n=[],r=[];for(const i of this.transform.window)t.push(i.op),n.push(this.getDefaultName(i)),r.push(void 0===i.param?null:i.param),e.push(void 0===i.field?null:i.field);const i=this.transform.frame,a=this.transform.groupby;if(i&&null===i[0]&&null===i[1]&&t.every((e=>sH(e))))return{type:"joinaggregate",as:n,ops:t,fields:e,...void 0!==a?{groupby:a}:{}};const o=[],s=[];if(void 0!==this.transform.sort)for(const e of this.transform.sort)o.push(e.field),s.push(e.order??"ascending");const l={field:o,order:s},c=this.transform.ignorePeers;return{type:"window",params:r,as:n,ops:t,fields:e,sort:l,...void 0!==c?{ignorePeers:c}:{},...void 0!==a?{groupby:a}:{},...void 0!==i?{frame:i}:{}}}}function c1(e){if(e instanceof R0)if(1!==e.numChildren()||e.children[0]instanceof zZ){const n=e.model.component.data.main;u1(n);const r=(t=e,function e(n){if(!(n instanceof R0)){const r=n.clone();if(r instanceof zZ){const e=f1+r.getSource();r.setSource(e),t.model.component.data.outputNodes[e]=r}else(r instanceof O0||r instanceof s1||r instanceof l1||r instanceof i1)&&r.addDimensions(t.fields);for(const t of n.children.flatMap(e))t.parent=r;return[r]}return n.children.flatMap(e)}),i=e.children.map(r).flat();for(const e of i)e.parent=n}else{const t=e.children[0];(t instanceof O0||t instanceof s1||t instanceof l1||t instanceof i1)&&t.addDimensions(e.fields),t.swapWithParent(),c1(e)}else e.children.map(c1);var t}function u1(e){if(e instanceof zZ&&e.type===CZ.Main&&1===e.numChildren()){const t=e.children[0];t instanceof R0||(t.swapWithParent(),u1(e))}}const f1="scale_",d1=5;function h1(e){for(const t of e){for(const e of t.children)if(e.parent!==t)return!1;if(!h1(t.children))return!1}return!0}function p1(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function m1(e,t,n){let r=e.sources,i=!1;return i=p1(new K0,r)||i,i=p1(new Y0(t),r)||i,r=r.filter((e=>e.numChildren()>0)),i=p1(new Q0,r)||i,r=r.filter((e=>e.numChildren()>0)),n||(i=p1(new Z0,r)||i,i=p1(new n1(t),r)||i,i=p1(new X0,r)||i,i=p1(new J0,r)||i,i=p1(new t1,r)||i,i=p1(new e1,r)||i,i=p1(new G0,r)||i,i=p1(new r1,r)||i),e.sources=r,i}class g1{constructor(e){Object.defineProperty(this,"signal",{enumerable:!0,get:e})}static fromName(e,t){return new g1((()=>e(t)))}}function v1(e){X1(e)?function(e){const t=e.component.scales;for(const n of CU(t)){const r=y1(e,n);if(t[n].setWithExplicit("domains",r),w1(e,n),e.component.data.isFaceted){let t=e;for(;!K1(t)&&t.parent;)t=t.parent;if("shared"===t.component.resolve.scale[n])for(const e of r.value)kH(e)&&(e.data=f1+e.data.replace(f1,""))}}}(e):function(e){for(const t of e.children)v1(t);const t=e.component.scales;for(const n of CU(t)){let r,i=null;for(const t of e.children){const e=t.component.scales[n];if(e){r=void 0===r?e.getWithExplicit("domains"):xZ(r,e.getWithExplicit("domains"),"domains","scale",k1);const t=e.get("selectionExtent");i&&t&&i.param!==t.param&&EV(eV),i=t}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}(e)}function y1(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=function(e,t,n,r){if("unaggregated"===e){const{valid:e,reason:r}=A1(t,n);if(!e)return void EV(r)}else if(void 0===e&&r.useUnaggregatedDomain){const{valid:e}=A1(t,n);if(e)return"unaggregated"}return e}(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),"x"===t&&RY(r.x2)?RY(r.x)?xZ(x1(n,i,e,"x"),x1(n,i,e,"x2"),"domain","scale",k1):x1(n,i,e,"x2"):"y"===t&&RY(r.y2)?RY(r.y)?xZ(x1(n,i,e,"y"),x1(n,i,e,"y2"),"domain","scale",k1):x1(n,i,e,"y2"):x1(n,i,e,t)}function b1(e,t,n){const r=HV(n)?.unit;return"temporal"===t||r?function(e,t,n){return e.map((e=>({signal:`{data: ${zY(e,{timeUnit:n,type:t})}}`})))}(e,t,r):[e]}function x1(e,t,n,r){const{encoding:i,markDef:a,mark:o,config:s,stack:l}=n,c=RY(i[r]),{type:u}=c,f=c.timeUnit,d=function(e){const{marks:t,scales:n}=OZ(e);return t===n?CZ.Main:"include-invalid-values"===n?CZ.PreFilterInvalid:CZ.PostFilterInvalid}({invalid:zH("invalid",a,s),isPath:cG(o)});if(function(e){return t$(e,"unionWith")}(t)){const i=x1(e,void 0,n,r);return gZ([...b1(t.unionWith,u,f),...i.value])}if(wH(t))return gZ([t]);if(t&&"unaggregated"!==t&&!IW(t))return gZ(b1(t,u,f));if(l&&r===l.fieldChannel){if("normalize"===l.offset)return vZ([[0,1]]);const e=n.requestDataName(d);return vZ([{data:e,field:n.vgField(r,{suffix:"start"})},{data:e,field:n.vgField(r,{suffix:"end"})}])}const h=Zq(r)&&sY(c)?function(e,t,n){if(!NW(n))return;const r=e.fieldDef(t),i=r.sort;if(YG(i))return{op:"min",field:RQ(r,t),order:"ascending"};const{stack:a}=e,o=a?new Set([...a.groupbyFields,...a.stackBy.map((e=>e.fieldDef.field))]):void 0;if(GG(i)){return _1(i,a&&!o.has(i.field))}if(function(e){return t$(e,"encoding")}(i)){const{encoding:t,order:n}=i,r=e.fieldDef(t),{aggregate:s,field:l}=r,c=a&&!o.has(l);if(aH(s)||oH(s))return _1({field:_Y(r),order:n},c);if(sH(s)||!s)return _1({op:s,field:l,order:n},c)}else{if("descending"===i)return{op:"min",field:e.vgField(t),order:"descending"};if(vU(["ascending",void 0],i))return!0}return}(n,r,e):void 0;if(cY(c)){return vZ(b1([c.datum],u,f))}const p=c;if("unaggregated"===t){const{field:e}=c;return vZ([{data:n.requestDataName(d),field:_Y({field:e,aggregate:"min"})},{data:n.requestDataName(d),field:_Y({field:e,aggregate:"max"})}])}if(hH(p.bin)){if(NW(e))return vZ("bin-ordinal"===e?[]:[{data:NU(h)?n.requestDataName(d):n.requestDataName(CZ.Raw),field:n.vgField(r,BY(p,r)?{binSuffix:"range"}:{}),sort:!0!==h&&Ms(h)?h:{field:n.vgField(r,{}),op:"min"}}]);{const{bin:e}=p;if(hH(e)){const t=T0(n,p.field,e);return vZ([new g1((()=>{const e=n.getSignalName(t);return`[${e}.start, ${e}.stop]`}))])}return vZ([{data:n.requestDataName(d),field:n.vgField(r,{})}])}}if(p.timeUnit&&vU(["time","utc"],e)){const e=i[cq(r)];if(nY(p,e,a,s)){const t=n.requestDataName(d),i=eY({fieldDef:p,fieldDef2:e,markDef:a,config:s}),l=uG(o)&&.5!==i&&Lq(r);return vZ([{data:t,field:n.vgField(r,l?{suffix:$Z}:{})},{data:t,field:n.vgField(r,{suffix:l?qZ:"end"})}])}}return vZ(h?[{data:NU(h)?n.requestDataName(d):n.requestDataName(CZ.Raw),field:n.vgField(r),sort:h}]:[{data:n.requestDataName(d),field:n.vgField(r)}])}function _1(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":HG),...r?{field:BU(r)}:{},...i?{order:i}:{}}}function w1(e,t){const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=e.fieldDef(t)?.bin,a=IW(r)?r:void 0,o=mH(i)&&gH(i.extent)?i.extent:void 0;(a||o)&&n.set("selectionExtent",a??o,!0)}function A1(e,t){const{aggregate:n,type:r}=e;return n?Al(n)&&!fH.has(n)?{valid:!1,reason:pV(n)}:"quantitative"===r&&"log"===t?{valid:!1,reason:mV(e)}:{valid:!0}:{valid:!1,reason:hV(e)}}function k1(e,t,n,r){return e.explicit&&t.explicit&&EV(function(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${e$(n)} and ${e$(r)}). Using the union of the two domains.`}(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function E1(e){const t=wU(e.map((e=>{if(kH(e)){const{sort:t,...n}=e;return n}return e})),mU),n=wU(e.map((e=>{if(kH(e)){const t=e.sort;return void 0===t||NU(t)||("op"in t&&"count"===t.op&&delete t.field,"ascending"===t.order&&delete t.order),t}})).filter((e=>void 0!==e)),mU);if(0===t.length)return;if(1===t.length){const t=e[0];if(kH(t)&&n.length>0){let e=n[0];if(n.length>1){EV(yV);const t=n.filter((e=>Ms(e)&&"op"in e&&"min"!==e.op));e=!n.every((e=>Ms(e)&&"op"in e))||1!==t.length||t[0]}else if(Ms(e)&&"field"in e){const n=e.field;t.field===n&&(e=!e.order||{order:e.order})}return{...t,sort:e}}return t}const r=wU(n.map((e=>NU(e)||!("op"in e)||Al(e.op)&&dl(iH,e.op)?e:(EV(function(e){return`Dropping sort property ${e$(e)} as unioned domains only support boolean or op "count", "min", and "max".`}(e)),!0))),mU);let i;1===r.length?i=r[0]:r.length>1&&(EV(yV),i=!0);const a=wU(e.map((e=>kH(e)?e.data:null)),(e=>e));if(1===a.length&&null!==a[0]){return{data:a[0],fields:t.map((e=>e.field)),...i?{sort:i}:{}}}return{fields:t,...i?{sort:i}:{}}}function T1(e){if(kH(e)&&Al(e.field))return e.field;if(function(e){return!Ts(e)&&t$(e,"fields")&&!t$(e,"data")}(e)){let t;for(const n of e.fields)if(kH(n)&&Al(n.field))if(t){if(t!==n.field)return EV("Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect."),t}else t=n.field;return EV("Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect."),t}if(function(e){return!Ts(e)&&t$(e,"fields")&&t$(e,"data")}(e)){EV("Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.");const t=e.fields[0];return Al(t)?t:void 0}}function M1(e,t){const n=e.component.scales[t].get("domains").map((t=>(kH(t)&&(t.data=e.lookupDataSource(t.data)),t)));return E1(n)}function S1(e){return J1(e)||Z1(e)?e.children.reduce(((e,t)=>e.concat(S1(t))),C1(e)):C1(e)}function C1(e){return CU(e.component.scales).reduce(((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:a,type:o,selectionExtent:s,domains:l,range:c,reverse:u,...f}=i,d=function(e,t,n,r){if(Lq(n)){if(AH(e))return{step:{signal:`${t}_step`}}}else if(Ms(e)&&kH(e))return{...e,data:r.lookupDataSource(e.data)};return e}(i.range,a,n,e),h=M1(e,n),p=s?function(e,t,n,r){const i=vQ(e,t.param,t);return{signal:LW(n.get("type"))&&Ts(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}(e,s,r,h):null;return t.push({name:a,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...void 0!==u?{reverse:u}:{},...f}),t}),[])}class O1 extends mZ{constructor(e,t){super({},{name:e}),this.merged=!1,this.setWithExplicit("type",t)}domainHasZero(){const e=this.get("type");if(vU([mW,yW,bW],e))return"definitely-not";const t=this.get("zero");if(!0===t||void 0===t&&vU([pW,vW,gW],e))return"definitely";const n=this.get("domains");if(n.length>0){let e=!1,t=!1,r=!1;for(const i of n){if(Ts(i)){const n=i[0],r=i[i.length-1];if(_l(n)&&_l(r)){if(n<=0&&r>=0){e=!0;continue}t=!0;continue}}r=!0}if(e)return"definitely";if(t&&!r)return"definitely-not"}return"maybe"}}const R1=["range","scheme"];function N1(e,t){const n=e.fieldDef(t);if(n?.bin){const{bin:r,field:i}=n,a=uq(t),o=e.getName(a);if(Ms(r)&&r.binned&&void 0!==r.step)return new g1((()=>{const n=e.scaleName(t),i=`(domain("${n}")[1] - domain("${n}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${i})`}));if(hH(r)){const t=T0(e,i,r);return new g1((()=>{const n=e.getSignalName(t),r=`(${n}.stop - ${n}.start) / ${n}.step`;return`${e.getSignalName(o)} / (${r})`}))}}}function L1(e,t){const n=t.specifiedScales[e],{size:r}=t,i=t.getScaleComponent(e).get("type");for(const r of R1)if(void 0!==n[r]){const a=WW(i,r),o=GW(e,r);if(a)if(o)EV(o);else switch(r){case"range":{const r=n.range;if(Ts(r)){if(Lq(e))return gZ(r.map((e=>{if("width"===e||"height"===e){const n=t.getName(e),r=t.getSignalName.bind(t);return g1.fromName(r,n)}return e})))}else if(Ms(r))return gZ({data:t.requestDataName(CZ.Main),field:r.field,sort:{op:"min",field:t.vgField(e)}});return gZ(r)}case"scheme":return gZ(D1(n[r]))}else EV(gV(i,r,e))}const a=e===a$||"xOffset"===e?"width":"height",o=r[a];if(GX(o))if(Lq(e))if(NW(i)){const n=I1(o,t,e);if(n)return gZ({step:n})}else EV(vV(a));else if(zq(e)){const n=e===c$?"x":"y";if("band"===t.getScaleComponent(n).get("type")){const e=F1(o,i);if(e)return gZ(e)}}const{rangeMin:s,rangeMax:l}=n,c=function(e,t){const{size:n,config:r,mark:i,encoding:a}=t,{type:o}=RY(a[e]),s=t.getScaleComponent(e),l=s.get("type"),{domain:c,domainMid:u}=t.specifiedScales[e];switch(e){case a$:case o$:if(vU(["point","band"],l)){const i=z1(e,n,r.view);if(GX(i)){return{step:I1(i,t,e)}}}return P1(e,t,l);case c$:case u$:return function(e,t,n){const r=e===c$?"x":"y",i=t.getScaleComponent(r);if(!i)return P1(r,t,n,{center:!0});const a=i.get("type"),o=t.scaleName(r),{markDef:s,config:l}=t;if("band"===a){const e=z1(r,t.size,t.config.view);if(GX(e)){const t=F1(e,n);if(t)return t}return[0,{signal:`bandwidth('${o}')`}]}{const n=t.encoding[r];if(sY(n)&&n.timeUnit){const e=VV(n.timeUnit,(e=>`scale('${o}', ${e})`)),r=t.config.scale.bandWithNestedOffsetPaddingInner,i=eY({fieldDef:n,markDef:s,config:l})-.5,a=0!==i?` + ${i}`:"";if(r){return[{signal:`${wH(r)?`${r.signal}/2`+a:`${r/2+i}`} * (${e})`},{signal:`${wH(r)?`(1 - ${r.signal}/2)`+a:`${1-r/2+i}`} * (${e})`}]}return[0,{signal:e}]}return dU(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}(e,t,l);case A$:{const a=function(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(cV("size",e))}(i,r),o=function(e,t,n,r){const i={x:N1(n,"x"),y:N1(n,"y")};switch(e){case"bar":case"tick":{if(void 0!==r.scale.maxBandSize)return r.scale.maxBandSize;const e=B1(t,i,r.view);return _l(e)?e-1:new g1((()=>`${e.signal} - 1`))}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const e=B1(t,i,r.view);return _l(e)?Math.pow(j1*e,2):new g1((()=>`pow(${j1} * ${e.signal}, 2)`))}}throw new Error(cV("size",e))}(i,n,t,r);return PW(l)?function(e,t,n){const r=()=>{const r=DH(t),i=DH(e),a=`(${r} - ${i}) / (${n} - 1)`;return`sequence(${i}, ${r} + ${a}, ${a})`};return wH(t)?new g1(r):{signal:r()}}(a,o,function(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return void 0!==n&&Ts(n)?n.length+1:(EV(function(e){return`Domain for ${e} is required for threshold scale.`}(r)),3)}}(l,r,c,e)):[a,o]}case h$:return[0,2*Math.PI];case k$:return[0,360];case f$:return[0,new g1((()=>`min(${t.getSignalName(K1(t.parent)?"child_width":"width")},${t.getSignalName(K1(t.parent)?"child_height":"height")})/2`))];case S$:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case C$:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case w$:return"symbol";case b$:case x$:case _$:return"ordinal"===l?"nominal"===o?"category":"ordinal":void 0!==u?"diverging":"rect"===i||"geoshape"===i?"heatmap":"ramp";case E$:case T$:case M$:return[r.scale.minOpacity,r.scale.maxOpacity]}}(e,t);return(void 0!==s||void 0!==l)&&WW(i,"rangeMin")&&Ts(c)&&2===c.length?gZ([s??c[0],l??c[1]]):vZ(c)}function D1(e){return function(e){return!Al(e)&&t$(e,"name")}(e)?{scheme:e.name,...pU(e,["name"])}:{scheme:e}}function P1(e,t,n,{center:r}={}){const i=uq(e),a=t.getName(i),o=t.getSignalName.bind(t);return e===o$&&LW(n)?r?[g1.fromName((e=>`${o(e)}/2`),a),g1.fromName((e=>`-${o(e)}/2`),a)]:[g1.fromName(o,a),0]:r?[g1.fromName((e=>`-${o(e)}/2`),a),g1.fromName((e=>`${o(e)}/2`),a)]:[0,g1.fromName(o,a)]}function I1(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),a=dq(n),o=r[a];if("offset"===WX({step:e,offsetIsDiscrete:hY(o)&&lW(o.type)})&&JY(r,a)){const n=t.getScaleComponent(a);let r=`domain('${t.scaleName(a)}').length`;if("band"===n.get("type")){r=`bandspace(${r}, ${n.get("paddingInner")??n.get("padding")??0}, ${n.get("paddingOuter")??n.get("padding")??0})`}const o=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${r} / (1-${NH(o)})`}}return e.step}function F1(e,t){if("offset"===WX({step:e,offsetIsDiscrete:NW(t)}))return{step:e.step}}function z1(e,t,n){const r=e===a$?"width":"height",i=t[r];return i||JX(n,r)}const j1=.95;function B1(e,t,n){const r=GX(e.width)?e.width.step:ZX(n,"width"),i=GX(e.height)?e.height.step:ZX(n,"height");return t.x||t.y?new g1((()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`)):Math.min(r,i)}function U1(e,t){X1(e)?function(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:a,specifiedScales:o}=e;for(const s of CU(n)){const l=o[s],c=n[s],u=e.getScaleComponent(s),f=RY(i[s]),d=l[t],h=u.get("type"),p=u.get("padding"),m=u.get("paddingInner"),g=WW(h,t),v=GW(s,t);if(void 0!==d&&(g?v&&EV(v):EV(gV(h,t,s))),g&&void 0===v)if(void 0!==d){const e=f.timeUnit,n=f.type;switch(t){case"domainMax":case"domainMin":TV(l[t])||"temporal"===n||e?c.set(t,{signal:zY(l[t],{type:n,timeUnit:e})},!0):c.set(t,l[t],!0);break;default:c.copyKeyFromObject(t,l)}}else{const n=t$($1,t)?$1[t]({model:e,channel:s,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:a,config:r,hasNestedOffsetScale:QY(i,s),hasSecondaryRangeChannel:!!i[cq(s)]}):r.scale[t];void 0!==n&&c.set(t,n,!1)}}}(e,t):H1(e,t)}const $1={bins:({model:e,fieldOrDatumDef:t})=>sY(t)?function(e,t){const n=t.bin;if(hH(n)){const r=T0(e,t.field,n);return new g1((()=>e.getSignalName(r)))}if(pH(n)&&mH(n)&&void 0!==n.step)return{step:n.step};return}(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>function(e,t){if(vU([b$,x$,_$],e)&&"nominal"!==t)return"hcl";return}(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:a})=>function(e,t,n,r,i,a){if(OY(a)?.bin||Ts(n)||null!=i||null!=r||vU([yW,bW],e))return;return!!Lq(t)||void 0}(e,t,n,r,i,a),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>function(e,t,n,r,i,a){if(Lq(e)){if(DW(t)){if(void 0!==n.continuousPadding)return n.continuousPadding;const{type:t,orient:o}=i;if("bar"===t&&(!sY(r)||!r.bin&&!r.timeUnit)&&("vertical"===o&&"x"===e||"horizontal"===o&&"y"===e))return a.continuousBandSize}if(t===xW)return n.pointPadding}return}(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:a})=>function(e,t,n,r,i,a=!1){if(void 0!==e)return;if(Lq(t)){const{bandPaddingInner:e,barBandPaddingInner:t,rectBandPaddingInner:r,tickBandPaddingInner:o,bandWithNestedOffsetPaddingInner:s}=i;return a?s:HU(e,"bar"===n?t:"tick"===n?o:r)}if(zq(t)&&r===_W)return i.offsetBandPaddingInner;return}(e,t,n.type,r,i.scale,a),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:a})=>function(e,t,n,r,i,a=!1){if(void 0!==e)return;if(Lq(t)){const{bandPaddingOuter:e,bandWithNestedOffsetPaddingOuter:t}=i;if(a)return t;if(n===_W)return HU(e,wH(r)?{signal:`${r.signal}/2`}:r/2)}else if(zq(t)){if(n===xW)return.5;if(n===_W)return i.offsetBandPaddingOuter}return}(e,t,n,r,i.scale,a),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>function(e,t,n,r){if("x"===n&&void 0!==r.xReverse)return LW(e)&&"descending"===t?wH(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(LW(e)&&"descending"===t)return!0;return}(t,sY(e)?e.sort:void 0,n,r.scale),zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:a,hasSecondaryRangeChannel:o})=>function(e,t,n,r,i,a,o){if(n&&"unaggregated"!==n&&LW(i)){if(Ts(n)){const e=n[0],t=n[n.length-1];if(_l(e)&&e<=0&&_l(t)&&t>=0)return!0}return!1}if("size"===e&&"quantitative"===t.type&&!PW(i))return!0;if((!sY(t)||!t.bin)&&vU([...Nq,...Pq],e)){const{orient:t,type:n}=r;return(!vU(["bar","area","line","trail"],n)||!("horizontal"===t&&"y"===e||"vertical"===t&&"x"===e))&&(!(!vU(["bar","area"],n)||o)||a?.zero)}return!1}(e,t,n,r,i,a.scale,o)};function q1(e){X1(e)?function(e){const t=e.component.scales;for(const n of Kq){const r=t[n];if(!r)continue;const i=L1(n,e);r.setWithExplicit("range",i)}}(e):H1(e,"range")}function H1(e,t){const n=e.component.scales;for(const n of e.children)"range"===t?q1(n):U1(n,t);for(const r of CU(n)){let i;for(const n of e.children){const e=n.component.scales[r];if(e){i=xZ(i,e.getWithExplicit(t),t,"scale",yZ(((e,n)=>"range"===t&&e.step&&n.step?e.step-n.step:0)))}}n[r].setWithExplicit(t,i)}}function V1(e,t,n,r,i=!1){const a=function(e,t,n,r){switch(t.type){case"nominal":case"ordinal":if(V$(e)||"discrete"===nH(e))return"shape"===e&&"ordinal"===t.type&&EV(dV(e,"ordinal")),"ordinal";if(Lq(e)||zq(e)){if(vU(["rect","bar","image","rule","tick"],n.type))return"band";if(r)return"band"}else if("arc"===n.type&&e in Dq)return"band";return yG(n[uq(e)])||vY(t)&&t.axis?.tickBand?"band":"point";case"temporal":return V$(e)?"time":"discrete"===nH(e)?(EV(dV(e,"temporal")),"ordinal"):sY(t)&&t.timeUnit&&HV(t.timeUnit).utc?"utc":"time";case"quantitative":return V$(e)?sY(t)&&hH(t.bin)?"bin-ordinal":"linear":"discrete"===nH(e)?(EV(dV(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(oV(t.type))}(t,n,r,i),{type:o}=e;return Zq(t)?void 0!==o?function(e,t,n=!1){if(!Zq(e))return!1;switch(e){case a$:case o$:case c$:case u$:case h$:case f$:return!!DW(t)||"band"===t||"point"===t&&!n;case A$:case S$:case E$:case T$:case M$:case k$:return DW(t)||PW(t)||vU(["band","point","ordinal"],t);case b$:case x$:case _$:return"band"!==t;case C$:case w$:return"ordinal"===t||PW(t)}}(t,o)?sY(n)&&(s=o,l=n.type,!(vU([uW,dW],l)?void 0===s||NW(s):l===fW?vU([yW,bW,void 0],s):l!==cW||SW(s)||PW(s)||void 0===s))?(EV(function(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}(o,a)),a):o:(EV(function(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}(t,o,a)),a):a:null;var s,l}function W1(e){X1(e)?e.component.scales=function(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const a of Kq){const o=RY(t[a]);if(o&&n===lG&&a===w$&&o.type===hW)continue;let s=o&&o.scale;if(o&&null!==s&&!1!==s){s??(s={});const n=V1(s,a,o,r,QY(t,a));i[a]=new O1(e.scaleName(`${a}`,!0),{value:n,explicit:s.type===n})}}return i}(e):e.component.scales=function(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const n of e.children){W1(n);for(const a of CU(n.component.scales))if((t=i.scale)[a]??(t[a]=QQ(a,e)),"shared"===i.scale[a]){const e=r[a],t=n.component.scales[a].getWithExplicit("type");e?AW(e.value,t.value)?r[a]=xZ(e,t,"type","scale",G1):(i.scale[a]="independent",delete r[a]):r[a]=t}}for(const t of CU(r)){const i=e.scaleName(t,!0),a=r[t];n[t]=new O1(i,a);for(const n of e.children){const e=n.component.scales[t];e&&(n.renameScale(e.get("name"),i),e.merged=!0)}}return n}(e)}const G1=yZ(((e,t)=>EW(e)-EW(t)));class Y1{constructor(){this.nameMap={}}rename(e,t){this.nameMap[e]=t}has(e){return void 0!==this.nameMap[e]}get(e){for(;this.nameMap[e]&&e!==this.nameMap[e];)e=this.nameMap[e];return e}}function X1(e){return"unit"===e?.type}function K1(e){return"facet"===e?.type}function Z1(e){return"concat"===e?.type}function J1(e){return"layer"===e?.type}class Q1{constructor(e,t,n,r,i,a,o){this.type=t,this.parent=n,this.config=i,this.correctDataNames=e=>(e.from?.data&&(e.from.data=this.lookupDataSource(e.from.data)),e.from?.facet?.data&&(e.from.facet.data=this.lookupDataSource(e.from.facet.data)),e),this.parent=n,this.config=i,this.view=bH(o),this.name=e.name??r,this.title=_H(e.title)?{text:e.title}:e.title?bH(e.title):void 0,this.scaleNameMap=n?n.scaleNameMap:new Y1,this.projectionNameMap=n?n.projectionNameMap:new Y1,this.signalNameMap=n?n.signalNameMap:new Y1,this.data=e.data,this.description=e.description,this.transforms=function(e){return e.map((e=>IK(e)?{filter:uU(e.filter,aW)}:e))}(e.transform??[]),this.layout="layer"===t||"unit"===t?{}:function(e,t,n){const r=n[t],i={},{spacing:a,columns:o}=r;void 0!==a&&(i.spacing=a),void 0!==o&&(ZG(e)&&!XG(e.facet)||qX(e))&&(i.columns=o),HX(e)&&(i.columns=1);for(const t of XX)if(void 0!==e[t])if("spacing"===t){const n=e[t];i[t]=_l(n)?n:{row:n.row??a,column:n.column??a}}else i[t]=e[t];return i}(e,t,i),this.component={data:{sources:n?n.component.data.sources:[],outputNodes:n?n.component.data.outputNodes:{},outputNodeRefCounts:n?n.component.data.outputNodeRefCounts:{},isFaceted:ZG(e)||n?.component.data.isFaceted&&void 0===e.data},layoutSize:new mZ,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...a?fU(a):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){!function(e,{ignoreRange:t}={}){W1(e),v1(e);for(const t of VW)U1(e,t);t||q1(e)}(this)}parseProjection(){A0(this)}renameTopLevelLayoutSizeSignal(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}parseLegends(){h0(this)}assembleEncodeFromView(e){const{style:t,...n}=e,r={};for(const e of CU(n)){const t=n[e];void 0!==t&&(r[e]=RH(t))}return r}assembleGroupEncodeEntry(e){let t={};return this.view&&(t=this.assembleEncodeFromView(this.view)),e||(this.description&&(t.description=RH(this.description)),"unit"!==this.type&&"layer"!==this.type)?SU(t)?void 0:t:{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...t}}assembleLayout(){if(!this.layout)return;const{spacing:e,...t}=this.layout,{component:n,config:r}=this,i=function(e,t){const n={};for(const r of G$){const i=e[r];if(i?.facetFieldDef){const{titleAnchor:e,titleOrient:a}=DQ(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),o=NQ(r,a),s=VQ(e,o);void 0!==s&&(n[o]=s)}}return SU(n)?void 0:n}(n.layoutHeaders,r);return{padding:e,...this.assembleDefaultLayout(),...t,...i?{titleBand:i}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:e}=this.component;let t=[];for(const n of G$)e[n].title&&t.push(FQ(this,n));for(const e of PQ)t=t.concat(BQ(this,e));return t}assembleAxes(){return function(e,t){const{x:n=[],y:r=[]}=e;return[...n.map((e=>xQ(e,"grid",t))),...r.map((e=>xQ(e,"grid",t))),...n.map((e=>xQ(e,"main",t))),...r.map((e=>xQ(e,"main",t)))].filter((e=>e))}(this.component.axes,this.config)}assembleLegends(){return y0(this)}assembleProjections(){return b0(this)}assembleTitle(){const{encoding:e,...t}=this.title??{},n={...xH(this.config.title).nonMarkTitleProperties,...t,...e?{encode:{update:e}}:{}};if(n.text)return vU(["unit","layer"],this.type)?vU(["middle",void 0],n.anchor)&&(n.frame??(n.frame="group")):n.anchor??(n.anchor="start"),SU(n)?void 0:n}assembleGroup(e=[]){const t={};(e=e.concat(this.assembleSignals())).length>0&&(t.signals=e);const n=this.assembleLayout();n&&(t.layout=n),t.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||K1(this.parent)?S1(this):[];r.length>0&&(t.scales=r);const i=this.assembleAxes();i.length>0&&(t.axes=i);const a=this.assembleLegends();return a.length>0&&(t.legends=a),t}getName(e){return LU((this.name?`${this.name}_`:"")+e)}getDataName(e){return this.getName(CZ[e].toLowerCase())}requestDataName(e){const t=this.getDataName(e),n=this.component.data.outputNodeRefCounts;return n[t]=(n[t]||0)+1,t}getSizeSignalRef(e){if(K1(this.parent)){const t=Iq(ZQ(e)),n=this.component.scales[t];if(n&&!n.merged){const e=n.get("type"),r=n.get("range");if(NW(e)&&AH(r)){const e=n.get("name"),r=T1(M1(this,t));if(r){return{signal:KQ(e,n,_Y({aggregate:"distinct",field:r},{expr:"datum"}))}}return EV(KH(t)),null}}}return{signal:this.signalNameMap.get(this.getName(e))}}lookupDataSource(e){const t=this.component.data.outputNodes[e];return t?t.getSource():e}getSignalName(e){return this.signalNameMap.get(e)}renameSignal(e,t){this.signalNameMap.rename(e,t)}renameScale(e,t){this.scaleNameMap.rename(e,t)}renameProjection(e,t){this.projectionNameMap.rename(e,t)}scaleName(e,t){return t?this.getName(e):iq(e)&&Zq(e)&&this.component.scales[e]||this.scaleNameMap.has(this.getName(e))?this.scaleNameMap.get(this.getName(e)):void 0}projectionName(e){return e?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}getScaleComponent(e){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const t=this.component.scales[e];return t&&!t.merged?t:this.parent?this.parent.getScaleComponent(e):void 0}getScaleType(e){const t=this.getScaleComponent(e);return t?t.get("type"):void 0}getSelectionComponent(e,t){let n=this.component.selection[e];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(e,t)),!n)throw new Error(function(e){return`Cannot find a selection named "${e}".`}(t));return n}hasAxisOrientSignalRef(){return this.component.axes.x?.some((e=>e.hasOrientSignalRef()))||this.component.axes.y?.some((e=>e.hasOrientSignalRef()))}}class e2 extends Q1{vgField(e,t={}){const n=this.fieldDef(e);if(n)return _Y(n,t)}reduceFieldDef(e,t){return function(e,t,n,r){return e?CU(e).reduce(((n,i)=>{const a=e[i];return Ts(a)?a.reduce(((e,n)=>t.call(r,e,n,i)),n):t.call(r,n,a,i)}),n):n}(this.getMapping(),((t,n,r)=>{const i=OY(n);return i?e(t,i,r):t}),t)}forEachFieldDef(e,t){iX(this.getMapping(),((t,n)=>{const r=OY(t);r&&e(r,n)}),t)}}class t2 extends FZ{clone(){return new t2(null,fU(this.transform))}constructor(e,t){super(e),this.transform=t,this.transform=fU(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??"value",n[1]??"density"];const r=this.transform.resolve??"shared";this.transform.resolve=r}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${mU(this.transform)}`}assemble(){const{density:e,...t}=this.transform,n={type:"kde",field:e,...t};return n.resolve=this.transform.resolve,n}}class n2 extends FZ{clone(){return new n2(null,fU(this.transform))}constructor(e,t){super(e),this.transform=t,this.transform=fU(t)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${mU(this.transform)}`}assemble(){const{extent:e,param:t}=this.transform;return{type:"extent",field:e,signal:t}}}class r2 extends FZ{clone(){return new r2(this.parent,fU(this.transform))}constructor(e,t){super(e),this.transform=t,this.transform=fU(t);const{flatten:n,as:r=[]}=this.transform;this.transform.as=n.map(((e,t)=>r[t]??e))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${mU(this.transform)}`}assemble(){const{flatten:e,as:t}=this.transform;return{type:"flatten",fields:e,as:t}}}class i2 extends FZ{clone(){return new i2(null,fU(this.transform))}constructor(e,t){super(e),this.transform=t,this.transform=fU(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??"key",n[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${mU(this.transform)}`}assemble(){const{fold:e,as:t}=this.transform;return{type:"fold",fields:e,as:t}}}class a2 extends FZ{clone(){return new a2(null,fU(this.fields),this.geojson,this.signal)}static parseAll(e,t){if(t.component.projection&&!t.component.projection.isFit)return e;let n=0;for(const r of[[g$,m$],[y$,v$]]){const i=r.map((e=>{const n=RY(t.encoding[e]);return sY(n)?n.field:cY(n)?{expr:`${n.datum}`}:mY(n)?{expr:`${n.value}`}:void 0}));(i[0]||i[1])&&(e=new a2(e,i,null,t.getName("geojson_"+n++)))}if(t.channelHasField(w$)){const r=t.typedFieldDef(w$);r.type===hW&&(e=new a2(e,null,r.field,t.getName("geojson_"+n++)))}return e}constructor(e,t,n,r){super(e),this.fields=t,this.geojson=n,this.signal=r}dependentFields(){const e=(this.fields??[]).filter(Al);return new Set([...this.geojson?[this.geojson]:[],...e])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${mU(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class o2 extends FZ{clone(){return new o2(null,this.projection,fU(this.fields),fU(this.as))}constructor(e,t,n,r){super(e),this.projection=t,this.fields=n,this.as=r}static parseAll(e,t){if(!t.projectionName())return e;for(const n of[[g$,m$],[y$,v$]]){const r=n.map((e=>{const n=RY(t.encoding[e]);return sY(n)?n.field:cY(n)?{expr:`${n.datum}`}:mY(n)?{expr:`${n.value}`}:void 0})),i=n[0]===y$?"2":"";(r[0]||r[1])&&(e=new o2(e,t.projectionName(),r,[t.getName(`x${i}`),t.getName(`y${i}`)]))}return e}dependentFields(){return new Set(this.fields.filter(Al))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${mU(this.fields)} ${mU(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class s2 extends FZ{clone(){return new s2(null,fU(this.transform))}constructor(e,t){super(e),this.transform=t}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(e){const{start:t=0,stop:n,step:r}=e;return{signal:`sequence(${[t,n,...r?[r]:[]].join(",")})`}}static makeFromTransform(e,t){return new s2(e,t)}static makeFromEncoding(e,t){const n=t.encoding,r=n.x,i=n.y;if(sY(r)&&sY(i)){const a=r.impute?r:i.impute?i:void 0;if(void 0===a)return;const o=r.impute?i:i.impute?r:void 0,{method:s,value:l,frame:c,keyvals:u}=a.impute,f=aX(t.mark,n);return new s2(e,{impute:a.field,key:o.field,...s?{method:s}:{},...void 0!==l?{value:l}:{},...c?{frame:c}:{},...void 0!==u?{keyvals:u}:{},...f.length?{groupby:f}:{}})}return null}hash(){return`Impute ${mU(this.transform)}`}assemble(){const{impute:e,key:t,keyvals:n,method:r,groupby:i,value:a,frame:o=[null,null]}=this.transform,s={type:"impute",field:e,key:t,...n?{keyvals:FK(n)?this.processSequence(n):n}:{},method:"value",...i?{groupby:i}:{},value:r&&"value"!==r?null:a};if(r&&"value"!==r){return[s,{type:"window",as:[`imputed_${e}_value`],ops:[r],fields:[e],frame:o,ignorePeers:!1,...i?{groupby:i}:{}},{type:"formula",expr:`datum.${e} === null ? datum.imputed_${e}_value : datum.${e}`,as:e}]}return[s]}}class l2 extends FZ{clone(){return new l2(null,fU(this.transform))}constructor(e,t){super(e),this.transform=t,this.transform=fU(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??t.on,n[1]??t.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${mU(this.transform)}`}assemble(){const{loess:e,on:t,...n}=this.transform;return{type:"loess",x:t,y:e,...n}}}class c2 extends FZ{clone(){return new c2(null,fU(this.transform),this.secondary)}constructor(e,t,n){super(e),this.transform=t,this.secondary=n}static make(e,t,n,r){const i=t.component.data.sources,{from:a}=n;let o=null;if(function(e){return t$(e,"data")}(a)){let e=k2(a.data,i);e||(e=new j0(a.data),i.push(e));const n=t.getName(`lookup_${r}`);o=new zZ(e,n,CZ.Lookup,t.component.data.outputNodeRefCounts),t.component.data.outputNodes[n]=o}else if(function(e){return t$(e,"param")}(a)){const e=a.param;let r;n={as:e,...n};try{r=t.getSelectionComponent(LU(e),e)}catch(t){throw new Error(function(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}(e))}if(o=r.materialized,!o)throw new Error(function(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}(e))}return new c2(e,n,o.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Zs(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${mU({transform:this.transform,secondary:this.secondary})}`}assemble(){let e;if(this.transform.from.fields)e={values:this.transform.from.fields,...this.transform.as?{as:Zs(this.transform.as)}:{}};else{let t=this.transform.as;Al(t)||(EV('If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.'),t="_lookup"),e={as:[t]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...e,...this.transform.default?{default:this.transform.default}:{}}}}class u2 extends FZ{clone(){return new u2(null,fU(this.transform))}constructor(e,t){super(e),this.transform=t,this.transform=fU(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??"prob",n[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${mU(this.transform)}`}assemble(){const{quantile:e,...t}=this.transform;return{type:"quantile",field:e,...t}}}class f2 extends FZ{clone(){return new f2(null,fU(this.transform))}constructor(e,t){super(e),this.transform=t,this.transform=fU(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??t.on,n[1]??t.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${mU(this.transform)}`}assemble(){const{regression:e,on:t,...n}=this.transform;return{type:"regression",x:t,y:e,...n}}}class d2 extends FZ{clone(){return new d2(null,fU(this.transform))}constructor(e,t){super(e),this.transform=t}addDimensions(e){this.transform.groupby=wU((this.transform.groupby??[]).concat(e),(e=>e))}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${mU(this.transform)}`}assemble(){const{pivot:e,value:t,groupby:n,limit:r,op:i}=this.transform;return{type:"pivot",field:e,value:t,...void 0!==r?{limit:r}:{},...void 0!==i?{op:i}:{},...void 0!==n?{groupby:n}:{}}}}class h2 extends FZ{clone(){return new h2(null,fU(this.transform))}constructor(e,t){super(e),this.transform=t}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${mU(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function p2(e){let t=0;return function n(r,i){if(r instanceof j0&&!r.isGenerator&&!wZ(r.data)){e.push(i);i={name:null,source:i.name,transform:[]}}if(r instanceof P0&&(r.parent instanceof j0&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof R0)return i.name||(i.name="data_"+t++),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,void e.push(...r.assemble());if((r instanceof F0||r instanceof z0||r instanceof a1||r instanceof mQ||r instanceof OQ||r instanceof o2||r instanceof O0||r instanceof c2||r instanceof l1||r instanceof i1||r instanceof i2||r instanceof r2||r instanceof t2||r instanceof l2||r instanceof u2||r instanceof f2||r instanceof I0||r instanceof h2||r instanceof d2||r instanceof n2)&&i.transform.push(r.assemble()),(r instanceof S0||r instanceof UZ||r instanceof s2||r instanceof s1||r instanceof a2)&&i.transform.push(...r.assemble()),r instanceof zZ)if(i.source&&0===i.transform.length)r.setSource(i.source);else if(r.parent instanceof zZ)r.setSource(i.name);else if(i.name||(i.name="data_"+t++),r.setSource(i.name),1===r.numChildren()){e.push(i);i={name:null,source:i.name,transform:[]}}switch(r.numChildren()){case 0:r instanceof zZ&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name="data_"+t++);let a=i.name;!i.source||i.transform.length>0?e.push(i):a=i.source;for(const e of r.children){n(e,{name:null,source:a,transform:[]})}break}}}}function m2(e){return"top"===e||"left"===e||wH(e)?"header":"footer"}function g2(e,t){const{facet:n,config:r,child:i,component:a}=e;if(e.channelHasField(t)){const o=n[t],s=LQ("title",null,r,t);let l=TY(o,r,{allowDisabling:!0,includeDefault:void 0===s||!!s});i.component.layoutHeaders[t].title&&(l=Ts(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=LQ("labelOrient",o.header,r,t),u=null!==o.header&&HU(o.header?.labels,r.header.labels,!0),f=vU(["bottom","right"],c)?"footer":"header";a.layoutHeaders[t]={title:null!==o.header?l:null,facetFieldDef:o,[f]:"facet"===t?[]:[v2(e,t,u)]}}}function v2(e,t,n){const r="row"===t?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function y2(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=e0(i,t),"shared"===i.axis[t]){const i="x"===t?"column":"row",a=r[i];for(const r of n.component.axes[t]){const t=m2(r.get("orient"));a[t]??(a[t]=[v2(e,i,!1)]);const n=xQ(r,"main",e.config,{header:!0});n&&a[t][0].axes.push(n),r.mainExtracted=!0}}}}function b2(e){for(const t of e.children)t.parseLayoutSize()}function x2(e,t){const n=ZQ(t),r=Iq(n),i=e.component.resolve,a=e.component.layoutSize;let o;for(const t of e.children){const a=t.component.layoutSize.getWithExplicit(n),s=i.scale[r]??QQ(r,e);if("independent"===s&&"step"===a.value){o=void 0;break}if(o){if("independent"===s&&o.value!==a.value){o=void 0;break}o=xZ(o,a,n,"")}else o=a}if(o){for(const r of e.children)e.renameSignal(r.getName(n),e.getName(t)),r.component.layoutSize.set(n,"merged",!1);a.setWithExplicit(t,o)}else a.setWithExplicit(t,{explicit:!1,value:void 0})}function _2(e,t){const n="width"===t?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const e=i.get("type"),n=i.get("range");if(NW(e)){const e=JX(r.view,t);return AH(n)||GX(e)?"step":e}return KX(r.view,t)}if(e.hasProjection||"arc"===e.mark)return KX(r.view,t);{const e=JX(r.view,t);return GX(e)?e.step:e}}function w2(e,t,n){return _Y(t,{suffix:`by_${_Y(e)}`,...n})}class A2 extends e2{constructor(e,t,n,r){super(e,"facet",t,n,r,e.resolve),this.child=Z2(e.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(e.facet)}initFacet(e){if(!XG(e))return{facet:this.initFacetFieldDef(e,"facet")};const t=CU(e),n={};for(const r of t){if(![n$,r$].includes(r)){EV(cV(r,"facet"));break}const t=e[r];if(void 0===t.field){EV(lV(t,r));break}n[r]=this.initFacetFieldDef(t,r)}return n}initFacetFieldDef(e,t){const n=DY(e,t);return n.header?n.header=bH(n.header):null===n.header&&(n.header=null),n}channelHasField(e){return t$(this.facet,e)}fieldDef(e){return this.facet[e]}parseData(){this.component.data=E2(this),this.child.parseData()}parseLayoutSize(){b2(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),function(e){for(const t of G$)g2(e,t);y2(e,"x"),y2(e,"y")}(this)}assembleSelectionTopLevelSignals(e){return this.child.assembleSelectionTopLevelSignals(e)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(e){return this.child.assembleSelectionData(e)}getHeaderLayoutMixins(){const e={};for(const t of G$)for(const n of IQ){const r=this.component.layoutHeaders[t],i=r[n],{facetFieldDef:a}=r;if(a){const n=LQ("titleOrient",a.header,this.config,t);if(["right","bottom"].includes(n)){const r=NQ(t,n);e.titleAnchor??(e.titleAnchor={}),e.titleAnchor[r]="end"}}if(i?.[0]){const i="row"===t?"height":"width",a="header"===n?"headerBand":"footerBand";"facet"===t||this.child.component.layoutSize.get(i)||(e[a]??(e[a]={}),e[a][t]=.5),r.title&&(e.offset??(e.offset={}),e.offset["row"===t?"rowTitle":"columnTitle"]=10)}}return e}assembleDefaultLayout(){const{column:e,row:t}=this.facet,n=e?this.columnDistinctSignal():t?1:void 0;let r="all";return(t||"independent"!==this.component.resolve.scale.x)&&(e||"independent"!==this.component.resolve.scale.y)||(r="none"),{...this.getHeaderLayoutMixins(),...n?{columns:n}:{},bounds:"full",align:r}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof A2)){return{signal:`length(data('${this.getName("column_domain")}'))`}}}assembleGroupStyle(){}assembleGroup(e){return this.parent&&this.parent instanceof A2?{...this.channelHasField("column")?{encode:{update:{columns:{field:_Y(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(e)}:super.assembleGroup(e)}getCardinalityAggregateForChild(){const e=[],t=[],n=[];if(this.child instanceof A2){if(this.child.channelHasField("column")){const r=_Y(this.child.facet.column);e.push(r),t.push("distinct"),n.push(`distinct_${r}`)}}else for(const r of Nq){const i=this.child.component.scales[r];if(i&&!i.merged){const a=i.get("type"),o=i.get("range");if(NW(a)&&AH(o)){const i=T1(M1(this.child,r));i?(e.push(i),t.push("distinct"),n.push(`distinct_${i}`)):EV(KH(r))}}}return{fields:e,ops:t,as:n}}assembleFacet(){const{name:e,data:t}=this.component.data.facetRoot,{row:n,column:r}=this.facet,{fields:i,ops:a,as:o}=this.getCardinalityAggregateForChild(),s=[];for(const e of G$){const t=this.facet[e];if(t){s.push(_Y(t));const{bin:l,sort:c}=t;if(hH(l)&&s.push(_Y(t,{binSuffix:"end"})),GG(c)){const{field:e,op:s=HG}=c,l=w2(t,c);n&&r?(i.push(l),a.push("max"),o.push(l)):(i.push(e),a.push(s),o.push(l))}else if(Ts(c)){const n=RQ(t,e);i.push(n),a.push("max"),o.push(n)}}}const l=!!n&&!!r;return{name:e,data:t,groupby:s,...l||i.length>0?{aggregate:{...l?{cross:l}:{},...i.length?{fields:i,ops:a,as:o}:{}}}:{}}}facetSortFields(e){const{facet:t}=this,n=t[e];return n?GG(n.sort)?[w2(n,n.sort,{expr:"datum"})]:Ts(n.sort)?[RQ(n,e,{expr:"datum"})]:[_Y(n,{expr:"datum"})]:[]}facetSortOrder(e){const{facet:t}=this,n=t[e];if(n){const{sort:e}=n;return[(GG(e)?e.order:!Ts(e)&&e)||"ascending"]}return[]}assembleLabelTitle(){const{facet:e,config:t}=this;if(e.facet)return $Q(e.facet,"facet",t);const n={row:["top","bottom"],column:["left","right"]};for(const r of PQ)if(e[r]){const i=LQ("labelOrient",e[r]?.header,t,r);if(n[r].includes(i))return $Q(e[r],r,t)}}assembleMarks(){const{child:e}=this,t=function(e){const t=[],n=p2(t);for(const t of e.children)n(t,{source:e.name,name:null,transform:[]});return t}(this.component.data.facetRoot),n=e.assembleGroupEncodeEntry(!1),r=this.assembleLabelTitle()||e.assembleTitle(),i=e.assembleGroupStyle(),a={name:this.getName("cell"),type:"group",...r?{title:r}:{},...i?{style:i}:{},from:{facet:this.assembleFacet()},sort:{field:G$.map((e=>this.facetSortFields(e))).flat(),order:G$.map((e=>this.facetSortOrder(e))).flat()},...t.length>0?{data:t}:{},...n?{encode:{update:n}}:{},...e.assembleGroup(DZ(this,[]))};return[a]}getMapping(){return this.facet}}function k2(e,t){for(const n of t){const t=n.data;if(e.name&&n.hasName()&&e.name!==n.dataName)continue;const r=e.format?.mesh,i=t.format?.feature;if(r&&i)continue;const a=e.format?.feature;if((a||i)&&a!==i)continue;const o=t.format?.mesh;if(!r&&!o||r===o)if(AZ(e)&&AZ(t)){if(QU(e.values,t.values))return n}else if(wZ(e)&&wZ(t)){if(e.url===t.url)return n}else if(kZ(e)&&e.name===n.dataName)return n}return null}function E2(e){let t=function(e,t){if(e.data||!e.parent){if(null===e.data){const e=new j0({values:[]});return t.push(e),e}const n=k2(e.data,t);if(n)return EZ(e.data)||(n.data.format=xU({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const n=new j0(e.data);return t.push(n),n}}return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,a=!(i&&(EZ(i)||wZ(i)||AZ(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new _Z;EZ(i)?(TZ(i)?t=new z0(t,i.sequence):SZ(i)&&(t=new F0(t,i.graticule)),a.parseNothing=!0):null===i?.format?.parse&&(a.parseNothing=!0),t=P0.makeExplicit(t,e,a)??t,t=new I0(t);const o=e.parent&&J1(e.parent);(X1(e)||K1(e))&&o&&(t=S0.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=function(e,t,n){let r=0;for(const i of t.transforms){let a,o;if(YK(i))o=e=new OQ(e,i),a="derived";else if(IK(i)){const r=L0(i);o=e=P0.makeWithAncestors(e,{},r,n)??e,e=new mQ(e,t,i.filter)}else if(XK(i))o=e=S0.makeFromTransform(e,i,t),a="number";else if(ZK(i))a="date",void 0===n.getWithExplicit(i.field).value&&(e=new P0(e,{[i.field]:a}),n.set(i.field,a,!1)),o=e=UZ.makeFromTransform(e,i);else if(JK(i))o=e=O0.makeFromTransform(e,i),a="number",uQ(t)&&(e=new I0(e));else if(zK(i))o=e=c2.make(e,t,i,r++),a="derived";else if(VK(i))o=e=new l1(e,i),a="number";else if(WK(i))o=e=new i1(e,i),a="number";else if(QK(i))o=e=s1.makeFromTransform(e,i),a="derived";else if(eZ(i))o=e=new i2(e,i),a="derived";else if(tZ(i))o=e=new n2(e,i),a="derived";else if(GK(i))o=e=new r2(e,i),a="derived";else if(jK(i))o=e=new d2(e,i),a="derived";else if(HK(i))e=new h2(e,i);else if(KK(i))o=e=s2.makeFromTransform(e,i),a="derived";else if(BK(i))o=e=new t2(e,i),a="derived";else if(UK(i))o=e=new u2(e,i),a="derived";else if($K(i))o=e=new f2(e,i),a="derived";else{if(!qK(i)){EV(rV(i));continue}o=e=new l2(e,i),a="derived"}if(o&&void 0!==a)for(const e of o.producedFields()??[])n.set(e,a,!1)}return e}(t,e,a));const s=function(e){const t={};if(X1(e)&&e.component.selection)for(const n of CU(e.component.selection)){const r=e.component.selection[n];for(const e of r.project.items)!e.channel&&qU(e.field)>1&&(t[e.field]="flatten")}return t}(e),l=D0(e);t=P0.makeWithAncestors(t,{},{...s,...l},a)??t,X1(e)&&(t=a2.parseAll(t,e),t=o2.parseAll(t,e)),(X1(e)||K1(e))&&(o||(t=S0.makeFromEncoding(t,e)??t),t=UZ.makeFromEncoding(t,e)??t,t=OQ.parseAllForSortIndex(t,e));const c=t=T2(CZ.Raw,e,t);if(X1(e)){const n=O0.makeFromEncoding(t,e);n&&(t=n,uQ(e)&&(t=new I0(t))),t=s2.makeFromEncoding(t,e)??t,t=s1.makeFromEncoding(t,e)??t}let u,f;if(X1(e)){const{markDef:n,mark:r,config:i}=e,a=FH("invalid",n,i),{marks:o,scales:s}=f=OZ({invalid:a,isPath:cG(r)});o!==s&&"include-invalid-values"===s&&(u=t=T2(CZ.PreFilterInvalid,e,t)),"exclude-invalid-values"===o&&(t=a1.make(t,e,f)??t)}const d=t=T2(CZ.Main,e,t);let h;if(X1(e)&&f){const{marks:n,scales:r}=f;"include-invalid-values"===n&&"exclude-invalid-values"===r&&(t=a1.make(t,e,f)??t,h=t=T2(CZ.PostFilterInvalid,e,t))}X1(e)&&function(e,t){for(const[n,r]of RU(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new zZ(new mQ(t,e,{param:n}),i,CZ.Lookup,e.component.data.outputNodeRefCounts)}}(e,d);let p=null;if(K1(e)){const r=e.getName("facet");t=function(e,t){const{row:n,column:r}=t;if(n&&r){let t=null;for(const i of[n,r])if(GG(i.sort)){const{field:n,op:r=HG}=i.sort;e=t=new i1(e,{joinaggregate:[{op:r,field:n,as:w2(i,i.sort,{forAs:!0})}],groupby:[_Y(i)]})}return t}return null}(t,e.facet)??t,p=new R0(t,e,r,d.getSource()),n[r]=p}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:d,facetRoot:p,ancestorParse:a,preFilterInvalid:u,postFilterInvalid:h}}function T2(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,a=t.getDataName(e),o=new zZ(n,a,e,i);return r[a]=o,o}class M2 extends Q1{constructor(e,t,n,r){super(e,"concat",t,n,r,e.resolve),"shared"!==e.resolve?.axis?.x&&"shared"!==e.resolve?.axis?.y||EV("Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415)."),this.children=this.getChildren(e).map(((e,t)=>Z2(e,this,this.getName(`concat_${t}`),void 0,r)))}parseData(){this.component.data=E2(this);for(const e of this.children)e.parseData()}parseSelections(){this.component.selection={};for(const e of this.children){e.parseSelections();for(const t of CU(e.component.selection))this.component.selection[t]=e.component.selection[t]}}parseMarkGroup(){for(const e of this.children)e.parseMarkGroup()}parseAxesAndHeaders(){for(const e of this.children)e.parseAxesAndHeaders()}getChildren(e){return HX(e)?e.vconcat:VX(e)?e.hconcat:e.concat}parseLayoutSize(){!function(e){b2(e);const t=1===e.layout.columns?"width":"childWidth",n=void 0===e.layout.columns?"height":"childHeight";x2(e,t),x2(e,n)}(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(e){return this.children.reduce(((e,t)=>t.assembleSelectionTopLevelSignals(e)),e)}assembleSignals(){return this.children.forEach((e=>e.assembleSignals())),[]}assembleLayoutSignals(){const e=GQ(this);for(const t of this.children)e.push(...t.assembleLayoutSignals());return e}assembleSelectionData(e){return this.children.reduce(((e,t)=>t.assembleSelectionData(e)),e)}assembleMarks(){return this.children.map((e=>{const t=e.assembleTitle(),n=e.assembleGroupStyle(),r=e.assembleGroupEncodeEntry(!1);return{type:"group",name:e.getName("group"),...t?{title:t}:{},...n?{style:n}:{},...r?{encode:{update:r}}:{},...e.assembleGroup()}}))}assembleGroupStyle(){}assembleDefaultLayout(){const e=this.layout.columns;return{...null!=e?{columns:e}:{},bounds:"full",align:"each"}}}const S2={disable:1,gridScale:1,scale:1,...VY,labelExpr:1,encode:1},C2=CU(S2);class O2 extends mZ{constructor(e={},t={},n=!1){super(),this.explicit=e,this.implicit=t,this.mainExtracted=n}clone(){return new O2(fU(this.explicit),fU(this.implicit),this.mainExtracted)}hasAxisPart(e){return"axis"===e||("grid"===e||"title"===e?!!this.get(e):!function(e){return!1===e||null===e}(this.get(e)))}hasOrientSignalRef(){return wH(this.explicit.orient)}}const R2={bottom:"top",top:"bottom",left:"right",right:"left"};function N2(e,t){if(!e)return t.map((e=>e.clone()));{if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const n=e[r],i=t[r];if(!!n!=!!i)return;if(n&&i){const t=n.getWithExplicit("orient"),a=i.getWithExplicit("orient");if(t.explicit&&a.explicit&&t.value!==a.value)return;e[r]=L2(n,i)}}}return e}function L2(e,t){for(const n of C2){const r=xZ(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",((e,t)=>{switch(n){case"title":return HH(e,t);case"gridScale":return{explicit:e.explicit,value:HU(e.value,t.value)}}return bZ(e,t,n,"axis")}));e.setWithExplicit(n,r)}return e}function D2(e,t,n,r,i){if("disable"===t)return void 0!==n;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(wH(n.labelAngle)?n.labelAngle:KU(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===CQ(r,i))return!0}return e===n[t]}const P2=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function I2(e,t){let n=t.axis(e);const r=new O2,i=RY(t.encoding[e]),{mark:a,config:o}=t,s=n?.orient||o["x"===e?"axisX":"axisY"]?.orient||o.axis?.orient||function(e){return"x"===e?"bottom":"left"}(e),l=t.getScaleComponent(e).get("type"),c=function(e,t,n,r){const i="band"===t?["axisDiscrete","axisBand"]:"point"===t?["axisDiscrete","axisPoint"]:SW(t)?["axisQuantitative"]:"time"===t||"utc"===t?["axisTemporal"]:[],a="x"===e?"axisX":"axisY",o=wH(n)?"axisOrient":`axis${IU(n)}`,s=[...i,...i.map((e=>a+e.substr(4)))],l=["axis",o,a];return{vlOnlyAxisConfig:wQ(s,r,e,n),vgAxisConfig:wQ(l,r,e,n),axisConfigStyle:AQ([...l,...s],r)}}(e,l,s,t.config),u=void 0!==n?!n:kQ("disable",o.style,n?.style,c).configValue;if(r.set("disable",u,void 0!==n),u)return r;n=n||{};const f=function(e,t,n,r,i){const a=t?.labelAngle;if(void 0!==a)return wH(a)?a:KU(a);{const{configValue:a}=kQ("labelAngle",r,t?.style,i);return void 0!==a?KU(a):n!==a$||!vU([dW,uW],e.type)||sY(e)&&e.timeUnit?void 0:270}}(i,n,e,o.style,c),d=jG(n.formatType,i,l),h=zG(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:l,orient:s,labelAngle:f,format:h,formatType:d,mark:a,config:o};for(const i of C2){const a=i in EQ?EQ[i](p):GY(i)?n[i]:void 0,s=void 0!==a,l=D2(a,i,n,t,e);if(s&&l)r.set(i,a,l);else{const{configValue:e,configFrom:t}=GY(i)&&"values"!==i?kQ(i,o.style,n.style,c):{},u=void 0!==e;s&&!u?r.set(i,a,l):("vgAxisConfig"!==t||P2.has(i)&&u||$Y(e)||wH(e))&&r.set(i,e,!1)}}const m=n.encoding??{},g=qY.reduce(((n,i)=>{if(!r.hasAxisPart(i))return n;const a=JQ(m[i]??{},t),o="labels"===i?function(e,t,n){const{encoding:r,config:i}=e,a=RY(r[t])??RY(r[cq(t)]),o=e.axis(t)||{},{format:s,formatType:l}=o;if(LG(l))return{text:FG({fieldOrDatumDef:a,field:"datum.value",format:s,formatType:l,config:i}),...n};if(void 0===s&&void 0===l&&i.customFormatTypes){if("quantitative"===lY(a)){if(vY(a)&&"normalize"===a.stack&&i.normalizedNumberFormatType)return{text:FG({fieldOrDatumDef:a,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:FG({fieldOrDatumDef:a,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if("temporal"===lY(a)&&i.timeFormatType&&sY(a)&&!a.timeUnit)return{text:FG({fieldOrDatumDef:a,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}(t,e,a):a;return void 0===o||SU(o)||(n[i]={update:o}),n}),{});return SU(g)||r.set("encode",g,!!n.encoding||void 0!==n.labelAngle),r}function F2(e,t){const{config:n}=e;return{...IJ(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...wJ("x",e,{defaultPos:"mid"}),...wJ("y",e,{defaultPos:"mid"}),...yJ("size",e),...yJ("angle",e),...z2(e,n,t)}}function z2(e,t,n){return n?{shape:{value:n}}:yJ("shape",e)}const j2={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return e.encoding.x||e.encoding.y||e.encoding.latitude||e.encoding.longitude?{...IJ(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...SJ("x",e,{defaultPos:"horizontal"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"vertical"!==n}),...SJ("y",e,{defaultPos:"vertical"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"horizontal"!==n}),...yJ("size",e,{vgChannel:"strokeWidth"})}:{}}},B2={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...IJ(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...wJ("x",e,{defaultPos:"mid"}),...wJ("y",e,{defaultPos:"mid"}),...uJ(e),...yJ("size",e,{vgChannel:"fontSize"}),...yJ("angle",e),...BJ("align",U2(e.markDef,n,t)),...BJ("baseline",$2(e.markDef,n,t)),...wJ("radius",e,{defaultPos:null}),...wJ("theta",e,{defaultPos:null})}}};function U2(e,t,n){if(void 0===FH("align",e,n))return"center"}function $2(e,t,n){if(void 0===FH("baseline",e,n))return"middle"}const q2={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i="horizontal"===r?"x":"y",a="horizontal"===r?"y":"x",o="horizontal"===r?"height":"width";return{...IJ(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...RJ(e,i),...wJ(a,e,{defaultPos:"mid",vgChannel:"y"===a?"yc":"xc"}),[o]:RH(FH("thickness",n,t))}}},H2={arc:{vgMark:"arc",encodeEntry:e=>({...IJ(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...wJ("x",e,{defaultPos:"mid"}),...wJ("y",e,{defaultPos:"mid"}),...RJ(e,"radius"),...RJ(e,"theta")})},area:{vgMark:"area",encodeEntry:e=>({...IJ(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...SJ("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===e.markDef.orient}),...SJ("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===e.markDef.orient}),...jJ(e)})},bar:{vgMark:"rect",encodeEntry:e=>({...IJ(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...RJ(e,"x"),...RJ(e,"y")})},circle:{vgMark:"symbol",encodeEntry:e=>F2(e,"circle")},geoshape:{vgMark:"shape",encodeEntry:e=>({...IJ(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&sY(n)&&n.type===hW?{field:_Y(n,{expr:"datum"})}:{}}]}},image:{vgMark:"image",encodeEntry:e=>({...IJ(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...RJ(e,"x"),...RJ(e,"y"),...uJ(e,"url")})},line:{vgMark:"line",encodeEntry:e=>({...IJ(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...wJ("x",e,{defaultPos:"mid"}),...wJ("y",e,{defaultPos:"mid"}),...yJ("size",e,{vgChannel:"strokeWidth"}),...jJ(e)})},point:{vgMark:"symbol",encodeEntry:e=>F2(e)},rect:{vgMark:"rect",encodeEntry:e=>({...IJ(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...RJ(e,"x"),...RJ(e,"y")})},rule:j2,square:{vgMark:"symbol",encodeEntry:e=>F2(e,"square")},text:B2,tick:q2,trail:{vgMark:"trail",encodeEntry:e=>({...IJ(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...wJ("x",e,{defaultPos:"mid"}),...wJ("y",e,{defaultPos:"mid"}),...yJ("size",e),...jJ(e)})}};function V2(e){if(vU([QW,KW,aG],e.mark)){const t=aX(e.mark,e.encoding);if(t.length>0)return function(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:W2+e.requestDataName(CZ.Main),data:e.requestDataName(CZ.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Y2(e,{fromPrefix:W2})}]}(e,t)}else if(e.mark===ZW){const t=MH.some((t=>FH(t,e.markDef,e.config)));if(e.stack&&!e.fieldDef("size")&&t)return function(e){const[t]=Y2(e,{fromPrefix:G2}),n=e.scaleName(e.stack.fieldChannel),r=(t={})=>e.vgField(e.stack.fieldChannel,t),i=(e,t)=>`${e}(${[r({prefix:"min",suffix:"start",expr:t}),r({prefix:"max",suffix:"start",expr:t}),r({prefix:"min",suffix:"end",expr:t}),r({prefix:"max",suffix:"end",expr:t})].map((e=>`scale('${n}',${e})`)).join(",")})`;let a,o;"x"===e.stack.fieldChannel?(a={...hU(t.encode.update,["y","yc","y2","height",...MH]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...pU(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(a={...hU(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...pU(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const n of MH){const r=zH(n,e.markDef,e.config);t.encode.update[n]?(a[n]=t.encode.update[n],delete t.encode.update[n]):r&&(a[n]=RH(r)),r&&(t.encode.update[n]={value:0})}const s=[];if(e.stack.groupbyChannels?.length>0)for(const t of e.stack.groupbyChannels){const n=e.fieldDef(t),r=_Y(n);r&&s.push(r),(n?.bin||n?.timeUnit)&&s.push(_Y(n,{binSuffix:"end"}))}a=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce(((n,r)=>{if(t.encode.update[r])return{...n,[r]:t.encode.update[r]};{const t=zH(r,e.markDef,e.config);return void 0!==t?{...n,[r]:RH(t)}:n}}),a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0});return[{type:"group",from:{facet:{data:e.requestDataName(CZ.Main),name:G2+e.requestDataName(CZ.Main),groupby:s,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}(e)}return Y2(e)}const W2="faceted_path_";const G2="stack_group_";function Y2(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:a}=e,o=HU(r.clip,function(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return!(!t?.get("selectionExtent")&&!n?.get("selectionExtent"))||void 0}(e),function(e){const t=e.component.projection;return!(!t||t.isFit)||void 0}(e)),s=IH(r),l=i.key,c=function(e){const{encoding:t,stack:n,mark:r,markDef:i,config:a}=e,o=t.order;if(!(!Ts(o)&&mY(o)&&gU(o.value)||!o&&gU(FH("order",i,a)))){if((Ts(o)||sY(o))&&!n)return UH(o,{expr:"datum"});if(cG(r)){const e="horizontal"===i.orient?"y":"x";if(sY(t[e]))return{field:e}}}}(e),u=function(e){if(!e.component.selection)return null;const t=CU(e.component.selection).length;let n=t,r=e.parent;for(;r&&0===n;)n=CU(r.component.selection).length,r=r.parent;return n?{interactive:t>0||"geoshape"===e.mark||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}(e),f=FH("aria",r,a),d=H2[n].postEncodingTransform?H2[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:H2[n].vgMark,...o?{clip:o}:{},...s?{style:s}:{},...l?{key:l.field}:{},...c?{sort:c}:{},...u||{},...!1===f?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(CZ.Main)},encode:{update:H2[n].encodeEntry(e)},...d?{transform:d}:{}}]}class X2 extends e2{constructor(e,t,n,r={},i){super(e,"unit",t,n,i,void 0,YX(e)?e.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const a=dG(e.mark)?{...e.mark}:{type:e.mark},o=a.type;void 0===a.filled&&(a.filled=function(e,t,{graticule:n}){if(n)return!1;const r=zH("filled",e,t),i=e.type;return HU(r,i!==eG&&i!==QW&&i!==nG)}(a,i,{graticule:e.data&&SZ(e.data)}));const s=this.encoding=function(e,t,n,r){const i={};for(const t of CU(e))iq(t)||EV(`${a=t}-encoding is dropped as ${a} is not a valid encoding channel.`);var a;for(let a of pq){if(!e[a])continue;const o=e[a];if(zq(a)){const e=hq(a),t=i[e];if(sY(t)&&sW(t.type)&&sY(o)&&!t.timeUnit){EV(aV(e));continue}}if("angle"!==a||"arc"!==t||e.theta||(EV("Arc marks uses theta channel rather than angle, replacing angle with theta."),a=h$),nX(e,a,t)){if(a===A$&&"line"===t){const t=OY(e[a]);if(t?.aggregate){EV("Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.");continue}}if(a===b$&&(n?"fill"in e:"stroke"in e))EV(sV("encoding",{fill:"fill"in e,stroke:"stroke"in e}));else if(a===N$||a===R$&&!Ts(o)&&!mY(o)||a===D$&&Ts(o)){if(o){if(a===R$){const t=e[a];if(rY(t)){i[a]=t;continue}}i[a]=Zs(o).reduce(((e,t)=>(sY(t)?e.push(DY(t,a)):EV(lV(t,a)),e)),[])}}else{if(a===D$&&null===o)i[a]=null;else if(!(sY(o)||cY(o)||mY(o)||iY(o)||wH(o))){EV(lV(o,a));continue}i[a]=NY(o,a,r)}}else EV(cV(a,t))}return i}(e.encoding||{},o,a.filled,i);this.markDef=xK(a,s,i),this.size=function({encoding:e,size:t}){for(const n of Nq){const r=uq(n);GX(t[r])&&uY(e[n])&&(delete t[r],EV(vV(r)))}return t}({encoding:s,size:YX(e)?{...r,...e.width?{width:e.width}:{},...e.height?{height:e.height}:{}}:r}),this.stack=bK(this.markDef,s),this.specifiedScales=this.initScales(o,s),this.specifiedAxes=this.initAxes(s),this.specifiedLegends=this.initLegends(s),this.specifiedProjection=e.projection,this.selection=(e.params??[]).filter((e=>UX(e)))}get hasProjection(){const{encoding:e}=this,t=this.mark===lG,n=e&&q$.some((t=>hY(e[t])));return t||n}scaleDomain(e){const t=this.specifiedScales[e];return t?t.domain:void 0}axis(e){return this.specifiedAxes[e]}legend(e){return this.specifiedLegends[e]}initScales(e,t){return Kq.reduce(((e,n)=>{const r=RY(t[n]);return r&&(e[n]=this.initScale(r.scale??{})),e}),{})}initScale(e){const{domain:t,range:n}=e,r=bH(e);return Ts(t)&&(r.domain=t.map(CH)),Ts(n)&&(r.range=n.map(CH)),r}initAxes(e){return Nq.reduce(((t,n)=>{const r=e[n];if(hY(r)||n===a$&&hY(e.x2)||n===o$&&hY(e.y2)){const e=hY(r)?r.axis:void 0;t[n]=e?this.initAxis({...e}):e}return t}),{})}initAxis(e){const t=CU(e),n={};for(const r of t){const t=e[r];n[r]=$Y(t)?SH(t):CH(t)}return n}initLegends(e){return Yq.reduce(((t,n)=>{const r=RY(e[n]);if(r&&function(e){switch(e){case b$:case x$:case _$:case A$:case w$:case E$:case S$:case C$:return!0;case T$:case M$:case k$:return!1}}(n)){const e=r.legend;t[n]=e?bH(e):e}return t}),{})}parseData(){this.component.data=E2(this)}parseLayoutSize(){!function(e){const{size:t,component:n}=e;for(const r of Nq){const i=uq(r);if(t[i]){const e=t[i];n.layoutSize.set(i,GX(e)?"step":e,!0)}else{const t=_2(e,i);n.layoutSize.set(i,t,!1)}}}(this)}parseSelections(){this.component.selection=function(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const t=LU(i.name),a=i.select,o=Al(a)?a:a.type,s=Ms(a)?fU(a):{type:o},l=r[o];for(const e in l)"fields"!==e&&"encodings"!==e&&("mark"===e&&(s.mark={...l.mark,...s.mark}),void 0!==s[e]&&!0!==s[e]||(s[e]=fU(l[e]??s[e])));const c=n[t]={...s,name:t,type:o,init:i.value,bind:i.bind,events:Al(s.on)?CI(s.on,"scope"):Zs(fU(s.on))},u=fU(i);for(const t of lQ)t.defined(c)&&t.parse&&t.parse(e,c,u)}return n}(this,this.selection)}parseMarkGroup(){this.component.mark=V2(this)}parseAxesAndHeaders(){var e;this.component.axes=(e=this,Nq.reduce(((t,n)=>(e.component.scales[n]&&(t[n]=[I2(n,e)]),t)),{}))}assembleSelectionTopLevelSignals(e){return function(e,t){let n=!1;for(const r of OU(e.component.selection??{})){const i=r.name,a=Nl(i+iQ);if(0===t.filter((e=>e.name===i)).length){const e="global"===r.resolve?"union":r.resolve,n="point"===r.type?", true, true)":")";t.push({name:r.name,update:`${sQ}(${a}, ${Nl(e)}${n}`})}n=!0;for(const n of lQ)n.defined(r)&&n.topLevelSignals&&(t=n.topLevelSignals(e,r,t))}n&&0===t.filter((e=>"unit"===e.name)).length&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]});return IZ(t)}(this,e)}assembleSignals(){return[..._Q(this),...LZ(this,[])]}assembleSelectionData(e){return function(e,t){const n=[...t],r=cQ(e,{escape:!1});for(const t of OU(e.component.selection??{})){const e={name:t.name+iQ};if(t.project.hasSelectionId&&(e.transform=[{type:"collect",sort:{field:FX}}]),t.init){const n=t.project.items.map(RZ);e.values=t.project.hasSelectionId?t.init.map((e=>({unit:r,[FX]:NZ(e,!1)[0]}))):t.init.map((e=>({unit:r,fields:n,values:NZ(e,!1)})))}n.filter((e=>e.name===t.name+iQ)).length||n.push(e)}return n}(this,e)}assembleLayout(){return null}assembleLayoutSignals(){return GQ(this)}assembleMarks(){let e=this.component.mark??[];return this.parent&&J1(this.parent)||(e=PZ(this,e)),e.map(this.correctDataNames)}assembleGroupStyle(){const{style:e}=this.view||{};return void 0!==e?e:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(e){return ZY(this.encoding,e)}fieldDef(e){return OY(this.encoding[e])}typedFieldDef(e){const t=this.fieldDef(e);return pY(t)?t:null}}class K2 extends Q1{constructor(e,t,n,r,i){super(e,"layer",t,n,i,e.resolve,e.view);const a={...r,...e.width?{width:e.width}:{},...e.height?{height:e.height}:{}};this.children=e.layer.map(((e,t)=>{if(dK(e))return new K2(e,this,this.getName(`layer_${t}`),a,i);if(XY(e))return new X2(e,this,this.getName(`layer_${t}`),a,i);throw new Error(VH(e))}))}parseData(){this.component.data=E2(this);for(const e of this.children)e.parseData()}parseLayoutSize(){var e;b2(e=this),x2(e,"width"),x2(e,"height")}parseSelections(){this.component.selection={};for(const e of this.children){e.parseSelections();for(const t of CU(e.component.selection))this.component.selection[t]=e.component.selection[t]}}parseMarkGroup(){for(const e of this.children)e.parseMarkGroup()}parseAxesAndHeaders(){!function(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const r of e.children){r.parseAxesAndHeaders();for(const i of CU(r.component.axes))n.axis[i]=e0(e.component.resolve,i),"shared"===n.axis[i]&&(t[i]=N2(t[i],r.component.axes[i]),t[i]||(n.axis[i]="independent",delete t[i]))}for(const i of Nq){for(const a of e.children)if(a.component.axes[i]){if("independent"===n.axis[i]){t[i]=(t[i]??[]).concat(a.component.axes[i]);for(const e of a.component.axes[i]){const{value:t,explicit:n}=e.getWithExplicit("orient");if(!wH(t)){if(r[t]>0&&!n){const n=R2[t];r[t]>r[n]&&e.set("orient",n,!1)}r[t]++}}}delete a.component.axes[i]}if("independent"===n.axis[i]&&t[i]&&t[i].length>1)for(const[e,n]of(t[i]||[]).entries())e>0&&n.get("grid")&&!n.explicit.grid&&(n.implicit.grid=!1)}}(this)}assembleSelectionTopLevelSignals(e){return this.children.reduce(((e,t)=>t.assembleSelectionTopLevelSignals(e)),e)}assembleSignals(){return this.children.reduce(((e,t)=>e.concat(t.assembleSignals())),_Q(this))}assembleLayoutSignals(){return this.children.reduce(((e,t)=>e.concat(t.assembleLayoutSignals())),GQ(this))}assembleSelectionData(e){return this.children.reduce(((e,t)=>t.assembleSelectionData(e)),e)}assembleGroupStyle(){const e=new Set;for(const t of this.children)for(const n of Zs(t.assembleGroupStyle()))e.add(n);const t=Array.from(e);return t.length>1?t:1===t.length?t[0]:void 0}assembleTitle(){let e=super.assembleTitle();if(e)return e;for(const t of this.children)if(e=t.assembleTitle(),e)return e}assembleLayout(){return null}assembleMarks(){return function(e,t){for(const n of e.children)X1(n)&&(t=PZ(n,t));return t}(this,this.children.flatMap((e=>e.assembleMarks())))}assembleLegends(){return this.children.reduce(((e,t)=>e.concat(t.assembleLegends())),y0(this))}}function Z2(e,t,n,r,i){if(ZG(e))return new A2(e,t,n,i);if(dK(e))return new K2(e,t,n,r,i);if(XY(e))return new X2(e,t,n,r,i);if(function(e){return HX(e)||VX(e)||qX(e)}(e))return new M2(e,t,n,i);throw new Error(VH(e))}function J2(e,t={}){var n;t.logger&&(n=t.logger,AV=n),t.fieldTitle&&EY(t.fieldTitle);try{const n=oK(Cs(t.config,e.config)),r=lZ(e,n),i=Z2(r,null,"",void 0,n);i.parse(),function(e,t){h1(e.sources);let n=0,r=0;for(let r=0;r<d1&&m1(e,t,!0);r++)n++;e.sources.map(c1);for(let n=0;n<d1&&m1(e,t,!1);n++)r++;h1(e.sources),Math.max(n,r)===d1&&EV(`Maximum optimization runs(${d1}) reached.`)}(i.component.data,i);const a=function(e,t,n={},r){const i=e.config?uK(e.config):void 0,a=[].concat(e.assembleSelectionData([]),function(e,t){const n=[],r=p2(n);let i=0;for(const t of e.sources){t.hasName()||(t.dataName="source_"+i++);const e=t.assemble();r(t,e)}for(const e of n)0===e.transform.length&&delete e.transform;let a=0;for(const[e,t]of n.entries())0!==(t.transform??[]).length||t.source||n.splice(a++,0,n.splice(e,1)[0]);for(const t of n)for(const n of t.transform??[])"lookup"===n.type&&(n.from=e.outputNodes[n.from].getSource());for(const e of n)e.name in t&&(e.values=t[e.name]);return n}(e.component.data,n)),o=e.assembleProjections(),s=e.assembleTitle(),l=e.assembleGroupStyle(),c=e.assembleGroupEncodeEntry(!0);let u=e.assembleLayoutSignals();u=u.filter((e=>"width"!==e.name&&"height"!==e.name||void 0===e.value||(t[e.name]=+e.value,!1)));const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...s?{title:s}:{},...l?{style:l}:{},...c?{encode:{update:c}}:{},data:a,...o.length>0?{projections:o}:{},...e.assembleGroup([...u,...e.assembleSelectionTopLevelSignals([]),...$X(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}(i,function(e,t,n,r){const i=r.component.layoutSize.get("width"),a=r.component.layoutSize.get("height");void 0===t?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Al(t)&&(t={type:t});if(i&&a&&(o=t.type,["fit","fit-x","fit-y"].includes(o)))if("step"===i&&"step"===a)EV(XH()),t.type="pad";else if("step"===i||"step"===a){const e="step"===i?"width":"height";EV(XH(Iq(e)));const n="width"===e?"height":"width";t.type=function(e){return e?`fit-${Iq(e)}`:"fit"}(n)}var o;return{...1===CU(t).length&&t.type?"pad"===t.type?{}:{autosize:t.type}:{autosize:t},...pZ(n,!1),...pZ(e,!0)}}(e,r.autosize,n,i),e.datasets,e.usermeta);return{spec:a,normalized:r}}finally{t.logger&&kV(),t.fieldTitle&&EY(AY)}}const Q2="5.21.0";const e3=function(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}};var t3="2.15.0";const n3="#fff",r3="#888",i3={background:"#333",view:{stroke:r3},title:{color:n3,subtitleColor:n3},style:{"guide-label":{fill:n3},"guide-title":{fill:n3}},axis:{domainColor:n3,gridColor:r3,tickColor:n3}},a3="#4572a7",o3={background:"#fff",arc:{fill:a3},area:{fill:a3},line:{stroke:a3,strokeWidth:2},path:{stroke:a3},rect:{fill:a3},shape:{stroke:a3},symbol:{fill:a3,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},s3="#30a2da",l3="#cbcbcb",c3="#f0f0f0",u3="#333",f3={arc:{fill:s3},area:{fill:s3},axis:{domainColor:l3,grid:!0,gridColor:l3,gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:l3,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:c3,group:{fill:c3},legend:{labelColor:u3,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:u3,titleFontSize:14,titlePadding:10},line:{stroke:s3,strokeWidth:2},path:{stroke:s3,strokeWidth:.5},rect:{fill:s3},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:s3},bar:{binSpacing:2,fill:s3,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},d3="#000",h3={group:{fill:"#e5e5e5"},arc:{fill:d3},area:{fill:d3},line:{stroke:d3},path:{stroke:d3},rect:{fill:d3},shape:{stroke:d3},symbol:{fill:d3,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},p3="Benton Gothic, sans-serif",m3="#82c6df",g3="Benton Gothic Bold, sans-serif",v3="normal",y3={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},b3={background:"#ffffff",title:{anchor:"start",color:"#000000",font:g3,fontSize:22,fontWeight:"normal"},arc:{fill:m3},area:{fill:m3},line:{stroke:m3,strokeWidth:2},path:{stroke:m3},rect:{fill:m3},shape:{stroke:m3},symbol:{fill:m3,size:30},axis:{labelFont:p3,labelFontSize:11.5,labelFontWeight:"normal",titleFont:g3,titleFontSize:13,titleFontWeight:v3},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:p3,labelFontSize:11.5,symbolType:"square",titleFont:g3,titleFontSize:13,titleFontWeight:v3},range:{category:y3["category-6"],diverging:y3["fireandice-6"],heatmap:y3["fire-7"],ordinal:y3["fire-7"],ramp:y3["fire-7"]}},x3="#ab5787",_3="#979797",w3={background:"#f9f9f9",arc:{fill:x3},area:{fill:x3},line:{stroke:x3},path:{stroke:x3},rect:{fill:x3},shape:{stroke:x3},symbol:{fill:x3,size:30},axis:{domainColor:_3,domainWidth:.5,gridWidth:.2,labelColor:_3,tickColor:_3,tickWidth:.2,titleColor:_3},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},A3="#3e5c69",k3={background:"#fff",arc:{fill:A3},area:{fill:A3},line:{stroke:A3},path:{stroke:A3},rect:{fill:A3},shape:{stroke:A3},symbol:{fill:A3},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},E3="#1696d2",T3="#000000",M3="Lato",S3="Lato",C3={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},O3={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:M3},axisX:{domain:!0,domainColor:T3,domainWidth:1,grid:!1,labelFontSize:12,labelFont:S3,labelAngle:0,tickColor:T3,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:M3},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:S3,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:M3,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:S3,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:M3,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:C3["six-groups-cat-1"],diverging:C3["diverging-colors"],heatmap:C3["diverging-colors"],ordinal:C3["six-groups-seq"],ramp:C3["shades-blue"]},area:{fill:E3},rect:{fill:E3},line:{color:E3,stroke:E3,strokeWidth:5},trail:{color:E3,stroke:E3,strokeWidth:0,size:1},path:{stroke:E3,strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:E3,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:E3,stroke:null}},arc:{fill:E3},shape:{stroke:E3},symbol:{fill:E3,size:30}},R3="#3366CC",N3="#ccc",L3="Arial, sans-serif",D3={arc:{fill:R3},area:{fill:R3},path:{stroke:R3},rect:{fill:R3},shape:{stroke:R3},symbol:{stroke:R3},circle:{fill:R3},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:L3,fontSize:12},"guide-title":{font:L3,fontSize:12},"group-title":{font:L3,fontSize:12}},title:{font:L3,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:N3,tickColor:N3,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},P3=e=>e*(1/3+1),I3=P3(9),F3=P3(10),z3=P3(12),j3="Segoe UI",B3="wf_standard-font, helvetica, arial, sans-serif",U3="#252423",$3="#605E5C",q3="transparent",H3="#118DFF",V3="#DEEFFF",W3=[V3,H3],G3={view:{stroke:q3},background:q3,font:j3,header:{titleFont:B3,titleFontSize:z3,titleColor:U3,labelFont:j3,labelFontSize:F3,labelColor:$3},axis:{ticks:!1,grid:!1,domain:!1,labelColor:$3,labelFontSize:I3,titleFont:B3,titleColor:U3,titleFontSize:z3,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:"#C8C6C4",gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:H3},line:{stroke:H3,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:j3,fontSize:I3,fill:$3},arc:{fill:H3},area:{fill:H3,line:!0,opacity:.6},path:{stroke:H3},rect:{fill:H3},point:{fill:H3,filled:!0,size:75},shape:{stroke:H3},symbol:{fill:H3,strokeWidth:1.5,size:50},legend:{titleFont:j3,titleFontWeight:"bold",titleColor:$3,labelFont:j3,labelFontSize:F3,labelColor:$3,symbolType:"circle",symbolSize:75},range:{category:[H3,"#12239E","#E66C37","#6B007B","#E044A7","#744EC2","#D9B300","#D64550"],diverging:W3,heatmap:W3,ordinal:[V3,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",H3]}},Y3='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',X3={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},K3=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Z3=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function J3({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=X3.gridBg[e],i=X3.textPrimary[e],a=X3.textSecondary[e],o="dark"===n?K3:Z3,s="dark"===n?"#d4bbff":"#6929c4";return{background:t,arc:{fill:s},area:{fill:s},path:{stroke:s},rect:{fill:s},shape:{stroke:s},symbol:{stroke:s},circle:{fill:s},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:Y3,fontWeight:600},axis:{labelColor:a,labelFontSize:12,labelFont:'IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',labelFontWeight:400,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:X3.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:Y3,fill:a,fontWeight:400},"guide-title":{font:Y3,fill:a,fontWeight:400}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const Q3=J3({theme:"white",background:"#ffffff"}),e5=J3({theme:"g10",background:"#f4f4f4"}),t5=J3({theme:"g90",background:"#262626"}),n5=J3({theme:"g100",background:"#161616"}),r5=t3;function i5(e,t){return JSON.stringify(e,function(e){const t=[];return function(n,r){if("object"!=typeof r||null===r)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}(t))}var a5="#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black;\n}\n#vg-tooltip-element.visible {\n  visibility: visible;\n}\n#vg-tooltip-element h2 {\n  margin-top: 0;\n  margin-bottom: 10px;\n  font-size: 13px;\n}\n#vg-tooltip-element table {\n  border-spacing: 0;\n}\n#vg-tooltip-element table tr {\n  border: none;\n}\n#vg-tooltip-element table tr td {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-top: 2px;\n  padding-bottom: 2px;\n}\n#vg-tooltip-element table tr td.key {\n  color: #808080;\n  max-width: 150px;\n  text-align: right;\n  padding-right: 4px;\n}\n#vg-tooltip-element table tr td.value {\n  display: block;\n  max-width: 300px;\n  max-height: 7em;\n  text-align: left;\n}\n#vg-tooltip-element.dark-theme {\n  background-color: rgba(32, 32, 32, 0.9);\n  border: 1px solid #f5f5f5;\n  color: white;\n}\n#vg-tooltip-element.dark-theme td.key {\n  color: #bfbfbf;\n}\n";const o5="vg-tooltip-element",s5={offsetX:10,offsetY:10,id:o5,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2,formatTooltip:function(e,t,n,r){if(Ts(e))return`[${e.map((e=>t(Al(e)?e:i5(e,n)))).join(", ")}]`;if(Ms(e)){let i="";const{title:a,image:o,...s}=e;a&&(i+=`<h2>${t(a)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const l=Object.keys(s);if(l.length>0){i+="<table>";for(const e of l){let r=s[e];void 0!==r&&(Ms(r)&&(r=i5(r,n)),i+=`<tr><td class="key">${t(e)}</td><td class="value">${t(r)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)},baseURL:""};class l5{constructor(e){this.options={...s5,...e};const t=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const e=document.createElement("style");e.setAttribute("id",this.options.styleId),e.innerHTML=function(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return a5.toString().replace(o5,e)}(t);const n=document.head;n.childNodes.length>0?n.insertBefore(e,n.childNodes[0]):n.appendChild(e)}}tooltipHandler(e,t,n,r){if(this.el=document.getElementById(this.options.id),!this.el){this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip");(document.fullscreenElement??document.body).appendChild(this.el)}if(null==r||""===r)return void this.el.classList.remove("visible",`${this.options.theme}-theme`);this.el.innerHTML=this.options.formatTooltip(r,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:i,y:a}=function(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let a=e.clientY+r;return a+t.height>window.innerHeight&&(a=+e.clientY-r-t.height),{x:i,y:a}}(t,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${a}px`,this.el.style.left=`${i}px`}}function c5(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var u5=class{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}};const f5=Object.freeze({loose:!0}),d5=Object.freeze({});var h5=e=>e?"object"!=typeof e?f5:e:d5,p5={exports:{}};var m5={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};var g5="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};!function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=m5,a=g5,o=(t=e.exports={}).re=[],s=t.safeRe=[],l=t.src=[],c=t.t={};let u=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=(e,t,n)=>{const r=(e=>{for(const[t,n]of d)e=e.split(`${t}*`).join(`${t}{0,${n}}`).split(`${t}+`).join(`${t}{1,${n}}`);return e})(t),i=u++;a(e,i,t),c[e]=i,l[i]=t,o[i]=new RegExp(t,n?"g":void 0),s[i]=new RegExp(r,n?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","\\d+"),h("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),h("MAINVERSION",`(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${l[c.NUMERICIDENTIFIER]}|${l[c.NONNUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${l[c.NUMERICIDENTIFIERLOOSE]}|${l[c.NONNUMERICIDENTIFIER]})`),h("PRERELEASE",`(?:-(${l[c.PRERELEASEIDENTIFIER]}(?:\\.${l[c.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${l[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[c.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER",`${f}+`),h("BUILD",`(?:\\+(${l[c.BUILDIDENTIFIER]}(?:\\.${l[c.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${l[c.MAINVERSION]}${l[c.PRERELEASE]}?${l[c.BUILD]}?`),h("FULL",`^${l[c.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${l[c.MAINVERSIONLOOSE]}${l[c.PRERELEASELOOSE]}?${l[c.BUILD]}?`),h("LOOSE",`^${l[c.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",`${l[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),h("XRANGEIDENTIFIER",`${l[c.NUMERICIDENTIFIER]}|x|X|\\*`),h("XRANGEPLAIN",`[v=\\s]*(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:${l[c.PRERELEASE]})?${l[c.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:${l[c.PRERELEASELOOSE]})?${l[c.BUILD]}?)?)?`),h("XRANGE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAINLOOSE]}$`),h("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),h("COERCE",`${l[c.COERCEPLAIN]}(?:$|[^\\d])`),h("COERCEFULL",l[c.COERCEPLAIN]+`(?:${l[c.PRERELEASE]})?`+`(?:${l[c.BUILD]})?(?:$|[^\\d])`),h("COERCERTL",l[c.COERCE],!0),h("COERCERTLFULL",l[c.COERCEFULL],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${l[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",h("TILDE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${l[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",h("CARET",`^${l[c.LONECARET]}${l[c.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${l[c.LONECARET]}${l[c.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${l[c.GTLT]}\\s*(${l[c.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]}|${l[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${l[c.XRANGEPLAIN]})\\s+-\\s+(${l[c.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${l[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[c.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(p5,p5.exports);var v5=p5.exports;const y5=/^[0-9]+$/,b5=(e,t)=>{const n=y5.test(e),r=y5.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1};var x5={compareIdentifiers:b5,rcompareIdentifiers:(e,t)=>b5(t,e)};const _5=g5,{MAX_LENGTH:w5,MAX_SAFE_INTEGER:A5}=m5,{safeRe:k5,t:E5}=v5,T5=h5,{compareIdentifiers:M5}=x5;var S5=class e{constructor(t,n){if(n=T5(n),t instanceof e){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if("string"!=typeof t)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>w5)throw new TypeError(`version is longer than ${w5} characters`);_5("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?k5[E5.LOOSE]:k5[E5.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>A5||this.major<0)throw new TypeError("Invalid major version");if(this.minor>A5||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>A5||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<A5)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(_5("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if("string"==typeof t&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof e||(t=new e(t,this.options)),M5(this.major,t.major)||M5(this.minor,t.minor)||M5(this.patch,t.patch)}comparePre(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const e=this.prerelease[n],r=t.prerelease[n];if(_5("prerelease compare",n,e,r),void 0===e&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===e)return-1;if(e!==r)return M5(e,r)}while(++n)}compareBuild(t){t instanceof e||(t=new e(t,this.options));let n=0;do{const e=this.build[n],r=t.build[n];if(_5("build compare",n,e,r),void 0===e&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===e)return-1;if(e!==r)return M5(e,r)}while(++n)}inc(e,t,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(n)?1:0;if(!t&&!1===n)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let r=this.prerelease.length;for(;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);if(-1===r){if(t===this.prerelease.join(".")&&!1===n)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let r=[t,e];!1===n&&(r=[t]),0===M5(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=r):this.prerelease=r}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};const C5=S5;var O5=(e,t,n)=>new C5(e,n).compare(new C5(t,n));const R5=O5;var N5=(e,t,n)=>0===R5(e,t,n);const L5=O5;var D5=(e,t,n)=>0!==L5(e,t,n);const P5=O5;var I5=(e,t,n)=>P5(e,t,n)>0;const F5=O5;var z5=(e,t,n)=>F5(e,t,n)>=0;const j5=O5;var B5=(e,t,n)=>j5(e,t,n)<0;const U5=O5;var $5=(e,t,n)=>U5(e,t,n)<=0;const q5=N5,H5=D5,V5=I5,W5=z5,G5=B5,Y5=$5;var X5,K5,Z5,J5,Q5=(e,t,n,r)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return q5(e,n,r);case"!=":return H5(e,n,r);case">":return V5(e,n,r);case">=":return W5(e,n,r);case"<":return G5(e,n,r);case"<=":return Y5(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};function e4(){if(J5)return Z5;J5=1;class e{constructor(t,i){if(i=n(i),t instanceof e)return t.loose===!!i.loose&&t.includePrerelease===!!i.includePrerelease?t:new e(t.raw,i);if(t instanceof r)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=i,this.loose=!!i.loose,this.includePrerelease=!!i.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!h(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&p(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){const n=((this.options.includePrerelease&&f)|(this.options.loose&&d))+":"+e,a=t.get(n);if(a)return a;const p=this.options.loose,m=p?o[s.HYPHENRANGELOOSE]:o[s.HYPHENRANGE];e=e.replace(m,T(this.options.includePrerelease)),i("hyphen replace",e),e=e.replace(o[s.COMPARATORTRIM],l),i("comparator trim",e),e=e.replace(o[s.TILDETRIM],c),i("tilde trim",e),e=e.replace(o[s.CARETTRIM],u),i("caret trim",e);let v=e.split(" ").map((e=>g(e,this.options))).join(" ").split(/\s+/).map((e=>E(e,this.options)));p&&(v=v.filter((e=>(i("loose invalid filter",e,this.options),!!e.match(o[s.COMPARATORLOOSE]))))),i("range list",v);const y=new Map,b=v.map((e=>new r(e,this.options)));for(const e of b){if(h(e))return[e];y.set(e.value,e)}y.size>1&&y.has("")&&y.delete("");const x=[...y.values()];return t.set(n,x),x}intersects(t,n){if(!(t instanceof e))throw new TypeError("a Range is required");return this.set.some((e=>m(e,n)&&t.set.some((t=>m(t,n)&&e.every((e=>t.every((t=>e.intersects(t,n)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new a(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(M(this.set[t],e,this.options))return!0;return!1}}Z5=e;const t=new u5,n=h5,r=function(){if(K5)return X5;K5=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(r,i){if(i=n(i),r instanceof t){if(r.loose===!!i.loose)return r;r=r.value}r=r.trim().split(/\s+/).join(" "),o("comparator",r,i),this.options=i,this.loose=!!i.loose,this.parse(r),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(t){const n=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],a=t.match(n);if(!a)throw new TypeError(`Invalid comparator: ${t}`);this.operator=void 0!==a[1]?a[1]:"","="===this.operator&&(this.operator=""),a[2]?this.semver=new s(a[2],this.options.loose):this.semver=e}toString(){return this.value}test(t){if(o("Comparator.test",t,this.options.loose),this.semver===e||t===e)return!0;if("string"==typeof t)try{t=new s(t,this.options)}catch(e){return!1}return a(t,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new l(e.value,r).test(this.value):""===e.operator?""===e.value||new l(this.value,r).test(e.semver):!((r=n(r)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))||(!this.operator.startsWith(">")||!e.operator.startsWith(">"))&&(!this.operator.startsWith("<")||!e.operator.startsWith("<"))&&(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))&&!(a(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))&&!(a(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}}X5=t;const n=h5,{safeRe:r,t:i}=v5,a=Q5,o=g5,s=S5,l=e4();return X5}(),i=g5,a=S5,{safeRe:o,t:s,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:u}=v5,{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:d}=m5,h=e=>"<0.0.0-0"===e.value,p=e=>""===e.value,m=(e,t)=>{let n=!0;const r=e.slice();let i=r.pop();for(;n&&r.length;)n=r.every((e=>i.intersects(e,t))),i=r.pop();return n},g=(e,t)=>(i("comp",e,t),e=x(e,t),i("caret",e),e=y(e,t),i("tildes",e),e=w(e,t),i("xrange",e),e=k(e,t),i("stars",e),e),v=e=>!e||"x"===e.toLowerCase()||"*"===e,y=(e,t)=>e.trim().split(/\s+/).map((e=>b(e,t))).join(" "),b=(e,t)=>{const n=t.loose?o[s.TILDELOOSE]:o[s.TILDE];return e.replace(n,((t,n,r,a,o)=>{let s;return i("tilde",e,t,n,r,a,o),v(n)?s="":v(r)?s=`>=${n}.0.0 <${+n+1}.0.0-0`:v(a)?s=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`:o?(i("replaceTilde pr",o),s=`>=${n}.${r}.${a}-${o} <${n}.${+r+1}.0-0`):s=`>=${n}.${r}.${a} <${n}.${+r+1}.0-0`,i("tilde return",s),s}))},x=(e,t)=>e.trim().split(/\s+/).map((e=>_(e,t))).join(" "),_=(e,t)=>{i("caret",e,t);const n=t.loose?o[s.CARETLOOSE]:o[s.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,((t,n,a,o,s)=>{let l;return i("caret",e,t,n,a,o,s),v(n)?l="":v(a)?l=`>=${n}.0.0${r} <${+n+1}.0.0-0`:v(o)?l="0"===n?`>=${n}.${a}.0${r} <${n}.${+a+1}.0-0`:`>=${n}.${a}.0${r} <${+n+1}.0.0-0`:s?(i("replaceCaret pr",s),l="0"===n?"0"===a?`>=${n}.${a}.${o}-${s} <${n}.${a}.${+o+1}-0`:`>=${n}.${a}.${o}-${s} <${n}.${+a+1}.0-0`:`>=${n}.${a}.${o}-${s} <${+n+1}.0.0-0`):(i("no pr"),l="0"===n?"0"===a?`>=${n}.${a}.${o}${r} <${n}.${a}.${+o+1}-0`:`>=${n}.${a}.${o}${r} <${n}.${+a+1}.0-0`:`>=${n}.${a}.${o} <${+n+1}.0.0-0`),i("caret return",l),l}))},w=(e,t)=>(i("replaceXRanges",e,t),e.split(/\s+/).map((e=>A(e,t))).join(" ")),A=(e,t)=>{e=e.trim();const n=t.loose?o[s.XRANGELOOSE]:o[s.XRANGE];return e.replace(n,((n,r,a,o,s,l)=>{i("xRange",e,n,r,a,o,s,l);const c=v(a),u=c||v(o),f=u||v(s),d=f;return"="===r&&d&&(r=""),l=t.includePrerelease?"-0":"",c?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&d?(u&&(o=0),s=0,">"===r?(r=">=",u?(a=+a+1,o=0,s=0):(o=+o+1,s=0)):"<="===r&&(r="<",u?a=+a+1:o=+o+1),"<"===r&&(l="-0"),n=`${r+a}.${o}.${s}${l}`):u?n=`>=${a}.0.0${l} <${+a+1}.0.0-0`:f&&(n=`>=${a}.${o}.0${l} <${a}.${+o+1}.0-0`),i("xRange return",n),n}))},k=(e,t)=>(i("replaceStars",e,t),e.trim().replace(o[s.STAR],"")),E=(e,t)=>(i("replaceGTE0",e,t),e.trim().replace(o[t.includePrerelease?s.GTE0PRE:s.GTE0],"")),T=e=>(t,n,r,i,a,o,s,l,c,u,f,d)=>`${n=v(r)?"":v(i)?`>=${r}.0.0${e?"-0":""}`:v(a)?`>=${r}.${i}.0${e?"-0":""}`:o?`>=${n}`:`>=${n}${e?"-0":""}`} ${l=v(c)?"":v(u)?`<${+c+1}.0.0-0`:v(f)?`<${c}.${+u+1}.0-0`:d?`<=${c}.${u}.${f}-${d}`:e?`<${c}.${u}.${+f+1}-0`:`<=${l}`}`.trim(),M=(e,t,n)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(i(e[n].semver),e[n].semver!==r.ANY&&e[n].semver.prerelease.length>0){const r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0};return Z5}const t4=e4();var n4=(e,t,n)=>{try{t=new t4(t,n)}catch(e){return!1}return t.test(e)},r4=c5(n4);var i4='.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n}\n.vega-embed.has-actions {\n  padding-right: 38px;\n}\n.vega-embed details:not([open]) > :not(summary) {\n  display: none !important;\n}\n.vega-embed summary {\n  list-style: none;\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 6px;\n  z-index: 1000;\n  background: white;\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n  color: #1b1e23;\n  border: 1px solid #aaa;\n  border-radius: 999px;\n  opacity: 0.2;\n  transition: opacity 0.4s ease-in;\n  cursor: pointer;\n  line-height: 0px;\n}\n.vega-embed summary::-webkit-details-marker {\n  display: none;\n}\n.vega-embed summary:active {\n  box-shadow: #aaa 0px 0px 0px 1px inset;\n}\n.vega-embed summary svg {\n  width: 14px;\n  height: 14px;\n}\n.vega-embed details[open] summary {\n  opacity: 0.7;\n}\n.vega-embed:hover summary, .vega-embed:focus-within summary {\n  opacity: 1 !important;\n  transition: opacity 0.2s ease;\n}\n.vega-embed .vega-actions {\n  position: absolute;\n  z-index: 1001;\n  top: 35px;\n  right: -9px;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 8px;\n  padding-top: 8px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n  border: 1px solid #d9d9d9;\n  background: white;\n  animation-duration: 0.15s;\n  animation-name: scale-in;\n  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n  text-align: left;\n}\n.vega-embed .vega-actions a {\n  padding: 8px 16px;\n  font-family: sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  white-space: nowrap;\n  color: #434a56;\n  text-decoration: none;\n}\n.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {\n  background-color: #f7f7f9;\n  color: black;\n}\n.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n  content: "";\n  display: inline-block;\n  position: absolute;\n}\n.vega-embed .vega-actions::before {\n  left: auto;\n  right: 14px;\n  top: -16px;\n  border: 8px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #d9d9d9;\n}\n.vega-embed .vega-actions::after {\n  left: auto;\n  right: 15px;\n  top: -14px;\n  border: 7px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #fff;\n}\n.vega-embed .chart-wrapper.fit-x {\n  width: 100%;\n}\n.vega-embed .chart-wrapper.fit-y {\n  height: 100%;\n}\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px;\n}\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n';function a4(e,...t){for(const n of t)o4(e,n);return e}function o4(e,t){for(const n of Object.keys(t))Os(e,n,t[n],!0)}const s4=p;let l4=m;const c4="undefined"!=typeof window?window:void 0;void 0===l4&&c4?.vl?.compile&&(l4=c4.vl);const u4={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},f4={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},d4={vega:"Vega","vega-lite":"Vega-Lite"},h4={vega:s4.version,"vega-lite":l4?l4.version:"not available"},p4={vega:e=>e,"vega-lite":(e,t)=>l4.compile(e,{config:t}).spec},m4='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>',g4="chart-wrapper";function v4(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,a=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+a),o.document.title=`${d4[r]} JSON Source`}function y4(e){return!(!e||!("load"in e))}function b4(e){return y4(e)?e:s4.loader(e)}async function x4(e,t,n={}){let r,i;Al(t)?(i=b4(n.loader),r=JSON.parse(await i.load(t))):r=t;const a=function(e){const t=e.usermeta?.embedOptions??{};return Al(t.defaultStyle)&&(t.defaultStyle=!1),t}(r),o=a.loader;i&&!o||(i=b4(n.loader??o));const s=await _4(a,i),l=await _4(n,i),c={...a4(l,s),config:Cs(l.config??{},s.config??{})};return await async function(e,t,n={},r){const i=n.theme?Cs(g[n.theme],n.config??{}):n.config,a=yl(n.actions)?n.actions:a4({},u4,n.actions??{}),o={...f4,...n.i18n},s=n.renderer??"canvas",l=n.logLevel??s4.Warn,c=n.downloadFileName??"visualization",u="string"==typeof e?document.querySelector(e):e;if(!u)throw new Error(`${e} does not exist`);if(!1!==n.defaultStyle){const e="vega-embed-style",{root:t,rootContainer:r}=function(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}(u);if(!t.getElementById(e)){const t=document.createElement("style");t.id=e,t.innerHTML=void 0===n.defaultStyle||!0===n.defaultStyle?i4.toString():n.defaultStyle,r.appendChild(t)}}const f=function(e,t){if(e.$schema){const n=e3(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${d4[n.library]}, but mode argument sets ${d4[t]??t}.`);const r=n.library;return r4(h4[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${d4[r]} ${n.version}, but the current version of ${d4[r]} is v${h4[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}(t,n.mode);let d=p4[f](t,i);if("vega-lite"===f&&d.$schema){const e=e3(d.$schema);r4(h4.vega,`^${e.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${e.version}, but current version is v${h4.vega}.`)}u.classList.add("vega-embed"),a&&u.classList.add("has-actions");u.innerHTML="";let h=u;if(a){const e=document.createElement("div");e.classList.add(g4),u.appendChild(e),h=e}const p=n.patch;p&&(d=p instanceof Function?p(d):qo(d,p,!0,!1).newDocument);n.formatLocale&&s4.formatLocale(n.formatLocale);n.timeFormatLocale&&s4.timeFormatLocale(n.timeFormatLocale);if(n.expressionFunctions)for(const e in n.expressionFunctions){const t=n.expressionFunctions[e];"fn"in t?s4.expressionFunction(e,t.fn,t.visitor):t instanceof Function&&s4.expressionFunction(e,t)}const{ast:m}=n,v=s4.parse(d,"vega-lite"===f?{}:i,{ast:m}),y=new(n.viewClass||s4.View)(v,{loader:r,logLevel:l,renderer:s,...m?{expr:s4.expressionInterpreter??n.expr??aU}:{}});if(y.addSignalListener("autosize",((e,t)=>{const{type:n}=t;"fit-x"==n?(h.classList.add("fit-x"),h.classList.remove("fit-y")):"fit-y"==n?(h.classList.remove("fit-x"),h.classList.add("fit-y")):"fit"==n?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")})),!1!==n.tooltip){const{loader:e,tooltip:t}=n,r=e&&!y4(e)?e?.baseURL:void 0,i=function(e){return"function"==typeof e}(t)?t:new l5({baseURL:r,...!0===t?{}:t}).call;y.tooltip(i)}let b,{hover:x}=n;void 0===x&&(x="vega"===f);if(x){const{hoverSet:e,updateSet:t}="boolean"==typeof x?{}:x;y.hover(e,t)}n&&(null!=n.width&&y.width(n.width),null!=n.height&&y.height(n.height),null!=n.padding&&y.padding(n.padding));if(await y.initialize(h,n.bind).runAsync(),!1!==a){let e=u;if(!1!==n.defaultStyle||n.forceActionsMenu){const t=document.createElement("details");t.title=o.CLICK_TO_VIEW_ACTIONS,u.append(t),e=t;const n=document.createElement("summary");n.innerHTML=m4,t.append(n),b=e=>{t.contains(e.target)||t.removeAttribute("open")},document.addEventListener("click",b)}const r=document.createElement("div");if(e.append(r),r.classList.add("vega-actions"),!0===a||!1!==a.export)for(const e of["svg","png"])if(!0===a||!0===a.export||a.export[e]){const t=o[`${e.toUpperCase()}_ACTION`],i=document.createElement("a"),a=Ms(n.scaleFactor)?n.scaleFactor[e]:n.scaleFactor;i.text=t,i.href="#",i.target="_blank",i.download=`${c}.${e}`,i.addEventListener("mousedown",(async function(t){t.preventDefault();const n=await y.toImageURL(e,a);this.href=n})),r.append(i)}if(!0===a||!1!==a.source){const e=document.createElement("a");e.text=o.SOURCE_ACTION,e.href="#",e.addEventListener("click",(function(e){v4(rs()(t),n.sourceHeader??"",n.sourceFooter??"",f),e.preventDefault()})),r.append(e)}if("vega-lite"===f&&(!0===a||!1!==a.compiled)){const e=document.createElement("a");e.text=o.COMPILED_ACTION,e.href="#",e.addEventListener("click",(function(e){v4(rs()(d),n.sourceHeader??"",n.sourceFooter??"","vega"),e.preventDefault()})),r.append(e)}if(!0===a||!1!==a.editor){const e=n.editorUrl??"https://vega.github.io/editor/",a=document.createElement("a");a.text=o.EDITOR_ACTION,a.href="#",a.addEventListener("click",(function(n){!function(e,t,n){const r=e.open(t),{origin:i}=new URL(t);let a=40;e.addEventListener("message",(function t(n){n.source===r&&(a=0,e.removeEventListener("message",t,!1))}),!1),setTimeout((function e(){a<=0||(r.postMessage(n,i),setTimeout(e,250),a-=1)}),250)}(window,e,{config:i,mode:p?"vega":f,renderer:s,spec:rs()(p?d:t)}),n.preventDefault()})),r.append(a)}}function _(){b&&document.removeEventListener("click",b),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:_,embedOptions:n}}(e,r,c,i)}async function _4(e,t){const n=Al(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=Al(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function w4(e,t){Object.keys(t).forEach((n=>{!function(e,t,n){var r;n&&((r=n)&&"[object Function]"==={}.toString.call(r)?n(e.data(t)):e.change(t,s4.changeset().remove((()=>!0)).insert(n)))}(e,n,t[n])}))}function A4(e){const t=new Set;return e.forEach((e=>{Object.keys(e).forEach((e=>{t.add(e)}))})),t}const k4=()=>{};function E4(e,t){const n=Object.keys(t);return n.forEach((n=>{try{e.addSignalListener(n,t[n])}catch(e){console.warn("Cannot add invalid signal listener.",e)}})),n.length>0}var T4=n(67329),M4=n.n(T4);function S4(e,t){const n=Object.keys(t);return n.forEach((n=>{try{e.removeSignalListener(n,t[n])}catch(e){console.warn("Cannot remove invalid signal listener.",e)}})),n.length>0}function C4(e){const{spec:t,width:n,height:r}=e;return void 0!==n&&void 0!==r?{...t,width:n,height:r}:void 0!==n?{...t,width:n}:void 0!==r?{...t,height:r}:t}function O4(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class R4 extends v.PureComponent{constructor(){super(...arguments),O4(this,"containerRef",v.createRef()),O4(this,"resultPromise",void 0),O4(this,"handleError",(e=>{const{onError:t=k4}=this.props;t(e,this.containerRef.current),console.warn(e)})),O4(this,"modifyView",(e=>{this.resultPromise&&this.resultPromise.then((t=>(t&&e(t.view),!0))).catch(this.handleError)}))}componentDidMount(){this.createView()}componentDidUpdate(e){const t=A4([this.props,e]);if(t.delete("className"),t.delete("signalListeners"),t.delete("spec"),t.delete("style"),t.delete("width"),t.delete("height"),Array.from(t).some((t=>this.props[t]!==e[t])))this.clearView(),this.createView();else{const t=function(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=A4([e,t]);return!r.has("width")||"width"in e&&"width"in t&&e.width===t.width||("width"in e&&"number"==typeof e.width?n.width=e.width:n.isExpensive=!0),!r.has("height")||"height"in e&&"height"in t&&e.height===t.height||("height"in e&&"number"==typeof e.height?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some((n=>!(n in e)||!(n in t)||!M4()(e[n],t[n])))&&(n.isExpensive=!0),!(!1===n.width&&!1===n.height&&!n.isExpensive)&&n}(C4(this.props),C4(e)),{signalListeners:n}=this.props,{signalListeners:r}=e;if(t)if(t.isExpensive)this.clearView(),this.createView();else{const e=!Eo(n,r);this.modifyView((i=>{!1!==t.width&&i.width(t.width),!1!==t.height&&i.height(t.height),e&&(r&&S4(i,r),n&&E4(i,n)),i.run()}))}else Eo(n,r)||this.modifyView((e=>{r&&S4(e,r),n&&E4(e,n),e.run()}))}}componentWillUnmount(){this.clearView()}createView(){const{spec:e,onNewView:t,signalListeners:n={},width:r,height:i,...a}=this.props;if(this.containerRef.current){const e=C4(this.props);this.resultPromise=x4(this.containerRef.current,e,a).then((e=>{if(e){const{view:t}=e;E4(t,n)&&t.run()}return e})).catch(this.handleError),t&&this.modifyView(t)}}clearView(){return this.resultPromise&&this.resultPromise.then((e=>{e&&e.finalize()})).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:e,style:t}=this.props;return v.createElement("div",{ref:this.containerRef,className:e,style:t})}}function N4(){return N4=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N4.apply(this,arguments)}function L4(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}O4(R4,"propTypes",{className:le().string,onError:le().func});class D4 extends v.PureComponent{constructor(){super(...arguments),L4(this,"vegaEmbed",v.createRef()),L4(this,"handleNewView",(e=>{this.update();const{onNewView:t=k4}=this.props;t(e)}))}componentDidMount(){this.update()}componentDidUpdate(e){Eo(this.props.data,e.data)||this.update()}update(){const{data:e}=this.props;this.vegaEmbed.current&&e&&Object.keys(e).length>0&&this.vegaEmbed.current.modifyView((t=>{w4(t,e),t.resize().run()}))}render(){const{data:e,...t}=this.props;return v.createElement(R4,N4({ref:this.vegaEmbed},t,{onNewView:this.handleNewView}))}}function P4(){return P4=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P4.apply(this,arguments)}function I4(e){return v.createElement(D4,P4({},e,{mode:"vega-lite"}))}L4(D4,"defaultProps",{data:{}});const F4=e=>{let{spec:t,actions:n,renderer:r}=e;return v.createElement(I4,{spec:t,actions:n,renderer:r})};function z4(){return z4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z4.apply(null,arguments)}const j4=e=>{let{help:t,plot:n,attrs:r}=e;return v.createElement("div",r,v.createElement(Ma,t),v.createElement(Kn,n))},B4=e=>{let{help:t,spec:n,actions:r,attrs:i}=e;return v.createElement("div",{className:"row"},v.createElement("div",{className:"col"},v.createElement("div",i,v.createElement(Ma,t),v.createElement(F4,{spec:n,actions:r}))))},U4=e=>v.createElement(j4,z4({},e,{attrs:{className:"summary_card",id:e.id}})),$4=e=>v.createElement(B4,z4({},e,{attrs:{className:"vega_summary_card",id:e.id}})),q4=e=>v.createElement(j4,z4({},e,{attrs:{className:"summary_card_row",id:e.id}})),H4=e=>v.createElement(B4,z4({},e,{attrs:{className:"vega_summary_card_row",id:e.id}})),V4=j4;class W4 extends v.Component{render(){const{median_gene_plot:e,seq_saturation_plot:t}=this.props,n=e=>{Fn()(e,"plot.layout")&&(e.plot.layout.width=460)};return n(e),n(t),v.createElement("div",null,_o(Zn,this.props.barnyard,"barnyard"),_o(nr,this.props.targeted,"targeted"),_o(Ao,this.props.umi_plots,"umi_plots"),_o(H4,{...this.props.violin_plots,actions:{export:!0,source:!1,compiled:!1,editor:!1}},"violin_plots"),_o(xo,this.props.clustering_selector,"clustering_selector"),t&&v.createElement(v.Fragment,null,v.createElement("div",{className:"summary_card_column"},_o(U4,t,"seq_saturation_plot"))),e&&v.createElement(v.Fragment,null,v.createElement("div",{className:"summary_card_gutter"},""),v.createElement("div",{className:"summary_card_column"},_o(U4,e,"median_gene_plot"))),_o(Zn,this.props.gdna,"gdna"))}}class G4 extends v.Component{render(){const{antibody_cells:e,antibody_treemap_plot:t,gex_fbc_correlation_plot:n,isotype_corr_plot:r,antibody_histogram_plot:i}=this.props;return t&&(t.plot.layout.width=920),i&&(i.plot.layout.width=920),v.createElement("div",null,this.props.isotype_corr_plot&&v.createElement("p",null,v.createElement("br",null),"The Antibody tab is new to the web summary!",v.createElement("a",{href:"https://10xgen.com/spaceranger-websummary",target:"_blank",rel:"noopener noreferrer",title:"Click here for detailed information about the 10x Genomics web_summary.html"},"Click here to learn more"),"."),_o(xo,this.props.antibody_clustering_selector,"antibody_clustering_selector"),_o(Yn,e,"cells"),_o(q4,t,"antibody_treemap_plot"),_o(H4,{...this.props.raw_normalized_heatmap,actions:!1},"raw_normalized_heatmap"),v.createElement("div",{className:"summary_card_row"},n&&v.createElement(v.Fragment,null,v.createElement("div",{className:"summary_card_column"},_o($4,{...this.props.gex_fbc_correlation_plot,actions:!1},"gex_fbc_correlation_plot"))),r&&v.createElement(v.Fragment,null,v.createElement("div",{className:"summary_card_column"},_o($4,{...this.props.isotype_corr_plot,actions:!1},"isotype_corr_plot")))),_o(q4,i,"antibody_histogram_plot"))}}class Y4 extends v.Component{render(){const{antigen_treemap_plot:e,antigen_histogram_plot:t,clonotype_clustermap:n}=this.props;return e&&(e.plot.layout.width=920),t&&(t.plot.layout.width=920),n&&(n.plot.layout.width=920),v.createElement("div",null,t&&v.createElement(v.Fragment,null,v.createElement("div",{className:"row"},v.createElement("div",{className:"col"},_o(q4,t,"antigen_histogram_plot")))),n&&v.createElement(v.Fragment,null,v.createElement("div",{className:"row"},v.createElement("div",{className:"col"},_o(q4,n,"clonotype_clustermap")))))}}class X4 extends v.Component{render(){const{cell_type_bar_chart:e,cell_type_umap_plot:t,spatial_cell_types_chart:n}=this.props;return v.createElement("div",null,v.createElement("div",{className:"summary_card_row"},e&&v.createElement(v.Fragment,null,v.createElement("div",{className:"summary_card_column"},_o($4,{...this.props.cell_type_bar_chart,actions:!1},"cell_type_bar_chart"))),t&&v.createElement(v.Fragment,null,v.createElement("div",{className:"summary_card_column"},_o($4,{...this.props.cell_type_umap_plot,actions:!1},"cell_type_umap_plot")))),_o(H4,{...this.props.total_cells_bar_chart,actions:!1},"total_cells_bar_chart"),v.createElement("div",{className:"summary_card_row"},n&&v.createElement("div",{className:"summary_card_column"},_o($4,{...this.props.spatial_cell_types_chart,actions:!1},"spatial_cell_types_chart"))))}}function K4(){return K4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K4.apply(null,arguments)}const Z4=e=>{let{help:t,table:n,id:r}=e;return v.createElement("div",null,v.createElement(qn,K4({},t,{key:`${r}_help`})),v.createElement("div",{className:"clonotype_table"},v.createElement(er,K4({},n,{key:`${r}_table`}))))};class J4 extends v.Component{render(){const e={margin:"20px auto auto auto",width:"600px",float:"none"},{vdj_clonotype_hist:t,vdj_clonotype:n}=this.props;return v.createElement(v.Fragment,null,v.createElement("div",{className:"summary_border",style:e,id:"vdj_clonotype_hist"},_o(V4,t)),v.createElement("div",{className:"summary_border",style:e,id:"vdj_clonotype"},_o(Z4,n,"vdj_clonotype")))}}function Q4(){return Q4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q4.apply(null,arguments)}const e6=e=>{let{info:t,pipelineName:n,titles:r}=e;return v.createElement("nav",{className:"navbar navbar-dark navbar-expand-md"},v.createElement("div",{className:"container"},v.createElement("a",{className:"navbar-brand"},v.createElement(t6,{className:"navbar-logo"}),v.createElement("span",{className:"text-white","data-test":"pipelineName"},n)),v.createElement("div",{className:"collapse navbar-collapse"},v.createElement("ul",{className:"navbar-nav"},E()(r,(e=>v.createElement("li",{key:e,className:"nav-item"},v.createElement("a",{className:"nav-link",href:`#${e}`},e))))),t?v.createElement("ul",{className:"navbar-nav"},E()(t.cols,(e=>v.createElement("li",{key:e[0],className:"nav-item"},v.createElement("ul",{className:"navbar-info"},v.createElement("li",{className:"title"},e[0]),v.createElement("li",{className:"info"},e[1])))))):null)))},t6=e=>v.createElement("svg",Q4({viewBox:"0 0 207 142"},e),v.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},v.createElement("g",null,v.createElement("path",{d:"M88.708,10.6675 C71.241,10.6675 61.129,17.0115 61.129,49.4375 C61.129,81.8625 71.241,88.2065 88.708,88.2065 C106.01,88.2065 116.027,81.8625 116.027,49.4375 C116.027,17.0115 106.01,10.6675 88.708,10.6675 M88.708,98.2155 C62.361,98.2155 51.12,83.6275 51.12,49.4375 C51.12,15.2465 62.361,0.6585 88.708,0.6585 C121.602,0.6585 126.036,25.3165 126.036,49.4375 C126.036,66.6795 123.361,78.3325 117.618,86.1095 C111.604,94.2555 102.147,98.2155 88.708,98.2155",fill:"#FFFFFF"}),v.createElement("path",{d:"M30.7563,3.8999 L21.3603,3.8999 L21.3313,3.8999 L0.1953,19.7459 L7.0913,27.3219 C8.4983,26.3329 20.4723,17.2039 20.4723,17.2039 L20.4723,96.7149 L30.7563,96.7149 L30.7563,3.8999 Z",fill:"#FFFFFF"}),v.createElement("path",{d:"M172.7637,50.5459 C171.2657,52.7429 174.1407,57.5139 174.1407,57.5139 C174.1407,57.5139 179.6157,58.4709 181.1137,56.2739 C181.6427,55.4989 196.2047,34.1499 201.5247,26.3519 L189.2587,26.3519 C183.6057,34.6419 173.8227,48.9929 172.7637,50.5459",fill:"#EFBC1B"}),v.createElement("path",{d:"M159.3379,56.2739 C160.8359,58.4709 166.3119,57.5139 166.3119,57.5139 C166.3119,57.5139 169.1879,52.7429 167.6899,50.5459 C166.6299,48.9929 156.8459,34.6419 151.1939,26.3519 L138.9269,26.3519 C144.2469,34.1499 158.8099,55.4989 159.3379,56.2739",fill:"#71BE4B"}),v.createElement("path",{d:"M203.4502,96.7109 C203.4502,96.7109 181.7612,64.9159 181.1142,63.9659 C179.6162,61.7689 174.1402,62.7269 174.1402,62.7269 C174.1402,62.7269 171.2642,67.4969 172.7632,69.6939 C173.9602,71.4479 186.2932,89.5389 191.2202,96.7659 L203.2652,96.7659 L203.4502,96.7109 Z",fill:"#00A1DF"}),v.createElement("path",{d:"M167.6885,69.6938 C169.1865,67.4968 166.3105,62.7258 166.3105,62.7258 C166.3105,62.7258 160.8355,61.7688 159.3375,63.9658 C158.6905,64.9158 137.0015,96.7108 137.0015,96.7108 L137.1865,96.7658 L149.2325,96.7658 C154.1605,89.5388 166.4935,71.4478 167.6885,69.6938",fill:"#E84B50"}),v.createElement("path",{d:"M3.502,131.4434 L3.502,121.7284 C3.502,115.3614 8.339,111.4104 14.587,111.4104 C20.23,111.4104 25.106,114.3924 25.106,120.0764 L25.106,121.2864 L21.358,121.2864 L21.358,120.5194 C21.358,116.6894 18.255,114.9174 14.546,114.9174 C10.838,114.9174 7.452,117.1744 7.452,121.6074 L7.452,131.1214 C7.452,135.1924 10.596,137.6504 14.748,137.6504 C18.416,137.6504 21.439,135.6744 21.439,131.8464 L21.439,129.4674 L13.7,129.4674 L13.7,125.9214 L25.187,125.9214 L25.187,132.2904 C25.187,138.0534 20.512,141.1974 14.748,141.1974 C8.58,141.1974 3.502,137.7704 3.502,131.4434",fill:"#FFFFFF"}),v.createElement("polygon",{fill:"#FFFFFF",points:"31.915 111.8945 50.86 111.8945 50.86 115.4005 35.865 115.4005 35.865 124.1475 48.683 124.1475 48.683 127.6145 35.865 127.6145 35.865 137.1655 50.981 137.1655 50.981 140.6735 31.915 140.6735"}),v.createElement("polygon",{fill:"#FFFFFF",points:"57.4268 111.8945 61.3368 111.8945 75.3638 133.8615 75.4448 133.8615 75.4448 111.8945 79.2328 111.8945 79.2328 140.6735 75.3638 140.6735 61.2558 118.5045 61.1758 118.5045 61.1758 140.6735 57.4268 140.6735"}),v.createElement("path",{d:"M104.2202,130.959 L104.2202,121.366 C104.2202,117.295 101.0772,114.917 96.8442,114.917 C93.1362,114.917 89.7502,117.214 89.7502,121.729 L89.7502,131.121 C89.7502,135.191 92.8942,137.65 97.0452,137.65 C100.7132,137.65 104.2202,135.475 104.2202,130.959 M85.8002,131.443 L85.8002,121.85 C85.8002,115.239 91.0802,111.41 96.9252,111.41 C103.0922,111.41 108.1302,115.199 108.1302,121.527 L108.1302,130.718 C108.1302,137.327 102.8902,141.197 97.0452,141.197 C90.9592,141.197 85.8002,137.771 85.8002,131.443",fill:"#FFFFFF"}),v.createElement("polygon",{fill:"#FFFFFF",points:"114.7373 111.9346 119.5743 111.9346 128.0393 129.6696 128.1203 129.6696 136.3823 111.9346 141.2593 111.9346 141.2593 140.6736 137.4303 140.6736 137.4303 118.9076 137.3493 118.9076 129.5703 135.1516 126.4253 135.1516 118.6473 118.9886 118.5263 118.9886 118.5263 140.6736 114.7373 140.6736"}),v.createElement("polygon",{fill:"#FFFFFF",points:"148.104 140.673 152.094 140.673 152.094 111.934 148.104 111.934"}),v.createElement("path",{d:"M158.5879,131.4434 L158.5879,121.7284 C158.5879,115.3614 163.4249,111.4104 169.7129,111.4104 C175.3569,111.4104 180.1929,114.6344 180.1929,120.3184 L180.1929,121.5684 L176.4449,121.5684 L176.4449,120.7614 C176.4449,116.9324 173.3409,114.9174 169.6319,114.9174 C165.9239,114.9174 162.5379,117.1744 162.5379,121.6074 L162.5379,131.1214 C162.5379,135.1924 165.6829,137.6504 169.8339,137.6504 C173.5019,137.6504 176.4449,135.6344 176.4449,131.8054 L176.4449,131.2824 L180.1929,131.2824 L180.1929,132.2904 C180.1929,138.0534 175.4779,141.1974 169.8339,141.1974 C163.6669,141.1974 158.5879,137.7704 158.5879,131.4434",fill:"#FFFFFF"}),v.createElement("path",{d:"M184.583,134.1846 L188.171,132.8136 C189.301,135.9166 192.121,137.6916 195.789,137.6916 C199.296,137.6916 202.238,136.0786 202.238,132.9746 C202.238,130.2346 200.385,129.0656 197.965,128.3386 L192.726,126.9296 C188.775,125.8396 186.195,123.8656 186.195,119.4316 C186.195,114.4746 190.348,111.4106 195.668,111.4106 C200.224,111.4106 204.172,113.1846 205.583,117.0946 L202.157,118.4636 C200.948,116.0046 198.691,114.7556 195.587,114.7556 C192.847,114.7556 190.065,116.0856 190.065,119.1096 C190.065,121.2866 191.638,122.6566 194.66,123.5026 L199.94,124.9536 C203.326,125.8396 206.107,127.8966 206.107,132.6526 C206.107,137.6916 201.834,141.1576 195.627,141.1576 C190.389,141.1576 185.954,138.8196 184.583,134.1846",fill:"#FFFFFF"})))),n6=e=>{let{namescription:t}=e;return v.createElement("div",{className:"container"},v.createElement("div",{className:"row"},v.createElement("div",{className:"col"},v.createElement("h1",{"data-test":"summaryName"},t))))},r6=e=>{let{filtered_bcs_transcriptome_union:t,filtered_bcs_median_unique_genes_detected:n,multi_transcriptome_total_raw_reads_per_filtered_bc:r}=e;return v.createElement(v.Fragment,null,t&&v.createElement("div",{className:"summary_card",id:"called_cells"},v.createElement(oe,t)),r&&v.createElement("div",{className:"summary_card",id:"raw_reads_hero"},v.createElement("div",{className:"row"},v.createElement("div",{className:"col"},v.createElement(oe,r)),n&&v.createElement("div",{className:"col",id:"unique_genes_hero"},v.createElement(oe,n)))))},i6=e=>{let{image:t}=e;return v.createElement("img",{src:t})};var a6=n(31236),o6=n(34204),s6=n.n(o6),l6=n(54945),c6=n.n(l6),u6=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var f6=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t}return u6(e,[{key:"getDocumentRelativeElementOffset",value:function(e){var t=this.getRootOfEl(e).getBoundingClientRect(),n=t.left,r=t.top,i=e.getBoundingClientRect(),a=i.left,o=i.top;return{x:Math.abs(n)+a,y:Math.abs(r)+o}}},{key:"getRootOfEl",value:function(e){return e.parentElement?this.getRootOfEl(e.parentElement):e}},{key:"getComputedElementRelativeCursorPosition",value:function(e,t){this.lastEvent=e;var n=this.getDocumentRelativeCursorPosition(e),r=n.x,i=n.y,a=t.x,o=t.y;return{x:Math.round(r-a),y:Math.round(i-o)}}},{key:"getDocumentRelativeCursorPosition",value:function(e){return{x:e.pageX,y:e.pageY}}},{key:"getCursorPosition",value:function(e){return this.getComputedElementRelativeCursorPosition(e,this.documentRelativeElementOffset)}},{key:"documentRelativeElementOffset",get:function(){return this.elementOffset||(this.elementOffset=this.getDocumentRelativeElementOffset(this.el)),this.elementOffset}}]),e}();const d6=f6;function h6(e,t,n,r){return e.addEventListener(t,n,r),{removeEventListener:function(){e.removeEventListener(t,n,r)}}}var p6="pressEvent",m6="setHovering",g6="unsetHovering";const v6=function(){};var y6=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var b6=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return x6.call(n),n.state={detectedEnvironment:{isMouseDetected:!1,isTouchDetected:!1},elementDimensions:{width:0,height:0},isActive:!1,isPositionOutside:!0,position:{x:0,y:0}},n.shouldGuardAgainstMouseEmulationByDevices=!1,n.eventListeners=[],n.timers=[],n.elementOffset={x:0,y:0},n.onTouchStart=n.onTouchStart.bind(n),n.onTouchMove=n.onTouchMove.bind(n),n.onTouchEnd=n.onTouchEnd.bind(n),n.onTouchCancel=n.onTouchCancel.bind(n),n.onMouseEnter=n.onMouseEnter.bind(n),n.onMouseMove=n.onMouseMove.bind(n),n.onMouseLeave=n.onMouseLeave.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),y6(t,[{key:"onTouchStart",value:function(e){this.init(),this.onTouchDetected(),this.setShouldGuardAgainstMouseEmulationByDevices();var t=this.core.getCursorPosition(this.getTouchEvent(e));if(this.setPositionState(t),this.props.isActivatedOnTouch)return e.preventDefault(),void this.activate();this.initPressEventCriteria(t),this.setPressEventTimer()}},{key:"onTouchMove",value:function(e){if(this.isCoreReady){var t=this.core.getCursorPosition(this.getTouchEvent(e));this.state.isActive?(this.setPositionState(t),e.preventDefault(),this.props.shouldStopTouchMovePropagation&&e.stopPropagation()):this.setPressEventCriteria(t)}}},{key:"onTouchEnd",value:function(){this.deactivate(),this.unsetShouldGuardAgainstMouseEmulationByDevices()}},{key:"onTouchCancel",value:function(){this.deactivate(),this.unsetShouldGuardAgainstMouseEmulationByDevices()}},{key:"onMouseEnter",value:function(e){this.shouldGuardAgainstMouseEmulationByDevices||(this.init(),this.onMouseDetected(),this.setPositionState(this.core.getCursorPosition(e)),this.clearActivationTimers(),this.schedulActivation(this.props.hoverDelayInMs))}},{key:"onMouseMove",value:function(e){this.isCoreReady&&this.setPositionState(this.core.getCursorPosition(e))}},{key:"onMouseLeave",value:function(){this.clearActivationTimers(),this.scheduleDeactivation(this.props.hoverOffDelayInMs),this.setState({isPositionOutside:!0})}},{key:"onTouchDetected",value:function(){var e={isTouchDetected:!0,isMouseDetected:!1};this.setState({detectedEnvironment:e}),this.props.onDetectedEnvironmentChanged(e)}},{key:"onMouseDetected",value:function(){var e={isTouchDetected:!1,isMouseDetected:!0};this.setState({detectedEnvironment:e}),this.props.onDetectedEnvironmentChanged(e)}},{key:"componentDidMount",value:function(){this.props.isEnabled&&this.enable()}},{key:"componentWillReceiveProps",value:function(e){var t=e.isEnabled;this.props.isEnabled!==t&&(t?this.enable():this.disable())}},{key:"componentWillUnmount",value:function(){this.clearTimers(),this.disable()}},{key:"enable",value:function(){this.addEventListeners()}},{key:"disable",value:function(){this.removeEventListeners()}},{key:"init",value:function(){this.core=new d6(this.el),this.setElementDimensionsState(this.getElementDimensions(this.el))}},{key:"reset",value:function(){var e=this.core,t=(e=void 0===e?{}:e).lastEvent;this.init(),t&&this.setPositionState(this.core.getCursorPosition(t))}},{key:"activate",value:function(){this.setState({isActive:!0}),this.props.onActivationChanged({isActive:!0})}},{key:"deactivate",value:function(){var e=this;this.clearTimer(p6),this.setState({isActive:!1},(function(){var t=e.state,n=t.isPositionOutside,r=t.position;e.props.onPositionChanged({isPositionOutside:n,position:r}),e.props.onActivationChanged({isActive:!1})}))}},{key:"setPositionState",value:function(e){var t=this.getIsPositionOutside(e);this.setState({isPositionOutside:t,position:e},this.onPositionChanged)}},{key:"setElementDimensionsState",value:function(e){this.setState({elementDimensions:e})}},{key:"schedulActivation",value:function(e){var t=this,n=setTimeout((function(){t.activate()}),e);this.timers.push({id:n,name:m6})}},{key:"scheduleDeactivation",value:function(e){var t=this,n=setTimeout((function(){t.deactivate()}),e);this.timers.push({id:n,name:g6})}},{key:"clearActivationTimers",value:function(){this.clearTimer(m6),this.clearTimer(g6)}},{key:"setPressEventTimer",value:function(){var e=this,t=this.props,n=t.pressDuration,r=t.pressMoveThreshold;this.timers.push({name:p6,id:setTimeout((function(){Math.abs(e.currentElTop-e.initialElTop)<r&&e.activate()}),n)})}},{key:"setPressEventCriteria",value:function(e){this.currentElTop=e.y}},{key:"initPressEventCriteria",value:function(e){var t=e.y;this.initialElTop=t,this.currentElTop=t}},{key:"setShouldGuardAgainstMouseEmulationByDevices",value:function(){this.shouldGuardAgainstMouseEmulationByDevices=!0}},{key:"unsetShouldGuardAgainstMouseEmulationByDevices",value:function(){var e=this;this.timers.push({name:"mouseEmulation",id:setTimeout((function(){e.shouldGuardAgainstMouseEmulationByDevices=!1}),0)})}},{key:"clearTimers",value:function(){for(var e=this.timers;e.length;){var t=e.pop();clearTimeout(t.id)}}},{key:"clearTimer",value:function(e){this.timers.forEach((function(t){t.name===e&&clearTimeout(t.id)}))}},{key:"getElementDimensions",value:function(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height}}},{key:"getIsPositionOutside",value:function(e){var t=e.x,n=e.y,r=this.state.elementDimensions,i=r.width,a=r.height;return t<0||n<0||t>i||n>a}},{key:"getTouchEvent",value:function(e){return e.touches[0]}},{key:"getIsReactComponent",value:function(e){return"function"==typeof e.type}},{key:"shouldDecorateChild",value:function(e){return!!e&&this.getIsReactComponent(e)&&this.props.shouldDecorateChildren}},{key:"decorateChild",value:function(e,t){return(0,v.cloneElement)(e,t)}},{key:"decorateChildren",value:function(e,t){var n=this;return v.Children.map(e,(function(e){return n.shouldDecorateChild(e)?n.decorateChild(e,t):e}))}},{key:"addEventListeners",value:function(){this.eventListeners.push(h6(this.el,"touchstart",this.onTouchStart,{passive:!1}),h6(this.el,"touchmove",this.onTouchMove,{passive:!1}),h6(this.el,"touchend",this.onTouchEnd),h6(this.el,"touchcancel",this.onTouchCancel),h6(this.el,"mouseenter",this.onMouseEnter),h6(this.el,"mousemove",this.onMouseMove),h6(this.el,"mouseleave",this.onMouseLeave))}},{key:"removeEventListeners",value:function(){for(;this.eventListeners.length;)this.eventListeners.pop().removeEventListener()}},{key:"getPassThroughProps",value:function(){var e=Object.keys(this.constructor.propTypes);return c6()(this.props,e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.className,i=t.mapChildProps,a=t.style,o=s6()({},i(this.state),this.getPassThroughProps());return v.createElement("div",{className:r,ref:function(t){return e.el=t},style:s6()({},a,{WebkitUserSelect:"none"})},this.decorateChildren(n,o))}},{key:"isCoreReady",get:function(){return!!this.core}}]),t}(v.Component);b6.displayName="ReactCursorPosition",b6.propTypes={children:le().any,className:le().string,hoverDelayInMs:le().number,hoverOffDelayInMs:le().number,isActivatedOnTouch:le().bool,isEnabled:le().bool,mapChildProps:le().func,onActivationChanged:le().func,onPositionChanged:le().func,onDetectedEnvironmentChanged:le().func,pressDuration:le().number,pressMoveThreshold:le().number,shouldDecorateChildren:le().bool,shouldStopTouchMovePropagation:le().bool,style:le().object},b6.defaultProps={isActivatedOnTouch:!1,isEnabled:!0,hoverDelayInMs:0,hoverOffDelayInMs:0,mapChildProps:function(e){return e},onActivationChanged:v6,onPositionChanged:v6,onDetectedEnvironmentChanged:v6,pressDuration:500,pressMoveThreshold:5,shouldDecorateChildren:!0,shouldStopTouchMovePropagation:!1};var x6=function(){var e=this;this.onPositionChanged=function(){(0,e.props.onPositionChanged)(e.state)}};const _6=b6;var w6=n(6940),A6=n.n(w6);function k6(e,t){return{x:t.width/e.width,y:t.height/e.height}}function E6(e,t){return{x:-1*(t.width-e.width),y:-1*(t.height-e.height)}}function T6(e){var t=e.containerDimensions,n=e.cursorOffset,r=e.largeImage,i=e.position,a=e.smallImage,o=function(e,t){return{x:e.x-t.x,y:e.y-t.y}}(i,n),s=function(e,t){return k6(e,t)}(a,r);return S6({x:-1*Math.round(o.x*s.x),y:-1*Math.round(o.y*s.y)},E6(t,r),{x:0,y:0})}function M6(e){var t,n,r=e.containerDimensions,i=e.largeImage,a=e.position,o=E6(r,i),s={x:0,y:0},l=k6(t=r,{width:(n=i).width-t.width,height:n.height-t.height});return S6({x:-1*Math.round(a.x*l.x),y:-1*Math.round(a.y*l.y)},o,s)}function S6(e,t,n){return{x:A6()(e.x,t.x,n.x),y:A6()(e.y,t.y,n.y)}}var C6=n(89414),O6=n.n(C6),R6={alt:le().string,src:le().string.isRequired,srcSet:le().string,sizes:le().string,onLoad:le().func,onError:le().func},N6=le().shape(s6()({},R6,{width:le().number.isRequired,height:le().number.isRequired})),L6=le().shape(s6()({},R6,{isFluidWidth:le().bool,width:O6()(le().number,(function(e){return!e.isFluidWidth})),height:O6()(le().number,(function(e){return!e.isFluidWidth}))})),D6="mouse",P6="touch",I6="over",F6="beside",z6=le().oneOf([F6,I6]),j6=le().shape({width:le().oneOfType([le().number,le().string]),height:le().oneOfType([le().number,le().string])}),B6=le().shape({width:le().number,height:le().number});function U6(){}const $6=le().shape({x:le().number.isRequired,y:le().number.isRequired});function q6(e,t){var n=e.isFluidWidth,r=e.width,i=e.height,a=n?{width:"auto",height:"auto",fontSize:"0px",position:"relative"}:{width:r+"px",height:i+"px",position:"relative"};return s6()({cursor:"crosshair"},t,a)}function H6(e,t){var n=e.isFluidWidth,r=e.width,i=e.height,a=n?{width:"100%",height:"auto",display:"block",pointerEvents:"none"}:{width:r+"px",height:i+"px",pointerEvents:"none"};return s6()({},t,a)}var V6={};function W6(e){var t=V6,n=t.params,r=void 0===n?{}:n,i=t.compositStyle;if(M4()(r,e))return i;var a=e.containerDimensions,o=e.containerStyle,s=e.fadeDurationInMs,l=e.isTransitionActive,c=function(e,t){var n={overflow:"hidden"};if(t)return n;var r={position:"absolute",top:"0px"};return e?s6()(n,r,{left:"0px"}):s6()(n,r,{left:"100%",marginLeft:"10px",border:"1px solid #d6d6d6"})}(e.isInPlaceMode,e.isPortalRendered),u=function(e){var t=e.containerDimensions,n=e.fadeDurationInMs,r=e.isTransitionActive;return{width:t.width,height:t.height,opacity:r?1:0,transition:"opacity "+n+"ms ease-in",pointerEvents:"none"}}({containerDimensions:a,fadeDurationInMs:s,isTransitionActive:l});return t.compositStyle=s6()({},c,o,u),t.params=e,t.compositStyle}var G6=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Y6=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isTransitionEntering:!1,isTransitionActive:!1,isTransitionLeaving:!1,isTransitionDone:!1},n.timers=[],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),G6(t,[{key:"componentWillReceiveProps",value:function(e){this.scheduleCssTransition(e)}},{key:"componentWillUnmount",value:function(){this.timers.forEach((function(e){clearTimeout(e)}))}},{key:"scheduleCssTransition",value:function(e){var t=this,n=this.props,r=n.fadeDurationInMs,i=n.isActive,a=n.isPositionOutside,o=i!==e.isActive,s=a!==e.isPositionOutside;(o||s)&&(e.isActive&&!e.isPositionOutside?(this.setState({isTrainsitionDone:!1,isTransitionEntering:!0}),this.timers.push(setTimeout((function(){t.setState({isTransitionEntering:!1,isTransitionActive:!0})}),0))):(this.setState({isTransitionLeaving:!0,isTransitionActive:!1}),this.timers.push(setTimeout((function(){t.setState({isTransitionDone:!0,isTransitionLeaving:!1})}),r))))}},{key:"getImageCoordinates",value:function(){var e=this.props,t=e.cursorOffset,n=e.largeImage,r=e.containerDimensions,i=e.position,a=e.smallImage;return e.isInPlaceMode?M6({containerDimensions:r,largeImage:n,position:i}):T6({containerDimensions:r,cursorOffset:t,largeImage:n,position:i,smallImage:a})}},{key:"render",value:function(){var e=this.props,t=e.containerClassName,n=e.imageClassName,r=e.isLazyLoaded,i=e.largeImage,a=e.largeImage,o=a.alt,s=void 0===o?"":o,l=a.onLoad,c=void 0===l?U6:l,u=a.onError,f=void 0===u?U6:u,d=v.createElement("div",{className:t,style:this.containerStyle},v.createElement("img",{alt:s,className:n,src:i.src,srcSet:i.srcSet,sizes:i.sizes,style:this.imageStyle,onLoad:c,onError:f}));return r?this.isVisible?d:null:d}},{key:"isVisible",get:function(){var e=this.state,t=e.isTransitionEntering,n=e.isTransitionActive,r=e.isTransitionLeaving;return t||n||r}},{key:"containerStyle",get:function(){var e=this.props,t=e.containerStyle,n=e.containerDimensions,r=e.fadeDurationInMs,i=e.isPortalRendered,a=e.isInPlaceMode;return W6({containerDimensions:n,containerStyle:t,fadeDurationInMs:r,isTransitionActive:this.state.isTransitionActive,isInPlaceMode:a,isPortalRendered:i})}},{key:"imageStyle",get:function(){var e=this.props,t=e.imageStyle,n=e.largeImage;return function(e){var t=e.imageCoordinates,n=e.imageStyle,r=e.largeImage,i="translate("+t.x+"px, "+t.y+"px)",a={width:r.width,height:r.height,transform:i,WebkitTransform:i,msTransform:i,pointerEvents:"none"};return s6()({},n,a)}({imageCoordinates:this.getImageCoordinates(),imageStyle:t,largeImage:n})}}]),t}(v.Component);Y6.displayName="EnlargedImage",Y6.defaultProps={fadeDurationInMs:0,isLazyLoaded:!0},Y6.propTypes={containerClassName:le().string,containerStyle:le().object,cursorOffset:$6,position:$6,fadeDurationInMs:le().number,imageClassName:le().string,imageStyle:le().object,isActive:le().bool,isLazyLoaded:le().bool,largeImage:N6,containerDimensions:B6,isPortalRendered:le().bool,isInPlaceMode:le().bool};const X6=Y6;var K6=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Z6(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var J6=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=Z6(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.state={isMounted:!1},Z6(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),K6(t,[{key:"componentDidMount",value:function(){if(this.setState({isMounted:!0}),this.isPortalRendered){var e=this.props.portalId;this.portalElement=document.getElementById(e)}}},{key:"render",value:function(){if(!this.isMounted)return null;var e=this.compositProps;return this.isPortalRendered?Qe.createPortal(v.createElement(X6,e),this.portalElement):v.createElement(X6,e)}},{key:"isPortalIdImplemented",get:function(){return!!this.props.portalId}},{key:"isPortalRendered",get:function(){var e=this.props,t=e.isPortalEnabledForTouch,n=e.isTouchDetected;return!!this.isPortalIdImplemented&&(!n||!!t)}},{key:"isMounted",get:function(){return this.state.isMounted}},{key:"compositProps",get:function(){return s6()({},this.props,{isPortalRendered:this.isPortalRendered})}}]),t}(v.Component);J6.propTypes={isPortalEnabledForTouch:le().bool.isRequired,isTouchDetected:le().bool.isRequired,portalId:le().string};const Q6=J6;var e8=function(e){var t=e.fadeDurationInMs,n=e.isActive,r=e.isPositionOutside,i=e.style,a={position:"absolute",opacity:n&&!r?1:0,transition:"opacity "+t+"ms ease-in"},o=s6()({},{width:"auto",height:"auto",top:"auto",right:"auto",bottom:"auto",left:"auto",display:"block"},i,a);return v.createElement("div",{style:o})};e8.propTypes={style:le().object,fadeDurationInMs:le().number,isActive:le().bool,translateX:le().number,translateY:le().number,userStyle:le().object},e8.defaultProps={isActive:!1,fadeDurationInMs:0,translateX:0,translateY:0};const t8=e8,n8={cursorOffset:$6,fadeDurationInMs:le().number,isActive:le().bool,isPositionOutside:le().bool,position:$6,smallImage:L6,style:le().object};var r8=function(e){var t=e.cursorOffset,n=e.position,r=e.fadeDurationInMs,i=e.isActive,a=e.isPositionOutside,o=e.smallImage,s=e.style,l=2*t.y,c=o.height-l,u={height:A6()(n.y-t.y,0,c)+"px",width:"100%",top:"0px"};return v.createElement(t8,{fadeDurationInMs:r,isActive:i,isPositionOutside:a,style:s6()({},s,u)})};r8.propTypes=n8;const i8=r8;var a8=function(e){var t=e.cursorOffset,n=e.position,r=e.fadeDurationInMs,i=e.isActive,a=e.isPositionOutside,o=e.smallImage,s=e.style,l=2*t.y,c=2*t.x,u=o.height-l,f=o.width-c,d={height:l+"px",width:A6()(n.x-t.x,0,f)+"px",top:A6()(n.y-t.y,0,u)+"px",left:"0px"};return v.createElement(t8,{fadeDurationInMs:r,isActive:i,isPositionOutside:a,style:s6()({},s,d)})};a8.propTypes=n8;const o8=a8;var s8=function(e){var t=e.cursorOffset,n=e.position,r=e.fadeDurationInMs,i=e.isActive,a=e.isPositionOutside,o=e.smallImage,s=e.style,l=2*t.y,c=2*t.x,u=o.height-l,f=o.width-c,d={height:l+"px",width:A6()(o.width-n.x-t.x,0,f)+"px",top:A6()(n.y-t.y,0,u)+"px",right:"0px"};return v.createElement(t8,{fadeDurationInMs:r,isActive:i,isPositionOutside:a,style:s6()({},s,d)})};s8.propTypes=n8;const l8=s8;var c8=function(e){var t=e.cursorOffset,n=e.position,r=e.fadeDurationInMs,i=e.isActive,a=e.isPositionOutside,o=e.smallImage,s=e.style,l=2*t.y,c=o.height-n.y-t.y,u=o.height-l,f=A6()(c,0,u),d=n.y+t.y,h={height:f+"px",width:"100%",top:Math.max(d,l)+"px"};return v.createElement(t8,{fadeDurationInMs:r,isActive:i,isPositionOutside:a,style:s6()({},s,h)})};c8.propTypes=n8;const u8=c8;function f8(e){var t=e.style,n=s6()({backgroundColor:"rgba(0,0,0,.4)"},t),r=s6()({},e,{style:n});return v.createElement("div",null,v.createElement(i8,r),v.createElement(o8,r),v.createElement(l8,r),v.createElement(u8,r))}f8.propTypes=n8;var d8=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var h8=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),d8(t,[{key:"render",value:function(){return v.createElement("div",{style:this.compositStyle})}},{key:"dimensions",get:function(){var e=this.props.cursorOffset;return{width:2*e.x,height:2*e.y}}},{key:"positionOffset",get:function(){var e=this.props,t=e.cursorOffset,n=t.x,r=t.y,i=e.position,a=i.x,o=i.y,s=e.smallImage,l=s.height,c=s.width,u=this.dimensions,f=u.width,d=o-r,h=a-n,p=l-u.height,m=c-f;return{top:A6()(d,0,p),left:A6()(h,0,m)}}},{key:"defaultStyle",get:function(){return{transition:"opacity "+this.props.fadeDurationInMs+"ms ease-in",backgroundImage:"url(data:image/gif;base64,R0lGODlhZABkAPABAHOf4fj48yH5BAEAAAEALAAAAABkAGQAAAL+jI+py+0PowOB2oqvznz7Dn5iSI7SiabqWrbj68bwTLL2jUv0Lvf8X8sJhzmg0Yc8mojM5kmZjEKPzqp1MZVqs7Cr98rdisOXr7lJHquz57YwDV8j3XRb/C7v1vcovD8PwicY8VcISDGY2GDIKKf4mNAoKQZZeXg5aQk5yRml+dgZ2vOpKGraQpp4uhqYKsgKi+H6iln7N8sXG4u7p2s7ykvnyxos/DuMWtyGfKq8fAwd5nzGHN067VUtiv2lbV3GDfY9DhQu7p1pXoU+rr5ODk/j7sSePk9Ub33PlN+4jx8v4JJ/RQQa3EDwzcGFiBLi6AfN4UOGCyXegGjIoh0fisQ0rsD4y+NHjgZFqgB5y2Qfks1UPmEZ0OVLlIcKAAA7)"}}},{key:"userSpecifiedStyle",get:function(){return this.props.style}},{key:"isVisible",get:function(){var e=this.props,t=e.isActive,n=e.isPositionOutside;return t&&!n}},{key:"priorityStyle",get:function(){var e=this.dimensions,t=e.width,n=e.height,r=this.positionOffset;return{position:"absolute",top:r.top+"px",left:r.left+"px",width:t+"px",height:n+"px",opacity:this.isVisible?1:0}}},{key:"compositStyle",get:function(){return s6()(this.defaultStyle,this.userSpecifiedStyle,this.priorityStyle)}}]),t}(v.Component);h8.propTypes=n8,h8.defaultProps={style:{}};const p8=h8;var m8=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var g8=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasShown=!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),m8(t,[{key:"setHasShown",value:function(){this.hasShown=!0}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.isActive,r=e.shouldHideAfterFirstActivation,i=this.hasShown,a=!(n||i&&r);return n&&!i&&this.setHasShown(),a?t:null}}]),t}(v.Component);g8.propTypes={children:le().element,isActive:le().bool,shouldHideAfterFirstActivation:le().bool},g8.defaultProps={shouldHideAfterFirstActivation:!0};const v8=g8;function y8(e){var t=e.isTouchDetected,n=e.hintTextMouse,r=e.hintTextTouch;return v.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"center",position:"absolute",bottom:"25px"}},v.createElement("div",{style:{display:"flex",alignItems:"center",padding:"5px 10px",backgroundColor:"#333",borderRadius:"10px",opacity:"0.90"}},v.createElement("img",{style:{width:"25px",height:"25px"},src:"data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ5MC4yIDQ5MC4yIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0OTAuMiA0OTAuMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCI+CjxnPgoJPGc+CgkJPHBhdGggZD0iTTQxOC41LDQxOC41Yzk1LjYtOTUuNiw5NS42LTI1MS4yLDAtMzQ2LjhzLTI1MS4yLTk1LjYtMzQ2LjgsMHMtOTUuNiwyNTEuMiwwLDM0Ni44UzMyMi45LDUxNC4xLDQxOC41LDQxOC41eiBNODksODkgICAgYzg2LjEtODYuMSwyMjYuMS04Ni4xLDMxMi4yLDBzODYuMSwyMjYuMSwwLDMxMi4ycy0yMjYuMSw4Ni4xLTMxMi4yLDBTMywxNzUuMSw4OSw4OXoiIGZpbGw9IiNGRkZGRkYiLz4KCQk8cGF0aCBkPSJNMjQ1LjEsMzM2LjljMy40LDAsNi40LTEuNCw4LjctMy42YzIuMi0yLjIsMy42LTUuMywzLjYtOC43di02Ny4zaDY3LjNjMy40LDAsNi40LTEuNCw4LjctMy42YzIuMi0yLjIsMy42LTUuMywzLjYtOC43ICAgIGMwLTYuOC01LjUtMTIuMy0xMi4yLTEyLjJoLTY3LjN2LTY3LjNjMC02LjgtNS41LTEyLjMtMTIuMi0xMi4yYy02LjgsMC0xMi4zLDUuNS0xMi4yLDEyLjJ2NjcuM2gtNjcuM2MtNi44LDAtMTIuMyw1LjUtMTIuMiwxMi4yICAgIGMwLDYuOCw1LjUsMTIuMywxMi4yLDEyLjJoNjcuM3Y2Ny4zQzIzMi44LDMzMS40LDIzOC4zLDMzNi45LDI0NS4xLDMzNi45eiIgZmlsbD0iI0ZGRkZGRiIvPgoJPC9nPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+Cjwvc3ZnPgo=",alt:""}),v.createElement("span",{style:{padding:"2px 0 0 5px",fontFamily:"Arial, sans-serif",fontSize:"14px",color:"white"}},t?r:n)))}y8.displayName="DefaultHint",y8.propTypes={isTouchDetected:le().bool,hintTextMouse:le().string,hintTextTouch:le().string};const b8=y8;function x8(e,t){return Math.round(e*t/2)}function _8(e){var t,n=e.containerDimension,r=e.smallImageDimension;return e.isInPlaceMode?r:"string"==typeof(t=n)&&/^\d+%$/.test(t)?r*(parseInt(n)/100):n}var w8=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var A8=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=a6.A.primaryInput,i=D6,a=P6;return n.state={smallImageWidth:0,smallImageHeight:0,detectedInputType:{isMouseDeteced:r===i,isTouchDetected:r===a}},n.onSmallImageLoad=n.onSmallImageLoad.bind(n),n.setSmallImageDimensionState=n.setSmallImageDimensionState.bind(n),n.onDetectedInputTypeChanged=n.onDetectedInputTypeChanged.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),w8(t,[{key:"componentDidMount",value:function(){this.props.smallImage.isFluidWidth&&(this.setSmallImageDimensionState(),window.addEventListener("resize",this.setSmallImageDimensionState))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setSmallImageDimensionState)}},{key:"onSmallImageLoad",value:function(e){var t=this.props.smallImage,n=t.onLoad,r=void 0===n?U6:n,i=t.isFluidWidth;r(e),i&&this.setSmallImageDimensionState()}},{key:"onDetectedInputTypeChanged",value:function(e){this.setState({detectedInputType:e})}},{key:"setSmallImageDimensionState",value:function(){var e=this.smallImageEl,t=e.offsetWidth,n=e.offsetHeight;this.setState({smallImageWidth:t,smallImageHeight:n})}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.style,i=t.hoverDelayInMs,a=t.hoverOffDelayInMs,o=t.isActivatedOnTouch,s=t.pressDuration,l=t.pressMoveThreshold,c=t.smallImage.onError,u=void 0===c?U6:c,f=t.imageClassName,d=t.imageStyle,h=t.lensStyle,p=t.largeImage,m=t.enlargedImageContainerClassName,g=t.enlargedImageContainerStyle,y=t.enlargedImageClassName,b=t.enlargedImageStyle,x=t.enlargedImagePortalId,_=t.isEnlargedImagePortalEnabledForTouch,w=t.fadeDurationInMs,A=t.hintComponent,k=t.isHintEnabled,E=t.hintTextMouse,T=t.hintTextTouch,M=t.shouldHideHintAfterFirstActivation,S=this.smallImage,C=this.state.detectedInputType.isTouchDetected,O=function(e,t,n){var r=function(e,t){return{x:e.width/t.width,y:e.height/t.height}}(e,t);return{x:x8(n.width,r.x),y:x8(n.height,r.y)}}(S,p,this.enlargedImageContainerDimensions),R=this.lensComponent;return v.createElement(_6,{className:n,hoverDelayInMs:i,hoverOffDelayInMs:a,isActivatedOnTouch:o,onDetectedInputTypeChanged:this.onDetectedInputTypeChanged,pressDuration:s,pressMoveThreshold:l,shouldStopTouchMovePropagation:!0,style:q6(S,r)},v.createElement("img",{src:S.src,srcSet:S.srcSet,sizes:S.sizes,alt:S.alt,className:f,style:H6(S,d),ref:function(t){return e.smallImageEl=t},onLoad:this.onSmallImageLoad,onError:u}),k&&v.createElement(v8,{shouldHideAfterFirstActivation:M},v.createElement(A,{isTouchDetected:C,hintTextMouse:E,hintTextTouch:T})),this.shouldShowLens&&v.createElement(R,{cursorOffset:O,fadeDurationInMs:w,smallImage:S,style:h}),v.createElement(Q6,{containerClassName:m,containerDimensions:this.enlargedImageContainerDimensions,containerStyle:g,cursorOffset:O,fadeDurationInMs:w,imageClassName:y,imageStyle:b,largeImage:p,smallImage:S,portalId:x,isPortalEnabledForTouch:_,isTouchDetected:this.isTouchDetected,isInPlaceMode:this.isInPlaceMode}))}},{key:"smallImage",get:function(){var e=this.props,t=e.smallImage;if(!e.smallImage.isFluidWidth)return t;var n=this.state,r=n.smallImageWidth,i=n.smallImageHeight;return s6()({},t,{width:r,height:i})}},{key:"enlargedImagePlacement",get:function(){var e=this.props.enlargedImagePosition,t=this.state.detectedInputType.isTouchDetected;return e||(t?I6:F6)}},{key:"isInPlaceMode",get:function(){var e=I6;return this.enlargedImagePlacement===e}},{key:"enlargedImageContainerDimensions",get:function(){var e=this.props.enlargedImageContainerDimensions,t=e.width,n=e.height,r=this.smallImage,i=r.width,a=r.height,o=this.isInPlaceMode;return{width:_8({containerDimension:t,smallImageDimension:i,isInPlaceMode:o}),height:_8({containerDimension:n,smallImageDimension:a,isInPlaceMode:o})}}},{key:"isTouchDetected",get:function(){return this.state.detectedInputType.isTouchDetected}},{key:"shouldShowLens",get:function(){return!this.isInPlaceMode&&!this.isTouchDetected}},{key:"lensComponent",get:function(){var e=this.props,t=e.shouldUsePositiveSpaceLens,n=e.lensComponent;return n||(t?p8:f8)}}]),t}(v.Component);A8.propTypes={className:le().string,style:le().object,hoverDelayInMs:le().number,hoverOffDelayInMs:le().number,fadeDurationInMs:le().number,pressDuration:le().number,pressMoveThreshold:le().number,isActivatedOnTouch:le().bool,imageClassName:le().string,imageStyle:le().object,lensStyle:le().object,lensComponent:le().func,shouldUsePositiveSpaceLens:le().bool,smallImage:L6,largeImage:N6,enlargedImageContainerClassName:le().string,enlargedImageContainerStyle:le().object,enlargedImageClassName:le().string,enlargedImageStyle:le().object,enlargedImageContainerDimensions:j6,enlargedImagePosition:z6,enlargedImagePortalId:le().string,isEnlargedImagePortalEnabledForTouch:le().bool,hintComponent:le().func,hintTextMouse:le().string,hintTextTouch:le().string,isHintEnabled:le().bool,shouldHideHintAfterFirstActivation:le().bool},A8.defaultProps={enlargedImageContainerDimensions:{width:"100%",height:"100%"},isEnlargedImagePortalEnabledForTouch:!1,fadeDurationInMs:300,hintComponent:b8,shouldHideHintAfterFirstActivation:!0,isHintEnabled:!1,hintTextMouse:"Hover to Zoom",hintTextTouch:"Long-Touch to Zoom",hoverDelayInMs:250,hoverOffDelayInMs:150,shouldUsePositiveSpaceLens:!1};const k8=A8,E8=e=>{let{small_image:t,big_image:n,sizes:r,plot_title:i}=e;return v.createElement(v.Fragment,null,i,v.createElement(k8,{smallImage:{alt:"Detected issue Image",isFluidWidth:!0,src:t,sizes:"(max-width: 480px) 100vw, (max-width: 1200px) 30vw, 360px"},largeImage:{src:n,width:r.width,height:r.height},lensStyle:{backgroundColor:"rgba(0,0,0,.6)"},enlargedImagePosition:"over",plot_title:i}))};function T8(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class M8 extends v.Component{constructor(){super(...arguments),T8(this,"state",{imageAlpha:50}),T8(this,"setAlpha",(e=>{this.setState({imageAlpha:parseInt(e.target.value)})}))}render(){const{imageAlpha:e}=this.state;return v.createElement("div",null,v.createElement("br",null),this.props.plot_title,v.createElement("div",{style:{marginBottom:"15px"}},v.createElement("img",{style:{position:"absolute",opacity:e/100},src:this.props.imgA}),v.createElement("img",{style:{opacity:(100-e)/100},src:this.props.imgB})),this.props.slider_title,v.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:this.props.sizes.width}},v.createElement("span",null,this.props.imgBTitle),v.createElement("span",null,this.props.imgATitle)),v.createElement("input",{type:"range",value:e,min:"0",max:"100",step:"1",onChange:this.setAlpha,style:{width:this.props.sizes.width}}))}}const S8=e=>{let{imgA:t,imgATitle:n,imgB:r,imgBTitle:i,sizes:a,plot_title:o,slider_title:s}=e;return v.createElement(M8,{imgA:t,imgATitle:n,imgB:r,imgBTitle:i,sizes:a,plot_title:o,slider_title:s})};function C8(){return C8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C8.apply(null,arguments)}const O8=e=>{let{table:t,help:n,barcode_knee_plot:r,zoom_images:i,regist_images:a,image:o,id:s}=e;return r&&(r={...r,style:{height:313}}),v.createElement("div",{className:"summary_card",id:"knee_plot","data-test":ae()(s)+"SummaryCard"},v.createElement(qn,C8({},n,{key:"cells_help","data-test":ae()(s)+"Help"})),_o(E8,i),_o(S8,a),_o(i6,{image:o}),_o(Yn,r,"knee_plot"),_o(Vn,t,"cells_table"))};function R8(){return R8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R8.apply(null,arguments)}const N8=e=>{let{help:t,table:n,id:r,className:i="summary_card",showDarkButtonIcon:a=!1}=e;return v.createElement("div",{className:i,id:r,"data-test":ae()(r)+"SummaryCard"},v.createElement(qn,R8({},t,{key:r+"_help",showDarkButtonIcon:a,"data-test":ae()(r)+"Help"})),v.createElement(Vn,R8({},n,{key:r+"_table",dataTest:ae()(r)+"Table"})))},L8=e=>{let{help:t,table:n,id:r}=e;return v.createElement("div",{className:"summary_card",id:r,"data-test":ae()(r)+"SummaryCard"},v.createElement(qn,R8({},t,{key:r+"_help","data-test":ae()(r)+"Help"})),v.createElement(er,R8({},n,{key:r+"_table",dataTest:ae()(r)+"Table"})))},D8=e=>{let{onSelect:t,options:n,selected:r}=e;return v.createElement("select",{onChange:t,value:r},n.map((e=>v.createElement("option",{key:e,value:e},e))))};D8.propTypes={onSelect:le().func.isRequired,options:le().arrayOf(le().string).isRequired,selected:le().string.isRequired};const P8=D8;function I8(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const F8=(e,t)=>e.slice(0,t);class z8 extends v.Component{constructor(e){super(),I8(this,"generateHandleSelect",(e=>t=>{const n=this.state.selected.map((e=>e));n[e]=t.target.value,this.setState({selected:n})}));const{vectors:t,vector_names:n}=e;if(t.length!==n.length)throw new Error(`Mismatch between vectors (${t.length}) and vector names (${n.length}).`);this.state={selected:n.map((e=>e))}}getData(){const{vectors:e,vector_names:t}=this.props,n=t.reduce(((e,t,n)=>({...e,[t]:n})),{}),r=this.state.selected.reduce(((r,i)=>{const a=e[n[i]];r.vectors.push(a);const o=t[n[i]];return r.vector_names.push(o),r}),{vectors:[],vector_names:[]});return r.vectors=F8(r.vectors,2),r.vector_names=F8(r.vector_names,2),{...this.props,...r}}renderSelects(){const{vector_names:e}=this.props;return F8(e,2).map(((t,n)=>v.createElement(P8,{key:t,onSelect:this.generateHandleSelect(n),options:e,selected:this.state.selected[n]})))}render(){return v.createElement("div",{className:"selectable-biplots-with-thresholding"},v.createElement("div",{className:"col"},v.createElement(he,this.getData())),v.createElement("div",{className:"controls"},this.renderSelects()))}}z8.propTypes={...ce};const j8=z8;var B8=n(18537),U8=n.n(B8);const $8=(e,t)=>n=>{const{dataTest:r,help:i}=n;let a=n;t&&(a=t(n));const o=(e=>e?e.helpText&&!e.data?Ma:!e.helpText&&e.data?qn:null:null)(i);return v.createElement("div",{className:"summary_border",key:r,"data-test":U8()(r)},o&&v.createElement(o,i),v.createElement(e,a))},q8=$8(re,(e=>{let{plot:t}=e;return{...t,height:"450px"}})),H8=$8(Yn,(e=>{let{plot:t}=e;return t})),V8=$8(j8,(e=>{let{plot:t}=e;return t})),W8=$8(er,(e=>{let{table:t}=e;return{...t,useAlignmentHeuristic:!0}})),G8=$8((e=>{let{plot:t,table:n}=e;return v.createElement("div",{className:"plot-table"},v.createElement("div",{className:"plot-table-wrapper"},v.createElement(Yn,t)),v.createElement("div",{className:"plot-table-wrapper table-wrapper"},v.createElement(er,n)))}),(e=>{let{plot:t,table:n}=e;return{plot:t,table:n}})),Y8=(e,t)=>n=>v.createElement("div",{className:t},v.createElement(e,n));Y8(W8,"hero-metrics"),Y8(q8,"half-plot");function X8(){return X8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},X8.apply(null,arguments)}class K8 extends v.Component{render(){const{sequencing:e,mapping:t,cells:n,image:r,pipeline_info_table:i,batch_correction:a,cmdline:o}=this.props,s=(e=>{let{filtered_bcs_transcriptome_union:t,multi_transcriptome_total_raw_reads_per_filtered_bc:n,filtered_bcs_median_unique_genes_detected:r}=e;return{filtered_bcs_transcriptome_union:t,multi_transcriptome_total_raw_reads_per_filtered_bc:n,filtered_bcs_median_unique_genes_detected:r}})(this.props),{ANTIBODY_sequencing:l,ANTIBODY_application:c,ANTIGEN_sequencing:u,ANTIGEN_application:f,CRISPR_sequencing:d,CRISPR_application:h,CUSTOM_sequencing:p,CUSTOM_application:m,TARGETED_application:g}=this.props,{normalization_summary:y,aggregation_by_sample:b,aggr_batch_projection:x,CRISPR_aggregation:_,ANTIBODY_aggregation:w,ANTIGEN_aggregation:A,CUSTOM_aggregation:k}=this.props,{vdj_enrichment:E,vdj_expression:T,vdj_annotation:M,vdj_sequencing:S}=this.props;x&&(x.plot.style={height:"345px"});const C={margin:"0px auto auto auto",width:"1010px",float:"none"};return v.createElement(v.Fragment,null,v.createElement("div",{className:"row",style:{margin:"0px auto auto"}},v.createElement("div",{className:"summary_card_column"},v.createElement(r6,s),v.createElement("div",{className:"summary_card",id:"sample_table","data-test":"sampleSummaryCard"},v.createElement(Ma,{title:"Run Summary"}),v.createElement(Vn,X8({},i,{dataTest:"sampleTable"}))),_o(N8,e,"sequencing"),_o(N8,E,"vdj_enrichment"),_o(N8,T,"vdj_expression"),_o(N8,M,"vdj_annotation"),_o(N8,t,"mapping"),_o(N8,d,"CRISPR_sequencing"),_o(N8,l,"ANTIBODY_sequencing"),_o(N8,u,"ANTIGEN_sequencing"),_o(N8,p,"CUSTOM_sequencing"),v.createElement("div",{id:"normalization_summary"},_o(L8,y,"normalization_summary"))),v.createElement("div",{className:"summary_card_gutter"},""),v.createElement("div",{className:"summary_card_column"},_o(U4,x,"aggr_batch_projection"),_o(O8,r,"image"),_o(O8,n,"cells"),_o(N8,S,"vdj_sequencing"),_o(N8,a,"batch_correction"),_o(N8,h,"CRISPR_application"),_o(N8,c,"ANTIBODY_application"),_o(N8,f,"ANTIGEN_application"),_o(N8,m,"CUSTOM_application"),_o(N8,g,"TARGETED_application"))),v.createElement("div",{className:"row"},v.createElement("div",{style:C,id:"aggregation_by_sample"},_o(W8,b,"aggregation_by_sample")),v.createElement("div",{style:C,id:"CRISPR_aggregation"},_o(W8,_,"CRISPR_aggregation")),v.createElement("div",{style:C,id:"ANTIBODY_aggregation"},_o(W8,w,"ANTIBODY_aggregation")),v.createElement("div",{style:C,id:"ANTIGEN_aggregation"},_o(W8,A,"ANTIGEN_aggregation")),v.createElement("div",{style:C,id:"CUSTOM_aggregation"},_o(W8,k,"CUSTOM_aggregation"))),v.createElement("div",{style:C,id:"cmdline"},_o(N8,{help:null==o?void 0:o.help,table:null==o?void 0:o.table,className:"summary_card_row",showDarkButtonIcon:!0},"cmdline")))}}function Z8(e){const t=(0,Fa.get)(e,"sample.id"),n=(0,Fa.get)(e,"sample.description");let r=t;return n&&(r+=` - ${n}`),r}class J8 extends v.Component{render(){let e=()=>null;this.props.analysis_tab?e=v.createElement(Xt,{eventKey:"analysis",title:"Gene Expression","data-test":"analysisTab"},v.createElement("div",null,v.createElement(W4,this.props.analysis_tab))):this.props.vdj_analysis_tab&&(e=v.createElement(Xt,{eventKey:"analysis",title:"VDJ","data-test":"analysisTab"},v.createElement("div",null,v.createElement(J4,this.props.vdj_analysis_tab))));let t=()=>null;this.props.antibody_tab&&(t=v.createElement(Xt,{eventKey:"antibody",title:"Antibody","data-test":"antibodyTab"},v.createElement("div",null,v.createElement(G4,this.props.antibody_tab))));let n=()=>null;this.props.antigen_tab&&(n=v.createElement(Xt,{eventKey:"antigen",title:"Antigen","data-test":"antigenTab"},v.createElement("div",null,v.createElement(Y4,this.props.antigen_tab))));let r=()=>null;return this.props.cell_types_tab&&(r=v.createElement(Xt,{eventKey:"cell_types",title:"Cell Types","data-test":"cell_typesTab"},v.createElement("div",null,v.createElement(X4,this.props.cell_types_tab)))),v.createElement("div",{className:"summary"},v.createElement(e6,{pipelineName:`${this.props.sample.command}  ${this.props.sample.subcommand}`}),v.createElement(n6,{namescription:Z8(this.props)}),v.createElement(T,this.props.alarms),v.createElement("div",{className:"container"},v.createElement(Pn,{defaultActiveKey:"summary",id:"main-page-tab",unmountOnExit:!1,mountOnEnter:!1},v.createElement(Xt,{eventKey:"summary",title:"Summary","data-test":"summaryTab"},v.createElement(K8,this.props.summary_tab)),e,t,n,r)))}}const Q8=(e,t,n,r)=>t?v.createElement(Xt,{eventKey:r,key:r,title:n,"data-test":ae()(r)},v.createElement("div",null,v.createElement(e,t))):null;function e7(){return e7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e7.apply(null,arguments)}class t7 extends v.PureComponent{constructor(e){super(e),this.state={active_category:0}}render(){const{tables:e,help:t}=this.props,{active_category:n}=this.state,{name:r,table:i}=e[n];return v.createElement("div",null,v.createElement(Ma,e7({},t,{key:"vdj_shared_cdr3_help"})),v.createElement("div",{style:{marginBottom:"1rem",marginTop:"-1.5rem",textAlign:"right"}},v.createElement("span",null,"Categorize by: "),v.createElement(Ea,{id:"dropdown-item-button",title:r,as:"span"},e.map(((e,t)=>v.createElement(xa.Item,{as:"button",key:e.name,onClick:()=>{this.setState({active_category:t})}},e.name))))),v.createElement("div",{className:"clonotype_table"},v.createElement(er,e7({},i,{key:"vdj_shared_cdr3_table"}))))}}function n7(){return n7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n7.apply(null,arguments)}const r7=e=>{const{pipeline_info_table:t}=e,{hero_metrics:n}=e,{vdj_annotation:r,vdj_aggr_cells:i,vdj_clonotype_hist:a,vdj_clonotype:o,vdj_shared_cdr3:s,vdj_diversity:l}=e,c={margin:"20px auto auto auto",width:"800px",float:"none"};return v.createElement(v.Fragment,null,v.createElement("div",{className:"row"},v.createElement("div",{className:"summary_card_column"},v.createElement("div",{className:"summary_card",id:"total_num_cells"},v.createElement(oe,n.total_num_cells)),v.createElement("div",{className:"summary_card"},v.createElement("div",{className:"row"},v.createElement("div",{className:"col",id:"total_num_clonotypes"},v.createElement(oe,n.total_num_clonotypes)),v.createElement("div",{className:"col",id:"total_paired_cells"},v.createElement(oe,n.total_paired_cells)))),_o(N8,r,"vdj_annotation")),v.createElement("div",{className:"summary_card_gutter"},""),v.createElement("div",{className:"summary_card_column"},v.createElement("div",{className:"summary_card",id:"sample_table","data-test":"sampleSummaryCard"},v.createElement(Ma,{title:"Run Summary"}),v.createElement(Vn,n7({},t,{dataTest:"sampleTable"}))))),v.createElement("div",{className:"row"},v.createElement("div",{className:"summary_border",style:c,id:"vdj_aggr_cells"},v.createElement(Ma,n7({},i.help,{key:"vdj_aggr_cells_help"})),v.createElement("div",null,v.createElement(er,n7({},i.table,{key:"vdj_aggr_cells_table"})))),v.createElement("div",{className:"summary_border",style:c,id:"vdj_clonotype_hist"},_o(V4,a)),v.createElement("div",{className:"summary_border",style:c,id:"vdj_clonotype"},v.createElement(Ma,n7({},o.help,{key:"vdj_clonotype_help"})),v.createElement("div",{className:"clonotype_table"},v.createElement(er,n7({},o.table,{key:"vdj_clonotype_table"})))),v.createElement("div",{className:"summary_border",style:c,id:"vdj_shared_cdr3"},_o(t7,s,"vdj_shared_cdr3")),v.createElement("div",{className:"summary_border",style:c,id:"vdj_diversity"},_o(V4,l))))};class i7 extends v.Component{render(){let e="";e=this.props.summary_tab?"count_summary":this.props.vdj_t_tab?"vdj_t_summary":this.props.vdj_b_tab?"vdj_b_summary":"vdj_t_gd_summary";let t=()=>null;return this.props.alarms&&(t=v.createElement(T,this.props.alarms)),v.createElement("div",{className:"summary"},v.createElement(e6,{pipelineName:`${this.props.sample.command}  ${this.props.sample.subcommand}`}),v.createElement(n6,{namescription:Z8(this.props)}),t,v.createElement("div",{className:"container"},v.createElement(Pn,{defaultActiveKey:e,id:"main-page-tab",unmountOnExit:!0},Q8(K8,this.props.summary_tab,"Summary","count_summary"),Q8(W4,this.props.analysis_tab,"Gene Expression","count_gex"),Q8(G4,this.props.antibody_tab,"Antibody","count_antibody"),Q8(Y4,this.props.antigen_tab,"Antigen","antigen"),Q8(r7,this.props.vdj_t_tab,"VDJ-T","vdj_t_summary"),Q8(r7,this.props.vdj_b_tab,"VDJ-B","vdj_b_summary"),Q8(r7,this.props.vdj_t_gd_tab,"VDJ-T (G/D)","vdj_t_gd_summary"))))}}function a7(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o7 extends v.PureComponent{constructor(){super(...arguments),a7(this,"state",{collapsed:!0})}toggleCollapsed(){const{collapsed:e}=this.state;this.setState({collapsed:!e})}render(){const{collapsed:e}=this.state,{title:t,plain:n}=this.props,r=e?"none":"inline-block",i=e?"inline-block":"none",a=n?{}:{width:"100%",border:"1px solid #D3D3D3",borderRadius:"3px",paddingLeft:"10px",paddingRight:"10px"};return v.createElement(v.Fragment,null,v.createElement("div",{className:"header",onClick:()=>this.toggleCollapsed(),style:{backgroundColor:e||n?null:"#f8f8f8",...a}},v.createElement("h2",{id:t},v.createElement("span",{style:{display:i}},v.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",viewBox:"0 0 100 100"},v.createElement("path",{d:"m 10 20 l 80 30 l -80 30 l 20 -30 l -20 -30 z "}))),v.createElement("span",{style:{display:r}},v.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",viewBox:"0 0 100 100"},v.createElement("path",{d:"m 20 10 l 30 80 l 30 -80 l -30 20 z "}))),v.createElement("a",null,t))),v.createElement("div",{className:"toggle",style:{display:r,...a}},this.props.children))}}o7.propTypes={title:le().string.isRequired,plain:le().bool},o7.defaultProps={plain:!0};const s7=e=>{let{encoded_image:t,polygons:n,text_overlay:r}=e;return v.createElement("div",{className:"image-with-overlay"},v.createElement("div",{className:"image-with-overlay-wrapper"},t?v.createElement("img",{src:t}):null,n?v.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg"},n.map(((e,t)=>v.createElement("polygon",{key:t,points:e.map((e=>{let[t,n]=e;return`${t},${n}`})).join(" ")})))):null),r?v.createElement("div",{className:"text-overlay"},r,v.createElement("br",null),"Region contained in this analysis."):null)};function l7(e){if(e&&J()(e,"clusterings")){const t=e.x,n=e.y,r=e.layout,i=e.config;for(let a=0;a<e.clusterings.length;a++){const o=e.clusterings[a],s=o.data;for(let e=0;e<s.length;e++){const r=s[e],i=r.indices,a=Array(i.length),o=Array(i.length);for(let e=0;e<i.length;e++){const r=i[e];a[e]=t[r],o[e]=n[r]}r.x=a,r.y=o,delete r.indices}delete o.data;const l={layout:r,config:i,data:s};o.plot=l}}}const c7={type:le().string,tooltip:le().bool,as:le().elementType},u7=v.forwardRef((({as:e="div",className:t,type:n="valid",tooltip:r=!1,...i},a)=>(0,Ue.jsx)(e,{...i,ref:a,className:Ze()(t,`${n}-${r?"tooltip":"feedback"}`)})));u7.displayName="Feedback",u7.propTypes=c7;const f7=u7,d7=v.createContext({}),h7=v.forwardRef((({id:e,bsPrefix:t,className:n,type:r="checkbox",isValid:i=!1,isInvalid:a=!1,as:o="input",...s},l)=>{const{controlId:c}=(0,v.useContext)(d7);return t=Bt(t,"form-check-input"),(0,Ue.jsx)(o,{...s,ref:l,type:r,id:e||c,className:Ze()(n,t,i&&"is-valid",a&&"is-invalid")})}));h7.displayName="FormCheckInput";const p7=h7,m7=v.forwardRef((({bsPrefix:e,className:t,htmlFor:n,...r},i)=>{const{controlId:a}=(0,v.useContext)(d7);return e=Bt(e,"form-check-label"),(0,Ue.jsx)("label",{...r,ref:i,htmlFor:n||a,className:Ze()(t,e)})}));m7.displayName="FormCheckLabel";const g7=m7,v7=v.forwardRef((({id:e,bsPrefix:t,bsSwitchPrefix:n,inline:r=!1,reverse:i=!1,disabled:a=!1,isValid:o=!1,isInvalid:s=!1,feedbackTooltip:l=!1,feedback:c,feedbackType:u,className:f,style:d,title:h="",type:p="checkbox",label:m,children:g,as:y="input",...b},x)=>{t=Bt(t,"form-check"),n=Bt(n,"form-switch");const{controlId:_}=(0,v.useContext)(d7),w=(0,v.useMemo)((()=>({controlId:e||_})),[_,e]),A=!g&&null!=m&&!1!==m||function(e,t){return v.Children.toArray(e).some((e=>v.isValidElement(e)&&e.type===t))}(g,g7),k=(0,Ue.jsx)(p7,{...b,type:"switch"===p?"checkbox":p,ref:x,isValid:o,isInvalid:s,disabled:a,as:y});return(0,Ue.jsx)(d7.Provider,{value:w,children:(0,Ue.jsx)("div",{style:d,className:Ze()(f,A&&t,r&&`${t}-inline`,i&&`${t}-reverse`,"switch"===p&&n),children:g||(0,Ue.jsxs)(Ue.Fragment,{children:[k,A&&(0,Ue.jsx)(g7,{title:h,children:m}),c&&(0,Ue.jsx)(f7,{type:u,tooltip:l,children:c})]})})})}));v7.displayName="FormCheck";const y7=Object.assign(v7,{Input:p7,Label:g7}),b7=v.forwardRef((({bsPrefix:e,type:t,size:n,htmlSize:r,id:i,className:a,isValid:o=!1,isInvalid:s=!1,plaintext:l,readOnly:c,as:u="input",...f},d)=>{const{controlId:h}=(0,v.useContext)(d7);return e=Bt(e,"form-control"),(0,Ue.jsx)(u,{...f,type:t,size:r,ref:d,readOnly:c,id:i||h,className:Ze()(a,l?`${e}-plaintext`:e,n&&`${e}-${n}`,"color"===t&&`${e}-color`,o&&"is-valid",s&&"is-invalid")})}));b7.displayName="FormControl";const x7=Object.assign(b7,{Feedback:f7}),_7=v.forwardRef((({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=Bt(t,"form-floating"),(0,Ue.jsx)(n,{ref:i,className:Ze()(e,t),...r}))));_7.displayName="FormFloating";const w7=_7,A7=v.forwardRef((({controlId:e,as:t="div",...n},r)=>{const i=(0,v.useMemo)((()=>({controlId:e})),[e]);return(0,Ue.jsx)(d7.Provider,{value:i,children:(0,Ue.jsx)(t,{...n,ref:r})})}));A7.displayName="FormGroup";const k7=A7;const E7=v.forwardRef(((e,t)=>{const[{className:n,...r},{as:i="div",bsPrefix:a,spans:o}]=function({as:e,bsPrefix:t,className:n,...r}){t=Bt(t,"col");const i=Ut(),a=$t(),o=[],s=[];return i.forEach((e=>{const n=r[e];let i,l,c;delete r[e],"object"==typeof n&&null!=n?({span:i,offset:l,order:c}=n):i=n;const u=e!==a?`-${e}`:"";i&&o.push(!0===i?`${t}${u}`:`${t}${u}-${i}`),null!=c&&s.push(`order${u}-${c}`),null!=l&&s.push(`offset${u}-${l}`)})),[{...r,className:Ze()(n,...o,...s)},{as:e,bsPrefix:t,spans:o}]}(e);return(0,Ue.jsx)(i,{...r,ref:t,className:Ze()(n,!o.length&&a)})}));E7.displayName="Col";const T7=E7,M7=v.forwardRef((({as:e="label",bsPrefix:t,column:n=!1,visuallyHidden:r=!1,className:i,htmlFor:a,...o},s)=>{const{controlId:l}=(0,v.useContext)(d7);t=Bt(t,"form-label");let c="col-form-label";"string"==typeof n&&(c=`${c} ${c}-${n}`);const u=Ze()(i,t,r&&"visually-hidden",n&&c);return a=a||l,n?(0,Ue.jsx)(T7,{ref:s,as:"label",className:u,htmlFor:a,...o}):(0,Ue.jsx)(e,{ref:s,className:u,htmlFor:a,...o})}));M7.displayName="FormLabel";const S7=M7,C7=v.forwardRef((({bsPrefix:e,className:t,id:n,...r},i)=>{const{controlId:a}=(0,v.useContext)(d7);return e=Bt(e,"form-range"),(0,Ue.jsx)("input",{...r,type:"range",ref:i,className:Ze()(t,e),id:n||a})}));C7.displayName="FormRange";const O7=C7,R7=v.forwardRef((({bsPrefix:e,size:t,htmlSize:n,className:r,isValid:i=!1,isInvalid:a=!1,id:o,...s},l)=>{const{controlId:c}=(0,v.useContext)(d7);return e=Bt(e,"form-select"),(0,Ue.jsx)("select",{...s,size:n,ref:l,className:Ze()(r,e,t&&`${e}-${t}`,i&&"is-valid",a&&"is-invalid"),id:o||c})}));R7.displayName="FormSelect";const N7=R7,L7=v.forwardRef((({bsPrefix:e,className:t,as:n="small",muted:r,...i},a)=>(e=Bt(e,"form-text"),(0,Ue.jsx)(n,{...i,ref:a,className:Ze()(t,e,r&&"text-muted")}))));L7.displayName="FormText";const D7=L7,P7=v.forwardRef(((e,t)=>(0,Ue.jsx)(y7,{...e,ref:t,type:"switch"})));P7.displayName="Switch";const I7=Object.assign(P7,{Input:y7.Input,Label:y7.Label}),F7=v.forwardRef((({bsPrefix:e,className:t,children:n,controlId:r,label:i,...a},o)=>(e=Bt(e,"form-floating"),(0,Ue.jsxs)(k7,{ref:o,className:Ze()(t,e),controlId:r,...a,children:[n,(0,Ue.jsx)("label",{htmlFor:r,children:i})]}))));F7.displayName="FloatingLabel";const z7=F7,j7={_ref:le().any,validated:le().bool,as:le().elementType},B7=v.forwardRef((({className:e,validated:t,as:n="form",...r},i)=>(0,Ue.jsx)(n,{...r,ref:i,className:Ze()(e,t&&"was-validated")})));B7.displayName="Form",B7.propTypes=j7;const U7=Object.assign(B7,{Group:k7,Control:x7,Floating:w7,Check:y7,Switch:I7,Label:S7,Text:D7,Range:O7,Select:N7,FloatingLabel:z7}),$7=v.forwardRef((({className:e,bsPrefix:t,as:n="span",...r},i)=>(t=Bt(t,"input-group-text"),(0,Ue.jsx)(n,{ref:i,className:Ze()(e,t),...r}))));$7.displayName="InputGroupText";const q7=$7,H7=v.forwardRef((({bsPrefix:e,size:t,hasValidation:n,className:r,as:i="div",...a},o)=>{e=Bt(e,"input-group");const s=(0,v.useMemo)((()=>({})),[]);return(0,Ue.jsx)(da.Provider,{value:s,children:(0,Ue.jsx)(i,{ref:o,...a,className:Ze()(r,e,t&&`${e}-${t}`,n&&"has-validation")})})}));H7.displayName="InputGroup";const V7=Object.assign(H7,{Text:q7,Radio:e=>(0,Ue.jsx)(q7,{children:(0,Ue.jsx)(p7,{type:"radio",...e})}),Checkbox:e=>(0,Ue.jsx)(q7,{children:(0,Ue.jsx)(p7,{type:"checkbox",...e})})});var W7=n(76632),G7=n.n(W7);const Y7={data:{heatmap:[{colorbar:{tickcolor:"#CCCCCC",tickfont:{color:"#CCCCCC"},title:{font:{color:"#CCCCCC"}}},type:"heatmap"}],scattergl:[{marker:{colorbar:{tickcolor:"#CCCCCC",tickfont:{color:"#CCCCCC"},title:{font:{color:"#CCCCCC"}}},type:"scattergl"}}]},layout:{legend:{font:{color:"#CCCCCC"},grouptitlefont:{color:"#CCCCCC"},title:{font:{color:"#CCCCCC"}}},paper_bgcolor:"#121212",plot_bgcolor:"#000000",xaxis:{gridcolor:"#5A5A5A",linecolor:"#CCCCCC",tickcolor:"#CCCCCC",tickfont:{color:"#CCCCCC"},title:{font:{color:"#CCCCCC"}},zerolinecolor:"#CCCCCC"},yaxis:{gridcolor:"#5A5A5A",linecolor:"#CCCCCC",tickcolor:"#CCCCCC",tickfont:{color:"#CCCCCC"},title:{font:{color:"#CCCCCC"}},zerolinecolor:"#CCCCCC"},titlefont:{color:"#F0F0F0"}}};var X7=[{name:"Pre-designed Genes",markerColor:"#6A76FC",group:"Genes",zorder:1,isBoosted:!1},{name:"Pre-designed Genes Boosted",markerColor:"#F6F926",group:"Genes",zorder:5,isBoosted:!0,label:"Pre-designed Genes\nBoosted"},{name:"Custom Genes",markerColor:"#0DF9FF",group:"Genes",isBoosted:!1,zorder:2},{name:"Negative Control Probes",markerColor:"#FD3216",group:"Controls",isBoosted:!1,zorder:4},{name:"Negative Control Codewords",markerColor:"#FF9616",group:"Controls",isBoosted:!1,zorder:4},{name:"Genomic Controls",markerColor:"#FE00CE",group:"Controls",zorder:4,isBoosted:!1,label:"Genomic Control Probes"},{name:"Unassigned Codewords",markerColor:"#FED4C4",group:"Controls",isBoosted:!1,zorder:3}],K7=X7.map((function(e){return e.name})),Z7=Object.fromEntries(X7.map((function(e){return[e.name,e.markerColor]}))),J7=Object.fromEntries(X7.map((function(e){return[e.name,e]}))),Q7=[{name:"Pre-designed Codeword",marker:{color:"#6A76FC",opacity:0,size:20,symbol:"circle-open"},group:"Codeword",zorder:6},{name:"Custom Codeword",marker:{color:"#0DF9FF",size:20,opacity:0,symbol:"diamond-open"},group:"Codeword",zorder:6}],e9=Q7.map((function(e){return e.name})),t9=(Object.fromEntries(Q7.map((function(e){return[e.name,e.marker.color]}))),Object.fromEntries(Q7.map((function(e){return[e.name,e]})))),n9=function(){return n9=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n9.apply(this,arguments)},r9=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},i9={displaylogo:!1,displayModeBar:!1,showLink:!1},a9=[{Header:"Gene Name",accessor:"featureName",width:130},{Header:"Transcript Counts",accessor:"transcriptCount",width:130},{Header:"Transcript Rank",accessor:"rank",width:110,sortable:!1}],o9={hovertemplate:"%{y} count %{x}<extra></extra>",orientation:"h",mode:"markers",marker:{color:"#66CCEE"},transforms:[{type:"sort",target:"x",order:"descending"}]},s9={autosize:!0,font:{family:"Overpass"},margin:{t:24},hovermode:"closest",legend:{title:{text:"Gene Category"},x:.96,y:1},template:Y7,xaxis:{dtick:1,fixedrange:!0,tickmode:"linear",tickangle:-35,title:"Transcript Counts",type:"log",zeroline:!0},yaxis:{automargin:!0,autorange:"reversed",fixedrange:!1,title:{text:"Gene",standoff:6}}};var l9=(0,te.withSize)({monitorHeight:!0})((function(e){var t=e.plotRef,n=e.plotData,r=e.size,i=r9(e,["plotRef","plotData","size"]),a=v.useState(r),o=a[0],s=a[1];return v.useEffect((function(){var e;(null===(e=t.current)||void 0===e?void 0:e.data)||K.react(t.current,n,i.layout,i.config)}),[t,n,i.config,i.layout]),v.useEffect((function(){r.width&&r.height&&(r.width===(null==o?void 0:o.width)&&r.height===(null==o?void 0:o.height)||(s((function(){return r})),K.relayout(t.current,r)))}),[r]),v.createElement("div",{id:"gene-counts-plot"},v.createElement("div",{className:"plot-wrapper",ref:t}))}));function c9(e){var t=e.plotRef,n=e.selectedFeatureStyleRef,r=e.records,i=e.featureNamePlotLookup,a=v.useRef(null),o=function(e){var n=i[e];null!==t&&(n?K.Fx.hover(t.current,[n]):K.Fx.unhover(t.current))};return v.createElement("div",{id:"gene-counts-table","data-test":"gene-counts-table",ref:a},v.createElement(V7,{className:"mb-3 search-box"},v.createElement(U7.Label,null,v.createElement(U7.Control,{onChange:function(e){if(a.current){var t=e.target.value.toLowerCase();if(0!==t.length){var r=a.current.querySelector(".rt-tbody"),i=r.querySelector(".rt-tr-group > .rt-tr[feature=".concat(t,"]"));if(i){var s=r.clientHeight/2;r.scrollTo(0,i.offsetTop-s),n.current.innerHTML=".rt-tr[feature=".concat(t,"] { background-color: #0071D9 }"),o(t)}else n.current.innerHTML=""}else n.current.innerHTML=""}},placeholder:"Type to search for a gene","aria-label":"Gene name"}))),v.createElement(fo,{data:r,columns:a9,pageSize:r.length,resizable:!1,showPagination:!1,showPageJump:!1,showPageSizeOptions:!1,sortable:!0,TrComponent:function(e){var t,n=e.children;return n.length>=1&&"string"==typeof(t=n[0].props.children)&&(t=t.toLocaleLowerCase()),v.createElement("div",n9({className:"rt-tr ".concat(e.className)},"string"==typeof t?{feature:t,onMouseEnter:function(){o(t)},onMouseLeave:function(){return o(null)}}:{}),e.children)}}))}const u9=v.forwardRef((({bsPrefix:e,className:t,as:n="div",...r},i)=>{const a=Bt(e,"row"),o=Ut(),s=$t(),l=`${a}-cols`,c=[];return o.forEach((e=>{const t=r[e];let n;delete r[e],null!=t&&"object"==typeof t?({cols:n}=t):n=t;const i=e!==s?`-${e}`:"";null!=n&&c.push(`${l}${i}-${n}`)})),(0,Ue.jsx)(n,{ref:i,...r,className:Ze()(t,a,...c)})}));u9.displayName="Row";const f9=u9;var d9=function(){return d9=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},d9.apply(this,arguments)},h9={displaylogo:!1,displayModeBar:!1,showLink:!1},p9={autosize:!0,hovermode:"closest",legend:{title:{text:"Gene Category"},x:.96,y:1},font:{family:"Overpass"},margin:{t:24},template:Y7,xaxis:{dtick:1,title:"Total transcripts per gene",type:"log",zeroline:!0,fixedrange:!0},yaxis:{automargin:!0,fixedrange:!0,range:[0,40],title:{text:"Mean callibrated quality of gene transcripts",standoff:6},zeroline:!0}},m9={orientation:"h",mode:"markers"},g9=d9(d9({},m9),{hovertemplate:["Gene Name: %{customdata}","<br>","<br>","Mean Q-score of <b>total</b> gene transcripts: %{y:.2f}","<br>","Total Transcripts per Gene: %{x:.4s}","<extra></extra>"].join("")}),v9=d9(d9({},m9),{hovertemplate:["Gene Name: %{customdata[0]}","<br>","<br>","Mean Q-score of <b>total</b> gene transcripts: %{y:.2f}","<br>","Total Transcripts per Gene: %{x:.4s}","<br>","<br>","&#x25C7; Q-score of <b>add-on probes</b>: %{customdata[1]:.2f}","<br>","Transcripts of <b>add-on probes</b>: %{customdata[2]:.4s}","<br>","<br>","&#x25CB; Q-score of <b>pre-designed probes</b>: %{customdata[3]:.2f}","<br>","Transcripts of <b>pre-designed probes</b>: %{customdata[4]:.4s}","<extra></extra>"].join("")});const y9=(0,te.withSize)({monitorHeight:!0,noPlaceholder:!0})((function(e){var t=e.data,n=e.layout,r=e.config,i=e.size,a=v.useRef(null),o=v.useRef(i);if(null===t)return null;var s=void 0,l=v.useMemo((function(){var e=S()({},h9,r),t=(null==n?void 0:n.width)?{}:d9(d9({},i),{autosize:!1});return{plotLayout:S()({},p9,n,t),plotConfig:e}}),[t,n,r,i]),c=l.plotConfig,u=l.plotLayout,f=v.useMemo((function(){for(var e=function(e){for(var t=new Map,n=0,r=e;n<r.length;n++){var i=r[n],a=i.data.custom_codeword_counts,o=i.data.custom_codeword_mean_calibrated_quality,s=i.data.predesigned_codeword_counts,l=i.data.predesigned_codeword_mean_calibrated_quality,c=i.data.gene_names;if(a&&o&&s&&l&&c)for(var u=0;u<c.length;u++){var f=s[u],d=a[u],h=l[u],p=o[u],m=c[u];m&&t.set(m,{custom:{count:d,meanQualityScore:p},predesigned:{count:f,meanQualityScore:h}})}}return t}(t),n=t.sort((function(e,t){return(-1===K7.indexOf(e.category)?1/0:K7.indexOf(e.category))-(-1===K7.indexOf(t.category)?1/0:K7.indexOf(t.category))})),r=n.map((function(t){return function(e,t){var n,r,i,a,o=e.category,s=J7[o],l=null!==(n=null==s?void 0:s.markerColor)&&void 0!==n?n:"yellow",c="Pre-designed Genes Boosted"===o,u=c?v9:g9,f=e.data,d=null!==(r=f.gene_names)&&void 0!==r?r:f.total_transcripts_per_gene.map((function(){return""})),h=d;h=c?d.map((function(e){var n=t.get(e);return[e,n?n.custom.meanQualityScore:NaN,n?n.custom.count:NaN,n?n.predesigned.meanQualityScore:NaN,n?n.predesigned.count:NaN]})):d;var p=void 0!==s&&null!==(i=s.label)&&void 0!==i?i:o,m=d9(d9({},u),{name:p,marker:{color:l,opacity:1,size:4},line:{color:l},showlegend:!0,zorder:void 0!==s&&null!==(a=s.zorder)&&void 0!==a?a:0,x:e.data.total_transcripts_per_gene,y:e.data.mean_calibrated_quality,customdata:h});return ee(m),m}(t,e)})),i=0,a=function(){for(var e,t=[],n=0,r=e9;n<r.length;n++){var i=r[n],a=t9[i],o=a.marker,s=d9(d9({},m9),{name:i,marker:{size:10,opacity:o.opacity,color:o.color,symbol:o.symbol,line:{width:3}},hoverinfo:"skip",line:{color:o.color},showlegend:!1,zorder:null!==(e=a.zorder)&&void 0!==e?e:0,hovertemplate:"<extra></extra>",x:[],y:[]});ee(s),t.push(s)}return t}();i<a.length;i++){var o=a[i];r.push(o)}return{plotData:r,sortedData:n,boostedData:e}}),[t]),d=f.plotData,h=f.sortedData,p=f.boostedData,m=[d.length-2,d.length-1];return v.useEffect((function(){null!==a?K.react(a.current,d,u,c):i===o.current||(null==n?void 0:n.width)||(K.relayout(a.current,i),o.current=i)}),[t,n,r,i]),v.useEffect((function(){null!==a&&(a.current.on("plotly_hover",(function(e){var t=e.points[0].pointIndex,n=e.points[0].curveNumber;if(void 0===s||s.curveNumber!==n||s.pointIndex!==t){var r=function(e,t,n){if(0===e.points.length)return;var r=e.points[0].curveNumber,i=e.points[0].pointIndex,a=K7[r];if("Pre-designed Genes Boosted"!==a)return;var o=t[r];if(!o)return;var s=o.data.gene_names;if(!s)return;var l=s[i];if(!l)return;var c=n.get(l);if(!c)return;var u={x:[[c.predesigned.count],[c.custom.count]],y:[[c.predesigned.meanQualityScore],[c.custom.meanQualityScore]],"marker.opacity":1};return{updates:u,curveNumber:r,pointIndex:i}}(e,h,p);if(void 0!==r){var i=r.updates;s={curveNumber:n,pointIndex:t},K.restyle(a.current,i,m)}}})),a.current.on("plotly_unhover",(function(){if(void 0!==s){s=void 0;K.restyle(a.current,{"marker.opacity":0},m)}})))}),[]),v.createElement(f9,null,v.createElement(T7,null,v.createElement(f9,null,v.createElement("div",{className:"plot-wrapper",ref:a}))))}));var b9=function(e,t){return Number(e.toFixed(t))},x9=function(e,t,n){n&&"function"==typeof n&&n(e,t)},_9={easeOut:function(e){return-Math.cos(e*Math.PI)/2+.5},linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}},w9=function(e){"number"==typeof e&&cancelAnimationFrame(e)},A9=function(e){e.mounted&&(w9(e.animation),e.animate=!1,e.animation=null,e.velocity=null)};function k9(e,t,n,r){if(e.mounted){var i=(new Date).getTime();A9(e),e.animation=function(){if(!e.mounted)return w9(e.animation);var a=(new Date).getTime()-i,o=(0,_9[t])(a/n);a>=n?(r(1),e.animation=null):e.animation&&(r(o),requestAnimationFrame(e.animation))},requestAnimationFrame(e.animation)}}function E9(e,t,n,r){var i=function(e){var t=e.scale,n=e.positionX,r=e.positionY;return!(Number.isNaN(t)||Number.isNaN(n)||Number.isNaN(r))}(t);if(e.mounted&&i){var a=e.setTransformState,o=e.transformState,s=o.scale,l=o.positionX,c=o.positionY,u=t.scale-s,f=t.positionX-l,d=t.positionY-c;0===n?a(t.scale,t.positionX,t.positionY):k9(e,r,n,(function(e){a(s+u*e,l+f*e,c+d*e)}))}}var T9=function(e,t){var n=e.wrapperComponent,r=e.contentComponent,i=e.setup.centerZoomedOut;if(!n||!r)throw new Error("Components are not mounted");var a=function(e,t,n){var r=e.offsetWidth,i=e.offsetHeight,a=t.offsetWidth*n,o=t.offsetHeight*n;return{wrapperWidth:r,wrapperHeight:i,newContentWidth:a,newDiffWidth:r-a,newContentHeight:o,newDiffHeight:i-o}}(n,r,t),o=a.wrapperWidth,s=a.wrapperHeight,l=function(e,t,n,r,i,a,o){var s=e>t?n*(o?1:.5):0,l=r>i?a*(o?1:.5):0;return{minPositionX:e-t-s,maxPositionX:s,minPositionY:r-i-l,maxPositionY:l}}(o,a.newContentWidth,a.newDiffWidth,s,a.newContentHeight,a.newDiffHeight,Boolean(i));return l},M9=function(e,t,n,r){return b9(r?e<t?t:e>n?n:e:e,2)},S9=function(e,t){var n=T9(e,t);return e.bounds=n,n};function C9(e,t,n,r,i,a,o){var s=n.minPositionX,l=n.minPositionY,c=n.maxPositionX,u=n.maxPositionY,f=0,d=0;return o&&(f=i,d=a),{x:M9(e,s-f,c+f,r),y:M9(t,l-d,u+d,r)}}function O9(e,t,n,r,i,a){var o=e.transformState,s=o.scale,l=o.positionX,c=o.positionY,u=r-s;return"number"!=typeof t||"number"!=typeof n?(console.error("Mouse X and Y position were not provided!"),{x:l,y:c}):C9(l-t*u,c-n*u,i,a,0,0,null)}function R9(e,t,n,r,i){var a=t-(i?r:0);return!Number.isNaN(n)&&e>=n?n:!Number.isNaN(t)&&e<=a?a:e}var N9=function(e,t){var n=e.setup.panning.excluded,r=e.isInitialized,i=e.wrapperComponent,a=t.target,o="shadowRoot"in a&&"composedPath"in t?t.composedPath().some((function(e){return e instanceof Element&&(null==i?void 0:i.contains(e))})):null==i?void 0:i.contains(a);return!!(r&&a&&o)&&!pee(a,n)},L9=function(e){var t=e.isInitialized,n=e.isPanning,r=e.setup.panning.disabled;return!(!t||!n||r)};function D9(e,t,n,r,i){var a=e.setup.limitToBounds,o=e.wrapperComponent,s=e.bounds,l=e.transformState,c=l.scale,u=l.positionX,f=l.positionY;if(null!==o&&null!==s&&(t!==u||n!==f)){var d=C9(t,n,s,a,r,i,o),h=d.x,p=d.y;e.setTransformState(c,h,p)}}var P9=function(e,t){var n=e.setup,r=e.transformState.scale,i=n.minScale,a=n.disablePadding;return t>0&&r>=i&&!a?t:0};function I9(e,t,n,r,i,a,o,s,l,c){if(i){var u;if(t>o&&n>o)return(u=o+(e-o)*c)>l?l:u<o?o:u;if(t<a&&n<a)return(u=a+(e-a)*c)<s?s:u>a?a:u}return r?t:M9(e,a,o,i)}function F9(e,t){var n=function(e){var t=e.mounted,n=e.setup,r=n.disabled,i=n.velocityAnimation,a=e.transformState.scale;return!(i.disabled&&!(a>1)&&r&&!t)}(e);if(n){var r=e.lastMousePosition,i=e.velocityTime,a=e.setup,o=e.wrapperComponent,s=a.velocityAnimation.equalToMove,l=Date.now();if(r&&i&&o){var c=function(e,t){return t?Math.min(1,e.offsetWidth/window.innerWidth):1}(o,s),u=t.x-r.x,f=t.y-r.y,d=u/c,h=f/c,p=l-i,m=u*u+f*f,g=Math.sqrt(m)/p;e.velocity={velocityX:d,velocityY:h,total:g}}e.lastMousePosition=t,e.velocityTime=l}}function z9(e,t){var n=e.transformState.scale;A9(e),S9(e,n),void 0!==window.TouchEvent&&t instanceof TouchEvent?function(e,t){var n=t.touches,r=e.transformState,i=r.positionX,a=r.positionY;if(e.isPanning=!0,1===n.length){var o=n[0].clientX,s=n[0].clientY;e.startCoords={x:o-i,y:s-a}}}(e,t):function(e,t){var n=e.transformState,r=n.positionX,i=n.positionY;e.isPanning=!0;var a=t.clientX,o=t.clientY;e.startCoords={x:a-r,y:o-i}}(e,t)}function j9(e){var t=e.transformState.scale,n=e.setup,r=n.minScale,i=n.alignmentAnimation,a=i.disabled,o=i.sizeX,s=i.sizeY,l=i.animationTime,c=i.animationType;if(!(a||t<r||!o&&!s)){var u=function(e){var t=e.transformState,n=t.positionX,r=t.positionY,i=t.scale,a=e.setup,o=a.disabled,s=a.limitToBounds,l=a.centerZoomedOut,c=e.wrapperComponent;if(!o&&c&&e.bounds){var u=e.bounds,f=u.maxPositionX,d=u.minPositionX,h=u.maxPositionY,p=u.minPositionY,m=n>f||n<d,g=r>h||r<p,v=O9(e,n>f?c.offsetWidth:e.setup.minPositionX||0,r>h?c.offsetHeight:e.setup.minPositionY||0,i,e.bounds,s||l),y=v.x,b=v.y;return{scale:i,positionX:m?y:n,positionY:g?b:r}}}(e);u&&E9(e,u,l,c)}}function B9(e,t,n){var r=e.startCoords,i=e.setup.alignmentAnimation,a=i.sizeX,o=i.sizeY;if(r){var s=function(e,t,n){var r=e.startCoords,i=e.transformState,a=e.setup.panning,o=a.lockAxisX,s=a.lockAxisY,l=i.positionX,c=i.positionY;if(!r)return{x:l,y:c};var u=t-r.x,f=n-r.y;return{x:o?l:u,y:s?c:f}}(e,t,n),l=s.x,c=s.y,u=P9(e,a),f=P9(e,o);F9(e,{x:l,y:c}),D9(e,l,c,u,f)}}function U9(e){if(e.isPanning){var t=e.setup.panning.velocityDisabled,n=e.velocity,r=e.wrapperComponent,i=e.contentComponent;e.isPanning=!1,e.animate=!1,e.animation=null;var a=null==r?void 0:r.getBoundingClientRect(),o=null==i?void 0:i.getBoundingClientRect(),s=(null==a?void 0:a.width)||0,l=(null==a?void 0:a.height)||0,c=(null==o?void 0:o.width)||0,u=(null==o?void 0:o.height)||0,f=s<c||l<u;!t&&n&&(null==n?void 0:n.total)>.1&&f?function(e){var t=e.velocity,n=e.bounds,r=e.setup,i=e.wrapperComponent,a=function(e){var t=e.mounted,n=e.velocity,r=e.bounds,i=e.setup,a=i.disabled,o=i.velocityAnimation,s=e.transformState.scale;return!(o.disabled&&!(s>1)&&a&&!t||!n||!r)}(e);if(a&&t&&n&&i){var o=t.velocityX,s=t.velocityY,l=t.total,c=n.maxPositionX,u=n.minPositionX,f=n.maxPositionY,d=n.minPositionY,h=r.limitToBounds,p=r.alignmentAnimation,m=r.zoomAnimation,g=r.panning,v=g.lockAxisY,y=g.lockAxisX,b=m.animationType,x=p.sizeX,_=p.sizeY,w=p.velocityAlignmentTime,A=function(e,t){var n=e.setup.velocityAnimation,r=n.equalToMove,i=n.animationTime,a=n.sensitivity;return r?i*t*a:i}(e,l),k=Math.max(A,w),E=P9(e,x),T=P9(e,_),M=E*i.offsetWidth/100,S=T*i.offsetHeight/100,C=c+M,O=u-M,R=f+S,N=d-S,L=e.transformState,D=(new Date).getTime();k9(e,b,k,(function(t){var n=e.transformState,r=n.scale,i=n.positionX,a=n.positionY,l=((new Date).getTime()-D)/w,m=1-(0,_9[p.animationType])(Math.min(1,l)),g=1-t,b=i+o*g,x=a+s*g,_=I9(b,L.positionX,i,y,h,u,c,O,C,m),A=I9(x,L.positionY,a,v,h,d,f,N,R,m);i===b&&a===x||e.setTransformState(r,_,A)}))}}(e):j9(e)}}function $9(e,t,n,r){var i=e.setup,a=i.minScale,o=i.maxScale,s=i.limitToBounds,l=R9(b9(t,2),a,o,0,!1),c=O9(e,n,r,l,S9(e,l),s);return{scale:l,positionX:c.x,positionY:c.y}}function q9(e,t,n){var r=e.transformState.scale,i=e.wrapperComponent,a=e.setup,o=a.minScale,s=a.limitToBounds,l=a.zoomAnimation,c=l.disabled,u=l.animationTime,f=l.animationType,d=c||r>=o;if((r>=1||s)&&j9(e),!d&&i&&e.mounted){var h=$9(e,o,t||i.offsetWidth/2,n||i.offsetHeight/2);h&&E9(e,h,u,f)}}var H9=function(){return H9=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},H9.apply(this,arguments)};function V9(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var W9=1,G9=0,Y9=0,X9={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},K9="react-transform-wrapper",Z9="react-transform-component",J9=function(e){var t,n,r,i;return{previousScale:null!==(t=e.initialScale)&&void 0!==t?t:W9,scale:null!==(n=e.initialScale)&&void 0!==n?n:W9,positionX:null!==(r=e.initialPositionX)&&void 0!==r?r:G9,positionY:null!==(i=e.initialPositionY)&&void 0!==i?i:Y9}},Q9=function(e){var t=H9({},X9);return Object.keys(e).forEach((function(n){var r=void 0!==e[n];if(void 0!==X9[n]&&r){var i=Object.prototype.toString.call(X9[n]),a="[object Object]"===i,o="[object Array]"===i;t[n]=a?H9(H9({},X9[n]),e[n]):o?V9(V9([],X9[n],!0),e[n],!0):e[n]}})),t},eee=function(e,t,n){var r=e.transformState.scale,i=e.wrapperComponent,a=e.setup,o=a.maxScale,s=a.minScale,l=a.zoomAnimation,c=a.smooth,u=l.size;if(!i)throw new Error("Wrapper is not mounted");var f=c?r*Math.exp(t*n):r+t*n;return R9(b9(f,3),s,o,u,!1)};function tee(e,t,n,r,i){var a=e.wrapperComponent,o=e.transformState,s=o.scale,l=o.positionX,c=o.positionY;if(!a)return console.error("No WrapperComponent found");var u=(a.offsetWidth/2-l)/s,f=(a.offsetHeight/2-c)/s,d=$9(e,eee(e,t,n),u,f);if(!d)return console.error("Error during zoom event. New transformation state was not calculated.");E9(e,d,r,i)}function nee(e,t,n,r){var i=e.setup,a=e.wrapperComponent,o=i.limitToBounds,s=J9(e.props),l=e.transformState,c=l.scale,u=l.positionX,f=l.positionY;if(a){var d=T9(e,s.scale),h=C9(s.positionX,s.positionY,d,o,0,0,a),p={scale:s.scale,positionX:h.x,positionY:h.y};c===s.scale&&u===s.positionX&&f===s.positionY||(null==r||r(),E9(e,p,t,n))}}var ree=function(e){return function(t,n,r){void 0===t&&(t=.5),void 0===n&&(n=300),void 0===r&&(r="easeOut"),tee(e,1,t,n,r)}},iee=function(e){return function(t,n,r){void 0===t&&(t=.5),void 0===n&&(n=300),void 0===r&&(r="easeOut"),tee(e,-1,t,n,r)}},aee=function(e){return function(t,n,r,i,a){void 0===i&&(i=300),void 0===a&&(a="easeOut");var o=e.transformState,s=o.positionX,l=o.positionY,c=o.scale,u=e.wrapperComponent,f=e.contentComponent;if(!e.setup.disabled&&u&&f){var d={positionX:Number.isNaN(t)?s:t,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(r)?c:r};E9(e,d,i,a)}}},oee=function(e){return function(t,n){void 0===t&&(t=200),void 0===n&&(n="easeOut"),nee(e,t,n)}},see=function(e){return function(t,n,r){void 0===n&&(n=200),void 0===r&&(r="easeOut");var i=e.transformState,a=e.wrapperComponent,o=e.contentComponent;if(a&&o){var s=gee(t||i.scale,a,o);E9(e,s,n,r)}}},lee=function(e){return function(t,n,r,i){void 0===r&&(r=600),void 0===i&&(i="easeOut"),A9(e);var a=e.wrapperComponent,o="string"==typeof t?document.getElementById(t):t;if(a&&o&&a.contains(o)){var s=function(e,t,n){var r=e.wrapperComponent,i=e.contentComponent,a=e.transformState,o=e.setup,s=o.limitToBounds,l=o.minScale,c=o.maxScale;if(!r||!i)return a;var u=r.getBoundingClientRect(),f=t.getBoundingClientRect(),d=function(e,t,n,r){var i=e.getBoundingClientRect(),a=t.getBoundingClientRect(),o=n.getBoundingClientRect(),s=a.x*r.scale,l=a.y*r.scale;return{x:(i.x-o.x+s)/r.scale,y:(i.y-o.y+l)/r.scale}}(t,r,i,a),h=d.x,p=d.y,m=f.width/a.scale,g=f.height/a.scale,v=r.offsetWidth/m,y=r.offsetHeight/g,b=R9(n||Math.min(v,y),l,c,0,!1),x=(u.width-m*b)/2,_=(u.height-g*b)/2,w=C9((u.left-h)*b+x,(u.top-p)*b+_,T9(e,b),s,0,0,r);return{positionX:w.x,positionY:w.y,scale:b}}(e,o,n);E9(e,s,r,i)}}},cee=function(e){return{instance:e,zoomIn:ree(e),zoomOut:iee(e),setTransform:aee(e),resetTransform:oee(e),centerView:see(e),zoomToElement:lee(e)}},uee=function(e){return{instance:e,state:e.transformState}},fee=function(e){var t={};return Object.assign(t,uee(e)),Object.assign(t,cee(e)),t};function dee(){try{return{get passive(){return!1}}}catch(e){return!1}}var hee=".".concat(K9),pee=function(e,t){return t.some((function(t){return e.matches("".concat(hee," ").concat(t,", ").concat(hee," .").concat(t,", ").concat(hee," ").concat(t," *, ").concat(hee," .").concat(t," *"))}))},mee=function(e){e&&clearTimeout(e)},gee=function(e,t,n){var r=n.offsetWidth*e,i=n.offsetHeight*e;return{scale:e,positionX:(t.offsetWidth-r)/2,positionY:(t.offsetHeight-i)/2}};function vee(e,t,n){var r=t.getBoundingClientRect(),i=0,a=0;if("clientX"in e)i=(e.clientX-r.left)/n,a=(e.clientY-r.top)/n;else{var o=e.touches[0];i=(o.clientX-r.left)/n,a=(o.clientY-r.top)/n}return(Number.isNaN(i)||Number.isNaN(a))&&console.error("No mouse or touch offset found"),{x:i,y:a}}var yee=function(e){return Math.sqrt(Math.pow(e.touches[0].pageX-e.touches[1].pageX,2)+Math.pow(e.touches[0].pageY-e.touches[1].pageY,2))},bee=function(e,t){var n=e.props,r=n.onWheel,i=n.onZoom,a=e.contentComponent,o=e.setup,s=e.transformState.scale,l=o.limitToBounds,c=o.centerZoomedOut,u=o.zoomAnimation,f=o.wheel,d=o.disablePadding,h=o.smooth,p=u.size,m=u.disabled,g=f.step,v=f.smoothStep;if(!a)throw new Error("Component not mounted");t.preventDefault(),t.stopPropagation();var y=function(e,t){var n,r,i=function(e){return e?e.deltaY<0?1:-1:0}(e);return r=i,"number"==typeof(n=t)?n:r}(t,null),b=function(e,t,n,r,i){var a=e.transformState.scale,o=e.wrapperComponent,s=e.setup,l=s.maxScale,c=s.minScale,u=s.zoomAnimation,f=s.disablePadding,d=u.size,h=u.disabled;if(!o)throw new Error("Wrapper is not mounted");var p=a+t*n;if(i)return p;var m=!r&&!h;return R9(b9(p,3),c,l,d,m&&!f)}(e,y,h?v*Math.abs(t.deltaY):g,!t.ctrlKey);if(s!==b){var x=S9(e,b),_=vee(t,a,s),w=l&&(m||0===p||c||d),A=O9(e,_.x,_.y,b,x,w),k=A.x,E=A.y;e.previousWheelEvent=t,e.setTransformState(b,k,E),x9(fee(e),t,r),x9(fee(e),t,i)}},xee=function(e,t){var n=e.props,r=n.onWheelStop,i=n.onZoomStop;mee(e.wheelAnimationTimer),e.wheelAnimationTimer=setTimeout((function(){e.mounted&&(q9(e,t.x,t.y),e.wheelAnimationTimer=null)}),100);var a=function(e,t){var n=e.previousWheelEvent,r=e.transformState.scale,i=e.setup,a=i.maxScale,o=i.minScale;return!!n&&(r<a||r>o||Math.sign(n.deltaY)!==Math.sign(t.deltaY)||n.deltaY>0&&n.deltaY<t.deltaY||n.deltaY<0&&n.deltaY>t.deltaY||Math.sign(n.deltaY)!==Math.sign(t.deltaY))}(e,t);a&&(mee(e.wheelStopEventTimer),e.wheelStopEventTimer=setTimeout((function(){e.mounted&&(e.wheelStopEventTimer=null,x9(fee(e),t,r),x9(fee(e),t,i))}),160))},_ee=function(e){for(var t=0,n=0,r=0;r<2;r+=1)t+=e.touches[r].clientX,n+=e.touches[r].clientY;return{x:t/2,y:n/2}},wee=function(e,t){var n=e.contentComponent,r=e.pinchStartDistance,i=e.wrapperComponent,a=e.transformState.scale,o=e.setup,s=o.limitToBounds,l=o.centerZoomedOut,c=o.zoomAnimation,u=o.alignmentAnimation,f=c.disabled,d=c.size;if(null!==r&&n){var h=function(e,t,n){var r=n.getBoundingClientRect(),i=e.touches,a=b9(i[0].clientX-r.left,5),o=b9(i[0].clientY-r.top,5);return{x:(a+b9(i[1].clientX-r.left,5))/2/t,y:(o+b9(i[1].clientY-r.top,5))/2/t}}(t,a,n);if(Number.isFinite(h.x)&&Number.isFinite(h.y)){var p=yee(t),m=function(e,t){var n=e.pinchStartScale,r=e.pinchStartDistance,i=e.setup,a=i.maxScale,o=i.minScale,s=i.zoomAnimation,l=i.disablePadding,c=s.size,u=s.disabled;if(!n||null===r||!t)throw new Error("Pinch touches distance was not provided");return t<0?e.transformState.scale:R9(b9(t/r*n,2),o,a,c,!u&&!l)}(e,p),g=_ee(t),v=g.x-(e.pinchLastCenterX||0),y=g.y-(e.pinchLastCenterY||0);if(m!==a||0!==v||0!==y){e.pinchLastCenterX=g.x,e.pinchLastCenterY=g.y;var b=S9(e,m),x=s&&(f||0===d||l),_=O9(e,h.x,h.y,m,b,x),w=_.x,A=_.y;e.pinchMidpoint=h,e.lastDistance=p;var k=u.sizeX,E=u.sizeY,T=C9(w+v,A+y,b,s,P9(e,k),P9(e,E),i),M=T.x,S=T.y;e.setTransformState(m,M,S)}}}},Aee=function(e,t){var n=e.props.onZoomStop,r=e.setup.doubleClick.animationTime;mee(e.doubleClickStopEventTimer),e.doubleClickStopEventTimer=setTimeout((function(){e.doubleClickStopEventTimer=null,x9(fee(e),t,n)}),r)};function kee(e,t){var n=e.setup,r=e.doubleClickStopEventTimer,i=e.transformState,a=e.contentComponent,o=i.scale,s=e.props,l=s.onZoomStart,c=s.onZoom,u=n.doubleClick,f=u.disabled,d=u.mode,h=u.step,p=u.animationTime,m=u.animationType;if(!f&&!r){if("reset"===d)return function(e,t){var n=e.props,r=n.onZoomStart,i=n.onZoom,a=e.setup.doubleClick,o=a.animationTime,s=a.animationType;x9(fee(e),t,r),nee(e,o,s,(function(){return x9(fee(e),t,i)})),Aee(e,t)}(e,t);if(!a)return console.error("No ContentComponent found");var g=function(e,t){return"toggle"===e?1===t?1:-1:"zoomOut"===e?-1:1}(d,e.transformState.scale),v=eee(e,g,h);if(o!==v){x9(fee(e),t,l);var y=vee(t,a,o),b=$9(e,v,y.x,y.y);if(!b)return console.error("Error during zoom event. New transformation state was not calculated.");x9(fee(e),t,c),E9(e,b,p,m),Aee(e,t)}}}var Eee=function(e){var t=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){t.initializeWindowEvents()},this.unmount=function(){t.cleanupWindowEvents()},this.update=function(e){t.props=e,S9(t,t.transformState.scale),t.setup=Q9(e)},this.initializeWindowEvents=function(){var e,n,r=dee(),i=null===(e=t.wrapperComponent)||void 0===e?void 0:e.ownerDocument,a=null==i?void 0:i.defaultView;null===(n=t.wrapperComponent)||void 0===n||n.addEventListener("wheel",t.onWheelPanning,r),null==a||a.addEventListener("mousedown",t.onPanningStart,r),null==a||a.addEventListener("mousemove",t.onPanning,r),null==a||a.addEventListener("mouseup",t.onPanningStop,r),null==i||i.addEventListener("mouseleave",t.clearPanning,r),null==a||a.addEventListener("keyup",t.setKeyUnPressed,r),null==a||a.addEventListener("keydown",t.setKeyPressed,r)},this.cleanupWindowEvents=function(){var e,n,r=dee(),i=null===(e=t.wrapperComponent)||void 0===e?void 0:e.ownerDocument,a=null==i?void 0:i.defaultView;null==a||a.removeEventListener("mousedown",t.onPanningStart,r),null==a||a.removeEventListener("mousemove",t.onPanning,r),null==a||a.removeEventListener("mouseup",t.onPanningStop,r),null==i||i.removeEventListener("mouseleave",t.clearPanning,r),null==a||a.removeEventListener("keyup",t.setKeyUnPressed,r),null==a||a.removeEventListener("keydown",t.setKeyPressed,r),document.removeEventListener("mouseleave",t.clearPanning,r),A9(t),null===(n=t.observer)||void 0===n||n.disconnect()},this.handleInitializeWrapperEvents=function(e){var n=dee();e.addEventListener("wheel",t.onWheelZoom,n),e.addEventListener("dblclick",t.onDoubleClick,n),e.addEventListener("touchstart",t.onTouchPanningStart,n),e.addEventListener("touchmove",t.onTouchPanning,n),e.addEventListener("touchend",t.onTouchPanningStop,n)},this.handleInitialize=function(e){var n=t.setup.centerOnInit;t.applyTransformation(),t.onInitCallbacks.forEach((function(e){return e(fee(t))})),n&&(t.setCenter(),t.observer=new ResizeObserver((function(){var n,r=e.offsetWidth,i=e.offsetHeight;(r>0||i>0)&&(t.onInitCallbacks.forEach((function(e){return e(fee(t))})),t.setCenter(),null===(n=t.observer)||void 0===n||n.disconnect())})),setTimeout((function(){var e;null===(e=t.observer)||void 0===e||e.disconnect()}),5e3),t.observer.observe(e))},this.onWheelZoom=function(e){if(!t.setup.disabled){var n=function(e,t){var n=e.setup.wheel,r=n.disabled,i=n.wheelDisabled,a=n.touchPadDisabled,o=n.excluded,s=e.isInitialized,l=e.isPanning,c=t.target;return!(!s||l||r||!c||i&&!t.ctrlKey||a&&t.ctrlKey||pee(c,o))}(t,e);n&&t.isPressingKeys(t.setup.wheel.activationKeys)&&(function(e,t){var n=e.props,r=n.onWheelStart,i=n.onZoomStart;e.wheelStopEventTimer||(A9(e),x9(fee(e),t,r),x9(fee(e),t,i))}(t,e),bee(t,e),xee(t,e))}},this.onWheelPanning=function(e){var n=t.setup,r=n.disabled,i=n.wheel,a=n.panning;if(t.wrapperComponent&&t.contentComponent&&!r&&i.wheelDisabled&&!a.disabled&&a.wheelPanning&&!e.ctrlKey){e.preventDefault(),e.stopPropagation();var o=t.transformState,s=o.positionX,l=o.positionY,c=s-e.deltaX,u=l-e.deltaY,f=a.lockAxisX?s:c,d=a.lockAxisY?l:u,h=t.setup.alignmentAnimation,p=h.sizeX,m=h.sizeY,g=P9(t,p),v=P9(t,m);f===s&&d===l||D9(t,f,d,g,v)}},this.onPanningStart=function(e){var n=t.setup.disabled,r=t.props.onPanningStart;n||N9(t,e)&&t.isPressingKeys(t.setup.panning.activationKeys)&&(0!==e.button||t.setup.panning.allowLeftClickPan)&&(1!==e.button||t.setup.panning.allowMiddleClickPan)&&(2!==e.button||t.setup.panning.allowRightClickPan)&&(e.preventDefault(),e.stopPropagation(),A9(t),z9(t,e),x9(fee(t),e,r))},this.onPanning=function(e){var n=t.setup.disabled,r=t.props.onPanning;n||L9(t)&&t.isPressingKeys(t.setup.panning.activationKeys)&&(e.preventDefault(),e.stopPropagation(),B9(t,e.clientX,e.clientY),x9(fee(t),e,r))},this.onPanningStop=function(e){var n=t.props.onPanningStop;t.isPanning&&(U9(t),x9(fee(t),e,n))},this.onPinchStart=function(e){var n=t.setup.disabled,r=t.props,i=r.onPinchingStart,a=r.onZoomStart;if(!n){var o=function(e,t){var n=e.setup.pinch,r=n.disabled,i=n.excluded,a=e.isInitialized,o=t.target;return!(!a||r||!o||pee(o,i))}(t,e);o&&(function(e,t){var n=yee(t);e.pinchStartDistance=n,e.lastDistance=n,e.pinchStartScale=e.transformState.scale,e.isPanning=!1;var r=_ee(t);e.pinchLastCenterX=r.x,e.pinchLastCenterY=r.y,A9(e)}(t,e),A9(t),x9(fee(t),e,i),x9(fee(t),e,a))}},this.onPinch=function(e){var n=t.setup.disabled,r=t.props,i=r.onPinching,a=r.onZoom;if(!n){var o=function(e){var t=e.setup.pinch.disabled,n=e.isInitialized,r=e.pinchStartDistance;return!(!n||t||!r)}(t);o&&(e.preventDefault(),e.stopPropagation(),wee(t,e),x9(fee(t),e,i),x9(fee(t),e,a))}},this.onPinchStop=function(e){var n,r,i=t.props,a=i.onPinchingStop,o=i.onZoomStop;t.pinchStartScale&&(r=(n=t).pinchMidpoint,n.velocity=null,n.lastDistance=null,n.pinchMidpoint=null,n.pinchStartScale=null,n.pinchStartDistance=null,q9(n,null==r?void 0:r.x,null==r?void 0:r.y),x9(fee(t),e,a),x9(fee(t),e,o))},this.onTouchPanningStart=function(e){var n=t.setup.disabled,r=t.props.onPanningStart;if(!n&&N9(t,e)&&!(t.lastTouch&&+new Date-t.lastTouch<200)){t.lastTouch=+new Date,A9(t);var i=e.touches,a=1===i.length,o=2===i.length;a&&(A9(t),z9(t,e),x9(fee(t),e,r)),o&&t.onPinchStart(e)}},this.onTouchPanning=function(e){var n=t.setup.disabled,r=t.props.onPanning;if(t.isPanning&&1===e.touches.length){if(n)return;if(!L9(t))return;e.preventDefault(),e.stopPropagation();var i=e.touches[0];B9(t,i.clientX,i.clientY),x9(fee(t),e,r)}else e.touches.length>1&&t.onPinch(e)},this.onTouchPanningStop=function(e){t.onPanningStop(e),t.onPinchStop(e)},this.onDoubleClick=function(e){if(!t.setup.disabled){var n=function(e,t){var n=e.isInitialized,r=e.setup,i=e.wrapperComponent,a=r.doubleClick,o=a.disabled,s=a.excluded,l=t.target,c=null==i?void 0:i.contains(l);return!(!(n&&l&&c)||o||pee(l,s))}(t,e);n&&kee(t,e)}},this.clearPanning=function(e){t.isPanning&&t.onPanningStop(e)},this.setKeyPressed=function(e){t.pressedKeys[e.key]=!0},this.setKeyUnPressed=function(e){t.pressedKeys[e.key]=!1},this.isPressingKeys=function(e){return!e.length||Boolean(e.find((function(e){return t.pressedKeys[e]})))},this.setTransformState=function(e,n,r){var i=t.props.onTransformed;if(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(r))console.error("Detected NaN set state values");else{e!==t.transformState.scale&&(t.transformState.previousScale=t.transformState.scale,t.transformState.scale=e),t.transformState.positionX=n,t.transformState.positionY=r,t.applyTransformation();var a=fee(t);t.onChangeCallbacks.forEach((function(e){return e(a)})),x9(a,{scale:e,positionX:n,positionY:r},i)}},this.setCenter=function(){if(t.wrapperComponent&&t.contentComponent){var e=gee(t.transformState.scale,t.wrapperComponent,t.contentComponent);t.setTransformState(e.scale,e.positionX,e.positionY)}},this.handleTransformStyles=function(e,n,r){return t.props.customTransform?t.props.customTransform(e,n,r):function(e,t,n){return"translate(".concat(e,"px, ").concat(t,"px) scale(").concat(n,")")}(e,n,r)},this.applyTransformation=function(){if(t.mounted&&t.contentComponent){var e=t.transformState,n=e.scale,r=e.positionX,i=e.positionY,a=t.handleTransformStyles(r,i,n);t.contentComponent.style.transform=a}},this.getContext=function(){return fee(t)},this.onChange=function(e){return t.onChangeCallbacks.has(e)||t.onChangeCallbacks.add(e),function(){t.onChangeCallbacks.delete(e)}},this.onInit=function(e){return t.onInitCallbacks.has(e)||t.onInitCallbacks.add(e),function(){t.onInitCallbacks.delete(e)}},this.init=function(e,n){t.cleanupWindowEvents(),t.wrapperComponent=e,t.contentComponent=n,S9(t,t.transformState.scale),t.handleInitializeWrapperEvents(e),t.handleInitialize(n),t.initializeWindowEvents(),t.isInitialized=!0;var r=fee(t);x9(r,void 0,t.props.onInit)},this.props=e,this.setup=Q9(this.props),this.transformState=J9(this.props)},Tee=v.createContext(null),Mee=v.forwardRef((function(e,t){var n=(0,v.useRef)(new Eee(e)).current,r=function(e,t){return"function"==typeof e?e(t):e}(e.children,cee(n));return(0,v.useImperativeHandle)(t,(function(){return cee(n)}),[n]),(0,v.useEffect)((function(){n.update(e)}),[n,e]),v.createElement(Tee.Provider,{value:n},r)}));v.forwardRef((function(e,t){var n,r=(0,v.useRef)(null),i=(0,v.useContext)(Tee);return(0,v.useEffect)((function(){return i.onChange((function(e){if(r.current){r.current.style.transform=i.handleTransformStyles(0,0,1/e.instance.transformState.scale)}}))}),[i]),v.createElement("div",H9({},e,{ref:(n=[r,t],function(e){n.forEach((function(t){"function"==typeof t?t(e):null!=t&&(t.current=e)}))})}))}));var See="transform-component-module_wrapper__SPB86",Cee="transform-component-module_content__FBWxo";!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".transform-component-module_wrapper__SPB86 {\n  position: relative;\n  width: -moz-fit-content;\n  width: fit-content;\n  height: -moz-fit-content;\n  height: fit-content;\n  overflow: hidden;\n  -webkit-touch-callout: none; /* iOS Safari */\n  -webkit-user-select: none; /* Safari */\n  -khtml-user-select: none; /* Konqueror HTML */\n  -moz-user-select: none; /* Firefox */\n  -ms-user-select: none; /* Internet Explorer/Edge */\n  user-select: none;\n  margin: 0;\n  padding: 0;\n}\n.transform-component-module_content__FBWxo {\n  display: flex;\n  flex-wrap: wrap;\n  width: -moz-fit-content;\n  width: fit-content;\n  height: -moz-fit-content;\n  height: fit-content;\n  margin: 0;\n  padding: 0;\n  transform-origin: 0% 0%;\n}\n.transform-component-module_content__FBWxo img {\n  pointer-events: none;\n}\n");var Oee=function(e){var t=e.children,n=e.wrapperClass,r=void 0===n?"":n,i=e.contentClass,a=void 0===i?"":i,o=e.wrapperStyle,s=e.contentStyle,l=e.wrapperProps,c=void 0===l?{}:l,u=e.contentProps,f=void 0===u?{}:u,d=(0,v.useContext)(Tee),h=d.init,p=d.cleanupWindowEvents,m=(0,v.useRef)(null),g=(0,v.useRef)(null);return(0,v.useEffect)((function(){var e=m.current,t=g.current;return null!==e&&null!==t&&h&&(null==h||h(e,t)),function(){null==p||p()}}),[]),v.createElement("div",H9({},c,{ref:m,className:"".concat(K9," ").concat(See," ").concat(r),style:o}),v.createElement("div",H9({},f,{ref:g,className:"".concat(Z9," ").concat(Cee," ").concat(a),style:s}),t))};const Ree=e=>{const t={backgroundColor:"white",borderWidth:"1px",borderColor:"lightgray",borderRadius:"4px",fontSize:"30px",width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center",color:"#445979"},n={position:"absolute",left:5,zIndex:1},{initial:r={}}=e,{scale:i=1,dx:a=0,dy:o=0}=null!=r?r:{};return v.createElement("div",{className:"pan-cursor",style:{border:"1px solid lightgray",position:"relative"}},v.createElement(Mee,{minScale:e.scale_limits.min,maxScale:e.scale_limits.max,limitToBounds:e.scale_limits.bound,initialScale:i,initialPositionX:a,initialPositionY:o,wheel:{smoothStep:.005}},(r=>{let{zoomIn:i,zoomOut:a,resetTransform:o}=r;return v.createElement(v.Fragment,null,v.createElement(Oee,null,v.createElement("div",{style:{height:e.height?`${e.height}px`:"auto",width:e.width?`${e.width}px`:"auto",position:"relative"}},e.children)),v.createElement("div",{style:{top:5,...n}},v.createElement("button",{style:t,onClick:()=>i()},"+")),v.createElement("div",{style:{top:40,...n}},v.createElement("button",{style:t,onClick:()=>a()},"-")),v.createElement("div",{style:{top:75,...n}},v.createElement("button",{style:t,onClick:()=>o()},"")))})))};Ree.propTypes={height:le().number,width:le().number,scale_limits:le().shape({min:le().number,max:le().number,bound:le().bool}),initial:le().shape({scale:le().number,dx:le().number,dy:le().number})};const Nee=Ree;function Lee(){return Lee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lee.apply(null,arguments)}const Dee=e=>{let t,{encoded_image:n,zoom_pan:r=null,link:i=null,...a}=e;return t=i?v.createElement("a",{href:i},v.createElement("img",Lee({src:n},a))):v.createElement("img",Lee({src:n},a)),r?v.createElement(Nee,r,t):(""===a.children&&(a.children=null),v.createElement("div",{className:"rawImage"},t))},Pee=e=>{const t=e.left_plot,n=e.right_plot,r=e.help_text;return v.createElement("div",{className:"col summary_border_paired"},v.createElement("div",{className:"row"},v.createElement("div",{className:"col"},v.createElement(qn,r))),v.createElement("div",{className:"row"},v.createElement("div",{className:"col"},v.createElement(Kn,t)),v.createElement("div",{className:"col"},v.createElement(Kn,n))))},Iee=e=>{const{help_text:t,plot:n}=e;return v.createElement("div",{className:"col summary_border_paired"},v.createElement("div",{className:"row"},v.createElement("div",{className:"col"},v.createElement(qn,t))),v.createElement("div",{className:"row"},v.createElement("div",{className:"col"},v.createElement(Kn,n))))};function Fee(){return Fee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fee.apply(null,arguments)}class zee extends v.Component{constructor(e){super(e),this.state={active_tsne:0}}setLayout(e){e.layout.width=901.016}render(){const{left_plots:e,middle_plots:t,right_plots:n,plot_help:r}=this.props,{active_tsne:i}=this.state,a=this.state.active_tsne,{plot_json:o}=e.tsnes[i],{plot_json:s}=t.tsnes[i],{plot_json:l}=n.tsnes[i],{tsnes:c}=n,{name:u}=c[a];return v.createElement("div",{className:"col summary_border_paired"},v.createElement("div",{className:"row h2_header"},v.createElement("div",{className:"col"},v.createElement(qn,Fee({},r,{style:{marginBottom:0}})))),v.createElement("div",{className:"row",style:{marginBottom:"1rem",marginTop:"-1.5rem"}},v.createElement("div",{className:"col",style:{textAlign:"right"}},v.createElement("span",null,v.createElement("span",null,"Coordinates: "),v.createElement(Ea,{id:"dropdown-item-button",title:u,as:"span"},c.map(((e,t)=>v.createElement(xa.Item,{as:"button",key:t,onClick:()=>this.setState({active_tsne:t})},e.name))))))),v.createElement("div",{className:"row"},v.createElement("div",{className:"col",id:"left_plot"},v.createElement(re,Fee({height:"auto"},o))),v.createElement("div",{className:"col",id:"middle_plot"},v.createElement(re,Fee({height:"auto"},s))),v.createElement("div",{className:"col",id:"right_plot"},v.createElement(re,Fee({height:"auto"},l)))))}}class jee extends v.Component{render(){const{run_info_table:e,paired_metrics_table:t,targeted_metrics:n}=this.props;return v.createElement("div",null,v.createElement(e6,{pipelineName:`${this.props.sample.command}  ${this.props.sample.subcommand}`}),v.createElement(n6,{namescription:Z8(this.props)}),_o(T,this.props.alarms,"alarms"),v.createElement("div",{className:"container"},v.createElement("div",{className:"row"},v.createElement("div",{className:"col"},v.createElement("div",{className:"summary_card",id:"paired_metrics_table"},v.createElement(qn,t.help),v.createElement(tr,t))),v.createElement("div",{className:"col"},v.createElement("div",{className:"summary_card",id:"run_info_table"},v.createElement(Ma,{title:"Sample"}),v.createElement(Vn,e)),_o(N8,n,"targeted_metrics"))),v.createElement("div",{className:"row"},_o(Pee,this.props.cell_calling_comparison,"cell_calling_comparison")),v.createElement("div",{className:"row"},_o(Iee,this.props.spatial_umi_comparison,"spatial_umi_comparison")),v.createElement("div",{className:"row"},_o(Pee,this.props.read_enrichment,"read_enrichment")),v.createElement("div",{className:"row"},_o(Pee,this.props.umi_enrichment,"umi_enrichment")),v.createElement("div",{className:"row"},_o(zee,this.props.tsne_selector,"tsne_selector"))))}}var Bee,Uee,$ee=function(){return $ee=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},$ee.apply(this,arguments)};!function(e){e.Cells="Cells",e.Library="Library",e.ExperimentalDesign="Experimental Design"}(Uee||(Uee={}));var qee;(Bee={})[Uee.Cells]="sample_websummary",Bee[Uee.Library]="library_websummary",Bee[Uee.ExperimentalDesign]="experimental_design";!function(e){e.GEX="Gene Expression",e.VDJ_T="VDJ-T",e.VDJ_T_GD="VDJ-T (G/D)",e.VDJ_B="VDJ-B",e.AB="Antibody",e.AG="Antigen",e.CRISPR="CRISPR",e.CMO="Multiplexing",e.Hashtag="Hashtag Multiplexing",e.Custom="Custom",e.Annotate="Cell Annotation"}(qee||(qee={}));var Hee=[qee.GEX,qee.VDJ_T,qee.VDJ_B,qee.VDJ_T_GD,qee.AB,qee.AG,qee.CRISPR,qee.CMO,qee.Hashtag,qee.Custom,qee.Annotate],Vee={gex_tab:qee.GEX,vdj_t_tab:qee.VDJ_T,vdj_b_tab:qee.VDJ_B,vdj_t_gd_tab:qee.VDJ_T_GD,antibody_tab:qee.AB,antigen_tab:qee.AG,crispr_tab:qee.CRISPR,cmo_tab:qee.CMO,hashtag_tab:qee.Hashtag,custom_feature_tab:qee.Custom,cell_annotation_tab:qee.Annotate},Wee=Object.keys(Vee).reduce((function(e,t){var n;return $ee($ee({},e),((n={})[Vee[t]]=t.toLowerCase(),n))}),{}),Gee=function(){return Gee=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Gee.apply(this,arguments)},Yee=[{msg:"Fraction of cell barcode bases with Q-score >= 30, excluding very low quality/no-call (Q <= 2) bases from the denominator. The cell barcode is the combination of the GEM barcode and probe barcode.",isRtl:!0},{msg:"Fraction of cell barcode bases with Q-score >= 30, excluding very low quality/no-call (Q <= 2) bases from the denominator.",isRtl:!1}],Xee=[{msg:"Fraction of probe read bases (R2) with Q-score >= 30, excluding very low quality/no-call (Q <= 2) bases from the denominator.",isRtl:!0},{msg:"Fraction of RNA Read bases with Q-score >= 30, excluding very low quality/no-call (Q <= 2) bases from the denominator.",isRtl:!1}],Kee=[{msg:"Fraction of reads with barcodes that are present in the whitelist after barcode correction. The cell barcode is the combination of the GEM barcode and probe barcode and both parts must be valid following correction.",isRtl:!0},{msg:"Fraction of reads with barcodes that are present in the whitelist after barcode correction.",isRtl:!1}],Zee=[{key:"fastq_id"},{key:"number_of_reads"},{key:"mean_reads_per_cell_associated_partition"},{key:"sequencing_saturation"},{key:"valid_barcodes",help:Kee},{key:"valid_umis"},{key:"valid_gem_barcodes"},{key:"valid_probe_barcodes"},{key:"q30_barcode",help:Yee},{key:"q30_gem_barcode"},{key:"q30_probe_barcode"},{key:"q30_umi"},{key:"q30_read1",help:Xee},{key:"q30_read2"}],Jee=[{msg:"The fraction of valid-barcode, valid-UMI, confidently-mapped-to-the-whole-probe-set reads with cell-associated barcodes.",isRtl:!0},{msg:"The fraction of valid-barcode, valid-UMI, confidently-mapped-to-transcriptome reads with cell-associated barcodes.",isRtl:!1}],Qee={VDJ:{sequencing_metrics_table:{title:"VDJ Sequencing Quality",help:"Metrics per sequencing run.",entries:[{key:"fastq_id"},{key:"number_of_reads"},{key:"vdj_total_raw_read_pairs_per_filtered_bc"},{key:"vdj_assemblable_read_pairs_per_filtered_bc"},{key:"vdj_good_bc_frac"},{key:"q30_barcode",help:Yee},{key:"q30_gem_barcode"},{key:"q30_probe_barcode"},{key:"q30_umi"},{key:"q30_read1",help:Xee},{key:"q30_read2"}]},vdj_library_metrics_per_ocm_barcode:{title:"Metrics per OCM Barcode ID",entries:[{key:"ocm_barcode_id"},{key:"sample_id"},{key:"vdj_cells_per_tag"}],orderBy:["ocm_barcode_id","sample_id"]},vdj_library_metrics_per_hashtag:{title:"Metrics per Hashtag ID",entries:[{key:"hashtag_id"},{key:"sample_id"},{key:"vdj_cells_per_tag"}],orderBy:["hashtag_id","sample_id"]}}};const ete={GEX:{heroMetrics:{title:"Cell Calling Quality",help:"Summary statistics about cell-associated barcodes.",hero:!0,entries:[{key:"cell_associated_partitions"},{key:"reads_in_cell_associated_partitions",help:Jee},{key:"fraction_cells_passing_high_occupancy_filtering"}]},mapping_metrics_table:{title:"Mapping Quality",entries:[{key:"reads_mapped_to_probe_set"},{key:"reads_confidently_mapped_to_probe_set"},{key:"reads_confidently_mapped_to_filtered_probe_set"},{key:"reads_half_mapped_to_probe_set"},{key:"reads_split_mapped_to_probe_set"},{key:"confidently_mapped_to_transcriptome"},{key:"mapped_to_genome"},{key:"confidently_mapped_to_genome"},{key:"confidently_mapped_to_exonic_regions"},{key:"confidently_mapped_to_intronic_regions"},{key:"confidently_mapped_to_intergenic_regions"},{key:"confidently_mapped_antisense"}]},sequencing_metrics_table:{title:"Sequencing Quality",help:"Metrics per sequencing run.",entries:[{key:"fastq_id"},{key:"number_of_reads"},{key:"mean_reads_per_cell_associated_partition"},{key:"sequencing_saturation"},{key:"valid_barcodes",help:Kee},{key:"valid_umis"},{key:"valid_gem_barcodes"},{key:"valid_probe_barcodes"},{key:"q30_barcode",help:Yee},{key:"q30_gem_barcode"},{key:"q30_probe_barcode"},{key:"q30_umi"},{key:"q30_read1",help:Xee},{key:"q30_read2"}]},rtl_probe_barcode_metrics:{title:"Metrics per probe barcode",entries:[{key:"probe_barcode_id"},{key:"sample_id"},{key:"umi_per_probe_barcode"},{key:"cells_per_probe_barcode"}],orderBy:["sample_id","probe_barcode_id"]},ocm_per_overhang_metrics:{title:"Metrics per OCM Barcode",entries:[{key:"ocm_barcode_id"},{key:"sample_id"},{key:"umi_per_ocm_barcode"},{key:"cells_per_ocm_barcode"}],orderBy:["sample_id","ocm_barcode_id"]},gdna_metrics:{title:"UMIs from Genomic DNA",entries:[{key:"estimated_gdna_content"},{key:"estimated_gdna_unspliced_threshold"}]}},AB:{heroMetrics:{title:"Antibody Expression",help:"Summary statistics about cell-associated barcodes.",hero:!0,entries:[{key:"cell_associated_partitions"},{key:"fraction_antibody_reads"},{key:"reads_in_cell_associated_partitions"},{key:"fraction_antibody_reads_usable"},{key:"fraction_reads_in_aggregate_barcodes"}]},sequencing_metrics_table:{title:"Antibody Sequencing Quality",help:"Metrics per sequencing run.",entries:Zee},rtl_probe_barcode_metrics:{title:"Metrics per probe barcode",entries:[{key:"probe_barcode_id"},{key:"sample_id"},{key:"umi_per_probe_barcode"},{key:"cells_per_probe_barcode"}],orderBy:["sample_id","probe_barcode_id"]}},CRISPR:{heroMetrics:{title:"Cell Calling Quality",help:"Summary statistics about cell-associated barcodes.",hero:!0,entries:[{key:"cell_associated_partitions"},{key:"fraction_guide_reads"},{key:"reads_in_cell_associated_partitions"},{key:"mean_reads_per_cell_associated_partition"},{key:"fraction_guide_reads_usable"},{key:"fraction_reads_with_putative_protospacer"},{key:"fraction_protospacer_not_recognized"}]},sequencing_metrics_table:{title:"CRISPR Sequencing Quality",help:"Metrics per sequencing run.",entries:Zee},rtl_probe_barcode_metrics:{title:"Metrics per probe barcode",entries:[{key:"probe_barcode_id"},{key:"sample_id"},{key:"umi_per_probe_barcode"},{key:"cells_per_probe_barcode"}],orderBy:["sample_id","probe_barcode_id"]}},VDJ_T:Gee({vdj_enrichment_metrics:{title:"Enrichment",entries:[{key:"multi_vdj_recombinome_mapped_reads_frac"},{key:"TRA_vdj_recombinome_mapped_reads_frac"},{key:"TRB_vdj_recombinome_mapped_reads_frac"}]},cell_calling_table:{title:"Cell Calling Quality",help:"Summary statistics about cell-associated barcodes.",hero:!0,entries:[{key:"vdj_filtered_bcs",category:"Library"},{key:"multi_vdj_assembly_contig_pair_productive_full_len_bc_frac",category:"Library"},{key:"TRA_TRB_vdj_assembly_contig_pair_productive_full_len_bc_frac",category:"Library"},{key:"TRA_vdj_assembly_prod_cdr_bc_frac",category:"Library"},{key:"TRB_vdj_assembly_prod_cdr_bc_frac",category:"Library"},{key:"vdj_filtered_bcs_cum_frac",category:"Library"}]}},Qee.VDJ),VDJ_T_GD:Gee({vdj_enrichment_metrics:{title:"Enrichment",entries:[{key:"multi_vdj_recombinome_mapped_reads_frac"},{key:"TRG_vdj_recombinome_mapped_reads_frac"},{key:"TRD_vdj_recombinome_mapped_reads_frac"}]},cell_calling_table:{title:"Cell Calling Quality",help:"Summary statistics about cell-associated barcodes.",hero:!0,entries:[{key:"vdj_filtered_bcs",category:"Library"},{key:"multi_vdj_assembly_contig_pair_productive_full_len_bc_frac",category:"Library"},{key:"TRG_TRD_vdj_assembly_contig_pair_productive_full_len_bc_frac",category:"Library"},{key:"TRG_vdj_assembly_prod_cdr_bc_frac",category:"Library"},{key:"TRD_vdj_assembly_prod_cdr_bc_frac",category:"Library"},{key:"vdj_filtered_bcs_cum_frac",category:"Library"}]}},Qee.VDJ),VDJ_B:Gee({vdj_enrichment_metrics:{title:"Enrichment",entries:[{key:"multi_vdj_recombinome_mapped_reads_frac"},{key:"IGH_vdj_recombinome_mapped_reads_frac"},{key:"IGK_vdj_recombinome_mapped_reads_frac"},{key:"IGL_vdj_recombinome_mapped_reads_frac"}]},cell_calling_table:{title:"Cell Calling Quality",help:"Summary statistics about cell-associated barcodes.",hero:!0,entries:[{key:"vdj_filtered_bcs",category:"Library"},{key:"multi_vdj_assembly_contig_pair_productive_full_len_bc_frac",category:"Library"},{key:"IGK_IGH_vdj_assembly_contig_pair_productive_full_len_bc_frac",category:"Library"},{key:"IGH_vdj_assembly_prod_cdr_bc_frac",category:"Library"},{key:"IGK_vdj_assembly_prod_cdr_bc_frac",category:"Library"},{key:"IGL_vdj_assembly_prod_cdr_bc_frac",category:"Library"},{key:"vdj_filtered_bcs_cum_frac",category:"Library"}]}},Qee.VDJ),AG:{antigen_reads_table:{title:"Antigen Reads",entries:[{key:"fraction_antigen_reads"},{key:"reads_in_cell_associated_partitions"},{key:"fraction_antigen_reads_usable"},{key:"fraction_reads_in_aggregate_barcodes"}]},sequencing_metrics_table:{title:"Antigen Sequencing Quality",help:"Metrics per sequencing run.",entries:Zee}},CMO:{heroMetrics:{title:"Multiplexing Quality",hero:!0,entries:[{key:"cell_associated_partitions"},{key:"samples_assigned_at_least_one_singlet"},{key:"singlet_capture_ratio"},{key:"singlets_assigned_to_a_sample"},{key:"cell_associated_partitions_identified_as_multiplets"},{key:"cell_associated_partitions_not_assigned_any_tags"},{key:"median_cmo_umis_per_singlet"},{key:"fraction_cmo_reads"},{key:"reads_in_cell_associated_partitions"},{key:"fraction_cmo_reads_usable"},{key:"fraction_reads_from_multiplets"}]},multiplexing_cmo_metrics:{title:"Metrics per CMO",entries:[{key:"gem_well_cmo"},{key:"sample_id"},{key:"cmo_signal_to_background_ratio"},{key:"singlets_assigned_to_cmo"},{key:"cmo_reads_in_cell_associated_partitions"}]},sequencing_metrics_table:{title:"CMO Sequencing Quality",help:"Metrics per sequencing run.",entries:[{key:"fastq_id"},{key:"number_of_reads"},{key:"mean_reads_per_cell_associated_partition"},{key:"valid_barcodes",help:Kee},{key:"valid_umis"},{key:"q30_barcode",help:Yee},{key:"q30_umi"},{key:"q30_read1",help:Xee},{key:"q30_read2"}]}},Hashtag:{heroMetrics:{title:"Multiplexing Quality",hero:!0,entries:[{key:"cell_associated_partitions"},{key:"samples_assigned_at_least_one_singlet"},{key:"singlets_assigned_to_a_sample"},{key:"cell_associated_partitions_identified_as_multiplets"},{key:"cell_associated_partitions_not_assigned_any_tags"},{key:"median_hashtag_umis_per_singlet"},{key:"hashtag_singlet_capture_ratio"}]},multiplexing_hashtag_metrics:{title:"Metrics per Hashtag",entries:[{key:"gem_well_hashtag"},{key:"sample_id"},{key:"hashtag_reads_in_cell_associated_partitions"},{key:"singlets_assigned_to_hashtag"},{key:"hashtag_signal_to_background_ratio"}]}},Custom:{heroMetrics:{title:"Feature Expression",hero:!0,entries:[{key:"fraction_feature_reads"},{key:"reads_in_cell_associated_partitions"},{key:"fraction_feature_reads_usable"}]},sequencing_metrics_table:{title:"Sequencing Quality",help:"Metrics per sequencing run.",entries:Zee}}},tte="WARN",nte="ERROR",rte="INFO";function ite(e){if(!e||0===e.length)return null;const t=e.filter((e=>{let{level:t}=e;return(e=>e===tte)(t)})),n=e.filter((e=>{let{level:t}=e;return(e=>e===nte)(t)})),r=e.filter((e=>{let{level:t}=e;return(e=>e===rte)(t)}));return n.length>0?nte:t.length>0?tte:r.length>0?rte:tte}function ate(e){return U8()(e)}const ote=e=>function(t){return v.createElement(v.Fragment,null,v.createElement("div",{className:"summary_border"},v.createElement(Ma,t.title),v.createElement(e,t.inner)))},ste=ote(F4);lte=ote(F4),cte="half-plot";var lte,cte;ote(Yn),ote(Vn);const ute=ote(yo);var fte=n(56983),dte=n.n(fte),hte=function(e){if(!e)return[];var t=Hee.filter((function(t){var n=Wee[t];return!!e[n]}));return 0===t.length?[]:t},pte=function(e){var t=e.sample.command,n=e.sample.subcommand;return t?n?"".concat(t," ").concat(n," QC Report"):t:n},mte=function(e,t){var n=t.filter((function(t){return t.library_type===e})).filter((function(e){return!e.config.optional||gte(e.value)}));return dte()(n,(function(e,t){return e.key===t.key&&e.grouping_key===t.grouping_key}))},gte=function(e){return null!=e&&""!==e},vte=function(e,t){return void 0===t&&(t=0),gte(e)?e.toLocaleString("en-US",{minimumFractionDigits:t,maximumFractionDigits:t}):""},yte=function(e,t){void 0===t&&(t=0);var n=function(e){return void 0!==(null==e?void 0:e.numerator)}(e)?e.numerator/e.denominator:e,r=gte(n)?"".concat(function(e,t){var n=Math.pow(10,t||0);return Math.round(e*n)/n}(100*n,t),"%"):"";return r},bte=function(e,t){return void 0===t&&(t=0),gte(e)?vte(e,t):""},xte=function(e){switch(e.config.type){case"usize":return vte(e.value);case"FloatAsInt":return bte(e.value);case"f64":return bte(e.value,1);case"Percent":return yte(e.value,1);case"CountAndPercent":return function(e){return e.value?"".concat(vte(e.value.numerator)," (").concat(yte(e.value.numerator/e.value.denominator,1),")"):""}(e);default:return function(e){return gte(e)?e:""}(e.value)}},_te=function(e,t){return e.map((function(e){return t.find((function(t){return(void 0===e.category||e.category===t.category)&&t.key===e.key}))})).filter(Boolean)},wte=function(e,t){return _te(e,t).some((function(e){return e.value}))},Ate=function(e){return Object.keys(e).some((function(t){var n,r;return(null===(r=null===(n=e[t])||void 0===n?void 0:n.alerts)||void 0===r?void 0:r.length)>0}))},kte="Sample ID",Ete="Run ID",Tte="Run Description",Mte="Pipeline Version",Ste=function(){return Ste=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ste.apply(this,arguments)},Cte=function(e){return v.createElement("header",{"data-test":"summary-header",className:"sample-header"},v.createElement("ul",null,v.createElement("li",{className:"sample-id"},v.createElement("p",{className:"title"},e.idKey),v.createElement("p",{className:"subtitle","data-test":"summary-header-sample-id"},e.id)),e.sampleIdKey&&v.createElement("li",{className:"sample-id"},v.createElement("p",{className:"title"},e.sampleIdKey),v.createElement("p",{className:"subtitle","data-test":"summary-header-sample-id"},e.sampleId)),e.description&&v.createElement("li",null,v.createElement("p",{className:"title"},e.descriptionKey),v.createElement("p",{className:"subtitle","data-test":"summary-header-sample-description"},e.description)),e.pipelineVersion&&v.createElement("li",null,v.createElement("p",{className:"title"},Mte),v.createElement("p",{className:"subtitle","data-test":"summary-header-pipeline-version"},e.pipelineVersion))))},Ote=function(e){return v.createElement("header",{"data-test":"summary-header",className:"sample-header per-sample-header"},e.description&&v.createElement("div",null,v.createElement("p",{className:"subtitle","data-test":"summary-header-sample-description"},e.description)))};const Rte=function(e){return"sample"===e.headerType?v.createElement(Ote,Ste({},e)):v.createElement(Cte,Ste({},e))};var Nte=function(e){return function(t){var n,r=t.title,i=t.alertType;if(!i)return v.createElement(v.Fragment,null,r);var a=((n={})[tte]=v.createElement(_,{key:"warning-icon"}),n[nte]=v.createElement(b,{key:"danger-icon"}),n[rte]=v.createElement(A,{key:"info-icon"}),n);return v.createElement("div",{className:e},r,a[i])}},Lte=Nte("tab-warning"),Dte=(Nte("nav-warning"),n(87946)),Pte=n.n(Dte);const Ite=Math.min,Fte=Math.max,zte=Math.round,jte=Math.floor,Bte=e=>({x:e,y:e}),Ute={left:"right",right:"left",bottom:"top",top:"bottom"},$te={start:"end",end:"start"};function qte(e,t,n){return Fte(e,Ite(t,n))}function Hte(e,t){return"function"==typeof e?e(t):e}function Vte(e){return e.split("-")[0]}function Wte(e){return e.split("-")[1]}function Gte(e){return"x"===e?"y":"x"}function Yte(e){return"y"===e?"height":"width"}function Xte(e){return["top","bottom"].includes(Vte(e))?"y":"x"}function Kte(e){return Gte(Xte(e))}function Zte(e){return e.replace(/start|end/g,(e=>$te[e]))}function Jte(e){return e.replace(/left|right|bottom|top/g,(e=>Ute[e]))}function Qte(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function ene(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function tne(e,t,n){let{reference:r,floating:i}=e;const a=Xte(t),o=Kte(t),s=Yte(o),l=Vte(t),c="y"===a,u=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[s]/2-i[s]/2;let h;switch(l){case"top":h={x:u,y:r.y-i.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(Wte(t)){case"start":h[o]-=d*(n&&c?-1:1);break;case"end":h[o]+=d*(n&&c?-1:1)}return h}async function nne(e,t){var n;void 0===t&&(t={});const{x:r,y:i,platform:a,rects:o,elements:s,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=Hte(t,e),p=Qte(h),m=s[d?"floating"===f?"reference":"floating":f],g=ene(await a.getClippingRect({element:null==(n=await(null==a.isElement?void 0:a.isElement(m)))||n?m:m.contextElement||await(null==a.getDocumentElement?void 0:a.getDocumentElement(s.floating)),boundary:c,rootBoundary:u,strategy:l})),v="floating"===f?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,y=await(null==a.getOffsetParent?void 0:a.getOffsetParent(s.floating)),b=await(null==a.isElement?void 0:a.isElement(y))&&await(null==a.getScale?void 0:a.getScale(y))||{x:1,y:1},x=ene(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:v,offsetParent:y,strategy:l}):v);return{top:(g.top-x.top+p.top)/b.y,bottom:(x.bottom-g.bottom+p.bottom)/b.y,left:(g.left-x.left+p.left)/b.x,right:(x.right-g.right+p.right)/b.x}}function rne(){return"undefined"!=typeof window}function ine(e){return sne(e)?(e.nodeName||"").toLowerCase():"#document"}function ane(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function one(e){var t;return null==(t=(sne(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function sne(e){return!!rne()&&(e instanceof Node||e instanceof ane(e).Node)}function lne(e){return!!rne()&&(e instanceof Element||e instanceof ane(e).Element)}function cne(e){return!!rne()&&(e instanceof HTMLElement||e instanceof ane(e).HTMLElement)}function une(e){return!(!rne()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof ane(e).ShadowRoot)}function fne(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=vne(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function dne(e){return["table","td","th"].includes(ine(e))}function hne(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(e){return!1}}))}function pne(e){const t=mne(),n=lne(e)?vne(e):e;return"none"!==n.transform||"none"!==n.perspective||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function mne(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function gne(e){return["html","body","#document"].includes(ine(e))}function vne(e){return ane(e).getComputedStyle(e)}function yne(e){return lne(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function bne(e){if("html"===ine(e))return e;const t=e.assignedSlot||e.parentNode||une(e)&&e.host||one(e);return une(t)?t.host:t}function xne(e){const t=bne(e);return gne(t)?e.ownerDocument?e.ownerDocument.body:e.body:cne(t)&&fne(t)?t:xne(t)}function _ne(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const i=xne(e),a=i===(null==(r=e.ownerDocument)?void 0:r.body),o=ane(i);if(a){const e=wne(o);return t.concat(o,o.visualViewport||[],fne(i)?i:[],e&&n?_ne(e):[])}return t.concat(i,_ne(i,[],n))}function wne(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Ane(e){const t=vne(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=cne(e),a=i?e.offsetWidth:n,o=i?e.offsetHeight:r,s=zte(n)!==a||zte(r)!==o;return s&&(n=a,r=o),{width:n,height:r,$:s}}function kne(e){return lne(e)?e:e.contextElement}function Ene(e){const t=kne(e);if(!cne(t))return Bte(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:a}=Ane(t);let o=(a?zte(n.width):n.width)/r,s=(a?zte(n.height):n.height)/i;return o&&Number.isFinite(o)||(o=1),s&&Number.isFinite(s)||(s=1),{x:o,y:s}}const Tne=Bte(0);function Mne(e){const t=ane(e);return mne()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:Tne}function Sne(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const i=e.getBoundingClientRect(),a=kne(e);let o=Bte(1);t&&(r?lne(r)&&(o=Ene(r)):o=Ene(e));const s=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==ane(e))&&t}(a,n,r)?Mne(a):Bte(0);let l=(i.left+s.x)/o.x,c=(i.top+s.y)/o.y,u=i.width/o.x,f=i.height/o.y;if(a){const e=ane(a),t=r&&lne(r)?ane(r):r;let n=e,i=wne(n);for(;i&&r&&t!==n;){const e=Ene(i),t=i.getBoundingClientRect(),r=vne(i),a=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,o=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,f*=e.y,l+=a,c+=o,n=ane(i),i=wne(n)}}return ene({width:u,height:f,x:l,y:c})}function Cne(e,t){const n=yne(e).scrollLeft;return t?t.left+n:Sne(one(e)).left+n}function One(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=ane(e),r=one(e),i=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,s=0,l=0;if(i){a=i.width,o=i.height;const e=mne();(!e||e&&"fixed"===t)&&(s=i.offsetLeft,l=i.offsetTop)}return{width:a,height:o,x:s,y:l}}(e,n);else if("document"===t)r=function(e){const t=one(e),n=yne(e),r=e.ownerDocument.body,i=Fte(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=Fte(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Cne(e);const s=-n.scrollTop;return"rtl"===vne(r).direction&&(o+=Fte(t.clientWidth,r.clientWidth)-i),{width:i,height:a,x:o,y:s}}(one(e));else if(lne(t))r=function(e,t){const n=Sne(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,a=cne(e)?Ene(e):Bte(1);return{width:e.clientWidth*a.x,height:e.clientHeight*a.y,x:i*a.x,y:r*a.y}}(t,n);else{const n=Mne(e);r={...t,x:t.x-n.x,y:t.y-n.y}}return ene(r)}function Rne(e,t){const n=bne(e);return!(n===t||!lne(n)||gne(n))&&("fixed"===vne(n).position||Rne(n,t))}function Nne(e,t,n){const r=cne(t),i=one(t),a="fixed"===n,o=Sne(e,!0,a,t);let s={scrollLeft:0,scrollTop:0};const l=Bte(0);if(r||!r&&!a)if(("body"!==ine(t)||fne(i))&&(s=yne(t)),r){const e=Sne(t,!0,a,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&(l.x=Cne(i));let c=0,u=0;if(i&&!r&&!a){const e=i.getBoundingClientRect();u=e.top+s.scrollTop,c=e.left+s.scrollLeft-Cne(i,e)}return{x:o.left+s.scrollLeft-l.x-c,y:o.top+s.scrollTop-l.y-u,width:o.width,height:o.height}}function Lne(e){return"static"===vne(e).position}function Dne(e,t){if(!cne(e)||"fixed"===vne(e).position)return null;if(t)return t(e);let n=e.offsetParent;return one(e)===n&&(n=n.ownerDocument.body),n}function Pne(e,t){const n=ane(e);if(hne(e))return n;if(!cne(e)){let t=bne(e);for(;t&&!gne(t);){if(lne(t)&&!Lne(t))return t;t=bne(t)}return n}let r=Dne(e,t);for(;r&&dne(r)&&Lne(r);)r=Dne(r,t);return r&&gne(r)&&Lne(r)&&!pne(r)?n:r||function(e){let t=bne(e);for(;cne(t)&&!gne(t);){if(pne(t))return t;if(hne(t))return null;t=bne(t)}return null}(e)||n}const Ine={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const a="fixed"===i,o=one(r),s=!!t&&hne(t.floating);if(r===o||s&&a)return n;let l={scrollLeft:0,scrollTop:0},c=Bte(1);const u=Bte(0),f=cne(r);if((f||!f&&!a)&&(("body"!==ine(r)||fne(o))&&(l=yne(r)),cne(r))){const e=Sne(r);c=Ene(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x,y:n.y*c.y-l.scrollTop*c.y+u.y}},getDocumentElement:one,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const a="clippingAncestors"===n?hne(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=_ne(e,[],!1).filter((e=>lne(e)&&"body"!==ine(e))),i=null;const a="fixed"===vne(e).position;let o=a?bne(e):e;for(;lne(o)&&!gne(o);){const t=vne(o),n=pne(o);n||"fixed"!==t.position||(i=null),(a?!n&&!i:!n&&"static"===t.position&&i&&["absolute","fixed"].includes(i.position)||fne(o)&&!n&&Rne(e,o))?r=r.filter((e=>e!==o)):i=t,o=bne(o)}return t.set(e,r),r}(t,this._c):[].concat(n),o=[...a,r],s=o[0],l=o.reduce(((e,n)=>{const r=One(t,n,i);return e.top=Fte(r.top,e.top),e.right=Ite(r.right,e.right),e.bottom=Ite(r.bottom,e.bottom),e.left=Fte(r.left,e.left),e}),One(t,s,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:Pne,getElementRects:async function(e){const t=this.getOffsetParent||Pne,n=this.getDimensions,r=await n(e.floating);return{reference:Nne(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=Ane(e);return{width:t,height:n}},getScale:Ene,isElement:lne,isRTL:function(e){return"rtl"===vne(e).direction}};function Fne(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o="function"==typeof ResizeObserver,layoutShift:s="function"==typeof IntersectionObserver,animationFrame:l=!1}=r,c=kne(e),u=i||a?[...c?_ne(c):[],..._ne(t)]:[];u.forEach((e=>{i&&e.addEventListener("scroll",n,{passive:!0}),a&&e.addEventListener("resize",n)}));const f=c&&s?function(e,t){let n,r=null;const i=one(e);function a(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function o(s,l){void 0===s&&(s=!1),void 0===l&&(l=1),a();const{left:c,top:u,width:f,height:d}=e.getBoundingClientRect();if(s||t(),!f||!d)return;const h={rootMargin:-jte(u)+"px "+-jte(i.clientWidth-(c+f))+"px "+-jte(i.clientHeight-(u+d))+"px "+-jte(c)+"px",threshold:Fte(0,Ite(1,l))||1};let p=!0;function m(e){const t=e[0].intersectionRatio;if(t!==l){if(!p)return o();t?o(!1,t):n=setTimeout((()=>{o(!1,1e-7)}),1e3)}p=!1}try{r=new IntersectionObserver(m,{...h,root:i.ownerDocument})}catch(e){r=new IntersectionObserver(m,h)}r.observe(e)}(!0),a}(c,n):null;let d,h=-1,p=null;o&&(p=new ResizeObserver((e=>{let[r]=e;r&&r.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame((()=>{var e;null==(e=p)||e.observe(t)}))),n()})),c&&!l&&p.observe(c),p.observe(t));let m=l?Sne(e):null;return l&&function t(){const r=Sne(e);!m||r.x===m.x&&r.y===m.y&&r.width===m.width&&r.height===m.height||n();m=r,d=requestAnimationFrame(t)}(),n(),()=>{var e;u.forEach((e=>{i&&e.removeEventListener("scroll",n),a&&e.removeEventListener("resize",n)})),null==f||f(),null==(e=p)||e.disconnect(),p=null,l&&cancelAnimationFrame(d)}}const zne=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:a,placement:o,middlewareData:s}=t,l=await async function(e,t){const{placement:n,platform:r,elements:i}=e,a=await(null==r.isRTL?void 0:r.isRTL(i.floating)),o=Vte(n),s=Wte(n),l="y"===Xte(n),c=["left","top"].includes(o)?-1:1,u=a&&l?-1:1,f=Hte(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}="number"==typeof f?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return s&&"number"==typeof p&&(h="end"===s?-1*p:p),l?{x:h*u,y:d*c}:{x:d*c,y:h*u}}(t,e);return o===(null==(n=s.offset)?void 0:n.placement)&&null!=(r=s.arrow)&&r.alignmentOffset?{}:{x:i+l.x,y:a+l.y,data:{...l,placement:o}}}}},jne=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:s={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=Hte(e,t),c={x:n,y:r},u=await nne(t,l),f=Xte(Vte(i)),d=Gte(f);let h=c[d],p=c[f];if(a){const e="y"===d?"bottom":"right";h=qte(h+u["y"===d?"top":"left"],h,h-u[e])}if(o){const e="y"===f?"bottom":"right";p=qte(p+u["y"===f?"top":"left"],p,p-u[e])}const m=s.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[d]:a,[f]:o}}}}}},Bne=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:a,rects:o,initialPlacement:s,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Hte(e,t);if(null!=(n=a.arrow)&&n.alignmentOffset)return{};const v=Vte(i),y=Xte(s),b=Vte(s)===s,x=await(null==l.isRTL?void 0:l.isRTL(c.floating)),_=d||(b||!m?[Jte(s)]:function(e){const t=Jte(e);return[Zte(e),t,Zte(t)]}(s)),w="none"!==p;!d&&w&&_.push(...function(e,t,n,r){const i=Wte(e);let a=function(e,t,n){const r=["left","right"],i=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?a:o;default:return[]}}(Vte(e),"start"===n,r);return i&&(a=a.map((e=>e+"-"+i)),t&&(a=a.concat(a.map(Zte)))),a}(s,m,p,x));const A=[s,..._],k=await nne(t,g),E=[];let T=(null==(r=a.flip)?void 0:r.overflows)||[];if(u&&E.push(k[v]),f){const e=function(e,t,n){void 0===n&&(n=!1);const r=Wte(e),i=Kte(e),a=Yte(i);let o="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=Jte(o)),[o,Jte(o)]}(i,o,x);E.push(k[e[0]],k[e[1]])}if(T=[...T,{placement:i,overflows:E}],!E.every((e=>e<=0))){var M,S;const e=((null==(M=a.flip)?void 0:M.index)||0)+1,t=A[e];if(t)return{data:{index:e,overflows:T},reset:{placement:t}};let n=null==(S=T.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:S.placement;if(!n)switch(h){case"bestFit":{var C;const e=null==(C=T.filter((e=>{if(w){const t=Xte(e.placement);return t===y||"y"===t}return!0})).map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:C[0];e&&(n=e);break}case"initialPlacement":n=s}if(i!==n)return{reset:{placement:n}}}return{}}}},Une=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:a,platform:o,elements:s,middlewareData:l}=t,{element:c,padding:u=0}=Hte(e,t)||{};if(null==c)return{};const f=Qte(u),d={x:n,y:r},h=Kte(i),p=Yte(h),m=await o.getDimensions(c),g="y"===h,v=g?"top":"left",y=g?"bottom":"right",b=g?"clientHeight":"clientWidth",x=a.reference[p]+a.reference[h]-d[h]-a.floating[p],_=d[h]-a.reference[h],w=await(null==o.getOffsetParent?void 0:o.getOffsetParent(c));let A=w?w[b]:0;A&&await(null==o.isElement?void 0:o.isElement(w))||(A=s.floating[b]||a.floating[p]);const k=x/2-_/2,E=A/2-m[p]/2-1,T=Ite(f[v],E),M=Ite(f[y],E),S=T,C=A-m[p]-M,O=A/2-m[p]/2+k,R=qte(S,O,C),N=!l.arrow&&null!=Wte(i)&&O!==R&&a.reference[p]/2-(O<S?T:M)-m[p]/2<0,L=N?O<S?O-S:O-C:0;return{[h]:d[h]+L,data:{[h]:R,centerOffset:O-R-L,...N&&{alignmentOffset:L}},reset:N}}}),$ne=(e,t,n)=>{const r=new Map,i={platform:Ine,...n},a={...i.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:o}=n,s=a.filter(Boolean),l=await(null==o.isRTL?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:f}=tne(c,r,l),d=r,h={},p=0;for(let n=0;n<s.length;n++){const{name:a,fn:m}=s[n],{x:g,y:v,data:y,reset:b}=await m({x:u,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:c,platform:o,elements:{reference:e,floating:t}});u=null!=g?g:u,f=null!=v?v:f,h={...h,[a]:{...h[a],...y}},b&&p<=50&&(p++,"object"==typeof b&&(b.placement&&(d=b.placement),b.rects&&(c=!0===b.rects?await o.getElementRects({reference:e,floating:t,strategy:i}):b.rects),({x:u,y:f}=tne(c,d,l))),n=-1)}return{x:u,y:f,placement:d,strategy:i,middlewareData:h}})(e,t,{...i,platform:a})},qne="react-tooltip-core-styles",Hne="react-tooltip-base-styles",Vne={core:!1,base:!1};function Wne({css:e,id:t=Hne,type:n="base",ref:r}){var i,a;if(!e||"undefined"==typeof document||Vne[n])return;if("core"===n&&"undefined"!=typeof process&&(null===(i=null===process||void 0===process?void 0:process.env)||void 0===i?void 0:i.REACT_TOOLTIP_DISABLE_CORE_STYLES))return;if("base"!==n&&"undefined"!=typeof process&&(null===(a=null===process||void 0===process?void 0:process.env)||void 0===a?void 0:a.REACT_TOOLTIP_DISABLE_BASE_STYLES))return;"core"===n&&(t=qne),r||(r={});const{insertAt:o}=r;if(document.getElementById(t))return;const s=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.id=t,l.type="text/css","top"===o&&s.firstChild?s.insertBefore(l,s.firstChild):s.appendChild(l),l.styleSheet?l.styleSheet.cssText=e:l.appendChild(document.createTextNode(e)),Vne[n]=!0}const Gne=async({elementReference:e=null,tooltipReference:t=null,tooltipArrowReference:n=null,place:r="top",offset:i=10,strategy:a="absolute",middlewares:o=[zne(Number(i)),Bne({fallbackAxisSideDirection:"start"}),jne({padding:5})],border:s})=>{if(!e)return{tooltipStyles:{},tooltipArrowStyles:{},place:r};if(null===t)return{tooltipStyles:{},tooltipArrowStyles:{},place:r};const l=o;return n?(l.push(Une({element:n,padding:5})),$ne(e,t,{placement:r,strategy:a,middleware:l}).then((({x:e,y:t,placement:n,middlewareData:r})=>{var i,a;const o={left:`${e}px`,top:`${t}px`,border:s},{x:l,y:c}=null!==(i=r.arrow)&&void 0!==i?i:{x:0,y:0},u=null!==(a={top:"bottom",right:"left",bottom:"top",left:"right"}[n.split("-")[0]])&&void 0!==a?a:"bottom",f=s&&{borderBottom:s,borderRight:s};let d=0;if(s){const e=`${s}`.match(/(\d+)px/);d=(null==e?void 0:e[1])?Number(e[1]):1}return{tooltipStyles:o,tooltipArrowStyles:{left:null!=l?`${l}px`:"",top:null!=c?`${c}px`:"",right:"",bottom:"",...f,[u]:`-${4+d}px`},place:n}}))):$ne(e,t,{placement:"bottom",strategy:a,middleware:l}).then((({x:e,y:t,placement:n})=>({tooltipStyles:{left:`${e}px`,top:`${t}px`},tooltipArrowStyles:{},place:n})))},Yne=(e,t)=>!("CSS"in window&&"supports"in window.CSS)||window.CSS.supports(e,t),Xne=(e,t,n)=>{let r=null;const i=function(...i){const a=()=>{r=null,n||e.apply(this,i)};n&&!r&&(e.apply(this,i),r=setTimeout(a,t)),n||(r&&clearTimeout(r),r=setTimeout(a,t))};return i.cancel=()=>{r&&(clearTimeout(r),r=null)},i},Kne=e=>null!==e&&!Array.isArray(e)&&"object"==typeof e,Zne=(e,t)=>{if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every(((e,n)=>Zne(e,t[n])));if(Array.isArray(e)!==Array.isArray(t))return!1;if(!Kne(e)||!Kne(t))return e===t;const n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every((n=>Zne(e[n],t[n])))},Jne=e=>{if(!(e instanceof HTMLElement||e instanceof SVGElement))return!1;const t=getComputedStyle(e);return["overflow","overflow-x","overflow-y"].some((e=>{const n=t.getPropertyValue(e);return"auto"===n||"scroll"===n}))},Qne=e=>{if(!e)return null;let t=e.parentElement;for(;t;){if(Jne(t))return t;t=t.parentElement}return document.scrollingElement||document.documentElement},ere="undefined"!=typeof window?v.useLayoutEffect:v.useEffect,tre=e=>{e.current&&(clearTimeout(e.current),e.current=null)},nre="DEFAULT_TOOLTIP_ID",rre={anchorRefs:new Set,activeAnchor:{current:null},attach:()=>{},detach:()=>{},setActiveAnchor:()=>{}},ire=(0,v.createContext)({getTooltipData:()=>rre});function are(e=nre){return(0,v.useContext)(ire).getTooltipData(e)}var ore={tooltip:"core-styles-module_tooltip__3vRRp",fixed:"core-styles-module_fixed__pcSol",arrow:"core-styles-module_arrow__cvMwQ",noArrow:"core-styles-module_noArrow__xock6",clickable:"core-styles-module_clickable__ZuTTB",show:"core-styles-module_show__Nt9eE",closing:"core-styles-module_closing__sGnxF"},sre={tooltip:"styles-module_tooltip__mnnfp",arrow:"styles-module_arrow__K0L3T",dark:"styles-module_dark__xNqje",light:"styles-module_light__Z6W-X",success:"styles-module_success__A2AKt",warning:"styles-module_warning__SCK0X",error:"styles-module_error__JvumD",info:"styles-module_info__BWdHW"};const lre=({forwardRef:e,id:t,className:n,classNameArrow:r,variant:i="dark",anchorId:a,anchorSelect:o,place:s="top",offset:l=10,events:c=["hover"],openOnClick:u=!1,positionStrategy:f="absolute",middlewares:d,wrapper:h,delayShow:p=0,delayHide:m=0,float:g=!1,hidden:y=!1,noArrow:b=!1,clickable:x=!1,closeOnEsc:_=!1,closeOnScroll:w=!1,closeOnResize:A=!1,openEvents:k,closeEvents:E,globalCloseEvents:T,imperativeModeOnly:M,style:S,position:C,afterShow:O,afterHide:R,disableTooltip:N,content:L,contentWrapperRef:D,isOpen:P,defaultIsOpen:I=!1,setIsOpen:F,activeAnchor:z,setActiveAnchor:j,border:B,opacity:U,arrowColor:$,role:q="tooltip"})=>{var H;const V=(0,v.useRef)(null),W=(0,v.useRef)(null),G=(0,v.useRef)(null),Y=(0,v.useRef)(null),X=(0,v.useRef)(null),[K,Z]=(0,v.useState)({tooltipStyles:{},tooltipArrowStyles:{},place:s}),[J,Q]=(0,v.useState)(!1),[ee,te]=(0,v.useState)(!1),[ne,re]=(0,v.useState)(null),ie=(0,v.useRef)(!1),ae=(0,v.useRef)(null),{anchorRefs:oe,setActiveAnchor:se}=are(t),le=(0,v.useRef)(!1),[ce,ue]=(0,v.useState)([]),fe=(0,v.useRef)(!1),de=u||c.includes("click"),he=de||(null==k?void 0:k.click)||(null==k?void 0:k.dblclick)||(null==k?void 0:k.mousedown),pe=k?{...k}:{mouseover:!0,focus:!0,mouseenter:!1,click:!1,dblclick:!1,mousedown:!1};!k&&de&&Object.assign(pe,{mouseenter:!1,focus:!1,mouseover:!1,click:!0});const me=E?{...E}:{mouseout:!0,blur:!0,mouseleave:!1,click:!1,dblclick:!1,mouseup:!1};!E&&de&&Object.assign(me,{mouseleave:!1,blur:!1,mouseout:!1});const ge=T?{...T}:{escape:_||!1,scroll:w||!1,resize:A||!1,clickOutsideAnchor:he||!1};M&&(Object.assign(pe,{mouseenter:!1,focus:!1,click:!1,dblclick:!1,mousedown:!1}),Object.assign(me,{mouseleave:!1,blur:!1,click:!1,dblclick:!1,mouseup:!1}),Object.assign(ge,{escape:!1,scroll:!1,resize:!1,clickOutsideAnchor:!1})),ere((()=>(fe.current=!0,()=>{fe.current=!1})),[]);const ve=e=>{fe.current&&(e&&te(!0),setTimeout((()=>{fe.current&&(null==F||F(e),void 0===P&&Q(e))}),10))};(0,v.useEffect)((()=>{if(void 0===P)return()=>null;P&&te(!0);const e=setTimeout((()=>{Q(P)}),10);return()=>{clearTimeout(e)}}),[P]),(0,v.useEffect)((()=>{if(J!==ie.current)if(tre(X),ie.current=J,J)null==O||O();else{const e=(()=>{const e=getComputedStyle(document.body).getPropertyValue("--rt-transition-show-delay").match(/^([\d.]+)(ms|s)$/);if(!e)return 0;const[,t,n]=e;return Number(t)*("ms"===n?1:1e3)})();X.current=setTimeout((()=>{te(!1),re(null),null==R||R()}),e+25)}}),[J]);const ye=e=>{Z((t=>Zne(t,e)?t:e))},be=(e=p)=>{tre(G),ee?ve(!0):G.current=setTimeout((()=>{ve(!0)}),e)},xe=(e=m)=>{tre(Y),Y.current=setTimeout((()=>{le.current||ve(!1)}),e)},_e=e=>{var t;if(!e)return;const n=null!==(t=e.currentTarget)&&void 0!==t?t:e.target;if(!(null==n?void 0:n.isConnected))return j(null),void se({current:null});p?be():ve(!0),j(n),se({current:n}),tre(Y)},we=()=>{x?xe(m||100):m?xe():ve(!1),tre(G)},Ae=({x:e,y:t})=>{var n;const r={getBoundingClientRect:()=>({x:e,y:t,width:0,height:0,top:t,left:e,right:e,bottom:t})};Gne({place:null!==(n=null==ne?void 0:ne.place)&&void 0!==n?n:s,offset:l,elementReference:r,tooltipReference:V.current,tooltipArrowReference:W.current,strategy:f,middlewares:d,border:B}).then((e=>{ye(e)}))},ke=e=>{if(!e)return;const t=e,n={x:t.clientX,y:t.clientY};Ae(n),ae.current=n},Ee=e=>{var t;if(!J)return;const n=e.target;n.isConnected&&((null===(t=V.current)||void 0===t?void 0:t.contains(n))||[document.querySelector(`[id='${a}']`),...ce].some((e=>null==e?void 0:e.contains(n)))||(ve(!1),tre(G)))},Te=Xne(_e,50,!0),Me=Xne(we,50,!0),Se=e=>{Me.cancel(),Te(e)},Ce=()=>{Te.cancel(),Me()},Oe=(0,v.useCallback)((()=>{var e,t;const n=null!==(e=null==ne?void 0:ne.position)&&void 0!==e?e:C;n?Ae(n):g?ae.current&&Ae(ae.current):(null==z?void 0:z.isConnected)&&Gne({place:null!==(t=null==ne?void 0:ne.place)&&void 0!==t?t:s,offset:l,elementReference:z,tooltipReference:V.current,tooltipArrowReference:W.current,strategy:f,middlewares:d,border:B}).then((e=>{fe.current&&ye(e)}))}),[J,z,L,S,s,null==ne?void 0:ne.place,l,f,C,null==ne?void 0:ne.position,g]);(0,v.useEffect)((()=>{var e,t;const n=new Set(oe);ce.forEach((e=>{(null==N?void 0:N(e))||n.add({current:e})}));const r=document.querySelector(`[id='${a}']`);r&&!(null==N?void 0:N(r))&&n.add({current:r});const i=()=>{ve(!1)},o=Qne(z),s=Qne(V.current);ge.scroll&&(window.addEventListener("scroll",i),null==o||o.addEventListener("scroll",i),null==s||s.addEventListener("scroll",i));let l=null;ge.resize?window.addEventListener("resize",i):z&&V.current&&(l=Fne(z,V.current,Oe,{ancestorResize:!0,elementResize:!0,layoutShift:!0}));const c=e=>{"Escape"===e.key&&ve(!1)};ge.escape&&window.addEventListener("keydown",c),ge.clickOutsideAnchor&&window.addEventListener("click",Ee);const u=[],f=e=>{J&&(null==e?void 0:e.target)===z||_e(e)},d=e=>{J&&(null==e?void 0:e.target)===z&&we()},h=["mouseover","mouseout","mouseenter","mouseleave","focus","blur"],p=["click","dblclick","mousedown","mouseup"];Object.entries(pe).forEach((([e,t])=>{t&&(h.includes(e)?u.push({event:e,listener:Se}):p.includes(e)&&u.push({event:e,listener:f}))})),Object.entries(me).forEach((([e,t])=>{t&&(h.includes(e)?u.push({event:e,listener:Ce}):p.includes(e)&&u.push({event:e,listener:d}))})),g&&u.push({event:"pointermove",listener:ke});const m=()=>{le.current=!0},v=()=>{le.current=!1,we()};return x&&!he&&(null===(e=V.current)||void 0===e||e.addEventListener("mouseenter",m),null===(t=V.current)||void 0===t||t.addEventListener("mouseleave",v)),u.forEach((({event:e,listener:t})=>{n.forEach((n=>{var r;null===(r=n.current)||void 0===r||r.addEventListener(e,t)}))})),()=>{var e,t;ge.scroll&&(window.removeEventListener("scroll",i),null==o||o.removeEventListener("scroll",i),null==s||s.removeEventListener("scroll",i)),ge.resize?window.removeEventListener("resize",i):null==l||l(),ge.clickOutsideAnchor&&window.removeEventListener("click",Ee),ge.escape&&window.removeEventListener("keydown",c),x&&!he&&(null===(e=V.current)||void 0===e||e.removeEventListener("mouseenter",m),null===(t=V.current)||void 0===t||t.removeEventListener("mouseleave",v)),u.forEach((({event:e,listener:t})=>{n.forEach((n=>{var r;null===(r=n.current)||void 0===r||r.removeEventListener(e,t)}))}))}}),[z,Oe,ee,oe,ce,k,E,T,de,p,m]),(0,v.useEffect)((()=>{var e,n;let r=null!==(n=null!==(e=null==ne?void 0:ne.anchorSelect)&&void 0!==e?e:o)&&void 0!==n?n:"";!r&&t&&(r=`[data-tooltip-id='${t.replace(/'/g,"\\'")}']`);const i=new MutationObserver((e=>{const n=[],i=[];e.forEach((e=>{if("attributes"===e.type&&"data-tooltip-id"===e.attributeName&&(e.target.getAttribute("data-tooltip-id")===t?n.push(e.target):e.oldValue===t&&i.push(e.target)),"childList"===e.type){if(z){const t=[...e.removedNodes].filter((e=>1===e.nodeType));if(r)try{i.push(...t.filter((e=>e.matches(r)))),i.push(...t.flatMap((e=>[...e.querySelectorAll(r)])))}catch(e){}t.some((e=>{var t;return!!(null===(t=null==e?void 0:e.contains)||void 0===t?void 0:t.call(e,z))&&(te(!1),ve(!1),j(null),tre(G),tre(Y),!0)}))}if(r)try{const t=[...e.addedNodes].filter((e=>1===e.nodeType));n.push(...t.filter((e=>e.matches(r)))),n.push(...t.flatMap((e=>[...e.querySelectorAll(r)])))}catch(e){}}})),(n.length||i.length)&&ue((e=>[...e.filter((e=>!i.includes(e))),...n]))}));return i.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-tooltip-id"],attributeOldValue:!0}),()=>{i.disconnect()}}),[t,o,null==ne?void 0:ne.anchorSelect,z]),(0,v.useEffect)((()=>{Oe()}),[Oe]),(0,v.useEffect)((()=>{if(!(null==D?void 0:D.current))return()=>null;const e=new ResizeObserver((()=>{setTimeout((()=>Oe()))}));return e.observe(D.current),()=>{e.disconnect()}}),[L,null==D?void 0:D.current]),(0,v.useEffect)((()=>{var e;const t=document.querySelector(`[id='${a}']`),n=[...ce,t];z&&n.includes(z)||j(null!==(e=ce[0])&&void 0!==e?e:t)}),[a,ce,z]),(0,v.useEffect)((()=>(I&&ve(!0),()=>{tre(G),tre(Y)})),[]),(0,v.useEffect)((()=>{var e;let n=null!==(e=null==ne?void 0:ne.anchorSelect)&&void 0!==e?e:o;if(!n&&t&&(n=`[data-tooltip-id='${t.replace(/'/g,"\\'")}']`),n)try{const e=Array.from(document.querySelectorAll(n));ue(e)}catch(e){ue([])}}),[t,o,null==ne?void 0:ne.anchorSelect]),(0,v.useEffect)((()=>{G.current&&(tre(G),be(p))}),[p]);const Re=null!==(H=null==ne?void 0:ne.content)&&void 0!==H?H:L,Ne=J&&Object.keys(K.tooltipStyles).length>0;return(0,v.useImperativeHandle)(e,(()=>({open:e=>{if(null==e?void 0:e.anchorSelect)try{document.querySelector(e.anchorSelect)}catch(t){return void console.warn(`[react-tooltip] "${e.anchorSelect}" is not a valid CSS selector`)}re(null!=e?e:null),(null==e?void 0:e.delay)?be(e.delay):ve(!0)},close:e=>{(null==e?void 0:e.delay)?xe(e.delay):ve(!1)},activeAnchor:z,place:K.place,isOpen:Boolean(ee&&!y&&Re&&Ne)}))),ee&&!y&&Re?v.createElement(h,{id:t,role:q,className:Ke("react-tooltip",ore.tooltip,sre.tooltip,sre[i],n,`react-tooltip__place-${K.place}`,ore[Ne?"show":"closing"],Ne?"react-tooltip__show":"react-tooltip__closing","fixed"===f&&ore.fixed,x&&ore.clickable),onTransitionEnd:e=>{tre(X),J||"opacity"!==e.propertyName||(te(!1),re(null),null==R||R())},style:{...S,...K.tooltipStyles,opacity:void 0!==U&&Ne?U:void 0},ref:V},Re,v.createElement(h,{className:Ke("react-tooltip-arrow",ore.arrow,sre.arrow,r,b&&ore.noArrow),style:{...K.tooltipArrowStyles,background:$?`linear-gradient(to right bottom, transparent 50%, ${$} 50%)`:void 0},ref:W})):null},cre=({content:e})=>v.createElement("span",{dangerouslySetInnerHTML:{__html:e}}),ure=v.forwardRef((({id:e,anchorId:t,anchorSelect:n,content:r,html:i,render:a,className:o,classNameArrow:s,variant:l="dark",place:c="top",offset:u=10,wrapper:f="div",children:d=null,events:h=["hover"],openOnClick:p=!1,positionStrategy:m="absolute",middlewares:g,delayShow:y=0,delayHide:b=0,float:x=!1,hidden:_=!1,noArrow:w=!1,clickable:A=!1,closeOnEsc:k=!1,closeOnScroll:E=!1,closeOnResize:T=!1,openEvents:M,closeEvents:S,globalCloseEvents:C,imperativeModeOnly:O=!1,style:R,position:N,isOpen:L,defaultIsOpen:D=!1,disableStyleInjection:P=!1,border:I,opacity:F,arrowColor:z,setIsOpen:j,afterShow:B,afterHide:U,disableTooltip:$,role:q="tooltip"},H)=>{const[V,W]=(0,v.useState)(r),[G,Y]=(0,v.useState)(i),[X,K]=(0,v.useState)(c),[Z,J]=(0,v.useState)(l),[Q,ee]=(0,v.useState)(u),[te,ne]=(0,v.useState)(y),[re,ie]=(0,v.useState)(b),[ae,oe]=(0,v.useState)(x),[se,le]=(0,v.useState)(_),[ce,ue]=(0,v.useState)(f),[fe,de]=(0,v.useState)(h),[he,pe]=(0,v.useState)(m),[me,ge]=(0,v.useState)(null),[ve,ye]=(0,v.useState)(null),be=(0,v.useRef)(P),{anchorRefs:xe,activeAnchor:_e}=are(e),we=e=>null==e?void 0:e.getAttributeNames().reduce(((t,n)=>{var r;return n.startsWith("data-tooltip-")&&(t[n.replace(/^data-tooltip-/,"")]=null!==(r=null==e?void 0:e.getAttribute(n))&&void 0!==r?r:null),t}),{}),Ae=e=>{const t={place:e=>{var t;K(null!==(t=e)&&void 0!==t?t:c)},content:e=>{W(null!=e?e:r)},html:e=>{Y(null!=e?e:i)},variant:e=>{var t;J(null!==(t=e)&&void 0!==t?t:l)},offset:e=>{ee(null===e?u:Number(e))},wrapper:e=>{var t;ue(null!==(t=e)&&void 0!==t?t:f)},events:e=>{const t=null==e?void 0:e.split(" ");de(null!=t?t:h)},"position-strategy":e=>{var t;pe(null!==(t=e)&&void 0!==t?t:m)},"delay-show":e=>{ne(null===e?y:Number(e))},"delay-hide":e=>{ie(null===e?b:Number(e))},float:e=>{oe(null===e?x:"true"===e)},hidden:e=>{le(null===e?_:"true"===e)},"class-name":e=>{ge(e)}};Object.values(t).forEach((e=>e(null))),Object.entries(e).forEach((([e,n])=>{var r;null===(r=t[e])||void 0===r||r.call(t,n)}))};(0,v.useEffect)((()=>{W(r)}),[r]),(0,v.useEffect)((()=>{Y(i)}),[i]),(0,v.useEffect)((()=>{K(c)}),[c]),(0,v.useEffect)((()=>{J(l)}),[l]),(0,v.useEffect)((()=>{ee(u)}),[u]),(0,v.useEffect)((()=>{ne(y)}),[y]),(0,v.useEffect)((()=>{ie(b)}),[b]),(0,v.useEffect)((()=>{oe(x)}),[x]),(0,v.useEffect)((()=>{le(_)}),[_]),(0,v.useEffect)((()=>{pe(m)}),[m]),(0,v.useEffect)((()=>{be.current!==P&&console.warn("[react-tooltip] Do not change `disableStyleInjection` dynamically.")}),[P]),(0,v.useEffect)((()=>{"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("react-tooltip-inject-styles",{detail:{disableCore:"core"===P,disableBase:P}}))}),[]),(0,v.useEffect)((()=>{var r;const i=new Set(xe);let a=n;if(!a&&e&&(a=`[data-tooltip-id='${e.replace(/'/g,"\\'")}']`),a)try{document.querySelectorAll(a).forEach((e=>{i.add({current:e})}))}catch(r){console.warn(`[react-tooltip] "${a}" is not a valid CSS selector`)}const o=document.querySelector(`[id='${t}']`);if(o&&i.add({current:o}),!i.size)return()=>null;const s=null!==(r=null!=ve?ve:o)&&void 0!==r?r:_e.current,l=new MutationObserver((e=>{e.forEach((e=>{var t;if(!s||"attributes"!==e.type||!(null===(t=e.attributeName)||void 0===t?void 0:t.startsWith("data-tooltip-")))return;const n=we(s);Ae(n)}))})),c={attributes:!0,childList:!1,subtree:!1};if(s){const e=we(s);Ae(e),l.observe(s,c)}return()=>{l.disconnect()}}),[xe,_e,ve,t,n]),(0,v.useEffect)((()=>{(null==R?void 0:R.border)&&console.warn("[react-tooltip] Do not set `style.border`. Use `border` prop instead."),I&&!Yne("border",`${I}`)&&console.warn(`[react-tooltip] "${I}" is not a valid \`border\`.`),(null==R?void 0:R.opacity)&&console.warn("[react-tooltip] Do not set `style.opacity`. Use `opacity` prop instead."),F&&!Yne("opacity",`${F}`)&&console.warn(`[react-tooltip] "${F}" is not a valid \`opacity\`.`)}),[]);let ke=d;const Ee=(0,v.useRef)(null);if(a){const e=a({content:(null==ve?void 0:ve.getAttribute("data-tooltip-content"))||V||null,activeAnchor:ve});ke=e?v.createElement("div",{ref:Ee,className:"react-tooltip-content-wrapper"},e):null}else V&&(ke=V);G&&(ke=v.createElement(cre,{content:G}));const Te={forwardRef:H,id:e,anchorId:t,anchorSelect:n,className:Ke(o,me),classNameArrow:s,content:ke,contentWrapperRef:Ee,place:X,variant:Z,offset:Q,wrapper:ce,events:fe,openOnClick:p,positionStrategy:he,middlewares:g,delayShow:te,delayHide:re,float:ae,hidden:se,noArrow:w,clickable:A,closeOnEsc:k,closeOnScroll:E,closeOnResize:T,openEvents:M,closeEvents:S,globalCloseEvents:C,imperativeModeOnly:O,style:R,position:N,isOpen:L,defaultIsOpen:D,border:I,opacity:F,arrowColor:z,setIsOpen:j,afterShow:B,afterHide:U,disableTooltip:$,activeAnchor:ve,setActiveAnchor:e=>ye(e),role:q};return v.createElement(lre,{...Te})}));"undefined"!=typeof window&&window.addEventListener("react-tooltip-inject-styles",(e=>{e.detail.disableCore||Wne({css:":root{--rt-color-white:#fff;--rt-color-dark:#222;--rt-color-success:#8dc572;--rt-color-error:#be6464;--rt-color-warning:#f0ad4e;--rt-color-info:#337ab7;--rt-opacity:0.9;--rt-transition-show-delay:0.15s;--rt-transition-closing-delay:0.15s}.core-styles-module_tooltip__3vRRp{position:absolute;top:0;left:0;pointer-events:none;opacity:0;will-change:opacity}.core-styles-module_fixed__pcSol{position:fixed}.core-styles-module_arrow__cvMwQ{position:absolute;background:inherit}.core-styles-module_noArrow__xock6{display:none}.core-styles-module_clickable__ZuTTB{pointer-events:auto}.core-styles-module_show__Nt9eE{opacity:var(--rt-opacity);transition:opacity var(--rt-transition-show-delay)ease-out}.core-styles-module_closing__sGnxF{opacity:0;transition:opacity var(--rt-transition-closing-delay)ease-in}",type:"core"}),e.detail.disableBase||Wne({css:"\n.styles-module_tooltip__mnnfp{padding:8px 16px;border-radius:3px;font-size:90%;width:max-content}.styles-module_arrow__K0L3T{width:8px;height:8px}[class*='react-tooltip__place-top']>.styles-module_arrow__K0L3T{transform:rotate(45deg)}[class*='react-tooltip__place-right']>.styles-module_arrow__K0L3T{transform:rotate(135deg)}[class*='react-tooltip__place-bottom']>.styles-module_arrow__K0L3T{transform:rotate(225deg)}[class*='react-tooltip__place-left']>.styles-module_arrow__K0L3T{transform:rotate(315deg)}.styles-module_dark__xNqje{background:var(--rt-color-dark);color:var(--rt-color-white)}.styles-module_light__Z6W-X{background-color:var(--rt-color-white);color:var(--rt-color-dark)}.styles-module_success__A2AKt{background-color:var(--rt-color-success);color:var(--rt-color-white)}.styles-module_warning__SCK0X{background-color:var(--rt-color-warning);color:var(--rt-color-white)}.styles-module_error__JvumD{background-color:var(--rt-color-error);color:var(--rt-color-white)}.styles-module_info__BWdHW{background-color:var(--rt-color-info);color:var(--rt-color-white)}",type:"base"})}));var fre=function(e){var t=e.config,n=e.tableRows,r=e.experimentalDesign,i=t.hero,a=t.title,o=t.help,s=(t.entries,n[0]);return v.createElement("div",{className:"summary_border ".concat(i?"hero-metrics":null)},v.createElement("div",{className:"header-wrapper"},a?v.createElement("div",null,v.createElement("h2",{id:a,"data-tooltip-id":"".concat(a,"-table-header"),"data-tooltip-html":o?dre(o):null},a),v.createElement(ure,{id:"".concat(a,"-table-header"),className:"tooltip table-tooltip",clickable:!0})):null),v.createElement("table",{className:"table table-hover"},v.createElement("thead",null,s.map((function(e){var n=hre(e,t,r),i=s.length>1?"table-right-aligned":null;return v.createElement("td",{key:"".concat(e.key,"-header")},v.createElement("div",{className:"table-header-container ".concat(i)},v.createElement("div",{"data-tooltip-id":"".concat(e.key,"-header"),"data-tooltip-html":dre(n),className:"table-header-content ".concat(i)},e.config.header),v.createElement(ure,{id:"".concat(e.key,"-header"),className:"tooltip table-tooltip",clickable:!0})))}))),v.createElement("tbody",null,n.map((function(e){return v.createElement("tr",{key:e[0].value},e.map((function(t){return v.createElement("td",{className:e.length>1?"right-aligned":null,key:"".concat(t.key,"-value")},xte(t))})))})))))},dre=function(e){var t;return"<span>".concat((t=/(https?:\/\/[^\s]+)/g,e.split(t).map((function(e){return t.test(e)?'<a href="'.concat(e,'" class="tooltip-link" target="_blank" rel="noopener noreferrer">').concat(e,"</a>"):e})).join("")),"</span>")},hre=function(e,t,n){var r=t.entries.find((function(t){return t.key===e.key})).help;if(r){if("string"==typeof r)return r;var i=pre(r,n);if(null!==i)return i}return e.config.help||""},pre=function(e,t){for(var n=0,r=e;n<r.length;n++){var i=r[n];if(mre(i,t))return i.msg}return null},mre=function(e,t){var n=!0;return void 0!==e.isRtl&&n&&(n=e.isRtl===t.is_rtl),n};const gre=function(e){var t=e.metrics,n=e.config,r=e.experimentalDesign,i=n.entries,a=n.orderBy,o=void 0===a?[i[0]]:a,s=t.filter((function(e){return e.key===i[0].key})).map((function(e){return null==e?void 0:e.grouping_key})),l=t.filter((function(e){return i.some((function(t){return t.key===e.key}))&&s.includes(e.grouping_key)})),c=Pte()(l,"grouping_key"),u=Object.values(c).map((function(e){return e.sort((function(e,t){return i.findIndex((function(t){return t.key===e.key}))-i.findIndex((function(e){return e.key===t.key}))}))})),f=u.sort((function(e,t){for(var n,r,i=function(i){var a=null===(n=e.find((function(e){return e.key===i})))||void 0===n?void 0:n.value,o=null===(r=t.find((function(e){return e.key===i})))||void 0===r?void 0:r.value;return a<o?{value:-1}:a>o?{value:1}:void 0},a=0,s=o;a<s.length;a++){var l=i(s[a]);if("object"==typeof l)return l.value}return 0}));return v.createElement(fre,{config:n,tableRows:f,experimentalDesign:r})};const vre=function(e){var t=e.metrics,n=e.config,r=e.experimentalDesign,i=_te(n.entries,t);return v.createElement(fre,{config:n,tableRows:[i],experimentalDesign:r})};const yre=function(e){var t=e.metrics,n=e.config,r=e.experimentalDesign,i=function(e,t){var n=t.entries,r=t.orderBy,i=void 0===r?[n[0].key]:r;return e.filter((function(e){return i[0]===e.key})),e.filter((function(e){return i[0]===e.key&&e.grouping_key})).length>1}(t,n);return v.createElement(v.Fragment,null,i?v.createElement(gre,{metrics:t,config:n,experimentalDesign:r}):v.createElement(vre,{metrics:t,config:n,experimentalDesign:r}))};const bre={GEX:{heroMetrics:{title:"Cell Calling Quality",help:"Summary statistics about cell-associated barcodes.",hero:!0,entries:[{key:"genome"},{key:"total_singlets"},{key:"confidently_mapped_reads_in_cells",help:Jee},{key:"median_genes_per_singlet"},{key:"median_umi_per_singlet"},{key:"total_genes_detected"},{key:"reads_from_cells_assigned_to_sample"}]},mapping_metrics_table:{title:"Mapping Quality (Amongst Reads From Cells Assigned To Sample)",entries:[{key:"confidently_mapped_to_transcriptome"},{key:"mapped_to_genome"},{key:"confidently_mapped_to_genome"},{key:"confidently_mapped_to_exonic_regions"},{key:"confidently_mapped_to_intronic_regions"},{key:"confidently_mapped_to_intergenic_regions"},{key:"confidently_mapped_antisense"},{key:"reads_mapped_to_probe_set"},{key:"reads_confidently_mapped_to_probe_set"},{key:"reads_confidently_mapped_to_filtered_probe_set"},{key:"reads_half_mapped_to_probe_set"},{key:"reads_split_mapped_to_probe_set"}]},gdna_metrics:{title:"UMIs from Genomic DNA",entries:[{key:"estimated_gdna_content"},{key:"estimated_gdna_unspliced_threshold"}]}},VDJ_T:{heroMetrics:{title:"Cell Calling Quality",entries:[{key:"vdj_filtered_bcs"},{key:"multi_vdj_assembly_contig_pair_productive_full_len_bc_frac"},{key:"TRA_TRB_vdj_assembly_contig_pair_productive_full_len_bc_frac"},{key:"TRA_vdj_assembly_prod_cdr_bc_frac"},{key:"TRB_vdj_assembly_prod_cdr_bc_frac"},{key:"vdj_filtered_bcs_cum_frac"}],hero:!0},vdj_sensitivity:{title:"VDJ Sensitivity",entries:[{key:"TRA_vdj_assembly_umis_per_cell_median"},{key:"TRB_vdj_assembly_umis_per_cell_median"}]},vdj_sensitivity_enrichment_metrics:{title:"VDJ Sensitivity and Enrichment",entries:[{key:"TRA_vdj_assembly_umis_per_cell_median"},{key:"TRB_vdj_assembly_umis_per_cell_median"},{key:"multi_vdj_recombinome_mapped_reads_frac"},{key:"TRA_vdj_recombinome_mapped_reads_frac"},{key:"TRB_vdj_recombinome_mapped_reads_frac"}]},vdj_paired_clonotype_diversity:{title:"Clonotype Metrics",entries:[{key:"multi_raw_vdj_paired_clonotype_diversity"}]}},VDJ_T_GD:{heroMetrics:{title:"Cell Calling Quality",entries:[{key:"vdj_filtered_bcs"},{key:"multi_vdj_assembly_contig_pair_productive_full_len_bc_frac"},{key:"TRG_TRD_vdj_assembly_contig_pair_productive_full_len_bc_frac"},{key:"TRG_vdj_assembly_prod_cdr_bc_frac"},{key:"TRD_vdj_assembly_prod_cdr_bc_frac"},{key:"TRD_vdj_assembly_prod_cdr_bc_frac"},{key:"vdj_filtered_bcs_cum_frac"}],hero:!0},vdj_sensitivity:{title:"VDJ Sensitivity",entries:[{key:"TRG_vdj_assembly_umis_per_cell_median"},{key:"TRD_vdj_assembly_umis_per_cell_median"}]},vdj_sensitivity_enrichment_metrics:{title:"VDJ Sensitivity and Enrichment",entries:[{key:"TRG_vdj_assembly_umis_per_cell_median"},{key:"TRD_vdj_assembly_umis_per_cell_median"},{key:"multi_vdj_recombinome_mapped_reads_frac"},{key:"TRG_vdj_recombinome_mapped_reads_frac"},{key:"TRD_vdj_recombinome_mapped_reads_frac"}]},vdj_paired_clonotype_diversity:{title:"Clonotype Metrics",entries:[{key:"multi_raw_vdj_paired_clonotype_diversity"}]}},VDJ_B:{heroMetrics:{title:"Cell Calling Quality",entries:[{key:"vdj_filtered_bcs"},{key:"multi_vdj_assembly_contig_pair_productive_full_len_bc_frac"},{key:"IGK_IGH_vdj_assembly_contig_pair_productive_full_len_bc_frac"},{key:"IGL_IGH_vdj_assembly_contig_pair_productive_full_len_bc_frac"},{key:"IGH_vdj_assembly_prod_cdr_bc_frac"},{key:"IGK_vdj_assembly_prod_cdr_bc_frac"},{key:"IGL_vdj_assembly_prod_cdr_bc_frac"},{key:"vdj_filtered_bcs_cum_frac"}],hero:!0},vdj_sensitivity:{title:"VDJ Sensitivity",entries:[{key:"IGH_vdj_assembly_umis_per_cell_median"},{key:"IGK_vdj_assembly_umis_per_cell_median"},{key:"IGL_vdj_assembly_umis_per_cell_median"}]},vdj_sensitivity_enrichment_metrics:{title:"VDJ Sensitivity and Enrichment",entries:[{key:"IGH_vdj_assembly_umis_per_cell_median"},{key:"IGK_vdj_assembly_umis_per_cell_median"},{key:"IGL_vdj_assembly_umis_per_cell_median"},{key:"multi_vdj_recombinome_mapped_reads_frac"},{key:"IGH_vdj_recombinome_mapped_reads_frac"},{key:"IGK_vdj_recombinome_mapped_reads_frac"},{key:"IGL_vdj_recombinome_mapped_reads_frac"}]},vdj_paired_clonotype_diversity:{title:"Clonotype Metrics",entries:[{key:"multi_raw_vdj_paired_clonotype_diversity"}]}},AB:{heroMetrics:{title:"Antibody Expression",entries:[{key:"total_singlets"},{key:"fraction_antibody_reads"},{key:"reads_in_cells"},{key:"median_umis_per_singlet"},{key:"antibody_reads_usable_per_cell"},{key:"fraction_reads_in_aggregate_barcodes"},{key:"reads_from_cells_assigned_to_sample"}],hero:!0}},CRISPR:{heroMetrics:{title:"Guide Expression",entries:[{key:"total_singlets"},{key:"cells_with_one_or_more_protospacers_detected"},{key:"cells_with_two_or_more_protospacers_detected"},{key:"fraction_guide_reads"},{key:"fraction_reads_with_putative_protospacer"},{key:"median_umis_per_singlet"},{key:"guide_reads_usable_per_cell"},{key:"fraction_protospacer_not_recognized"},{key:"reads_in_cells"}],hero:!0}},AG:{heroMetrics:{title:"Antigen Expression",entries:[{key:"feature_type"},{key:"total_singlets"},{key:"median_umis_per_singlet"},{key:"antigen_reads_usable_per_cell"}],hero:!0}},Custom:{heroMetrics:{title:"Feature Expression",entries:[{key:"total_singlets"},{key:"median_umis_per_singlet"},{key:"feature_reads_usable_per_cell"}],hero:!0}}};const xre=function(e){var t=e.parametersTable;if(!t)return null;var n=t.rows;return n?v.createElement("header",{className:"tab-header"},v.createElement("ul",{className:"parameters-table"},n.map((function(e){var t=e[0],n=e[1];return v.createElement("li",{key:t},v.createElement("p",{className:"title"},t),v.createElement("p",{className:"subtitle"},n))})))):null};var _re=function(){return _re=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},_re.apply(this,arguments)},wre=function(e){var t,n=e.tabData,r=function(e){return!e||0===Object.keys(e).length}(n),i=!(!(null===(t=null==n?void 0:n.content)||void 0===t?void 0:t.parameters_table)||!(null==e?void 0:e.showParametersTable));return r?null:function(e){var t,n,r=e.id,i=e.tabData,a=e.metrics,o=e.experimentalDesign,s=e.showParametersTable,l=void 0!==s&&s,c=e.Component;return v.createElement(Xt,{eventKey:r,key:r,title:v.createElement(Lte,{title:r,alertType:ite(i.alerts)}),"data-test":ae()(r)},v.createElement("div",null,(null===(t=i.content)||void 0===t?void 0:t.disclaimer)&&v.createElement("div",{className:"disclaimer"},v.createElement("tr",null,v.createElement("td",null,v.createElement(A,null)),v.createElement("td",null,v.createElement("div",{dangerouslySetInnerHTML:{__html:i.content.disclaimer}})))),l?v.createElement(xre,{parametersTable:i.content.parameters_table}):null,(null===(n=i.alerts)||void 0===n?void 0:n.length)>0&&v.createElement("div",{className:"summary_border"},v.createElement(T,{alarms:i.alerts})),v.createElement(c,{data:i.content,metrics:a,experimentalDesign:o})))}(_re(_re({},e),{tabData:n,showParametersTable:i}))},Are=function(){return Are=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Are.apply(this,arguments)},kre=function(e){var t=e.data,n=e.metrics,r=e.experimentalDesign,i=bre.GEX,a=i.heroMetrics,o=(i.cell_metrics_table,i.mapping_metrics_table),s=i.gdna_metrics,l=mte("Gene Expression",n);return v.createElement(v.Fragment,null,wte(a.entries,l)&&v.createElement(yre,{metrics:l,config:a,experimentalDesign:r}),v.createElement("div",{className:"half-plot"},t.barcode_rank_plot&&v.createElement(H8,Are({dataTest:ate("barcode_rank_plot")},t.barcode_rank_plot))),wte(o.entries,l)&&v.createElement(yre,{metrics:l,config:o,experimentalDesign:r}),v.createElement("div",{className:"half-plot"},t.median_genes_per_cell_plot&&v.createElement(H8,Are({dataTest:ate("median_genes_per_cell_plot")},t.median_genes_per_cell_plot))),(null==t?void 0:t.clustering_and_diffexp_plots)&&v.createElement(xo,Are({dataTest:ate("clustering_and_diffexp_plots")},t.clustering_and_diffexp_plots)),wte(s.entries,l)&&v.createElement(yre,{metrics:l,config:s,experimentalDesign:r}))},Ere=function(e){return Sre(e,"VDJ T",bre.VDJ_T)},Tre=function(e){return Sre(e,"VDJ T GD",bre.VDJ_T_GD)},Mre=function(e){return Sre(e,"VDJ B",bre.VDJ_B)};function Sre(e,t,n){var r=e.metrics,i=e.data,a=e.experimentalDesign,o=n.heroMetrics,s=n.vdj_sensitivity,l=n.vdj_sensitivity_enrichment_metrics,c=n.vdj_paired_clonotype_diversity,u=mte(t,r);return v.createElement(v.Fragment,null,wte(o.entries,u)&&v.createElement(yre,{metrics:u,config:o,experimentalDesign:a}),"Hashtag"==a.multiplexing_method&&wte(s.entries,u)&&v.createElement(yre,{metrics:u,config:s,experimentalDesign:a}),"OH"==a.multiplexing_method&&wte(l.entries,u)&&v.createElement(yre,{metrics:u,config:l,experimentalDesign:a}),wte(c.entries,u)&&v.createElement(yre,{metrics:u,config:c,experimentalDesign:a}),i.clonotype_info&&v.createElement(G8,Are({dataTest:ate("clonotype_info")},i.clonotype_info)),v.createElement("div",{className:"half-plot"},(null==i?void 0:i.barcode_rank_plot)&&v.createElement(q8,Are({dataTest:ate("barcode_rank_plot")},i.barcode_rank_plot))))}var Cre=function(e){var t=e.data,n=e.metrics,r=e.experimentalDesign,i=bre.AB,a=i.heroMetrics,o=(i.cell_metrics_table,i.antibody_sample_mapping_metrics,mte("Antibody Capture",n));return v.createElement(v.Fragment,null,wte(a.entries,o)&&v.createElement(yre,{metrics:o,config:a,experimentalDesign:r}),t.feature_histogram&&v.createElement(H8,Are({dataTest:ate("feature_histogram")},t.feature_histogram)),t.antibody_treemap&&v.createElement(H8,Are({dataTest:ate("antibody_treemap")},t.antibody_treemap)),t.clustering_and_diffexp_plots&&v.createElement(xo,Are({dataTest:ate("clustering_and_diffexp_plots")},t.clustering_and_diffexp_plots)),v.createElement("div",{className:"half-plot"},t.barcode_rank_plot&&v.createElement(H8,Are({dataTest:ate("barcode_rank_plot")},t.barcode_rank_plot))))},Ore=function(e){var t=e.data,n=e.metrics,r=e.experimentalDesign,i=bre.AG,a=i.heroMetrics,o=i.cell_metrics_table,s=mte("Antigen Capture",n);return v.createElement(v.Fragment,null,wte(a.entries,s)&&v.createElement(yre,{metrics:s,config:a,experimentalDesign:r}),wte(o.entries,s)&&v.createElement(yre,{metrics:s,config:o,experimentalDesign:r}),t.antigen_treemap&&v.createElement(H8,Are({dataTest:ate("antigen_treemap")},t.antigen_treemap)),t.clonotype_clustermap&&v.createElement(H8,Are({dataTest:ate("clonotype_clustermap")},t.clonotype_clustermap)))},Rre=function(e){var t=e.data,n=e.metrics,r=e.experimentalDesign,i=bre.CRISPR,a=i.heroMetrics,o=(i.cell_metrics_table,i.crispr_sample_mapping_metrics,mte("CRISPR Guide Capture",n));return v.createElement(v.Fragment,null,wte(a.entries,o)&&v.createElement(yre,{metrics:o,config:a,experimentalDesign:r}),v.createElement("div",{className:"half-plot"},t.projection_plot&&v.createElement(H8,Are({dataTest:ate("projection_plot")},t.projection_plot))),v.createElement("div",{className:"half-plot"},t.barcode_rank_plot&&v.createElement(H8,Are({dataTest:ate("barcode_rank_plot")},t.barcode_rank_plot))))},Nre=function(e){var t=e.data,n=e.metrics,r=e.experimentalDesign,i=bre.Custom.heroMetrics,a=mte("Custom Feature",n);return v.createElement(v.Fragment,null,wte(i.entries,a)&&v.createElement(yre,{metrics:a,config:i,experimentalDesign:r}),v.createElement("div",{className:"half-plot"},t.projection_plot&&v.createElement(H8,Are({dataTest:ate("projection_plot")},t.projection_plot))),v.createElement("div",{className:"half-plot"},t.barcode_rank_plot&&v.createElement(H8,Are({dataTest:ate("barcode_rank_plot")},t.barcode_rank_plot))))},Lre=function(e){var t=e.data;e.metrics,e.experimentalDesign;return v.createElement(v.Fragment,null,t.cell_annotation_cell_types_chart&&v.createElement(ste,Are({dataTest:ate("cell_annotation_cell_types_chart")},t.cell_annotation_cell_types_chart)),v.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",gap:"2rem",flexWrap:"wrap"}},t.cell_annotation_violin_plot_chart&&v.createElement(ste,Are({dataTest:ate("cell_annotation_violin_plot_chart")},t.cell_annotation_violin_plot_chart)),t.cell_annotation_umap_plot_chart&&v.createElement(ste,Are({dataTest:ate("cell_annotation_umap_plot_chart")},t.cell_annotation_umap_plot_chart))),t.cell_annotation_diffexp_table&&v.createElement(ute,Are({dataTest:ate("cell_annotation_diffexp_table")},t.cell_annotation_diffexp_table)))};const Dre=function(e){var t=e.data,n=e.experimentalDesign,r=(0,v.useState)(hte(t)[0]),i=r[0],a=r[1];return v.createElement("article",{className:"summary per-sample","data-test":ate("sample"),key:Uee.Cells},v.createElement(Rte,{idKey:kte,id:t.data.header_info[kte],description:t.data.header_info["Sample Description"],headerType:"sample"}),v.createElement(Pn,{activeKey:i,onSelect:function(e){a(e)},unmountOnExit:!0},wre({id:qee.GEX,tabData:t.data.gex_tab,metrics:t.metrics,experimentalDesign:n,tabType:"sample",Component:kre}),wre({id:qee.VDJ_T,tabData:t.data.vdj_t_tab,metrics:t.metrics,experimentalDesign:n,tabType:"sample",Component:Ere}),wre({id:qee.VDJ_B,tabData:t.data.vdj_b_tab,metrics:t.metrics,experimentalDesign:n,tabType:"sample",Component:Mre}),wre({id:qee.VDJ_T_GD,tabData:t.data.vdj_t_gd_tab,metrics:t.metrics,experimentalDesign:n,tabType:"sample",Component:Tre}),wre({id:qee.AB,tabData:t.data.antibody_tab,metrics:t.metrics,experimentalDesign:n,tabType:"sample",Component:Cre}),wre({id:qee.AG,tabData:t.data.antigen_tab,metrics:t.metrics,experimentalDesign:n,tabType:"sample",Component:Ore}),wre({id:qee.CRISPR,tabData:t.data.crispr_tab,metrics:t.metrics,experimentalDesign:n,tabType:"sample",Component:Rre}),wre({id:qee.Custom,tabData:t.data.custom_feature_tab,metrics:t.metrics,experimentalDesign:n,tabType:"sample",Component:Nre}),wre({id:qee.Annotate,tabData:t.data.cell_annotation_tab,metrics:t.metrics,experimentalDesign:n,tabType:"sample",showParametersTable:!0,Component:Lre})))},Pre=()=>v.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},v.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22ZM18.5303 8.73744C18.7256 8.54217 18.7256 8.22559 18.5303 8.03033L17.6464 7.14645C17.4512 6.95118 17.1346 6.95118 16.9393 7.14645L10.6472 13.4386L7.73744 10.5288C7.54218 10.3335 7.22559 10.3335 7.03033 10.5288L6.14645 11.4127C5.95118 11.6079 5.95118 11.9245 6.14645 12.1198L10.2937 16.267C10.4889 16.4623 10.8055 16.4623 11.0008 16.267L18.5303 8.73744Z",fill:"#00B398"}));const Ire=function(){return v.createElement("div",{className:"callout callout-success"},v.createElement(Pre,null),v.createElement("div",{className:"callout-message"},v.createElement("h3",null,"No critical issues were identified in this analysis"),v.createElement("p",null,"However, we recommend that you examine key metrics below to double-check the results match your expectation.")))};var Fre=function(){return Fre=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Fre.apply(this,arguments)},zre=function(e){var t=e.csv;return v.createElement("section",{className:"csv"},v.createElement("div",{className:"summary_border"},v.createElement("h3",null,"Input CSV"),v.createElement("div",{className:"code-wrapper"},v.createElement("code",{"data-test":ate("experimental-design-csv")},t))))},jre=$8((function(e){var t=e.svg_string,n=e.sample_node,r={__html:t},i="\n    #".concat(n," polygon {\n      fill: #153057 !important;\n    }\n    #").concat(n," text {\n        fill: white !important;\n    }\n  ");return v.createElement("section",null,v.createElement("style",null,i),v.createElement("figure",{dangerouslySetInnerHTML:r,"data-test":ate("experimental-design-svg")}))}),(function(e){return{svg_string:e.svg_string,sample_node:e.sample_node}}));const Bre=function(e){var t=e.csv,n=e.svg;return v.createElement("article",{className:"experimental-design","data-test":ate("experimental-design"),key:Uee.ExperimentalDesign},v.createElement("section",null,n&&v.createElement(jre,Fre({},n)),t&&v.createElement(zre,{csv:t})))};var Ure=function(){return Ure=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ure.apply(this,arguments)},$re=function(e){var t=e.data,n=e.metrics,r=e.experimentalDesign,i=ete.GEX,a=i.heroMetrics,o=i.sequencing_metrics_table,s=i.mapping_metrics_table,l=i.rtl_probe_barcode_metrics,c=i.gdna_metrics,u=i.ocm_per_overhang_metrics,f=mte("Gene Expression",n);return v.createElement(v.Fragment,null,wte(a.entries,f)&&v.createElement(yre,{metrics:f,config:a,experimentalDesign:r}),v.createElement("div",{className:"half-plot"},(null==t?void 0:t.barcode_rank_plot)&&v.createElement(q8,Ure({dataTest:ate("barcode_rank_plot")},t.barcode_rank_plot))),wte(s.entries,f)&&v.createElement(yre,{metrics:f,config:s,experimentalDesign:r}),wte(o.entries,f)&&v.createElement(yre,{metrics:f,config:o,experimentalDesign:r}),"RTL"==r.multiplexing_method&&wte(l.entries,f)&&v.createElement(yre,{metrics:f,config:l,experimentalDesign:r}),"OH"==r.multiplexing_method&&wte(u.entries,f)&&v.createElement(yre,{metrics:f,config:u,experimentalDesign:r}),v.createElement("div",{className:"half-plot"},(null==t?void 0:t.sequencing_saturation_plot)&&v.createElement(H8,Ure({dataTest:ate("sequencing_saturation_plot")},t.sequencing_saturation_plot)),(null==t?void 0:t.median_genes_per_cell_plot)&&v.createElement(H8,Ure({dataTest:ate("median_genes_per_cell_plot")},t.median_genes_per_cell_plot))),wte(c.entries,f)&&v.createElement(yre,{metrics:f,config:c,experimentalDesign:r}))},qre=function(e){return Wre(e,"VDJ T",ete.VDJ_T)},Hre=function(e){return Wre(e,"VDJ T GD",ete.VDJ_T_GD)},Vre=function(e){return Wre(e,"VDJ B",ete.VDJ_B)};function Wre(e,t,n){var r=e.metrics,i=e.data,a=e.experimentalDesign,o=n.cell_calling_table,s=n.vdj_enrichment_metrics,l=n.sequencing_metrics_table,c=n.vdj_library_metrics_per_ocm_barcode,u=n.vdj_library_metrics_per_hashtag,f=mte(t,r);return v.createElement(v.Fragment,null,wte(o.entries,f)&&v.createElement(yre,{metrics:f,config:o,experimentalDesign:a}),wte(s.entries,f)&&v.createElement(yre,{metrics:f,config:s,experimentalDesign:a}),wte(l.entries,f)&&v.createElement(yre,{metrics:f,config:l,experimentalDesign:a}),"OH"==a.multiplexing_method&&wte(c.entries,f)&&v.createElement(yre,{metrics:f,config:c,experimentalDesign:a}),"Hashtag"==a.multiplexing_method&&wte(u.entries,f)&&v.createElement(yre,{metrics:f,config:u,experimentalDesign:a}),v.createElement("div",{className:"half-plot"},i.barcode_rank_plot&&v.createElement(q8,Ure({dataTest:ate("barcode_rank_plot")},i.barcode_rank_plot))))}var Gre=function(e){var t=e.data,n=e.metrics,r=e.experimentalDesign,i=ete.AB,a=i.heroMetrics,o=i.sequencing_metrics_table,s=(i.antibody_library_mapping_metrics,i.antibody_physical_library_metrics,i.rtl_probe_barcode_metrics),l=mte("Antibody Capture",n);return v.createElement(v.Fragment,null,(null==t?void 0:t.feature_histogram)&&v.createElement(H8,Ure({dataTest:ate("feature_histogram")},t.feature_histogram)),wte(a.entries,l)&&v.createElement(yre,{metrics:l,config:a,experimentalDesign:r}),wte(o.entries,l)&&v.createElement(yre,{metrics:l,config:o,experimentalDesign:r}),"RTL"==r.multiplexing_method&&wte(s.entries,l)&&v.createElement(yre,{metrics:l,config:s,experimentalDesign:r}),v.createElement("div",{className:"half-plot"},(null==t?void 0:t.barcode_rank_plot)&&v.createElement(q8,Ure({dataTest:ate("barcode_rank_plot")},t.barcode_rank_plot))))},Yre=function(e){var t=e.data,n=e.metrics,r=e.experimentalDesign,i=ete.AG,a=i.sequencing_metrics_table,o=i.antigen_physical_library_metrics,s=mte("Antigen Capture",n);return v.createElement(v.Fragment,null,(null==t?void 0:t.feature_histogram)&&v.createElement(H8,Ure({dataTest:ate("feature_histogram")},t.feature_histogram)),wte(a.entries,s)&&v.createElement(yre,{metrics:s,config:a,experimentalDesign:r}),wte(o.entries,s)&&v.createElement(yre,{metrics:s,config:o,experimentalDesign:r}),v.createElement("div",{className:"half-plot"},(null==t?void 0:t.barcode_rank_plot)&&v.createElement(q8,Ure({dataTest:ate("barcode_rank_plot")},t.barcode_rank_plot))))},Xre=function(e){var t=e.data,n=e.metrics,r=e.experimentalDesign,i=ete.CMO,a=i.heroMetrics,o=i.multiplexing_cmo_metrics,s=i.sequencing_metrics_table,l=mte("Multiplexing Capture",n);return v.createElement(v.Fragment,null,wte(a.entries,l)&&v.createElement(yre,{metrics:l,config:a,experimentalDesign:r}),(null==t?void 0:t.jibes_histogram)&&v.createElement(H8,Ure({dataTest:ate("jibes_histogram")},t.jibes_histogram)),wte(o.entries,l)&&v.createElement(yre,{metrics:l,config:o,experimentalDesign:r}),wte(s.entries,l)&&v.createElement(yre,{metrics:l,config:s,experimentalDesign:r}),(null==t?void 0:t.jibes_biplot)&&v.createElement(V8,Ure({dataTest:ate("jibes_biplot")},t.jibes_biplot)),v.createElement("div",{className:"half-plot"},t.cmo_umi_projection_plot&&v.createElement(H8,Ure({dataTest:ate("cmo_umi_projection_plot")},t.cmo_umi_projection_plot)),t.cmo_tags_projection_plot&&v.createElement(H8,Ure({dataTest:ate("cmo_tags_projection_plot")},t.cmo_tags_projection_plot))),v.createElement("div",{className:"half-plot"},(null==t?void 0:t.barcode_rank_plot)&&v.createElement(q8,Ure({dataTest:ate("barcode_rank_plot")},t.barcode_rank_plot))))},Kre=function(e){var t=e.data,n=e.metrics,r=e.experimentalDesign,i=ete.Hashtag,a=i.heroMetrics,o=i.multiplexing_hashtag_metrics,s=mte("Hashtag",n);return v.createElement(v.Fragment,null,wte(a.entries,s)&&v.createElement(yre,{metrics:s,config:a,experimentalDesign:r}),(null==t?void 0:t.jibes_histogram)&&v.createElement(H8,Ure({dataTest:ate("jibes_histogram")},t.jibes_histogram)),wte(o.entries,s)&&v.createElement(yre,{metrics:s,config:o,experimentalDesign:r}),(null==t?void 0:t.jibes_biplot)&&v.createElement(V8,Ure({dataTest:ate("jibes_biplot")},t.jibes_biplot)),v.createElement("div",{className:"half-plot"},t.hashtag_umi_projection_plot&&v.createElement(H8,Ure({dataTest:ate("hashtag_umi_projection_plot")},t.hashtag_umi_projection_plot)),t.hashtag_tags_projection_plot&&v.createElement(H8,Ure({dataTest:ate("hashtag_tags_projection_plot")},t.hashtag_tags_projection_plot))))},Zre=function(e){var t=e.data,n=e.metrics,r=e.experimentalDesign,i=ete.CRISPR,a=i.heroMetrics,o=i.sequencing_metrics_table,s=i.rtl_probe_barcode_metrics,l=mte("CRISPR Guide Capture",n);return v.createElement(v.Fragment,null,wte(a.entries,l)&&v.createElement(yre,{metrics:l,config:a,experimentalDesign:r}),wte(o.entries,l)&&v.createElement(yre,{metrics:l,config:o,experimentalDesign:r}),wte(s.entries,l)&&v.createElement(yre,{metrics:l,config:s,experimentalDesign:r}),(null==t?void 0:t.barcode_rank_plot)&&v.createElement(q8,Ure({dataTest:ate("barcode_rank_plot")},t.barcode_rank_plot)))},Jre=function(e){var t=e.data,n=e.metrics,r=e.experimentalDesign,i=ete.Custom,a=i.heroMetrics,o=i.sequencing_metrics_table,s=mte("Custom Feature",n);return v.createElement(v.Fragment,null,wte(a.entries,s)&&v.createElement(yre,{metrics:s,config:a,experimentalDesign:r}),wte(o.entries,s)&&v.createElement(yre,{metrics:s,config:o,experimentalDesign:r}),v.createElement("div",{className:"half-plot"},(null==t?void 0:t.barcode_rank_plot)&&v.createElement(q8,Ure({dataTest:ate("barcode_rank_plot")},t.barcode_rank_plot))))};const Qre=function(e){var t,n=e.data,r=e.perSample,i=e.experimentalDesign,a=(0,v.useState)(hte(n)[0]),o=a[0],s=a[1],l=!Ate(n.data)&&!Ate(r[0].data);return v.createElement("article",{className:"summary","data-test":ate("library"),key:Uee.Library},v.createElement(Rte,{idKey:Ete,id:n.data.header_info[Ete],sampleIdKey:kte,sampleId:r[0].data.header_info[kte],descriptionKey:Tte,description:n.data.header_info[Tte],pipelineVersion:n.data.header_info[Mte],headerType:"library"}),l&&v.createElement(Ire,null),v.createElement(Pn,{activeKey:o,onSelect:function(e){null!==e&&s(e)},unmountOnExit:!0},wre({id:"".concat(qee.GEX," Library"),tabData:n.data.gex_tab,metrics:n.metrics,experimentalDesign:i,tabType:"library",showParametersTable:!0,Component:$re}),wre({id:"".concat(qee.VDJ_T," Library"),tabData:n.data.vdj_t_tab,metrics:n.metrics,experimentalDesign:i,tabType:"library",showParametersTable:!0,Component:qre}),wre({id:"".concat(qee.VDJ_B," Library"),tabData:n.data.vdj_b_tab,metrics:n.metrics,experimentalDesign:i,tabType:"library",showParametersTable:!0,Component:Vre}),wre({id:"".concat(qee.VDJ_T_GD," Library"),tabData:n.data.vdj_t_gd_tab,metrics:n.metrics,experimentalDesign:i,tabType:"library",showParametersTable:!0,Component:Hre}),wre({id:"".concat(qee.AB," Library"),tabData:n.data.antibody_tab,metrics:n.metrics,experimentalDesign:i,tabType:"library",showParametersTable:!0,Component:Gre}),wre({id:"".concat(qee.AG," Library"),tabData:n.data.antigen_tab,metrics:n.metrics,experimentalDesign:i,tabType:"library",showParametersTable:!0,Component:Yre}),wre({id:"".concat(qee.CRISPR," Library"),tabData:n.data.crispr_tab,metrics:n.metrics,experimentalDesign:i,tabType:"library",showParametersTable:!0,Component:Zre}),wre({id:"".concat(qee.CMO," Library"),tabData:n.data.cmo_tab,metrics:n.metrics,experimentalDesign:i,tabType:"library",showParametersTable:!0,Component:Xre}),wre({id:qee.Hashtag,tabData:n.data.hashtag_tab,metrics:n.metrics,experimentalDesign:i,tabType:"library",showParametersTable:!0,Component:Kre}),wre({id:"".concat(qee.Custom," Library"),tabData:n.data.custom_feature_tab,metrics:n.metrics,experimentalDesign:i,tabType:"library",showParametersTable:!0,Component:Jre}),r.length?v.createElement(Xt,{eventKey:"per_sample",key:"per_sample",title:v.createElement(Lte,{title:"Sample",alertType:ite((t=r[0].data,Object.values(t).filter((function(e){return null!==e})).map((function(e){return e.alerts||[]})).flat()))})},r.map((function(e){return v.createElement(Dre,{data:e,experimentalDesign:i,key:e.data.header_info[kte]})}))):null,v.createElement(Xt,{eventKey:"experimental_design",key:"experimental_design",title:v.createElement(Lte,{title:"Experimental Design"})},v.createElement(Bre,Ure({},i)))))};var eie={GEX:{cell_calling_table:{title:"Cell Calling Quality",hero:!0,entries:[{key:"cell_associated_partitions",category:"Library"},{key:"reads_in_cell_associated_partitions",category:"Library",help:Jee},{key:"median_genes_per_singlet",category:"Cells"},{key:"median_umi_per_singlet",category:"Cells"},{key:"total_genes_detected",category:"Cells"}]},cell_calling_barnyard:{title:"Cell Calling Quality",hero:!0,entries:[{key:"cell_associated_partitions",category:"Library"},{key:"reads_in_cell_associated_partitions",category:"Library"}]},barnyard_table:{title:"Cells per genome",entries:[{key:"genome",category:"Cells"},{key:"total_singlets",category:"Cells"},{key:"confidently_mapped_reads_in_cells",category:"Cells",help:Jee},{key:"median_genes_per_singlet",category:"Cells"},{key:"median_umi_per_singlet",category:"Cells"},{key:"total_genes_detected",category:"Cells"},{key:"mean_reads_per_cell",category:"Cells"}],orderBy:["total_singlets"]},mapping_metrics_table:{title:"Mapping Quality",entries:[{key:"confidently_mapped_to_transcriptome",category:"Library"},{key:"mapped_to_genome",category:"Library"},{key:"confidently_mapped_to_genome",category:"Library"},{key:"confidently_mapped_to_exonic_regions",category:"Library"},{key:"confidently_mapped_to_intronic_regions",category:"Library"},{key:"confidently_mapped_to_intergenic_regions",category:"Library"},{key:"confidently_mapped_antisense",category:"Library"},{key:"reads_mapped_to_probe_set",category:"Library"},{key:"reads_confidently_mapped_to_probe_set",category:"Library"},{key:"reads_confidently_mapped_to_filtered_probe_set",category:"Library"},{key:"reads_half_mapped_to_probe_set",category:"Library"},{key:"reads_split_mapped_to_probe_set",category:"Library"}]},sequencing_metrics_table:{title:"Sequencing Quality",help:"Metrics per sequencing run.",entries:[{key:"fastq_id",category:"Library"},{key:"number_of_reads",category:"Library"},{key:"mean_reads_per_cell_associated_partition",category:"Library"},{key:"sequencing_saturation",category:"Library"},{key:"valid_barcodes",help:Kee,category:"Library"},{key:"valid_umis",category:"Library"},{key:"q30_barcode",help:Yee,category:"Library"},{key:"q30_umi",category:"Library"},{key:"q30_read1",help:Xee,category:"Library"},{key:"q30_read2",category:"Library"}]},gdna_metrics:{title:"UMIs from Genomic DNA",entries:[{key:"estimated_gdna_content",category:"Library"},{key:"estimated_gdna_unspliced_threshold",category:"Library"}]}},VDJ_B:{cell_calling_table:{title:"Cell Calling Quality",hero:!0,entries:[{key:"vdj_filtered_bcs",category:"Library"},{key:"multi_vdj_assembly_contig_pair_productive_full_len_bc_frac",category:"Cells"},{key:"IGK_IGH_vdj_assembly_contig_pair_productive_full_len_bc_frac",category:"Cells"},{key:"IGL_IGH_vdj_assembly_contig_pair_productive_full_len_bc_frac",category:"Cells"},{key:"IGH_vdj_assembly_prod_cdr_bc_frac",category:"Cells"},{key:"IGK_vdj_assembly_prod_cdr_bc_frac",category:"Cells"},{key:"IGL_vdj_assembly_prod_cdr_bc_frac",category:"Cells"},{key:"vdj_filtered_bcs_cum_frac",category:"Library"}]},vdj_enrichment_sensitivity:{title:"VDJ Sensitivity and Enrichment",entries:[{key:"IGH_vdj_assembly_umis_per_cell_median",category:"Cells"},{key:"IGK_vdj_assembly_umis_per_cell_median",category:"Cells"},{key:"IGL_vdj_assembly_umis_per_cell_median",category:"Cells"},{key:"multi_vdj_recombinome_mapped_reads_frac",category:"Library"},{key:"IGH_vdj_recombinome_mapped_reads_frac",category:"Library"},{key:"IGK_vdj_recombinome_mapped_reads_frac",category:"Library"},{key:"IGL_vdj_recombinome_mapped_reads_frac",category:"Library"}]},vdj_sequencing_quality:{title:"VDJ Sequencing Quality",entries:[{key:"fastq_id",category:"Library"},{key:"number_of_reads",category:"Library"},{key:"vdj_total_raw_read_pairs_per_filtered_bc",category:"Library"},{key:"vdj_assemblable_read_pairs_per_filtered_bc",category:"Library"},{key:"vdj_good_bc_frac",category:"Library"},{key:"q30_barcode",help:Yee,category:"Library"},{key:"q30_umi",category:"Library"},{key:"q30_read1",help:Xee,category:"Library"},{key:"q30_read2",category:"Library"}]},vdj_clonotype_metrics:{title:"Clonotype Metrics",entries:[{key:"multi_raw_vdj_paired_clonotype_diversity",category:"Cells"}]}},VDJ_T:{cell_calling_table:{title:"Cell Calling Quality",hero:!0,entries:[{key:"vdj_filtered_bcs",category:"Library"},{key:"multi_vdj_assembly_contig_pair_productive_full_len_bc_count",category:"Cells"},{key:"TRA_TRB_vdj_assembly_contig_pair_productive_full_len_bc_frac",category:"Cells"},{key:"TRA_vdj_assembly_prod_cdr_bc_frac",category:"Cells"},{key:"TRB_vdj_assembly_prod_cdr_bc_frac",category:"Cells"},{key:"vdj_filtered_bcs_cum_frac",category:"Library"}]},vdj_enrichment_sensitivity:{title:"VDJ Enrichment and Sensitivity",entries:[{key:"TRA_vdj_assembly_umis_per_cell_median",category:"Cells"},{key:"TRB_vdj_assembly_umis_per_cell_median",category:"Cells"},{key:"multi_vdj_recombinome_mapped_reads_frac",category:"Library"},{key:"TRA_vdj_recombinome_mapped_reads_frac",category:"Library"},{key:"TRB_vdj_recombinome_mapped_reads_frac",category:"Library"}]},vdj_sequencing_quality:{title:"VDJ Sequencing Quality",entries:[{key:"fastq_id",category:"Library"},{key:"number_of_reads",category:"Library"},{key:"vdj_total_raw_read_pairs_per_filtered_bc",category:"Library"},{key:"vdj_assemblable_read_pairs_per_filtered_bc",category:"Library"},{key:"vdj_good_bc_frac",category:"Library"},{key:"q30_barcode",help:Yee,category:"Library"},{key:"q30_umi",category:"Library"},{key:"q30_read1",help:Xee,category:"Library"},{key:"q30_read2",category:"Library"}]},vdj_clonotype_metrics:{title:"Clonotype Metrics",entries:[{key:"multi_raw_vdj_paired_clonotype_diversity",category:"Cells"}]}},VDJ_T_GD:{cell_calling_table:{title:"Cell Calling Quality",hero:!0,entries:[{key:"vdj_filtered_bcs",category:"Library"},{key:"multi_vdj_assembly_contig_pair_productive_full_len_bc_frac",category:"Cells"},{key:"TRG_TRD_vdj_assembly_contig_pair_productive_full_len_bc_frac",category:"Cells"},{key:"TRG_vdj_assembly_prod_cdr_bc_frac",category:"Cells"},{key:"TRD_vdj_assembly_prod_cdr_bc_frac",category:"Cells"},{key:"vdj_filtered_bcs_cum_frac",category:"Library"}]},vdj_enrichment_sensitivity:{title:"VDJ Sensitivity and Enrichment",entries:[{key:"TRG_vdj_assembly_umis_per_cell_median",category:"Cells"},{key:"TRD_vdj_assembly_umis_per_cell_median",category:"Cells"},{key:"multi_vdj_recombinome_mapped_reads_frac",category:"Library"},{key:"TRG_vdj_recombinome_mapped_reads_frac",category:"Library"},{key:"TRD_vdj_recombinome_mapped_reads_frac",category:"Library"}]},vdj_sequencing_quality:{title:"VDJ Sequencing Quality",entries:[{key:"fastq_id",category:"Library"},{key:"number_of_reads",category:"Library"},{key:"vdj_total_raw_read_pairs_per_filtered_bc",category:"Library"},{key:"vdj_assemblable_read_pairs_per_filtered_bc",category:"Library"},{key:"vdj_good_bc_frac",category:"Library"},{key:"q30_barcode",help:Yee,category:"Library"},{key:"q30_umi",category:"Library"},{key:"q30_read1",help:Xee,category:"Library"},{key:"q30_read2",category:"Library"}]},vdj_clonotype_metrics:{title:"Clonotype Metrics",entries:[{key:"multi_raw_vdj_paired_clonotype_diversity",category:"Cells"}]}},AB:{anitbody_expression:{title:"Antibody Expression",hero:!0,entries:[{key:"cell_associated_partitions",category:"Library"},{key:"fraction_antibody_reads",category:"Library"},{key:"reads_in_cell_associated_partitions",category:"Library"},{key:"fraction_antibody_reads_usable",category:"Library"},{key:"antibody_reads_usable_per_cell",category:"Cells"},{key:"fraction_reads_in_aggregate_barcodes",category:"Library"},{key:"median_umis_per_singlet",category:"Cells"}]},antibody_sequencing_quality:{title:"Antibody Sequencing Quality",entries:[{key:"fastq_id",category:"Library"},{key:"number_of_reads",category:"Library"},{key:"mean_reads_per_cell_associated_partition",category:"Library"},{key:"sequencing_saturation",category:"Library"},{key:"valid_barcodes",help:Kee,category:"Library"},{key:"valid_umis",category:"Library"},{key:"q30_barcode",help:Yee,category:"Library"},{key:"q30_umi",category:"Library"},{key:"q30_read1",help:Xee,category:"Library"}]}},AG:{antigenReads:{title:"Antigen Reads",entries:[{key:"fraction_antigen_reads",category:"Library"},{key:"reads_in_cell_associated_partitions",category:"Library"},{key:"fraction_antigen_reads_usable",category:"Library"},{key:"fraction_unknown_antigen",category:"Library"},{key:"fraction_reads_in_aggregate_barcodes",category:"Library"}],hero:!0},antigenExpression:{title:"Antigen Expression",entries:[{key:"feature_type",category:"Cells"},{key:"total_singlets",category:"Cells"},{key:"median_umis_per_singlet",category:"Cells"},{key:"antigen_reads_usable_per_cell",category:"Cells"}]},antigenSequencingQuality:{title:"Antigen Sequencing Quality",entries:[{key:"fastq_id",category:"Library"},{key:"number_of_reads",category:"Library"},{key:"mean_reads_per_cell_associated_partition",category:"Library"},{key:"sequencing_saturation",category:"Library"},{key:"valid_barcodes",help:Kee,category:"Library"},{key:"valid_umis",category:"Library"},{key:"q30_barcode",help:Yee,category:"Library"},{key:"q30_umi",category:"Library"},{key:"q30_read1",help:Xee,category:"Library"},{key:"q30_read2",category:"Library"}],orderBy:["mean_reads_per_cell_associated_partition"]}},CRISPR:{crispr_guides_expression:{title:"CRISPR Guides Expression",hero:!0,entries:[{key:"fraction_guide_reads",category:"Library"},{key:"reads_in_cell_associated_partitions",category:"Library"},{key:"fraction_guide_reads_usable",category:"Library"},{key:"fraction_reads_with_putative_protospacer",category:"Library"},{key:"fraction_protospacer_not_recognized",category:"Library"},{key:"cells_with_one_or_more_protospacers_detected",category:"Cells"},{key:"cells_with_two_or_more_protospacers_detected",category:"Cells"},{key:"median_umis_per_singlet",category:"Cells"}]},crispr_sequencing_quality:{title:"CRISPR Sequencing Quality",entries:[{key:"fastq_id",category:"Library"},{key:"number_of_reads",category:"Library"},{key:"mean_reads_per_cell_associated_partition",category:"Library"},{key:"sequencing_saturation",category:"Library"},{key:"valid_barcodes",help:Kee,category:"Library"},{key:"valid_umis",category:"Library"},{key:"q30_barcode",help:Yee,category:"Library"},{key:"q30_umi",category:"Library"},{key:"q30_read1",help:Xee,category:"Library"}],orderBy:["mean_reads_per_cell_associated_partition"]}},Custom:{heroMetrics:{title:"Feature Expression",hero:!0,entries:[{key:"fraction_feature_reads",category:"Library"},{key:"reads_in_cell_associated_partitions",category:"Library"},{key:"fraction_feature_reads_usable",category:"Library"},{key:"feature_reads_usable_per_cell",category:"Cells"},{key:"median_umis_per_singlet",category:"Cells"}]},sequencing_quality_table:{title:"Sequencing Quality",help:"Metrics per sequencing run.",entries:[{key:"fastq_id",category:"Library"},{key:"number_of_reads",category:"Library"},{key:"mean_reads_per_cell_associated_partition",category:"Library"},{key:"sequencing_saturation",category:"Library"},{key:"valid_barcodes",help:Kee,category:"Library"},{key:"valid_umis",category:"Library"},{key:"q30_barcode",help:Yee,category:"Library"},{key:"q30_umi",category:"Library"},{key:"q30_read1",help:Xee,category:"Library"},{key:"q30_read2",category:"Library"}]}}},tie=function(){return tie=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},tie.apply(this,arguments)},nie=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},rie=function(e){var t=e.data,n=e.metrics,r=e.experimentalDesign,i=eie.GEX,a=i.cell_calling_table,o=i.cell_calling_barnyard,s=i.barnyard_table,l=i.sequencing_metrics_table,c=i.mapping_metrics_table,u=i.gdna_metrics,f=mte("Gene Expression",n),d=r.is_barnyard&&r.is_rtl,h=s.entries.filter((function(e){return"mean_reads_per_cell"!==e.key})),p={title:s.title,entries:h};return v.createElement(v.Fragment,null,wte(a.entries,f)&&!r.is_barnyard&&v.createElement(yre,{metrics:f,config:a,experimentalDesign:r}),wte(o.entries,f)&&r.is_barnyard&&v.createElement(yre,{metrics:f,config:o,experimentalDesign:r}),wte(s.entries,f)&&r.is_barnyard&&v.createElement(yre,{config:r.is_rtl?p:s,metrics:f,experimentalDesign:r}),(null==t?void 0:t.barcode_rank_plot)&&!d&&v.createElement("div",{className:"half-plot"},v.createElement(q8,tie({dataTest:ate("barcode_rank_plot")},t.barcode_rank_plot))),wte(c.entries,f)&&v.createElement(yre,{config:c,metrics:f,experimentalDesign:r}),wte(l.entries,f)&&v.createElement(yre,{metrics:f,config:l,experimentalDesign:r}),v.createElement("div",{className:"half-plot"},(null==t?void 0:t.sequencing_saturation_plot)&&v.createElement(H8,tie({dataTest:ate("sequencing_saturation_plot")},t.sequencing_saturation_plot)),(null==t?void 0:t.median_genes_per_cell_plot)&&v.createElement(H8,tie({dataTest:ate("median_genes_per_cell_plot")},t.median_genes_per_cell_plot))),(null==t?void 0:t.clustering_and_diffexp_plots)&&v.createElement(xo,tie({dataTest:ate("clustering_and_diffexp_plots")},t.clustering_and_diffexp_plots)),wte(u.entries,f)&&v.createElement(yre,{metrics:f,config:u,experimentalDesign:r}))},iie=function(e){return sie(e,"VDJ T",eie.VDJ_T)},aie=function(e){return sie(e,"VDJ T GD",eie.VDJ_T_GD)},oie=function(e){return sie(e,"VDJ B",eie.VDJ_B)};function sie(e,t,n){var r=e.metrics,i=e.data,a=e.experimentalDesign,o=n.cell_calling_table,s=n.vdj_enrichment_sensitivity,l=n.vdj_sequencing_quality,c=n.vdj_clonotype_metrics,u=mte(t,r);return v.createElement(v.Fragment,null,wte(o.entries,u)&&v.createElement(yre,{config:o,metrics:u,experimentalDesign:a}),i.barcode_rank_plot&&v.createElement("div",{className:"half-plot"},(null==i?void 0:i.barcode_rank_plot)&&v.createElement(q8,tie({dataTest:ate("barcode_rank_plot")},i.barcode_rank_plot))),wte(s.entries,u)&&v.createElement(yre,{config:s,metrics:u,experimentalDesign:a}),wte(l.entries,u)&&v.createElement(yre,{config:l,metrics:u,experimentalDesign:a}),wte(c.entries,u)&&v.createElement(yre,{config:c,metrics:u,experimentalDesign:a}),i.clonotype_info&&v.createElement(G8,tie({dataTest:ate("clonotype_info")},i.clonotype_info)))}var lie=function(e){var t=e.data,n=e.metrics,r=e.experimentalDesign,i=eie.AB,a=i.anitbody_expression,o=i.antibody_sequencing_quality,s=mte("Antibody Capture",n);return v.createElement(v.Fragment,null,wte(a.entries,s)&&v.createElement(yre,{config:a,metrics:s,experimentalDesign:r}),t.feature_histogram&&v.createElement(H8,tie({dataTest:ate("feature_histogram")},t.feature_histogram)),wte(o.entries,s)&&v.createElement(yre,{config:o,metrics:s,experimentalDesign:r}),t.antibody_treemap&&v.createElement(H8,tie({dataTest:ate("antibody_treemap")},t.antibody_treemap)),v.createElement("div",{className:"half-plot"},t.barcode_rank_plot&&v.createElement(H8,tie({dataTest:ate("barcode_rank_plot")},t.barcode_rank_plot))),t.clustering_and_diffexp_plots&&v.createElement(xo,tie({dataTest:ate("clustering_and_diffexp_plots")},t.clustering_and_diffexp_plots)),v.createElement("div",{className:"half-plot"},t.projection_plot&&v.createElement(H8,tie({dataTest:ate("projection_plot")},t.projection_plot))))},cie=function(e){var t=e.data,n=e.metrics,r=e.experimentalDesign,i=eie.AG,a=i.antigenExpression,o=i.antigenReads,s=i.antigenSequencingQuality,l=mte("Antigen Capture",n);return v.createElement(v.Fragment,null,wte(o.entries,l)&&v.createElement(yre,{metrics:l,config:o,experimentalDesign:r}),wte(a.entries,l)&&v.createElement(yre,{metrics:l,config:a,experimentalDesign:r}),t.clonotype_clustermap&&v.createElement(H8,tie({dataTest:ate("clonotype_clustermap")},t.clonotype_clustermap)),wte(s.entries,l)&&v.createElement(yre,{metrics:l,config:s,experimentalDesign:r}),t.antigen_treemap&&v.createElement(H8,tie({dataTest:ate("antigen_treemap")},t.antigen_treemap)),(null==t?void 0:t.feature_histogram)&&v.createElement(H8,tie({dataTest:ate("feature_histogram")},t.feature_histogram)),v.createElement("div",{className:"half-plot"},(null==t?void 0:t.barcode_rank_plot)&&v.createElement(q8,tie({dataTest:ate("barcode_rank_plot")},t.barcode_rank_plot))))},uie=function(e){var t=e.data,n=e.metrics,r=e.experimentalDesign,i=eie.CRISPR,a=i.crispr_guides_expression,o=i.crispr_sequencing_quality,s=mte("CRISPR Guide Capture",n);return v.createElement(v.Fragment,null,wte(a.entries,s)&&v.createElement(yre,{config:a,metrics:s,experimentalDesign:r}),wte(o.entries,s)&&v.createElement(yre,{config:o,metrics:s,experimentalDesign:r}),v.createElement("div",{className:"half-plot"},t.barcode_rank_plot&&v.createElement(H8,tie({dataTest:ate("barcode_rank_plot")},t.barcode_rank_plot))),v.createElement("div",{className:"half-plot"},t.projection_plot&&v.createElement(H8,tie({dataTest:ate("projection_plot")},t.projection_plot))))},fie=function(e){var t=e.data,n=e.metrics,r=e.experimentalDesign,i=eie.Custom,a=i.heroMetrics,o=i.sequencing_quality_table,s=mte("Custom Feature",n);return v.createElement(v.Fragment,null,wte(a.entries,s)&&v.createElement(yre,{metrics:s,config:a,experimentalDesign:r}),wte(o.entries,s)&&v.createElement(yre,{metrics:s,config:o,experimentalDesign:r}),v.createElement("div",{className:"half-plot"},t.barcode_rank_plot&&v.createElement(H8,tie({dataTest:ate("barcode_rank_plot")},t.barcode_rank_plot))),v.createElement("div",{className:"half-plot"},t.projection_plot&&v.createElement(H8,tie({dataTest:ate("projection_plot")},t.projection_plot))))},die=function(e){var t=e.data;e.metrics,e.experimentalDesign;return v.createElement(v.Fragment,null,t.cell_annotation_cell_types_chart&&v.createElement(ste,tie({dataTest:ate("cell_annotation_cell_types_chart")},t.cell_annotation_cell_types_chart)),v.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",gap:"2rem",flexWrap:"wrap"}},t.cell_annotation_violin_plot_chart&&v.createElement(ste,tie({dataTest:ate("cell_annotation_violin_plot_chart")},t.cell_annotation_violin_plot_chart)),t.cell_annotation_umap_plot_chart&&v.createElement(ste,tie({dataTest:ate("cell_annotation_umap_plot_chart")},t.cell_annotation_umap_plot_chart))),t.cell_annotation_diffexp_table&&v.createElement(ute,tie({dataTest:ate("cell_annotation_diffexp_table")},t.cell_annotation_diffexp_table)))};const hie=function(e){var t=e.library,n=e.perSample,r=e.experimentalDesign,i=(0,v.useState)(hte(t)[0]),a=i[0],o=i[1],s=!Ate(t.data)&&!Ate(n[0].data),l=nie(nie([],n[0].metrics,!0),t.metrics,!0);return v.createElement("article",{className:"summary","data-test":ate("library"),key:Uee.Library},v.createElement(Rte,{idKey:Ete,id:t.data.header_info[Ete],sampleIdKey:kte,sampleId:n[0].data.header_info[kte],descriptionKey:Tte,description:t.data.header_info[Tte],pipelineVersion:t.data.header_info[Mte],headerType:"library"}),s&&v.createElement(Ire,null),v.createElement(Pn,{activeKey:a,onSelect:function(e){null!==e&&o(e)},unmountOnExit:!0},wre({id:qee.GEX,tabData:S()(n[0].data.gex_tab,t.data.gex_tab),metrics:l,experimentalDesign:r,tabType:"library",showParametersTable:!0,Component:rie}),wre({id:qee.VDJ_B,tabData:S()(n[0].data.vdj_b_tab,t.data.vdj_b_tab),metrics:l,experimentalDesign:r,tabType:"library",showParametersTable:!0,Component:oie}),wre({id:qee.VDJ_T,tabData:S()(n[0].data.vdj_t_tab,t.data.vdj_t_tab),metrics:l,experimentalDesign:r,tabType:"library",showParametersTable:!0,Component:iie}),wre({id:qee.VDJ_T_GD,tabData:S()(n[0].data.vdj_t_gd_tab,t.data.vdj_t_gd_tab),metrics:l,experimentalDesign:r,tabType:"library",showParametersTable:!0,Component:aie}),wre({id:qee.AB,tabData:S()(n[0].data.antibody_tab,t.data.antibody_tab),metrics:l,experimentalDesign:r,tabType:"library",showParametersTable:!0,Component:lie}),wre({id:qee.AG,tabData:S()(n[0].data.antigen_tab,t.data.antigen_tab),metrics:l,experimentalDesign:r,tabType:"library",Component:cie}),wre({id:qee.CRISPR,tabData:S()(n[0].data.crispr_tab,t.data.crispr_tab),metrics:l,experimentalDesign:r,tabType:"library",showParametersTable:!0,Component:uie}),wre({id:qee.Custom,tabData:S()(n[0].data.custom_feature_tab,t.data.custom_feature_tab),metrics:l,experimentalDesign:r,tabType:"library",showParametersTable:!0,Component:fie}),wre({id:qee.Annotate,tabData:n[0].data.cell_annotation_tab,metrics:l,experimentalDesign:r,tabType:"sample",showParametersTable:!0,Component:die}),v.createElement(Xt,{eventKey:"experimental_design",key:"experimental_design",title:v.createElement(Lte,{title:"Experimental Design"})},v.createElement(Bre,tie({},r)))))};function pie(){return pie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pie.apply(null,arguments)}const mie=e=>v.createElement("svg",pie({width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),v.createElement("path",{d:"M17.4727 0L11.7422 0.0351562C11.4609 0.0351562 11.25 0.246094 11.25 0.527344V1.6875C11.25 1.96875 11.4609 2.21484 11.7422 2.21484L14.3438 2.10938L14.4141 2.17969L4.60547 11.9883C4.53516 12.0586 4.46484 12.1992 4.46484 12.2695C4.46484 12.375 4.53516 12.5156 4.60547 12.5859L5.41406 13.3945C5.48438 13.4648 5.625 13.5352 5.73047 13.5352C5.80078 13.5352 5.94141 13.4648 6.01172 13.3945L15.8203 3.58594L15.8906 3.65625L15.7852 6.25781C15.7852 6.53906 16.0312 6.75 16.3125 6.75H17.4727C17.7539 6.75 17.9648 6.53906 17.9648 6.25781L18 0.527344C18 0.246094 17.7539 0 17.4727 0ZM15.1875 10.125H14.625C14.3086 10.125 14.0625 10.4062 14.0625 10.6875V16.1016C14.0625 16.2422 13.957 16.3125 13.8516 16.3125H1.89844C1.75781 16.3125 1.6875 16.2422 1.6875 16.1016V4.14844C1.6875 4.04297 1.75781 3.9375 1.89844 3.9375H7.3125C7.59375 3.9375 7.875 3.69141 7.875 3.375V2.8125C7.875 2.53125 7.59375 2.25 7.3125 2.25H1.6875C0.738281 2.25 0 3.02344 0 3.9375V16.3125C0 17.2617 0.738281 18 1.6875 18H14.0625C14.9766 18 15.75 17.2617 15.75 16.3125V10.6875C15.75 10.4062 15.4688 10.125 15.1875 10.125Z",fill:"white"}));const gie=function(e){var t=e.children,n=e.headerText;return v.createElement("div",{className:"page-layout"},v.createElement("header",{className:"page-header"},v.createElement("div",{className:"branding"},v.createElement("img",{src:"https://cdn.10xgenomics.com/image/upload/v1694905936/logos/10x-genomics/10x_Logo_Horizontal_Reverse.svg",alt:"10x Genomics"}),v.createElement("h3",null,n)),v.createElement("a",{className:"support-button",href:"https://www.10xgenomics.com/support/software/cell-ranger/latest/analysis/cr-outputs-web-summary"},v.createElement(mie,null),v.createElement("span",null,"Support Center"))),v.createElement("section",{className:"optional-multiplexed-summary content"},t))};const vie=function(e){e.per_sample.forEach((function(e){!function(e){var t,n,r,i,a,o,s=null===(n=null===(t=e.gex_tab)||void 0===t?void 0:t.content.clustering_and_diffexp_plots)||void 0===n?void 0:n.right_plots;s&&l7(s);var l=null===(i=null===(r=e.antibody_tab)||void 0===r?void 0:r.content.clustering_and_diffexp_plots)||void 0===i?void 0:i.right_plots;l&&l7(l);var c=null===(o=null===(a=e.antigen_tab)||void 0===a?void 0:a.content.clustering_and_diffexp_plots)||void 0===o?void 0:o.right_plots;c&&l7(c)}(e.data)}));var t=!!e.experimental_design.multiplexing_method;return v.createElement(gie,{headerText:pte(e)},t?v.createElement(Qre,{data:e.library,perSample:e.per_sample,experimentalDesign:e.experimental_design}):v.createElement(hie,{library:e.library,perSample:e.per_sample,experimentalDesign:e.experimental_design}))},yie=e=>{let{small_image:t,large_image:n,sizes:r}=e;return v.createElement("div",{style:{height:`${r.small_height}px`,width:`${r.small_width}px`}},v.createElement(k8,{smallImage:{isFluidWidth:!0,src:t},largeImage:{src:n,width:r.large_width,height:r.large_height},lensStyle:{backgroundColor:"rgba(0,0,0,.6)"},enlargedImagePosition:"over"}))};var bie=n(15968),xie=n.n(bie);function _ie(){return _ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_ie.apply(null,arguments)}function wie(e){let t,n,{disabled:r,...i}=e;return!0===r?(t="none",n="#545454"):(t="auto",n="#F0F0F0"),v.createElement("svg",_ie({width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",pointerEvents:t},i),v.createElement("path",{d:"M8.24996 0.75C3.96871 0.75 0.468714 4.25 0.499964 8.53125C0.499964 12.7812 3.96871 16.25 8.24996 16.25C10.2187 16.25 12.0625 15.5 13.4375 14.2812C13.5937 14.125 13.5937 13.875 13.4375 13.7188L12.1875 12.4688C12.0625 12.3438 11.8437 12.3438 11.6875 12.4688C10.7187 13.3125 9.53121 13.75 8.24996 13.75C5.31246 13.75 2.99996 11.4062 2.99996 8.5625C2.96871 5.5625 5.40621 3.25 8.28121 3.28125C9.59371 3.28125 10.8437 3.78125 11.8125 4.6875L10.5 6C10.0312 6.46875 10.375 7.25 11.0312 7.25H15.25C15.6562 7.25 16 6.9375 16 6.5V2.3125C16 1.65625 15.1875 1.3125 14.7187 1.78125L13.5937 2.90625C12.1875 1.59375 10.3125 0.78125 8.24996 0.75Z",fill:n}))}const Aie=[2,8],kie="Transcript Density Map",Eie="Mean Q-Score",Tie="All Negative Controls",Mie="Negative Control Probes",Sie="Negative Control Codewords",Cie="Genomic Controls",Oie=zie(["#fcfdbf","#feca8d","#fd9668","#f1605d","#cd4071","#9e2f7f","#721f81","#440f76","#180f3d","#000004"]),Rie=zie(["#440154","#482878","#3e4989","#31688e","#26828e","#1f9e89","#35b779","#6ece58","#b5de2b","#fde725"]),Nie=zie(["#0508b8","#1910d8","#3c19f0","#6b1cfb","#981cfd","#bf1cfd","#dd2bfd","#f246fe","#fc67fd","#fe88fc","#fea5fd","#febefe","#fec3fe"]),Lie=zie(["rgb(3, 5, 18)","rgb(25, 25, 51)","rgb(44, 42, 87)","rgb(58, 60, 125)","rgb(62, 83, 160)","rgb(62, 109, 178)","rgb(72, 134, 187)","rgb(89, 159, 196)","rgb(114, 184, 205)","rgb(149, 207, 216)","rgb(192, 229, 232)","rgb(234, 252, 253)"]),Die=zie(["rgb(23, 35, 18)","rgb(25, 56, 34)","rgb(18, 78, 43)","rgb(11, 100, 44)","rgb(35, 121, 36)","rgb(75, 138, 20)","rgb(116, 153, 5)","rgb(157, 167, 21)","rgb(194, 182, 59)","rgb(221, 201, 106)","rgb(239, 225, 156)","rgb(254, 252, 205)"]),Pie=zie(["rgb(52, 19, 23)","rgb(79, 28, 33)","rgb(108, 36, 36)","rgb(135, 47, 32)","rgb(157, 66, 25)","rgb(174, 88, 20)","rgb(188, 111, 19)","rgb(199, 137, 22)","rgb(209, 164, 32)","rgb(217, 192, 44)","rgb(222, 222, 59)","rgb(224, 253, 74)"]),Iie=Object.fromEntries([[Eie,{key:"mean-q-score",radioLabel:"Mean Q-score",colorBarLabel:"Mean Q-score per bin",sliderLabel:"Mean Q-score color scale range",reductionKind:"avg",colorscale:Oie,zmax:40,zmin:0,zeroValue:null}],[kie,{key:"transcript-density",radioLabel:"Transcript density map",colorBarLabel:"Transcripts per bin",sliderLabel:"Transcripts per bin scale range",reductionKind:"sum",colorscale:Rie,zmin:0,zeroValue:null}],[Tie,{key:"all-negative-controls",radioLabel:"Negative controls",colorBarLabel:"Negative controls per bin",sliderLabel:"Negative controls color scale range",reductionKind:"sum",colorscale:Nie,zmin:0,zeroValue:null}],[Mie,{key:"negative-control-probes",radioLabel:"Negative control probes per bin",colorBarLabel:"Negative control probes per bin",sliderLabel:"Negative controls color scale range",reductionKind:"sum",colorscale:Lie,zmin:0,zeroValue:null}],[Sie,{key:"negative-control-codewords",radioLabel:"Negative control codewords per bin",colorBarLabel:"Negative control codewords per bin",sliderLabel:"Negative controls color scale range",reductionKind:"sum",colorscale:Die,zmin:0,zeroValue:null}],[Cie,{key:"genomic-control-probes",radioLabel:"Genomic control probes per bin",colorBarLabel:"Genomic control probes per bin",sliderLabel:"Genomic control probes color scale range",reductionKind:"sum",colorscale:Pie,zmin:0,zeroValue:null}]]),Fie=[Mie,Sie,Cie,Tie];function zie(e){const t=e.length;return e.map(((e,n)=>[(n/(t-1)).toString(),e]))}function jie(e){let{dimensions:t,imageSrc:n,imageHeight:r,imageWidth:i,maxWidth:a,originData:o,imageOpacity:s,unit:l}=e;const c={autoexpand:!1,l:80,r:104,t:10,b:80,pad:0},u=Math.min(1,(a-c.l-c.r)/i);return{margin:c,height:r*u+c.t+c.b,width:i*u+c.l+c.r,autosize:!1,dragmode:"pan",images:[{source:n,xref:"x",yref:"y",x:0,y:t.height,sizex:t.width,sizey:t.height,xanchor:"left",yanchor:"bottom",layer:"below",opacity:s}],xaxis:{tickformat:"1",fixedrange:!1,showgrid:!1,showline:!0,title:{text:`x (${l})`},zeroline:!1,range:[-o[0],t.width]},yaxis:{tickformat:"1",fixedrange:!1,showgrid:!1,showline:!0,title:{text:`y (${l})`},zeroline:!1,range:[t.height,-o[1]],scaleanchor:"x",scaleratio:1}}}function Bie(e){return v.createElement(U7.Group,null,v.createElement(U7.Check,{id:"density-plot-heatmap-toggle",checked:e.heatmapActive,type:"checkbox",label:"Heatmap",onClick:()=>e.onToggle()}),v.createElement(U7.Group,{className:"heatmap-select"},e.heatmapTypes.map((t=>{const n=Iie[t].radioLabel;return v.createElement(U7.Check,{id:`density-plot-heatmap-select-${t}`,key:t,disabled:!e.heatmapActive,checked:e.heatmapActive&&(t===e.selectedBinType||t===Tie&&Fie.includes(e.selectedBinType)),label:n,onClick:()=>e.onClickHeatmapItem(t),type:"radio"})}))))}function Uie(e){var t;let{active:n,text:r,groupAttrs:i,groupMembers:a,onChange:o}=e;const[s,l]=(0,v.useState)(!0),[c,u]=(0,v.useState)(null===(t=a[0])||void 0===t?void 0:t.key);return n?v.createElement(U7.Group,null,void 0!==r?v.createElement(U7.Label,null,r):v.createElement(v.Fragment,null),v.createElement(U7.Check,{id:`density-plot-category-select-${i.htmlFor}`,checked:s,type:"checkbox",label:i.label,onClick:()=>{const e=!s;l((()=>e)),o(e?i.key:c)}}),v.createElement(U7.Group,{className:"heatmap-select"},a.map((e=>v.createElement(U7.Check,{id:`density-plot-category-select-${i.htmlFor}-${e.htmlFor}`,key:e.key,checked:!s&&e.key===c,label:e.label,onClick:()=>{l((()=>!1)),u((()=>e.key)),o(e.key)},type:"radio"}))))):v.createElement(v.Fragment,null)}function $ie(e){let{binSizeMultiplierOptions:t,binSizeMultiplier:n,binSize:r,heatmapActive:i,unit:a,setBinSizeMultiplier:o}=e;return v.createElement(U7.Group,null,v.createElement(U7.Label,null,"Bin Size"),v.createElement(U7.Group,null,t.map(((e,t)=>v.createElement(U7.Check,{id:`density-plot-bin-size-selection-${t}`,checked:n===e,disabled:!i,key:e,inline:!0,label:`${e*r}${a}`,onChange:()=>o(e),type:"radio"})))))}function qie(e){let{heatmapOpacity:t,heatmapActive:n,setHeatmapOpacity:r}=e;return v.createElement(U7.Group,{as:f9,className:"range-slider-container"},v.createElement(T7,{className:"range-slider"},v.createElement(U7.Label,null,"Heatmap opacity"),v.createElement(xie(),{id:"density-plot-heatmap-opacity-slider",disabled:!n,min:0,max:1,step:Number.MIN_VALUE,value:t,onChange:e=>r(Number.parseFloat(e.target.value)),tooltip:"off"}),v.createElement(U7.Text,null,Math.round(100*t)/100)))}function Hie(e){let{morphologyOpacity:t,setMorphologyOpacity:n}=e;return v.createElement(U7.Group,{as:f9,className:"range-slider-container"},v.createElement(T7,{className:"range-slider"},v.createElement(U7.Label,null,"Morphology image opacity"),v.createElement(xie(),{min:0,max:1,step:Number.MIN_VALUE,value:t,onChange:e=>n(Number.parseFloat(e.target.value)),tooltip:"off"}),v.createElement(U7.Text,null,Math.round(100*t)/100)))}function Vie(e){let{label:t,densityColorScaleRange:n,heatmapActive:r,zBounds:i,setDensityColorScaleRange:a}=e;const o="density-plot-color-scale-slider";return v.createElement(U7.Group,{as:f9,className:"range-slider-container"},v.createElement(T7,{className:"range-slider-with-input"},v.createElement(U7.Label,{id:`${o}`},t),v.createElement(xie(),{id:`${o}-slider`,"aria-labelledby":`${o}`,disabled:!r,min:i.min,max:i.max,step:1,value:n,onChange:e=>a(Number.parseFloat(e.target.value)),tooltip:"off"}),v.createElement(U7.Text,null,v.createElement(wie,{id:`${o}-reset`,"aria-labelledby":`${o}`,className:"reset-color-scale-range-icon",disabled:!r,onClick:()=>{r&&a(i.max)}}),v.createElement(U7.Control,{id:`${o}-input`,className:"density-plot-input",size:"sm","aria-labelledby":`${o}`,value:n,disabled:!r,type:"number",onChange:e=>{const t=Number.parseFloat(e.target.value);a(t<Fa.min?Fa.min:t)}}))))}class Wie extends v.Component{constructor(e){super(e),this.state={active_index:0}}render(){const e=this.props.children[this.state.active_index];return v.createElement("div",null,v.createElement("div",{className:"row",style:{marginBottom:"0.5rem",marginTop:"0.5rem"}},v.createElement("div",{className:"col",style:{textAlign:this.props.align}},this.props.label&&v.createElement("span",null,this.props.label,": "),v.createElement("span",null,v.createElement(Ea,{id:"dropdown-item-button",title:e.props.name,as:"span"},this.props.children.map(((e,t)=>v.createElement(xa.Item,{as:"button",key:t,onClick:()=>this.setState({active_index:t})},e.props.name))))))),this.props.children.map(((e,t)=>v.createElement("div",{key:t,style:{display:t===this.state.active_index?"block":"none"}},v.createElement("div",{className:"row"},v.createElement("div",{className:"col"},e))))))}}Wie.PropTypes={align:le().string.isRequired,label:le().string};const Gie=e=>{let{labels:t,activeIndex:n,setActiveIndex:r,type:i}=e;const a=function(e){if("compact"===e||"fullWidth"===e){const t="fullWidth"===e;return{toggleContainer:{border:"1px solid #ccc",borderRadius:"30px",...t?{display:"flex",justifyContent:"space-between",marginBottom:"16px",marginTop:"16px"}:{display:"inline-block",overflow:"hidden"}},toggleButton:{padding:"5px 15px",border:"none",borderRadius:"30px",backgroundColor:"white",color:"#445978",transition:"background-color 0.3s",cursor:"pointer",flex:t?1:"none"},active:{backgroundColor:"#d9edf7",color:"#3a87ad"}}}if("separated"===e)return{toggleContainer:{display:"flex"},toggleButton:{padding:"8px 20px",height:"40px",borderRadius:"25px",border:"1px solid #d3d3d3",backgroundColor:"white",color:"#445979",fontSize:"16px",cursor:"pointer",outline:"none",transition:"background-color 0.3s, color 0.3s",marginRight:"20px",marginTop:"16px",marginBottom:"16px"},active:{backgroundColor:"#0071D9",color:"white"}}}(i),o={...a.toggleButton,...a.active};return v.createElement("div",{style:a.toggleContainer},t.map(((e,t)=>v.createElement("button",{key:t,style:t===n?o:a.toggleButton,onClick:()=>r(t)},e))))};Gie.propTypes={labels:le().arrayOf(le().string).isRequired,activeIndex:le().number.isRequired,setActiveIndex:le().func.isRequired,type:le().oneOf(["compact","separated","fullWidth"]).isRequired};const Yie=Gie,Xie=e=>{let{type:t,children:n}=e;const[r,i]=(0,v.useState)(0),a=n.map((e=>e.props.name));return v.createElement(v.Fragment,null,v.createElement(Yie,{labels:a,type:t,activeIndex:r,setActiveIndex:i}),n.map(((e,t)=>v.createElement("div",{key:t,style:{display:t===r?"block":"none"}},v.createElement("div",{className:"row"},v.createElement("div",{className:"col"},e))))))};Xie.PropTypes={type:le().oneOf(["compact","separated","fullWidth"]),children:le().arrayOf(le().element).isRequired},Xie.defaultProps={type:"fullWidth"};const Kie=Xie;function Zie(){return Zie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zie.apply(null,arguments)}function Jie(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Qie extends v.Component{constructor(){super(...arguments),Jie(this,"state",{imageAlpha:50}),Jie(this,"setAlpha",(e=>{this.setState({imageAlpha:parseInt(e.target.value)})}))}render(){const{imageAlpha:e}=this.state,{imgA:t,imgATitle:n,imgATransform:r=null,imgB:i,imgBTitle:a,imgBTransform:o=null,sizes:s,plot_title:l,slider_title:c,img_props:u,zoom_pan:f,slider_top:d=!0}=this.props,{style:h,...p}=u,m={position:"absolute",opacity:e/100,transformOrigin:"0 0 0",transform:r?`matrix3d(${r.join(",")})`:"none",...h},g={opacity:(100-e)/100,transformOrigin:"0 0 0",transform:o?`matrix3d(${o.join(",")})`:"none",...h},y=v.createElement(v.Fragment,null,c,v.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:s.width}},v.createElement("span",null,a),v.createElement("span",null,n)),v.createElement("input",{type:"range",value:e,min:"0",max:"100",step:"1",onChange:this.setAlpha,style:{width:s.width}}));return v.createElement("div",null,d&&y,d&&v.createElement("br",null),l,v.createElement(Nee,f,v.createElement("img",Zie({style:{...m}},p,{src:t})),v.createElement("img",Zie({style:{...g}},p,{src:i}))),!d&&y)}}const eae=e=>{let{name:t,type:n,value:r,min:i,max:a,step:o,placeholder:s,required:l}=e;if("range"!==n){const[e,c]=(0,v.useState)(r);return v.createElement("input",{name:t,type:n,value:e,min:i,max:a,step:o,placeholder:s,required:l,style:{width:"100%"},onChange:e=>c(e.target.value)})}{const[e,n]=(0,v.useState)(null!=r?r:i);return v.createElement(xie(),{name:t,value:e,min:i,max:a,step:o,tooltip:"on",tooltipPlacement:"top",style:{marginTop:"20px",width:"100%"},onChange:e=>n(e.target.value)})}};function tae(e){let{name:t,options:n,type:r,selected:i,required:a}=e;const[o,s]=(0,v.useState)(i),l=e=>{s(e.target.value)};switch(r){case"radio":return v.createElement("div",null,n.map((e=>v.createElement("div",{key:e},v.createElement("label",{key:e},v.createElement("input",{type:"radio",name:t,value:e,checked:o===e,onChange:l,required:a})," ",e)))));case"dropdown":return v.createElement("div",null,v.createElement("select",{name:t,value:o,onChange:l,style:{width:"100%"},required:a},n.map((e=>v.createElement("option",{key:e,value:e},e)))));default:return null}}tae.propTypes={name:le().string.isRequired,options:le().arrayOf(le().string).isRequired,type:le().oneOf(["radio","dropdown"]).isRequired,selected:le().string,required:le().bool};const nae=tae;function rae(e){let{options:t,type:n,selected:r,name:i,required:a}=e;const[o,s]=(0,v.useState)(r||[]),[l,c]=(0,v.useState)(a||!1),u=e=>{const t=e.target.value;let n;n=e.target.checked?[...o,t]:o.filter((e=>e!==t)),!0===a&&c(0===n.length),s(n)},f=e=>{s(Array.from(e.target.selectedOptions).map((e=>e.value)))},d=`${i}[]`;switch(n){case"checkbox":return v.createElement("div",null,t.map((e=>v.createElement("div",{key:e},v.createElement("label",{key:e},v.createElement("input",{type:"checkbox",name:d,value:e,checked:o.includes(e),onChange:u,required:l})," ",e)))));case"select":return v.createElement("select",{name:i,multiple:!0,value:o,required:a,onChange:f},t.map((e=>v.createElement("option",{key:e,value:e},e))));default:return null}}rae.propTypes={options:le().arrayOf(le().string).isRequired,type:le().oneOf(["checkbox","select"]).isRequired,selected:le().arrayOf(le().string),name:le().string.isRequired,required:le().bool};const iae=rae,aae=e=>{let{rows:t,name:n,placeholder:r,required:i,value:a}=e;return v.createElement("textarea",{name:n,rows:t,placeholder:r,required:i,style:{width:"100%"}},a)};aae.propTypes={rows:le().number,name:le().string.isRequired,placeholder:le().string,required:le().bool,value:le().string},aae.defaultProps={rows:10,placeholder:"",required:!0,value:""};const oae=aae,sae=(e=>v.forwardRef(((t,n)=>(0,Ue.jsx)("div",{...t,ref:n,className:Ze()(t.className,e)}))))("h4");sae.displayName="DivStyledAsH4";const lae=v.forwardRef((({className:e,bsPrefix:t,as:n=sae,...r},i)=>(t=Bt(t,"alert-heading"),(0,Ue.jsx)(n,{ref:i,className:Ze()(e,t),...r}))));lae.displayName="AlertHeading";const cae=lae,uae=v.forwardRef((({className:e,bsPrefix:t,as:n=Tn,...r},i)=>(t=Bt(t,"alert-link"),(0,Ue.jsx)(n,{ref:i,className:Ze()(e,t),...r}))));uae.displayName="AlertLink";const fae=uae,dae={"aria-label":le().string,onClick:le().func,variant:le().oneOf(["white"])},hae=v.forwardRef((({className:e,variant:t,"aria-label":n="Close",...r},i)=>(0,Ue.jsx)("button",{ref:i,type:"button",className:Ze()("btn-close",t&&`btn-close-${t}`,e),"aria-label":n,...r})));hae.displayName="CloseButton",hae.propTypes=dae;const pae=hae,mae=v.forwardRef(((e,t)=>{const{bsPrefix:n,show:r=!0,closeLabel:i="Close alert",closeVariant:a,className:o,children:s,variant:l="primary",onClose:c,dismissible:u,transition:f=Nt,...d}=be(e,{show:"onClose"}),h=Bt(n,"alert"),p=Fe((e=>{c&&c(!1,e)})),m=!0===f?Nt:f,g=(0,Ue.jsxs)("div",{role:"alert",...m?void 0:d,ref:t,className:Ze()(o,h,l&&`${h}-${l}`,u&&`${h}-dismissible`),children:[u&&(0,Ue.jsx)(pae,{onClick:p,"aria-label":i,variant:a}),s]});return m?(0,Ue.jsx)(m,{unmountOnExit:!0,...d,ref:void 0,in:r,children:g}):r?g:null}));mae.displayName="Alert";const gae=Object.assign(mae,{Link:fae,Heading:cae}),vae=e=>{let{text:t,error:n}=e;return v.createElement("div",{style:{marginBottom:"30px"}},t&&v.createElement("p",null,t),n&&v.createElement(gae,{variant:"warning"},v.createElement("strong",null,n)))};vae.propTypes={error:le().string,text:le().string};const yae=vae,bae=e=>{let{url:t,method:n,children:r}=e;return v.createElement("form",{action:t,method:n},r,v.createElement("input",{type:"submit",value:"Submit"}),v.createElement("hr",null),v.createElement("p",{style:{marginBottom:"20px"}}))};bae.propTypes={url:le().string.isRequired,method:le().oneOf(["get","post"]).isRequired};const xae=bae,_ae=v.forwardRef((({bsPrefix:e,variant:t,animation:n="border",size:r,as:i="div",className:a,...o},s)=>{const l=`${e=Bt(e,"spinner")}-${n}`;return(0,Ue.jsx)(i,{ref:s,...o,className:Ze()(a,l,r&&`${l}-${r}`,t&&`text-${t}`)})}));_ae.displayName="Spinner";const wae=_ae,Aae=e=>{let{title:t,index:n,activeStep:r,nsteps:i,activeStepFailed:a}=e;const o=n===r,s=n<r,l="white",c=50,u="#E0E0E0",f=n+1,d=0===n,h=n===i-1,p={step:{width:100/i+"%",display:"table-cell",position:"relative",paddingTop:24},circle:{width:c,height:c,margin:"0 auto",backgroundColor:u,borderRadius:"50%",textAlign:"center",padding:1,fontSize:24,color:l,display:"block"},activeCircle:{backgroundColor:a?"#DC3545":"#ffc163"},completedCircle:{backgroundColor:"green"},index:{lineHeight:"56px",color:l},title:{marginTop:8,fontSize:16,fontWeight:"300",textAlign:"center",display:"block",color:"#757575"},activeOrCompletedTitle:{color:"black"},bar:{position:"absolute",top:49,height:1,borderTopStyle:"solid",borderTopWidth:1,borderTopColor:u},leftBar:{left:0,right:"50%",marginRight:25},rightBar:{right:0,left:"50%",marginLeft:25},completedBar:{borderTopColor:"black"}},m=Object.assign(p.circle,s?p.completedCircle:{},o?p.activeCircle:{}),g=Object.assign(p.title,o||s?p.activeOrCompletedTitle:{}),y=Object.assign(p.leftBar,p.bar,o||s?p.completedBar:{}),b=Object.assign(p.rightBar,p.bar,s?p.completedBar:{});return v.createElement("div",{style:p.step},v.createElement("div",{style:m},v.createElement("span",{style:p.index},f)),v.createElement("div",{style:g},o&&!a&&v.createElement(wae,{animation:"grow",variant:"warning",size:"sm"}),t),!d&&v.createElement("div",{style:y}),!h&&v.createElement("div",{style:b}))};Aae.propTypes={title:se.PropTypes.string.isRequired,index:se.PropTypes.number.isRequired,activeStep:se.PropTypes.number.isRequired,nsteps:se.PropTypes.number.isRequired,activeStepFailed:se.PropTypes.bool.isRequired};const kae=e=>{let{steps:t,activeStep:n,activeStepFailed:r}=e;return v.createElement("div",{style:{width:"100%",minHeight:0,padding:0}},v.createElement("div",{style:{display:"table",width:"100%",margin:"0 auto"}},t.map(((e,i)=>v.createElement(Aae,{key:i,nsteps:t.length,title:e,activeStep:n,index:i,activeStepFailed:r})))))};kae.propTypes={steps:se.PropTypes.arrayOf(se.PropTypes.string.isRequired),activeStep:se.PropTypes.number.isRequired,activeStepFailed:se.PropTypes.bool},kae.defaultProps={activeStepFailed:!1};const Eae=kae,Tae=e=>{let{level:t,children:n}=e;return v.createElement(gae,{variant:t},n)};Tae.propTypes={level:le().oneOf(["primary","secondary","success","danger","warning","info","light","dark"])};const Mae=Tae,Sae=e=>{let{code:t,maxHeight:n}=e;return v.createElement("pre",{style:{maxHeight:n,overflowY:"auto",backgroundColor:"#f8f8f8",border:"1px solid gray",padding:"10px"}},t)};Sae.propTypes={code:le().string.isRequired,maxHeight:le().string};const Cae=Sae;const Oae=function(e){const t=v.useRef(null),n=e=>{(function(e){return e.getModifierState("Control")&&e.getModifierState("Shift")&&(e.getModifierState("Meta")||e.getModifierState("OS"))})(e)&&"KeyG"===e.code&&t.current&&("none"===t.current.style.display?t.current.style.display="block":t.current.style.display="none")};return v.useEffect((()=>(window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)})),[]),v.createElement("div",{style:{display:"none"},key:"hidden-fas","data-test":"hiddenFas",ref:t},e.children)};function Rae(e){let{color:t,text:n}=e;return v.createElement("div",{style:{display:"flex",justifyContent:"start"}},v.createElement("hr",{style:{height:"10px",width:"25px",backgroundColor:t,marginRight:"2px"}}),v.createElement("span",{style:{width:"90px",margin:"auto"}},n))}function Nae(e){const{spatial_plot_props:t,umap_plot_props:n,clusters:r}=e,[i,a]=(0,v.useState)(!0),[o,s]=(0,v.useState)(Array(r.length).fill(!0)),[l,c]=(0,v.useState)(1),[u,f]=(0,v.useState)(!0);return v.createElement(v.Fragment,null,v.createElement("div",{style:{display:"flex"}},v.createElement("div",{style:{width:"400px"}},v.createElement("h4",{style:{textAlign:"center"}},t.title),v.createElement(Nee,{scale_limits:{min:.5,max:50,bound:!1},width:t.width,height:t.height,initial:t.initial_zoom_pan},v.createElement("img",{src:t.tissue_image,style:{opacity:u?1:0,position:"absolute",transformOrigin:"0 0 0",transform:`matrix3d(${t.tissue_css_transform.join(",")})`}}),r.map(((e,n)=>o[n]?v.createElement("img",{key:n,src:e.spatial_plot,style:{opacity:l,position:"absolute",imageRendering:"pixelated",transformOrigin:"0 0 0",transform:`matrix3d(${t.spot_css_transform.join(",")})`}}):null)))),v.createElement("div",{style:{width:"420px"}},v.createElement("h4",{style:{textAlign:"center"}},n.title),r.map(((e,t)=>o[t]?v.createElement("img",{key:t,src:e.umap_plot,width:400,style:{position:"absolute",imageRendering:"pixelated"}}):null))),v.createElement("div",{style:{width:"180px",marginLeft:"10px",marginTop:"10px"}},v.createElement("div",{style:{position:"relative",top:"20px"}},v.createElement("label",{style:{marginLeft:"30px"},title:"Select All Clusters"},v.createElement("input",{type:"checkbox",style:{transform:"scale(1.4)"},checked:i,onChange:()=>{const e=!i;a(e),s(Array(o.length).fill(e))}})),v.createElement("span",{style:{position:"relative",top:"0px",fontWeight:"bold"}}," Select All")),v.createElement("ul",{style:{overflowX:"scroll",height:"350px",listStyleType:"none",marginTop:"15px"}},r.map(((e,t)=>v.createElement("li",{key:t,onClick:()=>(e=>{const t=Array.from(o);t[e]=!t[e],s(t);const n=t.every((e=>!0===e));a(n)})(t),onDoubleClick:()=>(e=>{const t=Array(o.length).fill(!1);t[e]=!0,s(t)})(t),style:{marginBottom:"2px",marginRight:"10px",cursor:"pointer",userSelect:"none",color:o[t]?"black":"lightgray"}},v.createElement(Rae,{color:o[t]?e.hex_color:"white",text:e.cluster_name}))))))),v.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"400px"}},v.createElement("div",{style:{position:"relative",top:"10px"}},v.createElement("span",{style:{position:"relative",top:"-4px",fontSize:14}},"Bin opacity: "),v.createElement("label",{title:"Adjust the opacity of the bins"},v.createElement("input",{type:"range",value:100*l,min:"0",max:"100",step:"1",style:{width:170},onChange:e=>{c(e.target.value/100)}}))),v.createElement("div",{style:{position:"relative",top:"10px",left:"0px"}},v.createElement("label",{title:"Show or hide the tissue"},v.createElement(La,{checked:u,onChange:()=>{f(!u)},checkedIcon:!0,uncheckedIcon:!1,onColor:"#0275ff",height:15,width:30})),v.createElement("span",{style:{position:"relative",top:"-3px",fontSize:14}}," Display Tissue"))))}Nae.PropTypes={spatial_plot_props:le().shape({title:le().string.isRequired,tissue_image:le().string.isRequired,tissue_css_transform:le().arrayOf(le().number).isRequired,spot_css_transform:le().arrayOf(le().number).isRequired,width:le().number.isRequired,height:le().number.isRequired,initial_zoom_pan:le().shape({scale:le().number,dx:le().number,dy:le().number})}),umap_plot_props:le().shape({title:le().string.isRequired}),clusters:le().arrayOf(le().shape({cluster_name:le().string.isRequired,hex_color:le().string.isRequired,spatial_plot:le().string.isRequired,umap_plot:le().string.isRequired}))};const Lae=Nae,Dae=e=>{let{children:t}=e;return v.createElement("div",{style:{backgroundColor:"#F7F9FC",color:"#445979",padding:16}},t)},Pae=e=>{let{id:t,tooltip:n,content:r,variant:i,place:a}=e;return v.createElement("a",{"data-tooltip-id":t,"data-tooltip-content":n,"data-tooltip-variant":i,"data-tooltip-place":a,dangerouslySetInnerHTML:{__html:r}})};Pae.propTypes={place:le().oneOf(["top","top-start","top-end","right","right-start","right-end","bottom","bottom-start","bottom-end","left","left-start","left-end"]),variant:le().oneOf(["dark","light","success","warning","error","info"])};const Iae=Pae;function Fae(e){return new Promise(((t,n)=>{const r=new Image;r.src=e,r.onload=()=>t(r),r.onerror=e=>n(e)}))}const zae={Blues:{r:[247,246,245,244,243,243,242,241,240,239,239,238,237,236,236,235,234,233,232,232,231,230,229,228,228,227,226,225,225,224,223,222,221,221,220,219,218,218,217,216,215,215,214,213,212,212,211,210,209,209,208,207,206,206,205,204,203,203,202,201,200,200,199,198,197,196,195,193,192,191,190,188,187,186,185,183,182,181,180,178,177,176,175,173,172,171,170,168,167,166,165,163,162,161,160,158,157,155,154,152,151,149,147,146,144,143,141,139,138,136,135,133,131,130,128,127,125,123,122,120,119,117,115,114,112,111,109,107,106,105,103,102,101,99,98,97,96,94,93,92,90,89,88,87,85,84,83,81,80,79,78,76,75,74,72,71,70,69,67,66,65,64,63,62,61,60,59,58,57,56,55,53,52,51,50,49,48,47,46,45,44,43,42,41,40,39,38,37,36,35,34,33,32,31,30,30,29,28,27,26,26,25,24,23,23,22,21,20,19,19,18,17,16,15,15,14,13,12,12,11,10,9,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],g:[251,250,249,249,248,248,247,247,246,246,245,245,244,244,243,243,242,242,241,241,240,240,239,239,238,238,237,237,236,236,235,235,234,234,233,233,232,232,231,231,230,230,229,229,228,228,227,227,226,226,225,225,224,224,223,223,222,222,221,221,220,220,219,219,218,218,217,217,216,216,215,215,214,214,213,212,212,211,211,210,210,209,209,208,208,207,207,206,206,205,205,204,203,203,202,202,201,200,199,199,198,197,196,195,194,193,192,192,191,190,189,188,187,186,185,184,184,183,182,181,180,179,178,177,177,176,175,174,173,172,171,170,170,169,168,167,166,165,164,163,163,162,161,160,159,158,157,156,155,155,154,153,152,151,150,149,148,148,147,146,145,144,143,142,141,140,139,138,137,136,135,133,132,131,130,129,128,127,126,125,124,123,122,121,120,119,118,117,116,115,114,113,112,111,110,109,108,107,106,105,104,103,102,101,100,99,98,97,96,95,94,93,92,91,90,89,88,87,86,85,84,83,82,81,80,79,78,76,75,74,73,72,71,70,69,68,67,66,65,64,63,62,61,60,59,58,57,56,55,54,53,52,51,50,49,48],b:[255,254,254,254,253,253,253,253,252,252,252,252,251,251,251,251,250,250,250,250,249,249,249,249,248,248,248,248,247,247,247,247,246,246,246,246,245,245,245,245,244,244,244,244,243,243,243,243,242,242,242,242,241,241,241,241,240,240,240,240,239,239,239,239,238,238,238,237,237,236,236,235,235,234,234,234,233,233,232,232,231,231,230,230,230,229,229,228,228,227,227,227,226,226,225,225,224,224,224,223,223,223,222,222,222,221,221,221,220,220,220,219,219,219,218,218,217,217,217,216,216,216,215,215,215,214,214,214,213,213,212,212,211,211,210,210,209,209,208,208,207,207,206,206,205,205,204,204,203,203,202,202,201,201,200,200,199,199,198,198,197,197,196,196,195,195,194,193,193,192,192,191,191,190,190,189,189,188,188,187,187,186,185,185,184,184,183,183,182,182,181,181,180,179,178,178,177,176,175,174,174,173,172,171,171,170,169,168,167,167,166,165,164,163,163,162,161,160,160,159,158,157,156,156,154,153,151,150,148,146,145,143,142,140,139,137,136,134,133,131,130,128,126,125,123,122,120,119,117,116,114,113,111,110,108,107]},Jet:{r:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,5,8,12,15,18,21,24,28,31,34,37,41,44,47,50,54,57,60,63,66,70,73,76,79,83,86,89,92,95,99,102,105,108,112,115,118,121,124,128,131,134,137,141,144,147,150,154,157,160,163,166,170,173,176,179,183,186,189,192,195,199,202,205,208,212,215,218,221,224,228,231,234,237,241,244,247,250,254,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,250,245,241,236,232,227,222,218,213,209,204,200,195,191,186,182,177,172,168,163,159,154,150,145,141,136,132,127],g:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,60,64,68,72,76,80,84,88,92,96,100,104,108,112,116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,196,200,204,208,212,216,220,224,228,232,236,240,244,248,252,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,252,248,244,240,237,233,229,226,222,218,215,211,207,203,200,196,192,189,185,181,177,174,170,166,163,159,155,152,148,144,140,137,133,129,126,122,118,115,111,107,103,100,96,92,89,85,81,77,74,70,66,63,59,55,52,48,44,40,37,33,29,26,22,18,15,11,7,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b:[127,132,136,141,145,150,154,159,163,168,172,177,182,186,191,195,200,204,209,213,218,222,227,232,236,241,245,250,254,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,250,247,244,241,237,234,231,228,225,221,218,215,212,208,205,202,199,195,192,189,186,183,179,176,173,170,166,163,160,157,154,150,147,144,141,137,134,131,128,125,121,118,115,112,108,105,102,99,95,92,89,86,83,79,76,73,70,66,63,60,57,54,50,47,44,41,37,34,31,28,24,21,18,15,12,8,5,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},Binary:{r:[255,254,253,252,251,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,234,233,232,231,230,229,228,227,226,225,224,223,222,221,220,219,218,217,216,215,214,213,211,211,210,209,208,207,206,205,204,203,202,201,200,199,198,197,195,195,194,193,192,191,190,189,188,187,186,185,184,183,182,181,179,179,178,177,176,175,174,173,172,171,170,169,168,167,166,165,163,163,162,161,160,159,158,157,156,155,154,153,152,151,150,149,147,147,146,145,144,143,142,141,140,139,138,137,136,135,134,133,131,131,130,129,128,127,126,125,124,123,121,121,120,119,118,117,116,114,113,113,112,111,110,109,108,107,105,105,104,103,102,101,100,98,97,97,96,95,94,93,92,91,89,89,88,87,86,85,84,82,81,81,80,79,78,77,76,75,73,73,72,71,70,69,68,66,65,65,64,63,62,61,60,59,57,56,56,55,54,53,52,50,49,48,48,47,46,45,44,43,41,40,40,39,38,37,36,34,33,32,32,31,30,29,28,27,25,24,24,23,22,21,20,18,17,16,16,15,14,13,12,11,9,8,8,7,6,5,4,2,1,0,0],g:[255,254,253,252,251,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,234,233,232,231,230,229,228,227,226,225,224,223,222,221,220,219,218,217,216,215,214,213,211,211,210,209,208,207,206,205,204,203,202,201,200,199,198,197,195,195,194,193,192,191,190,189,188,187,186,185,184,183,182,181,179,179,178,177,176,175,174,173,172,171,170,169,168,167,166,165,163,163,162,161,160,159,158,157,156,155,154,153,152,151,150,149,147,147,146,145,144,143,142,141,140,139,138,137,136,135,134,133,131,131,130,129,128,127,126,125,124,123,121,121,120,119,118,117,116,114,113,113,112,111,110,109,108,107,105,105,104,103,102,101,100,98,97,97,96,95,94,93,92,91,89,89,88,87,86,85,84,82,81,81,80,79,78,77,76,75,73,73,72,71,70,69,68,66,65,65,64,63,62,61,60,59,57,56,56,55,54,53,52,50,49,48,48,47,46,45,44,43,41,40,40,39,38,37,36,34,33,32,32,31,30,29,28,27,25,24,24,23,22,21,20,18,17,16,16,15,14,13,12,11,9,8,8,7,6,5,4,2,1,0,0],b:[255,254,253,252,251,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,234,233,232,231,230,229,228,227,226,225,224,223,222,221,220,219,218,217,216,215,214,213,211,211,210,209,208,207,206,205,204,203,202,201,200,199,198,197,195,195,194,193,192,191,190,189,188,187,186,185,184,183,182,181,179,179,178,177,176,175,174,173,172,171,170,169,168,167,166,165,163,163,162,161,160,159,158,157,156,155,154,153,152,151,150,149,147,147,146,145,144,143,142,141,140,139,138,137,136,135,134,133,131,131,130,129,128,127,126,125,124,123,121,121,120,119,118,117,116,114,113,113,112,111,110,109,108,107,105,105,104,103,102,101,100,98,97,97,96,95,94,93,92,91,89,89,88,87,86,85,84,82,81,81,80,79,78,77,76,75,73,73,72,71,70,69,68,66,65,65,64,63,62,61,60,59,57,56,56,55,54,53,52,50,49,48,48,47,46,45,44,43,41,40,40,39,38,37,36,34,33,32,32,31,30,29,28,27,25,24,24,23,22,21,20,18,17,16,16,15,14,13,12,11,9,8,8,7,6,5,4,2,1,0,0]}};function jae(e){let{tissueImage:t,tissueImageTitle:n,tissueCssTransform:r,displayHeight:i,displayWidth:a,umiLegendImages:o,umiImageTitle:s,umiCssTransform:l,tissueMaskImage:c,grayscaleUmiImage:u,initialZoomPan:f}=e;const[d,h]=(0,v.useState)(!0),[p,m]=(0,v.useState)(0),[g,y]=(0,v.useState)(u);(0,v.useEffect)((()=>{(async()=>{const e=o[p];if(!e)return;let t;try{t=await Fae(u)}catch(e){return void console.error("Failed to load image",e)}if(!t)return;const n=zae[e.colormap];let r=u;if(n){const{r:e,g:i,b:a}=n;r=function(e,t,n,r){const i=document.createElement("canvas"),a=i.getContext("2d");i.width=e.width,i.height=e.height,a.drawImage(e,0,0);const o=a.getImageData(0,0,e.width,e.height);for(let e=0;e<o.data.length;e+=4)o.data[e]=t[o.data[e]],o.data[e+1]=n[o.data[e+1]],o.data[e+2]=r[o.data[e+2]],o.data[e+3]=o.data[e+3];return a.putImageData(o,0,0),i.toDataURL("image/png")}(t,e,i,a)}if(d){let e,t;try{[e,t]=await Promise.all([Fae(r),Fae(c)])}catch(e){return void console.error("Failed to load image or tissue mask",e)}if(!e||!t)return;r=function(e,t){const n=document.createElement("canvas"),r=n.getContext("2d");return n.width=e.width,n.height=e.height,r.drawImage(t,0,0,e.width,e.height),r.globalCompositeOperation="screen",r.drawImage(e,0,0),n.toDataURL("image/png")}(e,t)}r!==g&&y(r)})()}),[p,d]);const{legendImage:b}=o[p];return v.createElement(v.Fragment,null,v.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10,marginTop:10}},v.createElement("div",null,v.createElement(Yie,{labels:["All bins","Bins under tissue"],activeIndex:d?1:0,setActiveIndex:e=>{h(1===e)},type:"compact"})),v.createElement("div",null,v.createElement("span",null,"UMI Color scale: "),v.createElement(Ea,{id:"colormap-dropdown",title:o[p].colormap,as:"span"},o.map(((e,t)=>v.createElement(xa.Item,{as:"button",key:e.colormap,onClick:()=>{m(t)}},e.colormap)))))),v.createElement("div",null,v.createElement("img",{src:b,style:{width:a}})),v.createElement("div",null,v.createElement(Qie,{imgA:g,imgATitle:s,imgATransform:l,imgB:t,imgBTitle:n,imgBTransform:r,sizes:{width:a},plot_title:null,slider_title:null,img_props:{style:{imageRendering:"pixelated"}},zoom_pan:{scale_limits:{min:.5,max:50,bound:!1},width:a,height:i,initial:{...f}},slider_top:!1})))}jae.propTypes={tissueImage:le().string.isRequired,tissueImageTitle:le().string.isRequired,tissueCssTransform:le().arrayOf(le().number).isRequired,displayHeight:le().number.isRequired,displayWidth:le().number.isRequired,umiLegendImages:le().arrayOf(le().shape({colormap:le().string.isRequired,legendImage:le().string.isRequired})).isRequired,umiImageTitle:le().string.isRequired,umiCssTransform:le().arrayOf(le().number).isRequired,tissueMaskImage:le().string.isRequired,grayscaleUmiImage:le().string.isRequired,initialZoomPan:le().shape({scale:le().number,dx:le().number,dy:le().number})};const Bae=jae;function Uae(e,t){e=e.replace("#","");return`rgba(${parseInt(e.substring(0,2),16)}, ${parseInt(e.substring(2,4),16)}, ${parseInt(e.substring(4,6),16)}, ${t})`}function $ae(e,t,n,r){return e||(e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),[(e[0]+n*e[3])*t,(e[1]+r*e[3])*t,e[2],e[3],(e[4]+n*e[7])*t,(e[5]+r*e[7])*t,e[6],e[7],e[8],e[9],e[10],e[11],(e[12]+n*e[15])*t,(e[13]+r*e[15])*t,e[14],e[15]]}function qae(e){const{focus:t,layers:n}=e,[r,i]=(0,v.useState)(e.fullScreen),a=r?window.innerHeight:800,o=r?window.innerWidth:800;console.log(r,a,o);const s=Math.min(o/t.width,a/t.height),[l,c]=(0,v.useState)(n.map((()=>!0))),[u,f]=(0,v.useState)(n.map((()=>100))),[d,h]=(0,v.useState)(n.map((e=>e.images.map((()=>!0))))),p=(e,t)=>{const n=[...d];if(n[e][t]=!n[e][t],n[e][t]){const t=[...l];t[e]=!0,c(t)}h(n)},m=r?{position:"fixed",width:"100%",height:"100%",left:0,top:0,backgroundColor:"white"}:{position:"relative",marginTop:"10px"};return v.createElement("div",{style:m},v.createElement("div",{style:{top:110,position:"absolute",left:5,zIndex:1}},v.createElement("button",{style:{backgroundColor:"white",borderWidth:"1px",borderColor:"lightgray",borderRadius:"4px",fontSize:"30px",width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center",color:"#445979",paddingTop:"5px"},onClick:()=>{i(!r)}},"")),v.createElement(Nee,{scale_limits:{min:.01,max:100,bound:!1},width:o,height:a},n.map(((e,n)=>e.images.map(((e,r)=>l[n]&&d[n][r]&&v.createElement("img",{key:e.label,src:e.image,style:{position:"absolute",transformOrigin:"0 0 0",transform:`matrix3d(${$ae(e.css_transform,s,-t.x,-t.y).join(",")})`,imageRendering:"pixelated",opacity:u[n]/100}})))))),v.createElement("div",{style:{position:"absolute",overflow:"scroll",width:"250px",height:.9*a+"px",backgroundColor:"rgba(255, 255, 255, 0.5)",right:20,top:5}},v.createElement("h3",null,"Legend"),n.map(((e,t)=>v.createElement("div",{key:e.name,style:{paddingRight:10}},v.createElement("div",{style:{display:"flex",justifyContent:"start",alignItems:"center"}},v.createElement("input",{type:"checkbox",id:e.name,style:{marginRight:"5px"},checked:l[t],onChange:()=>(e=>{const t=[...l];t[e]=!t[e];const n=[...d];n[e]=n[e].map((()=>t[e])),h(n),c(t)})(t)}),v.createElement("h4",{style:{margin:0,color:l[t]?"black":"gray"}},e.name)),v.createElement("div",null,v.createElement("input",{type:"range",value:u[t],min:"0",max:"100",step:"1",onChange:e=>((e,t)=>{const n=[...u];n[e]=t,f(n)})(t,e.target.value),style:{width:"100%"}})),e.images.map(((e,n)=>v.createElement(v.Fragment,null,e.label&&v.createElement("div",{key:e.label,style:{display:"flex",justifyContent:"start",alignItems:"center"}},e.color?v.createElement("div",{style:{flex:"0 0 30px",height:"15px",marginLeft:"15px",marginRight:"5px",backgroundColor:l[t]&&d[t][n]?Uae(e.color,u[t]/100):"white",border:"1px solid black"},onClick:()=>p(t,n)}):v.createElement("input",{type:"checkbox",style:{marginLeft:"15px",marginRight:"5px"},checked:l[t]&&d[t][n],onChange:()=>p(t,n)}),v.createElement("h5",{style:{margin:0,color:l[t]&&d[t][n]?"black":"gray"}},e.label))))),v.createElement("hr",null))))))}const Hae=qae;qae.PropTypes={focus:le().shape({x:le().number,y:le().number,width:le().number,height:le().number}),layers:le().arrayOf(le().shape({name:le().string.isRequired,images:le().arrayOf(le().shape({label:le().string,color:le().string,image:le().string.isRequired,css_transform:le().arrayOf(le().number)}))})),fullScreen:le().bool},qae.defaultProps={fullScreen:!1};const Vae=e=>{let{html:t}=e;return v.createElement("div",{dangerouslySetInnerHTML:{__html:t}})};Vae.propTypes={html:le().string.isRequired};const Wae=Vae,Gae=e=>{let{code:t}=e;return v.createElement("script",{"data-run":"1",type:"text/javascript",dangerouslySetInnerHTML:{__html:t}})};Gae.propTypes={code:le().string.isRequired};const Yae=Gae;var Xae=n(21528),Kae=n.n(Xae),Zae=n(53966);const Jae=Symbol(),Qae=Symbol(),eoe="undefined"==typeof window||/ServerSideRendering/.test(window.navigator&&window.navigator.userAgent)?v.useEffect:v.useLayoutEffect,toe=Zae.unstable_runWithPriority?e=>{try{(0,Zae.unstable_runWithPriority)(Zae.unstable_NormalPriority,e)}catch(t){if("Not implemented."!==t.message)throw t;e()}}:e=>e();function noe(e,t){const n=(0,v.useContext)(e)[Jae];const{v:{current:r},n:{current:i},l:a}=n,o=t(r),[s,l]=(0,v.useReducer)(((e,n)=>{if(!n)return[r,o];if("p"in n)throw n.p;if(n.n===i)return Object.is(e[1],o)?e:[r,o];try{if("v"in n){if(Object.is(e[0],n.v))return e;const r=t(n.v);return Object.is(e[1],r)?e:[n.v,r]}}catch(e){}return[...e]}),[r,o]);return Object.is(s[1],o)||l(),eoe((()=>(a.add(l),()=>{a.delete(l)})),[a]),s[1]}var roe=function(e,t){return roe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},roe(e,t)};function ioe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}roe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var aoe=function(){return aoe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},aoe.apply(this,arguments)};function ooe(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}function soe(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function loe(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function coe(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var uoe="SET_DATA",foe="SET_CREATE_FORMULA_PARSER",doe="SELECT_ENTIRE_ROW",hoe="SELECT_ENTIRE_COLUMN",poe="SELECT_ENTIRE_WORKSHEET",moe="SET_SELECTION",goe="SELECT",voe="ACTIVATE",yoe="SET_CELL_DATA",boe="SET_CELL_DIMENSIONS",xoe="COPY",_oe="CUT",woe="PASTE",Aoe="EDIT",koe="VIEW",Eoe="BLUR",Toe="KEY_PRESS",Moe="KEY_DOWN",Soe="DRAG_START",Coe="DRAG_END",Ooe="COMMIT";function Roe(e){return{type:uoe,payload:{data:e}}}function Noe(e){return{type:foe,payload:{createFormulaParser:e}}}function Loe(e){return{type:moe,payload:{selection:e}}}function Doe(e,t){return{type:yoe,payload:{active:e,data:t}}}function Poe(e){return{type:woe,payload:{data:e}}}function Ioe(e){return{type:Toe,payload:{event:e}}}function Foe(e){return{type:Moe,payload:{event:e}}}function zoe(){return{type:Soe}}function joe(){return{type:Coe}}function Boe(){return{type:xoe}}function Uoe(){return{type:_oe}}function $oe(){return{type:Eoe}}function qoe(e,t){var n=t[e.row];if(void 0!==n)return n[e.column]}function Hoe(e,t,n){for(var r=[],i=t.column-e.column,a=e.row;a<=t.row;a++){var o=a-e.row;r[o]=r[o]||Array(i);for(var s=e.column;s<=t.column;s++)r[o][s-e.column]=qoe({row:a,column:s},n)}return r}function Voe(e,t,n){var r=coe([],loe(n),!1),i=n[0],a=i?coe([],loe(i),!1):[];a.length-1<e.column&&(a[e.column]=void 0,r[0]=a);var o=n[e.row]?coe([],loe(n[e.row]),!1):[];return o[e.column]=t,r[e.row]=o,r}function Woe(e,t,n){var r=n[0];r||(r=[],n[0]=r),e.row in n||(n[e.row]=[]),e.column in r||(r[e.column]=void 0),n[e.row][e.column]=t}function Goe(e,t){if(!Xoe(e,t))return t;var n=coe([],loe(t),!1),r=coe([],loe(t[e.row]),!1);return r[e.column]=void 0,n[e.row]=r,n}function Yoe(e){var t,n,r,i,a,o,s,l,c,u,f,d,h,p,m,g;return ooe(this,(function(v){switch(v.label){case 0:v.trys.push([0,11,12,13]),t=soe(e.entries()),n=t.next(),v.label=1;case 1:if(n.done)return[3,10];r=loe(n.value,2),i=r[0],a=r[1],v.label=2;case 2:v.trys.push([2,7,8,9]),m=void 0,o=soe(a.entries()),s=o.next(),v.label=3;case 3:return s.done?[3,6]:(l=loe(s.value,2),c=l[0],u=l[1],[4,[{row:i,column:c},u]]);case 4:v.sent(),v.label=5;case 5:return s=o.next(),[3,3];case 6:return[3,9];case 7:return f=v.sent(),m={error:f},[3,9];case 8:try{s&&!s.done&&(g=o.return)&&g.call(o)}finally{if(m)throw m.error}return[7];case 9:return n=t.next(),[3,1];case 10:return[3,13];case 11:return d=v.sent(),h={error:d},[3,13];case 12:try{n&&!n.done&&(p=t.return)&&p.call(t)}finally{if(h)throw h.error}return[7];case 13:return[2]}}))}function Xoe(e,t){var n=t[0];return n&&e.row>=0&&e.column>=0&&Number.isInteger(e.row)&&Number.isInteger(e.column)&&e.column<n.length&&e.row<t.length}function Koe(e){return{columns:Joe(e),rows:Zoe(e)}}function Zoe(e){return e.length}function Joe(e){var t=e[0];return t?t.length:0}function Qoe(e){var t=Koe(e);return{row:t.rows-1,column:t.columns-1}}var ese=function(){function e(e,t){this.start={row:Math.min(e.row,t.row),column:Math.min(e.column,t.column)},this.end={row:Math.max(e.row,t.row),column:Math.max(e.column,t.column)}}return e.prototype[Symbol.iterator]=function(){var e,t;return ooe(this,(function(n){switch(n.label){case 0:e=this.start.row,n.label=1;case 1:if(!(e<=this.end.row))return[3,6];t=this.start.column,n.label=2;case 2:return t<=this.end.column?[4,{row:e,column:t}]:[3,5];case 3:n.sent(),n.label=4;case 4:return t++,[3,2];case 5:return e++,[3,1];case 6:return[2]}}))},e.prototype.size=function(){return(this.end.row+1-this.start.row)*(this.end.column+1-this.start.column)},e.prototype.has=function(e){return e.row>=this.start.row&&e.column>=this.start.column&&e.row<=this.end.row&&e.column<=this.end.column},e.prototype.mask=function(t){return new e({row:t.start.row>this.start.row?t.start.row:this.start.row,column:t.start.column>this.start.column?t.start.column:this.start.column},{row:t.end.row<this.end.row?t.end.row:this.end.row,column:t.end.column<this.end.column?t.end.column:this.end.column})},e.prototype.equals=function(e){return this.start.row===e.start.row&&this.start.column===e.start.column&&this.end.row===e.end.row&&this.end.column===e.end.column},e}();var tse={row:0,column:0},nse=function(){},rse=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ioe(t,e),t.prototype.toRange=function(e){return null},t.prototype.normalizeTo=function(e){return this},t.prototype.hasEntireRow=function(e){return!1},t.prototype.hasEntireColumn=function(e){return!1},t.prototype.size=function(){return 0},t.prototype.has=function(){return!1},t.prototype.equals=function(e){return e instanceof t},t}(nse),ise=function(e){function t(t){var n=e.call(this)||this;return n.range=t,n}return ioe(t,e),t.prototype.toRange=function(e){return this.range},t.prototype.normalizeTo=function(e){var n=use(e);return new t(this.range.mask(n))},t.prototype.hasEntireRow=function(e){return!1},t.prototype.hasEntireColumn=function(e){return!1},t.prototype.size=function(e){var t=this.toRange(e);return t?t.size():0},t.prototype.has=function(e,t){var n=this.toRange(e);return null!==n&&n.has(t)},t.prototype.equals=function(e){return e instanceof t&&this.range.equals(e.range)},t}(nse),ase=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ioe(t,e),t}(nse),ose=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ioe(t,e),t.prototype.toRange=function(e){return use(e)},t.prototype.normalizeTo=function(e){return this},t.prototype.hasEntireColumn=function(e){return!0},t.prototype.hasEntireRow=function(e){return!0},t.prototype.size=function(e){return Joe(e)*Zoe(e)},t.prototype.has=function(e,t){return!0},t.prototype.equals=function(e){return e instanceof t},t}(ase),sse=function(e){function t(t,n){var r=this;if(!fse(t))throw new dse("start");if(!fse(n))throw new dse("end");return(r=e.call(this)||this).start=Math.min(t,n),r.end=Math.max(t,n),r}return ioe(t,e),t.prototype.equals=function(e){return e instanceof t&&this.constructor===e.constructor&&this.start===e.start&&this.end===e.end},t}(ase),lse=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ioe(t,e),t.prototype.toRange=function(e){var t=Qoe(e);return new ese({row:this.start,column:0},{row:this.end,column:t.column})},t.prototype.normalizeTo=function(e){var n=Zoe(e);return new t(Math.max(this.start,0),Math.min(this.end,n-1))},t.prototype.hasEntireRow=function(e){return e>=this.start&&e<=this.end},t.prototype.hasEntireColumn=function(e){return!1},t.prototype.size=function(e){return(this.end-this.start+1)*Joe(e)},t.prototype.has=function(e,t){return t.row>=this.start&&t.row<=this.end},t}(sse),cse=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ioe(t,e),t.prototype.toRange=function(e){var t=Qoe(e);return new ese({row:0,column:this.start},{row:t.row,column:this.end})},t.prototype.normalizeTo=function(e){var n=Joe(e);return new t(Math.max(this.start,0),Math.min(this.end,n-1))},t.prototype.hasEntireRow=function(e){return!1},t.prototype.hasEntireColumn=function(e){return e>=this.start&&e<=this.end},t.prototype.size=function(e){return(this.end-this.start+1)*Zoe(e)},t.prototype.has=function(e,t){return t.column>=this.start&&t.column<=this.end},t}(sse);function use(e){var t=Qoe(e);return new ese(tse,t)}function fse(e){return Number.isInteger(e)&&e>=0}var dse=function(e){function t(t){return e.call(this,"".concat(t," is not a valid index. It must be 0 or a positive integer"))||this}return ioe(t,e),t}(Error),hse="text/plain";function pse(e,t,n){void 0===t&&(t=0),void 0===n&&(n=1);var r=[];if(-1===Math.sign(e-t)){for(var i=t;i>e;i-=n)r.push(i);return r}for(i=t;i<e;i+=n)r.push(i);return r}function mse(e,t){return Boolean(e&&function(e,t){return e.column===t.column&&e.row===t.row}(t,e))}function gse(e){return{width:e.offsetWidth,height:e.offsetHeight,left:e.offsetLeft,top:e.offsetTop}}function vse(e,t,n){var r=t&&t[e.row],i=n&&n[e.column];return r&&i&&aoe(aoe({},r),i)}function yse(e,t,n){var r=vse(n.start,e,t),i=vse(n.end,e,t);return r&&i&&{width:i.left+i.width-r.left,height:i.top+i.height-r.top,top:r.top,left:r.left}}function bse(e){var t=function(e,t){var n,r,i=[];try{for(var a=soe(Yoe(t)),o=a.next();!o.done;o=a.next()){var s=loe(o.value,2),l=s[0];Woe(l,e(s[1],l),i)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i}((function(e){return(null==e?void 0:e.value)||""}),e);return function(e,t,n){void 0===t&&(t="\t"),void 0===n&&(n="\n");for(var r="",i=Koe(e),a=i.rows,o=i.columns,s=0;s<a;s++){s&&(r+=n);for(var l=0;l<o;l++)l&&(r+=t),e[s]&&l in e[s]&&(r+=String(e[s][l]))}return r}(t)}function xse(e,t){return null!==e&&"view"===t&&_se(e)}function _se(e){return e.matches(":focus-within")}function wse(e){return"string"==typeof e&&e.includes("\n")}function Ase(e){return"".concat(e.row,",").concat(e.column)}function kse(e){var t=loe(e.split(","),2),n=t[0],r=t[1];return{row:Number(n),column:Number(r)}}var Ese=function(){function e(e){this.set=e}return e.from=function(t){var n,r,i=new Set;try{for(var a=soe(t),o=a.next();!o.done;o=a.next()){var s=o.value;i.add(Ase(s))}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return new e(i)},e.prototype.has=function(e){return this.set.has(Ase(e))},Object.defineProperty(e.prototype,"size",{get:function(){return this.set.size},enumerable:!1,configurable:!0}),e.prototype.add=function(t){var n=new Set(this.set);return n.add(Ase(t)),new e(n)},e.prototype.delete=function(t){var n=new Set(this.set);return n.delete(Ase(t))?new e(n):this},e.prototype.difference=function(e){var t,n,r=this;try{for(var i=soe(e),a=i.next();!a.done;a=i.next()){var o=a.value;r=r.delete(o)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},e.prototype.union=function(e){var t,n,r=this;try{for(var i=soe(e),a=i.next();!a.done;a=i.next()){var o=a.value;r=r.add(o)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},e.prototype[Symbol.iterator]=function(){var e,t,n,r,i;return ooe(this,(function(a){switch(a.label){case 0:a.trys.push([0,5,6,7]),e=soe(this.set),t=e.next(),a.label=1;case 1:return t.done?[3,4]:[4,kse(t.value)];case 2:a.sent(),a.label=3;case 3:return t=e.next(),[3,1];case 4:return[3,7];case 5:return n=a.sent(),r={error:n},[3,7];case 6:try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}return[7];case 7:return[2]}}))},e}();function Tse(e){return"string"==typeof e&&e.startsWith("=")&&e.length>1}function Mse(e){return e.slice(1)}function Sse(e,t){return new(Kae())(aoe(aoe({},t),{onCell:function(t){var n=qoe({row:t.row-1,column:t.col-1},e);return isNaN(null==n?void 0:n.value)?null==n?void 0:n.value:Number(null==n?void 0:n.value)},onRange:function(t){var n=Koe(e);return function(e,t){for(var n=[],r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++){var a=e[r][i];n.push(t?t(a,{row:r,column:i}):a)}return n}(Hoe({row:t.from.row-1,column:t.from.col-1},{row:Math.min(t.to.row-1,n.rows-1),column:Math.min(t.to.col-1,n.columns-1)},e),(function(e){return isNaN(null==e?void 0:e.value)?null==e?void 0:e.value:Number(null==e?void 0:e.value)}))}}))}var Cse=new Xae.DepParser;function Ose(e,t,n){var r=Koe(n),i=r.rows,a=r.columns;try{var o=Cse.parse(e,Rse(t)),s=Ese.from(o.flatMap((function(e){if("from"in e){var t=e.from,n=e.to,r={row:t.row-1,column:t.col-1},o={row:Math.min(n.row-1,i-1),column:Math.min(n.col-1,a-1)},s=new ese(r,o);return Array.from(s)}return{row:e.row-1,column:e.col-1}})));return s}catch(e){if(e instanceof Xae.FormulaError)return Ese.from([]);throw e}}function Rse(e){return{row:e.row+1,col:e.column+1,sheet:"Sheet1"}}var Nse=function(){function e(e){void 0===e&&(e=new Map),this.forwards=e}return e.from=function(t){var n,r,i=new Map;try{for(var a=soe(t),o=a.next();!o.done;o=a.next()){var s=loe(o.value,2),l=s[0],c=s[1];i.set(Ase(l),c)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return new e(i)},e.prototype.set=function(t,n){var r=new e(new Map(this.forwards));return 0===n.size?(r.forwards.delete(Ase(t)),r):(r.forwards.set(Ase(t),n),r)},e.prototype.get=function(e){return this.forwards.get(Ase(e))||Ese.from([])},e.prototype.getBackwards=function(e){var t,n,r=Ese.from([]);try{for(var i=soe(this.forwards),a=i.next();!a.done;a=i.next()){var o=loe(a.value,2),s=o[0];o[1].has(e)&&(r=r.add(kse(s)))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},e.prototype.getBackwardsRecursive=function(e,t){var n,r;void 0===t&&(t=Ese.from([]));var i=this.getBackwards(e),a=t;try{for(var o=soe(i),s=o.next();!s.done;s=o.next()){var l=s.value;a.has(l)||(a=a.add(l),i=i.union(this.getBackwardsRecursive(l,a)))}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},e.prototype.hasCircularDependency=function(e){for(var t,n,r=Ese.from([]),i=[e];i.length>0;){var a=i.pop();if(a){if(r.has(a))return!0;r=r.add(a);var o=this.get(a);if(o)try{for(var s=(t=void 0,soe(o)),l=s.next();!l.done;l=s.next()){var c=l.value;i.push(c)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}}}return!1},e.prototype[Symbol.iterator]=function(){var e,t,n,r,i,a,o,s,l,c,u,f,d,h,p,m,g;return ooe(this,(function(v){switch(v.label){case 0:e=new Set,v.label=1;case 1:v.trys.push([1,13,14,15]),t=soe(this.forwards),n=t.next(),v.label=2;case 2:return n.done?[3,12]:(r=loe(n.value,2),i=r[0],a=r[1],o=kse(i),e.add(i),[4,[o,a]]);case 3:v.sent(),v.label=4;case 4:v.trys.push([4,9,10,11]),m=void 0,s=soe(a),l=s.next(),v.label=5;case 5:return l.done?[3,8]:(c=l.value,u=Ase(c),e.has(u)||this.forwards.has(u)?[3,7]:(e.add(u),[4,[c,Ese.from([])]]));case 6:v.sent(),v.label=7;case 7:return l=s.next(),[3,5];case 8:return[3,11];case 9:return f=v.sent(),m={error:f},[3,11];case 10:try{l&&!l.done&&(g=s.return)&&g.call(s)}finally{if(m)throw m.error}return[7];case 11:return n=t.next(),[3,2];case 12:return[3,15];case 13:return d=v.sent(),h={error:d},[3,15];case 14:try{n&&!n.done&&(p=t.return)&&p.call(t)}finally{if(h)throw h.error}return[7];case 15:return[2]}}))},e.prototype.traverseBFSBackwards=function(){var e,t,n,r,i,a,o,s,l,c,u,f,d,h;return ooe(this,(function(p){switch(p.label){case 0:e=Ese.from([]),t=[];try{for(n=soe(this),r=n.next();!r.done;r=n.next())i=loe(r.value,2),a=i[0],0===i[1].size&&(e=e.add(a),t.push(a))}catch(e){u={error:e}}finally{try{r&&!r.done&&(f=n.return)&&f.call(n)}finally{if(u)throw u.error}}p.label=1;case 1:return t.length>0?(a=t.shift())?[4,a]:[3,1]:[3,3];case 2:if(p.sent(),0===(o=this.getBackwards(a)).size)return[3,1];try{for(d=void 0,s=soe(o),l=s.next();!l.done;l=s.next())c=l.value,e.has(c)||0!==this.get(c).difference(e).size||(t.push(c),e=e.add(c))}catch(e){d={error:e}}finally{try{l&&!l.done&&(h=s.return)&&h.call(s)}finally{if(d)throw d.error}}return[3,1];case 3:return[2]}}))},e}(),Lse=function(e,t,n,r){this.createFormulaParser=e,this.data=t,this.referenceGraph=n||function(e){var t,n,r=[];try{for(var i=soe(Yoe(e)),a=i.next();!a.done;a=i.next()){var o=loe(a.value,2),s=o[0],l=o[1];if(l&&Tse(l.value)){var c=Ose(Mse(l.value),s,e);r.push([s,c])}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return Nse.from(r)}(t),this.evaluatedData=r||function(e,t,n){var r,i,a=e,o=n(a);try{for(var s=soe(t.traverseBFSBackwards()),l=s.next();!l.done;l=s.next()){var c=l.value,u=qoe(c,e);if(u&&Tse(u.value)){var f=Pse(u.value,c,o);o=n(a=Voe(c,aoe(aoe({},u),{value:f}),a))}}}catch(e){r={error:e}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return a}(t,this.referenceGraph,this.createFormulaParser)};function Dse(e,t,n){var r=Voe(t,n,e.data),i=Tse(n.value)?function(e,t,n,r){var i=Ose(Mse(n.value),t,r),a=e.set(t,i);return a}(e.referenceGraph,t,n,r):e.referenceGraph,a=e.createFormulaParser(r),o=function(e,t,n,r,i,a){var o,s,l,c;if(n.hasCircularDependency(r)){var u=Ese.from([r]),f=Voe(r,aoe(aoe({},i),{value:Xae.FormulaError.REF}),e);try{for(var d=soe(n.getBackwardsRecursive(r)),h=d.next();!h.done;h=d.next()){var p=h.value;if(u.has(p))break;u=u.add(p),(x=qoe(p,t))&&(f=Voe(p,aoe(aoe({},x),{value:Xae.FormulaError.REF}),f))}}catch(e){o={error:e}}finally{try{h&&!h.done&&(s=d.return)&&s.call(d)}finally{if(o)throw o.error}}return f}var m=e,g=Tse(i.value)?Pse(i.value,r,a):i.value,v=aoe(aoe({},i),{value:g});m=Voe(r,v,m);try{for(var y=soe(n.getBackwardsRecursive(r)),b=y.next();!b.done;b=y.next()){var x;if(x=qoe(p=b.value,t)){var _=Tse(x.value)?Pse(x.value,r,a):x.value;m=Voe(p,aoe(aoe({},x),{value:_}),m)}}}catch(e){l={error:e}}finally{try{b&&!b.done&&(c=y.return)&&c.call(y)}finally{if(l)throw l.error}}return m}(e.evaluatedData,r,i,t,n,a);return new Lse(e.createFormulaParser,r,i,o)}function Pse(e,t,n){var r=Mse(e);try{return function(e,t,n){try{var r=Rse(t),i=n.parse(e,r);return i instanceof Xae.FormulaError?i.toString():i}catch(e){if(e instanceof Xae.FormulaError)return e.toString();throw e}}(r,t,n)}catch(e){return Xae.FormulaError.REF}}var Ise={active:null,mode:"view",rowDimensions:{},columnDimensions:{},lastChanged:null,hasPasted:!1,cut:!1,dragging:!1,model:new Lse(Sse,[]),selected:new rse,copied:null,lastCommit:null};function Fse(e,t){var n,r,i,a,o,s;switch(t.type){case uoe:var l=t.payload.data,c=e.active&&Xoe(e.active,l)?e.active:null,u=e.selected.normalizeTo(l);return aoe(aoe({},e),{model:new Lse(e.model.createFormulaParser,l),active:c,selected:u});case foe:var f=t.payload.createFormulaParser;return aoe(aoe({},e),{model:new Lse(f,e.model.data)});case doe:var d=t.payload,h=d.row,p=d.extend,m=e.active;return aoe(aoe({},e),{selected:new lse(p&&m?m.row:h,h),active:p&&m?m:aoe(aoe({},tse),{row:h}),mode:"view"});case hoe:var g=t.payload,v=g.column;p=g.extend,m=e.active;return aoe(aoe({},e),{selected:new cse(p&&m?m.column:v,v),active:p&&m?m:aoe(aoe({},tse),{column:v}),mode:"view"});case poe:return aoe(aoe({},e),{selected:new ose,active:tse,mode:"view"});case moe:var y=t.payload.selection,b=y.toRange(e.model.data);m=e.active&&y.has(e.model.data,e.active)?e.active:null==b?void 0:b.start;return aoe(aoe({},e),{selected:y,active:m||null,mode:"view"});case goe:var x=t.payload.point;return e.active&&!mse(e.active,x)?aoe(aoe({},e),{selected:new ise(new ese(x,e.active)),mode:"view"}):e;case voe:x=t.payload.point;return aoe(aoe({},e),{selected:new ise(new ese(x,x)),active:x,mode:mse(e.active,x)?"edit":"view"});case yoe:var _=t.payload,w=(m=_.active,_.data);return Jse(e)?e:aoe(aoe({},e),{model:Dse(e.model,m,w),lastChanged:m});case boe:var A=t.payload,k=(x=A.point,A.dimensions),E=e.rowDimensions[x.row],T=e.columnDimensions[x.column];return E&&T&&E.top===k.top&&E.height===k.height&&T.left===k.left&&T.width===k.width?e:aoe(aoe({},e),{rowDimensions:aoe(aoe({},e.rowDimensions),(n={},n[x.row]={top:k.top,height:k.height},n)),columnDimensions:aoe(aoe({},e.columnDimensions),(r={},r[x.column]={left:k.left,width:k.width},r))});case xoe:case _oe:var M=e.selected.toRange(e.model.data);return aoe(aoe({},e),{copied:M,cut:t.type===_oe,hasPasted:!1});case woe:var S=t.payload.data;if(!(m=e.active))return e;var C=function(e,t,n,r){return void 0===n&&(n="\t"),void 0===r&&(r=/\r\n|\n|\r/),e.replace(/"([^"]*?)"/g,(function(e,t){return t.replace(/\n/g,"\\n")})).split(r).map((function(e){return e.split(n).map((function(e){return e.replace(/\\n/g,"\n")})).map(t)}))}(S,(function(e){return{value:e}})),O=Koe(C);if((M=e.selected.toRange(e.model.data))&&1===O.rows&&1===O.columns){var R=qoe({row:0,column:0},C),N=e.cut&&e.copied?Goe(e.copied.start,e.model.data):e.model.data,L=[];try{for(var D=soe(M||[]),P=D.next();!P.done;P=D.next()){var I=qoe(x=P.value,e.model.data);L.push({prevCell:I||null,nextCell:R||null}),N=Voe(x,R,N)}}catch(e){i={error:e}}finally{try{P&&!P.done&&(a=D.return)&&a.call(D)}finally{if(i)throw i.error}}return aoe(aoe({},e),{model:new Lse(Sse,N),copied:null,cut:!1,hasPasted:!0,mode:"view",lastCommit:L})}var F={rows:m.row+O.rows,columns:m.column+O.columns},z=function(e,t){var n=Koe(e),r=n.rows,i=n.columns;if(r>=t.rows&&i>=t.columns)return e;var a={rows:t.rows>r?t.rows:r,columns:t.columns>i?t.columns:i},o=coe([],loe(e),!1);if(a.columns>i){var s=a.columns-i;o=o.map((function(e){return coe(coe([],loe(e),!1),loe(Array(s).fill(void 0)),!1)}))}if(a.rows>r){var l=a.rows-r,c=Array(a.columns).fill(void 0);o=coe(coe([],loe(o),!1),loe(Array(l).fill(c)),!1)}return o}(e.model.data,F),j={data:z,commit:[]};try{for(var B=soe(Yoe(C)),U=B.next();!U.done;U=B.next()){var $=loe(U.value,2),q=(x=$[0],R=$[1],j.commit||[]),H={row:x.row+m.row,column:x.column+m.column},V=j.data;if(e.cut){if(e.copied)V=Goe({row:x.row+e.copied.start.row,column:x.column+e.copied.start.column},j.data);q=coe(coe([],loe(q),!1),[{prevCell:R||null,nextCell:null}],!1)}Xoe(H,z)||(j={data:V,commit:q});I=qoe(H,V)||null;q=coe(coe([],loe(q),!1),[{prevCell:I,nextCell:R||null}],!1),j.data=Voe(H,aoe(aoe({value:void 0},I),R),V),j.commit=q}}catch(e){o={error:e}}finally{try{U&&!U.done&&(s=B.return)&&s.call(B)}finally{if(o)throw o.error}}return aoe(aoe({},e),{model:new Lse(Sse,j.data),selected:new ise(new ese(m,{row:m.row+O.rows-1,column:m.column+O.columns-1})),copied:null,cut:!1,hasPasted:!0,mode:"view",lastCommit:j.commit});case Aoe:return zse(e);case koe:return Use(e);case"CLEAR":return jse(e);case Eoe:return Bse(e);case Toe:var W=t.payload.event;return Jse(e)||W.metaKey?e:"view"===e.mode&&e.active?1===(null==(M=e.selected.toRange(e.model.data))?void 0:M.size())?zse(jse(e)):zse(e):e;case Moe:var G=t.payload.event,Y=Zse(e,G);return Y?aoe(aoe({},e),Y(e,G)):e;case Soe:return aoe(aoe({},e),{dragging:!0});case Coe:return aoe(aoe({},e),{dragging:!1});case Ooe:var X=t.payload.changes;return aoe(aoe({},e),$se(X));default:throw new Error("Unknown action")}}function zse(e){return Jse(e)?e:aoe(aoe({},e),{mode:"edit"})}function jse(e){var t,n;if(!e.active)return e;var r=function(e){return function(e){return e&&!e.readOnly}(e)?Object.assign({},e,{value:void 0}):e},i=e.selected.toRange(e.model.data),a=[],o=e.model.data;try{for(var s=soe(i||[]),l=s.next();!l.done;l=s.next()){var c=l.value,u=qoe(c,e.model.data),f=r(u);a.push({prevCell:u||null,nextCell:f||null}),o=Voe(c,f,o)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return aoe(aoe(aoe({},e),{model:new Lse(Sse,o)}),$se(a))}function Bse(e){return aoe(aoe({},e),{active:null,selected:new rse})}function Use(e){return aoe(aoe({},e),{mode:"view"})}function $se(e){return{lastCommit:e}}var qse,Hse=function(e,t){return function(n){if(n.active){var r=Koe(n.model.data),i=n.active.column+t>=r.columns,a={row:n.active.row+e+(i?1:0),column:(n.active.column+t)%r.columns};return Xoe(a,n.model.data)?aoe(aoe({},n),{active:a,selected:new ise(new ese(a,a)),mode:"view"}):aoe(aoe({},n),{mode:"view"})}}},Vse={ArrowUp:Hse(-1,0),ArrowDown:Hse(1,0),ArrowLeft:Hse(0,-1),ArrowRight:Hse(0,1),Tab:Hse(0,1),Enter:zse,Backspace:jse,Delete:jse,Escape:Bse},Wse={Escape:Use,Tab:Vse.Tab,Enter:Vse.ArrowDown},Gse={Tab:Hse(0,-1)};!function(e){e.Left="Left",e.Right="Right",e.Top="Top",e.Bottom="Bottom"}(qse||(qse={}));var Yse={ArrowUp:function(e){return aoe(aoe({},e),{selected:Qse(e.selected,e.active,e.model.data,qse.Top)})},ArrowDown:function(e){return aoe(aoe({},e),{selected:Qse(e.selected,e.active,e.model.data,qse.Bottom)})},ArrowLeft:function(e){return aoe(aoe({},e),{selected:Qse(e.selected,e.active,e.model.data,qse.Left)})},ArrowRight:function(e){return aoe(aoe({},e),{selected:Qse(e.selected,e.active,e.model.data,qse.Right)})},Tab:Hse(0,-1)},Xse={},Kse={};function Zse(e,t){var n=t.key;return("edit"===e.mode?t.shiftKey?Gse:Wse:t.shiftKey&&t.metaKey?Xse:t.shiftKey?Yse:t.metaKey?Kse:Vse)[n]}function Jse(e){var t=function(e){var t=e.active&&qoe(e.active,e.model.data);return t||null}(e);return Boolean(null==t?void 0:t.readOnly)}function Qse(e,t,n,r){if(!t)return e;if(e instanceof ise){var i=function(e,t,n,r){var i,a=r===qse.Left||r===qse.Right?"column":"row",o=r===qse.Left||r===qse.Top?"start":"end",s="start"===o?-1:1,l=e.range.has(aoe(aoe({},t),(i={},i[a]=t[a]+-1*s,i))),c=l?"start"===o?"end":"start":o,u=new ese(e.range.start,e.range.end);u[c][a]+=s;var f=new ise(u).normalizeTo(n);return f}(e,t,n,r);return i}return e instanceof cse?function(e,t,n,r){if(r===qse.Top||r===qse.Bottom)return e;var i=r===qse.Left?-1:1,a=r===qse.Left?"start":"end",o="start"===a?"end":"start",s=aoe({},e);(r===qse.Left?e.end>t.row:e.start<t.row)?s[o]=e[o]+i:s[a]=e[a]+i;var l=new cse(Math.max(s.start,0),Math.max(s.end,0));return l.normalizeTo(n)}(e,t,n,r):e instanceof lse?function(e,t,n,r){if(r===qse.Left||r===qse.Right)return e;var i=r===qse.Top?-1:1,a=r===qse.Top?"start":"end",o="start"===a?"end":"start",s=aoe({},e);(r===qse.Top?e.end>t.row:e.start<t.row)?s[o]=e[o]+i:s[a]=e[a]+i;var l=new lse(Math.max(s.start,0),Math.max(s.end,0));return l.normalizeTo(n)}(e,t,n,r):e}var ele=function(e){const t=(0,v.createContext)({[Jae]:{v:{current:e},n:{current:-1},l:new Set,u:e=>e()}});var n;return t[Qae]=t.Provider,t.Provider=(n=t.Provider,({value:e,children:t})=>{const r=(0,v.useRef)(e),i=(0,v.useRef)(0),[a,o]=(0,v.useState)(null);a&&(a(e),o(null));const s=(0,v.useRef)();if(!s.current){const e=new Set,t=(t,n)=>{(0,Qe.unstable_batchedUpdates)((()=>{i.current+=1;const r={n:i.current};null!=n&&n.suspense&&(r.n*=-1,r.p=new Promise((e=>{o((()=>t=>{r.v=t,delete r.p,e(t)}))}))),e.forEach((e=>e(r))),t()}))};s.current={[Jae]:{v:r,n:i,l:e,u:t}}}return eoe((()=>{r.current=e,i.current+=1,toe((()=>{s.current[Jae].l.forEach((t=>{t({n:i.current,v:e})}))}))}),[e]),(0,v.createElement)(n,{value:s.current},t)}),delete t.Consumer,t}([Ise,function(){}]),tle=function(e){var t=e.children,n=pse(e.columns+(e.hideColumnIndicators?0:1)).map((function(e){return v.createElement("col",{key:e})}));return v.createElement("table",{className:"Spreadsheet__table"},v.createElement("colgroup",null,n),v.createElement("tbody",null,t))},nle=function(e){return v.createElement("tr",aoe({},e))},rle=function(e){return v.createElement("tr",aoe({},e))};function ile(){return noe(ele,(function(e){var t=loe(e,2);return t[0],t[1]}))}function ale(e){return noe(ele,(function(t){var n=loe(t,1)[0];return e(n)}))}var ole=function(e){var t=e.selected,n=e.onSelect,r=v.useCallback((function(){n()}),[n]);return v.createElement("th",{className:Ze()("Spreadsheet__header",{"Spreadsheet__header--selected":t}),onClick:r,tabIndex:0})},sle=function(e){return function(t){var n=ile(),r=v.useCallback((function(){return n({type:poe})}),[n]),i=ale((function(e){return e.selected instanceof ose}));return v.createElement(e,aoe({},t,{selected:i,onSelect:r}))}},lle=function(e){var t=e.column,n=e.label,r=e.selected,i=e.onSelect,a=v.useCallback((function(e){i(t,e.shiftKey)}),[i,t]);return v.createElement("th",{className:Ze()("Spreadsheet__header",{"Spreadsheet__header--selected":r}),onClick:a,tabIndex:0},void 0!==n?n:function(e){var t="",n=e;for(;n>=0;)t=String.fromCharCode(65+n%26)+t,n=Math.floor(n/26)-1;return t}(t))},cle=function(e){return function(t){var n=ile(),r=v.useCallback((function(e,t){return n(function(e,t){return{type:hoe,payload:{column:e,extend:t}}}(e,t))}),[n]),i=ale((function(e){return e.selected.hasEntireColumn(t.column)}));return v.createElement(e,aoe({},t,{selected:i,onSelect:r}))}};var ule=function(e){var t=e.row,n=e.label,r=e.selected,i=e.onSelect,a=v.useCallback((function(e){i(t,e.shiftKey)}),[i,t]);return v.createElement("th",{className:Ze()("Spreadsheet__header",{"Spreadsheet__header--selected":r}),onClick:a,tabIndex:0},void 0!==n?n:t+1)},fle=function(e){return function(t){var n=ile(),r=ale((function(e){return e.selected.hasEntireRow(t.row)})),i=v.useCallback((function(e,t){return n(function(e,t){return{type:doe,payload:{row:e,extend:t}}}(e,t))}),[n]);return v.createElement(e,aoe({},t,{selected:r,onSelect:i}))}},dle=function(e){var t=e.row,n=e.column,r=e.DataViewer,i=e.selected,a=e.active,o=e.dragging,s=e.mode,l=e.data,c=e.evaluatedData,u=e.select,f=e.activate,d=e.setCellDimensions,h=e.setCellData,p=v.useRef(null),m=v.useMemo((function(){return{row:t,column:n}}),[t,n]),g=v.useCallback((function(e){"view"===s&&(d(m,gse(e.currentTarget)),e.shiftKey?u(m):f(m))}),[s,d,m,u,f]),y=v.useCallback((function(e){o&&(d(m,gse(e.currentTarget)),u(m))}),[d,u,o,m]);return v.useEffect((function(){var e=p.current;i&&e&&d(m,gse(e)),e&&a&&"view"===s&&e.focus()}),[d,i,a,s,m,l]),l&&l.DataViewer&&(r=l.DataViewer),v.createElement("td",{ref:p,className:Ze()("Spreadsheet__cell",null==l?void 0:l.className,{"Spreadsheet__cell--readonly":null==l?void 0:l.readOnly}),onMouseOver:y,onMouseDown:g,tabIndex:0},v.createElement(r,{row:t,column:n,cell:l,evaluatedCell:c,setCellData:h}))},hle=function(e){return function(t){var n=t.row,r=t.column,i=ile(),a=v.useMemo((function(){return{row:n,column:r}}),[n,r]),o=v.useCallback((function(e){return i(Doe(a,e))}),[i,a]),s=v.useCallback((function(e){return i(function(e){return{type:goe,payload:{point:e}}}(e))}),[i]),l=v.useCallback((function(e){return i(function(e){return{type:voe,payload:{point:e}}}(e))}),[i]),c=v.useCallback((function(e,t){return i(function(e,t){return{type:boe,payload:{point:e,dimensions:t}}}(e,t))}),[i]),u=ale((function(e){return mse(e.active,a)})),f=ale((function(e){return u?e.mode:"view"})),d=ale((function(e){return qoe(a,e.model.data)})),h=ale((function(e){return qoe(a,e.model.evaluatedData)})),p=ale((function(e){return e.selected.has(e.model.data,a)})),m=ale((function(e){return e.dragging})),g=ale((function(e){var t;return(null===(t=e.copied)||void 0===t?void 0:t.has(a))||!1}));return v.createElement(e,aoe({},t,{selected:p,active:u,copied:g,dragging:m,mode:f,evaluatedData:h,data:d,select:s,activate:l,setCellDimensions:c,setCellData:o}))}},ple="TRUE",mle="FALSE",gle=function(e){var t=function(e,t){var n,r=null!==(n=null==t?void 0:t.value)&&void 0!==n?n:null==e?void 0:e.value;if(r&&"object"==typeof r)return r.toString();return r}(e.cell,e.evaluatedCell);return"boolean"==typeof t?v.createElement("span",{className:"Spreadsheet__data-viewer Spreadsheet__data-viewer--boolean"},function(e){return e?ple:mle}(t)):v.createElement("span",{className:Ze()("Spreadsheet__data-viewer",{"Spreadsheet__data-viewer--preserve-breaks":wse(t)})},t)};var vle=function(e){var t,n=e.onChange,r=e.cell,i=v.useRef(null),a=v.useCallback((function(e){n(aoe(aoe({},r),{value:e.target.value}))}),[n,r]);v.useEffect((function(){var e;i.current&&((e=i.current).selectionStart=e.selectionEnd=e.value.length)}),[i]);var o=null!==(t=null==r?void 0:r.value)&&void 0!==t?t:"";return v.createElement("div",{className:"Spreadsheet__data-editor"},v.createElement("input",{ref:i,type:"text",onChange:a,value:o,autoFocus:!0}))},yle=function(e){var t=v.useRef(null),n=ile(),r=v.useCallback((function(e,t){return n(Doe(e,t))}),[n]),i=v.useCallback((function(){return n({type:Aoe})}),[n]),a=v.useCallback((function(e){return n(function(e){return{type:Ooe,payload:{changes:e}}}(e))}),[n]),o=v.useCallback((function(){n({type:koe})}),[n]),s=ale((function(e){return e.active})),l=ale((function(e){return e.mode})),c=ale((function(e){return e.active?qoe(e.active,e.model.data):void 0})),u=ale((function(e){return s?vse(s,e.rowDimensions,e.columnDimensions):void 0})),f=v.useMemo((function(){return!s||!u}),[s,u]),d=v.useRef(void 0),h=v.useRef(null),p=v.useRef(void 0),m=v.useCallback((function(e){s&&r(s,e)}),[r,s]);v.useEffect((function(){var e=t.current;!f&&e&&e.focus()}),[t,f]),v.useEffect((function(){var e=h.current,t=p.current;if(h.current=s,p.current=c,e&&t){var n=(null==s?void 0:s.row)!==e.row||(null==s?void 0:s.column)!==e.column;if(n||"edit"!==l){var r=d.current;t!==r?a([{prevCell:r||null,nextCell:t}]):n||c===t||a([{prevCell:t,nextCell:c||null}]),d.current=c}}}));var g=c&&c.DataEditor||e.DataEditor,y=c&&c.readOnly;return f?null:v.createElement("div",{ref:t,className:Ze()("Spreadsheet__active-cell","Spreadsheet__active-cell--".concat(l)),style:u,onClick:"view"!==l||y?void 0:i,tabIndex:0},"edit"===l&&s&&v.createElement(g,{row:s.row,column:s.column,cell:c,onChange:m,exitEditMode:o}))},ble=function(e){var t,n=e.dimensions,r=e.dragging,i=e.hidden,a=e.variant,o=n||{},s=o.width,l=o.height,c=o.top,u=o.left;return v.createElement("div",{className:Ze()("Spreadsheet__floating-rect",(t={},t["Spreadsheet__floating-rect--".concat(a)]=a,t["Spreadsheet__floating-rect--dragging"]=r,t["Spreadsheet__floating-rect--hidden"]=i,t)),style:{width:s,height:l,top:c,left:u}})},xle=function(){var e=ale((function(e){return e.selected})),t=ale((function(t){return e&&function(e,t,n,r){var i=r.toRange(n);return i?yse(e,t,i):void 0}(t.rowDimensions,t.columnDimensions,t.model.data,t.selected)})),n=ale((function(e){return e.dragging})),r=ale((function(e){return e.selected.size(e.model.data)<2}));return v.createElement(ble,{variant:"selected",dimensions:t,dragging:n,hidden:r})},_le=function(){var e=ale((function(e){return e.copied})),t=ale((function(t){return e&&yse(t.rowDimensions,t.columnDimensions,e)})),n=null===e;return v.createElement(ble,{variant:"copied",dimensions:t,hidden:n,dragging:!1})};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".Spreadsheet {\n  --background-color: white;\n  --text-color: black;\n  --readonly-text-color: rgba(0, 0, 0, 0.4);\n  --outline-color: #4285f4;\n  --outline-background-color: rgba(160, 195, 255, 0.2);\n  --border-color: hsl(2deg, 0%, 91%);\n  --header-background-color: rgba(0, 0, 0, 0.04);\n  --elevation: 0 2px 5px rgba(0, 0, 0, 0.4);\n\n  position: relative;\n  overflow: visible;\n  background: var(--background-color);\n  color: var(--text-color);\n  display: inline-block;\n}\n\n.Spreadsheet--dark-mode {\n  --background-color: black;\n  --text-color: white;\n  --readonly-text-color: rgba(255, 255, 255, 0.4);\n  --header-background-color: rgba(255, 255, 255, 0.04);\n  --border-color: hsl(2deg, 0%, 19%);\n}\n\n.Spreadsheet__active-cell {\n  position: absolute;\n  border: 2px solid var(--outline-color);\n  box-sizing: border-box;\n}\n\n.Spreadsheet__active-cell--edit {\n  background: var(--background-color);\n  box-shadow: var(--elevation);\n}\n\n.Spreadsheet__table {\n  border-collapse: collapse;\n  table-layout: fixed;\n}\n\n.Spreadsheet__cell,\n.Spreadsheet__active-cell {\n  cursor: cell;\n}\n\n.Spreadsheet__cell {\n  outline: none;\n}\n\n.Spreadsheet__cell--readonly {\n  color: var(--readonly-text-color);\n}\n\n.Spreadsheet__cell,\n.Spreadsheet__header {\n  min-width: 6em;\n  min-height: 1.9em;\n  height: 1.9em;\n  max-height: 1.9em;\n  border: 1px solid var(--border-color);\n  overflow: hidden;\n  word-break: keep-all;\n  white-space: nowrap;\n  text-align: left;\n  box-sizing: border-box;\n  user-select: none;\n}\n\n.Spreadsheet__header {\n  background: var(--header-background-color);\n  color: var(--readonly-text-color);\n  text-align: center;\n  font: inherit;\n}\n\n.Spreadsheet__header--selected {\n  background: #5f6268;\n  color: #fff;\n}\n\n.Spreadsheet__header,\n.Spreadsheet__data-viewer,\n.Spreadsheet__data-editor input {\n  padding: 4px;\n  box-sizing: border-box;\n}\n\n.Spreadsheet__data-viewer--preserve-breaks {\n  white-space: pre-wrap;\n}\n\n.Spreadsheet__data-editor,\n.Spreadsheet__data-editor input {\n  width: 100%;\n  height: 100%;\n}\n\n.Spreadsheet__data-editor input {\n  font: inherit;\n  color: inherit;\n  background: none;\n  border: none;\n  outline: none;\n  margin: 0;\n}\n\n.Spreadsheet__data-viewer--boolean {\n  text-align: center;\n}\n\n.Spreadsheet__floating-rect {\n  position: absolute;\n  pointer-events: none;\n  box-sizing: border-box;\n}\n\n.Spreadsheet__floating-rect--hidden {\n  display: none;\n}\n\n.Spreadsheet__floating-rect--selected {\n  background: var(--outline-background-color);\n  border: 2px var(--outline-color) solid;\n}\n\n.Spreadsheet__floating-rect--dragging {\n  border: none;\n}\n\n.Spreadsheet__floating-rect--copied {\n  border: 2px var(--outline-color) dashed;\n}\n");var wle=function(e){var t,n=e.className,r=e.darkMode,i=e.columnLabels,a=e.rowLabels,o=e.hideColumnIndicators,s=e.hideRowIndicators,l=e.onKeyDown,c=e.Table,u=void 0===c?tle:c,f=e.Row,d=void 0===f?nle:f,h=e.HeaderRow,p=void 0===h?rle:h,m=e.DataEditor,g=void 0===m?vle:m,y=e.DataViewer,b=void 0===y?gle:y,x=e.onChange,_=void 0===x?function(){}:x,w=e.onModeChange,A=void 0===w?function(){}:w,k=e.onSelect,E=void 0===k?function(){}:k,T=e.onActivate,M=void 0===T?function(){}:T,S=e.onBlur,C=void 0===S?function(){}:S,O=e.onCellCommit,R=void 0===O?function(){}:O,N=e.onEvaluatedDataChange,L=void 0===N?function(){}:N,D=v.useMemo((function(){var t=e.createFormulaParser||Sse,n=new Lse(t,e.data);return aoe(aoe({},Ise),{model:n,selected:e.selected||Ise.selected})}),[e.createFormulaParser,e.data,e.selected]),P=v.useReducer(Fse,D),I=loe(P,2),F=I[0],z=I[1],j=v.useMemo((function(){return function(e,t,n){var r=Koe(e),i=r.columns,a=r.rows;return{rows:t?Math.max(a,t.length):a,columns:n?Math.max(i,n.length):i}}(F.model.data,a,i)}),[F.model.data,a,i]),B=F.mode,U=v.useRef(null),$=function(e){return v.useCallback((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return z(e.apply(void 0,coe([],loe(t),!1)))}),[e])},q=$(Uoe),H=$(Boe),V=$(Poe),W=$(Foe),G=$(Ioe),Y=$(zoe),X=$(joe),K=$(Roe),Z=$(Noe),J=$($oe),Q=$(Loe),ee=v.useRef(F.active);v.useEffect((function(){if(F.active!==ee.current)if(F.active)M(F.active);else{var e=U.current;e&&_se(e)&&document.activeElement&&document.activeElement.blur(),C()}ee.current=F.active}),[M,C,F.active]);var te=v.useRef(F.model.data);v.useEffect((function(){F.model.data!==te.current&&F.model.data!==e.data&&_(F.model.data),te.current=F.model.data}),[F.model.data,_,e.data]);var ne=v.useRef(F.model.evaluatedData);v.useEffect((function(){var e,t;(null===(e=null==F?void 0:F.model)||void 0===e?void 0:e.evaluatedData)!==(null==ne?void 0:ne.current)&&L(null===(t=null==F?void 0:F.model)||void 0===t?void 0:t.evaluatedData),ne.current=F.model.evaluatedData}),[null===(t=null==F?void 0:F.model)||void 0===t?void 0:t.evaluatedData,L]);var re=v.useRef(F.selected);v.useEffect((function(){F.selected.equals(re.current)||e.selected&&F.selected.equals(e.selected)||E(F.selected),re.current=F.selected}),[F.selected,E,e.selected]);var ie=v.useRef(F.mode);v.useEffect((function(){F.mode!==ie.current&&A(F.mode),ie.current=F.mode}),[F.mode,A]);var ae=v.useRef(F.lastCommit);v.useEffect((function(){var e,t;if(F.lastCommit&&F.lastCommit!==ae.current)try{for(var n=soe(F.lastCommit),r=n.next();!r.done;r=n.next()){var i=r.value;R(i.prevCell,i.nextCell,F.lastChanged)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}}),[R,F.lastChanged,F.lastCommit]);var oe=v.useRef(e.selected);v.useEffect((function(){e.selected&&oe.current&&!e.selected.equals(oe.current)&&Q(e.selected),oe.current=e.selected}),[e.selected,Q]);var se=v.useRef(e.data);v.useEffect((function(){e.data!==se.current&&K(e.data),se.current=e.data}),[e.data,K]);var le=v.useRef(e.createFormulaParser);v.useEffect((function(){e.createFormulaParser!==le.current&&e.createFormulaParser&&Z(e.createFormulaParser),le.current=e.createFormulaParser}),[e.createFormulaParser,Z]);var ce=v.useCallback((function(e){var t=F.model,n=F.selected,r=t.data,i=n.toRange(r);i&&function(e,t){var n;null===(n=e.clipboardData)||void 0===n||n.setData(hse,t)}(e,bse(Hoe(i.start,i.end,r)))}),[F]),ue=v.useCallback((function(e){xse(U.current,B)&&(e.preventDefault(),e.stopPropagation(),ce(e),q())}),[B,ce,q]),fe=v.useCallback((function(e){xse(U.current,B)&&(e.preventDefault(),e.stopPropagation(),ce(e),H())}),[B,ce,H]),de=v.useCallback((function(e){if(xse(U.current,B)&&(e.preventDefault(),e.stopPropagation(),e.clipboardData)){var t=function(e){return window.clipboardData&&window.clipboardData.getData?window.clipboardData.getData("Text"):e.clipboardData&&e.clipboardData.getData?e.clipboardData.getData(hse):""}(e);V(t)}}),[B,V]),he=v.useCallback((function(e){e.persist(),l&&l(e),e.defaultPrevented||(function(e,t){return void 0!==Zse(e,t)}(F,e)&&e.nativeEvent.preventDefault(),W(e))}),[F,l,W]),pe=v.useCallback((function(){X(),document.removeEventListener("mouseup",pe)}),[X]),me=v.useCallback((function(e){F.dragging||1!==e.buttons||(Y(),document.addEventListener("mouseup",pe))}),[F,Y,pe]),ge=v.useCallback((function(e){e.currentTarget.contains(e.relatedTarget)||J()}),[J]),ve=v.useMemo((function(){return hle(e.Cell||dle)}),[e.Cell]),ye=v.useMemo((function(){return sle(e.CornerIndicator||ole)}),[e.CornerIndicator]),be=v.useMemo((function(){return fle(e.RowIndicator||ule)}),[e.RowIndicator]),xe=v.useMemo((function(){return cle(e.ColumnIndicator||lle)}),[e.ColumnIndicator]);v.useEffect((function(){return document.addEventListener("cut",ue),document.addEventListener("copy",fe),document.addEventListener("paste",de),function(){document.removeEventListener("cut",ue),document.removeEventListener("copy",fe),document.removeEventListener("paste",de)}}),[ue,fe,de]);var _e=v.useMemo((function(){return v.createElement(u,{columns:j.columns,hideColumnIndicators:o},v.createElement(p,null,!s&&!o&&v.createElement(ye,null),!o&&pse(j.columns).map((function(e){return i?v.createElement(xe,{key:e,column:e,label:e in i?i[e]:null}):v.createElement(xe,{key:e,column:e})}))),pse(j.rows).map((function(e){return v.createElement(d,{key:e,row:e},!s&&(a?v.createElement(be,{key:e,row:e,label:e in a?a[e]:null}):v.createElement(be,{key:e,row:e})),pse(j.columns).map((function(t){return v.createElement(ve,{key:t,row:e,column:t,DataViewer:b})})))})))}),[u,j.rows,j.columns,o,d,p,s,ye,i,xe,a,be,ve,b]),we=v.useMemo((function(){return v.createElement(yle,{DataEditor:g})}),[g]),Ae=v.useMemo((function(){return v.createElement("div",{ref:U,className:Ze()("Spreadsheet",n,{"Spreadsheet--dark-mode":r}),onKeyPress:G,onKeyDown:he,onMouseMove:me,onBlur:ge},_e,we,v.createElement(xle,null),v.createElement(_le,null))}),[n,r,G,he,me,ge,_e,we]);return v.createElement(ele.Provider,{value:P},Ae)};function Ale(e){const t="value";return null==e?"":t in e?e[t]:""}function kle(e,t,n){const r=function(e,t){for(var n=Array(e),r=0;r<e;r++)n[r]=Array(t);return n}(e,t);if(null==n)return r;const i=n.split("\n");for(let e=0;e<i.length;e+=1){const t=i[e].split("\t");for(let n=0;n<t.length;n+=1)r[e][n]={value:t[n]}}return r}const Ele=e=>{let{name:t,columnLabels:n,nRows:r,nCols:i,maxHeight:a,value:o}=e;const[s,l]=v.useState(kle(r,i,o));a=a||"200px";const c=s.filter((e=>e.some((e=>""!==Ale(e))))).map((e=>e.map((e=>Ale(e))).join("\t"))).join("\n");return v.createElement("div",{style:{height:a,overflowY:"auto"}},v.createElement(wle,{data:s,columnLabels:n,onChange:l}),v.createElement("textarea",{value:c,name:t,readOnly:!0,hidden:!0}))};Ele.propTypes={name:le().string.isRequired,columnLabels:le().arrayOf(le().string),nRows:le().number.isRequired,nCols:le().number.isRequired,maxHeight:le().string,value:le().string},Ele.defaultProps={columnLabels:null,maxHeight:"200px",value:null};const Tle=Ele,Mle=e=>{let{data:t,filename:n,text:r,mime_type:i}=e;const a=new Blob([t],{type:i}),o=window.URL.createObjectURL(a);return v.createElement("a",{href:o,download:n},r)};Mle.propTypes={data:le().string.isRequired,filename:le().string.isRequired,text:le().string.isRequired,mime_type:le().string.isRequired};const Sle=Mle;var Cle=n(781),Ole=n.n(Cle),Rle=n(9777),Nle=n.n(Rle);function Lle(e){let t=e.length;for(;--t>=0;)e[t]=0}const Dle=256,Ple=286,Ile=30,Fle=15,zle=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),jle=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Ble=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Ule=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$le=new Array(576);Lle($le);const qle=new Array(60);Lle(qle);const Hle=new Array(512);Lle(Hle);const Vle=new Array(256);Lle(Vle);const Wle=new Array(29);Lle(Wle);const Gle=new Array(Ile);function Yle(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let Xle,Kle,Zle;function Jle(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}Lle(Gle);const Qle=e=>e<256?Hle[e]:Hle[256+(e>>>7)],ece=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},tce=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,ece(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},nce=(e,t,n)=>{tce(e,n[2*t],n[2*t+1])},rce=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},ice=(e,t,n)=>{const r=new Array(16);let i,a,o=0;for(i=1;i<=Fle;i++)o=o+n[i-1]<<1,r[i]=o;for(a=0;a<=t;a++){let t=e[2*a+1];0!==t&&(e[2*a]=rce(r[t]++,t))}},ace=e=>{let t;for(t=0;t<Ple;t++)e.dyn_ltree[2*t]=0;for(t=0;t<Ile;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},oce=e=>{e.bi_valid>8?ece(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},sce=(e,t,n,r)=>{const i=2*t,a=2*n;return e[i]<e[a]||e[i]===e[a]&&r[t]<=r[n]},lce=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&sce(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!sce(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},cce=(e,t,n)=>{let r,i,a,o,s=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+s++],r+=(255&e.pending_buf[e.sym_buf+s++])<<8,i=e.pending_buf[e.sym_buf+s++],0===r?nce(e,i,t):(a=Vle[i],nce(e,a+Dle+1,t),o=zle[a],0!==o&&(i-=Wle[a],tce(e,i,o)),r--,a=Qle(r),nce(e,a,n),o=jle[a],0!==o&&(r-=Gle[a],tce(e,r,o)))}while(s<e.sym_next);nce(e,256,t)},uce=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,a=t.stat_desc.elems;let o,s,l,c=-1;for(e.heap_len=0,e.heap_max=573,o=0;o<a;o++)0!==n[2*o]?(e.heap[++e.heap_len]=c=o,e.depth[o]=0):n[2*o+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=c<2?++c:0,n[2*l]=1,e.depth[l]=0,e.opt_len--,i&&(e.static_len-=r[2*l+1]);for(t.max_code=c,o=e.heap_len>>1;o>=1;o--)lce(e,n,o);l=a;do{o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],lce(e,n,1),s=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=s,n[2*l]=n[2*o]+n[2*s],e.depth[l]=(e.depth[o]>=e.depth[s]?e.depth[o]:e.depth[s])+1,n[2*o+1]=n[2*s+1]=l,e.heap[1]=l++,lce(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,a=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,u,f,d,h,p,m=0;for(d=0;d<=Fle;d++)e.bl_count[d]=0;for(n[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;c<573;c++)u=e.heap[c],d=n[2*n[2*u+1]+1]+1,d>l&&(d=l,m++),n[2*u+1]=d,u>r||(e.bl_count[d]++,h=0,u>=s&&(h=o[u-s]),p=n[2*u],e.opt_len+=p*(d+h),a&&(e.static_len+=p*(i[2*u+1]+h)));if(0!==m){do{for(d=l-1;0===e.bl_count[d];)d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[l]--,m-=2}while(m>0);for(d=l;0!==d;d--)for(u=e.bl_count[d];0!==u;)f=e.heap[--c],f>r||(n[2*f+1]!==d&&(e.opt_len+=(d-n[2*f+1])*n[2*f],n[2*f+1]=d),u--)}})(e,t),ice(n,c,e.bl_count)},fce=(e,t,n)=>{let r,i,a=-1,o=t[1],s=0,l=7,c=4;for(0===o&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=t[2*(r+1)+1],++s<l&&i===o||(s<c?e.bl_tree[2*i]+=s:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,a=i,0===o?(l=138,c=3):i===o?(l=6,c=3):(l=7,c=4))},dce=(e,t,n)=>{let r,i,a=-1,o=t[1],s=0,l=7,c=4;for(0===o&&(l=138,c=3),r=0;r<=n;r++)if(i=o,o=t[2*(r+1)+1],!(++s<l&&i===o)){if(s<c)do{nce(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==a&&(nce(e,i,e.bl_tree),s--),nce(e,16,e.bl_tree),tce(e,s-3,2)):s<=10?(nce(e,17,e.bl_tree),tce(e,s-3,3)):(nce(e,18,e.bl_tree),tce(e,s-11,7));s=0,a=i,0===o?(l=138,c=3):i===o?(l=6,c=3):(l=7,c=4)}};let hce=!1;const pce=(e,t,n,r)=>{tce(e,0+(r?1:0),3),oce(e),ece(e,n),ece(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var mce=e=>{hce||((()=>{let e,t,n,r,i;const a=new Array(16);for(n=0,r=0;r<28;r++)for(Wle[r]=n,e=0;e<1<<zle[r];e++)Vle[n++]=r;for(Vle[n-1]=r,i=0,r=0;r<16;r++)for(Gle[r]=i,e=0;e<1<<jle[r];e++)Hle[i++]=r;for(i>>=7;r<Ile;r++)for(Gle[r]=i<<7,e=0;e<1<<jle[r]-7;e++)Hle[256+i++]=r;for(t=0;t<=Fle;t++)a[t]=0;for(e=0;e<=143;)$le[2*e+1]=8,e++,a[8]++;for(;e<=255;)$le[2*e+1]=9,e++,a[9]++;for(;e<=279;)$le[2*e+1]=7,e++,a[7]++;for(;e<=287;)$le[2*e+1]=8,e++,a[8]++;for(ice($le,287,a),e=0;e<Ile;e++)qle[2*e+1]=5,qle[2*e]=rce(e,5);Xle=new Yle($le,zle,257,Ple,Fle),Kle=new Yle(qle,jle,0,Ile,Fle),Zle=new Yle(new Array(0),Ble,0,19,7)})(),hce=!0),e.l_desc=new Jle(e.dyn_ltree,Xle),e.d_desc=new Jle(e.dyn_dtree,Kle),e.bl_desc=new Jle(e.bl_tree,Zle),e.bi_buf=0,e.bi_valid=0,ace(e)},gce=(e,t,n,r)=>{let i,a,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<Dle;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),uce(e,e.l_desc),uce(e,e.d_desc),o=(e=>{let t;for(fce(e,e.dyn_ltree,e.l_desc.max_code),fce(e,e.dyn_dtree,e.d_desc.max_code),uce(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*Ule[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),i=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=i&&(i=a)):i=a=n+5,n+4<=i&&-1!==t?pce(e,t,n,r):4===e.strategy||a===i?(tce(e,2+(r?1:0),3),cce(e,$le,qle)):(tce(e,4+(r?1:0),3),((e,t,n,r)=>{let i;for(tce(e,t-257,5),tce(e,n-1,5),tce(e,r-4,4),i=0;i<r;i++)tce(e,e.bl_tree[2*Ule[i]+1],3);dce(e,e.dyn_ltree,t-1),dce(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),cce(e,e.dyn_ltree,e.dyn_dtree)),ace(e),r&&oce(e)},vce=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(Vle[n]+Dle+1)]++,e.dyn_dtree[2*Qle(t)]++),e.sym_next===e.sym_end),yce={_tr_init:mce,_tr_stored_block:pce,_tr_flush_block:gce,_tr_tally:vce,_tr_align:e=>{tce(e,2,3),nce(e,256,$le),(e=>{16===e.bi_valid?(ece(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}};var bce=(e,t,n,r)=>{let i=65535&e,a=e>>>16&65535,o=0;for(;0!==n;){o=n>2e3?2e3:n,n-=o;do{i=i+t[r++]|0,a=a+i|0}while(--o);i%=65521,a%=65521}return i|a<<16};const xce=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var _ce=(e,t,n,r)=>{const i=xce,a=r+n;e^=-1;for(let n=r;n<a;n++)e=e>>>8^i[255&(e^t[n])];return~e},wce={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ace={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:kce,_tr_stored_block:Ece,_tr_flush_block:Tce,_tr_tally:Mce,_tr_align:Sce}=yce,{Z_NO_FLUSH:Cce,Z_PARTIAL_FLUSH:Oce,Z_FULL_FLUSH:Rce,Z_FINISH:Nce,Z_BLOCK:Lce,Z_OK:Dce,Z_STREAM_END:Pce,Z_STREAM_ERROR:Ice,Z_DATA_ERROR:Fce,Z_BUF_ERROR:zce,Z_DEFAULT_COMPRESSION:jce,Z_FILTERED:Bce,Z_HUFFMAN_ONLY:Uce,Z_RLE:$ce,Z_FIXED:qce,Z_DEFAULT_STRATEGY:Hce,Z_UNKNOWN:Vce,Z_DEFLATED:Wce}=Ace,Gce=258,Yce=262,Xce=42,Kce=113,Zce=666,Jce=(e,t)=>(e.msg=wce[t],t),Qce=e=>2*e-(e>4?9:0),eue=e=>{let t=e.length;for(;--t>=0;)e[t]=0},tue=e=>{let t,n,r,i=e.w_size;t=e.hash_size,r=t;do{n=e.head[--r],e.head[r]=n>=i?n-i:0}while(--t);t=i,r=t;do{n=e.prev[--r],e.prev[r]=n>=i?n-i:0}while(--t)};let nue=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const rue=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},iue=(e,t)=>{Tce(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,rue(e.strm)},aue=(e,t)=>{e.pending_buf[e.pending++]=t},oue=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},sue=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=bce(e.adler,t,i,n):2===e.state.wrap&&(e.adler=_ce(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},lue=(e,t)=>{let n,r,i=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match;const l=e.strstart>e.w_size-Yce?e.strstart-(e.w_size-Yce):0,c=e.window,u=e.w_mask,f=e.prev,d=e.strstart+Gce;let h=c[a+o-1],p=c[a+o];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(n=t,c[n+o]===p&&c[n+o-1]===h&&c[n]===c[a]&&c[++n]===c[a+1]){a+=2,n++;do{}while(c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&a<d);if(r=Gce-(d-a),a=d-Gce,r>o){if(e.match_start=t,o=r,r>=s)break;h=c[a+o-1],p=c[a+o]}}}while((t=f[t&u])>l&&0!=--i);return o<=e.lookahead?o:e.lookahead},cue=e=>{const t=e.w_size;let n,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Yce)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),tue(e),r+=t),0===e.strm.avail_in)break;if(n=sue(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=nue(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=nue(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<Yce&&0!==e.strm.avail_in)},uue=(e,t)=>{let n,r,i,a=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o=0,s=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i)break;if(i=e.strm.avail_out-i,r=e.strstart-e.block_start,n>r+e.strm.avail_in&&(n=r+e.strm.avail_in),n>i&&(n=i),n<a&&(0===n&&t!==Nce||t===Cce||n!==r+e.strm.avail_in))break;o=t===Nce&&n===r+e.strm.avail_in?1:0,Ece(e,0,0,o),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,rue(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(sue(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===o);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?4:t!==Cce&&t!==Nce&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(sue(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,a=i>e.w_size?e.w_size:i,r=e.strstart-e.block_start,(r>=a||(r||t===Nce)&&t!==Cce&&0===e.strm.avail_in&&r<=i)&&(n=r>i?i:r,o=t===Nce&&0===e.strm.avail_in&&n===r?1:0,Ece(e,e.block_start,n,o),e.block_start+=n,rue(e.strm)),o?3:1)},fue=(e,t)=>{let n,r;for(;;){if(e.lookahead<Yce){if(cue(e),e.lookahead<Yce&&t===Cce)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=nue(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-Yce&&(e.match_length=lue(e,n)),e.match_length>=3)if(r=Mce(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=nue(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=nue(e,e.ins_h,e.window[e.strstart+1]);else r=Mce(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(iue(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===Nce?(iue(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(iue(e,!1),0===e.strm.avail_out)?1:2},due=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<Yce){if(cue(e),e.lookahead<Yce&&t===Cce)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=nue(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Yce&&(e.match_length=lue(e,n),e.match_length<=5&&(e.strategy===Bce||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=Mce(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=nue(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(iue(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=Mce(e,0,e.window[e.strstart-1]),r&&iue(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Mce(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Nce?(iue(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(iue(e,!1),0===e.strm.avail_out)?1:2};function hue(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}const pue=[new hue(0,0,0,0,uue),new hue(4,4,8,4,fue),new hue(4,5,16,8,fue),new hue(4,6,32,32,fue),new hue(4,4,16,16,due),new hue(8,16,32,32,due),new hue(8,16,128,128,due),new hue(8,32,128,256,due),new hue(32,128,258,1024,due),new hue(32,258,258,4096,due)];function mue(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Wce,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),eue(this.dyn_ltree),eue(this.dyn_dtree),eue(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),eue(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),eue(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const gue=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==Xce&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==Kce&&t.status!==Zce?1:0},vue=e=>{if(gue(e))return Jce(e,Ice);e.total_in=e.total_out=0,e.data_type=Vce;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?Xce:Kce,e.adler=2===t.wrap?0:1,t.last_flush=-2,kce(t),Dce},yue=e=>{const t=vue(e);return t===Dce&&(e=>{e.window_size=2*e.w_size,eue(e.head),e.max_lazy_match=pue[e.level].max_lazy,e.good_match=pue[e.level].good_length,e.nice_match=pue[e.level].nice_length,e.max_chain_length=pue[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),t},bue=(e,t,n,r,i,a)=>{if(!e)return Ice;let o=1;if(t===jce&&(t=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>9||n!==Wce||r<8||r>15||t<0||t>9||a<0||a>qce||8===r&&1!==o)return Jce(e,Ice);8===r&&(r=9);const s=new mue;return e.state=s,s.strm=e,s.status=Xce,s.wrap=o,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=a,s.method=n,yue(e)};var xue=(e,t)=>{if(gue(e)||t>Lce||t<0)return e?Jce(e,Ice):Ice;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===Zce&&t!==Nce)return Jce(e,0===e.avail_out?zce:Ice);const r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(rue(e),0===e.avail_out)return n.last_flush=-1,Dce}else if(0===e.avail_in&&Qce(t)<=Qce(r)&&t!==Nce)return Jce(e,zce);if(n.status===Zce&&0!==e.avail_in)return Jce(e,zce);if(n.status===Xce&&0===n.wrap&&(n.status=Kce),n.status===Xce){let t=Wce+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=Uce||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=r<<6,0!==n.strstart&&(t|=32),t+=31-t%31,oue(n,t),0!==n.strstart&&(oue(n,e.adler>>>16),oue(n,65535&e.adler)),e.adler=1,n.status=Kce,rue(e),0!==n.pending)return n.last_flush=-1,Dce}if(57===n.status)if(e.adler=0,aue(n,31),aue(n,139),aue(n,8),n.gzhead)aue(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),aue(n,255&n.gzhead.time),aue(n,n.gzhead.time>>8&255),aue(n,n.gzhead.time>>16&255),aue(n,n.gzhead.time>>24&255),aue(n,9===n.level?2:n.strategy>=Uce||n.level<2?4:0),aue(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(aue(n,255&n.gzhead.extra.length),aue(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=_ce(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(aue(n,0),aue(n,0),aue(n,0),aue(n,0),aue(n,0),aue(n,9===n.level?2:n.strategy>=Uce||n.level<2?4:0),aue(n,3),n.status=Kce,rue(e),0!==n.pending)return n.last_flush=-1,Dce;if(69===n.status){if(n.gzhead.extra){let t=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let i=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=_ce(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=i,rue(e),0!==n.pending)return n.last_flush=-1,Dce;t=0,r-=i}let i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=_ce(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=_ce(e.adler,n.pending_buf,n.pending-r,r)),rue(e),0!==n.pending)return n.last_flush=-1,Dce;r=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,aue(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=_ce(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=_ce(e.adler,n.pending_buf,n.pending-r,r)),rue(e),0!==n.pending)return n.last_flush=-1,Dce;r=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,aue(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=_ce(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(rue(e),0!==n.pending))return n.last_flush=-1,Dce;aue(n,255&e.adler),aue(n,e.adler>>8&255),e.adler=0}if(n.status=Kce,rue(e),0!==n.pending)return n.last_flush=-1,Dce}if(0!==e.avail_in||0!==n.lookahead||t!==Cce&&n.status!==Zce){let r=0===n.level?uue(n,t):n.strategy===Uce?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(cue(e),0===e.lookahead)){if(t===Cce)return 1;break}if(e.match_length=0,n=Mce(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(iue(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Nce?(iue(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(iue(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===$ce?((e,t)=>{let n,r,i,a;const o=e.window;for(;;){if(e.lookahead<=Gce){if(cue(e),e.lookahead<=Gce&&t===Cce)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=e.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){a=e.strstart+Gce;do{}while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<a);e.match_length=Gce-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=Mce(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Mce(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(iue(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Nce?(iue(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(iue(e,!1),0===e.strm.avail_out)?1:2})(n,t):pue[n.level].func(n,t);if(3!==r&&4!==r||(n.status=Zce),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),Dce;if(2===r&&(t===Oce?Sce(n):t!==Lce&&(Ece(n,0,0,!1),t===Rce&&(eue(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),rue(e),0===e.avail_out))return n.last_flush=-1,Dce}return t!==Nce?Dce:n.wrap<=0?Pce:(2===n.wrap?(aue(n,255&e.adler),aue(n,e.adler>>8&255),aue(n,e.adler>>16&255),aue(n,e.adler>>24&255),aue(n,255&e.total_in),aue(n,e.total_in>>8&255),aue(n,e.total_in>>16&255),aue(n,e.total_in>>24&255)):(oue(n,e.adler>>>16),oue(n,65535&e.adler)),rue(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?Dce:Pce)},_ue=(e,t)=>{let n=t.length;if(gue(e))return Ice;const r=e.state,i=r.wrap;if(2===i||1===i&&r.status!==Xce||r.lookahead)return Ice;if(1===i&&(e.adler=bce(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===i&&(eue(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}const a=e.avail_in,o=e.next_in,s=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,cue(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do{r.ins_h=nue(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++}while(--t);r.strstart=e,r.lookahead=2,cue(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=o,e.input=s,e.avail_in=a,r.wrap=i,Dce},wue={deflateInit:(e,t)=>bue(e,t,Wce,15,8,Hce),deflateInit2:bue,deflateReset:yue,deflateResetKeep:vue,deflateSetHeader:(e,t)=>gue(e)||2!==e.state.wrap?Ice:(e.state.gzhead=t,Dce),deflate:xue,deflateEnd:e=>{if(gue(e))return Ice;const t=e.state.status;return e.state=null,t===Kce?Jce(e,Fce):Dce},deflateSetDictionary:_ue,deflateInfo:"pako deflate (from Nodeca project)"};const Aue=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var kue=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)Aue(n,t)&&(e[t]=n[t])}}return e},Eue=e=>{let t=0;for(let n=0,r=e.length;n<r;n++)t+=e[n].length;const n=new Uint8Array(t);for(let t=0,r=0,i=e.length;t<i;t++){let i=e[t];n.set(i,r),r+=i.length}return n};let Tue=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){Tue=!1}const Mue=new Uint8Array(256);for(let e=0;e<256;e++)Mue[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Mue[254]=Mue[254]=1;var Sue=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,i,a,o=e.length,s=0;for(i=0;i<o;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<o&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),a=0,i=0;a<s;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<o&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},Cue=(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,i;const a=new Array(2*n);for(i=0,r=0;r<n;){let t=e[r++];if(t<128){a[i++]=t;continue}let o=Mue[t];if(o>4)a[i++]=65533,r+=o-1;else{for(t&=2===o?31:3===o?15:7;o>1&&r<n;)t=t<<6|63&e[r++],o--;o>1?a[i++]=65533:t<65536?a[i++]=t:(t-=65536,a[i++]=55296|t>>10&1023,a[i++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&Tue)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(a,i)},Oue=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+Mue[e[n]]>t?n:t};var Rue=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Nue=Object.prototype.toString,{Z_NO_FLUSH:Lue,Z_SYNC_FLUSH:Due,Z_FULL_FLUSH:Pue,Z_FINISH:Iue,Z_OK:Fue,Z_STREAM_END:zue,Z_DEFAULT_COMPRESSION:jue,Z_DEFAULT_STRATEGY:Bue,Z_DEFLATED:Uue}=Ace;function $ue(e){this.options=kue({level:jue,method:Uue,chunkSize:16384,windowBits:15,memLevel:8,strategy:Bue},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Rue,this.strm.avail_out=0;let n=wue.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Fue)throw new Error(wce[n]);if(t.header&&wue.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?Sue(t.dictionary):"[object ArrayBuffer]"===Nue.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=wue.deflateSetDictionary(this.strm,e),n!==Fue)throw new Error(wce[n]);this._dict_set=!0}}function que(e,t){const n=new $ue(t);if(n.push(e,!0),n.err)throw n.msg||wce[n.err];return n.result}$ue.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,a;if(this.ended)return!1;for(a=t===~~t?t:!0===t?Iue:Lue,"string"==typeof e?n.input=Sue(e):"[object ArrayBuffer]"===Nue.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(a===Due||a===Pue)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(i=wue.deflate(n,a),i===zue)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=wue.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Fue;if(0!==n.avail_out){if(a>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},$ue.prototype.onData=function(e){this.chunks.push(e)},$ue.prototype.onEnd=function(e){e===Fue&&(this.result=Eue(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Hue=function(e,t){return(t=t||{}).raw=!0,que(e,t)},Vue=function(e,t){return(t=t||{}).gzip=!0,que(e,t)},Wue={Deflate:$ue,deflate:que,deflateRaw:Hue,gzip:Vue,constants:Ace};const Gue=16209;var Yue=function(e,t){let n,r,i,a,o,s,l,c,u,f,d,h,p,m,g,v,y,b,x,_,w,A,k,E;const T=e.state;n=e.next_in,k=e.input,r=n+(e.avail_in-5),i=e.next_out,E=e.output,a=i-(t-e.avail_out),o=i+(e.avail_out-257),s=T.dmax,l=T.wsize,c=T.whave,u=T.wnext,f=T.window,d=T.hold,h=T.bits,p=T.lencode,m=T.distcode,g=(1<<T.lenbits)-1,v=(1<<T.distbits)-1;e:do{h<15&&(d+=k[n++]<<h,h+=8,d+=k[n++]<<h,h+=8),y=p[d&g];t:for(;;){if(b=y>>>24,d>>>=b,h-=b,b=y>>>16&255,0===b)E[i++]=65535&y;else{if(!(16&b)){if(64&b){if(32&b){T.mode=16191;break e}e.msg="invalid literal/length code",T.mode=Gue;break e}y=p[(65535&y)+(d&(1<<b)-1)];continue t}for(x=65535&y,b&=15,b&&(h<b&&(d+=k[n++]<<h,h+=8),x+=d&(1<<b)-1,d>>>=b,h-=b),h<15&&(d+=k[n++]<<h,h+=8,d+=k[n++]<<h,h+=8),y=m[d&v];;){if(b=y>>>24,d>>>=b,h-=b,b=y>>>16&255,16&b){if(_=65535&y,b&=15,h<b&&(d+=k[n++]<<h,h+=8,h<b&&(d+=k[n++]<<h,h+=8)),_+=d&(1<<b)-1,_>s){e.msg="invalid distance too far back",T.mode=Gue;break e}if(d>>>=b,h-=b,b=i-a,_>b){if(b=_-b,b>c&&T.sane){e.msg="invalid distance too far back",T.mode=Gue;break e}if(w=0,A=f,0===u){if(w+=l-b,b<x){x-=b;do{E[i++]=f[w++]}while(--b);w=i-_,A=E}}else if(u<b){if(w+=l+u-b,b-=u,b<x){x-=b;do{E[i++]=f[w++]}while(--b);if(w=0,u<x){b=u,x-=b;do{E[i++]=f[w++]}while(--b);w=i-_,A=E}}}else if(w+=u-b,b<x){x-=b;do{E[i++]=f[w++]}while(--b);w=i-_,A=E}for(;x>2;)E[i++]=A[w++],E[i++]=A[w++],E[i++]=A[w++],x-=3;x&&(E[i++]=A[w++],x>1&&(E[i++]=A[w++]))}else{w=i-_;do{E[i++]=E[w++],E[i++]=E[w++],E[i++]=E[w++],x-=3}while(x>2);x&&(E[i++]=E[w++],x>1&&(E[i++]=E[w++]))}break}if(64&b){e.msg="invalid distance code",T.mode=Gue;break e}y=m[(65535&y)+(d&(1<<b)-1)]}}break}}while(n<r&&i<o);x=h>>3,n-=x,h-=x<<3,d&=(1<<h)-1,e.next_in=n,e.next_out=i,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=i<o?o-i+257:257-(i-o),T.hold=d,T.bits=h};const Xue=15,Kue=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Zue=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Jue=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Que=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var efe=(e,t,n,r,i,a,o,s)=>{const l=s.bits;let c,u,f,d,h,p,m=0,g=0,v=0,y=0,b=0,x=0,_=0,w=0,A=0,k=0,E=null;const T=new Uint16Array(16),M=new Uint16Array(16);let S,C,O,R=null;for(m=0;m<=Xue;m++)T[m]=0;for(g=0;g<r;g++)T[t[n+g]]++;for(b=l,y=Xue;y>=1&&0===T[y];y--);if(b>y&&(b=y),0===y)return i[a++]=20971520,i[a++]=20971520,s.bits=1,0;for(v=1;v<y&&0===T[v];v++);for(b<v&&(b=v),w=1,m=1;m<=Xue;m++)if(w<<=1,w-=T[m],w<0)return-1;if(w>0&&(0===e||1!==y))return-1;for(M[1]=0,m=1;m<Xue;m++)M[m+1]=M[m]+T[m];for(g=0;g<r;g++)0!==t[n+g]&&(o[M[t[n+g]]++]=g);if(0===e?(E=R=o,p=20):1===e?(E=Kue,R=Zue,p=257):(E=Jue,R=Que,p=0),k=0,g=0,m=v,h=a,x=b,_=0,f=-1,A=1<<b,d=A-1,1===e&&A>852||2===e&&A>592)return 1;for(;;){S=m-_,o[g]+1<p?(C=0,O=o[g]):o[g]>=p?(C=R[o[g]-p],O=E[o[g]-p]):(C=96,O=0),c=1<<m-_,u=1<<x,v=u;do{u-=c,i[h+(k>>_)+u]=S<<24|C<<16|O}while(0!==u);for(c=1<<m-1;k&c;)c>>=1;if(0!==c?(k&=c-1,k+=c):k=0,g++,0==--T[m]){if(m===y)break;m=t[n+o[g]]}if(m>b&&(k&d)!==f){for(0===_&&(_=b),h+=v,x=m-_,w=1<<x;x+_<y&&(w-=T[x+_],!(w<=0));)x++,w<<=1;if(A+=1<<x,1===e&&A>852||2===e&&A>592)return 1;f=k&d,i[f]=b<<24|x<<16|h-a}}return 0!==k&&(i[h+k]=m-_<<24|64<<16),s.bits=b,0};const{Z_FINISH:tfe,Z_BLOCK:nfe,Z_TREES:rfe,Z_OK:ife,Z_STREAM_END:afe,Z_NEED_DICT:ofe,Z_STREAM_ERROR:sfe,Z_DATA_ERROR:lfe,Z_MEM_ERROR:cfe,Z_BUF_ERROR:ufe,Z_DEFLATED:ffe}=Ace,dfe=16180,hfe=16190,pfe=16191,mfe=16192,gfe=16194,vfe=16199,yfe=16200,bfe=16206,xfe=16209,_fe=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function wfe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Afe=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<dfe||t.mode>16211?1:0},kfe=e=>{if(Afe(e))return sfe;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=dfe,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,ife},Efe=e=>{if(Afe(e))return sfe;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,kfe(e)},Tfe=(e,t)=>{let n;if(Afe(e))return sfe;const r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?sfe:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,Efe(e))},Mfe=(e,t)=>{if(!e)return sfe;const n=new wfe;e.state=n,n.strm=e,n.window=null,n.mode=dfe;const r=Tfe(e,t);return r!==ife&&(e.state=null),r};let Sfe,Cfe,Ofe=!0;const Rfe=e=>{if(Ofe){Sfe=new Int32Array(512),Cfe=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(efe(1,e.lens,0,288,Sfe,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;efe(2,e.lens,0,32,Cfe,0,e.work,{bits:5}),Ofe=!1}e.lencode=Sfe,e.lenbits=9,e.distcode=Cfe,e.distbits=5},Nfe=(e,t,n,r)=>{let i;const a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(t.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(t.subarray(n-r,n-r+i),a.wnext),(r-=i)?(a.window.set(t.subarray(n-r,n),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0};var Lfe=(e,t)=>{let n,r,i,a,o,s,l,c,u,f,d,h,p,m,g,v,y,b,x,_,w,A,k=0;const E=new Uint8Array(4);let T,M;const S=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Afe(e)||!e.output||!e.input&&0!==e.avail_in)return sfe;n=e.state,n.mode===pfe&&(n.mode=mfe),o=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,r=e.input,s=e.avail_in,c=n.hold,u=n.bits,f=s,d=l,A=ife;e:for(;;)switch(n.mode){case dfe:if(0===n.wrap){n.mode=mfe;break}for(;u<16;){if(0===s)break e;s--,c+=r[a++]<<u,u+=8}if(2&n.wrap&&35615===c){0===n.wbits&&(n.wbits=15),n.check=0,E[0]=255&c,E[1]=c>>>8&255,n.check=_ce(n.check,E,2,0),c=0,u=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=xfe;break}if((15&c)!==ffe){e.msg="unknown compression method",n.mode=xfe;break}if(c>>>=4,u-=4,w=8+(15&c),0===n.wbits&&(n.wbits=w),w>15||w>n.wbits){e.msg="invalid window size",n.mode=xfe;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&c?16189:pfe,c=0,u=0;break;case 16181:for(;u<16;){if(0===s)break e;s--,c+=r[a++]<<u,u+=8}if(n.flags=c,(255&n.flags)!==ffe){e.msg="unknown compression method",n.mode=xfe;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=xfe;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&4&n.wrap&&(E[0]=255&c,E[1]=c>>>8&255,n.check=_ce(n.check,E,2,0)),c=0,u=0,n.mode=16182;case 16182:for(;u<32;){if(0===s)break e;s--,c+=r[a++]<<u,u+=8}n.head&&(n.head.time=c),512&n.flags&&4&n.wrap&&(E[0]=255&c,E[1]=c>>>8&255,E[2]=c>>>16&255,E[3]=c>>>24&255,n.check=_ce(n.check,E,4,0)),c=0,u=0,n.mode=16183;case 16183:for(;u<16;){if(0===s)break e;s--,c+=r[a++]<<u,u+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&4&n.wrap&&(E[0]=255&c,E[1]=c>>>8&255,n.check=_ce(n.check,E,2,0)),c=0,u=0,n.mode=16184;case 16184:if(1024&n.flags){for(;u<16;){if(0===s)break e;s--,c+=r[a++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&4&n.wrap&&(E[0]=255&c,E[1]=c>>>8&255,n.check=_ce(n.check,E,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(h=n.length,h>s&&(h=s),h&&(n.head&&(w=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(a,a+h),w)),512&n.flags&&4&n.wrap&&(n.check=_ce(n.check,r,h,a)),s-=h,a+=h,n.length-=h),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===s)break e;h=0;do{w=r[a+h++],n.head&&w&&n.length<65536&&(n.head.name+=String.fromCharCode(w))}while(w&&h<s);if(512&n.flags&&4&n.wrap&&(n.check=_ce(n.check,r,h,a)),s-=h,a+=h,w)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===s)break e;h=0;do{w=r[a+h++],n.head&&w&&n.length<65536&&(n.head.comment+=String.fromCharCode(w))}while(w&&h<s);if(512&n.flags&&4&n.wrap&&(n.check=_ce(n.check,r,h,a)),s-=h,a+=h,w)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;u<16;){if(0===s)break e;s--,c+=r[a++]<<u,u+=8}if(4&n.wrap&&c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=xfe;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=pfe;break;case 16189:for(;u<32;){if(0===s)break e;s--,c+=r[a++]<<u,u+=8}e.adler=n.check=_fe(c),c=0,u=0,n.mode=hfe;case hfe:if(0===n.havedict)return e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,n.hold=c,n.bits=u,ofe;e.adler=n.check=1,n.mode=pfe;case pfe:if(t===nfe||t===rfe)break e;case mfe:if(n.last){c>>>=7&u,u-=7&u,n.mode=bfe;break}for(;u<3;){if(0===s)break e;s--,c+=r[a++]<<u,u+=8}switch(n.last=1&c,c>>>=1,u-=1,3&c){case 0:n.mode=16193;break;case 1:if(Rfe(n),n.mode=vfe,t===rfe){c>>>=2,u-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=xfe}c>>>=2,u-=2;break;case 16193:for(c>>>=7&u,u-=7&u;u<32;){if(0===s)break e;s--,c+=r[a++]<<u,u+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=xfe;break}if(n.length=65535&c,c=0,u=0,n.mode=gfe,t===rfe)break e;case gfe:n.mode=16195;case 16195:if(h=n.length,h){if(h>s&&(h=s),h>l&&(h=l),0===h)break e;i.set(r.subarray(a,a+h),o),s-=h,a+=h,l-=h,o+=h,n.length-=h;break}n.mode=pfe;break;case 16196:for(;u<14;){if(0===s)break e;s--,c+=r[a++]<<u,u+=8}if(n.nlen=257+(31&c),c>>>=5,u-=5,n.ndist=1+(31&c),c>>>=5,u-=5,n.ncode=4+(15&c),c>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=xfe;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;u<3;){if(0===s)break e;s--,c+=r[a++]<<u,u+=8}n.lens[S[n.have++]]=7&c,c>>>=3,u-=3}for(;n.have<19;)n.lens[S[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,T={bits:n.lenbits},A=efe(0,n.lens,0,19,n.lencode,0,n.work,T),n.lenbits=T.bits,A){e.msg="invalid code lengths set",n.mode=xfe;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;k=n.lencode[c&(1<<n.lenbits)-1],g=k>>>24,v=k>>>16&255,y=65535&k,!(g<=u);){if(0===s)break e;s--,c+=r[a++]<<u,u+=8}if(y<16)c>>>=g,u-=g,n.lens[n.have++]=y;else{if(16===y){for(M=g+2;u<M;){if(0===s)break e;s--,c+=r[a++]<<u,u+=8}if(c>>>=g,u-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=xfe;break}w=n.lens[n.have-1],h=3+(3&c),c>>>=2,u-=2}else if(17===y){for(M=g+3;u<M;){if(0===s)break e;s--,c+=r[a++]<<u,u+=8}c>>>=g,u-=g,w=0,h=3+(7&c),c>>>=3,u-=3}else{for(M=g+7;u<M;){if(0===s)break e;s--,c+=r[a++]<<u,u+=8}c>>>=g,u-=g,w=0,h=11+(127&c),c>>>=7,u-=7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=xfe;break}for(;h--;)n.lens[n.have++]=w}}if(n.mode===xfe)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=xfe;break}if(n.lenbits=9,T={bits:n.lenbits},A=efe(1,n.lens,0,n.nlen,n.lencode,0,n.work,T),n.lenbits=T.bits,A){e.msg="invalid literal/lengths set",n.mode=xfe;break}if(n.distbits=6,n.distcode=n.distdyn,T={bits:n.distbits},A=efe(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,T),n.distbits=T.bits,A){e.msg="invalid distances set",n.mode=xfe;break}if(n.mode=vfe,t===rfe)break e;case vfe:n.mode=yfe;case yfe:if(s>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,n.hold=c,n.bits=u,Yue(e,d),o=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,r=e.input,s=e.avail_in,c=n.hold,u=n.bits,n.mode===pfe&&(n.back=-1);break}for(n.back=0;k=n.lencode[c&(1<<n.lenbits)-1],g=k>>>24,v=k>>>16&255,y=65535&k,!(g<=u);){if(0===s)break e;s--,c+=r[a++]<<u,u+=8}if(v&&!(240&v)){for(b=g,x=v,_=y;k=n.lencode[_+((c&(1<<b+x)-1)>>b)],g=k>>>24,v=k>>>16&255,y=65535&k,!(b+g<=u);){if(0===s)break e;s--,c+=r[a++]<<u,u+=8}c>>>=b,u-=b,n.back+=b}if(c>>>=g,u-=g,n.back+=g,n.length=y,0===v){n.mode=16205;break}if(32&v){n.back=-1,n.mode=pfe;break}if(64&v){e.msg="invalid literal/length code",n.mode=xfe;break}n.extra=15&v,n.mode=16201;case 16201:if(n.extra){for(M=n.extra;u<M;){if(0===s)break e;s--,c+=r[a++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;k=n.distcode[c&(1<<n.distbits)-1],g=k>>>24,v=k>>>16&255,y=65535&k,!(g<=u);){if(0===s)break e;s--,c+=r[a++]<<u,u+=8}if(!(240&v)){for(b=g,x=v,_=y;k=n.distcode[_+((c&(1<<b+x)-1)>>b)],g=k>>>24,v=k>>>16&255,y=65535&k,!(b+g<=u);){if(0===s)break e;s--,c+=r[a++]<<u,u+=8}c>>>=b,u-=b,n.back+=b}if(c>>>=g,u-=g,n.back+=g,64&v){e.msg="invalid distance code",n.mode=xfe;break}n.offset=y,n.extra=15&v,n.mode=16203;case 16203:if(n.extra){for(M=n.extra;u<M;){if(0===s)break e;s--,c+=r[a++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=xfe;break}n.mode=16204;case 16204:if(0===l)break e;if(h=d-l,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=xfe;break}h>n.wnext?(h-=n.wnext,p=n.wsize-h):p=n.wnext-h,h>n.length&&(h=n.length),m=n.window}else m=i,p=o-n.offset,h=n.length;h>l&&(h=l),l-=h,n.length-=h;do{i[o++]=m[p++]}while(--h);0===n.length&&(n.mode=yfe);break;case 16205:if(0===l)break e;i[o++]=n.length,l--,n.mode=yfe;break;case bfe:if(n.wrap){for(;u<32;){if(0===s)break e;s--,c|=r[a++]<<u,u+=8}if(d-=l,e.total_out+=d,n.total+=d,4&n.wrap&&d&&(e.adler=n.check=n.flags?_ce(n.check,i,d,o-d):bce(n.check,i,d,o-d)),d=l,4&n.wrap&&(n.flags?c:_fe(c))!==n.check){e.msg="incorrect data check",n.mode=xfe;break}c=0,u=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;u<32;){if(0===s)break e;s--,c+=r[a++]<<u,u+=8}if(4&n.wrap&&c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=xfe;break}c=0,u=0}n.mode=16208;case 16208:A=afe;break e;case xfe:A=lfe;break e;case 16210:return cfe;default:return sfe}return e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,n.hold=c,n.bits=u,(n.wsize||d!==e.avail_out&&n.mode<xfe&&(n.mode<bfe||t!==tfe))&&Nfe(e,e.output,e.next_out,d-e.avail_out),f-=e.avail_in,d-=e.avail_out,e.total_in+=f,e.total_out+=d,n.total+=d,4&n.wrap&&d&&(e.adler=n.check=n.flags?_ce(n.check,i,d,e.next_out-d):bce(n.check,i,d,e.next_out-d)),e.data_type=n.bits+(n.last?64:0)+(n.mode===pfe?128:0)+(n.mode===vfe||n.mode===gfe?256:0),(0===f&&0===d||t===tfe)&&A===ife&&(A=ufe),A},Dfe={inflateReset:Efe,inflateReset2:Tfe,inflateResetKeep:kfe,inflateInit:e=>Mfe(e,15),inflateInit2:Mfe,inflate:Lfe,inflateEnd:e=>{if(Afe(e))return sfe;let t=e.state;return t.window&&(t.window=null),e.state=null,ife},inflateGetHeader:(e,t)=>{if(Afe(e))return sfe;const n=e.state;return 2&n.wrap?(n.head=t,t.done=!1,ife):sfe},inflateSetDictionary:(e,t)=>{const n=t.length;let r,i,a;return Afe(e)?sfe:(r=e.state,0!==r.wrap&&r.mode!==hfe?sfe:r.mode===hfe&&(i=1,i=bce(i,t,n,0),i!==r.check)?lfe:(a=Nfe(e,t,n,n),a?(r.mode=16210,cfe):(r.havedict=1,ife)))},inflateInfo:"pako inflate (from Nodeca project)"};var Pfe=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Ife=Object.prototype.toString,{Z_NO_FLUSH:Ffe,Z_FINISH:zfe,Z_OK:jfe,Z_STREAM_END:Bfe,Z_NEED_DICT:Ufe,Z_STREAM_ERROR:$fe,Z_DATA_ERROR:qfe,Z_MEM_ERROR:Hfe}=Ace;function Vfe(e){this.options=kue({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Rue,this.strm.avail_out=0;let n=Dfe.inflateInit2(this.strm,t.windowBits);if(n!==jfe)throw new Error(wce[n]);if(this.header=new Pfe,Dfe.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Sue(t.dictionary):"[object ArrayBuffer]"===Ife.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Dfe.inflateSetDictionary(this.strm,t.dictionary),n!==jfe)))throw new Error(wce[n])}function Wfe(e,t){const n=new Vfe(t);if(n.push(e),n.err)throw n.msg||wce[n.err];return n.result}Vfe.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let a,o,s;if(this.ended)return!1;for(o=t===~~t?t:!0===t?zfe:Ffe,"[object ArrayBuffer]"===Ife.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),a=Dfe.inflate(n,o),a===Ufe&&i&&(a=Dfe.inflateSetDictionary(n,i),a===jfe?a=Dfe.inflate(n,o):a===qfe&&(a=Ufe));n.avail_in>0&&a===Bfe&&n.state.wrap>0&&0!==e[n.next_in];)Dfe.inflateReset(n),a=Dfe.inflate(n,o);switch(a){case $fe:case qfe:case Ufe:case Hfe:return this.onEnd(a),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(0===n.avail_out||a===Bfe))if("string"===this.options.to){let e=Oue(n.output,n.next_out),t=n.next_out-e,i=Cue(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(a!==jfe||0!==s){if(a===Bfe)return a=Dfe.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},Vfe.prototype.onData=function(e){this.chunks.push(e)},Vfe.prototype.onEnd=function(e){e===jfe&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Eue(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Gfe=function(e,t){return(t=t||{}).raw=!0,Wfe(e,t)},Yfe={Inflate:Vfe,inflate:Wfe,inflateRaw:Gfe,ungzip:Wfe,constants:Ace};const{Deflate:Xfe,deflate:Kfe,deflateRaw:Zfe,gzip:Jfe}=Wue,{Inflate:Qfe,inflate:ede,inflateRaw:tde,ungzip:nde}=Yfe;var rde={Deflate:Xfe,deflate:Kfe,deflateRaw:Zfe,gzip:Jfe,Inflate:Qfe,inflate:ede,inflateRaw:tde,ungzip:nde,constants:Ace};const ide="data:float32;base64,",ade="data:uint16;base64,",ode="data:uint32;base64,",sde="data:float32/zip;base64,",lde="data:uint16/zip;base64,",cde="data:uint32/zip;base64,",ude="_resources";function fde(e){return"string"==typeof e&&(e.startsWith(ide)||e.startsWith(ade)||e.startsWith(ode))}function dde(e){return"string"==typeof e&&(e.startsWith(sde)||e.startsWith(cde)||e.startsWith(lde))}function hde(e,t){if("string"!=typeof e)throw Error("'convertBase64toArray' only accepts string arguments. Recieved "+typeof e);let n,r;if(e.startsWith(ade))r=ade,n=Uint16Array;else if(e.startsWith(ode))r=ode,n=Uint32Array;else{if(!e.startsWith(ide))throw"Tried to decompress bad data";r=ide,n=Float32Array}e=e.substring(r.length);const i=Uint8Array.from(atob(e),(e=>e.charCodeAt(0)));return mde(i,n,t)}function pde(e,t){let n,r;if(e.startsWith(lde))r=lde,n=Uint16Array;else if(e.startsWith(cde))r=cde,n=Uint32Array;else{if(!e.startsWith(sde))throw"Tried to decompress bad data";r=sde,n=Float32Array}e=e.substring(r.length);const i=Uint8Array.from(atob(e),(e=>e.charCodeAt(0)));return mde(rde.inflate(i),n,t)}function mde(e,t,n){if(n){e.reverse();const n=new t(e.buffer);return n.reverse(),n}return new t(e.buffer)}function gde(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const vde={Alert:T,BiplotsWithThresholding:he,CellRangerSummary:J8,ClusteringSelector:xo,CodewordPlot:function(e){var t=v.useRef(null),n=v.useRef(null),r=v.useMemo((function(){var t,n=function(e){var t=[],n={},r=[],i=e.sort((function(e,t){return(-1===K7.indexOf(e.category)?1/0:K7.indexOf(e.category))-(-1===K7.indexOf(t.category)?1/0:K7.indexOf(t.category))}));i.forEach((function(e,n){for(var i,a,o,s=e.data.feature_name,l=e.data.transcript_count,c=e.category,u=0;u<e.data.feature_name.length;u++){var f=s[u],d=l[u];t.push({category:c,featureName:f,transcriptCount:d,categoryIndex:n,rank:0})}var h,p=J7[c],m=p.isBoosted,g=e.data.custom_codeword_counts,v=e.data.predesigned_codeword_counts,y="%{y} count %{x}<extra></extra>";m&&ArrayBuffer.isView(g)&&ArrayBuffer.isView(v)&&(h=s.map((function(e,t){var n=g[t],r=v[t];return[e,null!=n?n:NaN,null!=r?r:NaN]})),y=["Gene Name: %{customdata[0]}","<br>","Total transcripts: %{x:.4s}","<br>","Transcripts of add-on probes: %{customdata[1]:.4s}","<br>","Transcripts of pre-designed probes: %{customdata[2]:.4s}","<extra></extra>"].join(""));var b=e.category,x=n9(n9({},o9),{customdata:h,hovertemplate:y,line:{color:null!==(i=Z7[e.category])&&void 0!==i?i:"yellow"},marker:{color:null!==(a=Z7[e.category])&&void 0!==a?a:"yellow",opacity:.5},name:b,x:e.data.transcript_count,y:e.data.feature_name,zorder:void 0!==p&&null!==(o=p.zorder)&&void 0!==o?o:0});ee(x),r.push(x)}));var a=new Map,o={};t.sort((function(e,t){return e.transcriptCount<t.transcriptCount?1:-1})).forEach((function(e,t){e.rank=t+1,a.set(e.featureName,e.rank),o[e.rank]=e.featureName}));for(var s=i.map((function(){return 0})),l=0,c=t;l<c.length;l++){var u=c[l];n[u.featureName.toLowerCase()]={curveNumber:u.categoryIndex,pointNumber:s[u.categoryIndex]},s[u.categoryIndex]+=1}return{plotData:r,records:t,featureNamePlotLookup:n,labelAlias:o,nameToY:a}}(e.data),r=n.plotData,i=n.records,a=n.featureNamePlotLookup,o=(null===(t=e.layout)||void 0===t?void 0:t.width)?{}:n9(n9({},e.size),{autosize:!1});return{plotData:r,records:i,featureNamePlotLookup:a,config:S()({},i9,e.config),layout:S()({yaxis:{categoryorder:"array",categoryarray:i.map((function(e){return e.featureName}))}},s9,e.layout,o)}}),[e.config,e.layout,e.size]),i=r.plotData,a=r.records,o=r.featureNamePlotLookup,s=r.layout,l=r.config;return v.createElement("div",{id:"codeword-plot"},v.createElement("style",{ref:t}),v.createElement(l9,{plotData:i,plotRef:n,layout:s,config:l}),v.createElement(c9,{records:a,featureNamePlotLookup:o,plotRef:n,selectedFeatureStyleRef:t}))},GeneSpecificTranscriptQuality:y9,HeaderWithHelp:Ma,Metric:oe,Navbar:e6,DynamicHelptext:qn,CollapsablePanel:o7,Plot:Yn,SortableTable:go,TableMetric:Vn,Table:er,RawImage:Dee,ImageWithOverlay:s7,ImageRegistViewer:S8,ZoomViewer:E8,TargetedCompareSummary:jee,AggrSummary:i7,OptionalMultiplexedSummary:vie,ZoomableImage:yie,DensityPlot:function(e){const[t,n]=(0,v.useState)(kie),[r,i]=(0,v.useState)(!0),[a,o]=(0,v.useState)(.5),[s,l]=v.useState(1),[c,u]=(0,v.useState)(2),[f,d]=(0,v.useState)(1),h=(0,v.useRef)(null),{unit:p,bins:m,dimensions:g,horizontal_bin_count:y}=e,b=Array.isArray(m)?{TRANSCRIPT_DENSITY_KEY:m}:m,x=(0,v.useMemo)((()=>Iie[t]),[t]),_={all:Tie,members:[Mie,Sie]};void 0!==b[Cie]&&_.members.push(Cie);const w=(0,v.useMemo)((()=>{let e;e=t===_.all?(0,Fa.zip)(..._.members.map((e=>b[e]))).map((e=>e.reduce(((e,t)=>e+(null!=t?t:0)),0))):b[t];const n=function(e){let{bins:t,binSizeMultiplier:n,dimensions:r,sourceWidth:i,reductionKind:a="sum",zeroValue:o=null}=e;const s=t.length/i,l=i/n,c=s/n,u=Array.from(Array(Math.ceil(c)),(()=>Array(Math.ceil(l)).fill(0)));for(let e=0;e<c;e++)for(let r=0;r<l;r++){const l=[Math.floor(e*n),Math.floor(r*n)],c=[Math.min(l[0]+n,s),Math.min(l[1]+n,i)];let f=0,d=0;for(let e=l[0];e<c[0];e++)for(let n=l[1];n<c[1];n++)f+=t[e*i+n],d+=1;u[e][r]=o,f>0&&("sum"===a?u[e][r]=f:"avg"===a&&(u[e][r]=f/d))}const f=Array.from(Array(u[0].length+1).keys()).map((e=>e*r.width/l)),d=Array.from(Array(u.length+1).keys()).map((e=>e*r.height/c)),h=u.flat(),p=(0,Fa.min)(h),m=(0,Fa.max)(h);return{x:f,y:d,z:u,zmax:m,zmin:p}}({bins:e,binSizeMultiplier:c,dimensions:g,sourceWidth:y,reductionKind:x.reductionKind,zeroValue:x.zeroValue});return d((()=>void 0!==x.zmax?x.zmax:n.zmax)),n}),[b,t,c,g,y,x.reductionKind,x.zeroValue]),A=void 0!==x.zmin?x.zmin:w.zmin,k=void 0!==x.zmax?x.zmax:w.zmax,E=(0,v.useMemo)((()=>function(e){let{binData:{x:t,y:n,z:r},opacity:i,showColorbar:a,colorscale:o,label:s,zmax:l,zmin:c}=e;return[{colorbar:{title:{side:"right",text:s},thickness:20,xpad:0},colorscale:o,hovertemplate:`%{z} ${s} <extra></extra>`,opacity:i,showscale:a,x:t,y:n,z:r,zmax:l,zmin:c,type:"heatmap"}]}({binData:w,opacity:a,showColorbar:!0,colorscale:x.colorscale,label:x.colorBarLabel,zmax:f,zmin:A})),[w,x.colorscale,x.colorBarLabel,f]),T=(0,v.useMemo)((()=>{var t;return{...jie({dimensions:g,imageSrc:e.large_image[0],imageHeight:e.image_sizes.large_height,imageWidth:e.image_sizes.large_width,maxWidth:700,originData:null!==(t=e.origin_data)&&void 0!==t?t:[0,0],imageOpacity:s,unit:p}),...e.layout}}),[g,e.layout,e.origin_data,e.image_sizes,e.large_image]),M={displaylogo:!1,displayModeBar:!0,showLink:!1,modeBarButtonsToRemove:["zoom","pan","zoom","pan","select","zoomIn","zoomOut","autoScale","resetScale"],scrollZoom:!0};(0,v.useEffect)((()=>{null!==h&&K.react(h.current,{data:E,layout:T,config:M})}),[E,T,M]),(0,v.useEffect)((()=>{null!==h&&K.restyle(h.current,{showscale:r,opacity:r?a:0})}),[r]),v.useEffect((()=>{null!==h&&K.restyle(h.current,{opacity:a},0)}),[a]),v.useEffect((()=>{null!==h&&K.relayout(h.current,{"images[0].opacity":s})}),[s]);const S=g.width/y;return v.createElement(f9,{className:"density-plot"},v.createElement(T7,null,v.createElement(f9,{className:"density-wrapper"},v.createElement("div",{className:"plot-wrapper",ref:h}))),v.createElement(T7,{className:"density-plot-controls-col"},v.createElement(f9,null,v.createElement(U7,{as:T7,className:"density-plot-controls"},v.createElement(Bie,{selectedBinType:t,heatmapActive:r,heatmapTypes:[kie,Eie,Tie],onToggle:()=>i(!r),onClickHeatmapItem:n}),v.createElement(Uie,{active:r&&Fie.includes(t),htmlFor:"negative-colors",text:"View negative controls",groupAttrs:{key:_.all,label:"Show All"},groupMembers:_.members.map((e=>({key:e,label:Iie[e].radioLabel,htmlFor:Iie[e].key}))),onChange:n}),v.createElement("hr",null),v.createElement($ie,{binSizeMultiplierOptions:Aie,binSizeMultiplier:c,heatmapActive:r,binSize:S,unit:e.unit,setBinSizeMultiplier:u}),v.createElement(Hie,{morphologyOpacity:s,setMorphologyOpacity:l}),v.createElement(qie,{heatmapOpacity:a,heatmapActive:r,setHeatmapOpacity:o}),v.createElement(Vie,{label:"Color scale max",densityColorScaleRange:f,heatmapActive:r,zBounds:{min:A+1,max:k},setDensityColorScaleRange:d})))))},VegaLitePlot:F4,DropdownSelector:Wie,ButtonSelector:Kie,BlenderViewerZoomable:Qie,InputElement:eae,TextArea:oae,InputFeedback:yae,FormWrapper:xae,SingleSelect:nae,MultiSelect:iae,StepProgress:Eae,InlineAlert:Mae,CodeBlock:Cae,Hidden:Oae,HdClusteringPlot:Lae,DifferentialExpressionTable:yo,InlineHelp:Dae,ReactTooltip:Iae,HdEndToEndAlignment:Bae,MultiLayerImages:Hae,HtmlFragment:Wae,JavaScript:Yae,SpreadsheetInput:Tle,DownloadableFile:Sle};const yde=new class{constructor(){gde(this,"titles",[])}addTitle(e){this.titles.push(e)}getTitles(){return this.titles}};const bde=new class{constructor(){gde(this,"ids",[])}addId(e){return!this.ids.includes(e)&&(this.ids.push(e),!0)}},xde=document.createElement("link");xde.setAttribute("href","data:image/vnd.microsoft.icon;base64,AAABAAIAEBAAAAEAIAAoBQAAJgAAACAgAAABACAAKBQAAE4FAAAoAAAAEAAAACAAAAABACAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAATifXNFMo2qhTKt2iTSPVKwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADNoQAp1KkAodKoAKjNoQA5AAAAAD8VvwxSJtbFXC3t/1Em2b4qAKoGAAAAAAAAAAAAAAAAAAAAAAAAAACZZgAF0KUAu+O1Af/PpQDIxJwADQAAAAAAAAAASyLWLFUo3fBZLOX/UiXXdQAAAAAAAAAAAAAAAAAAAAAAAAAA0aQAcduvAP/RpgDyyKIALwAAAAAAAAAAAAAAAAAAAABRKNhwWSzk/1Qo2/JPJdQwAAAAAAAAAAAAAAAA0Z4ALdSoAPDbrwD/zKQAcwAAAAAAAAAAAAAAAAAAAAAAAAAAMwCZBVMm17pbLen/VSjawx8AnwgAAAAAqn8ABtCkAMDgsgD/z6UAvap/AAYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABSH9IoVijc7Vks5f9SJ9d7AAAAANKlAHfcrwD/0qcA786jACoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFEo2GpaLej/Uyfb8IxfbCjRpwDs37IA/86kAG4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH8EUyTcjFIh4Jd/KmoM1aQAldOlAI7/fwAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADbINhw+ukQpAAAAAAC4+CgAp/cgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADOuUCNDs13nQ69a5zOumSMku+PkJr/m6Rq13SYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABVAANCsFyzSr9l/0OwWscmspkUJbzjwyvL9f8luuG3AH9/BAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/sFpoSLli/0O0XvQ5sls1AAAAACO34DImvubzKsbu/yW64mwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA6qlUnQ7Nc7Um8Y/9Brlp8AAAAAAAAAAAAAAAAJrvjeCrH8P8mvufuJLbaKgAAAAAAAAAAAAAAAAAAAAAAfwAEQ7FcuUq+ZP9DsF3EH58/CAAAAAAAAAAAAAAAAACRtgcku+HBK8r0/yO547wAmcwFAAAAAAAAAAAAAAABQa5ceUvBZv9DsVz1OatYMQAAAAAAAAAAAAAAAAAAAAAAAAAAIbbdLiW+5vMszvj/IrvifQAA/wEAAAAAAFUAA0GuW1lHvGBnPrFYRQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlt+FEJ8jwZyK94loAf38EAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAIAAAAEAAAAABACAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEsi1SVQKdmUVCjYkVIo2JFSKNqSUyfbiVAayRMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAv48AEM6mAIjOowCTz6UAkdGnAJHPpgCVz6AAKwAAAAAAAAAAOBzGCVQm2rhaLOb/Vyve/1cr3/9ZLOT/UijWkQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADOpQCJ2q4B/9WrAP/VqgD/3LAA/9GmAL+5ogALAAAAAAAAAAAAAAAASyLOJVQo2ulXK97/VSra/1cq2/9VKd35ViXVSgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAzaMAQ9OoAPfSqAD/0acA/9SpAP/RpgDtzqMAKgAAAAAAAAAAAAAAAAAAAAAAAAAAUyjZZVcr3/9VKtr/VSra/1cr4P9TKdnYVSTOFQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMabABLQowDS16wA/9GnAP/RpwD/16sA/9CjAG0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH8CUyfXrlgr4v9VKtr/VSra/1ks4/9SJ9eaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0aQAktmuAf/RpwD/0acA/9itAf/PpAC1f38ABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABLJdIiUyfZ5lcr3v9VKtr/Vyrb/1Qp3ftRJ9ROAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM+jAEbTqgD506gA/9GnAP/UqgD/0qYA6sqjACcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABSJtVdVyve/1Uq2/9VKtr/Vyvf/1Mo2dtHHswZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADCnQAV0aUA1tarAP/RpwD/0qcB/9arAP/OpQBkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJUKNiqWCvj/1Uq2v9VKtr/WCvj/1Io2Z0AAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM2kAJbZrgH/0acA/9GnAP/ZrQH/z6UAsP9VAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFUi1B5TJ9niVyve/1Uq2v9VKtv/VCnd/VEn2FUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADNpQBN06kA+9KoAP/RpwD/1KoA/9GmAObMoAAjAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFIm1VdUKNz+VSrb/1Uq2v9XK9//Uyja4EslzxsAAAAAAAAAAAAAAAAAAAAAx5sAF9GmANvWqwD/0acA/9GnAP/VqgD/zqUAXgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVIn2KFYK+L/VSra/1Uq2v9YK+L/USjZowAAAAIAAAAAAAAAAAAAAADNpQCc2a0B/9GnAP/RpwD/2a0B/9GlAKj/fwACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARx7gGVMm2dxXK9//VSra/1Uq2/9UKN79VSfXWgAAAAAAAAAAzaIAU9SnAP3SqAD/0acA/9WqAP/SqADhw6EAHgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUiPVUFYp3fxVKtv/VSra/1cr3v9TKNjdLR7wEdewAA3PpADX1qsA/9GnAP/SqAD/1KkA/s2iAFgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUCXXm1gr4/9VKtr/Vyrc/1Io2fE4HOwb3LkAFs6kAOzUqQD/0acA/9muAf/PpQCi/wAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABNId0XUijZ1Fks5P9bLej/USjYuwAAqgP/fwAC0aYAs9+yAP/argH/0qYA2c+gABsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABLJdIiUyfZblMl2YFRI9YyAAAAAAAAAADNoAAu0acAgNGqAG/HngAlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAN6ZNF0WxXVVBtl9mN6xZJQAAAAAAAAAAJbThIiW/6GUjveRWHrfWGQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADOqVQ9BsFzJSLpi/0m9ZP9CsFuzAFUAAwAA/wEmveKrKsnz/yrF7v8mvePOGq7WEwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQbBcj0i5Yv9Gsl7/RrNf/0OwXe89o0cZGKrmFSa74+kpv+f/Kb3k/ynF7f8hu+OXAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADyyW0NDs175RrNf/0ayXv9GtWD/Q7Jc5D+lPxQAr+8QJbvj3inB6f8pveT/Kb7l/ya+5/sluuNKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAooUMTQ7Fb00e3Yf9Gsl7/RrJe/0a2YP8/rlpoAAAAAAAAAAAiuN9hJsDo/im+5f8pveT/KcHp/ya649khsdIXAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEOwWpNHuWH/RrJe/0ayXv9IuGH/Qq9csQA/AAQAAAAAAAAAAAAAAAIlueOpKcTs/ym95P8pveT/KcTs/yK54ZsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABDrlpMQ7Re+kazX/9Gsl7/RrVf/0OwXOhBp1AjAAAAAAAAAAAAAAAAAAAAABmy3R4mveLjKcHo/ym95P8pvuX/Jr7o/CS44FMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAN6ZNF0KxXNlGtmD/RrJe/0ayXv9GtmD/PrBYYgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACS44lsmwOj9Kb7l/ym95P8pwen/Jb3k3hyz2RsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBsFucSLli/0ayXv9Gsl7/SLhi/0GvWqsAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASO64aQpxOz/Kb3k/ym95P8qxO3/I7rhpAAA/wEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQa5aUkW1XftGs1//RrJe/0a1YP9DsVzkOaRaHwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHbrXGiW85d4pwej/Kb3k/ym+5f8mwOj9JbrfWQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADqmThpDsV3cR7Zg/0ayXv9Gs17/Q7Rd/kCtWVsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJLjjUya/5/0pvuX/Kb3k/ynB6f8lveThGKzVHwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQrBcoEe5Yf9Gsl7/RrJe/0i5Yv9Br1unAAD/AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJLvjnynF7f8pveT/Kb3k/ynE7f8luuCoAH//AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAECvWldDtF3+RrNe/0ayXv9GtmD/RLFc4T2nVx0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVtNQYJb3l2ynB6f8pveT/Kb3l/ynA6P8iueFfAAAAAAAAAAAAAAAAAAAAAAAAAAA/qlwkQ7Nd6km8Y/9HuGH/R7hh/0a2YP9FsV1VAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAjt+FOJr/m/irE7f8pw+v/Ksfw/ya85e8kttoqAAAAAAAAAAAAAAAAAAAAADuqXR5FuWBNQLBbS0CwW0tEtF9LP6dbQAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgud4+Jb7jSyW740slu+NLJ8PnTSa54CEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA="),xde.setAttribute("rel","icon"),xde.setAttribute("type","image/x-icon"),document.head.appendChild(xde),function(e){const t=new URLSearchParams(document.location.search).get("darkMode"),n="string"==typeof t?["true","1"].includes(`${t}`.toLowerCase()):void 0;(n||e.dark_mode)&&!1!==n&&document.body.classList.add("dark-mode")}(data),document.body.classList.contains("dark-mode")&&function(e,t){t.forEach((t=>{var n;const r=J()(e,t),i={...null!==(n=null==r?void 0:r.layout)&&void 0!==n?n:{},template:Y7};G7()(e,t,{...null!=r?r:{},layout:i})}))}(data,["density_plot","global_qscore_histogram","genewise_qscore_plot","cell_size_distribution","genes_per_cell_plot","transcripts_per_cell_plot","transcript_spatial_plot","transcript_umap_plot","clustering_selector.left_plots","clustering_selector.right_plots"]);let _de=J()(data,"sample.id"),wde=J()(data,"sample.description");const Ade=J()(data,"sample.pipeline");Object.hasOwn(data,ude)&&function(e){const t=e[ude];delete e[ude];const n=function(){const e=new Uint8Array(4);return!((new Uint32Array(e.buffer)[0]=1)&e[0])}(),r=Object.entries(t);for(const[e,i]of r)dde(i)?t[e]=pde(i,n):fde(i)&&(t[e]=hde(i,n));(function e(n){if(Ole()(n)){if(null===n)return null;if(Nle()(n)){if(n.length>0){const t="string"==typeof n[0]&&n[0].startsWith(ude),r=Ole()(n[0]);if(t||r)for(let t=0;t<n.length;t++)n[t]=e(n[t])}}else for(const t of Object.keys(n))n[t]=e(n[t]);return n}if("string"==typeof n&&n.startsWith(ude)){const e=n.substring(11);return t[e]}return n})(e)}(data),void 0===_de&&(_de=J()(data,"summary.sample.id"),wde=J()(data,"summary.sample.description")),function(e){l7(J()(e,"summary.analysis_tab.clustering_selector.right_plots")),l7(J()(e,"summary.analysis_tab.clustering_selector.left_plots")),l7(J()(e,"summary.antibody_tab.antibody_clustering_selector.right_plots")),l7(J()(e,"summary.antibody_tab.antibody_clustering_selector.left_plots")),l7(J()(e,"summary.antigen_tab.antigen_clustering_selector.right_plots")),l7(J()(e,"summary.antigen_tab.antigen_clustering_selector.left_plots")),l7(J()(e,"clustering_selector.left_plots")),l7(J()(e,"clustering_selector.right_plots"))}(data);let kde=_de;wde&&(kde+=` - ${wde}`);const Ede=J()(data,"sample.page_title");function Tde(e){let t=null;return e.childElementCount>0?t=E()(e.children,Tde):"SCRIPT"!==e.tagName&null!==e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(t=e.innerText),function(e,t){let n,r=e.tagName,i={},a={};for(n=0;n<e.attributes.length;n++)i[e.attributes[n].name]=[e.attributes[n].value];const o=e.dataset.component;if(void 0!==o&&(r=vde[o],i=e.dataset.key?{sample:data.sample,...J()(data,e.dataset.key)}:data,void 0!==e.dataset.title&&(i.title=e.dataset.title),a={"label-key":e.dataset.key},o===qn&&yde.addTitle(i.title)),"navbar-wrapper"===e.className&&(r=e6,i={info:data.navbar_info,pipelineName:Ade,titles:"false"===e.dataset.renderHeader?[]:yde.getTitles()}),"namescription-wrapper"===e.className&&(r=n6,i={namescription:kde}),e.classList.contains("alert-wrapper")&&(r=T,i={...data.alarms,alarm_options:data.alarm_options}||{alarms:[]}),"tabs-wrapper"===e.className&&(r=Pn,i={defaultActiveKey:e.dataset.defaultActiveKey,id:e.dataset.id,transition:!1}),"tab-wrapper"===e.className&&(r=Xt,i={eventKey:e.dataset.eventKey,title:e.dataset.title}),void 0!==e.dataset.header){r=Ma;const n=e.querySelector(".helpText"),a=n?n.innerHTML:null;i={title:e.dataset.title,helpText:a},yde.addTitle(i.title),t=null}let s=v.createElement(r,i,t);return void 0!==o&&("ReactTooltip"===o&&bde.addId(i.id)&&(s=v.createElement(v.Fragment,null,s,v.createElement(ure,{id:i.id}))),s=v.createElement("DIV",a,s)),s}(e,t)}document.title=Ede||kde,E()(document.body.children,(e=>{const t=Tde(e);Qe.render(t,e)}));const Mde=document.querySelector(".navbar-wrapper");Mde&&Qe.render(v.createElement(e6,{info:data.navbar_info,pipelineName:Ade,titles:"false"===Mde.dataset.renderHeader?[]:yde.getTitles()}),Mde),document.querySelectorAll('script[data-run="1"]').forEach((e=>{const t=document.createElement("script");t.text=e.innerHTML,e.parentNode.replaceChild(t,e)}));const Sde=document.querySelector("div.navbar-wrapper.insitu_web_summary_cs"),Cde=document.querySelector("ul.nav");Sde&&Cde&&Sde.appendChild(Cde)})()})();